(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[0],[function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"c",function(){return a});r.d(t,"d",function(){return o});r.d(t,"e",function(){return s});r.d(t,"g",function(){return u});r.d(t,"h",function(){return c});r.d(t,"f",function(){return f});r.d(t,"s",function(){return h});r.d(t,"i",function(){return d});r.d(t,"j",function(){return p});r.d(t,"o",function(){return v});r.d(t,"m",function(){return g});r.d(t,"n",function(){return m});r.d(t,"l",function(){return y});r.d(t,"k",function(){return _});r.d(t,"q",function(){return b});r.d(t,"b",function(){return w});r.d(t,"p",function(){return S});r.d(t,"r",function(){return C});r.d(t,"t",function(){return x});r.d(t,"u",function(){return O});r.d(t,"v",function(){return E});var i=r(9);var n=document.implementation.createDocument("","",null);var a="http://www.w3.org/2001/XMLSchema-instance";function o(e,t){return n.createElementNS(e,t)}function s(e,t){return l(e,t,[]).join("")}function l(e,t,r){if(e.nodeType==Node.CDATA_SECTION_NODE||e.nodeType==Node.TEXT_NODE){if(t){r.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,""))}else{r.push(e.nodeValue)}}else{var i=void 0;for(i=e.firstChild;i;i=i.nextSibling){l(i,t,r)}}return r}function u(e){return e instanceof Document}function c(e){return e instanceof Node}function f(e,t,r){return e.getAttributeNS(t,r)||""}function h(e){return(new DOMParser).parseFromString(e,"application/xml")}function d(e,t){return function(r,n){var a=e.call(t,r,n);if(a!==undefined){var o=n[n.length-1];Object(i["c"])(o,a)}}}function p(e,t){return function(r,i){var n=e.call(t!==undefined?t:this,r,i);if(n!==undefined){var a=i[i.length-1];a.push(n)}}}function v(e,t){return function(r,i){var n=e.call(t!==undefined?t:this,r,i);if(n!==undefined){i[i.length-1]=n}}}function g(e,t,r){return function(i,n){var a=e.call(r!==undefined?r:this,i,n);if(a!==undefined){var o=n[n.length-1];var s=t!==undefined?t:i.localName;var l=void 0;if(s in o){l=o[s]}else{l=o[s]=[]}l.push(a)}}}function m(e,t,r){return function(i,n){var a=e.call(r!==undefined?r:this,i,n);if(a!==undefined){var o=n[n.length-1];var s=t!==undefined?t:i.localName;o[s]=a}}}function y(e,t){return function(r,i,n){e.call(t!==undefined?t:this,r,i,n);var a=n[n.length-1];var o=a.node;o.appendChild(r)}}function _(e,t){var r=void 0,i=void 0;return function(t,n,a){if(r===undefined){r={};var o={};o[t.localName]=e;r[t.namespaceURI]=o;i=b(t.localName)}T(r,i,n,a)}}function b(e,t){var r=e;return function(e,i,n){var a=i[i.length-1];var s=a.node;var l=r;if(l===undefined){l=n}var u=t;if(t===undefined){u=s.namespaceURI}return o(u,l)}}var w=b();function S(e,t){var r=t.length;var i=new Array(r);for(var n=0;n<r;++n){i[n]=e[t[n]]}return i}function C(e,t,r){var i=r!==undefined?r:{};var n=void 0,a=void 0;for(n=0,a=e.length;n<a;++n){i[e[n]]=t}return i}function x(e,t,r,i){var n=void 0;for(n=t.firstElementChild;n;n=n.nextElementSibling){var a=e[n.namespaceURI];if(a!==undefined){var o=a[n.localName];if(o!==undefined){o.call(i,n,r)}}}}function O(e,t,r,i,n){i.push(e);x(t,r,i,n);return i.pop()}function T(e,t,r,i,n,a){var o=(n!==undefined?n:r).length;var s=void 0,l=void 0;for(var u=0;u<o;++u){s=r[u];if(s!==undefined){l=t.call(a,s,i,n!==undefined?n[u]:undefined);if(l!==undefined){e[l.namespaceURI][l.localName].call(a,l,s,i)}}}}function E(e,t,r,i,n,a,o){n.push(e);T(t,r,i,n,a,o);return n.pop()}},function(e,t,r){"use strict";var i={};i.assert=function(e,t,r){return e};i.assertNumber=function(e,t,r){return e};i.assertString=function(e,t,r){return e};i.assertFunction=function(e,t,r){return e};i.assertObject=function(e,t,r){return e};i.assertArray=function(e,t,r){return e};i.assertBoolean=function(e,t,r){return e};i.assertElement=function(e,t,r){return e};i.assertInstanceof=function(e,t,r,i){return e};i.assertObjectPrototypeIsIntact=function(){};t["a"]=i},function(e,t,r){"use strict";r.d(t,"a",function(){return u});r.d(t,"b",function(){return c});r.d(t,"c",function(){return f});r.d(t,"e",function(){return h});r.d(t,"d",function(){return d});var i=r(11);function n(e){var t=function t(r){var i=e.listener;var n=e.bindTo||e.target;if(e.callOnce){h(e)}return i.call(n,r)};e.boundListener=t;return t}function a(e,t,r,i){var n=void 0;for(var a=0,o=e.length;a<o;++a){n=e[a];if(n.listener===t&&n.bindTo===r){if(i){n.deleteIndex=a}return n}}return undefined}function o(e,t){var r=e.ol_lm;return r?r[t]:undefined}function s(e){var t=e.ol_lm;if(!t){t=e.ol_lm={}}return t}function l(e,t){var r=o(e,t);if(r){for(var n=0,a=r.length;n<a;++n){e.removeEventListener(t,r[n].boundListener);Object(i["b"])(r[n])}r.length=0;var s=e.ol_lm;if(s){delete s[t];if(Object.keys(s).length===0){delete e.ol_lm}}}}function u(e,t,r,i,o){var l=s(e);var u=l[t];if(!u){u=l[t]=[]}var c=a(u,r,i,false);if(c){if(!o){c.callOnce=false}}else{c={bindTo:i,callOnce:!!o,listener:r,target:e,type:t};e.addEventListener(t,n(c));u.push(c)}return c}function c(e,t,r,i){return u(e,t,r,i,true)}function f(e,t,r,i){var n=o(e,t);if(n){var s=a(n,r,i,true);if(s){h(s)}}}function h(e){if(e&&e.target){e.target.removeEventListener(e.type,e.boundListener);var t=o(e.target,e.type);if(t){var r="deleteIndex"in e?e.deleteIndex:t.indexOf(e);if(r!==-1){t.splice(r,1)}if(t.length===0){l(e.target,e.type)}}Object(i["b"])(e)}}function d(e){var t=s(e);for(var r in t){l(e,r)}}},function(e,t,r){"use strict";var i=1;var n=770;var a=36064;var o=16384;var s=4;var l=5;var u=771;var c=34962;var f=34963;var h=35040;var d=35044;var p=35048;var v=2884;var g=3042;var m=2960;var y=2929;var _=3089;var b=5121;var w=5123;var S=5125;var C=5126;var x=6408;var O=35632;var T=35633;var E=35714;var M=9729;var j=10240;var A=10241;var P=10242;var k=10243;var I=3553;var D=33984;var R=33071;var L=35713;var $=36160;var N=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function F(e,t){var r=N.length;for(var i=0;i<r;++i){try{var n=e.getContext(N[i],t);if(n){return n}}catch(e){}}return null}r.d(t,"a",function(){return Y});r.d(t,"b",function(){return z});r.d(t,"d",function(){return q});r.d(t,"c",function(){return X});var G=true;var U=void 0;var H=void 0;var Y=false;if(typeof window!=="undefined"&&"WebGLRenderingContext"in window){try{var W=document.createElement("CANVAS");var V=F(W,{failIfMajorPerformanceCaveat:true});if(V){Y=true;U=V.getParameter(V.MAX_TEXTURE_SIZE);H=V.getSupportedExtensions()}}catch(e){}}var z="v4.6.4";function q(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e}var B=0;function X(e){return e.ol_uid||(e.ol_uid=++B)}},function(e,t,r){"use strict";r.d(t,"a",function(){return a});r.d(t,"b",function(){return o});r.d(t,"c",function(){return s});r.d(t,"d",function(){return l});r.d(t,"e",function(){return u});r.d(t,"f",function(){return c});r.d(t,"g",function(){return f});r.d(t,"h",function(){return h});r.d(t,"i",function(){return d});r.d(t,"j",function(){return p});r.d(t,"k",function(){return v});r.d(t,"l",function(){return g});r.d(t,"m",function(){return m});r.d(t,"n",function(){return y});var i=r(0);var n=r(153);function a(e){var t=Object(i["e"])(e,false);return o(t)}function o(e){var t=/^\s*(true|1)|(false|0)\s*$/.exec(e);if(t){return t[1]!==undefined||false}else{return undefined}}function s(e){var t=Object(i["e"])(e,false);var r=Date.parse(t);return isNaN(r)?undefined:r/1e3}function l(e){var t=Object(i["e"])(e,false);return u(t)}function u(e){var t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(e);if(t){return parseFloat(t[1])}else{return undefined}}function c(e){var t=Object(i["e"])(e,false);return f(t)}function f(e){var t=/^\s*(\d+)\s*$/.exec(e);if(t){return parseInt(t[1],10)}else{return undefined}}function h(e){return Object(i["e"])(e,false).trim()}function d(e,t){y(e,t?"1":"0")}function p(e,t){e.appendChild(i["a"].createCDATASection(t))}function v(e,t){var r=new Date(t*1e3);var a=r.getUTCFullYear()+"-"+Object(n["b"])(r.getUTCMonth()+1,2)+"-"+Object(n["b"])(r.getUTCDate(),2)+"T"+Object(n["b"])(r.getUTCHours(),2)+":"+Object(n["b"])(r.getUTCMinutes(),2)+":"+Object(n["b"])(r.getUTCSeconds(),2)+"Z";e.appendChild(i["a"].createTextNode(a))}function g(e,t){var r=t.toPrecision();e.appendChild(i["a"].createTextNode(r))}function m(e,t){var r=t.toString();e.appendChild(i["a"].createTextNode(r))}function y(e,t){e.appendChild(i["a"].createTextNode(t))}},function(e,t,r){"use strict";r.d(t,"b",function(){return o});r.d(t,"c",function(){return l});r.d(t,"d",function(){return u});r.d(t,"e",function(){return c});r.d(t,"f",function(){return f});r.d(t,"g",function(){return h});r.d(t,"h",function(){return d});r.d(t,"i",function(){return p});r.d(t,"j",function(){return v});r.d(t,"k",function(){return g});r.d(t,"l",function(){return m});r.d(t,"m",function(){return y});r.d(t,"n",function(){return _});r.d(t,"o",function(){return b});r.d(t,"p",function(){return S});r.d(t,"q",function(){return C});r.d(t,"r",function(){return x});r.d(t,"s",function(){return T});r.d(t,"t",function(){return j});r.d(t,"u",function(){return A});r.d(t,"v",function(){return P});r.d(t,"w",function(){return k});r.d(t,"x",function(){return I});r.d(t,"y",function(){return D});r.d(t,"z",function(){return L});r.d(t,"A",function(){return $});r.d(t,"B",function(){return F});r.d(t,"C",function(){return H});r.d(t,"D",function(){return Y});r.d(t,"E",function(){return W});r.d(t,"F",function(){return V});r.d(t,"H",function(){return z});r.d(t,"I",function(){return q});r.d(t,"J",function(){return B});r.d(t,"G",function(){return X});r.d(t,"a",function(){return K});var i=r(39);var n=r(271);var a=r(110);function o(e){var t=v();for(var r=0,i=e.length;r<i;++r){x(t,e[r])}return t}function s(e,t,r){var i=Math.min.apply(null,e);var n=Math.min.apply(null,t);var a=Math.max.apply(null,e);var o=Math.max.apply(null,t);return g(i,n,a,o,r)}function l(e,t,r){if(r){r[0]=e[0]-t;r[1]=e[1]-t;r[2]=e[2]+t;r[3]=e[3]+t;return r}else{return[e[0]-t,e[1]-t,e[2]+t,e[3]+t]}}function u(e,t){if(t){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];return t}else{return e.slice()}}function c(e,t,r){var i=void 0,n=void 0;if(t<e[0]){i=e[0]-t}else if(e[2]<t){i=t-e[2]}else{i=0}if(r<e[1]){n=e[1]-r}else if(e[3]<r){n=r-e[3]}else{n=0}return i*i+n*n}function f(e,t){return d(e,t[0],t[1])}function h(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]}function d(e,t,r){return e[0]<=t&&t<=e[2]&&e[1]<=r&&r<=e[3]}function p(e,t){var r=e[0];var i=e[1];var n=e[2];var o=e[3];var s=t[0];var l=t[1];var u=a["a"].UNKNOWN;if(s<r){u=u|a["a"].LEFT}else if(s>n){u=u|a["a"].RIGHT}if(l<i){u=u|a["a"].BELOW}else if(l>o){u=u|a["a"].ABOVE}if(u===a["a"].UNKNOWN){u=a["a"].INTERSECTING}return u}function v(){return[Infinity,Infinity,-Infinity,-Infinity]}function g(e,t,r,i,n){if(n){n[0]=e;n[1]=t;n[2]=r;n[3]=i;return n}else{return[e,t,r,i]}}function m(e){return g(Infinity,Infinity,-Infinity,-Infinity,e)}function y(e,t){var r=e[0];var i=e[1];return g(r,i,r,i,t)}function _(e,t){var r=m(t);return O(r,e)}function b(e,t,r,i,n){var a=m(n);return T(a,e,t,r,i)}function w(e,t){var r=m(t);return E(r,e)}function S(e,t){return e[0]==t[0]&&e[2]==t[2]&&e[1]==t[1]&&e[3]==t[3]}function C(e,t){if(t[0]<e[0]){e[0]=t[0]}if(t[2]>e[2]){e[2]=t[2]}if(t[1]<e[1]){e[1]=t[1]}if(t[3]>e[3]){e[3]=t[3]}return e}function x(e,t){if(t[0]<e[0]){e[0]=t[0]}if(t[0]>e[2]){e[2]=t[0]}if(t[1]<e[1]){e[1]=t[1]}if(t[1]>e[3]){e[3]=t[1]}}function O(e,t){for(var r=0,i=t.length;r<i;++r){x(e,t[r])}return e}function T(e,t,r,i,n){for(;r<i;r+=n){M(e,t[r],t[r+1])}return e}function E(e,t){for(var r=0,i=t.length;r<i;++r){O(e,t[r])}return e}function M(e,t,r){e[0]=Math.min(e[0],t);e[1]=Math.min(e[1],r);e[2]=Math.max(e[2],t);e[3]=Math.max(e[3],r)}function j(e,t,r){var i=void 0;i=t.call(r,P(e));if(i){return i}i=t.call(r,k(e));if(i){return i}i=t.call(r,Y(e));if(i){return i}i=t.call(r,H(e));if(i){return i}return false}function A(e){var t=0;if(!z(e)){t=W(e)*$(e)}return t}function P(e){return[e[0],e[1]]}function k(e){return[e[2],e[1]]}function I(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]}function D(e,t){var r=void 0;if(t===n["a"].BOTTOM_LEFT){r=P(e)}else if(t===n["a"].BOTTOM_RIGHT){r=k(e)}else if(t===n["a"].TOP_LEFT){r=H(e)}else if(t===n["a"].TOP_RIGHT){r=Y(e)}else{Object(i["a"])(false,13)}return r}function R(e,t){var r=Math.min(e[0],t[0]);var i=Math.min(e[1],t[1]);var n=Math.max(e[2],t[2]);var a=Math.max(e[3],t[3]);return(n-r)*(a-i)}function L(e,t,r,i,n){var a=t*i[0]/2;var o=t*i[1]/2;var s=Math.cos(r);var l=Math.sin(r);var u=a*s;var c=a*l;var f=o*s;var h=o*l;var d=e[0];var p=e[1];var v=d-u+h;var m=d-u-h;var y=d+u-h;var _=d+u+h;var b=p-c-f;var w=p-c+f;var S=p+c+f;var C=p+c-f;return g(Math.min(v,m,y,_),Math.min(b,w,S,C),Math.max(v,m,y,_),Math.max(b,w,S,C),n)}function $(e){return e[3]-e[1]}function N(e,t){var r=F(e,t);return A(r)}function F(e,t,r){var i=r?r:v();if(V(e,t)){if(e[0]>t[0]){i[0]=e[0]}else{i[0]=t[0]}if(e[1]>t[1]){i[1]=e[1]}else{i[1]=t[1]}if(e[2]<t[2]){i[2]=e[2]}else{i[2]=t[2]}if(e[3]<t[3]){i[3]=e[3]}else{i[3]=t[3]}}else{m(i)}return i}function G(e){return W(e)+$(e)}function U(e){return[e[2]-e[0],e[3]-e[1]]}function H(e){return[e[0],e[3]]}function Y(e){return[e[2],e[3]]}function W(e){return e[2]-e[0]}function V(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}function z(e){return e[2]<e[0]||e[3]<e[1]}function q(e,t){if(t){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];return t}else{return e}}function B(e,t){var r=(e[2]-e[0])/2*(t-1);var i=(e[3]-e[1])/2*(t-1);e[0]-=r;e[2]+=r;e[1]-=i;e[3]+=i}function X(e,t,r){var i=false;var n=p(e,t);var o=p(e,r);if(n===a["a"].INTERSECTING||o===a["a"].INTERSECTING){i=true}else{var s=e[0];var l=e[1];var u=e[2];var c=e[3];var f=t[0];var h=t[1];var d=r[0];var v=r[1];var g=(v-h)/(d-f);var m=void 0,y=void 0;if(!!(o&a["a"].ABOVE)&&!(n&a["a"].ABOVE)){m=d-(v-c)/g;i=m>=s&&m<=u}if(!i&&!!(o&a["a"].RIGHT)&&!(n&a["a"].RIGHT)){y=v-(d-u)*g;i=y>=l&&y<=c}if(!i&&!!(o&a["a"].BELOW)&&!(n&a["a"].BELOW)){m=d-(v-l)/g;i=m>=s&&m<=u}if(!i&&!!(o&a["a"].LEFT)&&!(n&a["a"].LEFT)){y=v-(d-s)*g;i=y>=l&&y<=c}}return i}function K(e,t,r){var i=[e[0],e[1],e[0],e[3],e[2],e[1],e[2],e[3]];t(i,i,2);var n=[i[0],i[2],i[4],i[6]];var a=[i[1],i[3],i[5],i[7]];return s(n,a,r)}},function(e,t,r){"use strict";r.d(t,"c",function(){return a});r.d(t,"h",function(){return o});r.d(t,"i",function(){return s});r.d(t,"k",function(){return l});r.d(t,"m",function(){return u});r.d(t,"d",function(){return c});r.d(t,"j",function(){return f});r.d(t,"l",function(){return h});r.d(t,"e",function(){return d});r.d(t,"f",function(){return p});r.d(t,"g",function(){return v});r.d(t,"r",function(){return g});r.d(t,"p",function(){return m});r.d(t,"n",function(){return y});r.d(t,"o",function(){return _});r.d(t,"q",function(){return b});r.d(t,"s",function(){return w});r.d(t,"a",function(){return C});r.d(t,"b",function(){return x});r.d(t,"t",function(){return T});var i=r(57);var n=r(108);var a=/\d/;var o=/\d\d/;var s=/\d{3}/;var l=/\d{4}/;var u=/[+-]?\d{6}/;var c=/\d\d?/;var f=/\d\d\d\d?/;var h=/\d\d\d\d\d\d?/;var d=/\d{1,3}/;var p=/\d{1,4}/;var v=/[+-]?\d{1,6}/;var g=/\d+/;var m=/[+-]?\d+/;var y=/Z|[+-]\d\d:?\d\d/gi;var _=/Z|[+-]\d\d(?::?\d\d)?/gi;var b=/[+-]?\d+(\.\d{1,3})?/;var w=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;var S={};function C(e,t,r){S[e]=Object(n["a"])(t)?t:function(e,i){return e&&r?r:t}}function x(e,t){if(!Object(i["a"])(S,e)){return new RegExp(O(e))}return S[e](t._strict,t._locale)}function O(e){return T(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,r,i,n){return t||r||i||n}))}function T(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},function(e,t,r){"use strict";t["a"]={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"}},function(e,t,r){"use strict";var i={ANGLE:"a",COLOR:"c",IS_CIRCLE:"l",IS_RECTANGLE:"r",IS_TEXT:"t",NAME:"n",SHOW_LABEL:"b",OPACITY:"o",AZIMUT:"z",SHOW_MEASURE:"m",SIZE:"s",STROKE:"k"};t["a"]=i},function(e,t,r){"use strict";r.d(t,"a",function(){return i});r.d(t,"i",function(){return n});r.d(t,"f",function(){return a});r.d(t,"h",function(){return o});r.d(t,"k",function(){return s});r.d(t,"c",function(){return l});r.d(t,"j",function(){return u});r.d(t,"d",function(){return c});r.d(t,"b",function(){return f});r.d(t,"l",function(){return h});r.d(t,"e",function(){return d});r.d(t,"g",function(){return p});function i(e,t,r){var i=void 0,a=void 0;var o=r||n;var s=0;var l=e.length;var u=false;while(s<l){i=s+(l-s>>1);a=+o(e[i],t);if(a<0){s=i+1}else{l=i;u=!a}}return u?s:~s}function n(e,t){return e>t?1:e<t?-1:0}function a(e,t){return e.indexOf(t)>=0}function o(e,t,r){var i=e.length;if(e[0]<=t){return 0}else if(t<=e[i-1]){return i-1}else{var n=void 0;if(r>0){for(n=1;n<i;++n){if(e[n]<t){return n-1}}}else if(r<0){for(n=1;n<i;++n){if(e[n]<=t){return n}}}else{for(n=1;n<i;++n){if(e[n]==t){return n}else if(e[n]<t){if(e[n-1]-t<t-e[n]){return n-1}else{return n}}}}return i-1}}function s(e,t,r){while(t<r){var i=e[t];e[t]=e[r];e[r]=i;++t;--r}}function l(e,t){var r=Array.isArray(t)?t:[t];var i=r.length;for(var n=0;n<i;n++){e[e.length]=r[n]}}function u(e,t){var r=e.indexOf(t);var i=r>-1;if(i){e.splice(r,1)}return i}function c(e,t){var r=e.length>>>0;var i=void 0;for(var n=0;n<r;n++){i=e[n];if(t(i,n,e)){return i}}return null}function f(e,t){var r=e.length;if(r!==t.length){return false}for(var i=0;i<r;i++){if(e[i]!==t[i]){return false}}return true}function h(e,t){var r=e.length;var i=Array(e.length);var n=void 0;for(n=0;n<r;n++){i[n]={index:n,value:e[n]}}i.sort(function(e,r){return t(e.value,r.value)||e.index-r.index});for(n=0;n<e.length;n++){e[n]=i[n].value}}function d(e,t){var r=void 0;var i=!e.every(function(i,n){r=n;return!t(i,n,e)});return i?r:-1}function p(e,t,r){var i=t||n;return e.every(function(t,n){if(n===0){return true}var a=i(e[n-1],t);return!(a>0||r&&a===0)})}},function(e,t,r){"use strict";r.d(t,"i",function(){return i});r.d(t,"e",function(){return n});r.d(t,"a",function(){return a});r.d(t,"b",function(){return o});r.d(t,"d",function(){return s});r.d(t,"f",function(){return l});r.d(t,"c",function(){return u});r.d(t,"g",function(){return c});r.d(t,"h",function(){return f});var i=0;var n=1;var a=2;var o=3;var s=4;var l=5;var u=6;var c=7;var f=8},function(e,t,r){"use strict";r.d(t,"a",function(){return i});r.d(t,"b",function(){return n});r.d(t,"c",function(){return a});r.d(t,"d",function(){return o});var i=typeof Object.assign==="function"?Object.assign:function(e,t){if(e===undefined||e===null){throw new TypeError("Cannot convert undefined or null to object")}var r=Object(e);for(var i=1,n=arguments.length;i<n;++i){var a=arguments[i];if(a!==undefined&&a!==null){for(var o in a){if(a.hasOwnProperty(o)){r[o]=a[o]}}}}return r};function n(e){for(var t in e){delete e[t]}}function a(e){var t=[];for(var r in e){t.push(e[r])}return t}function o(e){var t=void 0;for(t in e){return false}return!t}},function(e,t,r){"use strict";var i=r(272);var n=r(5);var a=r(22);var o=r(3);var s=r(222);var l=r(93);var u=6378137;var c=Math.PI*u;var f=[-c,-c,c,c];var h=[-180,-85,180,85];function d(e){s["a"].call(this,{code:e,units:l["b"].METERS,extent:f,global:true,worldExtent:h,getPointResolution:function e(t,r){return t/Object(a["b"])(r[1]/u)}})}Object(o["d"])(d,s["a"]);var p=[new d("EPSG:3857"),new d("EPSG:102100"),new d("EPSG:102113"),new d("EPSG:900913"),new d("urn:ogc:def:crs:EPSG:6.18:3:3857"),new d("urn:ogc:def:crs:EPSG::3857"),new d("http://www.opengis.net/gml/srs/epsg.xml#3857")];function v(e,t,r){var i=e.length;var n=r>1?r:2;var a=t;if(a===undefined){if(n>2){a=e.slice()}else{a=new Array(i)}}var o=c;for(var s=0;s<i;s+=n){a[s]=o*e[s]/180;var l=u*Math.log(Math.tan(Math.PI*(e[s+1]+90)/360));if(l>o){l=o}else if(l<-o){l=-o}a[s+1]=l}return a}function g(e,t,r){var i=e.length;var n=r>1?r:2;var a=t;if(a===undefined){if(n>2){a=e.slice()}else{a=new Array(i)}}for(var o=0;o<i;o+=n){a[o]=180*e[o]/c;a[o+1]=360*Math.atan(Math.exp(e[o+1]/u))/Math.PI-90}return a}var m=6378137;var y=[-180,-90,180,90];var _=Math.PI*m/180;function b(e,t){s["a"].call(this,{code:e,units:l["b"].DEGREES,extent:y,axisOrientation:t,global:true,metersPerUnit:_,worldExtent:y})}Object(o["d"])(b,s["a"]);var w=[new b("CRS:84"),new b("EPSG:4326","neu"),new b("urn:ogc:def:crs:EPSG::4326","neu"),new b("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new b("urn:ogc:def:crs:OGC:1.3:CRS84"),new b("urn:ogc:def:crs:OGC:2:84"),new b("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new b("urn:x-ogc:def:crs:EPSG:4326","neu")];var S={};function C(){S={}}function x(e){return S[e]||null}function O(e,t){S[e]=t}var T=r(179);r.d(t,"k",function(){return M});r.d(t,"c",function(){return j});r.d(t,"g",function(){return P});r.d(t,"h",function(){return k});r.d(t,"b",function(){return I});r.d(t,"d",function(){return L});r.d(t,"a",function(){return N});r.d(t,"f",function(){return F});r.d(t,"l",function(){return G});r.d(t,"e",function(){return U});r.d(t,"j",function(){return H});r.d(t,"i",function(){return Y});r.d(t,"m",function(){return W});r.d(t,"n",function(){return V});r.d(t,false,function(){return l["a"]});function E(e,t,r){var i=void 0;if(t!==undefined){for(var n=0,a=e.length;n<a;++n){t[n]=e[n]}i=t}else{i=e.slice()}return i}function M(e,t,r){if(t!==undefined&&e!==t){for(var i=0,n=e.length;i<n;++i){t[i]=e[i]}e=t}return e}function j(e){O(e.getCode(),e);Object(T["a"])(e,e,E)}function A(e){e.forEach(j)}function P(e){var t=null;if(e instanceof s["a"]){t=e}else if(typeof e==="string"){var r=e;t=x(r)}return t}function k(e,t,r,n){e=P(e);var a=void 0;var o=e.getPointResolutionFunc();if(o){a=o(t,r)}else{var s=e.getUnits();if(s==l["b"].DEGREES&&!n||n==l["b"].DEGREES){a=t}else{var u=H(e,P("EPSG:4326"));var c=[r[0]-t/2,r[1],r[0]+t/2,r[1],r[0],r[1]-t/2,r[0],r[1]+t/2];c=u(c,c,2);var f=Object(i["b"])(c.slice(0,2),c.slice(2,4));var h=Object(i["b"])(c.slice(4,6),c.slice(6,8));a=(f+h)/2;var d=n?l["a"][n]:e.getMetersPerUnit();if(d!==undefined){a/=d}}}return a}function I(e){A(e);e.forEach(function(t){e.forEach(function(e){if(t!==e){Object(T["a"])(t,e,E)}})})}function D(e,t,r,i){e.forEach(function(e){t.forEach(function(t){Object(T["a"])(e,t,r);Object(T["a"])(t,e,i)})})}function R(){C();Object(T["b"])()}function L(e,t){if(!e){return P(t)}else if(typeof e==="string"){return P(e)}else{return e}}function $(e){return function(t,r,i){var n=t.length;var a=i!==undefined?i:2;var o=r!==undefined?r:new Array(n);var s=void 0,l=void 0,u=void 0;for(l=0;l<n;l+=a){s=e([t[l],t[l+1]]);o[l]=s[0];o[l+1]=s[1];for(u=a-1;u>=2;--u){o[l+u]=t[l+u]}}return o}}function N(e,t,r,i){var n=P(e);var a=P(t);Object(T["a"])(n,a,$(r));Object(T["a"])(a,n,$(i))}function F(e,t){return W(e,"EPSG:4326",t!==undefined?t:"EPSG:3857")}function G(e,t){var r=W(e,t!==undefined?t:"EPSG:3857","EPSG:4326");var i=r[0];if(i<-180||i>180){r[0]=Object(a["d"])(i+180,360)-180}return r}function U(e,t){if(e===t){return true}var r=e.getUnits()===t.getUnits();if(e.getCode()===t.getCode()){return r}else{var i=H(e,t);return i===E&&r}}function H(e,t){var r=e.getCode();var i=t.getCode();var n=Object(T["c"])(r,i);if(!n){n=M}return n}function Y(e,t){var r=P(e);var i=P(t);return H(r,i)}function W(e,t,r){var i=Y(t,r);return i(e,undefined,e.length)}function V(e,t,r){var i=Y(t,r);return Object(n["a"])(e,i)}function z(e,t,r){var i=H(t,r);return i(e)}function q(){I(p);I(w);D(w,p,v,g)}q()},function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"b",function(){return a});var i;function n(){return i.apply(null,arguments)}function a(e){i=e}},function(e,t,r){"use strict";r.d(t,"c",function(){return l});r.d(t,"b",function(){return u});r.d(t,"d",function(){return c});r.d(t,"e",function(){return f});r.d(t,"f",function(){return h});r.d(t,"g",function(){return d});r.d(t,"i",function(){return p});r.d(t,"k",function(){return v});r.d(t,"l",function(){return g});r.d(t,"m",function(){return m});r.d(t,"j",function(){return y});r.d(t,"h",function(){return _});r.d(t,"o",function(){return b});r.d(t,"a",function(){return x});r.d(t,"p",function(){return T});r.d(t,"q",function(){return E});r.d(t,"s",function(){return M});r.d(t,"r",function(){return j});r.d(t,"n",function(){return A});var i=r(70);var n=r(65);var a=r(11);var o=r(357);var s=r(35);var l="10px sans-serif";var u=[0,0,0,1];var c="round";var f=[];var h=0;var d="round";var p=10;var v=[0,0,0,1];var g="center";var m="middle";var y=[0,0,0,0];var _=1;var b=new o["a"];var w={};var S=null;var C={};var x=function(){var e=60;var t=w;var r="32px ";var n=["monospace","serif"];var o=n.length;var s="wmytzilWMYTZIL@#/&?$%10";var l=void 0,u=void 0;function c(e){var t=O();var i=true;for(var a=0;a<o;++a){var l=n[a];t.font=r+l;u=t.measureText(s).width;if(e!=l){t.font=r+e+","+l;var c=t.measureText(s).width;i=i&&c!=u}}return i}function f(){var r=true;for(var i in t){if(t[i]<e){if(c(i)){t[i]=e;Object(a["b"])(C);S=null;b.clear()}else{++t[i];r=false}}}if(r){clearInterval(l);l=undefined}}return function(r){var n=Object(i["f"])(r);if(!n){return}for(var a=0,o=n.length;a<o;++a){var s=n[a];if(!(s in t)){t[s]=e;if(!c(s)){t[s]=0;if(l===undefined){l=setInterval(f,32)}}}}}}();function O(){if(!S){S=Object(n["a"])(1,1)}return S}var T=function(){var e=void 0;var t=C;return function(r){var i=t[r];if(i==undefined){if(!e){e=document.createElement("span");e.textContent="M";e.style.margin=e.style.padding="0 !important";e.style.position="absolute !important";e.style.left="-99999px !important"}e.style.font=r;document.body.appendChild(e);i=t[r]=e.offsetHeight;document.body.removeChild(e)}return i}}();function E(e,t){var r=O();if(e!=r.font){r.font=e}return r.measureText(t).width}function M(e,t,r,i){if(t!==0){e.translate(r,i);e.rotate(t);e.translate(-r,-i)}}var j=Object(s["c"])();function A(e,t,r,i,n,a,o,s,l,u,c){var f=void 0;if(r!=1){f=e.globalAlpha;e.globalAlpha=f*r}if(t){e.setTransform.apply(e,t)}e.drawImage(i,n,a,o,s,l,u,o*c,s*c);if(f){e.globalAlpha=f}if(t){e.setTransform.apply(e,j)}}},function(e,t,r){"use strict";r.d(t,"d",function(){return u});r.d(t,"a",function(){return f});r.d(t,"b",function(){return h});var i=r(39);var n=r(7);var a=r(101);var o=r(47);var s=r(38);var l=function e(t){var r=t||{};this.geometry_=null;this.geometryFunction_=d;if(r.geometry!==undefined){this.setGeometry(r.geometry)}this.fill_=r.fill!==undefined?r.fill:null;this.image_=r.image!==undefined?r.image:null;this.renderer_=r.renderer!==undefined?r.renderer:null;this.stroke_=r.stroke!==undefined?r.stroke:null;this.text_=r.text!==undefined?r.text:null;this.zIndex_=r.zIndex};l.prototype.clone=function(){var e=this.getGeometry();if(e&&e.clone){e=e.clone()}return new l({geometry:e,fill:this.getFill()?this.getFill().clone():undefined,image:this.getImage()?this.getImage().clone():undefined,stroke:this.getStroke()?this.getStroke().clone():undefined,text:this.getText()?this.getText().clone():undefined,zIndex:this.getZIndex()})};l.prototype.getRenderer=function(){return this.renderer_};l.prototype.setRenderer=function(e){this.renderer_=e};l.prototype.getGeometry=function(){return this.geometry_};l.prototype.getGeometryFunction=function(){return this.geometryFunction_};l.prototype.getFill=function(){return this.fill_};l.prototype.setFill=function(e){this.fill_=e};l.prototype.getImage=function(){return this.image_};l.prototype.setImage=function(e){this.image_=e};l.prototype.getStroke=function(){return this.stroke_};l.prototype.setStroke=function(e){this.stroke_=e};l.prototype.getText=function(){return this.text_};l.prototype.setText=function(e){this.text_=e};l.prototype.getZIndex=function(){return this.zIndex_};l.prototype.setGeometry=function(e){if(typeof e==="function"){this.geometryFunction_=e}else if(typeof e==="string"){this.geometryFunction_=function(t){return t.get(e)}}else if(!e){this.geometryFunction_=d}else if(e!==undefined){this.geometryFunction_=function(){return e}}this.geometry_=e};l.prototype.setZIndex=function(e){this.zIndex_=e};function u(e){var t=void 0;if(typeof e==="function"){t=e}else{var r=void 0;if(Array.isArray(e)){r=e}else{Object(i["a"])(e instanceof l,41);r=[e]}t=function e(){return r}}return t}var c=null;function f(e,t){if(!c){var r=new o["a"]({color:"rgba(255,255,255,0.4)"});var i=new s["a"]({color:"#3399CC",width:1.25});c=[new l({image:new a["a"]({fill:r,stroke:i,radius:5}),fill:r,stroke:i})]}return c}function h(){var e={};var t=[255,255,255,1];var r=[0,153,255,1];var i=3;e[n["a"].POLYGON]=[new l({fill:new o["a"]({color:[255,255,255,.5]})})];e[n["a"].MULTI_POLYGON]=e[n["a"].POLYGON];e[n["a"].LINE_STRING]=[new l({stroke:new s["a"]({color:t,width:i+2})}),new l({stroke:new s["a"]({color:r,width:i})})];e[n["a"].MULTI_LINE_STRING]=e[n["a"].LINE_STRING];e[n["a"].CIRCLE]=e[n["a"].POLYGON].concat(e[n["a"].LINE_STRING]);e[n["a"].POINT]=[new l({image:new a["a"]({radius:i*2,fill:new o["a"]({color:r}),stroke:new s["a"]({color:t,width:i/2})}),zIndex:Infinity})];e[n["a"].MULTI_POINT]=e[n["a"].POINT];e[n["a"].GEOMETRY_COLLECTION]=e[n["a"].POLYGON].concat(e[n["a"].LINE_STRING],e[n["a"].POINT]);return e}function d(e){return e.getGeometry()}t["c"]=l},function(e,t,r){"use strict";t["a"]={CHANGE:"change",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",ERROR:"error",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEOUT:"mouseout",MOUSEUP:"mouseup",MOUSEWHEEL:"mousewheel",MSPOINTERDOWN:"MSPointerDown",RESIZE:"resize",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",WHEEL:"wheel"}},function(e,t,r){"use strict";r.r(t);var i="http://www.w3.org/1999/xhtml";var n={svg:"http://www.w3.org/2000/svg",xhtml:i,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};var a=function(e){var t=e+="",r=t.indexOf(":");if(r>=0&&(t=e.slice(0,r))!=="xmlns")e=e.slice(r+1);return n.hasOwnProperty(t)?{space:n[t],local:e}:e};function o(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===i&&t.documentElement.namespaceURI===i?t.createElement(e):t.createElementNS(r,e)}}function s(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}var l=function(e){var t=a(e);return(t.local?s:o)(t)};function u(){}var c=function(e){return e==null?u:function(){return this.querySelector(e)}};var f=function(e){if(typeof e!=="function")e=c(e);for(var t=this._groups,r=t.length,i=new Array(r),n=0;n<r;++n){for(var a=t[n],o=a.length,s=i[n]=new Array(o),l,u,f=0;f<o;++f){if((l=a[f])&&(u=e.call(l,l.__data__,f,a))){if("__data__"in l)u.__data__=l.__data__;s[f]=u}}}return new qe(i,this._parents)};function h(){return[]}var d=function(e){return e==null?h:function(){return this.querySelectorAll(e)}};var p=function(e){if(typeof e!=="function")e=d(e);for(var t=this._groups,r=t.length,i=[],n=[],a=0;a<r;++a){for(var o=t[a],s=o.length,l,u=0;u<s;++u){if(l=o[u]){i.push(e.call(l,l.__data__,u,o));n.push(l)}}}return new qe(i,n)};var v=function(e){return function(){return this.matches(e)}};if(typeof document!=="undefined"){var g=document.documentElement;if(!g.matches){var m=g.webkitMatchesSelector||g.msMatchesSelector||g.mozMatchesSelector||g.oMatchesSelector;v=function(e){return function(){return m.call(this,e)}}}}var y=v;var _=function(e){if(typeof e!=="function")e=y(e);for(var t=this._groups,r=t.length,i=new Array(r),n=0;n<r;++n){for(var a=t[n],o=a.length,s=i[n]=[],l,u=0;u<o;++u){if((l=a[u])&&e.call(l,l.__data__,u,a)){s.push(l)}}}return new qe(i,this._parents)};var b=function(e){return new Array(e.length)};var w=function(){return new qe(this._enter||this._groups.map(b),this._parents)};function S(e,t){this.ownerDocument=e.ownerDocument;this.namespaceURI=e.namespaceURI;this._next=null;this._parent=e;this.__data__=t}S.prototype={constructor:S,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var C=function(e){return function(){return e}};var x="$";function O(e,t,r,i,n,a){var o=0,s,l=t.length,u=a.length;for(;o<u;++o){if(s=t[o]){s.__data__=a[o];i[o]=s}else{r[o]=new S(e,a[o])}}for(;o<l;++o){if(s=t[o]){n[o]=s}}}function T(e,t,r,i,n,a,o){var s,l,u={},c=t.length,f=a.length,h=new Array(c),d;for(s=0;s<c;++s){if(l=t[s]){h[s]=d=x+o.call(l,l.__data__,s,t);if(d in u){n[s]=l}else{u[d]=l}}}for(s=0;s<f;++s){d=x+o.call(e,a[s],s,a);if(l=u[d]){i[s]=l;l.__data__=a[s];u[d]=null}else{r[s]=new S(e,a[s])}}for(s=0;s<c;++s){if((l=t[s])&&u[h[s]]===l){n[s]=l}}}var E=function(e,t){if(!e){d=new Array(this.size()),u=-1;this.each(function(e){d[++u]=e});return d}var r=t?T:O,i=this._parents,n=this._groups;if(typeof e!=="function")e=C(e);for(var a=n.length,o=new Array(a),s=new Array(a),l=new Array(a),u=0;u<a;++u){var c=i[u],f=n[u],h=f.length,d=e.call(c,c&&c.__data__,u,i),p=d.length,v=s[u]=new Array(p),g=o[u]=new Array(p),m=l[u]=new Array(h);r(c,f,v,g,m,d,t);for(var y=0,_=0,b,w;y<p;++y){if(b=v[y]){if(y>=_)_=y+1;while(!(w=g[_])&&++_<p);b._next=w||null}}}o=new qe(o,i);o._enter=s;o._exit=l;return o};var M=function(){return new qe(this._exit||this._groups.map(b),this._parents)};var j=function(e){for(var t=this._groups,r=e._groups,i=t.length,n=r.length,a=Math.min(i,n),o=new Array(i),s=0;s<a;++s){for(var l=t[s],u=r[s],c=l.length,f=o[s]=new Array(c),h,d=0;d<c;++d){if(h=l[d]||u[d]){f[d]=h}}}for(;s<i;++s){o[s]=t[s]}return new qe(o,this._parents)};var A=function(){for(var e=this._groups,t=-1,r=e.length;++t<r;){for(var i=e[t],n=i.length-1,a=i[n],o;--n>=0;){if(o=i[n]){if(a&&a!==o.nextSibling)a.parentNode.insertBefore(o,a);a=o}}}return this};var P=function(e){if(!e)e=k;function t(t,r){return t&&r?e(t.__data__,r.__data__):!t-!r}for(var r=this._groups,i=r.length,n=new Array(i),a=0;a<i;++a){for(var o=r[a],s=o.length,l=n[a]=new Array(s),u,c=0;c<s;++c){if(u=o[c]){l[c]=u}}l.sort(t)}return new qe(n,this._parents).order()};function k(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var I=function(){var e=arguments[0];arguments[0]=this;e.apply(null,arguments);return this};var D=function(){var e=new Array(this.size()),t=-1;this.each(function(){e[++t]=this});return e};var R=function(){for(var e=this._groups,t=0,r=e.length;t<r;++t){for(var i=e[t],n=0,a=i.length;n<a;++n){var o=i[n];if(o)return o}}return null};var L=function(){var e=0;this.each(function(){++e});return e};var $=function(){return!this.node()};var N=function(e){for(var t=this._groups,r=0,i=t.length;r<i;++r){for(var n=t[r],a=0,o=n.length,s;a<o;++a){if(s=n[a])e.call(s,s.__data__,a,n)}}return this};function F(e){return function(){this.removeAttribute(e)}}function G(e){return function(){this.removeAttributeNS(e.space,e.local)}}function U(e,t){return function(){this.setAttribute(e,t)}}function H(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Y(e,t){return function(){var r=t.apply(this,arguments);if(r==null)this.removeAttribute(e);else this.setAttribute(e,r)}}function W(e,t){return function(){var r=t.apply(this,arguments);if(r==null)this.removeAttributeNS(e.space,e.local);else this.setAttributeNS(e.space,e.local,r)}}var V=function(e,t){var r=a(e);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((t==null?r.local?G:F:typeof t==="function"?r.local?W:Y:r.local?H:U)(r,t))};var z=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView};function q(e){return function(){this.style.removeProperty(e)}}function B(e,t,r){return function(){this.style.setProperty(e,t,r)}}function X(e,t,r){return function(){var i=t.apply(this,arguments);if(i==null)this.style.removeProperty(e);else this.style.setProperty(e,i,r)}}var K=function(e,t,r){return arguments.length>1?this.each((t==null?q:typeof t==="function"?X:B)(e,t,r==null?"":r)):Z(this.node(),e)};function Z(e,t){return e.style.getPropertyValue(t)||z(e).getComputedStyle(e,null).getPropertyValue(t)}function Q(e){return function(){delete this[e]}}function J(e,t){return function(){this[e]=t}}function ee(e,t){return function(){var r=t.apply(this,arguments);if(r==null)delete this[e];else this[e]=r}}var te=function(e,t){return arguments.length>1?this.each((t==null?Q:typeof t==="function"?ee:J)(e,t)):this.node()[e]};function re(e){return e.trim().split(/^|\s+/)}function ie(e){return e.classList||new ne(e)}function ne(e){this._node=e;this._names=re(e.getAttribute("class")||"")}ne.prototype={add:function(e){var t=this._names.indexOf(e);if(t<0){this._names.push(e);this._node.setAttribute("class",this._names.join(" "))}},remove:function(e){var t=this._names.indexOf(e);if(t>=0){this._names.splice(t,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function(e){return this._names.indexOf(e)>=0}};function ae(e,t){var r=ie(e),i=-1,n=t.length;while(++i<n)r.add(t[i])}function oe(e,t){var r=ie(e),i=-1,n=t.length;while(++i<n)r.remove(t[i])}function se(e){return function(){ae(this,e)}}function le(e){return function(){oe(this,e)}}function ue(e,t){return function(){(t.apply(this,arguments)?ae:oe)(this,e)}}var ce=function(e,t){var r=re(e+"");if(arguments.length<2){var i=ie(this.node()),n=-1,a=r.length;while(++n<a)if(!i.contains(r[n]))return false;return true}return this.each((typeof t==="function"?ue:t?se:le)(r,t))};function fe(){this.textContent=""}function he(e){return function(){this.textContent=e}}function de(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}var pe=function(e){return arguments.length?this.each(e==null?fe:(typeof e==="function"?de:he)(e)):this.node().textContent};function ve(){this.innerHTML=""}function ge(e){return function(){this.innerHTML=e}}function me(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}var ye=function(e){return arguments.length?this.each(e==null?ve:(typeof e==="function"?me:ge)(e)):this.node().innerHTML};function _e(){if(this.nextSibling)this.parentNode.appendChild(this)}var be=function(){return this.each(_e)};function we(){if(this.previousSibling)this.parentNode.insertBefore(this,this.parentNode.firstChild)}var Se=function(){return this.each(we)};var Ce=function(e){var t=typeof e==="function"?e:l(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})};function xe(){return null}var Oe=function(e,t){var r=typeof e==="function"?e:l(e),i=t==null?xe:typeof t==="function"?t:c(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})};function Te(){var e=this.parentNode;if(e)e.removeChild(this)}var Ee=function(){return this.each(Te)};function Me(){return this.parentNode.insertBefore(this.cloneNode(false),this.nextSibling)}function je(){return this.parentNode.insertBefore(this.cloneNode(true),this.nextSibling)}var Ae=function(e){return this.select(e?je:Me)};var Pe=function(e){return arguments.length?this.property("__data__",e):this.node().__data__};var ke={};var Ie=null;if(typeof document!=="undefined"){var De=document.documentElement;if(!("onmouseenter"in De)){ke={mouseenter:"mouseover",mouseleave:"mouseout"}}}function Re(e,t,r){e=Le(e,t,r);return function(t){var r=t.relatedTarget;if(!r||r!==this&&!(r.compareDocumentPosition(this)&8)){e.call(this,t)}}}function Le(e,t,r){return function(i){var n=Ie;Ie=i;try{e.call(this,this.__data__,t,r)}finally{Ie=n}}}function $e(e){return e.trim().split(/^|\s+/).map(function(e){var t="",r=e.indexOf(".");if(r>=0)t=e.slice(r+1),e=e.slice(0,r);return{type:e,name:t}})}function Ne(e){return function(){var t=this.__on;if(!t)return;for(var r=0,i=-1,n=t.length,a;r<n;++r){if(a=t[r],(!e.type||a.type===e.type)&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.capture)}else{t[++i]=a}}if(++i)t.length=i;else delete this.__on}}function Fe(e,t,r){var i=ke.hasOwnProperty(e.type)?Re:Le;return function(n,a,o){var s=this.__on,l,u=i(t,a,o);if(s)for(var c=0,f=s.length;c<f;++c){if((l=s[c]).type===e.type&&l.name===e.name){this.removeEventListener(l.type,l.listener,l.capture);this.addEventListener(l.type,l.listener=u,l.capture=r);l.value=t;return}}this.addEventListener(e.type,u,r);l={type:e.type,name:e.name,value:t,listener:u,capture:r};if(!s)this.__on=[l];else s.push(l)}}var Ge=function(e,t,r){var i=$e(e+""),n,a=i.length,o;if(arguments.length<2){var s=this.node().__on;if(s)for(var l=0,u=s.length,c;l<u;++l){for(n=0,c=s[l];n<a;++n){if((o=i[n]).type===c.type&&o.name===c.name){return c.value}}}return}s=t?Fe:Ne;if(r==null)r=false;for(n=0;n<a;++n)this.each(s(i[n],t,r));return this};function Ue(e,t,r,i){var n=Ie;e.sourceEvent=Ie;Ie=e;try{return t.apply(r,i)}finally{Ie=n}}function He(e,t,r){var i=z(e),n=i.CustomEvent;if(typeof n==="function"){n=new n(t,r)}else{n=i.document.createEvent("Event");if(r)n.initEvent(t,r.bubbles,r.cancelable),n.detail=r.detail;else n.initEvent(t,false,false)}e.dispatchEvent(n)}function Ye(e,t){return function(){return He(this,e,t)}}function We(e,t){return function(){return He(this,e,t.apply(this,arguments))}}var Ve=function(e,t){return this.each((typeof t==="function"?We:Ye)(e,t))};var ze=[null];function qe(e,t){this._groups=e;this._parents=t}function Be(){return new qe([[document.documentElement]],ze)}qe.prototype=Be.prototype={constructor:qe,select:f,selectAll:p,filter:_,data:E,enter:w,exit:M,merge:j,order:A,sort:P,call:I,nodes:D,node:R,size:L,empty:$,each:N,attr:V,style:K,property:te,classed:ce,text:pe,html:ye,raise:be,lower:Se,append:Ce,insert:Oe,remove:Ee,clone:Ae,datum:Pe,on:Ge,dispatch:Ve};var Xe=Be;var Ke=function(e){return typeof e==="string"?new qe([[document.querySelector(e)]],[document.documentElement]):new qe([[e]],ze)};var Ze=function(e){return Ke(l(e).call(document.documentElement))};var Qe=0;function Je(){return new et}function et(){this._="@"+(++Qe).toString(36)}et.prototype=Je.prototype={constructor:et,get:function(e){var t=this._;while(!(t in e))if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var tt=function(){var e=Ie,t;while(t=e.sourceEvent)e=t;return e};var rt=function(e,t){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();i.x=t.clientX,i.y=t.clientY;i=i.matrixTransform(e.getScreenCTM().inverse());return[i.x,i.y]}var n=e.getBoundingClientRect();return[t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop]};var it=function(e){var t=tt();if(t.changedTouches)t=t.changedTouches[0];return rt(e,t)};var nt=function(e){return typeof e==="string"?new qe([document.querySelectorAll(e)],[document.documentElement]):new qe([e==null?[]:e],ze)};var at=function(e,t,r){if(arguments.length<3)r=t,t=tt().changedTouches;for(var i=0,n=t?t.length:0,a;i<n;++i){if((a=t[i]).identifier===r){return rt(e,a)}}return null};var ot=function(e,t){if(t==null)t=tt().touches;for(var r=0,i=t?t.length:0,n=new Array(i);r<i;++r){n[r]=rt(e,t[r])}return n};r.d(t,"create",function(){return Ze});r.d(t,"creator",function(){return l});r.d(t,"local",function(){return Je});r.d(t,"matcher",function(){return y});r.d(t,"mouse",function(){return it});r.d(t,"namespace",function(){return a});r.d(t,"namespaces",function(){return n});r.d(t,"clientPoint",function(){return rt});r.d(t,"select",function(){return Ke});r.d(t,"selectAll",function(){return nt});r.d(t,"selection",function(){return Xe});r.d(t,"selector",function(){return c});r.d(t,"selectorAll",function(){return d});r.d(t,"style",function(){return Z});r.d(t,"touch",function(){return at});r.d(t,"touches",function(){return ot});r.d(t,"window",function(){return z});r.d(t,"event",function(){return Ie});r.d(t,"customEvent",function(){return Ue})},function(e,t,r){"use strict";var i={CIRCLE:"Circle",LINE_STRING:"LineString",MULTI_LINE_STRING:"MultiLineString",MULTI_POINT:"MultiPoint",MULTI_POLYGON:"MultiPolygon",POINT:"Point",POLYGON:"Polygon",RECTANGLE:"Rectangle",TEXT:"Text"};t["a"]=i},function(e,t,r){"use strict";var i=r(1);var n=r(78);var a=r(3);var o=r(9);var s=r(28);var l=r(102);var u=r(54);var c=function e(t,r,i,n,a,o){l["a"].call(this);this.addBlankBackgroundLayer_=true;if(o.addBlankBackgroundLayer!==undefined){this.addBlankBackgroundLayer_=o.addBlankBackgroundLayer}this.$q_=i;this.$http_=t;this.treeUrl_=undefined;if(r.has("gmfTreeUrl")){this.treeUrl_=r.get("gmfTreeUrl")}this.cacheVersion_="0";if(r.has("cacheVersion")){this.cacheVersion_=r.get("cacheVersion")}this.ngeoLocation_=null;if(r.has("ngeoLocation")){this.ngeoLocation_=r.get("ngeoLocation")}this.layerHelper_=n;this.gettextCatalog=a;this.deferred_=i.defer();this.promise_=this.deferred_.promise;this.loaded=false;this.bgLayerPromise_=null};c.$inject=["$http","$injector","$q","ngeoLayerHelper","gettextCatalog","gmfThemesOptions"];c.$inject=["$http","$injector","$q","ngeoLayerHelper","gettextCatalog","gmfThemesOptions"];a["d"](c,l["a"]);c.findGroupByLayerNodeName=function(e,t){for(var r=0,i=e.length;r<i;r++){var n=e[r];for(var a=0,o=n.children.length;a<o;a++){var s=n.children[a];var l=[];c.getFlatNodes(s,l);if(c.findObjectByName(l,t)){return s}}}return null};c.findGroupByName=function(e,t){for(var r=0,i=e.length;r<i;r++){var n=e[r];for(var a=0,o=n.children.length;a<o;a++){var s=n.children[a];var l=[];c.getFlatInternalNodes(s,l);if(c.findObjectByName(l,t)){return s}}}return null};c.findObjectByName=function(e,t){return o["d"](e,function(e){return e["name"]===t})};c.findThemeByName=function(e,t){return c.findObjectByName(e,t)};c.getFlatInternalNodes=function(e,t){var r=e.children;if(r!==undefined){t.push(e);for(var i=0;i<r.length;i++){c.getFlatInternalNodes(r[i],t)}}};c.getFlatNodes=function(e,t){var r=void 0;var i=e.children;if(i!==undefined){for(r=0;r<i.length;r++){c.getFlatNodes(i[r],t)}}else{t.push(e)}};c.prototype.getBgLayers=function(){var e=this;var t=this.gettextCatalog;if(this.bgLayerPromise_){return this.bgLayerPromise_}var r=this.$q_;var n=this.layerHelper_;var o=function e(t,r){r.push(a["c"](t));var i=t.children||[];i.forEach(function(t){e(t,r)})};var l=function e(t,r){r.set("label",t.name);r.set("metadata",t.metadata);r.set("dimensions",t.dimensions);var i=[];o(t,i);r.set("querySourceIds",i);return r};var c=function e(t,a){if(a.type==="WMTS"){var o=a;i["a"].assert(o.url,"Layer URL is required");return n.createWMTSLayerFromCapabilitites(o.url,o.layer||"",o.matrixSet,a.dimensions,o.metadata.customOpenLayersOptions).then(l.bind(null,a)).then(null,function(e){var t='Unable to build layer "'+o.layer+'" from WMTSCapabilities: '+o.url+"\n";t+='OpenLayers error is "'+e["message"];console.error(t);return r.resolve(undefined)})}else if(a.type==="WMS"){var s=a;i["a"].assert(s.ogcServer,"An OGC server is required");var u=t[s.ogcServer];i["a"].assert(u,"The OGC server was not found");i["a"].assert(u.url,"The server URL is required");i["a"].assert(u.imageType,"The server image type is required");var c={STYLES:s.styles};if(a.dimensions){for(var f=Object.entries(a.dimensions),h=Array.isArray(f),d=0,f=h?f:f[Symbol.iterator]();;){var p;if(h){if(d>=f.length)break;p=f[d++]}else{d=f.next();if(d.done)break;p=d.value}var v=p;var g=v[0];var m=v[1];c[g]=m}}return l(a,n.createBasicWMSLayer(u.url,s.layers||"",u.imageType,u.type,undefined,c,u.credential?"use-credentials":"anonymous",s.metadata.customOpenLayersOptions))}i["a"].fail("Unsupported type: "+a.type)};var f=function e(t,i){var a=i.children.map(function(e){return e}).reverse();var o=a.map(c.bind(null,t));return r.all(o).then(function(e){var t=void 0;if(e){e=e.filter(function(e){return e});t=new s["b"](e)}var r=n.createBasicGroup(t);l(i,r);return r})};var h=function(e){var t=e.background_layers.map(function(t){var r=t.type;if(r==="WMTS"||r==="WMS"){return c(e.ogcServers,t)}else if(t.children){return f(e.ogcServers,t)}else{return undefined}},this);return r.all(t)}.bind(this);this.bgLayerPromise_=this.promise_.then(h).then(function(r){var i=[];if(e.addBlankBackgroundLayer_){t.getString("blank");i.push(new u["a"]({label:"blank",metadata:{thumbnail:""}}))}r.forEach(function(e){if(e){i.push(e)}});return i});return this.bgLayerPromise_};c.prototype.getThemeObject=function(e){return this.promise_.then(function(t){return c.findThemeByName(t.themes,e)})};c.prototype.getThemesObject=function(){return this.promise_.then(function(e){return e.themes})};c.prototype.getBackgroundLayersObject=function(){i["a"].assert(this.promise_!==null);return this.promise_.then(function(e){return e.background_layers})};c.prototype.getOgcServersObject=function(){i["a"].assert(this.promise_!==null);return this.promise_.then(function(e){return e.ogcServers})};c.prototype.hasEditableLayers=function(){i["a"].assert(this.promise_!==null);return this.promise_.then(this.hasEditableLayers_.bind(this))};c.prototype.hasEditableLayers_=function(e){var t=this;return e.themes.some(function(e){var r=e.children.some(t.hasNodeEditableLayers_.bind(t));return r})};c.prototype.hasNodeEditableLayers_=function(e){if(e.editable){return true}var t=false;var r=e.children;if(r&&r.length){t=r.some(this.hasNodeEditableLayers_.bind(this))}return t};c.getSnappingConfig=function(e){var t=e.metadata&&e.metadata.snappingConfig!==undefined?e.metadata.snappingConfig:null;return t};c.getNodeMaxResolution=function(e){var t=e.metadata;var r=e.maxResolutionHint;if(r===undefined&&t!==undefined){r=t.maxResolution}return r};c.getNodeMinResolution=function(e){var t=e.metadata;var r=e.minResolutionHint;if(r===undefined&&t!==undefined){r=t.minResolution}return r};c.prototype.loadThemes=function(e){var t=this;i["a"].assert(this.treeUrl_,"gmfTreeUrl should be defined.");if(this.loaded){this.deferred_=this.$q_.defer();this.promise_=this.deferred_.promise;this.bgLayerPromise_=null;this.loaded=false}this.$http_.get(this.treeUrl_,{params:e!==undefined?{role:e,cache_version:this.cacheVersion_}:{cache_version:this.cacheVersion_},cache:false,withCredentials:true}).then(function(e){if(e.data.errors.length!=0){var r="The themes contain some errors:\n"+e.data.errors.join("\n");console.error(r);if(t.ngeoLocation_!==null&&t.ngeoLocation_.hasParam("debug")){window.alert(r)}}t.deferred_.resolve(e.data);t.dispatchEvent("change");t.loaded=true},function(e){t.deferred_.reject(e)})};c.NodeType={MIXED_GROUP:"MixedGroup",NOT_MIXED_GROUP:"NotMixedGroup",WMTS:"WMTS",WMS:"WMS"};c.module=angular.module("gmfThemes",[n["a"].module.name]);c.module.value("gmfThemesOptions",{});c.module.service("gmfThemes",c);t["a"]=c},function(e,t,r){"use strict";r.d(t,"e",function(){return a});r.d(t,"d",function(){return l});r.d(t,"a",function(){return u});r.d(t,"c",function(){return h});r.d(t,"b",function(){return d});var i=r(140);var n=r(108);var a=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;var o=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;var s={};var l={};function u(e,t,r,n){var a=n;if(typeof n==="string"){a=function(){return this[n]()}}if(e){l[e]=a}if(t){l[t[0]]=function(){return Object(i["a"])(a.apply(this,arguments),t[1],t[2])}}if(r){l[r]=function(){return this.localeData().ordinal(a.apply(this,arguments),e)}}}function c(e){if(e.match(/\[[\s\S]/)){return e.replace(/^\[|\]$/g,"")}return e.replace(/\\/g,"")}function f(e){var t=e.match(a),r,i;for(r=0,i=t.length;r<i;r++){if(l[t[r]]){t[r]=l[t[r]]}else{t[r]=c(t[r])}}return function(r){var a="",o;for(o=0;o<i;o++){a+=Object(n["a"])(t[o])?t[o].call(r,e):t[o]}return a}}function h(e,t){if(!e.isValid()){return e.localeData().invalidDate()}t=d(t,e.localeData());s[t]=s[t]||f(t);return s[t](e)}function d(e,t){var r=5;function i(e){return t.longDateFormat(e)||e}o.lastIndex=0;while(r>=0&&o.test(e)){e=e.replace(o,i);o.lastIndex=0;r-=1}return e}},function(e,t,r){"use strict";var i=r(39);var n=r(2);var a=r(16);var o=r(3);var s=r(44);var l=r(117);var u=r(15);var c=function e(t){s["a"].call(this);this.id_=undefined;this.geometryName_="geometry";this.style_=null;this.styleFunction_=undefined;this.geometryChangeKey_=null;Object(n["a"])(this,Object(s["b"])(this.geometryName_),this.handleGeometryChanged_,this);if(t!==undefined){if(t instanceof l["a"]||!t){var r=t;this.setGeometry(r)}else{var i=t;this.setProperties(i)}}};Object(o["d"])(c,s["a"]);c.prototype.clone=function(){var e=new c(this.getProperties());e.setGeometryName(this.getGeometryName());var t=this.getGeometry();if(t){e.setGeometry(t.clone())}var r=this.getStyle();if(r){e.setStyle(r)}return e};c.prototype.getGeometry=function(){return this.get(this.geometryName_)};c.prototype.getId=function(){return this.id_};c.prototype.getGeometryName=function(){return this.geometryName_};c.prototype.getStyle=function(){return this.style_};c.prototype.getStyleFunction=function(){return this.styleFunction_};c.prototype.handleGeometryChange_=function(){this.changed()};c.prototype.handleGeometryChanged_=function(){if(this.geometryChangeKey_){Object(n["e"])(this.geometryChangeKey_);this.geometryChangeKey_=null}var e=this.getGeometry();if(e){this.geometryChangeKey_=Object(n["a"])(e,a["a"].CHANGE,this.handleGeometryChange_,this)}this.changed()};c.prototype.setGeometry=function(e){this.set(this.geometryName_,e)};c.prototype.setStyle=function(e){this.style_=e;this.styleFunction_=!e?undefined:f(e);this.changed()};c.prototype.setId=function(e){this.id_=e;this.changed()};c.prototype.setGeometryName=function(e){Object(n["c"])(this,Object(s["b"])(this.geometryName_),this.handleGeometryChanged_,this);this.geometryName_=e;Object(n["a"])(this,Object(s["b"])(this.geometryName_),this.handleGeometryChanged_,this);this.handleGeometryChanged_()};function f(e){if(typeof e==="function"){return e}else{var t=void 0;if(Array.isArray(e)){t=e}else{Object(i["a"])(e instanceof u["c"],41);t=[e]}return function(){return t}}}t["a"]=c},function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"b",function(){return a});r.d(t,"g",function(){return s});r.d(t,"f",function(){return l});r.d(t,"e",function(){return u});r.d(t,"h",function(){return c});r.d(t,"i",function(){return f});r.d(t,"d",function(){return h});r.d(t,"c",function(){return d});var i=r(39);function n(e,t,r){return Math.min(Math.max(e,t),r)}var a=function(){var e=void 0;if("cosh"in Math){e=Math.cosh}else{e=function e(t){var r=Math.exp(t);return(r+1/r)/2}}return e}();function o(e){Object(i["a"])(0<e,29);return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function s(e,t,r,i,n,a){var o=n-r;var s=a-i;if(o!==0||s!==0){var u=((e-r)*o+(t-i)*s)/(o*o+s*s);if(u>1){r=n;i=a}else if(u>0){r+=o*u;i+=s*u}}return l(e,t,r,i)}function l(e,t,r,i){var n=r-e;var a=i-t;return n*n+a*a}function u(e){var t=e.length;for(var r=0;r<t;r++){var i=r;var n=Math.abs(e[r][r]);for(var a=r+1;a<t;a++){var o=Math.abs(e[a][r]);if(o>n){n=o;i=a}}if(n===0){return null}var s=e[i];e[i]=e[r];e[r]=s;for(var l=r+1;l<t;l++){var u=-e[l][r]/e[r][r];for(var c=r;c<t+1;c++){if(r==c){e[l][c]=0}else{e[l][c]+=u*e[r][c]}}}}var f=new Array(t);for(var h=t-1;h>=0;h--){f[h]=e[h][t]/e[h][h];for(var d=h-1;d>=0;d--){e[d][t]-=e[d][h]*f[h]}}return f}function c(e){return e*180/Math.PI}function f(e){return e*Math.PI/180}function h(e,t){var r=e%t;return r*t<0?r+t:r}function d(e,t,r){return e+r*(t-e)}},function(e,t,r){"use strict";t["a"]={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"}},function(e,t,r){var i,n;
/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
(function(t,r){"use strict";if(typeof e==="object"&&typeof e.exports==="object"){e.exports=t.document?r(t,true):function(e){if(!e.document){throw new Error("jQuery requires a window with a document")}return r(e)}}else{r(t)}})(typeof window!=="undefined"?window:this,function(r,a){"use strict";var o=[];var s=r.document;var l=Object.getPrototypeOf;var u=o.slice;var c=o.concat;var f=o.push;var h=o.indexOf;var d={};var p=d.toString;var v=d.hasOwnProperty;var g=v.toString;var m=g.call(Object);var y={};var _=function e(t){return typeof t==="function"&&typeof t.nodeType!=="number"};var b=function e(t){return t!=null&&t===t.window};var w={type:true,src:true,noModule:true};function S(e,t,r){t=t||s;var i,n=t.createElement("script");n.text=e;if(r){for(i in w){if(r[i]){n[i]=r[i]}}}t.head.appendChild(n).parentNode.removeChild(n)}function C(e){if(e==null){return e+""}return typeof e==="object"||typeof e==="function"?d[p.call(e)]||"object":typeof e}var x="3.3.1",O=function(e,t){return new O.fn.init(e,t)},T=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;O.fn=O.prototype={jquery:x,constructor:O,length:0,toArray:function(){return u.call(this)},get:function(e){if(e==null){return u.call(this)}return e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=O.merge(this.constructor(),e);t.prevObject=this;return t},each:function(e){return O.each(this,e)},map:function(e){return this.pushStack(O.map(this,function(t,r){return e.call(t,r,t)}))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,r=+e+(e<0?t:0);return this.pushStack(r>=0&&r<t?[this[r]]:[])},end:function(){return this.prevObject||this.constructor()},push:f,sort:o.sort,splice:o.splice};O.extend=O.fn.extend=function(){var e,t,r,i,n,a,o=arguments[0]||{},s=1,l=arguments.length,u=false;if(typeof o==="boolean"){u=o;o=arguments[s]||{};s++}if(typeof o!=="object"&&!_(o)){o={}}if(s===l){o=this;s--}for(;s<l;s++){if((e=arguments[s])!=null){for(t in e){r=o[t];i=e[t];if(o===i){continue}if(u&&i&&(O.isPlainObject(i)||(n=Array.isArray(i)))){if(n){n=false;a=r&&Array.isArray(r)?r:[]}else{a=r&&O.isPlainObject(r)?r:{}}o[t]=O.extend(u,a,i)}else if(i!==undefined){o[t]=i}}}}return o};O.extend({expando:"jQuery"+(x+Math.random()).replace(/\D/g,""),isReady:true,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,r;if(!e||p.call(e)!=="[object Object]"){return false}t=l(e);if(!t){return true}r=v.call(t,"constructor")&&t.constructor;return typeof r==="function"&&g.call(r)===m},isEmptyObject:function(e){var t;for(t in e){return false}return true},globalEval:function(e){S(e)},each:function(e,t){var r,i=0;if(E(e)){r=e.length;for(;i<r;i++){if(t.call(e[i],i,e[i])===false){break}}}else{for(i in e){if(t.call(e[i],i,e[i])===false){break}}}return e},trim:function(e){return e==null?"":(e+"").replace(T,"")},makeArray:function(e,t){var r=t||[];if(e!=null){if(E(Object(e))){O.merge(r,typeof e==="string"?[e]:e)}else{f.call(r,e)}}return r},inArray:function(e,t,r){return t==null?-1:h.call(t,e,r)},merge:function(e,t){var r=+t.length,i=0,n=e.length;for(;i<r;i++){e[n++]=t[i]}e.length=n;return e},grep:function(e,t,r){var i,n=[],a=0,o=e.length,s=!r;for(;a<o;a++){i=!t(e[a],a);if(i!==s){n.push(e[a])}}return n},map:function(e,t,r){var i,n,a=0,o=[];if(E(e)){i=e.length;for(;a<i;a++){n=t(e[a],a,r);if(n!=null){o.push(n)}}}else{for(a in e){n=t(e[a],a,r);if(n!=null){o.push(n)}}}return c.apply([],o)},guid:1,support:y});if(typeof Symbol==="function"){O.fn[Symbol.iterator]=o[Symbol.iterator]}O.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){d["[object "+t+"]"]=t.toLowerCase()});function E(e){var t=!!e&&"length"in e&&e.length,r=C(e);if(_(e)||b(e)){return false}return r==="array"||t===0||typeof t==="number"&&t>0&&t-1 in e}var M=
/*!
 * Sizzle CSS Selector Engine v2.3.3
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-08-08
 */
function(e){var t,r,i,n,a,o,s,l,u,c,f,h,d,p,v,g,m,y,_,b="sizzle"+1*new Date,w=e.document,S=0,C=0,x=oe(),O=oe(),T=oe(),E=function(e,t){if(e===t){f=true}return 0},M={}.hasOwnProperty,j=[],A=j.pop,P=j.push,k=j.push,I=j.slice,D=function(e,t){var r=0,i=e.length;for(;r<i;r++){if(e[r]===t){return r}}return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",$="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",N="\\["+L+"*("+$+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+$+"))|)"+L+"*\\]",F=":("+$+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+N+")*)|"+".*"+")\\)|)",G=new RegExp(L+"+","g"),U=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),H=new RegExp("^"+L+"*,"+L+"*"),Y=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),W=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),V=new RegExp(F),z=new RegExp("^"+$+"$"),q={ID:new RegExp("^#("+$+")"),CLASS:new RegExp("^\\.("+$+")"),TAG:new RegExp("^("+$+"|[*])"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},B=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,J=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),ee=function(e,t,r){var i="0x"+t-65536;return i!==i||r?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,i&1023|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,re=function(e,t){if(t){if(e==="\0"){return"�"}return e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" "}return"\\"+e},ie=function(){h()},ne=ye(function(e){return e.disabled===true&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{k.apply(j=I.call(w.childNodes),w.childNodes);j[w.childNodes.length].nodeType}catch(e){k={apply:j.length?function(e,t){P.apply(e,I.call(t))}:function(e,t){var r=e.length,i=0;while(e[r++]=t[i++]){}e.length=r-1}}}function ae(e,t,i,n){var a,s,u,c,f,p,m,y=t&&t.ownerDocument,S=t?t.nodeType:9;i=i||[];if(typeof e!=="string"||!e||S!==1&&S!==9&&S!==11){return i}if(!n){if((t?t.ownerDocument||t:w)!==d){h(t)}t=t||d;if(v){if(S!==11&&(f=Z.exec(e))){if(a=f[1]){if(S===9){if(u=t.getElementById(a)){if(u.id===a){i.push(u);return i}}else{return i}}else{if(y&&(u=y.getElementById(a))&&_(t,u)&&u.id===a){i.push(u);return i}}}else if(f[2]){k.apply(i,t.getElementsByTagName(e));return i}else if((a=f[3])&&r.getElementsByClassName&&t.getElementsByClassName){k.apply(i,t.getElementsByClassName(a));return i}}if(r.qsa&&!T[e+" "]&&(!g||!g.test(e))){if(S!==1){y=t;m=e}else if(t.nodeName.toLowerCase()!=="object"){if(c=t.getAttribute("id")){c=c.replace(te,re)}else{t.setAttribute("id",c=b)}p=o(e);s=p.length;while(s--){p[s]="#"+c+" "+me(p[s])}m=p.join(",");y=Q.test(e)&&ve(t.parentNode)||t}if(m){try{k.apply(i,y.querySelectorAll(m));return i}catch(e){}finally{if(c===b){t.removeAttribute("id")}}}}}}return l(e.replace(U,"$1"),t,i,n)}function oe(){var e=[];function t(r,n){if(e.push(r+" ")>i.cacheLength){delete t[e.shift()]}return t[r+" "]=n}return t}function se(e){e[b]=true;return e}function le(e){var t=d.createElement("fieldset");try{return!!e(t)}catch(e){return false}finally{if(t.parentNode){t.parentNode.removeChild(t)}t=null}}function ue(e,t){var r=e.split("|"),n=r.length;while(n--){i.attrHandle[r[n]]=t}}function ce(e,t){var r=t&&e,i=r&&e.nodeType===1&&t.nodeType===1&&e.sourceIndex-t.sourceIndex;if(i){return i}if(r){while(r=r.nextSibling){if(r===t){return-1}}}return e?1:-1}function fe(e){return function(t){var r=t.nodeName.toLowerCase();return r==="input"&&t.type===e}}function he(e){return function(t){var r=t.nodeName.toLowerCase();return(r==="input"||r==="button")&&t.type===e}}function de(e){return function(t){if("form"in t){if(t.parentNode&&t.disabled===false){if("label"in t){if("label"in t.parentNode){return t.parentNode.disabled===e}else{return t.disabled===e}}return t.isDisabled===e||t.isDisabled!==!e&&ne(t)===e}return t.disabled===e}else if("label"in t){return t.disabled===e}return false}}function pe(e){return se(function(t){t=+t;return se(function(r,i){var n,a=e([],r.length,t),o=a.length;while(o--){if(r[n=a[o]]){r[n]=!(i[n]=r[n])}}})})}function ve(e){return e&&typeof e.getElementsByTagName!=="undefined"&&e}r=ae.support={};a=ae.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":false};h=ae.setDocument=function(e){var t,n,o=e?e.ownerDocument||e:w;if(o===d||o.nodeType!==9||!o.documentElement){return d}d=o;p=d.documentElement;v=!a(d);if(w!==d&&(n=d.defaultView)&&n.top!==n){if(n.addEventListener){n.addEventListener("unload",ie,false)}else if(n.attachEvent){n.attachEvent("onunload",ie)}}r.attributes=le(function(e){e.className="i";return!e.getAttribute("className")});r.getElementsByTagName=le(function(e){e.appendChild(d.createComment(""));return!e.getElementsByTagName("*").length});r.getElementsByClassName=K.test(d.getElementsByClassName);r.getById=le(function(e){p.appendChild(e).id=b;return!d.getElementsByName||!d.getElementsByName(b).length});if(r.getById){i.filter["ID"]=function(e){var t=e.replace(J,ee);return function(e){return e.getAttribute("id")===t}};i.find["ID"]=function(e,t){if(typeof t.getElementById!=="undefined"&&v){var r=t.getElementById(e);return r?[r]:[]}}}else{i.filter["ID"]=function(e){var t=e.replace(J,ee);return function(e){var r=typeof e.getAttributeNode!=="undefined"&&e.getAttributeNode("id");return r&&r.value===t}};i.find["ID"]=function(e,t){if(typeof t.getElementById!=="undefined"&&v){var r,i,n,a=t.getElementById(e);if(a){r=a.getAttributeNode("id");if(r&&r.value===e){return[a]}n=t.getElementsByName(e);i=0;while(a=n[i++]){r=a.getAttributeNode("id");if(r&&r.value===e){return[a]}}}return[]}}}i.find["TAG"]=r.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!=="undefined"){return t.getElementsByTagName(e)}else if(r.qsa){return t.querySelectorAll(e)}}:function(e,t){var r,i=[],n=0,a=t.getElementsByTagName(e);if(e==="*"){while(r=a[n++]){if(r.nodeType===1){i.push(r)}}return i}return a};i.find["CLASS"]=r.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!=="undefined"&&v){return t.getElementsByClassName(e)}};m=[];g=[];if(r.qsa=K.test(d.querySelectorAll)){le(function(e){p.appendChild(e).innerHTML="<a id='"+b+"'></a>"+"<select id='"+b+"-\r\\' msallowcapture=''>"+"<option selected=''></option></select>";if(e.querySelectorAll("[msallowcapture^='']").length){g.push("[*^$]="+L+"*(?:''|\"\")")}if(!e.querySelectorAll("[selected]").length){g.push("\\["+L+"*(?:value|"+R+")")}if(!e.querySelectorAll("[id~="+b+"-]").length){g.push("~=")}if(!e.querySelectorAll(":checked").length){g.push(":checked")}if(!e.querySelectorAll("a#"+b+"+*").length){g.push(".#.+[+~]")}});le(function(e){e.innerHTML="<a href='' disabled='disabled'></a>"+"<select disabled='disabled'><option/></select>";var t=d.createElement("input");t.setAttribute("type","hidden");e.appendChild(t).setAttribute("name","D");if(e.querySelectorAll("[name=d]").length){g.push("name"+L+"*[*^$|!~]?=")}if(e.querySelectorAll(":enabled").length!==2){g.push(":enabled",":disabled")}p.appendChild(e).disabled=true;if(e.querySelectorAll(":disabled").length!==2){g.push(":enabled",":disabled")}e.querySelectorAll("*,:x");g.push(",.*:")})}if(r.matchesSelector=K.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector)){le(function(e){r.disconnectedMatch=y.call(e,"*");y.call(e,"[s!='']:x");m.push("!=",F)})}g=g.length&&new RegExp(g.join("|"));m=m.length&&new RegExp(m.join("|"));t=K.test(p.compareDocumentPosition);_=t||K.test(p.contains)?function(e,t){var r=e.nodeType===9?e.documentElement:e,i=t&&t.parentNode;return e===i||!!(i&&i.nodeType===1&&(r.contains?r.contains(i):e.compareDocumentPosition&&e.compareDocumentPosition(i)&16))}:function(e,t){if(t){while(t=t.parentNode){if(t===e){return true}}}return false};E=t?function(e,t){if(e===t){f=true;return 0}var i=!e.compareDocumentPosition-!t.compareDocumentPosition;if(i){return i}i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1;if(i&1||!r.sortDetached&&t.compareDocumentPosition(e)===i){if(e===d||e.ownerDocument===w&&_(w,e)){return-1}if(t===d||t.ownerDocument===w&&_(w,t)){return 1}return c?D(c,e)-D(c,t):0}return i&4?-1:1}:function(e,t){if(e===t){f=true;return 0}var r,i=0,n=e.parentNode,a=t.parentNode,o=[e],s=[t];if(!n||!a){return e===d?-1:t===d?1:n?-1:a?1:c?D(c,e)-D(c,t):0}else if(n===a){return ce(e,t)}r=e;while(r=r.parentNode){o.unshift(r)}r=t;while(r=r.parentNode){s.unshift(r)}while(o[i]===s[i]){i++}return i?ce(o[i],s[i]):o[i]===w?-1:s[i]===w?1:0};return d};ae.matches=function(e,t){return ae(e,null,null,t)};ae.matchesSelector=function(e,t){if((e.ownerDocument||e)!==d){h(e)}t=t.replace(W,"='$1']");if(r.matchesSelector&&v&&!T[t+" "]&&(!m||!m.test(t))&&(!g||!g.test(t))){try{var i=y.call(e,t);if(i||r.disconnectedMatch||e.document&&e.document.nodeType!==11){return i}}catch(e){}}return ae(t,d,null,[e]).length>0};ae.contains=function(e,t){if((e.ownerDocument||e)!==d){h(e)}return _(e,t)};ae.attr=function(e,t){if((e.ownerDocument||e)!==d){h(e)}var n=i.attrHandle[t.toLowerCase()],a=n&&M.call(i.attrHandle,t.toLowerCase())?n(e,t,!v):undefined;return a!==undefined?a:r.attributes||!v?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null};ae.escape=function(e){return(e+"").replace(te,re)};ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};ae.uniqueSort=function(e){var t,i=[],n=0,a=0;f=!r.detectDuplicates;c=!r.sortStable&&e.slice(0);e.sort(E);if(f){while(t=e[a++]){if(t===e[a]){n=i.push(a)}}while(n--){e.splice(i[n],1)}}c=null;return e};n=ae.getText=function(e){var t,r="",i=0,a=e.nodeType;if(!a){while(t=e[i++]){r+=n(t)}}else if(a===1||a===9||a===11){if(typeof e.textContent==="string"){return e.textContent}else{for(e=e.firstChild;e;e=e.nextSibling){r+=n(e)}}}else if(a===3||a===4){return e.nodeValue}return r};i=ae.selectors={cacheLength:50,createPseudo:se,match:q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[1]=e[1].replace(J,ee);e[3]=(e[3]||e[4]||e[5]||"").replace(J,ee);if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)},CHILD:function(e){e[1]=e[1].toLowerCase();if(e[1].slice(0,3)==="nth"){if(!e[3]){ae.error(e[0])}e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd"));e[5]=+(e[7]+e[8]||e[3]==="odd")}else if(e[3]){ae.error(e[0])}return e},PSEUDO:function(e){var t,r=!e[6]&&e[2];if(q["CHILD"].test(e[0])){return null}if(e[3]){e[2]=e[4]||e[5]||""}else if(r&&V.test(r)&&(t=o(r,true))&&(t=r.indexOf(")",r.length-t)-r.length)){e[0]=e[0].slice(0,t);e[2]=r.slice(0,t)}return e.slice(0,3)}},filter:{TAG:function(e){var t=e.replace(J,ee).toLowerCase();return e==="*"?function(){return true}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=x[e+" "];return t||(t=new RegExp("(^|"+L+")"+e+"("+L+"|$)"))&&x(e,function(e){return t.test(typeof e.className==="string"&&e.className||typeof e.getAttribute!=="undefined"&&e.getAttribute("class")||"")})},ATTR:function(e,t,r){return function(i){var n=ae.attr(i,e);if(n==null){return t==="!="}if(!t){return true}n+="";return t==="="?n===r:t==="!="?n!==r:t==="^="?r&&n.indexOf(r)===0:t==="*="?r&&n.indexOf(r)>-1:t==="$="?r&&n.slice(-r.length)===r:t==="~="?(" "+n.replace(G," ")+" ").indexOf(r)>-1:t==="|="?n===r||n.slice(0,r.length+1)===r+"-":false}},CHILD:function(e,t,r,i,n){var a=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",s=t==="of-type";return i===1&&n===0?function(e){return!!e.parentNode}:function(t,r,l){var u,c,f,h,d,p,v=a!==o?"nextSibling":"previousSibling",g=t.parentNode,m=s&&t.nodeName.toLowerCase(),y=!l&&!s,_=false;if(g){if(a){while(v){h=t;while(h=h[v]){if(s?h.nodeName.toLowerCase()===m:h.nodeType===1){return false}}p=v=e==="only"&&!p&&"nextSibling"}return true}p=[o?g.firstChild:g.lastChild];if(o&&y){h=g;f=h[b]||(h[b]={});c=f[h.uniqueID]||(f[h.uniqueID]={});u=c[e]||[];d=u[0]===S&&u[1];_=d&&u[2];h=d&&g.childNodes[d];while(h=++d&&h&&h[v]||(_=d=0)||p.pop()){if(h.nodeType===1&&++_&&h===t){c[e]=[S,d,_];break}}}else{if(y){h=t;f=h[b]||(h[b]={});c=f[h.uniqueID]||(f[h.uniqueID]={});u=c[e]||[];d=u[0]===S&&u[1];_=d}if(_===false){while(h=++d&&h&&h[v]||(_=d=0)||p.pop()){if((s?h.nodeName.toLowerCase()===m:h.nodeType===1)&&++_){if(y){f=h[b]||(h[b]={});c=f[h.uniqueID]||(f[h.uniqueID]={});c[e]=[S,_]}if(h===t){break}}}}}_-=n;return _===i||_%i===0&&_/i>=0}}},PSEUDO:function(e,t){var r,n=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);if(n[b]){return n(t)}if(n.length>1){r=[e,e,"",t];return i.setFilters.hasOwnProperty(e.toLowerCase())?se(function(e,r){var i,a=n(e,t),o=a.length;while(o--){i=D(e,a[o]);e[i]=!(r[i]=a[o])}}):function(e){return n(e,0,r)}}return n}},pseudos:{not:se(function(e){var t=[],r=[],i=s(e.replace(U,"$1"));return i[b]?se(function(e,t,r,n){var a,o=i(e,null,n,[]),s=e.length;while(s--){if(a=o[s]){e[s]=!(t[s]=a)}}}):function(e,n,a){t[0]=e;i(t,null,a,r);t[0]=null;return!r.pop()}}),has:se(function(e){return function(t){return ae(e,t).length>0}}),contains:se(function(e){e=e.replace(J,ee);return function(t){return(t.textContent||t.innerText||n(t)).indexOf(e)>-1}}),lang:se(function(e){if(!z.test(e||"")){ae.error("unsupported lang: "+e)}e=e.replace(J,ee).toLowerCase();return function(t){var r;do{if(r=v?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang")){r=r.toLowerCase();return r===e||r.indexOf(e+"-")===0}}while((t=t.parentNode)&&t.nodeType===1);return false}}),target:function(t){var r=e.location&&e.location.hash;return r&&r.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:de(false),disabled:de(true),checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling){if(e.nodeType<6){return false}}return true},parent:function(e){return!i.pseudos["empty"](e)},header:function(e){return X.test(e.nodeName)},input:function(e){return B.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()==="text")},first:pe(function(){return[0]}),last:pe(function(e,t){return[t-1]}),eq:pe(function(e,t,r){return[r<0?r+t:r]}),even:pe(function(e,t){var r=0;for(;r<t;r+=2){e.push(r)}return e}),odd:pe(function(e,t){var r=1;for(;r<t;r+=2){e.push(r)}return e}),lt:pe(function(e,t,r){var i=r<0?r+t:r;for(;--i>=0;){e.push(i)}return e}),gt:pe(function(e,t,r){var i=r<0?r+t:r;for(;++i<t;){e.push(i)}return e})}};i.pseudos["nth"]=i.pseudos["eq"];for(t in{radio:true,checkbox:true,file:true,password:true,image:true}){i.pseudos[t]=fe(t)}for(t in{submit:true,reset:true}){i.pseudos[t]=he(t)}function ge(){}ge.prototype=i.filters=i.pseudos;i.setFilters=new ge;o=ae.tokenize=function(e,t){var r,n,a,o,s,l,u,c=O[e+" "];if(c){return t?0:c.slice(0)}s=e;l=[];u=i.preFilter;while(s){if(!r||(n=H.exec(s))){if(n){s=s.slice(n[0].length)||s}l.push(a=[])}r=false;if(n=Y.exec(s)){r=n.shift();a.push({value:r,type:n[0].replace(U," ")});s=s.slice(r.length)}for(o in i.filter){if((n=q[o].exec(s))&&(!u[o]||(n=u[o](n)))){r=n.shift();a.push({value:r,type:o,matches:n});s=s.slice(r.length)}}if(!r){break}}return t?s.length:s?ae.error(e):O(e,l).slice(0)};function me(e){var t=0,r=e.length,i="";for(;t<r;t++){i+=e[t].value}return i}function ye(e,t,r){var i=t.dir,n=t.next,a=n||i,o=r&&a==="parentNode",s=C++;return t.first?function(t,r,n){while(t=t[i]){if(t.nodeType===1||o){return e(t,r,n)}}return false}:function(t,r,l){var u,c,f,h=[S,s];if(l){while(t=t[i]){if(t.nodeType===1||o){if(e(t,r,l)){return true}}}}else{while(t=t[i]){if(t.nodeType===1||o){f=t[b]||(t[b]={});c=f[t.uniqueID]||(f[t.uniqueID]={});if(n&&n===t.nodeName.toLowerCase()){t=t[i]||t}else if((u=c[a])&&u[0]===S&&u[1]===s){return h[2]=u[2]}else{c[a]=h;if(h[2]=e(t,r,l)){return true}}}}}return false}}function _e(e){return e.length>1?function(t,r,i){var n=e.length;while(n--){if(!e[n](t,r,i)){return false}}return true}:e[0]}function be(e,t,r){var i=0,n=t.length;for(;i<n;i++){ae(e,t[i],r)}return r}function we(e,t,r,i,n){var a,o=[],s=0,l=e.length,u=t!=null;for(;s<l;s++){if(a=e[s]){if(!r||r(a,i,n)){o.push(a);if(u){t.push(s)}}}}return o}function Se(e,t,r,i,n,a){if(i&&!i[b]){i=Se(i)}if(n&&!n[b]){n=Se(n,a)}return se(function(a,o,s,l){var u,c,f,h=[],d=[],p=o.length,v=a||be(t||"*",s.nodeType?[s]:s,[]),g=e&&(a||!t)?we(v,h,e,s,l):v,m=r?n||(a?e:p||i)?[]:o:g;if(r){r(g,m,s,l)}if(i){u=we(m,d);i(u,[],s,l);c=u.length;while(c--){if(f=u[c]){m[d[c]]=!(g[d[c]]=f)}}}if(a){if(n||e){if(n){u=[];c=m.length;while(c--){if(f=m[c]){u.push(g[c]=f)}}n(null,m=[],u,l)}c=m.length;while(c--){if((f=m[c])&&(u=n?D(a,f):h[c])>-1){a[u]=!(o[u]=f)}}}}else{m=we(m===o?m.splice(p,m.length):m);if(n){n(null,o,m,l)}else{k.apply(o,m)}}})}function Ce(e){var t,r,n,a=e.length,o=i.relative[e[0].type],s=o||i.relative[" "],l=o?1:0,c=ye(function(e){return e===t},s,true),f=ye(function(e){return D(t,e)>-1},s,true),h=[function(e,r,i){var n=!o&&(i||r!==u)||((t=r).nodeType?c(e,r,i):f(e,r,i));t=null;return n}];for(;l<a;l++){if(r=i.relative[e[l].type]){h=[ye(_e(h),r)]}else{r=i.filter[e[l].type].apply(null,e[l].matches);if(r[b]){n=++l;for(;n<a;n++){if(i.relative[e[n].type]){break}}return Se(l>1&&_e(h),l>1&&me(e.slice(0,l-1).concat({value:e[l-2].type===" "?"*":""})).replace(U,"$1"),r,l<n&&Ce(e.slice(l,n)),n<a&&Ce(e=e.slice(n)),n<a&&me(e))}h.push(r)}}return _e(h)}function xe(e,t){var r=t.length>0,n=e.length>0,a=function(a,o,s,l,c){var f,p,g,m=0,y="0",_=a&&[],b=[],w=u,C=a||n&&i.find["TAG"]("*",c),x=S+=w==null?1:Math.random()||.1,O=C.length;if(c){u=o===d||o||c}for(;y!==O&&(f=C[y])!=null;y++){if(n&&f){p=0;if(!o&&f.ownerDocument!==d){h(f);s=!v}while(g=e[p++]){if(g(f,o||d,s)){l.push(f);break}}if(c){S=x}}if(r){if(f=!g&&f){m--}if(a){_.push(f)}}}m+=y;if(r&&y!==m){p=0;while(g=t[p++]){g(_,b,o,s)}if(a){if(m>0){while(y--){if(!(_[y]||b[y])){b[y]=A.call(l)}}}b=we(b)}k.apply(l,b);if(c&&!a&&b.length>0&&m+t.length>1){ae.uniqueSort(l)}}if(c){S=x;u=w}return _};return r?se(a):a}s=ae.compile=function(e,t){var r,i=[],n=[],a=T[e+" "];if(!a){if(!t){t=o(e)}r=t.length;while(r--){a=Ce(t[r]);if(a[b]){i.push(a)}else{n.push(a)}}a=T(e,xe(n,i));a.selector=e}return a};l=ae.select=function(e,t,r,n){var a,l,u,c,f,h=typeof e==="function"&&e,d=!n&&o(e=h.selector||e);r=r||[];if(d.length===1){l=d[0]=d[0].slice(0);if(l.length>2&&(u=l[0]).type==="ID"&&t.nodeType===9&&v&&i.relative[l[1].type]){t=(i.find["ID"](u.matches[0].replace(J,ee),t)||[])[0];if(!t){return r}else if(h){t=t.parentNode}e=e.slice(l.shift().value.length)}a=q["needsContext"].test(e)?0:l.length;while(a--){u=l[a];if(i.relative[c=u.type]){break}if(f=i.find[c]){if(n=f(u.matches[0].replace(J,ee),Q.test(l[0].type)&&ve(t.parentNode)||t)){l.splice(a,1);e=n.length&&me(l);if(!e){k.apply(r,n);return r}break}}}}(h||s(e,d))(n,t,!v,r,!t||Q.test(e)&&ve(t.parentNode)||t);return r};r.sortStable=b.split("").sort(E).join("")===b;r.detectDuplicates=!!f;h();r.sortDetached=le(function(e){return e.compareDocumentPosition(d.createElement("fieldset"))&1});if(!le(function(e){e.innerHTML="<a href='#'></a>";return e.firstChild.getAttribute("href")==="#"})){ue("type|href|height|width",function(e,t,r){if(!r){return e.getAttribute(t,t.toLowerCase()==="type"?1:2)}})}if(!r.attributes||!le(function(e){e.innerHTML="<input/>";e.firstChild.setAttribute("value","");return e.firstChild.getAttribute("value")===""})){ue("value",function(e,t,r){if(!r&&e.nodeName.toLowerCase()==="input"){return e.defaultValue}})}if(!le(function(e){return e.getAttribute("disabled")==null})){ue(R,function(e,t,r){var i;if(!r){return e[t]===true?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}})}return ae}(r);O.find=M;O.expr=M.selectors;O.expr[":"]=O.expr.pseudos;O.uniqueSort=O.unique=M.uniqueSort;O.text=M.getText;O.isXMLDoc=M.isXML;O.contains=M.contains;O.escapeSelector=M.escape;var j=function(e,t,r){var i=[],n=r!==undefined;while((e=e[t])&&e.nodeType!==9){if(e.nodeType===1){if(n&&O(e).is(r)){break}i.push(e)}}return i};var A=function(e,t){var r=[];for(;e;e=e.nextSibling){if(e.nodeType===1&&e!==t){r.push(e)}}return r};var P=O.expr.match.needsContext;function k(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var I=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function D(e,t,r){if(_(t)){return O.grep(e,function(e,i){return!!t.call(e,i,e)!==r})}if(t.nodeType){return O.grep(e,function(e){return e===t!==r})}if(typeof t!=="string"){return O.grep(e,function(e){return h.call(t,e)>-1!==r})}return O.filter(t,e,r)}O.filter=function(e,t,r){var i=t[0];if(r){e=":not("+e+")"}if(t.length===1&&i.nodeType===1){return O.find.matchesSelector(i,e)?[i]:[]}return O.find.matches(e,O.grep(t,function(e){return e.nodeType===1}))};O.fn.extend({find:function(e){var t,r,i=this.length,n=this;if(typeof e!=="string"){return this.pushStack(O(e).filter(function(){for(t=0;t<i;t++){if(O.contains(n[t],this)){return true}}}))}r=this.pushStack([]);for(t=0;t<i;t++){O.find(e,n[t],r)}return i>1?O.uniqueSort(r):r},filter:function(e){return this.pushStack(D(this,e||[],false))},not:function(e){return this.pushStack(D(this,e||[],true))},is:function(e){return!!D(this,typeof e==="string"&&P.test(e)?O(e):e||[],false).length}});var R,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,$=O.fn.init=function(e,t,r){var i,n;if(!e){return this}r=r||R;if(typeof e==="string"){if(e[0]==="<"&&e[e.length-1]===">"&&e.length>=3){i=[null,e,null]}else{i=L.exec(e)}if(i&&(i[1]||!t)){if(i[1]){t=t instanceof O?t[0]:t;O.merge(this,O.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:s,true));if(I.test(i[1])&&O.isPlainObject(t)){for(i in t){if(_(this[i])){this[i](t[i])}else{this.attr(i,t[i])}}}return this}else{n=s.getElementById(i[2]);if(n){this[0]=n;this.length=1}return this}}else if(!t||t.jquery){return(t||r).find(e)}else{return this.constructor(t).find(e)}}else if(e.nodeType){this[0]=e;this.length=1;return this}else if(_(e)){return r.ready!==undefined?r.ready(e):e(O)}return O.makeArray(e,this)};$.prototype=O.fn;R=O(s);var N=/^(?:parents|prev(?:Until|All))/,F={children:true,contents:true,next:true,prev:true};O.fn.extend({has:function(e){var t=O(e,this),r=t.length;return this.filter(function(){var e=0;for(;e<r;e++){if(O.contains(this,t[e])){return true}}})},closest:function(e,t){var r,i=0,n=this.length,a=[],o=typeof e!=="string"&&O(e);if(!P.test(e)){for(;i<n;i++){for(r=this[i];r&&r!==t;r=r.parentNode){if(r.nodeType<11&&(o?o.index(r)>-1:r.nodeType===1&&O.find.matchesSelector(r,e))){a.push(r);break}}}}return this.pushStack(a.length>1?O.uniqueSort(a):a)},index:function(e){if(!e){return this[0]&&this[0].parentNode?this.first().prevAll().length:-1}if(typeof e==="string"){return h.call(O(e),this[0])}return h.call(this,e.jquery?e[0]:e)},add:function(e,t){return this.pushStack(O.uniqueSort(O.merge(this.get(),O(e,t))))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});function G(e,t){while((e=e[t])&&e.nodeType!==1){}return e}O.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return j(e,"parentNode")},parentsUntil:function(e,t,r){return j(e,"parentNode",r)},next:function(e){return G(e,"nextSibling")},prev:function(e){return G(e,"previousSibling")},nextAll:function(e){return j(e,"nextSibling")},prevAll:function(e){return j(e,"previousSibling")},nextUntil:function(e,t,r){return j(e,"nextSibling",r)},prevUntil:function(e,t,r){return j(e,"previousSibling",r)},siblings:function(e){return A((e.parentNode||{}).firstChild,e)},children:function(e){return A(e.firstChild)},contents:function(e){if(k(e,"iframe")){return e.contentDocument}if(k(e,"template")){e=e.content||e}return O.merge([],e.childNodes)}},function(e,t){O.fn[e]=function(r,i){var n=O.map(this,t,r);if(e.slice(-5)!=="Until"){i=r}if(i&&typeof i==="string"){n=O.filter(i,n)}if(this.length>1){if(!F[e]){O.uniqueSort(n)}if(N.test(e)){n.reverse()}}return this.pushStack(n)}});var U=/[^\x20\t\r\n\f]+/g;function H(e){var t={};O.each(e.match(U)||[],function(e,r){t[r]=true});return t}O.Callbacks=function(e){e=typeof e==="string"?H(e):O.extend({},e);var t,r,i,n,a=[],o=[],s=-1,l=function(){n=n||e.once;i=t=true;for(;o.length;s=-1){r=o.shift();while(++s<a.length){if(a[s].apply(r[0],r[1])===false&&e.stopOnFalse){s=a.length;r=false}}}if(!e.memory){r=false}t=false;if(n){if(r){a=[]}else{a=""}}},u={add:function(){if(a){if(r&&!t){s=a.length-1;o.push(r)}(function t(r){O.each(r,function(r,i){if(_(i)){if(!e.unique||!u.has(i)){a.push(i)}}else if(i&&i.length&&C(i)!=="string"){t(i)}})})(arguments);if(r&&!t){l()}}return this},remove:function(){O.each(arguments,function(e,t){var r;while((r=O.inArray(t,a,r))>-1){a.splice(r,1);if(r<=s){s--}}});return this},has:function(e){return e?O.inArray(e,a)>-1:a.length>0},empty:function(){if(a){a=[]}return this},disable:function(){n=o=[];a=r="";return this},disabled:function(){return!a},lock:function(){n=o=[];if(!r&&!t){a=r=""}return this},locked:function(){return!!n},fireWith:function(e,r){if(!n){r=r||[];r=[e,r.slice?r.slice():r];o.push(r);if(!t){l()}}return this},fire:function(){u.fireWith(this,arguments);return this},fired:function(){return!!i}};return u};function Y(e){return e}function W(e){throw e}function V(e,t,r,i){var n;try{if(e&&_(n=e.promise)){n.call(e).done(t).fail(r)}else if(e&&_(n=e.then)){n.call(e,t,r)}else{t.apply(undefined,[e].slice(i))}}catch(e){r.apply(undefined,[e])}}O.extend({Deferred:function(e){var t=[["notify","progress",O.Callbacks("memory"),O.Callbacks("memory"),2],["resolve","done",O.Callbacks("once memory"),O.Callbacks("once memory"),0,"resolved"],["reject","fail",O.Callbacks("once memory"),O.Callbacks("once memory"),1,"rejected"]],i="pending",n={state:function(){return i},always:function(){a.done(arguments).fail(arguments);return this},catch:function(e){return n.then(null,e)},pipe:function(){var e=arguments;return O.Deferred(function(r){O.each(t,function(t,i){var n=_(e[i[4]])&&e[i[4]];a[i[1]](function(){var e=n&&n.apply(this,arguments);if(e&&_(e.promise)){e.promise().progress(r.notify).done(r.resolve).fail(r.reject)}else{r[i[0]+"With"](this,n?[e]:arguments)}})});e=null}).promise()},then:function(e,i,n){var a=0;function o(e,t,i,n){return function(){var s=this,l=arguments,u=function(){var r,u;if(e<a){return}r=i.apply(s,l);if(r===t.promise()){throw new TypeError("Thenable self-resolution")}u=r&&(typeof r==="object"||typeof r==="function")&&r.then;if(_(u)){if(n){u.call(r,o(a,t,Y,n),o(a,t,W,n))}else{a++;u.call(r,o(a,t,Y,n),o(a,t,W,n),o(a,t,Y,t.notifyWith))}}else{if(i!==Y){s=undefined;l=[r]}(n||t.resolveWith)(s,l)}},c=n?u:function(){try{u()}catch(r){if(O.Deferred.exceptionHook){O.Deferred.exceptionHook(r,c.stackTrace)}if(e+1>=a){if(i!==W){s=undefined;l=[r]}t.rejectWith(s,l)}}};if(e){c()}else{if(O.Deferred.getStackHook){c.stackTrace=O.Deferred.getStackHook()}r.setTimeout(c)}}}return O.Deferred(function(r){t[0][3].add(o(0,r,_(n)?n:Y,r.notifyWith));t[1][3].add(o(0,r,_(e)?e:Y));t[2][3].add(o(0,r,_(i)?i:W))}).promise()},promise:function(e){return e!=null?O.extend(e,n):n}},a={};O.each(t,function(e,r){var o=r[2],s=r[5];n[r[1]]=o.add;if(s){o.add(function(){i=s},t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock)}o.add(r[3].fire);a[r[0]]=function(){a[r[0]+"With"](this===a?undefined:this,arguments);return this};a[r[0]+"With"]=o.fireWith});n.promise(a);if(e){e.call(a,a)}return a},when:function(e){var t=arguments.length,r=t,i=Array(r),n=u.call(arguments),a=O.Deferred(),o=function(e){return function(r){i[e]=this;n[e]=arguments.length>1?u.call(arguments):r;if(!--t){a.resolveWith(i,n)}}};if(t<=1){V(e,a.done(o(r)).resolve,a.reject,!t);if(a.state()==="pending"||_(n[r]&&n[r].then)){return a.then()}}while(r--){V(n[r],o(r),a.reject)}return a.promise()}});var z=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;O.Deferred.exceptionHook=function(e,t){if(r.console&&r.console.warn&&e&&z.test(e.name)){r.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)}};O.readyException=function(e){r.setTimeout(function(){throw e})};var q=O.Deferred();O.fn.ready=function(e){q.then(e).catch(function(e){O.readyException(e)});return this};O.extend({isReady:false,readyWait:1,ready:function(e){if(e===true?--O.readyWait:O.isReady){return}O.isReady=true;if(e!==true&&--O.readyWait>0){return}q.resolveWith(s,[O])}});O.ready.then=q.then;function B(){s.removeEventListener("DOMContentLoaded",B);r.removeEventListener("load",B);O.ready()}if(s.readyState==="complete"||s.readyState!=="loading"&&!s.documentElement.doScroll){r.setTimeout(O.ready)}else{s.addEventListener("DOMContentLoaded",B);r.addEventListener("load",B)}var X=function(e,t,r,i,n,a,o){var s=0,l=e.length,u=r==null;if(C(r)==="object"){n=true;for(s in r){X(e,t,s,r[s],true,a,o)}}else if(i!==undefined){n=true;if(!_(i)){o=true}if(u){if(o){t.call(e,i);t=null}else{u=t;t=function(e,t,r){return u.call(O(e),r)}}}if(t){for(;s<l;s++){t(e[s],r,o?i:i.call(e[s],s,t(e[s],r)))}}}if(n){return e}if(u){return t.call(e)}return l?t(e[0],r):a};var K=/^-ms-/,Z=/-([a-z])/g;function Q(e,t){return t.toUpperCase()}function J(e){return e.replace(K,"ms-").replace(Z,Q)}var ee=function(e){return e.nodeType===1||e.nodeType===9||!+e.nodeType};function te(){this.expando=O.expando+te.uid++}te.uid=1;te.prototype={cache:function(e){var t=e[this.expando];if(!t){t={};if(ee(e)){if(e.nodeType){e[this.expando]=t}else{Object.defineProperty(e,this.expando,{value:t,configurable:true})}}}return t},set:function(e,t,r){var i,n=this.cache(e);if(typeof t==="string"){n[J(t)]=r}else{for(i in t){n[J(i)]=t[i]}}return n},get:function(e,t){return t===undefined?this.cache(e):e[this.expando]&&e[this.expando][J(t)]},access:function(e,t,r){if(t===undefined||t&&typeof t==="string"&&r===undefined){return this.get(e,t)}this.set(e,t,r);return r!==undefined?r:t},remove:function(e,t){var r,i=e[this.expando];if(i===undefined){return}if(t!==undefined){if(Array.isArray(t)){t=t.map(J)}else{t=J(t);t=t in i?[t]:t.match(U)||[]}r=t.length;while(r--){delete i[t[r]]}}if(t===undefined||O.isEmptyObject(i)){if(e.nodeType){e[this.expando]=undefined}else{delete e[this.expando]}}},hasData:function(e){var t=e[this.expando];return t!==undefined&&!O.isEmptyObject(t)}};var re=new te;var ie=new te;var ne=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ae=/[A-Z]/g;function oe(e){if(e==="true"){return true}if(e==="false"){return false}if(e==="null"){return null}if(e===+e+""){return+e}if(ne.test(e)){return JSON.parse(e)}return e}function se(e,t,r){var i;if(r===undefined&&e.nodeType===1){i="data-"+t.replace(ae,"-$&").toLowerCase();r=e.getAttribute(i);if(typeof r==="string"){try{r=oe(r)}catch(e){}ie.set(e,t,r)}else{r=undefined}}return r}O.extend({hasData:function(e){return ie.hasData(e)||re.hasData(e)},data:function(e,t,r){return ie.access(e,t,r)},removeData:function(e,t){ie.remove(e,t)},_data:function(e,t,r){return re.access(e,t,r)},_removeData:function(e,t){re.remove(e,t)}});O.fn.extend({data:function(e,t){var r,i,n,a=this[0],o=a&&a.attributes;if(e===undefined){if(this.length){n=ie.get(a);if(a.nodeType===1&&!re.get(a,"hasDataAttrs")){r=o.length;while(r--){if(o[r]){i=o[r].name;if(i.indexOf("data-")===0){i=J(i.slice(5));se(a,i,n[i])}}}re.set(a,"hasDataAttrs",true)}}return n}if(typeof e==="object"){return this.each(function(){ie.set(this,e)})}return X(this,function(t){var r;if(a&&t===undefined){r=ie.get(a,e);if(r!==undefined){return r}r=se(a,e);if(r!==undefined){return r}return}this.each(function(){ie.set(this,e,t)})},null,t,arguments.length>1,null,true)},removeData:function(e){return this.each(function(){ie.remove(this,e)})}});O.extend({queue:function(e,t,r){var i;if(e){t=(t||"fx")+"queue";i=re.get(e,t);if(r){if(!i||Array.isArray(r)){i=re.access(e,t,O.makeArray(r))}else{i.push(r)}}return i||[]}},dequeue:function(e,t){t=t||"fx";var r=O.queue(e,t),i=r.length,n=r.shift(),a=O._queueHooks(e,t),o=function(){O.dequeue(e,t)};if(n==="inprogress"){n=r.shift();i--}if(n){if(t==="fx"){r.unshift("inprogress")}delete a.stop;n.call(e,o,a)}if(!i&&a){a.empty.fire()}},_queueHooks:function(e,t){var r=t+"queueHooks";return re.get(e,r)||re.access(e,r,{empty:O.Callbacks("once memory").add(function(){re.remove(e,[t+"queue",r])})})}});O.fn.extend({queue:function(e,t){var r=2;if(typeof e!=="string"){t=e;e="fx";r--}if(arguments.length<r){return O.queue(this[0],e)}return t===undefined?this:this.each(function(){var r=O.queue(this,e,t);O._queueHooks(this,e);if(e==="fx"&&r[0]!=="inprogress"){O.dequeue(this,e)}})},dequeue:function(e){return this.each(function(){O.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,i=1,n=O.Deferred(),a=this,o=this.length,s=function(){if(!--i){n.resolveWith(a,[a])}};if(typeof e!=="string"){t=e;e=undefined}e=e||"fx";while(o--){r=re.get(a[o],e+"queueHooks");if(r&&r.empty){i++;r.empty.add(s)}}s();return n.promise(t)}});var le=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var ue=new RegExp("^(?:([+-])=|)("+le+")([a-z%]*)$","i");var ce=["Top","Right","Bottom","Left"];var fe=function(e,t){e=t||e;return e.style.display==="none"||e.style.display===""&&O.contains(e.ownerDocument,e)&&O.css(e,"display")==="none"};var he=function(e,t,r,i){var n,a,o={};for(a in t){o[a]=e.style[a];e.style[a]=t[a]}n=r.apply(e,i||[]);for(a in t){e.style[a]=o[a]}return n};function de(e,t,r,i){var n,a,o=20,s=i?function(){return i.cur()}:function(){return O.css(e,t,"")},l=s(),u=r&&r[3]||(O.cssNumber[t]?"":"px"),c=(O.cssNumber[t]||u!=="px"&&+l)&&ue.exec(O.css(e,t));if(c&&c[3]!==u){l=l/2;u=u||c[3];c=+l||1;while(o--){O.style(e,t,c+u);if((1-a)*(1-(a=s()/l||.5))<=0){o=0}c=c/a}c=c*2;O.style(e,t,c+u);r=r||[]}if(r){c=+c||+l||0;n=r[1]?c+(r[1]+1)*r[2]:+r[2];if(i){i.unit=u;i.start=c;i.end=n}}return n}var pe={};function ve(e){var t,r=e.ownerDocument,i=e.nodeName,n=pe[i];if(n){return n}t=r.body.appendChild(r.createElement(i));n=O.css(t,"display");t.parentNode.removeChild(t);if(n==="none"){n="block"}pe[i]=n;return n}function ge(e,t){var r,i,n=[],a=0,o=e.length;for(;a<o;a++){i=e[a];if(!i.style){continue}r=i.style.display;if(t){if(r==="none"){n[a]=re.get(i,"display")||null;if(!n[a]){i.style.display=""}}if(i.style.display===""&&fe(i)){n[a]=ve(i)}}else{if(r!=="none"){n[a]="none";re.set(i,"display",r)}}}for(a=0;a<o;a++){if(n[a]!=null){e[a].style.display=n[a]}}return e}O.fn.extend({show:function(){return ge(this,true)},hide:function(){return ge(this)},toggle:function(e){if(typeof e==="boolean"){return e?this.show():this.hide()}return this.each(function(){if(fe(this)){O(this).show()}else{O(this).hide()}})}});var me=/^(?:checkbox|radio)$/i;var ye=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i;var _e=/^$|^module$|\/(?:java|ecma)script/i;var be={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};be.optgroup=be.option;be.tbody=be.tfoot=be.colgroup=be.caption=be.thead;be.th=be.td;function we(e,t){var r;if(typeof e.getElementsByTagName!=="undefined"){r=e.getElementsByTagName(t||"*")}else if(typeof e.querySelectorAll!=="undefined"){r=e.querySelectorAll(t||"*")}else{r=[]}if(t===undefined||t&&k(e,t)){return O.merge([e],r)}return r}function Se(e,t){var r=0,i=e.length;for(;r<i;r++){re.set(e[r],"globalEval",!t||re.get(t[r],"globalEval"))}}var Ce=/<|&#?\w+;/;function xe(e,t,r,i,n){var a,o,s,l,u,c,f=t.createDocumentFragment(),h=[],d=0,p=e.length;for(;d<p;d++){a=e[d];if(a||a===0){if(C(a)==="object"){O.merge(h,a.nodeType?[a]:a)}else if(!Ce.test(a)){h.push(t.createTextNode(a))}else{o=o||f.appendChild(t.createElement("div"));s=(ye.exec(a)||["",""])[1].toLowerCase();l=be[s]||be._default;o.innerHTML=l[1]+O.htmlPrefilter(a)+l[2];c=l[0];while(c--){o=o.lastChild}O.merge(h,o.childNodes);o=f.firstChild;o.textContent=""}}}f.textContent="";d=0;while(a=h[d++]){if(i&&O.inArray(a,i)>-1){if(n){n.push(a)}continue}u=O.contains(a.ownerDocument,a);o=we(f.appendChild(a),"script");if(u){Se(o)}if(r){c=0;while(a=o[c++]){if(_e.test(a.type||"")){r.push(a)}}}}return f}(function(){var e=s.createDocumentFragment(),t=e.appendChild(s.createElement("div")),r=s.createElement("input");r.setAttribute("type","radio");r.setAttribute("checked","checked");r.setAttribute("name","t");t.appendChild(r);y.checkClone=t.cloneNode(true).cloneNode(true).lastChild.checked;t.innerHTML="<textarea>x</textarea>";y.noCloneChecked=!!t.cloneNode(true).lastChild.defaultValue})();var Oe=s.documentElement;var Te=/^key/,Ee=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Me=/^([^.]*)(?:\.(.+)|)/;function je(){return true}function Ae(){return false}function Pe(){try{return s.activeElement}catch(e){}}function ke(e,t,r,i,n,a){var o,s;if(typeof t==="object"){if(typeof r!=="string"){i=i||r;r=undefined}for(s in t){ke(e,s,r,i,t[s],a)}return e}if(i==null&&n==null){n=r;i=r=undefined}else if(n==null){if(typeof r==="string"){n=i;i=undefined}else{n=i;i=r;r=undefined}}if(n===false){n=Ae}else if(!n){return e}if(a===1){o=n;n=function(e){O().off(e);return o.apply(this,arguments)};n.guid=o.guid||(o.guid=O.guid++)}return e.each(function(){O.event.add(this,t,n,i,r)})}O.event={global:{},add:function(e,t,r,i,n){var a,o,s,l,u,c,f,h,d,p,v,g=re.get(e);if(!g){return}if(r.handler){a=r;r=a.handler;n=a.selector}if(n){O.find.matchesSelector(Oe,n)}if(!r.guid){r.guid=O.guid++}if(!(l=g.events)){l=g.events={}}if(!(o=g.handle)){o=g.handle=function(t){return typeof O!=="undefined"&&O.event.triggered!==t.type?O.event.dispatch.apply(e,arguments):undefined}}t=(t||"").match(U)||[""];u=t.length;while(u--){s=Me.exec(t[u])||[];d=v=s[1];p=(s[2]||"").split(".").sort();if(!d){continue}f=O.event.special[d]||{};d=(n?f.delegateType:f.bindType)||d;f=O.event.special[d]||{};c=O.extend({type:d,origType:v,data:i,handler:r,guid:r.guid,selector:n,needsContext:n&&O.expr.match.needsContext.test(n),namespace:p.join(".")},a);if(!(h=l[d])){h=l[d]=[];h.delegateCount=0;if(!f.setup||f.setup.call(e,i,p,o)===false){if(e.addEventListener){e.addEventListener(d,o)}}}if(f.add){f.add.call(e,c);if(!c.handler.guid){c.handler.guid=r.guid}}if(n){h.splice(h.delegateCount++,0,c)}else{h.push(c)}O.event.global[d]=true}},remove:function(e,t,r,i,n){var a,o,s,l,u,c,f,h,d,p,v,g=re.hasData(e)&&re.get(e);if(!g||!(l=g.events)){return}t=(t||"").match(U)||[""];u=t.length;while(u--){s=Me.exec(t[u])||[];d=v=s[1];p=(s[2]||"").split(".").sort();if(!d){for(d in l){O.event.remove(e,d+t[u],r,i,true)}continue}f=O.event.special[d]||{};d=(i?f.delegateType:f.bindType)||d;h=l[d]||[];s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)");o=a=h.length;while(a--){c=h[a];if((n||v===c.origType)&&(!r||r.guid===c.guid)&&(!s||s.test(c.namespace))&&(!i||i===c.selector||i==="**"&&c.selector)){h.splice(a,1);if(c.selector){h.delegateCount--}if(f.remove){f.remove.call(e,c)}}}if(o&&!h.length){if(!f.teardown||f.teardown.call(e,p,g.handle)===false){O.removeEvent(e,d,g.handle)}delete l[d]}}if(O.isEmptyObject(l)){re.remove(e,"handle events")}},dispatch:function(e){var t=O.event.fix(e);var r,i,n,a,o,s,l=new Array(arguments.length),u=(re.get(this,"events")||{})[t.type]||[],c=O.event.special[t.type]||{};l[0]=t;for(r=1;r<arguments.length;r++){l[r]=arguments[r]}t.delegateTarget=this;if(c.preDispatch&&c.preDispatch.call(this,t)===false){return}s=O.event.handlers.call(this,t,u);r=0;while((a=s[r++])&&!t.isPropagationStopped()){t.currentTarget=a.elem;i=0;while((o=a.handlers[i++])&&!t.isImmediatePropagationStopped()){if(!t.rnamespace||t.rnamespace.test(o.namespace)){t.handleObj=o;t.data=o.data;n=((O.event.special[o.origType]||{}).handle||o.handler).apply(a.elem,l);if(n!==undefined){if((t.result=n)===false){t.preventDefault();t.stopPropagation()}}}}}if(c.postDispatch){c.postDispatch.call(this,t)}return t.result},handlers:function(e,t){var r,i,n,a,o,s=[],l=t.delegateCount,u=e.target;if(l&&u.nodeType&&!(e.type==="click"&&e.button>=1)){for(;u!==this;u=u.parentNode||this){if(u.nodeType===1&&!(e.type==="click"&&u.disabled===true)){a=[];o={};for(r=0;r<l;r++){i=t[r];n=i.selector+" ";if(o[n]===undefined){o[n]=i.needsContext?O(n,this).index(u)>-1:O.find(n,this,null,[u]).length}if(o[n]){a.push(i)}}if(a.length){s.push({elem:u,handlers:a})}}}}u=this;if(l<t.length){s.push({elem:u,handlers:t.slice(l)})}return s},addProp:function(e,t){Object.defineProperty(O.Event.prototype,e,{enumerable:true,configurable:true,get:_(t)?function(){if(this.originalEvent){return t(this.originalEvent)}}:function(){if(this.originalEvent){return this.originalEvent[e]}},set:function(t){Object.defineProperty(this,e,{enumerable:true,configurable:true,writable:true,value:t})}})},fix:function(e){return e[O.expando]?e:new O.Event(e)},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==Pe()&&this.focus){this.focus();return false}},delegateType:"focusin"},blur:{trigger:function(){if(this===Pe()&&this.blur){this.blur();return false}},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&k(this,"input")){this.click();return false}},_default:function(e){return k(e.target,"a")}},beforeunload:{postDispatch:function(e){if(e.result!==undefined&&e.originalEvent){e.originalEvent.returnValue=e.result}}}}};O.removeEvent=function(e,t,r){if(e.removeEventListener){e.removeEventListener(t,r)}};O.Event=function(e,t){if(!(this instanceof O.Event)){return new O.Event(e,t)}if(e&&e.type){this.originalEvent=e;this.type=e.type;this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&e.returnValue===false?je:Ae;this.target=e.target&&e.target.nodeType===3?e.target.parentNode:e.target;this.currentTarget=e.currentTarget;this.relatedTarget=e.relatedTarget}else{this.type=e}if(t){O.extend(this,t)}this.timeStamp=e&&e.timeStamp||Date.now();this[O.expando]=true};O.Event.prototype={constructor:O.Event,isDefaultPrevented:Ae,isPropagationStopped:Ae,isImmediatePropagationStopped:Ae,isSimulated:false,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=je;if(e&&!this.isSimulated){e.preventDefault()}},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=je;if(e&&!this.isSimulated){e.stopPropagation()}},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=je;if(e&&!this.isSimulated){e.stopImmediatePropagation()}this.stopPropagation()}};O.each({altKey:true,bubbles:true,cancelable:true,changedTouches:true,ctrlKey:true,detail:true,eventPhase:true,metaKey:true,pageX:true,pageY:true,shiftKey:true,view:true,char:true,charCode:true,key:true,keyCode:true,button:true,buttons:true,clientX:true,clientY:true,offsetX:true,offsetY:true,pointerId:true,pointerType:true,screenX:true,screenY:true,targetTouches:true,toElement:true,touches:true,which:function(e){var t=e.button;if(e.which==null&&Te.test(e.type)){return e.charCode!=null?e.charCode:e.keyCode}if(!e.which&&t!==undefined&&Ee.test(e.type)){if(t&1){return 1}if(t&2){return 3}if(t&4){return 2}return 0}return e.which}},O.event.addProp);O.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){O.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,i=this,n=e.relatedTarget,a=e.handleObj;if(!n||n!==i&&!O.contains(i,n)){e.type=a.origType;r=a.handler.apply(this,arguments);e.type=t}return r}}});O.fn.extend({on:function(e,t,r,i){return ke(this,e,t,r,i)},one:function(e,t,r,i){return ke(this,e,t,r,i,1)},off:function(e,t,r){var i,n;if(e&&e.preventDefault&&e.handleObj){i=e.handleObj;O(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler);return this}if(typeof e==="object"){for(n in e){this.off(n,t,e[n])}return this}if(t===false||typeof t==="function"){r=t;t=undefined}if(r===false){r=Ae}return this.each(function(){O.event.remove(this,e,r,t)})}});var Ie=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,De=/<script|<style|<link/i,Re=/checked\s*(?:[^=]|=\s*.checked.)/i,Le=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function $e(e,t){if(k(e,"table")&&k(t.nodeType!==11?t:t.firstChild,"tr")){return O(e).children("tbody")[0]||e}return e}function Ne(e){e.type=(e.getAttribute("type")!==null)+"/"+e.type;return e}function Fe(e){if((e.type||"").slice(0,5)==="true/"){e.type=e.type.slice(5)}else{e.removeAttribute("type")}return e}function Ge(e,t){var r,i,n,a,o,s,l,u;if(t.nodeType!==1){return}if(re.hasData(e)){a=re.access(e);o=re.set(t,a);u=a.events;if(u){delete o.handle;o.events={};for(n in u){for(r=0,i=u[n].length;r<i;r++){O.event.add(t,n,u[n][r])}}}}if(ie.hasData(e)){s=ie.access(e);l=O.extend({},s);ie.set(t,l)}}function Ue(e,t){var r=t.nodeName.toLowerCase();if(r==="input"&&me.test(e.type)){t.checked=e.checked}else if(r==="input"||r==="textarea"){t.defaultValue=e.defaultValue}}function He(e,t,r,i){t=c.apply([],t);var n,a,o,s,l,u,f=0,h=e.length,d=h-1,p=t[0],v=_(p);if(v||h>1&&typeof p==="string"&&!y.checkClone&&Re.test(p)){return e.each(function(n){var a=e.eq(n);if(v){t[0]=p.call(this,n,a.html())}He(a,t,r,i)})}if(h){n=xe(t,e[0].ownerDocument,false,e,i);a=n.firstChild;if(n.childNodes.length===1){n=a}if(a||i){o=O.map(we(n,"script"),Ne);s=o.length;for(;f<h;f++){l=n;if(f!==d){l=O.clone(l,true,true);if(s){O.merge(o,we(l,"script"))}}r.call(e[f],l,f)}if(s){u=o[o.length-1].ownerDocument;O.map(o,Fe);for(f=0;f<s;f++){l=o[f];if(_e.test(l.type||"")&&!re.access(l,"globalEval")&&O.contains(u,l)){if(l.src&&(l.type||"").toLowerCase()!=="module"){if(O._evalUrl){O._evalUrl(l.src)}}else{S(l.textContent.replace(Le,""),u,l)}}}}}}return e}function Ye(e,t,r){var i,n=t?O.filter(t,e):e,a=0;for(;(i=n[a])!=null;a++){if(!r&&i.nodeType===1){O.cleanData(we(i))}if(i.parentNode){if(r&&O.contains(i.ownerDocument,i)){Se(we(i,"script"))}i.parentNode.removeChild(i)}}return e}O.extend({htmlPrefilter:function(e){return e.replace(Ie,"<$1></$2>")},clone:function(e,t,r){var i,n,a,o,s=e.cloneNode(true),l=O.contains(e.ownerDocument,e);if(!y.noCloneChecked&&(e.nodeType===1||e.nodeType===11)&&!O.isXMLDoc(e)){o=we(s);a=we(e);for(i=0,n=a.length;i<n;i++){Ue(a[i],o[i])}}if(t){if(r){a=a||we(e);o=o||we(s);for(i=0,n=a.length;i<n;i++){Ge(a[i],o[i])}}else{Ge(e,s)}}o=we(s,"script");if(o.length>0){Se(o,!l&&we(e,"script"))}return s},cleanData:function(e){var t,r,i,n=O.event.special,a=0;for(;(r=e[a])!==undefined;a++){if(ee(r)){if(t=r[re.expando]){if(t.events){for(i in t.events){if(n[i]){O.event.remove(r,i)}else{O.removeEvent(r,i,t.handle)}}}r[re.expando]=undefined}if(r[ie.expando]){r[ie.expando]=undefined}}}}});O.fn.extend({detach:function(e){return Ye(this,e,true)},remove:function(e){return Ye(this,e)},text:function(e){return X(this,function(e){return e===undefined?O.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=e}})},null,e,arguments.length)},append:function(){return He(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=$e(this,e);t.appendChild(e)}})},prepend:function(){return He(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=$e(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return He(this,arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this)}})},after:function(){return He(this,arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this.nextSibling)}})},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){if(e.nodeType===1){O.cleanData(we(e,false));e.textContent=""}}return this},clone:function(e,t){e=e==null?false:e;t=t==null?e:t;return this.map(function(){return O.clone(this,e,t)})},html:function(e){return X(this,function(e){var t=this[0]||{},r=0,i=this.length;if(e===undefined&&t.nodeType===1){return t.innerHTML}if(typeof e==="string"&&!De.test(e)&&!be[(ye.exec(e)||["",""])[1].toLowerCase()]){e=O.htmlPrefilter(e);try{for(;r<i;r++){t=this[r]||{};if(t.nodeType===1){O.cleanData(we(t,false));t.innerHTML=e}}t=0}catch(e){}}if(t){this.empty().append(e)}},null,e,arguments.length)},replaceWith:function(){var e=[];return He(this,arguments,function(t){var r=this.parentNode;if(O.inArray(this,e)<0){O.cleanData(we(this));if(r){r.replaceChild(t,this)}}},e)}});O.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){O.fn[e]=function(e){var r,i=[],n=O(e),a=n.length-1,o=0;for(;o<=a;o++){r=o===a?this:this.clone(true);O(n[o])[t](r);f.apply(i,r.get())}return this.pushStack(i)}});var We=new RegExp("^("+le+")(?!px)[a-z%]+$","i");var Ve=function(e){var t=e.ownerDocument.defaultView;if(!t||!t.opener){t=r}return t.getComputedStyle(e)};var ze=new RegExp(ce.join("|"),"i");(function(){function e(){if(!c){return}u.style.cssText="position:absolute;left:-11111px;width:60px;"+"margin-top:1px;padding:0;border:0";c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;"+"margin:auto;border:1px;padding:1px;"+"width:60%;top:1%";Oe.appendChild(u).appendChild(c);var e=r.getComputedStyle(c);i=e.top!=="1%";l=t(e.marginLeft)===12;c.style.right="60%";o=t(e.right)===36;n=t(e.width)===36;c.style.position="absolute";a=c.offsetWidth===36||"absolute";Oe.removeChild(u);c=null}function t(e){return Math.round(parseFloat(e))}var i,n,a,o,l,u=s.createElement("div"),c=s.createElement("div");if(!c.style){return}c.style.backgroundClip="content-box";c.cloneNode(true).style.backgroundClip="";y.clearCloneStyle=c.style.backgroundClip==="content-box";O.extend(y,{boxSizingReliable:function(){e();return n},pixelBoxStyles:function(){e();return o},pixelPosition:function(){e();return i},reliableMarginLeft:function(){e();return l},scrollboxSize:function(){e();return a}})})();function qe(e,t,r){var i,n,a,o,s=e.style;r=r||Ve(e);if(r){o=r.getPropertyValue(t)||r[t];if(o===""&&!O.contains(e.ownerDocument,e)){o=O.style(e,t)}if(!y.pixelBoxStyles()&&We.test(o)&&ze.test(t)){i=s.width;n=s.minWidth;a=s.maxWidth;s.minWidth=s.maxWidth=s.width=o;o=r.width;s.width=i;s.minWidth=n;s.maxWidth=a}}return o!==undefined?o+"":o}function Be(e,t){return{get:function(){if(e()){delete this.get;return}return(this.get=t).apply(this,arguments)}}}var Xe=/^(none|table(?!-c[ea]).+)/,Ke=/^--/,Ze={position:"absolute",visibility:"hidden",display:"block"},Qe={letterSpacing:"0",fontWeight:"400"},Je=["Webkit","Moz","ms"],et=s.createElement("div").style;function tt(e){if(e in et){return e}var t=e[0].toUpperCase()+e.slice(1),r=Je.length;while(r--){e=Je[r]+t;if(e in et){return e}}}function rt(e){var t=O.cssProps[e];if(!t){t=O.cssProps[e]=tt(e)||e}return t}function it(e,t,r){var i=ue.exec(t);return i?Math.max(0,i[2]-(r||0))+(i[3]||"px"):t}function nt(e,t,r,i,n,a){var o=t==="width"?1:0,s=0,l=0;if(r===(i?"border":"content")){return 0}for(;o<4;o+=2){if(r==="margin"){l+=O.css(e,r+ce[o],true,n)}if(!i){l+=O.css(e,"padding"+ce[o],true,n);if(r!=="padding"){l+=O.css(e,"border"+ce[o]+"Width",true,n)}else{s+=O.css(e,"border"+ce[o]+"Width",true,n)}}else{if(r==="content"){l-=O.css(e,"padding"+ce[o],true,n)}if(r!=="margin"){l-=O.css(e,"border"+ce[o]+"Width",true,n)}}}if(!i&&a>=0){l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-l-s-.5))}return l}function at(e,t,r){var i=Ve(e),n=qe(e,t,i),a=O.css(e,"boxSizing",false,i)==="border-box",o=a;if(We.test(n)){if(!r){return n}n="auto"}o=o&&(y.boxSizingReliable()||n===e.style[t]);if(n==="auto"||!parseFloat(n)&&O.css(e,"display",false,i)==="inline"){n=e["offset"+t[0].toUpperCase()+t.slice(1)];o=true}n=parseFloat(n)||0;return n+nt(e,t,r||(a?"border":"content"),o,i,n)+"px"}O.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=qe(e,"opacity");return r===""?"1":r}}}},cssNumber:{animationIterationCount:true,columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{},style:function(e,t,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style){return}var n,a,o,s=J(t),l=Ke.test(t),u=e.style;if(!l){t=rt(s)}o=O.cssHooks[t]||O.cssHooks[s];if(r!==undefined){a=typeof r;if(a==="string"&&(n=ue.exec(r))&&n[1]){r=de(e,t,n);a="number"}if(r==null||r!==r){return}if(a==="number"){r+=n&&n[3]||(O.cssNumber[s]?"":"px")}if(!y.clearCloneStyle&&r===""&&t.indexOf("background")===0){u[t]="inherit"}if(!o||!("set"in o)||(r=o.set(e,r,i))!==undefined){if(l){u.setProperty(t,r)}else{u[t]=r}}}else{if(o&&"get"in o&&(n=o.get(e,false,i))!==undefined){return n}return u[t]}},css:function(e,t,r,i){var n,a,o,s=J(t),l=Ke.test(t);if(!l){t=rt(s)}o=O.cssHooks[t]||O.cssHooks[s];if(o&&"get"in o){n=o.get(e,true,r)}if(n===undefined){n=qe(e,t,i)}if(n==="normal"&&t in Qe){n=Qe[t]}if(r===""||r){a=parseFloat(n);return r===true||isFinite(a)?a||0:n}return n}});O.each(["height","width"],function(e,t){O.cssHooks[t]={get:function(e,r,i){if(r){return Xe.test(O.css(e,"display"))&&(!e.getClientRects().length||!e.getBoundingClientRect().width)?he(e,Ze,function(){return at(e,t,i)}):at(e,t,i)}},set:function(e,r,i){var n,a=Ve(e),o=O.css(e,"boxSizing",false,a)==="border-box",s=i&&nt(e,t,i,o,a);if(o&&y.scrollboxSize()===a.position){s-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(a[t])-nt(e,t,"border",false,a)-.5)}if(s&&(n=ue.exec(r))&&(n[3]||"px")!=="px"){e.style[t]=r;r=O.css(e,t)}return it(e,r,s)}}});O.cssHooks.marginLeft=Be(y.reliableMarginLeft,function(e,t){if(t){return(parseFloat(qe(e,"marginLeft"))||e.getBoundingClientRect().left-he(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}});O.each({margin:"",padding:"",border:"Width"},function(e,t){O.cssHooks[e+t]={expand:function(r){var i=0,n={},a=typeof r==="string"?r.split(" "):[r];for(;i<4;i++){n[e+ce[i]+t]=a[i]||a[i-2]||a[0]}return n}};if(e!=="margin"){O.cssHooks[e+t].set=it}});O.fn.extend({css:function(e,t){return X(this,function(e,t,r){var i,n,a={},o=0;if(Array.isArray(t)){i=Ve(e);n=t.length;for(;o<n;o++){a[t[o]]=O.css(e,t[o],false,i)}return a}return r!==undefined?O.style(e,t,r):O.css(e,t)},e,t,arguments.length>1)}});function ot(e,t,r,i,n){return new ot.prototype.init(e,t,r,i,n)}O.Tween=ot;ot.prototype={constructor:ot,init:function(e,t,r,i,n,a){this.elem=e;this.prop=r;this.easing=n||O.easing._default;this.options=t;this.start=this.now=this.cur();this.end=i;this.unit=a||(O.cssNumber[r]?"":"px")},cur:function(){var e=ot.propHooks[this.prop];return e&&e.get?e.get(this):ot.propHooks._default.get(this)},run:function(e){var t,r=ot.propHooks[this.prop];if(this.options.duration){this.pos=t=O.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration)}else{this.pos=t=e}this.now=(this.end-this.start)*t+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(r&&r.set){r.set(this)}else{ot.propHooks._default.set(this)}return this}};ot.prototype.init.prototype=ot.prototype;ot.propHooks={_default:{get:function(e){var t;if(e.elem.nodeType!==1||e.elem[e.prop]!=null&&e.elem.style[e.prop]==null){return e.elem[e.prop]}t=O.css(e.elem,e.prop,"");return!t||t==="auto"?0:t},set:function(e){if(O.fx.step[e.prop]){O.fx.step[e.prop](e)}else if(e.elem.nodeType===1&&(e.elem.style[O.cssProps[e.prop]]!=null||O.cssHooks[e.prop])){O.style(e.elem,e.prop,e.now+e.unit)}else{e.elem[e.prop]=e.now}}}};ot.propHooks.scrollTop=ot.propHooks.scrollLeft={set:function(e){if(e.elem.nodeType&&e.elem.parentNode){e.elem[e.prop]=e.now}}};O.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"};O.fx=ot.prototype.init;O.fx.step={};var st,lt,ut=/^(?:toggle|show|hide)$/,ct=/queueHooks$/;function ft(){if(lt){if(s.hidden===false&&r.requestAnimationFrame){r.requestAnimationFrame(ft)}else{r.setTimeout(ft,O.fx.interval)}O.fx.tick()}}function ht(){r.setTimeout(function(){st=undefined});return st=Date.now()}function dt(e,t){var r,i=0,n={height:e};t=t?1:0;for(;i<4;i+=2-t){r=ce[i];n["margin"+r]=n["padding"+r]=e}if(t){n.opacity=n.width=e}return n}function pt(e,t,r){var i,n=(mt.tweeners[t]||[]).concat(mt.tweeners["*"]),a=0,o=n.length;for(;a<o;a++){if(i=n[a].call(r,t,e)){return i}}}function vt(e,t,r){var i,n,a,o,s,l,u,c,f="width"in t||"height"in t,h=this,d={},p=e.style,v=e.nodeType&&fe(e),g=re.get(e,"fxshow");if(!r.queue){o=O._queueHooks(e,"fx");if(o.unqueued==null){o.unqueued=0;s=o.empty.fire;o.empty.fire=function(){if(!o.unqueued){s()}}}o.unqueued++;h.always(function(){h.always(function(){o.unqueued--;if(!O.queue(e,"fx").length){o.empty.fire()}})})}for(i in t){n=t[i];if(ut.test(n)){delete t[i];a=a||n==="toggle";if(n===(v?"hide":"show")){if(n==="show"&&g&&g[i]!==undefined){v=true}else{continue}}d[i]=g&&g[i]||O.style(e,i)}}l=!O.isEmptyObject(t);if(!l&&O.isEmptyObject(d)){return}if(f&&e.nodeType===1){r.overflow=[p.overflow,p.overflowX,p.overflowY];u=g&&g.display;if(u==null){u=re.get(e,"display")}c=O.css(e,"display");if(c==="none"){if(u){c=u}else{ge([e],true);u=e.style.display||u;c=O.css(e,"display");ge([e])}}if(c==="inline"||c==="inline-block"&&u!=null){if(O.css(e,"float")==="none"){if(!l){h.done(function(){p.display=u});if(u==null){c=p.display;u=c==="none"?"":c}}p.display="inline-block"}}}if(r.overflow){p.overflow="hidden";h.always(function(){p.overflow=r.overflow[0];p.overflowX=r.overflow[1];p.overflowY=r.overflow[2]})}l=false;for(i in d){if(!l){if(g){if("hidden"in g){v=g.hidden}}else{g=re.access(e,"fxshow",{display:u})}if(a){g.hidden=!v}if(v){ge([e],true)}h.done(function(){if(!v){ge([e])}re.remove(e,"fxshow");for(i in d){O.style(e,i,d[i])}})}l=pt(v?g[i]:0,i,h);if(!(i in g)){g[i]=l.start;if(v){l.end=l.start;l.start=0}}}}function gt(e,t){var r,i,n,a,o;for(r in e){i=J(r);n=t[i];a=e[r];if(Array.isArray(a)){n=a[1];a=e[r]=a[0]}if(r!==i){e[i]=a;delete e[r]}o=O.cssHooks[i];if(o&&"expand"in o){a=o.expand(a);delete e[i];for(r in a){if(!(r in e)){e[r]=a[r];t[r]=n}}}else{t[i]=n}}}function mt(e,t,r){var i,n,a=0,o=mt.prefilters.length,s=O.Deferred().always(function(){delete l.elem}),l=function(){if(n){return false}var t=st||ht(),r=Math.max(0,u.startTime+u.duration-t),i=r/u.duration||0,a=1-i,o=0,l=u.tweens.length;for(;o<l;o++){u.tweens[o].run(a)}s.notifyWith(e,[u,a,r]);if(a<1&&l){return r}if(!l){s.notifyWith(e,[u,1,0])}s.resolveWith(e,[u]);return false},u=s.promise({elem:e,props:O.extend({},t),opts:O.extend(true,{specialEasing:{},easing:O.easing._default},r),originalProperties:t,originalOptions:r,startTime:st||ht(),duration:r.duration,tweens:[],createTween:function(t,r){var i=O.Tween(e,u.opts,t,r,u.opts.specialEasing[t]||u.opts.easing);u.tweens.push(i);return i},stop:function(t){var r=0,i=t?u.tweens.length:0;if(n){return this}n=true;for(;r<i;r++){u.tweens[r].run(1)}if(t){s.notifyWith(e,[u,1,0]);s.resolveWith(e,[u,t])}else{s.rejectWith(e,[u,t])}return this}}),c=u.props;gt(c,u.opts.specialEasing);for(;a<o;a++){i=mt.prefilters[a].call(u,e,c,u.opts);if(i){if(_(i.stop)){O._queueHooks(u.elem,u.opts.queue).stop=i.stop.bind(i)}return i}}O.map(c,pt,u);if(_(u.opts.start)){u.opts.start.call(e,u)}u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always);O.fx.timer(O.extend(l,{elem:e,anim:u,queue:u.opts.queue}));return u}O.Animation=O.extend(mt,{tweeners:{"*":[function(e,t){var r=this.createTween(e,t);de(r.elem,e,ue.exec(t),r);return r}]},tweener:function(e,t){if(_(e)){t=e;e=["*"]}else{e=e.match(U)}var r,i=0,n=e.length;for(;i<n;i++){r=e[i];mt.tweeners[r]=mt.tweeners[r]||[];mt.tweeners[r].unshift(t)}},prefilters:[vt],prefilter:function(e,t){if(t){mt.prefilters.unshift(e)}else{mt.prefilters.push(e)}}});O.speed=function(e,t,r){var i=e&&typeof e==="object"?O.extend({},e):{complete:r||!r&&t||_(e)&&e,duration:e,easing:r&&t||t&&!_(t)&&t};if(O.fx.off){i.duration=0}else{if(typeof i.duration!=="number"){if(i.duration in O.fx.speeds){i.duration=O.fx.speeds[i.duration]}else{i.duration=O.fx.speeds._default}}}if(i.queue==null||i.queue===true){i.queue="fx"}i.old=i.complete;i.complete=function(){if(_(i.old)){i.old.call(this)}if(i.queue){O.dequeue(this,i.queue)}};return i};O.fn.extend({fadeTo:function(e,t,r,i){return this.filter(fe).css("opacity",0).show().end().animate({opacity:t},e,r,i)},animate:function(e,t,r,i){var n=O.isEmptyObject(e),a=O.speed(t,r,i),o=function(){var t=mt(this,O.extend({},e),a);if(n||re.get(this,"finish")){t.stop(true)}};o.finish=o;return n||a.queue===false?this.each(o):this.queue(a.queue,o)},stop:function(e,t,r){var i=function(e){var t=e.stop;delete e.stop;t(r)};if(typeof e!=="string"){r=t;t=e;e=undefined}if(t&&e!==false){this.queue(e||"fx",[])}return this.each(function(){var t=true,n=e!=null&&e+"queueHooks",a=O.timers,o=re.get(this);if(n){if(o[n]&&o[n].stop){i(o[n])}}else{for(n in o){if(o[n]&&o[n].stop&&ct.test(n)){i(o[n])}}}for(n=a.length;n--;){if(a[n].elem===this&&(e==null||a[n].queue===e)){a[n].anim.stop(r);t=false;a.splice(n,1)}}if(t||!r){O.dequeue(this,e)}})},finish:function(e){if(e!==false){e=e||"fx"}return this.each(function(){var t,r=re.get(this),i=r[e+"queue"],n=r[e+"queueHooks"],a=O.timers,o=i?i.length:0;r.finish=true;O.queue(this,e,[]);if(n&&n.stop){n.stop.call(this,true)}for(t=a.length;t--;){if(a[t].elem===this&&a[t].queue===e){a[t].anim.stop(true);a.splice(t,1)}}for(t=0;t<o;t++){if(i[t]&&i[t].finish){i[t].finish.call(this)}}delete r.finish})}});O.each(["toggle","show","hide"],function(e,t){var r=O.fn[t];O.fn[t]=function(e,i,n){return e==null||typeof e==="boolean"?r.apply(this,arguments):this.animate(dt(t,true),e,i,n)}});O.each({slideDown:dt("show"),slideUp:dt("hide"),slideToggle:dt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){O.fn[e]=function(e,r,i){return this.animate(t,e,r,i)}});O.timers=[];O.fx.tick=function(){var e,t=0,r=O.timers;st=Date.now();for(;t<r.length;t++){e=r[t];if(!e()&&r[t]===e){r.splice(t--,1)}}if(!r.length){O.fx.stop()}st=undefined};O.fx.timer=function(e){O.timers.push(e);O.fx.start()};O.fx.interval=13;O.fx.start=function(){if(lt){return}lt=true;ft()};O.fx.stop=function(){lt=null};O.fx.speeds={slow:600,fast:200,_default:400};O.fn.delay=function(e,t){e=O.fx?O.fx.speeds[e]||e:e;t=t||"fx";return this.queue(t,function(t,i){var n=r.setTimeout(t,e);i.stop=function(){r.clearTimeout(n)}})};(function(){var e=s.createElement("input"),t=s.createElement("select"),r=t.appendChild(s.createElement("option"));e.type="checkbox";y.checkOn=e.value!=="";y.optSelected=r.selected;e=s.createElement("input");e.value="t";e.type="radio";y.radioValue=e.value==="t"})();var yt,_t=O.expr.attrHandle;O.fn.extend({attr:function(e,t){return X(this,O.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){O.removeAttr(this,e)})}});O.extend({attr:function(e,t,r){var i,n,a=e.nodeType;if(a===3||a===8||a===2){return}if(typeof e.getAttribute==="undefined"){return O.prop(e,t,r)}if(a!==1||!O.isXMLDoc(e)){n=O.attrHooks[t.toLowerCase()]||(O.expr.match.bool.test(t)?yt:undefined)}if(r!==undefined){if(r===null){O.removeAttr(e,t);return}if(n&&"set"in n&&(i=n.set(e,r,t))!==undefined){return i}e.setAttribute(t,r+"");return r}if(n&&"get"in n&&(i=n.get(e,t))!==null){return i}i=O.find.attr(e,t);return i==null?undefined:i},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&t==="radio"&&k(e,"input")){var r=e.value;e.setAttribute("type",t);if(r){e.value=r}return t}}}},removeAttr:function(e,t){var r,i=0,n=t&&t.match(U);if(n&&e.nodeType===1){while(r=n[i++]){e.removeAttribute(r)}}}});yt={set:function(e,t,r){if(t===false){O.removeAttr(e,r)}else{e.setAttribute(r,r)}return r}};O.each(O.expr.match.bool.source.match(/\w+/g),function(e,t){var r=_t[t]||O.find.attr;_t[t]=function(e,t,i){var n,a,o=t.toLowerCase();if(!i){a=_t[o];_t[o]=n;n=r(e,t,i)!=null?o:null;_t[o]=a}return n}});var bt=/^(?:input|select|textarea|button)$/i,wt=/^(?:a|area)$/i;O.fn.extend({prop:function(e,t){return X(this,O.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[O.propFix[e]||e]})}});O.extend({prop:function(e,t,r){var i,n,a=e.nodeType;if(a===3||a===8||a===2){return}if(a!==1||!O.isXMLDoc(e)){t=O.propFix[t]||t;n=O.propHooks[t]}if(r!==undefined){if(n&&"set"in n&&(i=n.set(e,r,t))!==undefined){return i}return e[t]=r}if(n&&"get"in n&&(i=n.get(e,t))!==null){return i}return e[t]},propHooks:{tabIndex:{get:function(e){var t=O.find.attr(e,"tabindex");if(t){return parseInt(t,10)}if(bt.test(e.nodeName)||wt.test(e.nodeName)&&e.href){return 0}return-1}}},propFix:{for:"htmlFor",class:"className"}});if(!y.optSelected){O.propHooks.selected={get:function(e){var t=e.parentNode;if(t&&t.parentNode){t.parentNode.selectedIndex}return null},set:function(e){var t=e.parentNode;if(t){t.selectedIndex;if(t.parentNode){t.parentNode.selectedIndex}}}}}O.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){O.propFix[this.toLowerCase()]=this});function St(e){var t=e.match(U)||[];return t.join(" ")}function Ct(e){return e.getAttribute&&e.getAttribute("class")||""}function xt(e){if(Array.isArray(e)){return e}if(typeof e==="string"){return e.match(U)||[]}return[]}O.fn.extend({addClass:function(e){var t,r,i,n,a,o,s,l=0;if(_(e)){return this.each(function(t){O(this).addClass(e.call(this,t,Ct(this)))})}t=xt(e);if(t.length){while(r=this[l++]){n=Ct(r);i=r.nodeType===1&&" "+St(n)+" ";if(i){o=0;while(a=t[o++]){if(i.indexOf(" "+a+" ")<0){i+=a+" "}}s=St(i);if(n!==s){r.setAttribute("class",s)}}}}return this},removeClass:function(e){var t,r,i,n,a,o,s,l=0;if(_(e)){return this.each(function(t){O(this).removeClass(e.call(this,t,Ct(this)))})}if(!arguments.length){return this.attr("class","")}t=xt(e);if(t.length){while(r=this[l++]){n=Ct(r);i=r.nodeType===1&&" "+St(n)+" ";if(i){o=0;while(a=t[o++]){while(i.indexOf(" "+a+" ")>-1){i=i.replace(" "+a+" "," ")}}s=St(i);if(n!==s){r.setAttribute("class",s)}}}}return this},toggleClass:function(e,t){var r=typeof e,i=r==="string"||Array.isArray(e);if(typeof t==="boolean"&&i){return t?this.addClass(e):this.removeClass(e)}if(_(e)){return this.each(function(r){O(this).toggleClass(e.call(this,r,Ct(this),t),t)})}return this.each(function(){var t,n,a,o;if(i){n=0;a=O(this);o=xt(e);while(t=o[n++]){if(a.hasClass(t)){a.removeClass(t)}else{a.addClass(t)}}}else if(e===undefined||r==="boolean"){t=Ct(this);if(t){re.set(this,"__className__",t)}if(this.setAttribute){this.setAttribute("class",t||e===false?"":re.get(this,"__className__")||"")}}})},hasClass:function(e){var t,r,i=0;t=" "+e+" ";while(r=this[i++]){if(r.nodeType===1&&(" "+St(Ct(r))+" ").indexOf(t)>-1){return true}}return false}});var Ot=/\r/g;O.fn.extend({val:function(e){var t,r,i,n=this[0];if(!arguments.length){if(n){t=O.valHooks[n.type]||O.valHooks[n.nodeName.toLowerCase()];if(t&&"get"in t&&(r=t.get(n,"value"))!==undefined){return r}r=n.value;if(typeof r==="string"){return r.replace(Ot,"")}return r==null?"":r}return}i=_(e);return this.each(function(r){var n;if(this.nodeType!==1){return}if(i){n=e.call(this,r,O(this).val())}else{n=e}if(n==null){n=""}else if(typeof n==="number"){n+=""}else if(Array.isArray(n)){n=O.map(n,function(e){return e==null?"":e+""})}t=O.valHooks[this.type]||O.valHooks[this.nodeName.toLowerCase()];if(!t||!("set"in t)||t.set(this,n,"value")===undefined){this.value=n}})}});O.extend({valHooks:{option:{get:function(e){var t=O.find.attr(e,"value");return t!=null?t:St(O.text(e))}},select:{get:function(e){var t,r,i,n=e.options,a=e.selectedIndex,o=e.type==="select-one",s=o?null:[],l=o?a+1:n.length;if(a<0){i=l}else{i=o?a:0}for(;i<l;i++){r=n[i];if((r.selected||i===a)&&!r.disabled&&(!r.parentNode.disabled||!k(r.parentNode,"optgroup"))){t=O(r).val();if(o){return t}s.push(t)}}return s},set:function(e,t){var r,i,n=e.options,a=O.makeArray(t),o=n.length;while(o--){i=n[o];if(i.selected=O.inArray(O.valHooks.option.get(i),a)>-1){r=true}}if(!r){e.selectedIndex=-1}return a}}}});O.each(["radio","checkbox"],function(){O.valHooks[this]={set:function(e,t){if(Array.isArray(t)){return e.checked=O.inArray(O(e).val(),t)>-1}}};if(!y.checkOn){O.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value}}});y.focusin="onfocusin"in r;var Tt=/^(?:focusinfocus|focusoutblur)$/,Et=function(e){e.stopPropagation()};O.extend(O.event,{trigger:function(e,t,i,n){var a,o,l,u,c,f,h,d,p=[i||s],g=v.call(e,"type")?e.type:e,m=v.call(e,"namespace")?e.namespace.split("."):[];o=d=l=i=i||s;if(i.nodeType===3||i.nodeType===8){return}if(Tt.test(g+O.event.triggered)){return}if(g.indexOf(".")>-1){m=g.split(".");g=m.shift();m.sort()}c=g.indexOf(":")<0&&"on"+g;e=e[O.expando]?e:new O.Event(g,typeof e==="object"&&e);e.isTrigger=n?2:3;e.namespace=m.join(".");e.rnamespace=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;e.result=undefined;if(!e.target){e.target=i}t=t==null?[e]:O.makeArray(t,[e]);h=O.event.special[g]||{};if(!n&&h.trigger&&h.trigger.apply(i,t)===false){return}if(!n&&!h.noBubble&&!b(i)){u=h.delegateType||g;if(!Tt.test(u+g)){o=o.parentNode}for(;o;o=o.parentNode){p.push(o);l=o}if(l===(i.ownerDocument||s)){p.push(l.defaultView||l.parentWindow||r)}}a=0;while((o=p[a++])&&!e.isPropagationStopped()){d=o;e.type=a>1?u:h.bindType||g;f=(re.get(o,"events")||{})[e.type]&&re.get(o,"handle");if(f){f.apply(o,t)}f=c&&o[c];if(f&&f.apply&&ee(o)){e.result=f.apply(o,t);if(e.result===false){e.preventDefault()}}}e.type=g;if(!n&&!e.isDefaultPrevented()){if((!h._default||h._default.apply(p.pop(),t)===false)&&ee(i)){if(c&&_(i[g])&&!b(i)){l=i[c];if(l){i[c]=null}O.event.triggered=g;if(e.isPropagationStopped()){d.addEventListener(g,Et)}i[g]();if(e.isPropagationStopped()){d.removeEventListener(g,Et)}O.event.triggered=undefined;if(l){i[c]=l}}}}return e.result},simulate:function(e,t,r){var i=O.extend(new O.Event,r,{type:e,isSimulated:true});O.event.trigger(i,null,t)}});O.fn.extend({trigger:function(e,t){return this.each(function(){O.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];if(r){return O.event.trigger(e,t,r,true)}}});if(!y.focusin){O.each({focus:"focusin",blur:"focusout"},function(e,t){var r=function(e){O.event.simulate(t,e.target,O.event.fix(e))};O.event.special[t]={setup:function(){var i=this.ownerDocument||this,n=re.access(i,t);if(!n){i.addEventListener(e,r,true)}re.access(i,t,(n||0)+1)},teardown:function(){var i=this.ownerDocument||this,n=re.access(i,t)-1;if(!n){i.removeEventListener(e,r,true);re.remove(i,t)}else{re.access(i,t,n)}}}})}var Mt=r.location;var jt=Date.now();var At=/\?/;O.parseXML=function(e){var t;if(!e||typeof e!=="string"){return null}try{t=(new r.DOMParser).parseFromString(e,"text/xml")}catch(e){t=undefined}if(!t||t.getElementsByTagName("parsererror").length){O.error("Invalid XML: "+e)}return t};var Pt=/\[\]$/,kt=/\r?\n/g,It=/^(?:submit|button|image|reset|file)$/i,Dt=/^(?:input|select|textarea|keygen)/i;function Rt(e,t,r,i){var n;if(Array.isArray(t)){O.each(t,function(t,n){if(r||Pt.test(e)){i(e,n)}else{Rt(e+"["+(typeof n==="object"&&n!=null?t:"")+"]",n,r,i)}})}else if(!r&&C(t)==="object"){for(n in t){Rt(e+"["+n+"]",t[n],r,i)}}else{i(e,t)}}O.param=function(e,t){var r,i=[],n=function(e,t){var r=_(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(r==null?"":r)};if(Array.isArray(e)||e.jquery&&!O.isPlainObject(e)){O.each(e,function(){n(this.name,this.value)})}else{for(r in e){Rt(r,e[r],t,n)}}return i.join("&")};O.fn.extend({serialize:function(){return O.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=O.prop(this,"elements");return e?O.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!O(this).is(":disabled")&&Dt.test(this.nodeName)&&!It.test(e)&&(this.checked||!me.test(e))}).map(function(e,t){var r=O(this).val();if(r==null){return null}if(Array.isArray(r)){return O.map(r,function(e){return{name:t.name,value:e.replace(kt,"\r\n")}})}return{name:t.name,value:r.replace(kt,"\r\n")}}).get()}});var Lt=/%20/g,$t=/#.*$/,Nt=/([?&])_=[^&]*/,Ft=/^(.*?):[ \t]*([^\r\n]*)$/gm,Gt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ut=/^(?:GET|HEAD)$/,Ht=/^\/\//,Yt={},Wt={},Vt="*/".concat("*"),zt=s.createElement("a");zt.href=Mt.href;function qt(e){return function(t,r){if(typeof t!=="string"){r=t;t="*"}var i,n=0,a=t.toLowerCase().match(U)||[];if(_(r)){while(i=a[n++]){if(i[0]==="+"){i=i.slice(1)||"*";(e[i]=e[i]||[]).unshift(r)}else{(e[i]=e[i]||[]).push(r)}}}}}function Bt(e,t,r,i){var n={},a=e===Wt;function o(s){var l;n[s]=true;O.each(e[s]||[],function(e,s){var u=s(t,r,i);if(typeof u==="string"&&!a&&!n[u]){t.dataTypes.unshift(u);o(u);return false}else if(a){return!(l=u)}});return l}return o(t.dataTypes[0])||!n["*"]&&o("*")}function Xt(e,t){var r,i,n=O.ajaxSettings.flatOptions||{};for(r in t){if(t[r]!==undefined){(n[r]?e:i||(i={}))[r]=t[r]}}if(i){O.extend(true,e,i)}return e}function Kt(e,t,r){var i,n,a,o,s=e.contents,l=e.dataTypes;while(l[0]==="*"){l.shift();if(i===undefined){i=e.mimeType||t.getResponseHeader("Content-Type")}}if(i){for(n in s){if(s[n]&&s[n].test(i)){l.unshift(n);break}}}if(l[0]in r){a=l[0]}else{for(n in r){if(!l[0]||e.converters[n+" "+l[0]]){a=n;break}if(!o){o=n}}a=a||o}if(a){if(a!==l[0]){l.unshift(a)}return r[a]}}function Zt(e,t,r,i){var n,a,o,s,l,u={},c=e.dataTypes.slice();if(c[1]){for(o in e.converters){u[o.toLowerCase()]=e.converters[o]}}a=c.shift();while(a){if(e.responseFields[a]){r[e.responseFields[a]]=t}if(!l&&i&&e.dataFilter){t=e.dataFilter(t,e.dataType)}l=a;a=c.shift();if(a){if(a==="*"){a=l}else if(l!=="*"&&l!==a){o=u[l+" "+a]||u["* "+a];if(!o){for(n in u){s=n.split(" ");if(s[1]===a){o=u[l+" "+s[0]]||u["* "+s[0]];if(o){if(o===true){o=u[n]}else if(u[n]!==true){a=s[0];c.unshift(s[1])}break}}}}if(o!==true){if(o&&e.throws){t=o(t)}else{try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+a}}}}}}}return{state:"success",data:t}}O.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Mt.href,type:"GET",isLocal:Gt.test(Mt.protocol),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Vt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":JSON.parse,"text xml":O.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(e,t){return t?Xt(Xt(e,O.ajaxSettings),t):Xt(O.ajaxSettings,e)},ajaxPrefilter:qt(Yt),ajaxTransport:qt(Wt),ajax:function(e,t){if(typeof e==="object"){t=e;e=undefined}t=t||{};var i,n,a,o,l,u,c,f,h,d,p=O.ajaxSetup({},t),v=p.context||p,g=p.context&&(v.nodeType||v.jquery)?O(v):O.event,m=O.Deferred(),y=O.Callbacks("once memory"),_=p.statusCode||{},b={},w={},S="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(c){if(!o){o={};while(t=Ft.exec(a)){o[t[1].toLowerCase()]=t[2]}}t=o[e.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){if(c==null){e=w[e.toLowerCase()]=w[e.toLowerCase()]||e;b[e]=t}return this},overrideMimeType:function(e){if(c==null){p.mimeType=e}return this},statusCode:function(e){var t;if(e){if(c){C.always(e[C.status])}else{for(t in e){_[t]=[_[t],e[t]]}}}return this},abort:function(e){var t=e||S;if(i){i.abort(t)}x(0,t);return this}};m.promise(C);p.url=((e||p.url||Mt.href)+"").replace(Ht,Mt.protocol+"//");p.type=t.method||t.type||p.method||p.type;p.dataTypes=(p.dataType||"*").toLowerCase().match(U)||[""];if(p.crossDomain==null){u=s.createElement("a");try{u.href=p.url;u.href=u.href;p.crossDomain=zt.protocol+"//"+zt.host!==u.protocol+"//"+u.host}catch(e){p.crossDomain=true}}if(p.data&&p.processData&&typeof p.data!=="string"){p.data=O.param(p.data,p.traditional)}Bt(Yt,p,t,C);if(c){return C}f=O.event&&p.global;if(f&&O.active++===0){O.event.trigger("ajaxStart")}p.type=p.type.toUpperCase();p.hasContent=!Ut.test(p.type);n=p.url.replace($t,"");if(!p.hasContent){d=p.url.slice(n.length);if(p.data&&(p.processData||typeof p.data==="string")){n+=(At.test(n)?"&":"?")+p.data;delete p.data}if(p.cache===false){n=n.replace(Nt,"$1");d=(At.test(n)?"&":"?")+"_="+jt+++d}p.url=n+d}else if(p.data&&p.processData&&(p.contentType||"").indexOf("application/x-www-form-urlencoded")===0){p.data=p.data.replace(Lt,"+")}if(p.ifModified){if(O.lastModified[n]){C.setRequestHeader("If-Modified-Since",O.lastModified[n])}if(O.etag[n]){C.setRequestHeader("If-None-Match",O.etag[n])}}if(p.data&&p.hasContent&&p.contentType!==false||t.contentType){C.setRequestHeader("Content-Type",p.contentType)}C.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+(p.dataTypes[0]!=="*"?", "+Vt+"; q=0.01":""):p.accepts["*"]);for(h in p.headers){C.setRequestHeader(h,p.headers[h])}if(p.beforeSend&&(p.beforeSend.call(v,C,p)===false||c)){return C.abort()}S="abort";y.add(p.complete);C.done(p.success);C.fail(p.error);i=Bt(Wt,p,t,C);if(!i){x(-1,"No Transport")}else{C.readyState=1;if(f){g.trigger("ajaxSend",[C,p])}if(c){return C}if(p.async&&p.timeout>0){l=r.setTimeout(function(){C.abort("timeout")},p.timeout)}try{c=false;i.send(b,x)}catch(e){if(c){throw e}x(-1,e)}}function x(e,t,o,s){var u,h,d,b,w,S=t;if(c){return}c=true;if(l){r.clearTimeout(l)}i=undefined;a=s||"";C.readyState=e>0?4:0;u=e>=200&&e<300||e===304;if(o){b=Kt(p,C,o)}b=Zt(p,b,C,u);if(u){if(p.ifModified){w=C.getResponseHeader("Last-Modified");if(w){O.lastModified[n]=w}w=C.getResponseHeader("etag");if(w){O.etag[n]=w}}if(e===204||p.type==="HEAD"){S="nocontent"}else if(e===304){S="notmodified"}else{S=b.state;h=b.data;d=b.error;u=!d}}else{d=S;if(e||!S){S="error";if(e<0){e=0}}}C.status=e;C.statusText=(t||S)+"";if(u){m.resolveWith(v,[h,S,C])}else{m.rejectWith(v,[C,S,d])}C.statusCode(_);_=undefined;if(f){g.trigger(u?"ajaxSuccess":"ajaxError",[C,p,u?h:d])}y.fireWith(v,[C,S]);if(f){g.trigger("ajaxComplete",[C,p]);if(!--O.active){O.event.trigger("ajaxStop")}}}return C},getJSON:function(e,t,r){return O.get(e,t,r,"json")},getScript:function(e,t){return O.get(e,undefined,t,"script")}});O.each(["get","post"],function(e,t){O[t]=function(e,r,i,n){if(_(r)){n=n||i;i=r;r=undefined}return O.ajax(O.extend({url:e,type:t,dataType:n,data:r,success:i},O.isPlainObject(e)&&e))}});O._evalUrl=function(e){return O.ajax({url:e,type:"GET",dataType:"script",cache:true,async:false,global:false,throws:true})};O.fn.extend({wrapAll:function(e){var t;if(this[0]){if(_(e)){e=e.call(this[0])}t=O(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){t.insertBefore(this[0])}t.map(function(){var e=this;while(e.firstElementChild){e=e.firstElementChild}return e}).append(this)}return this},wrapInner:function(e){if(_(e)){return this.each(function(t){O(this).wrapInner(e.call(this,t))})}return this.each(function(){var t=O(this),r=t.contents();if(r.length){r.wrapAll(e)}else{t.append(e)}})},wrap:function(e){var t=_(e);return this.each(function(r){O(this).wrapAll(t?e.call(this,r):e)})},unwrap:function(e){this.parent(e).not("body").each(function(){O(this).replaceWith(this.childNodes)});return this}});O.expr.pseudos.hidden=function(e){return!O.expr.pseudos.visible(e)};O.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)};O.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(e){}};var Qt={0:200,1223:204},Jt=O.ajaxSettings.xhr();y.cors=!!Jt&&"withCredentials"in Jt;y.ajax=Jt=!!Jt;O.ajaxTransport(function(e){var t,i;if(y.cors||Jt&&!e.crossDomain){return{send:function(n,a){var o,s=e.xhr();s.open(e.type,e.url,e.async,e.username,e.password);if(e.xhrFields){for(o in e.xhrFields){s[o]=e.xhrFields[o]}}if(e.mimeType&&s.overrideMimeType){s.overrideMimeType(e.mimeType)}if(!e.crossDomain&&!n["X-Requested-With"]){n["X-Requested-With"]="XMLHttpRequest"}for(o in n){s.setRequestHeader(o,n[o])}t=function(e){return function(){if(t){t=i=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null;if(e==="abort"){s.abort()}else if(e==="error"){if(typeof s.status!=="number"){a(0,"error")}else{a(s.status,s.statusText)}}else{a(Qt[s.status]||s.status,s.statusText,(s.responseType||"text")!=="text"||typeof s.responseText!=="string"?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders())}}}};s.onload=t();i=s.onerror=s.ontimeout=t("error");if(s.onabort!==undefined){s.onabort=i}else{s.onreadystatechange=function(){if(s.readyState===4){r.setTimeout(function(){if(t){i()}})}}}t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t){throw e}}},abort:function(){if(t){t()}}}}});O.ajaxPrefilter(function(e){if(e.crossDomain){e.contents.script=false}});O.ajaxSetup({accepts:{script:"text/javascript, application/javascript, "+"application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){O.globalEval(e);return e}}});O.ajaxPrefilter("script",function(e){if(e.cache===undefined){e.cache=false}if(e.crossDomain){e.type="GET"}});O.ajaxTransport("script",function(e){if(e.crossDomain){var t,r;return{send:function(i,n){t=O("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove();r=null;if(e){n(e.type==="error"?404:200,e.type)}});s.head.appendChild(t[0])},abort:function(){if(r){r()}}}}});var er=[],tr=/(=)\?(?=&|$)|\?\?/;O.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=er.pop()||O.expando+"_"+jt++;this[e]=true;return e}});O.ajaxPrefilter("json jsonp",function(e,t,i){var n,a,o,s=e.jsonp!==false&&(tr.test(e.url)?"url":typeof e.data==="string"&&(e.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&tr.test(e.data)&&"data");if(s||e.dataTypes[0]==="jsonp"){n=e.jsonpCallback=_(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback;if(s){e[s]=e[s].replace(tr,"$1"+n)}else if(e.jsonp!==false){e.url+=(At.test(e.url)?"&":"?")+e.jsonp+"="+n}e.converters["script json"]=function(){if(!o){O.error(n+" was not called")}return o[0]};e.dataTypes[0]="json";a=r[n];r[n]=function(){o=arguments};i.always(function(){if(a===undefined){O(r).removeProp(n)}else{r[n]=a}if(e[n]){e.jsonpCallback=t.jsonpCallback;er.push(n)}if(o&&_(a)){a(o[0])}o=a=undefined});return"script"}});y.createHTMLDocument=function(){var e=s.implementation.createHTMLDocument("").body;e.innerHTML="<form></form><form></form>";return e.childNodes.length===2}();O.parseHTML=function(e,t,r){if(typeof e!=="string"){return[]}if(typeof t==="boolean"){r=t;t=false}var i,n,a;if(!t){if(y.createHTMLDocument){t=s.implementation.createHTMLDocument("");i=t.createElement("base");i.href=s.location.href;t.head.appendChild(i)}else{t=s}}n=I.exec(e);a=!r&&[];if(n){return[t.createElement(n[1])]}n=xe([e],t,a);if(a&&a.length){O(a).remove()}return O.merge([],n.childNodes)};O.fn.load=function(e,t,r){var i,n,a,o=this,s=e.indexOf(" ");if(s>-1){i=St(e.slice(s));e=e.slice(0,s)}if(_(t)){r=t;t=undefined}else if(t&&typeof t==="object"){n="POST"}if(o.length>0){O.ajax({url:e,type:n||"GET",dataType:"html",data:t}).done(function(e){a=arguments;o.html(i?O("<div>").append(O.parseHTML(e)).find(i):e)}).always(r&&function(e,t){o.each(function(){r.apply(this,a||[e.responseText,t,e])})})}return this};O.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){O.fn[t]=function(e){return this.on(t,e)}});O.expr.pseudos.animated=function(e){return O.grep(O.timers,function(t){return e===t.elem}).length};O.offset={setOffset:function(e,t,r){var i,n,a,o,s,l,u,c=O.css(e,"position"),f=O(e),h={};if(c==="static"){e.style.position="relative"}s=f.offset();a=O.css(e,"top");l=O.css(e,"left");u=(c==="absolute"||c==="fixed")&&(a+l).indexOf("auto")>-1;if(u){i=f.position();o=i.top;n=i.left}else{o=parseFloat(a)||0;n=parseFloat(l)||0}if(_(t)){t=t.call(e,r,O.extend({},s))}if(t.top!=null){h.top=t.top-s.top+o}if(t.left!=null){h.left=t.left-s.left+n}if("using"in t){t.using.call(e,h)}else{f.css(h)}}};O.fn.extend({offset:function(e){if(arguments.length){return e===undefined?this:this.each(function(t){O.offset.setOffset(this,e,t)})}var t,r,i=this[0];if(!i){return}if(!i.getClientRects().length){return{top:0,left:0}}t=i.getBoundingClientRect();r=i.ownerDocument.defaultView;return{top:t.top+r.pageYOffset,left:t.left+r.pageXOffset}},position:function(){if(!this[0]){return}var e,t,r,i=this[0],n={top:0,left:0};if(O.css(i,"position")==="fixed"){t=i.getBoundingClientRect()}else{t=this.offset();r=i.ownerDocument;e=i.offsetParent||r.documentElement;while(e&&(e===r.body||e===r.documentElement)&&O.css(e,"position")==="static"){e=e.parentNode}if(e&&e!==i&&e.nodeType===1){n=O(e).offset();n.top+=O.css(e,"borderTopWidth",true);n.left+=O.css(e,"borderLeftWidth",true)}}return{top:t.top-n.top-O.css(i,"marginTop",true),left:t.left-n.left-O.css(i,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&O.css(e,"position")==="static"){e=e.offsetParent}return e||Oe})}});O.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var r="pageYOffset"===t;O.fn[e]=function(i){return X(this,function(e,i,n){var a;if(b(e)){a=e}else if(e.nodeType===9){a=e.defaultView}if(n===undefined){return a?a[t]:e[i]}if(a){a.scrollTo(!r?n:a.pageXOffset,r?n:a.pageYOffset)}else{e[i]=n}},e,i,arguments.length)}});O.each(["top","left"],function(e,t){O.cssHooks[t]=Be(y.pixelPosition,function(e,r){if(r){r=qe(e,t);return We.test(r)?O(e).position()[t]+"px":r}})});O.each({Height:"height",Width:"width"},function(e,t){O.each({padding:"inner"+e,content:t,"":"outer"+e},function(r,i){O.fn[i]=function(n,a){var o=arguments.length&&(r||typeof n!=="boolean"),s=r||(n===true||a===true?"margin":"border");return X(this,function(t,r,n){var a;if(b(t)){return i.indexOf("outer")===0?t["inner"+e]:t.document.documentElement["client"+e]}if(t.nodeType===9){a=t.documentElement;return Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])}return n===undefined?O.css(t,r,s):O.style(t,r,n,s)},t,o?n:undefined,o)}})});O.each(("blur focus focusin focusout resize scroll click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup contextmenu").split(" "),function(e,t){O.fn[t]=function(e,r){return arguments.length>0?this.on(t,null,e,r):this.trigger(t)}});O.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});O.fn.extend({bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,i){return this.on(t,e,r,i)},undelegate:function(e,t,r){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",r)}});O.proxy=function(e,t){var r,i,n;if(typeof t==="string"){r=e[t];t=e;e=r}if(!_(e)){return undefined}i=u.call(arguments,2);n=function(){return e.apply(t||this,i.concat(u.call(arguments)))};n.guid=e.guid=e.guid||O.guid++;return n};O.holdReady=function(e){if(e){O.readyWait++}else{O.ready(true)}};O.isArray=Array.isArray;O.parseJSON=JSON.parse;O.nodeName=k;O.isFunction=_;O.isWindow=b;O.camelCase=J;O.type=C;O.now=Date.now;O.isNumeric=function(e){var t=O.type(e);return(t==="number"||t==="string")&&!isNaN(e-parseFloat(e))};if(true){!(i=[],n=function(){return O}.apply(t,i),n!==undefined&&(e.exports=n))}var rr=r.jQuery,ir=r.$;O.noConflict=function(e){if(r.$===O){r.$=ir}if(e&&r.jQuery===O){r.jQuery=rr}return O};if(!a){r.jQuery=r.$=O}return O})},function(e,t,r){"use strict";t["a"]={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4,ABORT:5}},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var i=r(112);function n(e){var t=+e,r=0;if(t!==0&&isFinite(t)){r=Object(i["a"])(t)}return r}},function(e,t,r){"use strict";r.d(t,"a",function(){return a});r.d(t,"b",function(){return o});r.d(t,"c",function(){return s});r.d(t,"e",function(){return f});r.d(t,"f",function(){return h});r.d(t,"g",function(){return d});r.d(t,"h",function(){return p});r.d(t,"d",function(){return v});r.d(t,"i",function(){return g});var i=r(22);var n=r(153);function a(e,t){e[0]+=t[0];e[1]+=t[1];return e}function o(e,t){var r=t.getRadius();var i=t.getCenter();var n=i[0];var a=i[1];var o=e[0];var s=e[1];var l=o-n;var u=s-a;if(l===0&&u===0){l=1}var c=Math.sqrt(l*l+u*u);var f=n+r*l/c;var h=a+r*u/c;return[f,h]}function s(e,t){var r=e[0];var i=e[1];var n=t[0];var a=t[1];var o=n[0];var s=n[1];var l=a[0];var u=a[1];var c=l-o;var f=u-s;var h=c===0&&f===0?0:(c*(r-o)+f*(i-s))/(c*c+f*f||0);var d=void 0,p=void 0;if(h<=0){d=o;p=s}else if(h>=1){d=l;p=u}else{d=o+h*c;p=s+h*f}return[d,p]}function l(e){return function(t){return y(t,e)}}function u(e,t,r){var a=Object(i["d"])(t+180,360)-180;var o=Math.abs(3600*a);var s=r||0;var l=Math.pow(10,s);var u=Math.floor(o/3600);var c=Math.floor((o-u*3600)/60);var f=o-u*3600-c*60;f=Math.ceil(f*l)/l;if(f>=60){f=0;c+=1}if(c>=60){c=0;u+=1}return u+"° "+Object(n["b"])(c,2)+"′ "+Object(n["b"])(f,2,s)+"″"+(a==0?"":" "+e.charAt(a<0?1:0))}function c(e,t,r){if(e){return t.replace("{x}",e[0].toFixed(r)).replace("{y}",e[1].toFixed(r))}else{return""}}function f(e,t){var r=true;for(var i=e.length-1;i>=0;--i){if(e[i]!=t[i]){r=false;break}}return r}function h(e,t){var r=Math.cos(t);var i=Math.sin(t);var n=e[0]*r-e[1]*i;var a=e[1]*r+e[0]*i;e[0]=n;e[1]=a;return e}function d(e,t){e[0]*=t;e[1]*=t;return e}function p(e,t){var r=e[0]-t[0];var i=e[1]-t[1];return r*r+i*i}function v(e,t){return Math.sqrt(p(e,t))}function g(e,t){return p(e,s(e,t))}function m(e,t){if(e){return u("NS",e[1],t)+" "+u("EW",e[0],t)}else{return""}}function y(e,t){return c(e,"{x}, {y}",t)}},function(e,t,r){"use strict";r.d(t,"a",function(){return u});var i=r(3);var n=r(396);var a=r(95);var o=r(44);var s=r(56);var l={LENGTH:"length"};var u=function e(t,r){s["a"].call(this,t);this.element=r};Object(i["d"])(u,s["a"]);var c=function e(t,r){o["a"].call(this);var i=r||{};this.unique_=!!i.unique;this.array_=t?t:[];if(this.unique_){for(var n=0,a=this.array_.length;n<a;++n){this.assertUnique_(this.array_[n],n)}}this.updateLength_()};Object(i["d"])(c,o["a"]);c.prototype.clear=function(){while(this.getLength()>0){this.pop()}};c.prototype.extend=function(e){var t=void 0,r=void 0;for(t=0,r=e.length;t<r;++t){this.push(e[t])}return this};c.prototype.forEach=function(e){var t=this.array_;for(var r=0,i=t.length;r<i;++r){e(t[r],r,t)}};c.prototype.getArray=function(){return this.array_};c.prototype.item=function(e){return this.array_[e]};c.prototype.getLength=function(){return this.get(l.LENGTH)};c.prototype.insertAt=function(e,t){if(this.unique_){this.assertUnique_(t)}this.array_.splice(e,0,t);this.updateLength_();this.dispatchEvent(new u(a["a"].ADD,t))};c.prototype.pop=function(){return this.removeAt(this.getLength()-1)};c.prototype.push=function(e){if(this.unique_){this.assertUnique_(e)}var t=this.getLength();this.insertAt(t,e);return this.getLength()};c.prototype.remove=function(e){var t=this.array_;var r=void 0,i=void 0;for(r=0,i=t.length;r<i;++r){if(t[r]===e){return this.removeAt(r)}}return undefined};c.prototype.removeAt=function(e){var t=this.array_[e];this.array_.splice(e,1);this.updateLength_();this.dispatchEvent(new u(a["a"].REMOVE,t));return t};c.prototype.setAt=function(e,t){var r=this.getLength();if(e<r){if(this.unique_){this.assertUnique_(t,e)}var i=this.array_[e];this.array_[e]=t;this.dispatchEvent(new u(a["a"].REMOVE,i));this.dispatchEvent(new u(a["a"].ADD,t))}else{var n=void 0;for(n=r;n<e;++n){this.insertAt(n,undefined)}this.insertAt(e,t)}};c.prototype.updateLength_=function(){this.set(l.LENGTH,this.array_.length)};c.prototype.assertUnique_=function(e,t){for(var r=0,i=this.array_.length;r<i;++r){if(this.array_[r]===e&&r!==t){throw new n["a"](58)}}};t["b"]=c},function(e,t,r){"use strict";r.d(t,"a",function(){return p});r.d(t,"c",function(){return g});var i=r(3);var n=r(36);var a=r(46);var o=r(142);var s=r(33);var l=r(11);var u=n["c"];var c=n["a"];var f=n["a"];var h=n["c"];var d=function e(t){var r=t?t:{};s["a"].call(this,{handleEvent:r.handleEvent||g});this.handleDownEvent_=r.handleDownEvent?r.handleDownEvent:f;this.handleDragEvent_=r.handleDragEvent?r.handleDragEvent:u;this.handleMoveEvent_=r.handleMoveEvent?r.handleMoveEvent:h;this.handleUpEvent_=r.handleUpEvent?r.handleUpEvent:c;this.handlingDownUpSequence=false;this.trackedPointers_={};this.targetPointers=[]};Object(i["d"])(d,s["a"]);function p(e){var t=e.length;var r=0;var i=0;for(var n=0;n<t;n++){r+=e[n].clientX;i+=e[n].clientY}return[r/t,i/t]}function v(e){var t=e.type;return t===a["a"].POINTERDOWN||t===a["a"].POINTERDRAG||t===a["a"].POINTERUP}d.prototype.updateTrackedPointers_=function(e){if(v(e)){var t=e.pointerEvent;var r=t.pointerId.toString();if(e.type==a["a"].POINTERUP){delete this.trackedPointers_[r]}else if(e.type==a["a"].POINTERDOWN){this.trackedPointers_[r]=t}else if(r in this.trackedPointers_){this.trackedPointers_[r]=t}this.targetPointers=Object(l["c"])(this.trackedPointers_)}};function g(e){if(!(e instanceof o["a"])){return true}var t=false;this.updateTrackedPointers_(e);if(this.handlingDownUpSequence){if(e.type==a["a"].POINTERDRAG){this.handleDragEvent_(e)}else if(e.type==a["a"].POINTERUP){var r=this.handleUpEvent_(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else{if(e.type==a["a"].POINTERDOWN){var i=this.handleDownEvent_(e);this.handlingDownUpSequence=i;t=this.shouldStopEvent(i)}else if(e.type==a["a"].POINTERMOVE){this.handleMoveEvent_(e)}}return!t}d.prototype.shouldStopEvent=function(e){return e};t["b"]=d},function(e,t,r){"use strict";r.d(t,"a",function(){return a});r.d(t,"c",function(){return o});r.d(t,"b",function(){return s});var i=r(57);var n={};function a(e,t){var r=e.toLowerCase();n[r]=n[r+"s"]=n[t]=e}function o(e){return typeof e==="string"?n[e]||n[e.toLowerCase()]:undefined}function s(e){var t={},r,n;for(n in e){if(Object(i["a"])(e,n)){r=o(n);if(r){t[r]=e[n]}}}return t}},function(e,t,r){"use strict";var i={BOOLEAN:"boolean",DATE:"date",DATETIME:"datetime",TIME:"time",GEOMETRY:"geometry",NUMBER:"number",SELECT:"select",TEXT:"text"};t["a"]=i},function(e,t,r){"use strict";r.d(t,"a",function(){return n});function i(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false,parsedDateParts:[],meridiem:null,rfc2822:false,weekdayMismatch:false}}function n(e){if(e._pf==null){e._pf=i()}return e._pf}},function(e,t,r){"use strict";r.d(t,"b",function(){return u});r.d(t,"c",function(){return c});r.d(t,"d",function(){return f});r.d(t,"e",function(){return h});r.d(t,"f",function(){return d});r.d(t,"g",function(){return p});var i=r(3);var n=r(44);var a=r(125);var o=r(341);var s=r(22);var l=function e(t){n["a"].call(this);this.map_=null;this.setActive(true);this.handleEvent=t.handleEvent};Object(i["d"])(l,n["a"]);l.prototype.getActive=function(){return this.get(o["a"].ACTIVE)};l.prototype.getMap=function(){return this.map_};l.prototype.setActive=function(e){this.set(o["a"].ACTIVE,e)};l.prototype.setMap=function(e){this.map_=e};function u(e,t,r){var i=e.getCenter();if(i){var n=e.constrainCenter([i[0]+t[0],i[1]+t[1]]);if(r){e.animate({duration:r,easing:a["d"],center:n})}else{e.setCenter(n)}}}function c(e,t,r,i){t=e.constrainRotation(t,0);f(e,t,r,i)}function f(e,t,r,i){if(t!==undefined){var n=e.getRotation();var o=e.getCenter();if(n!==undefined&&o&&i>0){e.animate({rotation:t,anchor:r,duration:i,easing:a["b"]})}else{e.rotate(t,r)}}}function h(e,t,r,i,n){t=e.constrainResolution(t,0,n);p(e,t,r,i)}function d(e,t,r,i){var n=e.getResolution();var a=e.constrainResolution(n,t,0);if(a!==undefined){var o=e.getResolutions();a=Object(s["a"])(a,e.getMinResolution()||o[o.length-1],e.getMaxResolution()||o[0])}if(r&&a!==undefined&&a!==n){var l=e.getCenter();var u=e.calculateCenterZoom(a,r);u=e.constrainCenter(u);r=[(a*l[0]-n*u[0])/(a-n),(a*l[1]-n*u[1])/(a-n)]}p(e,a,r,i)}function p(e,t,r,i){if(t){var n=e.getResolution();var o=e.getCenter();if(n!==undefined&&o&&t!==n&&i){e.animate({resolution:t,anchor:r,duration:i,easing:a["b"]})}else{if(r){var s=e.calculateCenterZoom(t,r);e.setCenter(s)}e.setResolution(t)}}}t["a"]=l},function(e,t,r){"use strict";var i=r(3);var n=r(5);var a=r(23);var o=r(7);var s=r(85);var l=r(203);var u=r(22);var c=function e(t,r){s["a"].call(this);this.setCoordinates(t,r)};Object(i["d"])(c,s["a"]);c.prototype.clone=function(){var e=new c(null);e.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return e};c.prototype.closestPointXY=function(e,t,r,i){var n=this.flatCoordinates;var a=Object(u["f"])(e,t,n[0],n[1]);if(a<i){var o=this.stride;for(var s=0;s<o;++s){r[s]=n[s]}r.length=o;return a}else{return i}};c.prototype.getCoordinates=function(){return!this.flatCoordinates?[]:this.flatCoordinates.slice()};c.prototype.computeExtent=function(e){return Object(n["m"])(this.flatCoordinates,e)};c.prototype.getType=function(){return o["a"].POINT};c.prototype.intersectsExtent=function(e){return Object(n["h"])(e,this.flatCoordinates[0],this.flatCoordinates[1])};c.prototype.setCoordinates=function(e,t){if(!e){this.setFlatCoordinates(a["a"].XY,null)}else{this.setLayout(t,e,0);if(!this.flatCoordinates){this.flatCoordinates=[]}this.flatCoordinates.length=Object(l["a"])(this.flatCoordinates,0,e,this.stride);this.changed()}};c.prototype.setFlatCoordinates=function(e,t){this.setFlatCoordinatesInternal(e,t);this.changed()};t["a"]=c},function(e,t,r){"use strict";r.d(t,"c",function(){return a});r.d(t,"e",function(){return o});r.d(t,"g",function(){return u});r.d(t,"a",function(){return c});r.d(t,"f",function(){return h});r.d(t,"h",function(){return d});r.d(t,"b",function(){return p});r.d(t,"d",function(){return v});var i=r(39);var n=new Array(6);function a(){return[1,0,0,1,0,0]}function o(e){return l(e,1,0,0,1,0,0)}function s(e,t){var r=e[0];var i=e[1];var n=e[2];var a=e[3];var o=e[4];var s=e[5];var l=t[0];var u=t[1];var c=t[2];var f=t[3];var h=t[4];var d=t[5];e[0]=r*l+n*u;e[1]=i*l+a*u;e[2]=r*c+n*f;e[3]=i*c+a*f;e[4]=r*h+n*d+o;e[5]=i*h+a*d+s;return e}function l(e,t,r,i,n,a,o){e[0]=t;e[1]=r;e[2]=i;e[3]=n;e[4]=a;e[5]=o;return e}function u(e,t){e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];e[4]=t[4];e[5]=t[5];return e}function c(e,t){var r=t[0];var i=t[1];t[0]=e[0]*r+e[2]*i+e[4];t[1]=e[1]*r+e[3]*i+e[5];return t}function f(e,t){var r=Math.cos(t);var i=Math.sin(t);return s(e,l(n,r,i,-i,r,0,0))}function h(e,t,r){return s(e,l(n,t,0,0,r,0,0))}function d(e,t,r){return s(e,l(n,1,0,0,1,t,r))}function p(e,t,r,i,n,a,o,s){var l=Math.sin(a);var u=Math.cos(a);e[0]=i*u;e[1]=n*l;e[2]=-i*l;e[3]=n*u;e[4]=o*i*u-s*i*l+t;e[5]=o*n*l+s*n*u+r;return e}function v(e){var t=g(e);Object(i["a"])(t!==0,32);var r=e[0];var n=e[1];var a=e[2];var o=e[3];var s=e[4];var l=e[5];e[0]=o/t;e[1]=-n/t;e[2]=-a/t;e[3]=r/t;e[4]=(a*l-o*s)/t;e[5]=-(r*l-n*s)/t;return e}function g(e){return e[0]*e[3]-e[1]*e[2]}},function(e,t,r){"use strict";r.d(t,"b",function(){return i});r.d(t,"a",function(){return n});r.d(t,"c",function(){return a});function i(){return true}function n(){return false}function a(){}},function(e,t,r){"use strict";r.d(t,"a",function(){return s});r.d(t,"c",function(){return l});r.d(t,"b",function(){return u});var i=r(57);var n=r(139);var a=r(26);var o={};function s(e,t){var r,i=t;if(typeof e==="string"){e=[e]}if(Object(n["a"])(t)){i=function(e,r){r[t]=Object(a["a"])(e)}}for(r=0;r<e.length;r++){o[e[r]]=i}}function l(e,t){s(e,function(e,r,i,n){i._w=i._w||{};t(e,i._w,i,n)})}function u(e,t,r){if(t!=null&&Object(i["a"])(o,e)){o[e](t,r._a,r,e)}}},function(e,t,r){"use strict";var i=r(3);var n=function e(t){var r=t||{};this.color_=r.color!==undefined?r.color:null;this.lineCap_=r.lineCap;this.lineDash_=r.lineDash!==undefined?r.lineDash:null;this.lineDashOffset_=r.lineDashOffset;this.lineJoin_=r.lineJoin;this.miterLimit_=r.miterLimit;this.width_=r.width;this.checksum_=undefined};n.prototype.clone=function(){var e=this.getColor();return new n({color:e&&e.slice?e.slice():e||undefined,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():undefined,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})};n.prototype.getColor=function(){return this.color_};n.prototype.getLineCap=function(){return this.lineCap_};n.prototype.getLineDash=function(){return this.lineDash_};n.prototype.getLineDashOffset=function(){return this.lineDashOffset_};n.prototype.getLineJoin=function(){return this.lineJoin_};n.prototype.getMiterLimit=function(){return this.miterLimit_};n.prototype.getWidth=function(){return this.width_};n.prototype.setColor=function(e){this.color_=e;this.checksum_=undefined};n.prototype.setLineCap=function(e){this.lineCap_=e;this.checksum_=undefined};n.prototype.setLineDash=function(e){this.lineDash_=e;this.checksum_=undefined};n.prototype.setLineDashOffset=function(e){this.lineDashOffset_=e;this.checksum_=undefined};n.prototype.setLineJoin=function(e){this.lineJoin_=e;this.checksum_=undefined};n.prototype.setMiterLimit=function(e){this.miterLimit_=e;this.checksum_=undefined};n.prototype.setWidth=function(e){this.width_=e;this.checksum_=undefined};n.prototype.getChecksum=function(){if(this.checksum_===undefined){this.checksum_="s";if(this.color_){if(typeof this.color_==="string"){this.checksum_+=this.color_}else{this.checksum_+=Object(i["c"])(this.color_).toString()}}else{this.checksum_+="-"}this.checksum_+=","+(this.lineCap_!==undefined?this.lineCap_.toString():"-")+","+(this.lineDash_?this.lineDash_.toString():"-")+","+(this.lineDashOffset_!==undefined?this.lineDashOffset_:"-")+","+(this.lineJoin_!==undefined?this.lineJoin_:"-")+","+(this.miterLimit_!==undefined?this.miterLimit_.toString():"-")+","+(this.width_!==undefined?this.width_.toString():"-")}return this.checksum_};t["a"]=n},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var i=r(396);function n(e,t){if(!e){throw new i["a"](t)}}},function(e,t,r){"use strict";var i=r(1);var n=r(173);var a=r(148);var o=r(31);var s=r(342);var l=r(200);var u=r(218);var c=r(388);var f=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var v=function(e){p(t,e);function t(r){h(this,t);var n=d(this,e.call(this,r));n.dimensionsConfig_=r.dimensionsConfig||null;n.dimensionsFiltersConfig_=r.dimensionsFiltersConfig||null;n.filterCondition_=r.filterCondition||a["a"].AND;n.filterRules_=r.filterRules||null;n.filtrable_=r.filtrable||null;n.copyable_=r.copyable===true;n.dimensions_=r.dimensions||null;n.geometryName_=r.geometryName||t.DEFAULT_GEOMETRY_NAME_;n.ogcImageType_=r.ogcImageType||"image/png";n.ogcLayers_=r.ogcLayers||null;n.ogcServerType_=r.ogcServerType||t.ServerType.MAPSERVER;n.ogcType_=r.ogcType||t.Type.WMS;n.snappable_=r.snappable===true;n.snappingToEdges_=r.snappingToEdges!==false;n.snappingToVertice_=r.snappingToVertice!==false;n.snappingTolerance_=r.snappingTolerance!==undefined?r.snappingTolerance:10;n.timeAttributeName_=r.timeAttributeName;n.timeLowerValue_=r.timeLowerValue;n.timeProperty_=r.timeProperty!==undefined?r.timeProperty:null;n.timeUpperValue_=r.timeUpperValue;n.wfsFeatureNS_=r.wfsFeatureNS||t.WFSFeatureNS[n.ogcServerType_];n.wfsFeaturePrefix_=r.wfsFeaturePrefix||t.WFSFeaturePrefix.FEATURE;n.wfsOutputFormat_=r.wfsOutputFormat||t.WFSOutputFormat.GML3;n.wfsUrl_=r.wfsUrl;n.wmsInfoFormat_=r.wmsInfoFormat||t.WMSInfoFormat.GML;n.wmsIsSingleTile_=r.wmsIsSingleTile===true;n.wmsUrl_=r.wmsUrl;n.wmtsLayer_=r.wmtsLayer;n.wmtsUrl_=r.wmtsUrl;var o=[];if(n.queryable&&n.ogcLayers){for(var f=n.ogcLayers,p=Array.isArray(f),v=0,f=p?f:f[Symbol.iterator]();;){var g;if(p){if(v>=f.length)break;g=f[v++]}else{v=f.next();if(v.done)break;g=v.value}var m=g;if(m.queryable){o.push(m.name)}}}var y=null;if(n.supportsWFS&&o.length){var _=undefined;if(n.wfsOutputFormat_===t.WFSOutputFormat.GML3){_=new l["a"]}else if(n.wfsOutputFormat_===t.WFSOutputFormat.GML2){_=new s["a"]}i["a"].assert(_);y=new u["a"]({featureNS:n.wfsFeatureNS,featureType:o,gmlFormat:_})}n.wfsFormat_=y;var b=null;if(n.supportsWMS&&o.length){if(n.wmsInfoFormat===t.WMSInfoFormat.GML){b=new c["a"]({layers:o})}}n.wmsFormat_=b;return n}t.prototype.getAttributes=function t(){return e.prototype.attributes};t.prototype.setAttributes=function t(r){e.prototype.setAttributes.call(this,r);this.updateGeometryNameFromAttributes_()};t.prototype.combinableWithDataSourceForWFS=function e(t){return this.combinableForWFS&&t.combinableForWFS&&this.supportsWFS&&t.supportsWFS&&this.queryable&&t.queryable&&this.wfsUrl===t.wfsUrl&&this.haveTheSameActiveDimensions(t)};t.prototype.combinableWithDataSourceForWMS=function e(t){return this.combinableForWMS&&t.combinableForWMS&&this.supportsWMS&&t.supportsWMS&&this.queryable&&t.queryable&&this.wmsUrl===t.wmsUrl&&this.haveTheSameActiveDimensions(t)};t.prototype.isAnyOGCLayerInRange=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return!!this.getInRangeOGCLayerNames(t,r).length};t.prototype.getInRangeOGCLayerNames=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var i=[];if(this.ogcLayers){for(var n=this.ogcLayers,a=Array.isArray(n),o=0,n=a?n:n[Symbol.iterator]();;){var s;if(a){if(o>=n.length)break;s=n[o++]}else{o=n.next();if(o.done)break;s=o.value}var l=s;var u=l.maxResolution;var c=l.minResolution;var f=c===undefined||t>=c;var h=u===undefined||t<=u;var d=f&&h;if(d&&(!r||l.queryable)){i.push(l.name)}}}return i};t.prototype.getOGCLayerNames=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var r=[];if(this.ogcLayers){for(var i=this.ogcLayers,n=Array.isArray(i),a=0,i=n?i:i[Symbol.iterator]();;){var o;if(n){if(a>=i.length)break;o=i[a++]}else{a=i.next();if(a.done)break;o=a.value}var s=o;if(!t||s.queryable){r.push(s.name)}}}return r};t.prototype.getFiltrableOGCLayerName=function e(){i["a"].assert(this.filtrable);var t=this.getOGCLayerNames();i["a"].assert(t.length===1);return t[0]};t.prototype.updateGeometryNameFromAttributes_=function e(){var r=t.DEFAULT_GEOMETRY_NAME_;if(this.attributes){for(var i=this.attributes,n=Array.isArray(i),a=0,i=n?i:i[Symbol.iterator]();;){var s;if(n){if(a>=i.length)break;s=i[a++]}else{a=i.next();if(a.done)break;s=a.value}var l=s;if(l.type===o["a"].GEOMETRY){r=l.name;break}}}this.geometryName_=r};t.prototype.haveTheSameActiveDimensions=function e(t){var r=true;var i=this.activeDimensions;var n=t.activeDimensions;for(var a in i){if(i[a]!==n[a]){r=false;break}}if(r){for(var o in n){if(n[o]!==i[o]){r=false;break}}}return r};f(t,[{key:"dimensions",get:function e(){return this.dimensions_}},{key:"dimensionsConfig",get:function e(){return this.dimensionsConfig_},set:function e(t){this.dimensionsConfig_=t}},{key:"dimensionsFiltersConfig",get:function e(){return this.dimensionsFiltersConfig_},set:function e(t){this.dimensionsFiltersConfig_=t}},{key:"filterCondition",get:function e(){return this.filterCondition_},set:function e(t){this.filterCondition_=t}},{key:"filterRules",get:function e(){return this.filterRules_},set:function e(t){this.filterRules_=t}},{key:"timeLowerValue",get:function e(){return this.timeLowerValue_},set:function e(t){this.timeLowerValue_=t}},{key:"timeRangeValue",get:function e(){var t=null;var r=this.timeLowerValue;var i=this.timeUpperValue;if(r!==undefined){t={end:i,start:r}}return t},set:function e(t){if(t){this.timeUpperValue=t.end;this.timeLowerValue=t.start}else{this.timeUpperValue=undefined;this.timeLowerValue=undefined}}},{key:"timeUpperValue",get:function e(){return this.timeUpperValue_},set:function e(t){this.timeUpperValue_=t}},{key:"copyable",get:function e(){return this.copyable_}},{key:"filtrable",get:function e(){return this.filtrable_},set:function e(t){this.filtrable_=t}},{key:"geometryName",get:function e(){return this.geometryName_}},{key:"ogcImageType",get:function e(){return this.ogcImageType_}},{key:"ogcLayers",get:function e(){return this.ogcLayers_}},{key:"ogcServerType",get:function e(){return this.ogcServerType_}},{key:"ogcType",get:function e(){return this.ogcType_}},{key:"snappable",get:function e(){return this.snappable_}},{key:"snappingToEdges",get:function e(){return this.snappingToEdges_}},{key:"snappingToVertice",get:function e(){return this.snappingToVertice_}},{key:"snappingTolerance",get:function e(){return this.snappingTolerance_}},{key:"timeAttributeName",get:function e(){return this.timeAttributeName_}},{key:"timeProperty",get:function e(){return this.timeProperty_}},{key:"wfsFeatureNS",get:function e(){return this.wfsFeatureNS_}},{key:"wfsFeaturePrefix",get:function e(){return this.wfsFeaturePrefix_}},{key:"wfsOutputFormat",get:function e(){return this.wfsOutputFormat_}},{key:"wfsUrl",get:function e(){return this.wfsUrl_}},{key:"wmsInfoFormat",get:function e(){return this.wmsInfoFormat_}},{key:"wmsIsSingleTile",get:function e(){return this.wmsIsSingleTile_}},{key:"wmsUrl",get:function e(){return this.wmsUrl_}},{key:"wmtsLayer",get:function e(){return this.wmtsLayer_}},{key:"wmtsUrl",get:function e(){return this.wmtsUrl_}},{key:"activeDimensions",get:function e(){var t={};var r=this.dimensions_||{};var i=this.dimensionsConfig||{};for(var n in i){if(i[n]===null){if(r[n]!==undefined&&r[n]!==null){t[n]=r[n]}}else{t[n]=i[n]}}return t}},{key:"combinableForWFS",get:function e(){return this.filterRules_===null&&this.timeRangeValue===null}},{key:"combinableForWMS",get:function e(){return this.filterRules_===null&&this.timeRangeValue===null}},{key:"queryable",get:function e(){var t=false;var r=this.supportsWMS||this.supportsWFS;if(r&&this.ogcLayers){for(var i=this.ogcLayers,n=Array.isArray(i),a=0,i=n?i:i[Symbol.iterator]();;){var o;if(n){if(a>=i.length)break;o=i[a++]}else{a=i.next();if(a.done)break;o=a.value}var s=o;if(s.queryable===true){t=true;break}}}return t}},{key:"supportsWFS",get:function e(){return this.wfsUrl!==undefined}},{key:"supportsAttributes",get:function e(){return this.attributes!==null||this.supportsWFS&&this.ogcLayers!==null&&this.ogcLayers.length===1&&this.ogcLayers[0].queryable===true}},{key:"supportsWMS",get:function e(){return this.wmsUrl!==undefined}},{key:"supportsWMTS",get:function e(){return this.wmtsUrl!==undefined}},{key:"wfsFormat",get:function e(){return this.wfsFormat_}},{key:"wmsFormat",get:function e(){return this.wmsFormat_}}]);return t}(n["a"]);v.guessServiceTypeByUrl=function(e){var t=void 0;if(/(wmts)/i.test(e)){t=v.Type.WMTS}else{t=v.Type.WMS}return t};v.DEFAULT_GEOMETRY_NAME_="the_geom";v.ServerType={GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGISSERVER:"qgisserver"};v.Type={WMS:"WMS",WMTS:"WMTS"};v.WFSFeatureNS={geoserver:"http://www.opengis.net/gml/3.2",mapserver:"http://mapserver.gis.umn.edu/mapserver",qgisserver:"http://www.qgis.org/gml"};v.WFSFeaturePrefix={FEATURE:"feature"};v.WFSOutputFormat={GML2:"GML2",GML3:"GML3"};v.WMSInfoFormat={GML:"application/vnd.ogc.gml"};t["a"]=v},function(e,t,r){"use strict";var i=r(1);var n=r(2);var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var s=function(){function e(t){o(this,e);this.active_=t.active===true;this.expression=t.expression!==undefined?t.expression:null;this.lowerBoundary_=t.lowerBoundary!==undefined?t.lowerBoundary:null;this.operator_=t.operator||null;this.upperBoundary_=t.upperBoundary!==undefined?t.upperBoundary:null;this.isCustom_=t.isCustom!==false;this.name_=t.name;this.operators_=t.operators||null;this.propertyName_=t.propertyName;this.type_=i["a"].assert(t.type);this.listenerKeys=[]}e.prototype.getExpression=function e(){return this.expression};e.prototype.setExpression=function e(t){this.expression=t};e.prototype.reset=function e(){if(this.getExpression()!==null){this.setExpression(null)}if(this.lowerBoundary!==null){this.lowerBoundary=null}if(this.upperBoundary!==null){this.upperBoundary=null}};e.prototype.destroy=function e(){this.listenerKeys.forEach(n["e"]);this.listenerKeys.length=0};a(e,[{key:"active",get:function e(){return this.active_},set:function e(t){this.active_=t}},{key:"lowerBoundary",get:function e(){return this.lowerBoundary_},set:function e(t){this.lowerBoundary_=t}},{key:"operator",get:function e(){return this.operator_},set:function e(t){this.operator_=t}},{key:"upperBoundary",get:function e(){return this.upperBoundary_},set:function e(t){this.upperBoundary_=t}},{key:"isCustom",get:function e(){return this.isCustom_}},{key:"name",get:function e(){return this.name_}},{key:"operators",get:function e(){return this.operators_}},{key:"propertyName",get:function e(){return this.propertyName_}},{key:"type",get:function e(){return this.type_}},{key:"value",get:function t(){var r=null;var i=this.getExpression();var n=this.lowerBoundary;var a=this.operator;var o=this.propertyName;var s=this.upperBoundary;if(a){if(a===e.OperatorType.BETWEEN||a===e.TemporalOperatorType.DURING){if(n!==null&&s!==null){r={operator:a,lowerBoundary:n,propertyName:o,upperBoundary:s}}}else{if(i!==null){r={expression:i,operator:a,propertyName:o}}}}return r}}]);return e}();s.OperatorType={BETWEEN:"..",EQUAL_TO:"=",GREATER_THAN:">",GREATER_THAN_OR_EQUAL_TO:">=",LESSER_THAN:"<",LESSER_THAN_OR_EQUAL_TO:"<=",LIKE:"~",NOT_EQUAL_TO:"!="};s.SpatialOperatorType={CONTAINS:"contains",INTERSECTS:"intersects",WITHIN:"within"};s.TemporalOperatorType={BEGINS:"time_start",DURING:"time_during",ENDS:"time_end",EQUALS:"time_equal"};t["a"]=s},function(e,t,r){"use strict";t["a"]={IDLE:0,LOADING:1,LOADED:2,ERROR:3}},function(e,t,r){"use strict";var i=r(307);var n=r(231);var a=r(104);var o=r(91);var s=angular.module("gmfMapComponent",[i["a"].name,n["a"].module.name,a["a"].name,o["a"].module.name]);s.run(["$templateCache",function(e){e.put("gmf/map",r(487))}]);s.directive_=function(){return{scope:{map:"<gmfMapMap",manageResize:"<gmfMapManageResize",resizeTransition:"<gmfMapResizeTransition"},controller:"GmfMapController as ctrl",bindToController:true,templateUrl:"gmf/map"}};s.directive("gmfMap",s.directive_);s.Controller_=function(e,t,r){this.map;this.manageResize;this.resizeTransition;this.ngeoFeatureOverlayMgr_=e;this.gmfPermalink_=t;this.gmfSnapping_=r};s.Controller_.$inject=["ngeoFeatureOverlayMgr","gmfPermalink","gmfSnapping"];s.Controller_.prototype.$onInit=function(){this.ngeoFeatureOverlayMgr_.init(this.map);this.gmfPermalink_.setMap(this.map);this.gmfSnapping_.setMap(this.map)};s.controller("GmfMapController",s.Controller_);t["a"]=s},function(e,t,r){"use strict";r.d(t,"b",function(){return f});var i=r(3);var n=r(223);var a=r(253);var o=r(56);var s=r(11);var l=function e(t,r,i){o["a"].call(this,t);this.key=r;this.oldValue=i};Object(i["d"])(l,o["a"]);var u=function e(t){a["a"].call(this);Object(i["c"])(this);this.values_={};if(t!==undefined){this.setProperties(t)}};Object(i["d"])(u,a["a"]);var c={};function f(e){return c.hasOwnProperty(e)?c[e]:c[e]="change:"+e}u.prototype.get=function(e){var t=void 0;if(this.values_.hasOwnProperty(e)){t=this.values_[e]}return t};u.prototype.getKeys=function(){return Object.keys(this.values_)};u.prototype.getProperties=function(){return Object(s["a"])({},this.values_)};u.prototype.notify=function(e,t){var r=void 0;r=f(e);this.dispatchEvent(new l(r,e,t));r=n["a"].PROPERTYCHANGE;this.dispatchEvent(new l(r,e,t))};u.prototype.set=function(e,t,r){if(r){this.values_[e]=t}else{var i=this.values_[e];this.values_[e]=t;if(i!==t){this.notify(e,i)}}};u.prototype.setProperties=function(e,t){for(var r in e){this.set(r,e[r],t)}};u.prototype.unset=function(e,t){if(e in this.values_){var r=this.values_[e];delete this.values_[e];if(!t){this.notify(e,r)}}};t["a"]=u},function(e,t,r){"use strict";var i=r(12);var n=r(384);var a=r(300);var o=r(193);var s=["+proj="+a["a"],"+lat_0=46.95240555555556","+lon_0=7.439583333333333","+k_0=1","+x_0=600000","+y_0=200000","+ellps=bessel","+towgs84=674.374,15.056,405.346,0,0,0,0","+units=m","+no_defs"].join(" ");var l=[42e4,3e4,9e5,35e4];o["a"].defs("EPSG:21781",s);n["a"](o["a"]);i["g"]("EPSG:21781").setExtent(l);var u="EPSG:21781";t["a"]=u},function(e,t,r){"use strict";var i=r(16);t["a"]={SINGLECLICK:"singleclick",CLICK:i["a"].CLICK,DBLCLICK:i["a"].DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},function(e,t,r){"use strict";var i=r(3);var n=r(116);var a=function e(t){var r=t||{};this.color_=r.color!==undefined?r.color:null;this.checksum_=undefined};a.prototype.clone=function(){var e=this.getColor();return new a({color:e&&e.slice?e.slice():e||undefined})};a.prototype.getColor=function(){return this.color_};a.prototype.setColor=function(e){this.color_=e;this.checksum_=undefined};a.prototype.getChecksum=function(){if(this.checksum_===undefined){if(this.color_ instanceof CanvasPattern||this.color_ instanceof CanvasGradient){this.checksum_=Object(i["c"])(this.color_).toString()}else{this.checksum_="f"+(this.color_?Object(n["b"])(this.color_):"-")}}return this.checksum_};t["a"]=a},function(e,t,r){"use strict";var i={};i.DATALAYERGROUP_NAME="data";i.EXTERNALLAYERGROUP_NAME="external";i.COORDINATES_LAYER_NAME="gmfCoordinatesLayerName";i.PermalinkParam={BG_LAYER:"baselayer_ref",EXTERNAL_DATASOURCES_NAMES:"eds_n",EXTERNAL_DATASOURCES_URLS:"eds_u",FEATURES:"rl_features",MAP_CROSSHAIR:"map_crosshair",MAP_TOOLTIP:"map_tooltip",MAP_X:"map_x",MAP_Y:"map_y",MAP_Z:"map_zoom",TREE_GROUPS:"tree_groups",WFS_LAYER:"wfs_layer",WFS_NGROUPS:"wfs_ngroups",WFS_SHOW_FEATURES:"wfs_showFeatures"};t["a"]=i},function(e,t,r){"use strict";r.d(t,"c",function(){return x});r.d(t,"b",function(){return O});r.d(t,"d",function(){return T});var i=r(3);var n=r(9);var a=r(5);var o=r(23);var s=r(7);var l=r(355);var u=r(34);var c=r(85);var f=r(272);var h=r(356);var d=r(170);var p=r(204);var v=r(203);var g=r(177);var m=r(392);var y=r(345);var _=r(244);var b=r(246);var w=r(22);var S=function e(t,r){c["a"].call(this);this.ends_=[];this.flatInteriorPointRevision_=-1;this.flatInteriorPoint_=null;this.maxDelta_=-1;this.maxDeltaRevision_=-1;this.orientedRevision_=-1;this.orientedFlatCoordinates_=null;this.setCoordinates(t,r)};Object(i["d"])(S,c["a"]);S.prototype.appendLinearRing=function(e){if(!this.flatCoordinates){this.flatCoordinates=e.getFlatCoordinates().slice()}else{Object(n["c"])(this.flatCoordinates,e.getFlatCoordinates())}this.ends_.push(this.flatCoordinates.length);this.changed()};S.prototype.clone=function(){var e=new S(null);e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice());return e};S.prototype.closestPointXY=function(e,t,r,i){if(i<Object(a["e"])(this.getExtent(),e,t)){return i}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(Object(d["a"])(this.flatCoordinates,0,this.ends_,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return Object(d["b"])(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,true,e,t,r,i)};S.prototype.containsXY=function(e,t){return Object(p["c"])(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)};S.prototype.getArea=function(){return Object(h["b"])(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)};S.prototype.getCoordinates=function(e){var t=void 0;if(e!==undefined){t=this.getOrientedFlatCoordinates().slice();Object(_["c"])(t,0,this.ends_,this.stride,e)}else{t=this.flatCoordinates}return Object(g["b"])(t,0,this.ends_,this.stride)};S.prototype.getEnds=function(){return this.ends_};S.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var e=Object(a["x"])(this.getExtent());this.flatInteriorPoint_=Object(m["a"])(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0);this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_};S.prototype.getInteriorPoint=function(){return new u["a"](this.getFlatInteriorPoint(),o["a"].XYM)};S.prototype.getLinearRingCount=function(){return this.ends_.length};S.prototype.getLinearRing=function(e){if(e<0||this.ends_.length<=e){return null}var t=new l["a"](null);t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]));return t};S.prototype.getLinearRings=function(){var e=this.layout;var t=this.flatCoordinates;var r=this.ends_;var i=[];var n=0;for(var a=0,o=r.length;a<o;++a){var s=r[a];var u=new l["a"](null);u.setFlatCoordinates(e,t.slice(n,s));i.push(u);n=s}return i};S.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var e=this.flatCoordinates;if(Object(_["a"])(e,0,this.ends_,this.stride)){this.orientedFlatCoordinates_=e}else{this.orientedFlatCoordinates_=e.slice();this.orientedFlatCoordinates_.length=Object(_["c"])(this.orientedFlatCoordinates_,0,this.ends_,this.stride)}this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_};S.prototype.getSimplifiedGeometryInternal=function(e){var t=[];var r=[];t.length=Object(b["c"])(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,r);var i=new S(null);i.setFlatCoordinates(o["a"].XY,t,r);return i};S.prototype.getType=function(){return s["a"].POLYGON};S.prototype.intersectsExtent=function(e){return Object(y["c"])(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)};S.prototype.setCoordinates=function(e,t){if(!e){this.setFlatCoordinates(o["a"].XY,null,this.ends_)}else{this.setLayout(t,e,2);if(!this.flatCoordinates){this.flatCoordinates=[]}var r=Object(v["c"])(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1];this.changed()}};S.prototype.setFlatCoordinates=function(e,t,r){this.setFlatCoordinatesInternal(e,t);this.ends_=r;this.changed()};t["a"]=S;function C(e,t,r,i){var a=r?r:32;var s=[];for(var l=0;l<a;++l){Object(n["c"])(s,Object(f["c"])(e,t,2*Math.PI*l/a,i))}s.push(s[0],s[1]);var u=new S(null);u.setFlatCoordinates(o["a"].XY,s,[s.length]);return u}function x(e){var t=e[0];var r=e[1];var i=e[2];var n=e[3];var a=[t,r,t,n,i,n,i,r,t,r];var s=new S(null);s.setFlatCoordinates(o["a"].XY,a,[a.length]);return s}function O(e,t,r){var i=t?t:32;var n=e.getStride();var a=e.getLayout();var o=new S(null,a);var s=n*(i+1);var l=new Array(s);for(var u=0;u<s;u++){l[u]=0}var c=[l.length];o.setFlatCoordinates(a,l,c);T(o,e.getCenter(),e.getRadius(),r);return o}function T(e,t,r,i){var n=e.getFlatCoordinates();var a=e.getLayout();var o=e.getStride();var s=e.getEnds();var l=n.length/o-1;var u=i?i:0;for(var c=0;c<=l;++c){var f=c*o;var h=u+Object(w["d"])(c,l)*2*Math.PI/l;n[f]=t[0]+r*Math.cos(h);n[f+1]=t[1]+r*Math.sin(h)}e.setFlatCoordinates(a,n,s)}},function(e,t,r){"use strict";var i=function e(t,r){this.getActive=function(){return t[r]};this.setActive=function(e){t[r]=e}};t["a"]=i},function(e,t,r){"use strict";var i=r(3);var n=r(9);var a=r(5);var o=r(23);var s=r(7);var l=r(85);var u=r(170);var c=r(203);var f=r(177);var h=r(343);var d=r(345);var p=r(389);var v=r(391);var g=r(246);var m=function e(t,r){l["a"].call(this);this.flatMidpoint_=null;this.flatMidpointRevision_=-1;this.maxDelta_=-1;this.maxDeltaRevision_=-1;this.setCoordinates(t,r)};Object(i["d"])(m,l["a"]);m.prototype.appendCoordinate=function(e){if(!this.flatCoordinates){this.flatCoordinates=e.slice()}else{Object(n["c"])(this.flatCoordinates,e)}this.changed()};m.prototype.clone=function(){var e=new m(null);e.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return e};m.prototype.closestPointXY=function(e,t,r,i){if(i<Object(a["e"])(this.getExtent(),e,t)){return i}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(Object(u["e"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return Object(u["d"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,false,e,t,r,i)};m.prototype.forEachSegment=function(e){return Object(v["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)};m.prototype.getCoordinateAtM=function(e,t){if(this.layout!=o["a"].XYM&&this.layout!=o["a"].XYZM){return null}var r=t!==undefined?t:false;return Object(h["b"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,r)};m.prototype.getCoordinates=function(){return Object(f["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};m.prototype.getCoordinateAt=function(e,t){return Object(h["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t)};m.prototype.getLength=function(){return Object(p["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};m.prototype.getFlatMidpoint=function(){if(this.flatMidpointRevision_!=this.getRevision()){this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_);this.flatMidpointRevision_=this.getRevision()}return this.flatMidpoint_};m.prototype.getSimplifiedGeometryInternal=function(e){var t=[];t.length=Object(g["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0);var r=new m(null);r.setFlatCoordinates(o["a"].XY,t);return r};m.prototype.getType=function(){return s["a"].LINE_STRING};m.prototype.intersectsExtent=function(e){return Object(d["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)};m.prototype.setCoordinates=function(e,t){if(!e){this.setFlatCoordinates(o["a"].XY,null)}else{this.setLayout(t,e,1);if(!this.flatCoordinates){this.flatCoordinates=[]}this.flatCoordinates.length=Object(c["b"])(this.flatCoordinates,0,e,this.stride);this.changed()}};m.prototype.setFlatCoordinates=function(e,t){this.setFlatCoordinatesInternal(e,t);this.changed()};t["a"]=m},function(e,t,r){"use strict";var i=r(1);var n=r(107);var a=r(188);var o=r(8);var s=r(18);var l=r(88);var u=r(208);var c=r(9);var f=r(116);var h=r(5);var d=r(21);var p=r(51);var v=r(130);var g=r(131);var m=r(34);var y=r(49);var _=r(141);var b=r(385);var w=r(387);var S=r(101);var C=r(47);var x=r(143);var O=r(38);var T=r(15);var E=r(167);var M=function e(t,r){this.$filter_=r;this.decimals_=undefined;if(t.has("ngeoMeasureDecimals")){this.decimals_=t.get("ngeoMeasureDecimals")}this.precision_=undefined;if(t.has("ngeoMeasurePrecision")){this.precision_=t.get("ngeoMeasurePrecision")}this.numberFormat_=r("number");this.unitPrefixFormat_=r("ngeoUnitPrefix");this.ngeoNumberCoordinates_=r("ngeoNumberCoordinates");this.pointFilterFn_=null;this.pointFilterArgs_=[];if(t.has("ngeoPointfilter")){var n=t.get("ngeoPointfilter").split(":");var a=n.shift();var o=this.$filter_(a);i["a"].assertFunction(o);this.pointFilterFn_=o;this.pointFilterArgs_=n}else{this.pointFilterFn_=null}this.projection_;this.download_=t.get("ngeoDownload")};M.$inject=["$injector","$filter"];M.$inject=["$injector","$filter"];M.prototype.setProjection=function(e){this.projection_=e};M.prototype.setStyle=function(e,t){var r=this.getStyle(e);if(t){if(this.supportsVertex_(e)){r.push(this.getVertexStyle())}r.unshift(this.getHaloStyle_(e))}e.setStyle(r)};M.prototype.getStyle=function(e){var t=this.getType(e);var r=void 0;switch(t){case s["a"].LINE_STRING:r=this.getLineStringStyle_(e);break;case s["a"].POINT:r=this.getPointStyle_(e);break;case s["a"].CIRCLE:case s["a"].POLYGON:case s["a"].RECTANGLE:r=this.getPolygonStyle_(e);break;case s["a"].TEXT:r=this.getTextStyle_(e);break;default:break}i["a"].assert(r,"Style should be thruthy");var n=void 0;if(r.constructor===Array){n=r}else{n=[r]}return n};M.prototype.getLineStringStyle_=function(e){var t=this.getStrokeProperty(e);var r=this.getShowLabelProperty(e);var i=this.getShowMeasureProperty(e);var n=this.getRGBAColorProperty(e);var a=[new T["c"]({stroke:new O["a"]({color:n,width:t})})];var o=[];if(i){o.push(this.getMeasure(e))}if(r){o.push(this.getNameProperty(e))}if(r||i){var s=o.join("\n");a.push(new T["c"]({text:this.createTextStyle_({text:s})}))}return a};M.prototype.getPointStyle_=function(e){var t=this.getSizeProperty(e);var r=this.getRGBAColorProperty(e);var i=this.getShowLabelProperty(e);var n=this.getShowMeasureProperty(e);var a=[new T["c"]({image:new S["a"]({radius:t,fill:new C["a"]({color:r})})})];var o=[];if(n){o.push(this.getMeasure(e))}if(i){o.push(this.getNameProperty(e))}if(i||n){var s=o.join("\n");var l=10;var u=1.3;a.push(new T["c"]({text:this.createTextStyle_({text:s,size:l,offsetY:-(t+l/2*o.length*u+4)})}))}return a};M.prototype.optNumber=function(e,t){var r=e.get(t);if(r!==undefined){if(typeof r=="string"){return+r}else{return i["a"].assertNumber(r)}}else{return undefined}};M.prototype.getNumber=function(e,t){var r=e.get(t);if(typeof r=="string"){return+r}else{return i["a"].assertNumber(r)}};M.prototype.getPolygonStyle_=function(e){var t=this.getStrokeProperty(e);var r=this.getOpacityProperty(e);var i=this.getRGBAColorProperty(e);var n=this.getShowLabelProperty(e);var a=this.getShowMeasureProperty(e);var s=i.slice();s[3]=r;var u=this.optNumber(e,o["a"].AZIMUT);var c=[new T["c"]({fill:new C["a"]({color:s}),stroke:new O["a"]({color:i,width:t})})];if(a||n){if(a&&u!==undefined){var f=this.getRadiusLine(e,u);var h=l["a"].getFormattedLength(f,this.projection_,this.precision_,this.unitPrefixFormat_);c.push(new T["c"]({geometry:f,fill:new C["a"]({color:s}),stroke:new O["a"]({color:i,width:t}),text:this.createTextStyle_({text:h,angle:(u%180+180)%180-90})}));c.push(new T["c"]({geometry:new m["a"](f.getLastCoordinate()),text:this.createTextStyle_({text:this.numberFormat_(u,this.decimals_)+"°",size:10,offsetX:Math.cos((u-90)*Math.PI/180)*20,offsetY:Math.sin((u-90)*Math.PI/180)*20})}));if(n){c.push(new T["c"]({text:this.createTextStyle_({text:this.getNameProperty(e),offsetY:-8,exceedLength:true})}))}}else{var d=[];if(a){d.push(this.getMeasure(e))}if(n){d.push(this.getNameProperty(e))}if(n||a){var p=d.join("\n");c.push(new T["c"]({text:this.createTextStyle_({text:p,exceedLength:true})}))}}}return c};M.prototype.getTextStyle_=function(e){return new T["c"]({text:this.createTextStyle_({text:this.getNameProperty(e),size:this.getSizeProperty(e),angle:this.getAngleProperty(e),color:this.getRGBAColorProperty(e),width:this.getStrokeProperty(e)})})};M.prototype.createEditingStyles=function(e){var t=[255,255,255,1];var r=[0,153,255,1];var i=3;var n=[];var a=e.getGeometry();console.assert(a);var o=a.getType();if(o==="Point"){n.push(new T["c"]({image:new S["a"]({radius:i*2,fill:new C["a"]({color:r}),stroke:new O["a"]({color:t,width:i/2})}),zIndex:Infinity}))}else{if(o==="LineString"){n.push(new T["c"]({stroke:new O["a"]({color:t,width:i+2})}));n.push(new T["c"]({stroke:new O["a"]({color:r,width:i})}))}else{n.push(new T["c"]({stroke:new O["a"]({color:r,width:i/2}),fill:new C["a"]({color:[255,255,255,.5]})}))}n.push(this.getVertexStyle(true))}return n};M.prototype.getVertexStyle=function(e){var t=e!==undefined?e:true;var r={image:new x["a"]({radius:6,points:4,angle:Math.PI/4,fill:new C["a"]({color:[255,255,255,.5]}),stroke:new O["a"]({color:[0,0,0,1]})})};if(t){r.geometry=function(e){var t=e.getGeometry();if(t.getType()=="Point"){return}var r=void 0;var i=[];var n=[];var a=void 0,o=void 0;if(t instanceof p["a"]){n=t.getCoordinates()}else if(t instanceof v["a"]){i=t.getCoordinates()}else if(t instanceof y["a"]){n=t.getCoordinates()[0]}else if(t instanceof _["a"]){r=t.getCoordinates()}if(r){for(a=0,o=r.length;a<o;a++){i=i.concat(r[a])}}for(a=0,o=i.length;a<o;a++){n=n.concat(i[a])}if(n.length){return new g["a"](n)}else{return t}}}return new T["c"](r)};M.prototype.supportsVertex_=function(e){var t=[s["a"].LINE_STRING,s["a"].POLYGON,s["a"].RECTANGLE];var r=this.getType(e);return c["f"](t,r)};M.prototype.getHaloStyle_=function(e){var t=this.getType(e);var r=void 0;var n=3;switch(t){case s["a"].POINT:var a=this.getSizeProperty(e);r=new T["c"]({image:new S["a"]({radius:a+n,fill:new C["a"]({color:[255,255,255,1]})})});break;case s["a"].LINE_STRING:case s["a"].CIRCLE:case s["a"].POLYGON:case s["a"].RECTANGLE:var o=this.getStrokeProperty(e);r=new T["c"]({stroke:new O["a"]({color:[255,255,255,1],width:o+n*2})});break;case s["a"].TEXT:r=new T["c"]({text:this.createTextStyle_({text:this.getNameProperty(e),size:this.getSizeProperty(e),angle:this.getAngleProperty(e),width:n*3})});break;default:break}i["a"].assert(r,"Style should be thruthy");return r};M.getFilteredFeatureValues=function(e){var t=e.getProperties();delete t["boundedBy"];delete t[e.getGeometryName()];delete t["ngeo_feature_type_"];return t};M.prototype.getAngleProperty=function(e){var t=+e.get(o["a"].ANGLE);i["a"].assertNumber(t);return t};M.prototype.getColorProperty=function(e){var t=i["a"].assertString(e.get(o["a"].COLOR));i["a"].assertString(t);return t};M.prototype.getRGBAColorProperty=function(e){return f["c"](this.getColorProperty(e))};M.prototype.getNameProperty=function(e){var t=i["a"].assertString(e.get(o["a"].NAME));i["a"].assertString(t);return t};M.prototype.getOpacityProperty=function(e){return this.getNumber(e,o["a"].OPACITY)};M.prototype.getShowMeasureProperty=function(e){var t=e.get(o["a"].SHOW_MEASURE);if(t===undefined){t=false}else if(typeof t==="string"){t=t==="true"?true:false}return i["a"].assertBoolean(t)};M.prototype.getShowLabelProperty=function(e){var t=e.get(o["a"].SHOW_LABEL);if(t===undefined){t=false}else if(typeof t==="string"){t=t==="true"?true:false}return i["a"].assertBoolean(t)};M.prototype.getSizeProperty=function(e){return this.getNumber(e,o["a"].SIZE)};M.prototype.getStrokeProperty=function(e){return this.getNumber(e,o["a"].STROKE)};M.prototype.export=function(e,t){switch(t){case M.FormatType.GPX:this.exportGPX(e);break;case M.FormatType.KML:this.exportKML(e);break;default:break}};M.prototype.exportGPX=function(e){var t=new b["a"];var r="application/gpx+xml";var i="export.gpx";this.export_(e,t,i,r)};M.prototype.exportKML=function(e){var t=new w["a"];var r="application/vnd.google-earth.kml+xml";var i="export.kml";this.export_(e,t,i,r)};M.prototype.export_=function(e,t,r,i){var n=this;var a=i!==undefined?i:"text/plain";var o=[];var s=void 0;e.forEach(function(e){s=new d["a"](e.getProperties());n.setStyle(s,false);o.push(s)});var l=this.projection_?{dataProjection:"EPSG:4326",featureProjection:this.projection_}:{};var u=t.writeFeatures(o,l);this.download_(u,r,a+";charset=utf-8")};M.prototype.createTextStyle_=function(e){if(e.angle){var t=e.angle!==undefined?e.angle:0;var r=t*Math.PI/180;e.rotation=r;delete e.angle}e.font=["normal",(e.size||10)+"pt","Arial"].join(" ");if(e.color){e.fill=new C["a"]({color:e.color||[0,0,0,1]});delete e.color}e.stroke=new O["a"]({color:[255,255,255,1],width:e.width||3});delete e.width;return new E["a"](e)};M.prototype.getMeasure=function(e){var t=e.getGeometry();i["a"].assert(t,"Geometry should be truthy");var r="";if(t instanceof y["a"]){if(this.getType(e)===s["a"].CIRCLE){var n=this.optNumber(e,o["a"].AZIMUT);i["a"].assertNumber(n);var a=this.getRadiusLine(e,n);r=u["a"].getFormattedAzimutRadius(a,this.projection_,this.decimals_,this.precision_,this.unitPrefixFormat_,this.numberFormat_)}else{r=l["a"].getFormattedArea(t,this.projection_,this.precision_,this.unitPrefixFormat_)}}else if(t instanceof p["a"]){r=l["a"].getFormattedLength(t,this.projection_,this.precision_,this.unitPrefixFormat_)}else if(t instanceof m["a"]){if(this.pointFilterFn_===null){r=l["a"].getFormattedPoint(t,this.decimals_,this.ngeoNumberCoordinates_)}else{var c=t.getCoordinates();var f=this.pointFilterArgs_.slice(0);f.unshift(c);r=this.pointFilterFn_.apply(this,f)}}return r};M.prototype.getType=function(e){var t=e.getGeometry();i["a"].assert(t,"Geometry should be thruthy");var r=void 0;if(t instanceof m["a"]){if(e.get(o["a"].IS_TEXT)){r=s["a"].TEXT}else{r=s["a"].POINT}}else if(t instanceof g["a"]){r=s["a"].MULTI_POINT}else if(t instanceof y["a"]){if(e.get(o["a"].IS_CIRCLE)){r=s["a"].CIRCLE}else if(e.get(o["a"].IS_RECTANGLE)){r=s["a"].RECTANGLE}else{r=s["a"].POLYGON}}else if(t instanceof _["a"]){r=s["a"].MULTI_POLYGON}else if(t instanceof p["a"]){r=s["a"].LINE_STRING}else if(t instanceof v["a"]){r=s["a"].MULTI_LINE_STRING}i["a"].assert(r,"Type should be thruthy");return r};M.prototype.panMapToFeature=function(e,t,r){var n=r!==undefined?r:250;var a=t.getSize();i["a"].assertArray(a);var o=t.getView();var s=o.calculateExtent(a);var l=e.getGeometry();if(!l.intersectsExtent(s)){var u=o.getCenter();i["a"].assertArray(u);var c=void 0;if(l instanceof p["a"]){c=l.getCoordinateAt(.5)}else if(l instanceof y["a"]){c=l.getInteriorPoint().getCoordinates()}else if(l instanceof m["a"]){c=l.getCoordinates()}else{c=h["x"](l.getExtent())}o.animate({center:u,duration:n},{center:c,duration:n})}};M.prototype.getRadiusLine=function(e,t){var r=e.getGeometry();var i=r.getExtent();var n=(i[3]-i[1])/2;var a=h["x"](r.getExtent());var o=Math.cos((t-90)*Math.PI/180)*n;var s=-Math.sin((t-90)*Math.PI/180)*n;var l=[o+a[0],s+a[1]];return new p["a"]([a,l])};M.prototype.getNonSpatialProperties=function(e){var t=e.getGeometryName();var r={};var i=e.getProperties();for(var n in i){if(n!==t){r[n]=i[n]}}return r};M.prototype.clearNonSpatialProperties=function(e){var t=e.getGeometryName();var r=e.getProperties();for(var i in r){if(i!==t){e.set(i,undefined)}}};M.FormatType={GPX:"GPX",KML:"KML"};M.module=angular.module("ngeoFeatureHelper",[a["a"].name,n["a"].name]);M.module.service("ngeoFeatureHelper",M);t["a"]=M},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var i=r(226);function n(e,t,r,n){return Object(i["a"])(e,t,r,n,false)}},function(e,t,r){"use strict";var i=r(3);var n=r(178);var a=r(118);var o={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};var s=r(11);var l=function e(t){var r=t?t:{};var i=Object(s["a"])({},r);delete i.preload;delete i.useInterimTilesOnError;a["a"].call(this,i);this.setPreload(r.preload!==undefined?r.preload:0);this.setUseInterimTilesOnError(r.useInterimTilesOnError!==undefined?r.useInterimTilesOnError:true);this.type=n["a"].TILE};Object(i["d"])(l,a["a"]);l.prototype.getPreload=function(){return this.get(o.PRELOAD)};l.prototype.getSource;l.prototype.setPreload=function(e){this.set(o.PRELOAD,e)};l.prototype.getUseInterimTilesOnError=function(){return this.get(o.USE_INTERIM_TILES_ON_ERROR)};l.prototype.setUseInterimTilesOnError=function(e){this.set(o.USE_INTERIM_TILES_ON_ERROR,e)};var u=t["a"]=l},function(e,t,r){"use strict";r.d(t,"a",function(){return s});r.d(t,"b",function(){return l});r.d(t,"c",function(){return c});r.d(t,"d",function(){return h});r.d(t,"j",function(){return v});r.d(t,"f",function(){return m});r.d(t,"g",function(){return y});r.d(t,"i",function(){return _});r.d(t,"k",function(){return b});r.d(t,"e",function(){return w});r.d(t,"h",function(){return S});var i=r(46);var n=r(39);var a=r(36);var o=r(84);var s=function e(t){var r=t.originalEvent;return r.altKey&&!(r.metaKey||r.ctrlKey)&&!r.shiftKey};var l=function e(t){var r=t.originalEvent;return r.altKey&&!(r.metaKey||r.ctrlKey)&&r.shiftKey};var u=function e(t){return t.target.getTargetElement()===document.activeElement};var c=a["b"];var f=function e(t){return t.type==i["a"].CLICK};var h=function e(t){var r=t.originalEvent;return r.button==0&&!(o["i"]&&o["d"]&&r.ctrlKey)};var d=a["a"];var p=function e(t){return t.type=="pointermove"};var v=function e(t){return t.type==i["a"].SINGLECLICK};var g=function e(t){return t.type==i["a"].DBLCLICK};var m=function e(t){var r=t.originalEvent;return!r.altKey&&!(r.metaKey||r.ctrlKey)&&!r.shiftKey};var y=function e(t){var r=t.originalEvent;return!r.altKey&&(o["d"]?r.metaKey:r.ctrlKey)&&!r.shiftKey};var _=function e(t){var r=t.originalEvent;return!r.altKey&&!(r.metaKey||r.ctrlKey)&&r.shiftKey};var b=function e(t){var r=t.originalEvent.target;var i=r.tagName;return i!=="INPUT"&&i!=="SELECT"&&i!=="TEXTAREA"};var w=function e(t){Object(n["a"])(t.pointerEvent,56);return t.pointerEvent.pointerType=="mouse"};var S=function e(t){var r=t.pointerEvent;return r.isPrimary&&r.button===0}},function(e,t,r){"use strict";r.d(t,"b",function(){return n});var i=function e(t){this.propagationStopped;this.type=t;this.target=null};i.prototype.preventDefault=i.prototype.stopPropagation=function(){this.propagationStopped=true};function n(e){e.stopPropagation()}function a(e){e.preventDefault()}t["a"]=i},function(e,t,r){"use strict";r.d(t,"a",function(){return i});function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},function(e,t,r){"use strict";r.d(t,"a",function(){return _});var i=r(3);var n=r(9);var a=r(21);var o=r(94);var s=r(168);var l=r(23);var u=r(51);var c=r(355);var f=r(130);var h=r(131);var d=r(141);var p=r(34);var v=r(49);var g=r(11);var m=r(12);var y=r(0);var _="http://www.opengis.net/gml";var b=function e(t){var r=t?t:{};this.featureType=r.featureType;this.featureNS=r.featureNS;this.srsName=r.srsName;this.schemaLocation="";this.FEATURE_COLLECTION_PARSERS={};this.FEATURE_COLLECTION_PARSERS[_]={featureMember:Object(y["o"])(e.prototype.readFeaturesInternal),featureMembers:Object(y["o"])(e.prototype.readFeaturesInternal)};s["a"].call(this)};Object(i["d"])(b,s["a"]);var w=/^[\s\xa0]*$/;b.prototype.readFeaturesInternal=function(e,t){var r=e.localName;var i=null;if(r=="FeatureCollection"){if(e.namespaceURI==="http://www.opengis.net/wfs"){i=Object(y["u"])([],this.FEATURE_COLLECTION_PARSERS,e,t,this)}else{i=Object(y["u"])(null,this.FEATURE_COLLECTION_PARSERS,e,t,this)}}else if(r=="featureMembers"||r=="featureMember"){var n=t[0];var a=n["featureType"];var o=n["featureNS"];var s="p";var l="p0";if(!a&&e.childNodes){a=[],o={};for(var u=0,c=e.childNodes.length;u<c;++u){var f=e.childNodes[u];if(f.nodeType===1){var h=f.nodeName.split(":").pop();if(a.indexOf(h)===-1){var d="";var p=0;var v=f.namespaceURI;for(var g in o){if(o[g]===v){d=g;break}++p}if(!d){d=s+p;o[d]=v}a.push(d+":"+h)}}}if(r!="featureMember"){n["featureType"]=a;n["featureNS"]=o}}if(typeof o==="string"){var m=o;o={};o[l]=m}var _={};var b=Array.isArray(a)?a:[a];for(var w in o){var S={};for(var C=0,x=b.length;C<x;++C){var O=b[C].indexOf(":")===-1?l:b[C].split(":")[0];if(O===w){S[b[C].split(":").pop()]=r=="featureMembers"?Object(y["j"])(this.readFeatureElement,this):Object(y["o"])(this.readFeatureElement,this)}}_[o[w]]=S}if(r=="featureMember"){i=Object(y["u"])(undefined,_,e,t)}else{i=Object(y["u"])([],_,e,t)}}if(i===null){i=[]}return i};b.prototype.readGeometryElement=function(e,t){var r=t[0];r["srsName"]=e.firstElementChild.getAttribute("srsName");r["srsDimension"]=e.firstElementChild.getAttribute("srsDimension");var i=Object(y["u"])(null,this.GEOMETRY_PARSERS_,e,t,this);if(i){return Object(o["b"])(i,false,r)}else{return undefined}};b.prototype.readFeatureElement=function(e,t){var r=void 0;var i=e.getAttribute("fid")||Object(y["f"])(e,_,"id");var n={};var o=void 0;for(r=e.firstElementChild;r;r=r.nextElementSibling){var s=r.localName;if(r.childNodes.length===0||r.childNodes.length===1&&(r.firstChild.nodeType===3||r.firstChild.nodeType===4)){var l=Object(y["e"])(r,false);if(w.test(l)){l=undefined}n[s]=l}else{if(s!=="boundedBy"){o=s}n[s]=this.readGeometryElement(r,t)}}var u=new a["a"](n);if(o){u.setGeometryName(o)}if(i){u.setId(i)}return u};b.prototype.readPoint=function(e,t){var r=this.readFlatCoordinatesFromNode_(e,t);if(r){var i=new p["a"](null);i.setFlatCoordinates(l["a"].XYZ,r);return i}};b.prototype.readMultiPoint=function(e,t){var r=Object(y["u"])([],this.MULTIPOINT_PARSERS_,e,t,this);if(r){return new h["a"](r)}else{return undefined}};b.prototype.readMultiLineString=function(e,t){var r=Object(y["u"])([],this.MULTILINESTRING_PARSERS_,e,t,this);if(r){var i=new f["a"](null);i.setLineStrings(r);return i}else{return undefined}};b.prototype.readMultiPolygon=function(e,t){var r=Object(y["u"])([],this.MULTIPOLYGON_PARSERS_,e,t,this);if(r){var i=new d["a"](null);i.setPolygons(r);return i}else{return undefined}};b.prototype.pointMemberParser_=function(e,t){Object(y["t"])(this.POINTMEMBER_PARSERS_,e,t,this)};b.prototype.lineStringMemberParser_=function(e,t){Object(y["t"])(this.LINESTRINGMEMBER_PARSERS_,e,t,this)};b.prototype.polygonMemberParser_=function(e,t){Object(y["t"])(this.POLYGONMEMBER_PARSERS_,e,t,this)};b.prototype.readLineString=function(e,t){var r=this.readFlatCoordinatesFromNode_(e,t);if(r){var i=new u["a"](null);i.setFlatCoordinates(l["a"].XYZ,r);return i}else{return undefined}};b.prototype.readFlatLinearRing_=function(e,t){var r=Object(y["u"])(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS_,e,t,this);if(r){return r}else{return undefined}};b.prototype.readLinearRing=function(e,t){var r=this.readFlatCoordinatesFromNode_(e,t);if(r){var i=new c["a"](null);i.setFlatCoordinates(l["a"].XYZ,r);return i}else{return undefined}};b.prototype.readPolygon=function(e,t){var r=Object(y["u"])([null],this.FLAT_LINEAR_RINGS_PARSERS_,e,t,this);if(r&&r[0]){var i=new v["a"](null);var a=r[0];var o=[a.length];var s=void 0,u=void 0;for(s=1,u=r.length;s<u;++s){Object(n["c"])(a,r[s]);o.push(a.length)}i.setFlatCoordinates(l["a"].XYZ,a,o);return i}else{return undefined}};b.prototype.readFlatCoordinatesFromNode_=function(e,t){return Object(y["u"])(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS_,e,t,this)};b.prototype.MULTIPOINT_PARSERS_={"http://www.opengis.net/gml":{pointMember:Object(y["j"])(b.prototype.pointMemberParser_),pointMembers:Object(y["j"])(b.prototype.pointMemberParser_)}};b.prototype.MULTILINESTRING_PARSERS_={"http://www.opengis.net/gml":{lineStringMember:Object(y["j"])(b.prototype.lineStringMemberParser_),lineStringMembers:Object(y["j"])(b.prototype.lineStringMemberParser_)}};b.prototype.MULTIPOLYGON_PARSERS_={"http://www.opengis.net/gml":{polygonMember:Object(y["j"])(b.prototype.polygonMemberParser_),polygonMembers:Object(y["j"])(b.prototype.polygonMemberParser_)}};b.prototype.POINTMEMBER_PARSERS_={"http://www.opengis.net/gml":{Point:Object(y["j"])(b.prototype.readFlatCoordinatesFromNode_)}};b.prototype.LINESTRINGMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:Object(y["j"])(b.prototype.readLineString)}};b.prototype.POLYGONMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:Object(y["j"])(b.prototype.readPolygon)}};b.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:Object(y["o"])(b.prototype.readFlatLinearRing_)}};b.prototype.readGeometryFromNode=function(e,t){var r=this.readGeometryElement(e,[this.getReadOptions(e,t?t:{})]);return r?r:null};b.prototype.readFeatures;b.prototype.readFeaturesFromNode=function(e,t){var r={featureType:this.featureType,featureNS:this.featureNS};if(t){Object(g["a"])(r,this.getReadOptions(e,t))}var i=this.readFeaturesInternal(e,[r]);return i||[]};b.prototype.readProjectionFromNode=function(e){return Object(m["g"])(this.srsName?this.srsName:e.firstElementChild.getAttribute("srsName"))};t["b"]=b},function(e,t,r){"use strict";var i=r(3);var n=r(28);var a=r(95);var o=r(353);var s=r(84);var l=r(46);var u=r(142);var c=r(2);var f=r(102);var h={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var d=r(267);var p=r(199);var v=function e(t){var r={MSPointerDown:this.msPointerDown,MSPointerMove:this.msPointerMove,MSPointerUp:this.msPointerUp,MSPointerOut:this.msPointerOut,MSPointerOver:this.msPointerOver,MSPointerCancel:this.msPointerCancel,MSGotPointerCapture:this.msGotPointerCapture,MSLostPointerCapture:this.msLostPointerCapture};p["a"].call(this,t,r);this.pointerMap=t.pointerMap};Object(i["d"])(v,p["a"]);var g=["","unavailable","touch","pen","mouse"];v.prototype.prepareEvent_=function(e){var t=e;if(typeof e.pointerType==="number"){t=this.dispatcher.cloneEvent(e,e);t.pointerType=g[e.pointerType]}return t};v.prototype.cleanup=function(e){delete this.pointerMap[e.toString()]};v.prototype.msPointerDown=function(e){this.pointerMap[e.pointerId.toString()]=e;var t=this.prepareEvent_(e);this.dispatcher.down(t,e)};v.prototype.msPointerMove=function(e){var t=this.prepareEvent_(e);this.dispatcher.move(t,e)};v.prototype.msPointerUp=function(e){var t=this.prepareEvent_(e);this.dispatcher.up(t,e);this.cleanup(e.pointerId)};v.prototype.msPointerOut=function(e){var t=this.prepareEvent_(e);this.dispatcher.leaveOut(t,e)};v.prototype.msPointerOver=function(e){var t=this.prepareEvent_(e);this.dispatcher.enterOver(t,e)};v.prototype.msPointerCancel=function(e){var t=this.prepareEvent_(e);this.dispatcher.cancel(t,e);this.cleanup(e.pointerId)};v.prototype.msLostPointerCapture=function(e){var t=this.dispatcher.makeEvent("lostpointercapture",e,e);this.dispatcher.dispatchEvent(t)};v.prototype.msGotPointerCapture=function(e){var t=this.dispatcher.makeEvent("gotpointercapture",e,e);this.dispatcher.dispatchEvent(t)};var m=v;var y=function e(t){var r={pointerdown:this.pointerDown,pointermove:this.pointerMove,pointerup:this.pointerUp,pointerout:this.pointerOut,pointerover:this.pointerOver,pointercancel:this.pointerCancel,gotpointercapture:this.gotPointerCapture,lostpointercapture:this.lostPointerCapture};p["a"].call(this,t,r)};Object(i["d"])(y,p["a"]);y.prototype.pointerDown=function(e){this.dispatcher.fireNativeEvent(e)};y.prototype.pointerMove=function(e){this.dispatcher.fireNativeEvent(e)};y.prototype.pointerUp=function(e){this.dispatcher.fireNativeEvent(e)};y.prototype.pointerOut=function(e){this.dispatcher.fireNativeEvent(e)};y.prototype.pointerOver=function(e){this.dispatcher.fireNativeEvent(e)};y.prototype.pointerCancel=function(e){this.dispatcher.fireNativeEvent(e)};y.prototype.lostPointerCapture=function(e){this.dispatcher.fireNativeEvent(e)};y.prototype.gotPointerCapture=function(e){this.dispatcher.fireNativeEvent(e)};var _=y;var b=r(56);var w=function e(t,r,i){b["a"].call(this,t);this.originalEvent=r;var n=i?i:{};this.buttons=this.getButtons_(n);this.pressure=this.getPressure_(n,this.buttons);this.bubbles="bubbles"in n?n["bubbles"]:false;this.cancelable="cancelable"in n?n["cancelable"]:false;this.view="view"in n?n["view"]:null;this.detail="detail"in n?n["detail"]:null;this.screenX="screenX"in n?n["screenX"]:0;this.screenY="screenY"in n?n["screenY"]:0;this.clientX="clientX"in n?n["clientX"]:0;this.clientY="clientY"in n?n["clientY"]:0;this.ctrlKey="ctrlKey"in n?n["ctrlKey"]:false;this.altKey="altKey"in n?n["altKey"]:false;this.shiftKey="shiftKey"in n?n["shiftKey"]:false;this.metaKey="metaKey"in n?n["metaKey"]:false;this.button="button"in n?n["button"]:0;this.relatedTarget="relatedTarget"in n?n["relatedTarget"]:null;this.pointerId="pointerId"in n?n["pointerId"]:0;this.width="width"in n?n["width"]:0;this.height="height"in n?n["height"]:0;this.tiltX="tiltX"in n?n["tiltX"]:0;this.tiltY="tiltY"in n?n["tiltY"]:0;this.pointerType="pointerType"in n?n["pointerType"]:"";this.hwTimestamp="hwTimestamp"in n?n["hwTimestamp"]:0;this.isPrimary="isPrimary"in n?n["isPrimary"]:false;if(r.preventDefault){this.preventDefault=function(){r.preventDefault()}}};Object(i["d"])(w,b["a"]);var S=false;w.prototype.getButtons_=function(e){var t=void 0;if(e.buttons||S){t=e.buttons}else{switch(e.which){case 1:t=1;break;case 2:t=4;break;case 3:t=2;break;default:t=0}}return t};w.prototype.getPressure_=function(e,t){var r=0;if(e.pressure){r=e.pressure}else{r=t?.5:0}return r};(function(){try{var e=new MouseEvent("click",{buttons:1});S=e.buttons===1}catch(e){}})();var C=w;var x=r(9);var O=function e(t,r){var i={touchstart:this.touchstart,touchmove:this.touchmove,touchend:this.touchend,touchcancel:this.touchcancel};p["a"].call(this,t,i);this.pointerMap=t.pointerMap;this.mouseSource=r;this.firstTouchId_=undefined;this.clickCount_=0;this.resetId_=undefined;this.dedupTimeout_=2500};Object(i["d"])(O,p["a"]);var T=200;var E="touch";O.prototype.isPrimaryTouch_=function(e){return this.firstTouchId_===e.identifier};O.prototype.setPrimaryTouch_=function(e){var t=Object.keys(this.pointerMap).length;if(t===0||t===1&&d["a"].toString()in this.pointerMap){this.firstTouchId_=e.identifier;this.cancelResetClickCount_()}};O.prototype.removePrimaryPointer_=function(e){if(e.isPrimary){this.firstTouchId_=undefined;this.resetClickCount_()}};O.prototype.resetClickCount_=function(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),T)};O.prototype.resetClickCountHandler_=function(){this.clickCount_=0;this.resetId_=undefined};O.prototype.cancelResetClickCount_=function(){if(this.resetId_!==undefined){clearTimeout(this.resetId_)}};O.prototype.touchToPointer_=function(e,t){var r=this.dispatcher.cloneEvent(e,t);r.pointerId=t.identifier+2;r.bubbles=true;r.cancelable=true;r.detail=this.clickCount_;r.button=0;r.buttons=1;r.width=t.webkitRadiusX||t.radiusX||0;r.height=t.webkitRadiusY||t.radiusY||0;r.pressure=t.webkitForce||t.force||.5;r.isPrimary=this.isPrimaryTouch_(t);r.pointerType=E;r.clientX=t.clientX;r.clientY=t.clientY;r.screenX=t.screenX;r.screenY=t.screenY;return r};O.prototype.processTouches_=function(e,t){var r=Array.prototype.slice.call(e.changedTouches);var i=r.length;function n(){e.preventDefault()}var a=void 0,o=void 0;for(a=0;a<i;++a){o=this.touchToPointer_(e,r[a]);o.preventDefault=n;t.call(this,e,o)}};O.prototype.findTouch_=function(e,t){var r=e.length;var i=void 0;for(var n=0;n<r;n++){i=e[n];if(i.identifier===t){return true}}return false};O.prototype.vacuumTouches_=function(e){var t=e.touches;var r=Object.keys(this.pointerMap);var i=r.length;if(i>=t.length){var n=[];var a=void 0,o=void 0,s=void 0;for(a=0;a<i;++a){o=r[a];s=this.pointerMap[o];if(o!=d["a"]&&!this.findTouch_(t,o-2)){n.push(s.out)}}for(a=0;a<n.length;++a){this.cancelOut_(e,n[a])}}};O.prototype.touchstart=function(e){this.vacuumTouches_(e);this.setPrimaryTouch_(e.changedTouches[0]);this.dedupSynthMouse_(e);this.clickCount_++;this.processTouches_(e,this.overDown_)};O.prototype.overDown_=function(e,t){this.pointerMap[t.pointerId]={target:t.target,out:t,outTarget:t.target};this.dispatcher.over(t,e);this.dispatcher.enter(t,e);this.dispatcher.down(t,e)};O.prototype.touchmove=function(e){e.preventDefault();this.processTouches_(e,this.moveOverOut_)};O.prototype.moveOverOut_=function(e,t){var r=t;var i=this.pointerMap[r.pointerId];if(!i){return}var n=i.out;var a=i.outTarget;this.dispatcher.move(r,e);if(n&&a!==r.target){n.relatedTarget=r.target;r.relatedTarget=a;n.target=a;if(r.target){this.dispatcher.leaveOut(n,e);this.dispatcher.enterOver(r,e)}else{r.target=a;r.relatedTarget=null;this.cancelOut_(e,r)}}i.out=r;i.outTarget=r.target};O.prototype.touchend=function(e){this.dedupSynthMouse_(e);this.processTouches_(e,this.upOut_)};O.prototype.upOut_=function(e,t){this.dispatcher.up(t,e);this.dispatcher.out(t,e);this.dispatcher.leave(t,e);this.cleanUpPointer_(t)};O.prototype.touchcancel=function(e){this.processTouches_(e,this.cancelOut_)};O.prototype.cancelOut_=function(e,t){this.dispatcher.cancel(t,e);this.dispatcher.out(t,e);this.dispatcher.leave(t,e);this.cleanUpPointer_(t)};O.prototype.cleanUpPointer_=function(e){delete this.pointerMap[e.pointerId];this.removePrimaryPointer_(e)};O.prototype.dedupSynthMouse_=function(e){var t=this.mouseSource.lastTouches;var r=e.changedTouches[0];if(this.isPrimaryTouch_(r)){var i=[r.clientX,r.clientY];t.push(i);setTimeout(function(){Object(x["j"])(t,i)},this.dedupTimeout_)}};var M=O;var j=function e(t){f["a"].call(this);this.element_=t;this.pointerMap={};this.eventMap_={};this.eventSourceList_=[];this.registerSources()};Object(i["d"])(j,f["a"]);var A=[["bubbles",false],["cancelable",false],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",false],["altKey",false],["shiftKey",false],["metaKey",false],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",false],["type",""],["target",null],["currentTarget",null],["which",0]];j.prototype.registerSources=function(){if(s["f"]){this.registerSource("native",new _(this))}else if(s["e"]){this.registerSource("ms",new m(this))}else{var e=new d["c"](this);this.registerSource("mouse",e);if(s["h"]){this.registerSource("touch",new M(this,e))}}this.register_()};j.prototype.registerSource=function(e,t){var r=t;var i=r.getEvents();if(i){i.forEach(function(e){var t=r.getHandlerForEvent(e);if(t){this.eventMap_[e]=t.bind(r)}}.bind(this));this.eventSourceList_.push(r)}};j.prototype.register_=function(){var e=this.eventSourceList_.length;var t=void 0;for(var r=0;r<e;r++){t=this.eventSourceList_[r];this.addEvents_(t.getEvents())}};j.prototype.unregister_=function(){var e=this.eventSourceList_.length;var t=void 0;for(var r=0;r<e;r++){t=this.eventSourceList_[r];this.removeEvents_(t.getEvents())}};j.prototype.eventHandler_=function(e){var t=e.type;var r=this.eventMap_[t];if(r){r(e)}};j.prototype.addEvents_=function(e){e.forEach(function(e){Object(c["a"])(this.element_,e,this.eventHandler_,this)}.bind(this))};j.prototype.removeEvents_=function(e){e.forEach(function(e){Object(c["c"])(this.element_,e,this.eventHandler_,this)}.bind(this))};j.prototype.cloneEvent=function(e,t){var r={};for(var i=0,n=A.length;i<n;i++){var a=A[i][0];r[a]=e[a]||t[a]||A[i][1]}return r};j.prototype.down=function(e,t){this.fireEvent(h.POINTERDOWN,e,t)};j.prototype.move=function(e,t){this.fireEvent(h.POINTERMOVE,e,t)};j.prototype.up=function(e,t){this.fireEvent(h.POINTERUP,e,t)};j.prototype.enter=function(e,t){e.bubbles=false;this.fireEvent(h.POINTERENTER,e,t)};j.prototype.leave=function(e,t){e.bubbles=false;this.fireEvent(h.POINTERLEAVE,e,t)};j.prototype.over=function(e,t){e.bubbles=true;this.fireEvent(h.POINTEROVER,e,t)};j.prototype.out=function(e,t){e.bubbles=true;this.fireEvent(h.POINTEROUT,e,t)};j.prototype.cancel=function(e,t){this.fireEvent(h.POINTERCANCEL,e,t)};j.prototype.leaveOut=function(e,t){this.out(e,t);if(!this.contains_(e.target,e.relatedTarget)){this.leave(e,t)}};j.prototype.enterOver=function(e,t){this.over(e,t);if(!this.contains_(e.target,e.relatedTarget)){this.enter(e,t)}};j.prototype.contains_=function(e,t){if(!e||!t){return false}return e.contains(t)};j.prototype.makeEvent=function(e,t,r){return new C(e,r,t)};j.prototype.fireEvent=function(e,t,r){var i=this.makeEvent(e,t,r);this.dispatchEvent(i)};j.prototype.fireNativeEvent=function(e){var t=this.makeEvent(e.type,e,e);this.dispatchEvent(t)};j.prototype.wrapMouseEvent=function(e,t){var r=this.makeEvent(e,d["c"].prepareEvent(t,this),t);return r};j.prototype.disposeInternal=function(){this.unregister_();f["a"].prototype.disposeInternal.call(this)};var P=j;var k=function e(t,r){f["a"].call(this);this.map_=t;this.clickTimeoutId_=0;this.dragging_=false;this.dragListenerKeys_=[];this.moveTolerance_=r?r*s["b"]:s["b"];this.down_=null;var i=this.map_.getViewport();this.activePointers_=0;this.trackedTouches_={};this.pointerEventHandler_=new P(i);this.documentPointerEventHandler_=null;this.pointerdownListenerKey_=Object(c["a"])(this.pointerEventHandler_,h.POINTERDOWN,this.handlePointerDown_,this);this.relayedListenerKey_=Object(c["a"])(this.pointerEventHandler_,h.POINTERMOVE,this.relayEvent_,this)};Object(i["d"])(k,f["a"]);k.prototype.emulateClick_=function(e){var t=new u["a"](l["a"].CLICK,this.map_,e);this.dispatchEvent(t);if(this.clickTimeoutId_!==0){clearTimeout(this.clickTimeoutId_);this.clickTimeoutId_=0;t=new u["a"](l["a"].DBLCLICK,this.map_,e);this.dispatchEvent(t)}else{this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=0;var t=new u["a"](l["a"].SINGLECLICK,this.map_,e);this.dispatchEvent(t)}.bind(this),250)}};k.prototype.updateActivePointers_=function(e){var t=e;if(t.type==l["a"].POINTERUP||t.type==l["a"].POINTERCANCEL){delete this.trackedTouches_[t.pointerId]}else if(t.type==l["a"].POINTERDOWN){this.trackedTouches_[t.pointerId]=true}this.activePointers_=Object.keys(this.trackedTouches_).length};k.prototype.handlePointerUp_=function(e){this.updateActivePointers_(e);var t=new u["a"](l["a"].POINTERUP,this.map_,e);this.dispatchEvent(t);if(!t.propagationStopped&&!this.dragging_&&this.isMouseActionButton_(e)){this.emulateClick_(this.down_)}if(this.activePointers_===0){this.dragListenerKeys_.forEach(c["e"]);this.dragListenerKeys_.length=0;this.dragging_=false;this.down_=null;this.documentPointerEventHandler_.dispose();this.documentPointerEventHandler_=null}};k.prototype.isMouseActionButton_=function(e){return e.button===0};k.prototype.handlePointerDown_=function(e){this.updateActivePointers_(e);var t=new u["a"](l["a"].POINTERDOWN,this.map_,e);this.dispatchEvent(t);this.down_=e;if(this.dragListenerKeys_.length===0){this.documentPointerEventHandler_=new P(document);this.dragListenerKeys_.push(Object(c["a"])(this.documentPointerEventHandler_,l["a"].POINTERMOVE,this.handlePointerMove_,this),Object(c["a"])(this.documentPointerEventHandler_,l["a"].POINTERUP,this.handlePointerUp_,this),Object(c["a"])(this.pointerEventHandler_,l["a"].POINTERCANCEL,this.handlePointerUp_,this))}};k.prototype.handlePointerMove_=function(e){if(this.isMoving_(e)){this.dragging_=true;var t=new u["a"](l["a"].POINTERDRAG,this.map_,e,this.dragging_);this.dispatchEvent(t)}e.preventDefault()};k.prototype.relayEvent_=function(e){var t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new u["a"](e.type,this.map_,e,t))};k.prototype.isMoving_=function(e){return Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_};k.prototype.disposeInternal=function(){if(this.relayedListenerKey_){Object(c["e"])(this.relayedListenerKey_);this.relayedListenerKey_=null}if(this.pointerdownListenerKey_){Object(c["e"])(this.pointerdownListenerKey_);this.pointerdownListenerKey_=null}this.dragListenerKeys_.forEach(c["e"]);this.dragListenerKeys_.length=0;if(this.documentPointerEventHandler_){this.documentPointerEventHandler_.dispose();this.documentPointerEventHandler_=null}if(this.pointerEventHandler_){this.pointerEventHandler_.dispose();this.pointerEventHandler_=null}f["a"].prototype.disposeInternal.call(this)};var I=k;var D=r(216);var R=r(247);var L={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};var $=r(44);var N=r(223);var F=r(25);var G=r(16);var U=r(39);var H=r(11);var Y=function e(t,r){this.priorityFunction_=t;this.keyFunction_=r;this.elements_=[];this.priorities_=[];this.queuedElements_={}};var W=Infinity;Y.prototype.clear=function(){this.elements_.length=0;this.priorities_.length=0;Object(H["b"])(this.queuedElements_)};Y.prototype.dequeue=function(){var e=this.elements_;var t=this.priorities_;var r=e[0];if(e.length==1){e.length=0;t.length=0}else{e[0]=e.pop();t[0]=t.pop();this.siftUp_(0)}var i=this.keyFunction_(r);delete this.queuedElements_[i];return r};Y.prototype.enqueue=function(e){Object(U["a"])(!(this.keyFunction_(e)in this.queuedElements_),31);var t=this.priorityFunction_(e);if(t!=W){this.elements_.push(e);this.priorities_.push(t);this.queuedElements_[this.keyFunction_(e)]=true;this.siftDown_(0,this.elements_.length-1);return true}return false};Y.prototype.getCount=function(){return this.elements_.length};Y.prototype.getLeftChildIndex_=function(e){return e*2+1};Y.prototype.getRightChildIndex_=function(e){return e*2+2};Y.prototype.getParentIndex_=function(e){return e-1>>1};Y.prototype.heapify_=function(){var e=void 0;for(e=(this.elements_.length>>1)-1;e>=0;e--){this.siftUp_(e)}};Y.prototype.isEmpty=function(){return this.elements_.length===0};Y.prototype.isKeyQueued=function(e){return e in this.queuedElements_};Y.prototype.isQueued=function(e){return this.isKeyQueued(this.keyFunction_(e))};Y.prototype.siftUp_=function(e){var t=this.elements_;var r=this.priorities_;var i=t.length;var n=t[e];var a=r[e];var o=e;while(e<i>>1){var s=this.getLeftChildIndex_(e);var l=this.getRightChildIndex_(e);var u=l<i&&r[l]<r[s]?l:s;t[e]=t[u];r[e]=r[u];e=u}t[e]=n;r[e]=a;this.siftDown_(o,e)};Y.prototype.siftDown_=function(e,t){var r=this.elements_;var i=this.priorities_;var n=r[t];var a=i[t];while(t>e){var o=this.getParentIndex_(t);if(i[o]>a){r[t]=r[o];i[t]=i[o];t=o}else{break}}r[t]=n;i[t]=a};Y.prototype.reprioritize=function(){var e=this.priorityFunction_;var t=this.elements_;var r=this.priorities_;var i=0;var n=t.length;var a=void 0,o=void 0,s=void 0;for(o=0;o<n;++o){a=t[o];s=e(a);if(s==W){delete this.queuedElements_[this.keyFunction_(a)]}else{r[i]=s;t[i++]=a}}t.length=i;r.length=i;this.heapify_()};var V=Y;var z=function e(t,r){V.call(this,function(e){return t.apply(null,e)},function(e){return e[0].getKey()});this.tileChangeCallback_=r;this.tilesLoading_=0;this.tilesLoadingKeys_={}};Object(i["d"])(z,V);z.prototype.enqueue=function(e){var t=V.prototype.enqueue.call(this,e);if(t){var r=e[0];Object(c["a"])(r,G["a"].CHANGE,this.handleTileChange,this)}return t};z.prototype.getTilesLoading=function(){return this.tilesLoading_};z.prototype.handleTileChange=function(e){var t=e.target;var r=t.getState();if(r===F["a"].LOADED||r===F["a"].ERROR||r===F["a"].EMPTY||r===F["a"].ABORT){Object(c["c"])(t,G["a"].CHANGE,this.handleTileChange,this);var i=t.getKey();if(i in this.tilesLoadingKeys_){delete this.tilesLoadingKeys_[i];--this.tilesLoading_}this.tileChangeCallback_()}};z.prototype.loadMoreTiles=function(e,t){var r=0;var i=false;var n=void 0,a=void 0,o=void 0;while(this.tilesLoading_<e&&r<t&&this.getCount()>0){a=this.dequeue()[0];o=a.getKey();n=a.getState();if(n===F["a"].ABORT){i=true}else if(n===F["a"].IDLE&&!(o in this.tilesLoadingKeys_)){this.tilesLoadingKeys_[o]=true;++this.tilesLoading_;++r;a.load()}}if(r===0&&i){this.tileChangeCallback_()}};var q=z;var B=r(73);var X=r(64);var K=r(65);var Z=r(5);var Q=r(36);var J=r(121);var ee=r(122);var te=r(35);var re=function e(t){$["a"].call(this);var r=ie(t);this.maxTilesLoading_=t.maxTilesLoading!==undefined?t.maxTilesLoading:16;this.loadTilesWhileAnimating_=t.loadTilesWhileAnimating!==undefined?t.loadTilesWhileAnimating:false;this.loadTilesWhileInteracting_=t.loadTilesWhileInteracting!==undefined?t.loadTilesWhileInteracting:false;this.pixelRatio_=t.pixelRatio!==undefined?t.pixelRatio:s["b"];this.animationDelayKey_;this.animationDelay_=function(){this.animationDelayKey_=undefined;this.renderFrame_.call(this,Date.now())}.bind(this);this.coordinateToPixelTransform_=Object(te["c"])();this.pixelToCoordinateTransform_=Object(te["c"])();this.frameIndex_=0;this.frameState_=null;this.previousExtent_=null;this.viewPropertyListenerKey_=null;this.viewChangeListenerKey_=null;this.layerGroupPropertyListenerKeys_=null;this.viewport_=document.createElement("DIV");this.viewport_.className="ol-viewport"+(s["h"]?" ol-touch":"");this.viewport_.style.position="relative";this.viewport_.style.overflow="hidden";this.viewport_.style.width="100%";this.viewport_.style.height="100%";this.viewport_.style.msTouchAction="none";this.viewport_.style.touchAction="none";this.overlayContainer_=document.createElement("DIV");this.overlayContainer_.className="ol-overlaycontainer";this.viewport_.appendChild(this.overlayContainer_);this.overlayContainerStopEvent_=document.createElement("DIV");this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent";var i=[G["a"].CLICK,G["a"].DBLCLICK,G["a"].MOUSEDOWN,G["a"].TOUCHSTART,G["a"].MSPOINTERDOWN,l["a"].POINTERDOWN,G["a"].MOUSEWHEEL,G["a"].WHEEL];for(var o=0,u=i.length;o<u;++o){Object(c["a"])(this.overlayContainerStopEvent_,i[o],b["b"])}this.viewport_.appendChild(this.overlayContainerStopEvent_);this.mapBrowserEventHandler_=new I(this,t.moveTolerance);for(var f in l["a"]){Object(c["a"])(this.mapBrowserEventHandler_,l["a"][f],this.handleMapBrowserEvent,this)}this.keyboardEventTarget_=r.keyboardEventTarget;this.keyHandlerKeys_=null;Object(c["a"])(this.viewport_,G["a"].CONTEXTMENU,this.handleBrowserEvent,this);Object(c["a"])(this.viewport_,G["a"].WHEEL,this.handleBrowserEvent,this);Object(c["a"])(this.viewport_,G["a"].MOUSEWHEEL,this.handleBrowserEvent,this);this.controls=r.controls||new n["b"];this.interactions=r.interactions||new n["b"];this.overlays_=r.overlays;this.overlayIdIndex_={};this.renderer_=this.createRenderer(this.viewport_,this);this.handleResize_;this.focus_=null;this.postRenderFunctions_=[];this.tileQueue_=new q(this.getTilePriority.bind(this),this.handleTileChange_.bind(this));this.skippedFeatureUids_={};Object(c["a"])(this,Object($["b"])(L.LAYERGROUP),this.handleLayerGroupChanged_,this);Object(c["a"])(this,Object($["b"])(L.VIEW),this.handleViewChanged_,this);Object(c["a"])(this,Object($["b"])(L.SIZE),this.handleSizeChanged_,this);Object(c["a"])(this,Object($["b"])(L.TARGET),this.handleTargetChanged_,this);this.setProperties(r.values);this.controls.forEach(function(e){e.setMap(this)}.bind(this));Object(c["a"])(this.controls,a["a"].ADD,function(e){e.element.setMap(this)},this);Object(c["a"])(this.controls,a["a"].REMOVE,function(e){e.element.setMap(null)},this);this.interactions.forEach(function(e){e.setMap(this)}.bind(this));Object(c["a"])(this.interactions,a["a"].ADD,function(e){e.element.setMap(this)},this);Object(c["a"])(this.interactions,a["a"].REMOVE,function(e){e.element.setMap(null)},this);this.overlays_.forEach(this.addOverlayInternal_.bind(this));Object(c["a"])(this.overlays_,a["a"].ADD,function(e){this.addOverlayInternal_(e.element)},this);Object(c["a"])(this.overlays_,a["a"].REMOVE,function(e){var t=e.element;var r=t.getId();if(r!==undefined){delete this.overlayIdIndex_[r.toString()]}e.element.setMap(null)},this)};Object(i["d"])(re,$["a"]);re.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")};re.prototype.addControl=function(e){this.getControls().push(e)};re.prototype.addInteraction=function(e){this.getInteractions().push(e)};re.prototype.addLayer=function(e){var t=this.getLayerGroup().getLayers();t.push(e)};re.prototype.addOverlay=function(e){this.getOverlays().push(e)};re.prototype.addOverlayInternal_=function(e){var t=e.getId();if(t!==undefined){this.overlayIdIndex_[t.toString()]=e}e.setMap(this)};re.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose();Object(c["c"])(this.viewport_,G["a"].CONTEXTMENU,this.handleBrowserEvent,this);Object(c["c"])(this.viewport_,G["a"].WHEEL,this.handleBrowserEvent,this);Object(c["c"])(this.viewport_,G["a"].MOUSEWHEEL,this.handleBrowserEvent,this);if(this.handleResize_!==undefined){removeEventListener(G["a"].RESIZE,this.handleResize_,false);this.handleResize_=undefined}if(this.animationDelayKey_){cancelAnimationFrame(this.animationDelayKey_);this.animationDelayKey_=undefined}this.setTarget(null);$["a"].prototype.disposeInternal.call(this)};re.prototype.forEachFeatureAtPixel=function(e,t,r){if(!this.frameState_){return}var i=this.getCoordinateFromPixel(e);r=r!==undefined?r:{};var n=r.hitTolerance!==undefined?r.hitTolerance*this.frameState_.pixelRatio:0;var a=r.layerFilter!==undefined?r.layerFilter:Q["b"];return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,n,t,null,a,null)};re.prototype.getFeaturesAtPixel=function(e,t){var r=null;this.forEachFeatureAtPixel(e,function(e){if(!r){r=[]}r.push(e)},t);return r};re.prototype.forEachLayerAtPixel=function(e,t,r,i,n){if(!this.frameState_){return}var a=r!==undefined?r:null;var o=i!==undefined?i:Q["b"];var s=n!==undefined?n:null;return this.renderer_.forEachLayerAtPixel(e,this.frameState_,t,a,o,s)};re.prototype.hasFeatureAtPixel=function(e,t){if(!this.frameState_){return false}var r=this.getCoordinateFromPixel(e);t=t!==undefined?t:{};var i=t.layerFilter!==undefined?t.layerFilter:Q["b"];var n=t.hitTolerance!==undefined?t.hitTolerance*this.frameState_.pixelRatio:0;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,n,i,null)};re.prototype.getEventCoordinate=function(e){return this.getCoordinateFromPixel(this.getEventPixel(e))};re.prototype.getEventPixel=function(e){var t=this.viewport_.getBoundingClientRect();var r=e.changedTouches?e.changedTouches[0]:e;return[r.clientX-t.left,r.clientY-t.top]};re.prototype.getTarget=function(){return this.get(L.TARGET)};re.prototype.getTargetElement=function(){var e=this.getTarget();if(e!==undefined){return typeof e==="string"?document.getElementById(e):e}else{return null}};re.prototype.getCoordinateFromPixel=function(e){var t=this.frameState_;if(!t){return null}else{return Object(te["a"])(t.pixelToCoordinateTransform,e.slice())}};re.prototype.getControls=function(){return this.controls};re.prototype.getOverlays=function(){return this.overlays_};re.prototype.getOverlayById=function(e){var t=this.overlayIdIndex_[e.toString()];return t!==undefined?t:null};re.prototype.getInteractions=function(){return this.interactions};re.prototype.getLayerGroup=function(){return this.get(L.LAYERGROUP)};re.prototype.getLayers=function(){var e=this.getLayerGroup().getLayers();return e};re.prototype.getPixelFromCoordinate=function(e){var t=this.frameState_;if(!t){return null}else{return Object(te["a"])(t.coordinateToPixelTransform,e.slice(0,2))}};re.prototype.getRenderer=function(){return this.renderer_};re.prototype.getSize=function(){return this.get(L.SIZE)};re.prototype.getView=function(){return this.get(L.VIEW)};re.prototype.getViewport=function(){return this.viewport_};re.prototype.getOverlayContainer=function(){return this.overlayContainer_};re.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_};re.prototype.getTilePriority=function(e,t,r,i){var n=this.frameState_;if(!n||!(t in n.wantedTiles)){return W}if(!n.wantedTiles[t][e.getKey()]){return W}var a=r[0]-n.focus[0];var o=r[1]-n.focus[1];return 65536*Math.log(i)+Math.sqrt(a*a+o*o)/i};re.prototype.handleBrowserEvent=function(e,t){var r=t||e.type;var i=new o["a"](r,this,e);this.handleMapBrowserEvent(i)};re.prototype.handleMapBrowserEvent=function(e){if(!this.frameState_){return}this.focus_=e.coordinate;e.frameState=this.frameState_;var t=this.getInteractions().getArray();if(this.dispatchEvent(e)!==false){for(var r=t.length-1;r>=0;r--){var i=t[r];if(!i.getActive()){continue}var n=i.handleEvent(e);if(!n){break}}}};re.prototype.handlePostRender=function(){var e=this.frameState_;var t=this.tileQueue_;if(!t.isEmpty()){var r=this.maxTilesLoading_;var i=r;if(e){var n=e.viewHints;if(n[X["a"].ANIMATING]){r=this.loadTilesWhileAnimating_?8:0;i=2}if(n[X["a"].INTERACTING]){r=this.loadTilesWhileInteracting_?8:0;i=2}}if(t.getTilesLoading()<r){t.reprioritize();t.loadMoreTiles(r,i)}}var a=this.postRenderFunctions_;for(var o=0,s=a.length;o<s;++o){a[o](this,e)}a.length=0};re.prototype.handleSizeChanged_=function(){this.render()};re.prototype.handleTargetChanged_=function(){var e=void 0;if(this.getTarget()){e=this.getTargetElement()}if(this.keyHandlerKeys_){for(var t=0,r=this.keyHandlerKeys_.length;t<r;++t){Object(c["e"])(this.keyHandlerKeys_[t])}this.keyHandlerKeys_=null}if(!e){this.renderer_.removeLayerRenderers();Object(K["e"])(this.viewport_);if(this.handleResize_!==undefined){removeEventListener(G["a"].RESIZE,this.handleResize_,false);this.handleResize_=undefined}}else{e.appendChild(this.viewport_);var i=!this.keyboardEventTarget_?e:this.keyboardEventTarget_;this.keyHandlerKeys_=[Object(c["a"])(i,G["a"].KEYDOWN,this.handleBrowserEvent,this),Object(c["a"])(i,G["a"].KEYPRESS,this.handleBrowserEvent,this)];if(!this.handleResize_){this.handleResize_=this.updateSize.bind(this);addEventListener(G["a"].RESIZE,this.handleResize_,false)}}this.updateSize()};re.prototype.handleTileChange_=function(){this.render()};re.prototype.handleViewPropertyChanged_=function(){this.render()};re.prototype.handleViewChanged_=function(){if(this.viewPropertyListenerKey_){Object(c["e"])(this.viewPropertyListenerKey_);this.viewPropertyListenerKey_=null}if(this.viewChangeListenerKey_){Object(c["e"])(this.viewChangeListenerKey_);this.viewChangeListenerKey_=null}var e=this.getView();if(e){this.viewport_.setAttribute("data-view",Object(i["c"])(e));this.viewPropertyListenerKey_=Object(c["a"])(e,N["a"].PROPERTYCHANGE,this.handleViewPropertyChanged_,this);this.viewChangeListenerKey_=Object(c["a"])(e,G["a"].CHANGE,this.handleViewPropertyChanged_,this)}this.render()};re.prototype.handleLayerGroupChanged_=function(){if(this.layerGroupPropertyListenerKeys_){this.layerGroupPropertyListenerKeys_.forEach(c["e"]);this.layerGroupPropertyListenerKeys_=null}var e=this.getLayerGroup();if(e){this.layerGroupPropertyListenerKeys_=[Object(c["a"])(e,N["a"].PROPERTYCHANGE,this.render,this),Object(c["a"])(e,G["a"].CHANGE,this.render,this)]}this.render()};re.prototype.isRendered=function(){return!!this.frameState_};re.prototype.renderSync=function(){if(this.animationDelayKey_){cancelAnimationFrame(this.animationDelayKey_)}this.animationDelay_()};re.prototype.render=function(){if(this.animationDelayKey_===undefined){this.animationDelayKey_=requestAnimationFrame(this.animationDelay_)}};re.prototype.removeControl=function(e){return this.getControls().remove(e)};re.prototype.removeInteraction=function(e){return this.getInteractions().remove(e)};re.prototype.removeLayer=function(e){var t=this.getLayerGroup().getLayers();return t.remove(e)};re.prototype.removeOverlay=function(e){return this.getOverlays().remove(e)};re.prototype.renderFrame_=function(e){var t=void 0;var r=this.getSize();var n=this.getView();var a=Object(Z["j"])();var o=this.frameState_;var s=null;if(r!==undefined&&Object(ee["b"])(r)&&n&&n.isDef()){var l=n.getHints(this.frameState_?this.frameState_.viewHints:undefined);var u=this.getLayerGroup().getLayerStatesArray();var c={};for(var f=0,h=u.length;f<h;++f){c[Object(i["c"])(u[f].layer)]=u[f]}t=n.getState();var d=this.focus_;if(!d){d=t.center;var p=t.resolution/this.pixelRatio_;d[0]=Math.round(d[0]/p)*p;d[1]=Math.round(d[1]/p)*p}s={animate:false,coordinateToPixelTransform:this.coordinateToPixelTransform_,extent:a,focus:d,index:this.frameIndex_++,layerStates:c,layerStatesArray:u,pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:r,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:t,viewHints:l,wantedTiles:{}}}if(s){s.extent=Object(Z["z"])(t.center,t.resolution,t.rotation,s.size,a)}this.frameState_=s;this.renderer_.renderFrame(s);if(s){if(s.animate){this.render()}Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions);if(o){var v=!this.previousExtent_||!Object(Z["H"])(this.previousExtent_)&&!Object(Z["p"])(s.extent,this.previousExtent_);if(v){this.dispatchEvent(new D["a"](R["a"].MOVESTART,this,o));this.previousExtent_=Object(Z["l"])(this.previousExtent_)}}var g=this.previousExtent_&&!s.viewHints[X["a"].ANIMATING]&&!s.viewHints[X["a"].INTERACTING]&&!Object(Z["p"])(s.extent,this.previousExtent_);if(g){this.dispatchEvent(new D["a"](R["a"].MOVEEND,this,s));Object(Z["d"])(s.extent,this.previousExtent_)}}this.dispatchEvent(new D["a"](R["a"].POSTRENDER,this,s));setTimeout(this.handlePostRender.bind(this),0)};re.prototype.setLayerGroup=function(e){this.set(L.LAYERGROUP,e)};re.prototype.setSize=function(e){this.set(L.SIZE,e)};re.prototype.setTarget=function(e){this.set(L.TARGET,e)};re.prototype.setView=function(e){this.set(L.VIEW,e)};re.prototype.skipFeature=function(e){var t=Object(i["c"])(e).toString();this.skippedFeatureUids_[t]=true;this.render()};re.prototype.updateSize=function(){var e=this.getTargetElement();if(!e){this.setSize(undefined)}else{var t=getComputedStyle(e);this.setSize([e.offsetWidth-parseFloat(t["borderLeftWidth"])-parseFloat(t["paddingLeft"])-parseFloat(t["paddingRight"])-parseFloat(t["borderRightWidth"]),e.offsetHeight-parseFloat(t["borderTopWidth"])-parseFloat(t["paddingTop"])-parseFloat(t["paddingBottom"])-parseFloat(t["borderBottomWidth"])])}};re.prototype.unskipFeature=function(e){var t=Object(i["c"])(e).toString();delete this.skippedFeatureUids_[t];this.render()};function ie(e){var t=null;if(e.keyboardEventTarget!==undefined){t=typeof e.keyboardEventTarget==="string"?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget}var r={};var i=e.layers instanceof J["a"]?e.layers:new J["a"]({layers:e.layers});r[L.LAYERGROUP]=i;r[L.TARGET]=e.target;r[L.VIEW]=e.view!==undefined?e.view:new B["a"];var a=void 0;if(e.controls!==undefined){if(Array.isArray(e.controls)){a=new n["b"](e.controls.slice())}else{Object(U["a"])(e.controls instanceof n["b"],47);a=e.controls}}var o=void 0;if(e.interactions!==undefined){if(Array.isArray(e.interactions)){o=new n["b"](e.interactions.slice())}else{Object(U["a"])(e.interactions instanceof n["b"],48);o=e.interactions}}var s=void 0;if(e.overlays!==undefined){if(Array.isArray(e.overlays)){s=new n["b"](e.overlays.slice())}else{Object(U["a"])(e.overlays instanceof n["b"],49);s=e.overlays}}else{s=new n["b"]}return{controls:a,interactions:o,keyboardEventTarget:t,overlays:s,values:r}}var ne=re;var ae=r(72);var oe=r(70);var se=r(118);var le=function e(t){var r=t?t:{};this.ulElement_=document.createElement("UL");this.collapsed_=r.collapsed!==undefined?r.collapsed:true;this.collapsible_=r.collapsible!==undefined?r.collapsible:true;if(!this.collapsible_){this.collapsed_=false}var i=r.className!==undefined?r.className:"ol-attribution";var n=r.tipLabel!==undefined?r.tipLabel:"Attributions";var a=r.collapseLabel!==undefined?r.collapseLabel:"»";if(typeof a==="string"){this.collapseLabel_=document.createElement("span");this.collapseLabel_.textContent=a}else{this.collapseLabel_=a}var o=r.label!==undefined?r.label:"i";if(typeof o==="string"){this.label_=document.createElement("span");this.label_.textContent=o}else{this.label_=o}var s=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;var l=document.createElement("button");l.setAttribute("type","button");l.title=n;l.appendChild(s);Object(c["a"])(l,G["a"].CLICK,this.handleClick_,this);var u=i+" "+oe["e"]+" "+oe["b"]+(this.collapsed_&&this.collapsible_?" "+oe["a"]:"")+(this.collapsible_?"":" ol-uncollapsible");var f=document.createElement("div");f.className=u;f.appendChild(this.ulElement_);f.appendChild(l);ae["a"].call(this,{element:f,render:r.render||ue,target:r.target});this.renderedAttributions_=[];this.renderedVisible_=true};Object(i["d"])(le,ae["a"]);le.prototype.getSourceAttributions_=function(e){var t={};var r=[];var i=e.layerStatesArray;var n=e.viewState.resolution;for(var a=0,o=i.length;a<o;++a){var s=i[a];if(!Object(se["b"])(s,n)){continue}var l=s.layer.getSource();if(!l){continue}var u=l.getAttributions();if(!u){continue}var c=u(e);if(!c){continue}if(Array.isArray(c)){for(var f=0,h=c.length;f<h;++f){if(!(c[f]in t)){r.push(c[f]);t[c[f]]=true}}}else{if(!(c in t)){r.push(c);t[c]=true}}}return r};function ue(e){this.updateElement_(e.frameState)}le.prototype.updateElement_=function(e){if(!e){if(this.renderedVisible_){this.element.style.display="none";this.renderedVisible_=false}return}var t=this.getSourceAttributions_(e);if(Object(x["b"])(t,this.renderedAttributions_)){return}Object(K["d"])(this.ulElement_);for(var r=0,i=t.length;r<i;++r){var n=document.createElement("LI");n.innerHTML=t[r];this.ulElement_.appendChild(n)}var a=t.length>0;if(this.renderedVisible_!=a){this.element.style.display=a?"":"none";this.renderedVisible_=a}this.renderedAttributions_=t};le.prototype.handleClick_=function(e){e.preventDefault();this.handleToggle_()};le.prototype.handleToggle_=function(){this.element.classList.toggle(oe["a"]);if(this.collapsed_){Object(K["f"])(this.collapseLabel_,this.label_)}else{Object(K["f"])(this.label_,this.collapseLabel_)}this.collapsed_=!this.collapsed_};le.prototype.getCollapsible=function(){return this.collapsible_};le.prototype.setCollapsible=function(e){if(this.collapsible_===e){return}this.collapsible_=e;this.element.classList.toggle("ol-uncollapsible");if(!e&&this.collapsed_){this.handleToggle_()}};le.prototype.setCollapsed=function(e){if(!this.collapsible_||this.collapsed_===e){return}this.handleToggle_()};le.prototype.getCollapsed=function(){return this.collapsed_};var ce=le;var fe=r(125);var he=function e(t){var r=t?t:{};var i=r.className!==undefined?r.className:"ol-rotate";var n=r.label!==undefined?r.label:"⇧";this.label_=null;if(typeof n==="string"){this.label_=document.createElement("span");this.label_.className="ol-compass";this.label_.textContent=n}else{this.label_=n;this.label_.classList.add("ol-compass")}var a=r.tipLabel?r.tipLabel:"Reset rotation";var o=document.createElement("button");o.className=i+"-reset";o.setAttribute("type","button");o.title=a;o.appendChild(this.label_);Object(c["a"])(o,G["a"].CLICK,e.prototype.handleClick_,this);var s=i+" "+oe["e"]+" "+oe["b"];var l=document.createElement("div");l.className=s;l.appendChild(o);this.callResetNorth_=r.resetNorth?r.resetNorth:undefined;ae["a"].call(this,{element:l,render:r.render||de,target:r.target});this.duration_=r.duration!==undefined?r.duration:250;this.autoHide_=r.autoHide!==undefined?r.autoHide:true;this.rotation_=undefined;if(this.autoHide_){this.element.classList.add(oe["c"])}};Object(i["d"])(he,ae["a"]);he.prototype.handleClick_=function(e){e.preventDefault();if(this.callResetNorth_!==undefined){this.callResetNorth_()}else{this.resetNorth_()}};he.prototype.resetNorth_=function(){var e=this.getMap();var t=e.getView();if(!t){return}if(t.getRotation()!==undefined){if(this.duration_>0){t.animate({rotation:0,duration:this.duration_,easing:fe["b"]})}else{t.setRotation(0)}}};function de(e){var t=e.frameState;if(!t){return}var r=t.viewState.rotation;if(r!=this.rotation_){var i="rotate("+r+"rad)";if(this.autoHide_){var n=this.element.classList.contains(oe["c"]);if(!n&&r===0){this.element.classList.add(oe["c"])}else if(n&&r!==0){this.element.classList.remove(oe["c"])}}this.label_.style.msTransform=i;this.label_.style.webkitTransform=i;this.label_.style.transform=i}this.rotation_=r}var pe=he;var ve=function e(t){var r=t?t:{};var i=r.className!==undefined?r.className:"ol-zoom";var n=r.delta!==undefined?r.delta:1;var a=r.zoomInLabel!==undefined?r.zoomInLabel:"+";var o=r.zoomOutLabel!==undefined?r.zoomOutLabel:"−";var s=r.zoomInTipLabel!==undefined?r.zoomInTipLabel:"Zoom in";var l=r.zoomOutTipLabel!==undefined?r.zoomOutTipLabel:"Zoom out";var u=document.createElement("button");u.className=i+"-in";u.setAttribute("type","button");u.title=s;u.appendChild(typeof a==="string"?document.createTextNode(a):a);Object(c["a"])(u,G["a"].CLICK,e.prototype.handleClick_.bind(this,n));var f=document.createElement("button");f.className=i+"-out";f.setAttribute("type","button");f.title=l;f.appendChild(typeof o==="string"?document.createTextNode(o):o);Object(c["a"])(f,G["a"].CLICK,e.prototype.handleClick_.bind(this,-n));var h=i+" "+oe["e"]+" "+oe["b"];var d=document.createElement("div");d.className=h;d.appendChild(u);d.appendChild(f);ae["a"].call(this,{element:d,target:r.target});this.duration_=r.duration!==undefined?r.duration:250};Object(i["d"])(ve,ae["a"]);ve.prototype.handleClick_=function(e,t){t.preventDefault();this.zoomByDelta_(e)};ve.prototype.zoomByDelta_=function(e){var t=this.getMap();var r=t.getView();if(!r){return}var i=r.getResolution();if(i){var n=r.constrainResolution(i,e);if(this.duration_>0){if(r.getAnimating()){r.cancelAnimations()}r.animate({resolution:n,duration:this.duration_,easing:fe["b"]})}else{r.setResolution(n)}}};var ge=ve;function me(e){var t=e?e:{};var r=new n["b"];var i=t.zoom!==undefined?t.zoom:true;if(i){r.push(new ge(t.zoomOptions))}var a=t.rotate!==undefined?t.rotate:true;if(a){r.push(new pe(t.rotateOptions))}var o=t.attribution!==undefined?t.attribution:true;if(o){r.push(new ce(t.attributionOptions))}return r}var ye=function e(t,r,i){this.decay_=t;this.minVelocity_=r;this.delay_=i;this.points_=[];this.angle_=0;this.initialVelocity_=0};ye.prototype.begin=function(){this.points_.length=0;this.angle_=0;this.initialVelocity_=0};ye.prototype.update=function(e,t){this.points_.push(e,t,Date.now())};ye.prototype.end=function(){if(this.points_.length<6){return false}var e=Date.now()-this.delay_;var t=this.points_.length-3;if(this.points_[t+2]<e){return false}var r=t-3;while(r>0&&this.points_[r+2]>e){r-=3}var i=this.points_[t+2]-this.points_[r+2];if(i<1e3/60){return false}var n=this.points_[t]-this.points_[r];var a=this.points_[t+1]-this.points_[r+1];this.angle_=Math.atan2(a,n);this.initialVelocity_=Math.sqrt(n*n+a*a)/i;return this.initialVelocity_>this.minVelocity_};ye.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_};ye.prototype.getAngle=function(){return this.angle_};var _e=ye;var be=r(33);var we=function e(t){var r=t?t:{};this.delta_=r.delta?r.delta:1;be["a"].call(this,{handleEvent:Se});this.duration_=r.duration!==undefined?r.duration:250};Object(i["d"])(we,be["a"]);function Se(e){var t=false;var r=e.originalEvent;if(e.type==l["a"].DBLCLICK){var i=e.map;var n=e.coordinate;var a=r.shiftKey?-this.delta_:this.delta_;var o=i.getView();Object(be["f"])(o,a,n,this.duration_);e.preventDefault();t=true}return!t}var Ce=we;var xe=r(27);var Oe=r(55);var Te=r(29);var Ee=function e(t){Te["b"].call(this,{handleDownEvent:Ae,handleDragEvent:Me,handleUpEvent:je});var r=t?t:{};this.kinetic_=r.kinetic;this.lastCentroid=null;this.lastPointersCount_;this.condition_=r.condition?r.condition:Oe["f"];this.noKinetic_=false};Object(i["d"])(Ee,Te["b"]);function Me(e){var t=this.targetPointers;var r=Object(Te["a"])(t);if(t.length==this.lastPointersCount_){if(this.kinetic_){this.kinetic_.update(r[0],r[1])}if(this.lastCentroid){var i=this.lastCentroid[0]-r[0];var n=r[1]-this.lastCentroid[1];var a=e.map;var o=a.getView();var s=[i,n];Object(xe["g"])(s,o.getResolution());Object(xe["f"])(s,o.getRotation());Object(xe["a"])(s,o.getCenter());s=o.constrainCenter(s);o.setCenter(s)}}else if(this.kinetic_){this.kinetic_.begin()}this.lastCentroid=r;this.lastPointersCount_=t.length}function je(e){var t=e.map;var r=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var i=this.kinetic_.getDistance();var n=this.kinetic_.getAngle();var a=r.getCenter();var o=t.getPixelFromCoordinate(a);var s=t.getCoordinateFromPixel([o[0]-i*Math.cos(n),o[1]-i*Math.sin(n)]);r.animate({center:r.constrainCenter(s),duration:500,easing:fe["b"]})}r.setHint(X["a"].INTERACTING,-1);return false}else{if(this.kinetic_){this.kinetic_.begin()}this.lastCentroid=null;return true}}function Ae(e){if(this.targetPointers.length>0&&this.condition_(e)){var t=e.map;var r=t.getView();this.lastCentroid=null;if(!this.handlingDownUpSequence){r.setHint(X["a"].INTERACTING,1)}if(r.getAnimating()){r.setCenter(e.frameState.viewState.center)}if(this.kinetic_){this.kinetic_.begin()}this.noKinetic_=this.targetPointers.length>1;return true}else{return false}}Ee.prototype.shouldStopEvent=Q["a"];var Pe=Ee;var ke=r(202);var Ie=function e(t){var r=t?t:{};Te["b"].call(this,{handleDownEvent:Le,handleDragEvent:De,handleUpEvent:Re});this.condition_=r.condition?r.condition:Oe["b"];this.lastAngle_=undefined;this.duration_=r.duration!==undefined?r.duration:250};Object(i["d"])(Ie,Te["b"]);function De(e){if(!Object(Oe["e"])(e)){return}var t=e.map;var r=t.getView();if(r.getConstraints().rotation===ke["c"]){return}var i=t.getSize();var n=e.pixel;var a=Math.atan2(i[1]/2-n[1],n[0]-i[0]/2);if(this.lastAngle_!==undefined){var o=a-this.lastAngle_;var s=r.getRotation();Object(be["d"])(r,s-o)}this.lastAngle_=a}function Re(e){if(!Object(Oe["e"])(e)){return true}var t=e.map;var r=t.getView();r.setHint(X["a"].INTERACTING,-1);var i=r.getRotation();Object(be["c"])(r,i,undefined,this.duration_);return false}function Le(e){if(!Object(Oe["e"])(e)){return false}if(Object(Oe["d"])(e)&&this.condition_(e)){var t=e.map;t.getView().setHint(X["a"].INTERACTING,1);this.lastAngle_=undefined;return true}else{return false}}Ie.prototype.shouldStopEvent=Q["a"];var $e=Ie;var Ne=r(337);var Fe=function e(t){var r=t?t:{};var i=r.condition?r.condition:Oe["i"];this.duration_=r.duration!==undefined?r.duration:200;this.out_=r.out!==undefined?r.out:false;Ne["a"].call(this,{condition:i,className:r.className||"ol-dragzoom"})};Object(i["d"])(Fe,Ne["a"]);Fe.prototype.onBoxEnd=function(){var e=this.getMap();var t=e.getView();var r=e.getSize();var i=this.getGeometry().getExtent();if(this.out_){var n=t.calculateExtent(r);var a=Object(Z["n"])([e.getPixelFromCoordinate(Object(Z["v"])(i)),e.getPixelFromCoordinate(Object(Z["D"])(i))]);var o=t.getResolutionForExtent(a,r);Object(Z["J"])(n,1/o);i=n}var s=t.constrainResolution(t.getResolutionForExtent(i,r));var l=Object(Z["x"])(i);l=t.constrainCenter(l);t.animate({resolution:s,center:l,duration:this.duration_,easing:fe["b"]})};var Ge=Fe;var Ue={LEFT:37,UP:38,RIGHT:39,DOWN:40};var He=function e(t){be["a"].call(this,{handleEvent:Ye});var r=t||{};this.defaultCondition_=function(e){return Object(Oe["f"])(e)&&Object(Oe["k"])(e)};this.condition_=r.condition!==undefined?r.condition:this.defaultCondition_;this.duration_=r.duration!==undefined?r.duration:100;this.pixelDelta_=r.pixelDelta!==undefined?r.pixelDelta:128};Object(i["d"])(He,be["a"]);function Ye(e){var t=false;if(e.type==G["a"].KEYDOWN){var r=e.originalEvent;var i=r.keyCode;if(this.condition_(e)&&(i==Ue.DOWN||i==Ue.LEFT||i==Ue.RIGHT||i==Ue.UP)){var n=e.map;var a=n.getView();var o=a.getResolution()*this.pixelDelta_;var s=0,l=0;if(i==Ue.DOWN){l=-o}else if(i==Ue.LEFT){s=-o}else if(i==Ue.RIGHT){s=o}else{l=o}var u=[s,l];Object(xe["f"])(u,a.getRotation());Object(be["b"])(a,u,this.duration_);e.preventDefault();t=true}}return!t}var We=He;var Ve=function e(t){be["a"].call(this,{handleEvent:ze});var r=t?t:{};this.condition_=r.condition?r.condition:Oe["k"];this.delta_=r.delta?r.delta:1;this.duration_=r.duration!==undefined?r.duration:100};Object(i["d"])(Ve,be["a"]);function ze(e){var t=false;if(e.type==G["a"].KEYDOWN||e.type==G["a"].KEYPRESS){var r=e.originalEvent;var i=r.charCode;if(this.condition_(e)&&(i=="+".charCodeAt(0)||i=="-".charCodeAt(0))){var n=e.map;var a=i=="+".charCodeAt(0)?this.delta_:-this.delta_;var o=n.getView();Object(be["f"])(o,a,undefined,this.duration_);e.preventDefault();t=true}}return!t}var qe=Ve;var Be=r(22);var Xe=1;var Ke={TRACKPAD:"trackpad",WHEEL:"wheel"};var Ze=function e(t){be["a"].call(this,{handleEvent:Qe});var r=t||{};this.delta_=0;this.duration_=r.duration!==undefined?r.duration:250;this.timeout_=r.timeout!==undefined?r.timeout:80;this.useAnchor_=r.useAnchor!==undefined?r.useAnchor:true;this.constrainResolution_=r.constrainResolution||false;this.condition_=r.condition?r.condition:Oe["c"];this.lastAnchor_=null;this.startTime_=undefined;this.timeoutId_=undefined;this.mode_=undefined;this.trackpadEventGap_=400;this.trackpadTimeoutId_=undefined;this.trackpadDeltaPerZoom_=300;this.trackpadZoomBuffer_=1.5};Object(i["d"])(Ze,be["a"]);function Qe(e){if(!this.condition_(e)){return true}var t=e.type;if(t!==G["a"].WHEEL&&t!==G["a"].MOUSEWHEEL){return true}e.preventDefault();var r=e.map;var i=e.originalEvent;if(this.useAnchor_){this.lastAnchor_=e.coordinate}var n=void 0;if(e.type==G["a"].WHEEL){n=i.deltaY;if(s["c"]&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL){n/=s["b"]}if(i.deltaMode===WheelEvent.DOM_DELTA_LINE){n*=40}}else if(e.type==G["a"].MOUSEWHEEL){n=-i.wheelDeltaY;if(s["g"]){n/=3}}if(n===0){return false}var a=Date.now();if(this.startTime_===undefined){this.startTime_=a}if(!this.mode_||a-this.startTime_>this.trackpadEventGap_){this.mode_=Math.abs(n)<4?Ke.TRACKPAD:Ke.WHEEL}if(this.mode_===Ke.TRACKPAD){var o=r.getView();if(this.trackpadTimeoutId_){clearTimeout(this.trackpadTimeoutId_)}else{o.setHint(X["a"].INTERACTING,1)}this.trackpadTimeoutId_=setTimeout(this.decrementInteractingHint_.bind(this),this.trackpadEventGap_);var l=o.getResolution()*Math.pow(2,n/this.trackpadDeltaPerZoom_);var u=o.getMinResolution();var c=o.getMaxResolution();var f=0;if(l<u){l=Math.max(l,u/this.trackpadZoomBuffer_);f=1}else if(l>c){l=Math.min(l,c*this.trackpadZoomBuffer_);f=-1}if(this.lastAnchor_){var h=o.calculateCenterZoom(l,this.lastAnchor_);o.setCenter(o.constrainCenter(h))}o.setResolution(l);if(f===0&&this.constrainResolution_){o.animate({resolution:o.constrainResolution(l,n>0?-1:1),easing:fe["b"],anchor:this.lastAnchor_,duration:this.duration_})}if(f>0){o.animate({resolution:u,easing:fe["b"],anchor:this.lastAnchor_,duration:500})}else if(f<0){o.animate({resolution:c,easing:fe["b"],anchor:this.lastAnchor_,duration:500})}this.startTime_=a;return false}this.delta_+=n;var d=Math.max(this.timeout_-(a-this.startTime_),0);clearTimeout(this.timeoutId_);this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),d);return false}Ze.prototype.decrementInteractingHint_=function(){this.trackpadTimeoutId_=undefined;var e=this.getMap().getView();e.setHint(X["a"].INTERACTING,-1)};Ze.prototype.handleWheelZoom_=function(e){var t=e.getView();if(t.getAnimating()){t.cancelAnimations()}var r=Xe;var i=Object(Be["a"])(this.delta_,-r,r);Object(be["f"])(t,-i,this.lastAnchor_,this.duration_);this.mode_=undefined;this.delta_=0;this.lastAnchor_=null;this.startTime_=undefined;this.timeoutId_=undefined};Ze.prototype.setMouseAnchor=function(e){this.useAnchor_=e;if(!e){this.lastAnchor_=null}};var Je=Ze;var et=function e(t){Te["b"].call(this,{handleDownEvent:it,handleDragEvent:tt,handleUpEvent:rt});var r=t||{};this.anchor_=null;this.lastAngle_=undefined;this.rotating_=false;this.rotationDelta_=0;this.threshold_=r.threshold!==undefined?r.threshold:.3;this.duration_=r.duration!==undefined?r.duration:250};Object(i["d"])(et,Te["b"]);function tt(e){var t=0;var r=this.targetPointers[0];var i=this.targetPointers[1];var n=Math.atan2(i.clientY-r.clientY,i.clientX-r.clientX);if(this.lastAngle_!==undefined){var a=n-this.lastAngle_;this.rotationDelta_+=a;if(!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_){this.rotating_=true}t=a}this.lastAngle_=n;var o=e.map;var s=o.getView();if(s.getConstraints().rotation===ke["c"]){return}var l=o.getViewport().getBoundingClientRect();var u=Object(Te["a"])(this.targetPointers);u[0]-=l.left;u[1]-=l.top;this.anchor_=o.getCoordinateFromPixel(u);if(this.rotating_){var c=s.getRotation();o.render();Object(be["d"])(s,c+t,this.anchor_)}}function rt(e){if(this.targetPointers.length<2){var t=e.map;var r=t.getView();r.setHint(X["a"].INTERACTING,-1);if(this.rotating_){var i=r.getRotation();Object(be["c"])(r,i,this.anchor_,this.duration_)}return false}else{return true}}function it(e){if(this.targetPointers.length>=2){var t=e.map;this.anchor_=null;this.lastAngle_=undefined;this.rotating_=false;this.rotationDelta_=0;if(!this.handlingDownUpSequence){t.getView().setHint(X["a"].INTERACTING,1)}return true}else{return false}}et.prototype.shouldStopEvent=Q["a"];var nt=et;var at=function e(t){Te["b"].call(this,{handleDownEvent:lt,handleDragEvent:ot,handleUpEvent:st});var r=t?t:{};this.constrainResolution_=r.constrainResolution||false;this.anchor_=null;this.duration_=r.duration!==undefined?r.duration:400;this.lastDistance_=undefined;this.lastScaleDelta_=1};Object(i["d"])(at,Te["b"]);function ot(e){var t=1;var r=this.targetPointers[0];var i=this.targetPointers[1];var n=r.clientX-i.clientX;var a=r.clientY-i.clientY;var o=Math.sqrt(n*n+a*a);if(this.lastDistance_!==undefined){t=this.lastDistance_/o}this.lastDistance_=o;var s=e.map;var l=s.getView();var u=l.getResolution();var c=l.getMaxResolution();var f=l.getMinResolution();var h=u*t;if(h>c){t=c/u;h=c}else if(h<f){t=f/u;h=f}if(t!=1){this.lastScaleDelta_=t}var d=s.getViewport().getBoundingClientRect();var p=Object(Te["a"])(this.targetPointers);p[0]-=d.left;p[1]-=d.top;this.anchor_=s.getCoordinateFromPixel(p);s.render();Object(be["g"])(l,h,this.anchor_)}function st(e){if(this.targetPointers.length<2){var t=e.map;var r=t.getView();r.setHint(X["a"].INTERACTING,-1);var i=r.getResolution();if(this.constrainResolution_||i<r.getMinResolution()||i>r.getMaxResolution()){var n=this.lastScaleDelta_-1;Object(be["e"])(r,i,this.anchor_,this.duration_,n)}return false}else{return true}}function lt(e){if(this.targetPointers.length>=2){var t=e.map;this.anchor_=null;this.lastDistance_=undefined;this.lastScaleDelta_=1;if(!this.handlingDownUpSequence){t.getView().setHint(X["a"].INTERACTING,1)}return true}else{return false}}at.prototype.shouldStopEvent=Q["a"];var ut=at;function ct(e){var t=e?e:{};var r=new n["b"];var i=new _e(-.005,.05,100);var a=t.altShiftDragRotate!==undefined?t.altShiftDragRotate:true;if(a){r.push(new $e)}var o=t.doubleClickZoom!==undefined?t.doubleClickZoom:true;if(o){r.push(new Ce({delta:t.zoomDelta,duration:t.zoomDuration}))}var s=t.dragPan!==undefined?t.dragPan:true;if(s){r.push(new Pe({kinetic:i}))}var l=t.pinchRotate!==undefined?t.pinchRotate:true;if(l){r.push(new nt)}var u=t.pinchZoom!==undefined?t.pinchZoom:true;if(u){r.push(new ut({constrainResolution:t.constrainResolution,duration:t.zoomDuration}))}var c=t.keyboard!==undefined?t.keyboard:true;if(c){r.push(new We);r.push(new qe({delta:t.zoomDelta,duration:t.zoomDuration}))}var f=t.mouseWheelZoom!==undefined?t.mouseWheelZoom:true;if(f){r.push(new Je({constrainResolution:t.constrainResolution,duration:t.zoomDuration}))}var h=t.shiftDragZoom!==undefined?t.shiftDragZoom:true;if(h){r.push(new Ge({duration:t.zoomDuration}))}return r}var ft=r(133);var ht=r(221);var dt=r(42);var pt=function e(t,r,i,n,a){this.loader_=a!==undefined?a:null;var o=a!==undefined?dt["a"].IDLE:dt["a"].LOADED;ht["a"].call(this,t,r,i,o);this.canvas_=n;this.error_=null};Object(i["d"])(pt,ht["a"]);pt.prototype.getError=function(){return this.error_};pt.prototype.handleLoad_=function(e){if(e){this.error_=e;this.state=dt["a"].ERROR}else{this.state=dt["a"].LOADED}this.changed()};pt.prototype.load=function(){if(this.state==dt["a"].IDLE){this.state=dt["a"].LOADING;this.changed();this.loader_(this.handleLoad_.bind(this))}};pt.prototype.getImage=function(){return this.canvas_};var vt=pt;var gt=r(178);var mt=r(390);var yt=function e(t,r,i,n,a){b["a"].call(this,t);this.vectorContext=r;this.frameState=i;this.context=n;this.glContext=a};Object(i["d"])(yt,b["a"]);var _t=yt;var bt=r(219);var wt=r(14);var St=r(169);var Ct=r(7);var xt=r(85);var Ot=r(171);var Tt=function e(){};Tt.prototype.drawCustom=function(e,t,r){};Tt.prototype.drawGeometry=function(e){};Tt.prototype.setStyle=function(e){};Tt.prototype.drawCircle=function(e,t){};Tt.prototype.drawFeature=function(e,t){};Tt.prototype.drawGeometryCollection=function(e,t){};Tt.prototype.drawLineString=function(e,t){};Tt.prototype.drawMultiLineString=function(e,t){};Tt.prototype.drawMultiPoint=function(e,t){};Tt.prototype.drawMultiPolygon=function(e,t){};Tt.prototype.drawPoint=function(e,t){};Tt.prototype.drawPolygon=function(e,t){};Tt.prototype.drawText=function(e,t){};Tt.prototype.setFillStrokeStyle=function(e,t){};Tt.prototype.setImageStyle=function(e,t){};Tt.prototype.setTextStyle=function(e,t){};var Et=Tt;var Mt=function e(t,r,i,n,a){Et.call(this);this.context_=t;this.pixelRatio_=r;this.extent_=i;this.transform_=n;this.viewRotation_=a;this.contextFillState_=null;this.contextStrokeState_=null;this.contextTextState_=null;this.fillState_=null;this.strokeState_=null;this.image_=null;this.imageAnchorX_=0;this.imageAnchorY_=0;this.imageHeight_=0;this.imageOpacity_=0;this.imageOriginX_=0;this.imageOriginY_=0;this.imageRotateWithView_=false;this.imageRotation_=0;this.imageScale_=0;this.imageSnapToPixel_=false;this.imageWidth_=0;this.text_="";this.textOffsetX_=0;this.textOffsetY_=0;this.textRotateWithView_=false;this.textRotation_=0;this.textScale_=0;this.textFillState_=null;this.textStrokeState_=null;this.textState_=null;this.pixelCoordinates_=[];this.tmpLocalTransform_=Object(te["c"])()};Object(i["d"])(Mt,Et);Mt.prototype.drawImages_=function(e,t,r,i){if(!this.image_){return}var n=Object(Ot["c"])(e,t,r,2,this.transform_,this.pixelCoordinates_);var a=this.context_;var o=this.tmpLocalTransform_;var s=a.globalAlpha;if(this.imageOpacity_!=1){a.globalAlpha=s*this.imageOpacity_}var l=this.imageRotation_;if(this.imageRotateWithView_){l+=this.viewRotation_}for(var u=0,c=n.length;u<c;u+=2){var f=n[u]-this.imageAnchorX_;var h=n[u+1]-this.imageAnchorY_;if(this.imageSnapToPixel_){f=Math.round(f);h=Math.round(h)}if(l!==0||this.imageScale_!=1){var d=f+this.imageAnchorX_;var p=h+this.imageAnchorY_;Object(te["b"])(o,d,p,this.imageScale_,this.imageScale_,l,-d,-p);a.setTransform.apply(a,o)}a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,f,h,this.imageWidth_,this.imageHeight_)}if(l!==0||this.imageScale_!=1){a.setTransform(1,0,0,1,0,0)}if(this.imageOpacity_!=1){a.globalAlpha=s}};Mt.prototype.drawText_=function(e,t,r,i){if(!this.textState_||this.text_===""){return}if(this.textFillState_){this.setContextFillState_(this.textFillState_)}if(this.textStrokeState_){this.setContextStrokeState_(this.textStrokeState_)}this.setContextTextState_(this.textState_);var n=Object(Ot["c"])(e,t,r,i,this.transform_,this.pixelCoordinates_);var a=this.context_;var o=this.textRotation_;if(this.textRotateWithView_){o+=this.viewRotation_}for(;t<r;t+=i){var s=n[t]+this.textOffsetX_;var l=n[t+1]+this.textOffsetY_;if(o!==0||this.textScale_!=1){var u=Object(te["b"])(this.tmpLocalTransform_,s,l,this.textScale_,this.textScale_,o,-s,-l);a.setTransform.apply(a,u)}if(this.textStrokeState_){a.strokeText(this.text_,s,l)}if(this.textFillState_){a.fillText(this.text_,s,l)}}if(o!==0||this.textScale_!=1){a.setTransform(1,0,0,1,0,0)}};Mt.prototype.moveToLineTo_=function(e,t,r,i,n){var a=this.context_;var o=Object(Ot["c"])(e,t,r,i,this.transform_,this.pixelCoordinates_);a.moveTo(o[0],o[1]);var s=o.length;if(n){s-=2}for(var l=2;l<s;l+=2){a.lineTo(o[l],o[l+1])}if(n){a.closePath()}return r};Mt.prototype.drawRings_=function(e,t,r,i){for(var n=0,a=r.length;n<a;++n){t=this.moveToLineTo_(e,t,r[n],i,true)}return t};Mt.prototype.drawCircle=function(e){if(!Object(Z["F"])(this.extent_,e.getExtent())){return}if(this.fillState_||this.strokeState_){if(this.fillState_){this.setContextFillState_(this.fillState_)}if(this.strokeState_){this.setContextStrokeState_(this.strokeState_)}var t=Object(xt["b"])(e,this.transform_,this.pixelCoordinates_);var r=t[2]-t[0];var i=t[3]-t[1];var n=Math.sqrt(r*r+i*i);var a=this.context_;a.beginPath();a.arc(t[0],t[1],n,0,2*Math.PI);if(this.fillState_){a.fill()}if(this.strokeState_){a.stroke()}}if(this.text_!==""){this.drawText_(e.getCenter(),0,2,2)}};Mt.prototype.setStyle=function(e){this.setFillStrokeStyle(e.getFill(),e.getStroke());this.setImageStyle(e.getImage());this.setTextStyle(e.getText())};Mt.prototype.drawGeometry=function(e){var t=e.getType();switch(t){case Ct["a"].POINT:this.drawPoint(e);break;case Ct["a"].LINE_STRING:this.drawLineString(e);break;case Ct["a"].POLYGON:this.drawPolygon(e);break;case Ct["a"].MULTI_POINT:this.drawMultiPoint(e);break;case Ct["a"].MULTI_LINE_STRING:this.drawMultiLineString(e);break;case Ct["a"].MULTI_POLYGON:this.drawMultiPolygon(e);break;case Ct["a"].GEOMETRY_COLLECTION:this.drawGeometryCollection(e);break;case Ct["a"].CIRCLE:this.drawCircle(e);break;default:}};Mt.prototype.drawFeature=function(e,t){var r=t.getGeometryFunction()(e);if(!r||!Object(Z["F"])(this.extent_,r.getExtent())){return}this.setStyle(t);this.drawGeometry(r)};Mt.prototype.drawGeometryCollection=function(e){var t=e.getGeometriesArray();for(var r=0,i=t.length;r<i;++r){this.drawGeometry(t[r])}};Mt.prototype.drawPoint=function(e){var t=e.getFlatCoordinates();var r=e.getStride();if(this.image_){this.drawImages_(t,0,t.length,r)}if(this.text_!==""){this.drawText_(t,0,t.length,r)}};Mt.prototype.drawMultiPoint=function(e){var t=e.getFlatCoordinates();var r=e.getStride();if(this.image_){this.drawImages_(t,0,t.length,r)}if(this.text_!==""){this.drawText_(t,0,t.length,r)}};Mt.prototype.drawLineString=function(e){if(!Object(Z["F"])(this.extent_,e.getExtent())){return}if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var t=this.context_;var r=e.getFlatCoordinates();t.beginPath();this.moveToLineTo_(r,0,r.length,e.getStride(),false);t.stroke()}if(this.text_!==""){var i=e.getFlatMidpoint();this.drawText_(i,0,2,2)}};Mt.prototype.drawMultiLineString=function(e){var t=e.getExtent();if(!Object(Z["F"])(this.extent_,t)){return}if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var r=this.context_;var i=e.getFlatCoordinates();var n=0;var a=e.getEnds();var o=e.getStride();r.beginPath();for(var s=0,l=a.length;s<l;++s){n=this.moveToLineTo_(i,n,a[s],o,false)}r.stroke()}if(this.text_!==""){var u=e.getFlatMidpoints();this.drawText_(u,0,u.length,2)}};Mt.prototype.drawPolygon=function(e){if(!Object(Z["F"])(this.extent_,e.getExtent())){return}if(this.strokeState_||this.fillState_){if(this.fillState_){this.setContextFillState_(this.fillState_)}if(this.strokeState_){this.setContextStrokeState_(this.strokeState_)}var t=this.context_;t.beginPath();this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride());if(this.fillState_){t.fill()}if(this.strokeState_){t.stroke()}}if(this.text_!==""){var r=e.getFlatInteriorPoint();this.drawText_(r,0,2,2)}};Mt.prototype.drawMultiPolygon=function(e){if(!Object(Z["F"])(this.extent_,e.getExtent())){return}if(this.strokeState_||this.fillState_){if(this.fillState_){this.setContextFillState_(this.fillState_)}if(this.strokeState_){this.setContextStrokeState_(this.strokeState_)}var t=this.context_;var r=e.getOrientedFlatCoordinates();var i=0;var n=e.getEndss();var a=e.getStride();t.beginPath();for(var o=0,s=n.length;o<s;++o){var l=n[o];i=this.drawRings_(r,i,l,a)}if(this.fillState_){t.fill()}if(this.strokeState_){t.stroke()}}if(this.text_!==""){var u=e.getFlatInteriorPoints();this.drawText_(u,0,u.length,2)}};Mt.prototype.setContextFillState_=function(e){var t=this.context_;var r=this.contextFillState_;if(!r){t.fillStyle=e.fillStyle;this.contextFillState_={fillStyle:e.fillStyle}}else{if(r.fillStyle!=e.fillStyle){r.fillStyle=t.fillStyle=e.fillStyle}}};Mt.prototype.setContextStrokeState_=function(e){var t=this.context_;var r=this.contextStrokeState_;if(!r){t.lineCap=e.lineCap;if(s["a"]){t.setLineDash(e.lineDash);t.lineDashOffset=e.lineDashOffset}t.lineJoin=e.lineJoin;t.lineWidth=e.lineWidth;t.miterLimit=e.miterLimit;t.strokeStyle=e.strokeStyle;this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle}}else{if(r.lineCap!=e.lineCap){r.lineCap=t.lineCap=e.lineCap}if(s["a"]){if(!Object(x["b"])(r.lineDash,e.lineDash)){t.setLineDash(r.lineDash=e.lineDash)}if(r.lineDashOffset!=e.lineDashOffset){r.lineDashOffset=t.lineDashOffset=e.lineDashOffset}}if(r.lineJoin!=e.lineJoin){r.lineJoin=t.lineJoin=e.lineJoin}if(r.lineWidth!=e.lineWidth){r.lineWidth=t.lineWidth=e.lineWidth}if(r.miterLimit!=e.miterLimit){r.miterLimit=t.miterLimit=e.miterLimit}if(r.strokeStyle!=e.strokeStyle){r.strokeStyle=t.strokeStyle=e.strokeStyle}}};Mt.prototype.setContextTextState_=function(e){var t=this.context_;var r=this.contextTextState_;var i=e.textAlign?e.textAlign:wt["l"];if(!r){t.font=e.font;t.textAlign=i;t.textBaseline=e.textBaseline;this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline}}else{if(r.font!=e.font){r.font=t.font=e.font}if(r.textAlign!=i){r.textAlign=i}if(r.textBaseline!=e.textBaseline){r.textBaseline=t.textBaseline=e.textBaseline}}};Mt.prototype.setFillStrokeStyle=function(e,t){if(!e){this.fillState_=null}else{var r=e.getColor();this.fillState_={fillStyle:Object(St["a"])(r?r:wt["b"])}}if(!t){this.strokeState_=null}else{var i=t.getColor();var n=t.getLineCap();var a=t.getLineDash();var o=t.getLineDashOffset();var s=t.getLineJoin();var l=t.getWidth();var u=t.getMiterLimit();this.strokeState_={lineCap:n!==undefined?n:wt["d"],lineDash:a?a:wt["e"],lineDashOffset:o?o:wt["f"],lineJoin:s!==undefined?s:wt["g"],lineWidth:this.pixelRatio_*(l!==undefined?l:wt["h"]),miterLimit:u!==undefined?u:wt["i"],strokeStyle:Object(St["a"])(i?i:wt["k"])}}};Mt.prototype.setImageStyle=function(e){if(!e){this.image_=null}else{var t=e.getAnchor();var r=e.getImage(1);var i=e.getOrigin();var n=e.getSize();this.imageAnchorX_=t[0];this.imageAnchorY_=t[1];this.imageHeight_=n[1];this.image_=r;this.imageOpacity_=e.getOpacity();this.imageOriginX_=i[0];this.imageOriginY_=i[1];this.imageRotateWithView_=e.getRotateWithView();this.imageRotation_=e.getRotation();this.imageScale_=e.getScale()*this.pixelRatio_;this.imageSnapToPixel_=e.getSnapToPixel();this.imageWidth_=n[0]}};Mt.prototype.setTextStyle=function(e){if(!e){this.text_=""}else{var t=e.getFill();if(!t){this.textFillState_=null}else{var r=t.getColor();this.textFillState_={fillStyle:Object(St["a"])(r?r:wt["b"])}}var i=e.getStroke();if(!i){this.textStrokeState_=null}else{var n=i.getColor();var a=i.getLineCap();var o=i.getLineDash();var s=i.getLineDashOffset();var l=i.getLineJoin();var u=i.getWidth();var c=i.getMiterLimit();this.textStrokeState_={lineCap:a!==undefined?a:wt["d"],lineDash:o?o:wt["e"],lineDashOffset:s?s:wt["f"],lineJoin:l!==undefined?l:wt["g"],lineWidth:u!==undefined?u:wt["h"],miterLimit:c!==undefined?c:wt["i"],strokeStyle:Object(St["a"])(n?n:wt["k"])}}var f=e.getFont();var h=e.getOffsetX();var d=e.getOffsetY();var p=e.getRotateWithView();var v=e.getRotation();var g=e.getScale();var m=e.getText();var y=e.getTextAlign();var _=e.getTextBaseline();this.textState_={font:f!==undefined?f:wt["c"],textAlign:y!==undefined?y:wt["l"],textBaseline:_!==undefined?_:wt["m"]};this.text_=m!==undefined?m:"";this.textOffsetX_=h!==undefined?this.pixelRatio_*h:0;this.textOffsetY_=d!==undefined?this.pixelRatio_*d:0;this.textRotateWithView_=p!==undefined?p:false;this.textRotation_=v!==undefined?v:0;this.textScale_=this.pixelRatio_*(g!==undefined?g:1)}};var jt=Mt;var At=r(253);var Pt=r(252);var kt=function e(t){At["a"].call(this);this.layer_=t};Object(i["d"])(kt,At["a"]);kt.prototype.forEachFeatureAtCoordinate=Q["c"];kt.prototype.hasFeatureAtCoordinate=Q["a"];kt.prototype.createLoadedTileFinder=function(e,t,r){return function(i,n){function a(e){if(!r[i]){r[i]={}}r[i][e.tileCoord.toString()]=e}return e.forEachLoadedTile(t,i,n,a)}};kt.prototype.getLayer=function(){return this.layer_};kt.prototype.handleImageChange_=function(e){var t=e.target;if(t.getState()===dt["a"].LOADED){this.renderIfReadyAndVisible()}};kt.prototype.loadImage=function(e){var t=e.getState();if(t!=dt["a"].LOADED&&t!=dt["a"].ERROR){Object(c["a"])(e,G["a"].CHANGE,this.handleImageChange_,this)}if(t==dt["a"].IDLE){e.load();t=e.getState()}return t==dt["a"].LOADED};kt.prototype.renderIfReadyAndVisible=function(){var e=this.getLayer();if(e.getVisible()&&e.getSourceState()==Pt["a"].READY){this.changed()}};kt.prototype.scheduleExpireCache=function(e,t){if(t.canExpireCache()){var r=function(e,t,r){var n=Object(i["c"])(e).toString();if(n in r.usedTiles){e.expireCache(r.viewState.projection,r.usedTiles[n])}}.bind(null,t);e.postRenderFunctions.push(r)}};kt.prototype.updateUsedTiles=function(e,t,r,n){var a=Object(i["c"])(t).toString();var o=r.toString();if(a in e){if(o in e[a]){e[a][o].extend(n)}else{e[a][o]=n}}else{e[a]={};e[a][o]=n}};kt.prototype.manageTilePyramid=function(e,t,r,n,a,o,s,l,u,c){var f=Object(i["c"])(t).toString();if(!(f in e.wantedTiles)){e.wantedTiles[f]={}}var h=e.wantedTiles[f];var d=e.tileQueue;var p=r.getMinZoom();var v=void 0,g=void 0,m=void 0,y=void 0,_=void 0,b=void 0;for(b=p;b<=s;++b){g=r.getTileRangeForExtentAndZ(o,b,g);m=r.getResolution(b);for(y=g.minX;y<=g.maxX;++y){for(_=g.minY;_<=g.maxY;++_){if(s-b<=l){v=t.getTile(b,y,_,n,a);if(v.getState()==F["a"].IDLE){h[v.getKey()]=true;if(!d.isKeyQueued(v.getKey())){d.enqueue([v,f,r.getTileCoordCenter(v.tileCoord),m])}}if(u!==undefined){u.call(c,v)}}else{t.useTile(b,y,_,a)}}}}};var It=kt;var Dt=function e(t){It.call(this,t);this.renderedResolution;this.transform_=Object(te["c"])()};Object(i["d"])(Dt,It);Dt.prototype.clip=function(e,t,r){var i=t.pixelRatio;var n=t.size[0]*i;var a=t.size[1]*i;var o=t.viewState.rotation;var s=Object(Z["C"])(r);var l=Object(Z["D"])(r);var u=Object(Z["w"])(r);var c=Object(Z["v"])(r);Object(te["a"])(t.coordinateToPixelTransform,s);Object(te["a"])(t.coordinateToPixelTransform,l);Object(te["a"])(t.coordinateToPixelTransform,u);Object(te["a"])(t.coordinateToPixelTransform,c);e.save();Object(wt["s"])(e,-o,n/2,a/2);e.beginPath();e.moveTo(s[0]*i,s[1]*i);e.lineTo(l[0]*i,l[1]*i);e.lineTo(u[0]*i,u[1]*i);e.lineTo(c[0]*i,c[1]*i);e.clip();Object(wt["s"])(e,o,n/2,a/2)};Dt.prototype.dispatchComposeEvent_=function(e,t,r,i){var n=this.getLayer();if(n.hasListener(e)){var a=r.size[0]*r.pixelRatio;var o=r.size[1]*r.pixelRatio;var s=r.viewState.rotation;Object(wt["s"])(t,-s,a/2,o/2);var l=i!==undefined?i:this.getTransform(r,0);var u=new jt(t,r.pixelRatio,r.extent,l,r.viewState.rotation);var c=new _t(e,u,r,t,null);n.dispatchEvent(c);Object(wt["s"])(t,s,a/2,o/2)}};Dt.prototype.forEachLayerAtCoordinate=function(e,t,r,i){var n=this.forEachFeatureAtCoordinate(e,t,0,Q["b"],this);if(n){return r.call(i,this.getLayer(),null)}else{return undefined}};Dt.prototype.postCompose=function(e,t,r,i){this.dispatchComposeEvent_(bt["a"].POSTCOMPOSE,e,t,i)};Dt.prototype.preCompose=function(e,t,r){this.dispatchComposeEvent_(bt["a"].PRECOMPOSE,e,t,r)};Dt.prototype.dispatchRenderEvent=function(e,t,r){this.dispatchComposeEvent_(bt["a"].RENDER,e,t,r)};Dt.prototype.getTransform=function(e,t){var r=e.viewState;var i=e.pixelRatio;var n=i*e.size[0]/2;var a=i*e.size[1]/2;var o=i/r.resolution;var s=-o;var l=-r.rotation;var u=-r.center[0]+t;var c=-r.center[1];return Object(te["b"])(this.transform_,n,a,o,s,l,u,c)};Dt.prototype.composeFrame=function(e,t,r){};Dt.prototype.prepareFrame=function(e,t){};var Rt=Dt;var Lt=function e(t){Rt.call(this,t);this.coordinateToCanvasPixelTransform=Object(te["c"])();this.hitCanvasContext_=null};Object(i["d"])(Lt,Rt);Lt.prototype.composeFrame=function(e,t,r){this.preCompose(r,e);var i=this.getImage();if(i){var n=t.extent;var a=n!==undefined&&!Object(Z["g"])(n,e.extent)&&Object(Z["F"])(n,e.extent);if(a){this.clip(r,e,n)}var o=this.getImageTransform();var s=r.globalAlpha;r.globalAlpha=t.opacity;var l=o[4];var u=o[5];var c=i.width*o[0];var f=i.height*o[3];r.drawImage(i,0,0,+i.width,+i.height,Math.round(l),Math.round(u),Math.round(c),Math.round(f));r.globalAlpha=s;if(a){r.restore()}}this.postCompose(r,e,t)};Lt.prototype.getImage=function(){};Lt.prototype.getImageTransform=function(){};Lt.prototype.forEachFeatureAtCoordinate=function(e,t,r,i,n){var a=this.getLayer();var o=a.getSource();var s=t.viewState.resolution;var l=t.viewState.rotation;var u=t.skippedFeatureUids;return o.forEachFeatureAtCoordinate(e,s,l,r,u,function(e){return i.call(n,e,a)})};Lt.prototype.forEachLayerAtCoordinate=function(e,t,r,i){if(!this.getImage()){return undefined}if(this.getLayer().getSource().forEachFeatureAtCoordinate!==Q["c"]){return Rt.prototype.forEachLayerAtCoordinate.apply(this,arguments)}else{var n=Object(te["a"])(this.coordinateToCanvasPixelTransform,e.slice());Object(xe["g"])(n,t.viewState.resolution/this.renderedResolution);if(!this.hitCanvasContext_){this.hitCanvasContext_=Object(K["a"])(1,1)}this.hitCanvasContext_.clearRect(0,0,1,1);this.hitCanvasContext_.drawImage(this.getImage(),n[0],n[1],1,1,0,0,1,1);var a=this.hitCanvasContext_.getImageData(0,0,1,1).data;if(a[3]>0){return r.call(i,this.getLayer(),a)}else{return undefined}}};var $t=Lt;var Nt=function e(t){$t.call(this,t);this.image_=null;this.imageTransform_=Object(te["c"])();this.skippedFeatures_=[];this.vectorRenderer_=null};Object(i["d"])(Nt,$t);Nt["handles"]=function(e){return e.getType()===gt["a"].IMAGE||e.getType()===gt["a"].VECTOR&&e.getRenderMode()===mt["a"].IMAGE};Nt["create"]=function(e,t){var r=new Nt(t);if(t.getType()===gt["a"].VECTOR){var i=e.getLayerRendererConstructors();for(var n=0,a=i.length;n<a;++n){var o=i[n];if(o!==Nt&&o["handles"](t)){r.setVectorRenderer(o["create"](e,t));break}}}return r};Nt.prototype.disposeInternal=function(){if(this.vectorRenderer_){this.vectorRenderer_.dispose()}$t.prototype.disposeInternal.call(this)};Nt.prototype.getImage=function(){return!this.image_?null:this.image_.getImage()};Nt.prototype.getImageTransform=function(){return this.imageTransform_};Nt.prototype.prepareFrame=function(e,t){var r=e.pixelRatio;var i=e.size;var n=e.viewState;var a=n.center;var o=n.resolution;var s=void 0;var l=this.getLayer();var u=l.getSource();var c=e.viewHints;var f=e.extent;if(t.extent!==undefined){f=Object(Z["B"])(f,t.extent)}if(!c[X["a"].ANIMATING]&&!c[X["a"].INTERACTING]&&!Object(Z["H"])(f)){var h=n.projection;if(!ft["a"]){var d=u.getProjection();if(d){h=d}}var p=this.vectorRenderer_;if(p){var v=p.context;var g=Object(H["a"])({},e,{size:[Object(Z["E"])(f)/o,Object(Z["A"])(f)/o],viewState:Object(H["a"])({},e.viewState,{rotation:0})});var m=Object.keys(g.skippedFeatureUids).sort();if(p.prepareFrame(g,t)&&(p.replayGroupChanged||!Object(x["b"])(m,this.skippedFeatures_))){v.canvas.width=g.size[0]*r;v.canvas.height=g.size[1]*r;p.composeFrame(g,t,v);this.image_=new vt(f,o,r,v.canvas);this.skippedFeatures_=m}}else{s=u.getImage(f,o,r,h);if(s){var y=this.loadImage(s);if(y){this.image_=s}}}}if(this.image_){s=this.image_;var _=s.getExtent();var b=s.getResolution();var w=s.getPixelRatio();var S=r*b/(o*w);var C=Object(te["b"])(this.imageTransform_,r*i[0]/2,r*i[1]/2,S,S,0,w*(_[0]-a[0])/b,w*(a[1]-_[3])/b);Object(te["b"])(this.coordinateToCanvasPixelTransform,r*i[0]/2-C[4],r*i[1]/2-C[5],r/o,-r/o,0,-a[0],-a[1]);this.renderedResolution=b*r/w}return!!this.image_};Nt.prototype.forEachFeatureAtCoordinate=function(e,t,r,i,n){if(this.vectorRenderer_){return this.vectorRenderer_.forEachFeatureAtCoordinate(e,t,r,i,n)}else{return $t.prototype.forEachFeatureAtCoordinate.call(this,e,t,r,i,n)}};Nt.prototype.setVectorRenderer=function(e){if(this.vectorRenderer_){this.vectorRenderer_.dispose()}this.vectorRenderer_=e};var Ft=Nt;var Gt=r(273);var Ut=r(354);var Ht=function e(t){Gt["a"].call(this);this.map_=t;this.layerRenderers_={};this.layerRendererListeners_={};this.layerRendererConstructors_=[]};Object(i["d"])(Ht,Gt["a"]);Ht.prototype.registerLayerRenderers=function(e){this.layerRendererConstructors_.push.apply(this.layerRendererConstructors_,e)};Ht.prototype.getLayerRendererConstructors=function(){return this.layerRendererConstructors_};Ht.prototype.calculateMatrices2D=function(e){var t=e.viewState;var r=e.coordinateToPixelTransform;var i=e.pixelToCoordinateTransform;Object(te["b"])(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]);Object(te["d"])(Object(te["g"])(i,r))};Ht.prototype.removeLayerRenderers=function(){for(var e in this.layerRenderers_){this.removeLayerRendererByKey_(e).dispose()}};function Yt(e,t){Ut["a"].expire()}Ht.prototype.forEachFeatureAtCoordinate=function(e,t,r,n,a,o,s){var l=void 0;var u=t.viewState;var c=u.resolution;function f(e,r){var o=Object(i["c"])(e).toString();var s=t.layerStates[Object(i["c"])(r)].managed;if(!(o in t.skippedFeatureUids&&!s)){return n.call(a,e,s?r:null)}}var h=u.projection;var d=e;if(h.canWrapX()){var p=h.getExtent();var v=Object(Z["E"])(p);var g=e[0];if(g<p[0]||g>p[2]){var m=Math.ceil((p[0]-g)/v);d=[g+v*m,e[1]]}}var y=t.layerStatesArray;var _=y.length;var b=void 0;for(b=_-1;b>=0;--b){var w=y[b];var S=w.layer;if(Object(se["b"])(w,c)&&o.call(s,S)){var C=this.getLayerRenderer(S);if(S.getSource()){l=C.forEachFeatureAtCoordinate(S.getSource().getWrapX()?d:e,t,r,f,a)}if(l){return l}}}return undefined};Ht.prototype.forEachLayerAtPixel=function(e,t,r,i,n,a){};Ht.prototype.hasFeatureAtCoordinate=function(e,t,r,i,n){var a=this.forEachFeatureAtCoordinate(e,t,r,Q["b"],this,i,n);return a!==undefined};Ht.prototype.getLayerRenderer=function(e){var t=Object(i["c"])(e).toString();if(t in this.layerRenderers_){return this.layerRenderers_[t]}else{var r=void 0;for(var n=0,a=this.layerRendererConstructors_.length;n<a;++n){var o=this.layerRendererConstructors_[n];if(o["handles"](e)){r=o["create"](this,e);break}}if(r){this.layerRenderers_[t]=r;this.layerRendererListeners_[t]=Object(c["a"])(r,G["a"].CHANGE,this.handleLayerRendererChange_,this)}else{throw new Error("Unable to create renderer for layer: "+e.getType())}return r}};Ht.prototype.getLayerRendererByKey=function(e){return this.layerRenderers_[e]};Ht.prototype.getLayerRenderers=function(){return this.layerRenderers_};Ht.prototype.getMap=function(){return this.map_};Ht.prototype.handleLayerRendererChange_=function(){this.map_.render()};Ht.prototype.removeLayerRendererByKey_=function(e){var t=this.layerRenderers_[e];delete this.layerRenderers_[e];Object(c["e"])(this.layerRendererListeners_[e]);delete this.layerRendererListeners_[e];return t};Ht.prototype.renderFrame=Q["c"];Ht.prototype.removeUnusedLayerRenderers_=function(e,t){for(var r in this.layerRenderers_){if(!t||!(r in t.layerStates)){this.removeLayerRendererByKey_(r).dispose()}}};Ht.prototype.scheduleExpireIconCache=function(e){e.postRenderFunctions.push(Yt)};Ht.prototype.scheduleRemoveUnusedLayerRenderers=function(e){for(var t in this.layerRenderers_){if(!(t in e.layerStates)){e.postRenderFunctions.push(this.removeUnusedLayerRenderers_.bind(this));return}}};function Wt(e,t){return e.zIndex-t.zIndex}var Vt=Ht;var zt=function e(t){Vt.call(this,t);var r=t.getViewport();this.context_=Object(K["a"])();this.canvas_=this.context_.canvas;this.canvas_.style.width="100%";this.canvas_.style.height="100%";this.canvas_.style.display="block";this.canvas_.className=oe["e"];r.insertBefore(this.canvas_,r.childNodes[0]||null);this.renderedVisible_=true;this.transform_=Object(te["c"])()};Object(i["d"])(zt,Vt);zt.prototype.dispatchComposeEvent_=function(e,t){var r=this.getMap();var i=this.context_;if(r.hasListener(e)){var n=t.extent;var a=t.pixelRatio;var o=t.viewState;var s=o.rotation;var l=this.getTransform(t);var u=new jt(i,a,n,l,s);var c=new _t(e,u,t,i,null);r.dispatchEvent(c)}};zt.prototype.getTransform=function(e){var t=e.viewState;var r=this.canvas_.width/2;var i=this.canvas_.height/2;var n=e.pixelRatio/t.resolution;var a=-n;var o=-t.rotation;var s=-t.center[0];var l=-t.center[1];return Object(te["b"])(this.transform_,r,i,n,a,o,s,l)};zt.prototype.renderFrame=function(e){if(!e){if(this.renderedVisible_){this.canvas_.style.display="none";this.renderedVisible_=false}return}var t=this.context_;var r=e.pixelRatio;var i=Math.round(e.size[0]*r);var n=Math.round(e.size[1]*r);if(this.canvas_.width!=i||this.canvas_.height!=n){this.canvas_.width=i;this.canvas_.height=n}else{t.clearRect(0,0,i,n)}var a=e.viewState.rotation;this.calculateMatrices2D(e);this.dispatchComposeEvent_(bt["a"].PRECOMPOSE,e);var o=e.layerStatesArray;Object(x["l"])(o,Wt);if(a){t.save();Object(wt["s"])(t,a,i/2,n/2)}var s=e.viewState.resolution;var l=void 0,u=void 0,c=void 0,f=void 0,h=void 0;for(l=0,u=o.length;l<u;++l){h=o[l];c=h.layer;f=this.getLayerRenderer(c);if(!Object(se["b"])(h,s)||h.sourceState!=Pt["a"].READY){continue}if(f.prepareFrame(e,h)){f.composeFrame(e,h,t)}}if(a){t.restore()}this.dispatchComposeEvent_(bt["a"].POSTCOMPOSE,e);if(!this.renderedVisible_){this.canvas_.style.display="";this.renderedVisible_=true}this.scheduleRemoveUnusedLayerRenderers(e);this.scheduleExpireIconCache(e)};zt.prototype.forEachLayerAtPixel=function(e,t,r,i,n,a){var o=void 0;var s=t.viewState;var l=s.resolution;var u=t.layerStatesArray;var c=u.length;var f=Object(te["a"])(t.pixelToCoordinateTransform,e.slice());var h=void 0;for(h=c-1;h>=0;--h){var d=u[h];var p=d.layer;if(Object(se["b"])(d,l)&&n.call(a,p)){var v=this.getLayerRenderer(p);o=v.forEachLayerAtCoordinate(f,t,r,i);if(o){return o}}}return undefined};var qt=zt;var Bt=r(269);var Xt=function e(t){$t.call(this,t);this.context=this.context===null?null:Object(K["a"])();this.oversampling_;this.renderedExtent_=null;this.renderedRevision;this.renderedTiles=[];this.tmpExtent=Object(Z["j"])();this.tmpTileRange_=new Bt["b"](0,0,0,0);this.imageTransform_=Object(te["c"])();this.zDirection=0};Object(i["d"])(Xt,$t);Xt["handles"]=function(e){return e.getType()===gt["a"].TILE};Xt["create"]=function(e,t){return new Xt(t)};Xt.prototype.isDrawableTile_=function(e){var t=e.getState();var r=this.getLayer().getUseInterimTilesOnError();return t==F["a"].LOADED||t==F["a"].EMPTY||t==F["a"].ERROR&&!r};Xt.prototype.prepareFrame=function(e,t){var r=e.pixelRatio;var n=e.size;var a=e.viewState;var o=a.projection;var s=a.resolution;var l=a.center;var u=this.getLayer();var c=u.getSource();var f=c.getRevision();var h=c.getTileGridForProjection(o);var d=h.getZForResolution(s,this.zDirection);var p=h.getResolution(d);var v=Math.round(s/p)||1;var g=e.extent;if(t.extent!==undefined){g=Object(Z["B"])(g,t.extent)}if(Object(Z["H"])(g)){return false}var m=h.getTileRangeForExtentAndZ(g,d);var y=h.getTileRangeExtent(d,m);var _=c.getTilePixelRatio(r);var b={};b[d]={};var w=this.createLoadedTileFinder(c,o,b);var S=this.tmpExtent;var C=this.tmpTileRange_;var x=false;var O=void 0,T=void 0,E=void 0;for(T=m.minX;T<=m.maxX;++T){for(E=m.minY;E<=m.maxY;++E){O=c.getTile(d,T,E,r,o);if(O.getState()==F["a"].ERROR){if(!u.getUseInterimTilesOnError()){O.setState(F["a"].LOADED)}else if(u.getPreload()>0){x=true}}if(!this.isDrawableTile_(O)){O=O.getInterimTile()}if(this.isDrawableTile_(O)){var M=Object(i["c"])(this);if(O.getState()==F["a"].LOADED){b[d][O.tileCoord.toString()]=O;var j=O.inTransition(M);if(!x&&(j||this.renderedTiles.indexOf(O)===-1)){x=true}}if(O.getAlpha(M,e.time)===1){continue}}var A=h.getTileCoordChildTileRange(O.tileCoord,C,S);var P=false;if(A){P=w(d+1,A)}if(!P){h.forEachTileCoordParentTileRange(O.tileCoord,w,null,C,S)}}}var k=p*r/_*v;var I=e.viewHints;var D=I[X["a"].ANIMATING]||I[X["a"].INTERACTING];if(!(this.renderedResolution&&Date.now()-e.time>16&&D)&&(x||!(this.renderedExtent_&&Object(Z["g"])(this.renderedExtent_,g))||this.renderedRevision!=f||v!=this.oversampling_||!D&&k!=this.renderedResolution)){var R=this.context;if(R){var L=c.getTilePixelSize(d,r,o);var $=Math.round(m.getWidth()*L[0]/v);var N=Math.round(m.getHeight()*L[1]/v);var G=R.canvas;if(G.width!=$||G.height!=N){this.oversampling_=v;G.width=$;G.height=N}else{if(this.renderedExtent_&&!Object(Z["p"])(y,this.renderedExtent_)){R.clearRect(0,0,$,N)}v=this.oversampling_}}this.renderedTiles.length=0;var U=Object.keys(b).map(Number);U.sort(function(e,t){if(e===d){return 1}else if(t===d){return-1}else{return e>t?1:e<t?-1:0}});var H=void 0,Y=void 0,W=void 0,V=void 0,z=void 0,q=void 0;var B=void 0,K=void 0,Q=void 0,J=void 0,ee=void 0;for(z=0,q=U.length;z<q;++z){V=U[z];W=c.getTilePixelSize(V,r,o);H=h.getResolution(V);Y=H/p;K=_*c.getGutter(o);Q=b[V];for(var re in Q){O=Q[re];B=h.getTileCoordExtent(O.getTileCoord(),S);T=(B[0]-y[0])/p*_/v;E=(y[3]-B[3])/p*_/v;J=W[0]*Y/v;ee=W[1]*Y/v;this.drawTileImage(O,e,t,T,E,J,ee,K,d===V);this.renderedTiles.push(O)}}this.renderedRevision=f;this.renderedResolution=p*r/_*v;this.renderedExtent_=y}var ie=this.renderedResolution/s;var ne=Object(te["b"])(this.imageTransform_,r*n[0]/2,r*n[1]/2,ie,ie,0,(this.renderedExtent_[0]-l[0])/this.renderedResolution*r,(l[1]-this.renderedExtent_[3])/this.renderedResolution*r);Object(te["b"])(this.coordinateToCanvasPixelTransform,r*n[0]/2-ne[4],r*n[1]/2-ne[5],r/s,-r/s,0,-l[0],-l[1]);this.updateUsedTiles(e.usedTiles,c,d,m);this.manageTilePyramid(e,c,h,r,o,g,d,u.getPreload());this.scheduleExpireCache(e,c);return this.renderedTiles.length>0};Xt.prototype.drawTileImage=function(e,t,r,n,a,o,s,l,u){var c=e.getImage(this.getLayer());if(!c){return}var f=Object(i["c"])(this);var h=u?e.getAlpha(f,t.time):1;if(h===1&&!this.getLayer().getSource().getOpaque(t.viewState.projection)){this.context.clearRect(n,a,o,s)}var d=h!==this.context.globalAlpha;if(d){this.context.save();this.context.globalAlpha=h}this.context.drawImage(c,l,l,c.width-2*l,c.height-2*l,n,a,o,s);if(d){this.context.restore()}if(h!==1){t.animate=true}else if(u){e.endTransition(f)}};Xt.prototype.getImage=function(){var e=this.context;return e?e.canvas:null};Xt.prototype.getLayer;Xt.prototype.getImageTransform=function(){return this.imageTransform_};var Kt=Xt;var Zt=r(238);var Qt=r.n(Zt);var Jt=function e(){};Jt.prototype.getReplay=function(e,t){};Jt.prototype.isEmpty=function(){};var er=Jt;var tr={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};var rr=r(110);var ir=r(177);var nr=r(389);function ar(e,t,r,i,n,a,o,s){var l=[];var u=e[t]>e[r-i];var c=n.length;var f=e[t];var h=e[t+1];t+=i;var d=e[t];var p=e[t+1];var v=0;var g=Math.sqrt(Math.pow(d-f,2)+Math.pow(p-h,2));var m="";var y=0;var _=void 0,b=void 0,w=void 0;for(var S=0;S<c;++S){b=u?c-S-1:S;var C=n.charAt(b);m=u?C+m:m+C;var x=a(m)-y;y+=x;var O=o+x/2;while(t<r-i&&v+g<O){f=d;h=p;t+=i;d=e[t];p=e[t+1];v+=g;g=Math.sqrt(Math.pow(d-f,2)+Math.pow(p-h,2))}var T=O-v;var E=Math.atan2(p-h,d-f);if(u){E+=E>0?-Math.PI:Math.PI}if(w!==undefined){var M=E-w;M+=M>Math.PI?-2*Math.PI:M<-Math.PI?2*Math.PI:0;if(Math.abs(M)>s){return null}}var j=T/g;var A=Object(Be["c"])(f,d,j);var P=Object(Be["c"])(h,p,j);if(w==E){if(u){_[0]=A;_[1]=P;_[2]=x/2}_[4]=m}else{m=C;y=x;_=[A,P,x/2,E,m];if(u){l.unshift(_)}else{l.push(_)}w=E}o+=x}return l}var or={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12};var sr=[or.FILL];var lr=[or.STROKE];var ur=[or.BEGIN_PATH];var cr=[or.CLOSE_PATH];var fr=or;var hr=[tr.POLYGON,tr.CIRCLE,tr.LINE_STRING,tr.IMAGE,tr.TEXT,tr.DEFAULT];var dr={};dr["left"]=0;dr["end"]=0;dr["center"]=.5;dr["right"]=1;dr["start"]=1;dr["top"]=0;dr["middle"]=.5;dr["hanging"]=.2;dr["alphabetic"]=.8;dr["ideographic"]=.8;dr["bottom"]=1;var pr=function e(t,r,i,n,a,o){Et.call(this);this.declutterTree=o;this.tolerance=t;this.maxExtent=r;this.overlaps=a;this.pixelRatio=n;this.maxLineWidth=0;this.resolution=i;this.fillOrigin_;this.beginGeometryInstruction1_=null;this.beginGeometryInstruction2_=null;this.bufferedMaxExtent_=null;this.instructions=[];this.coordinates=[];this.coordinateCache_={};this.renderedTransform_=Object(te["c"])();this.hitDetectionInstructions=[];this.pixelCoordinates_=null;this.state={};this.viewRotation_=0};Object(i["d"])(pr,Et);var vr=Object(Z["j"])();var gr=Object(te["c"])();pr.prototype.replayTextBackground_=function(e,t,r,i,n,a,o){e.beginPath();e.moveTo.apply(e,t);e.lineTo.apply(e,r);e.lineTo.apply(e,i);e.lineTo.apply(e,n);e.lineTo.apply(e,t);if(a){this.fillOrigin_=a[2];this.fill_(e)}if(o){this.setStrokeStyle_(e,o);e.stroke()}};pr.prototype.replayImage_=function(e,t,r,i,n,a,o,s,l,u,c,f,h,d,p,v,g,m){var y=g||m;n*=h;a*=h;t-=n;r-=a;var _=p+u>i.width?i.width-u:p;var b=s+c>i.height?i.height-c:s;var w=v[3]+_*h+v[1];var S=v[0]+b*h+v[2];var C=t-v[3];var x=r-v[0];var O=void 0;var T=void 0;var E=void 0;var M=void 0;if(y||f!==0){O=[C,x];T=[C+w,x];E=[C+w,x+S];M=[C,x+S]}var j=null;if(f!==0){var A=t+n;var P=r+a;j=Object(te["b"])(gr,A,P,1,1,f,-A,-P);Object(Z["l"])(vr);Object(Z["r"])(vr,Object(te["a"])(gr,O));Object(Z["r"])(vr,Object(te["a"])(gr,T));Object(Z["r"])(vr,Object(te["a"])(gr,E));Object(Z["r"])(vr,Object(te["a"])(gr,M))}else{Object(Z["k"])(C,x,C+w,x+S,vr)}var k=e.canvas;var I=m?m[2]*h/2:0;var D=vr[0]-I<=k.width&&vr[2]+I>=0&&vr[1]-I<=k.height&&vr[3]+I>=0;if(d){t=Math.round(t);r=Math.round(r)}if(o){if(!D&&o[4]==1){return}Object(Z["q"])(o,vr);var R=D?[e,j?j.slice(0):null,l,i,u,c,_,b,t,r,h]:null;if(R&&y){R.push(g,m,O,T,E,M)}o.push(R)}else if(D){if(y){this.replayTextBackground_(e,O,T,E,M,g,m)}Object(wt["n"])(e,j,l,i,u,c,_,b,t,r,h)}};pr.prototype.applyPixelRatio=function(e){var t=this.pixelRatio;return t==1?e:e.map(function(e){return e*t})};pr.prototype.appendFlatCoordinates=function(e,t,r,i,n,a){var o=this.coordinates.length;var s=this.getBufferedMaxExtent();if(a){t+=i}var l=[e[t],e[t+1]];var u=[NaN,NaN];var c=true;var f=void 0,h=void 0,d=void 0;for(f=t+i;f<r;f+=i){u[0]=e[f];u[1]=e[f+1];d=Object(Z["i"])(s,u);if(d!==h){if(c){this.coordinates[o++]=l[0];this.coordinates[o++]=l[1]}this.coordinates[o++]=u[0];this.coordinates[o++]=u[1];c=false}else if(d===rr["a"].INTERSECTING){this.coordinates[o++]=u[0];this.coordinates[o++]=u[1];c=false}else{c=true}l[0]=u[0];l[1]=u[1];h=d}if(n&&c||f===t+i){this.coordinates[o++]=l[0];this.coordinates[o++]=l[1]}return o};pr.prototype.drawCustomCoordinates_=function(e,t,r,i,n){for(var a=0,o=r.length;a<o;++a){var s=r[a];var l=this.appendFlatCoordinates(e,t,s,i,false,false);n.push(l);t=s}return t};pr.prototype.drawCustom=function(e,t,r){this.beginGeometry(e,t);var i=e.getType();var n=e.getStride();var a=this.coordinates.length;var o=void 0,s=void 0,l=void 0,u=void 0;var c=void 0;if(i==Ct["a"].MULTI_POLYGON){e=e;o=e.getOrientedFlatCoordinates();u=[];var f=e.getEndss();c=0;for(var h=0,d=f.length;h<d;++h){var p=[];c=this.drawCustomCoordinates_(o,c,f[h],n,p);u.push(p)}this.instructions.push([fr.CUSTOM,a,u,e,r,ir["c"]])}else if(i==Ct["a"].POLYGON||i==Ct["a"].MULTI_LINE_STRING){l=[];o=i==Ct["a"].POLYGON?e.getOrientedFlatCoordinates():e.getFlatCoordinates();c=this.drawCustomCoordinates_(o,0,e.getEnds(),n,l);this.instructions.push([fr.CUSTOM,a,l,e,r,ir["b"]])}else if(i==Ct["a"].LINE_STRING||i==Ct["a"].MULTI_POINT){o=e.getFlatCoordinates();s=this.appendFlatCoordinates(o,0,o.length,n,false,false);this.instructions.push([fr.CUSTOM,a,s,e,r,ir["a"]])}else if(i==Ct["a"].POINT){o=e.getFlatCoordinates();this.coordinates.push(o[0],o[1]);s=this.coordinates.length;this.instructions.push([fr.CUSTOM,a,s,e,r])}this.endGeometry(e,t)};pr.prototype.beginGeometry=function(e,t){this.beginGeometryInstruction1_=[fr.BEGIN_GEOMETRY,t,0];this.instructions.push(this.beginGeometryInstruction1_);this.beginGeometryInstruction2_=[fr.BEGIN_GEOMETRY,t,0];this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)};pr.prototype.fill_=function(e){if(this.fillOrigin_){var t=Object(te["a"])(this.renderedTransform_,this.fillOrigin_.slice());e.translate(t[0],t[1]);e.rotate(this.viewRotation_)}e.fill();if(this.fillOrigin_){e.setTransform.apply(e,wt["r"])}};pr.prototype.setStrokeStyle_=function(e,t){e.strokeStyle=t[1];e.lineWidth=t[2];e.lineCap=t[3];e.lineJoin=t[4];e.miterLimit=t[5];if(s["a"]){e.lineDashOffset=t[7];e.setLineDash(t[6])}};pr.prototype.renderDeclutter_=function(e,t){if(e&&e.length>5){var r=e[4];if(r==1||r==e.length-5){var i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};if(!this.declutterTree.collides(i)){this.declutterTree.insert(i);for(var n=5,a=e.length;n<a;++n){var o=e[n];if(o){if(o.length>11){this.replayTextBackground_(o[0],o[13],o[14],o[15],o[16],o[11],o[12])}wt["n"].apply(undefined,o)}}}e.length=5;Object(Z["l"])(e)}}};pr.prototype.replay_=function(e,t,r,n,a,o){var s=void 0;if(this.pixelCoordinates_&&Object(x["b"])(t,this.renderedTransform_)){s=this.pixelCoordinates_}else{if(!this.pixelCoordinates_){this.pixelCoordinates_=[]}s=Object(Ot["c"])(this.coordinates,0,this.coordinates.length,2,t,this.pixelCoordinates_);Object(te["g"])(this.renderedTransform_,t)}var l=!Object(H["d"])(r);var u=0;var c=n.length;var f=0;var h=void 0;var d=void 0,p=void 0,v=void 0,g=void 0,m=void 0,y=void 0,_=void 0,b=void 0;var w=0;var S=0;var C=null;var O=null;var T=this.coordinateCache_;var E=this.viewRotation_;var M={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:E};var j=this.instructions!=n||this.overlaps?0:200;var A=void 0;var P=void 0,k=void 0;while(u<c){var I=n[u];var D=I[0];switch(D){case fr.BEGIN_GEOMETRY:A=I[1];if(l&&r[Object(i["c"])(A).toString()]||!A.getGeometry()){u=I[2]}else if(o!==undefined&&!Object(Z["F"])(o,A.getGeometry().getExtent())){u=I[2]+1}else{++u}break;case fr.BEGIN_PATH:if(w>j){this.fill_(e);w=0}if(S>j){e.stroke();S=0}if(!w&&!S){e.beginPath();v=g=NaN}++u;break;case fr.CIRCLE:f=I[1];var R=s[f];var L=s[f+1];var $=s[f+2];var N=s[f+3];var F=$-R;var G=N-L;var U=Math.sqrt(F*F+G*G);e.moveTo(R+U,L);e.arc(R,L,U,0,2*Math.PI,true);++u;break;case fr.CLOSE_PATH:e.closePath();++u;break;case fr.CUSTOM:f=I[1];h=I[2];var Y=I[3];var W=I[4];var V=I.length==6?I[5]:undefined;M.geometry=Y;M.feature=A;if(!(u in T)){T[u]=[]}var z=T[u];if(V){V(s,f,h,2,z)}else{z[0]=s[f];z[1]=s[f+1];z.length=2}W(z,M);++u;break;case fr.DRAW_IMAGE:f=I[1];h=I[2];b=I[3];d=I[4];p=I[5];_=a?null:I[6];var q=I[7];var B=I[8];var X=I[9];var K=I[10];var Q=I[11];var J=I[12];var ee=I[13];var re=I[14];var ie=I[15];var ne=void 0,ae=void 0,oe=void 0;if(I.length>16){ne=I[16];ae=I[17];oe=I[18]}else{ne=wt["j"];ae=oe=false}if(Q){J+=E}for(;f<h;f+=2){this.replayImage_(e,s[f],s[f+1],b,d,p,_,q,B,X,K,J,ee,re,ie,ne,ae?C:null,oe?O:null)}this.renderDeclutter_(_,A);++u;break;case fr.DRAW_CHARS:var se=I[1];var le=I[2];var ue=I[3];_=a?null:I[4];var ce=I[5];var fe=I[6];var he=I[7];var de=I[8];var pe=I[9];var ve=I[10];var ge=I[11];var me=I[12];var ye=I[13];var _e=I[14];var be=Object(nr["a"])(s,se,le,2);var we=de(me);if(ce||we<=be){var Se=this.textStates[ye].textAlign;var Ce=(be-we)*dr[Se];var xe=ar(s,se,le,2,me,de,Ce,he);if(xe){var Oe=void 0,Te=void 0,Ee=void 0,Me=void 0,je=void 0;if(ve){for(Oe=0,Te=xe.length;Oe<Te;++Oe){je=xe[Oe];Ee=je[4];Me=this.getImage(Ee,ye,"",ve);d=je[2]+ge;p=ue*Me.height+(.5-ue)*2*ge-pe;this.replayImage_(e,je[0],je[1],Me,d,p,_,Me.height,1,0,0,je[3],_e,false,Me.width,wt["j"],null,null)}}if(fe){for(Oe=0,Te=xe.length;Oe<Te;++Oe){je=xe[Oe];Ee=je[4];Me=this.getImage(Ee,ye,fe,"");d=je[2];p=ue*Me.height-pe;this.replayImage_(e,je[0],je[1],Me,d,p,_,Me.height,1,0,0,je[3],_e,false,Me.width,wt["j"],null,null)}}}}this.renderDeclutter_(_,A);++u;break;case fr.END_GEOMETRY:if(a!==undefined){A=I[1];var Ae=a(A);if(Ae){return Ae}}++u;break;case fr.FILL:if(j){w++}else{this.fill_(e)}++u;break;case fr.MOVE_TO_LINE_TO:f=I[1];h=I[2];P=s[f];k=s[f+1];m=P+.5|0;y=k+.5|0;if(m!==v||y!==g){e.moveTo(P,k);v=m;g=y}for(f+=2;f<h;f+=2){P=s[f];k=s[f+1];m=P+.5|0;y=k+.5|0;if(f==h-2||m!==v||y!==g){e.lineTo(P,k);v=m;g=y}}++u;break;case fr.SET_FILL_STYLE:C=I;this.fillOrigin_=I[2];if(w){this.fill_(e);w=0;if(S){e.stroke();S=0}}e.fillStyle=I[1];++u;break;case fr.SET_STROKE_STYLE:O=I;if(S){e.stroke();S=0}this.setStrokeStyle_(e,I);++u;break;case fr.STROKE:if(j){S++}else{e.stroke()}++u;break;default:++u;break}}if(w){this.fill_(e)}if(S){e.stroke()}return undefined};pr.prototype.replay=function(e,t,r,i){this.viewRotation_=r;this.replay_(e,t,i,this.instructions,undefined,undefined)};pr.prototype.replayHitDetection=function(e,t,r,i,n,a){this.viewRotation_=r;return this.replay_(e,t,i,this.hitDetectionInstructions,n,a)};pr.prototype.reverseHitDetectionInstructions=function(){var e=this.hitDetectionInstructions;e.reverse();var t=void 0;var r=e.length;var i=void 0;var n=void 0;var a=-1;for(t=0;t<r;++t){i=e[t];n=i[0];if(n==fr.END_GEOMETRY){a=t}else if(n==fr.BEGIN_GEOMETRY){i[2]=t;Object(x["k"])(this.hitDetectionInstructions,a,t);a=-1}}};pr.prototype.setFillStrokeStyle=function(e,t){var r=this.state;if(e){var i=e.getColor();r.fillStyle=Object(St["a"])(i?i:wt["b"])}else{r.fillStyle=undefined}if(t){var n=t.getColor();r.strokeStyle=Object(St["a"])(n?n:wt["k"]);var a=t.getLineCap();r.lineCap=a!==undefined?a:wt["d"];var o=t.getLineDash();r.lineDash=o?o.slice():wt["e"];var s=t.getLineDashOffset();r.lineDashOffset=s?s:wt["f"];var l=t.getLineJoin();r.lineJoin=l!==undefined?l:wt["g"];var u=t.getWidth();r.lineWidth=u!==undefined?u:wt["h"];var c=t.getMiterLimit();r.miterLimit=c!==undefined?c:wt["i"];if(r.lineWidth>this.maxLineWidth){this.maxLineWidth=r.lineWidth;this.bufferedMaxExtent_=null}}else{r.strokeStyle=undefined;r.lineCap=undefined;r.lineDash=null;r.lineDashOffset=undefined;r.lineJoin=undefined;r.lineWidth=undefined;r.miterLimit=undefined}};pr.prototype.createFill=function(e,t){var r=e.fillStyle;var i=[fr.SET_FILL_STYLE,r];if(typeof r!=="string"){var n=t.getExtent();i.push([n[0],n[3]])}return i};pr.prototype.applyStroke=function(e){this.instructions.push(this.createStroke(e))};pr.prototype.createStroke=function(e){return[fr.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]};pr.prototype.updateFillStyle=function(e,t,r){var i=e.fillStyle;if(typeof i!=="string"||e.currentFillStyle!=i){if(i!==undefined){this.instructions.push(t.call(this,e,r))}e.currentFillStyle=i}};pr.prototype.updateStrokeStyle=function(e,t){var r=e.strokeStyle;var i=e.lineCap;var n=e.lineDash;var a=e.lineDashOffset;var o=e.lineJoin;var s=e.lineWidth;var l=e.miterLimit;if(e.currentStrokeStyle!=r||e.currentLineCap!=i||n!=e.currentLineDash&&!Object(x["b"])(e.currentLineDash,n)||e.currentLineDashOffset!=a||e.currentLineJoin!=o||e.currentLineWidth!=s||e.currentMiterLimit!=l){if(r!==undefined){t.call(this,e)}e.currentStrokeStyle=r;e.currentLineCap=i;e.currentLineDash=n;e.currentLineDashOffset=a;e.currentLineJoin=o;e.currentLineWidth=s;e.currentMiterLimit=l}};pr.prototype.endGeometry=function(e,t){this.beginGeometryInstruction1_[2]=this.instructions.length;this.beginGeometryInstruction1_=null;this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length;this.beginGeometryInstruction2_=null;var r=[fr.END_GEOMETRY,t];this.instructions.push(r);this.hitDetectionInstructions.push(r)};pr.prototype.finish=Q["c"];pr.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_){this.bufferedMaxExtent_=Object(Z["d"])(this.maxExtent);if(this.maxLineWidth>0){var e=this.resolution*(this.maxLineWidth+1)/2;Object(Z["c"])(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}}return this.bufferedMaxExtent_};var mr=pr;var yr=function e(t,r,i,n,a,o){mr.call(this,t,r,i,n,a,o);this.declutterGroup_=null;this.hitDetectionImage_=null;this.image_=null;this.anchorX_=undefined;this.anchorY_=undefined;this.height_=undefined;this.opacity_=undefined;this.originX_=undefined;this.originY_=undefined;this.rotateWithView_=undefined;this.rotation_=undefined;this.scale_=undefined;this.snapToPixel_=undefined;this.width_=undefined};Object(i["d"])(yr,mr);yr.prototype.drawCoordinates_=function(e,t,r,i){return this.appendFlatCoordinates(e,t,r,i,false,false)};yr.prototype.drawPoint=function(e,t){if(!this.image_){return}this.beginGeometry(e,t);var r=e.getFlatCoordinates();var i=e.getStride();var n=this.coordinates.length;var a=this.drawCoordinates_(r,0,r.length,i);this.instructions.push([fr.DRAW_IMAGE,n,a,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.snapToPixel_,this.width_]);this.hitDetectionInstructions.push([fr.DRAW_IMAGE,n,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]);this.endGeometry(e,t)};yr.prototype.drawMultiPoint=function(e,t){if(!this.image_){return}this.beginGeometry(e,t);var r=e.getFlatCoordinates();var i=e.getStride();var n=this.coordinates.length;var a=this.drawCoordinates_(r,0,r.length,i);this.instructions.push([fr.DRAW_IMAGE,n,a,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.snapToPixel_,this.width_]);this.hitDetectionInstructions.push([fr.DRAW_IMAGE,n,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]);this.endGeometry(e,t)};yr.prototype.finish=function(){this.reverseHitDetectionInstructions();this.anchorX_=undefined;this.anchorY_=undefined;this.hitDetectionImage_=null;this.image_=null;this.height_=undefined;this.scale_=undefined;this.opacity_=undefined;this.originX_=undefined;this.originY_=undefined;this.rotateWithView_=undefined;this.rotation_=undefined;this.snapToPixel_=undefined;this.width_=undefined};yr.prototype.setImageStyle=function(e,t){var r=e.getAnchor();var i=e.getSize();var n=e.getHitDetectionImage(1);var a=e.getImage(1);var o=e.getOrigin();this.anchorX_=r[0];this.anchorY_=r[1];this.declutterGroup_=t;this.hitDetectionImage_=n;this.image_=a;this.height_=i[1];this.opacity_=e.getOpacity();this.originX_=o[0];this.originY_=o[1];this.rotateWithView_=e.getRotateWithView();this.rotation_=e.getRotation();this.scale_=e.getScale();this.snapToPixel_=e.getSnapToPixel();this.width_=i[0]};var _r=yr;var br=function e(t,r,i,n,a,o){mr.call(this,t,r,i,n,a,o)};Object(i["d"])(br,mr);br.prototype.drawFlatCoordinates_=function(e,t,r,i){var n=this.coordinates.length;var a=this.appendFlatCoordinates(e,t,r,i,false,false);var o=[fr.MOVE_TO_LINE_TO,n,a];this.instructions.push(o);this.hitDetectionInstructions.push(o);return r};br.prototype.drawLineString=function(e,t){var r=this.state;var i=r.strokeStyle;var n=r.lineWidth;if(i===undefined||n===undefined){return}this.updateStrokeStyle(r,this.applyStroke);this.beginGeometry(e,t);this.hitDetectionInstructions.push([fr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset],ur);var a=e.getFlatCoordinates();var o=e.getStride();this.drawFlatCoordinates_(a,0,a.length,o);this.hitDetectionInstructions.push(lr);this.endGeometry(e,t)};br.prototype.drawMultiLineString=function(e,t){var r=this.state;var i=r.strokeStyle;var n=r.lineWidth;if(i===undefined||n===undefined){return}this.updateStrokeStyle(r,this.applyStroke);this.beginGeometry(e,t);this.hitDetectionInstructions.push([fr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset],ur);var a=e.getEnds();var o=e.getFlatCoordinates();var s=e.getStride();var l=0;for(var u=0,c=a.length;u<c;++u){l=this.drawFlatCoordinates_(o,l,a[u],s)}this.hitDetectionInstructions.push(lr);this.endGeometry(e,t)};br.prototype.finish=function(){var e=this.state;if(e.lastStroke!=undefined&&e.lastStroke!=this.coordinates.length){this.instructions.push(lr)}this.reverseHitDetectionInstructions();this.state=null};br.prototype.applyStroke=function(e){if(e.lastStroke!=undefined&&e.lastStroke!=this.coordinates.length){this.instructions.push(lr);e.lastStroke=this.coordinates.length}e.lastStroke=0;mr.prototype.applyStroke.call(this,e);this.instructions.push(ur)};var wr=br;var Sr=r(116);var Cr=r(246);var xr=function e(t,r,i,n,a,o){mr.call(this,t,r,i,n,a,o)};Object(i["d"])(xr,mr);xr.prototype.drawFlatCoordinatess_=function(e,t,r,i){var n=this.state;var a=n.fillStyle!==undefined;var o=n.strokeStyle!=undefined;var s=r.length;this.instructions.push(ur);this.hitDetectionInstructions.push(ur);for(var l=0;l<s;++l){var u=r[l];var c=this.coordinates.length;var f=this.appendFlatCoordinates(e,t,u,i,true,!o);var h=[fr.MOVE_TO_LINE_TO,c,f];this.instructions.push(h);this.hitDetectionInstructions.push(h);if(o){this.instructions.push(cr);this.hitDetectionInstructions.push(cr)}t=u}this.hitDetectionInstructions.push(sr);if(a){this.instructions.push(sr)}if(o){this.instructions.push(lr);this.hitDetectionInstructions.push(lr)}return t};xr.prototype.drawCircle=function(e,t){var r=this.state;var i=r.fillStyle;var n=r.strokeStyle;if(i===undefined&&n===undefined){return}this.setFillStrokeStyles_(e);this.beginGeometry(e,t);this.hitDetectionInstructions.push([fr.SET_FILL_STYLE,Object(Sr["b"])(wt["b"])]);if(r.strokeStyle!==undefined){this.hitDetectionInstructions.push([fr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset])}var a=e.getFlatCoordinates();var o=e.getStride();var s=this.coordinates.length;this.appendFlatCoordinates(a,0,a.length,o,false,false);var l=[fr.CIRCLE,s];this.instructions.push(ur,l);this.hitDetectionInstructions.push(ur,l);this.hitDetectionInstructions.push(sr);if(r.fillStyle!==undefined){this.instructions.push(sr)}if(r.strokeStyle!==undefined){this.instructions.push(lr);this.hitDetectionInstructions.push(lr)}this.endGeometry(e,t)};xr.prototype.drawPolygon=function(e,t){var r=this.state;this.setFillStrokeStyles_(e);this.beginGeometry(e,t);this.hitDetectionInstructions.push([fr.SET_FILL_STYLE,Object(Sr["b"])(wt["b"])]);if(r.strokeStyle!==undefined){this.hitDetectionInstructions.push([fr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset])}var i=e.getEnds();var n=e.getOrientedFlatCoordinates();var a=e.getStride();this.drawFlatCoordinatess_(n,0,i,a);this.endGeometry(e,t)};xr.prototype.drawMultiPolygon=function(e,t){var r=this.state;var i=r.fillStyle;var n=r.strokeStyle;if(i===undefined&&n===undefined){return}this.setFillStrokeStyles_(e);this.beginGeometry(e,t);this.hitDetectionInstructions.push([fr.SET_FILL_STYLE,Object(Sr["b"])(wt["b"])]);if(r.strokeStyle!==undefined){this.hitDetectionInstructions.push([fr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset])}var a=e.getEndss();var o=e.getOrientedFlatCoordinates();var s=e.getStride();var l=0;for(var u=0,c=a.length;u<c;++u){l=this.drawFlatCoordinatess_(o,l,a[u],s)}this.endGeometry(e,t)};xr.prototype.finish=function(){this.reverseHitDetectionInstructions();this.state=null;var e=this.tolerance;if(e!==0){var t=this.coordinates;for(var r=0,i=t.length;r<i;++r){t[r]=Object(Cr["e"])(t[r],e)}}};xr.prototype.setFillStrokeStyles_=function(e){var t=this.state;var r=t.fillStyle;if(r!==undefined){this.updateFillStyle(t,this.createFill,e)}if(t.strokeStyle!==undefined){this.updateStrokeStyle(t,this.applyStroke)}};var Or=xr;function Tr(e,t,r,i,n){var a=r;var o=r;var s=0;var l=0;var u=r;var c=void 0,f=void 0,h=void 0,d=void 0,p=void 0,v=void 0,g=void 0,m=void 0,y=void 0,_=void 0;for(f=r;f<i;f+=n){var b=t[f];var w=t[f+1];if(p!==undefined){y=b-p;_=w-v;d=Math.sqrt(y*y+_*_);if(g!==undefined){l+=h;c=Math.acos((g*y+m*_)/(h*d));if(c>e){if(l>s){s=l;a=u;o=f}l=0;u=f-n}}h=d;g=y;m=_}p=b;v=w}l+=d;return l>s?[u,f]:[a,o]}var Er=r(386);var Mr=function e(t,r,i,n,a,o){mr.call(this,t,r,i,n,a,o);this.declutterGroup_;this.labels_=null;this.text_="";this.textOffsetX_=0;this.textOffsetY_=0;this.textRotateWithView_=undefined;this.textRotation_=0;this.textFillState_=null;this.fillStates={};this.textStrokeState_=null;this.strokeStates={};this.textState_={};this.textStates={};this.textKey_="";this.fillKey_="";this.strokeKey_="";this.widths_={};wt["o"].prune()};Object(i["d"])(Mr,mr);function jr(e,t,r){var i=t.length;var n=0;for(var a=0;a<i;++a){var o=Object(wt["q"])(e,t[a]);n=Math.max(n,o);r.push(o)}return n}Mr.prototype.drawText=function(e,t){var r=this.textFillState_;var i=this.textStrokeState_;var n=this.textState_;if(this.text_===""||!n||!r&&!i){return}var a=this.coordinates.length;var o=e.getType();var s=null;var l=2;var u=2;var c=void 0,f=void 0;if(n.placement===Er["a"].LINE){if(!Object(Z["F"])(this.getBufferedMaxExtent(),e.getExtent())){return}var h=void 0;s=e.getFlatCoordinates();u=e.getStride();if(o==Ct["a"].LINE_STRING){h=[s.length]}else if(o==Ct["a"].MULTI_LINE_STRING){h=e.getEnds()}else if(o==Ct["a"].POLYGON){h=e.getEnds().slice(0,1)}else if(o==Ct["a"].MULTI_POLYGON){var d=e.getEndss();h=[];for(c=0,f=d.length;c<f;++c){h.push(d[c][0])}}this.beginGeometry(e,t);var p=n.textAlign;var v=0;var g=void 0;for(var m=0,y=h.length;m<y;++m){if(p==undefined){var _=Tr(n.maxAngle,s,v,h[m],u);v=_[0];g=_[1]}else{g=h[m]}for(c=v;c<g;c+=u){this.coordinates.push(s[c],s[c+1])}l=this.coordinates.length;v=h[m];this.drawChars_(a,l,this.declutterGroup_);a=l}this.endGeometry(e,t)}else{var b=this.getImage(this.text_,this.textKey_,this.fillKey_,this.strokeKey_);var w=b.width/this.pixelRatio;switch(o){case Ct["a"].POINT:case Ct["a"].MULTI_POINT:s=e.getFlatCoordinates();l=s.length;break;case Ct["a"].LINE_STRING:s=e.getFlatMidpoint();break;case Ct["a"].CIRCLE:s=e.getCenter();break;case Ct["a"].MULTI_LINE_STRING:s=e.getFlatMidpoints();l=s.length;break;case Ct["a"].POLYGON:s=e.getFlatInteriorPoint();if(!n.overflow&&s[2]/this.resolution<w){return}u=3;break;case Ct["a"].MULTI_POLYGON:var S=e.getFlatInteriorPoints();s=[];for(c=0,f=S.length;c<f;c+=3){if(n.overflow||S[c+2]/this.resolution>=w){s.push(S[c],S[c+1])}}l=s.length;if(l==0){return}break;default:}l=this.appendFlatCoordinates(s,0,l,u,false,false);this.beginGeometry(e,t);if(n.backgroundFill||n.backgroundStroke){this.setFillStrokeStyle(n.backgroundFill,n.backgroundStroke);this.updateFillStyle(this.state,this.createFill,e);this.hitDetectionInstructions.push(this.createFill(this.state,e));this.updateStrokeStyle(this.state,this.applyStroke);this.hitDetectionInstructions.push(this.createStroke(this.state))}this.drawTextImage_(b,a,l);this.endGeometry(e,t)}};Mr.prototype.getImage=function(e,t,r,i){var n=void 0;var a=i+t+e+r+this.pixelRatio;if(!wt["o"].containsKey(a)){var o=i?this.strokeStates[i]||this.textStrokeState_:null;var l=r?this.fillStates[r]||this.textFillState_:null;var u=this.textStates[t]||this.textState_;var c=this.pixelRatio;var f=u.scale*c;var h=dr[u.textAlign||wt["l"]];var d=i&&o.lineWidth?o.lineWidth:0;var p=e.split("\n");var v=p.length;var g=[];var m=jr(u.font,p,g);var y=Object(wt["p"])(u.font);var _=y*v;var b=m+d;var w=Object(K["a"])(Math.ceil(b*f),Math.ceil((_+d)*f));n=w.canvas;wt["o"].set(a,n);if(f!=1){w.scale(f,f)}w.font=u.font;if(i){w.strokeStyle=o.strokeStyle;w.lineWidth=d*(s["g"]?f:1);w.lineCap=o.lineCap;w.lineJoin=o.lineJoin;w.miterLimit=o.miterLimit;if(s["a"]&&o.lineDash.length){w.setLineDash(o.lineDash);w.lineDashOffset=o.lineDashOffset}}if(r){w.fillStyle=l.fillStyle}w.textBaseline="middle";w.textAlign="center";var S=.5-h;var C=h*n.width/f+S*d;var x=void 0;if(i){for(x=0;x<v;++x){w.strokeText(p[x],C+S*g[x],.5*(d+y)+x*y)}}if(r){for(x=0;x<v;++x){w.fillText(p[x],C+S*g[x],.5*(d+y)+x*y)}}}return wt["o"].get(a)};Mr.prototype.drawTextImage_=function(e,t,r){var i=this.textState_;var n=this.textStrokeState_;var a=this.pixelRatio;var o=dr[i.textAlign||wt["l"]];var s=dr[i.textBaseline];var l=n&&n.lineWidth?n.lineWidth:0;var u=o*e.width/a+2*(.5-o)*l;var c=s*e.height/a+2*(.5-s)*l;this.instructions.push([fr.DRAW_IMAGE,t,r,e,(u-this.textOffsetX_)*a,(c-this.textOffsetY_)*a,this.declutterGroup_,e.height,1,0,0,this.textRotateWithView_,this.textRotation_,1,true,e.width,i.padding==wt["j"]?wt["j"]:i.padding.map(function(e){return e*a}),!!i.backgroundFill,!!i.backgroundStroke]);this.hitDetectionInstructions.push([fr.DRAW_IMAGE,t,r,e,(u-this.textOffsetX_)*a,(c-this.textOffsetY_)*a,this.declutterGroup_,e.height,1,0,0,this.textRotateWithView_,this.textRotation_,1/a,true,e.width,i.padding,!!i.backgroundFill,!!i.backgroundStroke])};Mr.prototype.drawChars_=function(e,t,r){var i=this.textStrokeState_;var n=this.textState_;var a=this.textFillState_;var o=this.strokeKey_;if(i){if(!(o in this.strokeStates)){this.strokeStates[o]={strokeStyle:i.strokeStyle,lineCap:i.lineCap,lineDashOffset:i.lineDashOffset,lineWidth:i.lineWidth,lineJoin:i.lineJoin,miterLimit:i.miterLimit,lineDash:i.lineDash}}}var s=this.textKey_;if(!(this.textKey_ in this.textStates)){this.textStates[this.textKey_]={font:n.font,textAlign:n.textAlign||wt["l"],scale:n.scale}}var l=this.fillKey_;if(a){if(!(l in this.fillStates)){this.fillStates[l]={fillStyle:a.fillStyle}}}var u=this.pixelRatio;var c=dr[n.textBaseline];var f=this.textOffsetY_*u;var h=this.text_;var d=n.font;var p=n.scale;var v=i?i.lineWidth*p/2:0;var g=this.widths_[d];if(!g){this.widths_[d]=g={}}this.instructions.push([fr.DRAW_CHARS,e,t,c,r,n.overflow,l,n.maxAngle,function(e){var t=g[e];if(!t){t=g[e]=Object(wt["q"])(d,e)}return t*p*u},f,o,v*u,h,s,1]);this.hitDetectionInstructions.push([fr.DRAW_CHARS,e,t,c,r,n.overflow,l,n.maxAngle,function(e){var t=g[e];if(!t){t=g[e]=Object(wt["q"])(d,e)}return t*p},f,o,v,h,s,1/u])};Mr.prototype.setTextStyle=function(e,t){var r=void 0,n=void 0,a=void 0;if(!e){this.text_=""}else{this.declutterGroup_=t;var o=e.getFill();if(!o){n=this.textFillState_=null}else{n=this.textFillState_;if(!n){n=this.textFillState_={}}n.fillStyle=Object(St["a"])(o.getColor()||wt["b"])}var s=e.getStroke();if(!s){a=this.textStrokeState_=null}else{a=this.textStrokeState_;if(!a){a=this.textStrokeState_={}}var l=s.getLineDash();var u=s.getLineDashOffset();var c=s.getWidth();var f=s.getMiterLimit();a.lineCap=s.getLineCap()||wt["d"];a.lineDash=l?l.slice():wt["e"];a.lineDashOffset=u===undefined?wt["f"]:u;a.lineJoin=s.getLineJoin()||wt["g"];a.lineWidth=c===undefined?wt["h"]:c;a.miterLimit=f===undefined?wt["i"]:f;a.strokeStyle=Object(St["a"])(s.getColor()||wt["k"])}r=this.textState_;var h=e.getFont()||wt["c"];Object(wt["a"])(h);var d=e.getScale();r.overflow=e.getOverflow();r.font=h;r.maxAngle=e.getMaxAngle();r.placement=e.getPlacement();r.textAlign=e.getTextAlign();r.textBaseline=e.getTextBaseline()||wt["m"];r.backgroundFill=e.getBackgroundFill();r.backgroundStroke=e.getBackgroundStroke();r.padding=e.getPadding()||wt["j"];r.scale=d===undefined?1:d;var p=e.getOffsetX();var v=e.getOffsetY();var g=e.getRotateWithView();var m=e.getRotation();this.text_=e.getText()||"";this.textOffsetX_=p===undefined?0:p;this.textOffsetY_=v===undefined?0:v;this.textRotateWithView_=g===undefined?false:g;this.textRotation_=m===undefined?0:m;this.strokeKey_=a?(typeof a.strokeStyle=="string"?a.strokeStyle:Object(i["c"])(a.strokeStyle))+a.lineCap+a.lineDashOffset+"|"+a.lineWidth+a.lineJoin+a.miterLimit+"["+a.lineDash.join()+"]":"";this.textKey_=r.font+r.scale+(r.textAlign||"?");this.fillKey_=n?typeof n.fillStyle=="string"?n.fillStyle:"|"+Object(i["c"])(n.fillStyle):""}};var Ar=Mr;var Pr={Circle:Or,Default:mr,Image:_r,LineString:wr,Polygon:Or,Text:Ar};var kr=function e(t,r,i,n,a,o,s){er.call(this);this.declutterTree_=o;this.declutterGroup_=null;this.tolerance_=t;this.maxExtent_=r;this.overlaps_=a;this.pixelRatio_=n;this.resolution_=i;this.renderBuffer_=s;this.replaysByZIndex_={};this.hitDetectionContext_=Object(K["a"])(1,1);this.hitDetectionTransform_=Object(te["c"])()};Object(i["d"])(kr,er);var Ir={0:[[true]]};function Dr(e,t,r){var i=void 0;var n=Math.floor(e.length/2);if(t>=n){for(i=n;i<t;i++){e[i][r]=true}}else if(t<n){for(i=t+1;i<n;i++){e[i][r]=true}}}function Rr(e){if(Ir[e]!==undefined){return Ir[e]}var t=e*2+1;var r=new Array(t);for(var i=0;i<t;i++){r[i]=new Array(t)}var n=e;var a=0;var o=0;while(n>=a){Dr(r,e+n,e+a);Dr(r,e+a,e+n);Dr(r,e-a,e+n);Dr(r,e-n,e+a);Dr(r,e-n,e-a);Dr(r,e-a,e-n);Dr(r,e+a,e-n);Dr(r,e+n,e-a);a++;o+=1+2*a;if(2*(o-n)+1>0){n-=1;o+=1-2*n}}Ir[e]=r;return r}function Lr(e,t,r){var i=Object.keys(e).map(Number).sort(x["i"]);var n={};for(var a=0,o=i.length;a<o;++a){var s=e[i[a].toString()];for(var l=0,u=s.length;l<u;){var c=s[l++];var f=s[l++];c.replay(t,f,r,n)}}}kr.prototype.addDeclutter=function(e){var t=null;if(this.declutterTree_){if(e){t=this.declutterGroup_;t[4]++}else{t=this.declutterGroup_=Object(Z["j"])();t.push(1)}}return t};kr.prototype.clip=function(e,t){var r=this.getClipCoords(t);e.beginPath();e.moveTo(r[0],r[1]);e.lineTo(r[2],r[3]);e.lineTo(r[4],r[5]);e.lineTo(r[6],r[7]);e.clip()};kr.prototype.hasReplays=function(e){for(var t in this.replaysByZIndex_){var r=this.replaysByZIndex_[t];for(var i=0,n=e.length;i<n;++i){if(e[i]in r){return true}}}return false};kr.prototype.finish=function(){for(var e in this.replaysByZIndex_){var t=this.replaysByZIndex_[e];for(var r in t){t[r].finish()}}};kr.prototype.forEachFeatureAtCoordinate=function(e,t,r,i,n,a,o){i=Math.round(i);var s=i*2+1;var l=Object(te["b"])(this.hitDetectionTransform_,i+.5,i+.5,1/t,-1/t,-r,-e[0],-e[1]);var u=this.hitDetectionContext_;if(u.canvas.width!==s||u.canvas.height!==s){u.canvas.width=s;u.canvas.height=s}else{u.clearRect(0,0,s,s)}var c=void 0;if(this.renderBuffer_!==undefined){c=Object(Z["j"])();Object(Z["r"])(c,e);Object(Z["c"])(c,t*(this.renderBuffer_+i),c)}var f=Rr(i);var h=void 0;if(this.declutterTree_){h=this.declutterTree_.all().map(function(e){return e.value})}var d=void 0;function p(e){var t=u.getImageData(0,0,s,s).data;for(var r=0;r<s;r++){for(var i=0;i<s;i++){if(f[r][i]){if(t[(i*s+r)*4+3]>0){var n=void 0;if(!(h&&(d==tr.IMAGE||d==tr.TEXT))||h.indexOf(e)!==-1){n=a(e)}if(n){return n}else{u.clearRect(0,0,s,s);return undefined}}}}}}var v=Object.keys(this.replaysByZIndex_).map(Number);v.sort(x["i"]);var g=void 0,m=void 0,y=void 0,_=void 0,b=void 0;for(g=v.length-1;g>=0;--g){var w=v[g].toString();y=this.replaysByZIndex_[w];for(m=hr.length-1;m>=0;--m){d=hr[m];_=y[d];if(_!==undefined){if(o&&(d==tr.IMAGE||d==tr.TEXT)){var S=o[w];if(!S){o[w]=[_,l.slice(0)]}else{S.push(_,l.slice(0))}}else{b=_.replayHitDetection(u,l,r,n,p,c);if(b){return b}}}}}return undefined};kr.prototype.getClipCoords=function(e){var t=this.maxExtent_;var r=t[0];var i=t[1];var n=t[2];var a=t[3];var o=[r,i,r,a,n,a,n,i];Object(Ot["c"])(o,0,8,2,e,o);return o};kr.prototype.getReplay=function(e,t){var r=e!==undefined?e.toString():"0";var i=this.replaysByZIndex_[r];if(i===undefined){i={};this.replaysByZIndex_[r]=i}var n=i[t];if(n===undefined){var a=Pr[t];n=new a(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_,this.overlaps_,this.declutterTree_);i[t]=n}return n};kr.prototype.getReplays=function(){return this.replaysByZIndex_};kr.prototype.isEmpty=function(){return Object(H["d"])(this.replaysByZIndex_)};kr.prototype.replay=function(e,t,r,i,n,a){var o=Object.keys(this.replaysByZIndex_).map(Number);o.sort(x["i"]);e.save();this.clip(e,t);var s=n?n:hr;var l=void 0,u=void 0,c=void 0,f=void 0,h=void 0,d=void 0;for(l=0,u=o.length;l<u;++l){var p=o[l].toString();h=this.replaysByZIndex_[p];for(c=0,f=s.length;c<f;++c){var v=s[c];d=h[v];if(d!==undefined){if(a&&(v==tr.IMAGE||v==tr.TEXT)){var g=a[p];if(!g){a[p]=[d,t.slice(0)]}else{g.push(d,t.slice(0))}}else{d.replay(e,t,r,i)}}}}e.restore()};var $r=kr;var Nr=.5;var Fr={Point:Zr,LineString:Br,Polygon:Jr,MultiPoint:Qr,MultiLineString:Xr,MultiPolygon:Kr,GeometryCollection:qr,Circle:Yr};function Gr(e,t){return Object(i["c"])(e)-Object(i["c"])(t)}function Ur(e,t){var r=Hr(e,t);return r*r}function Hr(e,t){return Nr*e/t}function Yr(e,t,r,i){var n=r.getFill();var a=r.getStroke();if(n||a){var o=e.getReplay(r.getZIndex(),tr.CIRCLE);o.setFillStrokeStyle(n,a);o.drawCircle(t,i)}var s=r.getText();if(s){var l=e.getReplay(r.getZIndex(),tr.TEXT);l.setTextStyle(s,e.addDeclutter(false));l.drawText(t,i)}}function Wr(e,t,r,i,n,a){var o=false;var s=r.getImage();if(s){var l=s.getImageState();if(l==dt["a"].LOADED||l==dt["a"].ERROR){s.unlistenImageChange(n,a)}else{if(l==dt["a"].IDLE){s.load()}l=s.getImageState();s.listenImageChange(n,a);o=true}}Vr(e,t,r,i);return o}function Vr(e,t,r,i){var n=r.getGeometryFunction()(t);if(!n){return}var a=n.getSimplifiedGeometry(i);var o=r.getRenderer();if(o){zr(e,a,r,t)}else{var s=Fr[a.getType()];s(e,a,r,t)}}function zr(e,t,r,i){if(t.getType()==Ct["a"].GEOMETRY_COLLECTION){var n=t.getGeometries();for(var a=0,o=n.length;a<o;++a){zr(e,n[a],r,i)}return}var s=e.getReplay(r.getZIndex(),tr.DEFAULT);s.drawCustom(t,i,r.getRenderer())}function qr(e,t,r,i){var n=t.getGeometriesArray();var a=void 0,o=void 0;for(a=0,o=n.length;a<o;++a){var s=Fr[n[a].getType()];s(e,n[a],r,i)}}function Br(e,t,r,i){var n=r.getStroke();if(n){var a=e.getReplay(r.getZIndex(),tr.LINE_STRING);a.setFillStrokeStyle(null,n);a.drawLineString(t,i)}var o=r.getText();if(o){var s=e.getReplay(r.getZIndex(),tr.TEXT);s.setTextStyle(o,e.addDeclutter(false));s.drawText(t,i)}}function Xr(e,t,r,i){var n=r.getStroke();if(n){var a=e.getReplay(r.getZIndex(),tr.LINE_STRING);a.setFillStrokeStyle(null,n);a.drawMultiLineString(t,i)}var o=r.getText();if(o){var s=e.getReplay(r.getZIndex(),tr.TEXT);s.setTextStyle(o,e.addDeclutter(false));s.drawText(t,i)}}function Kr(e,t,r,i){var n=r.getFill();var a=r.getStroke();if(a||n){var o=e.getReplay(r.getZIndex(),tr.POLYGON);o.setFillStrokeStyle(n,a);o.drawMultiPolygon(t,i)}var s=r.getText();if(s){var l=e.getReplay(r.getZIndex(),tr.TEXT);l.setTextStyle(s,e.addDeclutter(false));l.drawText(t,i)}}function Zr(e,t,r,i){var n=r.getImage();if(n){if(n.getImageState()!=dt["a"].LOADED){return}var a=e.getReplay(r.getZIndex(),tr.IMAGE);a.setImageStyle(n,e.addDeclutter(false));a.drawPoint(t,i)}var o=r.getText();if(o){var s=e.getReplay(r.getZIndex(),tr.TEXT);s.setTextStyle(o,e.addDeclutter(!!n));s.drawText(t,i)}}function Qr(e,t,r,i){var n=r.getImage();if(n){if(n.getImageState()!=dt["a"].LOADED){return}var a=e.getReplay(r.getZIndex(),tr.IMAGE);a.setImageStyle(n,e.addDeclutter(false));a.drawMultiPoint(t,i)}var o=r.getText();if(o){var s=e.getReplay(r.getZIndex(),tr.TEXT);s.setTextStyle(o,e.addDeclutter(!!n));s.drawText(t,i)}}function Jr(e,t,r,i){var n=r.getFill();var a=r.getStroke();if(n||a){var o=e.getReplay(r.getZIndex(),tr.POLYGON);o.setFillStrokeStyle(n,a);o.drawPolygon(t,i)}var s=r.getText();if(s){var l=e.getReplay(r.getZIndex(),tr.TEXT);l.setTextStyle(s,e.addDeclutter(false));l.drawText(t,i)}}var ei=function e(t){Rt.call(this,t);this.declutterTree_=t.getDeclutter()?Qt()(9):null;this.dirty_=false;this.renderedRevision_=-1;this.renderedResolution_=NaN;this.renderedExtent_=Object(Z["j"])();this.renderedRenderOrder_=null;this.replayGroup_=null;this.replayGroupChanged=true;this.context=Object(K["a"])();Object(c["a"])(wt["o"],G["a"].CLEAR,this.handleFontsChanged_,this)};Object(i["d"])(ei,Rt);ei["handles"]=function(e){return e.getType()===gt["a"].VECTOR};ei["create"]=function(e,t){return new ei(t)};ei.prototype.disposeInternal=function(){Object(c["c"])(wt["o"],G["a"].CLEAR,this.handleFontsChanged_,this);Rt.prototype.disposeInternal.call(this)};ei.prototype.composeFrame=function(e,t,r){var i=e.extent;var n=e.pixelRatio;var a=t.managed?e.skippedFeatureUids:{};var o=e.viewState;var s=o.projection;var l=o.rotation;var u=s.getExtent();var c=this.getLayer().getSource();var f=this.getTransform(e,0);this.preCompose(r,e,f);var h=t.extent;var d=h!==undefined;if(d){this.clip(r,e,h)}var p=this.replayGroup_;if(p&&!p.isEmpty()){if(this.declutterTree_){this.declutterTree_.clear()}var v=this.getLayer();var g=0;var m=0;var y=void 0;var _=t.opacity!==1;var b=v.hasListener(bt["a"].RENDER);if(_||b){var w=r.canvas.width;var S=r.canvas.height;if(l){var C=Math.round(Math.sqrt(w*w+S*S));g=(C-w)/2;m=(C-S)/2;w=S=C}this.context.canvas.width=w;this.context.canvas.height=S;y=this.context}else{y=r}var x=y.globalAlpha;if(!_){y.globalAlpha=t.opacity}if(y!=r){y.translate(g,m)}var O=e.size[0]*n;var T=e.size[1]*n;Object(wt["s"])(y,-l,O/2,T/2);p.replay(y,f,l,a);if(c.getWrapX()&&s.canWrapX()&&!Object(Z["g"])(u,i)){var E=i[0];var M=Object(Z["E"])(u);var j=0;var A=void 0;while(E<u[0]){--j;A=M*j;f=this.getTransform(e,A);p.replay(y,f,l,a);E+=M}j=0;E=i[2];while(E>u[2]){++j;A=M*j;f=this.getTransform(e,A);p.replay(y,f,l,a);E-=M}f=this.getTransform(e,0)}Object(wt["s"])(y,l,O/2,T/2);if(y!=r){if(b){this.dispatchRenderEvent(y,e,f)}if(_){var P=r.globalAlpha;r.globalAlpha=t.opacity;r.drawImage(y.canvas,-g,-m);r.globalAlpha=P}else{r.drawImage(y.canvas,-g,-m)}y.translate(-g,-m)}if(!_){y.globalAlpha=x}}if(d){r.restore()}this.postCompose(r,e,t,f)};ei.prototype.forEachFeatureAtCoordinate=function(e,t,r,n,a){if(!this.replayGroup_){return undefined}else{var o=t.viewState.resolution;var s=t.viewState.rotation;var l=this.getLayer();var u={};var c=this.replayGroup_.forEachFeatureAtCoordinate(e,o,s,r,{},function(e){var t=Object(i["c"])(e).toString();if(!(t in u)){u[t]=true;return n.call(a,e,l)}},null);return c}};ei.prototype.handleFontsChanged_=function(e){var t=this.getLayer();if(t.getVisible()&&this.replayGroup_){t.changed()}};ei.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()};ei.prototype.prepareFrame=function(e,t){var r=this.getLayer();var i=r.getSource();var n=e.viewHints[X["a"].ANIMATING];var a=e.viewHints[X["a"].INTERACTING];var o=r.getUpdateWhileAnimating();var s=r.getUpdateWhileInteracting();if(!this.dirty_&&!o&&n||!s&&a){return true}var l=e.extent;var u=e.viewState;var c=u.projection;var f=u.resolution;var h=e.pixelRatio;var d=r.getRevision();var p=r.getRenderBuffer();var v=r.getRenderOrder();if(v===undefined){v=Gr}var g=Object(Z["c"])(l,p*f);var m=u.projection.getExtent();if(i.getWrapX()&&u.projection.canWrapX()&&!Object(Z["g"])(m,e.extent)){var y=Object(Z["E"])(m);var _=Math.max(Object(Z["E"])(g)/2,y);g[0]=m[0]-_;g[2]=m[2]+_}if(!this.dirty_&&this.renderedResolution_==f&&this.renderedRevision_==d&&this.renderedRenderOrder_==v&&Object(Z["g"])(this.renderedExtent_,g)){this.replayGroupChanged=false;return true}this.replayGroup_=null;this.dirty_=false;var b=new $r(Hr(f,h),g,f,h,i.getOverlaps(),this.declutterTree_,r.getRenderBuffer());i.loadFeatures(g,f,c);var w=function(e){var t=void 0;var i=e.getStyleFunction()||r.getStyleFunction();if(i){t=i(e,f)}if(t){var n=this.renderFeature(e,f,h,t,b);this.dirty_=this.dirty_||n}}.bind(this);if(v){var S=[];i.forEachFeatureInExtent(g,function(e){S.push(e)},this);S.sort(v);for(var C=0,x=S.length;C<x;++C){w(S[C])}}else{i.forEachFeatureInExtent(g,w,this)}b.finish();this.renderedResolution_=f;this.renderedRevision_=d;this.renderedRenderOrder_=v;this.renderedExtent_=g;this.replayGroup_=b;this.replayGroupChanged=true;return true};ei.prototype.renderFeature=function(e,t,r,i,n){if(!i){return false}var a=false;if(Array.isArray(i)){for(var o=0,s=i.length;o<s;++o){a=Wr(n,e,i[o],Ur(t,r),this.handleStyleImageChange_,this)||a}}else{a=Wr(n,e,i,Ur(t,r),this.handleStyleImageChange_,this)}return a};var ti=ei;var ri={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"};var ii=r(12);var ni=r(93);var ai={image:[tr.POLYGON,tr.CIRCLE,tr.LINE_STRING,tr.IMAGE,tr.TEXT],hybrid:[tr.POLYGON,tr.LINE_STRING]};var oi={image:[tr.DEFAULT],hybrid:[tr.IMAGE,tr.TEXT,tr.DEFAULT],vector:hr};var si=function e(t){this.context=null;Kt.call(this,t);this.declutterTree_=t.getDeclutter()?Qt()(9):null;this.dirty_=false;this.renderedLayerRevision_;this.tmpTransform_=Object(te["c"])();this.zDirection=t.getRenderMode()==ri.VECTOR?1:0;Object(c["a"])(wt["o"],G["a"].CLEAR,this.handleFontsChanged_,this)};Object(i["d"])(si,Kt);si["handles"]=function(e){return e.getType()===gt["a"].VECTOR_TILE};si["create"]=function(e,t){return new si(t)};si.prototype.disposeInternal=function(){Object(c["c"])(wt["o"],G["a"].CLEAR,this.handleFontsChanged_,this);Kt.prototype.disposeInternal.call(this)};si.prototype.prepareFrame=function(e,t){var r=this.getLayer();var i=r.getRevision();if(this.renderedLayerRevision_!=i){this.renderedTiles.length=0;var n=r.getRenderMode();if(!this.context&&n!=ri.VECTOR){this.context=Object(K["a"])()}if(this.context&&n==ri.VECTOR){this.context=null}}this.renderedLayerRevision_=i;return Kt.prototype.prepareFrame.apply(this,arguments)};si.prototype.createReplayGroup_=function(e,t){var r=this;var i=this.getLayer();var n=t.pixelRatio;var a=t.viewState.projection;var o=i.getRevision();var s=i.getRenderOrder()||null;var l=e.getReplayState(i);if(!l.dirty&&l.renderedRevision==o&&l.renderedRenderOrder==s){return}var u=i.getSource();var c=u.getTileGrid();var f=u.getTileGridForProjection(a);var h=f.getResolution(e.tileCoord[0]);var d=f.getTileCoordExtent(e.wrappedTileCoord);var p={};var v=function t(o,f){var v=e.getTile(e.tileKeys[o]);if(v.getState()!=F["a"].LOADED){return"continue"}var g=v.tileCoord;var m=c.getTileCoordExtent(g);var y=Object(Z["B"])(d,m);var _=Object(Z["p"])(m,y)?null:Object(Z["c"])(y,i.getRenderBuffer()*h,r.tmpExtent);var b=v.getProjection();var w=false;if(!Object(ii["e"])(a,b)){w=true;v.setProjection(a)}l.dirty=false;var S=new $r(0,y,h,n,u.getOverlaps(),r.declutterTree_,i.getRenderBuffer());var C=Ur(h,n);var x=function e(t){var r=void 0;var n=t.getStyleFunction()||i.getStyleFunction();if(n){r=n(t,h)}if(r){var a=this.renderFeature(t,C,r,S);this.dirty_=this.dirty_||a;l.dirty=l.dirty||a}};var O=v.getFeatures();if(s&&s!==l.renderedRenderOrder){O.sort(s)}for(var T=0,E=O.length;T<E;++T){var M=O[T];if(w){if(b.getUnits()==ni["b"].TILE_PIXELS){b.setWorldExtent(m);b.setExtent(v.getExtent())}M.getGeometry().transform(b,a)}if(!_||Object(Z["F"])(_,M.getGeometry().getExtent())){x.call(r,M)}}S.finish();for(var j in S.getReplays()){p[j]=true}v.setReplayGroup(i,e.tileCoord.toString(),S)};for(var g=0,m=e.tileKeys.length;g<m;++g){var y=v(g,m);if(y==="continue")continue}l.renderedRevision=o;l.renderedRenderOrder=s};si.prototype.drawTileImage=function(e,t,r,i,n,a,o,s,l){var u=e;this.createReplayGroup_(u,t);if(this.context){this.renderTileImage_(u,t,r);Kt.prototype.drawTileImage.apply(this,arguments)}};si.prototype.forEachFeatureAtCoordinate=function(e,t,r,n,a){var o=t.viewState.resolution;var s=t.viewState.rotation;r=r==undefined?0:r;var l=this.getLayer();var u={};var c=this.renderedTiles;var f=l.getSource();var h=f.getTileGridForProjection(t.viewState.projection);var d=void 0,p=void 0;var v=void 0,g=void 0,m=void 0;var y=void 0,_=void 0,b=void 0;for(v=0,g=c.length;v<g;++v){y=c[v];_=y.wrappedTileCoord;b=h.getTileCoordExtent(_,this.tmpExtent);d=Object(Z["c"])(b,r*o,d);if(!Object(Z["f"])(d,e)){continue}for(var w=0,S=y.tileKeys.length;w<S;++w){var C=y.getTile(y.tileKeys[w]);if(C.getState()!=F["a"].LOADED){continue}m=C.getReplayGroup(l,y.tileCoord.toString());p=p||m.forEachFeatureAtCoordinate(e,o,s,r,{},function(e){var t=Object(i["c"])(e).toString();if(!(t in u)){u[t]=true;return n.call(a,e,l)}},null)}}return p};si.prototype.getReplayTransform_=function(e,t){var r=this.getLayer();var i=r.getSource();var n=i.getTileGrid();var a=e.tileCoord;var o=n.getResolution(a[0]);var s=t.viewState;var l=t.pixelRatio;var u=s.resolution/l;var c=n.getTileCoordExtent(a,this.tmpExtent);var f=s.center;var h=Object(Z["C"])(c);var d=t.size;var p=Math.round(l*d[0]/2);var v=Math.round(l*d[1]/2);return Object(te["b"])(this.tmpTransform_,p,v,o/u,o/u,s.rotation,(h[0]-f[0])/o,(f[1]-h[1])/o)};si.prototype.handleFontsChanged_=function(e){var t=this.getLayer();if(t.getVisible()&&this.renderedLayerRevision_!==undefined){t.changed()}};si.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()};si.prototype.postCompose=function(e,t,r){var i=this.getLayer();var n=i.getDeclutter()?{}:null;var a=i.getSource();var o=i.getRenderMode();var s=oi[o];var l=t.pixelRatio;var u=t.viewState.rotation;var c=t.size;var f=void 0,h=void 0;if(u){f=Math.round(l*c[0]/2);h=Math.round(l*c[1]/2);Object(wt["s"])(e,-u,f,h)}if(n){this.declutterTree_.clear()}var d=this.renderedTiles;var p=a.getTileGridForProjection(t.viewState.projection);var v=[];var g=[];for(var m=d.length-1;m>=0;--m){var y=d[m];if(y.getState()==F["a"].ABORT){continue}var _=y.tileCoord;var b=p.getTileCoordExtent(_,this.tmpExtent)[0]-p.getTileCoordExtent(y.wrappedTileCoord,this.tmpExtent)[0];var w=undefined;for(var S=0,C=y.tileKeys.length;S<C;++S){var x=y.getTile(y.tileKeys[S]);if(x.getState()!=F["a"].LOADED){continue}var O=x.getReplayGroup(i,_.toString());if(o!=ri.VECTOR&&!O.hasReplays(s)){continue}if(!w){w=this.getTransform(t,b)}var T=x.tileCoord[0];var E=O.getClipCoords(w);e.save();e.globalAlpha=r.opacity;for(var M=0,j=v.length;M<j;++M){var A=v[M];if(T<g[M]){e.beginPath();e.moveTo(E[0],E[1]);e.lineTo(E[2],E[3]);e.lineTo(E[4],E[5]);e.lineTo(E[6],E[7]);e.moveTo(A[6],A[7]);e.lineTo(A[4],A[5]);e.lineTo(A[2],A[3]);e.lineTo(A[0],A[1]);e.clip()}}O.replay(e,w,u,{},s,n);e.restore();v.push(E);g.push(T)}}if(n){Lr(n,e,u)}if(u){Object(wt["s"])(e,u,f,h)}Kt.prototype.postCompose.apply(this,arguments)};si.prototype.renderFeature=function(e,t,r,i){if(!r){return false}var n=false;if(Array.isArray(r)){for(var a=0,o=r.length;a<o;++a){n=Wr(i,e,r[a],t,this.handleStyleImageChange_,this)||n}}else{n=Wr(i,e,r,t,this.handleStyleImageChange_,this)}return n};si.prototype.renderTileImage_=function(e,t,r){var i=this.getLayer();var n=e.getReplayState(i);var a=i.getRevision();var o=ai[i.getRenderMode()];if(o&&n.renderedTileRevision!==a){n.renderedTileRevision=a;var s=e.wrappedTileCoord;var l=s[0];var u=t.pixelRatio;var c=i.getSource();var f=c.getTileGridForProjection(t.viewState.projection);var h=f.getResolution(l);var d=e.getContext(i);var p=c.getTilePixelSize(l,u,t.viewState.projection);d.canvas.width=p[0];d.canvas.height=p[1];var v=f.getTileCoordExtent(s,this.tmpExtent);for(var g=0,m=e.tileKeys.length;g<m;++g){var y=e.getTile(e.tileKeys[g]);if(y.getState()!=F["a"].LOADED){continue}var _=u/h;var b=Object(te["e"])(this.tmpTransform_);Object(te["f"])(b,_,-_);Object(te["h"])(b,-v[0],-v[3]);var w=y.getReplayGroup(i,e.tileCoord.toString());w.replay(d,b,0,{},o)}}};var li=si;var ui=function e(t){t=Object(H["a"])({},t);if(!t.controls){t.controls=me()}if(!t.interactions){t.interactions=ct()}ne.call(this,t)};Object(i["d"])(ui,ne);ui.prototype.createRenderer=function(){var e=new qt(this);e.registerLayerRenderers([Ft,Kt,ti,li]);return e};var ci=t["a"]=ui},function(e,t,r){"use strict";r.r(t);var i=r(155);var n=r(282);var a=r(280);var o=r(239);var s=r(156);var l=r(335);var u=r(162);var c=r(327);var f=angular.module("gmfDatasourceModule",[o["a"].module.name,s["a"].module.name,l["a"].module.name,u["a"].module.name,c["a"].module.name]);var h=f;var d=r(225);var p=r(284);var v=r(160);var g=r(165);var m=r(319);var y=r(334);var _=r(231);var b=r(185);var w=angular.module("gmfEditingModule",[v["a"].module.name,g["a"].name,m["a"].name,y["a"].module.name,_["a"].module.name,b["a"].module.name]);var S=w;var C=r(287);var x=r(316);var O=r(315);var T=r(314);var E=r(584);var M=angular.module("gmfImportModule",[x["a"].name,O["a"].name,T["a"].name]);var j=M;var A=r(90);var P=r(312);var k=r(127);var I=r(310);var D=r(62);var R=r(582);var L=angular.module("gmfLayertreeModule",[A["a"].name,P["a"].name,k["a"].module.name,I["a"].name,D["a"].module.name]);var $=L;var N=r(289);var F=r(181);var G=r(292);var U=r(305);var H=r(147);var Y=r(227);var W=r(212);var V=angular.module("gmfObjecteditingModule",[G["a"].name,U["a"].name,H["a"].module.name,Y["a"].module.name,W["a"].name]);var z=V;var q=r(307);var B=r(304);var X=r(579);var K=angular.module("gmfPrintModule",[B["a"].name]);var Z=K;var Q=r(278);var J=r(279);var ee=r(303);var te=r(285);var re=r(113);var ie=r(180);var ne=angular.module("ngeoDatasourceModule",[re["a"].module.name,ie["a"].module.name]);var ae=ne;var oe=r(183);var se=r(188);var le=angular.module("ngeoDownloadModule",[oe["a"].module.name,se["a"].name]);var ue=le;var ce=r(235);var fe=r(161);var he=r(234);var de=r(325);var pe=r(324);var ve=r(323);var ge=angular.module("ngeoDrawModule",[fe["a"].module.name,ce["a"].name,he["a"].name,de["a"].name,pe["a"].name,ve["a"].name]);var me=ge;var ye=r(230);var _e=r(229);var be=r(281);var we=angular.module("ngeoEditingModule",[ye["a"].name,_e["a"].name,be["a"].name]);var Se=we;var Ce=r(318);var xe=r(134);var Oe=r(317);var Te=angular.module("ngeoFilterModule",[Ce["a"].name,xe["a"].module.name,Oe["a"].name]);var Ee=Te;var Me=r(1);var je=r(91);var Ae=r(9);var Pe=r(2);var ke=r(12);var Ie=r(21);var De=r(34);function Re(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var Le=angular.module("ngeoGooglestreetview",[je["a"].module.name]);Le.value("ngeoGooglestreetviewTemplateUrl",function(e){var t=e["ngeoGooglestreetviewTemplateUrl"];return t!==undefined?t:"ngeo/googlestreetview"});Le.run(["$templateCache",function(e){e.put("ngeo/googlestreetview",r(472))}]);$e.$inject=["$attrs","ngeoGooglestreetviewTemplateUrl"];function $e(e,t){return t(e)}Le.Controller_=function(){e.$inject=["$element","$scope","ngeoFeatureOverlayMgr"];function e(t,r,i){var n=this;Re(this,e);this.active;r.$watch(function(){return n.active},this.handleActiveChange_.bind(this));this.featureStyle;this.map;this.radius;this.scope_=r;this.feature_=new Ie["a"];this.featureOverlay_=Me["a"].assert(i.getFeatureOverlay());this.listenerKeys_=[];this.location=null;this.noDataAtLocation=false;this.panorama_=new google.maps.StreetViewPanorama(t[0],{pov:{heading:0,pitch:0},visible:false,zoom:1});this.panoramaListener_=null;this.point_=new De["a"]([0,0]);this.feature_.setGeometry(this.point_);this.streetViewService_=new google.maps.StreetViewService;this.panoramaPositionChanging_=false}e.prototype.$onInit=function e(){var t=this;this.scope_.$watch(function(){return t.location},this.handleLocationChange_.bind(this));this.scope_.$watch(function(){var e=t.active;var r=t.location!==null;return e&&r},this.handleReadyChange_.bind(this));this.scope_.$watch(function(){var e=t.active;var r=t.location!==null;var i=t.noDataAtLocation===false;return e&&r&&i},function(e,r){if(e===r){return}t.panorama_.setVisible(e);if(e){t.panoramaListener_=google.maps.event.addListener(t.panorama_,"position_changed",t.handlePanoramaPositionChange_.bind(t))}else if(t.panoramaListener_){google.maps.event.removeListener(t.panoramaListener_);t.panoramaListener_=null}});if(this.featureStyle){this.feature_.setStyle(this.featureStyle)}};e.prototype.handleActiveChange_=function e(t){var r=this.listenerKeys_;if(t){r.push(Pe["a"](this.map,"click",this.handleMapClick_,this))}else{r.forEach(Pe["e"]);r.length=0}};e.prototype.handleLocationChange_=function e(t,r){if(t===r||Array.isArray(t)&&Array.isArray(r)&&Ae["b"](t,r)){return}this.point_.setCoordinates(t);if(t&&!this.panoramaPositionChanging_){var i=this.toLonLat_(t);this.streetViewService_.getPanorama({location:{lat:i[1],lng:i[0]},radius:this.radius},this.handleStreetViewServiceGetPanorama_.bind(this))}};e.prototype.handleMapClick_=function e(t){this.location=t.coordinate;this.scope_.$apply()};e.prototype.handleReadyChange_=function e(t,r){if(t===r){return}if(t){this.featureOverlay_.addFeature(this.feature_)}else{this.featureOverlay_.removeFeature(this.feature_)}};e.prototype.handleStreetViewServiceGetPanorama_=function e(t,r){var i=this.panorama_;if(r===google.maps.StreetViewStatus.OK){this.noDataAtLocation=false;i.setPosition(t.location.latLng)}else{this.noDataAtLocation=true}this.scope_.$apply()};e.prototype.handlePanoramaPositionChange_=function e(){this.panoramaPositionChanging_=true;var t=this.panorama_.getPosition();var r=[t.lng(),t.lat()];var i=this.fromLonLat_(r);this.location=i;this.scope_.$apply();this.panoramaPositionChanging_=false};e.prototype.fromLonLat_=function e(t){return ke["f"](t,this.map.getView().getProjection())};e.prototype.toLonLat_=function e(t){return ke["l"](t,this.map.getView().getProjection())};return e}();Le.component("ngeoGooglestreetview",{bindings:{active:"<",featureStyle:"<?",map:"<",radius:"<?"},controller:Le.Controller_,templateUrl:$e});var Ne=Le;var Fe=angular.module("ngeoGooglestreetviewModule",[Ne.name]);var Ge=Fe;var Ue=r(297);var He=r(295);var Ye=r(104);var We=r(78);var Ve=r(322);var ze=r(321);var qe=r(320);var Be=angular.module("ngeoMeasureModule",[Ve["a"].name,ze["a"].name,qe["a"].name]);var Xe=Be;var Ke=r(283);var Ze=r(197);var Qe=angular.module("ngeoPrintModule",[Ke["a"].module.name,Ze["a"].module.name]);var Je=Qe;var et=r(291);var tt=angular.module("ngeoProfileModule",[et["a"].name]);var rt=tt;var it=r(182);var nt=r(123);var at=r(158);var ot=r(157);var st=angular.module("ngeoQueryModule",[it["a"].module.name,nt["a"].module.name,at["a"].name,ot["a"].name]);var lt=st;var ut=r(288);var ct=r(313);var ft=r(294);var ht=r(301);var dt=r(105);var pt=r(59);var vt=r(72);var gt=angular.module("ngeoControl",[]);gt.component_=function(){return{restrict:"A",link:function e(t,r,i){var n=t.$eval(i["ngeoControl"]);Me["a"].assertInstanceof(n,vt["a"]);var a=t.$eval(i["ngeoControlMap"]);Me["a"].assertInstanceof(a,pt["a"]);n.setTarget(r[0]);a.addControl(n)}}};gt.directive("ngeoControl",gt.component_);var mt=gt;var yt=r(228);var _t=r(135);var bt=r(136);var wt=r(52);var St=r(336);var Ct=angular.module("ngeoFilereader",[]);Ct.component_=function(e){return{restrict:"A",scope:{fileContent:"=ngeoFilereader",supported:"=?ngeoFilereaderSupported"},link:function t(r,i,n){var a="FileReader"in e;r["supported"]=a;if(!a){return}i.on("change",function(t){var i=new e.FileReader;i.onload=function(e){r.$apply(function(){r["fileContent"]=e.target.result})};i.readAsText(t.target.files[0])})}}};Ct.component_.$inject=["$window"];Ct.directive("ngeoFilereader",Ct.component_);var xt=Ct;var Ot=r(107);var Tt=angular.module("ngeoGetBrowserLanguage",[]);Tt.factory_=function(e){return function(t){var r=e.navigator;var i=r.languages||r.language||r.browserLanguage||r.systemLanguage||r.userLanguage;if(!Array.isArray(i)){i=[i]}i=i.map(function(e){return e.substring(0,2)});i=i.filter(function(e,t,r){return r.indexOf(e)==t});var n=i.filter(function(e){return t.indexOf(e)!=-1});return n[0]}};Tt.factory_.$inject=["$window"];Tt.factory("ngeoGetBrowserLanguage",Tt.factory_);var Et=Tt;var Mt=r(370);var jt=r(195);var At=r(77);var Pt=r(106);var kt=angular.module("ngeoMiscExtraModule",[ht["a"].module.name,dt["a"].name,mt.name,yt["a"].name,_t["a"].name,bt["a"].module.name,wt["a"].module.name,St["a"].module.name,xt.name,Ot["a"].name,Et.name,Mt["a"].name,jt["a"].module.name,At["a"].module.name,Pt["a"].module.name]);var It=kt;var Dt=angular.module("ngeo",[ae.name,ue.name,me.name,Se.name,Ee.name,Ge.name,Ue["a"].name,He["a"].name,Ye["a"].name,We["a"].module.name,Xe.name,Je.name,rt.name,lt.name,ut["a"].name,ct["a"].name,ft["a"].module.name,It.name]);var Rt=Dt;var Lt=angular.module("gmf",[i["a"].name,n["a"].name,a["a"].name,h.name,d["a"].name,p["a"].name,S.name,C["a"].name,j.name,$.name,N["a"].name,F["a"].name,z.name,q["a"].name,Z.name,Q["a"].name,J["a"].name,ee["a"].name,te["a"].name,Rt.name]);var $t=t["default"]=Lt},function(e,t,r){"use strict";r.r(t);var i=r(24);var n=r.n(i);var a=r(368);var o=r.n(a);var s=r(539);var l=r.n(s);var u=r(629);var c=r.n(u);if(window.location.protocol=="http:"&&window.location.hostname!="localhost"){var f=window.location.href.substr(5);window.location="https:"+f}},function(e,t,r){"use strict";(function(e){var i=r(48);var n=r(19);var a=r(1);var o=r(109);var s=r(71);var l=r(191);var u=r(186);var c=r(9);var f=r(2);var h=r(11);var d=function e(t,r,i,n,a,o,s){this.$timeout_=t;this.$injector_=r;this.gettextCatalog_=i;this.layerHelper_=n;this.ngeoNotification_=a;this.gmfThemes_=o;this.root={children:[]};this.rootCtrl=null;this.numberOfGroupsToAddInThisDigestLoop=0;this.groupsToAddInThisDigestLoop_=[];this.promiseForGroupsToAddInThisDigestLoop_=null;this.ngeoStateManager_=s;this.ogcServers_=null;f["a"](this.gmfThemes_,"change",this.handleThemesChange_,this)};d.$inject=["$timeout","$injector","gettextCatalog","ngeoLayerHelper","ngeoNotification","gmfThemes","ngeoStateManager"];d.$inject=["$timeout","$injector","gettextCatalog","ngeoLayerHelper","ngeoNotification","gmfThemes","ngeoStateManager"];d.prototype.handleThemesChange_=function(){var e=this;this.gmfThemes_.getOgcServersObject().then(function(t){e.ogcServers_=t});if(this.rootCtrl&&this.rootCtrl.children){this.gmfThemes_.getThemesObject().then(function(t){e.refreshFirstLevelGroups_(t)})}};d.prototype.setFirstLevelGroups=function(e){this.root.children.length=0;this.ngeoStateManager_.deleteParam(i["a"].PermalinkParam.TREE_GROUPS);return this.addFirstLevelGroups(e)};d.prototype.addFirstLevelGroups=function(e,t,r){var i=this;var n=[];e.slice().reverse().forEach(function(e){if(!i.addFirstLevelGroup_(e)){n.push(e)}});if(n.length>0&&!r){this.notifyCantAddGroups_(n)}return n.length===0};d.prototype.updateTreeGroupsState_=function(e){var t={};t[i["a"].PermalinkParam.TREE_GROUPS]=e.map(function(e){return e.name}).join(",");this.ngeoStateManager_.updateState(t);if(this.$injector_.has("gmfPermalink")){this.$injector_.get("gmfPermalink").cleanParams(e)}};d.prototype.addFirstLevelGroup_=function(e){var t=this;var r=false;var i=e.id;this.root.children.some(function(e){if(i===e.id){return r=true}},this);this.groupsToAddInThisDigestLoop_.some(function(e){if(i===e.id){return r=true}},this);if(r){return false}this.groupsToAddInThisDigestLoop_.push(e);this.numberOfGroupsToAddInThisDigestLoop=0;if(this.promiseForGroupsToAddInThisDigestLoop_!==null){this.$timeout_.cancel(this.promiseForGroupsToAddInThisDigestLoop_)}this.promiseForGroupsToAddInThisDigestLoop_=this.$timeout_(function(){t.numberOfGroupsToAddInThisDigestLoop=t.groupsToAddInThisDigestLoop_.length;t.groupsToAddInThisDigestLoop_.forEach(function(e){t.root.children.unshift(e)});t.updateTreeGroupsState_(t.root.children);t.groupsToAddInThisDigestLoop_.length=0;t.promiseForGroupsToAddInThisDigestLoop_=null});return true};d.prototype.addGroupByName=function(e,t){var r=this;this.gmfThemes_.getThemesObject().then(function(i){var a=n["a"].findGroupByName(i,e);if(a){r.addFirstLevelGroups([a],t,false)}})};d.prototype.addGroupByLayerName=function(e,t,r){var i=this;this.gmfThemes_.getThemesObject().then(function(a){var s=n["a"].findGroupByLayerNodeName(a,e);if(s){var l=i.addFirstLevelGroups([s],t,r);i.$timeout_(function(){var t=i.getTreeCtrlByNodeId(s.id);if(!t){console.warn("Tree controller not found, unable to add the group");return}var r=void 0;t.traverseDepthFirst(function(t){if(t.node.name===e){r=t;return o["a"].VisitorDecision.STOP}});if(l){t.setState("off")}if(r){r.setState("on")}})}})};d.prototype.removeGroup=function(e){var t=this.root.children;var r=0,i=false;t.some(function(t){if(t.name===e.name){return i=true}r++});if(i){t.splice(r,1);this.updateTreeGroupsState_(t)}};d.prototype.removeAll=function(){while(this.root.children.length){this.removeGroup(this.root.children[0])}};d.prototype.cloneGroupNode_=function(e,t){var r=h["a"]({},e);this.toggleNodeCheck_(r,t);return r};d.prototype.toggleNodeCheck_=function(e,t){var r=this;if(!e.children){return}e.children.forEach(function(e){if(e.children){r.toggleNodeCheck_(e,t)}else if(e.metadata){e.metadata.isChecked=c["f"](t,e.name)}})};d.prototype.notifyCantAddGroups_=function(e){var t=[];var r=this.gettextCatalog_;e.forEach(function(e){t.push(r.getString(e.name))});var i=t.length<2?r.getString("group is already loaded."):r.getString("groups are already loaded.");this.ngeoNotification_.notify({msg:t.join(", ")+" "+i,type:s["a"].Type.INFORMATION})};d.prototype.getTreeCtrlByNodeId=function(e){var t=null;if(this.rootCtrl&&this.rootCtrl.traverseDepthFirst){this.rootCtrl.traverseDepthFirst(function(r){if(r.node.id===e){t=r;return o["a"].VisitorDecision.STOP}})}return t};d.prototype.getOgcServer=function(e){if(e.parent.node.mixed){var t=e.node;a["a"].assert(t.ogcServer);return this.ogcServers_[t.ogcServer]}else{var r=e;while(!r.parent.isRoot){r=r.parent}var i=r.node;a["a"].assert(i.ogcServer);return this.ogcServers_[i.ogcServer]}};d.prototype.refreshFirstLevelGroups_=function(e){var t=this;var r={};this.rootCtrl.children.map(function(e){var i=e.node.name;r[i]=t.getFirstLevelGroupFullState_(e)});var i=[];this.root.children.map(function(a){var o=a.name;var s=n["a"].findGroupByName(e,o);if(s){var l=r[o];if(l){t.setNodeMetadataFromFullState_(s,l)}i.push(s)}});this.setFirstLevelGroups(i);this.$timeout_(function(){t.updateTreeGroupsState_(t.root.children)})};d.prototype.getFirstLevelGroupFullState_=function(t){var r=this;var i={};t.children.map(function(e){i[e.node.name]=r.getFirstLevelGroupFullState_(e)});var n=void 0,a=void 0,o=void 0;if(t.children.length>0){var s=e("#gmf-layertree-layer-group-"+t.uid);if(s){a=s.hasClass("in")}}else{n=t.getState();if(n==="on"){n=true}else if(n==="off"){n=false}else{n=undefined}var l=e("#gmf-layertree-node-"+t.uid+"-legend");if(l){o=l.is(":visible")}}return{children:i,isChecked:n,isExpanded:a,isLegendExpanded:o}};d.prototype.setNodeMetadataFromFullState_=function(e,t){var r=this;if(!t){return e}if(e.children){e.children.map(function(e){r.setNodeMetadataFromFullState_(e,t.children[e.name])})}var i=e.metadata;i.isChecked=t.isChecked;i.isExpanded=t.isExpanded;i.isLegendExpanded=t.isLegendExpanded;return e};d.module=angular.module("gmfTreeManager",[n["a"].module.name,o["a"].module.name,l["a"].module.name,u["a"].module.name]);d.module.service("gmfTreeManager",d);t["a"]=d}).call(this,r(24))},function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"b",function(){return a});var i={};function n(e,t){i[e]=t}function a(e){var t=[];for(var r in e){t.push({unit:r,priority:i[r]})}t.sort(function(e,t){return e.priority-t.priority});return t}},function(e,t,r){"use strict";t["a"]={ANIMATING:0,INTERACTING:1}},function(e,t,r){"use strict";r.d(t,"a",function(){return i});r.d(t,"c",function(){return n});r.d(t,"b",function(){return a});r.d(t,"f",function(){return o});r.d(t,"e",function(){return s});r.d(t,"d",function(){return l});function i(e,t){var r=document.createElement("CANVAS");if(e){r.width=e}if(t){r.height=t}return r.getContext("2d")}function n(e){var t=e.offsetWidth;var r=getComputedStyle(e);t+=parseInt(r.marginLeft,10)+parseInt(r.marginRight,10);return t}function a(e){var t=e.offsetHeight;var r=getComputedStyle(e);t+=parseInt(r.marginTop,10)+parseInt(r.marginBottom,10);return t}function o(e,t){var r=t.parentNode;if(r){r.replaceChild(e,t)}}function s(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function l(e){while(e.lastChild){e.removeChild(e.lastChild)}}},function(e,t,r){"use strict";var i=r(55);var n=r(51);var a=r(131);var o=r(130);var s=r(141);var l=r(34);var u=r(49);var c={};c.toMulti=function(e){var t=void 0;if(e instanceof l["a"]){t=new a["a"]([]);t.appendPoint(e)}else if(e instanceof n["a"]){t=new o["a"]([]);t.appendLineString(e)}else if(e instanceof u["a"]){t=new s["a"]([]);t.appendPolygon(e)}else{t=e}return t};c.isSafari=function(){return navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1};c.colorZeroPadding=function(e){return e.length==1?"0"+e:e};c.rgbArrayToHex=function(e){var t=e[0];var r=e[1];var i=e[2];if(t!=(t&255)||r!=(r&255)||i!=(i&255)){throw Error('"('+t+","+r+","+i+')" is not a valid RGB color')}var n=c.colorZeroPadding(t.toString(16));var a=c.colorZeroPadding(r.toString(16));var o=c.colorZeroPadding(i.toString(16));return"#"+n+a+o};c.decodeQueryString=function(e){var t={};if(e){var r=e.substring(1).split("&");for(var i=r,n=Array.isArray(i),a=0,i=n?i:i[Symbol.iterator]();;){var o;if(n){if(a>=i.length)break;o=i[a++]}else{a=i.next();if(a.done)break;o=a.value}var s=o;var l=s.indexOf("=");if(l>=0){var u=s.substring(0,l);var c=s.substring(l+1);t[decodeURIComponent(u)]=decodeURIComponent(c)}else{t[s]=""}}}return t};c.encodeQueryString=function(e){var t=[];for(var r in e){var i=e[r];t.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}return t.join("&")};c.deleteCondition=function(e){return i["f"](e)&&i["j"](e)};t["a"]=c},function(e,t,r){"use strict";r.r(t);var i=r(3);var n=r(39);var a=function e(t){this.tagName_=t};a.prototype.getTagName=function(){return this.tagName_};var o=a;var s=function e(t,r){o.call(this,t);this.conditions=Array.prototype.slice.call(arguments,1);Object(n["a"])(this.conditions.length>=2,57)};Object(i["d"])(s,o);var l=s;var u=function e(t){var r=["And"].concat(Array.prototype.slice.call(arguments));l.apply(this,r)};Object(i["d"])(u,l);var c=u;var f=function e(t,r,i){o.call(this,"BBOX");this.geometryName=t;this.extent=r;this.srsName=i};Object(i["d"])(f,o);var h=f;var d=function e(t,r,i,n){o.call(this,t);this.geometryName=r||"the_geom";this.geometry=i;this.srsName=n};Object(i["d"])(d,o);var p=d;var v=function e(t,r,i){p.call(this,"Contains",t,r,i)};Object(i["d"])(v,p);var g=v;var m=function e(t,r){o.call(this,t);this.propertyName=r};Object(i["d"])(m,o);var y=m;var _=function e(t,r,i){y.call(this,"During",t);this.begin=r;this.end=i};Object(i["d"])(_,y);var b=_;var w=function e(t,r,i,n){y.call(this,t,r);this.expression=i;this.matchCase=n};Object(i["d"])(w,y);var S=w;var C=function e(t,r,i){S.call(this,"PropertyIsEqualTo",t,r,i)};Object(i["d"])(C,S);var x=C;var O=function e(t,r){S.call(this,"PropertyIsGreaterThan",t,r)};Object(i["d"])(O,S);var T=O;var E=function e(t,r){S.call(this,"PropertyIsGreaterThanOrEqualTo",t,r)};Object(i["d"])(E,S);var M=E;var j=function e(t,r,i){p.call(this,"Intersects",t,r,i)};Object(i["d"])(j,p);var A=j;var P=function e(t,r,i){y.call(this,"PropertyIsBetween",t);this.lowerBoundary=r;this.upperBoundary=i};Object(i["d"])(P,y);var k=P;var I=function e(t,r,i,n,a,o){y.call(this,"PropertyIsLike",t);this.pattern=r;this.wildCard=i!==undefined?i:"*";this.singleChar=n!==undefined?n:".";this.escapeChar=a!==undefined?a:"!";this.matchCase=o};Object(i["d"])(I,y);var D=I;var R=function e(t){y.call(this,"PropertyIsNull",t)};Object(i["d"])(R,y);var L=R;var $=function e(t,r){S.call(this,"PropertyIsLessThan",t,r)};Object(i["d"])($,S);var N=$;var F=function e(t,r){S.call(this,"PropertyIsLessThanOrEqualTo",t,r)};Object(i["d"])(F,S);var G=F;var U=function e(t){o.call(this,"Not");this.condition=t};Object(i["d"])(U,o);var H=U;var Y=function e(t,r,i){S.call(this,"PropertyIsNotEqualTo",t,r,i)};Object(i["d"])(Y,S);var W=Y;var V=function e(t){var r=["Or"].concat(Array.prototype.slice.call(arguments));l.apply(this,r)};Object(i["d"])(V,l);var z=V;var q=function e(t,r,i){p.call(this,"Within",t,r,i)};Object(i["d"])(q,p);var B=q;r.d(t,"and",function(){return X});r.d(t,"or",function(){return K});r.d(t,"not",function(){return Z});r.d(t,"bbox",function(){return Q});r.d(t,"contains",function(){return J});r.d(t,"intersects",function(){return ee});r.d(t,"within",function(){return te});r.d(t,"equalTo",function(){return re});r.d(t,"notEqualTo",function(){return ie});r.d(t,"lessThan",function(){return ne});r.d(t,"lessThanOrEqualTo",function(){return ae});r.d(t,"greaterThan",function(){return oe});r.d(t,"greaterThanOrEqualTo",function(){return se});r.d(t,"isNull",function(){return le});r.d(t,"between",function(){return ue});r.d(t,"like",function(){return ce});r.d(t,"during",function(){return fe});function X(e){var t=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(c,t))}function K(e){var t=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(z,t))}function Z(e){return new H(e)}function Q(e,t,r){return new h(e,t,r)}function J(e,t,r){return new g(e,t,r)}function ee(e,t,r){return new A(e,t,r)}function te(e,t,r){return new B(e,t,r)}function re(e,t,r){return new x(e,t,r)}function ie(e,t,r){return new W(e,t,r)}function ne(e,t){return new N(e,t)}function ae(e,t){return new G(e,t)}function oe(e,t){return new T(e,t)}function se(e,t){return new M(e,t)}function le(e){return new L(e)}function ue(e,t,r){return new k(e,t,r)}function ce(e,t,r,i,n,a){return new D(e,t,r,i,n,a)}function fe(e,t,r){return new b(e,t,r)}},function(e,t,r){"use strict";var i=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN};var n=function(e){if(e.length===1)e=a(e);return{left:function(t,r,i,n){if(i==null)i=0;if(n==null)n=t.length;while(i<n){var a=i+n>>>1;if(e(t[a],r)<0)i=a+1;else n=a}return i},right:function(t,r,i,n){if(i==null)i=0;if(n==null)n=t.length;while(i<n){var a=i+n>>>1;if(e(t[a],r)>0)n=a;else i=a+1}return i}}};function a(e){return function(t,r){return i(e(t),r)}}var o=n(i);var s=o.right;var l=o.left;var u=s;var c=function(e,t){if(t==null)t=f;var r=0,i=e.length-1,n=e[0],a=new Array(i<0?0:i);while(r<i)a[r]=t(n,n=e[++r]);return a};function f(e,t){return[e,t]}var h=function(e,t,r){var i=e.length,n=t.length,a=new Array(i*n),o,s,l,u;if(r==null)r=f;for(o=l=0;o<i;++o){for(u=e[o],s=0;s<n;++s,++l){a[l]=r(u,t[s])}}return a};var d=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN};var p=function(e){return e===null?NaN:+e};var v=function(e,t){var r=e.length,i=0,n=-1,a=0,o,s,l=0;if(t==null){while(++n<r){if(!isNaN(o=p(e[n]))){s=o-a;a+=s/++i;l+=s*(o-a)}}}else{while(++n<r){if(!isNaN(o=p(t(e[n],n,e)))){s=o-a;a+=s/++i;l+=s*(o-a)}}}if(i>1)return l/(i-1)};var g=function(e,t){var r=v(e,t);return r?Math.sqrt(r):r};var m=function(e,t){var r=e.length,i=-1,n,a,o;if(t==null){while(++i<r){if((n=e[i])!=null&&n>=n){a=o=n;while(++i<r){if((n=e[i])!=null){if(a>n)a=n;if(o<n)o=n}}}}}else{while(++i<r){if((n=t(e[i],i,e))!=null&&n>=n){a=o=n;while(++i<r){if((n=t(e[i],i,e))!=null){if(a>n)a=n;if(o<n)o=n}}}}}return[a,o]};var y=Array.prototype;var _=y.slice;var b=y.map;var w=function(e){return function(){return e}};var S=function(e){return e};var C=function(e,t,r){e=+e,t=+t,r=(n=arguments.length)<2?(t=e,e=0,1):n<3?1:+r;var i=-1,n=Math.max(0,Math.ceil((t-e)/r))|0,a=new Array(n);while(++i<n){a[i]=e+i*r}return a};var x=Math.sqrt(50),O=Math.sqrt(10),T=Math.sqrt(2);var E=function(e,t,r){var i,n=-1,a,o,s;t=+t,e=+e,r=+r;if(e===t&&r>0)return[e];if(i=t<e)a=e,e=t,t=a;if((s=M(e,t,r))===0||!isFinite(s))return[];if(s>0){e=Math.ceil(e/s);t=Math.floor(t/s);o=new Array(a=Math.ceil(t-e+1));while(++n<a)o[n]=(e+n)*s}else{e=Math.floor(e*s);t=Math.ceil(t*s);o=new Array(a=Math.ceil(e-t+1));while(++n<a)o[n]=(e-n)/s}if(i)o.reverse();return o};function M(e,t,r){var i=(t-e)/Math.max(0,r),n=Math.floor(Math.log(i)/Math.LN10),a=i/Math.pow(10,n);return n>=0?(a>=x?10:a>=O?5:a>=T?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(a>=x?10:a>=O?5:a>=T?2:1)}function j(e,t,r){var i=Math.abs(t-e)/Math.max(0,r),n=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),a=i/n;if(a>=x)n*=10;else if(a>=O)n*=5;else if(a>=T)n*=2;return t<e?-n:n}var A=function(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1};var P=function(){var e=S,t=m,r=A;function i(i){var n,a=i.length,o,s=new Array(a);for(n=0;n<a;++n){s[n]=e(i[n],n,i)}var l=t(s),c=l[0],f=l[1],h=r(s,c,f);if(!Array.isArray(h)){h=j(c,f,h);h=C(Math.ceil(c/h)*h,Math.floor(f/h)*h,h)}var d=h.length;while(h[0]<=c)h.shift(),--d;while(h[d-1]>f)h.pop(),--d;var p=new Array(d+1),v;for(n=0;n<=d;++n){v=p[n]=[];v.x0=n>0?h[n-1]:c;v.x1=n<d?h[n]:f}for(n=0;n<a;++n){o=s[n];if(c<=o&&o<=f){p[u(h,o,0,d)].push(i[n])}}return p}i.value=function(t){return arguments.length?(e=typeof t==="function"?t:w(t),i):e};i.domain=function(e){return arguments.length?(t=typeof e==="function"?e:w([e[0],e[1]]),i):t};i.thresholds=function(e){return arguments.length?(r=typeof e==="function"?e:Array.isArray(e)?w(_.call(e)):w(e),i):r};return i};var k=function(e,t,r){if(r==null)r=p;if(!(i=e.length))return;if((t=+t)<=0||i<2)return+r(e[0],0,e);if(t>=1)return+r(e[i-1],i-1,e);var i,n=(i-1)*t,a=Math.floor(n),o=+r(e[a],a,e),s=+r(e[a+1],a+1,e);return o+(s-o)*(n-a)};var I=function(e,t,r){e=b.call(e,p).sort(i);return Math.ceil((r-t)/(2*(k(e,.75)-k(e,.25))*Math.pow(e.length,-1/3)))};var D=function(e,t,r){return Math.ceil((r-t)/(3.5*g(e)*Math.pow(e.length,-1/3)))};var R=function(e,t){var r=e.length,i=-1,n,a;if(t==null){while(++i<r){if((n=e[i])!=null&&n>=n){a=n;while(++i<r){if((n=e[i])!=null&&n>a){a=n}}}}}else{while(++i<r){if((n=t(e[i],i,e))!=null&&n>=n){a=n;while(++i<r){if((n=t(e[i],i,e))!=null&&n>a){a=n}}}}}return a};var L=function(e,t){var r=e.length,i=r,n=-1,a,o=0;if(t==null){while(++n<r){if(!isNaN(a=p(e[n])))o+=a;else--i}}else{while(++n<r){if(!isNaN(a=p(t(e[n],n,e))))o+=a;else--i}}if(i)return o/i};var $=function(e,t){var r=e.length,n=-1,a,o=[];if(t==null){while(++n<r){if(!isNaN(a=p(e[n]))){o.push(a)}}}else{while(++n<r){if(!isNaN(a=p(t(e[n],n,e)))){o.push(a)}}}return k(o.sort(i),.5)};var N=function(e){var t=e.length,r,i=-1,n=0,a,o;while(++i<t)n+=e[i].length;a=new Array(n);while(--t>=0){o=e[t];r=o.length;while(--r>=0){a[--n]=o[r]}}return a};var F=function(e,t){var r=e.length,i=-1,n,a;if(t==null){while(++i<r){if((n=e[i])!=null&&n>=n){a=n;while(++i<r){if((n=e[i])!=null&&a>n){a=n}}}}}else{while(++i<r){if((n=t(e[i],i,e))!=null&&n>=n){a=n;while(++i<r){if((n=t(e[i],i,e))!=null&&a>n){a=n}}}}}return a};var G=function(e,t){var r=t.length,i=new Array(r);while(r--)i[r]=e[t[r]];return i};var U=function(e,t){if(!(r=e.length))return;var r,n=0,a=0,o,s=e[a];if(t==null)t=i;while(++n<r){if(t(o=e[n],s)<0||t(s,s)!==0){s=o,a=n}}if(t(s,s)===0)return a};var H=function(e,t,r){var i=(r==null?e.length:r)-(t=t==null?0:+t),n,a;while(i){a=Math.random()*i--|0;n=e[i+t];e[i+t]=e[a+t];e[a+t]=n}return e};var Y=function(e,t){var r=e.length,i=-1,n,a=0;if(t==null){while(++i<r){if(n=+e[i])a+=n}}else{while(++i<r){if(n=+t(e[i],i,e))a+=n}}return a};var W=function(e){if(!(a=e.length))return[];for(var t=-1,r=F(e,V),i=new Array(r);++t<r;){for(var n=-1,a,o=i[t]=new Array(a);++n<a;){o[n]=e[n][t]}}return i};function V(e){return e.length}var z=function(){return W(arguments)};r.d(t,"b",function(){return u});r.d(t,false,function(){return s});r.d(t,false,function(){return l});r.d(t,"a",function(){return i});r.d(t,"c",function(){return n});r.d(t,false,function(){return h});r.d(t,false,function(){return d});r.d(t,false,function(){return g});r.d(t,"d",function(){return m});r.d(t,false,function(){return P});r.d(t,false,function(){return I});r.d(t,false,function(){return D});r.d(t,false,function(){return A});r.d(t,false,function(){return R});r.d(t,false,function(){return L});r.d(t,false,function(){return $});r.d(t,false,function(){return N});r.d(t,false,function(){return F});r.d(t,false,function(){return c});r.d(t,false,function(){return G});r.d(t,"e",function(){return k});r.d(t,"f",function(){return C});r.d(t,false,function(){return U});r.d(t,false,function(){return H});r.d(t,false,function(){return Y});r.d(t,"i",function(){return E});r.d(t,"g",function(){return M});r.d(t,"h",function(){return j});r.d(t,false,function(){return W});r.d(t,false,function(){return v});r.d(t,false,function(){return z})},function(e,t,r){"use strict";var i=r(3);var n=r(56);var a=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};n["a"].call(this,t);this.detail=r};i["d"](a,n["a"]);t["a"]=a},function(e,t,r){"use strict";r.d(t,"c",function(){return i});r.d(t,"d",function(){return n});r.d(t,"e",function(){return a});r.d(t,"b",function(){return s});r.d(t,"a",function(){return l});r.d(t,"f",function(){return u});var i="ol-hidden";var n="ol-selectable";var a="ol-unselectable";var o="ol-unsupported";var s="ol-control";var l="ol-collapsed";var u=function(){var e=void 0;var t={};return function(r){if(!e){e=document.createElement("div").style}if(!(r in t)){e.font=r;var i=e.fontFamily;e.font="";if(!i){return null}t[r]=i.split(/,\s?/)}return t[r]}}()},function(e,t,r){"use strict";var i=function e(){};i.prototype.showMessage=function(e){};i.prototype.show=function(e){var t=this.getMessageObjects(e);t.forEach(this.showMessage,this)};i.prototype.error=function(e){this.show(this.getMessageObjects(e,i.Type.ERROR))};i.prototype.info=function(e){this.show(this.getMessageObjects(e,i.Type.INFORMATION))};i.prototype.success=function(e){this.show(this.getMessageObjects(e,i.Type.SUCCESS))};i.prototype.warn=function(e){this.show(this.getMessageObjects(e,i.Type.WARNING))};i.prototype.getMessageObjects=function(e,t){var r=[];var n=null;var a=i.Type.INFORMATION;if(typeof e==="string"){r.push({msg:e,type:t!==undefined?t:a})}else if(Array.isArray(e)){e.forEach(function(i){if(typeof e==="string"){n={msg:i,type:t!==undefined?t:a}}else{n=i;if(t!==undefined){n.type=t}}r.push(n)},this)}else{n=e;if(t!==undefined){n.type=t}if(n.type===undefined){n.type=a}r.push(n)}return r};i.Type={ERROR:"error",INFORMATION:"information",SUCCESS:"success",WARNING:"warning"};t["a"]=i},function(e,t,r){"use strict";var i=r(3);var n=r(36);var a=r(247);var o=r(44);var s=r(65);var l=r(2);var u=function e(t){o["a"].call(this);this.element=t.element?t.element:null;this.target_=null;this.map_=null;this.listenerKeys=[];this.render=t.render?t.render:n["c"];if(t.target){this.setTarget(t.target)}};Object(i["d"])(u,o["a"]);u.prototype.disposeInternal=function(){Object(s["e"])(this.element);o["a"].prototype.disposeInternal.call(this)};u.prototype.getMap=function(){return this.map_};u.prototype.setMap=function(e){if(this.map_){Object(s["e"])(this.element)}for(var t=0,r=this.listenerKeys.length;t<r;++t){Object(l["e"])(this.listenerKeys[t])}this.listenerKeys.length=0;this.map_=e;if(this.map_){var i=this.target_?this.target_:e.getOverlayContainerStopEvent();i.appendChild(this.element);if(this.render!==n["c"]){this.listenerKeys.push(Object(l["a"])(e,a["a"].POSTRENDER,this.render,this))}e.render()}};u.prototype.setTarget=function(e){this.target_=typeof e==="string"?document.getElementById(e):e};t["a"]=u},function(e,t,r){"use strict";var i=r(346);var n=r(3);var a=r(36);var o=r(22);function s(e){return function(t){if(t){return[Object(o["a"])(t[0],e[0],e[2]),Object(o["a"])(t[1],e[1],e[3])]}else{return undefined}}}function l(e){return e}var u=r(44);var c=r(9);function f(e){return function(t,r,i){if(t!==undefined){var n=Object(c["h"])(e,t,i);n=Object(o["a"])(n+r,0,e.length-1);var a=Math.floor(n);if(n!=a&&a<e.length-1){var s=e[a]/e[a+1];return e[a]/Math.pow(s,n-a)}else{return e[a]}}else{return undefined}}}function h(e,t,r){return function(i,n,a){if(i!==undefined){var o=-a/2+.5;var s=Math.floor(Math.log(t/i)/Math.log(e)+o);var l=Math.max(s+n,0);if(r!==undefined){l=Math.min(l,r)}return t/Math.pow(e,l)}else{return undefined}}}var d=r(202);var p=r(64);var v={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};var g=r(39);var m=r(27);var y=r(125);var _=r(5);var b=r(7);var w=r(49);var S=r(85);var C=r(11);var x=r(93);var O=r(12);var T=0;var E=function e(t){u["a"].call(this);var r=Object(C["a"])({},t);this.hints_=[0,0];this.animations_=[];this.updateAnimationKey_;this.updateAnimations_=this.updateAnimations_.bind(this);this.projection_=Object(O["d"])(r.projection,"EPSG:3857");this.applyOptions_(r)};Object(n["d"])(E,u["a"]);E.prototype.applyOptions_=function(e){var t={};t[v.CENTER]=e.center!==undefined?e.center:null;var r=j(e);this.maxResolution_=r.maxResolution;this.minResolution_=r.minResolution;this.zoomFactor_=r.zoomFactor;this.resolutions_=e.resolutions;this.minZoom_=r.minZoom;var i=M(e);var n=r.constraint;var a=A(e);this.constraints_={center:i,resolution:n,rotation:a};if(e.resolution!==undefined){t[v.RESOLUTION]=e.resolution}else if(e.zoom!==undefined){t[v.RESOLUTION]=this.constrainResolution(this.maxResolution_,e.zoom-this.minZoom_);if(this.resolutions_){t[v.RESOLUTION]=Object(o["a"])(Number(this.getResolution()||t[v.RESOLUTION]),this.minResolution_,this.maxResolution_)}}t[v.ROTATION]=e.rotation!==undefined?e.rotation:0;this.setProperties(t);this.options_=e};E.prototype.getUpdatedOptions_=function(e){var t=Object(C["a"])({},this.options_);if(t.resolution!==undefined){t.resolution=this.getResolution()}else{t.zoom=this.getZoom()}t.center=this.getCenter();t.rotation=this.getRotation();return Object(C["a"])({},t,e)};E.prototype.animate=function(e){var t=arguments.length;var r=void 0;if(t>1&&typeof arguments[t-1]==="function"){r=arguments[t-1];--t}if(!this.isDef()){var i=arguments[t-1];if(i.center){this.setCenter(i.center)}if(i.zoom!==undefined){this.setZoom(i.zoom)}if(i.rotation!==undefined){this.setRotation(i.rotation)}if(r){setTimeout(function(){r(true)},0)}return}var n=Date.now();var a=this.getCenter().slice();var s=this.getResolution();var l=this.getRotation();var u=[];for(var c=0;c<t;++c){var f=arguments[c];var h={start:n,complete:false,anchor:f.anchor,duration:f.duration!==undefined?f.duration:1e3,easing:f.easing||y["c"]};if(f.center){h.sourceCenter=a;h.targetCenter=f.center;a=h.targetCenter}if(f.zoom!==undefined){h.sourceResolution=s;h.targetResolution=this.constrainResolution(this.maxResolution_,f.zoom-this.minZoom_,0);s=h.targetResolution}else if(f.resolution){h.sourceResolution=s;h.targetResolution=f.resolution;s=h.targetResolution}if(f.rotation!==undefined){h.sourceRotation=l;var d=Object(o["d"])(f.rotation-l+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=l+d;l=h.targetRotation}h.callback=r;if(P(h)){h.complete=true}else{n+=h.duration}u.push(h)}this.animations_.push(u);this.setHint(p["a"].ANIMATING,1);this.updateAnimations_()};E.prototype.getAnimating=function(){return this.hints_[p["a"].ANIMATING]>0};E.prototype.getInteracting=function(){return this.hints_[p["a"].INTERACTING]>0};E.prototype.cancelAnimations=function(){this.setHint(p["a"].ANIMATING,-this.hints_[p["a"].ANIMATING]);for(var e=0,t=this.animations_.length;e<t;++e){var r=this.animations_[e];if(r[0].callback){r[0].callback(false)}}this.animations_.length=0};E.prototype.updateAnimations_=function(){var e=this;if(this.updateAnimationKey_!==undefined){cancelAnimationFrame(this.updateAnimationKey_);this.updateAnimationKey_=undefined}if(!this.getAnimating()){return}var t=Date.now();var r=false;for(var i=this.animations_.length-1;i>=0;--i){var n=this.animations_[i];var a=true;for(var s=0,l=n.length;s<l;++s){var u=n[s];if(u.complete){continue}var c=t-u.start;var f=u.duration>0?c/u.duration:1;if(f>=1){u.complete=true;f=1}else{a=false}var h=u.easing(f);if(u.sourceCenter){var d=u.sourceCenter[0];var g=u.sourceCenter[1];var m=u.targetCenter[0];var y=u.targetCenter[1];var _=d+h*(m-d);var b=g+h*(y-g);this.set(v.CENTER,[_,b])}if(u.sourceResolution&&u.targetResolution){var w=h===1?u.targetResolution:u.sourceResolution+h*(u.targetResolution-u.sourceResolution);if(u.anchor){this.set(v.CENTER,this.calculateCenterZoom(w,u.anchor))}this.set(v.RESOLUTION,w)}if(u.sourceRotation!==undefined&&u.targetRotation!==undefined){var S=h===1?Object(o["d"])(u.targetRotation+Math.PI,2*Math.PI)-Math.PI:u.sourceRotation+h*(u.targetRotation-u.sourceRotation);if(u.anchor){this.set(v.CENTER,this.calculateCenterRotate(S,u.anchor))}this.set(v.ROTATION,S)}r=true;if(!u.complete){break}}if(a){(function(){e.animations_[i]=null;e.setHint(p["a"].ANIMATING,-1);var t=n[0].callback;if(t){setTimeout(function(){t(true)},0)}})()}}this.animations_=this.animations_.filter(Boolean);if(r&&this.updateAnimationKey_===undefined){this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_)}};E.prototype.calculateCenterRotate=function(e,t){var r=void 0;var i=this.getCenter();if(i!==undefined){r=[i[0]-t[0],i[1]-t[1]];Object(m["f"])(r,e-this.getRotation());Object(m["a"])(r,t)}return r};E.prototype.calculateCenterZoom=function(e,t){var r=void 0;var i=this.getCenter();var n=this.getResolution();if(i!==undefined&&n!==undefined){var a=t[0]-e*(t[0]-i[0])/n;var o=t[1]-e*(t[1]-i[1])/n;r=[a,o]}return r};E.prototype.getSizeFromViewport_=function(){var e=[100,100];var t='.ol-viewport[data-view="'+Object(n["c"])(this)+'"]';var r=document.querySelector(t);if(r){var i=getComputedStyle(r);e[0]=parseInt(i.width,10);e[1]=parseInt(i.height,10)}return e};E.prototype.constrainCenter=function(e){return this.constraints_.center(e)};E.prototype.constrainResolution=function(e,t,r){var i=t||0;var n=r||0;return this.constraints_.resolution(e,i,n)};E.prototype.constrainRotation=function(e,t){var r=t||0;return this.constraints_.rotation(e,r)};E.prototype.getCenter=function(){return this.get(v.CENTER)};E.prototype.getConstraints=function(){return this.constraints_};E.prototype.getHints=function(e){if(e!==undefined){e[0]=this.hints_[0];e[1]=this.hints_[1];return e}else{return this.hints_.slice()}};E.prototype.calculateExtent=function(e){var t=e||this.getSizeFromViewport_();var r=this.getCenter();Object(g["a"])(r,1);var i=this.getResolution();Object(g["a"])(i!==undefined,2);var n=this.getRotation();Object(g["a"])(n!==undefined,3);return Object(_["z"])(r,i,n,t)};E.prototype.getMaxResolution=function(){return this.maxResolution_};E.prototype.getMinResolution=function(){return this.minResolution_};E.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)};E.prototype.setMaxZoom=function(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))};E.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)};E.prototype.setMinZoom=function(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))};E.prototype.getProjection=function(){return this.projection_};E.prototype.getResolution=function(){return this.get(v.RESOLUTION)};E.prototype.getResolutions=function(){return this.resolutions_};E.prototype.getResolutionForExtent=function(e,t){var r=t||this.getSizeFromViewport_();var i=Object(_["E"])(e)/r[0];var n=Object(_["A"])(e)/r[1];return Math.max(i,n)};E.prototype.getResolutionForValueFunction=function(e){var t=e||2;var r=this.maxResolution_;var i=this.minResolution_;var n=Math.log(r/i)/Math.log(t);return function(e){var i=r/Math.pow(t,e*n);return i}};E.prototype.getRotation=function(){return this.get(v.ROTATION)};E.prototype.getValueForResolutionFunction=function(e){var t=e||2;var r=this.maxResolution_;var i=this.minResolution_;var n=Math.log(r/i)/Math.log(t);return function(e){var i=Math.log(r/e)/Math.log(t)/n;return i}};E.prototype.getState=function(){var e=this.getCenter();var t=this.getProjection();var r=this.getResolution();var i=this.getRotation();return{center:e.slice(),projection:t!==undefined?t:null,resolution:r,rotation:i,zoom:this.getZoom()}};E.prototype.getZoom=function(){var e=void 0;var t=this.getResolution();if(t!==undefined){e=this.getZoomForResolution(t)}return e};E.prototype.getZoomForResolution=function(e){var t=this.minZoom_||0;var r=void 0,i=void 0;if(this.resolutions_){var n=Object(c["h"])(this.resolutions_,e,1);t=n;r=this.resolutions_[n];if(n==this.resolutions_.length-1){i=2}else{i=r/this.resolutions_[n+1]}}else{r=this.maxResolution_;i=this.zoomFactor_}return t+Math.log(r/e)/Math.log(i)};E.prototype.getResolutionForZoom=function(e){return this.constrainResolution(this.maxResolution_,e-this.minZoom_,0)};E.prototype.fit=function(e,t){var r=t||{};var i=r.size;if(!i){i=this.getSizeFromViewport_()}var n=void 0;if(!(e instanceof S["a"])){Object(g["a"])(Array.isArray(e),24);Object(g["a"])(!Object(_["H"])(e),25);n=Object(w["c"])(e)}else if(e.getType()===b["a"].CIRCLE){e=e.getExtent();n=Object(w["c"])(e);n.rotate(this.getRotation(),Object(_["x"])(e))}else{n=e}var o=r.padding!==undefined?r.padding:[0,0,0,0];var s=r.constrainResolution!==undefined?r.constrainResolution:true;var l=r.nearest!==undefined?r.nearest:false;var u=void 0;if(r.minResolution!==undefined){u=r.minResolution}else if(r.maxZoom!==undefined){u=this.constrainResolution(this.maxResolution_,r.maxZoom-this.minZoom_,0)}else{u=0}var c=n.getFlatCoordinates();var f=this.getRotation();var h=Math.cos(-f);var d=Math.sin(-f);var p=+Infinity;var v=+Infinity;var m=-Infinity;var y=-Infinity;var C=n.getStride();for(var x=0,O=c.length;x<O;x+=C){var T=c[x]*h-c[x+1]*d;var E=c[x]*d+c[x+1]*h;p=Math.min(p,T);v=Math.min(v,E);m=Math.max(m,T);y=Math.max(y,E)}var M=this.getResolutionForExtent([p,v,m,y],[i[0]-o[1]-o[3],i[1]-o[0]-o[2]]);M=isNaN(M)?u:Math.max(M,u);if(s){var j=this.constrainResolution(M,0,0);if(!l&&j<M){j=this.constrainResolution(j,-1,0)}M=j}d=-d;var A=(p+m)/2;var P=(v+y)/2;A+=(o[1]-o[3])/2*M;P+=(o[0]-o[2])/2*M;var k=A*h-P*d;var I=P*h+A*d;var D=[k,I];var R=r.callback?r.callback:a["c"];if(r.duration!==undefined){this.animate({resolution:M,center:D,duration:r.duration,easing:r.easing},R)}else{this.setResolution(M);this.setCenter(D);setTimeout(R.bind(undefined,true),0)}};E.prototype.centerOn=function(e,t,r){var i=this.getRotation();var n=Math.cos(-i);var a=Math.sin(-i);var o=e[0]*n-e[1]*a;var s=e[1]*n+e[0]*a;var l=this.getResolution();o+=(t[0]/2-r[0])*l;s+=(r[1]-t[1]/2)*l;a=-a;var u=o*n-s*a;var c=s*n+o*a;this.setCenter([u,c])};E.prototype.isDef=function(){return!!this.getCenter()&&this.getResolution()!==undefined};E.prototype.rotate=function(e,t){if(t!==undefined){var r=this.calculateCenterRotate(e,t);this.setCenter(r)}this.setRotation(e)};E.prototype.setCenter=function(e){this.set(v.CENTER,e);if(this.getAnimating()){this.cancelAnimations()}};E.prototype.setHint=function(e,t){this.hints_[e]+=t;this.changed();return this.hints_[e]};E.prototype.setResolution=function(e){this.set(v.RESOLUTION,e);if(this.getAnimating()){this.cancelAnimations()}};E.prototype.setRotation=function(e){this.set(v.ROTATION,e);if(this.getAnimating()){this.cancelAnimations()}};E.prototype.setZoom=function(e){this.setResolution(this.getResolutionForZoom(e))};function M(e){if(e.extent!==undefined){return s(e.extent)}else{return l}}function j(e){var t=void 0;var r=void 0;var n=void 0;var a=28;var o=2;var s=e.minZoom!==undefined?e.minZoom:T;var l=e.maxZoom!==undefined?e.maxZoom:a;var u=e.zoomFactor!==undefined?e.zoomFactor:o;if(e.resolutions!==undefined){var c=e.resolutions;r=c[s];n=c[l]!==undefined?c[l]:c[c.length-1];t=f(c)}else{var d=Object(O["d"])(e.projection,"EPSG:3857");var p=d.getExtent();var v=!p?360*x["a"][x["b"].DEGREES]/d.getMetersPerUnit():Math.max(Object(_["E"])(p),Object(_["A"])(p));var g=v/i["b"]/Math.pow(o,T);var m=g/Math.pow(o,a-T);r=e.maxResolution;if(r!==undefined){s=0}else{r=g/Math.pow(u,s)}n=e.minResolution;if(n===undefined){if(e.maxZoom!==undefined){if(e.maxResolution!==undefined){n=r/Math.pow(u,l)}else{n=g/Math.pow(u,l)}}else{n=m}}l=s+Math.floor(Math.log(r/n)/Math.log(u));n=r/Math.pow(u,l-s);t=h(u,r,l-s)}return{constraint:t,maxResolution:r,minResolution:n,minZoom:s,zoomFactor:u}}function A(e){var t=e.enableRotation!==undefined?e.enableRotation:true;if(t){var r=e.constrainRotation;if(r===undefined||r===true){return Object(d["b"])()}else if(r===false){return d["d"]}else if(typeof r==="number"){return Object(d["a"])(r)}else{return d["d"]}}else{return d["c"]}}function P(e){if(e.sourceCenter&&e.targetCenter){if(!Object(m["e"])(e.sourceCenter,e.targetCenter)){return false}}if(e.sourceResolution!==e.targetResolution){return false}if(e.sourceRotation!==e.targetRotation){return false}return true}var k=t["a"]=E},function(e,t,r){"use strict";r.d(t,"b",function(){return l});r.d(t,"a",function(){return c});r.d(t,"c",function(){return f});var i=r(13);var n=r(57);var a=r(81);var o=r(32);var s=i["a"].momentProperties=[];function l(e,t){var r,i,n;if(!Object(a["a"])(t._isAMomentObject)){e._isAMomentObject=t._isAMomentObject}if(!Object(a["a"])(t._i)){e._i=t._i}if(!Object(a["a"])(t._f)){e._f=t._f}if(!Object(a["a"])(t._l)){e._l=t._l}if(!Object(a["a"])(t._strict)){e._strict=t._strict}if(!Object(a["a"])(t._tzm)){e._tzm=t._tzm}if(!Object(a["a"])(t._isUTC)){e._isUTC=t._isUTC}if(!Object(a["a"])(t._offset)){e._offset=t._offset}if(!Object(a["a"])(t._pf)){e._pf=Object(o["a"])(t)}if(!Object(a["a"])(t._locale)){e._locale=t._locale}if(s.length>0){for(r=0;r<s.length;r++){i=s[r];n=t[i];if(!Object(a["a"])(n)){e[i]=n}}}return e}var u=false;function c(e){l(this,e);this._d=new Date(e._d!=null?e._d.getTime():NaN);if(!this.isValid()){this._d=new Date(NaN)}if(u===false){u=true;i["a"].updateOffset(this);u=false}}function f(e){return e instanceof c||e!=null&&e._isAMomentObject!=null}},function(e,t,r){(function(e,i){true?i(t,r(129)):undefined})(this,function(e,t){"use strict";function r(e,t,r,i,n){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*r+(1+3*e+3*a-3*o)*i+o*n)/6}function i(e){var t=e.length-1;return function(i){var n=i<=0?i=0:i>=1?(i=1,t-1):Math.floor(i*t),a=e[n],o=e[n+1],s=n>0?e[n-1]:2*a-o,l=n<t-1?e[n+2]:2*o-a;return r((i-n/t)*t,s,a,o,l)}}function n(e){var t=e.length;return function(i){var n=Math.floor(((i%=1)<0?++i:i)*t),a=e[(n+t-1)%t],o=e[n%t],s=e[(n+1)%t],l=e[(n+2)%t];return r((i-n/t)*t,a,o,s,l)}}function a(e){return function(){return e}}function o(e,t){return function(r){return e+r*t}}function s(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(i){return Math.pow(e+i*t,r)}}function l(e,t){var r=t-e;return r?o(e,r>180||r<-180?r-360*Math.round(r/360):r):a(isNaN(e)?t:e)}function u(e){return(e=+e)===1?c:function(t,r){return r-t?s(t,r,e):a(isNaN(t)?r:t)}}function c(e,t){var r=t-e;return r?o(e,r):a(isNaN(e)?t:e)}var f=function e(r){var i=u(r);function n(e,r){var n=i((e=t.rgb(e)).r,(r=t.rgb(r)).r),a=i(e.g,r.g),o=i(e.b,r.b),s=c(e.opacity,r.opacity);return function(t){e.r=n(t);e.g=a(t);e.b=o(t);e.opacity=s(t);return e+""}}n.gamma=e;return n}(1);function h(e){return function(r){var i=r.length,n=new Array(i),a=new Array(i),o=new Array(i),s,l;for(s=0;s<i;++s){l=t.rgb(r[s]);n[s]=l.r||0;a[s]=l.g||0;o[s]=l.b||0}n=e(n);a=e(a);o=e(o);l.opacity=1;return function(e){l.r=n(e);l.g=a(e);l.b=o(e);return l+""}}}var d=h(i);var p=h(n);function v(e,t){var r=t?t.length:0,i=e?Math.min(r,e.length):0,n=new Array(i),a=new Array(r),o;for(o=0;o<i;++o)n[o]=x(e[o],t[o]);for(;o<r;++o)a[o]=t[o];return function(e){for(o=0;o<i;++o)a[o]=n[o](e);return a}}function g(e,t){var r=new Date;return e=+e,t-=e,function(i){return r.setTime(e+t*i),r}}function m(e,t){return e=+e,t-=e,function(r){return e+t*r}}function y(e,t){var r={},i={},n;if(e===null||typeof e!=="object")e={};if(t===null||typeof t!=="object")t={};for(n in t){if(n in e){r[n]=x(e[n],t[n])}else{i[n]=t[n]}}return function(e){for(n in r)i[n]=r[n](e);return i}}var _=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,b=new RegExp(_.source,"g");function w(e){return function(){return e}}function S(e){return function(t){return e(t)+""}}function C(e,t){var r=_.lastIndex=b.lastIndex=0,i,n,a,o=-1,s=[],l=[];e=e+"",t=t+"";while((i=_.exec(e))&&(n=b.exec(t))){if((a=n.index)>r){a=t.slice(r,a);if(s[o])s[o]+=a;else s[++o]=a}if((i=i[0])===(n=n[0])){if(s[o])s[o]+=n;else s[++o]=n}else{s[++o]=null;l.push({i:o,x:m(i,n)})}r=b.lastIndex}if(r<t.length){a=t.slice(r);if(s[o])s[o]+=a;else s[++o]=a}return s.length<2?l[0]?S(l[0].x):w(t):(t=l.length,function(e){for(var r=0,i;r<t;++r)s[(i=l[r]).i]=i.x(e);return s.join("")})}function x(e,r){var i=typeof r,n;return r==null||i==="boolean"?a(r):(i==="number"?m:i==="string"?(n=t.color(r))?(r=n,f):C:r instanceof t.color?f:r instanceof Date?g:Array.isArray(r)?v:typeof r.valueOf!=="function"&&typeof r.toString!=="function"||isNaN(r)?y:m)(e,r)}function O(e){var t=e.length;return function(r){return e[Math.max(0,Math.min(t-1,Math.floor(r*t)))]}}function T(e,t){var r=l(+e,+t);return function(e){var t=r(e);return t-360*Math.floor(t/360)}}function E(e,t){return e=+e,t-=e,function(r){return Math.round(e+t*r)}}var M=180/Math.PI;var j={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function A(e,t,r,i,n,a){var o,s,l;if(o=Math.sqrt(e*e+t*t))e/=o,t/=o;if(l=e*r+t*i)r-=e*l,i-=t*l;if(s=Math.sqrt(r*r+i*i))r/=s,i/=s,l/=s;if(e*i<t*r)e=-e,t=-t,l=-l,o=-o;return{translateX:n,translateY:a,rotate:Math.atan2(t,e)*M,skewX:Math.atan(l)*M,scaleX:o,scaleY:s}}var P,k,I,D;function R(e){if(e==="none")return j;if(!P)P=document.createElement("DIV"),k=document.documentElement,I=document.defaultView;P.style.transform=e;e=I.getComputedStyle(k.appendChild(P),null).getPropertyValue("transform");k.removeChild(P);e=e.slice(7,-1).split(",");return A(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5])}function L(e){if(e==null)return j;if(!D)D=document.createElementNS("http://www.w3.org/2000/svg","g");D.setAttribute("transform",e);if(!(e=D.transform.baseVal.consolidate()))return j;e=e.matrix;return A(e.a,e.b,e.c,e.d,e.e,e.f)}function $(e,t,r,i){function n(e){return e.length?e.pop()+" ":""}function a(e,i,n,a,o,s){if(e!==n||i!==a){var l=o.push("translate(",null,t,null,r);s.push({i:l-4,x:m(e,n)},{i:l-2,x:m(i,a)})}else if(n||a){o.push("translate("+n+t+a+r)}}function o(e,t,r,a){if(e!==t){if(e-t>180)t+=360;else if(t-e>180)e+=360;a.push({i:r.push(n(r)+"rotate(",null,i)-2,x:m(e,t)})}else if(t){r.push(n(r)+"rotate("+t+i)}}function s(e,t,r,a){if(e!==t){a.push({i:r.push(n(r)+"skewX(",null,i)-2,x:m(e,t)})}else if(t){r.push(n(r)+"skewX("+t+i)}}function l(e,t,r,i,a,o){if(e!==r||t!==i){var s=a.push(n(a)+"scale(",null,",",null,")");o.push({i:s-4,x:m(e,r)},{i:s-2,x:m(t,i)})}else if(r!==1||i!==1){a.push(n(a)+"scale("+r+","+i+")")}}return function(t,r){var i=[],n=[];t=e(t),r=e(r);a(t.translateX,t.translateY,r.translateX,r.translateY,i,n);o(t.rotate,r.rotate,i,n);s(t.skewX,r.skewX,i,n);l(t.scaleX,t.scaleY,r.scaleX,r.scaleY,i,n);t=r=null;return function(e){var t=-1,r=n.length,a;while(++t<r)i[(a=n[t]).i]=a.x(e);return i.join("")}}}var N=$(R,"px, ","px)","deg)");var F=$(L,", ",")",")");var G=Math.SQRT2,U=2,H=4,Y=1e-12;function W(e){return((e=Math.exp(e))+1/e)/2}function V(e){return((e=Math.exp(e))-1/e)/2}function z(e){return((e=Math.exp(2*e))-1)/(e+1)}function q(e,t){var r=e[0],i=e[1],n=e[2],a=t[0],o=t[1],s=t[2],l=a-r,u=o-i,c=l*l+u*u,f,h;if(c<Y){h=Math.log(s/n)/G;f=function(e){return[r+e*l,i+e*u,n*Math.exp(G*e*h)]}}else{var d=Math.sqrt(c),p=(s*s-n*n+H*c)/(2*n*U*d),v=(s*s-n*n-H*c)/(2*s*U*d),g=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(v*v+1)-v);h=(m-g)/G;f=function(e){var t=e*h,a=W(g),o=n/(U*d)*(a*z(G*t+g)-V(g));return[r+o*l,i+o*u,n*a/W(G*t+g)]}}f.duration=h*1e3;return f}function B(e){return function(r,i){var n=e((r=t.hsl(r)).h,(i=t.hsl(i)).h),a=c(r.s,i.s),o=c(r.l,i.l),s=c(r.opacity,i.opacity);return function(e){r.h=n(e);r.s=a(e);r.l=o(e);r.opacity=s(e);return r+""}}}var X=B(l);var K=B(c);function Z(e,r){var i=c((e=t.lab(e)).l,(r=t.lab(r)).l),n=c(e.a,r.a),a=c(e.b,r.b),o=c(e.opacity,r.opacity);return function(t){e.l=i(t);e.a=n(t);e.b=a(t);e.opacity=o(t);return e+""}}function Q(e){return function(r,i){var n=e((r=t.hcl(r)).h,(i=t.hcl(i)).h),a=c(r.c,i.c),o=c(r.l,i.l),s=c(r.opacity,i.opacity);return function(e){r.h=n(e);r.c=a(e);r.l=o(e);r.opacity=s(e);return r+""}}}var J=Q(l);var ee=Q(c);function te(e){return function r(i){i=+i;function n(r,n){var a=e((r=t.cubehelix(r)).h,(n=t.cubehelix(n)).h),o=c(r.s,n.s),s=c(r.l,n.l),l=c(r.opacity,n.opacity);return function(e){r.h=a(e);r.s=o(e);r.l=s(Math.pow(e,i));r.opacity=l(e);return r+""}}n.gamma=r;return n}(1)}var re=te(l);var ie=te(c);function ne(e,t){var r=0,i=t.length-1,n=t[0],a=new Array(i<0?0:i);while(r<i)a[r]=e(n,n=t[++r]);return function(e){var t=Math.max(0,Math.min(i-1,Math.floor(e*=i)));return a[t](e-t)}}function ae(e,t){var r=new Array(t);for(var i=0;i<t;++i)r[i]=e(i/(t-1));return r}e.interpolate=x;e.interpolateArray=v;e.interpolateBasis=i;e.interpolateBasisClosed=n;e.interpolateDate=g;e.interpolateDiscrete=O;e.interpolateHue=T;e.interpolateNumber=m;e.interpolateObject=y;e.interpolateRound=E;e.interpolateString=C;e.interpolateTransformCss=N;e.interpolateTransformSvg=F;e.interpolateZoom=q;e.interpolateRgb=f;e.interpolateRgbBasis=d;e.interpolateRgbBasisClosed=p;e.interpolateHsl=X;e.interpolateHslLong=K;e.interpolateLab=Z;e.interpolateHcl=J;e.interpolateHclLong=ee;e.interpolateCubehelix=re;e.interpolateCubehelixLong=ie;e.piecewise=ne;e.quantize=ae;Object.defineProperty(e,"__esModule",{value:true})})},function(e,t,r){"use strict";var i=r(3);var n=r(28);var a=r(95);var o=r(223);var s=r(9);var l=r(39);var u=r(2);var c=r(56);var f=r(16);var h=r(5);var d=r(36);var p=r(201);function v(e,t,r,i){return function(n,a,o){var s=new XMLHttpRequest;s.open("GET",typeof e==="function"?e(n,a,o):e,true);if(t.getType()==p["a"].ARRAY_BUFFER){s.responseType="arraybuffer"}s.onload=function(e){if(!s.status||s.status>=200&&s.status<300){var n=t.getType();var a=void 0;if(n==p["a"].JSON||n==p["a"].TEXT){a=s.responseText}else if(n==p["a"].XML){a=s.responseXML;if(!a){a=(new DOMParser).parseFromString(s.responseText,"application/xml")}}else if(n==p["a"].ARRAY_BUFFER){a=s.response}if(a){r.call(this,t.readFeatures(a,{featureProjection:o}),t.readProjection(a),t.getLastExtent())}else{i.call(this)}}else{i.call(this)}}.bind(this);s.onerror=function(){i.call(this)}.bind(this);s.send()}}function g(e,t){return v(e,t,function(e,t){this.addFeatures(e)},d["c"])}function m(e,t){return[[-Infinity,-Infinity,Infinity,Infinity]]}function y(e,t){return[e]}function _(e){return function(t,r){var i=e.getZForResolution(r);var n=e.getTileRangeForExtentAndZ(t,i);var a=[];var o=[i,0,0];for(o[1]=n.minX;o[1]<=n.maxX;++o[1]){for(o[2]=n.minY;o[2]<=n.maxY;++o[2]){a.push(e.getTileCoordExtent(o))}}return a}}var b=r(11);var w=r(254);var S=r(252);var C=r(150);var x=r(268);r.d(t,"a",function(){return O});var O=function e(t,r){c["a"].call(this,t);this.feature=r};Object(i["d"])(O,c["a"]);var T=function e(t){var r=t||{};w["a"].call(this,{attributions:r.attributions,projection:undefined,state:S["a"].READY,wrapX:r.wrapX!==undefined?r.wrapX:true});this.loader_=d["c"];this.format_=r.format;this.overlaps_=r.overlaps==undefined?true:r.overlaps;this.url_=r.url;if(r.loader!==undefined){this.loader_=r.loader}else if(this.url_!==undefined){Object(l["a"])(this.format_,7);this.loader_=g(this.url_,this.format_)}this.strategy_=r.strategy!==undefined?r.strategy:m;var i=r.useSpatialIndex!==undefined?r.useSpatialIndex:true;this.featuresRtree_=i?new x["a"]:null;this.loadedExtentsRtree_=new x["a"];this.nullGeometryFeatures_={};this.idIndex_={};this.undefIdIndex_={};this.featureChangeKeys_={};this.featuresCollection_=null;var a=void 0,o=void 0;if(r.features instanceof n["b"]){a=r.features;o=a.getArray()}else if(Array.isArray(r.features)){o=r.features}if(!i&&a===undefined){a=new n["b"](o)}if(o!==undefined){this.addFeaturesInternal(o)}if(a!==undefined){this.bindFeaturesCollection_(a)}};Object(i["d"])(T,w["a"]);T.prototype.addFeature=function(e){this.addFeatureInternal(e);this.changed()};T.prototype.addFeatureInternal=function(e){var t=Object(i["c"])(e).toString();if(!this.addToIndex_(t,e)){return}this.setupChangeEvents_(t,e);var r=e.getGeometry();if(r){var n=r.getExtent();if(this.featuresRtree_){this.featuresRtree_.insert(n,e)}}else{this.nullGeometryFeatures_[t]=e}this.dispatchEvent(new O(C["a"].ADDFEATURE,e))};T.prototype.setupChangeEvents_=function(e,t){this.featureChangeKeys_[e]=[Object(u["a"])(t,f["a"].CHANGE,this.handleFeatureChange_,this),Object(u["a"])(t,o["a"].PROPERTYCHANGE,this.handleFeatureChange_,this)]};T.prototype.addToIndex_=function(e,t){var r=true;var i=t.getId();if(i!==undefined){if(!(i.toString()in this.idIndex_)){this.idIndex_[i.toString()]=t}else{r=false}}else{Object(l["a"])(!(e in this.undefIdIndex_),30);this.undefIdIndex_[e]=t}return r};T.prototype.addFeatures=function(e){this.addFeaturesInternal(e);this.changed()};T.prototype.addFeaturesInternal=function(e){var t=[];var r=[];var n=[];for(var a=0,o=e.length;a<o;a++){var s=e[a];var l=Object(i["c"])(s).toString();if(this.addToIndex_(l,s)){r.push(s)}}for(var u=0,c=r.length;u<c;u++){var f=r[u];var h=Object(i["c"])(f).toString();this.setupChangeEvents_(h,f);var d=f.getGeometry();if(d){var p=d.getExtent();t.push(p);n.push(f)}else{this.nullGeometryFeatures_[h]=f}}if(this.featuresRtree_){this.featuresRtree_.load(t,n)}for(var v=0,g=r.length;v<g;v++){this.dispatchEvent(new O(C["a"].ADDFEATURE,r[v]))}};T.prototype.bindFeaturesCollection_=function(e){var t=false;Object(u["a"])(this,C["a"].ADDFEATURE,function(r){if(!t){t=true;e.push(r.feature);t=false}});Object(u["a"])(this,C["a"].REMOVEFEATURE,function(r){if(!t){t=true;e.remove(r.feature);t=false}});Object(u["a"])(e,a["a"].ADD,function(e){if(!t){t=true;this.addFeature(e.element);t=false}},this);Object(u["a"])(e,a["a"].REMOVE,function(e){if(!t){t=true;this.removeFeature(e.element);t=false}},this);this.featuresCollection_=e};T.prototype.clear=function(e){if(e){for(var t in this.featureChangeKeys_){var r=this.featureChangeKeys_[t];r.forEach(u["e"])}if(!this.featuresCollection_){this.featureChangeKeys_={};this.idIndex_={};this.undefIdIndex_={}}}else{if(this.featuresRtree_){this.featuresRtree_.forEach(this.removeFeatureInternal,this);for(var i in this.nullGeometryFeatures_){this.removeFeatureInternal(this.nullGeometryFeatures_[i])}}}if(this.featuresCollection_){this.featuresCollection_.clear()}if(this.featuresRtree_){this.featuresRtree_.clear()}this.loadedExtentsRtree_.clear();this.nullGeometryFeatures_={};var n=new O(C["a"].CLEAR);this.dispatchEvent(n);this.changed()};T.prototype.forEachFeature=function(e){if(this.featuresRtree_){return this.featuresRtree_.forEach(e)}else if(this.featuresCollection_){return this.featuresCollection_.forEach(e)}};T.prototype.forEachFeatureAtCoordinateDirect=function(e,t){var r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(r){var i=r.getGeometry();if(i.intersectsCoordinate(e)){return t(r)}else{return undefined}})};T.prototype.forEachFeatureInExtent=function(e,t){if(this.featuresRtree_){return this.featuresRtree_.forEachInExtent(e,t)}else if(this.featuresCollection_){return this.featuresCollection_.forEach(t)}};T.prototype.forEachFeatureIntersectingExtent=function(e,t){return this.forEachFeatureInExtent(e,function(r){var i=r.getGeometry();if(i.intersectsExtent(e)){var n=t(r);if(n){return n}}})};T.prototype.getFeaturesCollection=function(){return this.featuresCollection_};T.prototype.getFeatures=function(){var e=void 0;if(this.featuresCollection_){e=this.featuresCollection_.getArray()}else if(this.featuresRtree_){e=this.featuresRtree_.getAll();if(!Object(b["d"])(this.nullGeometryFeatures_)){Object(s["c"])(e,Object(b["c"])(this.nullGeometryFeatures_))}}return e};T.prototype.getFeaturesAtCoordinate=function(e){var t=[];this.forEachFeatureAtCoordinateDirect(e,function(e){t.push(e)});return t};T.prototype.getFeaturesInExtent=function(e){return this.featuresRtree_.getInExtent(e)};T.prototype.getClosestFeatureToCoordinate=function(e,t){var r=e[0];var i=e[1];var n=null;var a=[NaN,NaN];var o=Infinity;var s=[-Infinity,-Infinity,Infinity,Infinity];var l=t?t:d["b"];this.featuresRtree_.forEachInExtent(s,function(e){if(l(e)){var t=e.getGeometry();var u=o;o=t.closestPointXY(r,i,a,o);if(o<u){n=e;var c=Math.sqrt(o);s[0]=r-c;s[1]=i-c;s[2]=r+c;s[3]=i+c}}});return n};T.prototype.getExtent=function(e){return this.featuresRtree_.getExtent(e)};T.prototype.getFeatureById=function(e){var t=this.idIndex_[e.toString()];return t!==undefined?t:null};T.prototype.getFormat=function(){return this.format_};T.prototype.getOverlaps=function(){return this.overlaps_};T.prototype.getResolutions=function(){};T.prototype.getUrl=function(){return this.url_};T.prototype.handleFeatureChange_=function(e){var t=e.target;var r=Object(i["c"])(t).toString();var n=t.getGeometry();if(!n){if(!(r in this.nullGeometryFeatures_)){if(this.featuresRtree_){this.featuresRtree_.remove(t)}this.nullGeometryFeatures_[r]=t}}else{var a=n.getExtent();if(r in this.nullGeometryFeatures_){delete this.nullGeometryFeatures_[r];if(this.featuresRtree_){this.featuresRtree_.insert(a,t)}}else{if(this.featuresRtree_){this.featuresRtree_.update(a,t)}}}var o=t.getId();if(o!==undefined){var s=o.toString();if(r in this.undefIdIndex_){delete this.undefIdIndex_[r];this.idIndex_[s]=t}else{if(this.idIndex_[s]!==t){this.removeFromIdIndex_(t);this.idIndex_[s]=t}}}else{if(!(r in this.undefIdIndex_)){this.removeFromIdIndex_(t);this.undefIdIndex_[r]=t}}this.changed();this.dispatchEvent(new O(C["a"].CHANGEFEATURE,t))};T.prototype.hasFeature=function(e){var t=e.getId();if(t!==undefined){return t in this.idIndex_}else{var r=Object(i["c"])(e).toString();return r in this.undefIdIndex_}};T.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&Object(b["d"])(this.nullGeometryFeatures_)};T.prototype.loadFeatures=function(e,t,r){var i=this;var n=this.loadedExtentsRtree_;var a=this.strategy_(e,t);var o=function e(o,s){var l=a[o];var u=n.forEachInExtent(l,function(e){return Object(h["g"])(e.extent,l)});if(!u){i.loader_.call(i,l,t,r);n.insert(l,{extent:l.slice()})}};for(var s=0,l=a.length;s<l;++s){o(s,l)}};T.prototype.removeLoadedExtent=function(e){var t=this.loadedExtentsRtree_;var r=void 0;t.forEachInExtent(e,function(t){if(Object(h["p"])(t.extent,e)){r=t;return true}});if(r){t.remove(r)}};T.prototype.removeFeature=function(e){var t=Object(i["c"])(e).toString();if(t in this.nullGeometryFeatures_){delete this.nullGeometryFeatures_[t]}else{if(this.featuresRtree_){this.featuresRtree_.remove(e)}}this.removeFeatureInternal(e);this.changed()};T.prototype.removeFeatureInternal=function(e){var t=Object(i["c"])(e).toString();this.featureChangeKeys_[t].forEach(u["e"]);delete this.featureChangeKeys_[t];var r=e.getId();if(r!==undefined){delete this.idIndex_[r.toString()]}else{delete this.undefIdIndex_[t]}this.dispatchEvent(new O(C["a"].REMOVEFEATURE,e))};T.prototype.removeFromIdIndex_=function(e){var t=false;for(var r in this.idIndex_){if(this.idIndex_[r]===e){delete this.idIndex_[r];t=true;break}}return t};T.prototype.setLoader=function(e){this.loader_=e};var E=t["b"]=T},function(e,t,r){"use strict";var i=r(1);var n=function e(t){this.groups_={};this.scope_=t};n.$inject=["$rootScope"];n.$inject=["$rootScope"];n.prototype.registerTool=function(e,t,r){var n=this;var a=this.groups_[e];if(!a){a=this.groups_[e]=[]}var o=this.scope_.$watch(t.getActive,function(r,i){if(r===i){return}if(r){n.deactivateTools_(e,t)}else{n.activateDefault_(e)}});a.push({tool:t,defaultTool:r||false,unlisten:o});if(i["a"].ENABLE_ASSERTS){var s=0;a.forEach(function(e){if(e.defaultTool){s++}});i["a"].assert(s<=1,"more than one default tool in group "+e)}};n.prototype.unregisterTool=function(e,t){var r=this.groups_[e];if(r){for(var i=0;i<r.length;i++){if(r[i].tool==t){r[i].unlisten();r.splice(i,1);break}}}};n.prototype.unregisterGroup=function(e){var t=this.groups_[e];if(t){for(var r=0;r<t.length;r++){t[r].unlisten()}delete this.groups_[e]}};n.prototype.activateTool=function(e){e.setActive(true)};n.prototype.deactivateTool=function(e){e.setActive(false)};n.prototype.deactivateTools_=function(e,t){var r=this.groups_[e];for(var i=0;i<r.length;i++){if(t!=r[i].tool){r[i].tool.setActive(false)}}};n.prototype.activateDefault_=function(e){var t=this.groups_[e];var r=null;var i=false;for(var n=0;n<t.length;n++){i=i||t[n].tool.getActive();if(t[n].defaultTool){r=t[n].tool}}if(!i&&r!==null){r.setActive(true)}};n.module=angular.module("ngeoToolActivateMgr",[]);n.module.service("ngeoToolActivateMgr",n);t["a"]=n},function(e,t,r){"use strict";var i=r(1);var n=r(9);var a=r(383);var o=r(121);var s=r(132);var l=r(54);var u=r(11);var c=r(149);var f=r(248);var h=r(198);var d=r(172);var p=function e(t,r,i){this.$q_=t;this.$http_=r;this.tilesPreloadingLimit_=i};p.$inject=["$q","$http","ngeoTilesPreloadingLimit"];p.$inject=["$q","$http","ngeoTilesPreloadingLimit"];p.GROUP_KEY="groupName";p.REFRESH_PARAM="random";p.prototype.createBasicWMSLayer=function(e,t,r,i,n,a,o,l){var u={FORMAT:r,LAYERS:t};var f=void 0;if(n){u["TIME"]=n}if(i){u["SERVERTYPE"]=i;f=i.replace("qgisserver","qgis")}var h=Object.assign({},l,{url:e,params:u,serverType:f,crossOrigin:o});var d=new c["a"](h);if(a){d.updateParams(a)}return new s["a"]({source:d})};p.prototype.createBasicWMSLayerFromDataSource=function(e,t){var r=e.wmsUrl;i["a"].assert(r);var n=e.getOGCLayerNames().join(",");var a=e.ogcServerType;var o=e.ogcImageType;var s=this.createBasicWMSLayer(r,n,o,a,undefined,undefined,t);s.setVisible(e.visible);s.set("querySourceIds",[e.id]);return s};p.prototype.createWMTSLayerFromCapabilitites=function(e,t,r,i,o){var s=new a["a"];var c=new l["a"]({preload:this.tilesPreloadingLimit_});var f=this.$q_;return this.$http_.get(e,{cache:true}).then(function(a){var l=void 0;if(a.data){l=s.read(a.data)}if(l){var d=Object.assign({},o,Object(h["b"])(l,{matrixSet:r,crossOrigin:"anonymous",layer:t}));var p=new h["a"](d);if(i&&!u["d"](i)){p.updateDimensions(i)}c.setSource(p);var v=l["Contents"]["Layer"];var g=n["d"](v,function(e,r,i){return e["Identifier"]==t});c.set("capabilitiesStyles",g["Style"]);return f.resolve(c)}return f.reject("Failed to get WMTS capabilities from "+e)})};p.prototype.createWMTSLayerFromCapabilititesObj=function(e,t,r){var n=Object(h["b"])(e,{crossOrigin:"anonymous",layer:t["Identifier"]});i["a"].assert(n);var a=new h["a"](n);if(r&&!u["d"](r)){a.updateDimensions(r)}return new l["a"]({capabilitiesStyles:t["Style"],preload:Infinity,source:a})};p.prototype.createBasicGroup=function(e){var t=new o["a"];if(e){t.setLayers(e)}return t};p.prototype.getGroupFromMap=function(e,t){var r=e.getLayerGroup().getLayers();var i=void 0;r.getArray().some(function(e){if(e.get(p.GROUP_KEY)===t){i=e;return true}else{return false}});if(!i){i=this.createBasicGroup();i.set(p.GROUP_KEY,t);e.addLayer(i)}return i};p.prototype.getFlatLayers=function(e){if(e instanceof o["a"]){var t=e.getLayers().getArray();var r=t.some(function(e){return e instanceof o["a"]});if(!r){return t.slice()}}return this.getFlatLayers_(e,[],undefined)};p.prototype.getFlatLayers_=function(e,t,r){var i=this;var n=e.getOpacity();if(r!==undefined){r*=n}else{r=n}if(e instanceof o["a"]){var a=e.getLayers();a.forEach(function(e){i.getFlatLayers_(e,t,r)})}else{if(t.indexOf(e)<0){e.set("inheritedOpacity",r,true);t.push(e)}}return t};p.prototype.getLayerByName=function(e,t){var r=this;var i=null;t.some(function(t){if(t instanceof o["a"]){var n=t.getLayers().getArray();i=r.getLayerByName(e,n)}else if(t.get("layerNodeName")===e){i=t}return!!i});return i};p.prototype.getWMTSLegendURL=function(e){var t=void 0;var r=e.get("capabilitiesStyles");if(r!==undefined){var i=r[0]["legendURL"];if(i!==undefined){t=i[0]["href"]}}return t};p.prototype.getWMSLegendURL=function(e,t,r,i,n,a,o,s,l,u,c){if(!e){return undefined}var f={FORMAT:"image/png",TRANSPARENT:true,SERVICE:"WMS",VERSION:"1.1.1",REQUEST:"GetLegendGraphic",LAYER:t};if(r!==undefined){f["SCALE"]=r}if(i!==undefined){f["RULE"]=i;if(n!==undefined){f["WIDTH"]=n}if(a!==undefined){f["HEIGHT"]=a}}if(o=="qgis"){if(s!=undefined){f["DPI"]=s}if(l!=undefined&&u!=undefined&&r!=undefined&&s!=undefined&&i==undefined){f["BBOX"]=l.join(",");f["SRS"]=u;f["WIDTH"]=Math.round((l[2]-l[0])/r*39.37*s);f["HEIGHT"]=Math.round((l[3]-l[1])/r*39.37*s)}}if(c){Object.assign(f,c)}return d["a"](e,f)};p.prototype.isLayerVisible=function(e,t){if(!e.getVisible()){return false}var r=t.getView().getResolution();return r>e.getMinResolution()&&r<e.getMaxResolution()};p.prototype.refreshWMSLayer=function(e){var t=e.getSource();i["a"].assert(t instanceof c["a"]||t instanceof f["a"]);var r=t;var n=r.getParams();n[p.REFRESH_PARAM]=Math.random();r.updateParams(n)};p.prototype.setZIndexToFirstLevelChildren=function(e,t){if(!(e instanceof o["a"])){return}var r=e.getLayers();r.forEach(function(e){return e.setZIndex(t)})};p.prototype.updateWMSLayerState=function(e,t,r){if(t.length<=0){e.setVisible(false)}else{e.setVisible(true);var i=e.getSource();if(r){i.updateParams({LAYERS:t,TIME:r})}else{i.updateParams({LAYERS:t})}}};p.prototype.getQuerySourceIds=function(e){return e.get("querySourceIds")};p.module=angular.module("ngeoLayerHelper",[]).service("ngeoLayerHelper",p).value("ngeoTilesPreloadingLimit",Infinity);t["a"]=p},function(e,t,r){"use strict";var i=r(87);var n=r(57);var a=r(20);var o=r(30);var s=r(63);var l=r(6);var u=r(37);var c=r(13);var f=r(10);var h=r(26);var d=r(115);var p=r(139);function v(e,t){return(e%t+t)%t}var g=r(82);var m=r(114);var y=r(32);var _=r(111);r.d(t,"a",function(){return b});r.d(t,"b",function(){return S});r.d(t,"f",function(){return C});r.d(t,"c",function(){return x});r.d(t,"h",function(){return O});r.d(t,"g",function(){return E});r.d(t,"k",function(){return M});r.d(t,"e",function(){return j});r.d(t,"d",function(){return A});r.d(t,"j",function(){return k});r.d(t,"i",function(){return D});function b(e,t){if(isNaN(e)||isNaN(t)){return NaN}var r=v(t,12);e+=(t-r)/12;return r===1?Object(_["d"])(e)?29:28:31-r%7%2}Object(a["a"])("M",["MM",2],"Mo",function(){return this.month()+1});Object(a["a"])("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});Object(a["a"])("MMMM",0,0,function(e){return this.localeData().months(this,e)});Object(o["a"])("month","M");Object(s["a"])("month",8);Object(l["a"])("M",l["d"]);Object(l["a"])("MM",l["d"],l["h"]);Object(l["a"])("MMM",function(e,t){return t.monthsShortRegex(e)});Object(l["a"])("MMMM",function(e,t){return t.monthsRegex(e)});Object(u["a"])(["M","MM"],function(e,t){t[f["e"]]=Object(h["a"])(e)-1});Object(u["a"])(["MMM","MMMM"],function(e,t,r,i){var n=r._locale.monthsParse(e,i,r._strict);if(n!=null){t[f["e"]]=n}else{Object(y["a"])(r).invalidMonth=e}});var w=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;var S="January_February_March_April_May_June_July_August_September_October_November_December".split("_");function C(e,t){if(!e){return Object(d["a"])(this._months)?this._months:this._months["standalone"]}return Object(d["a"])(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||w).test(t)?"format":"standalone"][e.month()]}var x="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function O(e,t){if(!e){return Object(d["a"])(this._monthsShort)?this._monthsShort:this._monthsShort["standalone"]}return Object(d["a"])(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[w.test(t)?"format":"standalone"][e.month()]}function T(e,t,r){var i,n,a,o=e.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];for(i=0;i<12;++i){a=Object(m["a"])([2e3,i]);this._shortMonthsParse[i]=this.monthsShort(a,"").toLocaleLowerCase();this._longMonthsParse[i]=this.months(a,"").toLocaleLowerCase()}}if(r){if(t==="MMM"){n=g["a"].call(this._shortMonthsParse,o);return n!==-1?n:null}else{n=g["a"].call(this._longMonthsParse,o);return n!==-1?n:null}}else{if(t==="MMM"){n=g["a"].call(this._shortMonthsParse,o);if(n!==-1){return n}n=g["a"].call(this._longMonthsParse,o);return n!==-1?n:null}else{n=g["a"].call(this._longMonthsParse,o);if(n!==-1){return n}n=g["a"].call(this._shortMonthsParse,o);return n!==-1?n:null}}}function E(e,t,r){var i,n,a;if(this._monthsParseExact){return T.call(this,e,t,r)}if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(i=0;i<12;i++){n=Object(m["a"])([2e3,i]);if(r&&!this._longMonthsParse[i]){this._longMonthsParse[i]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i");this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")}if(!r&&!this._monthsParse[i]){a="^"+this.months(n,"")+"|^"+this.monthsShort(n,"");this._monthsParse[i]=new RegExp(a.replace(".",""),"i")}if(r&&t==="MMMM"&&this._longMonthsParse[i].test(e)){return i}else if(r&&t==="MMM"&&this._shortMonthsParse[i].test(e)){return i}else if(!r&&this._monthsParse[i].test(e)){return i}}}function M(e,t){var r;if(!e.isValid()){return e}if(typeof t==="string"){if(/^\d+$/.test(t)){t=Object(h["a"])(t)}else{t=e.localeData().monthsParse(t);if(!Object(p["a"])(t)){return e}}}r=Math.min(e.date(),b(e.year(),t));e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,r);return e}function j(e){if(e!=null){M(this,e);c["a"].updateOffset(this,true);return this}else{return Object(i["a"])(this,"Month")}}function A(){return b(this.year(),this.month())}var P=l["s"];function k(e){if(this._monthsParseExact){if(!Object(n["a"])(this,"_monthsRegex")){R.call(this)}if(e){return this._monthsShortStrictRegex}else{return this._monthsShortRegex}}else{if(!Object(n["a"])(this,"_monthsShortRegex")){this._monthsShortRegex=P}return this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex}}var I=l["s"];function D(e){if(this._monthsParseExact){if(!Object(n["a"])(this,"_monthsRegex")){R.call(this)}if(e){return this._monthsStrictRegex}else{return this._monthsRegex}}else{if(!Object(n["a"])(this,"_monthsRegex")){this._monthsRegex=I}return this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex}}function R(){function e(e,t){return t.length-e.length}var t=[],r=[],i=[],n,a;for(n=0;n<12;n++){a=Object(m["a"])([2e3,n]);t.push(this.monthsShort(a,""));r.push(this.months(a,""));i.push(this.months(a,""));i.push(this.monthsShort(a,""))}t.sort(e);r.sort(e);i.sort(e);for(n=0;n<12;n++){t[n]=Object(l["t"])(t[n]);r[n]=Object(l["t"])(r[n])}for(n=0;n<24;n++){i[n]=Object(l["t"])(i[n])}this._monthsRegex=new RegExp("^("+i.join("|")+")","i");this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}},function(e,t,r){"use strict";r.d(t,"a",function(){return s});r.d(t,"b",function(){return u});var i=r(128);var n=r(13);var a=r(81);function o(e){if(n["a"].suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+e)}}function s(e,t){var r=true;return Object(i["a"])(function(){if(n["a"].deprecationHandler!=null){n["a"].deprecationHandler(null,e)}if(r){var i=[];var a;for(var s=0;s<arguments.length;s++){a="";if(typeof arguments[s]==="object"){a+="\n["+s+"] ";for(var l in arguments[0]){a+=l+": "+arguments[0][l]+", "}a=a.slice(0,-2)}else{a=arguments[s]}i.push(a)}o(e+"\nArguments: "+Array.prototype.slice.call(i).join("")+"\n"+(new Error).stack);r=false}return t.apply(this,arguments)},t)}var l={};function u(e,t){if(n["a"].deprecationHandler!=null){n["a"].deprecationHandler(e,t)}if(!l[e]){o(t);l[e]=true}}n["a"].suppressDeprecationWarnings=false;n["a"].deprecationHandler=null},function(e,t,r){"use strict";r.d(t,"a",function(){return i});function i(e){return e===void 0}},function(e,t,r){"use strict";r.d(t,"a",function(){return i});var i;if(Array.prototype.indexOf){i=Array.prototype.indexOf}else{i=function(e){var t;for(t=0;t<this.length;++t){if(this[t]===e){return t}}return-1}}},function(e,t,r){"use strict";var i=r(3);var n=r(245);var a=r(270);var o=function e(t){var r=t||{};var i=r.projection!==undefined?r.projection:"EPSG:3857";var o=r.tileGrid!==undefined?r.tileGrid:Object(a["a"])({extent:Object(a["b"])(i),maxZoom:r.maxZoom,minZoom:r.minZoom,tileSize:r.tileSize});n["a"].call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,opaque:r.opaque,projection:i,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:o,tileLoadFunction:r.tileLoadFunction,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:r.tileUrlFunction,url:r.url,urls:r.urls,wrapX:r.wrapX!==undefined?r.wrapX:true,transition:r.transition})};Object(i["d"])(o,n["a"]);var s=o;var l="&copy; "+'<a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> '+"contributors.";var u=function e(t){var r=t||{};var i=void 0;if(r.attributions!==undefined){i=r.attributions}else{i=[l]}var n=r.crossOrigin!==undefined?r.crossOrigin:"anonymous";var a=r.url!==undefined?r.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";s.call(this,{attributions:i,cacheSize:r.cacheSize,crossOrigin:n,opaque:r.opaque!==undefined?r.opaque:true,maxZoom:r.maxZoom!==undefined?r.maxZoom:19,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileLoadFunction:r.tileLoadFunction,url:a,wrapX:r.wrapX})};Object(i["d"])(u,s);var c=t["a"]=u},function(e,t,r){"use strict";r.d(t,"c",function(){return a});r.d(t,"g",function(){return o});r.d(t,"i",function(){return s});r.d(t,"d",function(){return l});r.d(t,"b",function(){return u});r.d(t,"a",function(){return c});r.d(t,"h",function(){return h});r.d(t,"f",function(){return d});r.d(t,"e",function(){return p});var i=r(3);var n=typeof navigator!=="undefined"?navigator.userAgent.toLowerCase():"";var a=n.indexOf("firefox")!==-1;var o=n.indexOf("safari")!==-1&&n.indexOf("chrom")==-1;var s=n.indexOf("webkit")!==-1&&n.indexOf("edge")==-1;var l=n.indexOf("macintosh")!==-1;var u=window.devicePixelRatio||1;var c=function(){var e=false;try{e=!!document.createElement("CANVAS").getContext("2d").setLineDash}catch(e){}return e}();var f="geolocation"in navigator;var h="ontouchstart"in window;var d="PointerEvent"in window;var p=!!navigator.msPointerEnabled;var v=i["a"]},function(e,t,r){"use strict";r.d(t,"b",function(){return d});var i=r(3);var n=r(36);var a=r(5);var o=r(117);var s=r(23);var l=r(171);var u=r(11);var c=function e(){o["a"].call(this);this.layout=s["a"].XY;this.stride=2;this.flatCoordinates=null};Object(i["d"])(c,o["a"]);function f(e){var t=void 0;if(e==2){t=s["a"].XY}else if(e==3){t=s["a"].XYZ}else if(e==4){t=s["a"].XYZM}return t}function h(e){var t=void 0;if(e==s["a"].XY){t=2}else if(e==s["a"].XYZ||e==s["a"].XYM){t=3}else if(e==s["a"].XYZM){t=4}return t}c.prototype.containsXY=n["a"];c.prototype.computeExtent=function(e){return Object(a["o"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)};c.prototype.getCoordinates=function(){};c.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)};c.prototype.getFlatCoordinates=function(){return this.flatCoordinates};c.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)};c.prototype.getLayout=function(){return this.layout};c.prototype.getSimplifiedGeometry=function(e){if(this.simplifiedGeometryRevision!=this.getRevision()){Object(u["b"])(this.simplifiedGeometryCache);this.simplifiedGeometryMaxMinSquaredTolerance=0;this.simplifiedGeometryRevision=this.getRevision()}if(e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance){return this}var t=e.toString();if(this.simplifiedGeometryCache.hasOwnProperty(t)){return this.simplifiedGeometryCache[t]}else{var r=this.getSimplifiedGeometryInternal(e);var i=r.getFlatCoordinates();if(i.length<this.flatCoordinates.length){this.simplifiedGeometryCache[t]=r;return r}else{this.simplifiedGeometryMaxMinSquaredTolerance=e;return this}}};c.prototype.getSimplifiedGeometryInternal=function(e){return this};c.prototype.getStride=function(){return this.stride};c.prototype.setFlatCoordinatesInternal=function(e,t){this.stride=h(e);this.layout=e;this.flatCoordinates=t};c.prototype.setCoordinates=function(e,t){};c.prototype.setLayout=function(e,t,r){var i=void 0;if(e){i=h(e)}else{for(var n=0;n<r;++n){if(t.length===0){this.layout=s["a"].XY;this.stride=2;return}else{t=t[0]}}i=t.length;e=f(i)}this.layout=e;this.stride=i};c.prototype.applyTransform=function(e){if(this.flatCoordinates){e(this.flatCoordinates,this.flatCoordinates,this.stride);this.changed()}};c.prototype.rotate=function(e,t){var r=this.getFlatCoordinates();if(r){var i=this.getStride();Object(l["a"])(r,0,r.length,i,e,t,r);this.changed()}};c.prototype.scale=function(e,t,r){var i=t;if(i===undefined){i=e}var n=r;if(!n){n=Object(a["x"])(this.getExtent())}var o=this.getFlatCoordinates();if(o){var s=this.getStride();Object(l["b"])(o,0,o.length,s,e,i,n,o);this.changed()}};c.prototype.translate=function(e,t){var r=this.getFlatCoordinates();if(r){var i=this.getStride();Object(l["d"])(r,0,r.length,i,e,t,r);this.changed()}};function d(e,t,r){var i=e.getFlatCoordinates();if(!i){return null}else{var n=e.getStride();return Object(l["c"])(i,0,i.length,n,t,r)}}t["a"]=c},function(e,t,r){"use strict";var i=r(1);var n=r(33);var a=r(220);var o=r(121);var s=r(118);var l=r(340);var u=r(348);var c={};c.interaction=function(e){i["a"].assertInstanceof(e,n["a"]);Object.defineProperty(e,"active",{get:function t(){return e.getActive()},set:function t(r){e.setActive(r)}})};c.layer=function(e){i["a"].assertInstanceof(e,a["a"]);Object.defineProperty(e,"visible",{configurable:true,get:function t(){return e.getVisible()},set:function t(r){e.setVisible(r)}});Object.defineProperty(e,"opacity",{configurable:true,get:function t(){return e.getOpacity()},set:function t(r){e.setOpacity(r)}})};c.layerLoading=function(e,t){var r=void 0;var n=null;var a=null;var c=h;var f=d;e.set("load_count",0,true);if(e instanceof o["a"]){e.getLayers().on("add",function(t){var r=t.element;r.set("parent_group",e)})}if(e instanceof s["a"]){r=e.getSource();if(r===null){return}else if(r instanceof u["b"]){n=["tileloadstart"];a=["tileloadend","tileloaderror"]}else if(r instanceof l["a"]){n=["imageloadstart"];a=["imageloadend","imageloaderror"]}else{i["a"].fail("unsupported source type")}r.on(n,function(){c(e);t.$applyAsync()});r.on(a,function(){f(e);t.$applyAsync()})}Object.defineProperty(e,"loading",{configurable:true,get:function t(){return e.get("load_count")>0}});function h(e){var t=e.get("load_count");var r=e.get("parent_group");e.set("load_count",++t,true);if(r){h(r)}}function d(e){var t=e.get("load_count");var r=e.get("parent_group");e.set("load_count",--t,true);if(r){d(r)}}};t["a"]=c},function(e,t,r){"use strict";r.d(t,"b",function(){return u});r.d(t,"a",function(){return c});r.d(t,"c",function(){return f});r.d(t,"d",function(){return h});r.d(t,"e",function(){return d});var i=r(30);var n=r(63);var a=r(13);var o=r(108);var s=r(79);var l=r(111);function u(e,t){return function(r){if(r!=null){f(this,e,r);a["a"].updateOffset(this,t);return this}else{return c(this,e)}}}function c(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function f(e,t,r){if(e.isValid()&&!isNaN(r)){if(t==="FullYear"&&Object(l["d"])(e.year())&&e.month()===1&&e.date()===29){e._d["set"+(e._isUTC?"UTC":"")+t](r,e.month(),Object(s["a"])(r,e.month()))}else{e._d["set"+(e._isUTC?"UTC":"")+t](r)}}}function h(e){e=Object(i["c"])(e);if(Object(o["a"])(this[e])){return this[e]()}return this}function d(e,t){if(typeof e==="object"){e=Object(i["b"])(e);var r=Object(n["b"])(e);for(var a=0;a<r.length;a++){this[r[a].unit](e[r[a].unit])}}else{e=Object(i["c"])(e);if(Object(o["a"])(this[e])){return this[e](t)}}return this}},function(e,t,r){"use strict";var i=r(1);var n=r(69);var a=r(3);var o=r(65);var s=r(12);var l=r(144);var u=r(272);var c=r(2);var f=r(33);var h=r(89);var d=r(76);var p=r(47);var v=r(38);var g=r(15);var m=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};f["a"].call(this,{handleEvent:e.handleEvent_});this.helpTooltipElement_=null;this.helpTooltipOverlay_=null;this.measureTooltipElement_=null;this.measureTooltipOverlay_=null;this.measureTooltipOverlayCoord_=null;this.sketchFeature=null;this.continueMsg=null;this.decimals=t.decimals;this.precision=t.precision;this.displayHelpTooltip_=t.displayHelpTooltip!==undefined?t.displayHelpTooltip:true;this.startMsg;if(t.startMsg!==undefined){this.startMsg=t.startMsg}else{this.startMsg=document.createElement("span");this.startMsg.textContent="Click to start drawing."}this.changeEventKey_=null;this.postcomposeEventKey_=null;var r=t.style!==undefined?t.style:[new g["c"]({fill:new p["a"]({color:"rgba(255, 255, 255, 0.2)"})}),new g["c"]({stroke:new v["a"]({color:"white",width:5})}),new g["c"]({stroke:new v["a"]({color:"#ffcc33",width:3})})];this.vectorLayer_=new h["a"]({source:new d["b"],style:r});this.drawInteraction_=this.createDrawInteraction(t.sketchStyle,this.vectorLayer_.getSource());this.shouldHandleDrawInteractionActiveChange_=true;c["a"](this.drawInteraction_,"change:active",this.handleDrawInteractionActiveChange_,this);c["a"](this.drawInteraction_,"drawstart",this.onDrawStart_,this);c["a"](this.drawInteraction_,"drawend",this.onDrawEnd_,this);c["a"](this,"change:active",this.updateState_,this)};a["d"](m,f["a"]);m.getFormattedArea=function(e,t,r,i){var n=e.clone().transform(t,"EPSG:4326");var a=Math.abs(u["a"](n,{projection:"EPSG:4326"}));return i(a,"m²","square",r)};m.getFormattedCircleArea=function(e,t,r){var i=Math.PI*Math.pow(e.getRadius(),2);return r(i,"m²","square",t)};m.getFormattedLength=function(e,t,r,i){var n=0;var a=e.getCoordinates();for(var o=0,l=a.length-1;o<l;++o){var c=s["m"](a[o],t,"EPSG:4326");var f=s["m"](a[o+1],t,"EPSG:4326");n+=u["b"](c,f)}return i(n,"m","unit",r)};m.getFormattedPoint=function(e,t,r,i){return r(e.getCoordinates(),t,i)};m.handleEvent_=function(e){if(e.type!="pointermove"||e.dragging){return true}var t=this.sketchFeature===null?this.startMsg:this.continueMsg;if(this.displayHelpTooltip_){o["d"](this.helpTooltipElement_);this.helpTooltipElement_.appendChild(t);this.helpTooltipOverlay_.setPosition(e.coordinate)}return true};m.prototype.getDrawInteraction=function(){return this.drawInteraction_};m.prototype.createDrawInteraction=function(e,t){};m.prototype.setMap=function(e){f["a"].prototype.setMap.call(this,e);this.vectorLayer_.setMap(e);var t=this.drawInteraction_.getMap();if(t!==null){t.removeInteraction(this.drawInteraction_)}if(e!==null){e.addInteraction(this.drawInteraction_)}};m.prototype.onDrawStart_=function(e){var t=this;this.sketchFeature=e.feature||e.detail.feature;this.vectorLayer_.getSource().clear(true);this.createMeasureTooltip_();var r=this.sketchFeature.getGeometry();i["a"].assert(r!==undefined);this.changeEventKey_=c["a"](r,"change",function(){t.handleMeasure(function(e,r){if(r!==null){t.measureTooltipElement_.innerHTML=e;t.measureTooltipOverlayCoord_=r}})});this.postcomposeEventKey_=c["a"](this.getMap(),"postcompose",function(){t.measureTooltipOverlay_.setPosition(t.measureTooltipOverlayCoord_)})};m.prototype.onDrawEnd_=function(e){this.measureTooltipElement_.classList.add("ngeo-tooltip-static");this.measureTooltipOverlay_.setOffset([0,-7]);var t=new n["a"]("measureend",{feature:this.sketchFeature});this.dispatchEvent(t);this.sketchFeature=null;this.unlistenerEvent_()};m.prototype.unlistenerEvent_=function(){if(this.changeEventKey_!==null&&this.postcomposeEventKey_!==null){c["e"](this.changeEventKey_);c["e"](this.postcomposeEventKey_);this.changeEventKey_=null;this.postcomposeEventKey_=null}};m.prototype.createHelpTooltip_=function(){this.removeHelpTooltip_();if(this.displayHelpTooltip_){this.helpTooltipElement_=document.createElement("div");this.helpTooltipElement_.classList.add("tooltip");this.helpTooltipOverlay_=new l["a"]({element:this.helpTooltipElement_,offset:[15,0],positioning:"center-left"});this.getMap().addOverlay(this.helpTooltipOverlay_)}};m.prototype.removeHelpTooltip_=function(){if(this.displayHelpTooltip_){this.getMap().removeOverlay(this.helpTooltipOverlay_);if(this.helpTooltipElement_!==null){this.helpTooltipElement_.parentNode.removeChild(this.helpTooltipElement_)}this.helpTooltipElement_=null;this.helpTooltipOverlay_=null}};m.prototype.createMeasureTooltip_=function(){this.removeMeasureTooltip_();this.measureTooltipElement_=document.createElement("div");this.measureTooltipElement_.classList.add("tooltip");this.measureTooltipElement_.classList.add("ngeo-tooltip-measure");this.measureTooltipOverlay_=new l["a"]({element:this.measureTooltipElement_,offset:[0,-15],positioning:"bottom-center",stopEvent:false});this.getMap().addOverlay(this.measureTooltipOverlay_)};m.prototype.removeMeasureTooltip_=function(){if(this.measureTooltipElement_!==null){this.measureTooltipElement_.parentNode.removeChild(this.measureTooltipElement_);this.measureTooltipElement_=null;this.measureTooltipOverlay_=null;this.measureTooltipOverlayCoord_=null}};m.prototype.updateState_=function(){var e=this.getActive();this.shouldHandleDrawInteractionActiveChange_=false;this.drawInteraction_.setActive(e);this.shouldHandleDrawInteractionActiveChange_=true;if(!this.getMap()){return}if(e){if(!this.measureTooltipOverlay_){this.createMeasureTooltip_();this.createHelpTooltip_()}}else{this.vectorLayer_.getSource().clear(true);this.getMap().removeOverlay(this.measureTooltipOverlay_);this.removeMeasureTooltip_();this.removeHelpTooltip_();this.unlistenerEvent_()}};m.prototype.handleMeasure=function(e){};m.prototype.getTooltipElement=function(){return this.measureTooltipElement_};m.prototype.handleDrawInteractionActiveChange_=function(){if(this.shouldHandleDrawInteractionActiveChange_){this.setActive(this.drawInteraction_.getActive())}};t["a"]=m},function(e,t,r){"use strict";var i=r(3);var n=r(178);var a=r(118);var o=r(390);var s=r(11);var l=r(15);var u={IMAGE:"image",VECTOR:"vector"};var c={RENDER_ORDER:"renderOrder"};var f=function e(t){var r=t?t:{};var i=Object(s["a"])({},r);delete i.style;delete i.renderBuffer;delete i.updateWhileAnimating;delete i.updateWhileInteracting;a["a"].call(this,i);this.declutter_=r.declutter!==undefined?r.declutter:false;this.renderBuffer_=r.renderBuffer!==undefined?r.renderBuffer:100;this.style_=null;this.styleFunction_=undefined;this.setStyle(r.style);this.updateWhileAnimating_=r.updateWhileAnimating!==undefined?r.updateWhileAnimating:false;this.updateWhileInteracting_=r.updateWhileInteracting!==undefined?r.updateWhileInteracting:false;this.renderMode_=r.renderMode||o["a"].VECTOR;this.type=n["a"].VECTOR};Object(i["d"])(f,a["a"]);f.prototype.getDeclutter=function(){return this.declutter_};f.prototype.setDeclutter=function(e){this.declutter_=e};f.prototype.getRenderBuffer=function(){return this.renderBuffer_};f.prototype.getRenderOrder=function(){return this.get(c.RENDER_ORDER)};f.prototype.getSource;f.prototype.getStyle=function(){return this.style_};f.prototype.getStyleFunction=function(){return this.styleFunction_};f.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_};f.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_};f.prototype.setRenderOrder=function(e){this.set(c.RENDER_ORDER,e)};f.prototype.setStyle=function(e){this.style_=e!==undefined?e:l["a"];this.styleFunction_=e===null?undefined:Object(l["d"])(this.style_);this.changed()};f.prototype.getRenderMode=function(){return this.renderMode_};t["a"]=f},function(e,t,r){"use strict";(function(e){var i=r(48);var n=r(239);var a=r(156);var o=r(184);var s=r(312);var l=r(127);var u=r(62);var c=r(19);var f=r(1);var h=r(40);var d=r(311);var p=r(109);var v=r(78);var g=r(376);var m=r(106);var y=r(54);var _=r(118);var b=r(11);var w=r(149);var S=r(248);var C=r(198);var x=r(274);var O=r.n(x);var T=angular.module("gmfLayertreeComponent",[n["a"].module.name,a["a"].module.name,o["a"].module.name,s["a"].name,l["a"].module.name,u["a"].module.name,c["a"].module.name,d["a"].name,p["a"].module.name,v["a"].module.name,m["a"].module.name]);T.value("ngeoLayertreeTemplateUrl",function(e,t){return"gmf/layertree"});T.run(["$templateCache",function(e){e.put("gmf/layertree",r(504))}]);T.value("gmfLayertreeTemplate",function(e,t){var r="gmf/layertree";return'<div ngeo-layertree="gmfLayertreeCtrl.root" '+'ngeo-layertree-map="gmfLayertreeCtrl.map" '+'ngeo-layertree-nodelayer="gmfLayertreeCtrl.getLayer(treeCtrl)" '+'ngeo-layertree-listeners="gmfLayertreeCtrl.listeners(treeScope, treeCtrl)" '+('ngeo-layertree-templateurl="'+r+'">')+"</div>"});E.$inject=["$element","$attrs","gmfLayertreeTemplate"];function E(e,t,r){return r(e,t)}T.component_={controller:"GmfLayertreeController as gmfLayertreeCtrl",bindings:{map:"=gmfLayertreeMap",dimensions:"=?gmfLayertreeDimensions",openLinksInNewWindow:"<?gmfLayertreeOpenlinksinnewwindow"},template:E};T.component("gmfLayertree",T.component_);T.Controller_=function(e,t,r,i,n,a,o,s,l,u){var c=this;this.map;this.dimensions;this.scope_=t;this.layerHelper_=r;this.gmfDataSourceBeingFiltered=i;this.gmfExternalDataSourcesManager=n;this.gmfPermalink_=a;this.gmfTreeManager_=o;var h=o.root;f["a"].assert(h);this.root=h;this.gmfSyncLayertreeMap_=s;this.ngeoWMSTime_=l;this.groupNodeStates_={};this.openLinksInNewWindow;this.dataLayerGroup_=null;this.layers=[];this.gmfThemes_=u;e.on("shown.bs.collapse",function(){c.scope_.$apply()})};T.Controller_.$inject=["$element","$scope","ngeoLayerHelper","gmfDataSourceBeingFiltered","gmfExternalDataSourcesManager","gmfPermalink","gmfTreeManager","gmfSyncLayertreeMap","ngeoWMSTime","gmfThemes"];T.Controller_.prototype.$onInit=function(){var e=this;this.openLinksInNewWindow=this.openLinksInNewWindow===true;this.dataLayerGroup_=this.layerHelper_.getGroupFromMap(this.map,i["a"].DATALAYERGROUP_NAME);Object(g["a"])(this.dataLayerGroup_.getLayers().getArray(),this.layers,true,this.scope_,function(){return true});this.scope_.$watchCollection(function(){return e.layers},function(){e.map.render()});this.scope_.$watchCollection(function(){if(e.gmfTreeManager_.rootCtrl){return e.dimensions}},function(t){if(t){e.updateDimensions_(e.gmfTreeManager_.rootCtrl)}})};T.Controller_.prototype.updateDimensions_=function(e){var t=this;e.traverseDepthFirst(function(e){if(e.node.dimensions){var r=e.layer;f["a"].assertInstanceof(r,_["a"]);t.updateLayerDimensions_(r,e.node)}})};T.Controller_.prototype.updateLayerDimensions_=function(e,t){var r=this;if(this.dimensions&&t.dimensions){var i={};for(var n in t.dimensions){if(t.dimensions[n]===null){var a=this.dimensions[n];if(a!==undefined){i[n]=a}}else{i[n]=t.dimensions[n]}}if(!b["d"](i)){var o=e.getSource();if(o instanceof C["a"]){o.updateDimensions(i)}else if(o instanceof S["a"]||o instanceof w["a"]){o.updateParams(i)}else{e.once("change:source",function(){f["a"].assertInstanceof(e,_["a"]);r.updateLayerDimensions_(e,t)})}}}};T.Controller_.prototype.getLayer=function(e){var t=void 0;if(e.parent.isRoot){this.gmfTreeManager_.rootCtrl=e.parent;t=this.gmfTreeManager_.root.children.length-this.gmfTreeManager_.numberOfGroupsToAddInThisDigestLoop||0}var r=this.gmfSyncLayertreeMap_.createLayer(e,this.map,this.dataLayerGroup_,t);if(r instanceof _["a"]){var i=e.node;this.updateLayerDimensions_(r,i)}return r};T.Controller_.prototype.listeners=function(e,t){var r=this.dataLayerGroup_;e.$on("$destroy",function(){r.getLayers().remove(t.layer)})};T.Controller_.prototype.toggleActive=function(e){e.setState(e.getState()==="on"?"off":"on")};T.Controller_.prototype.getNodeState=function(e){return e.getState()};T.Controller_.prototype.updateWMSTimeLayerState=function(e,t){if(!t){return}var r=e.getDataSource();if(r){f["a"].assertInstanceof(r,h["a"]);r.timeRangeValue=t}else if(e.children){for(var i=0,n=e.children.length;i<n;i++){this.updateWMSTimeLayerState(e.children[i],t)}}};T.Controller_.prototype.getLegendIconURL=function(e){var t=e.node.metadata.iconUrl;if(t!==undefined){return t}if(e.node.children!==undefined){return undefined}var r=e.node;if(r.type!=="WMS"){return undefined}var i=r;var n=i.metadata.legendRule;if(n===undefined){return undefined}var a=i.layers.split(",")[0];var o=this.gmfTreeManager_.getOgcServer(e);return this.layerHelper_.getWMSLegendURL(o.url,a,undefined,n,20,20)};T.Controller_.prototype.getLegendsObject=function(e){var t=this;var r={};if(e.node.children!==undefined){return null}var i=e.node;var n=i.name;if(i.metadata.legendImage){r[n]=i.metadata.legendImage;return r}var a=e.layer;if(i.type==="WMTS"){f["a"].assertInstanceof(a,y["a"]);var o=this.layerHelper_.getWMTSLegendURL(a);r[n]=o;return o?r:null}else{var s=i;var l=s.layers;var u=this.gmfTreeManager_.getOgcServer(e);var c=this.getScale_();if(u.type===h["a"].ServerType.QGISSERVER){l=[l]}else{l=l.split(",")}l.forEach(function(e){r[e]=t.layerHelper_.getWMSLegendURL(u.url,e,c)});return r}};T.Controller_.prototype.getNumberOfLegendsObject=function(e){var t=this.getLegendsObject(e);return t?Object.keys(t).length:0};T.Controller_.prototype.getScale_=function(){var e=this.map.getView();var t=e.getResolution();var r=e.getProjection().getMetersPerUnit();var i=25.4/.28;return t*r*39.37*i};T.Controller_.prototype.displayMetadata=function(e){var t=e.node;var r=t.metadata["metadataUrl"];if(r!==undefined){var i=window.gmfx;if(i.openIframePopup){i.openIframePopup(r,t.name,undefined,undefined,false)}}};T.Controller_.prototype.afterReorder=function(){var e=this;var t=this.gmfTreeManager_.rootCtrl.node.children;var r=this.gmfTreeManager_.rootCtrl.children;var i=[];t.forEach(function(e){r.some(function(t){if(t.node===e){i.push(t);return}})});this.gmfTreeManager_.rootCtrl.children=i;this.layers.length=0;this.gmfTreeManager_.rootCtrl.children.forEach(function(t){e.layers.push(t.layer)});this.gmfPermalink_.refreshFirstLevelGroups()};T.Controller_.prototype.removeNode=function(e){this.gmfTreeManager_.removeGroup(e)};T.Controller_.prototype.removeAllNodes=function(){this.gmfTreeManager_.removeAll()};T.Controller_.prototype.nodesCount=function(){return this.gmfTreeManager_.root.children.length};T.Controller_.prototype.getResolutionStyle=function(e){var t=this.map.getView().getResolution();var r=c["a"].getNodeMinResolution(e);if(r!==undefined&&t<r){return"out-of-resolution"}var i=c["a"].getNodeMaxResolution(e);if(i!==undefined&&t>i){return"out-of-resolution"}return undefined};T.Controller_.prototype.zoomToResolution=function(e){var t=e.node;var r=this.map.getView();var i=r.getResolution();var n=c["a"].getNodeMinResolution(t);if(n!==undefined&&i<n){r.setResolution(r.constrainResolution(n,0,1))}else{var a=c["a"].getNodeMaxResolution(t);if(a!==undefined&&i>a){r.setResolution(r.constrainResolution(a,0,-1))}}};T.Controller_.prototype.toggleNodeLegend=function(t){e(t).toggle({toggle:true})};T.Controller_.prototype.toggleFiltrableDataSource=function(e){this.gmfDataSourceBeingFiltered.dataSource=e};T.Controller_.prototype.isNodeLegendVisible=function(t){return e(t).is(":visible")};T.Controller_.prototype.supportsCustomization=function(e){return!e.isRoot&&(this.supportsLegend(e)||this.supportsOpacityChange(e))};T.Controller_.prototype.supportsLegend=function(e){var t=e.node;return!!t.metadata&&!!t.metadata.legend&&!!this.getLegendsObject(e)};T.Controller_.prototype.supportsOpacityChange=function(e){var t=e.node;var r=e.parent.node;return!!e.layer&&(e.depth===1&&!t.mixed||e.depth>1&&r.mixed)};T.controller("GmfLayertreeController",T.Controller_);t["a"]=T}).call(this,r(24))},function(e,t,r){"use strict";var i=r(1);var n=r(209);var a=r(3);var o=r(89);var s=r(11);var l=r(76);var u=r(15);var c=function e(){this.featureUidToGroupIndex_={};this.groups_=[];this.source_=new l["b"]({useSpatialIndex:false});this.layer_=new o["a"]({source:this.source_,style:this.styleFunction_.bind(this),updateWhileAnimating:true,updateWhileInteracting:true})};c.prototype.addFeature=function(e,t){i["a"].assert(t>=0);i["a"].assert(t<this.groups_.length);var r=a["c"](e).toString();this.featureUidToGroupIndex_[r]=t;this.groups_[t].features[r]=e;this.source_.addFeature(e)};c.prototype.removeFeature=function(e,t){i["a"].assert(t>=0);i["a"].assert(t<this.groups_.length);var r=a["c"](e).toString();delete this.featureUidToGroupIndex_[r];delete this.groups_[t].features[r];this.source_.removeFeature(e)};c.prototype.clear=function(e){i["a"].assert(e>=0);i["a"].assert(e<this.groups_.length);var t=this.groups_[e];for(var r in t.features){this.removeFeature(t.features[r],e)}i["a"].assert(s["d"](t.features))};c.prototype.getLayer=function(){return this.layer_};c.prototype.getFeatureOverlay=function(){var e=this.groups_.length;this.groups_.push({styleFunction:u["a"],features:{}});return new n["a"](this,e)};c.prototype.init=function(e){this.layer_.setMap(e)};c.prototype.setStyle=function(e,t){i["a"].assert(t>=0);i["a"].assert(t<this.groups_.length);this.groups_[t].styleFunction=e===null?u["c"].defaultFunction:Object(u["d"])(e)};c.prototype.styleFunction_=function(e,t){var r=a["c"](e).toString();i["a"].assert(r in this.featureUidToGroupIndex_);var n=this.featureUidToGroupIndex_[r];var o=this.groups_[n];return o.styleFunction(e,t)};c.module=angular.module("ngeoFeatureOverlayMgr",[n["a"].module.name]);c.module.service("ngeoFeatureOverlayMgr",c);t["a"]=c},function(e,t,r){"use strict";var i=r(1);var n=r(31);var a=r(41);var o=r(2);var s=r(21);var l=r(176);var u=r(117);var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var p=function(e){d(t,e);function t(r){f(this,t);r.type=n["a"].GEOMETRY;var i=h(this,e.call(this,r));var a=r.featureProperties||{};i.feature_=new s["a"](a);i.format_=new l["a"];i.updatingExpression_=false;i.updatingGeometry_=false;i.geometryChangeListenerKey_=null;i.listenerKeys.push(o["a"](i.feature_,"change:"+i.feature.getGeometryName(),i.handleFeatureGeometryChange_,i));i.setGeometryFromExpression_();return i}t.prototype.setExpression=function t(r){this.updatingExpression_=true;e.prototype.setExpression.call(this,r);if(!this.updatingGeometry_){this.setGeometryFromExpression_()}this.registerGeometryChange_();this.updatingExpression_=false};t.prototype.handleFeatureGeometryChange_=function e(){if(this.updatingExpression_){return}this.updatingGeometry_=true;var t=this.feature_.getGeometry();if(t){this.expression=this.format_.writeGeometry(t)}else{this.expression=null}this.registerGeometryChange_();this.updatingGeometry_=false};t.prototype.handleGeometryChange_=function e(t){var r=i["a"].assertInstanceof(t.target,u["a"]);this.updatingGeometry_=true;this.expression=this.format_.writeGeometry(r);this.updatingGeometry_=false};t.prototype.setGeometryFromExpression_=function e(){var t=null;if(this.expression){var r=i["a"].assertString(this.expression);t=this.format_.readGeometry(r)}this.geometry=t};t.prototype.registerGeometryChange_=function e(){if(this.geometryChangeListenerKey_!==null){o["e"](this.geometryChangeListenerKey_);this.geometryChangeListenerKey_=null}var t=this.feature_.getGeometry();if(t){this.geometryChangeListenerKey_=o["a"](t,"change",this.handleGeometryChange_,this)}};c(t,[{key:"feature",get:function e(){return this.feature_}},{key:"geometry",get:function e(){return this.feature_.getGeometry()||null},set:function e(t){this.feature_.setGeometry(t)}}]);return t}(a["a"]);t["a"]=p},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var i={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"};var n={};n[i.DEGREES]=2*Math.PI*6370997/360;n[i.FEET]=.3048;n[i.METERS]=1;n[i.USFEET]=1200/3937;t["b"]=i},function(e,t,r){"use strict";r.d(t,"b",function(){return s});var i=r(117);var n=r(11);var a=r(12);var o=function e(){this.defaultDataProjection=null;this.defaultFeatureProjection=null};o.prototype.getReadOptions=function(e,t){var r=void 0;if(t){r={dataProjection:t.dataProjection?t.dataProjection:this.readProjection(e),featureProjection:t.featureProjection}}return this.adaptOptions(r)};o.prototype.adaptOptions=function(e){return Object(n["a"])({dataProjection:this.defaultDataProjection,featureProjection:this.defaultFeatureProjection},e)};o.prototype.getLastExtent=function(){return null};o.prototype.getType=function(){};o.prototype.readFeature=function(e,t){};o.prototype.readFeatures=function(e,t){};o.prototype.readGeometry=function(e,t){};o.prototype.readProjection=function(e){};o.prototype.writeFeature=function(e,t){};o.prototype.writeFeatures=function(e,t){};o.prototype.writeGeometry=function(e,t){};t["a"]=o;function s(e,t,r){var n=r?Object(a["g"])(r.featureProjection):null;var o=r?Object(a["g"])(r.dataProjection):null;var s=void 0;if(n&&o&&!Object(a["e"])(n,o)){if(e instanceof i["a"]){s=(t?e.clone():e).transform(t?n:o,t?o:n)}else{s=Object(a["n"])(e,o,n)}}else{s=e}if(t&&r&&r.decimals!==undefined){var l=Math.pow(10,r.decimals);var u=function e(t){for(var r=0,i=t.length;r<i;++r){t[r]=Math.round(t[r]*l)/l}return t};if(s===e){s=s.clone()}s.applyTransform(u)}return s}},function(e,t,r){"use strict";t["a"]={ADD:"add",REMOVE:"remove"}},function(e,t,r){"use strict";t["a"]={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",SOURCE:"source"}},function(e,t,r){"use strict";(function(e){r.d(t,"c",function(){return _});r.d(t,"a",function(){return b});r.d(t,"e",function(){return w});r.d(t,"b",function(){return S});r.d(t,"d",function(){return C});var i=r(115);var n=r(57);var a=r(81);var o=r(331);var s=r(80);var l=r(265);var u=r(264);var c=r(382);var f=r(352);var h;var d={};var p={};var v;function g(e){return e?e.toLowerCase().replace("_","-"):e}function m(e){var t=0,r,i,n,a;while(t<e.length){a=g(e[t]).split("-");r=a.length;i=g(e[t+1]);i=i?i.split("-"):null;while(r>0){n=y(a.slice(0,r).join("-"));if(n){return n}if(i&&i.length>=r&&Object(o["a"])(a,i,true)>=r-1){break}r--}t++}return v}function y(t){var r=null;if(!d[t]&&typeof e!=="undefined"&&e&&e.exports){try{r=v._abbr;var i=h;!function e(){var t=new Error('Cannot find module "undefined"');t.code="MODULE_NOT_FOUND";throw t}();_(r)}catch(e){}}return d[t]}function _(e,t){var r;if(e){if(Object(a["a"])(t)){r=S(e)}else{r=b(e,t)}if(r){v=r}else{if(typeof console!=="undefined"&&console.warn){console.warn("Locale "+e+" not found. Did you forget to load it?")}}}return v._abbr}function b(e,t){if(t!==null){var r,i=f["a"];t.abbr=e;if(d[e]!=null){Object(s["b"])("defineLocaleOverride","use moment.updateLocale(localeName, config) to change "+"an existing locale. moment.defineLocale(localeName, "+"config) should only be used for creating a new locale "+"See http://momentjs.com/guides/#/warnings/define-locale/ for more info.");i=d[e]._config}else if(t.parentLocale!=null){if(d[t.parentLocale]!=null){i=d[t.parentLocale]._config}else{r=y(t.parentLocale);if(r!=null){i=r._config}else{if(!p[t.parentLocale]){p[t.parentLocale]=[]}p[t.parentLocale].push({name:e,config:t});return null}}}d[e]=new u["a"](Object(l["a"])(i,t));if(p[e]){p[e].forEach(function(e){b(e.name,e.config)})}_(e);return d[e]}else{delete d[e];return null}}function w(e,t){if(t!=null){var r,i,n=f["a"];i=y(e);if(i!=null){n=i._config}t=Object(l["a"])(n,t);r=new u["a"](t);r.parentLocale=d[e];d[e]=r;_(e)}else{if(d[e]!=null){if(d[e].parentLocale!=null){d[e]=d[e].parentLocale}else if(d[e]!=null){delete d[e]}}}return d[e]}function S(e){var t;if(e&&e._locale&&e._locale._abbr){e=e._locale._abbr}if(!e){return v}if(!Object(i["a"])(e)){t=y(e);if(t){return t}e=[e]}return m(e)}function C(){return Object(c["a"])(d)}}).call(this,r(528)(e))},function(e,t,r){"use strict";r.d(t,"a",function(){return g});r.d(t,"g",function(){return m});r.d(t,"c",function(){return y});r.d(t,"j",function(){return _});r.d(t,"b",function(){return b});r.d(t,"h",function(){return w});r.d(t,"i",function(){return C});r.d(t,"d",function(){return x});r.d(t,"f",function(){return O});r.d(t,"e",function(){return T});r.d(t,"l",function(){return M});r.d(t,"m",function(){return A});r.d(t,"k",function(){return k});var i=r(20);var n=r(30);var a=r(63);var o=r(6);var s=r(37);var l=r(26);var u=r(115);var c=r(82);var f=r(57);var h=r(114);var d=r(32);Object(i["a"])("d",0,"do","day");Object(i["a"])("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});Object(i["a"])("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});Object(i["a"])("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});Object(i["a"])("e",0,0,"weekday");Object(i["a"])("E",0,0,"isoWeekday");Object(n["a"])("day","d");Object(n["a"])("weekday","e");Object(n["a"])("isoWeekday","E");Object(a["a"])("day",11);Object(a["a"])("weekday",11);Object(a["a"])("isoWeekday",11);Object(o["a"])("d",o["d"]);Object(o["a"])("e",o["d"]);Object(o["a"])("E",o["d"]);Object(o["a"])("dd",function(e,t){return t.weekdaysMinRegex(e)});Object(o["a"])("ddd",function(e,t){return t.weekdaysShortRegex(e)});Object(o["a"])("dddd",function(e,t){return t.weekdaysRegex(e)});Object(s["c"])(["dd","ddd","dddd"],function(e,t,r,i){var n=r._locale.weekdaysParse(e,i,r._strict);if(n!=null){t.d=n}else{Object(d["a"])(r).invalidWeekday=e}});Object(s["c"])(["d","e","E"],function(e,t,r,i){t[i]=Object(l["a"])(e)});function p(e,t){if(typeof e!=="string"){return e}if(!isNaN(e)){return parseInt(e,10)}e=t.weekdaysParse(e);if(typeof e==="number"){return e}return null}function v(e,t){if(typeof e==="string"){return t.weekdaysParse(e)%7||7}return isNaN(e)?null:e}var g="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");function m(e,t){if(!e){return Object(u["a"])(this._weekdays)?this._weekdays:this._weekdays["standalone"]}return Object(u["a"])(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]}var y="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function _(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort}var b="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function w(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin}function S(e,t,r){var i,n,a,o=e.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[];this._shortWeekdaysParse=[];this._minWeekdaysParse=[];for(i=0;i<7;++i){a=Object(h["a"])([2e3,1]).day(i);this._minWeekdaysParse[i]=this.weekdaysMin(a,"").toLocaleLowerCase();this._shortWeekdaysParse[i]=this.weekdaysShort(a,"").toLocaleLowerCase();this._weekdaysParse[i]=this.weekdays(a,"").toLocaleLowerCase()}}if(r){if(t==="dddd"){n=c["a"].call(this._weekdaysParse,o);return n!==-1?n:null}else if(t==="ddd"){n=c["a"].call(this._shortWeekdaysParse,o);return n!==-1?n:null}else{n=c["a"].call(this._minWeekdaysParse,o);return n!==-1?n:null}}else{if(t==="dddd"){n=c["a"].call(this._weekdaysParse,o);if(n!==-1){return n}n=c["a"].call(this._shortWeekdaysParse,o);if(n!==-1){return n}n=c["a"].call(this._minWeekdaysParse,o);return n!==-1?n:null}else if(t==="ddd"){n=c["a"].call(this._shortWeekdaysParse,o);if(n!==-1){return n}n=c["a"].call(this._weekdaysParse,o);if(n!==-1){return n}n=c["a"].call(this._minWeekdaysParse,o);return n!==-1?n:null}else{n=c["a"].call(this._minWeekdaysParse,o);if(n!==-1){return n}n=c["a"].call(this._weekdaysParse,o);if(n!==-1){return n}n=c["a"].call(this._shortWeekdaysParse,o);return n!==-1?n:null}}}function C(e,t,r){var i,n,a;if(this._weekdaysParseExact){return S.call(this,e,t,r)}if(!this._weekdaysParse){this._weekdaysParse=[];this._minWeekdaysParse=[];this._shortWeekdaysParse=[];this._fullWeekdaysParse=[]}for(i=0;i<7;i++){n=Object(h["a"])([2e3,1]).day(i);if(r&&!this._fullWeekdaysParse[i]){this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(n,"").replace(".",".?")+"$","i");this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(n,"").replace(".",".?")+"$","i");this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(n,"").replace(".",".?")+"$","i")}if(!this._weekdaysParse[i]){a="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,"");this._weekdaysParse[i]=new RegExp(a.replace(".",""),"i")}if(r&&t==="dddd"&&this._fullWeekdaysParse[i].test(e)){return i}else if(r&&t==="ddd"&&this._shortWeekdaysParse[i].test(e)){return i}else if(r&&t==="dd"&&this._minWeekdaysParse[i].test(e)){return i}else if(!r&&this._weekdaysParse[i].test(e)){return i}}}function x(e){if(!this.isValid()){return e!=null?this:NaN}var t=this._isUTC?this._d.getUTCDay():this._d.getDay();if(e!=null){e=p(e,this.localeData());return this.add(e-t,"d")}else{return t}}function O(e){if(!this.isValid()){return e!=null?this:NaN}var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function T(e){if(!this.isValid()){return e!=null?this:NaN}if(e!=null){var t=v(e,this.localeData());return this.day(this.day()%7?t:t-7)}else{return this.day()||7}}var E=o["s"];function M(e){if(this._weekdaysParseExact){if(!Object(f["a"])(this,"_weekdaysRegex")){I.call(this)}if(e){return this._weekdaysStrictRegex}else{return this._weekdaysRegex}}else{if(!Object(f["a"])(this,"_weekdaysRegex")){this._weekdaysRegex=E}return this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex}}var j=o["s"];function A(e){if(this._weekdaysParseExact){if(!Object(f["a"])(this,"_weekdaysRegex")){I.call(this)}if(e){return this._weekdaysShortStrictRegex}else{return this._weekdaysShortRegex}}else{if(!Object(f["a"])(this,"_weekdaysShortRegex")){this._weekdaysShortRegex=j}return this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}}var P=o["s"];function k(e){if(this._weekdaysParseExact){if(!Object(f["a"])(this,"_weekdaysRegex")){I.call(this)}if(e){return this._weekdaysMinStrictRegex}else{return this._weekdaysMinRegex}}else{if(!Object(f["a"])(this,"_weekdaysMinRegex")){this._weekdaysMinRegex=P}return this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}}function I(){function e(e,t){return t.length-e.length}var t=[],r=[],i=[],n=[],a,s,l,u,c;for(a=0;a<7;a++){s=Object(h["a"])([2e3,1]).day(a);l=this.weekdaysMin(s,"");u=this.weekdaysShort(s,"");c=this.weekdays(s,"");t.push(l);r.push(u);i.push(c);n.push(l);n.push(u);n.push(c)}t.sort(e);r.sort(e);i.sort(e);n.sort(e);for(a=0;a<7;a++){r[a]=Object(o["t"])(r[a]);i[a]=Object(o["t"])(i[a]);n[a]=Object(o["t"])(n[a])}this._weekdaysRegex=new RegExp("^("+n.join("|")+")","i");this._weekdaysShortRegex=this._weekdaysRegex;this._weekdaysMinRegex=this._weekdaysRegex;this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}},function(e,t,r){(function(e,r){true?r(t):undefined})(this,function(e){"use strict";var t=new Date,r=new Date;function i(e,n,a,o){function s(t){return e(t=new Date(+t)),t}s.floor=s;s.ceil=function(t){return e(t=new Date(t-1)),n(t,1),e(t),t};s.round=function(e){var t=s(e),r=s.ceil(e);return e-t<r-e?t:r};s.offset=function(e,t){return n(e=new Date(+e),t==null?1:Math.floor(t)),e};s.range=function(t,r,i){var a=[],o;t=s.ceil(t);i=i==null?1:Math.floor(i);if(!(t<r)||!(i>0))return a;do{a.push(o=new Date(+t)),n(t,i),e(t)}while(o<t&&t<r);return a};s.filter=function(t){return i(function(r){if(r>=r)while(e(r),!t(r))r.setTime(r-1)},function(e,r){if(e>=e){if(r<0)while(++r<=0){while(n(e,-1),!t(e)){}}else while(--r>=0){while(n(e,+1),!t(e)){}}}})};if(a){s.count=function(i,n){t.setTime(+i),r.setTime(+n);e(t),e(r);return Math.floor(a(t,r))};s.every=function(e){e=Math.floor(e);return!isFinite(e)||!(e>0)?null:!(e>1)?s:s.filter(o?function(t){return o(t)%e===0}:function(t){return s.count(0,t)%e===0})}}return s}var n=i(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});n.every=function(e){e=Math.floor(e);if(!isFinite(e)||!(e>0))return null;if(!(e>1))return n;return i(function(t){t.setTime(Math.floor(t/e)*e)},function(t,r){t.setTime(+t+r*e)},function(t,r){return(r-t)/e})};var a=n.range;var o=1e3;var s=6e4;var l=36e5;var u=864e5;var c=6048e5;var f=i(function(e){e.setTime(Math.floor(e/o)*o)},function(e,t){e.setTime(+e+t*o)},function(e,t){return(t-e)/o},function(e){return e.getUTCSeconds()});var h=f.range;var d=i(function(e){e.setTime(Math.floor(e/s)*s)},function(e,t){e.setTime(+e+t*s)},function(e,t){return(t-e)/s},function(e){return e.getMinutes()});var p=d.range;var v=i(function(e){var t=e.getTimezoneOffset()*s%l;if(t<0)t+=l;e.setTime(Math.floor((+e-t)/l)*l+t)},function(e,t){e.setTime(+e+t*l)},function(e,t){return(t-e)/l},function(e){return e.getHours()});var g=v.range;var m=i(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*s)/u},function(e){return e.getDate()-1});var y=m.range;function _(e){return i(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7);t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t*7)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*s)/c})}var b=_(0);var w=_(1);var S=_(2);var C=_(3);var x=_(4);var O=_(5);var T=_(6);var E=b.range;var M=w.range;var j=S.range;var A=C.range;var P=x.range;var k=O.range;var I=T.range;var D=i(function(e){e.setDate(1);e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()});var R=D.range;var L=i(function(e){e.setMonth(0,1);e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});L.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:i(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e);t.setMonth(0,1);t.setHours(0,0,0,0)},function(t,r){t.setFullYear(t.getFullYear()+r*e)})};var $=L.range;var N=i(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*s)},function(e,t){return(t-e)/s},function(e){return e.getUTCMinutes()});var F=N.range;var G=i(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*l)},function(e,t){return(t-e)/l},function(e){return e.getUTCHours()});var U=G.range;var H=i(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/u},function(e){return e.getUTCDate()-1});var Y=H.range;function W(e){return i(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7);t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t*7)},function(e,t){return(t-e)/c})}var V=W(0);var z=W(1);var q=W(2);var B=W(3);var X=W(4);var K=W(5);var Z=W(6);var Q=V.range;var J=z.range;var ee=q.range;var te=B.range;var re=X.range;var ie=K.range;var ne=Z.range;var ae=i(function(e){e.setUTCDate(1);e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12},function(e){return e.getUTCMonth()});var oe=ae.range;var se=i(function(e){e.setUTCMonth(0,1);e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});se.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:i(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e);t.setUTCMonth(0,1);t.setUTCHours(0,0,0,0)},function(t,r){t.setUTCFullYear(t.getUTCFullYear()+r*e)})};var le=se.range;e.timeInterval=i;e.timeMillisecond=n;e.timeMilliseconds=a;e.utcMillisecond=n;e.utcMilliseconds=a;e.timeSecond=f;e.timeSeconds=h;e.utcSecond=f;e.utcSeconds=h;e.timeMinute=d;e.timeMinutes=p;e.timeHour=v;e.timeHours=g;e.timeDay=m;e.timeDays=y;e.timeWeek=b;e.timeWeeks=E;e.timeSunday=b;e.timeSundays=E;e.timeMonday=w;e.timeMondays=M;e.timeTuesday=S;e.timeTuesdays=j;e.timeWednesday=C;e.timeWednesdays=A;e.timeThursday=x;e.timeThursdays=P;e.timeFriday=O;e.timeFridays=k;e.timeSaturday=T;e.timeSaturdays=I;e.timeMonth=D;e.timeMonths=R;e.timeYear=L;e.timeYears=$;e.utcMinute=N;e.utcMinutes=F;e.utcHour=G;e.utcHours=U;e.utcDay=H;e.utcDays=Y;e.utcWeek=V;e.utcWeeks=Q;e.utcSunday=V;e.utcSundays=Q;e.utcMonday=z;e.utcMondays=J;e.utcTuesday=q;e.utcTuesdays=ee;e.utcWednesday=B;e.utcWednesdays=te;e.utcThursday=X;e.utcThursdays=re;e.utcFriday=K;e.utcFridays=ie;e.utcSaturday=Z;e.utcSaturdays=ne;e.utcMonth=ae;e.utcMonths=oe;e.utcYear=se;e.utcYears=le;Object.defineProperty(e,"__esModule",{value:true})})},function(e,t,r){"use strict";t["a"]={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"}},function(e,t,r){"use strict";var i=r(3);var n=r(143);var a=function e(t){var r=t||{};n["a"].call(this,{points:Infinity,fill:r.fill,radius:r.radius,snapToPixel:r.snapToPixel,stroke:r.stroke,atlasManager:r.atlasManager})};Object(i["d"])(a,n["a"]);a.prototype.clone=function(){var e=new a({fill:this.getFill()?this.getFill().clone():undefined,stroke:this.getStroke()?this.getStroke().clone():undefined,radius:this.getRadius(),snapToPixel:this.getSnapToPixel(),atlasManager:this.atlasManager_});e.setOpacity(this.getOpacity());e.setScale(this.getScale());return e};a.prototype.setRadius=function(e){this.radius_=e;this.render_(this.atlasManager_)};t["a"]=a},function(e,t,r){"use strict";var i=r(3);var n=r(273);var a=r(2);var o=r(36);var s=r(56);var l=function e(){n["a"].call(this);this.pendingRemovals_={};this.dispatching_={};this.listeners_={}};Object(i["d"])(l,n["a"]);l.prototype.addEventListener=function(e,t){var r=this.listeners_[e];if(!r){r=this.listeners_[e]=[]}if(r.indexOf(t)===-1){r.push(t)}};l.prototype.dispatchEvent=function(e){var t=typeof e==="string"?new s["a"](e):e;var r=t.type;t.target=this;var i=this.listeners_[r];var n=void 0;if(i){if(!(r in this.dispatching_)){this.dispatching_[r]=0;this.pendingRemovals_[r]=0}++this.dispatching_[r];for(var a=0,l=i.length;a<l;++a){if(i[a].call(this,t)===false||t.propagationStopped){n=false;break}}--this.dispatching_[r];if(this.dispatching_[r]===0){var u=this.pendingRemovals_[r];delete this.pendingRemovals_[r];while(u--){this.removeEventListener(r,o["c"])}delete this.dispatching_[r]}return n}};l.prototype.disposeInternal=function(){Object(a["d"])(this)};l.prototype.getListeners=function(e){return this.listeners_[e]};l.prototype.hasListener=function(e){return e?e in this.listeners_:Object.keys(this.listeners_).length>0};l.prototype.removeEventListener=function(e,t){var r=this.listeners_[e];if(r){var i=r.indexOf(t);if(e in this.pendingRemovals_){r[i]=o["c"];++this.pendingRemovals_[e]}else{r.splice(i,1);if(r.length===0){delete this.listeners_[e]}}}};t["a"]=l},function(e,t,r){var i,n,a;(function(o){if(true){!(n=[r(24)],i=o,a=typeof i==="function"?i.apply(t,n):i,a!==undefined&&(e.exports=a))}else{}})(function(e){e.ui=e.ui||{};return e.ui.version="1.12.1"})},function(e,t,r){"use strict";var i=r(240);var n=r(1);var a=r(2);var o=r(59);var s=angular.module("ngeoMap",[]);s.directive_=function(e){return{restrict:"A",link:function t(r,i,s){var l="ngeoMap";var u=s[l];var c=r.$eval(u);n["a"].assertInstanceof(c,o["a"]);c.setTarget(i[0]);var f="ngeoMapManageResize";var h=s[f];var d=r.$eval(h);if(d){var p="ngeoMapResizeTransition";var v=s[p];var g=r.$eval(v);a["a"](e,"resize",function(){if(g){var t=Date.now();var r=true;var i=function i(){c.updateSize();c.renderSync();if(r){e.requestAnimationFrame(i)}if(Date.now()-t>g){r=false}};i()}else{c.updateSize()}})}}}};s.directive_.$inject=["$window"];s.directive("ngeoMap",s.directive_);var l=s;var u=r(91);var c=r(373);var f=angular.module("ngeoResizemap",[]);f.directive_=function(e){var t=1e3;return{restrict:"A",link:function r(i,a,s){var l="ngeoResizemap";var u=s[l];var c=i.$eval(u);n["a"].assertInstanceof(c,o["a"]);var f=s["ngeoResizemapState"];n["a"].assert(f!==undefined);var h=void 0;var d=void 0;var p=function r(){c.updateSize();c.renderSync();if(Date.now()-h<t){d=e.requestAnimationFrame(r)}};a.on("transitionend",function(){c.updateSize();c.renderSync()});i.$watch(f,function(t,r){if(t!=r){h=Date.now();e.cancelAnimationFrame(d);d=e.requestAnimationFrame(p)}})}}};f.directive_.$inject=["$window"];f.directive("ngeoResizemap",f.directive_);var h=f;var d=r(9);var p=r(154);var v=angular.module("ngeoScaleselector",[]);v.value("ngeoScaleselectorTemplateUrl",function(e,t){var r=t["ngeoScaleselectorTemplateurl"];return r!==undefined?r:"ngeo/map/scaleselector"});v.run(["$templateCache",function(e){e.put("ngeo/map/scaleselector",r(488))}]);var g=function e(t){return{restrict:"A",scope:true,controller:"NgeoScaleselectorController",templateUrl:t}};g.$inject=["ngeoScaleselectorTemplateUrl"];g.$inject=["ngeoScaleselectorTemplateUrl"];v.directive("ngeoScaleselector",g);var m=function e(t,r,i){var s=this;var l=i["ngeoScaleselector"];this.scales=t.$eval(l);n["a"].assert(this.scales!==undefined);this.zoomLevels;t.$watch(function(){return Object.keys(s.scales).length},function(e){s.zoomLevels=Object.keys(s.scales).map(Number);s.zoomLevels.sort(d["i"])});var u=i["ngeoScaleselectorMap"];this.map_=t.$eval(u);n["a"].assertInstanceof(this.map_,o["a"]);var c=i["ngeoScaleselectorOptions"];var f=t.$eval(c);this.options=e.getOptions_(f);this.$scope_=t;this.resolutionChangeKey_=null;this.currentScale=undefined;var h=this.map_.getView();if(h!==null){var p=this.map_.getView().getZoom();if(p!==undefined){this.currentScale=this.getScale(p)}}a["a"](this.map_,"change:view",this.handleViewChange_,this);this.registerResolutionChangeListener_();t["scaleselectorCtrl"]=this};m.$inject=["$scope","$element","$attrs"];m.$inject=["$scope","$element","$attrs"];m.getOptions_=function(e){var t=false;if(e!==undefined){t=e["dropup"]==true}return{dropup:t}};m.prototype.getScale=function(e){return this.scales[e]};m.prototype.changeZoom=function(e){this.map_.getView().setZoom(e)};m.prototype.handleResolutionChange_=function(e){var t=this;var r=this.map_.getView();var i=this.scales[r.getZoom()];if(i!==undefined){this.$scope_.$applyAsync(function(){t.currentScale=i})}};m.prototype.handleViewChange_=function(e){this.registerResolutionChangeListener_();this.handleResolutionChange_(null)};m.prototype.registerResolutionChangeListener_=function(){if(this.resolutionChangeKey_!==null){a["e"](this.resolutionChangeKey_)}var e=this.map_.getView();this.resolutionChangeKey_=a["a"](e,"change:resolution",this.handleResolutionChange_,this)};v.controller("NgeoScaleselectorController",m);var y=v;var _=angular.module("ngeoMapModule",[i["a"].module.name,l.name,u["a"].module.name,c["a"].name,h.name,y.name]);var b=t["a"]=_},function(e,t,r){"use strict";var i=angular.module("ngeoBtnComponent",[]);i.btnGroupComponent_=function(e){return{restrict:"A",controller:"ngeoBtnGroupController",link:function t(r,i,n,a){var o=e(n["ngeoBtnGroupActive"]).assign;if(o){r.$watch(function(){return a.buttons_.some(function(e){return e(r)===true})},function(e){o(r,e)})}}}};i.btnGroupComponent_.$inject=["$parse"];i.directive("ngeoBtnGroup",i.btnGroupComponent_);i.BtnGroupController=function(e){this.buttons_=[];this.scope_=e};i.BtnGroupController.$inject=["$scope"];i.BtnGroupController.prototype.activate=function(e){var t=this;this.buttons_.forEach(function(r,i){if(i!=e){r.assign(t.scope_,false)}})};i.BtnGroupController.prototype.addButton=function(e){this.buttons_.push(e);return this.buttons_.length-1};i.controller("ngeoBtnGroupController",i.BtnGroupController);i.btnComponent_=function(e){return{require:["?^ngeoBtnGroup","ngModel"],restrict:"A",link:function t(r,i,n,a){var o=a[0];var s=a[1];var l=-1;var u=e(n["ngModel"]);var c=u.assign;if(u(r)===undefined){c(r,false)}if(o!==null){l=o.addButton(u)}i.on("click",function(){r.$apply(function(){s.$setViewValue(!s.$viewValue);s.$render()})});s.$render=function(){if(s.$viewValue&&o!==null){o.activate(l)}i.toggleClass("active",s.$viewValue)}}}};i.btnComponent_.$inject=["$parse"];i.directive("ngeoBtn",i.btnComponent_);t["a"]=i},function(e,t,r){"use strict";var i=r(1);var n=r(195);var a=r(3);var o=function e(t,r){this.$filter_=t;this.gettextCatalog_=r;n["a"].call(this)};o.$inject=["$filter","gettextCatalog"];o.$inject=["$filter","gettextCatalog"];a["d"](o,n["a"]);o.prototype.formatTimeValue=function(e,t,r,i){var n=new Date(e);var a=i?"UTC":undefined;var o="yyyy";var s="yyyy-MM";var l="yyyy-MM-dd";if(!r){var u=this.gettextCatalog_;o=u.getString("yyyy");s=u.getString("M/yyyy");l=u.getString("M/d/yyyy")}switch(t){case"year":return this.$filter_("date")(n,o,a);case"month":return this.$filter_("date")(n,s,a);case"day":return this.$filter_("date")(n,l,a);default:return n.toISOString().replace(/\.\d{3}/,"")}};o.prototype.formatWMSTimeParam=function(e,t,r){i["a"].assert(e.resolution!==undefined);if(e.mode==="range"){i["a"].assert(t.end!==undefined);return this.formatTimeValue(t.start,e.resolution,true,r)+"/"+this.formatTimeValue(t.end,e.resolution,true,r)}else{return this.formatTimeValue(t.start,e.resolution,true,r)}};o.module=angular.module("ngeoWMSTime",[n["a"].module.name]);o.module.service("ngeoWMSTime",o);t["a"]=o},function(e,t,r){"use strict";var i=r(22);var n=r(153);var a=angular.module("ngeoAngularFilters",[]);a.Scalify=function(e){var t=e("number");var r=function e(r){var i=t(r,0);return i?"1 : "+i:""};r["$stateful"]=true;return r};a.Scalify.$inject=["$filter"];a.filter("ngeoScalify",a.Scalify);a.Number=function(e){var t=e.NUMBER_FORMATS;var r=function e(r,i){var n=t.GROUP_SEP;var a=t.DECIMAL_SEP;if(i===undefined){i=3}if(r===Infinity){return"∞"}else if(r===-Infinity){return"-∞"}else if(r===0){return"0"}var o=r<0;r=Math.abs(r);var s=i-Math.floor(Math.log(r)/Math.log(10))-1;var l=Math.pow(10,s);r=Math.round(r*l);var u="";var c=Math.floor(r/l);if(s>0){var f=""+r;while(f.length<s){f="0"+f}u=f.substring(f.length-s);while(u[u.length-1]==="0"){u=u.substring(0,u.length-1)}}var h=[];var d=""+c;while(d.length>3){var p=d.length-3;h.unshift(d.substring(p));d=d.substring(0,p)}h.unshift(d);return(o?"-":"")+h.join(n)+(u.length===0?"":a+u)};return r};a.Number.$inject=["$locale"];a.filter("ngeoNumber",a.Number);a.UnitPrefix=function(e){var t=e("ngeoNumber");var r=["","k","M","G","T","P"];var i=["","Ki","Mi","Gi","Ti","Pi"];var n=function e(n,a,o,s){if(a===undefined){a=""}var l=1e3;var u=r;if(o==="square"){l=1e6}else if(o==="binary"){l=1024;u=i}var c=0;var f=u.length-1;while(n>=l&&c<f){n=n/l;c++}var h=u[c]+a;var d=h.length==0?"":" ";return t(n,s)+d+h};return n};a.UnitPrefix.$inject=["$filter"];a.filter("ngeoUnitPrefix",a.UnitPrefix);a.NumberCoordinates=function(e){var t=function t(r,i,n){var a=n?n:"{x} {y}";var o=r[0];var s=r[1];var l=parseInt(i,10)|0;o=e("number")(o,l);s=e("number")(s,l);return a.replace("{x}",o).replace("{y}",s)};return t};a.NumberCoordinates.$inject=["$filter"];a.filter("ngeoNumberCoordinates",a.NumberCoordinates);a.DMSCoordinates=function(){var e=function e(t,r,a){var o=i["d"](t+180,360)-180;var s=Math.abs(3600*o);var l=Math.floor(s/3600);var u=Math.floor(s/60%60);var c=s%60;return l+"° "+n["b"](u,2)+"′ "+n["b"](c,2,a)+"″ "+r.charAt(o<0?1:0)};var t=function t(r,i,n){var a=parseInt(i,10)|0;var o=n?n:"{x} {y}";var s=e(r[0],"EW",a);var l=e(r[1],"NS",a);return o.replace("{x}",s).replace("{y}",l)};return t};a.filter("ngeoDMSCoordinates",a.DMSCoordinates);a.trustHtmlFilter=function(e){return function(t){if(t!==undefined&&t!==null){return e.trustAsHtml(""+t)}else{return e.trustAsHtml("&nbsp;")}}};a.trustHtmlFilter.$inject=["$sce"];a.filter("ngeoTrustHtml",a.trustHtmlFilter);a.Duration=function(e){var t=Object.freeze({SECONDS:Symbol("seconds"),MINUTES:Symbol("minutes"),HOURS:Symbol("hours"),DAYS:Symbol("days")});var r=function r(i,n){var a="";switch(n){case t.SECONDS:a=e.getPlural(i,"second","seconds");break;case t.MINUTES:a=e.getPlural(i,"minute","minutes");break;case t.HOURS:a=e.getPlural(i,"hour","hours");break;case t.DAYS:a=e.getPlural(i,"day","days");break;default:break}return i+" "+a};var i=function e(i){i=Math.round(i);var n=void 0;if(i<60){return r(i,t.SECONDS)}var a=i%60;i=Math.floor(i/60);if(i<60){n=r(i,t.MINUTES);if(a>0){n+=" "+r(a,t.SECONDS)}return n}a=i%60;i=Math.floor(i/60);if(i<24){n=r(i,t.HOURS);if(a>0){n+=" "+r(a,t.MINUTES)}return n}a=i%24;i=Math.floor(i/24);n=r(i,t.DAYS);if(a>0){n+=" "+r(a,t.HOURS)}return n};return i};a.Duration.$inject=["gettextCatalog"];a.filter("ngeoDuration",a.Duration);t["a"]=a},function(e,t,r){"use strict";r.d(t,"a",function(){return i});function i(e){return e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}},function(e,t,r){"use strict";var i=r(1);var n=r(86);var a=r(3);var o=r(2);var s=r(121);var l=r(118);var u=function e(t,r,u){var c=this;var f=u["ngeoLayertreeNotroot"]===undefined;this.isRoot=f;var h=u["ngeoLayertree"];this.rootScope_=r;this.properties={};this.state_="off";this.node;if(f){t.$watch(h,function(e,t){c.node=e})}else{this.node=t.$eval(h);i["a"].assert(this.node!==undefined)}var d=u["ngeoLayertreeMap"];var p=t.$eval(d);i["a"].assert(p!==undefined);this.parent=t.$parent["layertreeCtrl"];this.children=[];if(this.parent){this.parent.children.push(this)}t.$on("$destroy",function(){if(c.parent){var e=c.parent.children.indexOf(c);i["a"].assert(e>=0);c.parent.children.splice(e,1)}});this.uid=a["c"](this);this.depth=f?0:this.parent.depth+1;t["uid"]=this.uid;t["depth"]=this.depth;this.map=p;var v=u["ngeoLayertreeNodelayer"];if(v===undefined){var g=u["ngeoLayertreeNodelayerexpr"];var m=t.$eval(g);i["a"].assertString(m);v=m}i["a"].assert(v!==undefined);this.nodelayerExpr=v;this.layer=null;if(!f){var y=t.$eval(v,{treeCtrl:this})||null;if(y){i["a"].assert(y instanceof l["a"]||y instanceof s["a"]);this.layer=y}}this.dataSource_=null;if(this.layer){n["a"].layerLoading(this.layer,t);n["a"].layer(this.layer);o["a"](this.layer,"change:opacity",function(){c.rootScope_.$broadcast("ngeo-layertree-opacity",c)})}var _=u["ngeoLayertreeListeners"];if(_===undefined){var b=u["ngeoLayertreeListenersexpr"];_=t.$eval(b)}if(_!==undefined){i["a"].assertString(_)}this.listenersExpr=_;if(_){t.$eval(_,{treeScope:t,treeCtrl:this})}t["layertreeCtrl"]=this};u.$inject=["$scope","$rootScope","$attrs"];u.$inject=["$scope","$rootScope","$attrs"];u.prototype.getState=function(){return this.state_};u.prototype.setState=function(e,t){var r=this;if(e===this.state_){return}this.setStateInternal_(e);if(this.parent){this.parent.refreshState()}var i=this.isRoot?this.children:[u.getFirstParentTree(this)];if(t===undefined||t){i.forEach(function(e){r.rootScope_.$broadcast("ngeo-layertree-state",r,e)})}};u.prototype.setStateInternal_=function(e){var t=this;this.state_=e==="on"?"on":"off";this.children.forEach(function(e){e.setStateInternal_(t.state_)})};u.prototype.refreshState=function(){var e=this.getCalculateState();if(this.state_===e){return}this.state_=e;if(this.parent){this.parent.refreshState()}};u.prototype.getCalculateState=function(){if(this.node.children===undefined){return this.state_}var e=void 0;var t=void 0;this.children.some(function(r){e=r.getCalculateState();if(t){if(t!==e){return e="indeterminate"}}t=e});return e};u.prototype.getSetActive=function(e){var t=this.layer;var r=this.map;if(!t){return}if(e!==undefined){if(!e){r.removeLayer(t)}else{r.addLayer(t)}}else{return r.getLayers().getArray().indexOf(t)>=0}};u.prototype.getDataSource=function(){return this.dataSource_};u.prototype.setDataSource=function(e){this.dataSource_=e};u.getFirstParentTree=function(e){var t=e;while(!t.parent.isRoot){t=t.parent}return t};u.VisitorDecision={STOP:"STOP",SKIP:"SKIP",DESCEND:"DESCEND"};u.Visitor;u.prototype.traverseDepthFirst=function(e){var t=e(this)||u.VisitorDecision.DESCEND;switch(t){case u.VisitorDecision.STOP:return true;case u.VisitorDecision.SKIP:return false;case u.VisitorDecision.DESCEND:for(var r=0;r<this.children.length;++r){var n=this.children[r];var a=n.traverseDepthFirst(e);if(a){return true}}return false;default:i["a"].fail("Unhandled case")}};u.module=angular.module("ngeoLayertreeController",[]);u.module.controller("ngeoLayertreeController",u);t["a"]=u},function(e,t,r){"use strict";t["a"]={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},function(e,t,r){"use strict";r.d(t,"a",function(){return h});r.d(t,"d",function(){return d});r.d(t,"c",function(){return p});r.d(t,"b",function(){return v});var i=r(87);var n=r(20);var a=r(30);var o=r(63);var s=r(6);var l=r(37);var u=r(13);var c=r(10);var f=r(26);Object(n["a"])("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e});Object(n["a"])(0,["YY",2],0,function(){return this.year()%100});Object(n["a"])(0,["YYYY",4],0,"year");Object(n["a"])(0,["YYYYY",5],0,"year");Object(n["a"])(0,["YYYYYY",6,true],0,"year");Object(a["a"])("year","y");Object(o["a"])("year",1);Object(s["a"])("Y",s["p"]);Object(s["a"])("YY",s["d"],s["h"]);Object(s["a"])("YYYY",s["f"],s["k"]);Object(s["a"])("YYYYY",s["g"],s["m"]);Object(s["a"])("YYYYYY",s["g"],s["m"]);Object(l["a"])(["YYYYY","YYYYYY"],c["i"]);Object(l["a"])("YYYY",function(e,t){t[c["i"]]=e.length===2?u["a"].parseTwoDigitYear(e):Object(f["a"])(e)});Object(l["a"])("YY",function(e,t){t[c["i"]]=u["a"].parseTwoDigitYear(e)});Object(l["a"])("Y",function(e,t){t[c["i"]]=parseInt(e,10)});function h(e){return d(e)?366:365}function d(e){return e%4===0&&e%100!==0||e%400===0}u["a"].parseTwoDigitYear=function(e){return Object(f["a"])(e)+(Object(f["a"])(e)>68?1900:2e3)};var p=Object(i["b"])("FullYear",true);function v(){return d(this.year())}},function(e,t,r){"use strict";r.d(t,"a",function(){return i});function i(e){if(e<0){return Math.ceil(e)||0}else{return Math.floor(e)}}},function(e,t,r){"use strict";var i=r(1);var n=r(173);var a=r(28);var o=r(2);var s=r(73);var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var c=function(){function e(){u(this,e);this.collection_=new a["b"];this.map_=null;this.listenerKeys_=[];o["a"](this.collection_,"add",this.handleDataSourcesAdd_,this)}e.prototype.bindMap_=function e(t){var r=t.getView();this.listenerKeys_.push(o["a"](r,"change:resolution",this.handleViewResolutionChange_,this));var n=r.getResolution();i["a"].assertNumber(n);this.syncDataSourcesToResolution_(n)};e.prototype.unbindMap_=function e(t){this.listenerKeys_.forEach(o["e"]);this.listenerKeys_=[]};e.prototype.handleViewResolutionChange_=function e(t){var r=t.target;i["a"].assertInstanceof(r,s["a"]);var n=r.getResolution();i["a"].assertNumber(n);this.syncDataSourcesToResolution_(n)};e.prototype.syncDataSourcesToResolution_=function e(t){var r=this;this.collection_.forEach(function(e){r.syncDataSourceToResolution_(e,t)})};e.prototype.syncDataSourceToResolution_=function e(t,r){if(!t.supportsDynamicInRange){return}var i=t.maxResolution;var n=t.minResolution;var a=n===null||n===undefined||r>=n;var o=i===null||i===undefined||r<=i;var s=a&&o;t.inRange=s};e.prototype.handleDataSourcesAdd_=function e(t){var r=i["a"].assertInstanceof(t.element,n["a"]);if(this.map_){var a=this.map_.getView().getResolution();i["a"].assertNumber(a);this.syncDataSourceToResolution_(r,a)}};l(e,[{key:"map",set:function e(t){if(this.map_===t){return}if(this.map_){this.unbindMap_(this.map_)}this.map_=t;if(t){this.bindMap_(t)}}},{key:"collection",get:function e(){return this.collection_}}]);return e}();c.module=angular.module("ngeoDataSources",[]);c.module.service("ngeoDataSources",c);t["a"]=c},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var i=r(226);function n(e,t,r,n){return Object(i["a"])(e,t,r,n,true).utc()}},function(e,t,r){"use strict";r.d(t,"a",function(){return i});function i(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}},function(e,t,r){"use strict";r.d(t,"b",function(){return s});r.d(t,"c",function(){return u});r.d(t,"a",function(){return c});r.d(t,"d",function(){return d});var i=r(39);var n=r(22);var a=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i;var o=/^([a-z]*)$/i;function s(e){if(typeof e==="string"){return e}else{return d(e)}}function l(e){var t=document.createElement("div");t.style.color=e;if(t.style.color!==""){document.body.appendChild(t);var r=getComputedStyle(t).color;document.body.removeChild(t);return r}else{return""}}var u=function(){var e=1024;var t={};var r=0;return function(i){var n=void 0;if(t.hasOwnProperty(i)){n=t[i]}else{if(r>=e){var a=0;for(var o in t){if((a++&3)===0){delete t[o];--r}}}n=f(i);t[i]=n;++r}return n}}();function c(e){if(Array.isArray(e)){return e}else{return u(e)}}function f(e){var t=void 0,r=void 0,n=void 0,s=void 0,u=void 0;if(o.exec(e)){e=l(e)}if(a.exec(e)){var c=e.length-1;var f=void 0;if(c<=4){f=1}else{f=2}var d=c===4||c===8;t=parseInt(e.substr(1+0*f,f),16);r=parseInt(e.substr(1+1*f,f),16);n=parseInt(e.substr(1+2*f,f),16);if(d){s=parseInt(e.substr(1+3*f,f),16)}else{s=255}if(f==1){t=(t<<4)+t;r=(r<<4)+r;n=(n<<4)+n;if(d){s=(s<<4)+s}}u=[t,r,n,s/255]}else if(e.indexOf("rgba(")==0){u=e.slice(5,-1).split(",").map(Number);h(u)}else if(e.indexOf("rgb(")==0){u=e.slice(4,-1).split(",").map(Number);u.push(1);h(u)}else{Object(i["a"])(false,14)}return u}function h(e){e[0]=Object(n["a"])(e[0]+.5|0,0,255);e[1]=Object(n["a"])(e[1]+.5|0,0,255);e[2]=Object(n["a"])(e[2]+.5|0,0,255);e[3]=Object(n["a"])(e[3],0,1);return e}function d(e){var t=e[0];if(t!=(t|0)){t=t+.5|0}var r=e[1];if(r!=(r|0)){r=r+.5|0}var i=e[2];if(i!=(i|0)){i=i+.5|0}var n=e[3]===undefined?1:e[3];return"rgba("+t+","+r+","+i+","+n+")"}},function(e,t,r){"use strict";var i=r(3);var n=r(44);var a=r(5);var o=r(36);var s=r(171);var l=r(12);var u=r(93);var c=r(35);var f=function e(){n["a"].call(this);this.extent_=Object(a["j"])();this.extentRevision_=-1;this.simplifiedGeometryCache={};this.simplifiedGeometryMaxMinSquaredTolerance=0;this.simplifiedGeometryRevision=0};Object(i["d"])(f,n["a"]);var h=Object(c["c"])();f.prototype.clone=function(){};f.prototype.closestPointXY=function(e,t,r,i){};f.prototype.getClosestPoint=function(e,t){var r=t?t:[NaN,NaN];this.closestPointXY(e[0],e[1],r,Infinity);return r};f.prototype.intersectsCoordinate=function(e){return this.containsXY(e[0],e[1])};f.prototype.computeExtent=function(e){};f.prototype.containsXY=o["a"];f.prototype.getExtent=function(e){if(this.extentRevision_!=this.getRevision()){this.extent_=this.computeExtent(this.extent_);this.extentRevision_=this.getRevision()}return Object(a["I"])(this.extent_,e)};f.prototype.rotate=function(e,t){};f.prototype.scale=function(e,t,r){};f.prototype.simplify=function(e){return this.getSimplifiedGeometry(e*e)};f.prototype.getSimplifiedGeometry=function(e){};f.prototype.getType=function(){};f.prototype.applyTransform=function(e){};f.prototype.intersectsExtent=function(e){};f.prototype.translate=function(e,t){};f.prototype.transform=function(e,t){e=Object(l["g"])(e);var r=e.getUnits()==u["b"].TILE_PIXELS?function(r,i,n){var o=e.getExtent();var u=e.getWorldExtent();var f=Object(a["A"])(u)/Object(a["A"])(o);Object(c["b"])(h,u[0],u[3],f,-f,0,0,0);Object(s["c"])(r,0,r.length,n,h,i);return Object(l["i"])(e,t)(r,i,n)}:Object(l["i"])(e,t);this.applyTransform(r);return this};t["a"]=f},function(e,t,r){"use strict";r.d(t,"b",function(){return d});var i=r(2);var n=r(16);var a=r(3);var o=r(44);var s=r(220);var l=r(96);var u=r(11);var c=r(219);var f=r(252);var h=function e(t){var r=Object(u["a"])({},t);delete r.source;s["a"].call(this,r);this.mapPrecomposeKey_=null;this.mapRenderKey_=null;this.sourceChangeKey_=null;if(t.map){this.setMap(t.map)}Object(i["a"])(this,Object(o["b"])(l["a"].SOURCE),this.handleSourcePropertyChange_,this);var n=t.source?t.source:null;this.setSource(n)};Object(a["d"])(h,s["a"]);function d(e,t){return e.visible&&t>=e.minResolution&&t<e.maxResolution}h.prototype.getLayersArray=function(e){var t=e?e:[];t.push(this);return t};h.prototype.getLayerStatesArray=function(e){var t=e?e:[];t.push(this.getLayerState());return t};h.prototype.getSource=function(){var e=this.get(l["a"].SOURCE);return e||null};h.prototype.getSourceState=function(){var e=this.getSource();return!e?f["a"].UNDEFINED:e.getState()};h.prototype.handleSourceChange_=function(){this.changed()};h.prototype.handleSourcePropertyChange_=function(){if(this.sourceChangeKey_){Object(i["e"])(this.sourceChangeKey_);this.sourceChangeKey_=null}var e=this.getSource();if(e){this.sourceChangeKey_=Object(i["a"])(e,n["a"].CHANGE,this.handleSourceChange_,this)}this.changed()};h.prototype.setMap=function(e){if(this.mapPrecomposeKey_){Object(i["e"])(this.mapPrecomposeKey_);this.mapPrecomposeKey_=null}if(!e){this.changed()}if(this.mapRenderKey_){Object(i["e"])(this.mapRenderKey_);this.mapRenderKey_=null}if(e){this.mapPrecomposeKey_=Object(i["a"])(e,c["a"].PRECOMPOSE,function(e){var t=this.getLayerState();t.managed=false;t.zIndex=Infinity;e.frameState.layerStatesArray.push(t);e.frameState.layerStates[Object(a["c"])(this)]=t},this);this.mapRenderKey_=Object(i["a"])(this,n["a"].CHANGE,e.render,e);this.changed()}};h.prototype.setSource=function(e){this.set(l["a"].SOURCE,e)};t["a"]=h},function(e,t,r){"use strict";t["a"]={FRACTION:"fraction",PIXELS:"pixels"}},function(e,t,r){"use strict";t["a"]={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"}},function(e,t,r){"use strict";var i=r(3);var n=r(28);var a=r(95);var o=r(44);var s=r(223);var l=r(39);var u=r(2);var c=r(16);var f=r(5);var h=r(220);var d=r(11);var p=r(252);var v={LAYERS:"layers"};var g=function e(t){var r=t||{};var i=Object(d["a"])({},r);delete i.layers;var a=r.layers;h["a"].call(this,i);this.layersListenerKeys_=[];this.listenerKeys_={};Object(u["a"])(this,Object(o["b"])(v.LAYERS),this.handleLayersChanged_,this);if(a){if(Array.isArray(a)){a=new n["b"](a.slice(),{unique:true})}else{Object(l["a"])(a instanceof n["b"],43);a=a}}else{a=new n["b"](undefined,{unique:true})}this.setLayers(a)};Object(i["d"])(g,h["a"]);g.prototype.handleLayerChange_=function(){this.changed()};g.prototype.handleLayersChanged_=function(e){this.layersListenerKeys_.forEach(u["e"]);this.layersListenerKeys_.length=0;var t=this.getLayers();this.layersListenerKeys_.push(Object(u["a"])(t,a["a"].ADD,this.handleLayersAdd_,this),Object(u["a"])(t,a["a"].REMOVE,this.handleLayersRemove_,this));for(var r in this.listenerKeys_){this.listenerKeys_[r].forEach(u["e"])}Object(d["b"])(this.listenerKeys_);var n=t.getArray();for(var o=0,l=n.length;o<l;o++){var f=n[o];this.listenerKeys_[Object(i["c"])(f).toString()]=[Object(u["a"])(f,s["a"].PROPERTYCHANGE,this.handleLayerChange_,this),Object(u["a"])(f,c["a"].CHANGE,this.handleLayerChange_,this)]}this.changed()};g.prototype.handleLayersAdd_=function(e){var t=e.element;var r=Object(i["c"])(t).toString();this.listenerKeys_[r]=[Object(u["a"])(t,s["a"].PROPERTYCHANGE,this.handleLayerChange_,this),Object(u["a"])(t,c["a"].CHANGE,this.handleLayerChange_,this)];this.changed()};g.prototype.handleLayersRemove_=function(e){var t=e.element;var r=Object(i["c"])(t).toString();this.listenerKeys_[r].forEach(u["e"]);delete this.listenerKeys_[r];this.changed()};g.prototype.getLayers=function(){return this.get(v.LAYERS)};g.prototype.setLayers=function(e){this.set(v.LAYERS,e)};g.prototype.getLayersArray=function(e){var t=e!==undefined?e:[];this.getLayers().forEach(function(e){e.getLayersArray(t)});return t};g.prototype.getLayerStatesArray=function(e){var t=e!==undefined?e:[];var r=t.length;this.getLayers().forEach(function(e){e.getLayerStatesArray(t)});var i=this.getLayerState();for(var n=r,a=t.length;n<a;n++){var o=t[n];o.opacity*=i.opacity;o.visible=o.visible&&i.visible;o.maxResolution=Math.min(o.maxResolution,i.maxResolution);o.minResolution=Math.max(o.minResolution,i.minResolution);if(i.extent!==undefined){if(o.extent!==undefined){o.extent=Object(f["B"])(o.extent,i.extent)}else{o.extent=i.extent}}}return t};g.prototype.getSourceState=function(){return p["a"].READY};t["a"]=g},function(e,t,r){"use strict";r.d(t,"a",function(){return i});r.d(t,"b",function(){return n});r.d(t,"c",function(){return a});r.d(t,"d",function(){return o});function i(e,t,r){if(r===undefined){r=[0,0]}r[0]=e[0]+2*t;r[1]=e[1]+2*t;return r}function n(e){return e[0]>0&&e[1]>0}function a(e,t,r){if(r===undefined){r=[0,0]}r[0]=e[0]*t+.5|0;r[1]=e[1]*t+.5|0;return r}function o(e,t){if(Array.isArray(e)){return e}else{if(t===undefined){t=[e,e]}else{t[0]=t[1]=e}return t}}},function(e,t,r){"use strict";var i=r(1);var n=r(182);var a=r(113);var o=r(180);var s=r(11);function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var u=function(){e.$inject=["$injector","ngeoDataSources","ngeoDataSourcesHelper","ngeoQuerent","ngeoQueryResult"];function e(t,r,i,n,a){l(this,e);var o=t.has("ngeoQueryOptions")?t.get("ngeoQueryOptions"):{};this.dataSources_=r.collection;this.ngeoDataSourcesHelper_=i;this.ngeoQuerent_=n;this.result_=a;this.limit_=o.limit!==undefined?o.limit:50;this.queryCountFirst_=o.queryCountFirst!==undefined?o.queryCountFirst:false;this.tolerancePx_=o.tolerance!==undefined?o.tolerance:3;this.dataSourceNames_={}}e.prototype.issue=function e(t){this.clear();var r=void 0;if(t.dataSources===undefined&&t.queryableDataSources===undefined){r=this.ngeoQuerent_.getQueryableDataSources(this.dataSources_.getArray(),t.map)}var i=t.limit!==undefined?t.limit:this.limit_;s["a"](t,{queryableDataSources:r,limit:i,tolerancePx:this.tolerancePx_,wfsCount:this.queryCountFirst_});this.result_.pending=true;this.ngeoQuerent_.issue(t).then(this.handleResult_.bind(this))};e.prototype.clear=function e(){this.result_.total=0;for(var t=this.result_.sources,r=Array.isArray(t),i=0,t=r?t:t[Symbol.iterator]();;){var n;if(r){if(i>=t.length)break;n=t[i++]}else{i=t.next();if(i.done)break;n=i.value}var a=n;a.features.length=0;a.pending=false;a.queried=false;a.tooManyResults=false;a.totalFeatureCount=undefined}this.result_.sources.length=0;this.result_.pending=false};e.prototype.handleResult_=function e(t){var r=this;var n=0;var a=function e(a){var o=Number(a);var s=r.ngeoDataSourcesHelper_.getDataSource(o);var l=s.name;i["a"].assert(s);var u=t[o];var c=u.features;var f=u.limit;var h=u.tooManyFeatures===true;var d=u.totalFeatureCount;var p={};c.forEach(function(e){var t=i["a"].assertString(e.get("ngeo_feature_type_"));if(!p[t]){p[t]=[]}if(s.attributes&&s.attributes.length){var r=e.getProperties();var n={};s.attributes.forEach(function(t){if(t.alias){n[t.alias]=r[t.name];e.unset(t.name,true)}else{n[t.name]=r[t.name]}});e.setProperties(n,true)}p[t].push(e)});for(var v in p){l=v?v:l;var g=p[v];r.result_.sources.push({features:g,id:o,label:l,limit:f,pending:false,queried:true,tooManyResults:h,totalFeatureCount:d});n+=c.length}};for(var o in t){a(o)}this.result_.total=n;this.result_.pending=false};return e}();u.module=angular.module("ngeoMapQuerent",[a["a"].module.name,o["a"].module.name,n["a"].module.name]);u.module.service("ngeoMapQuerent",u);u.module.value("ngeoQueryResult",{sources:[],total:0,pending:false});t["a"]=u},function(e,t,r){"use strict";r.d(t,"a",function(){return s});r.d(t,"b",function(){return l});r.d(t,"c",function(){return u});var i=r(111);var n=r(53);var a=r(138);function o(e,t,r){var i=7+t-r,n=(7+Object(a["b"])(e,0,i).getUTCDay()-t)%7;return-n+i-1}function s(e,t,r,n,a){var s=(7+r-n)%7,l=o(e,n,a),u=1+7*(t-1)+s+l,c,f;if(u<=0){c=e-1;f=Object(i["a"])(c)+u}else if(u>Object(i["a"])(e)){c=e+1;f=u-Object(i["a"])(e)}else{c=e;f=u}return{year:c,dayOfYear:f}}function l(e,t,r){var i=o(e.year(),t,r),n=Math.floor((e.dayOfYear()-i-1)/7)+1,a,s;if(n<1){s=e.year()-1;a=n+u(s,t,r)}else if(n>u(e.year(),t,r)){a=n-u(e.year(),t,r);s=e.year()+1}else{s=e.year();a=n}return{week:a,year:s}}function u(e,t,r){var n=o(e,t,r),a=o(e+1,t,r);return(Object(i["a"])(e)-n+a)/7}},function(e,t,r){"use strict";r.d(t,"a",function(){return i});r.d(t,"b",function(){return n});r.d(t,"c",function(){return a});r.d(t,"d",function(){return o});function i(e){return Math.pow(e,3)}function n(e){return 1-i(1-e)}function a(e){return 3*e*e-2*e*e*e}function o(e){return e}function s(e){if(e<.5){return a(2*e)}else{return 1-a(2*(e-.5))}}},function(e,t,r){"use strict";var i=r(128);var n=r(114);var a=r(32);var o;if(Array.prototype.some){o=Array.prototype.some}else{o=function(e){var t=Object(this);var r=t.length>>>0;for(var i=0;i<r;i++){if(i in t&&e.call(this,t[i],i,t)){return true}}return false}}r.d(t,"b",function(){return s});r.d(t,"a",function(){return l});function s(e){if(e._isValid==null){var t=Object(a["a"])(e);var r=o.call(t.parsedDateParts,function(e){return e!=null});var i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r);if(e._strict){i=i&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===undefined}if(Object.isFrozen==null||!Object.isFrozen(e)){e._isValid=i}else{return i}}return e._isValid}function l(e){var t=Object(n["a"])(NaN);if(e!=null){Object(i["a"])(Object(a["a"])(t),e)}else{Object(a["a"])(t).userInvalidated=true}return t}},function(e,t,r){"use strict";var i=r(19);var n=r(1);var a=r(109);var o=r(106);var s=r(3);var l=r(132);var u=r(54);var c=function e(t,r,i,n){var a=this;this.layerHelper_=r;this.ngeoWMSTime_=i;this.ogcServersObject_;n.getOgcServersObject().then(function(e){a.ogcServersObject_=e});t.$on("ngeo-layertree-state",function(e,t,r){a.sync_(e,r)})};c.$inject=["$rootScope","ngeoLayerHelper","ngeoWMSTime","gmfThemes"];c.$inject=["$rootScope","ngeoLayerHelper","ngeoWMSTime","gmfThemes"];c.prototype.createLayer=function(e,t,r,i){var n=null;if(e.node.children!==undefined&&e.node.mixed){n=this.createGroup_(e,t,r,i)}else if(e.node.children===undefined&&e.parent.node.mixed){n=this.createLeafInAMixedGroup_(e,t)}else if(e.node.children===undefined){this.initGmfLayerInANotMixedGroup_(e,t)}else if(e.depth===1&&!e.node.mixed){n=this.createGroup_(e,t,r,i)}if(n&&e.node.metadata.opacity){n.setOpacity(e.node.metadata.opacity)}return n};c.prototype.sync_=function(e,t){var r=this;t.traverseDepthFirst(function(e){if(e.layer&&!e.node.mixed){r.updateLayerState_(e.layer,e)}})};c.prototype.updateLayerState_=function(e,t){var r=t.getState()==="on";if(t.node.type==="WMTS"){e.setVisible(r)}else if(!t.node.mixed&&t.depth===1){n["a"].assertInstanceof(e,l["a"]);var i=[];var a=[];t.traverseDepthFirst(function(e){if(e.node.children===undefined&&e.getState()==="on"){i.push(e.node.layers);var t=e.node.style!==undefined?e.node.style:"";a.push(t)}});if(i.length===0){e.setVisible(false)}e.getSource().updateParams({LAYERS:i.reverse().join(","),STYLES:a.reverse().join(",")});if(i.length!==0){e.setVisible(true)}}else{n["a"].assertInstanceof(e,l["a"]);e.setVisible(r)}};c.prototype.createGroup_=function(e,t,r,i){var n=e.node;var a=null;var o=e.parent.isRoot;var s=true;if(n.metadata.printNativeAngle!==undefined){s=n.metadata.printNativeAngle}if(o){a=this.createLayerFromGroup_(e,!!n.mixed);var l=i|0;r.getLayers().insertAt(l,a)}else{var u=!this.isOneParentNotMixed_(e);if(u){a=this.createLayerFromGroup_(e,true);var f=c.getLayer(e.parent);f.getLayers().insertAt(0,a)}}a.set("printNativeAngle",s);return a};c.prototype.createLayerFromGroup_=function(e,t){var r=this;var i=void 0;var a=e.node;if(t){i=this.layerHelper_.createBasicGroup()}else{var o=this.getTimeParam_(e);var s=this.ogcServersObject_[a.ogcServer||""];n["a"].assert(s);n["a"].assert(s.url);n["a"].assert(s.type);n["a"].assert(s.imageType);i=this.layerHelper_.createBasicWMSLayer(s.url,"",s.imageType,s.type,o,undefined,s.credential?"use-credentials":"anonymous");var l=false;e.traverseDepthFirst(function(e){r.updateLayerReferences_(e.node,i);if(e.node.metadata.isChecked){e.setState("on",false);r.updateLayerState_(i,e);l=true}});i.setVisible(l);i.set("layerNodeName",a.name)}return i};c.prototype.createLeafInAMixedGroup_=function(e,t){var r=e.node;var i=void 0;if(r.type==="WMTS"){i=this.createWMTSLayer_(r)}else{var a=r;var o=this.getTimeParam_(e);var s=this.ogcServersObject_[a.ogcServer];n["a"].assert(s);n["a"].assert(s.url);n["a"].assert(s.type);n["a"].assert(a.layers);n["a"].assert(s.imageType);var l={STYLES:a.style};i=this.layerHelper_.createBasicWMSLayer(s.url,a.layers,s.imageType,s.type,o,l,s.credential?"use-credentials":"anonymous")}i.set("layerNodeName",r.name);this.updateLayerReferences_(r,i);var u=r.metadata.isChecked===true;if(u){e.setState("on",false)}i.setVisible(u);var f=c.getLayer(e.parent);f.getLayers().insertAt(0,i);return i};c.prototype.initGmfLayerInANotMixedGroup_=function(e,t){var r=e.node;var i=this.getFirstLevelGroupCtrl_(e);n["a"].assert(i);var a=i.layer;n["a"].assertInstanceof(a,l["a"]);this.updateLayerReferences_(r,a);if(r.metadata.isChecked){e.setState("on",false);this.updateLayerState_(a,i)}else{e.parent.refreshState()}};c.prototype.createWMTSLayer_=function(e){var t=new u["a"];n["a"].assert(e.url);n["a"].assert(e.layer);this.layerHelper_.createWMTSLayerFromCapabilitites(e.url,e.layer,e.matrixSet,e.dimensions).then(function(e){t.setSource(e.getSource());t.set("capabilitiesStyles",e.get("capabilitiesStyles"))});return t};c.prototype.updateLayerReferences_=function(e,t){var r=s["c"](e);var i=t.get("querySourceIds")||[];i.push(r);t.set("querySourceIds",i);var n=e.metadata.disclaimer;if(n){var a=t.get("disclaimers")||[];a.push(e.metadata.disclaimer);t.set("disclaimers",a)}};c.prototype.getTimeParam_=function(e){var t=void 0;var r=void 0;var i=e.node;if(i.time){t=i.time}else if(i.children){e.traverseDepthFirst(function(e){if(e.node.children===undefined&&e.node.time){t=e.node.time;return a["a"].VisitorDecision.STOP}})}if(t){var n=this.ngeoWMSTime_.getOptions(t)["values"];r=this.ngeoWMSTime_.formatWMSTimeParam(t,{start:n[0]||n,end:n[1]})}return r};c.prototype.isOneParentNotMixed_=function(e){var t=e.parent;var r=false;do{r=t.node.mixed===false;t=t.parent}while(t.parent&&!r);return r};c.prototype.getFirstLevelGroupCtrl_=function(e){var t=e;while(!t.parent.isRoot){t=t.parent}return t};c.getLayer=function(e){var t=e;var r=null;while(!t.isRoot&&r===null){if(t.layer){r=t.layer}t=t.parent}return r};c.module=angular.module("gmfSyncLayertreeMap",[i["a"].module.name,a["a"].module.name,o["a"].module.name]);c.module.service("gmfSyncLayertreeMap",c);t["a"]=c},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var i=r(57);function n(e,t){for(var r in t){if(Object(i["a"])(t,r)){e[r]=t[r]}}if(Object(i["a"])(t,"toString")){e.toString=t.toString}if(Object(i["a"])(t,"valueOf")){e.valueOf=t.valueOf}return e}},function(e,t,r){(function(e,r){true?r(t):undefined})(this,function(e){"use strict";function t(e,t,r){e.prototype=t.prototype=r;r.constructor=e}function r(e,t){var r=Object.create(e.prototype);for(var i in t)r[i]=t[i];return r}function i(){}var n=.7;var a=1/n;var o="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",l="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",u=/^#([0-9a-f]{3})$/,c=/^#([0-9a-f]{6})$/,f=new RegExp("^rgb\\("+[o,o,o]+"\\)$"),h=new RegExp("^rgb\\("+[l,l,l]+"\\)$"),d=new RegExp("^rgba\\("+[o,o,o,s]+"\\)$"),p=new RegExp("^rgba\\("+[l,l,l,s]+"\\)$"),v=new RegExp("^hsl\\("+[s,l,l]+"\\)$"),g=new RegExp("^hsla\\("+[s,l,l,s]+"\\)$");var m={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};t(i,y,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}});function y(e){var t;e=(e+"").trim().toLowerCase();return(t=u.exec(e))?(t=parseInt(t[1],16),new C(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1)):(t=c.exec(e))?_(parseInt(t[1],16)):(t=f.exec(e))?new C(t[1],t[2],t[3],1):(t=h.exec(e))?new C(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=d.exec(e))?b(t[1],t[2],t[3],t[4]):(t=p.exec(e))?b(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=v.exec(e))?O(t[1],t[2]/100,t[3]/100,1):(t=g.exec(e))?O(t[1],t[2]/100,t[3]/100,t[4]):m.hasOwnProperty(e)?_(m[e]):e==="transparent"?new C(NaN,NaN,NaN,0):null}function _(e){return new C(e>>16&255,e>>8&255,e&255,1)}function b(e,t,r,i){if(i<=0)e=t=r=NaN;return new C(e,t,r,i)}function w(e){if(!(e instanceof i))e=y(e);if(!e)return new C;e=e.rgb();return new C(e.r,e.g,e.b,e.opacity)}function S(e,t,r,i){return arguments.length===1?w(e):new C(e,t,r,i==null?1:i)}function C(e,t,r,i){this.r=+e;this.g=+t;this.b=+r;this.opacity=+i}t(C,S,r(i,{brighter:function(e){e=e==null?a:Math.pow(a,e);return new C(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){e=e==null?n:Math.pow(n,e);return new C(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&(0<=this.g&&this.g<=255)&&(0<=this.b&&this.b<=255)&&(0<=this.opacity&&this.opacity<=1)},hex:function(){return"#"+x(this.r)+x(this.g)+x(this.b)},toString:function(){var e=this.opacity;e=isNaN(e)?1:Math.max(0,Math.min(1,e));return(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}}));function x(e){e=Math.max(0,Math.min(255,Math.round(e)||0));return(e<16?"0":"")+e.toString(16)}function O(e,t,r,i){if(i<=0)e=t=r=NaN;else if(r<=0||r>=1)e=t=NaN;else if(t<=0)e=NaN;return new M(e,t,r,i)}function T(e){if(e instanceof M)return new M(e.h,e.s,e.l,e.opacity);if(!(e instanceof i))e=y(e);if(!e)return new M;if(e instanceof M)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),o=Math.max(t,r,n),s=NaN,l=o-a,u=(o+a)/2;if(l){if(t===o)s=(r-n)/l+(r<n)*6;else if(r===o)s=(n-t)/l+2;else s=(t-r)/l+4;l/=u<.5?o+a:2-o-a;s*=60}else{l=u>0&&u<1?0:s}return new M(s,l,u,e.opacity)}function E(e,t,r,i){return arguments.length===1?T(e):new M(e,t,r,i==null?1:i)}function M(e,t,r,i){this.h=+e;this.s=+t;this.l=+r;this.opacity=+i}t(M,E,r(i,{brighter:function(e){e=e==null?a:Math.pow(a,e);return new M(this.h,this.s,this.l*e,this.opacity)},darker:function(e){e=e==null?n:Math.pow(n,e);return new M(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*t,n=2*r-i;return new C(j(e>=240?e-240:e+120,n,i),j(e,n,i),j(e<120?e+240:e-120,n,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1)}}));function j(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}var A=Math.PI/180;var P=180/Math.PI;var k=18,I=.96422,D=1,R=.82521,L=4/29,$=6/29,N=3*$*$,F=$*$*$;function G(e){if(e instanceof Y)return new Y(e.l,e.a,e.b,e.opacity);if(e instanceof Z){if(isNaN(e.h))return new Y(e.l,0,0,e.opacity);var t=e.h*A;return new Y(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}if(!(e instanceof C))e=w(e);var r=q(e.r),i=q(e.g),n=q(e.b),a=W((.2225045*r+.7168786*i+.0606169*n)/D),o,s;if(r===i&&i===n)o=s=a;else{o=W((.4360747*r+.3850649*i+.1430804*n)/I);s=W((.0139322*r+.0971045*i+.7141733*n)/R)}return new Y(116*a-16,500*(o-a),200*(a-s),e.opacity)}function U(e,t){return new Y(e,0,0,t==null?1:t)}function H(e,t,r,i){return arguments.length===1?G(e):new Y(e,t,r,i==null?1:i)}function Y(e,t,r,i){this.l=+e;this.a=+t;this.b=+r;this.opacity=+i}t(Y,H,r(i,{brighter:function(e){return new Y(this.l+k*(e==null?1:e),this.a,this.b,this.opacity)},darker:function(e){return new Y(this.l-k*(e==null?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,r=isNaN(this.b)?e:e-this.b/200;t=I*V(t);e=D*V(e);r=R*V(r);return new C(z(3.1338561*t-1.6168667*e-.4906146*r),z(-.9787684*t+1.9161415*e+.033454*r),z(.0719453*t-.2289914*e+1.4052427*r),this.opacity)}}));function W(e){return e>F?Math.pow(e,1/3):e/N+L}function V(e){return e>$?e*e*e:N*(e-L)}function z(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function q(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function B(e){if(e instanceof Z)return new Z(e.h,e.c,e.l,e.opacity);if(!(e instanceof Y))e=G(e);if(e.a===0&&e.b===0)return new Z(NaN,0,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*P;return new Z(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function X(e,t,r,i){return arguments.length===1?B(e):new Z(r,t,e,i==null?1:i)}function K(e,t,r,i){return arguments.length===1?B(e):new Z(e,t,r,i==null?1:i)}function Z(e,t,r,i){this.h=+e;this.c=+t;this.l=+r;this.opacity=+i}t(Z,K,r(i,{brighter:function(e){return new Z(this.h,this.c,this.l+k*(e==null?1:e),this.opacity)},darker:function(e){return new Z(this.h,this.c,this.l-k*(e==null?1:e),this.opacity)},rgb:function(){return G(this).rgb()}}));var Q=-.14861,J=+1.78277,ee=-.29227,te=-.90649,re=+1.97294,ie=re*te,ne=re*J,ae=J*ee-te*Q;function oe(e){if(e instanceof le)return new le(e.h,e.s,e.l,e.opacity);if(!(e instanceof C))e=w(e);var t=e.r/255,r=e.g/255,i=e.b/255,n=(ae*i+ie*t-ne*r)/(ae+ie-ne),a=i-n,o=(re*(r-n)-ee*a)/te,s=Math.sqrt(o*o+a*a)/(re*n*(1-n)),l=s?Math.atan2(o,a)*P-120:NaN;return new le(l<0?l+360:l,s,n,e.opacity)}function se(e,t,r,i){return arguments.length===1?oe(e):new le(e,t,r,i==null?1:i)}function le(e,t,r,i){this.h=+e;this.s=+t;this.l=+r;this.opacity=+i}t(le,se,r(i,{brighter:function(e){e=e==null?a:Math.pow(a,e);return new le(this.h,this.s,this.l*e,this.opacity)},darker:function(e){e=e==null?n:Math.pow(n,e);return new le(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*A,t=+this.l,r=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),n=Math.sin(e);return new C(255*(t+r*(Q*i+J*n)),255*(t+r*(ee*i+te*n)),255*(t+r*(re*i)),this.opacity)}}));e.color=y;e.rgb=S;e.hsl=E;e.lab=H;e.hcl=K;e.lch=X;e.gray=U;e.cubehelix=se;Object.defineProperty(e,"__esModule",{value:true})})},function(e,t,r){"use strict";var i=r(3);var n=r(9);var a=r(5);var o=r(23);var s=r(7);var l=r(51);var u=r(85);var c=r(170);var f=r(203);var h=r(177);var d=r(343);var p=r(345);var v=r(246);var g=function e(t,r){u["a"].call(this);this.ends_=[];this.maxDelta_=-1;this.maxDeltaRevision_=-1;this.setCoordinates(t,r)};Object(i["d"])(g,u["a"]);g.prototype.appendLineString=function(e){if(!this.flatCoordinates){this.flatCoordinates=e.getFlatCoordinates().slice()}else{Object(n["c"])(this.flatCoordinates,e.getFlatCoordinates().slice())}this.ends_.push(this.flatCoordinates.length);this.changed()};g.prototype.clone=function(){var e=new g(null);e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice());return e};g.prototype.closestPointXY=function(e,t,r,i){if(i<Object(a["e"])(this.getExtent(),e,t)){return i}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(Object(c["a"])(this.flatCoordinates,0,this.ends_,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return Object(c["b"])(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,false,e,t,r,i)};g.prototype.getCoordinateAtM=function(e,t,r){if(this.layout!=o["a"].XYM&&this.layout!=o["a"].XYZM||this.flatCoordinates.length===0){return null}var i=t!==undefined?t:false;var n=r!==undefined?r:false;return Object(d["c"])(this.flatCoordinates,0,this.ends_,this.stride,e,i,n)};g.prototype.getCoordinates=function(){return Object(h["b"])(this.flatCoordinates,0,this.ends_,this.stride)};g.prototype.getEnds=function(){return this.ends_};g.prototype.getLineString=function(e){if(e<0||this.ends_.length<=e){return null}var t=new l["a"](null);t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]));return t};g.prototype.getLineStrings=function(){var e=this.flatCoordinates;var t=this.ends_;var r=this.layout;var i=[];var n=0;for(var a=0,o=t.length;a<o;++a){var s=t[a];var u=new l["a"](null);u.setFlatCoordinates(r,e.slice(n,s));i.push(u);n=s}return i};g.prototype.getFlatMidpoints=function(){var e=[];var t=this.flatCoordinates;var r=0;var i=this.ends_;var a=this.stride;for(var o=0,s=i.length;o<s;++o){var l=i[o];var u=Object(d["a"])(t,r,l,a,.5);Object(n["c"])(e,u);r=l}return e};g.prototype.getSimplifiedGeometryInternal=function(e){var t=[];var r=[];t.length=Object(v["b"])(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,r);var i=new g(null);i.setFlatCoordinates(o["a"].XY,t,r);return i};g.prototype.getType=function(){return s["a"].MULTI_LINE_STRING};g.prototype.intersectsExtent=function(e){return Object(p["b"])(this.flatCoordinates,0,this.ends_,this.stride,e)};g.prototype.setCoordinates=function(e,t){if(!e){this.setFlatCoordinates(o["a"].XY,null,this.ends_)}else{this.setLayout(t,e,2);if(!this.flatCoordinates){this.flatCoordinates=[]}var r=Object(f["c"])(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1];this.changed()}};g.prototype.setFlatCoordinates=function(e,t,r){this.setFlatCoordinatesInternal(e,t);this.ends_=r;this.changed()};g.prototype.setLineStrings=function(e){var t=this.getLayout();var r=[];var i=[];for(var a=0,o=e.length;a<o;++a){var s=e[a];if(a===0){t=s.getLayout()}Object(n["c"])(r,s.getFlatCoordinates());i.push(r.length)}this.setFlatCoordinates(t,r,i)};t["a"]=g},function(e,t,r){"use strict";var i=r(3);var n=r(9);var a=r(5);var o=r(23);var s=r(7);var l=r(34);var u=r(85);var c=r(203);var f=r(177);var h=r(22);var d=function e(t,r){u["a"].call(this);this.setCoordinates(t,r)};Object(i["d"])(d,u["a"]);d.prototype.appendPoint=function(e){if(!this.flatCoordinates){this.flatCoordinates=e.getFlatCoordinates().slice()}else{Object(n["c"])(this.flatCoordinates,e.getFlatCoordinates())}this.changed()};d.prototype.clone=function(){var e=new d(null);e.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return e};d.prototype.closestPointXY=function(e,t,r,i){if(i<Object(a["e"])(this.getExtent(),e,t)){return i}var n=this.flatCoordinates;var o=this.stride;for(var s=0,l=n.length;s<l;s+=o){var u=Object(h["f"])(e,t,n[s],n[s+1]);if(u<i){i=u;for(var c=0;c<o;++c){r[c]=n[s+c]}r.length=o}}return i};d.prototype.getCoordinates=function(){return Object(f["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};d.prototype.getPoint=function(e){var t=!this.flatCoordinates?0:this.flatCoordinates.length/this.stride;if(e<0||t<=e){return null}var r=new l["a"](null);r.setFlatCoordinates(this.layout,this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride));return r};d.prototype.getPoints=function(){var e=this.flatCoordinates;var t=this.layout;var r=this.stride;var i=[];for(var n=0,a=e.length;n<a;n+=r){var o=new l["a"](null);o.setFlatCoordinates(t,e.slice(n,n+r));i.push(o)}return i};d.prototype.getType=function(){return s["a"].MULTI_POINT};d.prototype.intersectsExtent=function(e){var t=this.flatCoordinates;var r=this.stride;for(var i=0,n=t.length;i<n;i+=r){var o=t[i];var s=t[i+1];if(Object(a["h"])(e,o,s)){return true}}return false};d.prototype.setCoordinates=function(e,t){if(!e){this.setFlatCoordinates(o["a"].XY,null)}else{this.setLayout(t,e,1);if(!this.flatCoordinates){this.flatCoordinates=[]}this.flatCoordinates.length=Object(c["b"])(this.flatCoordinates,0,e,this.stride);this.changed()}};d.prototype.setFlatCoordinates=function(e,t){this.setFlatCoordinatesInternal(e,t);this.changed()};t["a"]=d},function(e,t,r){"use strict";var i=r(3);var n=r(178);var a=r(118);var o=function e(t){var r=t?t:{};a["a"].call(this,r);this.type=n["a"].IMAGE};Object(i["d"])(o,a["a"]);o.prototype.getSource;t["a"]=o},function(e,t,r){"use strict";r.d(t,"b",function(){return i});r.d(t,"a",function(){return n});var i=.5;var n=true},function(e,t,r){"use strict";var i=r(1);var n=r(148);var a=r(31);var o=r(52);var s=r(106);var l=r(41);function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function c(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var h=function(e){f(t,e);function t(r){u(this,t);r.type=r.type||a["a"].DATE;return c(this,e.call(this,r))}return t}(l["a"]);var d=h;var p=r(92);var v=r(175);function g(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function m(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function y(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var _=function(e){y(t,e);function t(r){g(this,t);r.operator=r.operator||l["a"].OperatorType.LIKE;r.type=a["a"].TEXT;return m(this,e.call(this,r))}return t}(l["a"]);var b=_;var w=r(218);var S=r(67);var C=r(9);var x=r(13);var O=r(53);var T=r(114);var E=r(126);var M=r(74);var j=r(80);var A=r(115);var P=Object(j["a"])("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=O["a"].apply(null,arguments);if(this.isValid()&&e.isValid()){return e<this?this:e}else{return Object(E["a"])()}});var k=Object(j["a"])("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=O["a"].apply(null,arguments);if(this.isValid()&&e.isValid()){return e>this?this:e}else{return Object(E["a"])()}});function I(e,t){var r,i;if(t.length===1&&Object(A["a"])(t[0])){t=t[0]}if(!t.length){return Object(O["a"])()}r=t[0];for(i=1;i<t.length;++i){if(!t[i].isValid()||t[i][e](r)){r=t[i]}}return r}function D(){var e=[].slice.call(arguments,0);return I("isBefore",e)}function R(){var e=[].slice.call(arguments,0);return I("isAfter",e)}var L=function(){return Date.now?Date.now():+new Date};var $=r(87);var N=r(79);var F=r(30);var G=r(97);var U=r(26);var H=r(82);var Y=["year","quarter","month","week","day","hour","minute","second","millisecond"];function W(e){for(var t in e){if(!(H["a"].call(Y,t)!==-1&&(e[t]==null||!isNaN(e[t])))){return false}}var r=false;for(var i=0;i<Y.length;++i){if(e[Y[i]]){if(r){return false}if(parseFloat(e[Y[i]])!==Object(U["a"])(e[Y[i]])){r=true}}}return true}function V(){return this._isValid}function z(){return Oe(NaN)}function q(e){var t=Object(F["b"])(e),r=t.year||0,i=t.quarter||0,n=t.month||0,a=t.week||0,o=t.day||0,s=t.hour||0,l=t.minute||0,u=t.second||0,c=t.millisecond||0;this._isValid=W(t);this._milliseconds=+c+u*1e3+l*6e4+s*1e3*60*60;this._days=+o+a*7;this._months=+n+i*3+r*12;this._data={};this._locale=Object(G["b"])();this._bubble()}function B(e){return e instanceof q}var X=r(139);function K(e){if(e<0){return Math.round(-1*e)*-1}else{return Math.round(e)}}var Z=r(57);var Q=r(10);var J=r(140);var ee=r(20);var te=r(6);var re=r(37);var ie=r(226);var ne=r(210);var ae=r(81);var oe=r(331);function se(e,t){Object(ee["a"])(e,0,0,function(){var e=this.utcOffset();var r="+";if(e<0){e=-e;r="-"}return r+Object(J["a"])(~~(e/60),2)+t+Object(J["a"])(~~e%60,2)})}se("Z",":");se("ZZ","");Object(te["a"])("Z",te["o"]);Object(te["a"])("ZZ",te["o"]);Object(re["a"])(["Z","ZZ"],function(e,t,r){r._useUTC=true;r._tzm=ue(te["o"],e)});var le=/([\+\-]|\d\d)/gi;function ue(e,t){var r=(t||"").match(e);if(r===null){return null}var i=r[r.length-1]||[];var n=(i+"").match(le)||["-",0,0];var a=+(n[1]*60)+Object(U["a"])(n[2]);return a===0?0:n[0]==="+"?a:-a}function ce(e,t){var r,i;if(t._isUTC){r=t.clone();i=(Object(M["c"])(e)||Object(ne["a"])(e)?e.valueOf():Object(O["a"])(e).valueOf())-r.valueOf();r._d.setTime(r._d.valueOf()+i);x["a"].updateOffset(r,false);return r}else{return Object(O["a"])(e).local()}}function fe(e){return-Math.round(e._d.getTimezoneOffset()/15)*15}x["a"].updateOffset=function(){};function he(e,t,r){var i=this._offset||0,n;if(!this.isValid()){return e!=null?this:NaN}if(e!=null){if(typeof e==="string"){e=ue(te["o"],e);if(e===null){return this}}else if(Math.abs(e)<16&&!r){e=e*60}if(!this._isUTC&&t){n=fe(this)}this._offset=e;this._isUTC=true;if(n!=null){this.add(n,"m")}if(i!==e){if(!t||this._changeInProgress){Ae(this,Oe(e-i,"m"),1,false)}else if(!this._changeInProgress){this._changeInProgress=true;x["a"].updateOffset(this,true);this._changeInProgress=null}}return this}else{return this._isUTC?i:fe(this)}}function de(e,t){if(e!=null){if(typeof e!=="string"){e=-e}this.utcOffset(e,t);return this}else{return-this.utcOffset()}}function pe(e){return this.utcOffset(0,e)}function ve(e){if(this._isUTC){this.utcOffset(0,e);this._isUTC=false;if(e){this.subtract(fe(this),"m")}}return this}function ge(){if(this._tzm!=null){this.utcOffset(this._tzm,false,true)}else if(typeof this._i==="string"){var e=ue(te["n"],this._i);if(e!=null){this.utcOffset(e)}else{this.utcOffset(0,true)}}return this}function me(e){if(!this.isValid()){return false}e=e?Object(O["a"])(e).utcOffset():0;return(this.utcOffset()-e)%60===0}function ye(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function _e(){if(!Object(ae["a"])(this._isDSTShifted)){return this._isDSTShifted}var e={};Object(M["b"])(e,this);e=Object(ie["b"])(e);if(e._a){var t=e._isUTC?Object(T["a"])(e._a):Object(O["a"])(e._a);this._isDSTShifted=this.isValid()&&Object(oe["a"])(e._a,t.toArray())>0}else{this._isDSTShifted=false}return this._isDSTShifted}function be(){return this.isValid()?!this._isUTC:false}function we(){return this.isValid()?this._isUTC:false}function Se(){return this.isValid()?this._isUTC&&this._offset===0:false}var Ce=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/;var xe=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Oe(e,t){var r=e,i=null,n,a,o;if(B(e)){r={ms:e._milliseconds,d:e._days,M:e._months}}else if(Object(X["a"])(e)){r={};if(t){r[t]=e}else{r.milliseconds=e}}else if(!!(i=Ce.exec(e))){n=i[1]==="-"?-1:1;r={y:0,d:Object(U["a"])(i[Q["a"]])*n,h:Object(U["a"])(i[Q["b"]])*n,m:Object(U["a"])(i[Q["d"]])*n,s:Object(U["a"])(i[Q["f"]])*n,ms:Object(U["a"])(K(i[Q["c"]]*1e3))*n}}else if(!!(i=xe.exec(e))){n=i[1]==="-"?-1:i[1]==="+"?1:1;r={y:Te(i[2],n),M:Te(i[3],n),w:Te(i[4],n),d:Te(i[5],n),h:Te(i[6],n),m:Te(i[7],n),s:Te(i[8],n)}}else if(r==null){r={}}else if(typeof r==="object"&&("from"in r||"to"in r)){o=Me(Object(O["a"])(r.from),Object(O["a"])(r.to));r={};r.ms=o.milliseconds;r.M=o.months}a=new q(r);if(B(e)&&Object(Z["a"])(e,"_locale")){a._locale=e._locale}return a}Oe.fn=q.prototype;Oe.invalid=z;function Te(e,t){var r=e&&parseFloat(e.replace(",","."));return(isNaN(r)?0:r)*t}function Ee(e,t){var r={milliseconds:0,months:0};r.months=t.month()-e.month()+(t.year()-e.year())*12;if(e.clone().add(r.months,"M").isAfter(t)){--r.months}r.milliseconds=+t-+e.clone().add(r.months,"M");return r}function Me(e,t){var r;if(!(e.isValid()&&t.isValid())){return{milliseconds:0,months:0}}t=ce(t,e);if(e.isBefore(t)){r=Ee(e,t)}else{r=Ee(t,e);r.milliseconds=-r.milliseconds;r.months=-r.months}return r}function je(e,t){return function(r,i){var n,a;if(i!==null&&!isNaN(+i)){Object(j["b"])(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). "+"See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");a=r;r=i;i=a}r=typeof r==="string"?+r:r;n=Oe(r,i);Ae(this,n,e);return this}}function Ae(e,t,r,i){var n=t._milliseconds,a=K(t._days),o=K(t._months);if(!e.isValid()){return}i=i==null?true:i;if(o){Object(N["k"])(e,Object($["a"])(e,"Month")+o*r)}if(a){Object($["c"])(e,"Date",Object($["a"])(e,"Date")+a*r)}if(n){e._d.setTime(e._d.valueOf()+n*r)}if(i){x["a"].updateOffset(e,a||o)}}var Pe=je(1,"add");var ke=je(-1,"subtract");var Ie=r(108);function De(e,t){var r=e.diff(t,"days",true);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"}function Re(e,t){var r=e||Object(O["a"])(),i=ce(r,this).startOf("day"),n=x["a"].calendarFormat(this,i)||"sameElse";var a=t&&(Object(Ie["a"])(t[n])?t[n].call(this,r):t[n]);return this.format(a||this.localeData().calendar(n,this,Object(O["a"])(r)))}function Le(){return new M["a"](this)}function $e(e,t){var r=Object(M["c"])(e)?e:Object(O["a"])(e);if(!(this.isValid()&&r.isValid())){return false}t=Object(F["c"])(!Object(ae["a"])(t)?t:"millisecond");if(t==="millisecond"){return this.valueOf()>r.valueOf()}else{return r.valueOf()<this.clone().startOf(t).valueOf()}}function Ne(e,t){var r=Object(M["c"])(e)?e:Object(O["a"])(e);if(!(this.isValid()&&r.isValid())){return false}t=Object(F["c"])(!Object(ae["a"])(t)?t:"millisecond");if(t==="millisecond"){return this.valueOf()<r.valueOf()}else{return this.clone().endOf(t).valueOf()<r.valueOf()}}function Fe(e,t,r,i){i=i||"()";return(i[0]==="("?this.isAfter(e,r):!this.isBefore(e,r))&&(i[1]===")"?this.isBefore(t,r):!this.isAfter(t,r))}function Ge(e,t){var r=Object(M["c"])(e)?e:Object(O["a"])(e),i;if(!(this.isValid()&&r.isValid())){return false}t=Object(F["c"])(t||"millisecond");if(t==="millisecond"){return this.valueOf()===r.valueOf()}else{i=r.valueOf();return this.clone().startOf(t).valueOf()<=i&&i<=this.clone().endOf(t).valueOf()}}function Ue(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function He(e,t){return this.isSame(e,t)||this.isBefore(e,t)}var Ye=r(112);function We(e,t,r){var i,n,a,o;if(!this.isValid()){return NaN}i=ce(e,this);if(!i.isValid()){return NaN}n=(i.utcOffset()-this.utcOffset())*6e4;t=Object(F["c"])(t);switch(t){case"year":o=Ve(this,i)/12;break;case"month":o=Ve(this,i);break;case"quarter":o=Ve(this,i)/3;break;case"second":o=(this-i)/1e3;break;case"minute":o=(this-i)/6e4;break;case"hour":o=(this-i)/36e5;break;case"day":o=(this-i-n)/864e5;break;case"week":o=(this-i-n)/6048e5;break;default:o=this-i}return r?o:Object(Ye["a"])(o)}function Ve(e,t){var r=(t.year()-e.year())*12+(t.month()-e.month()),i=e.clone().add(r,"months"),n,a;if(t-i<0){n=e.clone().add(r-1,"months");a=(t-i)/(i-n)}else{n=e.clone().add(r+1,"months");a=(t-i)/(n-i)}return-(r+a)||0}x["a"].defaultFormat="YYYY-MM-DDTHH:mm:ssZ";x["a"].defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function ze(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function qe(e){if(!this.isValid()){return null}var t=e!==true;var r=t?this.clone().utc():this;if(r.year()<0||r.year()>9999){return Object(ee["c"])(r,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ")}if(Object(Ie["a"])(Date.prototype.toISOString)){if(t){return this.toDate().toISOString()}else{return new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Object(ee["c"])(r,"Z"))}}return Object(ee["c"])(r,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Be(){if(!this.isValid()){return"moment.invalid(/* "+this._i+" */)"}var e="moment";var t="";if(!this.isLocal()){e=this.utcOffset()===0?"moment.utc":"moment.parseZone";t="Z"}var r="["+e+'("]';var i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY";var n="-MM-DD[T]HH:mm:ss.SSS";var a=t+'[")]';return this.format(r+i+n+a)}function Xe(e){if(!e){e=this.isUtc()?x["a"].defaultFormatUtc:x["a"].defaultFormat}var t=Object(ee["c"])(this,e);return this.localeData().postformat(t)}function Ke(e,t){if(this.isValid()&&(Object(M["c"])(e)&&e.isValid()||Object(O["a"])(e).isValid())){return Oe({to:this,from:e}).locale(this.locale()).humanize(!t)}else{return this.localeData().invalidDate()}}function Ze(e){return this.from(Object(O["a"])(),e)}function Qe(e,t){if(this.isValid()&&(Object(M["c"])(e)&&e.isValid()||Object(O["a"])(e).isValid())){return Oe({from:this,to:e}).locale(this.locale()).humanize(!t)}else{return this.localeData().invalidDate()}}function Je(e){return this.to(Object(O["a"])(),e)}function et(e){var t;if(e===undefined){return this._locale._abbr}else{t=Object(G["b"])(e);if(t!=null){this._locale=t}return this}}var tt=Object(j["a"])("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){if(e===undefined){return this.localeData()}else{return this.locale(e)}});function rt(){return this._locale}function it(e){e=Object(F["c"])(e);switch(e){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(e==="week"){this.weekday(0)}if(e==="isoWeek"){this.isoWeekday(1)}if(e==="quarter"){this.month(Math.floor(this.month()/3)*3)}return this}function nt(e){e=Object(F["c"])(e);if(e===undefined||e==="millisecond"){return this}if(e==="date"){e="day"}return this.startOf(e).add(1,e==="isoWeek"?"week":e).subtract(1,"ms")}function at(){return this._d.valueOf()-(this._offset||0)*6e4}function ot(){return Math.floor(this.valueOf()/1e3)}function st(){return new Date(this.valueOf())}function lt(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function ut(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function ct(){return this.isValid()?this.toISOString():null}var ft=r(128);var ht=r(32);function dt(){return Object(E["b"])(this)}function pt(){return Object(ft["a"])({},Object(ht["a"])(this))}function vt(){return Object(ht["a"])(this).overflow}function gt(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}var mt=r(111);var yt=r(63);var _t=r(124);var bt=r(138);Object(ee["a"])(0,["gg",2],0,function(){return this.weekYear()%100});Object(ee["a"])(0,["GG",2],0,function(){return this.isoWeekYear()%100});function wt(e,t){Object(ee["a"])(0,[e,e.length],0,t)}wt("gggg","weekYear");wt("ggggg","weekYear");wt("GGGG","isoWeekYear");wt("GGGGG","isoWeekYear");Object(F["a"])("weekYear","gg");Object(F["a"])("isoWeekYear","GG");Object(yt["a"])("weekYear",1);Object(yt["a"])("isoWeekYear",1);Object(te["a"])("G",te["p"]);Object(te["a"])("g",te["p"]);Object(te["a"])("GG",te["d"],te["h"]);Object(te["a"])("gg",te["d"],te["h"]);Object(te["a"])("GGGG",te["f"],te["k"]);Object(te["a"])("gggg",te["f"],te["k"]);Object(te["a"])("GGGGG",te["g"],te["m"]);Object(te["a"])("ggggg",te["g"],te["m"]);Object(re["c"])(["gggg","ggggg","GGGG","GGGGG"],function(e,t,r,i){t[i.substr(0,2)]=Object(U["a"])(e)});Object(re["c"])(["gg","GG"],function(e,t,r,i){t[i]=x["a"].parseTwoDigitYear(e)});function St(e){return Tt.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Ct(e){return Tt.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function xt(){return Object(_t["c"])(this.year(),1,4)}function Ot(){var e=this.localeData()._week;return Object(_t["c"])(this.year(),e.dow,e.doy)}function Tt(e,t,r,i,n){var a;if(e==null){return Object(_t["b"])(this,i,n).year}else{a=Object(_t["c"])(e,i,n);if(t>a){t=a}return Et.call(this,e,t,r,i,n)}}function Et(e,t,r,i,n){var a=Object(_t["a"])(e,t,r,i,n),o=Object(bt["b"])(a.year,0,a.dayOfYear);this.year(o.getUTCFullYear());this.month(o.getUTCMonth());this.date(o.getUTCDate());return this}Object(ee["a"])("Q",0,"Qo","quarter");Object(F["a"])("quarter","Q");Object(yt["a"])("quarter",7);Object(te["a"])("Q",te["c"]);Object(re["a"])("Q",function(e,t){t[Q["e"]]=(Object(U["a"])(e)-1)*3});function Mt(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}var jt=r(164);Object(ee["a"])("D",["DD",2],"Do","date");Object(F["a"])("date","D");Object(yt["a"])("date",9);Object(te["a"])("D",te["d"]);Object(te["a"])("DD",te["d"],te["h"]);Object(te["a"])("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});Object(re["a"])(["D","DD"],Q["a"]);Object(re["a"])("Do",function(e,t){t[Q["a"]]=Object(U["a"])(e.match(te["d"])[0])});var At=Object($["b"])("Date",true);var Pt=r(98);Object(ee["a"])("DDD",["DDDD",3],"DDDo","dayOfYear");Object(F["a"])("dayOfYear","DDD");Object(yt["a"])("dayOfYear",4);Object(te["a"])("DDD",te["e"]);Object(te["a"])("DDDD",te["i"]);Object(re["a"])(["DDD","DDDD"],function(e,t,r){r._dayOfYear=Object(U["a"])(e)});function kt(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}var It=r(187);Object(ee["a"])("m",["mm",2],0,"minute");Object(F["a"])("minute","m");Object(yt["a"])("minute",14);Object(te["a"])("m",te["d"]);Object(te["a"])("mm",te["d"],te["h"]);Object(re["a"])(["m","mm"],Q["d"]);var Dt=Object($["b"])("Minutes",false);Object(ee["a"])("s",["ss",2],0,"second");Object(F["a"])("second","s");Object(yt["a"])("second",15);Object(te["a"])("s",te["d"]);Object(te["a"])("ss",te["d"],te["h"]);Object(re["a"])(["s","ss"],Q["f"]);var Rt=Object($["b"])("Seconds",false);Object(ee["a"])("S",0,0,function(){return~~(this.millisecond()/100)});Object(ee["a"])(0,["SS",2],0,function(){return~~(this.millisecond()/10)});Object(ee["a"])(0,["SSS",3],0,"millisecond");Object(ee["a"])(0,["SSSS",4],0,function(){return this.millisecond()*10});Object(ee["a"])(0,["SSSSS",5],0,function(){return this.millisecond()*100});Object(ee["a"])(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});Object(ee["a"])(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});Object(ee["a"])(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});Object(ee["a"])(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Object(F["a"])("millisecond","ms");Object(yt["a"])("millisecond",16);Object(te["a"])("S",te["e"],te["c"]);Object(te["a"])("SS",te["e"],te["h"]);Object(te["a"])("SSS",te["e"],te["i"]);var Lt;for(Lt="SSSS";Lt.length<=9;Lt+="S"){Object(te["a"])(Lt,te["r"])}function $t(e,t){t[Q["c"]]=Object(U["a"])(("0."+e)*1e3)}for(Lt="S";Lt.length<=9;Lt+="S"){Object(re["a"])(Lt,$t)}var Nt=Object($["b"])("Milliseconds",false);Object(ee["a"])("z",0,0,"zoneAbbr");Object(ee["a"])("zz",0,0,"zoneName");function Ft(){return this._isUTC?"UTC":""}function Gt(){return this._isUTC?"Coordinated Universal Time":""}var Ut=M["a"].prototype;Ut.add=Pe;Ut.calendar=Re;Ut.clone=Le;Ut.diff=We;Ut.endOf=nt;Ut.format=Xe;Ut.from=Ke;Ut.fromNow=Ze;Ut.to=Qe;Ut.toNow=Je;Ut.get=$["d"];Ut.invalidAt=vt;Ut.isAfter=$e;Ut.isBefore=Ne;Ut.isBetween=Fe;Ut.isSame=Ge;Ut.isSameOrAfter=Ue;Ut.isSameOrBefore=He;Ut.isValid=dt;Ut.lang=tt;Ut.locale=et;Ut.localeData=rt;Ut.max=k;Ut.min=P;Ut.parsingFlags=pt;Ut.set=$["e"];Ut.startOf=it;Ut.subtract=ke;Ut.toArray=lt;Ut.toObject=ut;Ut.toDate=st;Ut.toISOString=qe;Ut.inspect=Be;Ut.toJSON=ct;Ut.toString=ze;Ut.unix=ot;Ut.valueOf=at;Ut.creationData=gt;Ut.year=mt["c"];Ut.isLeapYear=mt["b"];Ut.weekYear=St;Ut.isoWeekYear=Ct;Ut.quarter=Ut.quarters=Mt;Ut.month=N["e"];Ut.daysInMonth=N["d"];Ut.week=Ut.weeks=jt["c"];Ut.isoWeek=Ut.isoWeeks=jt["b"];Ut.weeksInYear=Ot;Ut.isoWeeksInYear=xt;Ut.date=At;Ut.day=Ut.days=Pt["d"];Ut.weekday=Pt["f"];Ut.isoWeekday=Pt["e"];Ut.dayOfYear=kt;Ut.hour=Ut.hours=It["b"];Ut.minute=Ut.minutes=Dt;Ut.second=Ut.seconds=Rt;Ut.millisecond=Ut.milliseconds=Nt;Ut.utcOffset=he;Ut.utc=pe;Ut.local=ve;Ut.parseZone=ge;Ut.hasAlignedHourOffset=me;Ut.isDST=ye;Ut.isLocal=be;Ut.isUtcOffset=we;Ut.isUtc=Se;Ut.isUTC=Se;Ut.zoneAbbr=Ft;Ut.zoneName=Gt;Ut.dates=Object(j["a"])("dates accessor is deprecated. Use date instead.",At);Ut.months=Object(j["a"])("months accessor is deprecated. Use month instead",N["e"]);Ut.years=Object(j["a"])("years accessor is deprecated. Use year instead",mt["c"]);Ut.zone=Object(j["a"])("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",de);Ut.isDSTShifted=Object(j["a"])("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",_e);var Ht=Ut;function Yt(e){return Object(O["a"])(e*1e3)}function Wt(){return O["a"].apply(null,arguments).parseZone()}var Vt=r(264);var zt=r(330);var qt=r(329);var Bt=r(328);var Xt=r(263);function Kt(e){return e}var Zt=r(262);var Qt=r(265);var Jt=Vt["a"].prototype;Jt.calendar=zt["a"];Jt.longDateFormat=qt["b"];Jt.invalidDate=Bt["b"];Jt.ordinal=Xt["c"];Jt.preparse=Kt;Jt.postformat=Kt;Jt.relativeTime=Zt["c"];Jt.pastFuture=Zt["b"];Jt.set=Qt["b"];Jt.months=N["f"];Jt.monthsShort=N["h"];Jt.monthsParse=N["g"];Jt.monthsRegex=N["i"];Jt.monthsShortRegex=N["j"];Jt.week=jt["f"];Jt.firstDayOfYear=jt["e"];Jt.firstDayOfWeek=jt["d"];Jt.weekdays=Pt["g"];Jt.weekdaysMin=Pt["h"];Jt.weekdaysShort=Pt["j"];Jt.weekdaysParse=Pt["i"];Jt.weekdaysRegex=Pt["l"];Jt.weekdaysShortRegex=Pt["m"];Jt.weekdaysMinRegex=Pt["k"];Jt.isPM=It["c"];Jt.meridiem=It["d"];function er(e,t,r,i){var n=Object(G["b"])();var a=Object(T["a"])().set(i,t);return n[r](a,e)}function tr(e,t,r){if(Object(X["a"])(e)){t=e;e=undefined}e=e||"";if(t!=null){return er(e,t,r,"month")}var i;var n=[];for(i=0;i<12;i++){n[i]=er(e,i,r,"month")}return n}function rr(e,t,r,i){if(typeof e==="boolean"){if(Object(X["a"])(t)){r=t;t=undefined}t=t||""}else{t=e;r=t;e=false;if(Object(X["a"])(t)){r=t;t=undefined}t=t||""}var n=Object(G["b"])(),a=e?n._week.dow:0;if(r!=null){return er(t,(r+a)%7,i,"day")}var o;var s=[];for(o=0;o<7;o++){s[o]=er(t,(o+a)%7,i,"day")}return s}function ir(e,t){return tr(e,t,"months")}function nr(e,t){return tr(e,t,"monthsShort")}function ar(e,t,r){return rr(e,t,r,"weekdays")}function or(e,t,r){return rr(e,t,r,"weekdaysShort")}function sr(e,t,r){return rr(e,t,r,"weekdaysMin")}Object(G["c"])("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,r=Object(U["a"])(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+r}});x["a"].lang=Object(j["a"])("moment.lang is deprecated. Use moment.locale instead.",G["c"]);x["a"].langData=Object(j["a"])("moment.langData is deprecated. Use moment.localeData instead.",G["b"]);var lr=Math.abs;function ur(){var e=this._data;this._milliseconds=lr(this._milliseconds);this._days=lr(this._days);this._months=lr(this._months);e.milliseconds=lr(e.milliseconds);e.seconds=lr(e.seconds);e.minutes=lr(e.minutes);e.hours=lr(e.hours);e.months=lr(e.months);e.years=lr(e.years);return this}function cr(e,t,r,i){var n=Oe(t,r);e._milliseconds+=i*n._milliseconds;e._days+=i*n._days;e._months+=i*n._months;return e._bubble()}function fr(e,t){return cr(this,e,t,1)}function hr(e,t){return cr(this,e,t,-1)}function dr(e){if(e<0){return Math.floor(e)}else{return Math.ceil(e)}}function pr(){var e=this._milliseconds;var t=this._days;var r=this._months;var i=this._data;var n,a,o,s,l;if(!(e>=0&&t>=0&&r>=0||e<=0&&t<=0&&r<=0)){e+=dr(gr(r)+t)*864e5;t=0;r=0}i.milliseconds=e%1e3;n=Object(Ye["a"])(e/1e3);i.seconds=n%60;a=Object(Ye["a"])(n/60);i.minutes=a%60;o=Object(Ye["a"])(a/60);i.hours=o%24;t+=Object(Ye["a"])(o/24);l=Object(Ye["a"])(vr(t));r+=l;t-=dr(gr(l));s=Object(Ye["a"])(r/12);r%=12;i.days=t;i.months=r;i.years=s;return this}function vr(e){return e*4800/146097}function gr(e){return e*146097/4800}function mr(e){if(!this.isValid()){return NaN}var t;var r;var i=this._milliseconds;e=Object(F["c"])(e);if(e==="month"||e==="year"){t=this._days+i/864e5;r=this._months+vr(t);return e==="month"?r:r/12}else{t=this._days+Math.round(gr(this._months));switch(e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return t*24+i/36e5;case"minute":return t*1440+i/6e4;case"second":return t*86400+i/1e3;case"millisecond":return Math.floor(t*864e5)+i;default:throw new Error("Unknown unit "+e)}}}function yr(){if(!this.isValid()){return NaN}return this._milliseconds+this._days*864e5+this._months%12*2592e6+Object(U["a"])(this._months/12)*31536e6}function _r(e){return function(){return this.as(e)}}var br=_r("ms");var wr=_r("s");var Sr=_r("m");var Cr=_r("h");var xr=_r("d");var Or=_r("w");var Tr=_r("M");var Er=_r("y");function Mr(){return Oe(this)}function jr(e){e=Object(F["c"])(e);return this.isValid()?this[e+"s"]():NaN}function Ar(e){return function(){return this.isValid()?this._data[e]:NaN}}var Pr=Ar("milliseconds");var kr=Ar("seconds");var Ir=Ar("minutes");var Dr=Ar("hours");var Rr=Ar("days");var Lr=Ar("months");var $r=Ar("years");function Nr(){return Object(Ye["a"])(this.days()/7)}var Fr=Math.round;var Gr={ss:44,s:45,m:45,h:22,d:26,M:11};function Ur(e,t,r,i,n){return n.relativeTime(t||1,!!r,e,i)}function Hr(e,t,r){var i=Oe(e).abs();var n=Fr(i.as("s"));var a=Fr(i.as("m"));var o=Fr(i.as("h"));var s=Fr(i.as("d"));var l=Fr(i.as("M"));var u=Fr(i.as("y"));var c=n<=Gr.ss&&["s",n]||n<Gr.s&&["ss",n]||a<=1&&["m"]||a<Gr.m&&["mm",a]||o<=1&&["h"]||o<Gr.h&&["hh",o]||s<=1&&["d"]||s<Gr.d&&["dd",s]||l<=1&&["M"]||l<Gr.M&&["MM",l]||u<=1&&["y"]||["yy",u];c[2]=t;c[3]=+e>0;c[4]=r;return Ur.apply(null,c)}function Yr(e){if(e===undefined){return Fr}if(typeof e==="function"){Fr=e;return true}return false}function Wr(e,t){if(Gr[e]===undefined){return false}if(t===undefined){return Gr[e]}Gr[e]=t;if(e==="s"){Gr.ss=t-1}return true}function Vr(e){if(!this.isValid()){return this.localeData().invalidDate()}var t=this.localeData();var r=Hr(this,!e,t);if(e){r=t.pastFuture(+this,r)}return t.postformat(r)}var zr=Math.abs;function qr(e){return(e>0)-(e<0)||+e}function Br(){if(!this.isValid()){return this.localeData().invalidDate()}var e=zr(this._milliseconds)/1e3;var t=zr(this._days);var r=zr(this._months);var i,n,a;i=Object(Ye["a"])(e/60);n=Object(Ye["a"])(i/60);e%=60;i%=60;a=Object(Ye["a"])(r/12);r%=12;var o=a;var s=r;var l=t;var u=n;var c=i;var f=e?e.toFixed(3).replace(/\.?0+$/,""):"";var h=this.asSeconds();if(!h){return"P0D"}var d=h<0?"-":"";var p=qr(this._months)!==qr(h)?"-":"";var v=qr(this._days)!==qr(h)?"-":"";var g=qr(this._milliseconds)!==qr(h)?"-":"";return d+"P"+(o?p+o+"Y":"")+(s?p+s+"M":"")+(l?v+l+"D":"")+(u||c||f?"T":"")+(u?g+u+"H":"")+(c?g+c+"M":"")+(f?g+f+"S":"")}var Xr=q.prototype;Xr.isValid=V;Xr.abs=ur;Xr.add=fr;Xr.subtract=hr;Xr.as=mr;Xr.asMilliseconds=br;Xr.asSeconds=wr;Xr.asMinutes=Sr;Xr.asHours=Cr;Xr.asDays=xr;Xr.asWeeks=Or;Xr.asMonths=Tr;Xr.asYears=Er;Xr.valueOf=yr;Xr._bubble=pr;Xr.clone=Mr;Xr.get=jr;Xr.milliseconds=Pr;Xr.seconds=kr;Xr.minutes=Ir;Xr.hours=Dr;Xr.days=Rr;Xr.weeks=Nr;Xr.months=Lr;Xr.years=$r;Xr.humanize=Vr;Xr.toISOString=Br;Xr.toString=Br;Xr.toJSON=Br;Xr.locale=et;Xr.localeData=rt;Xr.toIsoString=Object(j["a"])("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Br);Xr.lang=tt;Object(ee["a"])("X",0,0,"unix");Object(ee["a"])("x",0,0,"valueOf");Object(te["a"])("x",te["p"]);Object(te["a"])("X",te["q"]);Object(re["a"])("X",function(e,t,r){r._d=new Date(parseFloat(e,10)*1e3)});Object(re["a"])("x",function(e,t,r){r._d=new Date(Object(U["a"])(e))});
//! moment.js
//! version : 2.22.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
x["a"].version="2.22.1";Object(x["b"])(O["a"]);x["a"].fn=Ht;x["a"].min=D;x["a"].max=R;x["a"].now=L;x["a"].utc=T["a"];x["a"].unix=Yt;x["a"].months=ir;x["a"].isDate=ne["a"];x["a"].locale=G["c"];x["a"].invalid=E["a"];x["a"].duration=Oe;x["a"].isMoment=M["c"];x["a"].weekdays=ar;x["a"].parseZone=Wt;x["a"].localeData=G["b"];x["a"].isDuration=B;x["a"].monthsShort=nr;x["a"].weekdaysMin=sr;x["a"].defineLocale=G["a"];x["a"].updateLocale=G["e"];x["a"].locales=G["d"];x["a"].weekdaysShort=or;x["a"].normalizeUnits=F["c"];x["a"].relativeTimeRounding=Yr;x["a"].relativeTimeThreshold=Wr;x["a"].calendarFormat=De;x["a"].prototype=Ht;x["a"].HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"};var Kr=x["a"];function Zr(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var Qr=function(){e.$inject=["gettextCatalog","ngeoFeatureHelper","ngeoWMSTime"];function e(t,r,i){Zr(this,e);this.gettextCatalog_=t;this.ngeoFeatureHelper_=r;this.ngeoWMSTime_=i}e.prototype.createRulesFromAttributes=function e(t,r){var i=[];for(var n=t,a=Array.isArray(n),o=0,n=a?n:n[Symbol.iterator]();;){var s;if(a){if(o>=n.length)break;s=n[o++]}else{o=n.next();if(o.done)break;s=o.value}var l=s;i.push(this.createRuleFromAttribute(l,r))}return i};e.prototype.createRuleFromAttribute=function e(t,r){var n=void 0;var o=r===true;var s=this.gettextCatalog_.getString(t.name);switch(t.type){case a["a"].DATE:case a["a"].DATETIME:if(o){n=new d({name:s,operator:l["a"].TemporalOperatorType.EQUALS,operators:[l["a"].TemporalOperatorType.EQUALS,l["a"].TemporalOperatorType.BEGINS,l["a"].TemporalOperatorType.ENDS],propertyName:t.name,type:t.type})}else{n=new d({name:s,operator:l["a"].TemporalOperatorType.DURING,propertyName:t.name,type:t.type})}break;case a["a"].GEOMETRY:n=new p["a"]({name:s,operator:l["a"].SpatialOperatorType.WITHIN,operators:[l["a"].SpatialOperatorType.CONTAINS,l["a"].SpatialOperatorType.INTERSECTS,l["a"].SpatialOperatorType.WITHIN],propertyName:t.name,type:t.type});break;case a["a"].NUMBER:if(o){n=new l["a"]({name:s,operator:l["a"].OperatorType.EQUAL_TO,operators:[l["a"].OperatorType.EQUAL_TO,l["a"].OperatorType.GREATER_THAN,l["a"].OperatorType.GREATER_THAN_OR_EQUAL_TO,l["a"].OperatorType.LESSER_THAN,l["a"].OperatorType.LESSER_THAN_OR_EQUAL_TO,l["a"].OperatorType.NOT_EQUAL_TO],propertyName:t.name,type:a["a"].NUMBER})}else{n=new l["a"]({name:s,operator:l["a"].OperatorType.BETWEEN,propertyName:t.name,type:a["a"].NUMBER})}break;case a["a"].SELECT:n=new v["a"]({choices:i["a"].assert(t.choices),name:s,propertyName:t.name});break;default:if(o){n=new b({name:s,operator:l["a"].OperatorType.LIKE,operators:[l["a"].OperatorType.LIKE,l["a"].OperatorType.EQUAL_TO,l["a"].OperatorType.NOT_EQUAL_TO],propertyName:t.name})}else{n=new b({name:s,operator:l["a"].OperatorType.LIKE,propertyName:t.name})}break}return n};e.prototype.createRules=function e(t){var r=[];for(var i=t,n=Array.isArray(i),a=0,i=n?i:i[Symbol.iterator]();;){var o;if(n){if(a>=i.length)break;o=i[a++]}else{a=i.next();if(a.done)break;o=a.value}var s=o;r.push(this.createRule(s))}return r};e.prototype.createRule=function e(t){var r=void 0;switch(t.type){case a["a"].DATE:case a["a"].DATETIME:r=new d(t);break;case a["a"].GEOMETRY:r=new p["a"](t);break;case a["a"].SELECT:var n=t;i["a"].assert(n.choices);r=new v["a"](n);break;default:r=new b(t);break}return r};e.prototype.cloneRule=function e(t){var r=void 0;var i=t.getExpression();if(i===null){i=undefined}var n=t.isCustom;var a=t.lowerBoundary!==null?t.lowerBoundary:undefined;var o=t.name;var s=t.operator!==null?t.operator:undefined;var u=t.operators?t.operators.slice(0):undefined;var c=t.propertyName;var f=t.type!==null?t.type:undefined;var h=t.upperBoundary!==null?t.upperBoundary:undefined;var g={expression:i,isCustom:n,lowerBoundary:a,name:o,operator:s,operators:u,propertyName:c,type:f,upperBoundary:h};if(t instanceof d){r=new d(g)}else if(t instanceof p["a"]){r=new p["a"](g);r.feature.setProperties(this.ngeoFeatureHelper_.getNonSpatialProperties(t.feature))}else if(t instanceof v["a"]){g.choices=t.choices.slice(0);r=new v["a"](g)}else if(t instanceof b){r=new b(g)}else{r=new l["a"](g)}return r};e.prototype.extendRule=function e(t,r){if(r.getExpression()!==t.getExpression()){r.setExpression(t.getExpression())}if(r.lowerBoundary!==t.lowerBoundary){r.lowerBoundary=t.lowerBoundary}if(r.operator!==t.operator){r.operator=t.operator}if(r.upperBoundary!==t.upperBoundary){r.upperBoundary=t.upperBoundary}if(t instanceof p["a"]&&r instanceof p["a"]){this.ngeoFeatureHelper_.clearNonSpatialProperties(r.feature);r.feature.setProperties(this.ngeoFeatureHelper_.getNonSpatialProperties(t.feature))}};e.prototype.serializeRules=function e(t){var r=this;return t.map(function(e){var t=r.serializeRule(e);return t})};e.prototype.serializeRule=function e(t){var r={name:t.name,propertyName:t.propertyName,type:t.type};if(t.expression!==null){r.expression=t.expression}if(t.lowerBoundary!==null){r.lowerBoundary=t.lowerBoundary}if(t.operator!==null){r.operator=t.operator}if(t.operators!==null){r.operators=t.operators.slice(0)}if(t.upperBoundary!==null){r.upperBoundary=t.upperBoundary}if(t instanceof p["a"]){r.featureProperties=this.ngeoFeatureHelper_.getNonSpatialProperties(t.feature)}if(t instanceof v["a"]){r.choices=t.choices}return r};e.prototype.createFilter=function e(t){var r=t.dataSource;var i=null;if(t.filter){i=t.filter}else{var a=t.filterRules||r.filterRules;var o=[];if(a&&a.length){for(var s=a,l=Array.isArray(s),u=0,s=l?s:s[Symbol.iterator]();;){var c;if(l){if(u>=s.length)break;c=s[u++]}else{u=s.next();if(u.done)break;c=u.value}var f=c;var h=this.createFilterFromRule_(f,r,t.srsName);if(h){o.push(h)}}}var d=r.filterCondition;if(o.length===1){i=o[0]}else if(o.length>=2){if(d===n["a"].AND){i=S["and"].apply(null,o)}else if(d===n["a"].OR||d===n["a"].NOT){i=S["or"].apply(null,o)}}if(i&&d===n["a"].NOT){i=S["not"](i)}}if(t.incTime){var p=this.createTimeFilterFromDataSource_(r);if(p){if(i){i=S["and"].apply(null,[i,p])}else{i=p}}}if(t.incDimensions){var v=this.createDimensionsFilterFromDataSource_(r);if(v){if(i){i=S["and"].apply(null,[i,v])}else{i=v}}}return i};e.prototype.createFilterString=function e(t){var r=null;var i=this.createFilter(t);if(i){var n=Object(w["b"])(i);var a=new XMLSerializer;r=a.serializeToString(n)}return r};e.prototype.createFilterFromRule_=function e(t,r,n){var a=null;var o=t.value;if(!o){return null}var s=o.expression;var u=o.lowerBoundary;var c=o.operator;var f=o.propertyName;var h=o.upperBoundary;var g=l["a"].OperatorType;var m=l["a"].SpatialOperatorType;var y=l["a"].TemporalOperatorType;var _=[m.CONTAINS,m.INTERSECTS,m.WITHIN];var b=[g.GREATER_THAN,g.GREATER_THAN_OR_EQUAL_TO,g.LESSER_THAN,g.LESSER_THAN_OR_EQUAL_TO];if(t instanceof d){var w=void 0;var x=void 0;if(c===y.DURING){w=Kr(u).format("YYYY-MM-DD");x=Kr(h).format("YYYY-MM-DD")}else if(c===y.EQUALS){w=Kr(s).format("YYYY-MM-DD HH:mm:ss");x=Kr(s).add(1,"days").subtract(1,"seconds").format("YYYY-MM-DD HH:mm:ss")}else if(c===y.BEGINS){w=Kr(s).format("YYYY-MM-DD");x=Kr(s).add(30,"years").format("YYYY-MM-DD")}else if(c===y.ENDS){w="1970-01-01";x=Kr(s).format("YYYY-MM-DD")}if(w&&x){a=S["during"](f,w,x)}}else if(t instanceof v["a"]){var O=t.selectedChoices;if(O.length===1){a=S["equalTo"](f,O[0])}else if(O.length>=2){var T=[];for(var E=O,M=Array.isArray(E),j=0,E=M?E:E[Symbol.iterator]();;){var A;if(M){if(j>=E.length)break;A=E[j++]}else{j=E.next();if(j.done)break;A=j.value}var P=A;T.push(S["equalTo"](f,P))}a=S["or"].apply(null,T)}}else if(C["f"](_,c)){var k=r.geometryName;i["a"].assertInstanceof(t,p["a"]);var I=i["a"].assert(t.geometry);if(c===m.CONTAINS){a=S["contains"](k,I,n)}else if(c===m.INTERSECTS){a=S["intersects"](k,I,n)}else if(c===m.WITHIN){a=S["within"](k,I,n)}}else if(C["f"](b,c)){var D=i["a"].assertNumber(s);if(c===g.GREATER_THAN){a=S["greaterThan"](f,D)}else if(c===g.GREATER_THAN_OR_EQUAL_TO){a=S["greaterThanOrEqualTo"](f,D)}else if(c===g.LESSER_THAN){a=S["lessThan"](f,D)}else if(c===g.LESSER_THAN_OR_EQUAL_TO){a=S["lessThanOrEqualTo"](f,D)}}else if(c===g.BETWEEN){a=S["between"](f,u,h)}else if(c===g.EQUAL_TO){a=S["equalTo"](f,s)}else if(c===g.LIKE){var R=String(s).replace(/!/g,"!!").replace(/\./g,"!.").replace(/\*/g,"!*");a=S["like"](f,"*"+R+"*","*",".","!",false)}else if(c===g.NOT_EQUAL_TO){a=S["notEqualTo"](f,s)}return a};e.prototype.createDimensionsFilterFromDataSource_=function e(t){var r=t.dimensionsFiltersConfig;var i=t.dimensions;var n=[];for(var a in r){var o=r[a].value;if(o===null){if(i[a]!==undefined&&i[a]!==null){o=i[a]}}if(o!==null){n.push(S["equalTo"](r[a].field,o,true))}}if(n.length===1){return n[0]}else if(n.length>=2){return S["and"].apply(null,n)}return null};e.prototype.createTimeFilterFromDataSource_=function e(t){var r=null;var i=t.timeRangeValue;var n=t.timeProperty;var a=t.timeAttributeName;if(i&&n&&a){if(i.end!==undefined){var o=this.ngeoWMSTime_.formatWMSTimeParam(n,i).split("/");r=S["during"](a,o[0],o[1])}else{var s=n.resolution||"seconds";var l=this.ngeoWMSTime_.formatWMSTimeParam(n,i);var u=void 0;switch(s){case"year":u=Kr(l).add(1,"years").subtract(1,"seconds");break;case"month":u=Kr(l).add(1,"months").subtract(1,"seconds");break;case"day":u=Kr(l).add(1,"days").subtract(1,"seconds");break;default:}if(u){var c=Kr(l).format("YYYY-MM-DD HH:mm:ss");var f=u.format("YYYY-MM-DD HH:mm:ss");r=S["during"](a,c,f)}}}return r};return e}();Qr.module=angular.module("ngeoRuleHelper",[o["a"].module.name,s["a"].module.name]);Qr.module.service("ngeoRuleHelper",Qr);var Jr=t["a"]=Qr},function(e,t,r){"use strict";var i=angular.module("ngeoDebounce",[]);i.factory_=function(e){return function(t,r,i){var n=null;return function(){for(var a=arguments.length,o=Array(a),s=0;s<a;s++){o[s]=arguments[s]}var l=this;var u=function e(){n=null;t.apply(l,o)};if(n!==null){e.cancel(n)}n=e(u,r,i)}}};i.factory_.$inject=["$timeout"];i.factory("ngeoDebounce",i.factory_);t["a"]=i},function(e,t,r){"use strict";var i=r(2);var n=function e(){this.listenerKeys_={}};n.prototype.addListenerKey=function(e,t){if(!this.listenerKeys_[e]){this.initListenerKey_(e)}this.listenerKeys_[e].push(t)};n.prototype.clearListenerKey=function(e){this.initListenerKey_(e)};n.prototype.initListenerKey_=function(e){if(!this.listenerKeys_[e]){this.listenerKeys_[e]=[]}else{if(this.listenerKeys_[e].length){this.listenerKeys_[e].forEach(i["e"]);this.listenerKeys_[e].length=0}}};n.module=angular.module("ngeoEventHelper",[]);n.module.service("ngeoEventHelper",n);t["a"]=n},function(e,t,r){"use strict";var i=r(1);var n=r(66);var a=function e(t,r){this.history_=r;this.schema_=t.protocol.substring(0,t.protocol.length-1);this.domain_=t.hostname;this.port_=t.port?parseInt(t.port,10):undefined;this.path_=t.pathname;this.queryData_=n["a"].decodeQueryString(t.search);this.fragment_=n["a"].decodeQueryString(t.hash)};a.replaceState=function(e,t){try{e.replaceState(null,"",t)}catch(e){}};a.prototype.getPath=function(){return this.path_};a.prototype.getUriString=function(){var e=[];if(this.schema_){e.push(this.schema_,":")}if(this.domain_||this.schema_==="file"){e.push("//");e.push(this.domain_);if(this.port_!==undefined){e.push(":",String(this.port_))}}if(this.path_){if(this.domain_&&this.path_.charAt(0)!=="/"){e.push("/")}e.push(this.path_)}var t=n["a"].encodeQueryString(this.queryData_);if(t.length>0){e.push("?",t)}var r=n["a"].encodeQueryString(this.fragment_);if(r.length>0){e.push("#",r)}return e.join("")};a.prototype.hasParam=function(e){return e in this.queryData_};a.prototype.hasFragmentParam=function(e){return e in this.fragment_};a.prototype.getParam=function(e){return this.queryData_[e]};a.prototype.getFragmentParam=function(e){return this.fragment_[e]};a.prototype.getParamAsInt=function(e){var t=this.getParam(e);if(t===undefined){return undefined}i["a"].assertString(t);var r=parseInt(t,10);return isNaN(r)?undefined:r};a.prototype.getParamAsFloat=function(e){var t=this.getParam(e);if(t===undefined){return undefined}i["a"].assertString(t);var r=parseFloat(t);return isNaN(r)?undefined:r};a.prototype.getFragmentParamAsInt=function(e){var t=this.getFragmentParam(e);if(t===undefined){return undefined}i["a"].assertString(t);var r=parseInt(t,10);return isNaN(r)?undefined:r};a.prototype.getParamKeys=function(){var e=[];for(var t in this.queryData_){e.push(t)}return e};a.prototype.getFragmentParamKeys=function(){var e=[];for(var t in this.fragment_){e.push(t)}return e};a.prototype.getParamKeysWithPrefix=function(e){var t=[];for(var r in this.queryData_){if(r.indexOf(e)==0){t.push(r)}}return t};a.prototype.getFragmentParamKeysWithPrefix=function(e){var t=[];for(var r in this.fragment_){if(r.indexOf(e)==0){t.push(r)}}return t};a.prototype.updateParams=function(e){for(var t in e){this.queryData_[t]=e[t]}};a.prototype.updateFragmentParams=function(e){for(var t in e){this.fragment_[t]=e[t]}};a.prototype.deleteParam=function(e){delete this.queryData_[e]};a.prototype.deleteFragmentParam=function(e){delete this.fragment_[e]};a.prototype.refresh=function(){a.replaceState(this.history_,this.getUriString())};a.prototype.setPath=function(e){this.path_=e};a.LocationFactory=function(e,t){var r=t.history;var i=new a(t.location,t.history);var n=i.getUriString();e.$watch(function(){var t=i.getUriString();if(n!==t){e.$evalAsync(function(){n=t;if(r!==undefined&&r.replaceState!==undefined){a.replaceState(r,t)}e.$broadcast("ngeoLocationChange")})}});return i};a.LocationFactory.$inject=["$rootScope","$window"];a.MockProvider=function(e){e["$get"]=function(){var e={absUrl:function e(){return""},hash:function e(t){return t!==undefined?this:""},host:function e(){return""},path:function e(t){return t!==undefined?this:""},port:function e(){return 0},protocol:function e(){return""},replace:function e(){},search:function e(t,r){return t!==undefined?this:{}},url:function e(t){return""}};return e}};a.MockProvider.$inject=["$locationProvider"];a.module=angular.module("ngeoLocation",[]);a.module.factory("ngeoLocation",a.LocationFactory);t["a"]=a},function(e,t,r){"use strict";r.d(t,"a",function(){return i});r.d(t,"b",function(){return n});function i(e,t,r,i,n,a,o){var s=new Date(e,t,r,i,n,a,o);if(e<100&&e>=0&&isFinite(s.getFullYear())){s.setFullYear(e)}return s}function n(e){var t=new Date(Date.UTC.apply(null,arguments));if(e<100&&e>=0&&isFinite(t.getUTCFullYear())){t.setUTCFullYear(e)}return t}},function(e,t,r){"use strict";r.d(t,"a",function(){return i});function i(e){return typeof e==="number"||Object.prototype.toString.call(e)==="[object Number]"}},function(e,t,r){"use strict";r.d(t,"a",function(){return i});function i(e,t,r){var i=""+Math.abs(e),n=t-i.length,a=e>=0;return(a?r?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+i}},function(e,t,r){"use strict";var i=r(3);var n=r(9);var a=r(5);var o=r(23);var s=r(7);var l=r(131);var u=r(49);var c=r(85);var f=r(356);function h(e,t,r,i){var n=[];var o=Object(a["j"])();for(var s=0,l=r.length;s<l;++s){var u=r[s];o=Object(a["o"])(e,t,u[0],i);n.push((o[0]+o[2])/2,(o[1]+o[3])/2);t=u[u.length-1]}return n}var d=r(170);var p=r(204);var v=r(203);var g=r(177);var m=r(392);var y=r(345);var _=r(244);var b=r(246);var w=function e(t,r){c["a"].call(this);this.endss_=[];this.flatInteriorPointsRevision_=-1;this.flatInteriorPoints_=null;this.maxDelta_=-1;this.maxDeltaRevision_=-1;this.orientedRevision_=-1;this.orientedFlatCoordinates_=null;this.setCoordinates(t,r)};Object(i["d"])(w,c["a"]);w.prototype.appendPolygon=function(e){var t=void 0;if(!this.flatCoordinates){this.flatCoordinates=e.getFlatCoordinates().slice();t=e.getEnds().slice();this.endss_.push()}else{var r=this.flatCoordinates.length;Object(n["c"])(this.flatCoordinates,e.getFlatCoordinates());t=e.getEnds().slice();for(var i=0,a=t.length;i<a;++i){t[i]+=r}}this.endss_.push(t);this.changed()};w.prototype.clone=function(){var e=new w(null);var t=this.endss_.length;var r=new Array(t);for(var i=0;i<t;++i){r[i]=this.endss_[i].slice()}e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),r);return e};w.prototype.closestPointXY=function(e,t,r,i){if(i<Object(a["e"])(this.getExtent(),e,t)){return i}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(Object(d["f"])(this.flatCoordinates,0,this.endss_,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return Object(d["c"])(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,true,e,t,r,i)};w.prototype.containsXY=function(e,t){return Object(p["d"])(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)};w.prototype.getArea=function(){return Object(f["c"])(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)};w.prototype.getCoordinates=function(e){var t=void 0;if(e!==undefined){t=this.getOrientedFlatCoordinates().slice();Object(_["d"])(t,0,this.endss_,this.stride,e)}else{t=this.flatCoordinates}return Object(g["c"])(t,0,this.endss_,this.stride)};w.prototype.getEndss=function(){return this.endss_};w.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var e=h(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Object(m["b"])(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e);this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_};w.prototype.getInteriorPoints=function(){var e=new l["a"](null);e.setFlatCoordinates(o["a"].XYM,this.getFlatInteriorPoints().slice());return e};w.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var e=this.flatCoordinates;if(Object(_["b"])(e,0,this.endss_,this.stride)){this.orientedFlatCoordinates_=e}else{this.orientedFlatCoordinates_=e.slice();this.orientedFlatCoordinates_.length=Object(_["d"])(this.orientedFlatCoordinates_,0,this.endss_,this.stride)}this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_};w.prototype.getSimplifiedGeometryInternal=function(e){var t=[];var r=[];t.length=Object(b["d"])(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,r);var i=new w(null);i.setFlatCoordinates(o["a"].XY,t,r);return i};w.prototype.getPolygon=function(e){if(e<0||this.endss_.length<=e){return null}var t=void 0;if(e===0){t=0}else{var r=this.endss_[e-1];t=r[r.length-1]}var i=this.endss_[e].slice();var n=i[i.length-1];if(t!==0){for(var a=0,o=i.length;a<o;++a){i[a]-=t}}var s=new u["a"](null);s.setFlatCoordinates(this.layout,this.flatCoordinates.slice(t,n),i);return s};w.prototype.getPolygons=function(){var e=this.layout;var t=this.flatCoordinates;var r=this.endss_;var i=[];var n=0;for(var a=0,o=r.length;a<o;++a){var s=r[a].slice();var l=s[s.length-1];if(n!==0){for(var c=0,f=s.length;c<f;++c){s[c]-=n}}var h=new u["a"](null);h.setFlatCoordinates(e,t.slice(n,l),s);i.push(h);n=l}return i};w.prototype.getType=function(){return s["a"].MULTI_POLYGON};w.prototype.intersectsExtent=function(e){return Object(y["d"])(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)};w.prototype.setCoordinates=function(e,t){if(!e){this.setFlatCoordinates(o["a"].XY,null,this.endss_)}else{this.setLayout(t,e,3);if(!this.flatCoordinates){this.flatCoordinates=[]}var r=Object(v["d"])(this.flatCoordinates,0,e,this.stride,this.endss_);if(r.length===0){this.flatCoordinates.length=0}else{var i=r[r.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}};w.prototype.setFlatCoordinates=function(e,t,r){this.setFlatCoordinatesInternal(e,t);this.endss_=r;this.changed()};w.prototype.setPolygons=function(e){var t=this.getLayout();var r=[];var i=[];for(var a=0,o=e.length;a<o;++a){var s=e[a];if(a===0){t=s.getLayout()}var l=r.length;var u=s.getEnds();for(var c=0,f=u.length;c<f;++c){u[c]+=l}Object(n["c"])(r,s.getFlatCoordinates());i.push(u)}this.setFlatCoordinates(t,r,i)};var S=t["a"]=w},function(e,t,r){"use strict";var i=r(3);var n=r(353);var a=function e(t,r,i,a,o){n["a"].call(this,t,r,i.originalEvent,a,o);this.pointerEvent=i};Object(i["d"])(a,n["a"]);t["a"]=a},function(e,t,r){"use strict";var i=r(3);var n=r(169);var a=r(65);var o=r(84);var s=r(42);var l=r(14);var u=r(344);var c=function e(t){this.checksums_=null;this.canvas_=null;this.hitDetectionCanvas_=null;this.fill_=t.fill!==undefined?t.fill:null;this.origin_=[0,0];this.points_=t.points;this.radius_=t.radius!==undefined?t.radius:t.radius1;this.radius2_=t.radius2;this.angle_=t.angle!==undefined?t.angle:0;this.stroke_=t.stroke!==undefined?t.stroke:null;this.anchor_=null;this.size_=null;this.imageSize_=null;this.hitDetectionImageSize_=null;this.atlasManager_=t.atlasManager;this.render_(this.atlasManager_);var r=t.snapToPixel!==undefined?t.snapToPixel:true;var i=t.rotateWithView!==undefined?t.rotateWithView:false;u["a"].call(this,{opacity:1,rotateWithView:i,rotation:t.rotation!==undefined?t.rotation:0,scale:1,snapToPixel:r})};Object(i["d"])(c,u["a"]);c.prototype.clone=function(){var e=new c({fill:this.getFill()?this.getFill().clone():undefined,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),snapToPixel:this.getSnapToPixel(),stroke:this.getStroke()?this.getStroke().clone():undefined,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),atlasManager:this.atlasManager_});e.setOpacity(this.getOpacity());e.setScale(this.getScale());return e};c.prototype.getAnchor=function(){return this.anchor_};c.prototype.getAngle=function(){return this.angle_};c.prototype.getFill=function(){return this.fill_};c.prototype.getHitDetectionImage=function(e){return this.hitDetectionCanvas_};c.prototype.getImage=function(e){return this.canvas_};c.prototype.getImageSize=function(){return this.imageSize_};c.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_};c.prototype.getImageState=function(){return s["a"].LOADED};c.prototype.getOrigin=function(){return this.origin_};c.prototype.getPoints=function(){return this.points_};c.prototype.getRadius=function(){return this.radius_};c.prototype.getRadius2=function(){return this.radius2_};c.prototype.getSize=function(){return this.size_};c.prototype.getStroke=function(){return this.stroke_};c.prototype.listenImageChange=function(e,t){};c.prototype.load=function(){};c.prototype.unlistenImageChange=function(e,t){};c.prototype.render_=function(e){var t=void 0;var r="";var i="";var s=0;var u=null;var c=0;var f=void 0;var h=0;if(this.stroke_){f=this.stroke_.getColor();if(f===null){f=l["k"]}f=Object(n["a"])(f);h=this.stroke_.getWidth();if(h===undefined){h=l["h"]}u=this.stroke_.getLineDash();c=this.stroke_.getLineDashOffset();if(!o["a"]){u=null;c=0}i=this.stroke_.getLineJoin();if(i===undefined){i=l["g"]}r=this.stroke_.getLineCap();if(r===undefined){r=l["d"]}s=this.stroke_.getMiterLimit();if(s===undefined){s=l["i"]}}var d=2*(this.radius_+h)+1;var p={strokeStyle:f,strokeWidth:h,size:d,lineCap:r,lineDash:u,lineDashOffset:c,lineJoin:i,miterLimit:s};if(e===undefined){var v=Object(a["a"])(d,d);this.canvas_=v.canvas;d=this.canvas_.width;t=d;this.draw_(p,v,0,0);this.createHitDetectionCanvas_(p)}else{d=Math.round(d);var g=!this.fill_;var m=void 0;if(g){m=this.drawHitDetectionCanvas_.bind(this,p)}var y=this.getChecksum();var _=e.add(y,d,d,this.draw_.bind(this,p),m);this.canvas_=_.image;this.origin_=[_.offsetX,_.offsetY];t=_.image.width;if(g){this.hitDetectionCanvas_=_.hitImage;this.hitDetectionImageSize_=[_.hitImage.width,_.hitImage.height]}else{this.hitDetectionCanvas_=this.canvas_;this.hitDetectionImageSize_=[t,t]}}this.anchor_=[d/2,d/2];this.size_=[d,d];this.imageSize_=[t,t]};c.prototype.draw_=function(e,t,r,i){var a=void 0,o=void 0,s=void 0;t.setTransform(1,0,0,1,0,0);t.translate(r,i);t.beginPath();var u=this.points_;if(u===Infinity){t.arc(e.size/2,e.size/2,this.radius_,0,2*Math.PI,true)}else{var c=this.radius2_!==undefined?this.radius2_:this.radius_;if(c!==this.radius_){u=2*u}for(a=0;a<=u;a++){o=a*2*Math.PI/u-Math.PI/2+this.angle_;s=a%2===0?this.radius_:c;t.lineTo(e.size/2+s*Math.cos(o),e.size/2+s*Math.sin(o))}}if(this.fill_){var f=this.fill_.getColor();if(f===null){f=l["b"]}t.fillStyle=Object(n["a"])(f);t.fill()}if(this.stroke_){t.strokeStyle=e.strokeStyle;t.lineWidth=e.strokeWidth;if(e.lineDash){t.setLineDash(e.lineDash);t.lineDashOffset=e.lineDashOffset}t.lineCap=e.lineCap;t.lineJoin=e.lineJoin;t.miterLimit=e.miterLimit;t.stroke()}t.closePath()};c.prototype.createHitDetectionCanvas_=function(e){this.hitDetectionImageSize_=[e.size,e.size];if(this.fill_){this.hitDetectionCanvas_=this.canvas_;return}var t=Object(a["a"])(e.size,e.size);this.hitDetectionCanvas_=t.canvas;this.drawHitDetectionCanvas_(e,t,0,0)};c.prototype.drawHitDetectionCanvas_=function(e,t,r,i){t.setTransform(1,0,0,1,0,0);t.translate(r,i);t.beginPath();var n=this.points_;if(n===Infinity){t.arc(e.size/2,e.size/2,this.radius_,0,2*Math.PI,true)}else{var a=this.radius2_!==undefined?this.radius2_:this.radius_;if(a!==this.radius_){n=2*n}var o=void 0,s=void 0,u=void 0;for(o=0;o<=n;o++){u=o*2*Math.PI/n-Math.PI/2+this.angle_;s=o%2===0?this.radius_:a;t.lineTo(e.size/2+s*Math.cos(u),e.size/2+s*Math.sin(u))}}t.fillStyle=l["b"];t.fill();if(this.stroke_){t.strokeStyle=e.strokeStyle;t.lineWidth=e.strokeWidth;if(e.lineDash){t.setLineDash(e.lineDash);t.lineDashOffset=e.lineDashOffset}t.stroke()}t.closePath()};c.prototype.getChecksum=function(){var e=this.stroke_?this.stroke_.getChecksum():"-";var t=this.fill_?this.fill_.getChecksum():"-";var r=!this.checksums_||e!=this.checksums_[1]||t!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.radius2_!=this.checksums_[4]||this.angle_!=this.checksums_[5]||this.points_!=this.checksums_[6];if(r){var i="r"+e+t+(this.radius_!==undefined?this.radius_.toString():"-")+(this.radius2_!==undefined?this.radius2_.toString():"-")+(this.angle_!==undefined?this.angle_.toString():"-")+(this.points_!==undefined?this.points_.toString():"-");this.checksums_=[i,e,t,this.radius_,this.radius2_,this.angle_,this.points_]}return this.checksums_[0]};t["a"]=c},function(e,t,r){"use strict";var i=r(3);var n=r(247);var a=r(44);var o=r(120);var s=r(70);var l=r(65);var u=r(2);var c=r(5);var f={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};var h=function e(t){a["a"].call(this);this.options=t;this.id=t.id;this.insertFirst=t.insertFirst!==undefined?t.insertFirst:true;this.stopEvent=t.stopEvent!==undefined?t.stopEvent:true;this.element=document.createElement("DIV");this.element.className=t.className!==undefined?t.className:"ol-overlay-container "+s["d"];this.element.style.position="absolute";this.autoPan=t.autoPan!==undefined?t.autoPan:false;this.autoPanAnimation=t.autoPanAnimation||{};this.autoPanMargin=t.autoPanMargin!==undefined?t.autoPanMargin:20;this.rendered={bottom_:"",left_:"",right_:"",top_:"",visible:true};this.mapPostrenderListenerKey=null;Object(u["a"])(this,Object(a["b"])(f.ELEMENT),this.handleElementChanged,this);Object(u["a"])(this,Object(a["b"])(f.MAP),this.handleMapChanged,this);Object(u["a"])(this,Object(a["b"])(f.OFFSET),this.handleOffsetChanged,this);Object(u["a"])(this,Object(a["b"])(f.POSITION),this.handlePositionChanged,this);Object(u["a"])(this,Object(a["b"])(f.POSITIONING),this.handlePositioningChanged,this);if(t.element!==undefined){this.setElement(t.element)}this.setOffset(t.offset!==undefined?t.offset:[0,0]);this.setPositioning(t.positioning!==undefined?t.positioning:o["a"].TOP_LEFT);if(t.position!==undefined){this.setPosition(t.position)}};Object(i["d"])(h,a["a"]);h.prototype.getElement=function(){return this.get(f.ELEMENT)};h.prototype.getId=function(){return this.id};h.prototype.getMap=function(){return this.get(f.MAP)};h.prototype.getOffset=function(){return this.get(f.OFFSET)};h.prototype.getPosition=function(){return this.get(f.POSITION)};h.prototype.getPositioning=function(){return this.get(f.POSITIONING)};h.prototype.handleElementChanged=function(){Object(l["d"])(this.element);var e=this.getElement();if(e){this.element.appendChild(e)}};h.prototype.handleMapChanged=function(){if(this.mapPostrenderListenerKey){Object(l["e"])(this.element);Object(u["e"])(this.mapPostrenderListenerKey);this.mapPostrenderListenerKey=null}var e=this.getMap();if(e){this.mapPostrenderListenerKey=Object(u["a"])(e,n["a"].POSTRENDER,this.render,this);this.updatePixelPosition();var t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();if(this.insertFirst){t.insertBefore(this.element,t.childNodes[0]||null)}else{t.appendChild(this.element)}}};h.prototype.render=function(){this.updatePixelPosition()};h.prototype.handleOffsetChanged=function(){this.updatePixelPosition()};h.prototype.handlePositionChanged=function(){this.updatePixelPosition();if(this.get(f.POSITION)&&this.autoPan){this.panIntoView()}};h.prototype.handlePositioningChanged=function(){this.updatePixelPosition()};h.prototype.setElement=function(e){this.set(f.ELEMENT,e)};h.prototype.setMap=function(e){this.set(f.MAP,e)};h.prototype.setOffset=function(e){this.set(f.OFFSET,e)};h.prototype.setPosition=function(e){this.set(f.POSITION,e)};h.prototype.panIntoView=function(){var e=this.getMap();if(!e||!e.getTargetElement()){return}var t=this.getRect(e.getTargetElement(),e.getSize());var r=this.getElement();var i=this.getRect(r,[Object(l["c"])(r),Object(l["b"])(r)]);var n=this.autoPanMargin;if(!Object(c["g"])(t,i)){var a=i[0]-t[0];var o=t[2]-i[2];var s=i[1]-t[1];var u=t[3]-i[3];var f=[0,0];if(a<0){f[0]=a-n}else if(o<0){f[0]=Math.abs(o)+n}if(s<0){f[1]=s-n}else if(u<0){f[1]=Math.abs(u)+n}if(f[0]!==0||f[1]!==0){var h=e.getView().getCenter();var d=e.getPixelFromCoordinate(h);var p=[d[0]+f[0],d[1]+f[1]];e.getView().animate({center:e.getCoordinateFromPixel(p),duration:this.autoPanAnimation.duration,easing:this.autoPanAnimation.easing})}}};h.prototype.getRect=function(e,t){var r=e.getBoundingClientRect();var i=r.left+window.pageXOffset;var n=r.top+window.pageYOffset;return[i,n,i+t[0],n+t[1]]};h.prototype.setPositioning=function(e){this.set(f.POSITIONING,e)};h.prototype.setVisible=function(e){if(this.rendered.visible!==e){this.element.style.display=e?"":"none";this.rendered.visible=e}};h.prototype.updatePixelPosition=function(){var e=this.getMap();var t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(false);return}var r=e.getPixelFromCoordinate(t);var i=e.getSize();this.updateRenderedPosition(r,i)};h.prototype.updateRenderedPosition=function(e,t){var r=this.element.style;var i=this.getOffset();var n=this.getPositioning();this.setVisible(true);var a=i[0];var s=i[1];if(n==o["a"].BOTTOM_RIGHT||n==o["a"].CENTER_RIGHT||n==o["a"].TOP_RIGHT){if(this.rendered.left_!==""){this.rendered.left_=r.left=""}var l=Math.round(t[0]-e[0]-a)+"px";if(this.rendered.right_!=l){this.rendered.right_=r.right=l}}else{if(this.rendered.right_!==""){this.rendered.right_=r.right=""}if(n==o["a"].BOTTOM_CENTER||n==o["a"].CENTER_CENTER||n==o["a"].TOP_CENTER){a-=this.element.offsetWidth/2}var u=Math.round(e[0]+a)+"px";if(this.rendered.left_!=u){this.rendered.left_=r.left=u}}if(n==o["a"].BOTTOM_LEFT||n==o["a"].BOTTOM_CENTER||n==o["a"].BOTTOM_RIGHT){if(this.rendered.top_!==""){this.rendered.top_=r.top=""}var c=Math.round(t[1]-e[1]-s)+"px";if(this.rendered.bottom_!=c){this.rendered.bottom_=r.bottom=c}}else{if(this.rendered.bottom_!==""){this.rendered.bottom_=r.bottom=""}if(n==o["a"].CENTER_LEFT||n==o["a"].CENTER_CENTER||n==o["a"].CENTER_RIGHT){s-=this.element.offsetHeight/2}var f=Math.round(e[1]+s)+"px";if(this.rendered.top_!=f){this.rendered.top_=r.top=f}}};h.prototype.getOptions=function(){return this.options};t["a"]=h},function(e,t,r){"use strict";var i=r(62);var n=r(19);var a=r(186);var o=function e(t,r,i,n,a){this.$rootScope_=t;this.gmfThemes_=r;this.modeFlush=i;this.gmfTreeManager_=n;this.ngeoStateManager_=a;this.themeName_=""};o.$inject=["$rootScope","gmfThemes","gmfTreeManagerModeFlush","gmfTreeManager","ngeoStateManager"];o.$inject=["$rootScope","gmfThemes","gmfTreeManagerModeFlush","gmfTreeManager","ngeoStateManager"];o.prototype.addTheme=function(e,t){if(this.modeFlush){this.ngeoStateManager_.updateState({theme:e.name});this.setThemeName(e.name);this.gmfTreeManager_.setFirstLevelGroups(e.children)}else{this.gmfTreeManager_.addFirstLevelGroups(e.children,false,t)}};o.prototype.getThemeName=function(){return this.themeName_};o.prototype.isLoading=function(){return!this.gmfThemes_.loaded};o.prototype.setThemeName=function(e,t){this.themeName_=e;if(!t){this.$rootScope_.$emit(o.EventType.THEME_NAME_SET,e)}};o.prototype.removeAll=function(){this.gmfTreeManager_.removeAll()};o.EventType={THEME_NAME_SET:"gmf-thememanager-theme_name_set"};o.module=angular.module("gmfThemeManager",[i["a"].module.name,n["a"].module.name,a["a"].module.name]);o.module.value("gmfTreeManagerModeFlush",true);o.module.service("gmfThemeManager",o);t["a"]=o},function(e,t,r){"use strict";var i=r(1);var n=r(333);var a=r(31);var o=r(3);var s=r(152);var l=function e(){s["a"].call(this)};o["d"](l,s["a"]);l.prototype.read=function(e){return s["a"].prototype.read.call(this,e)};l.prototype.readFromDocument=function(e){i["a"].assert(e.nodeType==Node.DOCUMENT_NODE,"doc.nodeType should be DOCUMENT");for(var t=e.firstChild;t;t=t.nextSibling){if(t.nodeType==Node.ELEMENT_NODE){return this.readFromNode(t)}}return null};l.prototype.readFromNode=function(e){i["a"].assert(e.nodeType==Node.ELEMENT_NODE,"node.nodeType should be ELEMENT");i["a"].assert(e.localName=="schema","localName should be schema");var t=e.getElementsByTagName("element");if(!t.length){t=e.getElementsByTagName("xsd:element")}var r=[];var n=void 0;for(var a=0,o=t.length;a<o;a++){n=this.readFromElementNode_(t[a]);if(n){r.push(n)}}return r};l.prototype.readFromElementNode_=function(e){var t=e.getAttribute("name");i["a"].assertString(t,"name should be defined in element node.");var r=e.getAttribute("alias");var o=e.getAttribute("nillable");var s=!(o===true||o==="true");var l={name:t,alias:r,required:s};var u=e.getAttribute("type");if(u){if(!n["a"].setGeometryType(l,u)){this.setAttributeByXsdType_(l,u)}}else{var c=e.getElementsByTagName("enumeration");if(!c.length){c=e.getElementsByTagName("xsd:enumeration")}if(c.length){l.type=a["a"].SELECT;var f=[];for(var h=0,d=c.length;h<d;h++){f.push(c[h].getAttribute("value"))}l.choices=f}else{var p=e.getElementsByTagName("restriction");if(!p.length){p=e.getElementsByTagName("xsd:restriction")}if(p.length&&p[0]){var v=p[0];this.setAttributeByXsdType_(l,v.getAttribute("base"));var g=e.getElementsByTagName("maxLength");if(!g.length){g=e.getElementsByTagName("xsd:maxLength")}if(g.length&&g[0]){l.maxLength=Number(g[0].getAttribute("value"))}}}}if(!l.type){return null}i["a"].assert(l.type);return l};l.prototype.setAttributeByXsdType_=function(e,t){if(t==="xsd:boolean"){e.type=a["a"].BOOLEAN}else if(t==="xsd:date"){e.type=a["a"].DATE}else if(t==="xsd:dateTime"){e.type=a["a"].DATETIME}else if(t==="xsd:time"){e.type=a["a"].TIME}else if(t==="xsd:decimal"||t==="xsd:double"){e.type=a["a"].NUMBER;e.numType=l.NumberType.FLOAT}else if(t==="xsd:integer"){e.type=a["a"].NUMBER;e.numType=l.NumberType.INTEGER}else if(t==="xsd:string"){e.type=a["a"].TEXT}};l.getGeometryAttribute=function(e){var t=null;for(var r=0,i=e.length;r<i;r++){if(e[r].type===a["a"].GEOMETRY){t=e[r];break}}return t};l.NumberType={FLOAT:"float",INTEGER:"integer"};t["a"]=l},function(e,t,r){"use strict";var i=r(160);var n=r(137);var a=r(21);var o=function e(t,r,i){this.q_=t;this.gmfEditFeature_=r;this.ngeoLocation_=i;this.getFeatureDefered_=null};o.$inject=["$q","gmfEditFeature","ngeoLocation"];o.$inject=["$q","gmfEditFeature","ngeoLocation"];o.prototype.getFeature=function(){if(!this.getFeatureDefered_){this.getFeatureDefered_=this.q_.defer();var e=this.ngeoLocation_.getParam(o.Param.GEOM_TYPE);var t=this.ngeoLocation_.getParam(o.Param.ID);var r=this.ngeoLocation_.getParam(o.Param.LAYER);var i=this.ngeoLocation_.getParam(o.Param.PROPERTY);var n=this.ngeoLocation_.getParam(o.Param.THEME);if(e&&t&&r&&i&&n){this.gmfEditFeature_.getFeaturesWithComparisonFilters([r],[{operator:"eq",property:i,value:t}]).then(this.handleGetFeatures_.bind(this,i,t))}else{this.getFeatureDefered_.resolve(null)}}return this.getFeatureDefered_.promise};o.prototype.getGeomType=function(){return this.ngeoLocation_.getParam(o.Param.GEOM_TYPE)};o.prototype.getLayerNodeId=function(){return this.ngeoLocation_.getParamAsInt(o.Param.LAYER)};o.prototype.handleGetFeatures_=function(e,t,r){var i=void 0;if(r.length){i=r[0]}else{var n={};n[e]=t;n["geometry"]=null;i=new a["a"](n)}this.getFeatureDefered_.resolve(i)};o.Param={GEOM_TYPE:"objectediting_geomtype",ID:"objectediting_id",LAYER:"objectediting_layer",PROPERTY:"objectediting_property",THEME:"objectediting_theme"};o.module=angular.module("gmfObjectEditingManager",[i["a"].module.name,n["a"].module.name]);o.module.service("gmfObjectEditingManager",o);t["a"]=o},function(e,t,r){"use strict";var i={AND:"&&",NOT:"!",OR:"||"};t["a"]=i},function(e,t,r){"use strict";var i=r(250);var n=r(3);var a=r(221);var o=r(42);var s=r(2);var l=r(16);var u=r(5);var c=function e(t,r,i,n,s,l){a["a"].call(this,t,r,i,o["a"].IDLE);this.src_=n;this.image_=new Image;if(s!==null){this.image_.crossOrigin=s}this.imageListenerKeys_=null;this.state=o["a"].IDLE;this.imageLoadFunction_=l};Object(n["d"])(c,a["a"]);c.prototype.getImage=function(){return this.image_};c.prototype.handleImageError_=function(){this.state=o["a"].ERROR;this.unlistenImage_();this.changed()};c.prototype.handleImageLoad_=function(){if(this.resolution===undefined){this.resolution=Object(u["A"])(this.extent)/this.image_.height}this.state=o["a"].LOADED;this.unlistenImage_();this.changed()};c.prototype.load=function(){if(this.state==o["a"].IDLE||this.state==o["a"].ERROR){this.state=o["a"].LOADING;this.changed();this.imageListenerKeys_=[Object(s["b"])(this.image_,l["a"].ERROR,this.handleImageError_,this),Object(s["b"])(this.image_,l["a"].LOAD,this.handleImageLoad_,this)];this.imageLoadFunction_(this,this.src_)}};c.prototype.setImage=function(e){this.image_=e};c.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(s["e"]);this.imageListenerKeys_=null};var f=c;var h=r(39);var d=r(11);var p=r(12);var v=r(251);var g=r(340);var m=r(206);var y=r(153);var _=r(172);var b=function e(t){var r=t||{};g["a"].call(this,{attributions:r.attributions,projection:r.projection,resolutions:r.resolutions});this.crossOrigin_=r.crossOrigin!==undefined?r.crossOrigin:null;this.url_=r.url;this.imageLoadFunction_=r.imageLoadFunction!==undefined?r.imageLoadFunction:g["b"];this.params_=r.params||{};this.v13_=true;this.updateV13_();this.serverType_=r.serverType;this.hidpi_=r.hidpi!==undefined?r.hidpi:true;this.image_=null;this.imageSize_=[0,0];this.renderedRevision_=0;this.ratio_=r.ratio!==undefined?r.ratio:1.5};Object(n["d"])(b,g["a"]);var w=[101,101];b.prototype.getGetFeatureInfoUrl=function(e,t,r,n){if(this.url_===undefined){return undefined}var a=Object(p["g"])(r);var o=this.getProjection();if(o&&o!==a){t=Object(v["a"])(o,a,e,t);e=Object(p["m"])(e,a,o)}var s=Object(u["z"])(e,t,0,w);var l={SERVICE:"WMS",VERSION:i["a"],REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:true,QUERY_LAYERS:this.params_["LAYERS"]};Object(d["a"])(l,this.params_,n);var c=Math.floor((e[0]-s[0])/t);var f=Math.floor((s[3]-e[1])/t);l[this.v13_?"I":"X"]=c;l[this.v13_?"J":"Y"]=f;return this.getRequestUrl_(s,w,1,o||a,l)};b.prototype.getParams=function(){return this.params_};b.prototype.getImageInternal=function(e,t,r,n){if(this.url_===undefined){return null}t=this.findNearestResolution(t);if(r!=1&&(!this.hidpi_||this.serverType_===undefined)){r=1}var a=t/r;var o=Object(u["x"])(e);var c=Math.ceil(Object(u["E"])(e)/a);var h=Math.ceil(Object(u["A"])(e)/a);var p=Object(u["z"])(o,a,0,[c,h]);var v=Math.ceil(this.ratio_*Object(u["E"])(e)/a);var g=Math.ceil(this.ratio_*Object(u["A"])(e)/a);var m=Object(u["z"])(o,a,0,[v,g]);var y=this.image_;if(y&&this.renderedRevision_==this.getRevision()&&y.getResolution()==t&&y.getPixelRatio()==r&&Object(u["g"])(y.getExtent(),p)){return y}var _={SERVICE:"WMS",VERSION:i["a"],REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:true};Object(d["a"])(_,this.params_);this.imageSize_[0]=Math.round(Object(u["E"])(m)/a);this.imageSize_[1]=Math.round(Object(u["A"])(m)/a);var b=this.getRequestUrl_(m,this.imageSize_,r,n,_);this.image_=new f(m,t,r,b,this.crossOrigin_,this.imageLoadFunction_);this.renderedRevision_=this.getRevision();Object(s["a"])(this.image_,l["a"].CHANGE,this.handleImageChange,this);return this.image_};b.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_};b.prototype.getRequestUrl_=function(e,t,r,i,n){Object(h["a"])(this.url_!==undefined,9);n[this.v13_?"CRS":"SRS"]=i.getCode();if(!("STYLES"in this.params_)){n["STYLES"]=""}if(r!=1){switch(this.serverType_){case m["a"].GEOSERVER:var a=90*r+.5|0;if("FORMAT_OPTIONS"in n){n["FORMAT_OPTIONS"]+=";dpi:"+a}else{n["FORMAT_OPTIONS"]="dpi:"+a}break;case m["a"].MAPSERVER:n["MAP_RESOLUTION"]=90*r;break;case m["a"].CARMENTA_SERVER:case m["a"].QGIS:n["DPI"]=90*r;break;default:Object(h["a"])(false,8);break}}n["WIDTH"]=t[0];n["HEIGHT"]=t[1];var o=i.getAxisOrientation();var s=void 0;if(this.v13_&&o.substr(0,2)=="ne"){s=[e[1],e[0],e[3],e[2]]}else{s=e}n["BBOX"]=s.join(",");return Object(_["a"])(this.url_,n)};b.prototype.getUrl=function(){return this.url_};b.prototype.setImageLoadFunction=function(e){this.image_=null;this.imageLoadFunction_=e;this.changed()};b.prototype.setUrl=function(e){if(e!=this.url_){this.url_=e;this.image_=null;this.changed()}};b.prototype.updateParams=function(e){Object(d["a"])(this.params_,e);this.updateV13_();this.image_=null;this.changed()};b.prototype.updateV13_=function(){var e=this.params_["VERSION"]||i["a"];this.v13_=Object(y["a"])(e,"1.3")>=0};var S=t["a"]=b},function(e,t,r){"use strict";t["a"]={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"}},function(e,t,r){"use strict";r.d(t,"a",function(){return i});r.d(t,"d",function(){return n});r.d(t,"c",function(){return a});r.d(t,"b",function(){return o});r.d(t,"e",function(){return s});r.d(t,"f",function(){return u});function i(e,t,r,i){if(i!==undefined){i[0]=e;i[1]=t;i[2]=r;return i}else{return[e,t,r]}}function n(e,t,r){return e+"/"+t+"/"+r}function a(e){return n(e[0],e[1],e[2])}function o(e){return e.split("/").map(Number)}function s(e){return(e[1]<<e[0])+e[2]}function l(e){var t=e[0];var r=new Array(t);var i=1<<t-1;var n=void 0,a=void 0;for(n=0;n<t;++n){a=48;if(e[1]&i){a+=1}if(e[2]&i){a+=2}r[n]=String.fromCharCode(a);i>>=1}return r.join("")}function u(e,t){var r=e[0];var i=e[1];var n=e[2];if(t.getMinZoom()>r||r>t.getMaxZoom()){return false}var a=t.getExtent();var o=void 0;if(!a){o=t.getFullTileRange(r)}else{o=t.getTileRangeForExtentAndZ(a,r)}if(!o){return true}else{return o.containsXY(i,n)}}},function(e,t,r){"use strict";var i=r(0);var n=function e(){};n.prototype.read=function(e){if(Object(i["g"])(e)){return this.readFromDocument(e)}else if(Object(i["h"])(e)){return this.readFromNode(e)}else if(typeof e==="string"){var t=Object(i["s"])(e);return this.readFromDocument(t)}else{return null}};n.prototype.readFromDocument=function(e){};n.prototype.readFromNode=function(e){};t["a"]=n},function(e,t,r){"use strict";r.d(t,"b",function(){return i});r.d(t,"a",function(){return n});function i(e,t,r){var i=r!==undefined?e.toFixed(r):""+e;var n=i.indexOf(".");n=n===-1?i.length:n;return n>t?i:new Array(1+t-n).join("0")+i}function n(e,t){var r=(""+e).split(".");var i=(""+t).split(".");for(var n=0;n<Math.max(r.length,i.length);n++){var a=parseInt(r[n]||"0",10);var o=parseInt(i[n]||"0",10);if(a>o){return 1}if(o>a){return-1}}return 0}},function(e,t,r){(function(e){+function(e){"use strict";var t=".dropdown-backdrop";var r='[data-toggle="dropdown"]';var i=function(t){e(t).on("click.bs.dropdown",this.toggle)};i.VERSION="3.3.7";function n(t){var r=t.attr("data-target");if(!r){r=t.attr("href");r=r&&/#[A-Za-z]/.test(r)&&r.replace(/.*(?=#[^\s]*$)/,"")}var i=r&&e(r);return i&&i.length?i:t.parent()}function a(i){if(i&&i.which===3)return;e(t).remove();e(r).each(function(){var t=e(this);var r=n(t);var a={relatedTarget:this};if(!r.hasClass("open"))return;if(i&&i.type=="click"&&/input|textarea/i.test(i.target.tagName)&&e.contains(r[0],i.target))return;r.trigger(i=e.Event("hide.bs.dropdown",a));if(i.isDefaultPrevented())return;t.attr("aria-expanded","false");r.removeClass("open").trigger(e.Event("hidden.bs.dropdown",a))})}i.prototype.toggle=function(t){var r=e(this);if(r.is(".disabled, :disabled"))return;var i=n(r);var o=i.hasClass("open");a();if(!o){if("ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length){e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",a)}var s={relatedTarget:this};i.trigger(t=e.Event("show.bs.dropdown",s));if(t.isDefaultPrevented())return;r.trigger("focus").attr("aria-expanded","true");i.toggleClass("open").trigger(e.Event("shown.bs.dropdown",s))}return false};i.prototype.keydown=function(t){if(!/(38|40|27|32)/.test(t.which)||/input|textarea/i.test(t.target.tagName))return;var i=e(this);t.preventDefault();t.stopPropagation();if(i.is(".disabled, :disabled"))return;var a=n(i);var o=a.hasClass("open");if(!o&&t.which!=27||o&&t.which==27){if(t.which==27)a.find(r).trigger("focus");return i.trigger("click")}var s=" li:not(.disabled):visible a";var l=a.find(".dropdown-menu"+s);if(!l.length)return;var u=l.index(t.target);if(t.which==38&&u>0)u--;if(t.which==40&&u<l.length-1)u++;if(!~u)u=0;l.eq(u).trigger("focus")};function o(t){return this.each(function(){var r=e(this);var n=r.data("bs.dropdown");if(!n)r.data("bs.dropdown",n=new i(this));if(typeof t=="string")n[t].call(r)})}var s=e.fn.dropdown;e.fn.dropdown=o;e.fn.dropdown.Constructor=i;e.fn.dropdown.noConflict=function(){e.fn.dropdown=s;return this};e(document).on("click.bs.dropdown.data-api",a).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",r,i.prototype.toggle).on("keydown.bs.dropdown.data-api",r,i.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",i.prototype.keydown)}(e)}).call(this,r(24))},function(e,t,r){"use strict";var i=r(192);var n=r(71);var a=r(191);var o=r(190);function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var l=angular.module("gmfAuthentication",[i["a"].module.name,a["a"].module.name,o["a"].name]);l.gmfAuthenticationTemplateUrl_=function(e,t){var r=t["gmfAuthenticationTemplateurl"];return r!==undefined?r:"gmf/authentication"};l.run(["$templateCache",function(e){e.put("gmf/authentication",r(533))}]);u.$inject=["$element","$attrs","gmfAuthenticationTemplateUrl"];function u(e,t,r){return r(e,t)}l.component_={bindings:{allowPasswordReset:"<?gmfAuthenticationAllowPasswordReset",allowPasswordChange:"<?gmfAuthenticationAllowPasswordChange",passwordValidator:"<?gmfAuthenticationPasswordValidator",forcePasswordChange:"<?gmfAuthenticationForcePasswordChange",infoMessage:"=?gmfAuthenticationInfoMessage"},controller:"GmfAuthenticationController",templateUrl:u};l.value("gmfAuthenticationTemplateUrl",l.gmfAuthenticationTemplateUrl_);l.component("gmfAuthentication",l.component_);l.AuthenticationController_=function(){e.$inject=["$element","gettextCatalog","gmfAuthenticationService","gmfUser","ngeoNotification"];function e(t,r,i,n,a){s(this,e);this.$element_=t;this.gmfUser=n;this.gettextCatalog=r;this.gmfAuthenticationService_=i;this.notification_=a;this.allowPasswordReset;this.allowPasswordChange;this.passwordValidator=null;this.forcePasswordChange;this.infoMessage=null;this.changingPassword=false;this.changePasswordModalShown=false;this.resetPasswordModalShown=false;this.error=false;this.loginVal="";this.pwdVal="";this.oldPwdVal="";this.newPwdVal="";this.newPwdConfVal=""}e.prototype.$onInit=function e(){this.allowPasswordReset=this.allowPasswordReset!==false;this.allowPasswordChange=this.allowPasswordChange!==false;this.forcePasswordChange=this.forcePasswordChange===true;if(this.forcePasswordChange){this.changingPassword=true}};e.prototype.changePassword=function e(){var t=this;var r=this.gettextCatalog;var i=this.oldPwdVal;var n=this.newPwdVal;var a=this.newPwdConfVal;var o=[];if(i===""){o.push(r.getString("The old password is required."))}if(n===""){o.push(r.getString("The new password is required."))}if(a===""){o.push(r.getString("The password confirmation is required."))}if(o.length){this.setError_(o)}else{if(i===n){o.push(r.getString("The old and new passwords are the same."))}if(n!==a){o.push(r.getString("The passwords don't match."))}if(this.passwordValidator){if(!this.passwordValidator.isPasswordValid(i)){o.push(r.getString(this.passwordValidator.notValidMessage))}}if(o.length){this.setError_(o)}else{var s=r.getString("Incorrect old password.");this.gmfAuthenticationService_.changePassword(i,n,a).then(function(){t.changePasswordModalShown=true;t.changePasswordReset()},this.setError_.bind(this,s))}}};e.prototype.login=function e(){var t=this.gettextCatalog;var r=[];if(this.loginVal===""){r.push(t.getString("The username is required."))}if(this.pwdVal===""){r.push(t.getString("The password is required."))}if(r.length){this.setError_(r)}else{var i=t.getString("Incorrect credentials or disabled account.");this.gmfAuthenticationService_.login(this.loginVal,this.pwdVal).then(this.resetError_.bind(this),this.setError_.bind(this,i))}};e.prototype.logout=function e(){var t=this.gettextCatalog;var r=t.getString("Could not log out.");this.gmfAuthenticationService_.logout().then(this.resetError_.bind(this),this.setError_.bind(this,r))};e.prototype.resetPassword=function e(){var t=this.gettextCatalog;if(!this.loginVal){this.setError_(t.getString("Please, input a login..."));return}var r=t.getString("An error occurred while resetting the password.");var i=function(e){this.resetPasswordModalShown=true;this.resetError_()}.bind(this);this.gmfAuthenticationService_.resetPassword(this.loginVal).then(i,this.setError_.bind(this,r))};e.prototype.changePasswordReset=function e(){this.resetError_();this.changingPassword=false;this.oldPwdVal="";this.newPwdVal="";this.newPwdConfVal=""};e.prototype.userMustChangeItsPassword=function e(){return this.gmfUser.is_password_changed===false&&this.forcePasswordChange};e.prototype.setError_=function e(t){if(this.error){this.resetError_()}this.error=true;var r=this.$element_.find(".gmf-authentication-error");if(!Array.isArray(t)){t=[t]}t.forEach(function(e){this.notification_.notify({msg:e,target:r,type:n["a"].Type.ERROR})},this)};e.prototype.resetError_=function e(){this.notification_.clear();this.error=false};return e}();l.controller("GmfAuthenticationController",l.AuthenticationController_);var c=l;var f=angular.module("gmfAuthenticationModule",[c.name,i["a"].module.name]);var h=t["a"]=f},function(e,t,r){"use strict";var i=r(48);var n=r(1);var a=r(78);var o=r(336);var s=r(113);var l=r(173);var u=r(28);var c=r(89);var f=r(76);var h=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function p(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function v(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var g=function(e){v(t,e);function t(r){d(this,t);var i=p(this,e.call(this,r));i.featuresCollection_=r.features||new u["b"];i.source_=new f["b"]({features:i.featuresCollection_,wrapX:false});i.layer_=new c["a"]({source:i.source_});return i}h(t,[{key:"features",get:function e(){return this.featuresCollection_.getArray()}},{key:"featuresCollection",get:function e(){return this.featuresCollection_}},{key:"layer",get:function e(){return this.layer_}},{key:"extent",get:function e(){return this.source_.getExtent()}}]);return t}(l["a"]);var m=g;var y=r(211);function _(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function b(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function w(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var S=function(e){w(t,e);function t(r){_(this,t);var i=b(this,e.call(this,r));var n=r.injector;i.rootScope_=n.get("$rootScope");i.unregister_={};return i}t.prototype.addDataSource=function t(r){e.prototype.addDataSource.call(this,r);n["a"].assertInstanceof(r,m);this.registerDataSource_(r)};t.prototype.registerDataSource_=function e(t){this.unregister_[t.id]=this.rootScope_.$watch(function(){return t.visible},this.handleDataSourceVisibleChange_.bind(this,t))};t.prototype.handleDataSourceVisibleChange_=function e(t,r,i){if(r!==undefined){t.layer.setVisible(r)}};t.prototype.removeDataSource=function t(r){e.prototype.removeDataSource.call(this,r);n["a"].assertInstanceof(r,m);this.unregisterDataSource_(r)};t.prototype.unregisterDataSource_=function e(t){this.unregister_[t.id]();delete this.unregister_[t.id]};return t}(y["a"]);var C=S;var x=r(40);var O=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();function T(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function E(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function M(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var j=function(e){M(t,e);function t(r){T(this,t);var i=E(this,e.call(this,r));i.url_=r.url;return i}O(t,[{key:"url",get:function e(){return this.url_}}]);return t}(y["a"]);var A=j;var P=r(9);var k=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();function I(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function D(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function R(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var L=function(e){R(t,e);function t(r,i){I(this,t);var n=D(this,e.call(this,r));var a=r.injector;n.layer_;n.ngeoLayerHelper_=i;n.rootScope_=a.get("$rootScope");n.wmsDataSourceUnregister_={};n.init_();return n}t.prototype.init_=function e(){n["a"].assert(this.dataSources.length,"At least one data source is required.");for(var t=this.dataSources,r=Array.isArray(t),i=0,t=r?t:t[Symbol.iterator]();;){var a;if(r){if(i>=t.length)break;a=t[i++]}else{i=t.next();if(i.done)break;a=i.value}var o=a;n["a"].assertInstanceof(o,x["a"]);this.registerDataSource_(o)}};t.prototype.destroy=function t(){for(var r=this.dataSources,i=Array.isArray(r),a=0,r=i?r:r[Symbol.iterator]();;){var o;if(i){if(a>=r.length)break;o=r[a++]}else{a=r.next();if(a.done)break;o=a.value}var s=o;n["a"].assertInstanceof(s,x["a"]);this.unregisterDataSource_(s)}e.prototype.destroy.call(this)};t.prototype.addDataSource=function t(r){e.prototype.addDataSource.call(this,r);n["a"].assertInstanceof(r,x["a"]);this.registerDataSource_(r)};t.prototype.registerDataSource_=function e(t){var r=t.id;this.wmsDataSourceUnregister_[r]=this.rootScope_.$watch(function(){return t.visible},this.handleDataSourceVisibleChange_.bind(this));if(!this.layer_){this.layer_=this.ngeoLayerHelper_.createBasicWMSLayerFromDataSource(t)}else{this.layer_.get("querySourceIds").push(r);this.updateLayer_()}};t.prototype.handleDataSourceVisibleChange_=function e(t,r){if(t!==undefined&&t!==r){this.updateLayer_()}};t.prototype.updateLayer_=function e(){var t=this.layer;var r=[];for(var i=this.dataSources,a=Array.isArray(i),o=0,i=a?i:i[Symbol.iterator]();;){var s;if(a){if(o>=i.length)break;s=i[o++]}else{o=i.next();if(o.done)break;s=o.value}var l=s;n["a"].assertInstanceof(l,x["a"]);if(l.visible){r=r.concat(l.getOGCLayerNames())}}this.ngeoLayerHelper_.updateWMSLayerState(t,r.join(","))};t.prototype.removeDataSource=function t(r){e.prototype.removeDataSource.call(this,r);n["a"].assertInstanceof(r,x["a"]);this.unregisterDataSource_(r)};t.prototype.unregisterDataSource_=function e(t){var r=t.id;var i=this.layer;var n=this.wmsDataSourceUnregister_[r];n();delete this.wmsDataSourceUnregister_[r];P["j"](this.dataSources,t);var a=this.ngeoLayerHelper_.getQuerySourceIds(i);if(a){P["j"](a,r)}if(this.dataSources.length){this.updateLayer_()}};k(t,[{key:"layer",get:function e(){return this.layer_}}]);return t}(A);var $=L;var N=r(3);var F=r(5);var G=r(2);var U=r(385);var H=r(387);var Y=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();function W(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var V=function(){e.$inject=["gettextCatalog","$injector","$q","$rootScope","ngeoDataSources","ngeoFile","ngeoLayerHelper"];function e(t,r,i,n,a,o,s){W(this,e);this.injector_=r;this.q_=i;this.rootScope_=n;this.dataSources_=a.collection;this.ngeoFile_=o;this.ngeoLayerHelper_=s;this.extDataSources_={};this.files_={};this.map_=null;this.fileGroup_=new C({dataSources:[],injector:this.injector_,title:t.getString("Local files")});this.wmsGroupsCollection_=new u["b"];this.wmtsGroupsCollection_=new u["b"];this.wmtsCache_={};G["a"](this.dataSources_,"remove",this.handleDataSourcesRemove_,this)}e.prototype.addWMSGroup_=function e(t){this.wmsGroupsCollection.push(t)};e.prototype.removeWMSGroup_=function e(t){this.wmsGroupsCollection.remove(t)};e.prototype.getWMSGroup=function e(t){var r=null;for(var i=this.wmsGroups,n=Array.isArray(i),a=0,i=n?i:i[Symbol.iterator]();;){var o;if(n){if(a>=i.length)break;o=i[a++]}else{a=i.next();if(a.done)break;o=a.value}var s=o;if(s.url===t){r=s;break}}return r};e.prototype.addWMTSGroup_=function e(t){this.wmtsGroupsCollection.push(t)};e.prototype.removeWMTSGroup_=function e(t){this.wmtsGroupsCollection.remove(t)};e.prototype.getWMTSGroup=function e(t){var r=null;for(var i=this.wmtsGroups,n=Array.isArray(i),a=0,i=n?i:i[Symbol.iterator]();;){var o;if(n){if(a>=i.length)break;o=i[a++]}else{a=i.next();if(a.done)break;o=a.value}var s=o;if(s.url===t){r=s;break}}return r};e.prototype.isExternalDataSource=function e(t){return!!this.extDataSources_[t.id]};e.prototype.addLayer_=function e(t){this.layerGroup.getLayers().push(t)};e.prototype.removeLayer_=function e(t){this.layerGroup.getLayers().remove(t)};e.prototype.createAndAddDataSourceFromWMSCapability=function t(r,i,n){var a=e.getId(r);var o=i["Service"];var s=void 0;if(this.extDataSources_[a]){s=this.extDataSources_[a]}else{var l=i["Capability"]["Request"];var u=l["GetMap"]["Format"];var c="image/png";var f=u.includes(c)?c:u[0];var h=l["GetFeatureInfo"]["Format"];var d=h.includes(x["a"].WMSInfoFormat.GML)?x["a"].WMSInfoFormat.GML:undefined;var p=r["queryable"]===true&&d!==undefined;s=new x["a"]({id:a,name:r["Title"],ogcImageType:f,ogcLayers:[{name:r["Name"],queryable:p}],ogcType:x["a"].Type.WMS,visible:true,wmsInfoFormat:d,wmsUrl:n});this.extDataSources_[a]=s}var v=this.getWMSGroup(n);if(v){if(!v.dataSources.includes(s)){v.addDataSource(s);this.dataSources_.push(s)}}else{v=new $({dataSources:[s],injector:this.injector_,title:o["Title"],url:n},this.ngeoLayerHelper_);this.addLayer_(v.layer);this.addWMSGroup_(v);this.dataSources_.push(s)}};e.prototype.createAndAddDataSourceFromWMTSCapability=function t(r,i,a){var o=e.getId(r);if(this.wmtsCache_[o]){return}var s=void 0;if(this.extDataSources_[o]){s=this.extDataSources_[o]}else{var l=n["a"].assertString(r["Title"]);var u=n["a"].assertString(r["Identifier"]);s=new x["a"]({id:o,name:l,ogcType:x["a"].Type.WMTS,visible:true,wmtsLayer:u,wmtsUrl:a});this.extDataSources_[o]=s}var c=this.getWMTSGroup(a);if(!c){c=new A({dataSources:[],title:i["ServiceIdentification"]["Title"],url:a});this.addWMTSGroup_(c)}c.addDataSource(s);var f=this.ngeoLayerHelper_.createWMTSLayerFromCapabilititesObj(i,r);this.addLayer_(f);this.dataSources_.push(s);this.wmtsCache_[o]={layerObj:f,unregister:this.rootScope_.$watch(function(){return s.visible},this.handleWMTSDataSourceVisibleChange_.bind(this,f))}};e.prototype.createAndAddDataSourceFromFile=function e(t,r){var i=this;this.getFileDataSource_(t).then(function(e){var t=true;var n=i.fileGroup_;if(Object(F["H"])(e.extent)){t=false}else{if(n.dataSources.includes(e)){return}i.addLayer_(e.layer);n.addDataSource(e);i.map_.getView().fit(e.extent);i.dataSources_.push(e)}if(r){r(t)}},function(e){console.error("Failed to load file: "+t.name);if(r){r(false)}})};e.prototype.getFileDataSource_=function t(r){var i=this;var n=this.q_.defer();if(this.files_[r.name]){n.resolve(this.files_[r.name])}else{var a=this.ngeoFile_;a.read(r).then(function(t){var o=void 0;var s={featureProjection:i.map_.getView().getProjection()};if(a.isKml(t)){o=new H["a"]({extractStyles:false}).readFeatures(t,s)}else if(a.isGpx(t)){o=(new U["a"]).readFeatures(t,s)}if(o){var l=e.getId(r);var c=new m({features:new u["b"](o),id:l,name:r.name,visible:true});i.files_[r.name]=c;i.extDataSources_[l]=c;n.resolve(c)}else{n.reject()}})}return n.promise};e.prototype.handleWMTSDataSourceVisibleChange_=function e(t,r,i){if(r!==undefined&&r!==i){t.setVisible(r)}};e.prototype.handleDataSourcesRemove_=function e(t){var r=t.element;if(this.extDataSources_[r.id]===r){if(r instanceof m){this.removeFileDataSource_(r)}else if(r instanceof x["a"]){this.removeOGCDataSource_(r)}}};e.prototype.removeFileDataSource_=function e(t){this.removeLayer_(t.layer);this.fileGroup_.removeDataSource(t)};e.prototype.removeOGCDataSource_=function e(t){if(t.ogcType===x["a"].Type.WMS){var r=t.wmsUrl;n["a"].assert(r);var i=this.getWMSGroup(r);if(i&&i.dataSources.includes(t)){i.removeDataSource(t);if(!i.dataSources.length){this.removeLayer_(i.layer);i.destroy();this.removeWMSGroup_(i)}}}else if(t.ogcType===x["a"].Type.WMTS){var a=t.wmtsUrl;n["a"].assert(a);var o=this.getWMTSGroup(a);if(o&&o.dataSources.includes(t)){o.removeDataSource(t);var s=t.id;this.removeLayer_(this.wmtsCache_[s].layerObj);this.wmtsCache_[s].unregister();delete this.wmtsCache_[s];if(!o.dataSources.length){o.destroy();this.removeWMTSGroup_(o)}}}};Y(e,[{key:"fileGroup",get:function e(){return this.fileGroup_}},{key:"wmsGroups",get:function e(){return this.wmsGroupsCollection_.getArray()}},{key:"wmsGroupsCollection",get:function e(){return this.wmsGroupsCollection_}},{key:"wmtsGroups",get:function e(){return this.wmtsGroupsCollection_.getArray()}},{key:"wmtsGroupsCollection",get:function e(){return this.wmtsGroupsCollection_}},{key:"layerGroup",get:function e(){var t=this.map_;n["a"].assert(t);return this.ngeoLayerHelper_.getGroupFromMap(t,i["a"].EXTERNALLAYERGROUP_NAME)}},{key:"map",set:function e(t){this.map_=t}}]);return e}();V.getId=function(e){return N["c"](e)+1e6};V.module=angular.module("gmfExternalDataSourcesManager",[a["a"].module.name,o["a"].module.name,s["a"].module.name]);V.module.service("gmfExternalDataSourcesManager",V);var z=t["a"]=V},function(e,t,r){"use strict";var i=r(123);var n=r(337);var a=r(55);var o=angular.module("ngeoBboxQuery",[i["a"].module.name]);o.directive_=function(e){return{restrict:"A",scope:false,link:function t(r,i,o){var s=r.$eval(o["ngeoBboxQueryMap"]);var l=new n["a"]({condition:a["g"]});var u=function t(i){var n=l.getGeometry().getExtent();e.issue({limit:r.$eval(o["ngeoBboxQueryLimit"]),extent:n,map:s})};l.on("boxend",u);r.$watch(o["ngeoBboxQueryActive"],function(t,i){if(t){s.addInteraction(l)}else{s.removeInteraction(l);if(r.$eval(o["ngeoBboxQueryAutoclear"])!==false){e.clear()}}})}}};o.directive_.$inject=["ngeoMapQuerent"];o.directive("ngeoBboxQuery",o.directive_);t["a"]=o},function(e,t,r){"use strict";var i=r(123);var n=r(2);var a=angular.module("ngeoMapQuery",[i["a"].module.name]);a.directive_=function(e,t){return{restrict:"A",scope:false,link:function r(i,a,o){var s=i.$eval(o["ngeoMapQueryMap"]);var l=null;var u=null;var c=function t(r){var i=r.coordinate;e.issue({coordinate:i,map:s})};var f=function e(t){if(!t.dragging){var r=s.getEventPixel(t.originalEvent);var i=function e(t){var r=t.get("visible");var i=t.get("querySourceIds");return r&&!!i};var n=s.forEachLayerAtPixel(r,function(){return true},undefined,i);s.getTargetElement().style.cursor=n?"pointer":""}};var h=function e(){l=n["a"](s,"singleclick",c);var r=t.has("ngeoQueryOptions")?t.get("ngeoQueryOptions"):{};if(r.cursorHover){u=n["a"](s,"pointermove",f)}};var d=function t(){if(l!==null){n["e"](l);l=null}if(u!==null){n["e"](u);u=null}if(i.$eval(o["ngeoMapQueryAutoclear"])!==false){e.clear()}};i.$watch(o["ngeoMapQueryActive"],function(e,t){if(e){h()}else{d()}})}}};a.directive_.$inject=["ngeoMapQuerent","$injector"];a.directive("ngeoMapQuery",a.directive_);t["a"]=a},function(e,t,r){(function(e,r){true?r(t):undefined})(this,function(e){"use strict";var t=Math.PI,r=2*t,i=1e-6,n=r-i;function a(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function o(){return new a}a.prototype=o.prototype={constructor:a,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){if(this._x1!==null){this._x1=this._x0,this._y1=this._y0;this._+="Z"}},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,r,i){this._+="Q"+ +e+","+ +t+","+(this._x1=+r)+","+(this._y1=+i)},bezierCurveTo:function(e,t,r,i,n,a){this._+="C"+ +e+","+ +t+","+ +r+","+ +i+","+(this._x1=+n)+","+(this._y1=+a)},arcTo:function(e,r,n,a,o){e=+e,r=+r,n=+n,a=+a,o=+o;var s=this._x1,l=this._y1,u=n-e,c=a-r,f=s-e,h=l-r,d=f*f+h*h;if(o<0)throw new Error("negative radius: "+o);if(this._x1===null){this._+="M"+(this._x1=e)+","+(this._y1=r)}else if(!(d>i));else if(!(Math.abs(h*u-c*f)>i)||!o){this._+="L"+(this._x1=e)+","+(this._y1=r)}else{var p=n-s,v=a-l,g=u*u+c*c,m=p*p+v*v,y=Math.sqrt(g),_=Math.sqrt(d),b=o*Math.tan((t-Math.acos((g+d-m)/(2*y*_)))/2),w=b/_,S=b/y;if(Math.abs(w-1)>i){this._+="L"+(e+w*f)+","+(r+w*h)}this._+="A"+o+","+o+",0,0,"+ +(h*p>f*v)+","+(this._x1=e+S*u)+","+(this._y1=r+S*c)}},arc:function(e,a,o,s,l,u){e=+e,a=+a,o=+o;var c=o*Math.cos(s),f=o*Math.sin(s),h=e+c,d=a+f,p=1^u,v=u?s-l:l-s;if(o<0)throw new Error("negative radius: "+o);if(this._x1===null){this._+="M"+h+","+d}else if(Math.abs(this._x1-h)>i||Math.abs(this._y1-d)>i){this._+="L"+h+","+d}if(!o)return;if(v<0)v=v%r+r;if(v>n){this._+="A"+o+","+o+",0,1,"+p+","+(e-c)+","+(a-f)+"A"+o+","+o+",0,1,"+p+","+(this._x1=h)+","+(this._y1=d)}else if(v>i){this._+="A"+o+","+o+",0,"+ +(v>=t)+","+p+","+(this._x1=e+o*Math.cos(l))+","+(this._y1=a+o*Math.sin(l))}},rect:function(e,t,r,i){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +r+"v"+ +i+"h"+-r+"Z"},toString:function(){return this._}};e.path=o;Object.defineProperty(e,"__esModule",{value:true})})},function(e,t,r){"use strict";var i=r(176);var n=r(172);var a=function e(t,r){this.http_=t;this.baseUrl_=r};a.$inject=["$http","gmfLayersUrl"];a.$inject=["$http","gmfLayersUrl"];a.prototype.getFeaturesInExtent=function(e,t){var r=n["a"](this.baseUrl_+"/"+e.join(","),{bbox:t.join(",")});return this.http_.get(r).then(this.handleGetFeatures_.bind(this))};a.prototype.getFeaturesWithComparisonFilters=function(e,t){var r=[];var i={};for(var a=t,o=Array.isArray(a),s=0,a=o?a:a[Symbol.iterator]();;){var l;if(o){if(s>=a.length)break;l=a[s++]}else{s=a.next();if(s.done)break;l=s.value}var u=l;i[u.property+"__"+u.operator]=u.value;r.push(u.property)}i["queryable"]=r.join(",");var c=n["a"](this.baseUrl_+"/"+e.join(","),i);return this.http_.get(c).then(this.handleGetFeatures_.bind(this))};a.prototype.handleGetFeatures_=function(e){return(new i["a"]).readFeatures(e.data)};a.prototype.insertFeatures=function(e,t){var r=this.baseUrl_+"/"+e;var n=(new i["a"]).writeFeatures(t);return this.http_.post(r,n,{headers:{"Content-Type":"application/json"},withCredentials:true})};a.prototype.updateFeature=function(e,t){var r=this.baseUrl_+"/"+e.toString()+"/"+t.getId();var n=(new i["a"]).writeFeature(t);return this.http_.put(r,n,{headers:{"Content-Type":"application/json"},withCredentials:true})};a.prototype.deleteFeature=function(e,t){var r=this.baseUrl_+"/"+e.toString()+"/"+t.getId();return this.http_.delete(r,{headers:{"Content-Type":"application/json"},withCredentials:true})};a.module=angular.module("gmfEditFeature",[]);a.module.service("gmfEditFeature",a);t["a"]=a},function(e,t,r){"use strict";var i=r(1);var n=r(234);var a=r(8);var o=r(18);var s=r(105);var l=r(86);var u=r(52);var c=r(21);var f=function e(t,r,i,n,a){var o=this;this.active;if(this.active===undefined){this.active=false}this.features;this.map;this.showMeasure;this.gettextCatalog_=i;i.getString("Point");i.getString("LineString");i.getString("Polygon");i.getString("Circle");i.getString("Rectangle");i.getString("Text");this.featureHelper_=n;this.ngeoFeatures_=a;this.interactions_=[];this.drawPoint;this.measureLength;this.measureArea;this.measureAzimut;this.drawRectangle;this.drawText;t.$watch(function(){return o.active},function(e){if(e===false){o.interactions_.forEach(function(e){e.setActive(false)})}})};f.$inject=["$scope","$sce","gettextCatalog","ngeoFeatureHelper","ngeoFeatures"];f.$inject=["$scope","$sce","gettextCatalog","ngeoFeatureHelper","ngeoFeatures"];f.prototype.registerInteraction=function(e){this.interactions_.push(e);e.setActive(false);l["a"].interaction(e);this.map.addInteraction(e)};f.prototype.handleActiveChange=function(e){this.active=this.interactions_.some(function(e){return e.getActive()},this)};f.prototype.handleDrawEnd=function(e,t){var r=void 0;if(t.feature){r=t.feature}else{r=t.detail.feature}i["a"].assert(r);var n=r.get("azimut");var s=this.features||this.ngeoFeatures_;var l=new c["a"](r.getGeometry());var u=a["a"];switch(e){case o["a"].CIRCLE:l.set(u.IS_CIRCLE,true);if(n!==undefined){l.set(u.AZIMUT,n)}break;case o["a"].TEXT:l.set(u.IS_TEXT,true);break;case o["a"].RECTANGLE:l.set(u.IS_RECTANGLE,true);break;default:break}var f=this.gettextCatalog_.getString(e);l.set(u.NAME,f+" "+(s.getLength()+1));var h=e!==o["a"].TEXT?"#DB4436":"#000000";l.set(u.COLOR,h);l.set(u.ANGLE,0);l.set(u.OPACITY,.2);l.set(u.SHOW_MEASURE,this.showMeasure?true:false);l.set(u.SHOW_LABEL,false);l.set(u.SIZE,10);l.set(u.STROKE,2);this.featureHelper_.setStyle(l);s.push(l)};f.module=angular.module("ngeoDrawfeatureController",[n["a"].name,s["a"].name,u["a"].module.name]);f.module.controller("ngeoDrawfeatureController",f);t["a"]=f},function(e,t,r){"use strict";var i=r(261);var n=r(327);var a=r(127);var o=r(62);var s=r(19);var l=r(1);var u=r(113);var c=r(40);var f=r(134);var h=r(240);var d=r(78);var p=r(106);var v=r(3);var g=r(2);var m=r(54);var y=r(11);var _=r(132);var b=r(149);var w=r(248);function S(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var C=function(){e.$inject=["$q","$rootScope","$timeout","gmfThemes","gmfTreeManager","ngeoBackgroundLayerMgr","ngeoDataSources","ngeoLayerHelper","ngeoRuleHelper","ngeoWMSTime","gmfWFSAliases"];function e(t,r,i,n,a,o,s,l,u,c,f){S(this,e);this.q_=t;this.rootScope_=r;this.timeout_=i;this.gmfThemes_=n;this.gmfTreeManager_=a;this.ngeoBackgroundLayerMgr_=o;this.ngeoDataSources_=s;this.dataSources_=s.collection;this.ngeoLayerHelper_=l;this.ngeoRuleHelper_=u;this.ngeoWMSTime_=c;this.gmfWFSAliases_=f;this.dataSourcesCache_={};this.dimensions_;this.dimensionsWatcherUnregister=null;this.treeCtrlCache_={};this.treeCtrlsUnregister_=null;g["a"](this.ngeoBackgroundLayerMgr_,"change",this.handleNgeoBackgroundLayerChange_,this);g["a"](this.gmfThemes_,"change",this.handleThemesChange_,this)}e.prototype.setDatasourceMap=function e(t){this.ngeoDataSources_.map=t};e.prototype.setDimensions=function e(t){var r=this;if(this.dimensionsWatcherUnregister){this.dimensionsWatcherUnregister()}this.dimensions_=t;this.dimensionsWatcherUnregister=this.rootScope_.$watch(function(){return r.dimensions_},this.handleDimensionsChange_.bind(this),true);this.handleDimensionsChange_()};e.prototype.handleDimensionsChange_=function e(){var t=[];var r=[];var i=this.dataSources_.getArray();for(var n=i,a=Array.isArray(n),o=0,n=a?n:n[Symbol.iterator]();;){var s;if(a){if(o>=n.length)break;s=n[o++]}else{o=n.next();if(o.done)break;s=o.value}var l=s;if(l.dimensionsFiltersConfig){for(var u in l.dimensionsFiltersConfig){if(l.dimensionsFiltersConfig[u].value===null){var c=this.getDataSourceLayer_(l);if(c==undefined){return}var f=v["c"](c);if(r.indexOf(f)==-1){t.push(c);r.push(f)}}}}}t.forEach(this.updateLayerFilter_.bind(this))};e.prototype.handleThemesChange_=function e(){var t=this;this.clearDataSources_();if(this.treeCtrlsUnregister_){this.treeCtrlsUnregister_()}this.clearTreeCtrlCache_();this.gmfThemes_.getOgcServersObject().then(function(e){var r=t.gmfThemes_.getThemesObject().then(function(r){for(var i=r,n=Array.isArray(i),a=0,i=n?i:i[Symbol.iterator]();;){var o;if(n){if(a>=i.length)break;o=i[a++]}else{a=i.next();if(a.done)break;o=a.value}var s=o;for(var u=s.children,c=Array.isArray(u),f=0,u=c?u:u[Symbol.iterator]();;){var h;if(c){if(f>=u.length)break;h=u[f++]}else{f=u.next();if(f.done)break;h=f.value}var d=h;l["a"].assert(d);t.createDataSource_(d,d,e)}}});var i=t.gmfThemes_.getBackgroundLayersObject().then(function(r){for(var i=r,n=Array.isArray(i),a=0,i=n?i:i[Symbol.iterator]();;){var o;if(n){if(a>=i.length)break;o=i[a++]}else{a=i.next();if(a.done)break;o=a.value}var s=o;t.createDataSource_(null,s,e)}});t.q_.all([r,i]).then(function(){t.treeCtrlsUnregister_=t.rootScope_.$watchCollection(function(){if(t.gmfTreeManager_.rootCtrl){return t.gmfTreeManager_.rootCtrl.children}},t.handleTreeManagerRootChildrenChange_.bind(t))})})};e.prototype.handleTreeManagerRootChildrenChange_=function e(t){var r=this;this.timeout_(function(){if(!t){return}var e=[];var i=function e(t,r){var i=r.node;var n=i.children;if(!n){t.push(r)}};for(var n=0,a=t.length;n<a;n++){t[n].traverseDepthFirst(i.bind(r,e))}for(var o=0,s=e.length;o<s;o++){var l=e[o];var u=r.getTreeCtrlCacheItem_(l);if(!u){r.addTreeCtrlToCache_(l)}}var c=r.treeCtrlCache_;for(var f in r.treeCtrlCache_){var h=c[f];if(!e.includes(h.treeCtrl)){r.removeTreeCtrlCacheItem_(h)}}})};e.prototype.clearDataSources_=function e(){var t=this.dataSources_.getArray();for(var r=t.length-1,i=0;r>=i;r--){if(this.dataSourcesCache_[t[r].id]){this.dataSources_.remove(t[r])}}y["b"](this.dataSourcesCache_)};e.prototype.createDataSource_=function e(t,r,n){var a=r.children;if(a){for(var o=a,u=Array.isArray(o),f=0,o=u?o:o[Symbol.iterator]();;){var h;if(u){if(f>=o.length)break;h=o[f++]}else{f=o.next();if(f.done)break;h=f.value}var d=h;l["a"].assert(d);this.createDataSource_(t,d,n)}return}var p=r;var g=v["c"](p);if(this.dataSourcesCache_[g]){return}var m=p.metadata;var y=p.type;var _=void 0;var b=void 0;var w=void 0;var S=void 0;var C=void 0;var x=void 0;var O=void 0;var T=void 0;if(y===s["a"].NodeType.WMTS){var E=p;C=E.layer;x=E.url;_=m.maxResolution;b=m.minResolution;var M=m.queryLayers||m.wmsLayers;if(M){w=M.split(",").map(function(e){return{maxResolution:_,minResolution:b,name:e,queryable:true}})}if(m.ogcServer&&n[m.ogcServer]){S=n[m.ogcServer]}O=E.imageType}else if(y===s["a"].NodeType.WMS){var j=p;_=j.maxResolutionHint;b=j.minResolutionHint;w=j.childLayers.map(function(e){return{maxResolution:e.maxResolutionHint,minResolution:e.minResolutionHint,name:e.name,queryable:e.queryable}});var A=!t||t.mixed?j.ogcServer:t.ogcServer;l["a"].assert(A);S=n[A];O=S.imageType;if(j.time){T=j.time}else if(t&&t.time){T=t.time}}var P=S?S.type:undefined;var k=S?S.isSingleTile:undefined;var I=S&&S.wfsSupport?S.urlWfs:undefined;var D=S?S.url:undefined;var R=c["a"].WFSOutputFormat.GML3;if(P===c["a"].ServerType.QGISSERVER){R=c["a"].WFSOutputFormat.GML2}var L=!!m.snappingConfig;var $=m.snappingConfig?m.snappingConfig.tolerance:undefined;var N=m.snappingConfig?m.snappingConfig.edge:undefined;var F=m.snappingConfig?m.snappingConfig.vertex:undefined;var G=this.dimensions_;var U=r.dimensions||t.dimensions;var H=r.dimensionsFilters;var Y=void 0;var W=void 0;if(T){var V=this.ngeoWMSTime_.getOptions(T)["values"];if(Array.isArray(V)){Y=V[0];W=V[1]}else{Y=V}}var z=m.copyable;var q=m.identifierAttributeField;var B=p.name;var X=m.timeAttribute;var K=m.isChecked===true;this.dataSourcesCache_[g]=new i["a"]({copyable:z,dimensions:G,dimensionsConfig:U,dimensionsFiltersConfig:H,gmfLayer:p,id:g,identifierAttribute:q,maxResolution:_,minResolution:b,name:B,ogcImageType:O,ogcLayers:w,ogcServerType:P,ogcType:y,snappable:L,snappingTolerance:$,snappingToEdges:N,snappingToVertice:F,timeAttributeName:X,timeLowerValue:Y,timeProperty:T,timeUpperValue:W,visible:K,wfsOutputFormat:R,wfsUrl:I,wmsIsSingleTile:k,wmsUrl:D,wmtsLayer:C,wmtsUrl:x})};e.prototype.addTreeCtrlToCache_=function e(t){var r=v["c"](t.node);var i=this.dataSourcesCache_[r];l["a"].assert(i,"DataSource should be set");t.setDataSource(i);var n=this.rootScope_.$watch(function(){return t.getState()},this.handleTreeCtrlStateChange_.bind(this,t));var o=this.rootScope_.$watch(function(){var e=i.filterRules!==null;var t=i.visible;return e&&t},this.handleDataSourceFilterRulesChange_.bind(this,i));var s=void 0;var u=void 0;var f=void 0;if(i.timeProperty&&i.ogcType===c["a"].Type.WMS){s=this.rootScope_.$watch(function(){return i.timeLowerValue},this.handleDataSourceTimeValueChange_.bind(this,i));if(i.timeProperty.mode==="range"){u=this.rootScope_.$watch(function(){return i.timeUpperValue},this.handleDataSourceTimeValueChange_.bind(this,i))}f=l["a"].assertInstanceof(a["a"].getLayer(t),_["a"])}this.treeCtrlCache_[r]={filterRulesWatcherUnregister:o,stateWatcherUnregister:n,timeLowerValueWatcherUnregister:s,timeUpperValueWatcherUnregister:u,treeCtrl:t,wmsLayer:f};this.dataSources_.push(i);this.gmfWFSAliases_.describe(i)};e.prototype.removeTreeCtrlCacheItem_=function e(t){var r=t.treeCtrl.getDataSource();l["a"].assert(r,"DataSource should be set");this.dataSources_.remove(r);t.treeCtrl.setDataSource(null);t.filterRulesWatcherUnregister();t.stateWatcherUnregister();if(t.timeLowerValueWatcherUnregister){t.timeLowerValueWatcherUnregister()}if(t.timeUpperValueWatcherUnregister){t.timeUpperValueWatcherUnregister()}delete this.treeCtrlCache_[v["c"](t.treeCtrl.node)]};e.prototype.clearTreeCtrlCache_=function e(){for(var t in this.treeCtrlCache_){this.removeTreeCtrlCacheItem_(this.treeCtrlCache_[t])}};e.prototype.handleTreeCtrlStateChange_=function e(t,r){var i=t.getDataSource();l["a"].assert(i,"DataSource should be set");var n=r==="on";i.visible=n;var a=this.getDataSourceLayer_(i);if(a==undefined){return}this.updateLayerFilter_(a)};e.prototype.getTreeCtrlCacheItem_=function e(t){return this.treeCtrlCache_[v["c"](t.node)]||null};e.prototype.getDataSourceLayer_=function e(t){t=t;var r=v["c"](t.gmfLayer);var i=this.treeCtrlCache_[r];if(i==undefined){return}var n=i.treeCtrl;return a["a"].getLayer(n)};e.prototype.updateLayerFilter_=function e(t){var r;l["a"].assert(t instanceof _["a"]||t instanceof m["a"]);var i=t.getSource();if(!(i instanceof b["a"]||i instanceof w["a"])){return}var n=i.getParams();var a=n["LAYERS"];var o=a.split(",");l["a"].assert(o.length>=1);var s="FILTER";var u=[];var c=false;for(var f=o,h=Array.isArray(f),d=0,f=h?f:f[Symbol.iterator]();;){var p;if(h){if(d>=f.length)break;p=f[d++]}else{d=f.next();if(d.done)break;p=d.value}var g=p;var y="()";var S=this.dataSources_.getArray();for(var C=S,x=Array.isArray(C),O=0,C=x?C:C[Symbol.iterator]();;){var T;if(x){if(O>=C.length)break;T=C[O++]}else{O=C.next();if(O.done)break;T=O.value}var E=T;var M=this.getDataSourceLayer_(E);if(M==undefined){continue}if(v["c"](M)==v["c"](t)&&g===E.name){var j=v["c"](E.gmfLayer);var A=this.treeCtrlCache_[j];l["a"].assert(A);var P=A.treeCtrl;var k=P.map.getView().getProjection().getCode();var I=E.visible?this.ngeoRuleHelper_.createFilterString({dataSource:E,projCode:k,incDimensions:true}):null;if(I){y="("+I+")";c=true}}}u.push(y)}i.updateParams((r={},r[s]=c?u.join(""):null,r))};e.prototype.handleDataSourceFilterRulesChange_=function e(t){if(t.filtrable!==true||t.ogcType!==c["a"].Type.WMS){return}var r=this.getDataSourceLayer_(t);if(r===undefined){return}this.updateLayerFilter_(r)};e.prototype.handleDataSourceTimeValueChange_=function e(t){var r=v["c"](t.gmfLayer);var i=this.treeCtrlCache_[r];l["a"].assert(i);var n=l["a"].assert(i.wmsLayer);var a=l["a"].assertInstanceof(n.getSource(),b["a"]);var o=l["a"].assert(t.timeProperty);var s=void 0;var u=t.timeRangeValue;if(u){s=this.ngeoWMSTime_.formatWMSTimeParam(o,u)}var c=a.getParams();var f=c["TIME"];if(f===s){return}this.ngeoLayerHelper_.updateWMSLayerState(n,a.getParams()["LAYERS"],s)};e.prototype.handleNgeoBackgroundLayerChange_=function e(t){var r=t.detail.previous;var i=t.detail.current;var n=this.dataSourcesCache_;if(r){var a=r.get("querySourceIds");if(Array.isArray(a)){for(var o=a,s=Array.isArray(o),l=0,o=s?o:o[Symbol.iterator]();;){var u;if(s){if(l>=o.length)break;u=o[l++]}else{l=o.next();if(l.done)break;u=l.value}var c=u;var f=n[c];if(f){f.visible=false;this.dataSources_.remove(f)}}}}if(i){var h=i.get("querySourceIds");if(Array.isArray(h)){for(var d=h,p=Array.isArray(d),v=0,d=p?d:d[Symbol.iterator]();;){var g;if(p){if(v>=d.length)break;g=d[v++]}else{v=d.next();if(v.done)break;g=v.value}var m=g;var y=n[m];if(y){y.visible=true;this.dataSources_.push(y)}}}}};return e}();C.module=angular.module("gmfDataSourcesManager",[n["a"].module.name,a["a"].module.name,o["a"].module.name,s["a"].module.name,f["a"].module.name,u["a"].module.name,h["a"].module.name,d["a"].module.name,p["a"].module.name]);C.module.service("gmfDataSourcesManager",C);t["a"]=C},function(e,t,r){"use strict";var i=r(15);var n={};n.getDefaultDrawStyleFunction=function(){var e=Object(i["b"])();return function(t,r){return e[t.getGeometry().getType()]}};n.getDefaultModifyStyleFunction=function(){var e=Object(i["b"])();return function(t,r){return e["Point"]}};t["a"]=n},function(e,t,r){"use strict";r.d(t,"f",function(){return f});r.d(t,"a",function(){return h});r.d(t,"d",function(){return d});r.d(t,"e",function(){return p});r.d(t,"c",function(){return v});r.d(t,"b",function(){return g});var i=r(20);var n=r(30);var a=r(63);var o=r(6);var s=r(37);var l=r(26);var u=r(53);var c=r(124);Object(i["a"])("w",["ww",2],"wo","week");Object(i["a"])("W",["WW",2],"Wo","isoWeek");Object(n["a"])("week","w");Object(n["a"])("isoWeek","W");Object(a["a"])("week",5);Object(a["a"])("isoWeek",5);Object(o["a"])("w",o["d"]);Object(o["a"])("ww",o["d"],o["h"]);Object(o["a"])("W",o["d"]);Object(o["a"])("WW",o["d"],o["h"]);Object(s["c"])(["w","ww","W","WW"],function(e,t,r,i){t[i.substr(0,1)]=Object(l["a"])(e)});function f(e){return Object(c["b"])(e,this._week.dow,this._week.doy).week}var h={dow:0,doy:6};function d(){return this._week.dow}function p(){return this._week.doy}function v(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function g(e){var t=Object(c["b"])(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}},function(e,t,r){"use strict";(function(e){var i=r(160);var n=r(231);var a=r(185);var o=r(127);var s=r(1);var l=r(243);var u=r(361);var c=r.n(u);var f=r(613);var h=r.n(f);var d=r(230);var p=r(229);var v=r(66);var g=r(146);var m=r(18);var y=r(233);var _=r(232);var b=r(78);var w=r(236);var S=r(190);var C=r(105);var x=r(86);var O=r(136);var T=r(52);var E=r(50);var M=r(77);var j=r(3);var A=r(9);var P=r(28);var k=r(2);var I=r(5);var D=r(21);var R=r(176);var L=r(338);var $=r(132);var N=r(54);var F=r(47);var G=r(15);var U=r(167);var H=angular.module("GmfEditingFeatureComponent",[i["a"].module.name,n["a"].module.name,a["a"].module.name,d["a"].name,p["a"].name,b["a"].module.name,S["a"].name,C["a"].name,O["a"].module.name,T["a"].module.name,M["a"].module.name]);H.run(["$templateCache",function(e){e.put("gmf/editing/editFeatureComponent",r(520))}]);H.component_=function(){return{controller:"GmfEditfeatureController as efCtrl",scope:{dirty:"=gmfEditfeatureDirty",editableTreeCtrl:"=gmfEditfeatureEditabletreectrl",map:"<gmfEditfeatureMap",state:"=gmfEditfeatureState",tolerance:"<?gmfEditfeatureTolerance",vectorLayer:"<gmfEditfeatureVector"},bindToController:true,templateUrl:"gmf/editing/editFeatureComponent"}};H.directive("gmfEditfeature",H.component_);H.Controller_=function(e,t,r,i,n,a,o,s,l,u,c,f){var h=this;this.dirty;this.editableTreeCtrl;this.map;this.state;this.tolerance;this.vectorLayer;this.element_=e;this.q_=t;this.scope_=r;this.timeout_=i;this.gettextCatalog_=n;this.gmfEditFeature_=a;this.gmfSnapping_=o;this.gmfXSDAttributes_=s;this.ngeoEventHelper_=l;this.ngeoFeatureHelper_=u;this.ngeoLayerHelper_=c;this.ngeoToolActivateMgr_=f;this.editableNode_;this.editableWMSLayer_;this.confirmDeferred_=null;this.unsavedModificationsModalShown=false;this.pending=false;this.active=true;this.createActive=false;this.createToolActivate=new E["a"](this,"createActive");this.mapSelectActive=true;this.mapSelectToolActivate=new E["a"](this,"mapSelectActive");this.feature=null;this.scope_.$watch(function(){return h.feature},this.handleFeatureChange_.bind(this));this.featureId=undefined;this.features;this.interactions_=new P["b"];this.modify_;this.modifyToolActivate;this.menu_=new w["a"]({actions:[{cls:"fa fa-arrows",label:n.getString("Move"),name:"move"},{cls:"fa fa-rotate-right",label:n.getString("Rotate"),name:"rotate"}]});this.translate_;this.rotate_;this.rotateToolActivate;this.translateToolActivate;this.listenerKeys_=[];this.attributes=null;this.geomType;this.showServerError=false;this.serverErrorMessage=null;this.serverErrorType=null};H.Controller_.$inject=["$element","$q","$scope","$timeout","gettextCatalog","gmfEditFeature","gmfSnapping","gmfXSDAttributes","ngeoEventHelper","ngeoFeatureHelper","ngeoLayerHelper","ngeoToolActivateMgr"];H.Controller_.prototype.$onInit=function(){var t=this;var r=this.gettextCatalog_.getCurrentLanguage();e.datetimepicker.setLocale(r);e.datetimepicker.setDateFormatter(new l["a"]);this.dirty=this.dirty===true;this.editableNode_=this.editableTreeCtrl.node;this.features=this.vectorLayer.getSource().getFeaturesCollection();this.tolerance=this.tolerance!==undefined?this.tolerance:10;var i=o["a"].getLayer(this.editableTreeCtrl);s["a"].assert(i instanceof $["a"]||i instanceof N["a"]);this.editableWMSLayer_=i;this.modify_=new L["a"]({deleteCondition:v["a"].deleteCondition,features:this.features,style:this.ngeoFeatureHelper_.getVertexStyle(false)});this.interactions_.push(this.modify_);this.rotate_=new y["a"]({features:this.features,style:new G["c"]({text:new U["a"]({text:"",font:"normal 18px FontAwesome",fill:new F["a"]({color:"#7a7a7a"})})})});this.interactions_.push(this.rotate_);this.translate_=new _["a"]({features:this.features,style:new G["c"]({text:new U["a"]({text:"",font:"normal 18px FontAwesome",fill:new F["a"]({color:"#7a7a7a"})})})});this.interactions_.push(this.translate_);this.initializeInteractions_();this.modifyToolActivate=new E["a"](this.modify_,"active");this.rotateToolActivate=new E["a"](this.rotate_,"active");this.translateToolActivate=new E["a"](this.translate_,"active");this.map.addOverlay(this.menu_);this.scope_.$watch(function(){return t.createActive},function(e,r){if(e){t.gmfSnapping_.ensureSnapInteractionsOnTop()}});this.scope_.$on("$destroy",this.handleDestroy_.bind(this));var n=j["c"](this);this.ngeoEventHelper_.addListenerKey(n,k["a"](this.features,"add",this.handleFeatureAdd_,this));this.scope_.$watch(function(){return t.mapSelectActive},this.handleMapSelectActiveChange_.bind(this));this.scope_.$watch(function(){return t.state},function(e,r){var i=H.State;if(e===i.STOP_EDITING_PENDING){t.confirmCancel().then(function(){t.state=i.STOP_EDITING_EXECUTE})}else if(e===i.DEACTIVATE_PENDING){t.confirmCancel().then(function(){t.state=i.DEACTIVATE_EXECUTE})}});this.scope_.$watch(function(){return t.unsavedModificationsModalShown},function(e,r){if(r&&!e){t.state=H.State.IDLE}});this.gmfXSDAttributes_.getAttributes(this.editableNode_.id).then(this.setAttributes_.bind(this));this.toggle_(true)};H.Controller_.prototype.save=function(){var e=this;s["a"].assert(this.attributes);var t=this.feature.clone();t.setId(this.feature.getId());var r=this.featureId;this.pending=true;var i=new l["a"];for(var n=this.attributes,a=Array.isArray(n),o=0,n=a?n:n[Symbol.iterator]();;){var u;if(a){if(o>=n.length)break;u=n[o++]}else{o=n.next();if(o.done)break;u=o.value}var c=u;if(c.format){if(this.feature.get(c.name)){var f=this.feature.get(c.name);s["a"].assertString(f);var h=i.parseDate(f,c.format);var d="Y-m-d\\TH:i:s";if(c.type==="date"){d="Y-m-d"}else if(c.type==="time"){d="H:i:s"}else if(c.type==="datetime"){h.setMinutes(h.getMinutes()+h.getTimezoneOffset())}t.set(c.name,i.formatDate(h,d))}else{t.set(c.name,null)}}}var p=r?this.gmfEditFeature_.updateFeature(this.editableNode_.id,t):this.gmfEditFeature_.insertFeatures(this.editableNode_.id,[t]);p.then(function(t){e.dirty=false;e.pending=false;e.handleEditFeature_(t);e.gmfSnapping_.refresh()},function(t){e.showServerError=true;e.pending=false;e.serverErrorType="error type : "+t.data["error_type"];e.serverErrorMessage="error message : "+t.data["message"]})};H.Controller_.prototype.cancel=function(){this.dirty=false;this.feature=null;this.features.clear();this.menu_.close();this.unsavedModificationsModalShown=false};H.Controller_.prototype.confirmCancel=function(){var e=this;return this.checkForModifications_().then(function(){e.cancel()})};H.Controller_.prototype.checkForModifications_=function(e){this.confirmDeferred_=this.q_.defer();if(this.feature&&this.dirty){this.unsavedModificationsModalShown=true;if(e){this.scope_.$apply()}}else{this.confirmDeferred_.resolve()}return this.confirmDeferred_.promise};H.Controller_.prototype.continueWithoutSaving=function(){this.cancel();this.confirmDeferred_.resolve()};H.Controller_.prototype.delete=function(){var e=this;var t=this.gettextCatalog_.getString("Do you really want to delete the selected feature?");if(confirm(t)){this.pending=true;this.gmfEditFeature_.deleteFeature(this.editableNode_.id,this.feature).then(function(t){e.dirty=false;e.pending=false;e.ngeoLayerHelper_.refreshWMSLayer(e.editableWMSLayer_);e.cancel()},function(t){e.showServerError=true;e.pending=false;e.serverErrorType="error type : "+t.data["error_type"];e.serverErrorMessage="error message : "+t.data["message"]})}};H.Controller_.prototype.submit=function(){var e=this;this.timeout_(function(){e.element_.find('input[type="submit"]').click()},0)};H.Controller_.prototype.handleEditFeature_=function(e){var t=(new R["a"]).readFeatures(e.data);if(t.length){this.feature.setId(t[0].getId());this.ngeoLayerHelper_.refreshWMSLayer(this.editableWMSLayer_)}if(this.confirmDeferred_){this.confirmDeferred_.resolve()}};H.Controller_.prototype.setAttributes_=function(e){this.attributes=e;for(var t=e,r=Array.isArray(t),i=0,t=r?t:t[Symbol.iterator]();;){var n;if(r){if(i>=t.length)break;n=t[i++]}else{i=t.next();if(i.done)break;n=i.value}var a=n;if(a.type=="date"){a.format="Y-m-d";a.mask="9999-19-39"}else if(a.type=="time"){a.format="H:i";a.mask="29:59"}else if(a.type=="datetime"){a.format="Y-m-d H:i";a.mask="9999-19-39 29:59"}}var o=g["a"].getGeometryAttribute(this.attributes);if(o&&o.geomType){this.geomType=o.geomType}};H.Controller_.prototype.handleFeatureAdd_=function(e){var t=this;this.feature=null;this.timeout_(function(){s["a"].assert(t.attributes);var r=e.element;s["a"].assertInstanceof(r,D["a"]);var i=new l["a"];for(var n=t.attributes,a=Array.isArray(n),o=0,n=a?n:n[Symbol.iterator]();;){var u;if(a){if(o>=n.length)break;u=n[o++]}else{o=n.next();if(o.done)break;u=o.value}var c=u;if(c.format){if(r.get(c.name)){var f=void 0;if(c.type==="datetime"){f=new Date(r.get(c.name));f.setMinutes(f.getMinutes()-f.getTimezoneOffset())}else{var h="";if(c.type==="date"){h="Y-m-d"}else if(c.type==="time"){h="H:i:s"}var d=r.get(c.name);s["a"].assertString(d);f=i.parseDate(d,h)}r.set(c.name,i.formatDate(f,c.format))}else{r.set(c.name,null)}}}t.feature=r;t.createActive=false;if(!r.getId()){t.dirty=true}t.scope_.$apply()},0)};H.Controller_.prototype.toggle_=function(e){var t=this.listenerKeys_;var r=["create-",j["c"](this)].join("-");var i=["other-",j["c"](this)].join("-");var n=this.ngeoToolActivateMgr_;if(e){t.push(k["a"](this.menu_,"actionclick",this.handleMenuActionClick_,this));t.push(k["a"](this.translate_,"translateend",this.handleTranslateEnd_,this));t.push(k["a"](this.rotate_,"rotateend",this.handleRotateEnd_,this));n.registerTool(r,this.createToolActivate,false);n.registerTool(r,this.mapSelectToolActivate,true);n.registerTool(i,this.createToolActivate,false);n.registerTool(i,this.modifyToolActivate,true);n.registerTool(i,this.translateToolActivate,false);n.registerTool(i,this.rotateToolActivate,false)}else{t.forEach(k["e"]);t.length=0;n.unregisterTool(r,this.createToolActivate);n.unregisterTool(r,this.mapSelectToolActivate);n.unregisterTool(i,this.createToolActivate);n.unregisterTool(i,this.modifyToolActivate);n.unregisterTool(i,this.translateToolActivate);n.unregisterTool(i,this.rotateToolActivate);this.createActive=false;this.cancel()}this.modify_.setActive(e);this.mapSelectActive=e;this.editableTreeCtrl.properties["editing"]=e};H.Controller_.prototype.handleMapSelectActiveChange_=function(e){var t=this.map.getViewport();s["a"].assertElement(t);if(e){k["a"](this.map,"click",this.handleMapClick_,this);k["a"](t,"contextmenu",this.handleMapContextMenu_,this)}else{k["c"](this.map,"click",this.handleMapClick_,this);k["c"](t,"contextmenu",this.handleMapContextMenu_,this)}};H.Controller_.prototype.handleMapClick_=function(e){var t=this;var r=e.coordinate;var i=e.pixel;var n=this.map.forEachFeatureAtPixel(i,function(e){var r=false;if(A["f"](t.features.getArray(),e)){r=e}return r},{hitTolerance:5});if(n){return}this.checkForModifications_(true).then(function(){var e=t.map;var i=e.getView();var n=i.getResolution();var a=n*t.tolerance;var o=I["c"]([r[0],r[1],r[0],r[1]],a);t.gmfEditFeature_.getFeaturesInExtent([t.editableNode_.id],o).then(t.handleGetFeatures_.bind(t));t.cancel();t.pending=true})};H.Controller_.prototype.handleMapContextMenu_=function(e){var t=this;var r=this.map.getEventPixel(e);var i=this.map.getCoordinateFromPixel(r);var n=this.map.forEachFeatureAtPixel(r,function(e){var r=false;if(A["f"](t.features.getArray(),e)){r=e}return r},{hitTolerance:7});n=n?n:null;if(n){var a=this.ngeoFeatureHelper_.getType(n);if(a===m["a"].POLYGON||a===m["a"].MULTI_POLYGON||a===m["a"].LINE_STRING||a===m["a"].MULTI_LINE_STRING){this.menu_.open(i)}e.preventDefault();e.stopPropagation()}};H.Controller_.prototype.handleGetFeatures_=function(e){var t=this;this.pending=false;this.timeout_(function(){if(e.length){var r=e[0];t.feature=r;t.features.push(r)}},0)};H.Controller_.prototype.initializeInteractions_=function(){this.interactions_.forEach(function(e){e.setActive(false);x["a"].interaction(e)})};H.Controller_.prototype.registerInteractions_=function(){var e=this;this.interactions_.forEach(function(t){e.map.addInteraction(t)})};H.Controller_.prototype.unregisterInteractions_=function(){var e=this;this.interactions_.forEach(function(t){e.map.removeInteraction(t)})};H.Controller_.prototype.handleFeatureChange_=function(e,t){var r=this;var i=void 0;if(t){k["c"](t,"propertychange",this.handleFeaturePropertyChange_,this);i=t.getGeometry();s["a"].assert(i);k["c"](i,"change",this.handleFeatureGeometryChange_,this);this.unregisterInteractions_()}if(e){this.featureId=e.getId();k["a"](e,"propertychange",this.handleFeaturePropertyChange_,this);i=e.getGeometry();s["a"].assert(i);k["a"](i,"change",this.handleFeatureGeometryChange_,this);this.registerInteractions_();this.gmfSnapping_.ensureSnapInteractionsOnTop();if(this.featureId){this.timeout_(function(){r.dirty=false;r.scope_.$apply()},0)}}else{this.featureId=undefined}};H.Controller_.prototype.handleFeaturePropertyChange_=function(){this.dirty=true};H.Controller_.prototype.handleFeatureGeometryChange_=function(){this.dirty=true;this.scope_.$apply()};H.Controller_.prototype.handleMenuActionClick_=function(e){var t=e.detail.action;switch(t){case"move":this.translate_.setActive(true);this.scope_.$apply();break;case"rotate":this.rotate_.setActive(true);this.scope_.$apply();break;default:break}};H.Controller_.prototype.handleTranslateEnd_=function(e){this.translate_.setActive(false);this.scope_.$apply()};H.Controller_.prototype.handleRotateEnd_=function(e){this.rotate_.setActive(false);this.scope_.$apply()};H.Controller_.prototype.handleDestroy_=function(){this.features.clear();this.handleFeatureChange_(null,this.feature);this.feature=null;var e=j["c"](this);this.ngeoEventHelper_.clearListenerKey(e);this.toggle_(false);this.handleMapSelectActiveChange_(false);this.unregisterInteractions_()};H.controller("GmfEditfeatureController",H.Controller_);H.State={IDLE:"idle",DEACTIVATE_EXECUTE:"deactivate_execute",DEACTIVATE_PENDING:"deactivate_pending",STOP_EDITING_EXECUTE:"stop_editing_execute",STOP_EDITING_PENDING:"stop_editing_pending"};t["a"]=H}).call(this,r(24))},function(e,t,r){"use strict";var i=r(3);var n=r(16);var a=r(21);var o=r(46);var s=r(142);var l=r(44);var u=r(27);var c=r(2);var f=r(56);var h=r(55);var d=r(5);var p=r(36);var v=r(215);var g=r(7);var m=r(51);var y=r(130);var _=r(131);var b=r(141);var w=r(267);var S=r(34);var C=r(49);var x=r(29);var O=r(341);var T=r(89);var E=r(76);var M=r(15);var j={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"};var A={DRAWSTART:"drawstart",DRAWEND:"drawend"};var P=function e(t,r){f["a"].call(this,t);this.feature=r};Object(i["d"])(P,f["a"]);var k=function e(t){x["b"].call(this,{handleDownEvent:R,handleEvent:D,handleUpEvent:L});this.shouldHandle_=false;this.downPx_=null;this.downTimeout_;this.lastDragTime_;this.freehand_=false;this.source_=t.source?t.source:null;this.features_=t.features?t.features:null;this.snapTolerance_=t.snapTolerance?t.snapTolerance:12;this.type_=t.type;this.mode_=F(this.type_);this.stopClick_=!!t.stopClick;this.minPoints_=t.minPoints?t.minPoints:this.mode_===j.POLYGON?3:2;this.maxPoints_=t.maxPoints?t.maxPoints:Infinity;this.finishCondition_=t.finishCondition?t.finishCondition:p["b"];var r=t.geometryFunction;if(!r){if(this.type_===g["a"].CIRCLE){r=function e(t,r){var i=r?r:new v["a"]([NaN,NaN]);var n=Object(u["h"])(t[0],t[1]);i.setCenterAndRadius(t[0],Math.sqrt(n));return i}}else{var i=void 0;var n=this.mode_;if(n===j.POINT){i=S["a"]}else if(n===j.LINE_STRING){i=m["a"]}else if(n===j.POLYGON){i=C["a"]}r=function e(t,r){var a=r;if(a){if(n===j.POLYGON){if(t[0].length){a.setCoordinates([t[0].concat([t[0][0]])])}else{a.setCoordinates([])}}else{a.setCoordinates(t)}}else{a=new i(t)}return a}}}this.geometryFunction_=r;this.dragVertexDelay_=t.dragVertexDelay!==undefined?t.dragVertexDelay:500;this.finishCoordinate_=null;this.sketchFeature_=null;this.sketchPoint_=null;this.sketchCoords_=null;this.sketchLine_=null;this.sketchLineCoords_=null;this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36;this.overlay_=new T["a"]({source:new E["b"]({useSpatialIndex:false,wrapX:t.wrapX?t.wrapX:false}),style:t.style?t.style:I(),updateWhileInteracting:true});this.geometryName_=t.geometryName;this.condition_=t.condition?t.condition:h["f"];this.freehandCondition_;if(t.freehand){this.freehandCondition_=h["c"]}else{this.freehandCondition_=t.freehandCondition?t.freehandCondition:h["i"]}Object(c["a"])(this,Object(l["b"])(O["a"].ACTIVE),this.updateState_,this)};Object(i["d"])(k,x["b"]);function I(){var e=Object(M["b"])();return function(t,r){return e[t.getGeometry().getType()]}}k.prototype.setMap=function(e){x["b"].prototype.setMap.call(this,e);this.updateState_()};function D(e){if(e.originalEvent.type===n["a"].CONTEXTMENU){e.preventDefault()}this.freehand_=this.mode_!==j.POINT&&this.freehandCondition_(e);var t=e.type===o["a"].POINTERMOVE;var r=true;if(this.lastDragTime_&&e.type===o["a"].POINTERDRAG){var i=Date.now();if(i-this.lastDragTime_>=this.dragVertexDelay_){this.downPx_=e.pixel;this.shouldHandle_=!this.freehand_;t=true}else{this.lastDragTime_=undefined}if(this.shouldHandle_&&this.downTimeout_){clearTimeout(this.downTimeout_);this.downTimeout_=undefined}}if(this.freehand_&&e.type===o["a"].POINTERDRAG&&this.sketchFeature_!==null){this.addToDrawing_(e);r=false}else if(this.freehand_&&e.type===o["a"].POINTERDOWN){r=false}else if(t){r=e.type===o["a"].POINTERMOVE;if(r&&this.freehand_){r=this.handlePointerMove_(e)}else if(e.pointerEvent.pointerType==w["b"]||e.type===o["a"].POINTERDRAG&&!this.downTimeout_){this.handlePointerMove_(e)}}else if(e.type===o["a"].DBLCLICK){r=false}return x["c"].call(this,e)&&r}function R(e){this.shouldHandle_=!this.freehand_;if(this.freehand_){this.downPx_=e.pixel;if(!this.finishCoordinate_){this.startDrawing_(e)}return true}else if(this.condition_(e)){this.lastDragTime_=Date.now();this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new s["a"](o["a"].POINTERMOVE,e.map,e.pointerEvent,e.frameState))}.bind(this),this.dragVertexDelay_);this.downPx_=e.pixel;return true}else{return false}}function L(e){var t=true;if(this.downTimeout_){clearTimeout(this.downTimeout_);this.downTimeout_=undefined}this.handlePointerMove_(e);var r=this.mode_===j.CIRCLE;if(this.shouldHandle_){if(!this.finishCoordinate_){this.startDrawing_(e);if(this.mode_===j.POINT){this.finishDrawing()}}else if(this.freehand_||r){this.finishDrawing()}else if(this.atFinish_(e)){if(this.finishCondition_(e)){this.finishDrawing()}}else{this.addToDrawing_(e)}t=false}else if(this.freehand_){this.finishCoordinate_=null;this.abortDrawing_()}if(!t&&this.stopClick_){e.stopPropagation()}return t}k.prototype.handlePointerMove_=function(e){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var t=this.downPx_;var r=e.pixel;var i=t[0]-r[0];var n=t[1]-r[1];var a=i*i+n*n;this.shouldHandle_=this.freehand_?a>this.squaredClickTolerance_:a<=this.squaredClickTolerance_;if(!this.shouldHandle_){return true}}if(this.finishCoordinate_){this.modifyDrawing_(e)}else{this.createOrUpdateSketchPoint_(e)}return true};k.prototype.atFinish_=function(e){var t=false;if(this.sketchFeature_){var r=false;var i=[this.finishCoordinate_];if(this.mode_===j.LINE_STRING){r=this.sketchCoords_.length>this.minPoints_}else if(this.mode_===j.POLYGON){r=this.sketchCoords_[0].length>this.minPoints_;i=[this.sketchCoords_[0][0],this.sketchCoords_[0][this.sketchCoords_[0].length-2]]}if(r){var n=e.map;for(var a=0,o=i.length;a<o;a++){var s=i[a];var l=n.getPixelFromCoordinate(s);var u=e.pixel;var c=u[0]-l[0];var f=u[1]-l[1];var h=this.freehand_?1:this.snapTolerance_;t=Math.sqrt(c*c+f*f)<=h;if(t){this.finishCoordinate_=s;break}}}}return t};k.prototype.createOrUpdateSketchPoint_=function(e){var t=e.coordinate.slice();if(!this.sketchPoint_){this.sketchPoint_=new a["a"](new S["a"](t));this.updateSketchFeatures_()}else{var r=this.sketchPoint_.getGeometry();r.setCoordinates(t)}};k.prototype.startDrawing_=function(e){var t=e.coordinate;this.finishCoordinate_=t;if(this.mode_===j.POINT){this.sketchCoords_=t.slice()}else if(this.mode_===j.POLYGON){this.sketchCoords_=[[t.slice(),t.slice()]];this.sketchLineCoords_=this.sketchCoords_[0]}else{this.sketchCoords_=[t.slice(),t.slice()]}if(this.sketchLineCoords_){this.sketchLine_=new a["a"](new m["a"](this.sketchLineCoords_))}var r=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new a["a"];if(this.geometryName_){this.sketchFeature_.setGeometryName(this.geometryName_)}this.sketchFeature_.setGeometry(r);this.updateSketchFeatures_();this.dispatchEvent(new P(A.DRAWSTART,this.sketchFeature_))};k.prototype.modifyDrawing_=function(e){var t=e.coordinate;var r=this.sketchFeature_.getGeometry();var i=void 0,n=void 0;if(this.mode_===j.POINT){n=this.sketchCoords_}else if(this.mode_===j.POLYGON){i=this.sketchCoords_[0];n=i[i.length-1];if(this.atFinish_(e)){t=this.finishCoordinate_.slice()}}else{i=this.sketchCoords_;n=i[i.length-1]}n[0]=t[0];n[1]=t[1];this.geometryFunction_(this.sketchCoords_,r);if(this.sketchPoint_){var o=this.sketchPoint_.getGeometry();o.setCoordinates(t)}var s=void 0;if(r instanceof C["a"]&&this.mode_!==j.POLYGON){if(!this.sketchLine_){this.sketchLine_=new a["a"](new m["a"](null))}var l=r.getLinearRing(0);s=this.sketchLine_.getGeometry();s.setFlatCoordinates(l.getLayout(),l.getFlatCoordinates())}else if(this.sketchLineCoords_){s=this.sketchLine_.getGeometry();s.setCoordinates(this.sketchLineCoords_)}this.updateSketchFeatures_()};k.prototype.addToDrawing_=function(e){var t=e.coordinate;var r=this.sketchFeature_.getGeometry();var i=void 0;var n=void 0;if(this.mode_===j.LINE_STRING){this.finishCoordinate_=t.slice();n=this.sketchCoords_;if(n.length>=this.maxPoints_){if(this.freehand_){n.pop()}else{i=true}}n.push(t.slice());this.geometryFunction_(n,r)}else if(this.mode_===j.POLYGON){n=this.sketchCoords_[0];if(n.length>=this.maxPoints_){if(this.freehand_){n.pop()}else{i=true}}n.push(t.slice());if(i){this.finishCoordinate_=n[0]}this.geometryFunction_(this.sketchCoords_,r)}this.updateSketchFeatures_();if(i){this.finishDrawing()}};k.prototype.removeLastPoint=function(){if(!this.sketchFeature_){return}var e=this.sketchFeature_.getGeometry();var t=void 0,r=void 0;if(this.mode_===j.LINE_STRING){t=this.sketchCoords_;t.splice(-2,1);this.geometryFunction_(t,e);if(t.length>=2){this.finishCoordinate_=t[t.length-2].slice()}}else if(this.mode_===j.POLYGON){t=this.sketchCoords_[0];t.splice(-2,1);r=this.sketchLine_.getGeometry();r.setCoordinates(t);this.geometryFunction_(this.sketchCoords_,e)}if(t.length===0){this.finishCoordinate_=null}this.updateSketchFeatures_()};k.prototype.finishDrawing=function(){var e=this.abortDrawing_();if(!e){return}var t=this.sketchCoords_;var r=e.getGeometry();if(this.mode_===j.LINE_STRING){t.pop();this.geometryFunction_(t,r)}else if(this.mode_===j.POLYGON){t[0].pop();this.geometryFunction_(t,r);t=r.getCoordinates()}if(this.type_===g["a"].MULTI_POINT){e.setGeometry(new _["a"]([t]))}else if(this.type_===g["a"].MULTI_LINE_STRING){e.setGeometry(new y["a"]([t]))}else if(this.type_===g["a"].MULTI_POLYGON){e.setGeometry(new b["a"]([t]))}this.dispatchEvent(new P(A.DRAWEND,e));if(this.features_){this.features_.push(e)}if(this.source_){this.source_.addFeature(e)}};k.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var e=this.sketchFeature_;if(e){this.sketchFeature_=null;this.sketchPoint_=null;this.sketchLine_=null;this.overlay_.getSource().clear(true)}return e};k.prototype.extend=function(e){var t=e.getGeometry();var r=t;this.sketchFeature_=e;this.sketchCoords_=r.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice();this.sketchCoords_.push(i.slice());this.updateSketchFeatures_();this.dispatchEvent(new P(A.DRAWSTART,this.sketchFeature_))};k.prototype.shouldStopEvent=p["a"];k.prototype.updateSketchFeatures_=function(){var e=[];if(this.sketchFeature_){e.push(this.sketchFeature_)}if(this.sketchLine_){e.push(this.sketchLine_)}if(this.sketchPoint_){e.push(this.sketchPoint_)}var t=this.overlay_.getSource();t.clear(true);t.addFeatures(e)};k.prototype.updateState_=function(){var e=this.getMap();var t=this.getActive();if(!e||!t){this.abortDrawing_()}this.overlay_.setMap(t?e:null)};function $(e,t){return function(r,i){var n=r[0];var a=r[1];var o=Math.sqrt(Object(u["h"])(n,a));var s=i?i:Object(C["b"])(new v["a"](n),e);var l=t?t:Math.atan((a[1]-n[1])/(a[0]-n[0]));Object(C["d"])(s,n,o,l);return s}}function N(){return function(e,t){var r=Object(d["b"])(e);var i=t||new C["a"](null);i.setCoordinates([[Object(d["v"])(r),Object(d["w"])(r),Object(d["D"])(r),Object(d["C"])(r),Object(d["v"])(r)]]);return i}}function F(e){var t=void 0;if(e===g["a"].POINT||e===g["a"].MULTI_POINT){t=j.POINT}else if(e===g["a"].LINE_STRING||e===g["a"].MULTI_LINE_STRING){t=j.LINE_STRING}else if(e===g["a"].POLYGON||e===g["a"].MULTI_POLYGON){t=j.POLYGON}else if(e===g["a"].CIRCLE){t=j.CIRCLE}return t}t["a"]=k},function(e,t,r){"use strict";var i=r(47);var n=r(386);var a="#333";var o=function e(t){var r=t||{};this.font_=r.font;this.rotation_=r.rotation;this.rotateWithView_=r.rotateWithView;this.scale_=r.scale;this.text_=r.text;this.textAlign_=r.textAlign;this.textBaseline_=r.textBaseline;this.fill_=r.fill!==undefined?r.fill:new i["a"]({color:a});this.maxAngle_=r.maxAngle!==undefined?r.maxAngle:Math.PI/4;this.placement_=r.placement!==undefined?r.placement:n["a"].POINT;this.overflow_=!!r.overflow;this.stroke_=r.stroke!==undefined?r.stroke:null;this.offsetX_=r.offsetX!==undefined?r.offsetX:0;this.offsetY_=r.offsetY!==undefined?r.offsetY:0;this.backgroundFill_=r.backgroundFill?r.backgroundFill:null;this.backgroundStroke_=r.backgroundStroke?r.backgroundStroke:null;this.padding_=r.padding===undefined?null:r.padding};o.prototype.clone=function(){return new o({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():undefined,stroke:this.getStroke()?this.getStroke().clone():undefined,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():undefined,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():undefined})};o.prototype.getOverflow=function(){return this.overflow_};o.prototype.getFont=function(){return this.font_};o.prototype.getMaxAngle=function(){return this.maxAngle_};o.prototype.getPlacement=function(){return this.placement_};o.prototype.getOffsetX=function(){return this.offsetX_};o.prototype.getOffsetY=function(){return this.offsetY_};o.prototype.getFill=function(){return this.fill_};o.prototype.getRotateWithView=function(){return this.rotateWithView_};o.prototype.getRotation=function(){return this.rotation_};o.prototype.getScale=function(){return this.scale_};o.prototype.getStroke=function(){return this.stroke_};o.prototype.getText=function(){return this.text_};o.prototype.getTextAlign=function(){return this.textAlign_};o.prototype.getTextBaseline=function(){return this.textBaseline_};o.prototype.getBackgroundFill=function(){return this.backgroundFill_};o.prototype.getBackgroundStroke=function(){return this.backgroundStroke_};o.prototype.getPadding=function(){return this.padding_};o.prototype.setOverflow=function(e){this.overflow_=e};o.prototype.setFont=function(e){this.font_=e};o.prototype.setMaxAngle=function(e){this.maxAngle_=e};o.prototype.setOffsetX=function(e){this.offsetX_=e};o.prototype.setOffsetY=function(e){this.offsetY_=e};o.prototype.setPlacement=function(e){this.placement_=e};o.prototype.setFill=function(e){this.fill_=e};o.prototype.setRotation=function(e){this.rotation_=e};o.prototype.setScale=function(e){this.scale_=e};o.prototype.setStroke=function(e){this.stroke_=e};o.prototype.setText=function(e){this.text_=e};o.prototype.setTextAlign=function(e){this.textAlign_=e};o.prototype.setTextBaseline=function(e){this.textBaseline_=e};o.prototype.setBackgroundFill=function(e){this.backgroundFill_=e};o.prototype.setBackgroundStroke=function(e){this.backgroundStroke_=e};o.prototype.setPadding=function(e){this.padding_=e};t["a"]=o},function(e,t,r){"use strict";var i=r(3);var n=r(9);var a=r(94);var o=r(201);var s=r(0);var l=function e(){this.xmlSerializer_=new XMLSerializer;a["a"].call(this)};Object(i["d"])(l,a["a"]);l.prototype.getType=function(){return o["a"].XML};l.prototype.readFeature=function(e,t){if(Object(s["g"])(e)){return this.readFeatureFromDocument(e,t)}else if(Object(s["h"])(e)){return this.readFeatureFromNode(e,t)}else if(typeof e==="string"){var r=Object(s["s"])(e);return this.readFeatureFromDocument(r,t)}else{return null}};l.prototype.readFeatureFromDocument=function(e,t){var r=this.readFeaturesFromDocument(e,t);if(r.length>0){return r[0]}else{return null}};l.prototype.readFeatureFromNode=function(e,t){return null};l.prototype.readFeatures=function(e,t){if(Object(s["g"])(e)){return this.readFeaturesFromDocument(e,t)}else if(Object(s["h"])(e)){return this.readFeaturesFromNode(e,t)}else if(typeof e==="string"){var r=Object(s["s"])(e);return this.readFeaturesFromDocument(r,t)}else{return[]}};l.prototype.readFeaturesFromDocument=function(e,t){var r=[];for(var i=e.firstChild;i;i=i.nextSibling){if(i.nodeType==Node.ELEMENT_NODE){Object(n["c"])(r,this.readFeaturesFromNode(i,t))}}return r};l.prototype.readFeaturesFromNode=function(e,t){};l.prototype.readGeometry=function(e,t){if(Object(s["g"])(e)){return this.readGeometryFromDocument(e,t)}else if(Object(s["h"])(e)){return this.readGeometryFromNode(e,t)}else if(typeof e==="string"){var r=Object(s["s"])(e);return this.readGeometryFromDocument(r,t)}else{return null}};l.prototype.readGeometryFromDocument=function(e,t){return null};l.prototype.readGeometryFromNode=function(e,t){return null};l.prototype.readProjection=function(e){if(Object(s["g"])(e)){return this.readProjectionFromDocument(e)}else if(Object(s["h"])(e)){return this.readProjectionFromNode(e)}else if(typeof e==="string"){var t=Object(s["s"])(e);return this.readProjectionFromDocument(t)}else{return null}};l.prototype.readProjectionFromDocument=function(e){return this.defaultDataProjection};l.prototype.readProjectionFromNode=function(e){return this.defaultDataProjection};l.prototype.writeFeature=function(e,t){var r=this.writeFeatureNode(e,t);return this.xmlSerializer_.serializeToString(r)};l.prototype.writeFeatureNode=function(e,t){return null};l.prototype.writeFeatures=function(e,t){var r=this.writeFeaturesNode(e,t);return this.xmlSerializer_.serializeToString(r)};l.prototype.writeFeaturesNode=function(e,t){return null};l.prototype.writeGeometry=function(e,t){var r=this.writeGeometryNode(e,t);return this.xmlSerializer_.serializeToString(r)};l.prototype.writeGeometryNode=function(e,t){return null};t["a"]=l},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var i=r(116);function n(e){if(a(e)){return e}else{return Object(i["d"])(e)}}function a(e){return typeof e==="string"||e instanceof CanvasPattern||e instanceof CanvasGradient}},function(e,t,r){"use strict";r.d(t,"e",function(){return a});r.d(t,"a",function(){return o});r.d(t,"f",function(){return s});r.d(t,"d",function(){return l});r.d(t,"b",function(){return u});r.d(t,"c",function(){return c});var i=r(22);function n(e,t,r,n,a,o,s){var l=e[t];var u=e[t+1];var c=e[r]-l;var f=e[r+1]-u;var h=void 0;if(c===0&&f===0){h=t}else{var d=((a-l)*c+(o-u)*f)/(c*c+f*f);if(d>1){h=r}else if(d>0){for(var p=0;p<n;++p){s[p]=Object(i["c"])(e[t+p],e[r+p],d)}s.length=n;return}else{h=t}}for(var v=0;v<n;++v){s[v]=e[h+v]}s.length=n}function a(e,t,r,n,a){var o=e[t];var s=e[t+1];for(t+=n;t<r;t+=n){var l=e[t];var u=e[t+1];var c=Object(i["f"])(o,s,l,u);if(c>a){a=c}o=l;s=u}return a}function o(e,t,r,i,n){for(var o=0,s=r.length;o<s;++o){var l=r[o];n=a(e,t,l,i,n);t=l}return n}function s(e,t,r,i,n){for(var a=0,s=r.length;a<s;++a){var l=r[a];n=o(e,t,l,i,n);t=l[l.length-1]}return n}function l(e,t,r,a,o,s,l,u,c,f,h){if(t==r){return f}var d=void 0,p=void 0;if(o===0){p=Object(i["f"])(l,u,e[t],e[t+1]);if(p<f){for(d=0;d<a;++d){c[d]=e[t+d]}c.length=a;return p}else{return f}}var v=h?h:[NaN,NaN];var g=t+a;while(g<r){n(e,g-a,g,a,l,u,v);p=Object(i["f"])(l,u,v[0],v[1]);if(p<f){f=p;for(d=0;d<a;++d){c[d]=v[d]}c.length=a;g+=a}else{g+=a*Math.max((Math.sqrt(p)-Math.sqrt(f))/o|0,1)}}if(s){n(e,r-a,t,a,l,u,v);p=Object(i["f"])(l,u,v[0],v[1]);if(p<f){f=p;for(d=0;d<a;++d){c[d]=v[d]}c.length=a}}return f}function u(e,t,r,i,n,a,o,s,u,c,f){var h=f?f:[NaN,NaN];for(var d=0,p=r.length;d<p;++d){var v=r[d];c=l(e,t,v,i,n,a,o,s,u,c,h);t=v}return c}function c(e,t,r,i,n,a,o,s,l,c,f){var h=f?f:[NaN,NaN];for(var d=0,p=r.length;d<p;++d){var v=r[d];c=u(e,t,v,i,n,a,o,s,l,c,h);t=v[v.length-1]}return c}},function(e,t,r){"use strict";r.d(t,"c",function(){return i});r.d(t,"a",function(){return n});r.d(t,"b",function(){return a});r.d(t,"d",function(){return o});function i(e,t,r,i,n,a){var o=a?a:[];var s=0;for(var l=t;l<r;l+=i){var u=e[l];var c=e[l+1];o[s++]=n[0]*u+n[2]*c+n[4];o[s++]=n[1]*u+n[3]*c+n[5]}if(a&&o.length!=s){o.length=s}return o}function n(e,t,r,i,n,a,o){var s=o?o:[];var l=Math.cos(n);var u=Math.sin(n);var c=a[0];var f=a[1];var h=0;for(var d=t;d<r;d+=i){var p=e[d]-c;var v=e[d+1]-f;s[h++]=c+p*l-v*u;s[h++]=f+p*u+v*l;for(var g=d+2;g<d+i;++g){s[h++]=e[g]}}if(o&&s.length!=h){s.length=h}return s}function a(e,t,r,i,n,a,o,s){var l=s?s:[];var u=o[0];var c=o[1];var f=0;for(var h=t;h<r;h+=i){var d=e[h]-u;var p=e[h+1]-c;l[f++]=u+n*d;l[f++]=c+a*p;for(var v=h+2;v<h+i;++v){l[f++]=e[v]}}if(s&&l.length!=f){l.length=f}return l}function o(e,t,r,i,n,a,o){var s=o?o:[];var l=0;for(var u=t;u<r;u+=i){s[l++]=e[u]+n;s[l++]=e[u+1]+a;for(var c=u+2;c<u+i;++c){s[l++]=e[c]}}if(o&&s.length!=l){s.length=l}return s}},function(e,t,r){"use strict";r.d(t,"a",function(){return i});function i(e,t){var r=[];Object.keys(t).forEach(function(e){if(t[e]!==null&&t[e]!==undefined){r.push(e+"="+encodeURIComponent(t[e]))}});var i=r.join("&");e=e.replace(/[?&]$/,"");e=e.indexOf("?")===-1?e+"?":e+"&";return e+i}},function(e,t,r){"use strict";var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=function(){function e(t){n(this,e);this.inRange_=t.inRange!==false;this.visible_=t.visible===true;this.attributes=t.attributes||null;this.id_=t.id;this.identifierAttribute_=t.identifierAttribute;this.maxResolution_=t.maxResolution;this.minResolution_=t.minResolution;this.name_=t.name}e.prototype.getAttributes=function e(){return this.attributes};e.prototype.setAttributes=function e(t){this.attributes=t};i(e,[{key:"inRange",get:function e(){return this.inRange_},set:function e(t){this.inRange_=t}},{key:"visible",get:function e(){return this.visible_},set:function e(t){this.visible_=t}},{key:"id",get:function e(){return this.id_}},{key:"identifierAttribute",get:function e(){return this.identifierAttribute_}},{key:"maxResolution",get:function e(){return this.maxResolution_}},{key:"minResolution",get:function e(){return this.minResolution_}},{key:"name",get:function e(){return this.name_}},{key:"queryable",get:function e(){return false}},{key:"supportsDynamicInRange",get:function e(){return this.maxResolution!==null||this.minResolution!==null}}]);return e}();t["a"]=a},function(e,t,r){(function(e,r){true?r(t):undefined})(this,function(e){"use strict";function t(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,i=e.slice(0,r);return[i.length>1?i[0]+i.slice(2):i,+e.slice(r+1)]}function r(e){return e=t(Math.abs(e)),e?e[1]:NaN}function i(e,t){return function(r,i){var n=r.length,a=[],o=0,s=e[0],l=0;while(n>0&&s>0){if(l+s+1>i)s=Math.max(1,i-l);a.push(r.substring(n-=s,n+s));if((l+=s+1)>i)break;s=e[o=(o+1)%e.length]}return a.reverse().join(t)}}function n(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}var a=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function o(e){return new s(e)}o.prototype=s.prototype;function s(e){if(!(t=a.exec(e)))throw new Error("invalid format: "+e);var t;this.fill=t[1]||" ";this.align=t[2]||">";this.sign=t[3]||"-";this.symbol=t[4]||"";this.zero=!!t[5];this.width=t[6]&&+t[6];this.comma=!!t[7];this.precision=t[8]&&+t[8].slice(1);this.trim=!!t[9];this.type=t[10]||""}s.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width==null?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision==null?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function l(e){e:for(var t=e.length,r=1,i=-1,n;r<t;++r){switch(e[r]){case".":i=n=r;break;case"0":if(i===0)i=r;n=r;break;default:if(i>0){if(!+e[r])break e;i=0}break}}return i>0?e.slice(0,i)+e.slice(n+1):e}var u;function c(e,r){var i=t(e,r);if(!i)return e+"";var n=i[0],a=i[1],o=a-(u=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,s=n.length;return o===s?n:o>s?n+new Array(o-s+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+t(e,Math.max(0,r+o-1))[0]}function f(e,r){var i=t(e,r);if(!i)return e+"";var n=i[0],a=i[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}var h={"%":function(e,t){return(e*100).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return f(e*100,t)},r:f,s:c,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function d(e){return e}var p=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function v(e){var t=e.grouping&&e.thousands?i(e.grouping,e.thousands):d,a=e.currency,s=e.decimal,c=e.numerals?n(e.numerals):d,f=e.percent||"%";function v(e){e=o(e);var r=e.fill,i=e.align,n=e.sign,d=e.symbol,v=e.zero,g=e.width,m=e.comma,y=e.precision,_=e.trim,b=e.type;if(b==="n")m=true,b="g";else if(!h[b])y==null&&(y=12),_=true,b="g";if(v||r==="0"&&i==="=")v=true,r="0",i="=";var w=d==="$"?a[0]:d==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",S=d==="$"?a[1]:/[%p]/.test(b)?f:"";var C=h[b],x=/[defgprs%]/.test(b);y=y==null?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function O(e){var a=w,o=S,f,h,d;if(b==="c"){o=C(e)+o;e=""}else{e=+e;var O=e<0;e=C(Math.abs(e),y);if(_)e=l(e);if(O&&+e===0)O=false;a=(O?n==="("?n:"-":n==="-"||n==="("?"":n)+a;o=(b==="s"?p[8+u/3]:"")+o+(O&&n==="("?")":"");if(x){f=-1,h=e.length;while(++f<h){if(d=e.charCodeAt(f),48>d||d>57){o=(d===46?s+e.slice(f+1):e.slice(f))+o;e=e.slice(0,f);break}}}}if(m&&!v)e=t(e,Infinity);var T=a.length+e.length+o.length,E=T<g?new Array(g-T+1).join(r):"";if(m&&v)e=t(E+e,E.length?g-o.length:Infinity),E="";switch(i){case"<":e=a+e+o+E;break;case"=":e=a+E+e+o;break;case"^":e=E.slice(0,T=E.length>>1)+a+e+o+E.slice(T);break;default:e=E+a+e+o;break}return c(e)}O.toString=function(){return e+""};return O}function g(e,t){var i=v((e=o(e),e.type="f",e)),n=Math.max(-8,Math.min(8,Math.floor(r(t)/3)))*3,a=Math.pow(10,-n),s=p[8+n/3];return function(e){return i(a*e)+s}}return{format:v,formatPrefix:g}}var g;m({decimal:".",thousands:",",grouping:[3],currency:["$",""]});function m(t){g=v(t);e.format=g.format;e.formatPrefix=g.formatPrefix;return g}function y(e){return Math.max(0,-r(Math.abs(e)))}function _(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(r(t)/3)))*3-r(Math.abs(e)))}function b(e,t){e=Math.abs(e),t=Math.abs(t)-e;return Math.max(0,r(t)-r(e))+1}e.formatDefaultLocale=m;e.formatLocale=v;e.formatSpecifier=o;e.precisionFixed=y;e.precisionPrefix=_;e.precisionRound=b;Object.defineProperty(e,"__esModule",{value:true})})},function(e,t,r){"use strict";var i=r(31);var n=r(41);var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function l(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var u=function(e){l(t,e);function t(r){o(this,t);r.operator=n["a"].OperatorType.EQUAL_TO;r.type=i["a"].SELECT;var a=s(this,e.call(this,r));a.choices_=r.choices;return a}a(t,[{key:"choices",get:function e(){return this.choices_}},{key:"selectedChoices",get:function e(){var t=void 0;if(this.expression){var r=String(this.expression);t=r.split(",")}else{t=[]}return t}}]);return t}(n["a"]);t["a"]=u},function(e,t,r){"use strict";var i=r(3);var n=r(39);var a=r(21);var o=r(94);var s=r(201);var l=function e(){o["a"].call(this)};Object(i["d"])(l,o["a"]);function u(e){if(typeof e==="string"){var t=JSON.parse(e);return t?t:null}else if(e!==null){return e}else{return null}}l.prototype.getType=function(){return s["a"].JSON};l.prototype.readFeature=function(e,t){return this.readFeatureFromObject(u(e),this.getReadOptions(e,t))};l.prototype.readFeatures=function(e,t){return this.readFeaturesFromObject(u(e),this.getReadOptions(e,t))};l.prototype.readFeatureFromObject=function(e,t){};l.prototype.readFeaturesFromObject=function(e,t){};l.prototype.readGeometry=function(e,t){return this.readGeometryFromObject(u(e),this.getReadOptions(e,t))};l.prototype.readGeometryFromObject=function(e,t){};l.prototype.readProjection=function(e){return this.readProjectionFromObject(u(e))};l.prototype.readProjectionFromObject=function(e){};l.prototype.writeFeature=function(e,t){return JSON.stringify(this.writeFeatureObject(e,t))};l.prototype.writeFeatureObject=function(e,t){};l.prototype.writeFeatures=function(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))};l.prototype.writeFeaturesObject=function(e,t){};l.prototype.writeGeometry=function(e,t){return JSON.stringify(this.writeGeometryObject(e,t))};l.prototype.writeGeometryObject=function(e,t){};var c=l;var f=r(217);var h=r(51);var d=r(130);var p=r(131);var v=r(141);var g=r(34);var m=r(49);var y=r(11);var _=r(12);var b=function e(t){var r=t?t:{};c.call(this);this.defaultDataProjection=Object(_["g"])(r.defaultDataProjection?r.defaultDataProjection:"EPSG:4326");if(r.featureProjection){this.defaultFeatureProjection=Object(_["g"])(r.featureProjection)}this.geometryName_=r.geometryName;this.extractGeometryName_=r.extractGeometryName};Object(i["d"])(b,c);var w={Point:O,LineString:T,Polygon:A,MultiPoint:M,MultiLineString:E,MultiPolygon:j,GeometryCollection:x};var S={Point:N,LineString:D,Polygon:F,MultiPoint:L,MultiLineString:R,MultiPolygon:$,GeometryCollection:I,Circle:k};function C(e,t){if(!e){return null}var r=w[e.type];return Object(o["b"])(r(e),false,t)}function x(e,t){var r=e.geometries.map(function(e){return C(e,t)});return new f["a"](r)}function O(e){return new g["a"](e.coordinates)}function T(e){return new h["a"](e.coordinates)}function E(e){return new d["a"](e.coordinates)}function M(e){return new p["a"](e.coordinates)}function j(e){return new v["a"](e.coordinates)}function A(e){return new m["a"](e.coordinates)}function P(e,t){var r=S[e.getType()];return r(Object(o["b"])(e,true,t),t)}function k(e){return{type:"GeometryCollection",geometries:[]}}function I(e,t){var r=e.getGeometriesArray().map(function(e){var r=Object(y["a"])({},t);delete r.featureProjection;return P(e,r)});return{type:"GeometryCollection",geometries:r}}function D(e,t){return{type:"LineString",coordinates:e.getCoordinates()}}function R(e,t){return{type:"MultiLineString",coordinates:e.getCoordinates()}}function L(e,t){return{type:"MultiPoint",coordinates:e.getCoordinates()}}function $(e,t){var r=void 0;if(t){r=t.rightHanded}return{type:"MultiPolygon",coordinates:e.getCoordinates(r)}}function N(e,t){return{type:"Point",coordinates:e.getCoordinates()}}function F(e,t){var r=void 0;if(t){r=t.rightHanded}return{type:"Polygon",coordinates:e.getCoordinates(r)}}b.prototype.readFeature;b.prototype.readFeatures;b.prototype.readFeatureFromObject=function(e,t){var r=null;if(e.type==="Feature"){r=e}else{r={type:"Feature",geometry:e}}var i=C(r.geometry,t);var n=new a["a"];if(this.geometryName_){n.setGeometryName(this.geometryName_)}else if(this.extractGeometryName_&&r.geometry_name!==undefined){n.setGeometryName(r.geometry_name)}n.setGeometry(i);if(r.id!==undefined){n.setId(r.id)}if(r.properties){n.setProperties(r.properties)}return n};b.prototype.readFeaturesFromObject=function(e,t){var r=e;var i=null;if(r.type==="FeatureCollection"){var n=e;i=[];var a=n.features;for(var o=0,s=a.length;o<s;++o){i.push(this.readFeatureFromObject(a[o],t))}}else{i=[this.readFeatureFromObject(e,t)]}return i};b.prototype.readGeometry;b.prototype.readGeometryFromObject=function(e,t){return C(e,t)};b.prototype.readProjection;b.prototype.readProjectionFromObject=function(e){var t=e;var r=t.crs;var i=void 0;if(r){if(r.type=="name"){i=Object(_["g"])(r.properties.name)}else{Object(n["a"])(false,36)}}else{i=this.defaultDataProjection}return i};b.prototype.writeFeature;b.prototype.writeFeatureObject=function(e,t){t=this.adaptOptions(t);var r={type:"Feature"};var i=e.getId();if(i!==undefined){r.id=i}var n=e.getGeometry();if(n){r.geometry=P(n,t)}else{r.geometry=null}var a=e.getProperties();delete a[e.getGeometryName()];if(!Object(y["d"])(a)){r.properties=a}else{r.properties=null}return r};b.prototype.writeFeatures;b.prototype.writeFeaturesObject=function(e,t){t=this.adaptOptions(t);var r=[];for(var i=0,n=e.length;i<n;++i){r.push(this.writeFeatureObject(e[i],t))}return{type:"FeatureCollection",features:r}};b.prototype.writeGeometry;b.prototype.writeGeometryObject=function(e,t){return P(e,this.adaptOptions(t))};var G=t["a"]=b},function(e,t,r){"use strict";r.d(t,"a",function(){return i});r.d(t,"b",function(){return n});r.d(t,"c",function(){return a});function i(e,t,r,i,n){var a=n!==undefined?n:[];var o=0;for(var s=t;s<r;s+=i){a[o++]=e.slice(s,s+i)}a.length=o;return a}function n(e,t,r,n,a){var o=a!==undefined?a:[];var s=0;for(var l=0,u=r.length;l<u;++l){var c=r[l];o[s++]=i(e,t,c,n,o[s]);t=c}o.length=s;return o}function a(e,t,r,i,a){var o=a!==undefined?a:[];var s=0;for(var l=0,u=r.length;l<u;++l){var c=r[l];o[s++]=n(e,t,c,i,o[s]);t=c[c.length-1]}o.length=s;return o}},function(e,t,r){"use strict";t["a"]={IMAGE:"IMAGE",TILE:"TILE",VECTOR_TILE:"VECTOR_TILE",VECTOR:"VECTOR"}},function(e,t,r){"use strict";r.d(t,"b",function(){return a});r.d(t,"a",function(){return o});r.d(t,"c",function(){return l});var i=r(11);var n={};function a(){n={}}function o(e,t,r){var i=e.getCode();var a=t.getCode();if(!(i in n)){n[i]={}}n[i][a]=r}function s(e,t){var r=e.getCode();var a=t.getCode();var o=n[r][a];delete n[r][a];if(Object(i["d"])(n[r])){delete n[r]}return o}function l(e,t){var r=void 0;if(e in n&&t in n[e]){r=n[e][t]}return r}},function(e,t,r){"use strict";var i=r(1);var n=r(173);var a=r(113);var o=r(333);var s=r(31);var l=r(146);function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var c=function(){function e(){u(this,e)}e.prototype.read=function e(t){return t.map(this.readFromComplexTypeElement_)};e.prototype.readFromComplexTypeElement_=function e(t){var r=i["a"].assertString(t["name"]);var n="alias"in t?i["a"].assertString(t["alias"]):null;var a=t["minOccurs"]!="0";var u={name:r,alias:n,required:a};var c=i["a"].assertString(t["type"]);if(!o["a"].setGeometryType(u,c)){if(c==="gml:TimeInstantType"||c==="dateTime"){u.type=s["a"].DATETIME}else if(c==="date"){u.type=s["a"].DATE}else if(c==="time"){u.type=s["a"].TIME}else if(c==="decimal"||c==="double"){u.type=s["a"].NUMBER;u.numType=l["a"].NumberType.FLOAT}else if(c==="integer"||c==="long"){u.type=s["a"].NUMBER;u.numType=l["a"].NumberType.INTEGER}else if(c==="boolean"){u.type=s["a"].BOOLEAN}else{u.type=s["a"].TEXT}}return u};return e}();var f=c;var h=r(182);var d=r(2);var p=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();function v(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var g=function(){e.$inject=["$q","ngeoDataSources","ngeoQuerent"];function e(t,r,i){v(this,e);this.q_=t;this.collection_=r.collection;this.ngeoQuerent_=i;this.cache_={};d["a"](this.collection_,"add",this.handleDataSourcesAdd_,this);d["a"](this.collection_,"remove",this.handleDataSourcesRemove_,this)}e.prototype.getDataSource=function e(t){return this.cache_[t]||null};e.prototype.getDataSourceAttributes=function e(t){var r=this.q_.defer();if(t.attributes){r.resolve(t.attributes)}else{this.ngeoQuerent_.wfsDescribeFeatureType(t).then(function(e){var n=t.getOGCLayerNames()[0];i["a"].assertString(n,"The data source should have only one ogcLayer.");for(var a=e.element,o=Array.isArray(a),s=0,a=o?a:a[Symbol.iterator]();;){var l;if(o){if(s>=a.length)break;l=a[s++]}else{s=a.next();if(s.done)break;l=s.value}var u=l;if(u.name===n){for(var c=e.complexType,h=Array.isArray(c),d=0,c=h?c:c[Symbol.iterator]();;){var p;if(h){if(d>=c.length)break;p=c[d++]}else{d=c.next();if(d.done)break;p=d.value}var v=p;if(v.name==u.type){var g=v.complexContent;var m=(new f).read(g);t.setAttributes(m);r.resolve(m);break}}}}})}return r.promise};e.prototype.handleDataSourcesAdd_=function e(t){var r=i["a"].assertInstanceof(t.element,n["a"]);this.cache_[r.id]=r};e.prototype.handleDataSourcesRemove_=function e(t){var r=i["a"].assertInstanceof(t.element,n["a"]);delete this.cache_[r.id]};p(e,[{key:"collection",get:function e(){return this.collection_}}]);return e}();g.module=angular.module("ngeoDataSourcesHelper",[a["a"].module.name,h["a"].module.name]);g.module.service("ngeoDataSourcesHelper",g);var m=t["a"]=g},function(e,t,r){"use strict";var i=r(43);var n=r(1);var a=r(107);var o=r(3);var s=r(2);var l=r(16);var u=r(44);var c=r(72);var f=r(12);var h="projection";var d="coordinateFormat";var p=function e(t){var r=t?t:{};var i=document.createElement("DIV");i.className=r.className!==undefined?r.className:"ol-mouse-position";c["a"].call(this,{element:i,render:r.render||v,target:r.target});Object(s["a"])(this,Object(u["b"])(h),this.handleProjectionChanged_,this);if(r.coordinateFormat){this.setCoordinateFormat(r.coordinateFormat)}if(r.projection){this.setProjection(r.projection)}this.undefinedHTML_="undefinedHTML"in r?r.undefinedHTML:"&nbsp;";this.renderOnMouseOut_=!!this.undefinedHTML_;this.renderedHTML_=i.innerHTML;this.mapProjection_=null;this.transform_=null;this.lastMouseMovePixel_=null};Object(o["d"])(p,c["a"]);function v(e){var t=e.frameState;if(!t){this.mapProjection_=null}else{if(this.mapProjection_!=t.viewState.projection){this.mapProjection_=t.viewState.projection;this.transform_=null}}this.updateHTML_(this.lastMouseMovePixel_)}p.prototype.handleProjectionChanged_=function(){this.transform_=null};p.prototype.getCoordinateFormat=function(){return this.get(d)};p.prototype.getProjection=function(){return this.get(h)};p.prototype.handleMouseMove=function(e){var t=this.getMap();this.lastMouseMovePixel_=t.getEventPixel(e);this.updateHTML_(this.lastMouseMovePixel_)};p.prototype.handleMouseOut=function(e){this.updateHTML_(null);this.lastMouseMovePixel_=null};p.prototype.setMap=function(e){c["a"].prototype.setMap.call(this,e);if(e){var t=e.getViewport();this.listenerKeys.push(Object(s["a"])(t,l["a"].MOUSEMOVE,this.handleMouseMove,this));if(this.renderOnMouseOut_){this.listenerKeys.push(Object(s["a"])(t,l["a"].MOUSEOUT,this.handleMouseOut,this))}}};p.prototype.setCoordinateFormat=function(e){this.set(d,e)};p.prototype.setProjection=function(e){this.set(h,Object(f["g"])(e))};p.prototype.updateHTML_=function(e){var t=this.undefinedHTML_;if(e&&this.mapProjection_){if(!this.transform_){var r=this.getProjection();if(r){this.transform_=Object(f["j"])(this.mapProjection_,r)}else{this.transform_=f["k"]}}var i=this.getMap();var n=i.getCoordinateFromPixel(e);if(n){this.transform_(n,n);var a=this.getCoordinateFormat();if(a){t=a(n)}else{t=n.toString()}}}if(!this.renderedHTML_||t!==this.renderedHTML_){this.element.innerHTML=t;this.renderedHTML_=t}};var g=p;var m=r(154);var y=angular.module("gmfMapMouseposition",[a["a"].name]);y.run(["$templateCache",function(e){e.put("gmf/map/mousepositionComponent",r(486))}]);y.value("gmfMapMousepositionTemplateUrl",function(e){var t=e["gmfMapMousepositionTemplateUrl"];return t!==undefined?t:"gmf/map/mousepositionComponent"});_.$inject=["$attrs","gmfMapMousepositionTemplateUrl"];function _(e,t){return t(e)}y.component_={controller:"gmfMousepositionController as ctrl",bindings:{map:"<gmfMousepositionMap",projections:"<gmfMousepositionProjections"},templateUrl:_};y.component("gmfMouseposition",y.component_);y.Controller_=function(e,t,r,i){this.map;this.projections;this.projection;this.$scope_=r;this.gettextCatalog_=i;this.$element_=e;this.$filter_=t;this.control_=null};y.Controller_.$inject=["$element","$filter","$scope","gettextCatalog"];y.Controller_.prototype.$onInit=function(){var e=this;this.$scope_.$on("gettextLanguageChanged",function(){e.initOlControl_()});this.initOlControl_()};y.Controller_.prototype.initOlControl_=function(){if(this.control_!==null){this.map.removeControl(this.control_)}var e=function e(t){var r=this.projection.filter.split(":");var i=this.$filter_(r.shift());n["a"].assertFunction(i);var a=r;a.unshift(t);return i.apply(this,a)};var t=this.gettextCatalog_;this.control_=new g({className:"gmf-mouseposition-control",coordinateFormat:e.bind(this),target:angular.element(".gmf-mouseposition-control-target",this.$element_)[0],undefinedHTML:t.getString("Coordinates")});this.setProjection(this.projections[0]);this.map.addControl(this.control_)};y.Controller_.prototype.setProjection=function(e){this.control_.setProjection(f["g"](e.code));this.projection=e};y.controller("gmfMousepositionController",y.Controller_);var b=y;var w=angular.module("gmfMapModule",[i["a"].name,b.name]);var S=t["a"]=w},function(e,t,r){"use strict";var i=r(1);var n=r(40);var a=r(134);var o=r(106);var s=r(218);var l=r(3);var u=r(152);var c=r(0);var f=function e(){u["a"].call(this)};l["d"](f,u["a"]);f.prototype.read;f.prototype.readFromDocument=function(e){for(var t=e.firstChild;t;t=t.nextSibling){if(t.nodeType==Node.ELEMENT_NODE){return this.readFromNode(t)}}return null};f.prototype.readFromNode=function(e){var t={};t=c["u"](t,f.PARSERS_,e,[]);return t};f.readElement_=function(e,t){var r={};for(var i=0,n=e.attributes.length;i<n;i++){var a=e.attributes.item(i);r[a.name]=a.value}if(t.length===1){r["type"]=r["type"].split(":").pop()}return r};f.readComplexType_=function(e,t){var r=e.getAttribute("name");var i=c["u"]({name:r},f.COMPLEX_TYPE_PARSERS_,e,t);i["complexContent"]=i["complexContent"]["extension"]["sequence"]["element"];return i};f.readComplexContent_=function(e,t){return c["u"]({},f.COMPLEX_CONTENT_PARSERS_,e,t)};f.readExtension_=function(e,t){return c["u"]({},f.EXTENSION_PARSERS_,e,t)};f.readSequence_=function(e,t){return c["u"]({},f.SEQUENCE_PARSERS_,e,t)};f.NAMESPACE_URIS_=[null,"http://www.w3.org/2001/XMLSchema"];f.PARSERS_=i["a"].assert(c["r"](f.NAMESPACE_URIS_,{element:c["m"](f.readElement_),complexType:c["m"](f.readComplexType_)}));f.COMPLEX_TYPE_PARSERS_=i["a"].assert(c["r"](f.NAMESPACE_URIS_,{complexContent:c["n"](f.readComplexContent_)}));f.COMPLEX_CONTENT_PARSERS_=i["a"].assert(c["r"](f.NAMESPACE_URIS_,{extension:c["n"](f.readExtension_)}));f.EXTENSION_PARSERS_=i["a"].assert(c["r"](f.NAMESPACE_URIS_,{sequence:c["n"](f.readSequence_)}));f.SEQUENCE_PARSERS_=i["a"].assert(c["r"](f.NAMESPACE_URIS_,{element:c["m"](f.readElement_)}));var h=f;var d=r(249);var p=r(4);var v=function e(){u["a"].call(this);this.version=undefined};Object(l["d"])(v,u["a"]);var g=[null,"http://www.opengis.net/wms"];var m=Object(c["r"])(g,{Service:Object(c["n"])(N),Capability:Object(c["n"])($)});var y=Object(c["r"])(g,{Request:Object(c["n"])(q),Exception:Object(c["n"])(H),Layer:Object(c["n"])(Y)});var _=Object(c["r"])(g,{Name:Object(c["n"])(p["h"]),Title:Object(c["n"])(p["h"]),Abstract:Object(c["n"])(p["h"]),KeywordList:Object(c["n"])(te),OnlineResource:Object(c["n"])(d["a"]),ContactInformation:Object(c["n"])(F),Fees:Object(c["n"])(p["h"]),AccessConstraints:Object(c["n"])(p["h"]),LayerLimit:Object(c["n"])(p["f"]),MaxWidth:Object(c["n"])(p["f"]),MaxHeight:Object(c["n"])(p["f"])});var b=Object(c["r"])(g,{ContactPersonPrimary:Object(c["n"])(G),ContactPosition:Object(c["n"])(p["h"]),ContactAddress:Object(c["n"])(U),ContactVoiceTelephone:Object(c["n"])(p["h"]),ContactFacsimileTelephone:Object(c["n"])(p["h"]),ContactElectronicMailAddress:Object(c["n"])(p["h"])});var w=Object(c["r"])(g,{ContactPerson:Object(c["n"])(p["h"]),ContactOrganization:Object(c["n"])(p["h"])});var S=Object(c["r"])(g,{AddressType:Object(c["n"])(p["h"]),Address:Object(c["n"])(p["h"]),City:Object(c["n"])(p["h"]),StateOrProvince:Object(c["n"])(p["h"]),PostCode:Object(c["n"])(p["h"]),Country:Object(c["n"])(p["h"])});var C=Object(c["r"])(g,{Format:Object(c["j"])(p["h"])});var x=Object(c["r"])(g,{Name:Object(c["n"])(p["h"]),Title:Object(c["n"])(p["h"]),Abstract:Object(c["n"])(p["h"]),KeywordList:Object(c["n"])(te),CRS:Object(c["m"])(p["h"]),EX_GeographicBoundingBox:Object(c["n"])(L),BoundingBox:Object(c["m"])(R),Dimension:Object(c["m"])(V),Attribution:Object(c["n"])(D),AuthorityURL:Object(c["m"])(Q),Identifier:Object(c["m"])(p["h"]),MetadataURL:Object(c["m"])(J),DataURL:Object(c["m"])(z),FeatureListURL:Object(c["m"])(z),Style:Object(c["m"])(ee),MinScaleDenominator:Object(c["n"])(p["d"]),MaxScaleDenominator:Object(c["n"])(p["d"]),Layer:Object(c["m"])(W)});var O=Object(c["r"])(g,{Title:Object(c["n"])(p["h"]),OnlineResource:Object(c["n"])(d["a"]),LogoURL:Object(c["n"])(Z)});var T=Object(c["r"])(g,{westBoundLongitude:Object(c["n"])(p["d"]),eastBoundLongitude:Object(c["n"])(p["d"]),southBoundLatitude:Object(c["n"])(p["d"]),northBoundLatitude:Object(c["n"])(p["d"])});var E=Object(c["r"])(g,{GetCapabilities:Object(c["n"])(K),GetMap:Object(c["n"])(K),GetFeatureInfo:Object(c["n"])(K)});var M=Object(c["r"])(g,{Format:Object(c["m"])(p["h"]),DCPType:Object(c["m"])(B)});var j=Object(c["r"])(g,{HTTP:Object(c["n"])(X)});var A=Object(c["r"])(g,{Get:Object(c["n"])(z),Post:Object(c["n"])(z)});var P=Object(c["r"])(g,{Name:Object(c["n"])(p["h"]),Title:Object(c["n"])(p["h"]),Abstract:Object(c["n"])(p["h"]),LegendURL:Object(c["m"])(Z),StyleSheetURL:Object(c["n"])(z),StyleURL:Object(c["n"])(z)});var k=Object(c["r"])(g,{Format:Object(c["n"])(p["h"]),OnlineResource:Object(c["n"])(d["a"])});var I=Object(c["r"])(g,{Keyword:Object(c["j"])(p["h"])});v.prototype.read;v.prototype.readFromDocument=function(e){for(var t=e.firstChild;t;t=t.nextSibling){if(t.nodeType==Node.ELEMENT_NODE){return this.readFromNode(t)}}return null};v.prototype.readFromNode=function(e){this.version=e.getAttribute("version").trim();var t=Object(c["u"])({version:this.version},m,e,[]);return t?t:null};function D(e,t){return Object(c["u"])({},O,e,t)}function R(e,t){var r=[Object(p["e"])(e.getAttribute("minx")),Object(p["e"])(e.getAttribute("miny")),Object(p["e"])(e.getAttribute("maxx")),Object(p["e"])(e.getAttribute("maxy"))];var i=[Object(p["e"])(e.getAttribute("resx")),Object(p["e"])(e.getAttribute("resy"))];return{crs:e.getAttribute("CRS"),extent:r,res:i}}function L(e,t){var r=Object(c["u"])({},T,e,t);if(!r){return undefined}var i=r["westBoundLongitude"];var n=r["southBoundLatitude"];var a=r["eastBoundLongitude"];var o=r["northBoundLatitude"];if(i===undefined||n===undefined||a===undefined||o===undefined){return undefined}return[i,n,a,o]}function $(e,t){return Object(c["u"])({},y,e,t)}function N(e,t){return Object(c["u"])({},_,e,t)}function F(e,t){return Object(c["u"])({},b,e,t)}function G(e,t){return Object(c["u"])({},w,e,t)}function U(e,t){return Object(c["u"])({},S,e,t)}function H(e,t){return Object(c["u"])([],C,e,t)}function Y(e,t){return Object(c["u"])({},x,e,t)}function W(e,t){var r=t[t.length-1];var i=Object(c["u"])({},x,e,t);if(!i){return undefined}var n=Object(p["b"])(e.getAttribute("queryable"));if(n===undefined){n=r["queryable"]}i["queryable"]=n!==undefined?n:false;var a=Object(p["g"])(e.getAttribute("cascaded"));if(a===undefined){a=r["cascaded"]}i["cascaded"]=a;var o=Object(p["b"])(e.getAttribute("opaque"));if(o===undefined){o=r["opaque"]}i["opaque"]=o!==undefined?o:false;var s=Object(p["b"])(e.getAttribute("noSubsets"));if(s===undefined){s=r["noSubsets"]}i["noSubsets"]=s!==undefined?s:false;var l=Object(p["e"])(e.getAttribute("fixedWidth"));if(!l){l=r["fixedWidth"]}i["fixedWidth"]=l;var u=Object(p["e"])(e.getAttribute("fixedHeight"));if(!u){u=r["fixedHeight"]}i["fixedHeight"]=u;var f=["Style","CRS","AuthorityURL"];f.forEach(function(e){if(e in r){var t=i[e]||[];i[e]=t.concat(r[e])}});var h=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];h.forEach(function(e){if(!(e in i)){var t=r[e];i[e]=t}});return i}function V(e,t){var r={name:e.getAttribute("name"),units:e.getAttribute("units"),unitSymbol:e.getAttribute("unitSymbol"),default:e.getAttribute("default"),multipleValues:Object(p["b"])(e.getAttribute("multipleValues")),nearestValue:Object(p["b"])(e.getAttribute("nearestValue")),current:Object(p["b"])(e.getAttribute("current")),values:Object(p["h"])(e)};return r}function z(e,t){return Object(c["u"])({},k,e,t)}function q(e,t){return Object(c["u"])({},E,e,t)}function B(e,t){return Object(c["u"])({},j,e,t)}function X(e,t){return Object(c["u"])({},A,e,t)}function K(e,t){return Object(c["u"])({},M,e,t)}function Z(e,t){var r=z(e,t);if(r){var i=[Object(p["g"])(e.getAttribute("width")),Object(p["g"])(e.getAttribute("height"))];r["size"]=i;return r}return undefined}function Q(e,t){var r=z(e,t);if(r){r["name"]=e.getAttribute("name");return r}return undefined}function J(e,t){var r=z(e,t);if(r){r["type"]=e.getAttribute("type");return r}return undefined}function ee(e,t){return Object(c["u"])({},P,e,t)}function te(e,t){return Object(c["u"])([],I,e,t)}var re=v;var ie=r(383);var ne=r(11);var ae=r(172);var oe=r(5);var se=r(149);function le(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var ue=function(){e.$inject=["$http","$q","ngeoRuleHelper","ngeoWMSTime"];function e(t,r,i,n){le(this,e);this.http_=t;this.q_=r;this.ngeoRuleHelper_=i;this.ngeoWMSTime_=n;this.requestCancelers_=[];this.wmsGetCapabilitiesPromises_={};this.wmtsGetCapabilitiesPromises_={}}e.prototype.issue=function e(t){var r=[];var n=t.map;this.cancelStillRunningRequests_();var a=void 0;if(t.queryableDataSources){a=t.queryableDataSources}else{var o=t.dataSources;i["a"].assert(o,"DataSources should be set");a=this.getQueryableDataSources(o,n)}var s=this.getCombinableWFSDataSources_(a.wfs);r.push(this.issueCombinedWFS_(s,t));var l=t.coordinate;if(l){var u=this.getCombinableWMSDataSources_(a.wms);r.push(this.issueCombinedWMS_(u,t))}return this.q_.all(r).then(this.handleCombinedQueryResult_.bind(this))};e.prototype.getQueryableDataSources=function e(t,r){var a={wfs:[],wms:[]};var o=i["a"].assertNumber(r.getView().getResolution());for(var s=t,l=Array.isArray(s),u=0,s=l?s:s[Symbol.iterator]();;){var c;if(l){if(u>=s.length)break;c=s[u++]}else{u=s.next();if(u.done)break;c=u.value}var f=c;if(!this.isDataSourceQueryable_(f,o)){continue}if(f instanceof n["a"]){if(f.supportsWFS){a.wfs.push(f)}else{a.wms.push(f)}}}return a};e.prototype.wfsDescribeFeatureType=function e(t){i["a"].assert(t.supportsAttributes,"The data source must support WFS, have a single OGCLayer that\n      is queryable in order to issue WFS DescribeFeatureType requests");var r=t.getOGCLayerNames();var n=ae["a"](i["a"].assertString(t.wfsUrl),{REQUEST:"DescribeFeatureType",SERVICE:"WFS",VERSION:"2.0.0",TYPENAME:r});return this.http_.get(n).then(function(e){var t=new h;return t.read(e.data)})};e.prototype.wmsFindLayerCapability=function e(t,r){var i=null;for(var n=t,a=Array.isArray(n),o=0,n=a?n:n[Symbol.iterator]();;){var s;if(a){if(o>=n.length)break;s=n[o++]}else{o=n.next();if(o.done)break;s=o.value}var l=s;if(l["Name"]===r){i=l;break}else if(l["Layer"]){i=this.wmsFindLayerCapability(l["Layer"],r);if(i){break}}}return i};e.prototype.wmsGetCapabilities=function e(t,r){var n=r!==false;var a={REQUEST:"GetCapabilities",SERVICE:"WMS",VERSION:"1.3.0"};var o=ae["a"](t,a);var s=void 0;if(!n||!this.wmsGetCapabilitiesPromises_[t]){s=this.http_.get(o).then(function(e){var t=new re;return t.read(e.data)})}else if(n&&this.wmsGetCapabilitiesPromises_[t]){s=this.wmsGetCapabilitiesPromises_[t]}i["a"].assert(s);if(n&&!this.wmsGetCapabilitiesPromises_[t]){this.wmsGetCapabilitiesPromises_[t]=s}return s};e.prototype.wmtsFindLayerCapability=function e(t,r){var i=null;for(var n=t,a=Array.isArray(n),o=0,n=a?n:n[Symbol.iterator]();;){var s;if(a){if(o>=n.length)break;s=n[o++]}else{o=n.next();if(o.done)break;s=o.value}var l=s;if(l["Identifier"]===r){i=l;break}}return i};e.prototype.wmtsGetCapabilities=function e(t,r){var n=r!==false;var a=void 0;if(!n||!this.wmtsGetCapabilitiesPromises_[t]){a=this.http_.get(t).then(function(e){var t=new ie["a"];return t.read(e.data)})}else if(n&&this.wmtsGetCapabilitiesPromises_[t]){a=this.wmtsGetCapabilitiesPromises_[t]}i["a"].assert(a);if(n&&!this.wmtsGetCapabilitiesPromises_[t]){this.wmtsGetCapabilitiesPromises_[t]=a}return a};e.prototype.handleCombinedQueryResult_=function e(t){var r={};for(var i=t,n=Array.isArray(i),a=0,i=n?i:i[Symbol.iterator]();;){var o;if(n){if(a>=i.length)break;o=i[a++]}else{a=i.next();if(a.done)break;o=a.value}var s=o;for(var l in s){var u=Number(l);r[u]=s[u]}}return r};e.prototype.handleQueryResult_=function e(t,r,i,a){var o={};for(var s=t,l=Array.isArray(s),u=0,s=l?s:s[Symbol.iterator]();;){var c;if(l){if(u>=s.length)break;c=s[u++]}else{u=s.next();if(u.done)break;c=u.value}var f=c;var h=void 0;var d=void 0;var p=void 0;if(typeof a==="number"){h=[];d=true;p=a}else{if(f instanceof n["a"]){h=this.readAndTypeFeatures_(f,a.data,i)}else{h=[]}}var v=f.id;this.setUniqueIds_(h,f.id);o[v]={features:h,limit:r,tooManyFeatures:d,totalFeatureCount:p}}return o};e.prototype.readAndTypeFeatures_=function e(t,r,i){var n=this;var a=[];var o=void 0;var s=this.getSetOlFormatTypes_(t,i).slice();s.forEach(function(e){n.getSetOlFormatTypes_(t,i,[e]);if(i){o=t.wfsFormat.readFeatures(r)}else{o=t.wmsFormat.readFeatures(r)}if(o.length>0){o.forEach(function(t){t.set("ngeo_feature_type_",e);a.push(t)})}});this.getSetOlFormatTypes_(t,i,s);return a};e.prototype.getSetOlFormatTypes_=function e(t,r,i){var n=void 0;if(r){if(i){t.wfsFormat.setFeatureType(i)}n=t.wfsFormat.getFeatureType()}else{if(i){t.wmsFormat.setLayers(i)}n=t.wmsFormat.getLayers()}if(!n){return[]}return Array.isArray(n)?n:[n]};e.prototype.issueCombinedWFS_=function e(t,r){var n=this;var a=[];var o=i["a"].assertNumber(r.limit);var l=r.map;var u=l.getView();var c=i["a"].assertNumber(u.getResolution());var f=u.getProjection();var h=f.getCode();var d=r.wfsCount===true;var p=void 0;var v=r.coordinate;if(v){var g=r.tolerancePx;i["a"].assert(g);var m=g*c;p=oe["c"](oe["m"](v),m)}else{p=r.extent}var y=new s["a"];var _=new XMLSerializer;var b=function e(t){var s=void 0;var l=void 0;var u=[];var f=void 0;var v={};for(var g=t,m=Array.isArray(g),b=0,g=m?g:g[Symbol.iterator]();;){var w;if(m){if(b>=g.length)break;w=g[b++]}else{b=g.next();if(b.done)break;w=b.value}var S=w;if(!s){l=S.wfsFeatureNS;var C=S.wfsFeaturePrefix;var x=S.geometryName;var O=S.wfsOutputFormat;s={bbox:p,featureNS:l,featurePrefix:C,geometryName:x,outputFormat:O,srsName:h};f=S.wfsUrl;ne["a"](v,S.activeDimensions)}u=u.concat(S.getInRangeOGCLayerNames(c,true));var T=void 0;if(r.filter){T=n.ngeoRuleHelper_.createFilter({dataSource:S,filter:r.filter,incDimensions:true,incTime:true})}else if(S.filterRules&&S.filterRules.length||S.timeRangeValue||S.dimensionsFiltersConfig&&Object.keys(S.dimensionsFiltersConfig).length>0){i["a"].assert(t.length===1,"A data source having filterRules or timeRangeValue should issue\n            a single query, alone.");T=n.ngeoRuleHelper_.createFilter({dataSource:S,incDimensions:true,incTime:true,srsName:h})}if(T){s["filter"]=T}}i["a"].assert(s);s.featureTypes=u;i["a"].assert(f);var E=n.q_.defer();a.push(E.promise.then(n.handleQueryResult_.bind(n,t,o,true)));var M=void 0;if(d){var j=ne["a"]({resultType:"hits"},s);var A=y.writeGetFeature(j);var P=_.serializeToString(A);var k=n.registerCanceler_();M=n.http_.post(f,P,{params:v,headers:{"Content-Type":"text/xml; charset=UTF-8"},timeout:k.promise}).then(function(e){var r=t[0].wfsFormat.readFeatureCollectionMetadata(e.data);return r["numberOfFeatures"]}.bind(n))}else{M=n.q_.resolve()}M.then(function(e){if(e===undefined||e<o){var t=ne["a"]({maxFeatures:o},s);var r=y.writeGetFeature(t);var a=_.serializeToString(r);i["a"].assertString(f);var l=n.registerCanceler_();n.http_.post(f,a,{params:v,headers:{"Content-Type":"text/xml; charset=UTF-8"},timeout:l.promise}).then(function(e){E.resolve(e)})}else{E.resolve(e)}})};for(var w=t,S=Array.isArray(w),C=0,w=S?w:w[Symbol.iterator]();;){var x;if(S){if(C>=w.length)break;x=w[C++]}else{C=w.next();if(C.done)break;x=C.value}var O=x;b(O)}return this.q_.all(a).then(this.handleCombinedQueryResult_.bind(this))};e.prototype.issueCombinedWMS_=function e(t,r){var n=[];var a=i["a"].assertNumber(r.limit);var o=r.map;var s=o.getView();var l=i["a"].assertNumber(s.getResolution());var u=s.getProjection();var c=u.getCode();var f=r.coordinate;i["a"].assert(f);for(var h=t,d=Array.isArray(h),p=0,h=d?h:h[Symbol.iterator]();;){var v;if(d){if(p>=h.length)break;v=h[p++]}else{p=h.next();if(p.done)break;v=p.value}var g=v;var m=void 0;var y=[];var _=void 0;var b=false;var w={};var S=null;var C=null;for(var x=g,O=Array.isArray(x),T=0,x=O?x:x[Symbol.iterator]();;){var E;if(O){if(T>=x.length)break;E=x[T++]}else{T=x.next();if(T.done)break;E=T.value}var M=E;if(!_){_=M.wmsInfoFormat;m=M.wmsUrl}y=y.concat(M.getInRangeOGCLayerNames(l,true));if(!b){ne["a"](w,M.activeDimensions);b=true}if(M.filterRules&&M.filterRules.length){i["a"].assert(g.length===1);C=M.getFiltrableOGCLayerName();S=this.ngeoRuleHelper_.createFilterString({dataSource:M,srsName:c})}if(M.timeRangeValue!==null&&M.timeProperty){i["a"].assert(g.length===1);w["TIME"]=this.ngeoWMSTime_.formatWMSTimeParam(M.timeProperty,M.timeRangeValue)}}w["LAYERS"]=y;w["QUERY_LAYERS"]=y;if(S&&C){var j=null;if(y.length===1){j=S}else{var A=[];for(var P=0,k=y.length;P<k;P++){if(y[P]===C){A.push("("+S+")")}else{A.push("()")}}j=A.join("")}w["FILTER"]=j}i["a"].assert(m);var I=new se["a"]({params:w,url:m});var D=i["a"].assertString(I.getGetFeatureInfoUrl(f,l,c,{FEATURE_COUNT:a,INFO_FORMAT:_}));var R=this.registerCanceler_();n.push(this.http_.get(D,{timeout:R.promise}).then(this.handleQueryResult_.bind(this,g,a,false)))}return this.q_.all(n).then(this.handleCombinedQueryResult_.bind(this))};e.prototype.getCombinableWFSDataSources_=function e(t){var r=[];var i=[];for(var n=t,a=Array.isArray(n),o=0,n=a?n:n[Symbol.iterator]();;){var s;if(a){if(o>=n.length)break;s=n[o++]}else{o=n.next();if(o.done)break;s=o.value}var l=s;if(l.combinableForWFS){var u=false;for(var c=r,f=Array.isArray(c),h=0,c=f?c:c[Symbol.iterator]();;){var d;if(f){if(h>=c.length)break;d=c[h++]}else{h=c.next();if(h.done)break;d=h.value}var p=d;if(l.combinableWithDataSourceForWFS(p[0])){p.push(l);u=true}}if(!u){r.push([l])}}else{i.push([l])}}return r.concat(i)};e.prototype.getCombinableWMSDataSources_=function e(t){var r=[];var i=[];for(var n=t,a=Array.isArray(n),o=0,n=a?n:n[Symbol.iterator]();;){var s;if(a){if(o>=n.length)break;s=n[o++]}else{o=n.next();if(o.done)break;s=o.value}var l=s;if(l.combinableForWMS){var u=false;for(var c=r,f=Array.isArray(c),h=0,c=f?c:c[Symbol.iterator]();;){var d;if(f){if(h>=c.length)break;d=c[h++]}else{h=c.next();if(h.done)break;d=h.value}var p=d;if(l.combinableWithDataSourceForWMS(p[0])){p.push(l);u=true}}if(!u){r.push([l])}}else{i.push([l])}}return r.concat(i)};e.prototype.isDataSourceQueryable_=function e(t,r){var i=t.visible&&t.inRange&&t.queryable;if(i&&t instanceof n["a"]){var a=t;i=a.isAnyOGCLayerInRange(r,true)}return i};e.prototype.setUniqueIds_=function e(t,r){t.forEach(function(e){if(e.getId()!==undefined){var t=r+"_"+e.getId();e.setId(t)}})};e.prototype.registerCanceler_=function e(){var t=this.q_.defer();this.requestCancelers_.push(t);return t};e.prototype.cancelStillRunningRequests_=function e(){for(var t=this.requestCancelers_,r=Array.isArray(t),i=0,t=r?t:t[Symbol.iterator]();;){var n;if(r){if(i>=t.length)break;n=t[i++]}else{i=t.next();if(i.done)break;n=i.value}var a=n;a.resolve()}this.requestCancelers_.length=0};return e}();ue.CombinedDataSources;ue.module=angular.module("ngeoQuerent",[a["a"].module.name,o["a"].module.name]);ue.module.service("ngeoQuerent",ue);var ce=t["a"]=ue},function(e,t,r){"use strict";var i=r(188);var n=function e(t,r){this.gettextCatalog_=r;this.encoding_=t.has("ngeoCsvEncoding")?t.get("ngeoCsvEncoding"):"utf-8";this.extension_=t.has("ngeoCsvExtension")?t.get("ngeoCsvExtension"):".csv";this.includeHeader_=t.has("ngeoCsvIncludeHeader")?t.get("ngeoCsvIncludeHeader"):true;this.quote_=t.has("ngeoCsvQuote")?t.get("ngeoCsvQuote"):'"';this.separator_=t.has("ngeoCsvSeparator")?t.get("ngeoCsvSeparator"):",";this.download_=t.get("ngeoDownload")};n.$inject=["$injector","gettextCatalog"];n.$inject=["$injector","gettextCatalog"];n.prototype.generateCsv=function(e,t){var r=this;if(e.length==0||t.length==0){return""}var i=t.map(function(e){return r.gettextCatalog_.getString(e.name)});var n=this.getRow_(i);var a=e.map(function(e){var i=t.map(function(t){return e[t.name]});return r.getRow_(i)});return this.includeHeader_?n+a.join(""):a.join("")};n.prototype.getRow_=function(e){var t=this;var r=new RegExp(this.quote_,"g");var i=this.quote_+this.quote_;var n=e.map(function(e){if(e!==undefined&&e!==null){e=""+e;return t.quote_+e.replace(r,i)+t.quote_}else{return""}});return n.join(this.separator_)+"\n"};n.prototype.startDownload=function(e,t,r){var i=this.generateCsv(e,t);this.download_(i,r,"text/csv;charset="+this.encoding_)};n.module=angular.module("ngeoCsvDownload",[i["a"].name]);n.module.service("ngeoCsvDownload",n);t["a"]=n},function(e,t,r){"use strict";(function(e){var i=r(48);var n=r(145);var a=r(19);var o=r(378);var s=r(234);var l=r(211);var u=r(40);var c=r(377);var f=r(369);var h=r(8);var d=r(135);var p=r(136);var v=r(313);var g=r(186);var m=r(109);var y=r(1);var _=r(3);var b=r(9);var w=r(2);var S=r(21);var C=r(131);var x=r(34);var O=r(38);var T=r(143);var E=r(15);var M=r(121);var j=function e(t,r,i,a,o,s,l,u,c,d){var p=this;this.q_=t;this.rootScope_=i;this.$timeout_=r;this.mapViewPropertyChangeEventKey_=null;this.ngeoDebounce_=o;this.ngeoEventHelper_=l;this.ngeoStateManager_=u;this.ngeoFeatures_=a.has("ngeoFeatures")?a.get("ngeoFeatures"):null;this.ngeoBackgroundLayerMgr_=a.has("ngeoBackgroundLayerMgr")?a.get("ngeoBackgroundLayerMgr"):null;var v=a.has("ngeoFeatureOverlayMgr")?a.get("ngeoFeatureOverlayMgr"):null;this.featureOverlay_=v?v.getFeatureOverlay():null;this.featureHelper_=a.has("ngeoFeatureHelper")?a.get("ngeoFeatureHelper"):null;this.ngeoQuerent_=a.has("ngeoQuerent")?a.get("ngeoQuerent"):null;var g=a.has("gmfPermalinkOptions")?a.get("gmfPermalinkOptions"):{};if(g.useLocalStorage===true){this.ngeoStateManager_.setUseLocalStorage(true)}this.crosshairEnabledByDefault_=!!g.crosshairEnabledByDefault;this.pointRecenterZoom_=g.pointRecenterZoom;this.gmfExternalDataSourcesManager_=a.has("gmfExternalDataSourcesManager")?a.get("gmfExternalDataSourcesManager"):null;this.gmfThemes_=a.has("gmfThemes")?a.get("gmfThemes"):null;this.gmfObjectEditingManager_=a.has("gmfObjectEditingManager")?a.get("gmfObjectEditingManager"):null;this.gmfThemeManager_=a.has("gmfThemeManager")?a.get("gmfThemeManager"):null;this.defaultTheme_=a.has("defaultTheme")?a.get("defaultTheme"):undefined;this.gmfTreeManager_=a.has("gmfTreeManager")?a.get("gmfTreeManager"):null;this.user_=d;this.ngeoLocation_=c;this.ngeoWfsPermalink_=a.has("ngeoWfsPermalink")?a.get("ngeoWfsPermalink"):null;this.gmfUser_=a.has("gmfUser")?a.get("gmfUser"):null;this.map_=null;this.ngeoAutoProjection_=a.has("ngeoAutoProjection")?a.get("ngeoAutoProjection"):null;this.sourceProjections_=null;if(g.projectionCodes!==undefined&&this.ngeoAutoProjection_){var m=this.ngeoAutoProjection_.getProjectionList(g.projectionCodes);if(m.length>0){this.sourceProjections_=m}}this.crosshairFeature_=null;this.crosshairStyle_;if(g.crosshairStyle!==undefined){this.crosshairStyle_=g.crosshairStyle}else{this.crosshairStyle_=[new E["c"]({image:new T["a"]({stroke:new O["a"]({color:"rgba(255, 255, 255, 0.8)",width:5}),points:4,radius:8,radius2:0,angle:0})}),new E["c"]({image:new T["a"]({stroke:new O["a"]({color:"rgba(255, 0, 0, 1)",width:2}),points:4,radius:8,radius2:0,angle:0})})]}this.mapTooltip_=null;this.featureHashFormat_=new f["a"]({setStyle:false,encodeStyles:false,propertiesType:{fillColor:h["a"].COLOR,fillOpacity:h["a"].OPACITY,fontColor:h["a"].COLOR,fontSize:h["a"].SIZE,isBox:h["a"].IS_RECTANGLE,isCircle:h["a"].IS_CIRCLE,isLabel:h["a"].IS_TEXT,name:h["a"].NAME,pointRadius:h["a"].SIZE,showLabel:h["a"].SHOW_LABEL,showMeasure:h["a"].SHOW_MEASURE,strokeColor:h["a"].COLOR,strokeWidth:h["a"].STROKE},defaultValues:{name:function e(t){return s.getString(t.getGeometry().getType())},fillOpacity:function e(){return.5},showLabel:function e(){return false},showMeasure:function e(){return false}}});if(this.ngeoBackgroundLayerMgr_){w["a"](this.ngeoBackgroundLayerMgr_,"change",this.handleBackgroundLayerManagerChange_,this)}this.rootScope_.$on("ngeo-layertree-state",function(t,r,i){var n={};if(i.node.mixed){var a=r.getState();y["a"].assert(a==="on"||a==="off");var o=a==="on";r.traverseDepthFirst(function(t){if(t.node.children===undefined){var r=e.ParamPrefix.TREE_ENABLE+t.node.name;n[r]=o}})}else{var s=[];i.traverseDepthFirst(function(e){if(e.node.children===undefined&&e.getState()==="on"){s.push(e.node.name)}});n[e.ParamPrefix.TREE_GROUP_LAYERS+i.node.name]=s.join(",")}p.ngeoStateManager_.updateState(n)});this.rootScope_.$on("ngeo-layertree-opacity",function(t,r){var i={};var n=r.layer.getOpacity();var a=(r.parent.node.mixed?e.ParamPrefix.TREE_OPACITY:e.ParamPrefix.TREE_GROUP_OPACITY)+r.node.name;i[a]=n;p.ngeoStateManager_.updateState(i)});var _=this.getFeatures();if(this.ngeoFeatures_){_.forEach(function(e){if(p.featureHelper_){p.featureHelper_.setStyle(e)}p.addNgeoFeature_(e)});this.ngeoFeatures_.extend(_);w["a"](this.ngeoFeatures_,"add",this.handleNgeoFeaturesAdd_,this);w["a"](this.ngeoFeatures_,"remove",this.handleNgeoFeaturesRemove_,this)}if(this.featureHelper_){this.rootScope_.$on("$localeChangeSuccess",function(){_.forEach(function(e){p.featureHelper_.setStyle(e)})})}if(this.gmfThemeManager_){this.rootScope_.$on(n["a"].EventType.THEME_NAME_SET,function(e,t){p.setThemeInUrl_(t)})}this.setExternalDataSourcesStatePromise_=null;if(this.ngeoQuerent_&&this.gmfExternalDataSourcesManager_){this.initExternalDataSources_().then(function(){w["a"](p.gmfExternalDataSourcesManager_.wmsGroupsCollection,"add",p.handleExternalDSGroupCollectionAdd_,p);w["a"](p.gmfExternalDataSourcesManager_.wmsGroupsCollection,"remove",p.handleExternalDSGroupCollectionRemove_,p);w["a"](p.gmfExternalDataSourcesManager_.wmtsGroupsCollection,"add",p.handleExternalDSGroupCollectionAdd_,p);w["a"](p.gmfExternalDataSourcesManager_.wmtsGroupsCollection,"remove",p.handleExternalDSGroupCollectionRemove_,p);for(var e=p.gmfExternalDataSourcesManager_.wmsGroups,t=Array.isArray(e),r=0,e=t?e:e[Symbol.iterator]();;){var i;if(t){if(r>=e.length)break;i=e[r++]}else{r=e.next();if(r.done)break;i=r.value}var n=i;p.registerExternalDSGroup_(n)}for(var a=p.gmfExternalDataSourcesManager_.wmtsGroups,o=Array.isArray(a),s=0,a=o?a:a[Symbol.iterator]();;){var l;if(o){if(s>=a.length)break;l=a[s++]}else{s=a.next();if(s.done)break;l=s.value}var u=l;p.registerExternalDSGroup_(u)}})}this.initLayers_()};j.$inject=["$q","$timeout","$rootScope","$injector","ngeoDebounce","gettextCatalog","ngeoEventHelper","ngeoStateManager","ngeoLocation","gmfUser"];j.$inject=["$q","$timeout","$rootScope","$injector","ngeoDebounce","gettextCatalog","ngeoEventHelper","ngeoStateManager","ngeoLocation","gmfUser"];j.prototype.getMapCenter=function(){var e=this.ngeoStateManager_.getInitialNumberValue(i["a"].PermalinkParam.MAP_X);var t=this.ngeoStateManager_.getInitialNumberValue(i["a"].PermalinkParam.MAP_Y);if(!isNaN(e)&&!isNaN(t)){var r=[e,t];if(this.sourceProjections_!==null&&this.ngeoAutoProjection_){var n=this.map_.getView().getProjection();var a=this.ngeoAutoProjection_.tryProjectionsWithInversion(r,n.getExtent(),n,this.sourceProjections_);if(a){return a}}return r}return null};j.prototype.getMapZoom=function(){var e=this.ngeoStateManager_.getInitialNumberValue(i["a"].PermalinkParam.MAP_Z);return isNaN(e)?undefined:e};j.prototype.getMapCrosshair=function(){var e=this.ngeoStateManager_.getInitialBooleanValue(i["a"].PermalinkParam.MAP_CROSSHAIR);return e===undefined?this.crosshairEnabledByDefault_:e};j.prototype.setMapCrosshair=function(e){var t=void 0;if(e){t=e}else{t=this.map_.getView().getCenter()}y["a"].assertArray(t);if(this.crosshairFeature_){this.featureOverlay_.removeFeature(this.crosshairFeature_)}this.crosshairFeature_=new S["a"](new x["a"](t));this.crosshairFeature_.setStyle(this.crosshairStyle_);this.featureOverlay_.addFeature(this.crosshairFeature_)};j.prototype.getMapTooltip=function(){return this.ngeoStateManager_.getInitialStringValue(i["a"].PermalinkParam.MAP_TOOLTIP)};j.prototype.setMapTooltip=function(t,r){var i=void 0;if(r){i=r}else{i=this.map_.getView().getCenter()}y["a"].assertArray(i);var n=e("<div/>",{class:"gmf-permalink-tooltip",text:t})[0];if(this.mapTooltip_!==null){this.map_.removeOverlay(this.mapTooltip_)}this.mapTooltip_=new o["a"]({element:n,position:i});this.map_.addOverlay(this.mapTooltip_)};j.prototype.getFeatures=function(){var e=this.ngeoStateManager_.getInitialStringValue(i["a"].PermalinkParam.FEATURES);if(e!==undefined&&e!==""){return y["a"].assert(this.featureHashFormat_.readFeatures(e))}return[]};j.prototype.setDimensions=function(e){var t=this;var r=this.ngeoLocation_.getParamKeysWithPrefix(j.ParamPrefix.DIMENSIONS);for(var i=0;i<r.length;i++){var n=r[i];var a=this.ngeoLocation_.getParam(n);y["a"].assert(a);e[n.slice(j.ParamPrefix.DIMENSIONS.length)]=a}this.rootScope_.$watchCollection(function(){return e},function(e){var r={};for(var i in e){r[j.ParamPrefix.DIMENSIONS+i]=e[i]}t.ngeoLocation_.updateParams(r)})};j.prototype.setMap=function(e){var t=this;if(e===this.map_){return}if(this.map_){this.unregisterMap_();this.map_=null}if(e){this.map_=e;if(this.gmfObjectEditingManager_){this.gmfObjectEditingManager_.getFeature().then(function(r){t.registerMap_(e,r)})}else{this.registerMap_(e,null)}}};j.prototype.registerMap_=function(e,t){var r=this;var n=e.getView();var a=void 0;var o=typeof t!=="undefined"&&t!==null?t.getGeometry():undefined;if(o){var s=e.getSize();y["a"].assert(s);var l=void 0;if(o instanceof x["a"]||o instanceof C["a"]){l=this.pointRecenterZoom_}n.fit(o.getExtent(),{size:s,maxZoom:l})}else{var u=this.ngeoStateManager_.getInitialBooleanValue(c["a"].Permalink3dParam.ENABLED);if(!u){a=this.getMapCenter();if(a){n.setCenter(a)}var f=this.getMapZoom();if(f!==undefined){n.setZoom(f)}}}this.mapViewPropertyChangeEventKey_=w["a"](n,"propertychange",this.ngeoDebounce_(function(){var e=n.getCenter();var t=n.getZoom();var a={};a[i["a"].PermalinkParam.MAP_X]=Math.round(e[0]);a[i["a"].PermalinkParam.MAP_Y]=Math.round(e[1]);a[i["a"].PermalinkParam.MAP_Z]=t;r.ngeoStateManager_.updateState(a)},300,true),this);if(this.getMapCrosshair()&&this.featureOverlay_){this.setMapCrosshair(a)}var h=this.getMapTooltip();if(h){this.setMapTooltip(h,a)}var d=this.getWfsPermalinkData_();if(d!==null&&this.ngeoWfsPermalink_){this.ngeoWfsPermalink_.issue(d,e)}};j.prototype.unregisterMap_=function(){y["a"].assert(this.mapViewPropertyChangeEventKey_,"Key should be thruthy");w["e"](this.mapViewPropertyChangeEventKey_);this.mapViewPropertyChangeEventKey_=null};j.prototype.getBackgroundLayer=function(e){var t=this.ngeoStateManager_.getInitialStringValue(i["a"].PermalinkParam.BG_LAYER);if(t!==undefined){for(var r=e,n=Array.isArray(r),a=0,r=n?r:r[Symbol.iterator]();;){var o;if(n){if(a>=r.length)break;o=r[a++]}else{a=r.next();if(a.done)break;o=a.value}var s=o;if(s.get("label")===t){return s}}}return null};j.prototype.handleBackgroundLayerManagerChange_=function(){if(!this.map_||!this.ngeoBackgroundLayerMgr_){return}var e=this.ngeoBackgroundLayerMgr_.get(this.map_);var t=e.get("label");y["a"].assertString(t);var r={};r[i["a"].PermalinkParam.BG_LAYER]=t;this.ngeoStateManager_.updateState(r)};j.prototype.refreshFirstLevelGroups=function(){if(!this.gmfTreeManager_){return}var e=this.gmfTreeManager_.rootCtrl.node.children;var t=e.map(function(e){return e.name});var r={};r[i["a"].PermalinkParam.TREE_GROUPS]=t.join(",");this.ngeoStateManager_.updateState(r)};j.prototype.themeInUrl_=function(e){var t=e.indexOf("theme");return t!=-1&&t==e.length-2};j.prototype.setThemeInUrl_=function(e){if(e){var t=this.ngeoLocation_.getPath().split("/");y["a"].assert(t.length>1);if(t[t.length-1]===""){t.splice(t.length-1)}if(this.themeInUrl_(t)){t[t.length-1]=e}else{t.push("theme",e)}this.ngeoLocation_.setPath(t.join("/"))}};j.prototype.defaultThemeName=function(){var e=this.ngeoLocation_.getPath().split("/");if(this.themeInUrl_(e)){return decodeURI(e[e.length-1])}var t=this.ngeoStateManager_.getInitialStringValue("theme");if(t){return t}var r=this.defaultThemeNameFromFunctionalities();if(r!==null){return r}if(this.defaultTheme_){return this.defaultTheme_}return null};j.prototype.defaultThemeNameFromFunctionalities=function(){if(!this.gmfUser_){return null}var e=this.gmfUser_.functionalities;if(e&&"default_theme"in e){var t=e.default_theme;if(t.length>0){return t[0]}}return null};j.prototype.initLayers_=function(){var e=this;var t=window.location.href;var r=false;if(!this.gmfThemes_){return}this.gmfThemes_.getThemesObject().then(function(n){var o=e.defaultThemeName();y["a"].assert(o!==null);if(e.gmfThemeManager_){e.gmfThemeManager_.setThemeName(e.gmfThemeManager_.modeFlush?o:"")}var s=[];var l=void 0;var u=e.ngeoLocation_.getParam(i["a"].PermalinkParam.TREE_GROUPS);if(u===undefined){y["a"].assertString(o);l=a["a"].findThemeByName(n,o);if(l){s=l.children}}else{u.split(",").forEach(function(e){var t=a["a"].findGroupByName(n,e);if(t){s.push(t)}else{r=true}})}if(e.gmfTreeManager_){e.gmfTreeManager_.setFirstLevelGroups(s)}e.$timeout_(function(){if(!e.gmfTreeManager_||!e.gmfTreeManager_.rootCtrl){return}e.gmfTreeManager_.rootCtrl.traverseDepthFirst(function(t){if(t.isRoot){return}var i=e.ngeoStateManager_.getInitialNumberValue((t.parent.node.mixed?j.ParamPrefix.TREE_OPACITY:j.ParamPrefix.TREE_GROUP_OPACITY)+t.node.name);if(i!==undefined&&t.layer){t.layer.setOpacity(i)}if(t.parent.node&&t.parent.node.mixed&&t.node.children==undefined){var n=e.ngeoStateManager_.getInitialBooleanValue(j.ParamPrefix.TREE_ENABLE+t.node.name);if(n!==undefined){t.setState(n?"on":"off",false)}}else if(!t.node.mixed&&t.depth==1){var a=e.ngeoStateManager_.getInitialStringValue(j.ParamPrefix.TREE_GROUP_LAYERS+t.node.name);if(a!==undefined){var o=a.split(",");t.traverseDepthFirst(function(e){if(e.node.children===undefined){var t=b["f"](o,e.node.name);if(t){o.splice(o.indexOf(e.node.name),1)}e.setState(t?"on":"off",false)}});if(o.length>0){r=true}}}});var i=e.gmfTreeManager_.rootCtrl.children;i.forEach(function(t){t.traverseDepthFirst(function(r){if(r.getState()!=="indeterminate"){e.rootScope_.$broadcast("ngeo-layertree-state",r,t);return m["a"].VisitorDecision.STOP}})});if(r&&e.user_.role_id===null){e.rootScope_.$broadcast("authenticationrequired",{url:t})}})})};j.prototype.handleNgeoFeaturesAdd_=function(e){var t=e.element;y["a"].assertInstanceof(t,S["a"]);this.addNgeoFeature_(t)};j.prototype.handleNgeoFeaturesRemove_=function(e){var t=e.element;y["a"].assertInstanceof(t,S["a"]);this.removeNgeoFeature_(t)};j.prototype.addNgeoFeature_=function(e){var t=_["c"](e);this.ngeoEventHelper_.addListenerKey(t,w["a"](e,"change",this.ngeoDebounce_(this.handleNgeoFeaturesChange_,250,true),this))};j.prototype.removeNgeoFeature_=function(e){var t=_["c"](e);this.ngeoEventHelper_.clearListenerKey(t);this.handleNgeoFeaturesChange_()};j.prototype.handleNgeoFeaturesChange_=function(){if(!this.ngeoFeatures_){return}var e=this.ngeoFeatures_.getArray();var t=this.featureHashFormat_.writeFeatures(e);var r={};r[i["a"].PermalinkParam.FEATURES]=t;this.ngeoStateManager_.updateState(r)};j.prototype.getWfsPermalinkData_=function(){var e=this.ngeoLocation_.getParam(i["a"].PermalinkParam.WFS_LAYER);if(!e){return null}var t=this.ngeoLocation_.getParamAsInt(i["a"].PermalinkParam.WFS_NGROUPS);var r=this.ngeoLocation_.getParamKeysWithPrefix(j.ParamPrefix.WFS);var n=[];var a=void 0;if(t===undefined){a=this.createFilterGroup_(j.ParamPrefix.WFS,r);if(a!==null){n.push(a)}}else{for(var o=0;o<t;o++){a=this.createFilterGroup_(j.ParamPrefix.WFS+o+"_",r);if(a!==null){n.push(a)}}}if(n.length==0){return null}var s=this.ngeoLocation_.getParam(i["a"].PermalinkParam.WFS_SHOW_FEATURES);var l=!(s==="0"||s==="false");return{wfsType:e,showFeatures:l,filterGroups:n}};j.prototype.createFilterGroup_=function(e,t){var r=this;var n=[];t.forEach(function(t){if(t==i["a"].PermalinkParam.WFS_LAYER||t==i["a"].PermalinkParam.WFS_SHOW_FEATURES||t==i["a"].PermalinkParam.WFS_NGROUPS||t.indexOf(e)!=0){return}var a=r.ngeoLocation_.getParam(t);if(!a){return}var o=a;if(a.indexOf(",")>-1){o=a.split(",")}var s={property:t.replace(e,""),condition:o};n.push(s)});return n.length>0?{filters:n}:null};j.prototype.initExternalDataSources_=function(){var e=this;var t=y["a"].assert(this.ngeoQuerent_);var r=y["a"].assert(this.gmfExternalDataSourcesManager_);var n=[];var a=this.ngeoStateManager_.getInitialValue(i["a"].PermalinkParam.EXTERNAL_DATASOURCES_NAMES);var o=this.ngeoStateManager_.getInitialValue(i["a"].PermalinkParam.EXTERNAL_DATASOURCES_URLS);if(a&&o){var s=a.split(j.ExtDSSeparator.LIST);var l=o.split(j.ExtDSSeparator.LIST);var c=function r(i,a){var o=s[i];if(!o){return"break"}var c=o.split(j.ExtDSSeparator.NAMES);var f=l[i];var h=u["a"].guessServiceTypeByUrl(f);var d=e.q_.defer();n.push(d.promise);if(h===u["a"].Type.WMS){t.wmsGetCapabilities(f).then(function(e){d.resolve({capabilities:e,groupLayerNames:c,serviceType:h,url:f})},function(){d.reject({groupLayerNames:c,serviceType:h,url:f})})}else if(h===u["a"].Type.WMTS){t.wmtsGetCapabilities(f).then(function(e){d.resolve({capabilities:e,groupLayerNames:c,serviceType:h,url:f})},function(){d.reject({groupLayerNames:c,serviceType:h,url:f})})}else{d.reject({groupLayerNames:c,serviceType:h,url:f})}};for(var f=0,h=l.length;f<h;f++){var d=c(f,h);if(d==="break")break}}return this.q_.all(n).then(function(e){for(var i=e,n=Array.isArray(i),a=0,i=n?i:i[Symbol.iterator]();;){var o;if(n){if(a>=i.length)break;o=i[a++]}else{a=i.next();if(a.done)break;o=a.value}var s=o;if(s.serviceType===u["a"].Type.WMS){for(var l=s.groupLayerNames,c=Array.isArray(l),f=0,l=c?l:l[Symbol.iterator]();;){var h;if(c){if(f>=l.length)break;h=l[f++]}else{f=l.next();if(f.done)break;h=f.value}var d=h;var p=t.wmsFindLayerCapability(s.capabilities["Capability"]["Layer"]["Layer"],d);if(p){r.createAndAddDataSourceFromWMSCapability(p,s.capabilities,s.url)}else{}}}else if(s.serviceType===u["a"].Type.WMTS){for(var v=s.groupLayerNames,g=Array.isArray(v),m=0,v=g?v:v[Symbol.iterator]();;){var y;if(g){if(m>=v.length)break;y=v[m++]}else{m=v.next();if(m.done)break;y=m.value}var _=y;var b=t.wmtsFindLayerCapability(s.capabilities["Contents"]["Layer"],_);if(b){r.createAndAddDataSourceFromWMTSCapability(b,s.capabilities,s.url)}else{}}}}},function(e){})};j.prototype.handleExternalDSGroupCollectionAdd_=function(e){var t=e.element;y["a"].assertInstanceof(t,l["a"]);this.registerExternalDSGroup_(t);this.setExternalDataSourcesState_()};j.prototype.registerExternalDSGroup_=function(e){w["a"](e.dataSourcesCollection,"add",this.setExternalDataSourcesState_,this);w["a"](e.dataSourcesCollection,"remove",this.setExternalDataSourcesState_,this)};j.prototype.containsLayerName=function(e,t){if(e instanceof M["a"]){for(var r=e.getLayers().getArray(),i=Array.isArray(r),n=0,r=i?r:r[Symbol.iterator]();;){var a;if(i){if(n>=r.length)break;a=r[n++]}else{n=r.next();if(n.done)break;a=n.value}var o=a;y["a"].assert(o);if(this.containsLayerName(o,t)){return true}}return false}else{return e.get("layerNodeName")==t}};j.prototype.handleExternalDSGroupCollectionRemove_=function(e){var t=e.element;y["a"].assertInstanceof(t,l["a"]);this.unregisterExternalDSGroup_(t);this.setExternalDataSourcesState_()};j.prototype.unregisterExternalDSGroup_=function(e){w["c"](e.dataSourcesCollection,"add",this.setExternalDataSourcesState_,this);w["c"](e.dataSourcesCollection,"remove",this.setExternalDataSourcesState_,this)};j.prototype.setExternalDataSourcesState_=function(){var e=this;if(this.setExternalDataSourcesStatePromise_){this.$timeout_.cancel(this.setExternalDataSourcesStatePromise_)}this.setExternalDataSourcesStatePromise_=this.$timeout_(function(){var t;var r=[];var n=[];for(var a=e.gmfExternalDataSourcesManager_.wmsGroups,o=Array.isArray(a),s=0,a=o?a:a[Symbol.iterator]();;){var l;if(o){if(s>=a.length)break;l=a[s++]}else{s=a.next();if(s.done)break;l=s.value}var c=l;n.push(c.url);var f=[];for(var h=c.dataSources,d=Array.isArray(h),p=0,h=d?h:h[Symbol.iterator]();;){var v;if(d){if(p>=h.length)break;v=h[p++]}else{p=h.next();if(p.done)break;v=p.value}var g=v;y["a"].assertInstanceof(g,u["a"]);var m=g.getOGCLayerNames()[0];f.push(m)}r.push(f.join(j.ExtDSSeparator.NAMES))}for(var _=e.gmfExternalDataSourcesManager_.wmtsGroups,b=Array.isArray(_),w=0,_=b?_:_[Symbol.iterator]();;){var S;if(b){if(w>=_.length)break;S=_[w++]}else{w=_.next();if(w.done)break;S=w.value}var C=S;n.push(C.url);var x=[];for(var O=C.dataSources,T=Array.isArray(O),E=0,O=T?O:O[Symbol.iterator]();;){var M;if(T){if(E>=O.length)break;M=O[E++]}else{E=O.next();if(E.done)break;M=E.value}var A=M;y["a"].assert(A.wmtsLayer);x.push(A.wmtsLayer)}r.push(x.join(j.ExtDSSeparator.NAMES))}e.ngeoStateManager_.updateState((t={},t[i["a"].PermalinkParam.EXTERNAL_DATASOURCES_NAMES]=r.join(j.ExtDSSeparator.LIST),t[i["a"].PermalinkParam.EXTERNAL_DATASOURCES_URLS]=n.join(j.ExtDSSeparator.LIST),t));e.setExternalDataSourcesStatePromise_=null})};j.prototype.cleanParams=function(e){var t=this;var r=y["a"].assert(this.ngeoLocation_.getParamKeys());for(var i=r,n=Array.isArray(i),a=0,i=n?i:i[Symbol.iterator]();;){var o;if(n){if(a>=i.length)break;o=i[a++]}else{a=i.next();if(a.done)break;o=a.value}var s=o;if(s.startsWith(j.ParamPrefix.TREE_GROUP_LAYERS)){var l=s.substring(j.ParamPrefix.TREE_GROUP_LAYERS.length);for(var u=e,c=Array.isArray(u),f=0,u=c?u:u[Symbol.iterator]();;){var h;if(c){if(f>=u.length)break;h=u[f++]}else{f=u.next();if(f.done)break;h=f.value}var d=h;if(d.name==l){this.ngeoStateManager_.deleteParam(s);break}}}if(s.startsWith(j.ParamPrefix.TREE_GROUP_OPACITY)){var p=s.substring(j.ParamPrefix.TREE_GROUP_OPACITY.length);for(var v=e,g=Array.isArray(v),m=0,v=g?v:v[Symbol.iterator]();;){var _;if(g){if(m>=v.length)break;_=v[m++]}else{m=v.next();if(m.done)break;_=m.value}var b=_;if(b.name==p){this.ngeoStateManager_.deleteParam(s);break}}}}this.$timeout_(function(){if(!t.map_){return}var e=t.map_.getLayerGroup();y["a"].assert(e);for(var i=r,n=Array.isArray(i),a=0,i=n?i:i[Symbol.iterator]();;){var o;if(n){if(a>=i.length)break;o=i[a++]}else{a=i.next();if(a.done)break;o=a.value}var s=o;if(s.startsWith(j.ParamPrefix.TREE_ENABLE)){var l=s.substring(j.ParamPrefix.TREE_ENABLE.length);if(!t.containsLayerName(e,l)){t.ngeoStateManager_.deleteParam(s)}}if(s.startsWith(j.ParamPrefix.TREE_OPACITY)){var u=s.substring(j.ParamPrefix.TREE_OPACITY.length);if(!t.containsLayerName(e,u)){t.ngeoStateManager_.deleteParam(s)}}}})};j.module=angular.module("gmfPermalink",[n["a"].module.name,a["a"].module.name,s["a"].name,m["a"].module.name,d["a"].name,p["a"].module.name,v["a"].name]);j.module.service("gmfPermalink",j);j.OpenLayersLayerProperties={OPACITY:"opacity"};j.ParamPrefix={DIMENSIONS:"dim_",TREE_ENABLE:"tree_enable_",TREE_GROUP_LAYERS:"tree_group_layers_",TREE_GROUP_OPACITY:"tree_group_opacity_",TREE_OPACITY:"tree_opacity_",WFS:"wfs_"};j.ExtDSSeparator={LIST:",",NAMES:";"};j.module.value("gmfPermalinkOptions",{});(function(){var e=[];for(var t in j.ParamPrefix){e.push(new RegExp(j.ParamPrefix[t]+".*"))}for(var r in i["a"].PermalinkParam){e.push(new RegExp(j.ParamPrefix[r]))}g["a"].module.value("ngeoUsedKeyRegexp",e)})();t["a"]=j}).call(this,r(24))},function(e,t,r){"use strict";var i=r(146);var n=function e(t,r){this.http_=t;this.baseUrl_=r;this.promises_={}};n.$inject=["$http","gmfLayersUrl"];n.$inject=["$http","gmfLayersUrl"];n.prototype.getAttributes=function(e){if(!this.promises_[e]){var t=this.baseUrl_+"/"+e+"/md.xsd";this.promises_[e]=this.http_.get(t).then(this.handleGetAttributes_.bind(this))}return this.promises_[e]};n.prototype.handleGetAttributes_=function(e){return(new i["a"]).read(e.data)};n.module=angular.module("gmfXSDAttributes",[]);n.module.service("gmfXSDAttributes",n);t["a"]=n},function(e,t,r){"use strict";var i=r(1);var n=r(137);var a=function e(t,r){var n=this;this.initialState={};this.ngeoLocation=t;this.usedKeyRegexp=r;this.useLocalStorage_;this.setUseLocalStorage(false);var a=t.getParamKeys().filter(function(e){return e!="debug"&&e!="no_redirect"});if(a.length===0){if(this.useLocalStorage_){var o=function e(t){i["a"].assert(t);n.usedKeyRegexp.some(function(e){if(t.match(e)){var r=window.localStorage[t];if(r!==undefined||r!==null){n.initialState[t]=r}else{n.initialState[t]=""}return true}})};for(var s in window.localStorage){o(s)}}}else{a.forEach(function(e){n.usedKeyRegexp.some(function(t){if(e.match(t)){var r=n.ngeoLocation.getParam(e);if(r!==undefined){n.initialState[e]=r;return true}}})})}};a.$inject=["ngeoLocation","ngeoUsedKeyRegexp"];a.$inject=["ngeoLocation","ngeoUsedKeyRegexp"];a.prototype.setUseLocalStorage=function(e){this.useLocalStorage_=e;if(this.useLocalStorage_){try{if("localStorage"in window){window.localStorage["test"]="";delete window.localStorage["test"]}else{this.useLocalStorage_=false}}catch(e){console.error(e);this.useLocalStorage_=false}}return this.useLocalStorage_};a.prototype.getInitialValue=function(e){return this.initialState[e]};a.prototype.getInitialStringValue=function(e){var t=this.initialState[e];if(t===undefined){return undefined}return t};a.prototype.getInitialNumberValue=function(e){var t=this.initialState[e];if(t===undefined){return undefined}return parseFloat(t)};a.prototype.getInitialBooleanValue=function(e){var t=this.initialState[e];if(t===undefined){return undefined}return t==="true"};a.prototype.updateState=function(e){this.ngeoLocation.updateParams(e);if(this.useLocalStorage_){for(var t in e){i["a"].assert(t);var r=e[t];i["a"].assert(r!==undefined);window.localStorage[t]=r}}};a.prototype.deleteParam=function(e){this.ngeoLocation.deleteParam(e);if(this.useLocalStorage_){delete window.localStorage[e]}};a.module=angular.module("ngeoStateManager",[n["a"].module.name]);a.module.service("ngeoStateManager",a);a.module.value("ngeoUsedKeyRegexp",[new RegExp(".*")]);t["a"]=a},function(e,t,r){"use strict";r.d(t,"c",function(){return m});r.d(t,"a",function(){return y});r.d(t,"d",function(){return _});r.d(t,"b",function(){return b});var i=r(87);var n=r(20);var a=r(30);var o=r(63);var s=r(6);var l=r(37);var u=r(10);var c=r(26);var f=r(140);var h=r(32);function d(){return this.hours()%12||12}function p(){return this.hours()||24}Object(n["a"])("H",["HH",2],0,"hour");Object(n["a"])("h",["hh",2],0,d);Object(n["a"])("k",["kk",2],0,p);Object(n["a"])("hmm",0,0,function(){return""+d.apply(this)+Object(f["a"])(this.minutes(),2)});Object(n["a"])("hmmss",0,0,function(){return""+d.apply(this)+Object(f["a"])(this.minutes(),2)+Object(f["a"])(this.seconds(),2)});Object(n["a"])("Hmm",0,0,function(){return""+this.hours()+Object(f["a"])(this.minutes(),2)});Object(n["a"])("Hmmss",0,0,function(){return""+this.hours()+Object(f["a"])(this.minutes(),2)+Object(f["a"])(this.seconds(),2)});function v(e,t){Object(n["a"])(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}v("a",true);v("A",false);Object(a["a"])("hour","h");Object(o["a"])("hour",13);function g(e,t){return t._meridiemParse}Object(s["a"])("a",g);Object(s["a"])("A",g);Object(s["a"])("H",s["d"]);Object(s["a"])("h",s["d"]);Object(s["a"])("k",s["d"]);Object(s["a"])("HH",s["d"],s["h"]);Object(s["a"])("hh",s["d"],s["h"]);Object(s["a"])("kk",s["d"],s["h"]);Object(s["a"])("hmm",s["j"]);Object(s["a"])("hmmss",s["l"]);Object(s["a"])("Hmm",s["j"]);Object(s["a"])("Hmmss",s["l"]);Object(l["a"])(["H","HH"],u["b"]);Object(l["a"])(["k","kk"],function(e,t,r){var i=Object(c["a"])(e);t[u["b"]]=i===24?0:i});Object(l["a"])(["a","A"],function(e,t,r){r._isPm=r._locale.isPM(e);r._meridiem=e});Object(l["a"])(["h","hh"],function(e,t,r){t[u["b"]]=Object(c["a"])(e);Object(h["a"])(r).bigHour=true});Object(l["a"])("hmm",function(e,t,r){var i=e.length-2;t[u["b"]]=Object(c["a"])(e.substr(0,i));t[u["d"]]=Object(c["a"])(e.substr(i));Object(h["a"])(r).bigHour=true});Object(l["a"])("hmmss",function(e,t,r){var i=e.length-4;var n=e.length-2;t[u["b"]]=Object(c["a"])(e.substr(0,i));t[u["d"]]=Object(c["a"])(e.substr(i,2));t[u["f"]]=Object(c["a"])(e.substr(n));Object(h["a"])(r).bigHour=true});Object(l["a"])("Hmm",function(e,t,r){var i=e.length-2;t[u["b"]]=Object(c["a"])(e.substr(0,i));t[u["d"]]=Object(c["a"])(e.substr(i))});Object(l["a"])("Hmmss",function(e,t,r){var i=e.length-4;var n=e.length-2;t[u["b"]]=Object(c["a"])(e.substr(0,i));t[u["d"]]=Object(c["a"])(e.substr(i,2));t[u["f"]]=Object(c["a"])(e.substr(n))});function m(e){return(e+"").toLowerCase().charAt(0)==="p"}var y=/[ap]\.?m?\.?/i;function _(e,t,r){if(e>11){return r?"pm":"PM"}else{return r?"am":"AM"}}var b=Object(i["b"])("Hours",true)},function(e,t,r){"use strict";var i=r(66);var n=r(332);var a=r.n(n);var o=angular.module("ngeoDownload",[]);o.factory_=function(){function e(e,t,r){var a=r!==undefined&&!i["a"].isSafari()?r:"text/plain;charset=utf-8";var o=new Blob([e],{type:a});Object(n["saveAs"])(o,t)}return e};o.factory("ngeoDownload",o.factory_);t["a"]=o},function(e,t,r){"use strict";var i=function e(t,r){this.$http_=t;this.url_=r};i.$inject=["$http","gmfRasterUrl"];i.$inject=["$http","gmfRasterUrl"];i.prototype.getRaster=function(e,t){var r=t||{};r[i.Param.X]=e[0];r[i.Param.Y]=e[1];return this.$http_.get(this.url_,{params:r}).then(this.handleGetRaster_.bind(this))};i.prototype.handleGetRaster_=function(e){return e.data};i.Param={X:"lon",Y:"lat"};i.module=angular.module("gmfRaster",[]);i.module.service("gmfRaster",i);t["a"]=i},function(e,t,r){"use strict";var i=r(537);var n=r.n(i);var a=r(534);var o=r.n(a);var s=r(1);function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var u=angular.module("ngeoModal",[]);u.component_={template:'<div class="modal fade" tabindex="-1" role="dialog">\n    <div class="modal-dialog">\n      <div class="modal-content">\n        <ng-transclude></ng-transclude>\n      </div>\n    </div>\n  </div>',require:{ngModel:"ngModel"},transclude:true,controller:"ngeoModalController",bindings:{resizable:"<ngeoModalResizable",closable:"<ngeoModalClosable"}};u.component("ngeoModal",u.component_);u.Controller_=function(){e.$inject=["$scope","$element"];function e(t,r){l(this,e);this.$element_=r;this.$scope_=t;this.modal_;this.closable;this.resizable;this.ngModel}e.prototype.$onInit=function e(){var t=this;this.closable=this.closable!==false;this.modal_=this.$element_.children();if(!this.closable){this.modal_.attr("data-keyboard",false);this.modal_.attr("data-backdrop","static")}this.resizable=!!this.resizable;var r=this.modal_.find(".modal-dialog");r.draggable();if(this.resizable){r.resizable()}this.ngModel.$render=function(){t.modal_.modal(t.ngModel.$viewValue?"show":"hide")};this.modal_.on("shown.bs.modal hidden.bs.modal",function(e){var r=e.type;s["a"].assert(r=="shown"||r=="hidden");t.ngModel.$setViewValue(r=="shown")})};e.prototype.$onDestroy=function e(){this.modal_.modal("hide");this.modal_.modal("removeBackdrop");var t=this.modal_.find(".modal-dialog");t.draggable("destroy");if(this.resizable){t.resizable("destroy")}};return e}();u.controller("ngeoModalController",u.Controller_);t["a"]=u},function(e,t,r){"use strict";var i=r(367);var n=r.n(i);var a=r(1);var o=r(71);var s=r(3);var l=function e(t){o["a"].call(this);this.timeout_=t;var r=angular.element('<div class="ngeo-notification"></div>');angular.element(document.body).append(r);this.container_=r;this.cache_={}};l.$inject=["$timeout"];l.$inject=["$timeout"];s["d"](l,o["a"]);l.DEFAULT_DELAY_=7e3;l.prototype.notify=function(e){this.show(e)};l.prototype.clear=function(){for(var e in this.cache_){this.clearMessageByCacheItem_(this.cache_[parseInt(e,10)])}};l.prototype.showMessage=function(e){var t=this;var r=e.type;a["a"].assertString(r,"Type should be set.");var i=["alert","fade"];switch(r){case o["a"].Type.ERROR:i.push("alert-danger");break;case o["a"].Type.INFORMATION:i.push("alert-info");break;case o["a"].Type.SUCCESS:i.push("alert-success");break;case o["a"].Type.WARNING:i.push("alert-warning");break;default:break}var n=angular.element('<div class="'+i.join(" ")+'"></div>');var u=void 0;if(e.target){u=angular.element(e.target)}else{u=this.container_}u.append(n);n.html(e.msg).addClass("in");var c=e.delay!==undefined?e.delay:l.DEFAULT_DELAY_;var f={el:n};var h=s["c"](n);f.promise=this.timeout_(function(){n.alert("close");delete t.cache_[h]},c);this.cache_[h]=f};l.prototype.clearMessageByCacheItem_=function(e){var t=e.el;var r=e.promise;var i=s["c"](t);t.alert("close");this.timeout_.cancel(r);delete this.cache_[i]};l.CacheItem;l.module=angular.module("ngeoNotification",[]);l.module.service("ngeoNotification",l);t["a"]=l},function(e,t,r){"use strict";(function(e){var i=r(69);var n=r(102);function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var l=function(t){r.$inject=["$http","$injector","$rootScope","authenticationBaseUrl","gmfUser"];s(r,t);function r(e,i,n,s,l){a(this,r);var u=o(this,t.call(this));u.$http_=e;u.$rootScope_=n;u.baseUrl_=s.replace(/\/$/,"");u.user_=l;u.noReloadRole_=i.has("gmfAuthenticationNoReloadRole")?i.get("gmfAuthenticationNoReloadRole"):null;u.load_();return u}r.prototype.load_=function e(){var t=this.baseUrl_+"/"+r.RouteSuffix.IS_LOGGED_IN;this.$http_.get(t,{withCredentials:true}).then(this.handleLogin_.bind(this,true))};r.prototype.changePassword=function t(i,n,a){var o=this;var s=this.baseUrl_+"/"+r.RouteSuffix.CHANGE_PASSWORD;return this.$http_.post(s,e.param({oldPassword:i,newPassword:n,confirmNewPassword:a}),{headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:true}).then(function(e){o.user_.is_password_changed=true;o.$rootScope_.$digest()}.bind(this))};r.prototype.login=function t(i,n){var a=this.baseUrl_+"/"+r.RouteSuffix.LOGIN;return this.$http_.post(a,e.param({login:i,password:n}),{headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:true}).then(this.handleLogin_.bind(this,false))};r.prototype.logout=function e(){var t=this;var i=this.user_["role_name"]===this.noReloadRole_;var n=this.baseUrl_+"/"+r.RouteSuffix.LOGOUT;return this.$http_.get(n,{withCredentials:true}).then(function(){t.resetUser_(i)})};r.prototype.resetPassword=function t(i){var n=this.baseUrl_+"/"+r.RouteSuffix.RESET_PASSWORD;var a=function(e){var t=e.data;return t}.bind(this);return this.$http_.post(n,e.param({login:i}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(a)};r.prototype.getFunctionalities=function e(){return this.user_.functionalities};r.prototype.getRoleId=function e(){return this.user_.role_id};r.prototype.handleLogin_=function e(t,r){var n=r.data;this.setUser_(n,!t);if(t){var a=new i["a"]("ready",{user:this.user_});this.dispatchEvent(a)}return r};r.prototype.setUser_=function e(t,r){for(var n in t){this.user_[n]=t[n]}if(r&&t.username!==undefined){var a=new i["a"]("login",{user:this.user_});this.dispatchEvent(a)}};r.prototype.resetUser_=function e(t){t=t||false;for(var r in this.user_){this.user_[r]=null}var n=new i["a"]("logout",{user:this.user_});this.dispatchEvent(n);if(!t){this.load_()}};return r}(n["a"]);l.RouteSuffix={CHANGE_PASSWORD:"loginchange",IS_LOGGED_IN:"loginuser",LOGIN:"login",LOGOUT:"logout",RESET_PASSWORD:"loginresetpassword"};l.module=angular.module("gmfAuthenticationService",[]);l.module.service("gmfAuthenticationService",l);l.module.value("gmfUser",{functionalities:null,is_password_changed:null,role_id:null,role_name:null,username:null});t["a"]=l}).call(this,r(24))},function(e,t,r){"use strict";var i=function(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees");e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees");e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");e.WGS84=e["EPSG:4326"];e["EPSG:3785"]=e["EPSG:3857"];e.GOOGLE=e["EPSG:3857"];e["EPSG:900913"]=e["EPSG:3857"];e["EPSG:102113"]=e["EPSG:3857"]};var n=1;var a=2;var o=4;var s=5;var l=484813681109536e-20;var u=Math.PI/2;var c=.16666666666666666;var f=.04722222222222222;var h=.022156084656084655;var d=1e-10;var p=.017453292519943295;var v=57.29577951308232;var g=Math.PI/4;var m=Math.PI*2;var y=3.14159265359;var _={};_.greenwich=0;_.lisbon=-9.131906111111;_.paris=2.337229166667;_.bogota=-74.080916666667;_.madrid=-3.687938888889;_.rome=12.452333333333;_.bern=7.439583333333;_.jakarta=106.807719444444;_.ferro=-17.666666666667;_.brussels=4.367975;_.stockholm=18.058277777778;_.athens=23.7163375;_.oslo=10.722916666667;var b={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var w=/[\s_\-\/\(\)]/g;function S(e,t){if(e[t]){return e[t]}var r=Object.keys(e);var i=t.toLowerCase().replace(w,"");var n=-1;var a,o;while(++n<r.length){a=r[n];o=a.toLowerCase().replace(w,"");if(o===i){return e[a]}}}var C=function(e){var t={};var r=e.split("+").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,t){var r=t.split("=");r.push(true);e[r[0].toLowerCase()]=r[1];return e},{});var i,n,a;var o={proj:"projName",datum:"datumCode",rf:function(e){t.rf=parseFloat(e)},lat_0:function(e){t.lat0=e*p},lat_1:function(e){t.lat1=e*p},lat_2:function(e){t.lat2=e*p},lat_ts:function(e){t.lat_ts=e*p},lon_0:function(e){t.long0=e*p},lon_1:function(e){t.long1=e*p},lon_2:function(e){t.long2=e*p},alpha:function(e){t.alpha=parseFloat(e)*p},lonc:function(e){t.longc=e*p},x_0:function(e){t.x0=parseFloat(e)},y_0:function(e){t.y0=parseFloat(e)},k_0:function(e){t.k0=parseFloat(e)},k:function(e){t.k0=parseFloat(e)},a:function(e){t.a=parseFloat(e)},b:function(e){t.b=parseFloat(e)},r_a:function(){t.R_A=true},zone:function(e){t.zone=parseInt(e,10)},south:function(){t.utmSouth=true},towgs84:function(e){t.datum_params=e.split(",").map(function(e){return parseFloat(e)})},to_meter:function(e){t.to_meter=parseFloat(e)},units:function(e){t.units=e;var r=S(b,e);if(r){t.to_meter=r.to_meter}},from_greenwich:function(e){t.from_greenwich=e*p},pm:function(e){var r=S(_,e);t.from_greenwich=(r?r:parseFloat(e))*p},nadgrids:function(e){if(e==="@null"){t.datumCode="none"}else{t.nadgrids=e}},axis:function(e){var r="ewnsud";if(e.length===3&&r.indexOf(e.substr(0,1))!==-1&&r.indexOf(e.substr(1,1))!==-1&&r.indexOf(e.substr(2,1))!==-1){t.axis=e}}};for(i in r){n=r[i];if(i in o){a=o[i];if(typeof a==="function"){a(n)}else{t[a]=n}}else{t[i]=n}}if(typeof t.datumCode==="string"&&t.datumCode!=="WGS84"){t.datumCode=t.datumCode.toLowerCase()}return t};var x=r(299);var O=r.n(x);function T(e){var t=this;if(arguments.length===2){var r=arguments[1];if(typeof r==="string"){if(r.charAt(0)==="+"){T[e]=C(arguments[1])}else{T[e]=O()(arguments[1])}}else{T[e]=r}}else if(arguments.length===1){if(Array.isArray(e)){return e.map(function(e){if(Array.isArray(e)){T.apply(t,e)}else{T(e)}})}else if(typeof e==="string"){if(e in T){return T[e]}}else if("EPSG"in e){T["EPSG:"+e.EPSG]=e}else if("ESRI"in e){T["ESRI:"+e.ESRI]=e}else if("IAU2000"in e){T["IAU2000:"+e.IAU2000]=e}else{console.log(e)}return}}i(T);var E=T;function M(e){return typeof e==="string"}function j(e){return e in E}var A=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function P(e){return A.some(function(t){return e.indexOf(t)>-1})}function k(e){return e[0]==="+"}function I(e){if(M(e)){if(j(e)){return E[e]}if(P(e)){return O()(e)}if(k(e)){return C(e)}}else{return e}}var D=I;var R=function(e,t){e=e||{};var r,i;if(!t){return e}for(i in t){r=t[i];if(r!==undefined){e[i]=r}}return e};var L=function(e,t,r){var i=e*t;return r/Math.sqrt(1-i*i)};var $=function(e){return e<0?-1:1};var N=function(e){return Math.abs(e)<=y?e:e-$(e)*m};var F=function(e,t,r){var i=e*r;var n=.5*e;i=Math.pow((1-i)/(1+i),n);return Math.tan(.5*(u-t))/i};var G=function(e,t){var r=.5*e;var i,n;var a=u-2*Math.atan(t);for(var o=0;o<=15;o++){i=e*Math.sin(a);n=u-2*Math.atan(t*Math.pow((1-i)/(1+i),r))-a;a+=n;if(Math.abs(n)<=1e-10){return a}}return-9999};function U(){var e=this.b/this.a;this.es=1-e*e;if(!("x0"in this)){this.x0=0}if(!("y0"in this)){this.y0=0}this.e=Math.sqrt(this.es);if(this.lat_ts){if(this.sphere){this.k0=Math.cos(this.lat_ts)}else{this.k0=L(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))}}else{if(!this.k0){if(this.k){this.k0=this.k}else{this.k0=1}}}}function H(e){var t=e.x;var r=e.y;if(r*v>90&&r*v<-90&&t*v>180&&t*v<-180){return null}var i,n;if(Math.abs(Math.abs(r)-u)<=d){return null}else{if(this.sphere){i=this.x0+this.a*this.k0*N(t-this.long0);n=this.y0+this.a*this.k0*Math.log(Math.tan(g+.5*r))}else{var a=Math.sin(r);var o=F(this.e,r,a);i=this.x0+this.a*this.k0*N(t-this.long0);n=this.y0-this.a*this.k0*Math.log(o)}e.x=i;e.y=n;return e}}function Y(e){var t=e.x-this.x0;var r=e.y-this.y0;var i,n;if(this.sphere){n=u-2*Math.atan(Math.exp(-r/(this.a*this.k0)))}else{var a=Math.exp(-r/(this.a*this.k0));n=G(this.e,a);if(n===-9999){return null}}i=N(this.long0+t/(this.a*this.k0));e.x=i;e.y=n;return e}var W=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];var V={init:U,forward:H,inverse:Y,names:W};function z(){}function q(e){return e}var B=["longlat","identity"];var X={init:z,forward:q,inverse:q,names:B};var K=[V,X];var Z={};var Q=[];function J(e,t){var r=Q.length;if(!e.names){console.log(t);return true}Q[r]=e;e.names.forEach(function(e){Z[e.toLowerCase()]=r});return this}function ee(e){if(!e){return false}var t=e.toLowerCase();if(typeof Z[t]!=="undefined"&&Q[Z[t]]){return Q[Z[t]]}}function te(){K.forEach(J)}var re={start:te,add:J,get:ee};var ie={};ie.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};ie.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};ie.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};ie.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};ie.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"};ie.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};ie.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};ie.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"};ie.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};ie.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};ie.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};ie.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"};ie.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};ie.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"};ie.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."};ie.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"};ie.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};ie.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};ie.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"};ie.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"};ie.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"};ie.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"};ie.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"};ie.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};ie.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};ie.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};ie.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};ie.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};ie.hough={a:6378270,rf:297,ellipseName:"Hough"};ie.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};ie.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};ie.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};ie.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};ie.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"};ie.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};ie.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};ie.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"};ie.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"};ie.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};ie.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};ie.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var ne=ie.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};ie.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function ae(e,t,r,i){var n=e*e;var a=t*t;var o=(n-a)/n;var s=0;if(i){e*=1-o*(c+o*(f+o*h));n=e*e;o=0}else{s=Math.sqrt(o)}var l=(n-a)/a;return{es:o,e:s,ep2:l}}function oe(e,t,r,i,n){if(!e){var a=S(ie,i);if(!a){a=ne}e=a.a;t=a.b;r=a.rf}if(r&&!t){t=(1-1/r)*e}if(r===0||Math.abs(e-t)<d){n=true;t=e}return{a:e,b:t,rf:r,sphere:n}}var se={};se.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};se.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};se.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};se.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};se.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};se.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};se.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};se.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"};se.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};se.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};se.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};se.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};se.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};se.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};se.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};se.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};se.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function le(e,t,r,i,u,c){var f={};if(e===undefined||e==="none"){f.datum_type=s}else{f.datum_type=o}if(t){f.datum_params=t.map(parseFloat);if(f.datum_params[0]!==0||f.datum_params[1]!==0||f.datum_params[2]!==0){f.datum_type=n}if(f.datum_params.length>3){if(f.datum_params[3]!==0||f.datum_params[4]!==0||f.datum_params[5]!==0||f.datum_params[6]!==0){f.datum_type=a;f.datum_params[3]*=l;f.datum_params[4]*=l;f.datum_params[5]*=l;f.datum_params[6]=f.datum_params[6]/1e6+1}}}f.a=r;f.b=i;f.es=u;f.ep2=c;return f}var ue=le;function ce(e,t){if(!(this instanceof ce)){return new ce(e)}t=t||function(e){if(e){throw e}};var r=D(e);if(typeof r!=="object"){t(e);return}var i=ce.projections.get(r.projName);if(!i){t(e);return}if(r.datumCode&&r.datumCode!=="none"){var n=S(se,r.datumCode);if(n){r.datum_params=n.towgs84?n.towgs84.split(","):null;r.ellps=n.ellipse;r.datumName=n.datumName?n.datumName:r.datumCode}}r.k0=r.k0||1;r.axis=r.axis||"enu";r.ellps=r.ellps||"wgs84";var a=oe(r.a,r.b,r.rf,r.ellps,r.sphere);var o=ae(a.a,a.b,a.rf,r.R_A);var s=r.datum||ue(r.datumCode,r.datum_params,a.a,a.b,o.es,o.ep2);R(this,r);R(this,i);this.a=a.a;this.b=a.b;this.rf=a.rf;this.sphere=a.sphere;this.es=o.es;this.e=o.e;this.ep2=o.ep2;this.datum=s;this.init();t(null,this)}ce.projections=re;ce.projections.start();var fe=ce;function he(e,t){if(e.datum_type!==t.datum_type){return false}else if(e.a!==t.a||Math.abs(e.es-t.es)>5e-11){return false}else if(e.datum_type===n){return e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]}else if(e.datum_type===a){return e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6]}else{return true}}function de(e,t,r){var i=e.x;var n=e.y;var a=e.z?e.z:0;var o;var s;var l;var c;if(n<-u&&n>-1.001*u){n=-u}else if(n>u&&n<1.001*u){n=u}else if(n<-u||n>u){return null}if(i>Math.PI){i-=2*Math.PI}s=Math.sin(n);c=Math.cos(n);l=s*s;o=r/Math.sqrt(1-t*l);return{x:(o+a)*c*Math.cos(i),y:(o+a)*c*Math.sin(i),z:(o*(1-t)+a)*s}}function pe(e,t,r,i){var n=1e-12;var a=n*n;var o=30;var s;var l;var c;var f;var h;var d;var p;var v;var g;var m;var y;var _;var b;var w=e.x;var S=e.y;var C=e.z?e.z:0;var x;var O;var T;s=Math.sqrt(w*w+S*S);l=Math.sqrt(w*w+S*S+C*C);if(s/r<n){x=0;if(l/r<n){O=u;T=-i;return{x:e.x,y:e.y,z:e.z}}}else{x=Math.atan2(S,w)}c=C/l;f=s/l;h=1/Math.sqrt(1-t*(2-t)*f*f);v=f*(1-t)*h;g=c*h;b=0;do{b++;p=r/Math.sqrt(1-t*g*g);T=s*v+C*g-p*(1-t*g*g);d=t*p/(p+T);h=1/Math.sqrt(1-d*(2-d)*f*f);m=f*(1-d)*h;y=c*h;_=y*v-m*g;v=m;g=y}while(_*_>a&&b<o);O=Math.atan(y/Math.abs(m));return{x:x,y:O,z:T}}function ve(e,t,r){if(t===n){return{x:e.x+r[0],y:e.y+r[1],z:e.z+r[2]}}else if(t===a){var i=r[0];var o=r[1];var s=r[2];var l=r[3];var u=r[4];var c=r[5];var f=r[6];return{x:f*(e.x-c*e.y+u*e.z)+i,y:f*(c*e.x+e.y-l*e.z)+o,z:f*(-u*e.x+l*e.y+e.z)+s}}}function ge(e,t,r){if(t===n){return{x:e.x-r[0],y:e.y-r[1],z:e.z-r[2]}}else if(t===a){var i=r[0];var o=r[1];var s=r[2];var l=r[3];var u=r[4];var c=r[5];var f=r[6];var h=(e.x-i)/f;var d=(e.y-o)/f;var p=(e.z-s)/f;return{x:h+c*d-u*p,y:-c*h+d+l*p,z:u*h-l*d+p}}}function me(e){return e===n||e===a}var ye=function(e,t,r){if(he(e,t)){return r}if(e.datum_type===s||t.datum_type===s){return r}if(e.es===t.es&&e.a===t.a&&!me(e.datum_type)&&!me(t.datum_type)){return r}r=de(r,e.es,e.a);if(me(e.datum_type)){r=ve(r,e.datum_type,e.datum_params)}if(me(t.datum_type)){r=ge(r,t.datum_type,t.datum_params)}return pe(r,t.es,t.a,t.b)};var _e=function(e,t,r){var i=r.x,n=r.y,a=r.z||0;var o,s,l;var u={};for(l=0;l<3;l++){if(t&&l===2&&r.z===undefined){continue}if(l===0){o=i;s="x"}else if(l===1){o=n;s="y"}else{o=a;s="z"}switch(e.axis[l]){case"e":u[s]=o;break;case"w":u[s]=-o;break;case"n":u[s]=o;break;case"s":u[s]=-o;break;case"u":if(r[s]!==undefined){u.z=o}break;case"d":if(r[s]!==undefined){u.z=-o}break;default:return null}}return u};var be=function(e){var t={x:e[0],y:e[1]};if(e.length>2){t.z=e[2]}if(e.length>3){t.m=e[3]}return t};var we=function(e){Se(e.x);Se(e.y)};function Se(e){if(typeof Number.isFinite==="function"){if(Number.isFinite(e)){return}throw new TypeError("coordinates must be finite numbers")}if(typeof e!=="number"||e!==e||!isFinite(e)){throw new TypeError("coordinates must be finite numbers")}}function Ce(e,t){return(e.datum.datum_type===n||e.datum.datum_type===a)&&t.datumCode!=="WGS84"||(t.datum.datum_type===n||t.datum.datum_type===a)&&e.datumCode!=="WGS84"}function xe(e,t,r){var i;if(Array.isArray(r)){r=be(r)}we(r);if(e.datum&&t.datum&&Ce(e,t)){i=new fe("WGS84");r=xe(e,i,r);e=i}if(e.axis!=="enu"){r=_e(e,false,r)}if(e.projName==="longlat"){r={x:r.x*p,y:r.y*p}}else{if(e.to_meter){r={x:r.x*e.to_meter,y:r.y*e.to_meter}}r=e.inverse(r)}if(e.from_greenwich){r.x+=e.from_greenwich}r=ye(e.datum,t.datum,r);if(t.from_greenwich){r={x:r.x-t.from_greenwich,y:r.y}}if(t.projName==="longlat"){r={x:r.x*v,y:r.y*v}}else{r=t.forward(r);if(t.to_meter){r={x:r.x/t.to_meter,y:r.y/t.to_meter}}}if(t.axis!=="enu"){return _e(t,true,r)}return r}var Oe=fe("WGS84");function Te(e,t,r){var i,n,a;if(Array.isArray(r)){i=xe(e,t,r);if(r.length===3){return[i.x,i.y,i.z]}else{return[i.x,i.y]}}else{n=xe(e,t,r);a=Object.keys(r);if(a.length===2){return n}a.forEach(function(e){if(e==="x"||e==="y"){return}n[e]=r[e]});return n}}function Ee(e){if(e instanceof fe){return e}if(e.oProj){return e.oProj}return fe(e)}function Me(e,t,r){e=Ee(e);var i=false;var n;if(typeof t==="undefined"){t=e;e=Oe;i=true}else if(typeof t.x!=="undefined"||Array.isArray(t)){r=t;t=e;e=Oe;i=true}t=Ee(t);if(r){return Te(e,t,r)}else{n={forward:function(r){return Te(e,t,r)},inverse:function(r){return Te(t,e,r)}};if(i){n.oProj=t}return n}}var je=Me;var Ae=r(259);var Pe=r.n(Ae);function ke(e,t,r){if(!(this instanceof ke)){return new ke(e,t,r)}if(Array.isArray(e)){this.x=e[0];this.y=e[1];this.z=e[2]||0}else if(typeof e==="object"){this.x=e.x;this.y=e.y;this.z=e.z||0}else if(typeof e==="string"&&typeof t==="undefined"){var i=e.split(",");this.x=parseFloat(i[0],10);this.y=parseFloat(i[1],10);this.z=parseFloat(i[2],10)||0}else{this.x=e;this.y=t;this.z=r||0}console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}ke.fromMGRS=function(e){return new ke(Object(Ae["toPoint"])(e))};ke.prototype.toMGRS=function(e){return Object(Ae["forward"])([this.x,this.y],e)};var Ie=ke;var De=r(359);var Re=1;var Le=.25;var $e=.046875;var Ne=.01953125;var Fe=.01068115234375;var Ge=.75;var Ue=.46875;var He=.013020833333333334;var Ye=.007120768229166667;var We=.3645833333333333;var Ve=.005696614583333333;var ze=.3076171875;var qe=function(e){var t=[];t[0]=Re-e*(Le+e*($e+e*(Ne+e*Fe)));t[1]=e*(Ge-e*($e+e*(Ne+e*Fe)));var r=e*e;t[2]=r*(Ue-e*(He+e*Ye));r*=e;t[3]=r*(We-e*Ve);t[4]=r*e*ze;return t};var Be=function(e,t,r,i){r*=t;t*=t;return i[0]*e-r*(i[1]+t*(i[2]+t*(i[3]+t*i[4])))};var Xe=20;var Ke=function(e,t,r){var i=1/(1-t);var n=e;for(var a=Xe;a;--a){var o=Math.sin(n);var s=1-t*o*o;s=(Be(n,o,Math.cos(n),r)-e)*(s*Math.sqrt(s))*i;n-=s;if(Math.abs(s)<d){return n}}return n};function Ze(){this.x0=this.x0!==undefined?this.x0:0;this.y0=this.y0!==undefined?this.y0:0;this.long0=this.long0!==undefined?this.long0:0;this.lat0=this.lat0!==undefined?this.lat0:0;if(this.es){this.en=qe(this.es);this.ml0=Be(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en)}}function Qe(e){var t=e.x;var r=e.y;var i=N(t-this.long0);var n;var a,o;var s=Math.sin(r);var l=Math.cos(r);if(!this.es){var u=l*Math.sin(i);if(Math.abs(Math.abs(u)-1)<d){return 93}else{a=.5*this.a*this.k0*Math.log((1+u)/(1-u))+this.x0;o=l*Math.cos(i)/Math.sqrt(1-Math.pow(u,2));u=Math.abs(o);if(u>=1){if(u-1>d){return 93}else{o=0}}else{o=Math.acos(o)}if(r<0){o=-o}o=this.a*this.k0*(o-this.lat0)+this.y0}}else{var c=l*i;var f=Math.pow(c,2);var h=this.ep2*Math.pow(l,2);var p=Math.pow(h,2);var v=Math.abs(l)>d?Math.tan(r):0;var g=Math.pow(v,2);var m=Math.pow(g,2);n=1-this.es*Math.pow(s,2);c=c/Math.sqrt(n);var y=Be(r,s,l,this.en);a=this.a*(this.k0*c*(1+f/6*(1-g+h+f/20*(5-18*g+m+14*h-58*g*h+f/42*(61+179*m-m*g-479*g)))))+this.x0;o=this.a*(this.k0*(y-this.ml0+s*i*c/2*(1+f/12*(5-g+9*h+4*p+f/30*(61+m-58*g+270*h-330*g*h+f/56*(1385+543*m-m*g-3111*g))))))+this.y0}e.x=a;e.y=o;return e}function Je(e){var t,r;var i,n;var a=(e.x-this.x0)*(1/this.a);var o=(e.y-this.y0)*(1/this.a);if(!this.es){var s=Math.exp(a/this.k0);var l=.5*(s-1/s);var c=this.lat0+o/this.k0;var f=Math.cos(c);t=Math.sqrt((1-Math.pow(f,2))/(1+Math.pow(l,2)));i=Math.asin(t);if(o<0){i=-i}if(l===0&&f===0){n=0}else{n=N(Math.atan2(l,f)+this.long0)}}else{t=this.ml0+o/this.k0;r=Ke(t,this.es,this.en);if(Math.abs(r)<u){var h=Math.sin(r);var p=Math.cos(r);var v=Math.abs(p)>d?Math.tan(r):0;var g=this.ep2*Math.pow(p,2);var m=Math.pow(g,2);var y=Math.pow(v,2);var _=Math.pow(y,2);t=1-this.es*Math.pow(h,2);var b=a*Math.sqrt(t)/this.k0;var w=Math.pow(b,2);t=t*v;i=r-t*w/(1-this.es)*.5*(1-w/12*(5+3*y-9*g*y+g-4*m-w/30*(61+90*y-252*g*y+45*_+46*g-w/56*(1385+3633*y+4095*_+1574*_*y))));n=N(this.long0+b*(1-w/6*(1+2*y+g-w/20*(5+28*y+24*_+8*g*y+6*g-w/42*(61+662*y+1320*_+720*_*y))))/p)}else{i=u*$(o);n=0}}e.x=n;e.y=i;return e}var et=["Transverse_Mercator","Transverse Mercator","tmerc"];var tt={init:Ze,forward:Qe,inverse:Je,names:et};var rt=function(e){var t=Math.exp(e);t=(t-1/t)/2;return t};var it=function(e,t){e=Math.abs(e);t=Math.abs(t);var r=Math.max(e,t);var i=Math.min(e,t)/(r?r:1);return r*Math.sqrt(1+Math.pow(i,2))};var nt=function(e){var t=1+e;var r=t-1;return r===0?e:e*Math.log(t)/r};var at=function(e){var t=Math.abs(e);t=nt(t*(1+t/(it(1,t)+1)));return e<0?-t:t};var ot=function(e,t){var r=2*Math.cos(2*t);var i=e.length-1;var n=e[i];var a=0;var o;while(--i>=0){o=-a+r*n+e[i];a=n;n=o}return t+o*Math.sin(2*t)};var st=function(e,t){var r=2*Math.cos(t);var i=e.length-1;var n=e[i];var a=0;var o;while(--i>=0){o=-a+r*n+e[i];a=n;n=o}return Math.sin(t)*o};var lt=function(e){var t=Math.exp(e);t=(t+1/t)/2;return t};var ut=function(e,t,r){var i=Math.sin(t);var n=Math.cos(t);var a=rt(r);var o=lt(r);var s=2*n*o;var l=-2*i*a;var u=e.length-1;var c=e[u];var f=0;var h=0;var d=0;var p;var v;while(--u>=0){p=h;v=f;h=c;f=d;c=-p+s*h-l*f+e[u];d=-v+l*h+s*f}s=i*o;l=n*a;return[s*c-l*d,s*d+l*c]};function ct(){if(this.es===undefined||this.es<=0){throw new Error("incorrect elliptical usage")}this.x0=this.x0!==undefined?this.x0:0;this.y0=this.y0!==undefined?this.y0:0;this.long0=this.long0!==undefined?this.long0:0;this.lat0=this.lat0!==undefined?this.lat0:0;this.cgb=[];this.cbg=[];this.utg=[];this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es));var t=e/(2-e);var r=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675))))));this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725))))));r=r*t;this.cgb[1]=r*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945)))));this.cbg[1]=r*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945)))));r=r*t;this.cgb[2]=r*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835))));this.cbg[2]=r*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835))));r=r*t;this.cgb[3]=r*(4279/630+t*(-332/35+t*(-399572/14175)));this.cbg[3]=r*(1237/630+t*(-12/5+t*(-24832/14175)));r=r*t;this.cgb[4]=r*(4174/315+t*(-144838/6237));this.cbg[4]=r*(-734/315+t*(109598/31185));r=r*t;this.cgb[5]=r*(601676/22275);this.cbg[5]=r*(444337/155925);r=Math.pow(t,2);this.Qn=this.k0/(1+t)*(1+r*(1/4+r*(1/64+r/256)));this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800))))));this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800))))));this.utg[1]=r*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720)))));this.gtu[1]=r*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360)))));r=r*t;this.utg[2]=r*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720))));this.gtu[2]=r*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440))));r=r*t;this.utg[3]=r*(-4397/161280+t*(11/504+t*(830251/7257600)));this.gtu[3]=r*(49561/161280+t*(-179/168+t*(6601661/7257600)));r=r*t;this.utg[4]=r*(-4583/161280+t*(108847/3991680));this.gtu[4]=r*(34729/80640+t*(-3418889/1995840));r=r*t;this.utg[5]=r*(-20648693/638668800);this.gtu[5]=r*(212378941/319334400);var i=ot(this.cbg,this.lat0);this.Zb=-this.Qn*(i+st(this.gtu,2*i))}function ft(e){var t=N(e.x-this.long0);var r=e.y;r=ot(this.cbg,r);var i=Math.sin(r);var n=Math.cos(r);var a=Math.sin(t);var o=Math.cos(t);r=Math.atan2(i,o*n);t=Math.atan2(a*n,it(i,n*o));t=at(Math.tan(t));var s=ut(this.gtu,2*r,2*t);r=r+s[0];t=t+s[1];var l;var u;if(Math.abs(t)<=2.623395162778){l=this.a*(this.Qn*t)+this.x0;u=this.a*(this.Qn*r+this.Zb)+this.y0}else{l=Infinity;u=Infinity}e.x=l;e.y=u;return e}function ht(e){var t=(e.x-this.x0)*(1/this.a);var r=(e.y-this.y0)*(1/this.a);r=(r-this.Zb)/this.Qn;t=t/this.Qn;var i;var n;if(Math.abs(t)<=2.623395162778){var a=ut(this.utg,2*r,2*t);r=r+a[0];t=t+a[1];t=Math.atan(rt(t));var o=Math.sin(r);var s=Math.cos(r);var l=Math.sin(t);var u=Math.cos(t);r=Math.atan2(o*u,it(l,u*s));t=Math.atan2(l,u*s);i=N(t+this.long0);n=ot(this.cgb,r)}else{i=Infinity;n=Infinity}e.x=i;e.y=n;return e}var dt=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"];var pt={init:ct,forward:ft,inverse:ht,names:dt};var vt=function(e,t){if(e===undefined){e=Math.floor((N(t)+Math.PI)*30/Math.PI)+1;if(e<0){return 0}else if(e>60){return 60}}return e};var gt="etmerc";function mt(){var e=vt(this.zone,this.long0);if(e===undefined){throw new Error("unknown utm zone")}this.lat0=0;this.long0=(6*Math.abs(e)-183)*p;this.x0=5e5;this.y0=this.utmSouth?1e7:0;this.k0=.9996;pt.init.apply(this);this.forward=pt.forward;this.inverse=pt.inverse}var yt=["Universal Transverse Mercator System","utm"];var _t={init:mt,names:yt,dependsOn:gt};var bt=function(e,t){return Math.pow((1-e)/(1+e),t)};var wt=20;function St(){var e=Math.sin(this.lat0);var t=Math.cos(this.lat0);t*=t;this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e);this.C=Math.sqrt(1+this.es*t*t/(1-this.es));this.phic0=Math.asin(e/this.C);this.ratexp=.5*this.C*this.e;this.K=Math.tan(.5*this.phic0+g)/(Math.pow(Math.tan(.5*this.lat0+g),this.C)*bt(this.e*e,this.ratexp))}function Ct(e){var t=e.x;var r=e.y;e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+g),this.C)*bt(this.e*Math.sin(r),this.ratexp))-u;e.x=this.C*t;return e}function xt(e){var t=1e-14;var r=e.x/this.C;var i=e.y;var n=Math.pow(Math.tan(.5*i+g)/this.K,1/this.C);for(var a=wt;a>0;--a){i=2*Math.atan(n*bt(this.e*Math.sin(e.y),-.5*this.e))-u;if(Math.abs(i-e.y)<t){break}e.y=i}if(!a){return null}e.x=r;e.y=i;return e}var Ot=["gauss"];var Tt={init:St,forward:Ct,inverse:xt,names:Ot};function Et(){Tt.init.apply(this);if(!this.rc){return}this.sinc0=Math.sin(this.phic0);this.cosc0=Math.cos(this.phic0);this.R2=2*this.rc;if(!this.title){this.title="Oblique Stereographic Alternative"}}function Mt(e){var t,r,i,n;e.x=N(e.x-this.long0);Tt.forward.apply(this,[e]);t=Math.sin(e.y);r=Math.cos(e.y);i=Math.cos(e.x);n=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*r*i);e.x=n*r*Math.sin(e.x);e.y=n*(this.cosc0*t-this.sinc0*r*i);e.x=this.a*e.x+this.x0;e.y=this.a*e.y+this.y0;return e}function jt(e){var t,r,i,n,a;e.x=(e.x-this.x0)/this.a;e.y=(e.y-this.y0)/this.a;e.x/=this.k0;e.y/=this.k0;if(a=Math.sqrt(e.x*e.x+e.y*e.y)){var o=2*Math.atan2(a,this.R2);t=Math.sin(o);r=Math.cos(o);n=Math.asin(r*this.sinc0+e.y*t*this.cosc0/a);i=Math.atan2(e.x*t,a*this.cosc0*r-e.y*this.sinc0*t)}else{n=this.phic0;i=0}e.x=i;e.y=n;Tt.inverse.apply(this,[e]);e.x=N(e.x+this.long0);return e}var At=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"];var Pt={init:Et,forward:Mt,inverse:jt,names:At};function kt(e,t,r){t*=r;return Math.tan(.5*(u+e))*Math.pow((1-t)/(1+t),.5*r)}function It(){this.coslat0=Math.cos(this.lat0);this.sinlat0=Math.sin(this.lat0);if(this.sphere){if(this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=d){this.k0=.5*(1+$(this.lat0)*Math.sin(this.lat_ts))}}else{if(Math.abs(this.coslat0)<=d){if(this.lat0>0){this.con=1}else{this.con=-1}}this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e));if(this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=d){this.k0=.5*this.cons*L(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/F(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))}this.ms1=L(this.e,this.sinlat0,this.coslat0);this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-u;this.cosX0=Math.cos(this.X0);this.sinX0=Math.sin(this.X0)}}function Dt(e){var t=e.x;var r=e.y;var i=Math.sin(r);var n=Math.cos(r);var a,o,s,l,c,f;var h=N(t-this.long0);if(Math.abs(Math.abs(t-this.long0)-Math.PI)<=d&&Math.abs(r+this.lat0)<=d){e.x=NaN;e.y=NaN;return e}if(this.sphere){a=2*this.k0/(1+this.sinlat0*i+this.coslat0*n*Math.cos(h));e.x=this.a*a*n*Math.sin(h)+this.x0;e.y=this.a*a*(this.coslat0*i-this.sinlat0*n*Math.cos(h))+this.y0;return e}else{o=2*Math.atan(this.ssfn_(r,i,this.e))-u;l=Math.cos(o);s=Math.sin(o);if(Math.abs(this.coslat0)<=d){c=F(this.e,r*this.con,this.con*i);f=2*this.a*this.k0*c/this.cons;e.x=this.x0+f*Math.sin(t-this.long0);e.y=this.y0-this.con*f*Math.cos(t-this.long0);return e}else if(Math.abs(this.sinlat0)<d){a=2*this.a*this.k0/(1+l*Math.cos(h));e.y=a*s}else{a=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*s+this.cosX0*l*Math.cos(h)));e.y=a*(this.cosX0*s-this.sinX0*l*Math.cos(h))+this.y0}e.x=a*l*Math.sin(h)+this.x0}return e}function Rt(e){e.x-=this.x0;e.y-=this.y0;var t,r,i,n,a;var o=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var s=2*Math.atan(o/(.5*this.a*this.k0));t=this.long0;r=this.lat0;if(o<=d){e.x=t;e.y=r;return e}r=Math.asin(Math.cos(s)*this.sinlat0+e.y*Math.sin(s)*this.coslat0/o);if(Math.abs(this.coslat0)<d){if(this.lat0>0){t=N(this.long0+Math.atan2(e.x,-1*e.y))}else{t=N(this.long0+Math.atan2(e.x,e.y))}}else{t=N(this.long0+Math.atan2(e.x*Math.sin(s),o*this.coslat0*Math.cos(s)-e.y*this.sinlat0*Math.sin(s)))}e.x=t;e.y=r;return e}else{if(Math.abs(this.coslat0)<=d){if(o<=d){r=this.lat0;t=this.long0;e.x=t;e.y=r;return e}e.x*=this.con;e.y*=this.con;i=o*this.cons/(2*this.a*this.k0);r=this.con*G(this.e,i);t=this.con*N(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else{n=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1));t=this.long0;if(o<=d){a=this.X0}else{a=Math.asin(Math.cos(n)*this.sinX0+e.y*Math.sin(n)*this.cosX0/o);t=N(this.long0+Math.atan2(e.x*Math.sin(n),o*this.cosX0*Math.cos(n)-e.y*this.sinX0*Math.sin(n)))}r=-1*G(this.e,Math.tan(.5*(u+a)))}}e.x=t;e.y=r;return e}var Lt=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"];var $t={init:It,forward:Dt,inverse:Rt,names:Lt,ssfn_:kt};var Nt=r(298);function Ft(){this.no_off=this.no_off||false;this.no_rot=this.no_rot||false;if(isNaN(this.k0)){this.k0=1}var e=Math.sin(this.lat0);var t=Math.cos(this.lat0);var r=this.e*e;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(t,4));this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-r*r);var i=F(this.e,this.lat0,e);var n=this.bl/t*Math.sqrt((1-this.es)/(1-r*r));if(n*n<1){n=1}var a;var o;if(!isNaN(this.longc)){if(this.lat0>=0){a=n+Math.sqrt(n*n-1)}else{a=n-Math.sqrt(n*n-1)}this.el=a*Math.pow(i,this.bl);o=.5*(a-1/a);this.gamma0=Math.asin(Math.sin(this.alpha)/n);this.long0=this.longc-Math.asin(o*Math.tan(this.gamma0))/this.bl}else{var s=F(this.e,this.lat1,Math.sin(this.lat1));var l=F(this.e,this.lat2,Math.sin(this.lat2));if(this.lat0>=0){this.el=(n+Math.sqrt(n*n-1))*Math.pow(i,this.bl)}else{this.el=(n-Math.sqrt(n*n-1))*Math.pow(i,this.bl)}var u=Math.pow(s,this.bl);var c=Math.pow(l,this.bl);a=this.el/u;o=.5*(a-1/a);var f=(this.el*this.el-c*u)/(this.el*this.el+c*u);var h=(c-u)/(c+u);var d=N(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(f*Math.tan(.5*this.bl*d)/h)/this.bl;this.long0=N(this.long0);var p=N(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*p)/o);this.alpha=Math.asin(n*Math.sin(this.gamma0))}if(this.no_off){this.uc=0}else{if(this.lat0>=0){this.uc=this.al/this.bl*Math.atan2(Math.sqrt(n*n-1),Math.cos(this.alpha))}else{this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(n*n-1),Math.cos(this.alpha))}}}function Gt(e){var t=e.x;var r=e.y;var i=N(t-this.long0);var n,a;var o;if(Math.abs(Math.abs(r)-u)<=d){if(r>0){o=-1}else{o=1}a=this.al/this.bl*Math.log(Math.tan(g+o*this.gamma0*.5));n=-1*o*u*this.al/this.bl}else{var s=F(this.e,r,Math.sin(r));var l=this.el/Math.pow(s,this.bl);var c=.5*(l-1/l);var f=.5*(l+1/l);var h=Math.sin(this.bl*i);var p=(c*Math.sin(this.gamma0)-h*Math.cos(this.gamma0))/f;if(Math.abs(Math.abs(p)-1)<=d){a=Number.POSITIVE_INFINITY}else{a=.5*this.al*Math.log((1-p)/(1+p))/this.bl}if(Math.abs(Math.cos(this.bl*i))<=d){n=this.al*this.bl*i}else{n=this.al*Math.atan2(c*Math.cos(this.gamma0)+h*Math.sin(this.gamma0),Math.cos(this.bl*i))/this.bl}}if(this.no_rot){e.x=this.x0+n;e.y=this.y0+a}else{n-=this.uc;e.x=this.x0+a*Math.cos(this.alpha)+n*Math.sin(this.alpha);e.y=this.y0+n*Math.cos(this.alpha)-a*Math.sin(this.alpha)}return e}function Ut(e){var t,r;if(this.no_rot){r=e.y-this.y0;t=e.x-this.x0}else{r=(e.x-this.x0)*Math.cos(this.alpha)-(e.y-this.y0)*Math.sin(this.alpha);t=(e.y-this.y0)*Math.cos(this.alpha)+(e.x-this.x0)*Math.sin(this.alpha);t+=this.uc}var i=Math.exp(-1*this.bl*r/this.al);var n=.5*(i-1/i);var a=.5*(i+1/i);var o=Math.sin(this.bl*t/this.al);var s=(o*Math.cos(this.gamma0)+n*Math.sin(this.gamma0))/a;var l=Math.pow(this.el/Math.sqrt((1+s)/(1-s)),1/this.bl);if(Math.abs(s-1)<d){e.x=this.long0;e.y=u}else if(Math.abs(s+1)<d){e.x=this.long0;e.y=-1*u}else{e.y=G(this.e,l);e.x=N(this.long0-Math.atan2(n*Math.cos(this.gamma0)-o*Math.sin(this.gamma0),Math.cos(this.bl*t/this.al))/this.bl)}return e}var Ht=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"];var Yt={init:Ft,forward:Gt,inverse:Ut,names:Ht};function Wt(){if(!this.lat2){this.lat2=this.lat1}if(!this.k0){this.k0=1}this.x0=this.x0||0;this.y0=this.y0||0;if(Math.abs(this.lat1+this.lat2)<d){return}var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1);var r=Math.cos(this.lat1);var i=L(this.e,t,r);var n=F(this.e,this.lat1,t);var a=Math.sin(this.lat2);var o=Math.cos(this.lat2);var s=L(this.e,a,o);var l=F(this.e,this.lat2,a);var u=F(this.e,this.lat0,Math.sin(this.lat0));if(Math.abs(this.lat1-this.lat2)>d){this.ns=Math.log(i/s)/Math.log(n/l)}else{this.ns=t}if(isNaN(this.ns)){this.ns=t}this.f0=i/(this.ns*Math.pow(n,this.ns));this.rh=this.a*this.f0*Math.pow(u,this.ns);if(!this.title){this.title="Lambert Conformal Conic"}}function Vt(e){var t=e.x;var r=e.y;if(Math.abs(2*Math.abs(r)-Math.PI)<=d){r=$(r)*(u-2*d)}var i=Math.abs(Math.abs(r)-u);var n,a;if(i>d){n=F(this.e,r,Math.sin(r));a=this.a*this.f0*Math.pow(n,this.ns)}else{i=r*this.ns;if(i<=0){return null}a=0}var o=this.ns*N(t-this.long0);e.x=this.k0*(a*Math.sin(o))+this.x0;e.y=this.k0*(this.rh-a*Math.cos(o))+this.y0;return e}function zt(e){var t,r,i;var n,a;var o=(e.x-this.x0)/this.k0;var s=this.rh-(e.y-this.y0)/this.k0;if(this.ns>0){t=Math.sqrt(o*o+s*s);r=1}else{t=-Math.sqrt(o*o+s*s);r=-1}var l=0;if(t!==0){l=Math.atan2(r*o,r*s)}if(t!==0||this.ns>0){r=1/this.ns;i=Math.pow(t/(this.a*this.f0),r);n=G(this.e,i);if(n===-9999){return null}}else{n=-u}a=N(l/this.ns+this.long0);e.x=a;e.y=n;return e}var qt=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"];var Bt={init:Wt,forward:Vt,inverse:zt,names:qt};function Xt(){this.a=6377397.155;this.es=.006674372230614;this.e=Math.sqrt(this.es);if(!this.lat0){this.lat0=.863937979737193}if(!this.long0){this.long0=.7417649320975901-.308341501185665}if(!this.k0){this.k0=.9999}this.s45=.785398163397448;this.s90=2*this.s45;this.fi0=this.lat0;this.e2=this.es;this.e=Math.sqrt(this.e2);this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2));this.uq=1.04216856380474;this.u0=Math.asin(Math.sin(this.fi0)/this.alfa);this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2);this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g;this.k1=this.k0;this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2));this.s0=1.37008346281555;this.n=Math.sin(this.s0);this.ro0=this.k1*this.n0/Math.tan(this.s0);this.ad=this.s90-this.uq}function Kt(e){var t,r,i,n,a,o,s;var l=e.x;var u=e.y;var c=N(l-this.long0);t=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2);r=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/t)-this.s45);i=-c*this.alfa;n=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(i));a=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(n));o=this.n*a;s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(n/2+this.s45),this.n);e.y=s*Math.cos(o)/1;e.x=s*Math.sin(o)/1;if(!this.czech){e.y*=-1;e.x*=-1}return e}function Zt(e){var t,r,i,n,a,o,s;var l;var u=e.x;e.x=e.y;e.y=u;if(!this.czech){e.y*=-1;e.x*=-1}o=Math.sqrt(e.x*e.x+e.y*e.y);a=Math.atan2(e.y,e.x);n=a/Math.sin(this.s0);i=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45);t=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(n));r=Math.asin(Math.cos(i)*Math.sin(n)/Math.cos(t));e.x=this.long0-r/this.alfa;s=t;l=0;var c=0;do{e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45);if(Math.abs(s-e.y)<1e-10){l=1}s=e.y;c+=1}while(l===0&&c<15);if(c>=15){return null}return e}var Qt=["Krovak","krovak"];var Jt={init:Xt,forward:Kt,inverse:Zt,names:Qt};var er=function(e,t,r,i,n){return e*n-t*Math.sin(2*n)+r*Math.sin(4*n)-i*Math.sin(6*n)};var tr=function(e){return 1-.25*e*(1+e/16*(3+1.25*e))};var rr=function(e){return.375*e*(1+.25*e*(1+.46875*e))};var ir=function(e){return.05859375*e*e*(1+.75*e)};var nr=function(e){return e*e*e*(35/3072)};var ar=function(e,t,r){var i=t*r;return e/Math.sqrt(1-i*i)};var or=function(e){return Math.abs(e)<u?e:e-$(e)*Math.PI};var sr=function(e,t,r,i,n){var a;var o;a=e/t;for(var s=0;s<15;s++){o=(e-(t*a-r*Math.sin(2*a)+i*Math.sin(4*a)-n*Math.sin(6*a)))/(t-2*r*Math.cos(2*a)+4*i*Math.cos(4*a)-6*n*Math.cos(6*a));a+=o;if(Math.abs(o)<=1e-10){return a}}return NaN};function lr(){if(!this.sphere){this.e0=tr(this.es);this.e1=rr(this.es);this.e2=ir(this.es);this.e3=nr(this.es);this.ml0=this.a*er(this.e0,this.e1,this.e2,this.e3,this.lat0)}}function ur(e){var t,r;var i=e.x;var n=e.y;i=N(i-this.long0);if(this.sphere){t=this.a*Math.asin(Math.cos(n)*Math.sin(i));r=this.a*(Math.atan2(Math.tan(n),Math.cos(i))-this.lat0)}else{var a=Math.sin(n);var o=Math.cos(n);var s=ar(this.a,this.e,a);var l=Math.tan(n)*Math.tan(n);var u=i*Math.cos(n);var c=u*u;var f=this.es*o*o/(1-this.es);var h=this.a*er(this.e0,this.e1,this.e2,this.e3,n);t=s*u*(1-c*l*(1/6-(8-l+8*f)*c/120));r=h-this.ml0+s*a/o*c*(.5+(5-l+6*f)*c/24)}e.x=t+this.x0;e.y=r+this.y0;return e}function cr(e){e.x-=this.x0;e.y-=this.y0;var t=e.x/this.a;var r=e.y/this.a;var i,n;if(this.sphere){var a=r+this.lat0;i=Math.asin(Math.sin(a)*Math.cos(t));n=Math.atan2(Math.tan(t),Math.cos(a))}else{var o=this.ml0/this.a+r;var s=sr(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-u)<=d){e.x=this.long0;e.y=u;if(r<0){e.y*=-1}return e}var l=ar(this.a,this.e,Math.sin(s));var c=l*l*l/this.a/this.a*(1-this.es);var f=Math.pow(Math.tan(s),2);var h=t*this.a/l;var p=h*h;i=s-l*Math.tan(s)/c*h*h*(.5-(1+3*f)*h*h/24);n=h*(1-p*(f/3+(1+3*f)*f*p/15))/Math.cos(s)}e.x=N(n+this.long0);e.y=or(i);return e}var fr=["Cassini","Cassini_Soldner","cass"];var hr={init:lr,forward:ur,inverse:cr,names:fr};var dr=function(e,t){var r;if(e>1e-7){r=e*t;return(1-e*e)*(t/(1-r*r)-.5/e*Math.log((1-r)/(1+r)))}else{return 2*t}};var pr=1;var vr=2;var gr=3;var mr=4;function yr(){var e=Math.abs(this.lat0);if(Math.abs(e-u)<d){this.mode=this.lat0<0?this.S_POLE:this.N_POLE}else if(Math.abs(e)<d){this.mode=this.EQUIT}else{this.mode=this.OBLIQ}if(this.es>0){var t;this.qp=dr(this.e,1);this.mmf=.5/(1-this.es);this.apa=Er(this.es);switch(this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp);this.dd=1/this.rq;this.xmf=1;this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp);t=Math.sin(this.lat0);this.sinb1=dr(this.e,t)/this.qp;this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1);this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1);this.ymf=(this.xmf=this.rq)/this.dd;this.xmf*=this.dd;break}}else{if(this.mode===this.OBLIQ){this.sinph0=Math.sin(this.lat0);this.cosph0=Math.cos(this.lat0)}}}function _r(e){var t,r,i,n,a,o,s,l,c,f;var h=e.x;var p=e.y;h=N(h-this.long0);if(this.sphere){a=Math.sin(p);f=Math.cos(p);i=Math.cos(h);if(this.mode===this.OBLIQ||this.mode===this.EQUIT){r=this.mode===this.EQUIT?1+f*i:1+this.sinph0*a+this.cosph0*f*i;if(r<=d){return null}r=Math.sqrt(2/r);t=r*f*Math.sin(h);r*=this.mode===this.EQUIT?a:this.cosph0*a-this.sinph0*f*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE){i=-i}if(Math.abs(p+this.phi0)<d){return null}r=g-p*.5;r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r));t=r*Math.sin(h);r*=i}}else{s=0;l=0;c=0;i=Math.cos(h);n=Math.sin(h);a=Math.sin(p);o=dr(this.e,a);if(this.mode===this.OBLIQ||this.mode===this.EQUIT){s=o/this.qp;l=Math.sqrt(1-s*s)}switch(this.mode){case this.OBLIQ:c=1+this.sinb1*s+this.cosb1*l*i;break;case this.EQUIT:c=1+l*i;break;case this.N_POLE:c=u+p;o=this.qp-o;break;case this.S_POLE:c=p-u;o=this.qp+o;break}if(Math.abs(c)<d){return null}switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c);if(this.mode===this.OBLIQ){r=this.ymf*c*(this.cosb1*s-this.sinb1*l*i)}else{r=(c=Math.sqrt(2/(1+l*i)))*s*this.ymf}t=this.xmf*c*l*n;break;case this.N_POLE:case this.S_POLE:if(o>=0){t=(c=Math.sqrt(o))*n;r=i*(this.mode===this.S_POLE?c:-c)}else{t=r=0}break}}e.x=this.a*t+this.x0;e.y=this.a*r+this.y0;return e}function br(e){e.x-=this.x0;e.y-=this.y0;var t=e.x/this.a;var r=e.y/this.a;var i,n,a,o,s,l,c;if(this.sphere){var f=0,h,p=0;h=Math.sqrt(t*t+r*r);n=h*.5;if(n>1){return null}n=2*Math.asin(n);if(this.mode===this.OBLIQ||this.mode===this.EQUIT){p=Math.sin(n);f=Math.cos(n)}switch(this.mode){case this.EQUIT:n=Math.abs(h)<=d?0:Math.asin(r*p/h);t*=p;r=f*h;break;case this.OBLIQ:n=Math.abs(h)<=d?this.phi0:Math.asin(f*this.sinph0+r*p*this.cosph0/h);t*=p*this.cosph0;r=(f-Math.sin(n)*this.sinph0)*h;break;case this.N_POLE:r=-r;n=u-n;break;case this.S_POLE:n-=u;break}i=r===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,r)}else{c=0;if(this.mode===this.OBLIQ||this.mode===this.EQUIT){t/=this.dd;r*=this.dd;l=Math.sqrt(t*t+r*r);if(l<d){e.x=0;e.y=this.phi0;return e}o=2*Math.asin(.5*l/this.rq);a=Math.cos(o);t*=o=Math.sin(o);if(this.mode===this.OBLIQ){c=a*this.sinb1+r*o*this.cosb1/l;s=this.qp*c;r=l*this.cosb1*a-r*this.sinb1*o}else{c=r*o/l;s=this.qp*c;r=l*a}}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE){r=-r}s=t*t+r*r;if(!s){e.x=0;e.y=this.phi0;return e}c=1-s/this.qp;if(this.mode===this.S_POLE){c=-c}}i=Math.atan2(t,r);n=Mr(Math.asin(c),this.apa)}e.x=N(this.long0+i);e.y=n;return e}var wr=.3333333333333333;var Sr=.17222222222222222;var Cr=.10257936507936508;var xr=.06388888888888888;var Or=.0664021164021164;var Tr=.016415012942191543;function Er(e){var t;var r=[];r[0]=e*wr;t=e*e;r[0]+=t*Sr;r[1]=t*xr;t*=e;r[0]+=t*Cr;r[1]+=t*Or;r[2]=t*Tr;return r}function Mr(e,t){var r=e+e;return e+t[0]*Math.sin(r)+t[1]*Math.sin(r+r)+t[2]*Math.sin(r+r+r)}var jr=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];var Ar={init:yr,forward:_r,inverse:br,names:jr,S_POLE:pr,N_POLE:vr,EQUIT:gr,OBLIQ:mr};var Pr=function(e){if(Math.abs(e)>1){e=e>1?1:-1}return Math.asin(e)};function kr(){if(Math.abs(this.lat1+this.lat2)<d){return}this.temp=this.b/this.a;this.es=1-Math.pow(this.temp,2);this.e3=Math.sqrt(this.es);this.sin_po=Math.sin(this.lat1);this.cos_po=Math.cos(this.lat1);this.t1=this.sin_po;this.con=this.sin_po;this.ms1=L(this.e3,this.sin_po,this.cos_po);this.qs1=dr(this.e3,this.sin_po,this.cos_po);this.sin_po=Math.sin(this.lat2);this.cos_po=Math.cos(this.lat2);this.t2=this.sin_po;this.ms2=L(this.e3,this.sin_po,this.cos_po);this.qs2=dr(this.e3,this.sin_po,this.cos_po);this.sin_po=Math.sin(this.lat0);this.cos_po=Math.cos(this.lat0);this.t3=this.sin_po;this.qs0=dr(this.e3,this.sin_po,this.cos_po);if(Math.abs(this.lat1-this.lat2)>d){this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1)}else{this.ns0=this.con}this.c=this.ms1*this.ms1+this.ns0*this.qs1;this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0}function Ir(e){var t=e.x;var r=e.y;this.sin_phi=Math.sin(r);this.cos_phi=Math.cos(r);var i=dr(this.e3,this.sin_phi,this.cos_phi);var n=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0;var a=this.ns0*N(t-this.long0);var o=n*Math.sin(a)+this.x0;var s=this.rh-n*Math.cos(a)+this.y0;e.x=o;e.y=s;return e}function Dr(e){var t,r,i,n,a,o;e.x-=this.x0;e.y=this.rh-e.y+this.y0;if(this.ns0>=0){t=Math.sqrt(e.x*e.x+e.y*e.y);i=1}else{t=-Math.sqrt(e.x*e.x+e.y*e.y);i=-1}n=0;if(t!==0){n=Math.atan2(i*e.x,i*e.y)}i=t*this.ns0/this.a;if(this.sphere){o=Math.asin((this.c-i*i)/(2*this.ns0))}else{r=(this.c-i*i)/this.ns0;o=this.phi1z(this.e3,r)}a=N(n/this.ns0+this.long0);e.x=a;e.y=o;return e}function Rr(e,t){var r,i,n,a,o;var s=Pr(.5*t);if(e<d){return s}var l=e*e;for(var u=1;u<=25;u++){r=Math.sin(s);i=Math.cos(s);n=e*r;a=1-n*n;o=.5*a*a/i*(t/(1-l)-r/a+.5/e*Math.log((1-n)/(1+n)));s=s+o;if(Math.abs(o)<=1e-7){return s}}return null}var Lr=["Albers_Conic_Equal_Area","Albers","aea"];var $r={init:kr,forward:Ir,inverse:Dr,names:Lr,phi1z:Rr};function Nr(){this.sin_p14=Math.sin(this.lat0);this.cos_p14=Math.cos(this.lat0);this.infinity_dist=1e3*this.a;this.rc=1}function Fr(e){var t,r;var i;var n;var a;var o;var s,l;var u=e.x;var c=e.y;i=N(u-this.long0);t=Math.sin(c);r=Math.cos(c);n=Math.cos(i);o=this.sin_p14*t+this.cos_p14*r*n;a=1;if(o>0||Math.abs(o)<=d){s=this.x0+this.a*a*r*Math.sin(i)/o;l=this.y0+this.a*a*(this.cos_p14*t-this.sin_p14*r*n)/o}else{s=this.x0+this.infinity_dist*r*Math.sin(i);l=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*r*n)}e.x=s;e.y=l;return e}function Gr(e){var t;var r,i;var n;var a,o;e.x=(e.x-this.x0)/this.a;e.y=(e.y-this.y0)/this.a;e.x/=this.k0;e.y/=this.k0;if(t=Math.sqrt(e.x*e.x+e.y*e.y)){n=Math.atan2(t,this.rc);r=Math.sin(n);i=Math.cos(n);o=Pr(i*this.sin_p14+e.y*r*this.cos_p14/t);a=Math.atan2(e.x*r,t*this.cos_p14*i-e.y*this.sin_p14*r);a=N(this.long0+a)}else{o=this.phic0;a=0}e.x=a;e.y=o;return e}var Ur=["gnom"];var Hr={init:Nr,forward:Fr,inverse:Gr,names:Ur};var Yr=function(e,t){var r=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-r)<1e-6){if(t<0){return-1*u}else{return u}}var i=Math.asin(.5*t);var n;var a;var o;var s;for(var l=0;l<30;l++){a=Math.sin(i);o=Math.cos(i);s=e*a;n=Math.pow(1-s*s,2)/(2*o)*(t/(1-e*e)-a/(1-s*s)+.5/e*Math.log((1-s)/(1+s)));i+=n;if(Math.abs(n)<=1e-10){return i}}return NaN};function Wr(){if(!this.sphere){this.k0=L(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))}}function Vr(e){var t=e.x;var r=e.y;var i,n;var a=N(t-this.long0);if(this.sphere){i=this.x0+this.a*a*Math.cos(this.lat_ts);n=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts)}else{var o=dr(this.e,Math.sin(r));i=this.x0+this.a*this.k0*a;n=this.y0+this.a*o*.5/this.k0}e.x=i;e.y=n;return e}function zr(e){e.x-=this.x0;e.y-=this.y0;var t,r;if(this.sphere){t=N(this.long0+e.x/this.a/Math.cos(this.lat_ts));r=Math.asin(e.y/this.a*Math.cos(this.lat_ts))}else{r=Yr(this.e,2*e.y*this.k0/this.a);t=N(this.long0+e.x/(this.a*this.k0))}e.x=t;e.y=r;return e}var qr=["cea"];var Br={init:Wr,forward:Vr,inverse:zr,names:qr};function Xr(){this.x0=this.x0||0;this.y0=this.y0||0;this.lat0=this.lat0||0;this.long0=this.long0||0;this.lat_ts=this.lat_ts||0;this.title=this.title||"Equidistant Cylindrical (Plate Carre)";this.rc=Math.cos(this.lat_ts)}function Kr(e){var t=e.x;var r=e.y;var i=N(t-this.long0);var n=or(r-this.lat0);e.x=this.x0+this.a*i*this.rc;e.y=this.y0+this.a*n;return e}function Zr(e){var t=e.x;var r=e.y;e.x=N(this.long0+(t-this.x0)/(this.a*this.rc));e.y=or(this.lat0+(r-this.y0)/this.a);return e}var Qr=["Equirectangular","Equidistant_Cylindrical","eqc"];var Jr={init:Xr,forward:Kr,inverse:Zr,names:Qr};var ei=20;function ti(){this.temp=this.b/this.a;this.es=1-Math.pow(this.temp,2);this.e=Math.sqrt(this.es);this.e0=tr(this.es);this.e1=rr(this.es);this.e2=ir(this.es);this.e3=nr(this.es);this.ml0=this.a*er(this.e0,this.e1,this.e2,this.e3,this.lat0)}function ri(e){var t=e.x;var r=e.y;var i,n,a;var o=N(t-this.long0);a=o*Math.sin(r);if(this.sphere){if(Math.abs(r)<=d){i=this.a*o;n=-1*this.a*this.lat0}else{i=this.a*Math.sin(a)/Math.tan(r);n=this.a*(or(r-this.lat0)+(1-Math.cos(a))/Math.tan(r))}}else{if(Math.abs(r)<=d){i=this.a*o;n=-1*this.ml0}else{var s=ar(this.a,this.e,Math.sin(r))/Math.tan(r);i=s*Math.sin(a);n=this.a*er(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+s*(1-Math.cos(a))}}e.x=i+this.x0;e.y=n+this.y0;return e}function ii(e){var t,r,i,n,a;var o,s;var l,u;i=e.x-this.x0;n=e.y-this.y0;if(this.sphere){if(Math.abs(n+this.a*this.lat0)<=d){t=N(i/this.a+this.long0);r=0}else{o=this.lat0+n/this.a;s=i*i/this.a/this.a+o*o;l=o;var c;for(a=ei;a;--a){c=Math.tan(l);u=-1*(o*(l*c+1)-l-.5*(l*l+s)*c)/((l-o)/c-1);l+=u;if(Math.abs(u)<=d){r=l;break}}t=N(this.long0+Math.asin(i*Math.tan(l)/this.a)/Math.sin(r))}}else{if(Math.abs(n+this.ml0)<=d){r=0;t=N(this.long0+i/this.a)}else{o=(this.ml0+n)/this.a;s=i*i/this.a/this.a+o*o;l=o;var f,h,p,v;var g;for(a=ei;a;--a){g=this.e*Math.sin(l);f=Math.sqrt(1-g*g)*Math.tan(l);h=this.a*er(this.e0,this.e1,this.e2,this.e3,l);p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l);v=h/this.a;u=(o*(f*v+1)-v-.5*f*(v*v+s))/(this.es*Math.sin(2*l)*(v*v+s-2*o*v)/(4*f)+(o-v)*(f*p-2/Math.sin(2*l))-p);l-=u;if(Math.abs(u)<=d){r=l;break}}f=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r);t=N(this.long0+Math.asin(i*f/this.a)/Math.sin(r))}}e.x=t;e.y=r;return e}var ni=["Polyconic","poly"];var ai={init:ti,forward:ri,inverse:ii,names:ni};var oi=1;function si(){this.A=[];this.A[1]=.6399175073;this.A[2]=-.1358797613;this.A[3]=.063294409;this.A[4]=-.02526853;this.A[5]=.0117879;this.A[6]=-.0055161;this.A[7]=.0026906;this.A[8]=-.001333;this.A[9]=67e-5;this.A[10]=-34e-5;this.B_re=[];this.B_im=[];this.B_re[1]=.7557853228;this.B_im[1]=0;this.B_re[2]=.249204646;this.B_im[2]=.003371507;this.B_re[3]=-.001541739;this.B_im[3]=.04105856;this.B_re[4]=-.10162907;this.B_im[4]=.01727609;this.B_re[5]=-.26623489;this.B_im[5]=-.36249218;this.B_re[6]=-.6870983;this.B_im[6]=-1.1651967;this.C_re=[];this.C_im=[];this.C_re[1]=1.3231270439;this.C_im[1]=0;this.C_re[2]=-.577245789;this.C_im[2]=-.007809598;this.C_re[3]=.508307513;this.C_im[3]=-.112208952;this.C_re[4]=-.15094762;this.C_im[4]=.18200602;this.C_re[5]=1.01418179;this.C_im[5]=1.64497696;this.C_re[6]=1.9660549;this.C_im[6]=2.5127645;this.D=[];this.D[1]=1.5627014243;this.D[2]=.5185406398;this.D[3]=-.03333098;this.D[4]=-.1052906;this.D[5]=-.0368594;this.D[6]=.007317;this.D[7]=.0122;this.D[8]=.00394;this.D[9]=-.0013}function li(e){var t;var r=e.x;var i=e.y;var n=i-this.lat0;var a=r-this.long0;var o=n/l*1e-5;var s=a;var u=1;var c=0;for(t=1;t<=10;t++){u=u*o;c=c+this.A[t]*u}var f=c;var h=s;var d=1;var p=0;var v;var g;var m=0;var y=0;for(t=1;t<=6;t++){v=d*f-p*h;g=p*f+d*h;d=v;p=g;m=m+this.B_re[t]*d-this.B_im[t]*p;y=y+this.B_im[t]*d+this.B_re[t]*p}e.x=y*this.a+this.x0;e.y=m*this.a+this.y0;return e}function ui(e){var t;var r=e.x;var i=e.y;var n=r-this.x0;var a=i-this.y0;var o=a/this.a;var s=n/this.a;var u=1;var c=0;var f;var h;var d=0;var p=0;for(t=1;t<=6;t++){f=u*o-c*s;h=c*o+u*s;u=f;c=h;d=d+this.C_re[t]*u-this.C_im[t]*c;p=p+this.C_im[t]*u+this.C_re[t]*c}for(var v=0;v<this.iterations;v++){var g=d;var m=p;var y;var _;var b=o;var w=s;for(t=2;t<=6;t++){y=g*d-m*p;_=m*d+g*p;g=y;m=_;b=b+(t-1)*(this.B_re[t]*g-this.B_im[t]*m);w=w+(t-1)*(this.B_im[t]*g+this.B_re[t]*m)}g=1;m=0;var S=this.B_re[1];var C=this.B_im[1];for(t=2;t<=6;t++){y=g*d-m*p;_=m*d+g*p;g=y;m=_;S=S+t*(this.B_re[t]*g-this.B_im[t]*m);C=C+t*(this.B_im[t]*g+this.B_re[t]*m)}var x=S*S+C*C;d=(b*S+w*C)/x;p=(w*S-b*C)/x}var O=d;var T=p;var E=1;var M=0;for(t=1;t<=9;t++){E=E*O;M=M+this.D[t]*E}var j=this.lat0+M*l*1e5;var A=this.long0+T;e.x=A;e.y=j;return e}var ci=["New_Zealand_Map_Grid","nzmg"];var fi={init:si,forward:li,inverse:ui,names:ci};function hi(){}function di(e){var t=e.x;var r=e.y;var i=N(t-this.long0);var n=this.x0+this.a*i;var a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;e.x=n;e.y=a;return e}function pi(e){e.x-=this.x0;e.y-=this.y0;var t=N(this.long0+e.x/this.a);var r=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);e.x=t;e.y=r;return e}var vi=["Miller_Cylindrical","mill"];var gi={init:hi,forward:di,inverse:pi,names:vi};var mi=20;function yi(){if(!this.sphere){this.en=qe(this.es)}else{this.n=1;this.m=0;this.es=0;this.C_y=Math.sqrt((this.m+1)/this.n);this.C_x=this.C_y/(this.m+1)}}function _i(e){var t,r;var i=e.x;var n=e.y;i=N(i-this.long0);if(this.sphere){if(!this.m){n=this.n!==1?Math.asin(this.n*Math.sin(n)):n}else{var a=this.n*Math.sin(n);for(var o=mi;o;--o){var s=(this.m*n+Math.sin(n)-a)/(this.m+Math.cos(n));n-=s;if(Math.abs(s)<d){break}}}t=this.a*this.C_x*i*(this.m+Math.cos(n));r=this.a*this.C_y*n}else{var l=Math.sin(n);var u=Math.cos(n);r=this.a*Be(n,l,u,this.en);t=this.a*i*u/Math.sqrt(1-this.es*l*l)}e.x=t;e.y=r;return e}function bi(e){var t,r,i,n;e.x-=this.x0;i=e.x/this.a;e.y-=this.y0;t=e.y/this.a;if(this.sphere){t/=this.C_y;i=i/(this.C_x*(this.m+Math.cos(t)));if(this.m){t=Pr((this.m*t+Math.sin(t))/this.n)}else if(this.n!==1){t=Pr(Math.sin(t)/this.n)}i=N(i+this.long0);t=or(t)}else{t=Ke(e.y/this.a,this.es,this.en);n=Math.abs(t);if(n<u){n=Math.sin(t);r=this.long0+e.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(t));i=N(r)}else if(n-d<u){i=this.long0}}e.x=i;e.y=t;return e}var wi=["Sinusoidal","sinu"];var Si={init:yi,forward:_i,inverse:bi,names:wi};function Ci(){}function xi(e){var t=e.x;var r=e.y;var i=N(t-this.long0);var n=r;var a=Math.PI*Math.sin(r);while(true){var o=-(n+Math.sin(n)-a)/(1+Math.cos(n));n+=o;if(Math.abs(o)<d){break}}n/=2;if(Math.PI/2-Math.abs(r)<d){i=0}var s=.900316316158*this.a*i*Math.cos(n)+this.x0;var l=1.4142135623731*this.a*Math.sin(n)+this.y0;e.x=s;e.y=l;return e}function Oi(e){var t;var r;e.x-=this.x0;e.y-=this.y0;r=e.y/(1.4142135623731*this.a);if(Math.abs(r)>.999999999999){r=.999999999999}t=Math.asin(r);var i=N(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));if(i<-Math.PI){i=-Math.PI}if(i>Math.PI){i=Math.PI}r=(2*t+Math.sin(2*t))/Math.PI;if(Math.abs(r)>1){r=1}var n=Math.asin(r);e.x=i;e.y=n;return e}var Ti=["Mollweide","moll"];var Ei={init:Ci,forward:xi,inverse:Oi,names:Ti};function Mi(){if(Math.abs(this.lat1+this.lat2)<d){return}this.lat2=this.lat2||this.lat1;this.temp=this.b/this.a;this.es=1-Math.pow(this.temp,2);this.e=Math.sqrt(this.es);this.e0=tr(this.es);this.e1=rr(this.es);this.e2=ir(this.es);this.e3=nr(this.es);this.sinphi=Math.sin(this.lat1);this.cosphi=Math.cos(this.lat1);this.ms1=L(this.e,this.sinphi,this.cosphi);this.ml1=er(this.e0,this.e1,this.e2,this.e3,this.lat1);if(Math.abs(this.lat1-this.lat2)<d){this.ns=this.sinphi}else{this.sinphi=Math.sin(this.lat2);this.cosphi=Math.cos(this.lat2);this.ms2=L(this.e,this.sinphi,this.cosphi);this.ml2=er(this.e0,this.e1,this.e2,this.e3,this.lat2);this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)}this.g=this.ml1+this.ms1/this.ns;this.ml0=er(this.e0,this.e1,this.e2,this.e3,this.lat0);this.rh=this.a*(this.g-this.ml0)}function ji(e){var t=e.x;var r=e.y;var i;if(this.sphere){i=this.a*(this.g-r)}else{var n=er(this.e0,this.e1,this.e2,this.e3,r);i=this.a*(this.g-n)}var a=this.ns*N(t-this.long0);var o=this.x0+i*Math.sin(a);var s=this.y0+this.rh-i*Math.cos(a);e.x=o;e.y=s;return e}function Ai(e){e.x-=this.x0;e.y=this.rh-e.y+this.y0;var t,r,i,n;if(this.ns>=0){r=Math.sqrt(e.x*e.x+e.y*e.y);t=1}else{r=-Math.sqrt(e.x*e.x+e.y*e.y);t=-1}var a=0;if(r!==0){a=Math.atan2(t*e.x,t*e.y)}if(this.sphere){n=N(this.long0+a/this.ns);i=or(this.g-r/this.a);e.x=n;e.y=i;return e}else{var o=this.g-r/this.a;i=sr(o,this.e0,this.e1,this.e2,this.e3);n=N(this.long0+a/this.ns);e.x=n;e.y=i;return e}}var Pi=["Equidistant_Conic","eqdc"];var ki={init:Mi,forward:ji,inverse:Ai,names:Pi};function Ii(){this.R=this.a}function Di(e){var t=e.x;var r=e.y;var i=N(t-this.long0);var n,a;if(Math.abs(r)<=d){n=this.x0+this.R*i;a=this.y0}var o=Pr(2*Math.abs(r/Math.PI));if(Math.abs(i)<=d||Math.abs(Math.abs(r)-u)<=d){n=this.x0;if(r>=0){a=this.y0+Math.PI*this.R*Math.tan(.5*o)}else{a=this.y0+Math.PI*this.R*-Math.tan(.5*o)}}var s=.5*Math.abs(Math.PI/i-i/Math.PI);var l=s*s;var c=Math.sin(o);var f=Math.cos(o);var h=f/(c+f-1);var p=h*h;var v=h*(2/c-1);var g=v*v;var m=Math.PI*this.R*(s*(h-g)+Math.sqrt(l*(h-g)*(h-g)-(g+l)*(p-g)))/(g+l);if(i<0){m=-m}n=this.x0+m;var y=l+h;m=Math.PI*this.R*(v*y-s*Math.sqrt((g+l)*(l+1)-y*y))/(g+l);if(r>=0){a=this.y0+m}else{a=this.y0-m}e.x=n;e.y=a;return e}function Ri(e){var t,r;var i,n,a,o,s,l;var u;var c;var f;var h;var p;e.x-=this.x0;e.y-=this.y0;f=Math.PI*this.R;i=e.x/f;n=e.y/f;a=i*i+n*n;o=-Math.abs(n)*(1+a);s=o-2*n*n+i*i;l=-2*o+1+2*n*n+a*a;p=n*n/l+(2*s*s*s/l/l/l-9*o*s/l/l)/27;u=(o-s*s/3/l)/l;c=2*Math.sqrt(-u/3);f=3*p/u/c;if(Math.abs(f)>1){if(f>=0){f=1}else{f=-1}}h=Math.acos(f)/3;if(e.y>=0){r=(-c*Math.cos(h+Math.PI/3)-s/3/l)*Math.PI}else{r=-(-c*Math.cos(h+Math.PI/3)-s/3/l)*Math.PI}if(Math.abs(i)<d){t=this.long0}else{t=N(this.long0+Math.PI*(a-1+Math.sqrt(1+2*(i*i-n*n)+a*a))/2/i)}e.x=t;e.y=r;return e}var Li=["Van_der_Grinten_I","VanDerGrinten","vandg"];var $i={init:Ii,forward:Di,inverse:Ri,names:Li};function Ni(){this.sin_p12=Math.sin(this.lat0);this.cos_p12=Math.cos(this.lat0)}function Fi(e){var t=e.x;var r=e.y;var i=Math.sin(e.y);var n=Math.cos(e.y);var a=N(t-this.long0);var o,s,l,c,f,h,p,v,g,m,y,_,b,w,S,C,x,O,T,E,M,j,A;if(this.sphere){if(Math.abs(this.sin_p12-1)<=d){e.x=this.x0+this.a*(u-r)*Math.sin(a);e.y=this.y0-this.a*(u-r)*Math.cos(a);return e}else if(Math.abs(this.sin_p12+1)<=d){e.x=this.x0+this.a*(u+r)*Math.sin(a);e.y=this.y0+this.a*(u+r)*Math.cos(a);return e}else{O=this.sin_p12*i+this.cos_p12*n*Math.cos(a);C=Math.acos(O);x=C/Math.sin(C);e.x=this.x0+this.a*x*n*Math.sin(a);e.y=this.y0+this.a*x*(this.cos_p12*i-this.sin_p12*n*Math.cos(a));return e}}else{o=tr(this.es);s=rr(this.es);l=ir(this.es);c=nr(this.es);if(Math.abs(this.sin_p12-1)<=d){f=this.a*er(o,s,l,c,u);h=this.a*er(o,s,l,c,r);e.x=this.x0+(f-h)*Math.sin(a);e.y=this.y0-(f-h)*Math.cos(a);return e}else if(Math.abs(this.sin_p12+1)<=d){f=this.a*er(o,s,l,c,u);h=this.a*er(o,s,l,c,r);e.x=this.x0+(f+h)*Math.sin(a);e.y=this.y0+(f+h)*Math.cos(a);return e}else{p=i/n;v=ar(this.a,this.e,this.sin_p12);g=ar(this.a,this.e,i);m=Math.atan((1-this.es)*p+this.es*v*this.sin_p12/(g*n));y=Math.atan2(Math.sin(a),this.cos_p12*Math.tan(m)-this.sin_p12*Math.cos(a));if(y===0){T=Math.asin(this.cos_p12*Math.sin(m)-this.sin_p12*Math.cos(m))}else if(Math.abs(Math.abs(y)-Math.PI)<=d){T=-Math.asin(this.cos_p12*Math.sin(m)-this.sin_p12*Math.cos(m))}else{T=Math.asin(Math.sin(a)*Math.cos(m)/Math.sin(y))}_=this.e*this.sin_p12/Math.sqrt(1-this.es);b=this.e*this.cos_p12*Math.cos(y)/Math.sqrt(1-this.es);w=_*b;S=b*b;E=T*T;M=E*T;j=M*T;A=j*T;C=v*T*(1-E*S*(1-S)/6+M/8*w*(1-2*S)+j/120*(S*(4-7*S)-3*_*_*(1-7*S))-A/48*w);e.x=this.x0+C*Math.sin(y);e.y=this.y0+C*Math.cos(y);return e}}}function Gi(e){e.x-=this.x0;e.y-=this.y0;var t,r,i,n,a,o,s,l,c,f,h,p,v,g,m,y,_,b,w,S,C,x,O;if(this.sphere){t=Math.sqrt(e.x*e.x+e.y*e.y);if(t>2*u*this.a){return}r=t/this.a;i=Math.sin(r);n=Math.cos(r);a=this.long0;if(Math.abs(t)<=d){o=this.lat0}else{o=Pr(n*this.sin_p12+e.y*i*this.cos_p12/t);s=Math.abs(this.lat0)-u;if(Math.abs(s)<=d){if(this.lat0>=0){a=N(this.long0+Math.atan2(e.x,-e.y))}else{a=N(this.long0-Math.atan2(-e.x,e.y))}}else{a=N(this.long0+Math.atan2(e.x*i,t*this.cos_p12*n-e.y*this.sin_p12*i))}}e.x=a;e.y=o;return e}else{l=tr(this.es);c=rr(this.es);f=ir(this.es);h=nr(this.es);if(Math.abs(this.sin_p12-1)<=d){p=this.a*er(l,c,f,h,u);t=Math.sqrt(e.x*e.x+e.y*e.y);v=p-t;o=sr(v/this.a,l,c,f,h);a=N(this.long0+Math.atan2(e.x,-1*e.y));e.x=a;e.y=o;return e}else if(Math.abs(this.sin_p12+1)<=d){p=this.a*er(l,c,f,h,u);t=Math.sqrt(e.x*e.x+e.y*e.y);v=t-p;o=sr(v/this.a,l,c,f,h);a=N(this.long0+Math.atan2(e.x,e.y));e.x=a;e.y=o;return e}else{t=Math.sqrt(e.x*e.x+e.y*e.y);y=Math.atan2(e.x,e.y);g=ar(this.a,this.e,this.sin_p12);_=Math.cos(y);b=this.e*this.cos_p12*_;w=-b*b/(1-this.es);S=3*this.es*(1-w)*this.sin_p12*this.cos_p12*_/(1-this.es);C=t/g;x=C-w*(1+w)*Math.pow(C,3)/6-S*(1+3*w)*Math.pow(C,4)/24;O=1-w*x*x/2-C*x*x*x/6;m=Math.asin(this.sin_p12*Math.cos(x)+this.cos_p12*Math.sin(x)*_);a=N(this.long0+Math.asin(Math.sin(y)*Math.sin(x)/Math.cos(m)));o=Math.atan((1-this.es*O*this.sin_p12/Math.sin(m))*Math.tan(m)/(1-this.es));e.x=a;e.y=o;return e}}}var Ui=["Azimuthal_Equidistant","aeqd"];var Hi={init:Ni,forward:Fi,inverse:Gi,names:Ui};function Yi(){this.sin_p14=Math.sin(this.lat0);this.cos_p14=Math.cos(this.lat0)}function Wi(e){var t,r;var i;var n;var a;var o,s,l;var u=e.x;var c=e.y;i=N(u-this.long0);t=Math.sin(c);r=Math.cos(c);n=Math.cos(i);o=this.sin_p14*t+this.cos_p14*r*n;a=1;if(o>0||Math.abs(o)<=d){s=this.a*a*r*Math.sin(i);l=this.y0+this.a*a*(this.cos_p14*t-this.sin_p14*r*n)}e.x=s;e.y=l;return e}function Vi(e){var t;var r;var i,n;var a;var o,s;e.x-=this.x0;e.y-=this.y0;t=Math.sqrt(e.x*e.x+e.y*e.y);r=Pr(t/this.a);i=Math.sin(r);n=Math.cos(r);o=this.long0;if(Math.abs(t)<=d){s=this.lat0;e.x=o;e.y=s;return e}s=Pr(n*this.sin_p14+e.y*i*this.cos_p14/t);a=Math.abs(this.lat0)-u;if(Math.abs(a)<=d){if(this.lat0>=0){o=N(this.long0+Math.atan2(e.x,-e.y))}else{o=N(this.long0-Math.atan2(-e.x,e.y))}e.x=o;e.y=s;return e}o=N(this.long0+Math.atan2(e.x*i,t*this.cos_p14*n-e.y*this.sin_p14*i));e.x=o;e.y=s;return e}var zi=["ortho"];var qi={init:Yi,forward:Wi,inverse:Vi,names:zi};var Bi={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6};var Xi={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function Ki(){this.x0=this.x0||0;this.y0=this.y0||0;this.lat0=this.lat0||0;this.long0=this.long0||0;this.lat_ts=this.lat_ts||0;this.title=this.title||"Quadrilateralized Spherical Cube";if(this.lat0>=u-g/2){this.face=Bi.TOP}else if(this.lat0<=-(u-g/2)){this.face=Bi.BOTTOM}else if(Math.abs(this.long0)<=g){this.face=Bi.FRONT}else if(Math.abs(this.long0)<=u+g){this.face=this.long0>0?Bi.RIGHT:Bi.LEFT}else{this.face=Bi.BACK}if(this.es!==0){this.one_minus_f=1-(this.a-this.b)/this.a;this.one_minus_f_squared=this.one_minus_f*this.one_minus_f}}function Zi(e){var t={x:0,y:0};var r,i;var n,a;var o,s;var l={value:0};e.x-=this.long0;if(this.es!==0){r=Math.atan(this.one_minus_f_squared*Math.tan(e.y))}else{r=e.y}i=e.x;if(this.face===Bi.TOP){a=u-r;if(i>=g&&i<=u+g){l.value=Xi.AREA_0;n=i-u}else if(i>u+g||i<=-(u+g)){l.value=Xi.AREA_1;n=i>0?i-y:i+y}else if(i>-(u+g)&&i<=-g){l.value=Xi.AREA_2;n=i+u}else{l.value=Xi.AREA_3;n=i}}else if(this.face===Bi.BOTTOM){a=u+r;if(i>=g&&i<=u+g){l.value=Xi.AREA_0;n=-i+u}else if(i<g&&i>=-g){l.value=Xi.AREA_1;n=-i}else if(i<-g&&i>=-(u+g)){l.value=Xi.AREA_2;n=-i-u}else{l.value=Xi.AREA_3;n=i>0?-i+y:-i-y}}else{var c,f,h;var d,p;var v,m;if(this.face===Bi.RIGHT){i=en(i,+u)}else if(this.face===Bi.BACK){i=en(i,+y)}else if(this.face===Bi.LEFT){i=en(i,-u)}d=Math.sin(r);p=Math.cos(r);v=Math.sin(i);m=Math.cos(i);c=p*m;f=p*v;h=d;if(this.face===Bi.FRONT){a=Math.acos(c);n=Ji(a,h,f,l)}else if(this.face===Bi.RIGHT){a=Math.acos(f);n=Ji(a,h,-c,l)}else if(this.face===Bi.BACK){a=Math.acos(-c);n=Ji(a,h,-f,l)}else if(this.face===Bi.LEFT){a=Math.acos(-f);n=Ji(a,h,c,l)}else{a=n=0;l.value=Xi.AREA_0}}s=Math.atan(12/y*(n+Math.acos(Math.sin(n)*Math.cos(g))-u));o=Math.sqrt((1-Math.cos(a))/(Math.cos(s)*Math.cos(s))/(1-Math.cos(Math.atan(1/Math.cos(n)))));if(l.value===Xi.AREA_1){s+=u}else if(l.value===Xi.AREA_2){s+=y}else if(l.value===Xi.AREA_3){s+=1.5*y}t.x=o*Math.cos(s);t.y=o*Math.sin(s);t.x=t.x*this.a+this.x0;t.y=t.y*this.a+this.y0;e.x=t.x;e.y=t.y;return e}function Qi(e){var t={lam:0,phi:0};var r,i,n,a;var o,s,l,c;var f;var h={value:0};e.x=(e.x-this.x0)/this.a;e.y=(e.y-this.y0)/this.a;i=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y));r=Math.atan2(e.y,e.x);if(e.x>=0&&e.x>=Math.abs(e.y)){h.value=Xi.AREA_0}else if(e.y>=0&&e.y>=Math.abs(e.x)){h.value=Xi.AREA_1;r-=u}else if(e.x<0&&-e.x>=Math.abs(e.y)){h.value=Xi.AREA_2;r=r<0?r+y:r-y}else{h.value=Xi.AREA_3;r+=u}f=y/12*Math.tan(r);o=Math.sin(f)/(Math.cos(f)-1/Math.sqrt(2));s=Math.atan(o);n=Math.cos(r);a=Math.tan(i);l=1-n*n*a*a*(1-Math.cos(Math.atan(1/Math.cos(s))));if(l<-1){l=-1}else if(l>+1){l=+1}if(this.face===Bi.TOP){c=Math.acos(l);t.phi=u-c;if(h.value===Xi.AREA_0){t.lam=s+u}else if(h.value===Xi.AREA_1){t.lam=s<0?s+y:s-y}else if(h.value===Xi.AREA_2){t.lam=s-u}else{t.lam=s}}else if(this.face===Bi.BOTTOM){c=Math.acos(l);t.phi=c-u;if(h.value===Xi.AREA_0){t.lam=-s+u}else if(h.value===Xi.AREA_1){t.lam=-s}else if(h.value===Xi.AREA_2){t.lam=-s-u}else{t.lam=s<0?-s-y:-s+y}}else{var d,p,v;d=l;f=d*d;if(f>=1){v=0}else{v=Math.sqrt(1-f)*Math.sin(s)}f+=v*v;if(f>=1){p=0}else{p=Math.sqrt(1-f)}if(h.value===Xi.AREA_1){f=p;p=-v;v=f}else if(h.value===Xi.AREA_2){p=-p;v=-v}else if(h.value===Xi.AREA_3){f=p;p=v;v=-f}if(this.face===Bi.RIGHT){f=d;d=-p;p=f}else if(this.face===Bi.BACK){d=-d;p=-p}else if(this.face===Bi.LEFT){f=d;d=p;p=-f}t.phi=Math.acos(-v)-u;t.lam=Math.atan2(p,d);if(this.face===Bi.RIGHT){t.lam=en(t.lam,-u)}else if(this.face===Bi.BACK){t.lam=en(t.lam,-y)}else if(this.face===Bi.LEFT){t.lam=en(t.lam,+u)}}if(this.es!==0){var g;var m,_;g=t.phi<0?1:0;m=Math.tan(t.phi);_=this.b/Math.sqrt(m*m+this.one_minus_f_squared);t.phi=Math.atan(Math.sqrt(this.a*this.a-_*_)/(this.one_minus_f*_));if(g){t.phi=-t.phi}}t.lam+=this.long0;e.x=t.lam;e.y=t.phi;return e}function Ji(e,t,r,i){var n;if(e<d){i.value=Xi.AREA_0;n=0}else{n=Math.atan2(t,r);if(Math.abs(n)<=g){i.value=Xi.AREA_0}else if(n>g&&n<=u+g){i.value=Xi.AREA_1;n-=u}else if(n>u+g||n<=-(u+g)){i.value=Xi.AREA_2;n=n>=0?n-y:n+y}else{i.value=Xi.AREA_3;n+=u}}return n}function en(e,t){var r=e+t;if(r<-y){r+=m}else if(r>+y){r-=m}return r}var tn=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];var rn={init:Ki,forward:Zi,inverse:Qi,names:tn};var nn=function(e){e.Proj.projections.add(tt);e.Proj.projections.add(pt);e.Proj.projections.add(_t);e.Proj.projections.add(Pt);e.Proj.projections.add($t);e.Proj.projections.add(Nt["a"]);e.Proj.projections.add(Yt);e.Proj.projections.add(Bt);e.Proj.projections.add(Jt);e.Proj.projections.add(hr);e.Proj.projections.add(Ar);e.Proj.projections.add($r);e.Proj.projections.add(Hr);e.Proj.projections.add(Br);e.Proj.projections.add(Jr);e.Proj.projections.add(ai);e.Proj.projections.add(fi);e.Proj.projections.add(gi);e.Proj.projections.add(Si);e.Proj.projections.add(Ei);e.Proj.projections.add(ki);e.Proj.projections.add($i);e.Proj.projections.add(Hi);e.Proj.projections.add(qi);e.Proj.projections.add(rn)};je.defaultDatum="WGS84";je.Proj=fe;je.WGS84=new je.Proj("WGS84");je.Point=Ie;je.toPoint=be;je.defs=E;je.transform=xe;je.mgrs=Pe.a;je.version=De["a"];nn(je);var an=t["a"]=je},function(e,t,r){"use strict";var i=r(1);var n=r(88);var a=r(3);var o=r(51);var s=r(166);var l=function e(t,r){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};n["a"].call(this,i);if(i.continueMsg!==undefined){this.continueMsg=i.continueMsg}else{this.continueMsg=document.createElement("span");this.continueMsg.textContent=r.getString("Click to continue drawing the line.");var a=document.createElement("br");a.textContent=r.getString("Double-click or click last point to finish.");this.continueMsg.appendChild(a)}this.format=t};a["d"](l,n["a"]);l.prototype.createDrawInteraction=function(e,t){return new s["a"]({type:"LineString",source:t,style:e})};l.prototype.handleMeasure=function(e){var t=i["a"].assertInstanceof(this.sketchFeature.getGeometry(),o["a"]);var r=this.getMap().getView().getProjection();i["a"].assert(r);var a=n["a"].getFormattedLength(t,r,this.precision,this.format);var s=t.getLastCoordinate();e(a,s)};t["a"]=l},function(e,t,r){"use strict";var i=function e(){};i.prototype.createDate=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return e!==null?new Date(e):t};i.prototype.getTime=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return e?e.getTime():t};i.prototype.getOptions=function(e){var t=this.createDate(e.minValue);var r=this.createDate(e.maxValue);var i=this.createDate(e.minDefValue,t);var n=this.createDate(e.maxDefValue,r);var a=e.mode==="range"?[this.getTime(i),this.getTime(n)]:this.getTime(i);return{minDate:this.getTime(t),maxDate:this.getTime(r),values:a}};i.prototype.getUTCDate=function(e){return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())};i.module=angular.module("ngeoTime",[]);i.module.service("ngeoTime",i);t["a"]=i},function(e,t,r){"use strict";var i=r(3);var n=function e(t,r){this.data=t;this.columnDefs=r;this.selectedRows={}};n.getRowUid=function(e){return""+i["c"](e)};n.prototype.isRowSelected=function(e){return!!this.selectedRows[n.getRowUid(e)]};n.prototype.getSelectedCount=function(){return Object.keys(this.selectedRows).length};n.prototype.getSelectedRows=function(){var e=this;return this.data.filter(function(t){return e.isRowSelected(t)})};n.prototype.selectRow=function(e){var t=n.getRowUid(e);this.selectedRows[t]=e};n.prototype.toggleRow=function(e){var t=n.getRowUid(e);var r=this.isRowSelected(e);if(r){delete this.selectedRows[t]}else{this.selectedRows[t]=e}};n.prototype.selectAll=function(){var e=this;this.data.forEach(function(t){e.selectRow(t)})};n.prototype.unselectAll=function(){for(var e in this.selectedRows){delete this.selectedRows[e]}};n.prototype.invertSelection=function(){var e=this;this.data.forEach(function(t){e.toggleRow(t)})};n.module=angular.module("ngeoGridConfig",[]);t["a"]=n},function(e,t,r){"use strict";var i=r(84);var n=r(22);var a=function e(){this.extentHalfHorizontalDistance_;this.extentHalfVerticalDistance_};a.INCHES_PER_METER_=39.37;a.DOTS_PER_INCH_=72;a.prototype.createPrintMaskPostcompose=function(e,t,r){var o=this;return function(s){var l=s.context;var u=s.frameState;var c=u.viewState.resolution;var f=u.size[0]*u.pixelRatio;var h=u.size[1]*u.pixelRatio;var d=[f/2,h/2];var p=e();var v=p[1]*i["b"];var g=p[0]*i["b"];var m=t(u);var y=a.DOTS_PER_INCH_;var _=a.INCHES_PER_METER_;var b=g/y/_*m/c/2;o.extentHalfHorizontalDistance_=p[0]/y/_*m/2;var w=v/y/_*m/c/2;o.extentHalfVerticalDistance_=p[1]/y/_*m/2;l.beginPath();l.moveTo(0,0);l.lineTo(f,0);l.lineTo(f,h);l.lineTo(0,h);l.lineTo(0,0);l.closePath();if(!r){o.drawPrintZone_(l,d,b,w)}else{var S=n["i"](r());o.drawPrintZoneWithRotation_(l,d,b,w,S)}l.fillStyle="rgba(0, 5, 25, 0.5)";l.fill()}};a.prototype.drawPrintZone_=function(e,t,r,i){var n=t[0]-r;var a=t[1]-i;var o=t[0]+r;var s=t[1]+i;e.moveTo(n,a);e.lineTo(n,s);e.lineTo(o,s);e.lineTo(o,a);e.lineTo(n,a);e.closePath()};a.prototype.drawPrintZoneWithRotation_=function(e,t,r,i,n){var a=Math.sqrt(Math.pow(r,2)+Math.pow(i,2));var o=Math.atan(i/r)-n;var s=Math.atan(r/i)-n;var l=t[0]-Math.cos(o)*a;var u=t[1]+Math.sin(o)*a;var c=t[0]+Math.sin(s)*a;var f=t[1]+Math.cos(s)*a;var h=t[0]+Math.cos(o)*a;var d=t[1]-Math.sin(o)*a;var p=t[0]-Math.sin(s)*a;var v=t[1]-Math.cos(s)*a;e.moveTo(l,u);e.lineTo(c,f);e.lineTo(h,d);e.lineTo(p,v);e.lineTo(l,u);e.closePath()};a.prototype.getOptimalScale=function(e,t,r,i){var n=e[0]*t;var o=e[1]*t;var s=n*a.INCHES_PER_METER_*a.DOTS_PER_INCH_/r[0];var l=o*a.INCHES_PER_METER_*a.DOTS_PER_INCH_/r[1];var u=Math.min(s,l);var c=-1;for(var f=0,h=i.length;f<h;++f){if(u>i[f]){c=i[f]}}return c};a.prototype.getOptimalResolution=function(e,t,r){var i=a.DOTS_PER_INCH_*a.INCHES_PER_METER_;var n=t[0]*r/(i*e[0]);var o=t[1]*r/(i*e[1]);var s=Math.max(n,o);return s};a.prototype.getBottomLeftCorner=function(e){return[e[0]-this.extentHalfHorizontalDistance_,e[1]-this.extentHalfVerticalDistance_]};a.prototype.getBottomRightCorner=function(e){return[e[0]+this.extentHalfHorizontalDistance_,e[1]-this.extentHalfVerticalDistance_]};a.prototype.getUpLeftCorner=function(e){return[e[0]-this.extentHalfHorizontalDistance_,e[1]+this.extentHalfVerticalDistance_]};a.prototype.getUpRightCorner=function(e){return[e[0]+this.extentHalfHorizontalDistance_,e[1]+this.extentHalfVerticalDistance_]};a.module=angular.module("ngeoPrintUtils",[]);a.module.service("ngeoPrintUtils",a);t["a"]=a},function(e,t,r){"use strict";var i=r(3);var n=r(205);var a=r(9);var o=r(5);var s=r(11);var l=r(12);var u=r(245);var c={KVP:"KVP",REST:"REST"};var f=r(393);var h=r(172);r.d(t,"b",function(){return p});var d=function e(t){this.version_=t.version!==undefined?t.version:"1.0.0";this.format_=t.format!==undefined?t.format:"image/jpeg";this.dimensions_=t.dimensions!==undefined?t.dimensions:{};this.layer_=t.layer;this.matrixSet_=t.matrixSet;this.style_=t.style;var r=t.urls;if(r===undefined&&t.url!==undefined){r=Object(n["c"])(t.url)}this.requestEncoding_=t.requestEncoding!==undefined?t.requestEncoding:c.KVP;var i=this.requestEncoding_;var a=t.tileGrid;var o={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};if(i==c.KVP){Object(s["a"])(o,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_})}var l=this.dimensions_;this.createFromWMTSTemplate_=function(e){e=i==c.KVP?Object(h["a"])(e,o):e.replace(/\{(\w+?)\}/g,function(e,t){return t.toLowerCase()in o?o[t.toLowerCase()]:e});return function(t,r,n){if(!t){return undefined}else{var o={TileMatrix:a.getMatrixId(t[0]),TileCol:t[1],TileRow:-t[2]-1};Object(s["a"])(o,l);var u=e;if(i==c.KVP){u=Object(h["a"])(u,o)}else{u=u.replace(/\{(\w+?)\}/g,function(e,t){return o[t]})}return u}}};var f=r&&r.length>0?Object(n["b"])(r.map(this.createFromWMTSTemplate_)):n["d"];u["a"].call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:a,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:f,urls:r,wrapX:t.wrapX!==undefined?t.wrapX:false,transition:t.transition});this.setKey(this.getKeyForDimensions_())};Object(i["d"])(d,u["a"]);d.prototype.setUrls=function(e){this.urls=e;var t=e.join("\n");this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):Object(n["b"])(e.map(this.createFromWMTSTemplate_.bind(this))),t)};d.prototype.getDimensions=function(){return this.dimensions_};d.prototype.getFormat=function(){return this.format_};d.prototype.getLayer=function(){return this.layer_};d.prototype.getMatrixSet=function(){return this.matrixSet_};d.prototype.getRequestEncoding=function(){return this.requestEncoding_};d.prototype.getStyle=function(){return this.style_};d.prototype.getVersion=function(){return this.version_};d.prototype.getKeyForDimensions_=function(){var e=0;var t=[];for(var r in this.dimensions_){t[e++]=r+"-"+this.dimensions_[r]}return t.join("/")};d.prototype.updateDimensions=function(e){Object(s["a"])(this.dimensions_,e);this.setKey(this.getKeyForDimensions_())};function p(e,t){var r=e["Contents"]["Layer"];var i=Object(a["d"])(r,function(e,r,i){return e["Identifier"]==t["layer"]});if(i===null){return null}var n=e["Contents"]["TileMatrixSet"];var s=void 0;if(i["TileMatrixSetLink"].length>1){if("projection"in t){s=Object(a["e"])(i["TileMatrixSetLink"],function(e,r,i){var o=Object(a["d"])(n,function(t){return t["Identifier"]==e["TileMatrixSet"]});var s=o["SupportedCRS"];var u=Object(l["g"])(s.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Object(l["g"])(s);var c=Object(l["g"])(t["projection"]);if(u&&c){return Object(l["e"])(u,c)}else{return s==t["projection"]}})}else{s=Object(a["e"])(i["TileMatrixSetLink"],function(e,r,i){return e["TileMatrixSet"]==t["matrixSet"]})}}else{s=0}if(s<0){s=0}var u=i["TileMatrixSetLink"][s]["TileMatrixSet"];var h=i["TileMatrixSetLink"][s]["TileMatrixSetLimits"];var d=i["Format"][0];if("format"in t){d=t["format"]}s=Object(a["e"])(i["Style"],function(e,r,i){if("style"in t){return e["Title"]==t["style"]}else{return e["isDefault"]}});if(s<0){s=0}var p=i["Style"][s]["Identifier"];var v={};if("Dimension"in i){i["Dimension"].forEach(function(e,t,r){var i=e["Identifier"];var n=e["Default"];if(n===undefined){n=e["Value"][0]}v[i]=n})}var g=e["Contents"]["TileMatrixSet"];var m=Object(a["d"])(g,function(e,t,r){return e["Identifier"]==u});var y=void 0;var _=m["SupportedCRS"];if(_){y=Object(l["g"])(_.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Object(l["g"])(_)}if("projection"in t){var b=Object(l["g"])(t["projection"]);if(b){if(!y||Object(l["e"])(b,y)){y=b}}}var w=i["WGS84BoundingBox"];var S=void 0,C=void 0;if(w!==undefined){var x=Object(l["g"])("EPSG:4326").getExtent();C=w[0]==x[0]&&w[2]==x[2];S=Object(l["n"])(w,"EPSG:4326",y);var O=y.getExtent();if(O){if(!Object(o["g"])(O,S)){S=undefined}}}var T=Object(f["a"])(m,S,h);var E=[];var M=t["requestEncoding"];M=M!==undefined?M:"";if("OperationsMetadata"in e&&"GetTile"in e["OperationsMetadata"]){var j=e["OperationsMetadata"]["GetTile"]["DCP"]["HTTP"]["Get"];for(var A=0,P=j.length;A<P;++A){if(j[A]["Constraint"]){var k=Object(a["d"])(j[A]["Constraint"],function(e){return e["name"]=="GetEncoding"});var I=k["AllowedValues"]["Value"];if(M===""){M=I[0]}if(M===c.KVP){if(Object(a["f"])(I,c.KVP)){E.push(j[A]["href"])}}else{break}}else if(j[A]["href"]){M=c.KVP;E.push(j[A]["href"])}}}if(E.length===0){M=c.REST;i["ResourceURL"].forEach(function(e){if(e["resourceType"]==="tile"){d=e["format"];E.push(e["template"])}})}return{urls:E,layer:t["layer"],matrixSet:u,format:d,projection:y,requestEncoding:M,tileGrid:T,style:p,dimensions:v,wrapX:C,crossOrigin:t["crossOrigin"]}}var v=t["a"]=d},function(e,t,r){"use strict";var i=function e(t,r){this.dispatcher=t;this.mapping_=r};i.prototype.getEvents=function(){return Object.keys(this.mapping_)};i.prototype.getHandlerForEvent=function(e){return this.mapping_[e]};t["a"]=i},function(e,t,r){"use strict";var i=r(3);var n=r(9);var a=r(5);var o=r(94);var s=r(58);var l=r(4);var u=r(117);var c=r(23);var f=r(51);var h=r(130);var d=r(141);var p=r(49);var v=r(11);var g=r(12);var m=r(0);var y=s["a"]+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/"+"1.0.0/gmlsf.xsd";var _=function e(t){var r=t?t:{};s["b"].call(this,r);this.surface_=r.surface!==undefined?r.surface:false;this.curve_=r.curve!==undefined?r.curve:false;this.multiCurve_=r.multiCurve!==undefined?r.multiCurve:true;this.multiSurface_=r.multiSurface!==undefined?r.multiSurface:true;this.schemaLocation=r.schemaLocation?r.schemaLocation:y;this.hasZ=r.hasZ!==undefined?r.hasZ:false};Object(i["d"])(_,s["b"]);_.prototype.readMultiCurve_=function(e,t){var r=Object(m["u"])([],this.MULTICURVE_PARSERS_,e,t,this);if(r){var i=new h["a"](null);i.setLineStrings(r);return i}else{return undefined}};_.prototype.readMultiSurface_=function(e,t){var r=Object(m["u"])([],this.MULTISURFACE_PARSERS_,e,t,this);if(r){var i=new d["a"](null);i.setPolygons(r);return i}else{return undefined}};_.prototype.curveMemberParser_=function(e,t){Object(m["t"])(this.CURVEMEMBER_PARSERS_,e,t,this)};_.prototype.surfaceMemberParser_=function(e,t){Object(m["t"])(this.SURFACEMEMBER_PARSERS_,e,t,this)};_.prototype.readPatch_=function(e,t){return Object(m["u"])([null],this.PATCHES_PARSERS_,e,t,this)};_.prototype.readSegment_=function(e,t){return Object(m["u"])([null],this.SEGMENTS_PARSERS_,e,t,this)};_.prototype.readPolygonPatch_=function(e,t){return Object(m["u"])([null],this.FLAT_LINEAR_RINGS_PARSERS_,e,t,this)};_.prototype.readLineStringSegment_=function(e,t){return Object(m["u"])([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS_,e,t,this)};_.prototype.interiorParser_=function(e,t){var r=Object(m["u"])(undefined,this.RING_PARSERS,e,t,this);if(r){var i=t[t.length-1];i.push(r)}};_.prototype.exteriorParser_=function(e,t){var r=Object(m["u"])(undefined,this.RING_PARSERS,e,t,this);if(r){var i=t[t.length-1];i[0]=r}};_.prototype.readSurface_=function(e,t){var r=Object(m["u"])([null],this.SURFACE_PARSERS_,e,t,this);if(r&&r[0]){var i=new p["a"](null);var a=r[0];var o=[a.length];var s=void 0,l=void 0;for(s=1,l=r.length;s<l;++s){Object(n["c"])(a,r[s]);o.push(a.length)}i.setFlatCoordinates(c["a"].XYZ,a,o);return i}else{return undefined}};_.prototype.readCurve_=function(e,t){var r=Object(m["u"])([null],this.CURVE_PARSERS_,e,t,this);if(r){var i=new f["a"](null);i.setFlatCoordinates(c["a"].XYZ,r);return i}else{return undefined}};_.prototype.readEnvelope_=function(e,t){var r=Object(m["u"])([null],this.ENVELOPE_PARSERS_,e,t,this);return Object(a["k"])(r[1][0],r[1][1],r[2][0],r[2][1])};_.prototype.readFlatPos_=function(e,t){var r=Object(m["e"])(e,false);var i=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/;var n=[];var a=void 0;while(a=i.exec(r)){n.push(parseFloat(a[1]));r=r.substr(a[0].length)}if(r!==""){return undefined}var o=t[0];var s=o["srsName"];var l="enu";if(s){var u=Object(g["g"])(s);l=u.getAxisOrientation()}if(l==="neu"){var c=void 0,f=void 0;for(c=0,f=n.length;c<f;c+=3){var h=n[c];var d=n[c+1];n[c]=d;n[c+1]=h}}var p=n.length;if(p==2){n.push(0)}if(p===0){return undefined}return n};_.prototype.readFlatPosList_=function(e,t){var r=Object(m["e"])(e,false).replace(/^\s*|\s*$/g,"");var i=t[0];var n=i["srsName"];var a=i["srsDimension"];var o="enu";if(n){var s=Object(g["g"])(n);o=s.getAxisOrientation()}var u=r.split(/\s+/);var c=2;if(e.getAttribute("srsDimension")){c=Object(l["g"])(e.getAttribute("srsDimension"))}else if(e.getAttribute("dimension")){c=Object(l["g"])(e.getAttribute("dimension"))}else if(e.parentNode.getAttribute("srsDimension")){c=Object(l["g"])(e.parentNode.getAttribute("srsDimension"))}else if(a){c=Object(l["g"])(a)}var f=void 0,h=void 0,d=void 0;var p=[];for(var v=0,y=u.length;v<y;v+=c){f=parseFloat(u[v]);h=parseFloat(u[v+1]);d=c===3?parseFloat(u[v+2]):0;if(o.substr(0,2)==="en"){p.push(f,h,d)}else{p.push(h,f,d)}}return p};_.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS_={"http://www.opengis.net/gml":{pos:Object(m["o"])(_.prototype.readFlatPos_),posList:Object(m["o"])(_.prototype.readFlatPosList_)}};_.prototype.FLAT_LINEAR_RINGS_PARSERS_={"http://www.opengis.net/gml":{interior:_.prototype.interiorParser_,exterior:_.prototype.exteriorParser_}};_.prototype.GEOMETRY_PARSERS_={"http://www.opengis.net/gml":{Point:Object(m["o"])(s["b"].prototype.readPoint),MultiPoint:Object(m["o"])(s["b"].prototype.readMultiPoint),LineString:Object(m["o"])(s["b"].prototype.readLineString),MultiLineString:Object(m["o"])(s["b"].prototype.readMultiLineString),LinearRing:Object(m["o"])(s["b"].prototype.readLinearRing),Polygon:Object(m["o"])(s["b"].prototype.readPolygon),MultiPolygon:Object(m["o"])(s["b"].prototype.readMultiPolygon),Surface:Object(m["o"])(_.prototype.readSurface_),MultiSurface:Object(m["o"])(_.prototype.readMultiSurface_),Curve:Object(m["o"])(_.prototype.readCurve_),MultiCurve:Object(m["o"])(_.prototype.readMultiCurve_),Envelope:Object(m["o"])(_.prototype.readEnvelope_)}};_.prototype.MULTICURVE_PARSERS_={"http://www.opengis.net/gml":{curveMember:Object(m["j"])(_.prototype.curveMemberParser_),curveMembers:Object(m["j"])(_.prototype.curveMemberParser_)}};_.prototype.MULTISURFACE_PARSERS_={"http://www.opengis.net/gml":{surfaceMember:Object(m["j"])(_.prototype.surfaceMemberParser_),surfaceMembers:Object(m["j"])(_.prototype.surfaceMemberParser_)}};_.prototype.CURVEMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:Object(m["j"])(s["b"].prototype.readLineString),Curve:Object(m["j"])(_.prototype.readCurve_)}};_.prototype.SURFACEMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:Object(m["j"])(s["b"].prototype.readPolygon),Surface:Object(m["j"])(_.prototype.readSurface_)}};_.prototype.SURFACE_PARSERS_={"http://www.opengis.net/gml":{patches:Object(m["o"])(_.prototype.readPatch_)}};_.prototype.CURVE_PARSERS_={"http://www.opengis.net/gml":{segments:Object(m["o"])(_.prototype.readSegment_)}};_.prototype.ENVELOPE_PARSERS_={"http://www.opengis.net/gml":{lowerCorner:Object(m["j"])(_.prototype.readFlatPosList_),upperCorner:Object(m["j"])(_.prototype.readFlatPosList_)}};_.prototype.PATCHES_PARSERS_={"http://www.opengis.net/gml":{PolygonPatch:Object(m["o"])(_.prototype.readPolygonPatch_)}};_.prototype.SEGMENTS_PARSERS_={"http://www.opengis.net/gml":{LineStringSegment:Object(m["o"])(_.prototype.readLineStringSegment_)}};_.prototype.writePos_=function(e,t,r){var i=r[r.length-1];var n=i["hasZ"];var a=n?3:2;e.setAttribute("srsDimension",a);var o=i["srsName"];var s="enu";if(o){s=Object(g["g"])(o).getAxisOrientation()}var u=t.getCoordinates();var c=void 0;if(s.substr(0,2)==="en"){c=u[0]+" "+u[1]}else{c=u[1]+" "+u[0]}if(n){var f=u[2]||0;c+=" "+f}Object(l["n"])(e,c)};_.prototype.getCoords_=function(e,t,r){var i="enu";if(t){i=Object(g["g"])(t).getAxisOrientation()}var n=i.substr(0,2)==="en"?e[0]+" "+e[1]:e[1]+" "+e[0];if(r){var a=e[2]||0;n+=" "+a}return n};_.prototype.writePosList_=function(e,t,r){var i=r[r.length-1];var n=i["hasZ"];var a=n?3:2;e.setAttribute("srsDimension",a);var o=i["srsName"];var s=t.getCoordinates();var u=s.length;var c=new Array(u);var f=void 0;for(var h=0;h<u;++h){f=s[h];c[h]=this.getCoords_(f,o,n)}Object(l["n"])(e,c.join(" "))};_.prototype.writePoint_=function(e,t,r){var i=r[r.length-1];var n=i["srsName"];if(n){e.setAttribute("srsName",n)}var a=Object(m["d"])(e.namespaceURI,"pos");e.appendChild(a);this.writePos_(a,t,r)};_.prototype.writeEnvelope=function(e,t,r){var i=r[r.length-1];var n=i["srsName"];if(n){e.setAttribute("srsName",n)}var a=["lowerCorner","upperCorner"];var o=[t[0]+" "+t[1],t[2]+" "+t[3]];Object(m["v"])({node:e},this.ENVELOPE_SERIALIZERS_,m["b"],o,r,a,this)};_.prototype.writeLinearRing_=function(e,t,r){var i=r[r.length-1];var n=i["srsName"];if(n){e.setAttribute("srsName",n)}var a=Object(m["d"])(e.namespaceURI,"posList");e.appendChild(a);this.writePosList_(a,t,r)};_.prototype.RING_NODE_FACTORY_=function(e,t,r){var i=t[t.length-1];var n=i.node;var a=i["exteriorWritten"];if(a===undefined){i["exteriorWritten"]=true}return Object(m["d"])(n.namespaceURI,a!==undefined?"interior":"exterior")};_.prototype.writeSurfaceOrPolygon_=function(e,t,r){var i=r[r.length-1];var n=i["hasZ"];var a=i["srsName"];if(e.nodeName!=="PolygonPatch"&&a){e.setAttribute("srsName",a)}if(e.nodeName==="Polygon"||e.nodeName==="PolygonPatch"){var o=t.getLinearRings();Object(m["v"])({node:e,hasZ:n,srsName:a},this.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,o,r,undefined,this)}else if(e.nodeName==="Surface"){var s=Object(m["d"])(e.namespaceURI,"patches");e.appendChild(s);this.writeSurfacePatches_(s,t,r)}};_.prototype.writeCurveOrLineString_=function(e,t,r){var i=r[r.length-1];var n=i["srsName"];if(e.nodeName!=="LineStringSegment"&&n){e.setAttribute("srsName",n)}if(e.nodeName==="LineString"||e.nodeName==="LineStringSegment"){var a=Object(m["d"])(e.namespaceURI,"posList");e.appendChild(a);this.writePosList_(a,t,r)}else if(e.nodeName==="Curve"){var o=Object(m["d"])(e.namespaceURI,"segments");e.appendChild(o);this.writeCurveSegments_(o,t,r)}};_.prototype.writeMultiSurfaceOrPolygon_=function(e,t,r){var i=r[r.length-1];var n=i["hasZ"];var a=i["srsName"];var o=i["surface"];if(a){e.setAttribute("srsName",a)}var s=t.getPolygons();Object(m["v"])({node:e,hasZ:n,srsName:a,surface:o},this.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,r,undefined,this)};_.prototype.writeMultiPoint_=function(e,t,r){var i=r[r.length-1];var n=i["srsName"];var a=i["hasZ"];if(n){e.setAttribute("srsName",n)}var o=t.getPoints();Object(m["v"])({node:e,hasZ:a,srsName:n},this.POINTMEMBER_SERIALIZERS_,Object(m["q"])("pointMember"),o,r,undefined,this)};_.prototype.writeMultiCurveOrLineString_=function(e,t,r){var i=r[r.length-1];var n=i["hasZ"];var a=i["srsName"];var o=i["curve"];if(a){e.setAttribute("srsName",a)}var s=t.getLineStrings();Object(m["v"])({node:e,hasZ:n,srsName:a,curve:o},this.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,r,undefined,this)};_.prototype.writeRing_=function(e,t,r){var i=Object(m["d"])(e.namespaceURI,"LinearRing");e.appendChild(i);this.writeLinearRing_(i,t,r)};_.prototype.writeSurfaceOrPolygonMember_=function(e,t,r){var i=this.GEOMETRY_NODE_FACTORY_(t,r);if(i){e.appendChild(i);this.writeSurfaceOrPolygon_(i,t,r)}};_.prototype.writePointMember_=function(e,t,r){var i=Object(m["d"])(e.namespaceURI,"Point");e.appendChild(i);this.writePoint_(i,t,r)};_.prototype.writeLineStringOrCurveMember_=function(e,t,r){var i=this.GEOMETRY_NODE_FACTORY_(t,r);if(i){e.appendChild(i);this.writeCurveOrLineString_(i,t,r)}};_.prototype.writeSurfacePatches_=function(e,t,r){var i=Object(m["d"])(e.namespaceURI,"PolygonPatch");e.appendChild(i);this.writeSurfaceOrPolygon_(i,t,r)};_.prototype.writeCurveSegments_=function(e,t,r){var i=Object(m["d"])(e.namespaceURI,"LineStringSegment");e.appendChild(i);this.writeCurveOrLineString_(i,t,r)};_.prototype.writeGeometryElement=function(e,t,r){var i=r[r.length-1];var n=Object(v["a"])({},i);n.node=e;var a=void 0;if(Array.isArray(t)){if(i.dataProjection){a=Object(g["n"])(t,i.featureProjection,i.dataProjection)}else{a=t}}else{a=Object(o["b"])(t,true,i)}Object(m["v"])(n,this.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[a],r,undefined,this)};_.prototype.writeFeatureElement=function(e,t,r){var i=t.getId();if(i){e.setAttribute("fid",i)}var n=r[r.length-1];var a=n["featureNS"];var o=t.getGeometryName();if(!n.serializers){n.serializers={};n.serializers[a]={}}var s=t.getProperties();var c=[];var f=[];for(var h in s){var d=s[h];if(d!==null){c.push(h);f.push(d);if(h==o||d instanceof u["a"]){if(!(h in n.serializers[a])){n.serializers[a][h]=Object(m["l"])(this.writeGeometryElement,this)}}else{if(!(h in n.serializers[a])){n.serializers[a][h]=Object(m["l"])(l["n"])}}}}var p=Object(v["a"])({},n);p.node=e;Object(m["v"])(p,n.serializers,Object(m["q"])(undefined,a),f,r,c)};_.prototype.writeFeatureMembers_=function(e,t,r){var i=r[r.length-1];var n=i["featureType"];var a=i["featureNS"];var o={};o[a]={};o[a][n]=Object(m["l"])(this.writeFeatureElement,this);var s=Object(v["a"])({},i);s.node=e;Object(m["v"])(s,o,Object(m["q"])(n,a),t,r)};var b={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};_.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(e,t,r){var i=t[t.length-1].node;return Object(m["d"])("http://www.opengis.net/gml",b[i.nodeName])};_.prototype.GEOMETRY_NODE_FACTORY_=function(e,t,r){var i=t[t.length-1];var n=i["multiSurface"];var a=i["surface"];var o=i["curve"];var s=i["multiCurve"];var l=void 0;if(!Array.isArray(e)){l=e.getType();if(l==="MultiPolygon"&&n===true){l="MultiSurface"}else if(l==="Polygon"&&a===true){l="Surface"}else if(l==="LineString"&&o===true){l="Curve"}else if(l==="MultiLineString"&&s===true){l="MultiCurve"}}else{l="Envelope"}return Object(m["d"])("http://www.opengis.net/gml",l)};_.prototype.writeGeometryNode=function(e,t){t=this.adaptOptions(t);var r=Object(m["d"])("http://www.opengis.net/gml","geom");var i={node:r,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};if(t){Object(v["a"])(i,t)}this.writeGeometryElement(r,e,[i]);return r};_.prototype.writeFeatures;_.prototype.writeFeaturesNode=function(e,t){t=this.adaptOptions(t);var r=Object(m["d"])("http://www.opengis.net/gml","featureMembers");r.setAttributeNS(m["c"],"xsi:schemaLocation",this.schemaLocation);var i={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};if(t){Object(v["a"])(i,t)}this.writeFeatureMembers_(r,e,[i]);return r};_.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml":{exterior:Object(m["l"])(_.prototype.writeRing_),interior:Object(m["l"])(_.prototype.writeRing_)}};_.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:Object(m["l"])(l["n"]),upperCorner:Object(m["l"])(l["n"])}};_.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:Object(m["l"])(_.prototype.writeSurfaceOrPolygonMember_),polygonMember:Object(m["l"])(_.prototype.writeSurfaceOrPolygonMember_)}};_.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:Object(m["l"])(_.prototype.writePointMember_)}};_.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:Object(m["l"])(_.prototype.writeLineStringOrCurveMember_),curveMember:Object(m["l"])(_.prototype.writeLineStringOrCurveMember_)}};_.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:Object(m["l"])(_.prototype.writeCurveOrLineString_),MultiCurve:Object(m["l"])(_.prototype.writeMultiCurveOrLineString_),Point:Object(m["l"])(_.prototype.writePoint_),MultiPoint:Object(m["l"])(_.prototype.writeMultiPoint_),LineString:Object(m["l"])(_.prototype.writeCurveOrLineString_),MultiLineString:Object(m["l"])(_.prototype.writeMultiCurveOrLineString_),LinearRing:Object(m["l"])(_.prototype.writeLinearRing_),Polygon:Object(m["l"])(_.prototype.writeSurfaceOrPolygon_),MultiPolygon:Object(m["l"])(_.prototype.writeMultiSurfaceOrPolygon_),Surface:Object(m["l"])(_.prototype.writeSurfaceOrPolygon_),MultiSurface:Object(m["l"])(_.prototype.writeMultiSurfaceOrPolygon_),Envelope:Object(m["l"])(_.prototype.writeEnvelope)}};t["a"]=_},function(e,t,r){"use strict";t["a"]={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"}},function(e,t,r){"use strict";r.d(t,"c",function(){return n});r.d(t,"d",function(){return a});r.d(t,"a",function(){return o});r.d(t,"b",function(){return s});var i=r(22);function n(e,t){if(e!==undefined){return 0}else{return undefined}}function a(e,t){if(e!==undefined){return e+t}else{return undefined}}function o(e){var t=2*Math.PI/e;return function(e,r){if(e!==undefined){e=Math.floor((e+r)/t+.5)*t;return e}else{return undefined}}}function s(e){var t=e||Object(i["i"])(5);return function(e,r){if(e!==undefined){if(Math.abs(e+r)<=t){return 0}else{return e+r}}else{return undefined}}}},function(e,t,r){"use strict";r.d(t,"a",function(){return i});r.d(t,"b",function(){return n});r.d(t,"c",function(){return a});r.d(t,"d",function(){return o});function i(e,t,r,i){for(var n=0,a=r.length;n<a;++n){e[t++]=r[n]}return t}function n(e,t,r,i){for(var n=0,a=r.length;n<a;++n){var o=r[n];for(var s=0;s<i;++s){e[t++]=o[s]}}return t}function a(e,t,r,i,a){var o=a?a:[];var s=0;for(var l=0,u=r.length;l<u;++l){var c=n(e,t,r[l],i);o[s++]=c;t=c}o.length=s;return o}function o(e,t,r,i,n){var o=n?n:[];var s=0;for(var l=0,u=r.length;l<u;++l){var c=a(e,t,r[l],i,o[s]);o[s++]=c;t=c[c.length-1]}o.length=s;return o}},function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"b",function(){return a});r.d(t,"c",function(){return o});r.d(t,"d",function(){return s});var i=r(5);function n(e,t,r,n,o){var s=Object(i["t"])(o,function(i){return!a(e,t,r,n,i[0],i[1])});return!s}function a(e,t,r,i,n,a){var o=0;var s=e[r-i];var l=e[r-i+1];for(;t<r;t+=i){var u=e[t];var c=e[t+1];if(l<=a){if(c>a&&(u-s)*(a-l)-(n-s)*(c-l)>0){o++}}else if(c<=a&&(u-s)*(a-l)-(n-s)*(c-l)<0){o--}s=u;l=c}return o!==0}function o(e,t,r,i,n,o){if(r.length===0){return false}if(!a(e,t,r[0],i,n,o)){return false}for(var s=1,l=r.length;s<l;++s){if(a(e,r[s-1],r[s],i,n,o)){return false}}return true}function s(e,t,r,i,n,a){if(r.length===0){return false}for(var s=0,l=r.length;s<l;++s){var u=r[s];if(o(e,t,u,i,n,a)){return true}t=u[u.length-1]}return false}},function(e,t,r){"use strict";r.d(t,"a",function(){return s});r.d(t,"b",function(){return l});r.d(t,"d",function(){return u});r.d(t,"c",function(){return c});var i=r(39);var n=r(22);var a=r(151);function o(e,t){var r=/\{z\}/g;var n=/\{x\}/g;var a=/\{y\}/g;var o=/\{-y\}/g;return function(s,l,u){if(!s){return undefined}else{return e.replace(r,s[0].toString()).replace(n,s[1].toString()).replace(a,function(){var e=-s[2]-1;return e.toString()}).replace(o,function(){var e=s[0];var r=t.getFullTileRange(e);Object(i["a"])(r,55);var n=r.getHeight()+s[2];return n.toString()})}}}function s(e,t){var r=e.length;var i=new Array(r);for(var n=0;n<r;++n){i[n]=o(e[n],t)}return l(i)}function l(e){if(e.length===1){return e[0]}return function(t,r,i){if(!t){return undefined}else{var o=Object(a["e"])(t);var s=Object(n["d"])(o,e.length);return e[s](t,r,i)}}}function u(e,t,r){return undefined}function c(e){var t=[];var r=/\{([a-z])-([a-z])\}/.exec(e);if(r){var i=r[1].charCodeAt(0);var n=r[2].charCodeAt(0);var a=void 0;for(a=i;a<=n;++a){t.push(e.replace(r[0],String.fromCharCode(a)))}return t}r=r=/\{(\d+)-(\d+)\}/.exec(e);if(r){var o=parseInt(r[2],10);for(var s=parseInt(r[1],10);s<=o;s++){t.push(e.replace(r[0],s.toString()))}return t}t.push(e);return t}},function(e,t,r){"use strict";t["a"]={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"}},function(e,t,r){"use strict";var i=r(1);var n=r(362);var a=angular.module("ngeoPopup",["ngSanitize"]);a.value("ngeoPopupTemplateUrl",function(e,t){var r=t["ngeoPopupTemplateurl"];return r!==undefined?r:"ngeo/message/popupcomponent"});a.run(["$templateCache",function(e){e.put("ngeo/message/popupcomponent",r(526))}]);a.directive_=function(e){return{restrict:"A",templateUrl:e,link:function e(t,r,i){r.addClass("popover");t.close=function(e){if(e){e.stopPropagation();e.preventDefault()}r.addClass("hidden")};t.$watch("open",function(e,t){r.css("display",e?"block":"none")})}}};a.directive_.$inject=["ngeoPopupTemplateUrl"];a.directive("ngeoPopup",a.directive_);var o=a;var s=function e(t,r,i,n){var a=this;this.scope=r.$new(true);this.scope.$watch(function(){return a.scope["open"]},function(e){if(!e&&a.autoDestroy_){a.timeout_(function(){a.destroy()})}});this.sce_=i;this.timeout_=n;this.element_=angular.element("<div ngeo-popup></div>");this.autoDestroy_=false;t(this.element_)(this.scope);angular.element(document.body).append(this.element_)};s.prototype.getOpen=function(){return this.scope["open"]};s.prototype.setOpen=function(e){this.scope["open"]=e};s.prototype.destroy=function(){this.scope.$destroy();this.element_.remove()};s.prototype.setTitle=function(e){var t=this.sce_.trustAsHtml(e);this.scope["title"]=t};s.prototype.setContent=function(e,t){this.scope["content"]=t?this.sce_.trustAsHtml(e):e};s.prototype.setUrl=function(e){var t=this.sce_.trustAsHtml('<iframe src="'+e+'" width="100%" height="100%"></iframe>');this.setContent(t)};s.prototype.setWidth=function(e){this.element_.width(e)};s.prototype.setHeight=function(e){this.element_.height(e)};s.prototype.setSize=function(e,t){this.setWidth(e);this.setHeight(t)};s.prototype.setAutoDestroy=function(e){this.autoDestroy_=e};s.prototype.addClass=function(e){this.element_.addClass(e)};s.prototype.open=function(e){if(e.url){this.setUrl(e.url)}else if(e.content){this.setContent(e.content)}else{i["a"].fail('ngeo.message.Popup options requirest "url" or "content".')}if(e.autoDestroy!==undefined){this.setAutoDestroy(e.autoDestroy)}if(e.cls!==undefined){this.addClass(e.cls)}if(e.height!==undefined){this.setHeight(e.height)}if(e.title!==undefined){this.setTitle(e.title)}if(e.width!==undefined){this.setWidth(e.width)}this.setOpen(true)};s.Factory=function(e,t,r,i){return function(){return new s(e,t,r,i)}};s.Factory.$inject=["$compile","$rootScope","$sce","$timeout"];s.module=angular.module("ngeoCreatePopup",[o.name]);s.module.factory("ngeoCreatePopup",s.Factory);var l=t["a"]=s},function(e,t,r){"use strict";var i=r(1);var n=r(163);var a=r(69);var o=r(3);var s=r(21);var l=r(2);var u=r(36);var c=r(215);var f=r(217);var h=r(51);var d=r(34);var p=r(29);var v=r(89);var g=r(76);var m=function e(t){p["b"].call(this,{handleDownEvent:e.handleDownEvent_,handleEvent:e.handleEvent_,handleUpEvent:e.handleUpEvent_});this.downPx_=null;this.source_=t.source!==undefined?t.source:null;this.started_=false;this.sketchFeature_=null;this.sketchPoint_=null;this.squaredClickTolerance_=4;this.sketchLayer_=new v["a"]({source:new g["b"]({useSpatialIndex:false,wrapX:false}),style:t.style||n["a"].getDefaultDrawStyleFunction()});l["a"](this,"change:active",this.updateState_,this)};o["d"](m,p["b"]);m.handleDownEvent_=function(e){this.downPx_=e.pixel;return true};m.handleUpEvent_=function(e){var t=this.downPx_;var r=e.pixel;var i=t[0]-r[0];var n=t[1]-r[1];var a=i*i+n*n;var o=true;if(a<=this.squaredClickTolerance_){this.handlePointerMove_(e);if(!this.started_){this.startDrawing_(e)}else{this.finishDrawing_()}o=false}return o};m.handleEvent_=function(e){var t=true;if(e.type==="pointermove"){t=this.handlePointerMove_(e)}else if(e.type==="dblclick"){t=false}return p["c"].call(this,e)&&t};m.prototype.handlePointerMove_=function(e){if(this.started_){this.modifyDrawing_(e)}else{this.createOrUpdateSketchPoint_(e)}return true};m.prototype.createOrUpdateSketchPoint_=function(e){var t=e.coordinate.slice();if(this.sketchPoint_===null){this.sketchPoint_=new s["a"](new d["a"](t));this.updateSketchFeatures_()}else{var r=this.sketchPoint_.getGeometry();i["a"].assertInstanceof(r,d["a"]);r.setCoordinates(t)}};m.prototype.updateSketchFeatures_=function(){var e=[];if(this.sketchFeature_!==null){e.push(this.sketchFeature_)}if(this.sketchPoint_!==null){e.push(this.sketchPoint_)}var t=this.sketchLayer_.getSource();t.clear(true);t.addFeatures(e)};m.prototype.startDrawing_=function(e){var t=e.coordinate;this.started_=true;var r=new h["a"]([t.slice(),t.slice()]);var n=new c["a"](t,0);var o=new f["a"]([r,n]);i["a"].assert(o!==undefined);this.sketchFeature_=new s["a"];this.sketchFeature_.setGeometry(o);this.updateSketchFeatures_();var l=new a["a"]("drawstart",{feature:this.sketchFeature_});this.dispatchEvent(l)};m.prototype.modifyDrawing_=function(e){var t=e.coordinate;var r=i["a"].assertInstanceof(this.sketchFeature_.getGeometry(),f["a"]);var n=r.getGeometriesArray();var a=n[0];i["a"].assertInstanceof(a,h["a"]);var o=a.getCoordinates();var s=this.sketchPoint_.getGeometry();i["a"].assertInstanceof(s,d["a"]);s.setCoordinates(t);var l=o[o.length-1];l[0]=t[0];l[1]=t[1];i["a"].assertInstanceof(a,h["a"]);a.setCoordinates(o);var u=i["a"].assertInstanceof(n[1],c["a"]);u.setRadius(a.getLength());this.updateSketchFeatures_()};m.prototype.abortDrawing_=function(){this.started_=false;var e=this.sketchFeature_;if(e!==null){this.sketchFeature_=null;this.sketchPoint_=null;this.sketchLayer_.getSource().clear(true)}return e};m.prototype.shouldStopEvent=u["a"];m.prototype.updateState_=function(){var e=this.getMap();var t=this.getActive();if(e===null||!t){this.abortDrawing_()}this.sketchLayer_.setMap(t?e:null)};m.prototype.finishDrawing_=function(){var e=this.abortDrawing_();i["a"].assert(e!==null);if(this.source_!==null){this.source_.addFeature(e)}var t=new a["a"]("drawend",{feature:this.sketchFeature_});this.dispatchEvent(t)};m.prototype.setMap=function(e){p["b"].prototype.setMap.call(this,e);this.updateState_()};var y=m;var _=r(88);var b=r(222);var w=function e(t,r){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_["a"].call(this,n);this.continueMsg;if(n.continueMsg!==undefined){this.continueMsg=n.continueMsg}else{this.continueMsg=document.createElement("span");this.continueMsg.textContent="Click to finish."}this.numberFormat=i["a"].assert(r);this.unitPrefixFormat=i["a"].assert(t)};o["d"](w,_["a"]);w.prototype.createDrawInteraction=function(e,t){return new y({source:t,style:e})};w.prototype.handleMeasure=function(e){var t=i["a"].assertInstanceof(this.sketchFeature.getGeometry(),f["a"]);var r=i["a"].assertInstanceof(t.getGeometries()[0],h["a"]);var n=w.getFormattedAzimutRadius(r,i["a"].assertInstanceof(this.getMap().getView().getProjection(),b["a"]),this.decimals,this.precision,this.unitPrefixFormat,this.numberFormat);e(n,r.getLastCoordinate())};w.getFormattedAzimutRadius=function(e,t,r,i,n,a){var o=w.getFormattedAzimut(e,r,a);o+=", "+_["a"].getFormattedLength(e,t,i,n);return o};w.getFormattedAzimut=function(e,t,r){var i=w.getAzimut(e);return r(i,t)+"°"};w.getAzimut=function(e){var t=e.getCoordinates();var r=t[1][0]-t[0][0];var i=t[1][1]-t[0][1];var n=Math.acos(i/Math.sqrt(r*r+i*i));var a=r>0?1:-1;return a*n*180/Math.PI%360};var S=t["a"]=w},function(e,t,r){"use strict";var i=r(2);var n=function e(t,r){this.manager_=t;this.features_=null;this.index_=r};n.prototype.addFeature=function(e){this.manager_.addFeature(e,this.index_)};n.prototype.removeFeature=function(e){this.manager_.removeFeature(e,this.index_)};n.prototype.clear=function(){this.manager_.clear(this.index_)};n.prototype.setFeatures=function(e){var t=this;if(this.features_!==null){this.features_.clear();i["c"](this.features_,"add",this.handleFeatureAdd_,this);i["c"](this.features_,"remove",this.handleFeatureRemove_,this)}if(e!==null){e.forEach(function(e){t.addFeature(e)});i["a"](e,"add",this.handleFeatureAdd_,this);i["a"](e,"remove",this.handleFeatureRemove_,this)}this.features_=e};n.prototype.setStyle=function(e){this.manager_.setStyle(e,this.index_)};n.prototype.handleFeatureAdd_=function(e){var t=e.element;this.addFeature(t)};n.prototype.handleFeatureRemove_=function(e){var t=e.element;this.removeFeature(t)};n.module=angular.module("ngeoFeatureOverlay",[]);t["a"]=n},function(e,t,r){"use strict";r.d(t,"a",function(){return i});function i(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}},function(e,t,r){"use strict";var i=r(1);var n=r(28);var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var s=function(){function e(t){o(this,e);this.dataSourcesCollection_=new n["b"](t.dataSources);this.title_=t.title}e.prototype.destroy=function e(){this.dataSourcesCollection_.clear()};e.prototype.getDataSourceState=function t(r){return r.visible?e.VisibilityState.ON:e.VisibilityState.OFF};e.prototype.addDataSource=function e(t){this.dataSourcesCollection_.push(t)};e.prototype.removeDataSource=function e(t){this.dataSourcesCollection_.remove(t)};e.prototype.toggleVisibilityState=function t(){var r=this.visibilityState!==e.VisibilityState.ON;for(var i=this.dataSources,n=Array.isArray(i),a=0,i=n?i:i[Symbol.iterator]();;){var o;if(n){if(a>=i.length)break;o=i[a++]}else{a=i.next();if(a.done)break;o=a.value}var s=o;if(s.visible!==r){s.visible=r}}};a(e,[{key:"dataSources",get:function e(){return this.dataSourcesCollection_.getArray()}},{key:"dataSourcesCollection",get:function e(){return this.dataSourcesCollection_}},{key:"title",get:function e(){return this.title_}},{key:"visibilityState",get:function t(){var r=void 0;for(var n=this.dataSources,a=Array.isArray(n),o=0,n=a?n:n[Symbol.iterator]();;){var s;if(a){if(o>=n.length)break;s=n[o++]}else{o=n.next();if(o.done)break;s=o.value}var l=s;if(r===undefined){r=this.getDataSourceState(l)}else{var u=this.getDataSourceState(l);if(u!==r){r=e.VisibilityState.INDETERMINATE}}if(r===e.VisibilityState.INDETERMINATE){break}}i["a"].assertString(r);return r}}]);return e}();s.VisibilityState={INDETERMINATE:"indeterminate",OFF:"off",ON:"on"};t["a"]=s},function(e,t,r){"use strict";var i=r(305);var n=r(229);var a=r(281);var o=r(18);var s=r(105);var l=r(50);var u=r(77);var c=r(3);var f=angular.module("gmfObjecteditingToolsComponent",[i["a"].name,n["a"].name,a["a"].name,s["a"].name,u["a"].module.name]);f.run(["$templateCache",function(e){e.put("gmf/objectediting/toolsComponent",r(485))}]);f.value("gmfObjectEditingToolsOptions",{});f.directive_=function(){return{controller:"GmfObjecteditingtoolsController as oetCtrl",scope:{active:"=gmfObjecteditingtoolsActive",copyFromActive:"=gmfObjecteditingtoolsCopyfromactive",deleteFromActive:"=gmfObjecteditingtoolsDeletefromactive",feature:"<gmfObjecteditingtoolsFeature",geomType:"<gmfObjecteditingtoolsGeomtype",map:"<gmfObjecteditingtoolsMap",process:"=gmfObjecteditingtoolsProcess",queryableLayerInfo:"=gmfObjecteditingtoolsQueryablelayerinfo",requiresLayer:"=gmfObjecteditingtoolsRequireslayer",sketchFeatures:"<gmfObjecteditingtoolsSketchfeatures"},bindToController:true,templateUrl:"gmf/objectediting/toolsComponent"}};f.directive("gmfObjecteditingtools",f.directive_);f.Controller_=function(e,t,r){this.active;this.copyFromActive;this.deleteFromActive;this.feature;this.geomType;this.map;this.queryableLayerInfo;this.process;this.requiresLayer;this.sketchFeatures;this.scope_=t;this.ngeoToolActivateMgr_=r;this.geomTypePolygon=o["a"].POLYGON;this.toolActiveNames_=[];this.drawActive=false;this.registerTool_("drawActive",f.ProcessType.ADD);this.eraseActive=false;this.registerTool_("eraseActive",f.ProcessType.DELETE);this.drawTriangleActive=false;this.triangleAngle=Math.PI/180*90;var i=e.get("gmfObjectEditingToolsOptions");this.triangleRadius=i.regularPolygonRadius!==undefined?i.regularPolygonRadius:100;this.registerTool_("drawTriangleActive",f.ProcessType.ADD);this.registerTool_("copyFromActive",f.ProcessType.ADD,true);this.registerTool_("deleteFromActive",f.ProcessType.DELETE,true);t.$on("$destroy",this.handleDestroy_.bind(this))};f.Controller_.$inject=["$injector","$scope","ngeoToolActivateMgr"];f.Controller_.prototype.registerTool_=function(e,t,r){var i=this;var n=r===true;this.scope_.$watch(function(){return i[e]},this.handleToolActiveChange_.bind(this,t,n));var a=f.Controller_.NAMESPACE_+"-"+c["c"](this);var o=new l["a"](this,e);this.ngeoToolActivateMgr_.registerTool(a,o,false);this.toolActiveNames_.push(e)};f.Controller_.prototype.handleToolActiveChange_=function(e,t,r){if(r){this.process=e;this.requiresLayer=t}var i=false;for(var n=0,a=this.toolActiveNames_.length;n<a;n++){i=i||this[this.toolActiveNames_[n]];if(i){break}}this.active=i;if(!this.active){this.requiresLayer=false}};f.Controller_.prototype.handleDestroy_=function(){};f.controller("GmfObjecteditingtoolsController",f.Controller_);f.Controller_.NAMESPACE_="oet";f.ProcessType={ADD:"add",DELETE:"delete"};t["a"]=f},function(e,t,r){(function(e,r){true?r(t):undefined})(this,function(e){"use strict";var t=0,r=0,i=0,n=1e3,a,o,s=0,l=0,u=0,c=typeof performance==="object"&&performance.now?performance:Date,f=typeof window==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function h(){return l||(f(d),l=c.now()+u)}function d(){l=0}function p(){this._call=this._time=this._next=null}p.prototype=v.prototype={constructor:p,restart:function(e,t,r){if(typeof e!=="function")throw new TypeError("callback is not a function");r=(r==null?h():+r)+(t==null?0:+t);if(!this._next&&o!==this){if(o)o._next=this;else a=this;o=this}this._call=e;this._time=r;b()},stop:function(){if(this._call){this._call=null;this._time=Infinity;b()}}};function v(e,t,r){var i=new p;i.restart(e,t,r);return i}function g(){h();++t;var e=a,r;while(e){if((r=l-e._time)>=0)e._call.call(null,r);e=e._next}--t}function m(){l=(s=c.now())+u;t=r=0;try{g()}finally{t=0;_();l=0}}function y(){var e=c.now(),t=e-s;if(t>n)u-=t,s=e}function _(){var e,t=a,r,i=Infinity;while(t){if(t._call){if(i>t._time)i=t._time;e=t,t=t._next}else{r=t._next,t._next=null;t=e?e._next=r:a=r}}o=e;b(i)}function b(e){if(t)return;if(r)r=clearTimeout(r);var a=e-l;if(a>24){if(e<Infinity)r=setTimeout(m,e-c.now()-u);if(i)i=clearInterval(i)}else{if(!i)s=c.now(),i=setInterval(y,n);t=1,f(m)}}function w(e,t,r){var i=new p;t=t==null?0:+t;i.restart(function(r){i.stop();e(r+t)},t,r);return i}function S(e,t,r){var i=new p,n=t;if(t==null)return i.restart(e,t,r),i;t=+t,r=r==null?h():+r;i.restart(function a(o){o+=n;i.restart(a,n+=t,r);e(o)},t,r);return i}e.now=h;e.timer=v;e.timerFlush=g;e.timeout=w;e.interval=S;Object.defineProperty(e,"__esModule",{value:true})})},function(e,t,r){"use strict";r.d(t,"a",function(){return i});function i(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}},function(e,t,r){"use strict";var i=r(3);var n=r(5);var a=r(23);var o=r(7);var s=r(85);var l=r(203);var u=function e(t,r,i){s["a"].call(this);var n=r?r:0;this.setCenterAndRadius(t,n,i)};Object(i["d"])(u,s["a"]);u.prototype.clone=function(){var e=new u(null);e.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return e};u.prototype.closestPointXY=function(e,t,r,i){var n=this.flatCoordinates;var a=e-n[0];var o=t-n[1];var s=a*a+o*o;if(s<i){if(s===0){for(var l=0;l<this.stride;++l){r[l]=n[l]}}else{var u=this.getRadius()/Math.sqrt(s);r[0]=n[0]+u*a;r[1]=n[1]+u*o;for(var c=2;c<this.stride;++c){r[c]=n[c]}}r.length=this.stride;return s}else{return i}};u.prototype.containsXY=function(e,t){var r=this.flatCoordinates;var i=e-r[0];var n=t-r[1];return i*i+n*n<=this.getRadiusSquared_()};u.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)};u.prototype.computeExtent=function(e){var t=this.flatCoordinates;var r=t[this.stride]-t[0];return Object(n["k"])(t[0]-r,t[1]-r,t[0]+r,t[1]+r,e)};u.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())};u.prototype.getRadiusSquared_=function(){var e=this.flatCoordinates[this.stride]-this.flatCoordinates[0];var t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t};u.prototype.getType=function(){return o["a"].CIRCLE};u.prototype.intersectsExtent=function(e){var t=this.getExtent();if(Object(n["F"])(e,t)){var r=this.getCenter();if(e[0]<=r[0]&&e[2]>=r[0]){return true}if(e[1]<=r[1]&&e[3]>=r[1]){return true}return Object(n["t"])(e,this.intersectsCoordinate,this)}return false};u.prototype.setCenter=function(e){var t=this.stride;var r=this.flatCoordinates[t]-this.flatCoordinates[0];var i=e.slice();i[t]=i[0]+r;for(var n=1;n<t;++n){i[t+n]=e[n]}this.setFlatCoordinates(this.layout,i)};u.prototype.setCenterAndRadius=function(e,t,r){if(!e){this.setFlatCoordinates(a["a"].XY,null)}else{this.setLayout(r,e,0);if(!this.flatCoordinates){this.flatCoordinates=[]}var i=this.flatCoordinates;var n=Object(l["a"])(i,0,e,this.stride);i[n++]=i[0]+t;for(var o=1,s=this.stride;o<s;++o){i[n++]=i[o]}i.length=n;this.changed()}};u.prototype.getCoordinates=function(){};u.prototype.setCoordinates=function(e,t){};u.prototype.setFlatCoordinates=function(e,t){this.setFlatCoordinatesInternal(e,t);this.changed()};u.prototype.setRadius=function(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e;this.changed()};u.prototype.transform;t["a"]=u},function(e,t,r){"use strict";var i=r(3);var n=r(56);var a=function e(t,r,i){n["a"].call(this,t);this.map=r;this.frameState=i!==undefined?i:null};Object(i["d"])(a,n["a"]);t["a"]=a},function(e,t,r){"use strict";var i=r(3);var n=r(2);var a=r(16);var o=r(5);var s=r(117);var l=r(7);var u=r(11);var c=function e(t){s["a"].call(this);this.geometries_=t?t:null;this.listenGeometriesChange_()};Object(i["d"])(c,s["a"]);function f(e){var t=[];for(var r=0,i=e.length;r<i;++r){t.push(e[r].clone())}return t}c.prototype.unlistenGeometriesChange_=function(){if(!this.geometries_){return}for(var e=0,t=this.geometries_.length;e<t;++e){Object(n["c"])(this.geometries_[e],a["a"].CHANGE,this.changed,this)}};c.prototype.listenGeometriesChange_=function(){if(!this.geometries_){return}for(var e=0,t=this.geometries_.length;e<t;++e){Object(n["a"])(this.geometries_[e],a["a"].CHANGE,this.changed,this)}};c.prototype.clone=function(){var e=new c(null);e.setGeometries(this.geometries_);return e};c.prototype.closestPointXY=function(e,t,r,i){if(i<Object(o["e"])(this.getExtent(),e,t)){return i}var n=this.geometries_;for(var a=0,s=n.length;a<s;++a){i=n[a].closestPointXY(e,t,r,i)}return i};c.prototype.containsXY=function(e,t){var r=this.geometries_;for(var i=0,n=r.length;i<n;++i){if(r[i].containsXY(e,t)){return true}}return false};c.prototype.computeExtent=function(e){Object(o["l"])(e);var t=this.geometries_;for(var r=0,i=t.length;r<i;++r){Object(o["q"])(e,t[r].getExtent())}return e};c.prototype.getGeometries=function(){return f(this.geometries_)};c.prototype.getGeometriesArray=function(){return this.geometries_};c.prototype.getSimplifiedGeometry=function(e){if(this.simplifiedGeometryRevision!=this.getRevision()){Object(u["b"])(this.simplifiedGeometryCache);this.simplifiedGeometryMaxMinSquaredTolerance=0;this.simplifiedGeometryRevision=this.getRevision()}if(e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance){return this}var t=e.toString();if(this.simplifiedGeometryCache.hasOwnProperty(t)){return this.simplifiedGeometryCache[t]}else{var r=[];var i=this.geometries_;var n=false;for(var a=0,o=i.length;a<o;++a){var s=i[a];var l=s.getSimplifiedGeometry(e);r.push(l);if(l!==s){n=true}}if(n){var f=new c(null);f.setGeometriesArray(r);this.simplifiedGeometryCache[t]=f;return f}else{this.simplifiedGeometryMaxMinSquaredTolerance=e;return this}}};c.prototype.getType=function(){return l["a"].GEOMETRY_COLLECTION};c.prototype.intersectsExtent=function(e){var t=this.geometries_;for(var r=0,i=t.length;r<i;++r){if(t[r].intersectsExtent(e)){return true}}return false};c.prototype.isEmpty=function(){return this.geometries_.length===0};c.prototype.rotate=function(e,t){var r=this.geometries_;for(var i=0,n=r.length;i<n;++i){r[i].rotate(e,t)}this.changed()};c.prototype.scale=function(e,t,r){var i=r;if(!i){i=Object(o["x"])(this.getExtent())}var n=this.geometries_;for(var a=0,s=n.length;a<s;++a){n[a].scale(e,t,i)}this.changed()};c.prototype.setGeometries=function(e){this.setGeometriesArray(f(e))};c.prototype.setGeometriesArray=function(e){this.unlistenGeometriesChange_();this.geometries_=e;this.listenGeometriesChange_();this.changed()};c.prototype.applyTransform=function(e){var t=this.geometries_;for(var r=0,i=t.length;r<i;++r){t[r].applyTransform(e)}this.changed()};c.prototype.translate=function(e,t){var r=this.geometries_;for(var i=0,n=r.length;i<n;++i){r[i].translate(e,t)}this.changed()};c.prototype.disposeInternal=function(){this.unlistenGeometriesChange_();s["a"].prototype.disposeInternal.call(this)};t["a"]=c},function(e,t,r){"use strict";r.d(t,"b",function(){return ne});var i=r(3);var n=r(39);var a=r(342);var o=r(200);var s=r(58);var l=r(67);var u=r(168);var c=r(4);var f=r(117);var h=r(11);var d=r(12);var p=r(0);var v="feature";var g="http://www.w3.org/2000/xmlns/";var m="http://www.opengis.net/ogc";var y="http://www.opengis.net/wfs";var _="http://www.opengis.net/fes";var b={"1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"};var w="1.1.0";var S=function e(t){var r=t?t:{};this.featureType_=r.featureType;this.featureNS_=r.featureNS;this.gmlFormat_=r.gmlFormat?r.gmlFormat:new o["a"];this.schemaLocation_=r.schemaLocation?r.schemaLocation:b[w];u["a"].call(this)};Object(i["d"])(S,u["a"]);S.prototype.getFeatureType=function(){return this.featureType_};S.prototype.setFeatureType=function(e){this.featureType_=e};S.prototype.readFeatures;S.prototype.readFeaturesFromNode=function(e,t){var r={featureType:this.featureType_,featureNS:this.featureNS_};Object(h["a"])(r,this.getReadOptions(e,t?t:{}));var i=[r];this.gmlFormat_.FEATURE_COLLECTION_PARSERS[s["a"]]["featureMember"]=Object(p["j"])(s["b"].prototype.readFeaturesInternal);var n=Object(p["u"])([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,e,i,this.gmlFormat_);if(!n){n=[]}return n};S.prototype.readTransactionResponse=function(e){if(Object(p["g"])(e)){return this.readTransactionResponseFromDocument(e)}else if(Object(p["h"])(e)){return this.readTransactionResponseFromNode(e)}else if(typeof e==="string"){var t=Object(p["s"])(e);return this.readTransactionResponseFromDocument(t)}else{return undefined}};S.prototype.readFeatureCollectionMetadata=function(e){if(Object(p["g"])(e)){return this.readFeatureCollectionMetadataFromDocument(e)}else if(Object(p["h"])(e)){return this.readFeatureCollectionMetadataFromNode(e)}else if(typeof e==="string"){var t=Object(p["s"])(e);return this.readFeatureCollectionMetadataFromDocument(t)}else{return undefined}};S.prototype.readFeatureCollectionMetadataFromDocument=function(e){for(var t=e.firstChild;t;t=t.nextSibling){if(t.nodeType==Node.ELEMENT_NODE){return this.readFeatureCollectionMetadataFromNode(t)}}return undefined};var C={"http://www.opengis.net/gml":{boundedBy:Object(p["n"])(s["b"].prototype.readGeometryElement,"bounds")}};S.prototype.readFeatureCollectionMetadataFromNode=function(e){var t={};var r=Object(c["g"])(e.getAttribute("numberOfFeatures"));t["numberOfFeatures"]=r;return Object(p["u"])(t,C,e,[],this.gmlFormat_)};var x={"http://www.opengis.net/wfs":{totalInserted:Object(p["n"])(c["f"]),totalUpdated:Object(p["n"])(c["f"]),totalDeleted:Object(p["n"])(c["f"])}};function O(e,t){return Object(p["u"])({},x,e,t)}var T={"http://www.opengis.net/ogc":{FeatureId:Object(p["j"])(function(e,t){return e.getAttribute("fid")})}};function E(e,t){Object(p["t"])(T,e,t)}var M={"http://www.opengis.net/wfs":{Feature:E}};function j(e,t){return Object(p["u"])([],M,e,t)}var A={"http://www.opengis.net/wfs":{TransactionSummary:Object(p["n"])(O,"transactionSummary"),InsertResults:Object(p["n"])(j,"insertIds")}};S.prototype.readTransactionResponseFromDocument=function(e){for(var t=e.firstChild;t;t=t.nextSibling){if(t.nodeType==Node.ELEMENT_NODE){return this.readTransactionResponseFromNode(t)}}return undefined};S.prototype.readTransactionResponseFromNode=function(e){return Object(p["u"])({},A,e,[])};var P={"http://www.opengis.net/wfs":{PropertyName:Object(p["l"])(c["n"])}};function k(e,t,r){var i=r[r.length-1];var n=i["featureType"];var s=i["featureNS"];var l=i["gmlVersion"];var u=Object(p["d"])(s,n);e.appendChild(u);if(l===2){a["a"].prototype.writeFeatureElement(u,t,r)}else{o["a"].prototype.writeFeatureElement(u,t,r)}}function I(e,t,r){var i=Object(p["d"])(m,"Filter");var n=Object(p["d"])(m,"FeatureId");i.appendChild(n);n.setAttribute("fid",t);e.appendChild(i)}function D(e,t){e=e?e:v;var r=e+":";if(t.indexOf(r)===0){return t}else{return r+t}}function R(e,t,r){var i=r[r.length-1];Object(n["a"])(t.getId()!==undefined,26);var a=i["featureType"];var o=i["featurePrefix"];var s=i["featureNS"];var l=D(o,a);e.setAttribute("typeName",l);e.setAttributeNS(g,"xmlns:"+o,s);var u=t.getId();if(u!==undefined){I(e,u,r)}}var L={"http://www.opengis.net/wfs":{Insert:Object(p["l"])(k),Update:Object(p["l"])($),Delete:Object(p["l"])(R),Property:Object(p["l"])(N),Native:Object(p["l"])(F)}};function $(e,t,r){var i=r[r.length-1];Object(n["a"])(t.getId()!==undefined,27);var a=i["featureType"];var o=i["featurePrefix"];var s=i["featureNS"];var l=D(o,a);var u=t.getGeometryName();e.setAttribute("typeName",l);e.setAttributeNS(g,"xmlns:"+o,s);var c=t.getId();if(c!==undefined){var h=t.getKeys();var d=[];for(var v=0,m=h.length;v<m;v++){var y=t.get(h[v]);if(y!==undefined){var _=h[v];if(y instanceof f["a"]){_=u}d.push({name:_,value:y})}}Object(p["v"])({gmlVersion:i["gmlVersion"],node:e,hasZ:i["hasZ"],srsName:i["srsName"]},L,Object(p["q"])("Property"),d,r);I(e,c,r)}}function N(e,t,r){var i=Object(p["d"])(y,"Name");var n=r[r.length-1];var s=n["gmlVersion"];e.appendChild(i);Object(c["n"])(i,t.name);if(t.value!==undefined&&t.value!==null){var l=Object(p["d"])(y,"Value");e.appendChild(l);if(t.value instanceof f["a"]){if(s===2){a["a"].prototype.writeGeometryElement(l,t.value,r)}else{o["a"].prototype.writeGeometryElement(l,t.value,r)}}else{Object(c["n"])(l,t.value)}}}function F(e,t,r){if(t.vendorId){e.setAttribute("vendorId",t.vendorId)}if(t.safeToIgnore!==undefined){e.setAttribute("safeToIgnore",t.safeToIgnore)}if(t.value!==undefined){Object(c["n"])(e,t.value)}}var G={"http://www.opengis.net/wfs":{Query:Object(p["l"])(U)},"http://www.opengis.net/ogc":{During:Object(p["l"])(q),And:Object(p["l"])(B),Or:Object(p["l"])(B),Not:Object(p["l"])(X),BBOX:Object(p["l"])(Y),Contains:Object(p["l"])(W),Intersects:Object(p["l"])(V),Within:Object(p["l"])(z),PropertyIsEqualTo:Object(p["l"])(K),PropertyIsNotEqualTo:Object(p["l"])(K),PropertyIsLessThan:Object(p["l"])(K),PropertyIsLessThanOrEqualTo:Object(p["l"])(K),PropertyIsGreaterThan:Object(p["l"])(K),PropertyIsGreaterThanOrEqualTo:Object(p["l"])(K),PropertyIsNull:Object(p["l"])(Z),PropertyIsBetween:Object(p["l"])(Q),PropertyIsLike:Object(p["l"])(J)}};function U(e,t,r){var i=r[r.length-1];var n=i["featurePrefix"];var a=i["featureNS"];var o=i["propertyNames"];var s=i["srsName"];var l=void 0;if(n){l=D(n,t)}else{l=t}e.setAttribute("typeName",l);if(s){e.setAttribute("srsName",s)}if(a){e.setAttributeNS(g,"xmlns:"+n,a)}var u=Object(h["a"])({},i);u.node=e;Object(p["v"])(u,P,Object(p["q"])("PropertyName"),o,r);var c=i["filter"];if(c){var f=Object(p["d"])(m,"Filter");e.appendChild(f);H(f,c,r)}}function H(e,t,r){var i={node:e};Object(p["v"])(i,G,Object(p["q"])(t.getTagName()),[t],r)}function Y(e,t,r){var i=r[r.length-1];i["srsName"]=t.srsName;te(e,t.geometryName);o["a"].prototype.writeGeometryElement(e,t.extent,r)}function W(e,t,r){var i=r[r.length-1];i["srsName"]=t.srsName;te(e,t.geometryName);o["a"].prototype.writeGeometryElement(e,t.geometry,r)}function V(e,t,r){var i=r[r.length-1];i["srsName"]=t.srsName;te(e,t.geometryName);o["a"].prototype.writeGeometryElement(e,t.geometry,r)}function z(e,t,r){var i=r[r.length-1];i["srsName"]=t.srsName;te(e,t.geometryName);o["a"].prototype.writeGeometryElement(e,t.geometry,r)}function q(e,t,r){var i=Object(p["d"])(_,"ValueReference");Object(c["n"])(i,t.propertyName);e.appendChild(i);var n=Object(p["d"])(s["a"],"TimePeriod");e.appendChild(n);var a=Object(p["d"])(s["a"],"begin");n.appendChild(a);ie(a,t.begin);var o=Object(p["d"])(s["a"],"end");n.appendChild(o);ie(o,t.end)}function B(e,t,r){var i={node:e};var n=t.conditions;for(var a=0,o=n.length;a<o;++a){var s=n[a];Object(p["v"])(i,G,Object(p["q"])(s.getTagName()),[s],r)}}function X(e,t,r){var i={node:e};var n=t.condition;Object(p["v"])(i,G,Object(p["q"])(n.getTagName()),[n],r)}function K(e,t,r){if(t.matchCase!==undefined){e.setAttribute("matchCase",t.matchCase.toString())}te(e,t.propertyName);re(e,""+t.expression)}function Z(e,t,r){te(e,t.propertyName)}function Q(e,t,r){te(e,t.propertyName);var i=Object(p["d"])(m,"LowerBoundary");e.appendChild(i);re(i,""+t.lowerBoundary);var n=Object(p["d"])(m,"UpperBoundary");e.appendChild(n);re(n,""+t.upperBoundary)}function J(e,t,r){e.setAttribute("wildCard",t.wildCard);e.setAttribute("singleChar",t.singleChar);e.setAttribute("escapeChar",t.escapeChar);if(t.matchCase!==undefined){e.setAttribute("matchCase",t.matchCase.toString())}te(e,t.propertyName);re(e,""+t.pattern)}function ee(e,t,r){var i=Object(p["d"])(m,e);Object(c["n"])(i,r);t.appendChild(i)}function te(e,t){ee("PropertyName",e,t)}function re(e,t){ee("Literal",e,t)}function ie(e,t){var r=Object(p["d"])(s["a"],"TimeInstant");e.appendChild(r);var i=Object(p["d"])(s["a"],"timePosition");r.appendChild(i);Object(c["n"])(i,t)}function ne(e){var t=Object(p["d"])(m,"Filter");H(t,e,[]);return t}function ae(e,t,r){var i=r[r.length-1];var n=Object(h["a"])({},i);n.node=e;Object(p["v"])(n,G,Object(p["q"])("Query"),t,r)}S.prototype.writeGetFeature=function(e){var t=Object(p["d"])(y,"GetFeature");t.setAttribute("service","WFS");t.setAttribute("version","1.1.0");var r=void 0;if(e){if(e.handle){t.setAttribute("handle",e.handle)}if(e.outputFormat){t.setAttribute("outputFormat",e.outputFormat)}if(e.maxFeatures!==undefined){t.setAttribute("maxFeatures",e.maxFeatures)}if(e.resultType){t.setAttribute("resultType",e.resultType)}if(e.startIndex!==undefined){t.setAttribute("startIndex",e.startIndex)}if(e.count!==undefined){t.setAttribute("count",e.count)}r=e.filter;if(e.bbox){Object(n["a"])(e.geometryName,12);var i=Object(l["bbox"])(e.geometryName,e.bbox,e.srsName);if(r){r=Object(l["and"])(r,i)}else{r=i}}}t.setAttributeNS(p["c"],"xsi:schemaLocation",this.schemaLocation_);var a={node:t,srsName:e.srsName,featureNS:e.featureNS?e.featureNS:this.featureNS_,featurePrefix:e.featurePrefix,geometryName:e.geometryName,filter:r,propertyNames:e.propertyNames?e.propertyNames:[]};Object(n["a"])(Array.isArray(e.featureTypes),11);ae(t,e.featureTypes,[a]);return t};S.prototype.writeTransaction=function(e,t,r,i){var n=[];var a=Object(p["d"])(y,"Transaction");var o=i.version?i.version:w;var s=o==="1.0.0"?2:3;a.setAttribute("service","WFS");a.setAttribute("version",o);var l=void 0;var u=void 0;if(i){l=i.gmlOptions?i.gmlOptions:{};if(i.handle){a.setAttribute("handle",i.handle)}}var c=b[o];a.setAttributeNS(p["c"],"xsi:schemaLocation",c);var f=i.featurePrefix?i.featurePrefix:v;if(e){u={node:a,featureNS:i.featureNS,featureType:i.featureType,featurePrefix:f,gmlVersion:s,hasZ:i.hasZ,srsName:i.srsName};Object(h["a"])(u,l);Object(p["v"])(u,L,Object(p["q"])("Insert"),e,n)}if(t){u={node:a,featureNS:i.featureNS,featureType:i.featureType,featurePrefix:f,gmlVersion:s,hasZ:i.hasZ,srsName:i.srsName};Object(h["a"])(u,l);Object(p["v"])(u,L,Object(p["q"])("Update"),t,n)}if(r){Object(p["v"])({node:a,featureNS:i.featureNS,featureType:i.featureType,featurePrefix:f,gmlVersion:s,srsName:i.srsName},L,Object(p["q"])("Delete"),r,n)}if(i.nativeElements){Object(p["v"])({node:a,featureNS:i.featureNS,featureType:i.featureType,featurePrefix:f,gmlVersion:s,srsName:i.srsName},L,Object(p["q"])("Native"),i.nativeElements,n)}return a};S.prototype.readProjection;S.prototype.readProjectionFromDocument=function(e){for(var t=e.firstChild;t;t=t.nextSibling){if(t.nodeType==Node.ELEMENT_NODE){return this.readProjectionFromNode(t)}}return null};S.prototype.readProjectionFromNode=function(e){if(e.firstElementChild&&e.firstElementChild.firstElementChild){e=e.firstElementChild.firstElementChild;for(var t=e.firstElementChild;t;t=t.nextElementSibling){if(!(t.childNodes.length===0||t.childNodes.length===1&&t.firstChild.nodeType===3)){var r=[{}];this.gmlFormat_.readGeometryElement(t,r);return Object(d["g"])(r.pop().srsName)}}}return null};t["a"]=S},function(e,t,r){"use strict";t["a"]={POSTCOMPOSE:"postcompose",PRECOMPOSE:"precompose",RENDER:"render"}},function(e,t,r){"use strict";var i=r(3);var n=r(44);var a=r(96);var o=r(22);var s=r(11);var l=function e(t){n["a"].call(this);var r=Object(s["a"])({},t);r[a["a"].OPACITY]=t.opacity!==undefined?t.opacity:1;r[a["a"].VISIBLE]=t.visible!==undefined?t.visible:true;r[a["a"].Z_INDEX]=t.zIndex!==undefined?t.zIndex:0;r[a["a"].MAX_RESOLUTION]=t.maxResolution!==undefined?t.maxResolution:Infinity;r[a["a"].MIN_RESOLUTION]=t.minResolution!==undefined?t.minResolution:0;this.setProperties(r);this.state_={layer:this,managed:true};this.type};Object(i["d"])(l,n["a"]);l.prototype.getType=function(){return this.type};l.prototype.getLayerState=function(){this.state_.opacity=Object(o["a"])(this.getOpacity(),0,1);this.state_.sourceState=this.getSourceState();this.state_.visible=this.getVisible();this.state_.extent=this.getExtent();this.state_.zIndex=this.getZIndex();this.state_.maxResolution=this.getMaxResolution();this.state_.minResolution=Math.max(this.getMinResolution(),0);return this.state_};l.prototype.getLayersArray=function(e){};l.prototype.getLayerStatesArray=function(e){};l.prototype.getExtent=function(){return this.get(a["a"].EXTENT)};l.prototype.getMaxResolution=function(){return this.get(a["a"].MAX_RESOLUTION)};l.prototype.getMinResolution=function(){return this.get(a["a"].MIN_RESOLUTION)};l.prototype.getOpacity=function(){return this.get(a["a"].OPACITY)};l.prototype.getSourceState=function(){};l.prototype.getVisible=function(){return this.get(a["a"].VISIBLE)};l.prototype.getZIndex=function(){return this.get(a["a"].Z_INDEX)};l.prototype.setExtent=function(e){this.set(a["a"].EXTENT,e)};l.prototype.setMaxResolution=function(e){this.set(a["a"].MAX_RESOLUTION,e)};l.prototype.setMinResolution=function(e){this.set(a["a"].MIN_RESOLUTION,e)};l.prototype.setOpacity=function(e){this.set(a["a"].OPACITY,e)};l.prototype.setVisible=function(e){this.set(a["a"].VISIBLE,e)};l.prototype.setZIndex=function(e){this.set(a["a"].Z_INDEX,e)};t["a"]=l},function(e,t,r){"use strict";var i=r(3);var n=r(102);var a=r(16);var o=function e(t,r,i,a){n["a"].call(this);this.extent=t;this.pixelRatio_=i;this.resolution=r;this.state=a};Object(i["d"])(o,n["a"]);o.prototype.changed=function(){this.dispatchEvent(a["a"].CHANGE)};o.prototype.getExtent=function(){return this.extent};o.prototype.getImage=function(){};o.prototype.getPixelRatio=function(){return this.pixelRatio_};o.prototype.getResolution=function(){return this.resolution};o.prototype.getState=function(){return this.state};o.prototype.load=function(){};t["a"]=o},function(e,t,r){"use strict";var i=r(93);var n=function e(t){this.code_=t.code;this.units_=t.units;this.extent_=t.extent!==undefined?t.extent:null;this.worldExtent_=t.worldExtent!==undefined?t.worldExtent:null;this.axisOrientation_=t.axisOrientation!==undefined?t.axisOrientation:"enu";this.global_=t.global!==undefined?t.global:false;this.canWrapX_=!!(this.global_&&this.extent_);this.getPointResolutionFunc_=t.getPointResolution;this.defaultTileGrid_=null;this.metersPerUnit_=t.metersPerUnit};n.prototype.canWrapX=function(){return this.canWrapX_};n.prototype.getCode=function(){return this.code_};n.prototype.getExtent=function(){return this.extent_};n.prototype.getUnits=function(){return this.units_};n.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||i["a"][this.units_]};n.prototype.getWorldExtent=function(){return this.worldExtent_};n.prototype.getAxisOrientation=function(){return this.axisOrientation_};n.prototype.isGlobal=function(){return this.global_};n.prototype.setGlobal=function(e){this.global_=e;this.canWrapX_=!!(e&&this.extent_)};n.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_};n.prototype.setDefaultTileGrid=function(e){this.defaultTileGrid_=e};n.prototype.setExtent=function(e){this.extent_=e;this.canWrapX_=!!(this.global_&&e)};n.prototype.setWorldExtent=function(e){this.worldExtent_=e};n.prototype.setGetPointResolution=function(e){this.getPointResolutionFunc_=e};n.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_};t["a"]=n},function(e,t,r){"use strict";t["a"]={PROPERTYCHANGE:"propertychange"}},function(e,t,r){var i,n,a;
/*!
 * jQuery UI Widget 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/*!
 * jQuery UI Widget 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(o){if(true){!(n=[r(24),r(103)],i=o,a=typeof i==="function"?i.apply(t,n):i,a!==undefined&&(e.exports=a))}else{}})(function(e){var t=0;var r=Array.prototype.slice;e.cleanData=function(t){return function(r){var i,n,a;for(a=0;(n=r[a])!=null;a++){try{i=e._data(n,"events");if(i&&i.remove){e(n).triggerHandler("remove")}}catch(e){}}t(r)}}(e.cleanData);e.widget=function(t,r,i){var n,a,o;var s={};var l=t.split(".")[0];t=t.split(".")[1];var u=l+"-"+t;if(!i){i=r;r=e.Widget}if(e.isArray(i)){i=e.extend.apply(null,[{}].concat(i))}e.expr[":"][u.toLowerCase()]=function(t){return!!e.data(t,u)};e[l]=e[l]||{};n=e[l][t];a=e[l][t]=function(e,t){if(!this._createWidget){return new a(e,t)}if(arguments.length){this._createWidget(e,t)}};e.extend(a,n,{version:i.version,_proto:e.extend({},i),_childConstructors:[]});o=new r;o.options=e.widget.extend({},o.options);e.each(i,function(t,i){if(!e.isFunction(i)){s[t]=i;return}s[t]=function(){function e(){return r.prototype[t].apply(this,arguments)}function n(e){return r.prototype[t].apply(this,e)}return function(){var t=this._super;var r=this._superApply;var a;this._super=e;this._superApply=n;a=i.apply(this,arguments);this._super=t;this._superApply=r;return a}}()});a.prototype=e.widget.extend(o,{widgetEventPrefix:n?o.widgetEventPrefix||t:t},s,{constructor:a,namespace:l,widgetName:t,widgetFullName:u});if(n){e.each(n._childConstructors,function(t,r){var i=r.prototype;e.widget(i.namespace+"."+i.widgetName,a,r._proto)});delete n._childConstructors}else{r._childConstructors.push(a)}e.widget.bridge(t,a);return a};e.widget.extend=function(t){var i=r.call(arguments,1);var n=0;var a=i.length;var o;var s;for(;n<a;n++){for(o in i[n]){s=i[n][o];if(i[n].hasOwnProperty(o)&&s!==undefined){if(e.isPlainObject(s)){t[o]=e.isPlainObject(t[o])?e.widget.extend({},t[o],s):e.widget.extend({},s)}else{t[o]=s}}}}return t};e.widget.bridge=function(t,i){var n=i.prototype.widgetFullName||t;e.fn[t]=function(a){var o=typeof a==="string";var s=r.call(arguments,1);var l=this;if(o){if(!this.length&&a==="instance"){l=undefined}else{this.each(function(){var r;var i=e.data(this,n);if(a==="instance"){l=i;return false}if(!i){return e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+a+"'")}if(!e.isFunction(i[a])||a.charAt(0)==="_"){return e.error("no such method '"+a+"' for "+t+" widget instance")}r=i[a].apply(i,s);if(r!==i&&r!==undefined){l=r&&r.jquery?l.pushStack(r.get()):r;return false}})}}else{if(s.length){a=e.widget.extend.apply(null,[a].concat(s))}this.each(function(){var t=e.data(this,n);if(t){t.option(a||{});if(t._init){t._init()}}else{e.data(this,n,new i(a,this))}})}return l}};e.Widget=function(){};e.Widget._childConstructors=[];e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:false,create:null},_createWidget:function(r,i){i=e(i||this.defaultElement||this)[0];this.element=e(i);this.uuid=t++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=e();this.hoverable=e();this.focusable=e();this.classesElementLookup={};if(i!==this){e.data(i,this.widgetFullName,this);this._on(true,this.element,{remove:function(e){if(e.target===i){this.destroy()}}});this.document=e(i.style?i.ownerDocument:i.document||i);this.window=e(this.document[0].defaultView||this.document[0].parentWindow)}this.options=e.widget.extend({},this.options,this._getCreateOptions(),r);this._create();if(this.options.disabled){this._setOptionDisabled(this.options.disabled)}this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy();e.each(this.classesElementLookup,function(e,r){t._removeClass(r,e)});this.element.off(this.eventNamespace).removeData(this.widgetFullName);this.widget().off(this.eventNamespace).removeAttr("aria-disabled");this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,r){var i=t;var n;var a;var o;if(arguments.length===0){return e.widget.extend({},this.options)}if(typeof t==="string"){i={};n=t.split(".");t=n.shift();if(n.length){a=i[t]=e.widget.extend({},this.options[t]);for(o=0;o<n.length-1;o++){a[n[o]]=a[n[o]]||{};a=a[n[o]]}t=n.pop();if(arguments.length===1){return a[t]===undefined?null:a[t]}a[t]=r}else{if(arguments.length===1){return this.options[t]===undefined?null:this.options[t]}i[t]=r}}this._setOptions(i);return this},_setOptions:function(e){var t;for(t in e){this._setOption(t,e[t])}return this},_setOption:function(e,t){if(e==="classes"){this._setOptionClasses(t)}this.options[e]=t;if(e==="disabled"){this._setOptionDisabled(t)}return this},_setOptionClasses:function(t){var r,i,n;for(r in t){n=this.classesElementLookup[r];if(t[r]===this.options.classes[r]||!n||!n.length){continue}i=e(n.get());this._removeClass(n,r);i.addClass(this._classes({element:i,keys:r,classes:t,add:true}))}},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e);if(e){this._removeClass(this.hoverable,null,"ui-state-hover");this._removeClass(this.focusable,null,"ui-state-focus")}},enable:function(){return this._setOptions({disabled:false})},disable:function(){return this._setOptions({disabled:true})},_classes:function(t){var r=[];var i=this;t=e.extend({element:this.element,classes:this.options.classes||{}},t);function n(n,a){var o,s;for(s=0;s<n.length;s++){o=i.classesElementLookup[n[s]]||e();if(t.add){o=e(e.unique(o.get().concat(t.element.get())))}else{o=e(o.not(t.element).get())}i.classesElementLookup[n[s]]=o;r.push(n[s]);if(a&&t.classes[n[s]]){r.push(t.classes[n[s]])}}}this._on(t.element,{remove:"_untrackClassesElement"});if(t.keys){n(t.keys.match(/\S+/g)||[],true)}if(t.extra){n(t.extra.match(/\S+/g)||[])}return r.join(" ")},_untrackClassesElement:function(t){var r=this;e.each(r.classesElementLookup,function(i,n){if(e.inArray(t.target,n)!==-1){r.classesElementLookup[i]=e(n.not(t.target).get())}})},_removeClass:function(e,t,r){return this._toggleClass(e,t,r,false)},_addClass:function(e,t,r){return this._toggleClass(e,t,r,true)},_toggleClass:function(e,t,r,i){i=typeof i==="boolean"?i:r;var n=typeof e==="string"||e===null,a={extra:n?t:r,keys:n?e:t,element:n?this.element:e,add:i};a.element.toggleClass(this._classes(a),i);return this},_on:function(t,r,i){var n;var a=this;if(typeof t!=="boolean"){i=r;r=t;t=false}if(!i){i=r;r=this.element;n=this.widget()}else{r=n=e(r);this.bindings=this.bindings.add(r)}e.each(i,function(i,o){function s(){if(!t&&(a.options.disabled===true||e(this).hasClass("ui-state-disabled"))){return}return(typeof o==="string"?a[o]:o).apply(a,arguments)}if(typeof o!=="string"){s.guid=o.guid=o.guid||s.guid||e.guid++}var l=i.match(/^([\w:-]*)\s*(.*)$/);var u=l[1]+a.eventNamespace;var c=l[2];if(c){n.on(u,c,s)}else{r.on(u,s)}})},_off:function(t,r){r=(r||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;t.off(r).off(r);this.bindings=e(this.bindings.not(t).get());this.focusable=e(this.focusable.not(t).get());this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function r(){return(typeof e==="string"?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(r,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t);this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t);this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,r,i){var n,a;var o=this.options[t];i=i||{};r=e.Event(r);r.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase();r.target=this.element[0];a=r.originalEvent;if(a){for(n in a){if(!(n in r)){r[n]=a[n]}}}this.element.trigger(r,i);return!(e.isFunction(o)&&o.apply(this.element[0],[r].concat(i))===false||r.isDefaultPrevented())}};e.each({show:"fadeIn",hide:"fadeOut"},function(t,r){e.Widget.prototype["_"+t]=function(i,n,a){if(typeof n==="string"){n={effect:n}}var o;var s=!n?t:n===true||typeof n==="number"?r:n.effect||r;n=n||{};if(typeof n==="number"){n={duration:n}}o=!e.isEmptyObject(n);n.complete=a;if(n.delay){i.delay(n.delay)}if(o&&e.effects&&e.effects.effect[s]){i[t](n)}else if(s!==t&&i[s]){i[s](n.duration,n.easing,a)}else{i.queue(function(r){e(this)[t]();if(a){a.call(i[0])}r()})}}});return e.widget})},function(e,t,r){"use strict";var i=r(3);var n=r(2);var a=r(220);var o=r(121);var s=r(48);var l=r(1);var u=r(78);var c=r(71);var f=r(367);var h=r(207);var d=r(620);var p=function e(t,r,i){this.sce_=t;this.gettextCatalog_=r;this.createPopup_=i;c["a"].call(this);var n=angular.element('<div class="ngeo-disclaimer"></div>');angular.element(document.body).append(n);this.container_=n;this.messages_={}};p.$inject=["$sce","gettextCatalog","ngeoCreatePopup"];p.$inject=["$sce","gettextCatalog","ngeoCreatePopup"];i["d"](p,c["a"]);p.prototype.alert=function(e){this.show(e)};p.prototype.close=function(e){var t=this.getMessageObjects(e);t.forEach(this.closeMessage_,this)};p.prototype.showMessage=function(e){var t=this;var r=this.gettextCatalog_;var i=e.type;l["a"].assertString(i,"Type should be set.");var n=this.getMessageUid_(e);if(this.messages_[n]!==undefined){return}var a=e.popup===true;if(a){var o=this.createPopup_();var s=this.sce_.trustAsHtml(e.msg);o.open({autoDestroy:true,content:s,title:"&nbsp;"});o.scope.$watch("open",function(r,i){if(!r){t.closeMessage_(e)}});this.messages_[n]=o}else{var u=["alert","fade","alert-dismissible"];switch(i){case c["a"].Type.ERROR:u.push("alert-danger");break;case c["a"].Type.INFORMATION:u.push("alert-info");break;case c["a"].Type.SUCCESS:u.push("alert-success");break;case c["a"].Type.WARNING:u.push("alert-warning");break;default:break}var f=angular.element('<div role="alert" class="'+u.join(" ")+'"></div>');var h=angular.element('<button type="button" class="close" data-dismiss="alert" aria-label="'+r.getString("Close")+'"><span aria-hidden="true" class="fa fa-times"></span></button>');var d=angular.element("<span />").html(e.msg);f.append(h).append(d);var p=void 0;if(e.target){p=angular.element(e.target)}else{p=this.container_}p.append(f);f.addClass("in");f.on("closed.bs.alert",function(){t.closeMessage_(e)});this.messages_[n]=f}};p.prototype.getMessageUid_=function(e){return e.msg+"-"+e.type};p.prototype.closeMessage_=function(e){var t=this.getMessageUid_(e);var r=this.messages_[t];if(r===undefined){return}if(r instanceof h["a"]){if(r.getOpen()){r.setOpen(false)}}else{if(r.hasClass("in")){r.alert("close")}}delete this.messages_[t]};p.module=angular.module("ngeoDisclaimer",[h["a"].module.name]);p.module.service("ngeoDisclaimer",p);var v=p;var g=r(136);var m=r(362);var y=angular.module("gmfDisclaimer",["ngSanitize",u["a"].module.name,v.module.name,g["a"].module.name]);y.Controller_=function(e,t,r,i,n,a,o,s,l){this.map;this.external;this.popup;this.visibility=false;this.msg;this.msgs_=[];this.sce_=r;this.timeout_=i;this.gettextCatalog_=n;this.element_=e;this.createPopup_=a;this.disclaimer_=o;this.eventHelper_=s;this.ngeoLayerHelper_=l;this.dataLayerGroup_=null};y.Controller_.$inject=["$element","$scope","$sce","$timeout","gettextCatalog","ngeoCreatePopup","ngeoDisclaimer","ngeoEventHelper","ngeoLayerHelper"];y.Controller_.prototype.$onInit=function(){this.dataLayerGroup_=this.ngeoLayerHelper_.getGroupFromMap(this.map,s["a"].DATALAYERGROUP_NAME);this.registerLayer_(this.dataLayerGroup_)};y.Controller_.prototype.handleLayersAdd_=function(e){var t=this;this.timeout_(function(){var r=e.element;l["a"].assertInstanceof(r,a["a"]);t.registerLayer_(r)})};y.Controller_.prototype.handleLayersRemove_=function(e){var t=e.element;l["a"].assertInstanceof(t,a["a"]);this.unregisterLayer_(t)};y.Controller_.prototype.registerLayer_=function(e){var t=this;var r=i["c"](e);if(e instanceof o["a"]){this.eventHelper_.addListenerKey(r,n["a"](e.getLayers(),"add",this.handleLayersAdd_,this));this.eventHelper_.addListenerKey(r,n["a"](e.getLayers(),"remove",this.handleLayersRemove_,this));e.getLayers().forEach(function(e){t.registerLayer_(e)})}else{var a=e.get("disclaimers");if(a&&Array.isArray(a)){a.forEach(function(e){t.showDisclaimerMessage_(e)})}}};y.Controller_.prototype.unregisterLayer_=function(e){var t=this;var r=i["c"](e);if(e instanceof o["a"]){this.eventHelper_.clearListenerKey(r);e.getLayers().forEach(function(e){return t.unregisterLayer_(e)})}else{var n=e.get("disclaimers");if(n&&Array.isArray(n)){n.forEach(function(e){t.closeDisclaimerMessage_(e)})}}};y.Controller_.prototype.$onDestroy=function(){this.unregisterLayer_(this.dataLayerGroup_)};y.Controller_.prototype.showDisclaimerMessage_=function(e){e=this.gettextCatalog_.getString(e);if(this.external){if(this.msgs_.indexOf(e)<0){this.msgs_.push(e)}this.msg=""+this.sce_.trustAsHtml(this.msgs_.join("<br />"));this.visibility=true}else{this.disclaimer_.alert({popup:this.popup,msg:e,target:this.element_,type:c["a"].Type.WARNING})}};y.Controller_.prototype.closeDisclaimerMessage_=function(e){e=this.gettextCatalog_.getString(e);if(this.external){this.visibility=false;this.msgs_.length=0;this.msg=""}else{this.disclaimer_.close({popup:this.popup,msg:e,target:this.element_,type:c["a"].Type.WARNING})}};y.component_={controller:y.Controller_,bindings:{popup:"<?gmfDisclaimerPopup",map:"=gmfDisclaimerMap",external:"<?gmfDisclaimerExternal",visibility:"=?gmfDisclaimerExternalVisibility",msg:"=?gmfDisclaimerExternalMsg"}};y.component("gmfDisclaimer",y.component_);var _=y;var b=angular.module("gmfDisclaimerModule",[_.name]);var w=t["a"]=b},function(e,t,r){"use strict";var i=r(115);var n=r(214);function a(e){if(Object.getOwnPropertyNames){return Object.getOwnPropertyNames(e).length===0}else{var t;for(t in e){if(e.hasOwnProperty(t)){return false}}return true}}var o=r(81);var s=r(139);var l=r(210);function u(e,t){var r=[],i;for(i=0;i<e.length;++i){r.push(t(e[i],i))}return r}var c=r(126);var f=r(74);var h=r(97);var d=r(13);var p=r(79);var v=r(10);var g=r(32);function m(e){var t;var r=e._a;if(r&&Object(g["a"])(e).overflow===-2){t=r[v["e"]]<0||r[v["e"]]>11?v["e"]:r[v["a"]]<1||r[v["a"]]>Object(p["a"])(r[v["i"]],r[v["e"]])?v["a"]:r[v["b"]]<0||r[v["b"]]>24||r[v["b"]]===24&&(r[v["d"]]!==0||r[v["f"]]!==0||r[v["c"]]!==0)?v["b"]:r[v["d"]]<0||r[v["d"]]>59?v["d"]:r[v["f"]]<0||r[v["f"]]>59?v["f"]:r[v["c"]]<0||r[v["c"]]>999?v["c"]:-1;if(Object(g["a"])(e)._overflowDayOfYear&&(t<v["i"]||t>v["a"])){t=v["a"]}if(Object(g["a"])(e)._overflowWeeks&&t===-1){t=v["g"]}if(Object(g["a"])(e)._overflowWeekday&&t===-1){t=v["h"]}Object(g["a"])(e).overflow=t}return e}var y=r(138);var _=r(111);var b=r(124);var w=r(53);function S(e,t,r){if(e!=null){return e}if(t!=null){return t}return r}function C(e){var t=new Date(d["a"].now());if(e._useUTC){return[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]}return[t.getFullYear(),t.getMonth(),t.getDate()]}function x(e){var t,r,i=[],n,a,o;if(e._d){return}n=C(e);if(e._w&&e._a[v["a"]]==null&&e._a[v["e"]]==null){O(e)}if(e._dayOfYear!=null){o=S(e._a[v["i"]],n[v["i"]]);if(e._dayOfYear>Object(_["a"])(o)||e._dayOfYear===0){Object(g["a"])(e)._overflowDayOfYear=true}r=Object(y["b"])(o,0,e._dayOfYear);e._a[v["e"]]=r.getUTCMonth();e._a[v["a"]]=r.getUTCDate()}for(t=0;t<3&&e._a[t]==null;++t){e._a[t]=i[t]=n[t]}for(;t<7;t++){e._a[t]=i[t]=e._a[t]==null?t===2?1:0:e._a[t]}if(e._a[v["b"]]===24&&e._a[v["d"]]===0&&e._a[v["f"]]===0&&e._a[v["c"]]===0){e._nextDay=true;e._a[v["b"]]=0}e._d=(e._useUTC?y["b"]:y["a"]).apply(null,i);a=e._useUTC?e._d.getUTCDay():e._d.getDay();if(e._tzm!=null){e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm)}if(e._nextDay){e._a[v["b"]]=24}if(e._w&&typeof e._w.d!=="undefined"&&e._w.d!==a){Object(g["a"])(e).weekdayMismatch=true}}function O(e){var t,r,i,n,a,o,s,l;t=e._w;if(t.GG!=null||t.W!=null||t.E!=null){a=1;o=4;r=S(t.GG,e._a[v["i"]],Object(b["b"])(Object(w["a"])(),1,4).year);i=S(t.W,1);n=S(t.E,1);if(n<1||n>7){l=true}}else{a=e._locale._week.dow;o=e._locale._week.doy;var u=Object(b["b"])(Object(w["a"])(),a,o);r=S(t.gg,e._a[v["i"]],u.year);i=S(t.w,u.week);if(t.d!=null){n=t.d;if(n<0||n>6){l=true}}else if(t.e!=null){n=t.e+a;if(t.e<0||t.e>6){l=true}}else{n=a}}if(i<1||i>Object(b["c"])(r,a,o)){Object(g["a"])(e)._overflowWeeks=true}else if(l!=null){Object(g["a"])(e)._overflowWeekday=true}else{s=Object(b["a"])(r,i,n,a,o);e._a[v["i"]]=s.year;e._dayOfYear=s.dayOfYear}}var T=r(80);var E=r(98);var M=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var j=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var A=/Z|[+-]\d\d(?::?\d\d)?/;var P=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,false],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,false],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,false],["YYYYDDD",/\d{7}/]];var k=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]];var I=/^\/?Date\((\-?\d+)/i;function D(e){var t,r,i=e._i,n=M.exec(i)||j.exec(i),a,o,s,l;if(n){Object(g["a"])(e).iso=true;for(t=0,r=P.length;t<r;t++){if(P[t][1].exec(n[1])){o=P[t][0];a=P[t][2]!==false;break}}if(o==null){e._isValid=false;return}if(n[3]){for(t=0,r=k.length;t<r;t++){if(k[t][1].exec(n[3])){s=(n[2]||" ")+k[t][0];break}}if(s==null){e._isValid=false;return}}if(!a&&s!=null){e._isValid=false;return}if(n[4]){if(A.exec(n[4])){l="Z"}else{e._isValid=false;return}}e._f=o+(s||"")+(l||"");q(e)}else{e._isValid=false}}var R=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function L(e,t,r,i,n,a){var o=[$(e),p["c"].indexOf(t),parseInt(r,10),parseInt(i,10),parseInt(n,10)];if(a){o.push(parseInt(a,10))}return o}function $(e){var t=parseInt(e,10);if(t<=49){return 2e3+t}else if(t<=999){return 1900+t}return t}function N(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}function F(e,t,r){if(e){var i=E["c"].indexOf(e),n=new Date(t[0],t[1],t[2]).getDay();if(i!==n){Object(g["a"])(r).weekdayMismatch=true;r._isValid=false;return false}}return true}var G={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function U(e,t,r){if(e){return G[e]}else if(t){return 0}else{var i=parseInt(r,10);var n=i%100,a=(i-n)/100;return a*60+n}}function H(e){var t=R.exec(N(e._i));if(t){var r=L(t[4],t[3],t[2],t[5],t[6],t[7]);if(!F(t[1],r,e)){return}e._a=r;e._tzm=U(t[8],t[9],t[10]);e._d=y["b"].apply(null,e._a);e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm);Object(g["a"])(e).rfc2822=true}else{e._isValid=false}}function Y(e){var t=I.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}D(e);if(e._isValid===false){delete e._isValid}else{return}H(e);if(e._isValid===false){delete e._isValid}else{return}d["a"].createFromInputFallback(e)}d["a"].createFromInputFallback=Object(T["a"])("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), "+"which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are "+"discouraged and will be removed in an upcoming major release. Please refer to "+"http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});var W=r(6);var V=r(37);var z=r(20);d["a"].ISO_8601=function(){};d["a"].RFC_2822=function(){};function q(e){if(e._f===d["a"].ISO_8601){D(e);return}if(e._f===d["a"].RFC_2822){H(e);return}e._a=[];Object(g["a"])(e).empty=true;var t=""+e._i,r,i,n,a,o,s=t.length,l=0;n=Object(z["b"])(e._f,e._locale).match(z["e"])||[];for(r=0;r<n.length;r++){a=n[r];i=(t.match(Object(W["b"])(a,e))||[])[0];if(i){o=t.substr(0,t.indexOf(i));if(o.length>0){Object(g["a"])(e).unusedInput.push(o)}t=t.slice(t.indexOf(i)+i.length);l+=i.length}if(z["d"][a]){if(i){Object(g["a"])(e).empty=false}else{Object(g["a"])(e).unusedTokens.push(a)}Object(V["b"])(a,i,e)}else if(e._strict&&!i){Object(g["a"])(e).unusedTokens.push(a)}}Object(g["a"])(e).charsLeftOver=s-l;if(t.length>0){Object(g["a"])(e).unusedInput.push(t)}if(e._a[v["b"]]<=12&&Object(g["a"])(e).bigHour===true&&e._a[v["b"]]>0){Object(g["a"])(e).bigHour=undefined}Object(g["a"])(e).parsedDateParts=e._a.slice(0);Object(g["a"])(e).meridiem=e._meridiem;e._a[v["b"]]=B(e._locale,e._a[v["b"]],e._meridiem);x(e);m(e)}function B(e,t,r){var i;if(r==null){return t}if(e.meridiemHour!=null){return e.meridiemHour(t,r)}else if(e.isPM!=null){i=e.isPM(r);if(i&&t<12){t+=12}if(!i&&t===12){t=0}return t}else{return t}}var X=r(128);function K(e){var t,r,i,n,a;if(e._f.length===0){Object(g["a"])(e).invalidFormat=true;e._d=new Date(NaN);return}for(n=0;n<e._f.length;n++){a=0;t=Object(f["b"])({},e);if(e._useUTC!=null){t._useUTC=e._useUTC}t._f=e._f[n];q(t);if(!Object(c["b"])(t)){continue}a+=Object(g["a"])(t).charsLeftOver;a+=Object(g["a"])(t).unusedTokens.length*10;Object(g["a"])(t).score=a;if(i==null||a<i){i=a;r=t}}Object(X["a"])(e,r||t)}var Z=r(30);function Q(e){if(e._d){return}var t=Object(Z["b"])(e._i);e._a=u([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)});x(e)}r.d(t,"b",function(){return ee});r.d(t,"a",function(){return re});function J(e){var t=new f["a"](m(ee(e)));if(t._nextDay){t.add(1,"d");t._nextDay=undefined}return t}function ee(e){var t=e._i,r=e._f;e._locale=e._locale||Object(h["b"])(e._l);if(t===null||r===undefined&&t===""){return Object(c["a"])({nullInput:true})}if(typeof t==="string"){e._i=t=e._locale.preparse(t)}if(Object(f["c"])(t)){return new f["a"](m(t))}else if(Object(l["a"])(t)){e._d=t}else if(Object(i["a"])(r)){K(e)}else if(r){q(e)}else{te(e)}if(!Object(c["b"])(e)){e._d=null}return e}function te(e){var t=e._i;if(Object(o["a"])(t)){e._d=new Date(d["a"].now())}else if(Object(l["a"])(t)){e._d=new Date(t.valueOf())}else if(typeof t==="string"){Y(e)}else if(Object(i["a"])(t)){e._a=u(t.slice(0),function(e){return parseInt(e,10)});x(e)}else if(Object(n["a"])(t)){Q(e)}else if(Object(s["a"])(t)){e._d=new Date(t)}else{d["a"].createFromInputFallback(e)}}function re(e,t,r,o,s){var l={};if(r===true||r===false){o=r;r=undefined}if(Object(n["a"])(e)&&a(e)||Object(i["a"])(e)&&e.length===0){e=undefined}l._isAMomentObject=true;l._useUTC=l._isUTC=s;l._l=r;l._i=e;l._f=t;l._strict=o;return J(l)}},function(e,t,r){"use strict";var i=r(19);var n=r(40);var a=r(388);var o=r(149);var s=function e(t,r,i){this.http_=t;this.q_=r;this.gmfThemes_=i;this.getQueryableLayerNodesDefered_=null};s.$inject=["$http","$q","gmfThemes"];s.$inject=["$http","$q","gmfThemes"];s.prototype.getQueryableLayersInfo=function(){var e=this;if(!this.getQueryableLayerNodesDefered_){this.getQueryableLayerNodesDefered_=this.q_.defer();this.gmfThemes_.getOgcServersObject().then(function(t){e.gmfThemes_.getThemesObject().then(function(r){if(!r){return}var i=s.getQueryableLayersInfoFromThemes(r,t);var n=[];for(var a=0,o=i.length;a<o;a++){if(i[a].layerNode.metadata.copyable){n.push(i[a])}}e.getQueryableLayerNodesDefered_.resolve(n)})})}return this.getQueryableLayerNodesDefered_.promise};s.getQueryableLayersInfoFromThemes=function(e,t){var r=[];var n=void 0;var a=void 0;var o=void 0;var s=void 0;for(var l=0,u=e.length;l<u;l++){n=e[l];for(var c=0,f=n.children.length;c<f;c++){a=n.children[c];if(!a.ogcServer){continue}o=[];i["a"].getFlatNodes(a,o);for(var h=0,d=o.length;h<d;h++){s=o[h];if(s.children&&s.children.length){continue}if(s.childLayers&&s.childLayers[0]&&s.childLayers[0].queryable){r.push({layerNode:s,ogcServer:t[a.ogcServer]})}}}}return r};s.prototype.getFeatureInfo=function(e,t,r){var i=r.getView();var s=i.getProjection().getCode();var l=i.getResolution();var u=n["a"].WMSInfoFormat.GML;var c=e.layerNode;var f=c.layers.split(",");var h=e.ogcServer;var d=new a["a"]({layers:f});var p=new o["a"]({url:h.url,params:{layers:f}});var v=p.getGetFeatureInfoUrl(t,l,s,{INFO_FORMAT:u,FEATURE_COUNT:1,QUERY_LAYERS:f});return this.http_.get(v).then(function(e){var t=d.readFeatures(e.data);return t&&t[0]?t[0]:null})};s.module=angular.module("gmfObjectEditingQuery",[i["a"].module.name]);s.module.service("gmfObjectEditingQuery",s);t["a"]=s},function(e,t,r){"use strict";(function(e){var i=r(1);var n=r(195);var a=r(518);var o=r.n(a);var s=r(612);var l=r.n(s);var u=r(517);var c=r.n(u);var f=r(516);var h=r.n(f);var d=r(515);var p=r.n(d);var v=r(514);var g=r.n(v);var m=angular.module("ngeoDatePicker",[n["a"].module.name,"ui.date"]);m.value("ngeoDatePickerTemplateUrl",function(e,t){var r=t["ngeoDatePickerTemplateUrl"];return r!==undefined?r:"ngeo/misc/datepickerComponent"});m.run(["$templateCache",function(e){e.put("ngeo/misc/datepickerComponent",r(513))}]);m.component_=function(t,r){return{scope:{onDateSelected:"&",time:"="},bindToController:true,controller:"ngeoDatePickerController as datepickerCtrl",restrict:"AE",templateUrl:t,link:function t(i,n,a,o){o.init();var s=o.gettextCatalog_.getCurrentLanguage();e["datepicker"]["setDefaults"](e["datepicker"]["regional"][s]);o.sdateOptions=angular.extend({},o.sdateOptions,{minDate:o.initialMinDate,maxDate:o.initialMaxDate,onClose:function t(r){if(r){e(n[0]).find('input[name="edate"]').datepicker("option","minDate",r)}}});o.edateOptions=angular.extend({},o.edateOptions,{minDate:o.initialMinDate,maxDate:o.initialMaxDate,onClose:function t(r){if(r){e(n[0]).find('input[name="sdate"]').datepicker("option","maxDate",r)}}});angular.element("body").on("hidden.bs.popover",function(){var t=angular.element("#ui-datepicker-div");if(t&&t.css("display")==="block"){e(n[0]).find('input[name$="date"]').datepicker("hide")}});r(function(){angular.element("#ui-datepicker-div").on("mousedown",function(e){e.stopPropagation()})})}}};m.component_.$inject=["ngeoDatePickerTemplateUrl","$timeout"];m.directive("ngeoDatePicker",m.component_);m.Controller_=function(e,t,r,i){var n=this;this.ngeoTime_=r;this.time;this.gettextCatalog_=i;this.isModeRange;this.onDateSelected;this.initialMinDate;this.initialMaxDate;this.edateOptions={changeMonth:true,changeYear:true};this.sdateOptions={changeMonth:true,changeYear:true};this.sdate;this.edate;e.$watchGroup(["datepickerCtrl.sdate","datepickerCtrl.edate"],function(e,t){var r=e[0];var i=e[1];if(angular.isDate(r)&&(!n.isModeRange||angular.isDate(i))){n.onDateSelected({time:{start:n.ngeoTime_.getTime(r),end:n.ngeoTime_.getTime(i)}})}})};m.Controller_.$inject=["$scope","$injector","ngeoTime","gettextCatalog"];m.Controller_.prototype.init=function(){var e=this.ngeoTime_.getOptions(this.time);this.initialMinDate=this.ngeoTime_.createDate(e.minDate);this.initialMaxDate=this.ngeoTime_.createDate(e.maxDate);this.isModeRange=this.time.mode==="range";if(this.isModeRange){i["a"].assertArray(e.values);this.sdate=this.ngeoTime_.createDate(e.values[0]);this.edate=this.ngeoTime_.createDate(e.values[1])}else{i["a"].assertNumber(e.values);this.sdate=this.ngeoTime_.createDate(e.values)}};m.controller("ngeoDatePickerController",m.Controller_);t["a"]=m}).call(this,r(24))},function(e,t,r){"use strict";var i=r(1);var n=r(107);var a=r(18);var o=r(260);var s=r(194);var l=r(136);var u=r(66);var c=r(3);var f=r(28);var h=r(2);var d=r(21);var p=r(166);var v=r(15);var g=angular.module("ngeoCreatefeature",[l["a"].module.name,n["a"].name]);g.directive_=function(){return{controller:"ngeoCreatefeatureController",bindToController:true,scope:{active:"=ngeoCreatefeatureActive",features:"=ngeoCreatefeatureFeatures",geomType:"=ngeoCreatefeatureGeomType",map:"=ngeoCreatefeatureMap"}}};g.directive("ngeoCreatefeature",g.directive_);g.Controller_=function(e,t,r,i,n,a){var o=this;this.active;this.features;this.geomType;this.map;this.gettextCatalog_=e;this.compile_=t;this.filter_=r;this.scope_=i;this.timeout_=n;this.ngeoEventHelper_=a;this.interaction_;i.$watch(function(){return o.active},function(e){o.interaction_.setActive(e)})};g.Controller_.$inject=["gettextCatalog","$compile","$filter","$scope","$timeout","ngeoEventHelper"];g.Controller_.prototype.$onInit=function(){this.active=this.active===true;var e=this.gettextCatalog_;var t=void 0;if(this.geomType===a["a"].POINT||this.geomType===a["a"].MULTI_POINT){t=new p["a"]({type:"Point"})}else if(this.geomType===a["a"].LINE_STRING||this.geomType===a["a"].MULTI_LINE_STRING){var r=e.getString("Click to start drawing length");var n=e.getString("Click to continue drawing<br/>"+"Double-click or click last point to finish");t=new s["a"](this.filter_("ngeoUnitPrefix"),e,{style:new v["c"],startMsg:this.compile_("<div translate>"+r+"</div>")(this.scope_)[0],continueMsg:this.compile_("<div translate>"+n+"</div>")(this.scope_)[0]})}else if(this.geomType===a["a"].POLYGON||this.geomType===a["a"].MULTI_POLYGON){var l=e.getString("Click to start drawing area");var u=e.getString("Click to continue drawing<br/>"+"Double-click or click starting point to finish");t=new o["a"](this.filter_("ngeoUnitPrefix"),e,{style:new v["c"],startMsg:this.compile_("<div translate>"+l+"</div>")(this.scope_)[0],continueMsg:this.compile_("<div translate>"+u+"</div>")(this.scope_)[0]})}i["a"].assert(t);t.setActive(this.active);this.interaction_=t;this.map.addInteraction(t);var f=c["c"](this);if(t instanceof p["a"]){this.ngeoEventHelper_.addListenerKey(f,h["a"](t,"drawend",this.handleDrawEnd_,this))}else if(t instanceof s["a"]||t instanceof o["a"]){this.ngeoEventHelper_.addListenerKey(f,h["a"](t,"measureend",this.handleDrawEnd_,this))}};g.Controller_.prototype.handleDrawEnd_=function(e){var t=void 0;if(e.feature){t=e.feature}else{t=e.detail.feature}i["a"].assert(t);var r=t.getGeometry();var n=r.getType();if(this.geomType.indexOf("Multi")!=n.indexOf("Multi")){r=u["a"].toMulti(r)}var a=new d["a"](r);if(this.features instanceof f["b"]){this.features.push(a)}else{this.features.addFeature(a)}};g.Controller_.prototype.$onDestroy=function(){var e=this;this.timeout_(function(){var t=c["c"](e);e.ngeoEventHelper_.clearListenerKey(t);e.interaction_.setActive(false);e.map.removeInteraction(e.interaction_)},0)};g.controller("ngeoCreatefeatureController",g.Controller_);t["a"]=g},function(e,t,r){"use strict";var i=r(3);var n=r(2);var a=r(136);var o=r(379);var s=angular.module("ngeoAttributes",[o["a"].name,a["a"].module.name]);s.run(["$templateCache",function(e){e.put("ngeo/editing/attributescomponent",r(521))}]);s.value("ngeoAttributesTemplateUrl",function(e){var t=e["ngeoAttributesTemplateUrl"];return t!==undefined?t:"ngeo/editing/attributescomponent"});l.$inject=["$attrs","ngeoAttributesTemplateUrl"];function l(e,t){return t(e)}s.component_={controller:"ngeoAttributesController as attrCtrl",bindings:{attributes:"=ngeoAttributesAttributes",disabled:"<ngeoAttributesDisabled",feature:"=ngeoAttributesFeature"},require:{form:"^"},templateUrl:l};s.component("ngeoAttributes",s.component_);s.Controller_=function(e,t){this.attributes;this.disabled=false;this.feature;this.properties;this.scope_=e;this.ngeoEventHelper_=t;this.updating_=false};s.Controller_.$inject=["$scope","ngeoEventHelper"];s.Controller_.prototype.$onInit=function(){this.properties=this.feature.getProperties();var e=i["c"](this);this.ngeoEventHelper_.addListenerKey(e,n["a"](this.feature,"propertychange",this.handleFeaturePropertyChange_,this))};s.Controller_.prototype.handleInputChange=function(e){this.updating_=true;var t=this.properties[e];this.feature.set(e,t);this.updating_=false};s.Controller_.prototype.$onDestroy=function(){var e=i["c"](this);this.ngeoEventHelper_.clearListenerKey(e)};s.Controller_.prototype.handleFeaturePropertyChange_=function(e){if(this.updating_){return}this.properties[e.key]=e.target.get(e.key);this.scope_.$apply()};s.controller("ngeoAttributesController",s.Controller_);t["a"]=s},function(e,t,r){"use strict";var i=r(62);var n=r(19);var a=r(1);var o=r(109);var s=r(3);var l=r(2);var u=r(28);var c=r(218);var f=r(380);var h=function e(t,r,i,n,a,o){this.http_=t;this.q_=r;this.rootScope_=i;this.timeout_=n;this.gmfThemes_=a;this.gmfTreeManager_=o;this.cache_={};this.listenerKeys_=[];this.map_=null;this.mapViewChangePromise_=null;this.ogcServers_=null};h.$inject=["$http","$q","$rootScope","$timeout","gmfThemes","gmfTreeManager"];h.$inject=["$http","$q","$rootScope","$timeout","gmfThemes","gmfTreeManager"];h.prototype.ensureSnapInteractionsOnTop=function(){var e=this.map_;a["a"].assert(e);var t=void 0;for(var r in this.cache_){t=this.cache_[+r];if(t.active){a["a"].assert(t.interaction);e.removeInteraction(t.interaction);e.addInteraction(t.interaction)}}};h.prototype.setMap=function(e){var t=this;var r=this.listenerKeys_;if(this.map_){this.treeCtrlsUnregister_();this.unregisterAllTreeCtrl_();r.forEach(l["e"]);r.length=0}this.map_=e;if(e){this.treeCtrlsUnregister_=this.rootScope_.$watchCollection(function(){if(t.gmfTreeManager_.rootCtrl){return t.gmfTreeManager_.rootCtrl.children}},function(e){t.timeout_(function(){if(e){t.unregisterAllTreeCtrl_();t.gmfTreeManager_.rootCtrl.traverseDepthFirst(t.registerTreeCtrl_.bind(t))}},0)});r.push(l["a"](this.gmfThemes_,"change",this.handleThemesChange_,this),l["a"](e,"moveend",this.handleMapMoveEnd_,this))}};h.prototype.handleThemesChange_=function(){var e=this;this.ogcServers_=null;this.gmfThemes_.getOgcServersObject().then(function(t){e.ogcServers_=t})};h.prototype.registerTreeCtrl_=function(e){var t=e.node;if(t.children){return}t=e.node;var r=n["a"].getSnappingConfig(t);if(r){var i=this.getWFSConfig_(e);if(i){var a=s["c"](e);var o=this.rootScope_.$watch(function(){return e.getState()},this.handleTreeCtrlStateChange_.bind(this,e));this.cache_[a]={active:false,featureNS:"http://mapserver.gis.umn.edu/mapserver",featurePrefix:"feature",features:new u["b"],geometryName:"geom",interaction:null,maxFeatures:50,requestDeferred:null,snappingConfig:r,treeCtrl:e,wfsConfig:i,stateWatcherUnregister:o};this.handleTreeCtrlStateChange_(e,e.getState())}}};h.prototype.unregisterAllTreeCtrl_=function(){for(var e in this.cache_){var t=this.cache_[+e];if(t){t.stateWatcherUnregister();this.deactivateItem_(t);delete this.cache_[+e]}}};h.prototype.getWFSConfig_=function(e){if(this.ogcServers_===null){return null}var t=e.node;if(t.type!==n["a"].NodeType.WMS){return null}var r=t;var i=[];for(var s=0,l=r.childLayers.length;s<l;s++){if(r.childLayers[s].queryable){i.push(r.childLayers[s].name)}}if(!i.length){return null}var u=void 0;var c=e.parent.node;if(c.mixed){u=r.ogcServer}else{var f=o["a"].getFirstParentTree(e);var h=f.node;u=h.ogcServer}if(!u){return null}var d=this.ogcServers_[u];if(!d.wfsSupport){return null}var p=d.urlWfs;a["a"].assert(p,"urlWfs should be defined.");return{featureTypes:i.join(","),url:p}};h.prototype.handleTreeCtrlStateChange_=function(e,t){var r=s["c"](e);var i=this.cache_[r];if(t==="on"){this.activateItem_(i)}else{this.deactivateItem_(i)}};h.prototype.activateItem_=function(e){if(e.active){return}var t=this.map_;a["a"].assert(t);var r=new f["a"]({edge:e.snappingConfig.edge,features:e.features,pixelTolerance:e.snappingConfig.tolerance,vertex:e.snappingConfig.vertex});t.addInteraction(r);e.interaction=r;e.active=true;this.loadItemFeatures_(e)};h.prototype.deactivateItem_=function(e){if(!e.active){return}var t=this.map_;a["a"].assert(t);var r=e.interaction;t.removeInteraction(r);e.interaction=null;e.features.clear();if(e.requestDeferred){e.requestDeferred.resolve();e.requestDeferred=null}e.active=false};h.prototype.loadAllItems_=function(){this.mapViewChangePromise_=null;var e=void 0;for(var t in this.cache_){e=this.cache_[+t];if(e.active){this.loadItemFeatures_(e)}}};h.prototype.refresh=function(){this.loadAllItems_()};h.prototype.loadItemFeatures_=function(e){if(e.requestDeferred){e.requestDeferred.resolve()}var t=this.map_;a["a"].assert(t);var r=t.getView();var i=t.getSize();a["a"].assert(i);var n=r.calculateExtent(i);var o=r.getProjection().getCode();var s=e.wfsConfig.featureTypes.split(",");var l={srsName:o,featureNS:e.featureNS,featurePrefix:e.featurePrefix,featureTypes:s,outputFormat:"GML3",bbox:n,geometryName:e.geometryName,maxFeatures:e.maxFeatures};var u=new c["a"];var f=new XMLSerializer;var h=u.writeGetFeature(l);var d=f.serializeToString(h);var p=e.wfsConfig.url;e.requestDeferred=this.q_.defer();this.http_.post(p,d,{timeout:e.requestDeferred.promise}).then(function(t){e.requestDeferred=null;e.features.clear();var r=(new c["a"]).readFeatures(t.data);if(r){e.features.extend(r)}})};h.prototype.handleMapMoveEnd_=function(){if(this.mapViewChangePromise_){this.timeout_.cancel(this.mapViewChangePromise_)}this.mapViewChangePromise_=this.timeout_(this.loadAllItems_.bind(this),400)};h.Cache;h.CacheItem;h.WFSConfig;h.module=angular.module("gmfSnapping",[i["a"].module.name,n["a"].module.name,o["a"].module.name]);h.module.service("gmfSnapping",h);t["a"]=h},function(e,t,r){"use strict";var i=r(1);var n=r(3);var a=r(5);var o=r(21);var s=r(2);var l=r(117);var u=r(51);var c=r(34);var f=r(49);var h=r(266);var d=r(89);var p=r(76);var v=function e(t){this.listenerKeys_=[];this.featureListenerKeys_={};this.keyPressListenerKey_=null;this.myFeatures_=t.features!==undefined?t.features:null;this.vectorSource_=new p["b"]({useSpatialIndex:false});this.vectorLayer_=new d["a"]({source:this.vectorSource_,style:t.style,updateWhileAnimating:true,updateWhileInteracting:true});this.centerFeatures_={};h["a"].call(this,t)};n["d"](v,h["a"]);v.prototype.setActive=function(e){if(this.keyPressListenerKey_){s["e"](this.keyPressListenerKey_);this.keyPressListenerKey_=null}h["a"].prototype.setActive.call(this,e);if(e){this.keyPressListenerKey_=s["a"](document,"keyup",this.handleKeyUp_,this)}this.setState_()};v.prototype.setMap=function(e){var t=this.getMap();if(t){this.vectorLayer_.setMap(null)}h["a"].prototype.setMap.call(this,e);if(e){this.vectorLayer_.setMap(e)}this.setState_()};v.prototype.setState_=function(){var e=this;var t=this.getMap();var r=this.getActive();var i=this.myFeatures_;var n=this.listenerKeys_;if(t&&r&&i){i.forEach(function(t){return e.addFeature_(t)});n.push(s["a"](i,"add",this.handleFeaturesAdd_,this),s["a"](i,"remove",this.handleFeaturesRemove_,this))}else{if(t){var a=t.getTargetElement();a.style.cursor="default"}n.forEach(s["e"]);n.length=0;i.forEach(function(t){return e.removeFeature_(t)})}};v.prototype.handleFeaturesAdd_=function(e){var t=e.element;i["a"].assertInstanceof(t,o["a"],"feature should be an ol.Feature");this.addFeature_(t)};v.prototype.handleFeaturesRemove_=function(e){var t=e.element;this.removeFeature_(t)};v.prototype.addFeature_=function(e){var t=n["c"](e);var r=e.getGeometry();i["a"].assertInstanceof(r,l["a"]);this.featureListenerKeys_[t]=s["a"](r,"change",this.handleGeometryChange_.bind(this,e),this);var a=this.getGeometryCenterPoint_(r);var u=new o["a"](a);this.centerFeatures_[t]=u;this.vectorSource_.addFeature(u)};v.prototype.removeFeature_=function(e){var t=n["c"](e);if(this.featureListenerKeys_[t]){s["e"](this.featureListenerKeys_[t]);delete this.featureListenerKeys_[t];this.vectorSource_.removeFeature(this.centerFeatures_[t]);delete this.centerFeatures_[t]}};v.prototype.handleGeometryChange_=function(e,t){var r=t.target;i["a"].assertInstanceof(r,l["a"]);var a=this.getGeometryCenterPoint_(r);var o=n["c"](e);this.centerFeatures_[o].setGeometry(a)};v.prototype.getGeometryCenterPoint_=function(e){var t=void 0;var r=void 0;if(e instanceof f["a"]){r=e.getInteriorPoint()}else if(e instanceof u["a"]){t=e.getCoordinateAt(.5)}else{var n=e.getExtent();t=a["x"](n)}if(!r&&t){r=new c["a"](t)}i["a"].assert(r,"Point should be thruthy");return r};v.prototype.handleKeyUp_=function(e){if(e.keyCode===27){this.setActive(false)}};t["a"]=v},function(e,t,r){"use strict";var i=r(1);var n=r(163);var a=r(69);var o=r(3);var s=r(5);var l=r(21);var u=r(2);var c=r(29);var f=r(117);var h=r(34);var d=r(51);var p=r(49);var v=r(89);var g=r(76);var m=function e(t){i["a"].assert(t.features);this.listenerKeys_=[];this.modified_=false;this.keyPressListenerKey_=null;this.changingFeature_=false;this.pixelTolerance_=t.pixelTolerance!==undefined?t.pixelTolerance:10;this.features_=t.features;this.feature_=null;this.coordinate_=null;this.centerCoordinate_=null;this.overlay_=new v["a"]({source:new g["b"]({useSpatialIndex:false,wrapX:!!t.wrapX}),style:t.style||n["a"].getDefaultModifyStyleFunction(),updateWhileAnimating:true,updateWhileInteracting:true});this.centerFeatures_={};c["b"].call(this,{handleDownEvent:this.handleDown_,handleDragEvent:this.handleDrag_,handleUpEvent:this.handleUp_})};o["d"](m,c["b"]);m.prototype.setActive=function(e){var t=this;if(this.keyPressListenerKey_){u["e"](this.keyPressListenerKey_);this.keyPressListenerKey_=null}c["b"].prototype.setActive.call(this,e);if(e){this.keyPressListenerKey_=u["a"](document,"keyup",this.handleKeyUp_,this);this.features_.forEach(function(e){return t.addFeature_(e)});this.listenerKeys_.push(u["a"](this.features_,"add",this.handleFeatureAdd_,this),u["a"](this.features_,"remove",this.handleFeatureRemove_,this))}else{this.listenerKeys_.forEach(u["e"]);this.listenerKeys_.length=0;this.features_.forEach(function(e){return t.removeFeature_(e)})}};m.prototype.addFeature_=function(e){var t=e.getGeometry();i["a"].assertInstanceof(t,f["a"]);e.set("angle",0);var r=o["c"](e);var n=new h["a"](this.getCenterCoordinate_(t));var a=new l["a"](n);this.centerFeatures_[r]=a;this.overlay_.getSource().addFeature(a)};m.prototype.willModifyFeatures_=function(e){if(!this.modified_){this.modified_=true;var t=new a["a"]("modifystart",{features:this.features_});this.dispatchEvent(t)}};m.prototype.removeFeature_=function(e){this.feature_=null;if(e){var t=o["c"](e);if(this.centerFeatures_[t]){this.overlay_.getSource().removeFeature(this.centerFeatures_[t]);delete this.centerFeatures_[t]}}};m.prototype.setMap=function(e){this.overlay_.setMap(e);c["b"].prototype.setMap.call(this,e)};m.prototype.handleFeatureAdd_=function(e){var t=e.element;i["a"].assertInstanceof(t,l["a"],"feature should be an ol.Feature");this.addFeature_(t)};m.prototype.handleFeatureRemove_=function(e){var t=e.element;this.removeFeature_(t)};m.prototype.handleDown_=function(e){var t=e.map;var r=t.forEachFeatureAtPixel(e.pixel,function(e,t){return e},undefined);if(r){var i=false;this.features_.forEach(function(e){if(o["c"](e)==o["c"](r)){i=true}});if(!i){r=null}}if(r){this.coordinate_=e.coordinate;this.feature_=r;var n=this.feature_.getGeometry();if(n!==undefined){this.centerCoordinate_=this.getCenterCoordinate_(n)}return true}return false};m.prototype.getCenterCoordinate_=function(e){var t=void 0;if(e instanceof d["a"]){t=e.getFlatMidpoint()}else if(e instanceof p["a"]){t=e.getFlatInteriorPoint()}else{var r=e.getExtent();t=s["x"](r)}return t};m.prototype.handleDrag_=function(e){this.willModifyFeatures_(e);var t=this.feature_.getGeometry();var r=this.coordinate_[0];var i=this.coordinate_[1];var n=this.centerCoordinate_[0];var a=this.centerCoordinate_[1];var o=r-n;var s=i-a;var l=e.coordinate[0]-n;var u=e.coordinate[1]-a;this.coordinate_[0]=e.coordinate[0];this.coordinate_[1]=e.coordinate[1];var c=Math.atan2(u,l);var f=Math.atan2(s,o);var h=f-c;t.rotate(-h,[n,a])};m.prototype.handleUp_=function(e){if(this.modified_){var t=new a["a"]("rotateend",{feature:this.feature_});this.dispatchEvent(t);this.modified_=false;this.setActive(false)}return false};m.prototype.handleKeyUp_=function(e){if(e.keyCode===27){this.setActive(false)}};t["a"]=m},function(e,t,r){"use strict";var i=r(28);var n=angular.module("ngeoFeatures",[]);n.value("ngeoFeatures",new i["b"]);t["a"]=n},function(e,t,r){"use strict";var i=r(161);var n=r(325);var a=r(324);var o=r(323);var s=r(322);var l=r(321);var u=r(320);var c=angular.module("ngeoDrawfeature",[i["a"].module.name,n["a"].name,a["a"].name,o["a"].name,s["a"].name,l["a"].name,u["a"].name]);c.directive_=function(){return{controller:"ngeoDrawfeatureController as dfCtrl",scope:true,bindToController:{active:"=ngeoDrawfeatureActive",features:"=?ngeoDrawfeatureFeatures",map:"=ngeoDrawfeatureMap",showMeasure:"=?ngeoDrawfeatureShowmeasure"}}};c.directive("ngeoDrawfeature",c.directive_);t["a"]=c},function(e,t,r){"use strict";(function(e){var i=r(1);var n=r(69);var a=r(3);var o=r(2);var s=r(144);var l=r(120);var u=function t(r,i){var n=this;var a=i!==undefined?i:{};a.positioning=l["a"].TOP_LEFT;this.listenerKeys_=[];this.clickOutListenerKey_=null;var o=e("<div/>",{class:"panel panel-default"});this.autoClose_=r.autoClose!==undefined?r.autoClose:true;if(r.title){var u=e("<div>",{class:"panel-heading"}).appendTo(o);e("<span>",{text:r.title}).appendTo(u)}var c=e("<div>",{class:"list-group"}).appendTo(o);this.actions_=[];r.actions.forEach(function(t){n.actions_.push(e("<button>",{class:"list-group-item","data-name":t.name,text:[" ",t.label!==undefined?t.label:t.name].join("")}).appendTo(c).prepend(e("<span>",{class:t.cls!==undefined?t.cls:""})))});a.element=o[0];s["a"].call(this,a)};a["d"](u,s["a"]);u.prototype.setMap=function(e){var t=this;var r=this.getMap();if(r){this.listenerKeys_.forEach(o["e"]);this.listenerKeys_.length=0}s["a"].prototype.setMap.call(this,e);if(e){this.actions_.forEach(function(e){var r=e.data();t.listenerKeys_.push(o["a"](e[0],"click",t.handleActionClick_.bind(t,r.name)))});this.listenerKeys_.push(o["a"](e,"pointermove",this.handleMapPointerMove_,this))}};u.prototype.open=function(e){this.setPosition(e);if(this.autoClose_){this.clickOutListenerKey_=o["a"](document.documentElement,"mousedown",this.handleClickOut_,this)}};u.prototype.close=function(){this.setPosition(undefined);if(this.clickOutListenerKey_!==null){o["e"](this.clickOutListenerKey_)}};u.prototype.handleActionClick_=function(e,t){this.dispatchEvent(new n["a"]("actionclick",{action:e}));if(this.autoClose_){this.close()}t.stopPropagation()};u.prototype.handleClickOut_=function(t){var r=this.getElement();if(r&&e(t.target).closest(r).length===0){this.close()}};u.prototype.handleMapPointerMove_=function(e){var t=e.originalEvent.target;i["a"].assertInstanceof(t,Element);var r=this.getElement();i["a"].assertInstanceof(r,Element);if(r.contains(t)){e.coordinate=[Infinity,Infinity];e.pixel=[Infinity,Infinity]}};t["a"]=u}).call(this,r(24))},function(e,t,r){"use strict";var i=r(1);var n=r(2);var a=r(8);var o=r(326);var s=r(52);var l=angular.module("gmfDrawingFeatureStyle",[o["a"].name,s["a"].module.name]);l.run(["$templateCache",function(e){e.put("gmf/drawing/featureStyleComponent",r(524))}]);l.directive_=function(){return{controller:"GmfFeaturestyleController as fsCtrl",scope:{feature:"=gmfFeaturestyleFeature"},bindToController:true,templateUrl:"gmf/drawing/featureStyleComponent"}};l.directive("gmfFeaturestyle",l.directive_);l.Controller_=function(e,t){var r=this;this.feature;this.scope_=e;this.featureHelper_=t;this.color=undefined;this.label=undefined;this.measure=undefined;e.$watch(function(){return r.color},this.handleColorSet_.bind(this));this.featureListenerKeys_=[];this.type;e.$watch(function(){return r.feature},this.handleFeatureSet_.bind(this))};l.Controller_.$inject=["$scope","ngeoFeatureHelper"];l.Controller_.prototype.handleFeatureSet_=function(e,t){var r=this.featureListenerKeys_;if(t){r.forEach(n["e"]);r.length=0;this.type=undefined;this.color=undefined;this.measure=undefined;this.label=undefined}if(e){[a["a"].ANGLE,a["a"].COLOR,a["a"].NAME,a["a"].SHOW_LABEL,a["a"].OPACITY,a["a"].SHOW_MEASURE,a["a"].SIZE,a["a"].STROKE].forEach(function(t){r.push(n["a"](e,"change:"+t,this.handleFeatureChange_,this))},this);var o=e.getGeometry();i["a"].assert(o,"Geometry should be thruthy");r.push(n["a"](o,"change",this.handleGeometryChange_,this));this.type=this.featureHelper_.getType(e);this.color=this.featureHelper_.getColorProperty(e);this.measure=this.featureHelper_.getMeasure(e)}};l.Controller_.prototype.handleColorSet_=function(e){if(this.feature&&e){var t=this.feature.get(a["a"].COLOR);if(t!==e){this.feature.set(a["a"].COLOR,e)}}};l.Controller_.prototype.getSetAngle=function(e){return i["a"].assertNumber(this.getSetProperty_(a["a"].ANGLE,e))};l.Controller_.prototype.getSetName=function(e){return i["a"].assertString(this.getSetProperty_(a["a"].NAME,e))};l.Controller_.prototype.getSetShowLabel=function(e){return i["a"].assertBoolean(this.getSetProperty_(a["a"].SHOW_LABEL,e))};l.Controller_.prototype.getSetOpacity=function(e){return i["a"].assertNumber(this.getSetProperty_(a["a"].OPACITY,e))};l.Controller_.prototype.getSetShowMeasure=function(e){return i["a"].assertBoolean(this.getSetProperty_(a["a"].SHOW_MEASURE,e))};l.Controller_.prototype.getSetSize=function(e){return i["a"].assertNumber(this.getSetProperty_(a["a"].SIZE,e))};l.Controller_.prototype.getSetStroke=function(e){return i["a"].assertNumber(this.getSetProperty_(a["a"].STROKE,e))};l.Controller_.prototype.getSetProperty_=function(e,t){if(t!==undefined){this.feature.set(e,t)}return this.feature.get(e)};l.Controller_.prototype.handleFeatureChange_=function(){var e=this.feature;if(!e){return}this.featureHelper_.setStyle(e,true)};l.Controller_.prototype.handleGeometryChange_=function(){i["a"].assert(this.feature);this.measure=this.featureHelper_.getMeasure(this.feature);var e=this.featureHelper_.getShowMeasureProperty(this.feature);if(e){this.handleFeatureChange_()}this.scope_.$apply()};l.controller("GmfFeaturestyleController",l.Controller_);t["a"]=l},function(e,t,r){"use strict";e.exports=n;e.exports.default=n;var i=r(531);function n(e,t){if(!(this instanceof n))return new n(e,t);this._maxEntries=Math.max(4,e||9);this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4));if(t){this._initFormat(t)}this.clear()}n.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,r=[],i=this.toBBox;if(!g(e,t))return r;var n=[],a,o,s,l;while(t){for(a=0,o=t.children.length;a<o;a++){s=t.children[a];l=t.leaf?i(s):s;if(g(e,l)){if(t.leaf)r.push(s);else if(v(e,l))this._all(s,r);else n.push(s)}}t=n.pop()}return r},collides:function(e){var t=this.data,r=this.toBBox;if(!g(e,t))return false;var i=[],n,a,o,s;while(t){for(n=0,a=t.children.length;n<a;n++){o=t.children[n];s=t.leaf?r(o):o;if(g(e,s)){if(t.leaf||v(e,s))return true;i.push(o)}}t=i.pop()}return false},load:function(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(var t=0,r=e.length;t<r;t++){this.insert(e[t])}return this}var i=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length){this.data=i}else if(this.data.height===i.height){this._splitRoot(this.data,i)}else{if(this.data.height<i.height){var n=this.data;this.data=i;i=n}this._insert(i,this.data.height-i.height-1,true)}return this},insert:function(e){if(e)this._insert(e,this.data.height-1);return this},clear:function(){this.data=m([]);return this},remove:function(e,t){if(!e)return this;var r=this.data,i=this.toBBox(e),n=[],o=[],s,l,u,c;while(r||n.length){if(!r){r=n.pop();l=n[n.length-1];s=o.pop();c=true}if(r.leaf){u=a(e,r.children,t);if(u!==-1){r.children.splice(u,1);n.push(r);this._condense(n);return this}}if(!c&&!r.leaf&&v(r,i)){n.push(r);o.push(s);s=0;l=r;r=r.children[0]}else if(l){s++;r=l.children[s];c=false}else r=null}return this},toBBox:function(e){return e},compareMinX:u,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(e){this.data=e;return this},_all:function(e,t){var r=[];while(e){if(e.leaf)t.push.apply(t,e.children);else r.push.apply(r,e.children);e=r.pop()}return t},_build:function(e,t,r,i){var n=r-t+1,a=this._maxEntries,s;if(n<=a){s=m(e.slice(t,r+1));o(s,this.toBBox);return s}if(!i){i=Math.ceil(Math.log(n)/Math.log(a));a=Math.ceil(n/Math.pow(a,i-1))}s=m([]);s.leaf=false;s.height=i;var l=Math.ceil(n/a),u=l*Math.ceil(Math.sqrt(a)),c,f,h,d;y(e,t,r,u,this.compareMinX);for(c=t;c<=r;c+=u){h=Math.min(c+u-1,r);y(e,c,h,l,this.compareMinY);for(f=c;f<=h;f+=l){d=Math.min(f+l-1,h);s.children.push(this._build(e,f,d,i-1))}}o(s,this.toBBox);return s},_chooseSubtree:function(e,t,r,i){var n,a,o,s,l,u,c,h;while(true){i.push(t);if(t.leaf||i.length-1===r)break;c=h=Infinity;for(n=0,a=t.children.length;n<a;n++){o=t.children[n];l=f(o);u=d(e,o)-l;if(u<h){h=u;c=l<c?l:c;s=o}else if(u===h){if(l<c){c=l;s=o}}}t=s||t.children[0]}return t},_insert:function(e,t,r){var i=this.toBBox,n=r?e:i(e),a=[];var o=this._chooseSubtree(n,this.data,t,a);o.children.push(e);l(o,n);while(t>=0){if(a[t].children.length>this._maxEntries){this._split(a,t);t--}else break}this._adjustParentBBoxes(n,a,t)},_split:function(e,t){var r=e[t],i=r.children.length,n=this._minEntries;this._chooseSplitAxis(r,n,i);var a=this._chooseSplitIndex(r,n,i);var s=m(r.children.splice(a,r.children.length-a));s.height=r.height;s.leaf=r.leaf;o(r,this.toBBox);o(s,this.toBBox);if(t)e[t-1].children.push(s);else this._splitRoot(r,s)},_splitRoot:function(e,t){this.data=m([e,t]);this.data.height=e.height+1;this.data.leaf=false;o(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,r){var i,n,a,o,l,u,c,h;u=c=Infinity;for(i=t;i<=r-t;i++){n=s(e,0,i,this.toBBox);a=s(e,i,r,this.toBBox);o=p(n,a);l=f(n)+f(a);if(o<u){u=o;h=i;c=l<c?l:c}else if(o===u){if(l<c){c=l;h=i}}}return h},_chooseSplitAxis:function(e,t,r){var i=e.leaf?this.compareMinX:u,n=e.leaf?this.compareMinY:c,a=this._allDistMargin(e,t,r,i),o=this._allDistMargin(e,t,r,n);if(a<o)e.children.sort(i)},_allDistMargin:function(e,t,r,i){e.children.sort(i);var n=this.toBBox,a=s(e,0,t,n),o=s(e,r-t,r,n),u=h(a)+h(o),c,f;for(c=t;c<r-t;c++){f=e.children[c];l(a,e.leaf?n(f):f);u+=h(a)}for(c=r-t-1;c>=t;c--){f=e.children[c];l(o,e.leaf?n(f):f);u+=h(o)}return u},_adjustParentBBoxes:function(e,t,r){for(var i=r;i>=0;i--){l(t[i],e)}},_condense:function(e){for(var t=e.length-1,r;t>=0;t--){if(e[t].children.length===0){if(t>0){r=e[t-1].children;r.splice(r.indexOf(e[t]),1)}else this.clear()}else o(e[t],this.toBBox)}},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0]));this.compareMinY=new Function("a","b",t.join(e[1]));this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};function a(e,t,r){if(!r)return t.indexOf(e);for(var i=0;i<t.length;i++){if(r(e,t[i]))return i}return-1}function o(e,t){s(e,0,e.children.length,t,e)}function s(e,t,r,i,n){if(!n)n=m(null);n.minX=Infinity;n.minY=Infinity;n.maxX=-Infinity;n.maxY=-Infinity;for(var a=t,o;a<r;a++){o=e.children[a];l(n,e.leaf?i(o):o)}return n}function l(e,t){e.minX=Math.min(e.minX,t.minX);e.minY=Math.min(e.minY,t.minY);e.maxX=Math.max(e.maxX,t.maxX);e.maxY=Math.max(e.maxY,t.maxY);return e}function u(e,t){return e.minX-t.minX}function c(e,t){return e.minY-t.minY}function f(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function h(e){return e.maxX-e.minX+(e.maxY-e.minY)}function d(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function p(e,t){var r=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY),n=Math.min(e.maxX,t.maxX),a=Math.min(e.maxY,t.maxY);return Math.max(0,n-r)*Math.max(0,a-i)}function v(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function g(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function m(e){return{children:e,height:1,leaf:true,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function y(e,t,r,n,a){var o=[t,r],s;while(o.length){r=o.pop();t=o.pop();if(r-t<=n)continue;s=t+Math.ceil((r-t)/n/2)*n;i(e,s,t,r,a);o.push(t,s,s,r)}}},function(e,t,r){"use strict";var i={};i.module=angular.module("gmfDataSourceBeingFiltered",[]);i.module.value("gmfDataSourceBeingFiltered",{dataSource:null});t["a"]=i},function(e,t,r){"use strict";var i=r(1);var n=r(69);var a=r(3);var o=r(253);var s=r(121);var l=r(118);var u=r(149);var c=r(248);var f=r(198);var h=r(78);var d=function e(t){o["a"].call(this);this.mapUids_={};this.ngeoLayerHelper_=t};d.$inject=["ngeoLayerHelper"];d.$inject=["ngeoLayerHelper"];a["d"](d,o["a"]);d.prototype.get=function(e){var t=a["c"](e).toString();return t in this.mapUids_?this.ngeoLayerHelper_.getGroupFromMap(e,d.BACKGROUNDLAYERGROUP_NAME).getLayers().item(0):null};d.prototype.set=function(e,t){var r=-200;var o=a["c"](e).toString();var s=this.get(e);if(t!==null){t.setZIndex(r);this.ngeoLayerHelper_.setZIndexToFirstLevelChildren(t,r)}var l=this.ngeoLayerHelper_.getGroupFromMap(e,d.BACKGROUNDLAYERGROUP_NAME);if(s!==null){i["a"].assert(o in this.mapUids_);if(t!==null){l.getLayers().setAt(0,t)}else{l.getLayers().removeAt(0);delete this.mapUids_[o]}}else if(t!==null){l.getLayers().insertAt(0,t);this.mapUids_[o]=true}var u=new n["a"]("change",{current:t,previous:s});this.dispatchEvent(u);return s};d.prototype.getOpacityBgLayer=function(e){var t=a["c"](e).toString();return t in this.mapUids_?this.ngeoLayerHelper_.getGroupFromMap(e,d.BACKGROUNDLAYERGROUP_NAME).getLayers().item(1):null};d.prototype.setOpacityBgLayer=function(e,t){var r=-100;t.setOpacity(0);t.setVisible(true);t.setZIndex(r);this.ngeoLayerHelper_.setZIndexToFirstLevelChildren(t,r);var i=this.ngeoLayerHelper_.getGroupFromMap(e,d.BACKGROUNDLAYERGROUP_NAME);var n=i.getLayers().getArray().indexOf(t);if(n===-1){i.getLayers().push(t)}};d.prototype.updateDimensions=function(e,t){var r=this.get(e);if(r){var n=[r];if(r instanceof s["a"]){n=r.getLayers().getArray()}n.forEach(function(e){i["a"].assertInstanceof(e,l["a"]);if(e){var r=false;var n={};for(var a in e.get("dimensions")){var o=t[a];if(o!==undefined){n[a]=o;r=true}}if(r){var s=e.getSource();if(s instanceof f["a"]){s.updateDimensions(n);s.refresh()}else if(s instanceof c["a"]||s instanceof u["a"]){s.updateParams(n);s.refresh()}}}})}};d.module=angular.module("ngeoBackgroundLayerMgr",[h["a"].module.name]);d.module.service("ngeoBackgroundLayerMgr",d);d.BACKGROUNDLAYERGROUP_NAME="background";t["a"]=d},function(e,t,r){"use strict";var i=Array.prototype.slice;var n=function(e){return e};var a=1,o=2,s=3,l=4,u=1e-6;function c(e){return"translate("+(e+.5)+",0)"}function f(e){return"translate(0,"+(e+.5)+")"}function h(e){return function(t){return+e(t)}}function d(e){var t=Math.max(0,e.bandwidth()-1)/2;if(e.round())t=Math.round(t);return function(r){return+e(r)+t}}function p(){return!this.__axis}function v(e,t){var r=[],v=null,g=null,m=6,y=6,_=3,b=e===a||e===l?-1:1,w=e===l||e===o?"x":"y",S=e===a||e===s?c:f;function C(i){var c=v==null?t.ticks?t.ticks.apply(t,r):t.domain():v,f=g==null?t.tickFormat?t.tickFormat.apply(t,r):n:g,C=Math.max(m,0)+_,x=t.range(),O=+x[0]+.5,T=+x[x.length-1]+.5,E=(t.bandwidth?d:h)(t.copy()),M=i.selection?i.selection():i,j=M.selectAll(".domain").data([null]),A=M.selectAll(".tick").data(c,t).order(),P=A.exit(),k=A.enter().append("g").attr("class","tick"),I=A.select("line"),D=A.select("text");j=j.merge(j.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000"));A=A.merge(k);I=I.merge(k.append("line").attr("stroke","#000").attr(w+"2",b*m));D=D.merge(k.append("text").attr("fill","#000").attr(w,b*C).attr("dy",e===a?"0em":e===s?"0.71em":"0.32em"));if(i!==M){j=j.transition(i);A=A.transition(i);I=I.transition(i);D=D.transition(i);P=P.transition(i).attr("opacity",u).attr("transform",function(e){return isFinite(e=E(e))?S(e):this.getAttribute("transform")});k.attr("opacity",u).attr("transform",function(e){var t=this.parentNode.__axis;return S(t&&isFinite(t=t(e))?t:E(e))})}P.remove();j.attr("d",e===l||e==o?"M"+b*y+","+O+"H0.5V"+T+"H"+b*y:"M"+O+","+b*y+"V0.5H"+T+"V"+b*y);A.attr("opacity",1).attr("transform",function(e){return S(E(e))});I.attr(w+"2",b*m);D.attr(w,b*C).text(f);M.filter(p).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===o?"start":e===l?"end":"middle");M.each(function(){this.__axis=E})}C.scale=function(e){return arguments.length?(t=e,C):t};C.ticks=function(){return r=i.call(arguments),C};C.tickArguments=function(e){return arguments.length?(r=e==null?[]:i.call(e),C):r.slice()};C.tickValues=function(e){return arguments.length?(v=e==null?null:i.call(e),C):v&&v.slice()};C.tickFormat=function(e){return arguments.length?(g=e,C):g};C.tickSize=function(e){return arguments.length?(m=y=+e,C):m};C.tickSizeInner=function(e){return arguments.length?(m=+e,C):m};C.tickSizeOuter=function(e){return arguments.length?(y=+e,C):y};C.tickPadding=function(e){return arguments.length?(_=+e,C):_};return C}function g(e){return v(a,e)}function m(e){return v(o,e)}function y(e){return v(s,e)}function _(e){return v(l,e)}r.d(t,false,function(){return g});r.d(t,false,function(){return m});r.d(t,"a",function(){return y});r.d(t,"b",function(){return _})},function(e,t,r){"use strict";(function(e){var r=function e(t,r){this.$http_=t;this.gmfShortenerCreateUrl_=r};r.$inject=["$http","gmfShortenerCreateUrl"];r.$inject=["$http","gmfShortenerCreateUrl"];r.prototype.getShortUrl=function(e){var t={url:e};if(!this.gmfShortenerCreateUrl_){return{data:{short_url:e},status:200}}return this.postShortUrl_(t)};r.prototype.sendShortUrl=function(e,t,r){var i={url:e,email:t};if(r){i["message"]=r}return this.postShortUrl_(i)};r.prototype.postShortUrl_=function(t){return this.$http_.post(this.gmfShortenerCreateUrl_,e.param(t),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})};r.URL_MAX_LEN=2083;r.URL_PATH_MAX_LEN=2048;r.module=angular.module("gmfShareService",[]);r.module.service("gmfShareService",r);t["a"]=r}).call(this,r(24))},function(e,t,r){"use strict";var i=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var n=1e3*60*60*24;var a=3600;var o=function e(t,r){return typeof t==="string"&&typeof r==="string"&&t.toLowerCase()===r.toLowerCase()};var s=function e(t,r,i){var n=i||"0";var a=t.toString();return a.length<r?e(n+a,r):a};var l=function e(t){var r=void 0,n=void 0;t=t||{};for(r=1;r<arguments.length;r++){n=arguments[r];if(!n){continue}for(var a in n){if(n.hasOwnProperty(a)){if(i(n[a])==="object"){e(t[a],n[a])}else{t[a]=n[a]}}}}return t};var u=function e(t,r){for(var i=0;i<r.length;i++){if(r[i].toLowerCase()===t.toLowerCase()){return i}}return-1};var c={dateSettings:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridiem:["AM","PM"],ordinal:function e(t){var r=t%10,i={1:"st",2:"nd",3:"rd"};return Math.floor(t%100/10)===1||!i[r]?"th":i[r]}},separators:/[ \-+\/\.T:@]/g,validParts:/[dDjlNSwzWFmMntLoYyaABgGhHisueTIOPZcrU]/g,intParts:/[djwNzmnyYhHgGis]/g,tzParts:/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,tzClip:/[^-+\dA-Z]/g};var f=function e(t){var r=this;var i=l(c,t);r.dateSettings=i.dateSettings;r.separators=i.separators;r.validParts=i.validParts;r.intParts=i.intParts;r.tzParts=i.tzParts;r.tzClip=i.tzClip};f.prototype={constructor:f,getMonth:function e(t){var r=this;var i=void 0;i=u(t,r.dateSettings.monthsShort)+1;if(i===0){i=u(t,r.dateSettings.months)+1}return i},parseDate:function e(t,r){var n=this,a={date:null,year:null,month:null,day:null,hour:0,min:0,sec:0},s=n.dateSettings;var l=void 0,u=false,c=false,f=void 0,h=void 0,d=void 0,p=void 0,v=void 0,g=void 0,m=void 0;if(!t){return null}if(t instanceof Date){return t}if(r==="U"){l=parseInt(t);return l?new Date(l*1e3):t}switch(typeof t==="undefined"?"undefined":i(t)){case"number":return new Date(t);case"string":break;default:return null}var y=r.match(n.validParts);if(!y||y.length===0){throw new Error("Invalid date format definition.")}var _=t.replace(n.separators,"\0").split("\0");for(l=0;l<_.length;l++){f=_[l];h=parseInt(f);switch(y[l]){case"y":case"Y":if(h){g=f.length;a.year=g===2?parseInt((h<70?"20":"19")+f):h}else{return null}u=true;break;case"m":case"n":case"M":case"F":if(isNaN(h)){d=n.getMonth(f);if(d>0){a.month=d}else{return null}}else{if(h>=1&&h<=12){a.month=h}else{return null}}u=true;break;case"d":case"j":if(h>=1&&h<=31){a.day=h}else{return null}u=true;break;case"g":case"h":p=y.indexOf("a")>-1?y.indexOf("a"):y.indexOf("A")>-1?y.indexOf("A"):-1;m=_[p];if(p>-1){v=o(m,s.meridiem[0])?0:o(m,s.meridiem[1])?12:-1;if(h>=1&&h<=12&&v>-1){a.hour=h+v-1}else if(h>=0&&h<=23){a.hour=h}}else{if(h>=0&&h<=23){a.hour=h}else{return null}}c=true;break;case"G":case"H":if(h>=0&&h<=23){a.hour=h}else{return null}c=true;break;case"i":if(h>=0&&h<=59){a.min=h}else{return null}c=true;break;case"s":if(h>=0&&h<=59){a.sec=h}else{return null}c=true;break}}if(u===true&&a.year&&a.month&&a.day){a.date=new Date(a.year,a.month-1,a.day,a.hour,a.min,a.sec,0)}else{if(c!==true){return null}a.date=new Date(0,0,0,a.hour,a.min,a.sec,0)}return a.date},guessDate:function e(t,r){if(typeof t!=="string"){return t}var i=this,n=t.replace(i.separators,"\0").split("\0"),a=/^[djmn]/g,o=r.match(i.validParts),s=new Date,l=0;var u=void 0,c=void 0,f=void 0,h=void 0,d=void 0,p=void 0;if(!a.test(o[0])){return t}for(c=0;c<n.length;c++){var v=2;h=n[c];d=parseInt(h.substr(0,2));if(isNaN(d)){return null}switch(c){case 0:if(o[0]==="m"||o[0]==="n"){s.setMonth(d-1)}else{s.setDate(d)}break;case 1:if(o[0]==="m"||o[0]==="n"){s.setDate(d)}else{s.setMonth(d-1)}break;case 2:p=s.getFullYear();u=h.length;v=u<4?u:4;p=parseInt(u<4?p.toString().substr(0,4-u)+h:h.substr(0,4));if(!p){return null}s.setFullYear(p);break;case 3:s.setHours(d);break;case 4:s.setMinutes(d);break;case 5:s.setSeconds(d);break}f=h.substr(v);if(f.length>0){n.splice(c+1,0,f)}}return s},parseFormat:function e(t,r){var i=void 0;var o=this,l=o.dateSettings,u=/\\?(.?)/gi,c=function e(t,r){return i[t]?i[t]():r};i={d:function e(){return s(i.j(),2)},D:function e(){return l.daysShort[i.w()]},j:function e(){return r.getDate()},l:function e(){return l.days[i.w()]},N:function e(){return i.w()||7},w:function e(){return r.getDay()},z:function e(){var t=new Date(i.Y(),i.n()-1,i.j()),r=new Date(i.Y(),0,1);return Math.round((t-r)/n)},W:function e(){var t=new Date(i.Y(),i.n()-1,i.j()-i.N()+3),r=new Date(t.getFullYear(),0,4);return s(1+Math.round((t-r)/n/7),2)},F:function e(){return l.months[r.getMonth()]},m:function e(){return s(i.n(),2)},M:function e(){return l.monthsShort[r.getMonth()]},n:function e(){return r.getMonth()+1},t:function e(){return new Date(i.Y(),i.n(),0).getDate()},L:function e(){var t=i.Y();return t%4===0&&t%100!==0||t%400===0?1:0},o:function e(){var t=i.n(),r=i.W(),n=i.Y();return n+(t===12&&r<9?1:t===1&&r>9?-1:0)},Y:function e(){return r.getFullYear()},y:function e(){return i.Y().toString().slice(-2)},a:function e(){return i.A().toLowerCase()},A:function e(){var t=i.G()<12?0:1;return l.meridiem[t]},B:function e(){var t=r.getUTCHours()*a,i=r.getUTCMinutes()*60,n=r.getUTCSeconds();return s(Math.floor((t+i+n+a)/86.4)%1e3,3)},g:function e(){return i.G()%12||12},G:function e(){return r.getHours()},h:function e(){return s(i.g(),2)},H:function e(){return s(i.G(),2)},i:function e(){return s(r.getMinutes(),2)},s:function e(){return s(r.getSeconds(),2)},u:function e(){return s(r.getMilliseconds()*1e3,6)},e:function e(){var t=/\((.*)\)/.exec(String(r))[1];return t||"Coordinated Universal Time"},I:function e(){var t=new Date(i.Y(),0),r=Date.UTC(i.Y(),0),n=new Date(i.Y(),6),a=Date.UTC(i.Y(),6);return t-r!==n-a?1:0},O:function e(){var t=r.getTimezoneOffset(),i=Math.abs(t);return(t>0?"-":"+")+s(Math.floor(i/60)*100+i%60,4)},P:function e(){var t=i.O();return t.substr(0,3)+":"+t.substr(3,2)},T:function e(){var t=(String(r).match(o.tzParts)||[""]).pop().replace(o.tzClip,"");return t||"UTC"},Z:function e(){return-r.getTimezoneOffset()*60},c:function e(){return"Y-m-d\\TH:i:sP".replace(u,c)},r:function e(){return"D, d M Y H:i:s O".replace(u,c)},U:function e(){return r.getTime()/1e3||0}};return c(t,t)},formatDate:function e(t,r){var i=this;var n=void 0,a=void 0,o=void 0,s=void 0,l=void 0,u="";var c="\\";if(typeof t==="string"){t=i.parseDate(t,r);if(!t){return null}}if(t instanceof Date){o=r.length;for(n=0;n<o;n++){l=r.charAt(n);if(l==="S"||l===c){continue}if(n>0&&r.charAt(n-1)===c){u+=l;continue}s=i.parseFormat(l,t);if(n!==o-1&&i.intParts.test(l)&&r.charAt(n+1)==="S"){a=parseInt(s)||0;s+=i.dateSettings.ordinal(a)}u+=s}return u}return""}};t["a"]=f},function(e,t,r){"use strict";function i(e,t,r,i){while(t<r-i){for(var n=0;n<i;++n){var a=e[t+n];e[t+n]=e[r-i+n];e[r-i+n]=a}t+=i;r-=i}}r.d(t,"a",function(){return a});r.d(t,"b",function(){return o});r.d(t,"c",function(){return s});r.d(t,"d",function(){return l});function n(e,t,r,i){var n=0;var a=e[r-i];var o=e[r-i+1];for(;t<r;t+=i){var s=e[t];var l=e[t+1];n+=(s-a)*(l+o);a=s;o=l}return n>0}function a(e,t,r,i,a){var o=a!==undefined?a:false;for(var s=0,l=r.length;s<l;++s){var u=r[s];var c=n(e,t,u,i);if(s===0){if(o&&c||!o&&!c){return false}}else{if(o&&!c||!o&&c){return false}}t=u}return true}function o(e,t,r,i,n){for(var o=0,s=r.length;o<s;++o){if(!a(e,t,r[o],i,n)){return false}}return true}function s(e,t,r,a,o){var s=o!==undefined?o:false;for(var l=0,u=r.length;l<u;++l){var c=r[l];var f=n(e,t,c,a);var h=l===0?s&&f||!s&&!f:s&&!f||!s&&f;if(h){i(e,t,c,a)}t=c}return t}function l(e,t,r,i,n){for(var a=0,o=r.length;a<o;++a){t=s(e,t,r[a],i,n)}return t}},function(e,t,r){"use strict";var i=r(133);var n=r(3);var a=r(25);var o=r(125);var s=r(102);var l=r(16);var u=function e(t,r,i){s["a"].call(this);var n=i?i:{};this.tileCoord=t;this.state=r;this.interimTile=null;this.key="";this.transition_=n.transition===undefined?250:n.transition;this.transitionStarts_={}};Object(n["d"])(u,s["a"]);u.prototype.changed=function(){this.dispatchEvent(l["a"].CHANGE)};u.prototype.getKey=function(){return this.key+"/"+this.tileCoord};u.prototype.getInterimTile=function(){if(!this.interimTile){return this}var e=this.interimTile;do{if(e.getState()==a["a"].LOADED){return e}e=e.interimTile}while(e);return this};u.prototype.refreshInterimChain=function(){if(!this.interimTile){return}var e=this.interimTile;var t=this;do{if(e.getState()==a["a"].LOADED){e.interimTile=null;break}else if(e.getState()==a["a"].LOADING){t=e}else if(e.getState()==a["a"].IDLE){t.interimTile=e.interimTile}else{t=e}e=t.interimTile}while(e)};u.prototype.getTileCoord=function(){return this.tileCoord};u.prototype.getState=function(){return this.state};u.prototype.setState=function(e){this.state=e;this.changed()};u.prototype.load=function(){};u.prototype.getAlpha=function(e,t){if(!this.transition_){return 1}var r=this.transitionStarts_[e];if(!r){r=t;this.transitionStarts_[e]=r}else if(r===-1){return 1}var i=t-r+1e3/60;if(i>=this.transition_){return 1}return Object(o["a"])(i/this.transition_)};u.prototype.inTransition=function(e){if(!this.transition_){return false}return this.transitionStarts_[e]!==-1};u.prototype.endTransition=function(e){if(this.transition_){this.transitionStarts_[e]=-1}};var c=u;var f=r(65);var h=r(2);var d=function e(t,r,i,n,a,o){c.call(this,t,r,o);this.crossOrigin_=n;this.src_=i;this.image_=new Image;if(n!==null){this.image_.crossOrigin=n}this.imageListenerKeys_=null;this.tileLoadFunction_=a};Object(n["d"])(d,c);d.prototype.disposeInternal=function(){if(this.state==a["a"].LOADING){this.unlistenImage_();this.image_=p()}if(this.interimTile){this.interimTile.dispose()}this.state=a["a"].ABORT;this.changed();c.prototype.disposeInternal.call(this)};d.prototype.getImage=function(){return this.image_};d.prototype.getKey=function(){return this.src_};d.prototype.handleImageError_=function(){this.state=a["a"].ERROR;this.unlistenImage_();this.image_=p();this.changed()};d.prototype.handleImageLoad_=function(){if(this.image_.naturalWidth&&this.image_.naturalHeight){this.state=a["a"].LOADED}else{this.state=a["a"].EMPTY}this.unlistenImage_();this.changed()};d.prototype.load=function(){if(this.state==a["a"].ERROR){this.state=a["a"].IDLE;this.image_=new Image;if(this.crossOrigin_!==null){this.image_.crossOrigin=this.crossOrigin_}}if(this.state==a["a"].IDLE){this.state=a["a"].LOADING;this.changed();this.imageListenerKeys_=[Object(h["b"])(this.image_,l["a"].ERROR,this.handleImageError_,this),Object(h["b"])(this.image_,l["a"].LOAD,this.handleImageLoad_,this)];this.tileLoadFunction_(this,this.src_)}};d.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(h["e"]);this.imageListenerKeys_=null};function p(){var e=Object(f["a"])(1,1);e.fillStyle="rgba(0,0,0,0)";e.fillRect(0,0,1,1);return e.canvas}var v=d;var g=r(394);var m=r(12);var y=r(5);var _=r(22);var b=r(251);var w=r(395);var S=function e(t,r,n,o,s,l,u,f,h,d,p){c.call(this,s,a["a"].IDLE);this.renderEdges_=p!==undefined?p:false;this.pixelRatio_=u;this.gutter_=f;this.canvas_=null;this.sourceTileGrid_=r;this.targetTileGrid_=o;this.wrappedTileCoord_=l?l:s;this.sourceTiles_=[];this.sourcesListenerKeys_=null;this.sourceZ_=0;var v=o.getTileCoordExtent(this.wrappedTileCoord_);var g=this.targetTileGrid_.getExtent();var m=this.sourceTileGrid_.getExtent();var S=g?Object(y["B"])(v,g):v;if(Object(y["u"])(S)===0){this.state=a["a"].EMPTY;return}var C=t.getExtent();if(C){if(!m){m=C}else{m=Object(y["B"])(m,C)}}var x=o.getResolution(this.wrappedTileCoord_[0]);var O=Object(y["x"])(S);var T=Object(b["a"])(t,n,O,x);if(!isFinite(T)||T<=0){this.state=a["a"].EMPTY;return}var E=d!==undefined?d:i["b"];this.triangulation_=new w["a"](t,n,S,m,T*E);if(this.triangulation_.getTriangles().length===0){this.state=a["a"].EMPTY;return}this.sourceZ_=r.getZForResolution(T);var M=this.triangulation_.calculateSourceExtent();if(m){if(t.canWrapX()){M[1]=Object(_["a"])(M[1],m[1],m[3]);M[3]=Object(_["a"])(M[3],m[1],m[3])}else{M=Object(y["B"])(M,m)}}if(!Object(y["u"])(M)){this.state=a["a"].EMPTY}else{var j=r.getTileRangeForExtentAndZ(M,this.sourceZ_);for(var A=j.minX;A<=j.maxX;A++){for(var P=j.minY;P<=j.maxY;P++){var k=h(this.sourceZ_,A,P,u);if(k){this.sourceTiles_.push(k)}}}if(this.sourceTiles_.length===0){this.state=a["a"].EMPTY}}};Object(n["d"])(S,c);S.prototype.disposeInternal=function(){if(this.state==a["a"].LOADING){this.unlistenSources_()}c.prototype.disposeInternal.call(this)};S.prototype.getImage=function(){return this.canvas_};S.prototype.reproject_=function(){var e=[];this.sourceTiles_.forEach(function(t,r,i){if(t&&t.getState()==a["a"].LOADED){e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}}.bind(this));this.sourceTiles_.length=0;if(e.length===0){this.state=a["a"].ERROR}else{var t=this.wrappedTileCoord_[0];var r=this.targetTileGrid_.getTileSize(t);var i=typeof r==="number"?r:r[0];var n=typeof r==="number"?r:r[1];var o=this.targetTileGrid_.getResolution(t);var s=this.sourceTileGrid_.getResolution(this.sourceZ_);var l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Object(b["b"])(i,n,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,e,this.gutter_,this.renderEdges_);this.state=a["a"].LOADED}this.changed()};S.prototype.load=function(){if(this.state==a["a"].IDLE){this.state=a["a"].LOADING;this.changed();var e=0;this.sourcesListenerKeys_=[];this.sourceTiles_.forEach(function(t,r,i){var n=t.getState();if(n==a["a"].IDLE||n==a["a"].LOADING){e++;var o=Object(h["a"])(t,l["a"].CHANGE,function(r){var i=t.getState();if(i==a["a"].LOADED||i==a["a"].ERROR||i==a["a"].EMPTY){Object(h["e"])(o);e--;if(e===0){this.unlistenSources_();this.reproject_()}}},this);this.sourcesListenerKeys_.push(o)}}.bind(this));this.sourceTiles_.forEach(function(e,t,r){var i=e.getState();if(i==a["a"].IDLE){e.load()}});if(e===0){setTimeout(this.reproject_.bind(this),0)}}};S.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(h["e"]);this.sourcesListenerKeys_=null};var C=S;var x=r(205);var O=r(348);var T={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};var E=r(151);var M=function e(t){O["b"].call(this,{attributions:t.attributions,cacheSize:t.cacheSize,extent:t.extent,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition});this.tileLoadFunction=t.tileLoadFunction;this.tileUrlFunction=this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):x["d"];this.urls=null;if(t.urls){this.setUrls(t.urls)}else if(t.url){this.setUrl(t.url)}if(t.tileUrlFunction){this.setTileUrlFunction(t.tileUrlFunction)}this.tileLoadingKeys_={}};Object(n["d"])(M,O["b"]);M.prototype.fixedTileUrlFunction;M.prototype.getTileLoadFunction=function(){return this.tileLoadFunction};M.prototype.getTileUrlFunction=function(){return this.tileUrlFunction};M.prototype.getUrls=function(){return this.urls};M.prototype.handleTileChange=function(e){var t=e.target;var r=Object(n["c"])(t);var i=t.getState();var o=void 0;if(i==a["a"].LOADING){this.tileLoadingKeys_[r]=true;o=T.TILELOADSTART}else if(r in this.tileLoadingKeys_){delete this.tileLoadingKeys_[r];o=i==a["a"].ERROR?T.TILELOADERROR:i==a["a"].LOADED||i==a["a"].ABORT?T.TILELOADEND:undefined}if(o!=undefined){this.dispatchEvent(new O["a"](o,t))}};M.prototype.setTileLoadFunction=function(e){this.tileCache.clear();this.tileLoadFunction=e;this.changed()};M.prototype.setTileUrlFunction=function(e,t){this.tileUrlFunction=e;this.tileCache.pruneExceptNewestZ();if(typeof t!=="undefined"){this.setKey(t)}else{this.changed()}};M.prototype.setUrl=function(e){var t=this.urls=Object(x["c"])(e);this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):Object(x["a"])(t,this.tileGrid),e)};M.prototype.setUrls=function(e){this.urls=e;var t=e.join("\n");this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):Object(x["a"])(e,this.tileGrid),t)};M.prototype.useTile=function(e,t,r){var i=Object(E["d"])(e,t,r);if(this.tileCache.containsKey(i)){this.tileCache.get(i)}};var j=M;var A=r(270);var P=function e(t){j.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,extent:t.extent,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:k,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition});this.crossOrigin=t.crossOrigin!==undefined?t.crossOrigin:null;this.tileClass=t.tileClass!==undefined?t.tileClass:v;this.tileCacheForProjection={};this.tileGridForProjection={};this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold;this.renderReprojectionEdges_=false};Object(n["d"])(P,j);P.prototype.canExpireCache=function(){if(!i["a"]){return j.prototype.canExpireCache.call(this)}if(this.tileCache.canExpireCache()){return true}else{for(var e in this.tileCacheForProjection){if(this.tileCacheForProjection[e].canExpireCache()){return true}}}return false};P.prototype.expireCache=function(e,t){if(!i["a"]){j.prototype.expireCache.call(this,e,t);return}var r=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==r?t:{});for(var n in this.tileCacheForProjection){var a=this.tileCacheForProjection[n];a.expireCache(a==r?t:{})}};P.prototype.getGutter=function(e){if(i["a"]&&this.getProjection()&&e&&!Object(m["e"])(this.getProjection(),e)){return 0}else{return this.getGutterInternal()}};P.prototype.getGutterInternal=function(){return 0};P.prototype.getOpaque=function(e){if(i["a"]&&this.getProjection()&&e&&!Object(m["e"])(this.getProjection(),e)){return false}else{return j.prototype.getOpaque.call(this,e)}};P.prototype.getTileGridForProjection=function(e){if(!i["a"]){return j.prototype.getTileGridForProjection.call(this,e)}var t=this.getProjection();if(this.tileGrid&&(!t||Object(m["e"])(t,e))){return this.tileGrid}else{var r=Object(n["c"])(e).toString();if(!(r in this.tileGridForProjection)){this.tileGridForProjection[r]=Object(A["c"])(e)}return this.tileGridForProjection[r]}};P.prototype.getTileCacheForProjection=function(e){if(!i["a"]){return j.prototype.getTileCacheForProjection.call(this,e)}var t=this.getProjection();if(!t||Object(m["e"])(t,e)){return this.tileCache}else{var r=Object(n["c"])(e).toString();if(!(r in this.tileCacheForProjection)){this.tileCacheForProjection[r]=new g["a"](this.tileCache.highWaterMark)}return this.tileCacheForProjection[r]}};P.prototype.createTile_=function(e,t,r,i,n,o){var s=[e,t,r];var u=this.getTileCoordForTileUrlFunction(s,n);var c=u?this.tileUrlFunction(u,i,n):undefined;var f=new this.tileClass(s,c!==undefined?a["a"].IDLE:a["a"].EMPTY,c!==undefined?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);f.key=o;Object(h["a"])(f,l["a"].CHANGE,this.handleTileChange,this);return f};P.prototype.getTile=function(e,t,r,n,a){var o=this.getProjection();if(!i["a"]||!o||!a||Object(m["e"])(o,a)){return this.getTileInternal(e,t,r,n,o||a)}else{var s=this.getTileCacheForProjection(a);var l=[e,t,r];var u=void 0;var c=Object(E["c"])(l);if(s.containsKey(c)){u=s.get(c)}var f=this.getKey();if(u&&u.key==f){return u}else{var h=this.getTileGridForProjection(o);var d=this.getTileGridForProjection(a);var p=this.getTileCoordForTileUrlFunction(l,a);var v=new C(o,h,a,d,l,p,this.getTilePixelRatio(n),this.getGutterInternal(),function(e,t,r,i){return this.getTileInternal(e,t,r,i,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);v.key=f;if(u){v.interimTile=u;v.refreshInterimChain();s.replace(c,v)}else{s.set(c,v)}return v}}};P.prototype.getTileInternal=function(e,t,r,i,n){var o=null;var s=Object(E["d"])(e,t,r);var l=this.getKey();if(!this.tileCache.containsKey(s)){o=this.createTile_(e,t,r,i,n,l);this.tileCache.set(s,o)}else{o=this.tileCache.get(s);if(o.key!=l){var u=o;o=this.createTile_(e,t,r,i,n,l);if(u.getState()==a["a"].IDLE){o.interimTile=u.interimTile}else{o.interimTile=u}o.refreshInterimChain();this.tileCache.replace(s,o)}}return o};P.prototype.setRenderReprojectionEdges=function(e){if(!i["a"]||this.renderReprojectionEdges_==e){return}this.renderReprojectionEdges_=e;for(var t in this.tileCacheForProjection){this.tileCacheForProjection[t].clear()}this.changed()};P.prototype.setTileGridForProjection=function(e,t){if(i["a"]){var r=Object(m["g"])(e);if(r){var a=Object(n["c"])(r).toString();if(!(a in this.tileGridForProjection)){this.tileGridForProjection[a]=t}}}};function k(e,t){e.getImage().src=t}var I=t["a"]=P},function(e,t,r){"use strict";r.d(t,"a",function(){return a});r.d(t,"b",function(){return o});r.d(t,"e",function(){return u});r.d(t,"c",function(){return f});r.d(t,"d",function(){return h});var i=r(22);function n(e,t,r,i,n,o,s){var u=s!==undefined?s:[];if(!o){r=l(e,t,r,i,n,u,0);e=u;t=0;i=2}u.length=a(e,t,r,i,n,u,0);return u}function a(e,t,r,n,a,o,s){var l=(r-t)/n;if(l<3){for(;t<r;t+=n){o[s++]=e[t];o[s++]=e[t+1]}return s}var u=new Array(l);u[0]=1;u[l-1]=1;var c=[t,r-n];var f=0;while(c.length>0){var h=c.pop();var d=c.pop();var p=0;var v=e[d];var g=e[d+1];var m=e[h];var y=e[h+1];for(var _=d+n;_<h;_+=n){var b=e[_];var w=e[_+1];var S=Object(i["g"])(b,w,v,g,m,y);if(S>p){f=_;p=S}}if(p>a){u[(f-t)/n]=1;if(d+n<f){c.push(d,f)}if(f+n<h){c.push(f,h)}}}for(var C=0;C<l;++C){if(u[C]){o[s++]=e[t+C*n];o[s++]=e[t+C*n+1]}}return s}function o(e,t,r,i,n,o,s,l){for(var u=0,c=r.length;u<c;++u){var f=r[u];s=a(e,t,f,i,n,o,s);l.push(s);t=f}return s}function s(e,t,r,i,n,a,s,l){for(var u=0,c=r.length;u<c;++u){var f=r[u];var h=[];s=o(e,t,f,i,n,a,s,h);l.push(h);t=f[f.length-1]}return s}function l(e,t,r,n,a,o,s){if(r<=t+n){for(;t<r;t+=n){o[s++]=e[t];o[s++]=e[t+1]}return s}var l=e[t];var u=e[t+1];o[s++]=l;o[s++]=u;var c=l;var f=u;for(t+=n;t<r;t+=n){c=e[t];f=e[t+1];if(Object(i["f"])(l,u,c,f)>a){o[s++]=c;o[s++]=f;l=c;u=f}}if(c!=l||f!=u){o[s++]=c;o[s++]=f}return s}function u(e,t){return t*Math.round(e/t)}function c(e,t,r,i,n,a,o){if(t==r){return o}var s=u(e[t],n);var l=u(e[t+1],n);t+=i;a[o++]=s;a[o++]=l;var c=void 0,f=void 0;do{c=u(e[t],n);f=u(e[t+1],n);t+=i;if(t==r){a[o++]=c;a[o++]=f;return o}}while(c==s&&f==l);while(t<r){var h=u(e[t],n);var d=u(e[t+1],n);t+=i;if(h==c&&d==f){continue}var p=c-s;var v=f-l;var g=h-s;var m=d-l;if(p*m==v*g&&(p<0&&g<p||p==g||p>0&&g>p)&&(v<0&&m<v||v==m||v>0&&m>v)){c=h;f=d;continue}a[o++]=c;a[o++]=f;s=c;l=f;c=h;f=d}a[o++]=c;a[o++]=f;return o}function f(e,t,r,i,n,a,o,s){for(var l=0,u=r.length;l<u;++l){var f=r[l];o=c(e,t,f,i,n,a,o);s.push(o);t=f}return o}function h(e,t,r,i,n,a,o,s){for(var l=0,u=r.length;l<u;++l){var c=r[l];var h=[];o=f(e,t,c,i,n,a,o,h);s.push(h);t=c[c.length-1]}return o}},function(e,t,r){"use strict";t["a"]={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"}},function(e,t,r){"use strict";var i=r(250);var n=r(3);var a=r(39);var o=r(5);var s=r(11);var l=r(22);var u=r(12);var c=r(251);var f=r(122);var h=r(245);var d=r(206);var p=r(151);var v=r(153);var g=r(172);var m=function e(t){var r=t||{};var i=r.params||{};var n="TRANSPARENT"in i?i["TRANSPARENT"]:true;h["a"].call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,opaque:!n,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileClass:r.tileClass,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction,url:r.url,urls:r.urls,wrapX:r.wrapX!==undefined?r.wrapX:true,transition:r.transition});this.gutter_=r.gutter!==undefined?r.gutter:0;this.params_=i;this.v13_=true;this.serverType_=r.serverType;this.hidpi_=r.hidpi!==undefined?r.hidpi:true;this.tmpExtent_=Object(o["j"])();this.updateV13_();this.setKey(this.getKeyForParams_())};Object(n["d"])(m,h["a"]);m.prototype.getGetFeatureInfoUrl=function(e,t,r,n){var a=Object(u["g"])(r);var l=this.getProjection();var h=this.getTileGrid();if(!h){h=this.getTileGridForProjection(a)}var d=h.getTileCoordForCoordAndResolution(e,t);if(h.getResolutions().length<=d[0]){return undefined}var p=h.getResolution(d[0]);var v=h.getTileCoordExtent(d,this.tmpExtent_);var g=Object(f["d"])(h.getTileSize(d[0]),this.tmpSize);var m=this.gutter_;if(m!==0){g=Object(f["a"])(g,m,this.tmpSize);v=Object(o["c"])(v,p*m,v)}if(l&&l!==a){p=Object(c["a"])(l,a,e,p);v=Object(u["n"])(v,a,l);e=Object(u["m"])(e,a,l)}var y={SERVICE:"WMS",VERSION:i["a"],REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:true,QUERY_LAYERS:this.params_["LAYERS"]};Object(s["a"])(y,this.params_,n);var _=Math.floor((e[0]-v[0])/p);var b=Math.floor((v[3]-e[1])/p);y[this.v13_?"I":"X"]=_;y[this.v13_?"J":"Y"]=b;return this.getRequestUrl_(d,g,v,1,l||a,y)};m.prototype.getGutterInternal=function(){return this.gutter_};m.prototype.getParams=function(){return this.params_};m.prototype.getRequestUrl_=function(e,t,r,i,n,o){var s=this.urls;if(!s){return undefined}o["WIDTH"]=t[0];o["HEIGHT"]=t[1];o[this.v13_?"CRS":"SRS"]=n.getCode();if(!("STYLES"in this.params_)){o["STYLES"]=""}if(i!=1){switch(this.serverType_){case d["a"].GEOSERVER:var u=90*i+.5|0;if("FORMAT_OPTIONS"in o){o["FORMAT_OPTIONS"]+=";dpi:"+u}else{o["FORMAT_OPTIONS"]="dpi:"+u}break;case d["a"].MAPSERVER:o["MAP_RESOLUTION"]=90*i;break;case d["a"].CARMENTA_SERVER:case d["a"].QGIS:o["DPI"]=90*i;break;default:Object(a["a"])(false,52);break}}var c=n.getAxisOrientation();var f=r;if(this.v13_&&c.substr(0,2)=="ne"){var h=void 0;h=r[0];f[0]=r[1];f[1]=h;h=r[2];f[2]=r[3];f[3]=h}o["BBOX"]=f.join(",");var v=void 0;if(s.length==1){v=s[0]}else{var m=Object(l["d"])(Object(p["e"])(e),s.length);v=s[m]}return Object(g["a"])(v,o)};m.prototype.getTilePixelRatio=function(e){return!this.hidpi_||this.serverType_===undefined?1:e};m.prototype.getKeyForParams_=function(){var e=0;var t=[];for(var r in this.params_){t[e++]=r+"-"+this.params_[r]}return t.join("/")};m.prototype.fixedTileUrlFunction=function(e,t,r){var n=this.getTileGrid();if(!n){n=this.getTileGridForProjection(r)}if(n.getResolutions().length<=e[0]){return undefined}if(t!=1&&(!this.hidpi_||this.serverType_===undefined)){t=1}var a=n.getResolution(e[0]);var l=n.getTileCoordExtent(e,this.tmpExtent_);var u=Object(f["d"])(n.getTileSize(e[0]),this.tmpSize);var c=this.gutter_;if(c!==0){u=Object(f["a"])(u,c,this.tmpSize);l=Object(o["c"])(l,a*c,l)}if(t!=1){u=Object(f["c"])(u,t,this.tmpSize)}var h={SERVICE:"WMS",VERSION:i["a"],REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:true};Object(s["a"])(h,this.params_);return this.getRequestUrl_(e,u,l,t,r,h)};m.prototype.updateParams=function(e){Object(s["a"])(this.params_,e);this.updateV13_();this.setKey(this.getKeyForParams_())};m.prototype.updateV13_=function(){var e=this.params_["VERSION"]||i["a"];this.v13_=Object(v["a"])(e,"1.3")>=0};t["a"]=m},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var i="http://www.w3.org/1999/xlink";function n(e){return e.getAttributeNS(i,"href")}},function(e,t,r){"use strict";r.d(t,"a",function(){return i});var i="1.3.0"},function(e,t,r){"use strict";r.d(t,"a",function(){return s});r.d(t,"b",function(){return u});var i=r(65);var n=r(5);var a=r(22);var o=r(12);function s(e,t,r,i){var a=Object(o["m"])(r,t,e);var s=Object(o["h"])(t,i,r);var l=t.getMetersPerUnit();if(l!==undefined){s*=l}var u=e.getMetersPerUnit();if(u!==undefined){s/=u}var c=e.getExtent();if(!c||Object(n["f"])(c,a)){var f=Object(o["h"])(e,s,a)/s;if(isFinite(f)&&f>0){s/=f}}return s}function l(e,t,r,i){var n=r-e;var a=i-t;var o=Math.sqrt(n*n+a*a);return[Math.round(r+n/o),Math.round(i+a/o)]}function u(e,t,r,o,s,u,c,f,h,d,p){var v=Object(i["a"])(Math.round(r*e),Math.round(r*t));if(h.length===0){return v.canvas}v.scale(r,r);var g=Object(n["j"])();h.forEach(function(e,t,r){Object(n["q"])(g,e.extent)});var m=Object(n["E"])(g);var y=Object(n["A"])(g);var _=Object(i["a"])(Math.round(r*m/o),Math.round(r*y/o));var b=r/o;h.forEach(function(e,t,r){var i=e.extent[0]-g[0];var a=-(e.extent[3]-g[3]);var o=Object(n["E"])(e.extent);var s=Object(n["A"])(e.extent);_.drawImage(e.image,d,d,e.image.width-2*d,e.image.height-2*d,i*b,a*b,o*b,s*b)});var w=Object(n["C"])(c);f.getTriangles().forEach(function(e,t,i){var n=e.source;var s=e.target;var c=n[0][0],f=n[0][1];var h=n[1][0],d=n[1][1];var p=n[2][0],m=n[2][1];var y=(s[0][0]-w[0])/u;var b=-(s[0][1]-w[1])/u;var S=(s[1][0]-w[0])/u;var C=-(s[1][1]-w[1])/u;var x=(s[2][0]-w[0])/u;var O=-(s[2][1]-w[1])/u;var T=c;var E=f;c=0;f=0;h-=T;d-=E;p-=T;m-=E;var M=[[h,d,0,0,S-y],[p,m,0,0,x-y],[0,0,h,d,C-b],[0,0,p,m,O-b]];var j=Object(a["e"])(M);if(!j){return}v.save();v.beginPath();var A=(y+S+x)/3;var P=(b+C+O)/3;var k=l(A,P,y,b);var I=l(A,P,S,C);var D=l(A,P,x,O);v.moveTo(I[0],I[1]);v.lineTo(k[0],k[1]);v.lineTo(D[0],D[1]);v.clip();v.transform(j[0],j[2],j[1],j[3],y,b);v.translate(g[0]-T,g[3]-E);v.scale(o/r,-o/r);v.drawImage(_.canvas,0,0);v.restore()});if(p){v.save();v.strokeStyle="black";v.lineWidth=1;f.getTriangles().forEach(function(e,t,r){var i=e.target;var n=(i[0][0]-w[0])/u;var a=-(i[0][1]-w[1])/u;var o=(i[1][0]-w[0])/u;var s=-(i[1][1]-w[1])/u;var l=(i[2][0]-w[0])/u;var c=-(i[2][1]-w[1])/u;v.beginPath();v.moveTo(o,s);v.lineTo(n,a);v.lineTo(l,c);v.closePath();v.stroke()});v.restore()}return v.canvas}},function(e,t,r){"use strict";t["a"]={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"}},function(e,t,r){"use strict";var i=r(3);var n=r(2);var a=r(102);var o=r(16);var s=function e(){a["a"].call(this);this.revision_=0};Object(i["d"])(s,a["a"]);function l(e){if(Array.isArray(e)){for(var t=0,r=e.length;t<r;++t){Object(n["e"])(e[t])}}else{Object(n["e"])(e)}}s.prototype.changed=function(){++this.revision_;this.dispatchEvent(o["a"].CHANGE)};s.prototype.dispatchEvent;s.prototype.getRevision=function(){return this.revision_};s.prototype.on=function(e,t){if(Array.isArray(e)){var r=e.length;var i=new Array(r);for(var a=0;a<r;++a){i[a]=Object(n["a"])(this,e[a],t)}return i}else{return Object(n["a"])(this,e,t)}};s.prototype.once=function(e,t){if(Array.isArray(e)){var r=e.length;var i=new Array(r);for(var a=0;a<r;++a){i[a]=Object(n["b"])(this,e[a],t)}return i}else{return Object(n["b"])(this,e,t)}};s.prototype.un=function(e,t){if(Array.isArray(e)){for(var r=0,i=e.length;r<i;++r){Object(n["c"])(this,e[r],t)}return}else{Object(n["c"])(this,e,t)}};t["a"]=s},function(e,t,r){"use strict";var i=r(3);var n=r(36);var a=r(44);var o=r(12);var s=r(252);var l=function e(t){a["a"].call(this);this.projection_=Object(o["g"])(t.projection);this.attributions_=this.adaptAttributions_(t.attributions);this.state_=t.state!==undefined?t.state:s["a"].READY;this.wrapX_=t.wrapX!==undefined?t.wrapX:false};Object(i["d"])(l,a["a"]);l.prototype.adaptAttributions_=function(e){if(!e){return null}if(Array.isArray(e)){return function(t){return e}}if(typeof e==="function"){return e}return function(t){return[e]}};l.prototype.forEachFeatureAtCoordinate=n["c"];l.prototype.getAttributions=function(){return this.attributions_};l.prototype.getProjection=function(){return this.projection_};l.prototype.getResolutions=function(){};l.prototype.getState=function(){return this.state_};l.prototype.getWrapX=function(){return this.wrapX_};l.prototype.refresh=function(){this.changed()};l.prototype.setAttributions=function(e){this.attributions_=this.adaptAttributions_(e);this.changed()};l.prototype.setState=function(e){this.state_=e;this.changed()};t["a"]=l},function(e,t,r){var i,n,a;
/*!
 * jQuery UI Tooltip 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/*!
 * jQuery UI Tooltip 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(o){if(true){!(n=[r(24),r(349),r(447),r(446),r(103),r(224)],i=o,a=typeof i==="function"?i.apply(t,n):i,a!==undefined&&(e.exports=a))}else{}})(function(e){e.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:true,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:true,track:false,close:null,open:null},_addDescribedBy:function(t,r){var i=(t.attr("aria-describedby")||"").split(/\s+/);i.push(r);t.data("ui-tooltip-id",r).attr("aria-describedby",e.trim(i.join(" ")))},_removeDescribedBy:function(t){var r=t.data("ui-tooltip-id"),i=(t.attr("aria-describedby")||"").split(/\s+/),n=e.inArray(r,i);if(n!==-1){i.splice(n,1)}t.removeData("ui-tooltip-id");i=e.trim(i.join(" "));if(i){t.attr("aria-describedby",i)}else{t.removeAttr("aria-describedby")}},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body);this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible");this.disabledTitles=e([])},_setOption:function(t,r){var i=this;this._super(t,r);if(t==="content"){e.each(this.tooltips,function(e,t){i._updateContent(t.element)})}},_setOptionDisabled:function(e){this[e?"_disable":"_enable"]()},_disable:function(){var t=this;e.each(this.tooltips,function(r,i){var n=e.Event("blur");n.target=n.currentTarget=i.element[0];t.close(n,true)});this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var t=e(this);if(t.is("[title]")){return t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")}}))},_enable:function(){this.disabledTitles.each(function(){var t=e(this);if(t.data("ui-tooltip-title")){t.attr("title",t.data("ui-tooltip-title"))}});this.disabledTitles=e([])},open:function(t){var r=this,i=e(t?t.target:this.element).closest(this.options.items);if(!i.length||i.data("ui-tooltip-id")){return}if(i.attr("title")){i.data("ui-tooltip-title",i.attr("title"))}i.data("ui-tooltip-open",true);if(t&&t.type==="mouseover"){i.parents().each(function(){var t=e(this),i;if(t.data("ui-tooltip-open")){i=e.Event("blur");i.target=i.currentTarget=this;r.close(i,true)}if(t.attr("title")){t.uniqueId();r.parents[this.id]={element:this,title:t.attr("title")};t.attr("title","")}})}this._registerCloseHandlers(t,i);this._updateContent(i,t)},_updateContent:function(e,t){var r,i=this.options.content,n=this,a=t?t.type:null;if(typeof i==="string"||i.nodeType||i.jquery){return this._open(t,e,i)}r=i.call(e[0],function(r){n._delay(function(){if(!e.data("ui-tooltip-open")){return}if(t){t.type=a}this._open(t,e,r)})});if(r){this._open(t,e,r)}},_open:function(t,r,i){var n,a,o,s,l=e.extend({},this.options.position);if(!i){return}n=this._find(r);if(n){n.tooltip.find(".ui-tooltip-content").html(i);return}if(r.is("[title]")){if(t&&t.type==="mouseover"){r.attr("title","")}else{r.removeAttr("title")}}n=this._tooltip(r);a=n.tooltip;this._addDescribedBy(r,a.attr("id"));a.find(".ui-tooltip-content").html(i);this.liveRegion.children().hide();s=e("<div>").html(a.find(".ui-tooltip-content").html());s.removeAttr("name").find("[name]").removeAttr("name");s.removeAttr("id").find("[id]").removeAttr("id");s.appendTo(this.liveRegion);function u(e){l.of=e;if(a.is(":hidden")){return}a.position(l)}if(this.options.track&&t&&/^mouse/.test(t.type)){this._on(this.document,{mousemove:u});u(t)}else{a.position(e.extend({of:r},this.options.position))}a.hide();this._show(a,this.options.show);if(this.options.track&&this.options.show&&this.options.show.delay){o=this.delayedShow=setInterval(function(){if(a.is(":visible")){u(l.of);clearInterval(o)}},e.fx.interval)}this._trigger("open",t,{tooltip:a})},_registerCloseHandlers:function(t,r){var i={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var i=e.Event(t);i.currentTarget=r[0];this.close(i,true)}}};if(r[0]!==this.element[0]){i.remove=function(){this._removeTooltip(this._find(r).tooltip)}}if(!t||t.type==="mouseover"){i.mouseleave="close"}if(!t||t.type==="focusin"){i.focusout="close"}this._on(true,r,i)},close:function(t){var r,i=this,n=e(t?t.currentTarget:this.element),a=this._find(n);if(!a){n.removeData("ui-tooltip-open");return}r=a.tooltip;if(a.closing){return}clearInterval(this.delayedShow);if(n.data("ui-tooltip-title")&&!n.attr("title")){n.attr("title",n.data("ui-tooltip-title"))}this._removeDescribedBy(n);a.hiding=true;r.stop(true);this._hide(r,this.options.hide,function(){i._removeTooltip(e(this))});n.removeData("ui-tooltip-open");this._off(n,"mouseleave focusout keyup");if(n[0]!==this.element[0]){this._off(n,"remove")}this._off(this.document,"mousemove");if(t&&t.type==="mouseleave"){e.each(this.parents,function(t,r){e(r.element).attr("title",r.title);delete i.parents[t]})}a.closing=true;this._trigger("close",t,{tooltip:r});if(!a.hiding){a.closing=false}},_tooltip:function(t){var r=e("<div>").attr("role","tooltip"),i=e("<div>").appendTo(r),n=r.uniqueId().attr("id");this._addClass(i,"ui-tooltip-content");this._addClass(r,"ui-tooltip","ui-widget ui-widget-content");r.appendTo(this._appendTo(t));return this.tooltips[n]={element:t,tooltip:r}},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(e){e.remove();delete this.tooltips[e.attr("id")]},_appendTo:function(e){var t=e.closest(".ui-front, dialog");if(!t.length){t=this.document[0].body}return t},_destroy:function(){var t=this;e.each(this.tooltips,function(r,i){var n=e.Event("blur"),a=i.element;n.target=n.currentTarget=a[0];t.close(n,true);e("#"+r).remove();if(a.data("ui-tooltip-title")){if(!a.attr("title")){a.attr("title",a.data("ui-tooltip-title"))}a.removeData("ui-tooltip-title")}});this.liveRegion.remove()}});if(e.uiBackCompat!==false){e.widget("ui.tooltip",e.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var e=this._superApply(arguments);if(this.options.tooltipClass){e.tooltip.addClass(this.options.tooltipClass)}return e}})}return e.ui.tooltip})},function(e,t,r){var i,n,a;
/*!
 * jQuery UI Datepicker 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/*!
 * jQuery UI Datepicker 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(o){if(true){!(n=[r(24),r(103),r(349)],i=o,a=typeof i==="function"?i.apply(t,n):i,a!==undefined&&(e.exports=a))}else{}})(function(e){e.extend(e.ui,{datepicker:{version:"1.12.1"}});var t;function r(e){var t,r;while(e.length&&e[0]!==document){t=e.css("position");if(t==="absolute"||t==="relative"||t==="fixed"){r=parseInt(e.css("zIndex"),10);if(!isNaN(r)&&r!==0){return r}}e=e.parent()}return 0}function i(){this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};e.extend(this._defaults,this.regional[""]);this.regional.en=e.extend(true,{},this.regional[""]);this.regional["en-US"]=e.extend(true,{},this.regional.en);this.dpDiv=n(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}e.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){o(this._defaults,e||{});return this},_attachDatepicker:function(t,r){var i,n,a;i=t.nodeName.toLowerCase();n=i==="div"||i==="span";if(!t.id){this.uuid+=1;t.id="dp"+this.uuid}a=this._newInst(e(t),n);a.settings=e.extend({},r||{});if(i==="input"){this._connectDatepicker(t,a)}else if(n){this._inlineDatepicker(t,a)}},_newInst:function(t,r){var i=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:i,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:r,dpDiv:!r?this.dpDiv:n(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}},_connectDatepicker:function(t,r){var i=e(t);r.append=e([]);r.trigger=e([]);if(i.hasClass(this.markerClassName)){return}this._attachments(i,r);i.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp);this._autoSize(r);e.data(t,"datepicker",r);if(r.settings.disabled){this._disableDatepicker(t)}},_attachments:function(t,r){var i,n,a,o=this._get(r,"appendText"),s=this._get(r,"isRTL");if(r.append){r.append.remove()}if(o){r.append=e("<span class='"+this._appendClass+"'>"+o+"</span>");t[s?"before":"after"](r.append)}t.off("focus",this._showDatepicker);if(r.trigger){r.trigger.remove()}i=this._get(r,"showOn");if(i==="focus"||i==="both"){t.on("focus",this._showDatepicker)}if(i==="button"||i==="both"){n=this._get(r,"buttonText");a=this._get(r,"buttonImage");r.trigger=e(this._get(r,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:a,alt:n,title:n}):e("<button type='button'></button>").addClass(this._triggerClass).html(!a?n:e("<img/>").attr({src:a,alt:n,title:n})));t[s?"before":"after"](r.trigger);r.trigger.on("click",function(){if(e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]){e.datepicker._hideDatepicker()}else if(e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]){e.datepicker._hideDatepicker();e.datepicker._showDatepicker(t[0])}else{e.datepicker._showDatepicker(t[0])}return false})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,r,i,n,a=new Date(2009,12-1,20),o=this._get(e,"dateFormat");if(o.match(/[DM]/)){t=function(e){r=0;i=0;for(n=0;n<e.length;n++){if(e[n].length>r){r=e[n].length;i=n}}return i};a.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort")));a.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())}e.input.attr("size",this._formatDate(e,a).length)}},_inlineDatepicker:function(t,r){var i=e(t);if(i.hasClass(this.markerClassName)){return}i.addClass(this.markerClassName).append(r.dpDiv);e.data(t,"datepicker",r);this._setDate(r,this._getDefaultDate(r),true);this._updateDatepicker(r);this._updateAlternate(r);if(r.settings.disabled){this._disableDatepicker(t)}r.dpDiv.css("display","block")},_dialogDatepicker:function(t,r,i,n,a){var s,l,u,c,f,h=this._dialogInst;if(!h){this.uuid+=1;s="dp"+this.uuid;this._dialogInput=e("<input type='text' id='"+s+"' style='position: absolute; top: -100px; width: 0px;'/>");this._dialogInput.on("keydown",this._doKeyDown);e("body").append(this._dialogInput);h=this._dialogInst=this._newInst(this._dialogInput,false);h.settings={};e.data(this._dialogInput[0],"datepicker",h)}o(h.settings,n||{});r=r&&r.constructor===Date?this._formatDate(h,r):r;this._dialogInput.val(r);this._pos=a?a.length?a:[a.pageX,a.pageY]:null;if(!this._pos){l=document.documentElement.clientWidth;u=document.documentElement.clientHeight;c=document.documentElement.scrollLeft||document.body.scrollLeft;f=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[l/2-100+c,u/2-150+f]}this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");h.settings.onSelect=i;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if(e.blockUI){e.blockUI(this.dpDiv)}e.data(this._dialogInput[0],"datepicker",h);return this},_destroyDatepicker:function(r){var i,n=e(r),a=e.data(r,"datepicker");if(!n.hasClass(this.markerClassName)){return}i=r.nodeName.toLowerCase();e.removeData(r,"datepicker");if(i==="input"){a.append.remove();a.trigger.remove();n.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)}else if(i==="div"||i==="span"){n.removeClass(this.markerClassName).empty()}if(t===a){t=null}},_enableDatepicker:function(t){var r,i,n=e(t),a=e.data(t,"datepicker");if(!n.hasClass(this.markerClassName)){return}r=t.nodeName.toLowerCase();if(r==="input"){t.disabled=false;a.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else if(r==="div"||r==="span"){i=n.children("."+this._inlineClass);i.children().removeClass("ui-state-disabled");i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",false)}this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e})},_disableDatepicker:function(t){var r,i,n=e(t),a=e.data(t,"datepicker");if(!n.hasClass(this.markerClassName)){return}r=t.nodeName.toLowerCase();if(r==="input"){t.disabled=true;a.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else if(r==="div"||r==="span"){i=n.children("."+this._inlineClass);i.children().addClass("ui-state-disabled");i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",true)}this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e});this._disabledInputs[this._disabledInputs.length]=t},_isDisabledDatepicker:function(e){if(!e){return false}for(var t=0;t<this._disabledInputs.length;t++){if(this._disabledInputs[t]===e){return true}}return false},_getInst:function(t){try{return e.data(t,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,r,i){var n,a,s,l,u=this._getInst(t);if(arguments.length===2&&typeof r==="string"){return r==="defaults"?e.extend({},e.datepicker._defaults):u?r==="all"?e.extend({},u.settings):this._get(u,r):null}n=r||{};if(typeof r==="string"){n={};n[r]=i}if(u){if(this._curInst===u){this._hideDatepicker()}a=this._getDateDatepicker(t,true);s=this._getMinMaxDate(u,"min");l=this._getMinMaxDate(u,"max");o(u.settings,n);if(s!==null&&n.dateFormat!==undefined&&n.minDate===undefined){u.settings.minDate=this._formatDate(u,s)}if(l!==null&&n.dateFormat!==undefined&&n.maxDate===undefined){u.settings.maxDate=this._formatDate(u,l)}if("disabled"in n){if(n.disabled){this._disableDatepicker(t)}else{this._enableDatepicker(t)}}this._attachments(e(t),u);this._autoSize(u);this._setDate(u,a);this._updateAlternate(u);this._updateDatepicker(u)}},_changeDatepicker:function(e,t,r){this._optionDatepicker(e,t,r)},_refreshDatepicker:function(e){var t=this._getInst(e);if(t){this._updateDatepicker(t)}},_setDateDatepicker:function(e,t){var r=this._getInst(e);if(r){this._setDate(r,t);this._updateDatepicker(r);this._updateAlternate(r)}},_getDateDatepicker:function(e,t){var r=this._getInst(e);if(r&&!r.inline){this._setDateFromField(r,t)}return r?this._getDate(r):null},_doKeyDown:function(t){var r,i,n,a=e.datepicker._getInst(t.target),o=true,s=a.dpDiv.is(".ui-datepicker-rtl");a._keyEvent=true;if(e.datepicker._datepickerShowing){switch(t.keyCode){case 9:e.datepicker._hideDatepicker();o=false;break;case 13:n=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",a.dpDiv);if(n[0]){e.datepicker._selectDay(t.target,a.selectedMonth,a.selectedYear,n[0])}r=e.datepicker._get(a,"onSelect");if(r){i=e.datepicker._formatDate(a);r.apply(a.input?a.input[0]:null,[i,a])}else{e.datepicker._hideDatepicker()}return false;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 35:if(t.ctrlKey||t.metaKey){e.datepicker._clearDate(t.target)}o=t.ctrlKey||t.metaKey;break;case 36:if(t.ctrlKey||t.metaKey){e.datepicker._gotoToday(t.target)}o=t.ctrlKey||t.metaKey;break;case 37:if(t.ctrlKey||t.metaKey){e.datepicker._adjustDate(t.target,s?+1:-1,"D")}o=t.ctrlKey||t.metaKey;if(t.originalEvent.altKey){e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M")}break;case 38:if(t.ctrlKey||t.metaKey){e.datepicker._adjustDate(t.target,-7,"D")}o=t.ctrlKey||t.metaKey;break;case 39:if(t.ctrlKey||t.metaKey){e.datepicker._adjustDate(t.target,s?-1:+1,"D")}o=t.ctrlKey||t.metaKey;if(t.originalEvent.altKey){e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M")}break;case 40:if(t.ctrlKey||t.metaKey){e.datepicker._adjustDate(t.target,+7,"D")}o=t.ctrlKey||t.metaKey;break;default:o=false}}else if(t.keyCode===36&&t.ctrlKey){e.datepicker._showDatepicker(this)}else{o=false}if(o){t.preventDefault();t.stopPropagation()}},_doKeyPress:function(t){var r,i,n=e.datepicker._getInst(t.target);if(e.datepicker._get(n,"constrainInput")){r=e.datepicker._possibleChars(e.datepicker._get(n,"dateFormat"));i=String.fromCharCode(t.charCode==null?t.keyCode:t.charCode);return t.ctrlKey||t.metaKey||(i<" "||!r||r.indexOf(i)>-1)}},_doKeyUp:function(t){var r,i=e.datepicker._getInst(t.target);if(i.input.val()!==i.lastVal){try{r=e.datepicker.parseDate(e.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,e.datepicker._getFormatConfig(i));if(r){e.datepicker._setDateFromField(i);e.datepicker._updateAlternate(i);e.datepicker._updateDatepicker(i)}}catch(e){}}return true},_showDatepicker:function(t){t=t.target||t;if(t.nodeName.toLowerCase()!=="input"){t=e("input",t.parentNode)[0]}if(e.datepicker._isDisabledDatepicker(t)||e.datepicker._lastInput===t){return}var i,n,a,s,l,u,c;i=e.datepicker._getInst(t);if(e.datepicker._curInst&&e.datepicker._curInst!==i){e.datepicker._curInst.dpDiv.stop(true,true);if(i&&e.datepicker._datepickerShowing){e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])}}n=e.datepicker._get(i,"beforeShow");a=n?n.apply(t,[t,i]):{};if(a===false){return}o(i.settings,a);i.lastVal=null;e.datepicker._lastInput=t;e.datepicker._setDateFromField(i);if(e.datepicker._inDialog){t.value=""}if(!e.datepicker._pos){e.datepicker._pos=e.datepicker._findPos(t);e.datepicker._pos[1]+=t.offsetHeight}s=false;e(t).parents().each(function(){s|=e(this).css("position")==="fixed";return!s});l={left:e.datepicker._pos[0],top:e.datepicker._pos[1]};e.datepicker._pos=null;i.dpDiv.empty();i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});e.datepicker._updateDatepicker(i);l=e.datepicker._checkOffset(i,l,s);i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":s?"fixed":"absolute",display:"none",left:l.left+"px",top:l.top+"px"});if(!i.inline){u=e.datepicker._get(i,"showAnim");c=e.datepicker._get(i,"duration");i.dpDiv.css("z-index",r(e(t))+1);e.datepicker._datepickerShowing=true;if(e.effects&&e.effects.effect[u]){i.dpDiv.show(u,e.datepicker._get(i,"showOptions"),c)}else{i.dpDiv[u||"show"](u?c:null)}if(e.datepicker._shouldFocusInput(i)){i.input.trigger("focus")}e.datepicker._curInst=i}},_updateDatepicker:function(r){this.maxRows=4;t=r;r.dpDiv.empty().append(this._generateHTML(r));this._attachHandlers(r);var i,n=this._getNumberOfMonths(r),o=n[1],s=17,l=r.dpDiv.find("."+this._dayOverClass+" a");if(l.length>0){a.apply(l.get(0))}r.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");if(o>1){r.dpDiv.addClass("ui-datepicker-multi-"+o).css("width",s*o+"em")}r.dpDiv[(n[0]!==1||n[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi");r.dpDiv[(this._get(r,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(r===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(r)){r.input.trigger("focus")}if(r.yearshtml){i=r.yearshtml;setTimeout(function(){if(i===r.yearshtml&&r.yearshtml){r.dpDiv.find("select.ui-datepicker-year:first").replaceWith(r.yearshtml)}i=r.yearshtml=null},0)}},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,r,i){var n=t.dpDiv.outerWidth(),a=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,s=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(i?0:e(document).scrollLeft()),u=document.documentElement.clientHeight+(i?0:e(document).scrollTop());r.left-=this._get(t,"isRTL")?n-o:0;r.left-=i&&r.left===t.input.offset().left?e(document).scrollLeft():0;r.top-=i&&r.top===t.input.offset().top+s?e(document).scrollTop():0;r.left-=Math.min(r.left,r.left+n>l&&l>n?Math.abs(r.left+n-l):0);r.top-=Math.min(r.top,r.top+a>u&&u>a?Math.abs(a+s):0);return r},_findPos:function(t){var r,i=this._getInst(t),n=this._get(i,"isRTL");while(t&&(t.type==="hidden"||t.nodeType!==1||e.expr.filters.hidden(t))){t=t[n?"previousSibling":"nextSibling"]}r=e(t).offset();return[r.left,r.top]},_hideDatepicker:function(t){var r,i,n,a,o=this._curInst;if(!o||t&&o!==e.data(t,"datepicker")){return}if(this._datepickerShowing){r=this._get(o,"showAnim");i=this._get(o,"duration");n=function(){e.datepicker._tidyDialog(o)};if(e.effects&&(e.effects.effect[r]||e.effects[r])){o.dpDiv.hide(r,e.datepicker._get(o,"showOptions"),i,n)}else{o.dpDiv[r==="slideDown"?"slideUp":r==="fadeIn"?"fadeOut":"hide"](r?i:null,n)}if(!r){n()}this._datepickerShowing=false;a=this._get(o,"onClose");if(a){a.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o])}this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(e.blockUI){e.unblockUI();e("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(!e.datepicker._curInst){return}var r=e(t.target),i=e.datepicker._getInst(r[0]);if(r[0].id!==e.datepicker._mainDivId&&r.parents("#"+e.datepicker._mainDivId).length===0&&!r.hasClass(e.datepicker.markerClassName)&&!r.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&!(e.datepicker._inDialog&&e.blockUI)||r.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==i){e.datepicker._hideDatepicker()}},_adjustDate:function(t,r,i){var n=e(t),a=this._getInst(n[0]);if(this._isDisabledDatepicker(n[0])){return}this._adjustInstDate(a,r+(i==="M"?this._get(a,"showCurrentAtPos"):0),i);this._updateDatepicker(a)},_gotoToday:function(t){var r,i=e(t),n=this._getInst(i[0]);if(this._get(n,"gotoCurrent")&&n.currentDay){n.selectedDay=n.currentDay;n.drawMonth=n.selectedMonth=n.currentMonth;n.drawYear=n.selectedYear=n.currentYear}else{r=new Date;n.selectedDay=r.getDate();n.drawMonth=n.selectedMonth=r.getMonth();n.drawYear=n.selectedYear=r.getFullYear()}this._notifyChange(n);this._adjustDate(i)},_selectMonthYear:function(t,r,i){var n=e(t),a=this._getInst(n[0]);a["selected"+(i==="M"?"Month":"Year")]=a["draw"+(i==="M"?"Month":"Year")]=parseInt(r.options[r.selectedIndex].value,10);this._notifyChange(a);this._adjustDate(n)},_selectDay:function(t,r,i,n){var a,o=e(t);if(e(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])){return}a=this._getInst(o[0]);a.selectedDay=a.currentDay=e("a",n).html();a.selectedMonth=a.currentMonth=r;a.selectedYear=a.currentYear=i;this._selectDate(t,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear))},_clearDate:function(t){var r=e(t);this._selectDate(r,"")},_selectDate:function(t,r){var i,n=e(t),a=this._getInst(n[0]);r=r!=null?r:this._formatDate(a);if(a.input){a.input.val(r)}this._updateAlternate(a);i=this._get(a,"onSelect");if(i){i.apply(a.input?a.input[0]:null,[r,a])}else if(a.input){a.input.trigger("change")}if(a.inline){this._updateDatepicker(a)}else{this._hideDatepicker();this._lastInput=a.input[0];if(typeof a.input[0]!=="object"){a.input.trigger("focus")}this._lastInput=null}},_updateAlternate:function(t){var r,i,n,a=this._get(t,"altField");if(a){r=this._get(t,"altFormat")||this._get(t,"dateFormat");i=this._getDate(t);n=this.formatDate(r,i,this._getFormatConfig(t));e(a).val(n)}},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,r=new Date(e.getTime());r.setDate(r.getDate()+4-(r.getDay()||7));t=r.getTime();r.setMonth(0);r.setDate(1);return Math.floor(Math.round((t-r)/864e5)/7)+1},parseDate:function(t,r,i){if(t==null||r==null){throw"Invalid arguments"}r=typeof r==="object"?r.toString():r+"";if(r===""){return null}var n,a,o,s=0,l=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff,u=typeof l!=="string"?l:(new Date).getFullYear()%100+parseInt(l,10),c=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,f=(i?i.dayNames:null)||this._defaults.dayNames,h=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,d=(i?i.monthNames:null)||this._defaults.monthNames,p=-1,v=-1,g=-1,m=-1,y=false,_,b=function(e){var r=n+1<t.length&&t.charAt(n+1)===e;if(r){n++}return r},w=function(e){var t=b(e),i=e==="@"?14:e==="!"?20:e==="y"&&t?4:e==="o"?3:2,n=e==="y"?i:1,a=new RegExp("^\\d{"+n+","+i+"}"),o=r.substring(s).match(a);if(!o){throw"Missing number at position "+s}s+=o[0].length;return parseInt(o[0],10)},S=function(t,i,n){var a=-1,o=e.map(b(t)?n:i,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});e.each(o,function(e,t){var i=t[1];if(r.substr(s,i.length).toLowerCase()===i.toLowerCase()){a=t[0];s+=i.length;return false}});if(a!==-1){return a+1}else{throw"Unknown name at position "+s}},C=function(){if(r.charAt(s)!==t.charAt(n)){throw"Unexpected literal at position "+s}s++};for(n=0;n<t.length;n++){if(y){if(t.charAt(n)==="'"&&!b("'")){y=false}else{C()}}else{switch(t.charAt(n)){case"d":g=w("d");break;case"D":S("D",c,f);break;case"o":m=w("o");break;case"m":v=w("m");break;case"M":v=S("M",h,d);break;case"y":p=w("y");break;case"@":_=new Date(w("@"));p=_.getFullYear();v=_.getMonth()+1;g=_.getDate();break;case"!":_=new Date((w("!")-this._ticksTo1970)/1e4);p=_.getFullYear();v=_.getMonth()+1;g=_.getDate();break;case"'":if(b("'")){C()}else{y=true}break;default:C()}}}if(s<r.length){o=r.substr(s);if(!/^\s+/.test(o)){throw"Extra/unparsed characters found in date: "+o}}if(p===-1){p=(new Date).getFullYear()}else if(p<100){p+=(new Date).getFullYear()-(new Date).getFullYear()%100+(p<=u?0:-100)}if(m>-1){v=1;g=m;do{a=this._getDaysInMonth(p,v-1);if(g<=a){break}v++;g-=a}while(true)}_=this._daylightSavingAdjust(new Date(p,v-1,g));if(_.getFullYear()!==p||_.getMonth()+1!==v||_.getDate()!==g){throw"Invalid date"}return _},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*1e7,formatDate:function(e,t,r){if(!t){return""}var i,n=(r?r.dayNamesShort:null)||this._defaults.dayNamesShort,a=(r?r.dayNames:null)||this._defaults.dayNames,o=(r?r.monthNamesShort:null)||this._defaults.monthNamesShort,s=(r?r.monthNames:null)||this._defaults.monthNames,l=function(t){var r=i+1<e.length&&e.charAt(i+1)===t;if(r){i++}return r},u=function(e,t,r){var i=""+t;if(l(e)){while(i.length<r){i="0"+i}}return i},c=function(e,t,r,i){return l(e)?i[t]:r[t]},f="",h=false;if(t){for(i=0;i<e.length;i++){if(h){if(e.charAt(i)==="'"&&!l("'")){h=false}else{f+=e.charAt(i)}}else{switch(e.charAt(i)){case"d":f+=u("d",t.getDate(),2);break;case"D":f+=c("D",t.getDay(),n,a);break;case"o":f+=u("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":f+=u("m",t.getMonth()+1,2);break;case"M":f+=c("M",t.getMonth(),o,s);break;case"y":f+=l("y")?t.getFullYear():(t.getFullYear()%100<10?"0":"")+t.getFullYear()%100;break;case"@":f+=t.getTime();break;case"!":f+=t.getTime()*1e4+this._ticksTo1970;break;case"'":if(l("'")){f+="'"}else{h=true}break;default:f+=e.charAt(i)}}}}return f},_possibleChars:function(e){var t,r="",i=false,n=function(r){var i=t+1<e.length&&e.charAt(t+1)===r;if(i){t++}return i};for(t=0;t<e.length;t++){if(i){if(e.charAt(t)==="'"&&!n("'")){i=false}else{r+=e.charAt(t)}}else{switch(e.charAt(t)){case"d":case"m":case"y":case"@":r+="0123456789";break;case"D":case"M":return null;case"'":if(n("'")){r+="'"}else{i=true}break;default:r+=e.charAt(t)}}}return r},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()===e.lastVal){return}var r=this._get(e,"dateFormat"),i=e.lastVal=e.input?e.input.val():null,n=this._getDefaultDate(e),a=n,o=this._getFormatConfig(e);try{a=this.parseDate(r,i,o)||n}catch(e){i=t?"":i}e.selectedDay=a.getDate();e.drawMonth=e.selectedMonth=a.getMonth();e.drawYear=e.selectedYear=a.getFullYear();e.currentDay=i?a.getDate():0;e.currentMonth=i?a.getMonth():0;e.currentYear=i?a.getFullYear():0;this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,r,i){var n=function(e){var t=new Date;t.setDate(t.getDate()+e);return t},a=function(r){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),r,e.datepicker._getFormatConfig(t))}catch(e){}var i=(r.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,n=i.getFullYear(),a=i.getMonth(),o=i.getDate(),s=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=s.exec(r);while(l){switch(l[2]||"d"){case"d":case"D":o+=parseInt(l[1],10);break;case"w":case"W":o+=parseInt(l[1],10)*7;break;case"m":case"M":a+=parseInt(l[1],10);o=Math.min(o,e.datepicker._getDaysInMonth(n,a));break;case"y":case"Y":n+=parseInt(l[1],10);o=Math.min(o,e.datepicker._getDaysInMonth(n,a));break}l=s.exec(r)}return new Date(n,a,o)},o=r==null||r===""?i:typeof r==="string"?a(r):typeof r==="number"?isNaN(r)?i:n(r):new Date(r.getTime());o=o&&o.toString()==="Invalid Date"?i:o;if(o){o.setHours(0);o.setMinutes(0);o.setSeconds(0);o.setMilliseconds(0)}return this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){if(!e){return null}e.setHours(e.getHours()>12?e.getHours()+2:0);return e},_setDate:function(e,t,r){var i=!t,n=e.selectedMonth,a=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate();e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth();e.drawYear=e.selectedYear=e.currentYear=o.getFullYear();if((n!==e.selectedMonth||a!==e.selectedYear)&&!r){this._notifyChange(e)}this._adjustInstDate(e);if(e.input){e.input.val(i?"":this._formatDate(e))}},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()===""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var r=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(i,-r,"M")},next:function(){e.datepicker._adjustDate(i,+r,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(i)},selectDay:function(){e.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return false},selectMonth:function(){e.datepicker._selectMonthYear(i,this,"M");return false},selectYear:function(){e.datepicker._selectMonthYear(i,this,"Y");return false}};e(this).on(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,r,i,n,a,o,s,l,u,c,f,h,d,p,v,g,m,y,_,b,w,S,C,x,O,T,E,M,j,A,P,k,I,D,R,L,$,N,F,G=new Date,U=this._daylightSavingAdjust(new Date(G.getFullYear(),G.getMonth(),G.getDate())),H=this._get(e,"isRTL"),Y=this._get(e,"showButtonPanel"),W=this._get(e,"hideIfNoPrevNext"),V=this._get(e,"navigationAsDateFormat"),z=this._getNumberOfMonths(e),q=this._get(e,"showCurrentAtPos"),B=this._get(e,"stepMonths"),X=z[0]!==1||z[1]!==1,K=this._daylightSavingAdjust(!e.currentDay?new Date(9999,9,9):new Date(e.currentYear,e.currentMonth,e.currentDay)),Z=this._getMinMaxDate(e,"min"),Q=this._getMinMaxDate(e,"max"),J=e.drawMonth-q,ee=e.drawYear;if(J<0){J+=12;ee--}if(Q){t=this._daylightSavingAdjust(new Date(Q.getFullYear(),Q.getMonth()-z[0]*z[1]+1,Q.getDate()));t=Z&&t<Z?Z:t;while(this._daylightSavingAdjust(new Date(ee,J,1))>t){J--;if(J<0){J=11;ee--}}}e.drawMonth=J;e.drawYear=ee;r=this._get(e,"prevText");r=!V?r:this.formatDate(r,this._daylightSavingAdjust(new Date(ee,J-B,1)),this._getFormatConfig(e));i=this._canAdjustMonth(e,-1,ee,J)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click'"+" title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(H?"e":"w")+"'>"+r+"</span></a>":W?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(H?"e":"w")+"'>"+r+"</span></a>";n=this._get(e,"nextText");n=!V?n:this.formatDate(n,this._daylightSavingAdjust(new Date(ee,J+B,1)),this._getFormatConfig(e));a=this._canAdjustMonth(e,+1,ee,J)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click'"+" title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(H?"w":"e")+"'>"+n+"</span></a>":W?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(H?"w":"e")+"'>"+n+"</span></a>";o=this._get(e,"currentText");s=this._get(e,"gotoCurrent")&&e.currentDay?K:U;o=!V?o:this.formatDate(o,s,this._getFormatConfig(e));l=!e.inline?"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>":"";u=Y?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(H?l:"")+(this._isInRange(e,s)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'"+">"+o+"</button>":"")+(H?"":l)+"</div>":"";c=parseInt(this._get(e,"firstDay"),10);c=isNaN(c)?0:c;f=this._get(e,"showWeek");h=this._get(e,"dayNames");d=this._get(e,"dayNamesMin");p=this._get(e,"monthNames");v=this._get(e,"monthNamesShort");g=this._get(e,"beforeShowDay");m=this._get(e,"showOtherMonths");y=this._get(e,"selectOtherMonths");_=this._getDefaultDate(e);b="";for(S=0;S<z[0];S++){C="";this.maxRows=4;for(x=0;x<z[1];x++){O=this._daylightSavingAdjust(new Date(ee,J,e.selectedDay));T=" ui-corner-all";E="";if(X){E+="<div class='ui-datepicker-group";if(z[1]>1){switch(x){case 0:E+=" ui-datepicker-group-first";T=" ui-corner-"+(H?"right":"left");break;case z[1]-1:E+=" ui-datepicker-group-last";T=" ui-corner-"+(H?"left":"right");break;default:E+=" ui-datepicker-group-middle";T="";break}}E+="'>"}E+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+T+"'>"+(/all|left/.test(T)&&S===0?H?a:i:"")+(/all|right/.test(T)&&S===0?H?i:a:"")+this._generateMonthYearHeader(e,J,ee,Z,Q,S>0||x>0,p,v)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>";M=f?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"";for(w=0;w<7;w++){j=(w+c)%7;M+="<th scope='col'"+((w+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+h[j]+"'>"+d[j]+"</span></th>"}E+=M+"</tr></thead><tbody>";A=this._getDaysInMonth(ee,J);if(ee===e.selectedYear&&J===e.selectedMonth){e.selectedDay=Math.min(e.selectedDay,A)}P=(this._getFirstDayOfMonth(ee,J)-c+7)%7;k=Math.ceil((P+A)/7);I=X?this.maxRows>k?this.maxRows:k:k;this.maxRows=I;D=this._daylightSavingAdjust(new Date(ee,J,1-P));for(R=0;R<I;R++){E+="<tr>";L=!f?"":"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(D)+"</td>";for(w=0;w<7;w++){$=g?g.apply(e.input?e.input[0]:null,[D]):[true,""];N=D.getMonth()!==J;F=N&&!y||!$[0]||Z&&D<Z||Q&&D>Q;L+="<td class='"+((w+c+6)%7>=5?" ui-datepicker-week-end":"")+(N?" ui-datepicker-other-month":"")+(D.getTime()===O.getTime()&&J===e.selectedMonth&&e._keyEvent||_.getTime()===D.getTime()&&_.getTime()===O.getTime()?" "+this._dayOverClass:"")+(F?" "+this._unselectableClass+" ui-state-disabled":"")+(N&&!m?"":" "+$[1]+(D.getTime()===K.getTime()?" "+this._currentClass:"")+(D.getTime()===U.getTime()?" ui-datepicker-today":""))+"'"+((!N||m)&&$[2]?" title='"+$[2].replace(/'/g,"&#39;")+"'":"")+(F?"":" data-handler='selectDay' data-event='click' data-month='"+D.getMonth()+"' data-year='"+D.getFullYear()+"'")+">"+(N&&!m?"&#xa0;":F?"<span class='ui-state-default'>"+D.getDate()+"</span>":"<a class='ui-state-default"+(D.getTime()===U.getTime()?" ui-state-highlight":"")+(D.getTime()===K.getTime()?" ui-state-active":"")+(N?" ui-priority-secondary":"")+"' href='#'>"+D.getDate()+"</a>")+"</td>";D.setDate(D.getDate()+1);D=this._daylightSavingAdjust(D)}E+=L+"</tr>"}J++;if(J>11){J=0;ee++}E+="</tbody></table>"+(X?"</div>"+(z[0]>0&&x===z[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"");C+=E}b+=C}b+=u;e._keyEvent=false;return b},_generateMonthYearHeader:function(e,t,r,i,n,a,o,s){var l,u,c,f,h,d,p,v,g=this._get(e,"changeMonth"),m=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),_="<div class='ui-datepicker-title'>",b="";if(a||!g){b+="<span class='ui-datepicker-month'>"+o[t]+"</span>"}else{l=i&&i.getFullYear()===r;u=n&&n.getFullYear()===r;b+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(c=0;c<12;c++){if((!l||c>=i.getMonth())&&(!u||c<=n.getMonth())){b+="<option value='"+c+"'"+(c===t?" selected='selected'":"")+">"+s[c]+"</option>"}}b+="</select>"}if(!y){_+=b+(a||!(g&&m)?"&#xa0;":"")}if(!e.yearshtml){e.yearshtml="";if(a||!m){_+="<span class='ui-datepicker-year'>"+r+"</span>"}else{f=this._get(e,"yearRange").split(":");h=(new Date).getFullYear();d=function(e){var t=e.match(/c[+\-].*/)?r+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t};p=d(f[0]);v=Math.max(p,d(f[1]||""));p=i?Math.max(p,i.getFullYear()):p;v=n?Math.min(v,n.getFullYear()):v;e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";for(;p<=v;p++){e.yearshtml+="<option value='"+p+"'"+(p===r?" selected='selected'":"")+">"+p+"</option>"}e.yearshtml+="</select>";_+=e.yearshtml;e.yearshtml=null}}_+=this._get(e,"yearSuffix");if(y){_+=(a||!(g&&m)?"&#xa0;":"")+b}_+="</div>";return _},_adjustInstDate:function(e,t,r){var i=e.selectedYear+(r==="Y"?t:0),n=e.selectedMonth+(r==="M"?t:0),a=Math.min(e.selectedDay,this._getDaysInMonth(i,n))+(r==="D"?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(i,n,a)));e.selectedDay=o.getDate();e.drawMonth=e.selectedMonth=o.getMonth();e.drawYear=e.selectedYear=o.getFullYear();if(r==="M"||r==="Y"){this._notifyChange(e)}},_restrictMinMax:function(e,t){var r=this._getMinMaxDate(e,"min"),i=this._getMinMaxDate(e,"max"),n=r&&t<r?r:t;return i&&n>i?i:n},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");if(t){t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])}},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t==="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,r,i){var n=this._getNumberOfMonths(e),a=this._daylightSavingAdjust(new Date(r,i+(t<0?t:n[0]*n[1]),1));if(t<0){a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth()))}return this._isInRange(e,a)},_isInRange:function(e,t){var r,i,n=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max"),o=null,s=null,l=this._get(e,"yearRange");if(l){r=l.split(":");i=(new Date).getFullYear();o=parseInt(r[0],10);s=parseInt(r[1],10);if(r[0].match(/[+\-].*/)){o+=i}if(r[1].match(/[+\-].*/)){s+=i}}return(!n||t.getTime()>=n.getTime())&&(!a||t.getTime()<=a.getTime())&&(!o||t.getFullYear()>=o)&&(!s||t.getFullYear()<=s)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");t=typeof t!=="string"?t:(new Date).getFullYear()%100+parseInt(t,10);return{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,r,i){if(!t){e.currentDay=e.selectedDay;e.currentMonth=e.selectedMonth;e.currentYear=e.selectedYear}var n=t?typeof t==="object"?t:this._daylightSavingAdjust(new Date(i,r,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),n,this._getFormatConfig(e))}});function n(t){var r="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.on("mouseout",r,function(){e(this).removeClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){e(this).removeClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!==-1){e(this).removeClass("ui-datepicker-next-hover")}}).on("mouseover",r,a)}function a(){if(!e.datepicker._isDisabledDatepicker(t.inline?t.dpDiv.parent()[0]:t.input[0])){e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");e(this).addClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){e(this).addClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!==-1){e(this).addClass("ui-datepicker-next-hover")}}}function o(t,r){e.extend(t,r);for(var i in r){if(r[i]==null){t[i]=r[i]}}return t}e.fn.datepicker=function(t){if(!this.length){return this}if(!e.datepicker.initialized){e(document).on("mousedown",e.datepicker._checkExternalClick);e.datepicker.initialized=true}if(e("#"+e.datepicker._mainDivId).length===0){e("body").append(e.datepicker.dpDiv)}var r=Array.prototype.slice.call(arguments,1);if(typeof t==="string"&&(t==="isDisabled"||t==="getDate"||t==="widget")){return e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(r))}if(t==="option"&&arguments.length===2&&typeof arguments[1]==="string"){return e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(r))}return this.each(function(){typeof t==="string"?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(r)):e.datepicker._attachDatepicker(this,t)})};e.datepicker=new i;e.datepicker.initialized=false;e.datepicker.uuid=(new Date).getTime();e.datepicker.version="1.12.1";return e.datepicker})},function(e,t,r){(function(e,r){true?r(t):undefined})(this,function(e){"use strict";var t={value:function(){}};function r(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r)throw new Error("illegal type: "+n);r[n]=[]}return new i(r)}function i(e){this._=e}function n(e,t){return e.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");if(i>=0)r=e.slice(i+1),e=e.slice(0,i);if(e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}i.prototype=r.prototype={constructor:i,on:function(e,t){var r=this._,i=n(e+"",r),s,l=-1,u=i.length;if(arguments.length<2){while(++l<u)if((s=(e=i[l]).type)&&(s=a(r[s],e.name)))return s;return}if(t!=null&&typeof t!=="function")throw new Error("invalid callback: "+t);while(++l<u){if(s=(e=i[l]).type)r[s]=o(r[s],e.name,t);else if(t==null)for(s in r)r[s]=o(r[s],e.name,null)}return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new i(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var r=new Array(n),i=0,n,a;i<n;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],i=0,n=a.length;i<n;++i)a[i].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],n=0,a=i.length;n<a;++n)i[n].value.apply(t,r)}};function a(e,t){for(var r=0,i=e.length,n;r<i;++r){if((n=e[r]).name===t){return n.value}}}function o(e,r,i){for(var n=0,a=e.length;n<a;++n){if(e[n].name===r){e[n]=t,e=e.slice(0,n).concat(e.slice(n+1));break}}if(i!=null)e.push({name:r,value:i});return e}e.dispatch=r;Object.defineProperty(e,"__esModule",{value:true})})},function(e,t,r){"use strict";var i=r(17);var n=r(257);var a=r(213);var o=Object(n["dispatch"])("start","end","interrupt");var s=[];var l=0;var u=1;var c=2;var f=3;var h=4;var d=5;var p=6;var v=function(e,t,r,i,n,a){var u=e.__transition;if(!u)e.__transition={};else if(r in u)return;_(e,r,{name:t,index:i,group:n,on:o,tween:s,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:l})};function g(e,t){var r=y(e,t);if(r.state>l)throw new Error("too late; already scheduled");return r}function m(e,t){var r=y(e,t);if(r.state>c)throw new Error("too late; already started");return r}function y(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function _(e,t,r){var i=e.__transition,n;i[t]=r;r.timer=Object(a["timer"])(o,0,r.time);function o(e){r.state=u;r.timer.restart(s,r.delay,r.time);if(r.delay<=e)s(e-r.delay)}function s(o){var d,g,m,y;if(r.state!==u)return v();for(d in i){y=i[d];if(y.name!==r.name)continue;if(y.state===f)return Object(a["timeout"])(s);if(y.state===h){y.state=p;y.timer.stop();y.on.call("interrupt",e,e.__data__,y.index,y.group);delete i[d]}else if(+d<t){y.state=p;y.timer.stop();delete i[d]}}Object(a["timeout"])(function(){if(r.state===f){r.state=h;r.timer.restart(l,r.delay,r.time);l(o)}});r.state=c;r.on.call("start",e,e.__data__,r.index,r.group);if(r.state!==c)return;r.state=f;n=new Array(m=r.tween.length);for(d=0,g=-1;d<m;++d){if(y=r.tween[d].value.call(e,e.__data__,r.index,r.group)){n[++g]=y}}n.length=g+1}function l(t){var i=t<r.duration?r.ease.call(null,t/r.duration):(r.timer.restart(v),r.state=d,1),a=-1,o=n.length;while(++a<o){n[a].call(null,i)}if(r.state===d){r.on.call("end",e,e.__data__,r.index,r.group);v()}}function v(){r.state=p;r.timer.stop();delete i[t];for(var n in i)return;delete e.__transition}}var b=function(e,t){var r=e.__transition,i,n,a=true,o;if(!r)return;t=t==null?null:t+"";for(o in r){if((i=r[o]).name!==t){a=false;continue}n=i.state>c&&i.state<d;i.state=p;i.timer.stop();if(n)i.on.call("interrupt",e,e.__data__,i.index,i.group);delete r[o]}if(a)delete e.__transition};var w=function(e){return this.each(function(){b(this,e)})};var S=r(75);function C(e,t){var r,i;return function(){var n=m(this,e),a=n.tween;if(a!==r){i=r=a;for(var o=0,s=i.length;o<s;++o){if(i[o].name===t){i=i.slice();i.splice(o,1);break}}}n.tween=i}}function x(e,t,r){var i,n;if(typeof r!=="function")throw new Error;return function(){var a=m(this,e),o=a.tween;if(o!==i){n=(i=o).slice();for(var s={name:t,value:r},l=0,u=n.length;l<u;++l){if(n[l].name===t){n[l]=s;break}}if(l===u)n.push(s)}a.tween=n}}var O=function(e,t){var r=this._id;e+="";if(arguments.length<2){var i=y(this.node(),r).tween;for(var n=0,a=i.length,o;n<a;++n){if((o=i[n]).name===e){return o.value}}return null}return this.each((t==null?C:x)(r,e,t))};function T(e,t,r){var i=e._id;e.each(function(){var e=m(this,i);(e.value||(e.value={}))[t]=r.apply(this,arguments)});return function(e){return y(e,i).value[t]}}var E=r(129);var M=function(e,t){var r;return(typeof t==="number"?S["interpolateNumber"]:t instanceof E["color"]?S["interpolateRgb"]:(r=Object(E["color"])(t))?(t=r,S["interpolateRgb"]):S["interpolateString"])(e,t)};function j(e){return function(){this.removeAttribute(e)}}function A(e){return function(){this.removeAttributeNS(e.space,e.local)}}function P(e,t,r){var i,n;return function(){var a=this.getAttribute(e);return a===r?null:a===i?n:n=t(i=a,r)}}function k(e,t,r){var i,n;return function(){var a=this.getAttributeNS(e.space,e.local);return a===r?null:a===i?n:n=t(i=a,r)}}function I(e,t,r){var i,n,a;return function(){var o,s=r(this);if(s==null)return void this.removeAttribute(e);o=this.getAttribute(e);return o===s?null:o===i&&s===n?a:a=t(i=o,n=s)}}function D(e,t,r){var i,n,a;return function(){var o,s=r(this);if(s==null)return void this.removeAttributeNS(e.space,e.local);o=this.getAttributeNS(e.space,e.local);return o===s?null:o===i&&s===n?a:a=t(i=o,n=s)}}var R=function(e,t){var r=Object(i["namespace"])(e),n=r==="transform"?S["interpolateTransformSvg"]:M;return this.attrTween(e,typeof t==="function"?(r.local?D:I)(r,n,T(this,"attr."+e,t)):t==null?(r.local?A:j)(r):(r.local?k:P)(r,n,t+""))};function L(e,t){function r(){var r=this,i=t.apply(r,arguments);return i&&function(t){r.setAttributeNS(e.space,e.local,i(t))}}r._value=t;return r}function $(e,t){function r(){var r=this,i=t.apply(r,arguments);return i&&function(t){r.setAttribute(e,i(t))}}r._value=t;return r}var N=function(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!=="function")throw new Error;var n=Object(i["namespace"])(e);return this.tween(r,(n.local?L:$)(n,t))};function F(e,t){return function(){g(this,e).delay=+t.apply(this,arguments)}}function G(e,t){return t=+t,function(){g(this,e).delay=t}}var U=function(e){var t=this._id;return arguments.length?this.each((typeof e==="function"?F:G)(t,e)):y(this.node(),t).delay};function H(e,t){return function(){m(this,e).duration=+t.apply(this,arguments)}}function Y(e,t){return t=+t,function(){m(this,e).duration=t}}var W=function(e){var t=this._id;return arguments.length?this.each((typeof e==="function"?H:Y)(t,e)):y(this.node(),t).duration};function V(e,t){if(typeof t!=="function")throw new Error;return function(){m(this,e).ease=t}}var z=function(e){var t=this._id;return arguments.length?this.each(V(t,e)):y(this.node(),t).ease};var q=function(e){if(typeof e!=="function")e=Object(i["matcher"])(e);for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a){for(var o=t[a],s=o.length,l=n[a]=[],u,c=0;c<s;++c){if((u=o[c])&&e.call(u,u.__data__,c,o)){l.push(u)}}}return new ge(n,this._parents,this._name,this._id)};var B=function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,i=t.length,n=r.length,a=Math.min(i,n),o=new Array(i),s=0;s<a;++s){for(var l=t[s],u=r[s],c=l.length,f=o[s]=new Array(c),h,d=0;d<c;++d){if(h=l[d]||u[d]){f[d]=h}}}for(;s<i;++s){o[s]=t[s]}return new ge(o,this._parents,this._name,this._id)};function X(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");if(t>=0)e=e.slice(0,t);return!e||e==="start"})}function K(e,t,r){var i,n,a=X(t)?g:m;return function(){var o=a(this,e),s=o.on;if(s!==i)(n=(i=s).copy()).on(t,r);o.on=n}}var Z=function(e,t){var r=this._id;return arguments.length<2?y(this.node(),r).on.on(e):this.each(K(r,e,t))};function Q(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;if(t)t.removeChild(this)}}var J=function(){return this.on("end.remove",Q(this._id))};var ee=function(e){var t=this._name,r=this._id;if(typeof e!=="function")e=Object(i["selector"])(e);for(var n=this._groups,a=n.length,o=new Array(a),s=0;s<a;++s){for(var l=n[s],u=l.length,c=o[s]=new Array(u),f,h,d=0;d<u;++d){if((f=l[d])&&(h=e.call(f,f.__data__,d,l))){if("__data__"in f)h.__data__=f.__data__;c[d]=h;v(c[d],t,r,d,c,y(f,r))}}}return new ge(o,this._parents,t,r)};var te=function(e){var t=this._name,r=this._id;if(typeof e!=="function")e=Object(i["selectorAll"])(e);for(var n=this._groups,a=n.length,o=[],s=[],l=0;l<a;++l){for(var u=n[l],c=u.length,f,h=0;h<c;++h){if(f=u[h]){for(var d=e.call(f,f.__data__,h,u),p,g=y(f,r),m=0,_=d.length;m<_;++m){if(p=d[m]){v(p,t,r,m,d,g)}}o.push(d);s.push(f)}}}return new ge(o,s,t,r)};var re=i["selection"].prototype.constructor;var ie=function(){return new re(this._groups,this._parents)};function ne(e,t){var r,n,a;return function(){var o=Object(i["style"])(this,e),s=(this.style.removeProperty(e),Object(i["style"])(this,e));return o===s?null:o===r&&s===n?a:a=t(r=o,n=s)}}function ae(e){return function(){this.style.removeProperty(e)}}function oe(e,t,r){var n,a;return function(){var o=Object(i["style"])(this,e);return o===r?null:o===n?a:a=t(n=o,r)}}function se(e,t,r){var n,a,o;return function(){var s=Object(i["style"])(this,e),l=r(this);if(l==null)l=(this.style.removeProperty(e),Object(i["style"])(this,e));return s===l?null:s===n&&l===a?o:o=t(n=s,a=l)}}var le=function(e,t,r){var i=(e+="")==="transform"?S["interpolateTransformCss"]:M;return t==null?this.styleTween(e,ne(e,i)).on("end.style."+e,ae(e)):this.styleTween(e,typeof t==="function"?se(e,i,T(this,"style."+e,t)):oe(e,i,t+""),r)};function ue(e,t,r){function i(){var i=this,n=t.apply(i,arguments);return n&&function(t){i.style.setProperty(e,n(t),r)}}i._value=t;return i}var ce=function(e,t,r){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!=="function")throw new Error;return this.tween(i,ue(e,t,r==null?"":r))};function fe(e){return function(){this.textContent=e}}function he(e){return function(){var t=e(this);this.textContent=t==null?"":t}}var de=function(e){return this.tween("text",typeof e==="function"?he(T(this,"text",e)):fe(e==null?"":e+""))};var pe=function(){var e=this._name,t=this._id,r=ye();for(var i=this._groups,n=i.length,a=0;a<n;++a){for(var o=i[a],s=o.length,l,u=0;u<s;++u){if(l=o[u]){var c=y(l,t);v(l,e,r,u,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}}}return new ge(i,this._parents,e,r)};var ve=0;function ge(e,t,r,i){this._groups=e;this._parents=t;this._name=r;this._id=i}function me(e){return Object(i["selection"])().transition(e)}function ye(){return++ve}var _e=i["selection"].prototype;ge.prototype=me.prototype={constructor:ge,select:ee,selectAll:te,filter:q,merge:B,selection:ie,transition:pe,call:_e.call,nodes:_e.nodes,node:_e.node,size:_e.size,empty:_e.empty,each:_e.each,on:Z,attr:R,attrTween:N,style:le,styleTween:ce,text:de,remove:J,tween:O,delay:U,duration:W,ease:z};var be=r(375);var we={time:null,delay:0,duration:250,ease:be["easeCubicInOut"]};function Se(e,t){var r;while(!(r=e.__transition)||!(r=r[t])){if(!(e=e.parentNode)){return we.time=Object(a["now"])(),we}}return r}var Ce=function(e){var t,r;if(e instanceof ge){t=e._id,e=e._name}else{t=ye(),(r=we).time=Object(a["now"])(),e=e==null?null:e+""}for(var i=this._groups,n=i.length,o=0;o<n;++o){for(var s=i[o],l=s.length,u,c=0;c<l;++c){if(u=s[c]){v(u,e,t,c,s,r||Se(u,t))}}}return new ge(i,this._parents,e,t)};i["selection"].prototype.interrupt=w;i["selection"].prototype.transition=Ce;var xe=[null];var Oe=function(e,t){var r=e.__transition,i,n;if(r){t=t==null?null:t+"";for(n in r){if((i=r[n]).state>u&&i.name===t){return new ge([[e]],xe,t,+n)}}}return null};r.d(t,false,function(){return me});r.d(t,false,function(){return Oe});r.d(t,"a",function(){return b})},function(e,t,r){(function(e,r){true?r(t):undefined})(this,function(e){"use strict";var t=6;var r="AJSAJS";var i="AFAFAF";var n=65;var a=73;var o=79;var s=86;var l=90;var u={forward:c,inverse:f,toPoint:h};function c(e,t){t=t||5;return y(v({lat:e[1],lon:e[0]}),t)}function f(e){var t=g(S(e.toUpperCase()));if(t.lat&&t.lon){return[t.lon,t.lat,t.lon,t.lat]}return[t.left,t.bottom,t.right,t.top]}function h(e){var t=g(S(e.toUpperCase()));if(t.lat&&t.lon){return[t.lon,t.lat]}return[(t.left+t.right)/2,(t.top+t.bottom)/2]}function d(e){return e*(Math.PI/180)}function p(e){return 180*(e/Math.PI)}function v(e){var t=e.lat;var r=e.lon;var i=6378137;var n=.00669438;var a=.9996;var o;var s;var l,u,c,f,h;var p=d(t);var v=d(r);var g;var y;y=Math.floor((r+180)/6)+1;if(r===180){y=60}if(t>=56&&t<64&&r>=3&&r<12){y=32}if(t>=72&&t<84){if(r>=0&&r<9){y=31}else if(r>=9&&r<21){y=33}else if(r>=21&&r<33){y=35}else if(r>=33&&r<42){y=37}}o=(y-1)*6-180+3;g=d(o);s=n/(1-n);l=i/Math.sqrt(1-n*Math.sin(p)*Math.sin(p));u=Math.tan(p)*Math.tan(p);c=s*Math.cos(p)*Math.cos(p);f=Math.cos(p)*(v-g);h=i*((1-n/4-3*n*n/64-5*n*n*n/256)*p-(3*n/8+3*n*n/32+45*n*n*n/1024)*Math.sin(2*p)+(15*n*n/256+45*n*n*n/1024)*Math.sin(4*p)-35*n*n*n/3072*Math.sin(6*p));var _=a*l*(f+(1-u+c)*f*f*f/6+(5-18*u+u*u+72*c-58*s)*f*f*f*f*f/120)+5e5;var b=a*(h+l*Math.tan(p)*(f*f/2+(5-u+9*c+4*c*c)*f*f*f*f/24+(61-58*u+u*u+600*c-330*s)*f*f*f*f*f*f/720));if(t<0){b+=1e7}return{northing:Math.round(b),easting:Math.round(_),zoneNumber:y,zoneLetter:m(t)}}function g(e){var t=e.northing;var r=e.easting;var i=e.zoneLetter;var n=e.zoneNumber;if(n<0||n>60){return null}var a=.9996;var o=6378137;var s=.00669438;var l;var u=(1-Math.sqrt(1-s))/(1+Math.sqrt(1-s));var c,f,h,d,v,m;var y;var _,b;var w=r-5e5;var S=t;if(i<"N"){S-=1e7}y=(n-1)*6-180+3;l=s/(1-s);m=S/a;_=m/(o*(1-s/4-3*s*s/64-5*s*s*s/256));b=_+(3*u/2-27*u*u*u/32)*Math.sin(2*_)+(21*u*u/16-55*u*u*u*u/32)*Math.sin(4*_)+151*u*u*u/96*Math.sin(6*_);c=o/Math.sqrt(1-s*Math.sin(b)*Math.sin(b));f=Math.tan(b)*Math.tan(b);h=l*Math.cos(b)*Math.cos(b);d=o*(1-s)/Math.pow(1-s*Math.sin(b)*Math.sin(b),1.5);v=w/(c*a);var C=b-c*Math.tan(b)/d*(v*v/2-(5+3*f+10*h-4*h*h-9*l)*v*v*v*v/24+(61+90*f+298*h+45*f*f-252*l-3*h*h)*v*v*v*v*v*v/720);C=p(C);var x=(v-(1+2*f+h)*v*v*v/6+(5-2*h+28*f-3*h*h+8*l+24*f*f)*v*v*v*v*v/120)/Math.cos(b);x=y+p(x);var O;if(e.accuracy){var T=g({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});O={top:T.lat,right:T.lon,bottom:C,left:x}}else{O={lat:C,lon:x}}return O}function m(e){var t="Z";if(84>=e&&e>=72){t="X"}else if(72>e&&e>=64){t="W"}else if(64>e&&e>=56){t="V"}else if(56>e&&e>=48){t="U"}else if(48>e&&e>=40){t="T"}else if(40>e&&e>=32){t="S"}else if(32>e&&e>=24){t="R"}else if(24>e&&e>=16){t="Q"}else if(16>e&&e>=8){t="P"}else if(8>e&&e>=0){t="N"}else if(0>e&&e>=-8){t="M"}else if(-8>e&&e>=-16){t="L"}else if(-16>e&&e>=-24){t="K"}else if(-24>e&&e>=-32){t="J"}else if(-32>e&&e>=-40){t="H"}else if(-40>e&&e>=-48){t="G"}else if(-48>e&&e>=-56){t="F"}else if(-56>e&&e>=-64){t="E"}else if(-64>e&&e>=-72){t="D"}else if(-72>e&&e>=-80){t="C"}return t}function y(e,t){var r="00000"+e.easting,i="00000"+e.northing;return e.zoneNumber+e.zoneLetter+_(e.easting,e.northing,e.zoneNumber)+r.substr(r.length-5,t)+i.substr(i.length-5,t)}function _(e,t,r){var i=b(r);var n=Math.floor(e/1e5);var a=Math.floor(t/1e5)%20;return w(n,a,i)}function b(e){var r=e%t;if(r===0){r=t}return r}function w(e,t,u){var c=u-1;var f=r.charCodeAt(c);var h=i.charCodeAt(c);var d=f+e-1;var p=h+t;var v=false;if(d>l){d=d-l+n-1;v=true}if(d===a||f<a&&d>a||(d>a||f<a)&&v){d++}if(d===o||f<o&&d>o||(d>o||f<o)&&v){d++;if(d===a){d++}}if(d>l){d=d-l+n-1}if(p>s){p=p-s+n-1;v=true}else{v=false}if(p===a||h<a&&p>a||(p>a||h<a)&&v){p++}if(p===o||h<o&&p>o||(p>o||h<o)&&v){p++;if(p===a){p++}}if(p>s){p=p-s+n-1}var g=String.fromCharCode(d)+String.fromCharCode(p);return g}function S(e){if(e&&e.length===0){throw"MGRSPoint coverting from nothing"}var t=e.length;var r=null;var i="";var n;var a=0;while(!/[A-Z]/.test(n=e.charAt(a))){if(a>=2){throw"MGRSPoint bad conversion from: "+e}i+=n;a++}var o=parseInt(i,10);if(a===0||a+3>t){throw"MGRSPoint bad conversion from: "+e}var s=e.charAt(a++);if(s<="A"||s==="B"||s==="Y"||s>="Z"||s==="I"||s==="O"){throw"MGRSPoint zone letter "+s+" not handled: "+e}r=e.substring(a,a+=2);var l=b(o);var u=C(r.charAt(0),l);var c=x(r.charAt(1),l);while(c<O(s)){c+=2e6}var f=t-a;if(f%2!==0){throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+e}var h=f/2;var d=0;var p=0;var v,g,m,y,_;if(h>0){v=1e5/Math.pow(10,h);g=e.substring(a,a+h);d=parseFloat(g)*v;m=e.substring(a+h);p=parseFloat(m)*v}y=d+u;_=p+c;return{easting:y,northing:_,zoneLetter:s,zoneNumber:o,accuracy:v}}function C(e,t){var i=r.charCodeAt(t-1);var s=1e5;var u=false;while(i!==e.charCodeAt(0)){i++;if(i===a){i++}if(i===o){i++}if(i>l){if(u){throw"Bad character: "+e}i=n;u=true}s+=1e5}return s}function x(e,t){if(e>"V"){throw"MGRSPoint given invalid Northing "+e}var r=i.charCodeAt(t-1);var l=0;var u=false;while(r!==e.charCodeAt(0)){r++;if(r===a){r++}if(r===o){r++}if(r>s){if(u){throw"Bad character: "+e}r=n;u=true}l+=1e5}return l}function O(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0){return t}else{throw"Invalid zone letter: "+e}}e["default"]=u;e.forward=c;e.inverse=f;e.toPoint=h;Object.defineProperty(e,"__esModule",{value:true})})},function(e,t,r){"use strict";var i=r(1);var n=r(88);var a=r(3);var o=r(49);var s=r(166);var l=function e(t,r){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};n["a"].call(this,i);this.continueMsg;if(i.continueMsg!==undefined){this.continueMsg=i.continueMsg}else{this.continueMsg=document.createElement("span");this.continueMsg.textContent=r.getString("Click to continue drawing the polygon.");var a=document.createElement("br");a.textContent=r.getString("Double-click or click starting point to finish.");this.continueMsg.appendChild(a)}this.format=t};a["d"](l,n["a"]);l.prototype.createDrawInteraction=function(e,t){return new s["a"]({type:"Polygon",source:t,style:e})};l.prototype.handleMeasure=function(e){var t=i["a"].assertInstanceof(this.sketchFeature.getGeometry(),o["a"]);var r=this.getMap().getView().getProjection();i["a"].assert(r);var a=n["a"].getFormattedArea(t,r,this.precision,this.format);var s=t.getCoordinates()[0].length;var l=null;if(s>3){l=t.getInteriorPoint().getCoordinates()}e(a,l)};t["a"]=l},function(e,t,r){"use strict";var i=r(40);var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var l=function(e){s(t,e);function t(r){a(this,t);var i=o(this,e.call(this,r));i.gmfLayer_=r.gmfLayer;return i}n(t,[{key:"gmfLayer",get:function e(){return this.gmfLayer_}}]);return t}(i["a"]);t["a"]=l},function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"c",function(){return a});r.d(t,"b",function(){return o});var i=r(108);var n={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function a(e,t,r,n){var a=this._relativeTime[r];return Object(i["a"])(a)?a(e,t,r,n):a.replace(/%d/i,e)}function o(e,t){var r=this._relativeTime[e>0?"future":"past"];return Object(i["a"])(r)?r(t):r.replace(/%s/i,t)}},function(e,t,r){"use strict";r.d(t,"b",function(){return i});r.d(t,"a",function(){return n});r.d(t,"c",function(){return a});var i="%d";var n=/\d{1,2}/;function a(e){return this._ordinal.replace("%d",e)}},function(e,t,r){"use strict";r.d(t,"a",function(){return i});function i(e){if(e!=null){this.set(e)}}},function(e,t,r){"use strict";r.d(t,"b",function(){return s});r.d(t,"a",function(){return l});var i=r(108);var n=r(128);var a=r(214);var o=r(57);function s(e){var t,r;for(r in e){t=e[r];if(Object(i["a"])(t)){this[r]=t}else{this["_"+r]=t}}this._config=e;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function l(e,t){var r=Object(n["a"])({},e),i;for(i in t){if(Object(o["a"])(t,i)){if(Object(a["a"])(e[i])&&Object(a["a"])(t[i])){r[i]={};Object(n["a"])(r[i],e[i]);Object(n["a"])(r[i],t[i])}else if(t[i]!=null){r[i]=t[i]}else{delete r[i]}}}for(i in e){if(Object(o["a"])(e,i)&&!Object(o["a"])(t,i)&&Object(a["a"])(e[i])){r[i]=Object(n["a"])({},r[i])}}return r}},function(e,t,r){"use strict";var i=r(3);var n=r(28);var a=r(44);var o=r(2);var s=r(56);var l=r(36);var u=r(9);var c=r(29);var f=r(341);var h={TRANSLATESTART:"translatestart",TRANSLATING:"translating",TRANSLATEEND:"translateend"};var d=function e(t,r,i){s["a"].call(this,t);this.features=r;this.coordinate=i};Object(i["d"])(d,s["a"]);var p=function e(t){c["b"].call(this,{handleDownEvent:v,handleDragEvent:m,handleMoveEvent:y,handleUpEvent:g});var r=t?t:{};this.lastCoordinate_=null;this.features_=r.features!==undefined?r.features:null;var i=void 0;if(r.layers){if(typeof r.layers==="function"){i=r.layers}else{var n=r.layers;i=function e(t){return Object(u["f"])(n,t)}}}else{i=l["b"]}this.layerFilter_=i;this.hitTolerance_=r.hitTolerance?r.hitTolerance:0;this.lastFeature_=null;Object(o["a"])(this,Object(a["b"])(f["a"].ACTIVE),this.handleActiveChanged_,this)};Object(i["d"])(p,c["b"]);function v(e){this.lastFeature_=this.featuresAtPixel_(e.pixel,e.map);if(!this.lastCoordinate_&&this.lastFeature_){this.lastCoordinate_=e.coordinate;y.call(this,e);var t=this.features_||new n["b"]([this.lastFeature_]);this.dispatchEvent(new d(h.TRANSLATESTART,t,e.coordinate));return true}return false}function g(e){if(this.lastCoordinate_){this.lastCoordinate_=null;y.call(this,e);var t=this.features_||new n["b"]([this.lastFeature_]);this.dispatchEvent(new d(h.TRANSLATEEND,t,e.coordinate));return true}return false}function m(e){if(this.lastCoordinate_){var t=e.coordinate;var r=t[0]-this.lastCoordinate_[0];var i=t[1]-this.lastCoordinate_[1];var a=this.features_||new n["b"]([this.lastFeature_]);a.forEach(function(e){var t=e.getGeometry();t.translate(r,i);e.setGeometry(t)});this.lastCoordinate_=t;this.dispatchEvent(new d(h.TRANSLATING,a,t))}}function y(e){var t=e.map.getViewport();if(this.featuresAtPixel_(e.pixel,e.map)){t.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing");t.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")}else{t.classList.remove("ol-grab","ol-grabbing")}}p.prototype.featuresAtPixel_=function(e,t){return t.forEachFeatureAtPixel(e,function(e){if(!this.features_||Object(u["f"])(this.features_.getArray(),e)){return e}}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})};p.prototype.getHitTolerance=function(){return this.hitTolerance_};p.prototype.setHitTolerance=function(e){this.hitTolerance_=e};p.prototype.setMap=function(e){var t=this.getMap();c["b"].prototype.setMap.call(this,e);this.updateState_(t)};p.prototype.handleActiveChanged_=function(){this.updateState_(null)};p.prototype.updateState_=function(e){var t=this.getMap();var r=this.getActive();if(!t||!r){t=t||e;if(t){var i=t.getViewport();i.classList.remove("ol-grab","ol-grabbing")}}};t["a"]=p},function(e,t,r){"use strict";r.d(t,"a",function(){return o});r.d(t,"b",function(){return s});var i=r(3);var n=r(199);var a=function e(t){var r={mousedown:this.mousedown,mousemove:this.mousemove,mouseup:this.mouseup,mouseover:this.mouseover,mouseout:this.mouseout};n["a"].call(this,t,r);this.pointerMap=t.pointerMap;this.lastTouches=[]};Object(i["d"])(a,n["a"]);var o=1;var s="mouse";var l=25;a.prototype.isEventSimulatedFromTouch_=function(e){var t=this.lastTouches;var r=e.clientX;var i=e.clientY;for(var n=0,a=t.length,o;n<a&&(o=t[n]);n++){var s=Math.abs(r-o[0]);var u=Math.abs(i-o[1]);if(s<=l&&u<=l){return true}}return false};function u(e,t){var r=t.cloneEvent(e,e);var i=r.preventDefault;r.preventDefault=function(){e.preventDefault();i()};r.pointerId=o;r.isPrimary=true;r.pointerType=s;return r}a.prototype.mousedown=function(e){if(!this.isEventSimulatedFromTouch_(e)){if(o.toString()in this.pointerMap){this.cancel(e)}var t=u(e,this.dispatcher);this.pointerMap[o.toString()]=e;this.dispatcher.down(t,e)}};a.prototype.mousemove=function(e){if(!this.isEventSimulatedFromTouch_(e)){var t=u(e,this.dispatcher);this.dispatcher.move(t,e)}};a.prototype.mouseup=function(e){if(!this.isEventSimulatedFromTouch_(e)){var t=this.pointerMap[o.toString()];if(t&&t.button===e.button){var r=u(e,this.dispatcher);this.dispatcher.up(r,e);this.cleanupMouse()}}};a.prototype.mouseover=function(e){if(!this.isEventSimulatedFromTouch_(e)){var t=u(e,this.dispatcher);this.dispatcher.enterOver(t,e)}};a.prototype.mouseout=function(e){if(!this.isEventSimulatedFromTouch_(e)){var t=u(e,this.dispatcher);this.dispatcher.leaveOut(t,e)}};a.prototype.cancel=function(e){var t=u(e,this.dispatcher);this.dispatcher.cancel(t,e);this.cleanupMouse()};a.prototype.cleanupMouse=function(){delete this.pointerMap[o.toString()]};t["c"]=a},function(e,t,r){"use strict";var i=r(3);var n=r(238);var a=r.n(n);var o=r(5);var s=r(11);var l=function e(t){this.rbush_=a()(t);this.items_={}};l.prototype.insert=function(e,t){var r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(r);this.items_[Object(i["c"])(t)]=r};l.prototype.load=function(e,t){var r=new Array(t.length);for(var n=0,a=t.length;n<a;n++){var o=e[n];var s=t[n];var l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:s};r[n]=l;this.items_[Object(i["c"])(s)]=l}this.rbush_.load(r)};l.prototype.remove=function(e){var t=Object(i["c"])(e);var r=this.items_[t];delete this.items_[t];return this.rbush_.remove(r)!==null};l.prototype.update=function(e,t){var r=this.items_[Object(i["c"])(t)];var n=[r.minX,r.minY,r.maxX,r.maxY];if(!Object(o["p"])(n,e)){this.remove(t);this.insert(e,t)}};l.prototype.getAll=function(){var e=this.rbush_.all();return e.map(function(e){return e.value})};l.prototype.getInExtent=function(e){var t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};var r=this.rbush_.search(t);return r.map(function(e){return e.value})};l.prototype.forEach=function(e,t){return this.forEach_(this.getAll(),e,t)};l.prototype.forEachInExtent=function(e,t,r){return this.forEach_(this.getInExtent(e),t,r)};l.prototype.forEach_=function(e,t,r){var i=void 0;for(var n=0,a=e.length;n<a;n++){i=t.call(r,e[n]);if(i){return i}}return i};l.prototype.isEmpty=function(){return Object(s["d"])(this.items_)};l.prototype.clear=function(){this.rbush_.clear();this.items_={}};l.prototype.getExtent=function(e){var t=this.rbush_.data;return Object(o["k"])(t.minX,t.minY,t.maxX,t.maxY,e)};l.prototype.concat=function(e){this.rbush_.load(e.rbush_.all());for(var t in e.items_){this.items_[t|0]=e.items_[t|0]}};t["a"]=l},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var i=function e(t,r,i,n){this.minX=t;this.maxX=r;this.minY=i;this.maxY=n};function n(e,t,r,n,a){if(a!==undefined){a.minX=e;a.maxX=t;a.minY=r;a.maxY=n;return a}else{return new i(e,t,r,n)}}i.prototype.contains=function(e){return this.containsXY(e[1],e[2])};i.prototype.containsTileRange=function(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY};i.prototype.containsXY=function(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY};i.prototype.equals=function(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY};i.prototype.extend=function(e){if(e.minX<this.minX){this.minX=e.minX}if(e.maxX>this.maxX){this.maxX=e.maxX}if(e.minY<this.minY){this.minY=e.minY}if(e.maxY>this.maxY){this.maxY=e.maxY}};i.prototype.getHeight=function(){return this.maxY-this.minY+1};i.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]};i.prototype.getWidth=function(){return this.maxX-this.minX+1};i.prototype.intersects=function(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY};t["b"]=i},function(e,t,r){"use strict";r.d(t,"c",function(){return f});r.d(t,"d",function(){return h});r.d(t,"a",function(){return p});r.d(t,"b",function(){return m});var i=r(346);var n=r(122);var a=r(5);var o=r(271);var s=r(11);var l=r(12);var u=r(93);var c=r(347);function f(e){var t=e.getDefaultTileGrid();if(!t){t=g(e);e.setDefaultTileGrid(t)}return t}function h(e,t,r){var i=t[0];var n=e.getTileCoordCenter(t);var o=m(r);if(!Object(a["f"])(o,n)){var s=Object(a["E"])(o);var l=Math.ceil((o[0]-n[0])/s);n[0]+=s*l;return e.getTileCoordForCoordAndZ(n,i)}else{return t}}function d(e,t,r,i){var n=i!==undefined?i:o["a"].TOP_LEFT;var s=v(e,t,r);return new c["a"]({extent:e,origin:Object(a["y"])(e,n),resolutions:s,tileSize:r})}function p(e){var t={};Object(s["a"])(t,e!==undefined?e:{});if(t.extent===undefined){t.extent=Object(l["g"])("EPSG:3857").getExtent()}t.resolutions=v(t.extent,t.maxZoom,t.tileSize);delete t.maxZoom;return new c["a"](t)}function v(e,t,r){var o=t!==undefined?t:i["a"];var s=Object(a["A"])(e);var l=Object(a["E"])(e);var u=Object(n["d"])(r!==undefined?r:i["b"]);var c=Math.max(l/u[0],s/u[1]);var f=o+1;var h=new Array(f);for(var d=0;d<f;++d){h[d]=c/Math.pow(2,d)}return h}function g(e,t,r,i){var n=m(e);return d(n,t,r,i)}function m(e){e=Object(l["g"])(e);var t=e.getExtent();if(!t){var r=180*u["a"][u["b"].DEGREES]/e.getMetersPerUnit();t=Object(a["k"])(-r,-r,r,r)}return t}},function(e,t,r){"use strict";t["a"]={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"}},function(e,t,r){"use strict";r.d(t,"b",function(){return o});r.d(t,"a",function(){return c});r.d(t,"c",function(){return f});var i=r(22);var n=r(7);
/**
 * @license
 * Latitude/longitude spherical geodesy formulae taken from
 * http://www.movable-type.co.uk/scripts/latlong.html
 * Licensed under CC-BY-3.0.
 */var a=6371008.8;function o(e,t,r){var n=r||a;var o=Object(i["i"])(e[1]);var s=Object(i["i"])(t[1]);var l=(s-o)/2;var u=Object(i["i"])(t[0]-e[0])/2;var c=Math.sin(l)*Math.sin(l)+Math.sin(u)*Math.sin(u)*Math.cos(o)*Math.cos(s);return 2*n*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}function s(e,t){var r=0;for(var i=0,n=e.length;i<n-1;++i){r+=o(e[i],e[i+1],t)}return r}function l(e,t){var r=t||{};var i=r.radius||a;var o=r.projection||"EPSG:3857";var u=e.getType();if(u!==n["a"].GEOMETRY_COLLECTION){e=e.clone().transform(o,"EPSG:4326")}var c=0;var f=void 0,h=void 0,d=void 0,p=void 0,v=void 0,g=void 0;switch(u){case n["a"].POINT:case n["a"].MULTI_POINT:{break}case n["a"].LINE_STRING:case n["a"].LINEAR_RING:{f=e.getCoordinates();c=s(f,i);break}case n["a"].MULTI_LINE_STRING:case n["a"].POLYGON:{f=e.getCoordinates();for(d=0,p=f.length;d<p;++d){c+=s(f[d],i)}break}case n["a"].MULTI_POLYGON:{f=e.getCoordinates();for(d=0,p=f.length;d<p;++d){h=f[d];for(v=0,g=h.length;v<g;++v){c+=s(h[v],i)}}break}case n["a"].GEOMETRY_COLLECTION:{var m=e.getGeometries();for(d=0,p=m.length;d<p;++d){c+=l(m[d],t)}break}default:{throw new Error("Unsupported geometry type: "+u)}}return c}function u(e,t){var r=0;var n=e.length;var a=e[n-1][0];var o=e[n-1][1];for(var s=0;s<n;s++){var l=e[s][0];var u=e[s][1];r+=Object(i["i"])(l-a)*(2+Math.sin(Object(i["i"])(o))+Math.sin(Object(i["i"])(u)));a=l;o=u}return r*t*t/2}function c(e,t){var r=t||{};var i=r.radius||a;var o=r.projection||"EPSG:3857";var s=e.getType();if(s!==n["a"].GEOMETRY_COLLECTION){e=e.clone().transform(o,"EPSG:4326")}var l=0;var f=void 0,h=void 0,d=void 0,p=void 0,v=void 0,g=void 0;switch(s){case n["a"].POINT:case n["a"].MULTI_POINT:case n["a"].LINE_STRING:case n["a"].MULTI_LINE_STRING:case n["a"].LINEAR_RING:{break}case n["a"].POLYGON:{f=e.getCoordinates();l=Math.abs(u(f[0],i));for(d=1,p=f.length;d<p;++d){l-=Math.abs(u(f[d],i))}break}case n["a"].MULTI_POLYGON:{f=e.getCoordinates();for(d=0,p=f.length;d<p;++d){h=f[d];l+=Math.abs(u(h[0],i));for(v=1,g=h.length;v<g;++v){l-=Math.abs(u(h[v],i))}}break}case n["a"].GEOMETRY_COLLECTION:{var m=e.getGeometries();for(d=0,p=m.length;d<p;++d){l+=c(m[d],t)}break}default:{throw new Error("Unsupported geometry type: "+s)}}return l}function f(e,t,r,n){var o=n||a;var s=Object(i["i"])(e[1]);var l=Object(i["i"])(e[0]);var u=t/o;var c=Math.asin(Math.sin(s)*Math.cos(u)+Math.cos(s)*Math.sin(u)*Math.cos(r));var f=l+Math.atan2(Math.sin(r)*Math.sin(u)*Math.cos(s),Math.cos(u)-Math.sin(s)*Math.sin(c));return[Object(i["h"])(f),Object(i["h"])(c)]}},function(e,t,r){"use strict";var i=r(36);var n=function e(){};n.prototype.disposed_=false;n.prototype.dispose=function(){if(!this.disposed_){this.disposed_=true;this.disposeInternal()}};n.prototype.disposeInternal=i["c"];t["a"]=n},function(e,t,r){(function(e){+function(e){"use strict";var t=function(r,i){this.$element=e(r);this.options=e.extend({},t.DEFAULTS,i);this.$trigger=e('[data-toggle="collapse"][href="#'+r.id+'"],'+'[data-toggle="collapse"][data-target="#'+r.id+'"]');this.transitioning=null;if(this.options.parent){this.$parent=this.getParent()}else{this.addAriaAndCollapsedClass(this.$element,this.$trigger)}if(this.options.toggle)this.toggle()};t.VERSION="3.3.7";t.TRANSITION_DURATION=350;t.DEFAULTS={toggle:true};t.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"};t.prototype.show=function(){if(this.transitioning||this.$element.hasClass("in"))return;var r;var n=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(n&&n.length){r=n.data("bs.collapse");if(r&&r.transitioning)return}var a=e.Event("show.bs.collapse");this.$element.trigger(a);if(a.isDefaultPrevented())return;if(n&&n.length){i.call(n,"hide");r||n.data("bs.collapse",null)}var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0).attr("aria-expanded",true);this.$trigger.removeClass("collapsed").attr("aria-expanded",true);this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o]("");this.transitioning=0;this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var l=e.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",e.proxy(s,this)).emulateTransitionEnd(t.TRANSITION_DURATION)[o](this.$element[0][l])};t.prototype.hide=function(){if(this.transitioning||!this.$element.hasClass("in"))return;var r=e.Event("hide.bs.collapse");this.$element.trigger(r);if(r.isDefaultPrevented())return;var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",false);this.$trigger.addClass("collapsed").attr("aria-expanded",false);this.transitioning=1;var n=function(){this.transitioning=0;this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!e.support.transition)return n.call(this);this.$element[i](0).one("bsTransitionEnd",e.proxy(n,this)).emulateTransitionEnd(t.TRANSITION_DURATION)};t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};t.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(t,i){var n=e(i);this.addAriaAndCollapsedClass(r(n),n)},this)).end()};t.prototype.addAriaAndCollapsedClass=function(e,t){var r=e.hasClass("in");e.attr("aria-expanded",r);t.toggleClass("collapsed",!r).attr("aria-expanded",r)};function r(t){var r;var i=t.attr("data-target")||(r=t.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"");return e(i)}function i(r){return this.each(function(){var i=e(this);var n=i.data("bs.collapse");var a=e.extend({},t.DEFAULTS,i.data(),typeof r=="object"&&r);if(!n&&a.toggle&&/show|hide/.test(r))a.toggle=false;if(!n)i.data("bs.collapse",n=new t(this,a));if(typeof r=="string")n[r]()})}var n=e.fn.collapse;e.fn.collapse=i;e.fn.collapse.Constructor=t;e.fn.collapse.noConflict=function(){e.fn.collapse=n;return this};e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var n=e(this);if(!n.attr("data-target"))t.preventDefault();var a=r(n);var o=a.data("bs.collapse");var s=o?"toggle":n.data();i.call(a,s)})}(e)}).call(this,r(24))},function(e,t,r){var i,n,a;
/*!
 * jQuery UI Mouse 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/*!
 * jQuery UI Mouse 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(o){if(true){!(n=[r(24),r(366),r(103),r(224)],i=o,a=typeof i==="function"?i.apply(t,n):i,a!==undefined&&(e.exports=a))}else{}})(function(e){var t=false;e(document).on("mouseup",function(){t=false});return e.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(r){if(true===e.data(r.target,t.widgetName+".preventClickEvent")){e.removeData(r.target,t.widgetName+".preventClickEvent");r.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.off("."+this.widgetName);if(this._mouseMoveDelegate){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)}},_mouseDown:function(r){if(t){return}this._mouseMoved=false;this._mouseStarted&&this._mouseUp(r);this._mouseDownEvent=r;var i=this,n=r.which===1,a=typeof this.options.cancel==="string"&&r.target.nodeName?e(r.target).closest(this.options.cancel).length:false;if(!n||a||!this._mouseCapture(r)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(r)&&this._mouseDelayMet(r)){this._mouseStarted=this._mouseStart(r)!==false;if(!this._mouseStarted){r.preventDefault();return true}}if(true===e.data(r.target,this.widgetName+".preventClickEvent")){e.removeData(r.target,this.widgetName+".preventClickEvent")}this._mouseMoveDelegate=function(e){return i._mouseMove(e)};this._mouseUpDelegate=function(e){return i._mouseUp(e)};this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate);r.preventDefault();t=true;return true},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button){return this._mouseUp(t)}else if(!t.which){if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey){this.ignoreMissingWhich=true}else if(!this.ignoreMissingWhich){return this._mouseUp(t)}}}if(t.which||t.button){this._mouseMoved=true}if(this._mouseStarted){this._mouseDrag(t);return t.preventDefault()}if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==false;this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)}return!this._mouseStarted},_mouseUp:function(r){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(r.target===this._mouseDownEvent.target){e.data(r.target,this.widgetName+".preventClickEvent",true)}this._mouseStop(r)}if(this._mouseDelayTimer){clearTimeout(this._mouseDelayTimer);delete this._mouseDelayTimer}this.ignoreMissingWhich=false;t=false;r.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(1,eval)("this")}catch(e){if(typeof window==="object")r=window}e.exports=r},function(e,t,r){"use strict";var i=r(1);var n=r(91);var a=r(52);var o=angular.module("ngeoMiscSwipe",[]);o.factory("$verticalSwipe",[function(){var e=10;var t={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup",cancel:"pointercancel"}};function r(e){var t=e.originalEvent||e;var r=t.touches&&t.touches.length?t.touches:[t];var i=t.changedTouches&&t.changedTouches[0]||r[0];return{x:i.clientX,y:i.clientY}}function i(e,r){var i=[];angular.forEach(e,function(e){var n=t[e][r];if(n){i.push(n)}});return i.join(" ")}return{bind:function t(n,a,o){var s=void 0,l=void 0;var u=void 0;var c=void 0;var f=false;o=o||["mouse","touch","pointer"];n.on(i(o,"start"),function(e){u=r(e);f=true;s=0;l=0;c=u;if(a["start"]){a["start"](u,e)}});var h=i(o,"cancel");if(h){n.on(h,function(e){f=false;if(a["cancel"]){a["cancel"](e)}})}n.on(i(o,"move"),function(t){if(!f){return}if(!u){return}var i=r(t);s+=Math.abs(i.x-c.x);l+=Math.abs(i.y-c.y);c=i;if(s<e&&l<e){return}if(s>l){f=false;if(a["cancel"]){a["cancel"](t)}return}else{t.preventDefault();if(a["move"]){a["move"](i,t)}}});n.on(i(o,"end"),function(e){if(!f){return}f=false;if(a["end"]){a["end"](r(e),e)}})}}}]);o.makeSwipeDirective_=function(e,t,r){o.directive(e,["$parse","$verticalSwipe",function(i,n){var a=75;var o=.3;var s=30;return function(l,u,c){var f=i(c[e]);var h=void 0,d=void 0;function p(e){if(!h){return false}var r=(e.y-h.y)*t;var i=Math.abs(e.x-h.x);return d&&i<a&&r>0&&r>s&&i/r<o}var v=["touch"];if(!angular.isDefined(c["ngeoSwipeDisableMouse"])){v.push("mouse")}n.bind(u,{start:function e(t,r){h=t;d=true},cancel:function e(t){d=false},end:function e(t,i){if(p(t)){l.$apply(function(){u.triggerHandler(r);f(l,{$event:i})})}}},v)}}])};o.makeSwipeDirective_("ngeoSwipeDown",1,"swipedown");o.makeSwipeDirective_("ngeoSwipeUp",-1,"swipeup");var s=o;var l=r(123);var u=r(28);var c=r(11);var f=r(101);var h=r(47);var d=r(38);var p=r(15);var v=r(456);var g=r(454);var m=r(452);var y=r(274);var _=r(154);var b=angular.module("gmfQueryWindowComponent",[n["a"].module.name,a["a"].module.name,s.name,l["a"].module.name,"ngAnimate","ngTouch"]);b.config(["$animateProvider",function(e){e.classNameFilter(/gmf-animatable/)}]);b.value("gmfDisplayquerywindowTemplateUrl",function(e,t){var r=t["gmfDisplayquerywindowTemplateurl"];return r!==undefined?r:"gmf/query/windowComponent"});b.run(["$templateCache",function(e){e.put("gmf/query/windowComponent",r(450))}]);w.$inject=["$element","$attrs","gmfDisplayquerywindowTemplateUrl"];function w(e,t,r){return r(e,t)}b.component_={controller:"GmfDisplayquerywindowController as ctrl",bindings:{draggableContainment:"<?gmfDisplayquerywindowDraggableContainment",featuresStyleFn:"&gmfDisplayquerywindowFeaturesstyle",selectedFeatureStyleFn:"&gmfDisplayquerywindowSelectedfeaturestyle",defaultCollapsedFn:"&?gmfDisplayquerywindowDefaultcollapsed",desktop:"=gmfDisplayquerywindowDesktop",showUnqueriedLayers:"=gmfDisplayquerywindowShowunqueriedlayers"},templateUrl:w};b.component("gmfDisplayquerywindow",b.component_);b.Controller_=function(e,t,r,i,n){var a=this;this.draggableContainment;this.desktop=false;this.collapsed=!this.desktop;this.showUnqueriedLayers_=false;this.sourcesFilter={queried:true};this.ngeoQueryResult={sources:[],total:0,pending:false};this.ngeoMapQuerent_=i;this.selectedSource=null;this.features_=new u["b"];this.ngeoFeatureOverlayMgr_=n;this.highlightFeatures_=new u["b"];this.source=null;this.feature=null;this.currentResult=-1;this.isNext=true;this.animate=0;this.open=false;this.element_=e;t.$watchCollection(function(){return r},function(e,t){a.updateQueryResult_(e);if(e.total>0){a.show()}else if(t!==e){a.close()}})};b.Controller_.$inject=["$element","$scope","ngeoQueryResult","ngeoMapQuerent","ngeoFeatureOverlayMgr"];b.Controller_.prototype.$onInit=function(){this.draggableContainment=this.draggableContainment||"document";this.desktop=this.desktop;this.collapsed=this["defaultCollapsedFn"]?this["defaultCollapsedFn"]()===true:!this.desktop;this.showUnqueriedLayers_=this["showUnqueriedLayers"]?this["showUnqueriedLayers"]===true:false;this.sourcesFilter=this.showUnqueriedLayers_?{}:{queried:true};var e=this.ngeoFeatureOverlayMgr_.getFeatureOverlay();e.setFeatures(this.features_);var t=this["featuresStyleFn"]();if(t!==undefined){i["a"].assertInstanceof(t,p["c"]);e.setStyle(t)}var r=this.ngeoFeatureOverlayMgr_.getFeatureOverlay();r.setFeatures(this.highlightFeatures_);var n=this["selectedFeatureStyleFn"]();if(n!==undefined){i["a"].assertInstanceof(n,p["c"])}else{var a=new h["a"]({color:[255,0,0,.6]});var o=new d["a"]({color:[255,0,0,1],width:2});n=new p["c"]({fill:a,image:new f["a"]({fill:a,radius:5,stroke:o}),stroke:o})}r.setStyle(n);if(this.desktop){this.element_.find(".gmf-displayquerywindow .windowcontainer").draggable({cancel:"input,textarea,button,select,option,tr",containment:this.draggableContainment});this.element_.find(".gmf-displayquerywindow .windowcontainer").resizable({minHeight:240,minWidth:240})}};b.Controller_.prototype.show=function(){this.clear();this.updateFeatures_()};b.Controller_.prototype.updateFeatures_=function(){this.setCurrentResult_(0,false);if(this.source!==null){this.collectFeatures_();this.highlightCurrentFeature_();this.open=true}};b.Controller_.prototype.setCurrentResult_=function(e,t){var r=false;if(e!==this.currentResult){var i=void 0,n=void 0,a=void 0;var o=this.feature;var s=this.ngeoQueryResult.sources;this.currentResult=e;for(i=0;i<s.length;i++){n=s[i];if(this.selectedSource!==null&&this.selectedSource!==n){continue}a=n.features;if(e>=a.length){e-=a.length}else{this.source=n;this.feature=n.features[e];r=true;break}}if(t){this.highlightCurrentFeature_(o)}}return r};b.Controller_.prototype.previous=function(){var e=this.currentResult-1;if(e<0){e=this.getResultLength()-1}var t=this.setCurrentResult_(e,true);if(t){this.animate_(false)}};b.Controller_.prototype.next=function(){var e=this.currentResult+1;var t=this.getResultLength()-1;if(e>t){e=0}var r=this.setCurrentResult_(e,true);if(r){this.animate_(true)}};b.Controller_.prototype.updateQueryResult_=function(e){this.ngeoQueryResult.total=0;this.ngeoQueryResult.sources.length=0;for(var t=0;t<e.sources.length;t++){var r=e.sources[t];r.features=r.features.filter(function(e){i["a"].assert(e);return!c["d"](a["a"].getFilteredFeatureValues(e))});this.ngeoQueryResult.sources.push(r);this.ngeoQueryResult.total+=r.features.length}};b.Controller_.prototype.getResultLength=function(){if(this.selectedSource===null){return this.ngeoQueryResult.total}else{return this.selectedSource.features.length}};b.Controller_.prototype.isFirst=function(){return this.currentResult==0};b.Controller_.prototype.isLast=function(){return this.currentResult==this.getResultLength()-1};b.Controller_.prototype.getFeatureValues=function(){if(!this.feature){return null}return a["a"].getFilteredFeatureValues(this.feature)};b.Controller_.prototype.animate_=function(e){this.isNext=e;this.animate++};b.Controller_.prototype.collectFeatures_=function(){var e=this.ngeoQueryResult.sources;this.features_.clear();for(var t=0;t<e.length;t++){var r=e[t];if(this.selectedSource!==null&&this.selectedSource!==r){continue}var i=r.features;for(var n=0;n<i.length;n++){this.features_.push(i[n])}}};b.Controller_.prototype.highlightCurrentFeature_=function(e){this.highlightFeatures_.clear();this.features_.remove(this.feature);this.highlightFeatures_.push(this.feature);if(e!==undefined){this.features_.push(e)}};b.Controller_.prototype.close=function(){this.open=false;this.clear();this.ngeoMapQuerent_.clear()};b.Controller_.prototype.clear=function(){this.feature=null;this.source=null;this.currentResult=-1;this.features_.clear();this.highlightFeatures_.clear();this.selectedSource=null};b.Controller_.prototype.setSelectedSource=function(e){if(e!==null&&e.features.length<=0){return}this.clear();this.selectedSource=e;this.updateFeatures_()};b.controller("GmfDisplayquerywindowController",b.Controller_);var S=t["a"]=b},function(e,t,r){"use strict";var i=r(1);var n=r(2);var a=r(21);var o=r(144);var s=r(51);var l=r(34);var u=r(11);var c=r(101);var f=r(47);var h=r(15);var d=r(183);var p=r(91);var v=r(291);var g=r(154);var m=angular.module("gmfProfile",[d["a"].module.name,p["a"].module.name,v["a"].name]);m.value("gmfProfileTemplateUrl",function(e,t){var r=t["gmfProfileTemplateurl"];return r!==undefined?r:"gmf/profile"});m.run(["$templateCache",function(e){e.put("gmf/profile",r(482))}]);y.$inject=["$element","$attrs","gmfProfileTemplateUrl"];function y(e,t,r){return r(e,t)}m.component_={controller:"GmfProfileController as ctrl",bindings:{active:"=gmfProfileActive",line:"=gmfProfileLine",getMapFn:"&?gmfProfileMap",getLinesConfigurationFn:"&gmfProfileLinesconfiguration",getHoverPointStyleFn:"&?gmfProfileHoverpointstyle",getNbPointsFn:"&?gmfProfileNumberofpoints",getOptionsFn:"&?gmfProfileOptions"},templateUrl:y};m.component("gmfProfile",m.component_);m.Controller_=function(e,t,r,i,n,o,s,l){var u=this;this.$scope_=e;this.$http_=t;this.$element_=r;this.$filter_=i;this.gettextCatalog_=n;this.pointHoverOverlay_=o.getFeatureOverlay();this.gmfProfileJsonUrl_=s;this.ngeoCsvDownload_=l;this.map_=null;this.linesConfiguration_=null;this.layersNames_=[];this.nbPoints_=100;this.line;this.profileData=[];this.currentPoint={coordinate:undefined,distance:undefined,elevations:{},xUnits:undefined,yUnits:undefined};this.profileHighlight=-1;this.measureTooltip_=null;this.measureTooltipElement_=null;this.snappedPoint_=new a["a"];this.pointHoverOverlay_.addFeature(this.snappedPoint_);this.profileLabels_={xAxis:n.getString("Distance"),yAxis:n.getString("Elevation")};this.profileOptions=null;this.active=false;this.pointerMoveKey_;this.isErrored=false;e.$watch(function(){return u.active},function(e,t){if(t!==e){u.updateEventsListening_()}});e.$watch(function(){return u.line},function(e,t){if(t!==e){u.update_()}});this.updateEventsListening_()};m.Controller_.$inject=["$scope","$http","$element","$filter","gettextCatalog","ngeoFeatureOverlayMgr","gmfProfileJsonUrl","ngeoCsvDownload"];m.Controller_.prototype.$onInit=function(){this.map_=this["getMapFn"]?this["getMapFn"]():null;this.nbPoints_=this["getNbPointsFn"]?this["getNbPointsFn"]():100;var e=void 0;var t=this["getHoverPointStyleFn"];if(t){e=t();i["a"].assertInstanceof(e,h["c"])}else{e=new h["c"]({image:new c["a"]({fill:new f["a"]({color:"#ffffff"}),radius:3})})}this.pointHoverOverlay_.setStyle(e);var r=this["getLinesConfigurationFn"]();i["a"].assertInstanceof(r,Object);this.linesConfiguration_=r;for(var n in this.linesConfiguration_){this.layersNames_.push(n);var a=this.linesConfiguration_[n];if(!a.zExtractor){this.linesConfiguration_[n].zExtractor=this.getZFactory_(n)}}this.profileOptions={linesConfiguration:this.linesConfiguration_,distanceExtractor:this.getDist_,hoverCallback:this.hoverCallback_.bind(this),outCallback:this.outCallback_.bind(this),i18n:this.profileLabels_};var o=this["getOptionsFn"];if(o){var s=o();i["a"].assertObject(s);u["a"](this.profileOptions,s)}};m.Controller_.prototype.update_=function(){this.isErrored=false;if(this.line){this.getJsonProfile_()}else{this.profileData=[]}this.active=!!this.line};m.Controller_.prototype.updateEventsListening_=function(){if(this.active&&this.map_!==null){this.pointerMoveKey_=n["a"](this.map_,"pointermove",this.onPointerMove_.bind(this))}else{n["e"](this.pointerMoveKey_)}};m.Controller_.prototype.onPointerMove_=function(e){if(e.dragging||!this.line){return}var t=this.map_.getEventCoordinate(e.originalEvent);var r=this.line.getClosestPoint(t);var i=new s["a"]([r,t]);var n=i.getLength()/this.map_.getView().getResolution();if(n<16){this.profileHighlight=this.getDistanceOnALine_(r,this.line)}else{this.profileHighlight=-1}this.$scope_.$apply()};m.Controller_.prototype.getDistanceOnALine_=function(e,t){var r=void 0;var i=0;var n=[e[0]-.5,e[1]-.5,e[0]+.5,e[1]+.5];this.line.forEachSegment(function(t,a){r=new s["a"]([t,a]);if(r.intersectsExtent(n)){r.setCoordinates([t,e]);return i+=r.getLength()}else{i+=r.getLength()}});return i};m.Controller_.prototype.hoverCallback_=function(e,t,r,i,n){var a=void 0;var o=[e.x,e.y];for(a in i){this.currentPoint.elevations[a]=i[a]}this.currentPoint.distance=t;this.currentPoint.xUnits=r;this.currentPoint.yUnits=n;this.currentPoint.coordinate=o;var s=new l["a"](o);this.createMeasureTooltip_();this.measureTooltipElement_.innerHTML=this.getTooltipHTML_();this.measureTooltip_.setPosition(o);this.snappedPoint_.setGeometry(s)};m.Controller_.prototype.outCallback_=function(){this.currentPoint.coordinate=undefined;this.currentPoint.distance=undefined;this.currentPoint.elevations={};this.currentPoint.xUnits=undefined;this.currentPoint.yUnits=undefined;this.removeMeasureTooltip_();this.snappedPoint_.setGeometry(null)};m.Controller_.prototype.getTooltipHTML_=function(){var e=this.gettextCatalog_;var t="&nbsp;: ";var r=void 0,i=void 0;var n=[];var a=this.$filter_("number");var o=this.currentPoint.xUnits==="m"?0:2;var s=a(this.currentPoint.distance,o);n.push(this.profileLabels_.xAxis+" "+t+" "+s+"&nbsp;"+this.currentPoint.xUnits);for(r in this.currentPoint.elevations){i=e.getString(r);var l=this.currentPoint.elevations[r];var u=l===null?e.getString("no value"):a(l,0)+"&nbsp;"+this.currentPoint.yUnits;n.push(i+" "+t+" "+u)}return n.join("</br>")};m.Controller_.prototype.createMeasureTooltip_=function(){this.removeMeasureTooltip_();this.measureTooltipElement_=document.createElement("div");this.measureTooltipElement_.className+="tooltip ngeo-tooltip-measure";this.measureTooltip_=new o["a"]({element:this.measureTooltipElement_,offset:[0,-15],positioning:"bottom-center"});this.map_.addOverlay(this.measureTooltip_)};m.Controller_.prototype.removeMeasureTooltip_=function(){if(this.measureTooltipElement_!==null){this.measureTooltipElement_.parentNode.removeChild(this.measureTooltipElement_);this.measureTooltipElement_=null;this.map_.removeOverlay(this.measureTooltip_)}};m.Controller_.prototype.getStyle=function(e){var t=this.linesConfiguration_[e];if(!t){return{}}return{color:t.color||"#F00"}};m.Controller_.prototype.getLayersNames=function(){return this.layersNames_.slice(0)};m.Controller_.prototype.getZFactory_=function(e){var t=function t(r){if("values"in r&&e in r["values"]&&r["values"][e]){return parseFloat(r["values"][e])}return null};return t};m.Controller_.prototype.getDist_=function(e){if("dist"in e){return e["dist"]}return 0};m.Controller_.prototype.getJsonProfile_=function(){var e={type:"LineString",coordinates:this.line.getCoordinates()};var t={layers:this.layersNames_.join(","),geom:JSON.stringify(e),nbPoints:this.nbPoints_};this.$http_({url:this.gmfProfileJsonUrl_,method:"POST",params:t,paramSerializer:"$httpParamSerializerJQLike",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(this.getProfileDataSuccess_.bind(this),this.getProfileDataError_.bind(this))};m.Controller_.prototype.getProfileDataSuccess_=function(e){var t=e.data["profile"];if(t instanceof Array){this.profileData=t}};m.Controller_.prototype.getProfileDataError_=function(e){this.isErrored=true;console.error("Can not get JSON profile.")};m.Controller_.prototype.downloadCsv=function(){if(this.profileData.length===0){return}var e=[];var t=false;var r=this.profileData[0];if("dist"in r){e.push({name:"distance"});t=true}var i=[];for(var n in r["values"]){e.push({name:n});i.push(n)}e.push({name:"x"});e.push({name:"y"});var a=this.profileData.map(function(e){var r={};if(t){r["distance"]=e["dist"]}i.forEach(function(t){r[t]=e["values"][t]});r["x"]=e["x"];r["y"]=e["y"];return r});this.ngeoCsvDownload_.startDownload(a,e,"profile.csv")};m.controller("GmfProfileController",m.Controller_);var _=m;var b=r(308);var w=r(578);var S=angular.module("gmfProfileModule",[_.name,b["a"].name]);var C=t["a"]=S},function(e,t,r){"use strict";var i=r(189);var n=r(1);var a=r(135);var o=r(2);var s=r(154);var l=angular.module("gmfRasterComponent",[i["a"].module.name,a["a"].name]);l.run(["$templateCache",function(e){e.put("gmf/raster/widgetComponent",r(481))}]);l.value("gmfElevationwidgetTemplateUrl",function(e){var t=e["gmfElevationwidgetTemplateUrl"];return t!==undefined?t:"gmf/raster/widgetComponent"});u.$inject=["$attrs","gmfElevationwidgetTemplateUrl"];function u(e,t){return t(e)}l.component_=function(){return{restrict:"A",controller:"GmfElevationController as ctrl",bindToController:true,scope:{active:"<gmfElevationActive",elevation:"=gmfElevationElevation",layersconfig:"=gmfElevationLayersconfig",loading:"=?gmfElevationLoading",layer:"<gmfElevationLayer",map:"=gmfElevationMap"},link:function e(t,r,i){var n=t["ctrl"];t.$watch(function(){return n.active},function(e){this.toggleActive_(e)}.bind(n));t.$watch(function(){return n.layer},function(e){this.layer=e;this.elevation=null}.bind(n))}}};l.directive("gmfElevation",l.component_);l.Controller_=function(e,t,r,i,n){this.filter_=t;this.ngeoDebounce_=r;this.gmfRaster_=i;this.gettextCatalog=n;this.layersConfig;this.active;this.elevation;this.layer;this.map;this.listenerKeys_=[];this.scope_=e;this.inViewport_=false;this.loading=false};l.Controller_.$inject=["$scope","$filter","ngeoDebounce","gmfRaster","gettextCatalog"];l.Controller_.prototype.toggleActive_=function(e){var t=this;this.elevation=undefined;if(e){n["a"].assert(this.listenerKeys_.length===0);this.listenerKeys_.push(o["a"](this.map,"pointermove",function(e){var t=this;this.scope_.$apply(function(){t.inViewport_=true;t.elevation=undefined;t.loading=false})},this));this.listenerKeys_.push(o["a"](this.map,"pointermove",this.ngeoDebounce_(this.pointerStop_.bind(this),500,true)));this.listenerKeys_.push(o["a"](this.map.getViewport(),"mouseout",function(){t.scope_.$apply(function(){t.elevation=undefined;t.inViewport_=false;t.loading=false})}))}else{this.elevation=undefined;this.listenerKeys_.forEach(o["e"]);this.listenerKeys_.length=0}};l.Controller_.prototype.pointerStop_=function(e){if(this.inViewport_){this.loading=true;var t={layers:this.layer};this.gmfRaster_.getRaster(e.coordinate,t).then(this.getRasterSuccess_.bind(this),this.getRasterError_.bind(this))}};l.Controller_.prototype.getRasterSuccess_=function(e){n["a"].assert(this.layer,"A layer should be selected");var t=e[this.layer];if(t!==undefined&&t!==null){var r=this.layersconfig[this.layer]||{};var i=r.filter||"number";var a=r.args||[];var o=r.hasOwnProperty("postfix")?r.postfix:"m";var s=o.length>0?r.hasOwnProperty("separator")?r.separator:" ":"";var l=Array.prototype.concat([t],a);this.elevation=this.filter_(i).apply(undefined,l)+s+o}else{var u=this.gettextCatalog;this.elevation=u.getString("No value")}this.loading=false};l.Controller_.prototype.getRasterError_=function(){console.error("Error on getting the raster.");this.elevation=undefined;this.loading=false};l.controller("GmfElevationController",l.Controller_);l.widgetComponent_={controller:"gmfElevationwidgetController as ctrl",bindings:{map:"<gmfElevationwidgetMap",layers:"<gmfElevationwidgetLayers",layersconfig:"=gmfElevationwidgetLayersconfig",active:"<gmfElevationwidgetActive"},templateUrl:u};l.component("gmfElevationwidget",l.widgetComponent_);l.WidgetController_=function(){this.map;this.layers;this.layersconfig;this.active;this.selectedElevationLayer};l.WidgetController_.prototype.$onInit=function(){this.selectedElevationLayer=this.layers[0]};l.controller("gmfElevationwidgetController",l.WidgetController_);l.LayerConfig;var c=l;var f=angular.module("gmfRasterModule",[c.name,i["a"].module.name]);var h=t["a"]=f},function(e,t,r){"use strict";var i=r(189);var n=r(1);var a=r(144);var o=r(12);var s=r(2);var l=r(11);var u=angular.module("gmfContextualdata",[i["a"].module.name]);u.directive_=function(){return{restrict:"A",scope:false,controller:"GmfContextualdataController as cdCtrl",bindToController:{map:"<gmfContextualdataMap",projections:"<gmfContextualdataProjections",callback:"<gmfContextualdataCallback"},link:function e(t,r,i,n){n.init()}}};u.directive("gmfContextualdata",u.directive_);u.Controller_=function(e,t,r,i){this.map;this.projections;this.callback;this.overlay_;this.$compile_=e;this.timeout_=t;this.$scope_=r;this.gmfRaster_=i;angular.element("body").on("mousedown",this.hidePopover.bind(this))};u.Controller_.$inject=["$compile","$timeout","$scope","gmfRaster"];u.Controller_.prototype.init=function(){this.preparePopover_();var e=this.map.getTargetElement();n["a"].assertElement(e);s["a"](e,"contextmenu",this.handleMapContextMenu_,this)};u.Controller_.prototype.handleMapContextMenu_=function(e){var t=this;this.$scope_.$apply(function(){var r=t.map.getEventPixel(e);var i=t.map.getCoordinateFromPixel(r);t.setContent_(i);e.preventDefault();t.hidePopover();t.showPopover();t.timeout_(function(){t.overlay_.setPosition(i)})})};u.Controller_.prototype.setContent_=function(e){var t=this.$scope_.$new(true);this.$compile_(this.content_)(t);var r=this.map.getView().getProjection().getCode();this.projections.forEach(function(i){var n=o["m"](e,r,"EPSG:"+i);t["coord_"+i]=n;t["coord_"+i+"_eastern"]=n[0];t["coord_"+i+"_northern"]=n[1]});var i=function(r){l["a"](t,r);if(this.callback){l["a"](t,this.callback.call(this,e,r))}}.bind(this);var n=function e(t){console.error("Error on getting the raster.")};this.gmfRaster_.getRaster(e).then(i,n)};u.Controller_.prototype.preparePopover_=function(){var e=document.createElement("DIV");e.classList.add("popover");e.classList.add("bottom");e.classList.add("gmf-contextualdata");angular.element(e).css("position","relative");var t=document.createElement("DIV");t.classList.add("arrow");e.appendChild(t);this.content_=document.createElement("DIV");this.content_.setAttribute("gmf-contextualdatacontent","");this.content_.classList.add("popover-content");e.appendChild(this.content_);this.overlay_=new a["a"]({element:e,stopEvent:true,autoPan:true,autoPanAnimation:{duration:250},positioning:"top-center"});this.map.addOverlay(this.overlay_)};u.Controller_.prototype.showPopover=function(){var e=this.overlay_.getElement();angular.element(e).css("display","block")};u.Controller_.prototype.hidePopover=function(){var e=this.overlay_.getElement();angular.element(e).css("display","none")};u.controller("GmfContextualdataController",u.Controller_);u.contentDirective_=function(e){return{restrict:"A",scope:true,templateUrl:e}};u.contentDirective_.$inject=["gmfContextualdatacontentTemplateUrl"];u.directive("gmfContextualdatacontent",u.contentDirective_);var c=u;var f=r(621);var h=angular.module("gmfContextualdataModule",[c.name]);var d=t["a"]=h},function(e,t,r){"use strict";var i=r(1);var n=r(69);var a=r(3);var o=r(2);var s=r(21);var l=r(36);var u=r(215);var c=r(49);var f=r(33);var h=function e(t){this.angle_=t.angle!==undefined?t.angle:0;this.radius_=t.radius;this.sides_=t.sides!==undefined?t.sides:3;this.listenerKeys_=[];f["a"].call(this,{handleEvent:l["b"]})};a["d"](h,f["a"]);h.prototype.setActive=function(e){f["a"].prototype.setActive.call(this,e);if(this.getMap()){if(e){this.enable_()}else{this.disable_()}}};h.prototype.setMap=function(e){var t=this.getActive();var r=this.getMap();if(r&&t){this.disable_()}f["a"].prototype.setMap.call(this,e);if(e&&t){this.enable_()}};h.prototype.enable_=function(){var e=this.getMap();i["a"].assert(e,"Map should be set.");this.listenerKeys_.push(o["a"](e,"click",this.handleMapClick_,this))};h.prototype.disable_=function(){var e=this.getMap();i["a"].assert(e,"Map should be set.");this.listenerKeys_.forEach(o["e"]);this.listenerKeys_.length=0};h.prototype.handleMapClick_=function(e){var t=e.coordinate;var r=c["a"].fromCircle(new u["a"](t),this.sides_);c["a"].makeRegular(r,t,this.radius_,this.angle_);var i=new n["a"]("drawend",{feature:new s["a"](r)});this.dispatchEvent(i)};var d=h;var p=angular.module("ngeoCreateregularpolygonfromclick",[]);p.directive_=function(){return{controller:"ngeoCreateregularpolygonfromclickController",bindToController:true,scope:{active:"=ngeoCreateregularpolygonfromclickActive",angle:"<?ngeoCreateregularpolygonfromclickAngle",features:"=ngeoCreateregularpolygonfromclickFeatures",map:"=ngeoCreateregularpolygonfromclickMap",radius:"<ngeoCreateregularpolygonfromclickRadius",sides:"<?ngeoCreateregularpolygonfromclickSides"}}};p.directive("ngeoCreateregularpolygonfromclick",p.directive_);p.Controller_=function(e){var t=this;this.active=false;e.$watch(function(){return t.active},function(e){t.interaction_.setActive(e)});this.angle;this.features;this.map;this.radius;this.sides;this.interaction_;this.interactionListenerKey_;e.$on("$destroy",this.handleDestroy_.bind(this))};p.Controller_.$inject=["$scope"];p.Controller_.prototype.$onInit=function(){this.interaction_=new d({angle:this.angle,radius:this.radius,sides:this.sides});this.interaction_.setActive(this.active);this.interactionListenerKey_=o["a"](this.interaction_,"drawend",this.handleDrawEnd_,this);this.map.addInteraction(this.interaction_)};p.Controller_.prototype.handleDrawEnd_=function(e){var t=new s["a"](e.feature.getGeometry());this.features.push(t)};p.Controller_.prototype.handleDestroy_=function(){o["e"](this.interactionListenerKey_);this.interaction_.setActive(false);this.map.removeInteraction(this.interaction_)};p.controller("ngeoCreateregularpolygonfromclickController",p.Controller_);var v=t["a"]=p},function(e,t,r){"use strict";var i=r(19);var n=r(240);var a=r(2);var o=angular.module("gmfBackgroundlayerselector",[i["a"].module.name,n["a"].module.name]);o.value("gmfBackgroundlayerselectorTemplateUrl",function(e,t){var r=t["gmfBackgroundlayerselectorTemplateurl"];return r!==undefined?r:"gmf/backgroundlayerselector"});o.run(["$templateCache",function(e){e.put("gmf/backgroundlayerselector",r(532))}]);s.$inject=["$element","$attrs","gmfBackgroundlayerselectorTemplateUrl"];function s(e,t,r){return r(e,t)}o.component_={controller:"GmfBackgroundlayerselectorController as ctrl",bindings:{map:"=gmfBackgroundlayerselectorMap",opacityOptions:"=gmfBackgroundlayerOpacityOptions",select:"&?gmfBackgroundlayerselectorSelect"},templateUrl:s};o.component("gmfBackgroundlayerselector",o.component_);o.Controller_=function(e,t,r){var i=this;this.map;this.opacityOptions;this.select;this.bgLayer;this.bgLayers;this.opacityLayer;this.gmfThemes_=r;this.listenerKeys_=[];this.listenerKeys_.push(a["a"](r,"change",this.handleThemesChange_,this));this.backgroundLayerMgr_=t;this.listenerKeys_.push(a["a"](this.backgroundLayerMgr_,"change",function(e){i.bgLayer=e.detail.current}));e.$on("$destroy",this.handleDestroy_.bind(this))};o.Controller_.$inject=["$scope","ngeoBackgroundLayerMgr","gmfThemes"];o.Controller_.prototype.$onInit=function(){this.handleThemesChange_()};o.Controller_.prototype.handleThemesChange_=function(){var e=this;this.gmfThemes_.getBgLayers().then(function(t){e.bgLayers=t;if(e.opacityOptions!==undefined){var r=t.find(function(t){return t.get("label")===e.opacityOptions});if(r!==undefined){e.setOpacityBgLayer(r);e.opacityLayer=r;e.bgLayers=e.bgLayers.slice();var i=e.bgLayers.findIndex(function(t){return t===e.opacityLayer});e.bgLayers.splice(i,1);e.bgLayers.push(r)}}})};o.Controller_.prototype.getSetBgLayerOpacity=function(e){if(e){this.opacityLayer.setOpacity(e)}return this.opacityLayer.getOpacity()};o.Controller_.prototype.setLayer=function(e,t){this.bgLayer=e;this.backgroundLayerMgr_.set(this.map,e);if(!t&&this.select){this.select()}};o.Controller_.prototype.setOpacityBgLayer=function(e){this.backgroundLayerMgr_.setOpacityBgLayer(this.map,e)};o.Controller_.prototype.handleDestroy_=function(){this.listenerKeys_.forEach(a["e"]);this.listenerKeys_.length=0};o.controller("GmfBackgroundlayerselectorController",o.Controller_);var l=o;var u=angular.module("gmfBackgroundlayerselectorModule",[l.name]);var c=t["a"]=u},function(e,t,r){"use strict";var i=r(1);var n=r(66);var a=r(3);var o=r(176);var s=r(76);var l=r(143);var u=r(22);var c=r(339);var f=r(101);var h=r(116);var d=function e(){this.geojsonFormat=new o["a"]};d.PrintStyleType={LINE_STRING:"LineString",POINT:"Point",POLYGON:"Polygon"};d.PrintStyleTypes_={LineString:d.PrintStyleType.LINE_STRING,Point:d.PrintStyleType.POINT,Polygon:d.PrintStyleType.POLYGON,MultiLineString:d.PrintStyleType.LINE_STRING,MultiPoint:d.PrintStyleType.POINT,MultiPolygon:d.PrintStyleType.POLYGON};d.prototype.encodeVectorLayer=function(e,t,r){var n=t.getSource();i["a"].assertInstanceof(n,s["b"]);var o=n.getFeatures();var l=[];var u={version:2};for(var c=0,f=o.length;c<f;++c){var h=o[c];var d=null;var p=h.getStyleFunction()||t.getStyleFunction();if(p!==undefined){d=p.call(t,h,r)}var v=this.geojsonFormat.writeFeatureObject(h);var g=d!==null&&!Array.isArray(d)?[d]:d;i["a"].assert(Array.isArray(g));if(g!==null&&g.length>0){var m=false;for(var y=0,_=g.length;y<_;++y){var b=g[y];var w=b.getGeometry();var S=void 0;if(!w){S=v;w=h.getGeometry();if(!w){continue}if(!m){l.push(S);m=true}}else{var C=h.clone();C.setGeometry(w);S=this.geojsonFormat.writeFeatureObject(C);w=C.getGeometry();C=null;l.push(S)}var x=w.getType();if(S.properties===null){S.properties={}}var O="_ngeo_style_"+y;var T=a["c"](b).toString()+"-"+x;this.encodeVectorStyle(u,x,b,T,O);S.properties[O]=T}}}if(l.length>0){var E={type:"FeatureCollection",features:l};var M={geoJson:E,opacity:t.getOpacity(),style:u,type:"geojson"};e.push(M)}};d.prototype.encodeVectorStyle=function(e,t,r,i,n){if(!(t in d.PrintStyleTypes_)){return}var a=d.PrintStyleTypes_[t];var o="["+n+" = '"+i+"']";if(o in e){return}var s={symbolizers:[]};e[o]=s;var l=r.getFill();var u=r.getImage();var c=r.getStroke();var f=r.getText();if(a===d.PrintStyleType.POLYGON){if(l!==null){this.encodeVectorStylePolygon(s.symbolizers,l,c)}}else if(a===d.PrintStyleType.LINE_STRING){if(c!==null){this.encodeVectorStyleLine(s.symbolizers,c)}}else if(a===d.PrintStyleType.POINT){if(u!==null){this.encodeVectorStylePoint(s.symbolizers,u)}}if(f!==null){this.encodeTextStyle(s.symbolizers,f)}};d.prototype.encodeVectorStyleFill=function(e,t){var r=t.getColor();if(r!==null){i["a"].assert(typeof r==="string"||Array.isArray(r));r=h["a"](r);i["a"].assert(Array.isArray(r),"only supporting fill colors");e.fillColor=n["a"].rgbArrayToHex(r);e.fillOpacity=r[3]}};d.prototype.encodeVectorStyleLine=function(e,t){var r={type:"line"};this.encodeVectorStyleStroke(r,t);e.push(r)};d.prototype.encodeVectorStylePoint=function(e,t){var r=void 0;if(t instanceof f["a"]){r={type:"point"};r.pointRadius=t.getRadius();var i=t.getFill();if(i!==null){this.encodeVectorStyleFill(r,i)}var n=t.getStroke();if(n!==null){this.encodeVectorStyleStroke(r,n)}}else if(t instanceof c["a"]){var a=t.getSrc();if(a!==undefined){r={type:"point",externalGraphic:a};var o=t.getOpacity();if(o!==null){r.graphicOpacity=o}var s=t.getSize();if(s!==null){var h=t.getScale();if(isNaN(h)){h=1}r.graphicWidth=s[0]*h;r.graphicHeight=s[1]*h}var d=t.getRotation();if(isNaN(d)){d=0}r.rotation=u["h"](d)}}else if(t instanceof l["a"]){var p=t.getPoints();if(p!==null){r={type:"point"};if(p===4){r.graphicName="square"}else if(p===3){r.graphicName="triangle"}else if(p===5){r.graphicName="star"}else if(p===8){r.graphicName="cross"}var v=t.getSize();if(v!==null){r.graphicWidth=v[0];r.graphicHeight=v[1]}var g=t.getRotation();if(!isNaN(g)&&g!==0){r.rotation=u["h"](g)}var m=t.getOpacity();if(m!==null){r.graphicOpacity=m}var y=t.getStroke();if(y!==null){this.encodeVectorStyleStroke(r,y)}var _=t.getFill();if(_!==null){this.encodeVectorStyleFill(r,_)}}}if(r!==undefined){e.push(r)}};d.prototype.encodeVectorStylePolygon=function(e,t,r){var i={type:"polygon"};this.encodeVectorStyleFill(i,t);if(r!==null){this.encodeVectorStyleStroke(i,r)}e.push(i)};d.prototype.encodeVectorStyleStroke=function(e,t){var r=t.getColor();if(r!==null){i["a"].assert(typeof r==="string"||Array.isArray(r));var a=h["a"](r);i["a"].assert(Array.isArray(a),"only supporting stroke colors");e.strokeColor=n["a"].rgbArrayToHex(a);e.strokeOpacity=a[3]}var o=t.getLineDash();if(o!==null){e.strokeDashstyle=o.join(" ")}var s=t.getWidth();if(s!==undefined){e.strokeWidth=s}var l=t.getLineCap();if(l){e.strokeLinecap=t.getLineCap()}};d.prototype.encodeTextStyle=function(e,t){var r={type:"Text"};var a=t.getText();if(a!==undefined){r.label=a;var o="c";var s="m";var l=t.getTextAlign();if(l==="left"||l==="start"){o="l"}else if(l==="right"||l==="end"){o="r"}var u=t.getTextBaseline();if(u==="bottom"){s="l"}else if(u==="top"){s="t"}r.labelAlign=""+o+s;var c=t.getRotation();if(c!==undefined){r.labelRotation=(c*180/Math.PI).toString();r.labelAlign="cm"}var f=t.getFont();if(f!==undefined){var d=f.split(" ");if(d.length>=3){r.fontWeight=d[0];r.fontSize=d[1];r.fontFamily=d.splice(2).join(" ")}}var p=t.getStroke();if(p!==null){var v=p.getColor();i["a"].assert(typeof v==="string"||Array.isArray(v));var g=h["a"](v);i["a"].assert(Array.isArray(g),"only supporting stroke colors");r.haloColor=n["a"].rgbArrayToHex(g);r.haloOpacity=g[3];var m=p.getWidth();if(m!==undefined){r.haloRadius=m/2}}var y=t.getFill();if(y!==null){var _=y.getColor();i["a"].assert(typeof _==="string"||Array.isArray(_));var b=h["a"](_);i["a"].assert(Array.isArray(b),"only supporting fill colors");r.fontColor=n["a"].rgbArrayToHex(b)}if(r.labelAlign!==undefined){r.labelXOffset=t.getOffsetX();r.labelYOffset=-t.getOffsetY()}e.push(r)}};var p=d;var v=r(78);var g=r(9);var m=r(11);var y=r(132);var _=r(54);var b=r(89);var w=r(122);var S=r(149);var C=r(248);var x=r(198);var O=r(393);var T=function e(t,r,i,n){this.url_=t;this.$http_=r;this.gettextCatalog_=i;this.ngeoLayerHelper_=n;this.vectorEncoder_=new p;this.printNativeAngle_=true};T.$inject=["url","$http","gettextCatalog","ngeoLayerHelper"];T.prototype.cancel=function(e,t){var r=t!==undefined?t:{};var i=this.url_+"/cancel/"+e;return this.$http_["delete"](i,r)};T.prototype.createSpec=function(e,t,r,i,n,a){var o={dpi:r,rotation:a["rotation"]};this.encodeMap_(e,t,o);var s={map:o};m["a"](s,a);var l=this.gettextCatalog_.currentLanguage;var u={attributes:s,format:n,lang:l,layout:i};return u};T.prototype.encodeMap_=function(e,t,r){var n=this;var a=e.getView();var o=a.getCenter();var s=a.getProjection();var l=a.getResolution();var c=r.rotation||u["h"](a.getRotation());i["a"].assert(o!==undefined);i["a"].assert(s!==undefined);r.center=o;r.projection=s.getCode();r.rotation=c;r.scale=t;r.layers=[];var f=e.getLayerGroup();i["a"].assert(f);this.printNativeAngle_=!(f.get("printNativeAngle")===false);var h=this.ngeoLayerHelper_.getFlatLayers(f);g["l"](h,function(e,t){return e.getZIndex()-t.getZIndex()});h=h.slice().reverse();h.forEach(function(e){if(e.getVisible()){i["a"].assert(l!==undefined);n.encodeLayer(r.layers,e,l)}})};T.prototype.encodeLayer=function(e,t,r){if(t instanceof y["a"]){this.encodeImageLayer_(e,t)}else if(t instanceof _["a"]){this.encodeTileLayer_(e,t)}else if(t instanceof b["a"]){this.vectorEncoder_.encodeVectorLayer(e,t,r)}};T.prototype.encodeImageLayer_=function(e,t){i["a"].assertInstanceof(t,y["a"]);var r=t.getSource();if(r instanceof S["a"]){this.encodeImageWmsLayer_(e,t)}};T.prototype.encodeImageWmsLayer_=function(e,t){var r=t.getSource();i["a"].assertInstanceof(t,y["a"]);i["a"].assertInstanceof(r,S["a"]);var n=r.getUrl();if(n!==undefined){this.encodeWmsLayer_(e,t,n,r.getParams())}};T.prototype.encodeWmsLayer_=function(e,t,r,i){if(r.startsWith("//")){r=window.location.protocol+r}var n=new URL(r);var a={TRANSPARENT:true};if(n.searchParams){for(var o=n.searchParams,s=Array.isArray(o),l=0,o=s?o:o[Symbol.iterator]();;){var u;if(s){if(l>=o.length)break;u=o[l++]}else{l=o.next();if(l.done)break;u=l.value}var c=u;a[c[0]]=c[1]}}for(var f in i){var h=i[f];if(h!==null&&h!==undefined){a[f]=h}}delete a["LAYERS"];delete a["FORMAT"];delete a["SERVERTYPE"];delete a["VERSION"];var d={baseURL:T.getAbsoluteUrl_(n.origin+n.pathname),imageFormat:"FORMAT"in i?i["FORMAT"]:"image/png",layers:i["LAYERS"].split(","),customParams:a,serverType:i["SERVERTYPE"],type:"wms",opacity:this.getOpacityOrInherited_(t),version:i["VERSION"],useNativeAngle:this.printNativeAngle_};e.push(d)};T.getAbsoluteUrl_=function(e){var t=document.createElement("a");t.href=encodeURI(e);return decodeURI(t.href)};T.prototype.encodeTileLayer_=function(e,t){i["a"].assertInstanceof(t,_["a"]);var r=t.getSource();if(r instanceof x["a"]){this.encodeTileWmtsLayer_(e,t)}else if(r instanceof C["a"]){this.encodeTileWmsLayer_(e,t)}};T.prototype.encodeTileWmtsLayer_=function(e,t){i["a"].assertInstanceof(t,_["a"]);var r=t.getSource();i["a"].assertInstanceof(r,x["a"]);var n=r.getProjection();var a=r.getTileGrid();i["a"].assertInstanceof(a,O["b"]);var o=a.getMatrixIds();var s=[];for(var l=0,u=o.length;l<u;++l){var c=a.getFullTileRange(l);s.push({identifier:o[l],scaleDenominator:a.getResolution(l)*n.getMetersPerUnit()/28e-5,tileSize:w["d"](a.getTileSize(l)),topLeftCorner:a.getOrigin(l),matrixSize:[c.maxX-c.minX,c.maxY-c.minY]})}var f=r.getDimensions();var h=Object.keys(f);var d={baseURL:this.getWmtsUrl_(r),dimensions:h,dimensionParams:f,imageFormat:r.getFormat(),layer:r.getLayer(),matrices:s,matrixSet:r.getMatrixSet(),opacity:this.getOpacityOrInherited_(t),requestEncoding:r.getRequestEncoding(),style:r.getStyle(),type:"WMTS",version:r.getVersion()};e.push(d)};T.prototype.encodeTileWmsLayer_=function(e,t){var r=t.getSource();i["a"].assertInstanceof(t,_["a"]);i["a"].assertInstanceof(r,C["a"]);this.encodeWmsLayer_(e,t,r.getUrls()[0],r.getParams())};T.prototype.getWmtsUrl_=function(e){var t=e.getUrls();i["a"].assert(t.length>0);return T.getAbsoluteUrl_(t[0])};T.prototype.getOpacityOrInherited_=function(e){if(e.get("inheritedOpacity")!==undefined){return e.get("inheritedOpacity")}return e.getOpacity()};T.prototype.createReport=function(e,t){var r=e.format||"pdf";var i=this.url_+"/report."+r;var n={headers:{"Content-Type":"application/json; charset=UTF-8"}};m["a"](n,t!==undefined?t:{});return this.$http_.post(i,e,n)};T.prototype.getStatus=function(e,t){var r=t!==undefined?t:{};var i=this.url_+"/status/"+e+".json";return this.$http_.get(i,r)};T.prototype.getReportUrl=function(e){return this.url_+"/report/"+e};T.prototype.getCapabilities=function(e){var t=e!==undefined?e:{withCredentials:true};var r=this.url_+"/capabilities.json";return this.$http_.get(r,t)};T.createPrintServiceFactory=function(e,t,r){return function(i){return new T(i,e,t,r)}};T.createPrintServiceFactory.$inject=["$http","gettextCatalog","ngeoLayerHelper"];T.module=angular.module("ngeoPrint",[v["a"].module.name]);T.module.service("ngeoPrintService",T);T.module.factory("ngeoCreatePrint",T.createPrintServiceFactory);var E=t["a"]=T},function(e,t,r){"use strict";var i=r(237);var n=r(1);var a=r(18);var o=r(236);var s=r(381);var l=r(105);var u=r(235);var c=r(8);var f=r(286);var h=r(233);var d=r(232);var p=r(86);var v=r(52);var g=r(50);var m=r(77);var y=r(3);var _=r(9);var b=r(2);var w=r(28);var S=r(47);var C=r(15);var x=r(167);var O=r(154);var T=angular.module("GmfDrawFeatureComponent",[i["a"].name,s["a"].name,l["a"].name,u["a"].name,v["a"].module.name,m["a"].module.name]);T.run(["$templateCache",function(e){e.put("gmf/drawing/drawFeatureComponent",r(523))}]);T.component_=function(){return{controller:"GmfDrawfeatureController as efCtrl",scope:{active:"=gmfDrawfeatureActive",map:"<gmfDrawfeatureMap",showMeasure:"=?gmfDrawfeatureShowmeasure"},bindToController:true,templateUrl:"gmf/drawing/drawFeatureComponent"}};T.directive("gmfDrawfeature",T.component_);T.Controller_=function(e,t,r,i,n,a){var o=this;this.map;this.active;if(this.active===undefined){this.active=false}this.drawActive=false;this.drawToolActivate=new g["a"](this,"drawActive");this.mapSelectActive=true;this.longPressTimeout_=null;this.mapSelectToolActivate=new g["a"](this,"mapSelectActive");this.scope_=e;this.timeout_=t;this.featureHelper_=i;this.features=n;this.ngeoToolActivateMgr_=a;this.selectedFeature=null;this.selectedFeatures=new w["b"];this.interactions_=new w["b"];this.modify_=new f["a"]({features:this.selectedFeatures,style:i.getVertexStyle(false)});this.interactions_.push(this.modify_);this.menu_=null;this.modifyToolActivate=new g["a"](this.modify_,"active");this.translate_=new d["a"]({features:this.selectedFeatures,style:new C["c"]({text:new x["a"]({text:"",font:"normal 18px FontAwesome",fill:new S["a"]({color:"#7a7a7a"})})})});this.interactions_.push(this.translate_);this.rotate_=new h["a"]({features:this.selectedFeatures,style:new C["c"]({text:new x["a"]({text:"",font:"normal 18px FontAwesome",fill:new S["a"]({color:"#7a7a7a"})})})});this.interactions_.push(this.rotate_);this.initializeInteractions_();this.rotateToolActivate=new g["a"](this.rotate_,"active");this.translateToolActivate=new g["a"](this.translate_,"active");this.listenerKeys_=[];this.listSelectionInProgress_=false;e.$watch(function(){return o.active},this.handleActiveChange_.bind(this));e.$watch(function(){return o.drawActive},function(e){if(e){o.selectedFeature=null}});e.$watch(function(){return o.selectedFeature},function(e,t){o.selectedFeatures.clear();if(t){o.featureHelper_.setStyle(t);o.unregisterInteractions_()}if(e){o.featureHelper_.setStyle(e,true);o.selectedFeatures.push(e);o.registerInteractions_();if(o.listSelectionInProgress_){o.featureHelper_.panMapToFeature(e,o.map);o.listSelectionInProgress_=false}}else if(o.menu_){o.map.removeOverlay(o.menu_);o.menu_=null}});e.$watch(function(){return o.mapSelectActive},this.handleMapSelectActiveChange_.bind(this));this.nameProperty=c["a"].NAME;this.gettextCatalog_=r};T.Controller_.$inject=["$scope","$timeout","gettextCatalog","ngeoFeatureHelper","ngeoFeatures","ngeoToolActivateMgr"];T.Controller_.prototype.initializeInteractions_=function(){this.interactions_.forEach(function(e){e.setActive(false);p["a"].interaction(e)})};T.Controller_.prototype.registerInteractions_=function(){var e=this;this.interactions_.forEach(function(t){e.map.addInteraction(t)})};T.Controller_.prototype.unregisterInteractions_=function(){var e=this;this.interactions_.forEach(function(t){e.map.removeInteraction(t)})};T.Controller_.prototype.handleActiveChange_=function(e){var t=this.listenerKeys_;var r=["draw-",y["c"](this)].join("-");var i=["other-",y["c"](this)].join("-");var n=this.ngeoToolActivateMgr_;if(e){t.push(b["a"](this.features,"add",this.handleFeaturesAdd_,this),b["a"](this.features,"remove",this.handleFeaturesRemove_,this));t.push(b["a"](this.translate_,"translateend",this.handleTranslateEnd_,this));t.push(b["a"](this.rotate_,"rotateend",this.handleRotateEnd_,this));n.registerTool(r,this.drawToolActivate,false);n.registerTool(r,this.mapSelectToolActivate,true);n.registerTool(i,this.drawToolActivate,false);n.registerTool(i,this.modifyToolActivate,true);n.registerTool(i,this.translateToolActivate,false);n.registerTool(i,this.rotateToolActivate,false);this.mapSelectActive=true;this.modify_.setActive(true)}else{t.forEach(b["e"]);t.length=0;n.unregisterTool(r,this.drawToolActivate);n.unregisterTool(r,this.mapSelectToolActivate);n.unregisterTool(i,this.drawToolActivate);n.unregisterTool(i,this.modifyToolActivate);n.unregisterTool(i,this.translateToolActivate);n.unregisterTool(i,this.rotateToolActivate);this.drawActive=false;this.modify_.setActive(false);this.mapSelectActive=false;this.selectedFeature=null;if(this.menu_){this.map.removeOverlay(this.menu_);this.menu_=null}}};T.Controller_.prototype.selectFeatureFromList=function(e){this.listSelectionInProgress_=true;this.selectedFeature=e;this.drawActive=false};T.Controller_.prototype.getFeaturesArray=function(){return this.features.getArray()};T.Controller_.prototype.clearFeatures=function(){var e=this.gettextCatalog_;var t=e.getString("Do you really want to delete all the features?");if(confirm(t)){this.features.clear()}};T.Controller_.prototype.removeFeature=function(e){var t=this.gettextCatalog_;var r=t.getString("Do you really want to delete the selected feature?");if(confirm(r)){this.features.remove(e)}};T.Controller_.prototype.handleFeaturesAdd_=function(e){var t=this;this.timeout_(function(){t.selectedFeature=e.element;t.drawActive=false;t.scope_.$apply()})};T.Controller_.prototype.handleFeaturesRemove_=function(e){this.selectedFeature=null};T.Controller_.prototype.handleMapSelectActiveChange_=function(e){var t=this.map.getViewport();n["a"].assertElement(t);if(e){b["a"](this.map,"click",this.handleMapClick_,this);b["a"](t,"contextmenu",this.handleMapContextMenu_,this);b["a"](t,"touchstart",this.handleMapTouchStart_,this);b["a"](t,"touchmove",this.handleMapTouchEnd_,this);b["a"](t,"touchend",this.handleMapTouchEnd_,this)}else{b["c"](this.map,"click",this.handleMapClick_,this);b["c"](t,"contextmenu",this.handleMapContextMenu_,this);b["c"](t,"touchstart",this.handleMapTouchStart_,this);b["c"](t,"touchmove",this.handleMapTouchEnd_,this);b["c"](t,"touchend",this.handleMapTouchEnd_,this)}};T.Controller_.prototype.handleMapClick_=function(e){var t=this;var r=e.pixel;var i=this.map.forEachFeatureAtPixel(r,function(e){var r=false;if(_["f"](t.features.getArray(),e)){r=e}return r},{hitTolerance:5});i=i?i:null;if(i===this.selectedFeature){return}this.selectedFeature=i;this.scope_.$apply()};T.Controller_.prototype.handleMapTouchStart_=function(e){var t=this;this.longPressTimeout_=setTimeout(function(){t.handleMapContextMenu_(e)},500)};T.Controller_.prototype.handleMapTouchEnd_=function(e){clearTimeout(this.longPressTimeout_)};T.Controller_.prototype.handleMapContextMenu_=function(e){var t=this;var r=this.gettextCatalog_;var i=this.map.getEventPixel(e);var n=this.map.getCoordinateFromPixel(i);var s=this.map.forEachFeatureAtPixel(i,function(e){var r=false;if(_["f"](t.features.getArray(),e)){r=e}return r},{hitTolerance:7});s=s?s:null;if(s){var l=[];var u=this.featureHelper_.getType(s);if(u==a["a"].CIRCLE||u==a["a"].LINE_STRING||u==a["a"].POLYGON||u==a["a"].RECTANGLE){l=l.concat([{cls:"fa fa-arrows",label:r.getString("Move"),name:"move"},{cls:"fa fa-rotate-right",label:r.getString("Rotate"),name:"rotate"}])}l=l.concat([{cls:"fa fa-trash-o",label:r.getString("Delete"),name:"delete"}]);this.menu_=new o["a"]({actions:l});b["a"](this.menu_,"actionclick",this.handleMenuActionClick_,this);this.map.addOverlay(this.menu_);this.menu_.open(n);e.preventDefault();e.stopPropagation()}if(s===this.selectedFeature){return}this.modify_.setActive(true);this.selectedFeature=s;this.scope_.$apply()};T.Controller_.prototype.handleMenuActionClick_=function(e){var t=e.detail.action;switch(t){case"delete":n["a"].assert(this.selectedFeature,"Selected feature should be truthy");this.removeFeature(this.selectedFeature);this.scope_.$apply();break;case"move":this.translate_.setActive(true);this.scope_.$apply();break;case"rotate":this.rotate_.setActive(true);this.scope_.$apply();break;default:console.log("FIXME - support: "+t);break}};T.Controller_.prototype.handleTranslateEnd_=function(e){this.translate_.setActive(false);this.scope_.$apply()};T.Controller_.prototype.handleRotateEnd_=function(e){this.rotate_.setActive(false);this.scope_.$apply()};T.controller("GmfDrawfeatureController",T.Controller_);var E=T;var M=angular.module("gmfDrawingModule",[E.name,i["a"].name]);var j=t["a"]=M},function(e,t,r){"use strict";var i=r(145);var n=r(19);var a=r(2);var o=r(154);var s=angular.module("gmfThemeSelectorComponent",[i["a"].module.name,n["a"].module.name]);s.run(["$templateCache",function(e){e.put("gmf/theme/selectorComponent",r(473))}]);s.value("gmfThemeSelectorTemplateUrl",function(e){var t=e["gmfThemeSelectorTemplateUrl"];return t!==undefined?t:"gmf/theme/selectorComponent"});l.$inject=["$attrs","gmfThemeSelectorTemplateUrl"];function l(e,t){return t(e)}s.component_={bindings:{filter:"<gmfThemeselectorFilter"},controller:"gmfThemeselectorController",templateUrl:l};s.component("gmfThemeselector",s.component_);s.Controller_=function(e,t,r){this.gmfThemeManager=t;this.gmfThemes_=r;this.themes;this.filter;this.listenerKeys_=[];this.listenerKeys_.push(a["a"](this.gmfThemes_,"change",this.setThemes_,this));e.$on("$destroy",this.handleDestroy_.bind(this))};s.Controller_.$inject=["$scope","gmfThemeManager","gmfThemes"];s.Controller_.prototype.setThemes_=function(){var e=this;this.gmfThemes_.getThemesObject().then(function(t){e.themes=e.filter?t.filter(e.filter):t})};s.Controller_.prototype.setTheme=function(e,t){if(e){this.gmfThemeManager.addTheme(e,t)}};s.Controller_.prototype.handleDestroy_=function(){this.listenerKeys_.forEach(a["e"]);this.listenerKeys_.length=0};s.controller("gmfThemeselectorController",s.Controller_);var u=s;var c=angular.module("gmfThemeModule",[u.name,i["a"].module.name,n["a"].module.name]);var f=t["a"]=c},function(e,t,r){"use strict";var i=r(1);var n=r(66);var a=r(8);var o=r(69);var s=r(163);var l=r(208);var u=r(3);var c=r(21);var f=r(142);var h=r(27);var d=r(2);var p=r(5);var v=r(215);var g=r(51);var m=r(34);var y=r(49);var _=r(29);var b=r(89);var w=r(76);var S=r(268);var C=function e(t){var r=this;i["a"].assert(t.features);_["b"].call(this,{handleDownEvent:e.handleDownEvent_,handleDragEvent:e.handleDragEvent_,handleEvent:e.handleEvent,handleUpEvent:e.handleUpEvent_});this.vertexFeature_=null;this.lastPixel_=[0,0];this.modified_=false;this.rBush_=new S["a"];this.pixelTolerance_=t.pixelTolerance!==undefined?t.pixelTolerance:10;this.snappedToVertex_=false;this.changingFeature_=false;this.dragSegments_=null;this.overlay_=new b["a"]({source:new w["b"]({useSpatialIndex:false,wrapX:!!t.wrapX}),style:t.style||s["a"].getDefaultModifyStyleFunction(),updateWhileAnimating:true,updateWhileInteracting:true});this.features_=t.features;this.features_.forEach(function(e){return r.addFeature_(e)});d["a"](this.features_,"add",this.handleFeatureAdd_,this);d["a"](this.features_,"remove",this.handleFeatureRemove_,this)};u["d"](C,_["b"]);C.prototype.addFeature_=function(e){if(e.getGeometry().getType()==="Polygon"&&!!e.get(a["a"].IS_CIRCLE)){var t=e.getGeometry();this.writeCircleGeometry_(e,t);var r=this.getMap();if(r){this.handlePointerAtPixel_(this.lastPixel_,r)}}};C.prototype.willModifyFeatures_=function(e){if(!this.modified_){this.modified_=true;var t=new o["a"]("modifystart",{features:this.features_});this.dispatchEvent(t)}};C.prototype.removeFeature_=function(e){this.removeFeatureSegmentData_(e);if(this.vertexFeature_&&this.features_.getLength()===0){this.overlay_.getSource().removeFeature(this.vertexFeature_);this.vertexFeature_=null}};C.prototype.removeFeatureSegmentData_=function(e){var t=this.rBush_;var r=[];t.forEach(function(t){if(e===t.feature){r.push(t)}});for(var i=r.length-1;i>=0;--i){t.remove(r[i])}};C.prototype.setMap=function(e){this.overlay_.setMap(e);_["b"].prototype.setMap.call(this,e)};C.prototype.handleFeatureAdd_=function(e){var t=e.element;i["a"].assertInstanceof(t,c["a"],"feature should be an ol.Feature");this.addFeature_(t)};C.prototype.handleFeatureRemove_=function(e){var t=e.element;this.removeFeature_(t)};C.prototype.writeCircleGeometry_=function(e,t){var r=t.getCoordinates();var i=void 0,n=void 0,a=void 0,o=void 0,s=void 0,l=void 0,u=void 0;for(o=0,s=r.length;o<s;++o){i=r[o];for(n=0,a=i.length-1;n<a;++n){l=i.slice(n,n+2);u={feature:e,geometry:t,depth:[o],index:n,segment:l};this.rBush_.insert(p["b"](l),u)}}};C.prototype.createOrUpdateVertexFeature_=function(e){var t=this.vertexFeature_;if(!t){t=new c["a"](new m["a"](e));this.vertexFeature_=t;this.overlay_.getSource().addFeature(t)}else{var r=t.getGeometry();r.setCoordinates(e)}return t};C.compareIndexes_=function(e,t){return e.index-t.index};C.handleDownEvent_=function(e){this.handlePointerAtPixel_(e.pixel,e.map);this.dragSegments_=[];this.modified_=false;var t=this.vertexFeature_;if(t){var r=t.getGeometry();var i=r.getCoordinates();var n=p["b"]([i]);var a=this.rBush_.getInExtent(n);var o={};a.sort(C.compareIndexes_);for(var s=0,l=a.length;s<l;++s){var c=a[s];var f=c.segment;var d=u["c"](c.feature);var v=c.depth;if(v){d+="-"+v.join("-")}if(!o[d]){o[d]=new Array(2)}if(h["e"](f[0],i)&&!o[d][0]){this.dragSegments_.push([c,0]);o[d][0]=c}else if(h["e"](f[1],i)&&!o[d][1]){this.dragSegments_.push([c,1]);o[d][1]=c}}}return!!this.vertexFeature_};C.handleDragEvent_=function(e){this.willModifyFeatures_(e);var t=e.coordinate;var r=this.dragSegments_[0][0].geometry;var i=p["x"](r.getExtent());var n=new g["a"]([i,t]);var o=new v["a"](i,n.getLength());var s=Object(y["b"])(o,64).getCoordinates();this.setGeometryCoordinates_(r,s);var u=l["a"].getAzimut(n);this.features_.getArray()[0].set(a["a"].AZIMUT,u);this.createOrUpdateVertexFeature_(t)};C.handleUpEvent_=function(e){this.rBush_.clear();this.writeCircleGeometry_(this.dragSegments_[0][0].feature,this.dragSegments_[0][0].geometry);if(this.modified_){var t=new o["a"]("modifyend",{features:this.features_});this.dispatchEvent(t);this.modified_=false}return false};C.handleEvent=function(e){if(!(e instanceof f["a"])){return true}var t=void 0;if(!e.map.getView().getInteracting()&&e.type=="pointermove"&&!this.handlingDownUpSequence){this.handlePointerMove_(e)}return _["c"].call(this,e)&&!t};C.prototype.handlePointerMove_=function(e){this.lastPixel_=e.pixel;this.handlePointerAtPixel_(e.pixel,e.map)};C.prototype.handlePointerAtPixel_=function(e,t){var r=t.getCoordinateFromPixel(e);var i=function e(t,i){return h["i"](r,t.segment)-h["i"](r,i.segment)};var n=t.getCoordinateFromPixel([e[0]-this.pixelTolerance_,e[1]+this.pixelTolerance_]);var a=t.getCoordinateFromPixel([e[0]+this.pixelTolerance_,e[1]-this.pixelTolerance_]);var o=p["b"]([n,a]);var s=this.rBush_;var l=s.getInExtent(o);if(l.length>0){l.sort(i);var c=l[0];var f=c.segment;var d=h["c"](r,f);var v=t.getPixelFromCoordinate(d);if(Math.sqrt(h["h"](e,v))<=this.pixelTolerance_){var g=t.getPixelFromCoordinate(f[0]);var m=t.getPixelFromCoordinate(f[1]);var y=h["h"](v,g);var _=h["h"](v,m);var b=Math.sqrt(Math.min(y,_));this.snappedToVertex_=b<=this.pixelTolerance_;if(this.snappedToVertex_){d=y>_?f[1]:f[0];this.createOrUpdateVertexFeature_(d);var w={};w[u["c"](f)]=true;var S=void 0;for(var C=1,x=l.length;C<x;++C){S=l[C].segment;if(h["e"](f[0],S[0])&&h["e"](f[1],S[1])||h["e"](f[0],S[1])&&h["e"](f[1],S[0])){w[u["c"](S)]=true}else{break}}return}}}if(this.vertexFeature_){this.overlay_.getSource().removeFeature(this.vertexFeature_);this.vertexFeature_=null}};C.prototype.setGeometryCoordinates_=function(e,t){this.changingFeature_=true;e.setCoordinates(t);this.changingFeature_=false};var x=C;var O=function e(t){var r=this;i["a"].assert(t.features);_["b"].call(this,{handleDownEvent:this.handleDown_,handleDragEvent:this.handleDrag_,handleUpEvent:this.handleUp_});this.modified_=false;this.vectorPoints_=new b["a"]({source:new w["b"]({wrapX:!!t.wrapX}),visible:this.getActive(),style:t.style||s["a"].getDefaultModifyStyleFunction(),updateWhileAnimating:true,updateWhileInteracting:true});this.features_=t.features;this.feature_=null;this.cache_={};this.params_=null;d["a"](this.features_,"add",this.handleFeatureAdd_,this);d["a"](this.features_,"remove",this.handleFeatureRemove_,this);this.features_.forEach(function(e){r.addFeature_(e)})};u["d"](O,_["b"]);O.prototype.setActive=function(e){_["b"].prototype.setActive.call(this,e);if(this.vectorPoints_){this.vectorPoints_.setVisible(e)}};O.prototype.addFeature_=function(e){var t=e.getGeometry();if(t instanceof y["a"]){var r=u["c"](e);var i=this.cache_[r];if(i){return}var n=this.vectorPoints_.getSource();var a=t.getCoordinates()[0];while(a.length>4){if(a[0][0]<a[1][0]&&a[0][1]<=a[1][1]){a.pop()}else{a.shift()}}var o=[];var s=void 0;var l=void 0;a.forEach(function(t){s=new m["a"](t);l=new c["a"]({corner:true,geometry:s,siblingX:null,siblingY:null,boxFeature:e});o.push(l)},this);i={corners:o};this.cache_[r]=i;var f=void 0;var h=void 0;o.forEach(function(e,t){f=o[t-1];if(!f){f=o[o.length-1]}h=o[t+1];if(!h){h=o[0]}if(t%2===0){e.set("siblingX",h);e.set("siblingY",f)}else{e.set("siblingX",f);e.set("siblingY",h)}},this);n.addFeatures(o)}};O.prototype.willModifyFeatures_=function(e){if(!this.modified_){this.modified_=true;var t=new o["a"]("modifystart",{features:this.features_});this.dispatchEvent(t);this.params_=this.initializeParams_()}};O.prototype.initializeParams_=function(){var e=this.feature_;var t=e.get("siblingX");i["a"].assertInstanceof(t,c["a"]);var r=t.get("siblingY");i["a"].assertInstanceof(r,c["a"]);var n=r.getGeometry();i["a"].assertInstanceof(n,m["a"]);var a=n.getCoordinates();var o=this.getMap().getPixelFromCoordinate(a);var s=r.get("siblingX");i["a"].assertInstanceof(s,c["a"]);var l=s.getGeometry();i["a"].assertInstanceof(l,m["a"]);var u=l.getCoordinates();var f=this.getMap().getPixelFromCoordinate(u);var h=[f[0]-o[0],f[1]-o[1]];var d=Math.sqrt(h[0]*h[0]+h[1]*h[1]);h[0]/=d;h[1]/=d;var p=t.getGeometry();i["a"].assertInstanceof(p,m["a"]);var v=p.getCoordinates();var g=this.getMap().getPixelFromCoordinate(v);var y=[g[0]-o[0],g[1]-o[1]];var _=Math.sqrt(y[0]*y[0]+y[1]*y[1]);y[0]/=_;y[1]/=_;if(isNaN(h[0])&&isNaN(y[0])){h=[0,1];y=[1,0]}else if(isNaN(h[0])){h=[y[1],-y[0]]}else if(isNaN(y[0])){y=[h[1],-h[0]]}return{originCoordinate:a,originPixel:o,siblingXPoint:l,siblingYPoint:p,vectorX:h,vectorY:y}};O.prototype.removeFeature_=function(e){var t=u["c"](e);var r=this.cache_[t];var i=r.corners;for(var n=0;n<i.length;n++){this.vectorPoints_.getSource().removeFeature(i[n])}this.feature_=null;i.length=0;delete this.cache_[t]};O.prototype.setMap=function(e){this.vectorPoints_.setMap(e);_["b"].prototype.setMap.call(this,e)};O.prototype.handleFeatureAdd_=function(e){var t=e.element;i["a"].assertInstanceof(t,c["a"],"feature should be an ol.Feature");this.addFeature_(t)};O.prototype.handleFeatureRemove_=function(e){var t=e.element;this.removeFeature_(t)};O.prototype.handleDown_=function(e){var t=e.map;var r=t.forEachFeatureAtPixel(e.pixel,function(e){return e.get("siblingX")&&e.get("siblingY")?e:undefined});if(r){this.feature_=r;return true}return false};O.prototype.handleDrag_=function(e){this.willModifyFeatures_(e);var t=this.feature_;var r=t.getGeometry();if(r instanceof m["a"]){r.setCoordinates(e.coordinate);var n=e.pixel;var a=this.params_.originPixel;var o=this.params_.siblingXPoint;var s=this.params_.siblingYPoint;var l=this.params_.vectorX;var u=this.params_.vectorY;var c=this.params_.originCoordinate;var f=this.calculateNewPixel_(a,n,l);var h=this.getMap().getCoordinateFromPixel(f);o.setCoordinates(h);var d=this.calculateNewPixel_(a,n,u);var p=this.getMap().getCoordinateFromPixel(d);s.setCoordinates(p);var v=t.get("boxFeature");var g=v.getGeometry();i["a"].assertInstanceof(g,y["a"]);g.setCoordinates([[e.coordinate,h,c,p,e.coordinate]])}};O.prototype.calculateNewPixel_=function(e,t,r){var i=[t[0]-e[0],t[1]-e[1]];var n=i[0]*r[0]+i[1]*r[1];var a=[r[0]*n,r[1]*n];return[a[0]+e[0],a[1]+e[1]]};O.prototype.handleUp_=function(e){if(this.modified_){var t=new o["a"]("modifyend",{features:this.features_});this.dispatchEvent(t);this.params_=null;this.modified_=false}return false};O.CacheItem;O.ModifyParams;var T=O;var E=r(36);var M=r(33);var j=r(28);var A=r(338);var P=function e(t){i["a"].assert(t.features);this.features_=t.features;this.listenerKeys_=[];this.interactions_=[];this.otherFeatures_=new j["b"];this.interactions_.push(new A["a"]({deleteCondition:n["a"].deleteCondition,features:this.otherFeatures_,pixelTolerance:t.pixelTolerance,style:t.style,wrapX:t.wrapX}));this.circleFeatures_=new j["b"];this.interactions_.push(new x({features:this.circleFeatures_,pixelTolerance:t.pixelTolerance,style:t.style,wrapX:t.wrapX}));this.rectangleFeatures_=new j["b"];this.interactions_.push(new T({features:this.rectangleFeatures_,pixelTolerance:t.pixelTolerance,style:t.style,wrapX:t.wrapX}));M["a"].call(this,{handleEvent:E["b"]})};u["d"](P,M["a"]);P.prototype.setActive=function(e){M["a"].prototype.setActive.call(this,e);this.setState_()};P.prototype.setMap=function(e){var t=this.interactions_;var r=this.getMap();if(r){t.forEach(function(e){r.removeInteraction(e)})}M["a"].prototype.setMap.call(this,e);if(e){t.forEach(function(t){e.addInteraction(t)})}this.setState_()};P.prototype.setState_=function(){var e=this;var t=this.getMap();var r=this.getActive();var i=this.interactions_;var n=this.listenerKeys_;i.forEach(function(e){e.setActive(r&&!!t)});if(r&&t){this.features_.forEach(function(t){return e.addFeature_(t)});n.push(d["a"](this.features_,"add",this.handleFeaturesAdd_,this),d["a"](this.features_,"remove",this.handleFeaturesRemove_,this))}else{n.forEach(d["e"]);n.length=0;this.features_.forEach(function(t){return e.removeFeature_(t)})}};P.prototype.handleFeaturesAdd_=function(e){var t=e.element;i["a"].assertInstanceof(t,c["a"],"feature should be an ol.Feature");this.addFeature_(t)};P.prototype.handleFeaturesRemove_=function(e){var t=e.element;this.removeFeature_(t)};P.prototype.addFeature_=function(e){var t=this.getFeatureCollection_(e);t.push(e)};P.prototype.removeFeature_=function(e){var t=this.getFeatureCollection_(e);t.remove(e)};P.prototype.getFeatureCollection_=function(e){var t=void 0;var r=e.get(a["a"].IS_CIRCLE);var i=e.get(a["a"].IS_RECTANGLE);if(r===true||r==="true"){t=this.circleFeatures_}else if(i===true||i==="true"){t=this.rectangleFeatures_}else{t=this.otherFeatures_}return t};var k=t["a"]=P},function(e,t,r){"use strict";var i=r(192);var n=r(239);var a=r(335);var o=r(261);var s=r(1);var l=r(9);var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var f=function(){e.$inject=["$rootScope"];function e(t){var r=this;c(this,e);this.rootScope_=t;this.currentDataSourceId_=null;this.currentDataSourceItems_=[];this.localStorageKey_="gmf_savedfilters";this.useLocalStorage_=true;try{if("localStorage"in window){window.localStorage["test"]="";delete window.localStorage["test"]}else{this.useLocalStorage_=false}}catch(e){console.error(e);this.useLocalStorage_=false}this.items_=[];this.rootScope_.$watchCollection(function(){return r.items},function(){r.rePopulateCurrentDataSourceItems_()});if(this.useLocalStorage_){this.loadItemsFromLocalStorage_()}}e.prototype.loadItemsFromLocalStorage_=function e(){if(window.localStorage[this.localStorageKey_]){var t=JSON.parse(window.localStorage[this.localStorageKey_]);s["a"].assertArray(t);this.items_=t}};e.prototype.indexOfItem=function e(t,r){var i=void 0;var n=-1;for(var a=0,o=this.items_.length;a<o;a++){i=this.items[a];if(i.dataSourceId===r&&i.name===t){n=a;break}}return n};e.prototype.save=function e(t){var r=this.indexOfItem(t.name,t.dataSourceId);if(r!==-1){this.items[r]=t}else{this.items.push(t)}if(this.useLocalStorage_){this.saveItemsInLocalStorage_()}};e.prototype.remove=function e(t){var r=l["j"](this.items,t);if(r&&this.useLocalStorage_){this.saveItemsInLocalStorage_()}};e.prototype.saveItemsInLocalStorage_=function e(){window.localStorage[this.localStorageKey_]=JSON.stringify(this.items)};e.prototype.rePopulateCurrentDataSourceItems_=function e(){this.currentDataSourceItems_.length=0;if(this.currentDataSourceId_!==null){for(var t=this.items,r=Array.isArray(t),i=0,t=r?t:t[Symbol.iterator]();;){var n;if(r){if(i>=t.length)break;n=t[i++]}else{i=t.next();if(i.done)break;n=i.value}var a=n;if(a.dataSourceId===this.currentDataSourceId_){this.currentDataSourceItems_.push(a)}}}};u(e,[{key:"currentDataSourceItems",get:function e(){return this.currentDataSourceItems_}},{key:"currentDataSourceId",set:function e(t){this.currentDataSourceId_=t;this.rePopulateCurrentDataSourceItems_()}},{key:"items",get:function e(){return this.items_}}]);return e}();f.module=angular.module("gmfSavedFilters",[]);f.module.service("gmfSavedFilters",f);f.Item=function(){};f.Item.prototype.condition;f.Item.prototype.customRules;f.Item.prototype.dataSourceId;f.Item.prototype.directedRules;f.Item.prototype.name;var h=f;var d=r(190);var p=r(191);var v=r(71);var g=r(134);var m=r(318);var y=r(2);var _=r(91);var b=r(154);function w(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var S=angular.module("gmfFilterselector",[i["a"].module.name,n["a"].module.name,a["a"].module.name,_["a"].module.name,p["a"].module.name,d["a"].name,g["a"].module.name,m["a"].name,h.module.name]);S.run(["$templateCache",function(e){e.put("gmf/filters/filterselectorcomponent",r(510))}]);S.value("gmfFilterselectorTemplateUrl",function(e){var t=e["gmfFilterselectorTemplateUrl"];return t!==undefined?t:"gmf/filters/filterselectorcomponent"});C.$inject=["$attrs","gmfFilterselectorTemplateUrl"];function C(e,t){return t(e)}S.Controller_=function(){e.$inject=["$scope","$timeout","gettextCatalog","gmfDataSourceBeingFiltered","gmfDataSourcesHelper","gmfSavedFilters","gmfUser","ngeoNotification","ngeoFeatureOverlayMgr","ngeoRuleHelper"];function e(t,r,i,n,a,o,l,u,c,f){var h=this;w(this,e);this.active;t.$watch(function(){return h.active},this.handleActiveChange_.bind(this));this.map;this.toolGroup;this.timeout_=r;this.gettextCatalog_=i;this.gmfDataSourceBeingFiltered=n;t.$watch(function(){return h.gmfDataSourceBeingFiltered.dataSource},this.handleSelectedDataSourceChange_.bind(this));this.gmfDataSourcesHelper_=a;this.gmfSavedFilters=o;t.$watchCollection(function(){return h.gmfSavedFilters.currentDataSourceItems},function(){if(h.gmfSavedFilters.currentDataSourceItems.length===0&&h.saveFilterManageModalShown){h.saveFilterManageModalShown=false}});this.gmfUser_=l;t.$watch(function(){return h.gmfUser_.functionalities},this.handleGmfUserFunctionalitiesChange_.bind(this));this.ngeoNotification_=u;this.featureOverlay=s["a"].assert(c.getFeatureOverlay());this.ngeoRuleHelper_=f;this.aRuleIsActive=false;this.customRules=null;this.directedRules=null;this.filtrableDataSources=[];this.filtrableLayerNodeNames_=null;this.gmfDataSources_=a.collection;this.listenerKeys_=[];this.readyDataSource=null;this.ruleCache_={};this.saveFilterSaveModalShown=false;t.$watch(function(){return h.saveFilterSaveModalShown},function(){h.saveFilterName=""});this.saveFilterName="";this.saveFilterManageModalShown=false;this.enableDataSourceRegistration_=false;t.$watch(function(){return h.enableDataSourceRegistration_},this.handleEnableDataSourceRegistrationChange_.bind(this));this.defaultFiltrableDataSourceName_;this.toggleDataSourceRegistration_()}e.prototype.handleGmfUserFunctionalitiesChange_=function e(){var t=this.gmfUser_.functionalities;if(t&&t["filterable_layers"]){this.filtrableLayerNodeNames_=t["filterable_layers"]}else{this.filtrableLayerNodeNames_=null}if(t&&t["preset_layer_filter"]&&t["preset_layer_filter"][0]){this.defaultFiltrableDataSourceName_=t["preset_layer_filter"][0]}else{this.defaultFiltrableDataSourceName_=undefined}this.toggleDataSourceRegistration_()};e.prototype.toggleDataSourceRegistration_=function e(){var t=!!this.filtrableLayerNodeNames_;if(this.enableDataSourceRegistration_!==t){this.enableDataSourceRegistration_=t}};e.prototype.handleActiveChange_=function e(t){var r=this;if(!t){this.aRuleIsActive=false;this.timeout_(function(){r.gmfDataSourceBeingFiltered.dataSource=null})}};e.prototype.handleEnableDataSourceRegistrationChange_=function e(t){var r=this.listenerKeys_;if(t){r.push(y["a"](this.gmfDataSources_,"add",this.handleDataSourcesAdd_,this),y["a"](this.gmfDataSources_,"remove",this.handleDataSourcesRemove_,this));this.gmfDataSources_.forEach(this.registerDataSource_,this)}else{r.forEach(y["e"]);r.length=0;this.filtrableDataSources.length=0}};e.prototype.handleDataSourcesAdd_=function e(t){var r=t.element;if(r instanceof o["a"]){this.registerDataSource_(r)}};e.prototype.handleDataSourcesRemove_=function e(t){var r=t.element;if(r instanceof o["a"]){this.unregisterDataSource_(r)}};e.prototype.registerDataSource_=function e(t){if(t.filtrable===null){t.filtrable=this.isDataSourceFiltrable_(t)}if(t.filtrable){this.filtrableDataSources.push(t);if(this.defaultFiltrableDataSourceName_!==undefined&&t.name===this.defaultFiltrableDataSourceName_){this.gmfDataSourceBeingFiltered.dataSource=t}}};e.prototype.unregisterDataSource_=function e(t){if(t.filtrable){l["j"](this.filtrableDataSources,t);if(this.gmfDataSourceBeingFiltered.dataSource===t){this.gmfDataSourceBeingFiltered.dataSource=null}}};e.prototype.isDataSourceFiltrable_=function e(t,r){var i=true;var n=this.gettextCatalog_;var a=r!==false;var o=s["a"].assert(this.filtrableLayerNodeNames_);var u=[];if(l["f"](o,t.name)){if(!t.supportsWFS){u.push(n.getString("The data source doesn't support WFS, which is required "+"to fetch the attributes to build the filter rules."))}if(!t.ogcLayers||!t.ogcLayers.length){u.push(n.getString("The data source must have only 1 ogcLayer defined."))}else if(!t.ogcLayers[0].queryable){u.push(n.getString("The ogcLayer within the data source must be queryable."))}i=!u.length;if(a&&!i){var c=n.getString("The following data source is marked as being filtrable,\n          but is missing some requirements: ");var f=t.name+" ("+t.id+").";var h=n.getString("Please, contact your administrator about this.\n          Here are the reasons: ");u.unshift(c+" "+f+" "+h);console.warn(u.join(" "));this.ngeoNotification_.notify({msg:u.join(" "),type:v["a"].Type.WARNING})}}else{i=false}return i};e.prototype.handleSelectedDataSourceChange_=function e(t){var r=this;this.aRuleIsActive=false;this.customRules=null;this.directedRules=null;this.readyDataSource=null;this.gmfSavedFilters.currentDataSourceId=null;if(!t){return}if(!this.active){this.active=true}this.gmfDataSourcesHelper_.prepareFiltrableDataSource(t).then(function(e){var t=r.getRuleCacheItem_(e);if(!t){t={customRules:[],directedRules:[]};r.setRuleCacheItem_(e,t);if(e.gmfLayer.metadata&&e.gmfLayer.metadata.directedFilterAttributes&&e.gmfLayer.metadata.directedFilterAttributes.length){var i=e.gmfLayer.metadata.directedFilterAttributes;var n=s["a"].assert(e.attributes);for(var a=n,o=Array.isArray(a),u=0,a=o?a:a[Symbol.iterator]();;){var c;if(o){if(u>=a.length)break;c=a[u++]}else{u=a.next();if(u.done)break;c=u.value}var f=c;if(l["f"](i,f.name)){t.directedRules.push(r.ngeoRuleHelper_.createRuleFromAttribute(f))}}}}r.customRules=t.customRules;r.directedRules=t.directedRules;r.readyDataSource=e;r.gmfSavedFilters.currentDataSourceId=e.id})};e.prototype.getRuleCacheItem_=function e(t){return this.ruleCache_[t.id]||null};e.prototype.setRuleCacheItem_=function e(t,r){this.ruleCache_[t.id]=r};e.prototype.saveFilterShowModal=function e(){this.saveFilterSaveModalShown=true};e.prototype.saveFilterSave=function e(){var t=this.saveFilterName;var r=s["a"].assert(this.readyDataSource);var i=r.id;var n=this.gmfSavedFilters.indexOfItem(t,i)!==-1;var a=r.filterCondition;var o=this.gettextCatalog_.getString("A filter with the same name already exists.\n      Do you want to overwrite it?");if(!n||confirm(o)){var l=this.customRules?this.ngeoRuleHelper_.serializeRules(this.customRules):[];var u=this.directedRules?this.ngeoRuleHelper_.serializeRules(this.directedRules):[];var c={condition:a,customRules:l,dataSourceId:i,directedRules:u,name:t};this.gmfSavedFilters.save(c);this.saveFilterSaveModalShown=false}};e.prototype.saveFilterLoadItem=function e(t){var r=this;var i=s["a"].assert(this.readyDataSource);this.customRules=null;this.directedRules=null;var n=this.ngeoRuleHelper_.createRules(t.customRules);var a=this.ngeoRuleHelper_.createRules(t.directedRules);this.timeout_(function(){r.customRules=n;r.directedRules=a;i.filterCondition=t.condition;var e=s["a"].assert(r.getRuleCacheItem_(i));e.customRules=n;e.directedRules=a})};e.prototype.saveFilterManage=function e(){this.saveFilterManageModalShown=true};e.prototype.saveFilterRemoveItem=function e(t){this.gmfSavedFilters.remove(t)};return e}();S.Controller_.RuleCache;S.Controller_.RuleCacheItem;S.component("gmfFilterselector",{bindings:{active:"=",map:"<",toolGroup:"<"},controller:S.Controller_,templateUrl:C});var x=S;var O=angular.module("gmfFiltersModule",[x.name,h.module.name]);var T=t["a"]=O},function(e,t,r){"use strict";var i=function e(){return{restrict:"A",link:function t(r,i,n){var a=n["ngeoSearch"];var o=r.$eval(a);var s=n["ngeoSearchDatasets"];var l=r.$eval(s);var u=l.slice();u.unshift(o);i.typeahead.apply(i,u);var c=n["ngeoSearchListeners"];var f=r.$eval(c);var h=e.adaptListeners_(f);i.on("typeahead:open",function(){r.$apply(function(){h.open()})});i.on("typeahead:close",function(){r.$apply(function(){h.close()})});i.on("typeahead:cursorchange",function(e,t,i){r.$apply(function(){h.cursorchange(e,t,i)})});i.on("typeahead:select",function(e,t,i){r.$apply(function(){h.select(e,t,i)})});i.on("typeahead:autocomplete",function(e,t,i){r.$apply(function(){h.autocomplete(e,t,i)})});i.on("typeahead:asyncreceive",function(e,t,n){r.$apply(function(){var t=i.data("tt-typeahead")["menu"]["_allDatasetsEmpty"]();h.datasetsempty(e,n,t)})})}}};i.adaptListeners_=function(e){var t=void 0;if(e===undefined){t={open:function e(){},close:function e(){},cursorchange:function e(){},datasetsempty:function e(){},select:function e(){},autocomplete:function e(){}}}else{t={open:e.open!==undefined?e.open:function(){},close:e.close!==undefined?e.close:function(){},cursorchange:e.cursorchange!==undefined?e.cursorchange:function(){},datasetsempty:e.datasetsempty!==undefined?e.datasetsempty:function(){},select:e.select!==undefined?e.select:function(){},autocomplete:e.autocomplete!==undefined?e.autocomplete:function(){}}}return t};i.module=angular.module("ngeoSearchDirective",[]);i.module.directive("ngeoSearch",i);var n=i;var a=r(176);var o=r(11);var s=r(360);var l=function e(t,r,i,n,s,l){var u=new a["a"];var c={remote:{url:t,prepare:function e(t,r){r.url=r.url.replace("%QUERY",t);return r},transform:function e(t){var a=t;if(r!==undefined){a={type:"FeatureCollection",features:a.features.filter(r)}}return u.readFeatures(a,{featureProjection:i,dataProjection:n})}},datumTokenizer:function e(){},queryTokenizer:Bloodhound.tokenizers.whitespace};var f=o["a"]({},s||{});var h=o["a"]({},l||{});if(f.remote){o["a"](h,f.remote);delete f.remote}o["a"](c,f);o["a"](c.remote,h);return new Bloodhound(c)};l.module=angular.module("ngeoSearchCreategeojsonbloodhound",[]);l.module.value("ngeoSearchCreateGeoJSONBloodhound",l);l.Function;var u=l;var c=r(12);var f=r(45);var h=r(34);var d=r(21);var p=function e(t){var r=t||{};var i=c["g"](f["a"]);var n=r.targetProjection;var a=function e(t){var r=/BOX\((.*?) (.*?),(.*?) (.*?)\)/g;var i=r.exec(t);if(i!==null){return[parseFloat(i[1]),parseFloat(i[2]),parseFloat(i[3]),parseFloat(i[4])]}else{return null}};var s=function e(t){return t.replace(/<\/?[ib]>/g,"")};var l=function e(t){var r=/<b>(.*?)<\/b>/g;var i=r.exec(t);if(i!==null){return i[1]}else{return t}};var u={remote:{url:"https://api3.geo.admin.ch/rest/services/api/SearchServer?type=locations&searchText=%QUERY",prepare:function e(t,i){i.url=i.url.replace("%QUERY",t);if(r.limit!==undefined){i.url+="&limit="+r.limit}if(r.origins!==undefined){i.url+="&origins="+r.origins}return r.prepare!==undefined?r.prepare(t,i):i},transform:function e(t){var r=t.results.map(function(e){var t=e.attrs;var r=new h["a"]([t.y,t.x]);var o=a(t.geom_st_box2d);if(n!==undefined){r.transform(i,n);if(o!==null){o=c["n"](o,i,n)}}t["geometry"]=r;t["bbox"]=o;var u=t.label;t["label_no_html"]=s(u);t["label_simple"]=l(u);var f=new d["a"](t);f.setId(t.featureId);return f});return r}},datumTokenizer:function e(){},queryTokenizer:Bloodhound.tokenizers.whitespace};var p=o["a"]({},r.options||{});var v=o["a"]({},r.remoteOptions||{});if(p.remote){o["a"](v,p.remote);delete p.remote}o["a"](u,p);o["a"](u.remote,v);return new Bloodhound(u)};p.module=angular.module("ngeoCreateLocationSearchBloodhound",[]);p.module.value("ngeoCreateLocationSearchBloodhound",p);p.Function;var v=p;var g=angular.module("ngeoSearchModule",[n.module.name,u.module.name,v.module.name]);var m=t["a"]=g},function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var n=angular.module("gmfLidarprofile",[]);n.value("gmfLidarprofileTemplateUrl",function(e,t){var r=t["gmfLidarprofileTemplateUrl"];return r!==undefined?r:"gmf/lidarprofile"});n.run(["$templateCache",function(e){e.put("gmf/lidarprofile",r(499))}]);a.$inject=["$element","$attrs","gmfLidarprofileTemplateUrl"];function a(e,t,r){return r(e,t)}n.component_={controller:"GmfLidarprofileController",bindings:{active:"=gmfLidarprofileActive",line:"=gmfLidarprofileLine"},templateUrl:a};n.component("gmfLidarprofile",n.component_);n.Controller_=function(){e.$inject=["$scope"];function e(t){var r=this;i(this,e);this.line;this.active=false;t.$watch(function(){return r.line},function(e,t){if(t!==e){r.active=!!r.line}})}return e}();n.controller("GmfLidarprofileController",n.Controller_);var o=n;function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var l=function(){e.$inject=["$http","pytreeLidarprofileJsonUrl"];function e(t,r){s(this,e);this.$http_=t;this.pytreeLidarprofileJsonUrl=r;this.loaded=false;this.clientConfig={autoWidth:true,margin:{left:40,top:10,right:200,bottom:40},pointAttributes:{},pointSum:0,tolerance:5};this.serverConfig=null}e.prototype.initProfileConfig=function e(){var t=this;return this.$http_.get(this.pytreeLidarprofileJsonUrl+"/profile/config").then(function(e){t.serverConfig={classification_colors:e.data["classification_colors"]||null,debug:!!e.data["debug"],default_attribute:e.data["default_attribute"]||"",default_color:e.data["default_color"]||"",default_point_attribute:e.data["default_point_attribute"]||"",default_point_cloud:e.data["default_point_cloud"]||"",initialLOD:e.data["initialLOD"]||0,max_levels:e.data["max_levels"]||null,max_point_number:e.data["max_point_number"]||5e4,minLOD:e.data["minLOD"]||0,point_attributes:e.data["point_attributes"]||null,point_size:e.data["point_size"]||0,width:e.data["width"]||0};var r=[];for(var i in t.serverConfig.point_attributes){if(t.serverConfig.point_attributes[i].visible==1){r.push(t.serverConfig.point_attributes[i])}}var n=t.serverConfig.point_attributes[t.serverConfig.default_point_attribute];t.clientConfig.pointAttributes={availableOptions:r,selectedOption:n}})};return e}();l.module=angular.module("gmfLidarprofileConfig",[]);l.module.service("gmfLidarprofileConfig",l);var u=l;var c=r(17);function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var h={mouse:c["mouse"],select:c["select"]};var d=function(){function e(t){f(this,e);this.manager_=t;this.pStart_={};this.pEnd_={}}e.prototype.clearMeasure=function e(){this.pStart_={};this.pEnd_={};var t=h.select("#gmf-lidarprofile-container svg.lidar-svg");t.selectAll("#text_m").remove();t.selectAll("#start_m").remove();t.selectAll("#end_m").remove();t.selectAll("#line_m").remove();t.on("click",null);t.style("cursor","default")};e.prototype.setMeasureActive=function e(){var t=h.select("#gmf-lidarprofile-container svg.lidar-svg");t.style("cursor","pointer");t.on("click",this.measureHeigt.bind(this))};e.prototype.measureHeigt=function e(){var t=h.select("#gmf-lidarprofile-container svg.lidar-svg");var r=h.mouse(t.node());var i=h.mouse(h.select("#gmf-lidarprofile-container .lidar-canvas").node());var n=this.manager_.config.clientConfig.margin;var a=r[0];var o=r[1];var s=2;var l=this.manager_.plot.updateScaleX;var u=this.manager_.plot.updateScaleY;var c=3;var f=this.manager_.utils.getClosestPoint(this.manager_.profilePoints,i[0],i[1],s,this.manager_.plot.updateScaleX,this.manager_.plot.updateScaleY,this.manager_.config.serverConfig.classification_colors);if(!this.pStart_.set){if(f!==undefined){this.pStart_.distance=f.distance;this.pStart_.altitude=f.altitude;this.pStart_.cx=l(f.distance)+n.left;this.pStart_.cy=u(f.altitude)+n.top}else{this.pStart_.distance=l["invert"](a);this.pStart_.altitude=u["invert"](o);this.pStart_.cx=a;this.pStart_.cy=o}this.pStart_.set=true;t.append("circle").attr("id","start_m").attr("cx",this.pStart_.cx).attr("cy",this.pStart_.cy).attr("r",c).style("fill","red")}else if(!this.pEnd_.set){if(f!==undefined){this.pEnd_.distance=f.distance;this.pEnd_.altitude=f.altitude;this.pEnd_.cx=l(f.distance)+n.left;this.pEnd_.cy=u(f.altitude)+n.top}else{this.pEnd_.distance=l["invert"](a);this.pEnd_.altitude=u["invert"](o);this.pEnd_.cx=a;this.pEnd_.cy=o}this.pEnd_.set=true;t.append("circle").attr("id","end_m").attr("cx",this.pEnd_.cx).attr("cy",this.pEnd_.cy).attr("r",c).style("fill","red");t.append("line").attr("id","line_m").attr("x1",this.pStart_.cx).attr("y1",this.pStart_.cy).attr("x2",this.pEnd_.cx).attr("y2",this.pEnd_.cy).attr("stroke-width",2).attr("stroke","red")}if(this.pStart_.set&&this.pEnd_.set){var d=this.pEnd_.altitude-this.pStart_.altitude;var p=this.pEnd_.distance-this.pStart_.distance;var v=Math.round(10*Math.sqrt(Math.pow(d,2)+Math.pow(p,2)))/10;if(!isNaN(v)){t.append("text").attr("id","text_m").attr("x",10+(this.pStart_.cx+this.pEnd_.cx)/2).attr("y",(this.pStart_.cy+this.pEnd_.cy)/2).text(v+" m").attr("font-family","sans-serif").attr("font-size","14px").style("font-weight","bold").attr("fill","red")}this.pEnd_.set=false;this.pStart_.set=false}};return e}();var p=d;var v=r(21);var g=r(34);var m=r(101);var y=r(47);var _=r(15);var b=r(241);var w=r(290);var S=r(257);var C=r(350);var x=r(75);var O=r(258);var T=function(e){return function(){return e}};function E(e,t,r){this.target=e;this.type=t;this.transform=r}function M(e,t,r){this.k=e;this.x=t;this.y=r}M.prototype={constructor:M,scale:function(e){return e===1?this:new M(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new M(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var j=new M(1,0,0);A.prototype=M.prototype;function A(e){return e.__zoom||j}function P(){c["event"].stopImmediatePropagation()}var k=function(){c["event"].preventDefault();c["event"].stopImmediatePropagation()};function I(){return!c["event"].button}function D(){var e=this,t,r;if(e instanceof SVGElement){e=e.ownerSVGElement||e;t=e.width.baseVal.value;r=e.height.baseVal.value}else{t=e.clientWidth;r=e.clientHeight}return[[0,0],[t,r]]}function R(){return this.__zoom||j}function L(){return-c["event"].deltaY*(c["event"].deltaMode?120:1)/500}function $(){return"ontouchstart"in this}function N(e,t,r){var i=e.invertX(t[0][0])-r[0][0],n=e.invertX(t[1][0])-r[1][0],a=e.invertY(t[0][1])-r[0][1],o=e.invertY(t[1][1])-r[1][1];return e.translate(n>i?(i+n)/2:Math.min(0,i)||Math.max(0,n),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}var F=function(){var e=I,t=D,r=N,i=L,n=$,a=[0,Infinity],o=[[-Infinity,-Infinity],[Infinity,Infinity]],s=250,l=x["interpolateZoom"],u=[],f=Object(S["dispatch"])("start","zoom","end"),h,d,p=500,v=150,g=0;function m(e){e.property("__zoom",R).on("wheel.zoom",G).on("mousedown.zoom",U).on("dblclick.zoom",H).filter(n).on("touchstart.zoom",Y).on("touchmove.zoom",W).on("touchend.zoom touchcancel.zoom",V).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(e,t){var r=e.selection?e.selection():e;r.property("__zoom",R);if(e!==r){w(e,t)}else{r.interrupt().each(function(){A(this,arguments).start().zoom(null,typeof t==="function"?t.apply(this,arguments):t).end()})}};m.scaleBy=function(e,t){m.scaleTo(e,function(){var e=this.__zoom.k,r=typeof t==="function"?t.apply(this,arguments):t;return e*r})};m.scaleTo=function(e,i){m.transform(e,function(){var e=t.apply(this,arguments),n=this.__zoom,a=b(e),s=n.invert(a),l=typeof i==="function"?i.apply(this,arguments):i;return r(_(y(n,l),a,s),e,o)})};m.translateBy=function(e,i,n){m.transform(e,function(){return r(this.__zoom.translate(typeof i==="function"?i.apply(this,arguments):i,typeof n==="function"?n.apply(this,arguments):n),t.apply(this,arguments),o)})};m.translateTo=function(e,i,n){m.transform(e,function(){var e=t.apply(this,arguments),a=this.__zoom,s=b(e);return r(j.translate(s[0],s[1]).scale(a.k).translate(typeof i==="function"?-i.apply(this,arguments):-i,typeof n==="function"?-n.apply(this,arguments):-n),e,o)})};function y(e,t){t=Math.max(a[0],Math.min(a[1],t));return t===e.k?e:new M(t,e.x,e.y)}function _(e,t,r){var i=t[0]-r[0]*e.k,n=t[1]-r[1]*e.k;return i===e.x&&n===e.y?e:new M(e.k,i,n)}function b(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function w(e,r,i){e.on("start.zoom",function(){A(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){A(this,arguments).end()}).tween("zoom",function(){var e=this,n=arguments,a=A(e,n),o=t.apply(e,n),s=i||b(o),u=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),c=e.__zoom,f=typeof r==="function"?r.apply(e,n):r,h=l(c.invert(s).concat(u/c.k),f.invert(s).concat(u/f.k));return function(e){if(e===1)e=f;else{var t=h(e),r=u/t[2];e=new M(r,s[0]-t[0]*r,s[1]-t[1]*r)}a.zoom(null,e)}})}function A(e,t){for(var r=0,i=u.length,n;r<i;++r){if((n=u[r]).that===e){return n}}return new F(e,t)}function F(e,r){this.that=e;this.args=r;this.index=-1;this.active=0;this.extent=t.apply(e,r)}F.prototype={start:function(){if(++this.active===1){this.index=u.push(this)-1;this.emit("start")}return this},zoom:function(e,t){if(this.mouse&&e!=="mouse")this.mouse[1]=t.invert(this.mouse[0]);if(this.touch0&&e!=="touch")this.touch0[1]=t.invert(this.touch0[0]);if(this.touch1&&e!=="touch")this.touch1[1]=t.invert(this.touch1[0]);this.that.__zoom=t;this.emit("zoom");return this},end:function(){if(--this.active===0){u.splice(this.index,1);this.index=-1;this.emit("end")}return this},emit:function(e){Object(c["customEvent"])(new E(m,e,this.that.__zoom),f.apply,f,[e,this.that,this.args])}};function G(){if(!e.apply(this,arguments))return;var t=A(this,arguments),n=this.__zoom,s=Math.max(a[0],Math.min(a[1],n.k*Math.pow(2,i.apply(this,arguments)))),l=Object(c["mouse"])(this);if(t.wheel){if(t.mouse[0][0]!==l[0]||t.mouse[0][1]!==l[1]){t.mouse[1]=n.invert(t.mouse[0]=l)}clearTimeout(t.wheel)}else if(n.k===s)return;else{t.mouse=[l,n.invert(l)];Object(O["a"])(this);t.start()}k();t.wheel=setTimeout(u,v);t.zoom("mouse",r(_(y(n,s),t.mouse[0],t.mouse[1]),t.extent,o));function u(){t.wheel=null;t.end()}}function U(){if(d||!e.apply(this,arguments))return;var t=A(this,arguments),i=Object(c["select"])(c["event"].view).on("mousemove.zoom",l,true).on("mouseup.zoom",u,true),n=Object(c["mouse"])(this),a=c["event"].clientX,s=c["event"].clientY;Object(C["dragDisable"])(c["event"].view);P();t.mouse=[n,this.__zoom.invert(n)];Object(O["a"])(this);t.start();function l(){k();if(!t.moved){var e=c["event"].clientX-a,i=c["event"].clientY-s;t.moved=e*e+i*i>g}t.zoom("mouse",r(_(t.that.__zoom,t.mouse[0]=Object(c["mouse"])(t.that),t.mouse[1]),t.extent,o))}function u(){i.on("mousemove.zoom mouseup.zoom",null);Object(C["dragEnable"])(c["event"].view,t.moved);k();t.end()}}function H(){if(!e.apply(this,arguments))return;var i=this.__zoom,n=Object(c["mouse"])(this),a=i.invert(n),l=i.k*(c["event"].shiftKey?.5:2),u=r(_(y(i,l),n,a),t.apply(this,arguments),o);k();if(s>0)Object(c["select"])(this).transition().duration(s).call(w,u,n);else Object(c["select"])(this).call(m.transform,u)}function Y(){if(!e.apply(this,arguments))return;var t=A(this,arguments),r=c["event"].changedTouches,i,n=r.length,a,o,s;P();for(a=0;a<n;++a){o=r[a],s=Object(c["touch"])(this,r,o.identifier);s=[s,this.__zoom.invert(s),o.identifier];if(!t.touch0)t.touch0=s,i=true;else if(!t.touch1)t.touch1=s}if(h){h=clearTimeout(h);if(!t.touch1){t.end();s=Object(c["select"])(this).on("dblclick.zoom");if(s)s.apply(this,arguments);return}}if(i){h=setTimeout(function(){h=null},p);Object(O["a"])(this);t.start()}}function W(){var e=A(this,arguments),t=c["event"].changedTouches,i=t.length,n,a,s,l;k();if(h)h=clearTimeout(h);for(n=0;n<i;++n){a=t[n],s=Object(c["touch"])(this,t,a.identifier);if(e.touch0&&e.touch0[2]===a.identifier)e.touch0[0]=s;else if(e.touch1&&e.touch1[2]===a.identifier)e.touch1[0]=s}a=e.that.__zoom;if(e.touch1){var u=e.touch0[0],f=e.touch0[1],d=e.touch1[0],p=e.touch1[1],v=(v=d[0]-u[0])*v+(v=d[1]-u[1])*v,g=(g=p[0]-f[0])*g+(g=p[1]-f[1])*g;a=y(a,Math.sqrt(v/g));s=[(u[0]+d[0])/2,(u[1]+d[1])/2];l=[(f[0]+p[0])/2,(f[1]+p[1])/2]}else if(e.touch0)s=e.touch0[0],l=e.touch0[1];else return;e.zoom("touch",r(_(a,s,l),e.extent,o))}function V(){var e=A(this,arguments),t=c["event"].changedTouches,r=t.length,i,n;P();if(d)clearTimeout(d);d=setTimeout(function(){d=null},p);for(i=0;i<r;++i){n=t[i];if(e.touch0&&e.touch0[2]===n.identifier)delete e.touch0;else if(e.touch1&&e.touch1[2]===n.identifier)delete e.touch1}if(e.touch1&&!e.touch0)e.touch0=e.touch1,delete e.touch1;if(e.touch0)e.touch0[1]=this.__zoom.invert(e.touch0[0]);else e.end()}m.wheelDelta=function(e){return arguments.length?(i=typeof e==="function"?e:T(+e),m):i};m.filter=function(t){return arguments.length?(e=typeof t==="function"?t:T(!!t),m):e};m.touchable=function(e){return arguments.length?(n=typeof e==="function"?e:T(!!e),m):n};m.extent=function(e){return arguments.length?(t=typeof e==="function"?e:T([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),m):t};m.scaleExtent=function(e){return arguments.length?(a[0]=+e[0],a[1]=+e[1],m):[a[0],a[1]]};m.translateExtent=function(e){return arguments.length?(o[0][0]=+e[0][0],o[1][0]=+e[1][0],o[0][1]=+e[0][1],o[1][1]=+e[1][1],m):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]};m.constrain=function(e){return arguments.length?(r=e,m):r};m.duration=function(e){return arguments.length?(s=+e,m):s};m.interpolate=function(e){return arguments.length?(l=e,m):l};m.on=function(){var e=f.on.apply(f,arguments);return e===f?m:e};m.clickDistance=function(e){return arguments.length?(g=(e=+e)*e,m):Math.sqrt(g)};return m};var G=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function U(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var H={axisBottom:b["a"],axisLeft:b["b"],mouse:c["mouse"],scaleLinear:w["a"],select:c["select"],zoom:F};var Y=function(){function e(t){U(this,e);this.manager_=t;this.scaleX;this.updateScaleX;this.scaleY;this.updateScaleY;this.material;this.width_;this.height_;this.previousDomainX=[];this.moved_=false}e.prototype.drawPoints=function e(t){var r=-1;var i=t.distance.length;var n=void 0,a=void 0;var o=H.select("#gmf-lidarprofile-container .lidar-canvas").node().getContext("2d");var s=this.manager_.config.serverConfig;while(++r<i){var l=t.distance[r];var u=t.altitude[r];var c=t.color_packed[r];var f=t.intensity[r];var h=t.classification[r];if(s.classification_colors[h]&&s.classification_colors[h].visible){n=this.updateScaleX(l);a=this.updateScaleY(u);o.beginPath();o.moveTo(n,a);if(this.material=="COLOR_PACKED"){o.fillStyle="RGB("+c[0]+", "+c[1]+", "+c[2]+")"}else if(this.material=="INTENSITY"){o.fillStyle="RGB("+f+", "+f+", "+f+")"}else if(this.material=="CLASSIFICATION"){o.fillStyle="RGB("+s.classification_colors[h].color+")"}else{o.fillStyle=s.default_color}o.arc(n,a,s.point_size,0,2*Math.PI,false);o.fill()}}};e.prototype.setupPlot=function e(t,r){var i=this;var n=H.select("#gmf-lidarprofile-container .lidar-canvas");var a=n.node();var o=a.getContext("2d");o.clearRect(0,0,a.getBoundingClientRect().width,a.getBoundingClientRect().height);var s=this.manager_.config.clientConfig.margin;var l=H.select("#gmf-lidarprofile-container").node();var u=l.getBoundingClientRect().width;var c=l.getBoundingClientRect().height;this.width_=u-(s.left+s.right);this.height_=c-(s.top+s.bottom);this.material=this.manager_.config.serverConfig.default_attribute;n.attr("height",this.height_).attr("width",this.width_).style("background-color","black").style("z-index",0).style("position","absolute").style("margin-left",s.left.toString()+"px").style("margin-top",s.top.toString()+"px");var f=t[1]-t[0];var h=r[1]-r[0];var d=f/h;var p=this.width_;var v=this.height_;var g=p/v;var m=void 0;if(d<g){var y=g/d;var _=f*y;this.scaleX=H.scaleLinear();this.scaleX["domain"]([0,_]);this.scaleX["range"]([0,this.width_]);this.scaleY=H.scaleLinear();this.scaleY["domain"](r);this.scaleY["range"]([this.height_,0])}else{m=d/g;var b=h*m;var w=(r[1]+r[0])/2;this.scaleX=H.scaleLinear();this.scaleX["domain"](t);this.scaleX["range"]([0,this.width_]);this.scaleY=H.scaleLinear();this.scaleY["domain"]([w-b/2,w+b/2]);this.scaleY["range"]([this.height_,0])}var S=H.zoom().scaleExtent([-10,100]).translateExtent([[0,0],[this.width_,this.height_]]).extent([[0,0],[this.width_,this.height_]]).on("zoom",this.zoomed.bind(this));S.on("end",this.zoomEnd.bind(this));this.previousDomainX=this.scaleX["domain"]();this.updateScaleX=this.scaleX;this.updateScaleY=this.scaleY;var C=H.select("#gmf-lidarprofile-container svg.lidar-svg");C.call(S).on("dblclick.zoom",null);C.selectAll("*").remove();C.attr("width",this.width_+s.left).attr("height",this.height_+s.top+s.bottom);C.on("mousemove",function(){i.pointHighlight.bind(i)()});var x=H.axisBottom(this.scaleX);var O=H.axisLeft(this.scaleY).tickSize(-this.width_);C.select(".y.axis").selectAll("g.tick line").style("stroke","#b7cff7");C.append("g").attr("class","y axis").call(O);C.append("g").attr("class","x axis").call(x);C.select(".y.axis").attr("transform","translate("+s.left+", "+s.top+")");C.select(".x.axis").attr("transform","translate("+s.left+", "+(this.height_+s.top)+")");C.select(".y.axis").selectAll("g.tick line").style("opacity","0.5").style("stroke","#b7cff7")};e.prototype.zoomEnd=function e(){if(c["event"].sourceEvent&&this.moved_===false){return}this.moved_=false;var t=H.select("#gmf-lidarprofile-container .lidar-canvas").node().getContext("2d");t.clearRect(0,0,this.width_,this.height_);this.manager_.updateData()};e.prototype.zoomed=function e(){if(c["event"].sourceEvent&&c["event"].sourceEvent.type==="mousemove"){this.moved_=true;if(c["event"].sourceEvent.movementX==0&&c["event"].sourceEvent.movementY==0){return}}this.manager_.measure.clearMeasure();var t=c["event"].transform;var r=H.select("#gmf-lidarprofile-container svg.lidar-svg");var i=H.axisBottom(this.scaleX);var n=H.axisLeft(this.scaleY).tickSize(-this.width_);var a=t.rescaleX(this.scaleX);var o=t.rescaleY(this.scaleY);r.select(".x.axis").call(i.scale(a));r.select(".y.axis").call(n.scale(o));var s=H.select("#gmf-lidarprofile-container .lidar-canvas").node().getContext("2d");s.clearRect(0,0,this.width_,this.height_);r.select(".y.axis").selectAll("g.tick line").style("opacity","0.5").style("stroke","#b7cff7");this.updateScaleX=a;this.updateScaleY=o};e.prototype.pointHighlight=function e(){var t=H.select("#gmf-lidarprofile-container svg.lidar-svg");var r=H.select("#gmf-lidarprofile-container .lidar-info");var i=this.manager_.config.serverConfig.point_size;var n=this.manager_.config.clientConfig.margin;var a=this.manager_.config.clientConfig.tolerance||0;var o=H.mouse(H.select("#gmf-lidarprofile-container .lidar-canvas").node());var s=this.manager_.config.serverConfig.classification_colors;var l=void 0,u=void 0;var c=this.manager_.utils.getClosestPoint(this.manager_.profilePoints,o[0],o[1],a,this.updateScaleX,this.updateScaleY,s);if(c!=undefined){l=this.updateScaleX(c.distance)+n.left;u=this.updateScaleY(c.altitude)+n.top;t.selectAll("#highlightCircle").remove();t.append("circle").attr("id","highlightCircle").attr("cx",l).attr("cy",u).attr("r",i+1).style("fill","orange");var f=c.classification||-1;var h=s[f]||{};var d=this.getInfoHTML(c,h,1);r.html(d);this.manager_.cartoHighlight.setElement(null);var p=document.createElement("div");p.className+="tooltip gmf-tooltip-measure";p.innerHTML=d;this.manager_.cartoHighlight.setElement(p);this.manager_.cartoHighlight.setPosition([c.coords[0],c.coords[1]]);this.manager_.lidarPointHighlight.getSource().clear();var b=new g["a"]([c.coords[0],c.coords[1]]);var w=new v["a"](b);if(G(h.color)!==undefined){w.setStyle(new _["c"]({image:new m["a"]({fill:new y["a"]({color:"rgba("+h.color+", 1)"}),radius:3})}))}this.manager_.lidarPointHighlight.getSource().addFeature(w)}else{this.manager_.lidarPointHighlight.getSource().clear();t.select("#highlightCircle").remove();r.html("");this.manager_.cartoHighlight.setPosition(undefined)}};e.prototype.getInfoHTML=function e(t,r,i){var n=this.manager_.gettextCatalog;var a=[];var o=this.manager_.$filter("number");var s=t.distance;var l=t.altitude;var u=n.getString(r.name);var c=t.intensity;if(s!==undefined){var f=n.getString("Distance: ");a.push(""+(f+o(s,i)))}if(l!==undefined){var h=n.getString("Altitude: ");a.push(""+(h+o(l,i)))}if(u.length>0){var d=n.getString("Classification: ");a.push(""+(d+u))}if(c!==undefined){var p=n.getString("Intensity: ");a.push(""+(p+o(c,0)))}return a.join("</br>")};e.prototype.changeStyle=function e(t){this.material=t;var r=H.select("#gmf-lidarprofile-container .lidar-canvas").node();var i=r.getContext("2d");i.clearRect(0,0,r.width,r.height);this.drawPoints(this.manager_.profilePoints)};e.prototype.setClassActive=function e(t,r){this.manager_.config.serverConfig.classification_colors=t;this.changeStyle(r)};return e}();var W=Y;var V=r(51);var z=r(143);var q=r(38);var B=r(332);function X(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var K={select:c["select"]};var Z=function(){function e(){X(this,e)}e.prototype.clipLineByMeasure=function e(t,r,i,n,a){var o=new V["a"]([]);var s=0;var l=0;var u=i.getLength();var c=n/u;var f=a/u;var h=i.getCoordinates().length-1;var d=0;i.forEachSegment(function(e,t){d+=1;var r=new V["a"]([e,t]);l+=r.getLength();if(n==s){o.appendCoordinate(e)}else if(n>s&&n<l){o.appendCoordinate(i.getCoordinateAt(c))}if(s>n&&s<a){o.appendCoordinate(e)}if(a==l){o.appendCoordinate(t)}else if(a>s&&a<l){o.appendCoordinate(i.getCoordinateAt(f))}else if(a>s&&a>l&&d===h){o.appendCoordinate(i.getCoordinateAt(f))}s+=r.getLength()});var p=new v["a"]({geometry:o});var m=new _["c"]({stroke:new q["a"]({color:"rgba(255,0,0,1)",width:2,lineCap:"square"})});var b=0;var w=0;h=o.getCoordinates().length-1;var S=1;o.forEachSegment(function(e,t){if(S==1){var r=t[0]-e[0];var i=t[1]-e[1];b=Math.atan2(r,i)}if(S==h){var n=t[0]-e[0];var a=t[1]-e[1];w=Math.atan2(n,a)}S+=1});var C=[m];var x=o.getLastCoordinate();var O=o.getFirstCoordinate();C.push(new _["c"]({geometry:new g["a"](O),image:new z["a"]({fill:new y["a"]({color:"rgba(255, 0, 0, 1)"}),stroke:new q["a"]({color:"rgba(255,0,0,1)",width:1,lineCap:"square"}),points:3,radius:5,rotation:b,angle:Math.PI/3})}),new _["c"]({geometry:new g["a"](x),image:new z["a"]({fill:new y["a"]({color:"rgba(255, 0, 0, 1)"}),stroke:new q["a"]({color:"rgba(255,0,0,1)",width:1,lineCap:"square"}),points:3,radius:5,rotation:w,angle:4*Math.PI/3})}));return{clippedLine:o.getCoordinates(),distanceOffset:n,bufferGeom:p,bufferStyle:C}};e.prototype.getNiceLOD=function e(t,r){var i=0;var n=0;for(var a in r){var o=parseInt(a,10);if(t<o&&r[o].max>i){i=r[o].max;n=r[o].width}}return{maxLOD:i,width:n}};e.prototype.downloadProfileAsImageFile=function e(t){var r=K.select("#gmf-lidarprofile-container svg.lidar-svg");var i=parseInt(r.attr("width"),10);var n=parseInt(r.attr("height"),10);var a=t.margin;var o=document.createElement("canvas");o.style.display="none";o.width=i;o.height=n;var s=o.getContext("2d");s.fillStyle="white";s.fillRect(0,0,i,n);var l=K.select("#gmf-lidarprofile-container .lidar-canvas").node();s.drawImage(l,a.left,a.top,i-(a.left+a.right),n-(a.top+a.bottom));var u=new Image;var c=new XMLSerializer;var f=c.serializeToString(r.node());var h="lidare_profile_for_export_uid";u.id=h;u.src="data:image/svg+xml;base64, "+btoa(f);u.style.setProperty("display","none");var d=document.getElementsByTagName("body")[0];u.onload=function(){s.drawImage(u,0,0,i,n);d.removeChild(document.getElementById(h));o.toBlob(function(e){Object(B["saveAs"])(e,"LIDAR_profile.png")})};d.appendChild(u)};e.prototype.getFlatPointsByDistance=function e(t){var r=[];for(var i=0;i<t.distance.length;i++){var n={distance:t.distance[i],altitude:t.altitude[i],color_packed:t.color_packed[i],intensity:t.intensity[i],classification:t.classification[i],coords:t.coords[i]};r.push(n)}r.sort(function(e,t){return e.distance-t.distance});return r};e.prototype.getCSVData=function e(t){return t.map(function(e){var t={};for(var r in e){var i=e[r];if(r=="altitude"){t[r]=i.toFixed(4)}else if(r=="color_packed"||r=="coords"){t[r]=i.join(" ")}else{t[r]=i}}return t})};e.prototype.arrayMax=function e(t){return t.reduce(function(e,t){return Math.max(e,t)})};e.prototype.arrayMin=function e(t){var r=Infinity;for(var i=0;i<t.length;i++){if(t[i]<r){r=t[i]}}return r};e.prototype.getPytreeLinestring=function e(t){var r=t.getCoordinates();var i="";for(var n=0;n<r.length;n++){var a=r[n][0];var o=r[n][1];i+="{"+Math.round(100*a)/100+", "+Math.round(100*o)/100+"},"}return i.substr(0,i.length-1)};e.prototype.getClosestPoint=function e(t,r,i,n,a,o,s){var l=t;var u=n;var c=[];var f=[];for(var h=0;h<l.distance.length;h++){if(a(l.distance[h])<r+u&&a(l.distance[h])>r-u&&o(l.altitude[h])<i+u&&o(l.altitude[h])>i-u){var d=Math.sqrt(Math.pow(a(l.distance[h])-r,2)+Math.pow(o(l.altitude[h])-i,2));var p=s[l.classification[h]];if(p&&p.visible==1){f.push({distance:l.distance[h],altitude:l.altitude[h],classification:l.classification[h],color_packed:l.color_packed[h],intensity:l.intensity[h],coords:l.coords[h]});c.push(d)}}}var v=void 0;if(f.length>0){var g=Math.min(c);var m=c.indexOf(g);if(m!=-1){v=f[m]}else{v=f[0]}}return v};return e}();var Q=Z;var J=r(135);var ee=r(89);var te=r(144);var re=r(76);function ie(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var ne={select:c["select"]};var ae=function(){e.$inject=["$http","$filter","gettextCatalog","ngeoDebounce"];function e(t,r,i,n){ie(this,e);this.$http=t;this.$filter=r;this.gettextCatalog=i;this.ngeoDebounce_=n;this.promise=null;this.plot=null;this.measure=null;this.config=null;this.map_=null;this.cartoHighlight=new te["a"]({offset:[0,-15],positioning:"bottom-center"});this.lidarPointHighlight=new ee["a"]({source:new re["b"]({}),style:new _["c"]({image:new m["a"]({fill:new y["a"]({color:"rgba(0, 0, 255, 1)"}),radius:3})})});this.lidarBuffer=new ee["a"]({source:new re["b"]({})});this.profilePoints=this.getEmptyProfilePoints_();this.isPlotSetup_=false;this.line_;this.utils=new Q}e.prototype.init=function e(t,r){this.config=t;this.plot=new W(this);this.measure=new p(this);this.setMap(r)};e.prototype.clearBuffer=function e(){if(this.lidarBuffer){this.lidarBuffer.getSource().clear()}};e.prototype.setLine=function e(t){this.line_=t};e.prototype.setMap=function e(t){this.map_=t;this.cartoHighlight.setMap(t);this.lidarPointHighlight.setMap(t);this.lidarBuffer.setMap(t)};e.prototype.getEmptyProfilePoints_=function e(){return{distance:[],altitude:[],color_packed:[],intensity:[],classification:[],coords:[]}};e.prototype.getProfileByLOD=function e(t,r,i,n){var a=this.gettextCatalog;this.profilePoints=this.getEmptyProfilePoints_();if(i){this.isPlotSetup_=false}ne.select("#gmf-lidarprofile-container .lidar-error").style("visibility","hidden");var o=this.utils.getPytreeLinestring(this.line_);var s=void 0;var l=this.config.serverConfig.max_levels;if(r==0){s=this.utils.getNiceLOD(this.line_.getLength(),l)}else{var u=this.plot.updateScaleX["domain"]();o="";for(var c=0;c<t.length;c++){o+="{"+t[c][0]+","+t[c][1]+"},"}o=o.substr(0,o.length-1);s=this.utils.getNiceLOD(u[1]-u[0],l)}var f=false;ne.select("#gmf-lidarprofile-container .lod-info").html("");this.config.clientConfig.pointSum=0;var h=0;if(this.config.clientConfig.autoWidth){h=s.width}else{h=this.config.serverConfig.width}var d=a.getString("Profile width: ");ne.select("#gmf-lidarprofile-container .width-info").html(d+" "+h+"m");for(var p=0;p<s.maxLOD;p++){if(p==0){this.queryPytree_(n,this.config.serverConfig.initialLOD,p,o,r,f,h,i);p+=this.config.serverConfig.initialLOD-1}else if(p<s.maxLOD-1){this.queryPytree_(n+p,n+p+1,p,o,r,f,h,false)}else{f=true;this.queryPytree_(n+p,n+p+1,p,o,r,f,h,false)}}};e.prototype.queryPytree_=function e(t,r,i,n,a,o,s,l){var u=this;var c=this.gettextCatalog;var f=ne.select("#gmf-lidarprofile-container .lod-info");if(this.config.serverConfig.debug){var h=f.html();var d=c.getString("Loading LOD: ");h+=d+" "+t+"-"+r+"...<br>";f.html(h)}var p=this.config.serverConfig.default_point_cloud;var v=this.config.pytreeLidarprofileJsonUrl+"profile/get?minLOD="+t+"\n      &maxLOD="+r+"&width="+s+"&coordinates="+n+"&pointCloud="+p+"&attributes=";this.$http.get(v,{headers:{"Content-Type":"text/plain; charset=x-user-defined"},responseType:"arraybuffer"}).then(function(e){if(u.config.serverConfig.debug){var n=f.html();var s=c.getString("LOD: ");var h=c.getString("loaded");n+=s+" "+t+"-"+r+" "+h+"<br>";f.html(n)}u.processBuffer_(e.data,i,a,o,l)},function(e){console.error(e)})};e.prototype.processBuffer_=function e(t,r,i,n,a){var o=ne.select("#gmf-lidarprofile-container .lidar-error");var s=new Int32Array(t,0,4);var l=s[0];var u=new Uint8Array(t,4,l);var c="";for(var f=0;f<u.length;f++){c+=String.fromCharCode(u[f])}try{JSON.parse(c)}catch(e){if(!this.isPlotSetup_){var h=ne.select("#gmf-lidarprofile-container .lidar-canvas");var d=h.node();var p=d.getContext("2d");p.clearRect(0,0,d.getBoundingClientRect().width,d.getBoundingClientRect().height);h.selectAll("*").remove();var v=this.getHTMLError_();o.style("visibility","visible");o.html(v)}return}o.style("visibility","hidden");var g=JSON.parse(c);this.config.clientConfig.pointSum+=g["points"];if(this.config.clientConfig.pointSum>this.config.serverConfig.max_point_number){console.warn("Number of points is higher than Pytree configuration max value !")}var m=g["pointAttributes"];var y=[];for(var _=0;_<m.length;_++){if(this.config.serverConfig.point_attributes[m[_]]!=undefined){y.push(this.config.serverConfig.point_attributes[m[_]])}}var b=g["scale"];if(g["points"]<3){return}var w=this.getEmptyProfilePoints_();var S=g["bytesPerPoint"];var C=t.slice(4+l);for(var x=0;x<g["points"];x++){var O=S*x;var T=new DataView(C,O,S);var E=0;for(var M=0;M<y.length;M++){if(y[M]["value"]=="POSITION_PROJECTED_PROFILE"){var j=T.getUint32(E,true);var A=j*b;w.distance.push(Math.round(100*(i+A))/100);this.profilePoints.distance.push(Math.round(100*(i+A))/100)}else if(y[M]["value"]=="CLASSIFICATION"){var P=T.getUint8(E);w.classification.push(P);this.profilePoints.classification.push(P)}else if(y[M]["value"]=="INTENSITY"){var k=T.getUint8(E);w.intensity.push(k);this.profilePoints.intensity.push(k)}else if(y[M]["value"]=="COLOR_PACKED"){var I=T.getUint8(E);var D=T.getUint8(E+1);var R=T.getUint8(E+2);w.color_packed.push([I,D,R]);this.profilePoints.color_packed.push([I,D,R])}else if(y[M]["value"]=="POSITION_CARTESIAN"){var L=T.getInt32(E,true)*b+g["boundingBox"]["lx"];var $=T.getInt32(E+4,true)*b+g["boundingBox"]["ly"];var N=T.getInt32(E+8,true)*b+g["boundingBox"]["lz"];w.coords.push([L,$]);w.altitude.push(N);this.profilePoints.altitude.push(N);this.profilePoints.coords.push([L,$])}E=E+y[M]["bytes"]}}var F=[0,this.line_.getLength()];var G=[this.utils.arrayMin(w.altitude),this.utils.arrayMax(w.altitude)];if(r==0&&a||!this.isPlotSetup_){this.plot.setupPlot(F,G);this.isPlotSetup_=true}this.plot.drawPoints(w)};e.prototype.getHTMLError_=function e(){var t=this.gettextCatalog;var r=t.getString("Lidar profile service error");var i=t.getString("It might be offline");var n=t.getString("Or did you attempt to draw a profile outside data extent?");var a=t.getString("Or did you attempt to draw such a small profile that no point was returned?");return'\n      <div class="lidarprofile-error">\n      <p class="bold">'+r+"</p>\n      <p>"+i+"</p>\n      <p>"+n+"</p>\n      <p>"+a+"</p>\n    "};e.prototype.updateData=function e(){this.ngeoDebounce_(this.updateData_.bind(this),200,true)()};e.prototype.updateData_=function e(){var t=this.plot.updateScaleX["domain"]();var r=this.map_?this.map_.getView().getResolution():0;r=r||0;var i=this.utils.clipLineByMeasure(this.config,r,this.line_,t[0],t[1]);this.lidarBuffer.getSource().clear();this.lidarBuffer.getSource().addFeature(i.bufferGeom);this.lidarBuffer.setStyle(i.bufferStyle);var n=t[1]-t[0];var a=this.utils.getNiceLOD(n,this.config.serverConfig.max_levels);var o=.2;if(Math.abs(t[0]-this.plot.previousDomainX[0])<o&&Math.abs(t[1]-this.plot.previousDomainX[1])<o){this.plot.drawPoints(this.profilePoints)}else{if(a.maxLOD<=this.config.serverConfig.initialLOD){this.plot.drawPoints(this.profilePoints)}else{this.getProfileByLOD(i.clippedLine,i.distanceOffset,false,0)}}this.plot.previousDomainX=t};return e}();ae.module=angular.module("gmfLidarprofileManager",[J["a"].name]);ae.module.service("gmfLidarprofileManager",ae);var oe=ae;var se=r(308);var le=r(105);var ue=r(183);var ce=r(50);var fe=r(77);function he(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var de=angular.module("gmfLidarprofilePanel",[u.module.name,oe.module.name,se["a"].name,le["a"].name,ue["a"].module.name,fe["a"].module.name]);de.value("gmfLidarprofilePanelTemplateUrl",function(e,t){var r=t["gmfLidarprofilePanelTemplateUrl"];return r!==undefined?r:"gmf/lidarprofilePanel"});de.run(["$templateCache",function(e){e.put("gmf/lidarprofilePanel",r(490))}]);pe.$inject=["$element","$attrs","gmfLidarprofilePanelTemplateUrl"];function pe(e,t,r){return r(e,t)}de.component_={controller:"gmfLidarprofilePanelController",bindings:{active:"=gmfLidarprofilePanelActive",map:"<gmfLidarprofilePanelMap",line:"=gmfLidarprofilePanelLine"},templateUrl:pe};de.component("gmfLidarprofilePanel",de.component_);de.Controller_=function(){e.$inject=["$scope","gmfLidarprofileManager","gmfLidarprofileConfig","ngeoToolActivateMgr","ngeoCsvDownload"];function e(t,r,i,n,a){var o=this;he(this,e);this.ready=false;this.profileConfig_=i;this.profile=r;this.active=false;this.map=null;this.line;this.measureActive=false;this.ngeoCsvDownload_=a;this.ngeoToolActivateMgr_=n;this.tool=new ce["a"](this,"active");this.ngeoToolActivateMgr_.registerTool("mapTools",this.tool,false);t.$watch(function(){return o.active},function(e,t){if(t!==e){o.updateEventsListening_(e)}});t.$watch(function(){return o.line},function(e,t){if(t!==e){o.update_()}})}e.prototype.$onInit=function e(){this.profile.init(this.profileConfig_,this.map)};e.prototype.initConfigAndActivateTool_=function e(){var t=this;this.profileConfig_.initProfileConfig().then(function(e){t.ready=true;t.ngeoToolActivateMgr_.activateTool(t.tool)})};e.prototype.updateEventsListening_=function e(t){if(t===true){if(!this.ready){this.initConfigAndActivateTool_()}else{this.ngeoToolActivateMgr_.activateTool(this.tool)}}else{this.clearAll();this.ngeoToolActivateMgr_.deactivateTool(this.tool)}};e.prototype.update_=function e(){this.profile.clearBuffer();if(this.line){this.profile.setLine(this.line);this.profile.getProfileByLOD([],0,true,this.profileConfig_.serverConfig.minLOD)}else{this.clearAll()}};e.prototype.clearAll=function e(){this.line=null;this.profile.setLine(null);this.profile.cartoHighlight.setPosition(undefined);this.clearMeasure();this.resetPlot()};e.prototype.setMeasureActive=function e(){this.measureActive=true;this.profile.measure.clearMeasure();this.profile.measure.setMeasureActive()};e.prototype.clearMeasure=function e(){this.measureActive=false;this.profile.measure.clearMeasure()};e.prototype.resetPlot=function e(){this.profile.clearBuffer();if(this.line){this.profile.getProfileByLOD([],0,true,0)}};e.prototype.getAvailablePointAttributes=function e(){return this.profileConfig_.clientConfig.pointAttributes.availableOptions};e.prototype.getSetSelectedPointAttribute=function e(t){if(t!==undefined){this.profileConfig_.clientConfig.pointAttributes.selectedOption=t;this.profile.plot.changeStyle(t.value)}return this.profileConfig_.clientConfig.pointAttributes.selectedOption};e.prototype.getClassification=function e(){return this.profileConfig_.serverConfig.classification_colors};e.prototype.setClassification=function e(t,r){this.profileConfig_.serverConfig.classification_colors[r].visible=t.visible;if(this.line){this.profile.plot.setClassActive(this.profileConfig_.serverConfig.classification_colors,this.profileConfig_.serverConfig.default_attribute)}};e.prototype.csvExport=function e(){if(this.line){var t=this.profile.utils.getFlatPointsByDistance(this.profile.profilePoints)||{};var r=this.profile.utils.getCSVData(t);var i=Object.keys(t[0]);i=i.map(function(e){return{name:e}});this.ngeoCsvDownload_.startDownload(r,i,"LIDAR_profile.csv")}};e.prototype.pngExport=function e(){if(this.line){this.profile.utils.downloadProfileAsImageFile(this.profileConfig_.clientConfig)}};return e}();de.controller("gmfLidarprofilePanelController",de.Controller_);var ve=de;var ge=r(581);var me=angular.module("gmfLidarprofileModule",[o.name,ve.name,u.module.name,oe.module.name]);var ye=t["a"]=me},function(e,t,r){"use strict";var i=r(68);var n=r(351);var a=Array.prototype;var o=a.map;var s=a.slice;var l={name:"implicit"};function u(e){var t=Object(n["map"])(),r=[],i=l;e=e==null?[]:s.call(e);function a(n){var a=n+"",o=t.get(a);if(!o){if(i!==l)return i;t.set(a,o=r.push(n))}return e[(o-1)%e.length]}a.domain=function(e){if(!arguments.length)return r.slice();r=[],t=Object(n["map"])();var i=-1,o=e.length,s,l;while(++i<o)if(!t.has(l=(s=e[i])+""))t.set(l,r.push(s));return a};a.range=function(t){return arguments.length?(e=s.call(t),a):e.slice()};a.unknown=function(e){return arguments.length?(i=e,a):i};a.copy=function(){return u().domain(r).range(e).unknown(i)};return a}function c(){var e=u().unknown(undefined),t=e.domain,r=e.range,n=[0,1],a,o,s=false,l=0,f=0,h=.5;delete e.unknown;function d(){var e=t().length,u=n[1]<n[0],c=n[u-0],d=n[1-u];a=(d-c)/Math.max(1,e-l+f*2);if(s)a=Math.floor(a);c+=(d-c-a*(e-l))*h;o=a*(1-l);if(s)c=Math.round(c),o=Math.round(o);var p=Object(i["f"])(e).map(function(e){return c+a*e});return r(u?p.reverse():p)}e.domain=function(e){return arguments.length?(t(e),d()):t()};e.range=function(e){return arguments.length?(n=[+e[0],+e[1]],d()):n.slice()};e.rangeRound=function(e){return n=[+e[0],+e[1]],s=true,d()};e.bandwidth=function(){return o};e.step=function(){return a};e.round=function(e){return arguments.length?(s=!!e,d()):s};e.padding=function(e){return arguments.length?(l=f=Math.max(0,Math.min(1,e)),d()):l};e.paddingInner=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),d()):l};e.paddingOuter=function(e){return arguments.length?(f=Math.max(0,Math.min(1,e)),d()):f};e.align=function(e){return arguments.length?(h=Math.max(0,Math.min(1,e)),d()):h};e.copy=function(){return c().domain(t()).range(n).round(s).paddingInner(l).paddingOuter(f).align(h)};return d()}function f(e){var t=e.copy;e.padding=e.paddingOuter;delete e.paddingInner;delete e.paddingOuter;e.copy=function(){return f(t())};return e}function h(){return f(c().paddingInner(1))}var d=r(75);var p=function(e){return function(){return e}};var v=function(e){return+e};var g=[0,1];function m(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:p(t)}function y(e){return function(t,r){var i=e(t=+t,r=+r);return function(e){return e<=t?0:e>=r?1:i(e)}}}function _(e){return function(t,r){var i=e(t=+t,r=+r);return function(e){return e<=0?t:e>=1?r:i(e)}}}function b(e,t,r,i){var n=e[0],a=e[1],o=t[0],s=t[1];if(a<n)n=r(a,n),o=i(s,o);else n=r(n,a),o=i(o,s);return function(e){return o(n(e))}}function w(e,t,r,n){var a=Math.min(e.length,t.length)-1,o=new Array(a),s=new Array(a),l=-1;if(e[a]<e[0]){e=e.slice().reverse();t=t.slice().reverse()}while(++l<a){o[l]=r(e[l],e[l+1]);s[l]=n(t[l],t[l+1])}return function(t){var r=Object(i["b"])(e,t,1,a)-1;return s[r](o[r](t))}}function S(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function C(e,t){var r=g,i=g,n=d["interpolate"],a=false,l,u,c;function f(){l=Math.min(r.length,i.length)>2?w:b;u=c=null;return h}function h(t){return(u||(u=l(r,i,a?y(e):e,n)))(+t)}h.invert=function(e){return(c||(c=l(i,r,m,a?_(t):t)))(+e)};h.domain=function(e){return arguments.length?(r=o.call(e,v),f()):r.slice()};h.range=function(e){return arguments.length?(i=s.call(e),f()):i.slice()};h.rangeRound=function(e){return i=s.call(e),n=d["interpolateRound"],f()};h.clamp=function(e){return arguments.length?(a=!!e,f()):a};h.interpolate=function(e){return arguments.length?(n=e,f()):n};return f()}var x=r(174);var O=function(e,t,r){var n=e[0],a=e[e.length-1],o=Object(i["h"])(n,a,t==null?10:t),s;r=Object(x["formatSpecifier"])(r==null?",f":r);switch(r.type){case"s":{var l=Math.max(Math.abs(n),Math.abs(a));if(r.precision==null&&!isNaN(s=Object(x["precisionPrefix"])(o,l)))r.precision=s;return Object(x["formatPrefix"])(r,l)}case"":case"e":case"g":case"p":case"r":{if(r.precision==null&&!isNaN(s=Object(x["precisionRound"])(o,Math.max(Math.abs(n),Math.abs(a)))))r.precision=s-(r.type==="e");break}case"f":case"%":{if(r.precision==null&&!isNaN(s=Object(x["precisionFixed"])(o)))r.precision=s-(r.type==="%")*2;break}}return Object(x["format"])(r)};function T(e){var t=e.domain;e.ticks=function(e){var r=t();return Object(i["i"])(r[0],r[r.length-1],e==null?10:e)};e.tickFormat=function(e,r){return O(t(),e,r)};e.nice=function(r){if(r==null)r=10;var n=t(),a=0,o=n.length-1,s=n[a],l=n[o],u;if(l<s){u=s,s=l,l=u;u=a,a=o,o=u}u=Object(i["g"])(s,l,r);if(u>0){s=Math.floor(s/u)*u;l=Math.ceil(l/u)*u;u=Object(i["g"])(s,l,r)}else if(u<0){s=Math.ceil(s*u)/u;l=Math.floor(l*u)/u;u=Object(i["g"])(s,l,r)}if(u>0){n[a]=Math.floor(s/u)*u;n[o]=Math.ceil(l/u)*u;t(n)}else if(u<0){n[a]=Math.ceil(s*u)/u;n[o]=Math.floor(l*u)/u;t(n)}return e};return e}function E(){var e=C(m,d["interpolateNumber"]);e.copy=function(){return S(e,E())};return T(e)}function M(){var e=[0,1];function t(e){return+e}t.invert=t;t.domain=t.range=function(r){return arguments.length?(e=o.call(r,v),t):e.slice()};t.copy=function(){return M().domain(e)};return T(t)}var j=function(e,t){e=e.slice();var r=0,i=e.length-1,n=e[r],a=e[i],o;if(a<n){o=r,r=i,i=o;o=n,n=a,a=o}e[r]=t.floor(n);e[i]=t.ceil(a);return e};function A(e,t){return(t=Math.log(t/e))?function(r){return Math.log(r/e)/t}:p(t)}function P(e,t){return e<0?function(r){return-Math.pow(-t,r)*Math.pow(-e,1-r)}:function(r){return Math.pow(t,r)*Math.pow(e,1-r)}}function k(e){return isFinite(e)?+("1e"+e):e<0?0:e}function I(e){return e===10?k:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}function D(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}function R(e){return function(t){return-e(-t)}}function L(){var e=C(A,P).domain([1,10]),t=e.domain,r=10,n=D(10),a=I(10);function o(){n=D(r),a=I(r);if(t()[0]<0)n=R(n),a=R(a);return e}e.base=function(e){return arguments.length?(r=+e,o()):r};e.domain=function(e){return arguments.length?(t(e),o()):t()};e.ticks=function(e){var o=t(),s=o[0],l=o[o.length-1],u;if(u=l<s)c=s,s=l,l=c;var c=n(s),f=n(l),h,d,p,v=e==null?10:+e,g=[];if(!(r%1)&&f-c<v){c=Math.round(c)-1,f=Math.round(f)+1;if(s>0)for(;c<f;++c){for(d=1,h=a(c);d<r;++d){p=h*d;if(p<s)continue;if(p>l)break;g.push(p)}}else for(;c<f;++c){for(d=r-1,h=a(c);d>=1;--d){p=h*d;if(p<s)continue;if(p>l)break;g.push(p)}}}else{g=Object(i["i"])(c,f,Math.min(f-c,v)).map(a)}return u?g.reverse():g};e.tickFormat=function(t,i){if(i==null)i=r===10?".0e":",";if(typeof i!=="function")i=Object(x["format"])(i);if(t===Infinity)return i;if(t==null)t=10;var o=Math.max(1,r*t/e.ticks().length);return function(e){var t=e/a(Math.round(n(e)));if(t*r<r-.5)t*=r;return t<=o?i(e):""}};e.nice=function(){return t(j(t(),{floor:function(e){return a(Math.floor(n(e)))},ceil:function(e){return a(Math.ceil(n(e)))}}))};e.copy=function(){return S(e,L().base(r))};return e}function $(e,t){return e<0?-Math.pow(-e,t):Math.pow(e,t)}function N(){var e=1,t=C(i,n),r=t.domain;function i(t,r){return(r=$(r,e)-(t=$(t,e)))?function(i){return($(i,e)-t)/r}:p(r)}function n(t,r){r=$(r,e)-(t=$(t,e));return function(i){return $(t+r*i,1/e)}}t.exponent=function(t){return arguments.length?(e=+t,r(r())):e};t.copy=function(){return S(t,N().exponent(e))};return T(t)}function F(){return N().exponent(.5)}function G(){var e=[],t=[],r=[];function n(){var n=0,o=Math.max(1,t.length);r=new Array(o-1);while(++n<o)r[n-1]=Object(i["e"])(e,n/o);return a}function a(e){if(!isNaN(e=+e))return t[Object(i["b"])(r,e)]}a.invertExtent=function(i){var n=t.indexOf(i);return n<0?[NaN,NaN]:[n>0?r[n-1]:e[0],n<r.length?r[n]:e[e.length-1]]};a.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var r=0,a=t.length,o;r<a;++r)if(o=t[r],o!=null&&!isNaN(o=+o))e.push(o);e.sort(i["a"]);return n()};a.range=function(e){return arguments.length?(t=s.call(e),n()):t.slice()};a.quantiles=function(){return r.slice()};a.copy=function(){return G().domain(e).range(t)};return a}function U(){var e=0,t=1,r=1,n=[.5],a=[0,1];function o(e){if(e<=e)return a[Object(i["b"])(n,e,0,r)]}function l(){var i=-1;n=new Array(r);while(++i<r)n[i]=((i+1)*t-(i-r)*e)/(r+1);return o}o.domain=function(r){return arguments.length?(e=+r[0],t=+r[1],l()):[e,t]};o.range=function(e){return arguments.length?(r=(a=s.call(e)).length-1,l()):a.slice()};o.invertExtent=function(i){var o=a.indexOf(i);return o<0?[NaN,NaN]:o<1?[e,n[0]]:o>=r?[n[r-1],t]:[n[o-1],n[o]]};o.copy=function(){return U().domain([e,t]).range(a)};return T(o)}function H(){var e=[.5],t=[0,1],r=1;function n(n){if(n<=n)return t[Object(i["b"])(e,n,0,r)]}n.domain=function(i){return arguments.length?(e=s.call(i),r=Math.min(e.length,t.length-1),n):e.slice()};n.range=function(i){return arguments.length?(t=s.call(i),r=Math.min(e.length,t.length-1),n):t.slice()};n.invertExtent=function(r){var i=t.indexOf(r);return[e[i-1],e[i]]};n.copy=function(){return H().domain(e).range(t)};return n}var Y=r(99);var W=r(309);var V=1e3,z=V*60,q=z*60,B=q*24,X=B*7,K=B*30,Z=B*365;function Q(e){return new Date(e)}function J(e){return e instanceof Date?+e:+new Date(+e)}function ee(e,t,r,n,a,s,l,u,c){var f=C(m,d["interpolateNumber"]),h=f.invert,p=f.domain;var v=c(".%L"),g=c(":%S"),y=c("%I:%M"),_=c("%I %p"),b=c("%a %d"),w=c("%b %d"),x=c("%B"),O=c("%Y");var T=[[l,1,V],[l,5,5*V],[l,15,15*V],[l,30,30*V],[s,1,z],[s,5,5*z],[s,15,15*z],[s,30,30*z],[a,1,q],[a,3,3*q],[a,6,6*q],[a,12,12*q],[n,1,B],[n,2,2*B],[r,1,X],[t,1,K],[t,3,3*K],[e,1,Z]];function E(i){return(l(i)<i?v:s(i)<i?g:a(i)<i?y:n(i)<i?_:t(i)<i?r(i)<i?b:w:e(i)<i?x:O)(i)}function M(t,r,n,a){if(t==null)t=10;if(typeof t==="number"){var o=Math.abs(n-r)/t,s=Object(i["c"])(function(e){return e[2]}).right(T,o);if(s===T.length){a=Object(i["h"])(r/Z,n/Z,t);t=e}else if(s){s=T[o/T[s-1][2]<T[s][2]/o?s-1:s];a=s[1];t=s[0]}else{a=Math.max(Object(i["h"])(r,n,t),1);t=u}}return a==null?t:t.every(a)}f.invert=function(e){return new Date(h(e))};f.domain=function(e){return arguments.length?p(o.call(e,J)):p().map(Q)};f.ticks=function(e,t){var r=p(),i=r[0],n=r[r.length-1],a=n<i,o;if(a)o=i,i=n,n=o;o=M(e,i,n,t);o=o?o.range(i,n+1):[];return a?o.reverse():o};f.tickFormat=function(e,t){return t==null?E:c(t)};f.nice=function(e,t){var r=p();return(e=M(e,r[0],r[r.length-1],t))?p(j(r,e)):f};f.copy=function(){return S(f,ee(e,t,r,n,a,s,l,u,c))};return f}var te=function(){return ee(Y["timeYear"],Y["timeMonth"],Y["timeWeek"],Y["timeDay"],Y["timeHour"],Y["timeMinute"],Y["timeSecond"],Y["timeMillisecond"],W["timeFormat"]).domain([new Date(2e3,0,1),new Date(2e3,0,2)])};var re=function(){return ee(Y["utcYear"],Y["utcMonth"],Y["utcWeek"],Y["utcDay"],Y["utcHour"],Y["utcMinute"],Y["utcSecond"],Y["utcMillisecond"],W["utcFormat"]).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])};var ie=function(e){return e.match(/.{6}/g).map(function(e){return"#"+e})};var ne=ie("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var ae=ie("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6");var oe=ie("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9");var se=ie("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5");var le=r(129);var ue=Object(d["interpolateCubehelixLong"])(Object(le["cubehelix"])(300,.5,0),Object(le["cubehelix"])(-240,.5,1));var ce=Object(d["interpolateCubehelixLong"])(Object(le["cubehelix"])(-100,.75,.35),Object(le["cubehelix"])(80,1.5,.8));var fe=Object(d["interpolateCubehelixLong"])(Object(le["cubehelix"])(260,.75,.35),Object(le["cubehelix"])(80,1.5,.8));var he=Object(le["cubehelix"])();var de=function(e){if(e<0||e>1)e-=Math.floor(e);var t=Math.abs(e-.5);he.h=360*e-100;he.s=1.5-1.5*t;he.l=.8-.9*t;return he+""};function pe(e){var t=e.length;return function(r){return e[Math.max(0,Math.min(t-1,Math.floor(r*t)))]}}var ve=pe(ie("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var ge=pe(ie("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"));var me=pe(ie("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4"));var ye=pe(ie("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function _e(e){var t=0,r=1,i=false;function n(n){var a=(n-t)/(r-t);return e(i?Math.max(0,Math.min(1,a)):a)}n.domain=function(e){return arguments.length?(t=+e[0],r=+e[1],n):[t,r]};n.clamp=function(e){return arguments.length?(i=!!e,n):i};n.interpolator=function(t){return arguments.length?(e=t,n):e};n.copy=function(){return _e(e).domain([t,r]).clamp(i)};return T(n)}r.d(t,false,function(){return c});r.d(t,false,function(){return h});r.d(t,false,function(){return M});r.d(t,"a",function(){return E});r.d(t,false,function(){return L});r.d(t,false,function(){return u});r.d(t,false,function(){return l});r.d(t,false,function(){return N});r.d(t,false,function(){return F});r.d(t,false,function(){return G});r.d(t,false,function(){return U});r.d(t,false,function(){return H});r.d(t,false,function(){return te});r.d(t,false,function(){return re});r.d(t,false,function(){return ne});r.d(t,false,function(){return ae});r.d(t,false,function(){return oe});r.d(t,false,function(){return se});r.d(t,false,function(){return ue});r.d(t,false,function(){return de});r.d(t,false,function(){return ce});r.d(t,false,function(){return fe});r.d(t,false,function(){return ve});r.d(t,false,function(){return ge});r.d(t,false,function(){return me});r.d(t,false,function(){return ye});r.d(t,false,function(){return _e})},function(e,t,r){"use strict";var i=r(1);var n=r(2);var a=r(11);var o=r(135);var s=r(258);var l=r(68);var u=r(241);var c=r(290);var f=r(17);var h=r(159);var d=function(e){return function t(){return e}};var p=Math.abs;var v=Math.atan2;var g=Math.cos;var m=Math.max;var y=Math.min;var _=Math.sin;var b=Math.sqrt;var w=1e-12;var S=Math.PI;var C=S/2;var x=2*S;function O(e){return e>1?0:e<-1?S:Math.acos(e)}function T(e){return e>=1?C:e<=-1?-C:Math.asin(e)}function E(e){return e.innerRadius}function M(e){return e.outerRadius}function j(e){return e.startAngle}function A(e){return e.endAngle}function P(e){return e&&e.padAngle}function k(e,t,r,i,n,a,o,s){var l=r-e,u=i-t,c=o-n,f=s-a,h=(c*(t-a)-f*(e-n))/(f*l-c*u);return[e+h*l,t+h*u]}function I(e,t,r,i,n,a,o){var s=e-r,l=t-i,u=(o?a:-a)/b(s*s+l*l),c=u*l,f=-u*s,h=e+c,d=t+f,p=r+c,v=i+f,g=(h+p)/2,y=(d+v)/2,_=p-h,w=v-d,S=_*_+w*w,C=n-a,x=h*v-p*d,O=(w<0?-1:1)*b(m(0,C*C*S-x*x)),T=(x*w-_*O)/S,E=(-x*_-w*O)/S,M=(x*w+_*O)/S,j=(-x*_+w*O)/S,A=T-g,P=E-y,k=M-g,I=j-y;if(A*A+P*P>k*k+I*I)T=M,E=j;return{cx:T,cy:E,x01:-c,y01:-f,x11:T*(n/C-1),y11:E*(n/C-1)}}var D=function(){var e=E,t=M,r=d(0),i=null,n=j,a=A,o=P,s=null;function l(){var l,u,c=+e.apply(this,arguments),f=+t.apply(this,arguments),d=n.apply(this,arguments)-C,m=a.apply(this,arguments)-C,E=p(m-d),M=m>d;if(!s)s=l=Object(h["path"])();if(f<c)u=f,f=c,c=u;if(!(f>w))s.moveTo(0,0);else if(E>x-w){s.moveTo(f*g(d),f*_(d));s.arc(0,0,f,d,m,!M);if(c>w){s.moveTo(c*g(m),c*_(m));s.arc(0,0,c,m,d,M)}}else{var j=d,A=m,P=d,D=m,R=E,L=E,$=o.apply(this,arguments)/2,N=$>w&&(i?+i.apply(this,arguments):b(c*c+f*f)),F=y(p(f-c)/2,+r.apply(this,arguments)),G=F,U=F,H,Y;if(N>w){var W=T(N/c*_($)),V=T(N/f*_($));if((R-=W*2)>w)W*=M?1:-1,P+=W,D-=W;else R=0,P=D=(d+m)/2;if((L-=V*2)>w)V*=M?1:-1,j+=V,A-=V;else L=0,j=A=(d+m)/2}var z=f*g(j),q=f*_(j),B=c*g(D),X=c*_(D);if(F>w){var K=f*g(A),Z=f*_(A),Q=c*g(P),J=c*_(P);if(E<S){var ee=R>w?k(z,q,Q,J,K,Z,B,X):[B,X],te=z-ee[0],re=q-ee[1],ie=K-ee[0],ne=Z-ee[1],ae=1/_(O((te*ie+re*ne)/(b(te*te+re*re)*b(ie*ie+ne*ne)))/2),oe=b(ee[0]*ee[0]+ee[1]*ee[1]);G=y(F,(c-oe)/(ae-1));U=y(F,(f-oe)/(ae+1))}}if(!(L>w))s.moveTo(z,q);else if(U>w){H=I(Q,J,z,q,f,U,M);Y=I(K,Z,B,X,f,U,M);s.moveTo(H.cx+H.x01,H.cy+H.y01);if(U<F)s.arc(H.cx,H.cy,U,v(H.y01,H.x01),v(Y.y01,Y.x01),!M);else{s.arc(H.cx,H.cy,U,v(H.y01,H.x01),v(H.y11,H.x11),!M);s.arc(0,0,f,v(H.cy+H.y11,H.cx+H.x11),v(Y.cy+Y.y11,Y.cx+Y.x11),!M);s.arc(Y.cx,Y.cy,U,v(Y.y11,Y.x11),v(Y.y01,Y.x01),!M)}}else s.moveTo(z,q),s.arc(0,0,f,j,A,!M);if(!(c>w)||!(R>w))s.lineTo(B,X);else if(G>w){H=I(B,X,K,Z,c,-G,M);Y=I(z,q,Q,J,c,-G,M);s.lineTo(H.cx+H.x01,H.cy+H.y01);if(G<F)s.arc(H.cx,H.cy,G,v(H.y01,H.x01),v(Y.y01,Y.x01),!M);else{s.arc(H.cx,H.cy,G,v(H.y01,H.x01),v(H.y11,H.x11),!M);s.arc(0,0,c,v(H.cy+H.y11,H.cx+H.x11),v(Y.cy+Y.y11,Y.cx+Y.x11),M);s.arc(Y.cx,Y.cy,G,v(Y.y11,Y.x11),v(Y.y01,Y.x01),!M)}}else s.arc(0,0,c,D,P,M)}s.closePath();if(l)return s=null,l+""||null}l.centroid=function(){var r=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,i=(+n.apply(this,arguments)+ +a.apply(this,arguments))/2-S/2;return[g(i)*r,_(i)*r]};l.innerRadius=function(t){return arguments.length?(e=typeof t==="function"?t:d(+t),l):e};l.outerRadius=function(e){return arguments.length?(t=typeof e==="function"?e:d(+e),l):t};l.cornerRadius=function(e){return arguments.length?(r=typeof e==="function"?e:d(+e),l):r};l.padRadius=function(e){return arguments.length?(i=e==null?null:typeof e==="function"?e:d(+e),l):i};l.startAngle=function(e){return arguments.length?(n=typeof e==="function"?e:d(+e),l):n};l.endAngle=function(e){return arguments.length?(a=typeof e==="function"?e:d(+e),l):a};l.padAngle=function(e){return arguments.length?(o=typeof e==="function"?e:d(+e),l):o};l.context=function(e){return arguments.length?(s=e==null?null:e,l):s};return l};function R(e){this._context=e}R.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function(e,t){e=+e,t=+t;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};var L=function(e){return new R(e)};function $(e){return e[0]}function N(e){return e[1]}var F=function(){var e=$,t=N,r=d(true),i=null,n=L,a=null;function o(o){var s,l=o.length,u,c=false,f;if(i==null)a=n(f=Object(h["path"])());for(s=0;s<=l;++s){if(!(s<l&&r(u=o[s],s,o))===c){if(c=!c)a.lineStart();else a.lineEnd()}if(c)a.point(+e(u,s,o),+t(u,s,o))}if(f)return a=null,f+""||null}o.x=function(t){return arguments.length?(e=typeof t==="function"?t:d(+t),o):e};o.y=function(e){return arguments.length?(t=typeof e==="function"?e:d(+e),o):t};o.defined=function(e){return arguments.length?(r=typeof e==="function"?e:d(!!e),o):r};o.curve=function(e){return arguments.length?(n=e,i!=null&&(a=n(i)),o):n};o.context=function(e){return arguments.length?(e==null?i=a=null:a=n(i=e),o):i};return o};var G=function(){var e=$,t=null,r=d(0),i=N,n=d(true),a=null,o=L,s=null;function l(l){var u,c,f,d=l.length,p,v=false,g,m=new Array(d),y=new Array(d);if(a==null)s=o(g=Object(h["path"])());for(u=0;u<=d;++u){if(!(u<d&&n(p=l[u],u,l))===v){if(v=!v){c=u;s.areaStart();s.lineStart()}else{s.lineEnd();s.lineStart();for(f=u-1;f>=c;--f){s.point(m[f],y[f])}s.lineEnd();s.areaEnd()}}if(v){m[u]=+e(p,u,l),y[u]=+r(p,u,l);s.point(t?+t(p,u,l):m[u],i?+i(p,u,l):y[u])}}if(g)return s=null,g+""||null}function u(){return F().defined(n).curve(o).context(a)}l.x=function(r){return arguments.length?(e=typeof r==="function"?r:d(+r),t=null,l):e};l.x0=function(t){return arguments.length?(e=typeof t==="function"?t:d(+t),l):e};l.x1=function(e){return arguments.length?(t=e==null?null:typeof e==="function"?e:d(+e),l):t};l.y=function(e){return arguments.length?(r=typeof e==="function"?e:d(+e),i=null,l):r};l.y0=function(e){return arguments.length?(r=typeof e==="function"?e:d(+e),l):r};l.y1=function(e){return arguments.length?(i=e==null?null:typeof e==="function"?e:d(+e),l):i};l.lineX0=l.lineY0=function(){return u().x(e).y(r)};l.lineY1=function(){return u().x(e).y(i)};l.lineX1=function(){return u().x(t).y(r)};l.defined=function(e){return arguments.length?(n=typeof e==="function"?e:d(!!e),l):n};l.curve=function(e){return arguments.length?(o=e,a!=null&&(s=o(a)),l):o};l.context=function(e){return arguments.length?(e==null?a=s=null:s=o(a=e),l):a};return l};var U=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN};var H=function(e){return e};var Y=function(){var e=H,t=U,r=null,i=d(0),n=d(x),a=d(0);function o(o){var s,l=o.length,u,c,f=0,h=new Array(l),d=new Array(l),p=+i.apply(this,arguments),v=Math.min(x,Math.max(-x,n.apply(this,arguments)-p)),g,m=Math.min(Math.abs(v)/l,a.apply(this,arguments)),y=m*(v<0?-1:1),_;for(s=0;s<l;++s){if((_=d[h[s]=s]=+e(o[s],s,o))>0){f+=_}}if(t!=null)h.sort(function(e,r){return t(d[e],d[r])});else if(r!=null)h.sort(function(e,t){return r(o[e],o[t])});for(s=0,c=f?(v-l*y)/f:0;s<l;++s,p=g){u=h[s],_=d[u],g=p+(_>0?_*c:0)+y,d[u]={data:o[u],index:s,value:_,startAngle:p,endAngle:g,padAngle:m}}return d}o.value=function(t){return arguments.length?(e=typeof t==="function"?t:d(+t),o):e};o.sortValues=function(e){return arguments.length?(t=e,r=null,o):t};o.sort=function(e){return arguments.length?(r=e,t=null,o):r};o.startAngle=function(e){return arguments.length?(i=typeof e==="function"?e:d(+e),o):i};o.endAngle=function(e){return arguments.length?(n=typeof e==="function"?e:d(+e),o):n};o.padAngle=function(e){return arguments.length?(a=typeof e==="function"?e:d(+e),o):a};return o};var W=z(L);function V(e){this._curve=e}V.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};function z(e){function t(t){return new V(e(t))}t._curve=e;return t}function q(e){var t=e.curve;e.angle=e.x,delete e.x;e.radius=e.y,delete e.y;e.curve=function(e){return arguments.length?t(z(e)):t()._curve};return e}var B=function(){return q(F().curve(W))};var X=function(){var e=G().curve(W),t=e.curve,r=e.lineX0,i=e.lineX1,n=e.lineY0,a=e.lineY1;e.angle=e.x,delete e.x;e.startAngle=e.x0,delete e.x0;e.endAngle=e.x1,delete e.x1;e.radius=e.y,delete e.y;e.innerRadius=e.y0,delete e.y0;e.outerRadius=e.y1,delete e.y1;e.lineStartAngle=function(){return q(r())},delete e.lineX0;e.lineEndAngle=function(){return q(i())},delete e.lineX1;e.lineInnerRadius=function(){return q(n())},delete e.lineY0;e.lineOuterRadius=function(){return q(a())},delete e.lineY1;e.curve=function(e){return arguments.length?t(z(e)):t()._curve};return e};var K=function(e,t){return[(t=+t)*Math.cos(e-=Math.PI/2),t*Math.sin(e)]};var Z=Array.prototype.slice;function Q(e){return e.source}function J(e){return e.target}function ee(e){var t=Q,r=J,i=$,n=N,a=null;function o(){var o,s=Z.call(arguments),l=t.apply(this,s),u=r.apply(this,s);if(!a)a=o=Object(h["path"])();e(a,+i.apply(this,(s[0]=l,s)),+n.apply(this,s),+i.apply(this,(s[0]=u,s)),+n.apply(this,s));if(o)return a=null,o+""||null}o.source=function(e){return arguments.length?(t=e,o):t};o.target=function(e){return arguments.length?(r=e,o):r};o.x=function(e){return arguments.length?(i=typeof e==="function"?e:d(+e),o):i};o.y=function(e){return arguments.length?(n=typeof e==="function"?e:d(+e),o):n};o.context=function(e){return arguments.length?(a=e==null?null:e,o):a};return o}function te(e,t,r,i,n){e.moveTo(t,r);e.bezierCurveTo(t=(t+i)/2,r,t,n,i,n)}function re(e,t,r,i,n){e.moveTo(t,r);e.bezierCurveTo(t,r=(r+n)/2,i,r,i,n)}function ie(e,t,r,i,n){var a=K(t,r),o=K(t,r=(r+n)/2),s=K(i,r),l=K(i,n);e.moveTo(a[0],a[1]);e.bezierCurveTo(o[0],o[1],s[0],s[1],l[0],l[1])}function ne(){return ee(te)}function ae(){return ee(re)}function oe(){var e=ee(ie);e.angle=e.x,delete e.x;e.radius=e.y,delete e.y;return e}var se={draw:function(e,t){var r=Math.sqrt(t/S);e.moveTo(r,0);e.arc(0,0,r,0,x)}};var le={draw:function(e,t){var r=Math.sqrt(t/5)/2;e.moveTo(-3*r,-r);e.lineTo(-r,-r);e.lineTo(-r,-3*r);e.lineTo(r,-3*r);e.lineTo(r,-r);e.lineTo(3*r,-r);e.lineTo(3*r,r);e.lineTo(r,r);e.lineTo(r,3*r);e.lineTo(-r,3*r);e.lineTo(-r,r);e.lineTo(-3*r,r);e.closePath()}};var ue=Math.sqrt(1/3),ce=ue*2;var fe={draw:function(e,t){var r=Math.sqrt(t/ce),i=r*ue;e.moveTo(0,-r);e.lineTo(i,0);e.lineTo(0,r);e.lineTo(-i,0);e.closePath()}};var he=.8908130915292852,de=Math.sin(S/10)/Math.sin(7*S/10),pe=Math.sin(x/10)*de,ve=-Math.cos(x/10)*de;var ge={draw:function(e,t){var r=Math.sqrt(t*he),i=pe*r,n=ve*r;e.moveTo(0,-r);e.lineTo(i,n);for(var a=1;a<5;++a){var o=x*a/5,s=Math.cos(o),l=Math.sin(o);e.lineTo(l*r,-s*r);e.lineTo(s*i-l*n,l*i+s*n)}e.closePath()}};var me={draw:function(e,t){var r=Math.sqrt(t),i=-r/2;e.rect(i,i,r,r)}};var ye=Math.sqrt(3);var _e={draw:function(e,t){var r=-Math.sqrt(t/(ye*3));e.moveTo(0,r*2);e.lineTo(-ye*r,-r);e.lineTo(ye*r,-r);e.closePath()}};var be=-.5,we=Math.sqrt(3)/2,Se=1/Math.sqrt(12),Ce=(Se/2+1)*3;var xe={draw:function(e,t){var r=Math.sqrt(t/Ce),i=r/2,n=r*Se,a=i,o=r*Se+r,s=-a,l=o;e.moveTo(i,n);e.lineTo(a,o);e.lineTo(s,l);e.lineTo(be*i-we*n,we*i+be*n);e.lineTo(be*a-we*o,we*a+be*o);e.lineTo(be*s-we*l,we*s+be*l);e.lineTo(be*i+we*n,be*n-we*i);e.lineTo(be*a+we*o,be*o-we*a);e.lineTo(be*s+we*l,be*l-we*s);e.closePath()}};var Oe=[se,le,fe,me,ge,_e,xe];var Te=function(){var e=d(se),t=d(64),r=null;function i(){var i;if(!r)r=i=Object(h["path"])();e.apply(this,arguments).draw(r,+t.apply(this,arguments));if(i)return r=null,i+""||null}i.type=function(t){return arguments.length?(e=typeof t==="function"?t:d(t),i):e};i.size=function(e){return arguments.length?(t=typeof e==="function"?e:d(+e),i):t};i.context=function(e){return arguments.length?(r=e==null?null:e,i):r};return i};var Ee=function(){};function Me(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function je(e){this._context=e}je.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){switch(this._point){case 3:Me(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function(e,t){e=+e,t=+t;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Me(this,e,t);break}this._x0=this._x1,this._x1=e;this._y0=this._y1,this._y1=t}};var Ae=function(e){return new je(e)};function Pe(e){this._context=e}Pe.prototype={areaStart:Ee,areaEnd:Ee,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2);this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3);this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3);this._context.closePath();break}case 3:{this.point(this._x2,this._y2);this.point(this._x3,this._y3);this.point(this._x4,this._y4);break}}},point:function(e,t){e=+e,t=+t;switch(this._point){case 0:this._point=1;this._x2=e,this._y2=t;break;case 1:this._point=2;this._x3=e,this._y3=t;break;case 2:this._point=3;this._x4=e,this._y4=t;this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Me(this,e,t);break}this._x0=this._x1,this._x1=e;this._y0=this._y1,this._y1=t}};var ke=function(e){return new Pe(e)};function Ie(e){this._context=e}Ie.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){if(this._line||this._line!==0&&this._point===3)this._context.closePath();this._line=1-this._line},point:function(e,t){e=+e,t=+t;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,i):this._context.moveTo(r,i);break;case 3:this._point=4;default:Me(this,e,t);break}this._x0=this._x1,this._x1=e;this._y0=this._y1,this._y1=t}};var De=function(e){return new Ie(e)};function Re(e,t){this._basis=new je(e);this._beta=t}Re.prototype={lineStart:function(){this._x=[];this._y=[];this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,r=e.length-1;if(r>0){var i=e[0],n=t[0],a=e[r]-i,o=t[r]-n,s=-1,l;while(++s<=r){l=s/r;this._basis.point(this._beta*e[s]+(1-this._beta)*(i+l*a),this._beta*t[s]+(1-this._beta)*(n+l*o))}}this._x=this._y=null;this._basis.lineEnd()},point:function(e,t){this._x.push(+e);this._y.push(+t)}};var Le=function e(t){function r(e){return t===1?new je(e):new Re(e,t)}r.beta=function(t){return e(+t)};return r}(.85);function $e(e,t,r){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-r),e._x2,e._y2)}function Ne(e,t){this._context=e;this._k=(1-t)/6}Ne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:$e(this,this._x1,this._y1);break}if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function(e,t){e=+e,t=+t;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;this._x1=e,this._y1=t;break;case 2:this._point=3;default:$e(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e;this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Fe=function e(t){function r(e){return new Ne(e,t)}r.tension=function(t){return e(+t)};return r}(0);function Ge(e,t){this._context=e;this._k=(1-t)/6}Ge.prototype={areaStart:Ee,areaEnd:Ee,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3);this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3);this._context.closePath();break}case 3:{this.point(this._x3,this._y3);this.point(this._x4,this._y4);this.point(this._x5,this._y5);break}}},point:function(e,t){e=+e,t=+t;switch(this._point){case 0:this._point=1;this._x3=e,this._y3=t;break;case 1:this._point=2;this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3;this._x5=e,this._y5=t;break;default:$e(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e;this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Ue=function e(t){function r(e){return new Ge(e,t)}r.tension=function(t){return e(+t)};return r}(0);function He(e,t){this._context=e;this._k=(1-t)/6}He.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){if(this._line||this._line!==0&&this._point===3)this._context.closePath();this._line=1-this._line},point:function(e,t){e=+e,t=+t;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:$e(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e;this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Ye=function e(t){function r(e){return new He(e,t)}r.tension=function(t){return e(+t)};return r}(0);function We(e,t,r){var i=e._x1,n=e._y1,a=e._x2,o=e._y2;if(e._l01_a>w){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/l;n=(n*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>w){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*u+e._x1*e._l23_2a-t*e._l12_2a)/c;o=(o*u+e._y1*e._l23_2a-r*e._l12_2a)/c}e._context.bezierCurveTo(i,n,a,o,e._x2,e._y2)}function Ve(e,t){this._context=e;this._alpha=t}Ve.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function(e,t){e=+e,t=+t;if(this._point){var r=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:We(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a;this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a;this._x0=this._x1,this._x1=this._x2,this._x2=e;this._y0=this._y1,this._y1=this._y2,this._y2=t}};var ze=function e(t){function r(e){return t?new Ve(e,t):new Ne(e,0)}r.alpha=function(t){return e(+t)};return r}(.5);function qe(e,t){this._context=e;this._alpha=t}qe.prototype={areaStart:Ee,areaEnd:Ee,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3);this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3);this._context.closePath();break}case 3:{this.point(this._x3,this._y3);this.point(this._x4,this._y4);this.point(this._x5,this._y5);break}}},point:function(e,t){e=+e,t=+t;if(this._point){var r=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1;this._x3=e,this._y3=t;break;case 1:this._point=2;this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3;this._x5=e,this._y5=t;break;default:We(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a;this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a;this._x0=this._x1,this._x1=this._x2,this._x2=e;this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Be=function e(t){function r(e){return t?new qe(e,t):new Ge(e,0)}r.alpha=function(t){return e(+t)};return r}(.5);function Xe(e,t){this._context=e;this._alpha=t}Xe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){if(this._line||this._line!==0&&this._point===3)this._context.closePath();this._line=1-this._line},point:function(e,t){e=+e,t=+t;if(this._point){var r=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:We(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a;this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a;this._x0=this._x1,this._x1=this._x2,this._x2=e;this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Ke=function e(t){function r(e){return t?new Xe(e,t):new He(e,0)}r.alpha=function(t){return e(+t)};return r}(.5);function Ze(e){this._context=e}Ze.prototype={areaStart:Ee,areaEnd:Ee,lineStart:function(){this._point=0},lineEnd:function(){if(this._point)this._context.closePath()},point:function(e,t){e=+e,t=+t;if(this._point)this._context.lineTo(e,t);else this._point=1,this._context.moveTo(e,t)}};var Qe=function(e){return new Ze(e)};function Je(e){return e<0?-1:1}function et(e,t,r){var i=e._x1-e._x0,n=t-e._x1,a=(e._y1-e._y0)/(i||n<0&&-0),o=(r-e._y1)/(n||i<0&&-0),s=(a*n+o*i)/(i+n);return(Je(a)+Je(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function tt(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function rt(e,t,r){var i=e._x0,n=e._y0,a=e._x1,o=e._y1,s=(a-i)/3;e._context.bezierCurveTo(i+s,n+s*t,a-s,o-s*r,a,o)}function it(e){this._context=e}it.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:rt(this,this._t0,tt(this,this._t0));break}if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function(e,t){var r=NaN;e=+e,t=+t;if(e===this._x1&&t===this._y1)return;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;rt(this,tt(this,r=et(this,e,t)),r);break;default:rt(this,this._t0,r=et(this,e,t));break}this._x0=this._x1,this._x1=e;this._y0=this._y1,this._y1=t;this._t0=r}};function nt(e){this._context=new at(e)}(nt.prototype=Object.create(it.prototype)).point=function(e,t){it.prototype.point.call(this,t,e)};function at(e){this._context=e}at.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,i,n,a){this._context.bezierCurveTo(t,e,i,r,a,n)}};function ot(e){return new it(e)}function st(e){return new nt(e)}function lt(e){this._context=e}lt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[];this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r){this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]);if(r===2){this._context.lineTo(e[1],t[1])}else{var i=ut(e),n=ut(t);for(var a=0,o=1;o<r;++a,++o){this._context.bezierCurveTo(i[0][a],n[0][a],i[1][a],n[1][a],e[o],t[o])}}}if(this._line||this._line!==0&&r===1)this._context.closePath();this._line=1-this._line;this._x=this._y=null},point:function(e,t){this._x.push(+e);this._y.push(+t)}};function ut(e){var t,r=e.length-1,i,n=new Array(r),a=new Array(r),o=new Array(r);n[0]=0,a[0]=2,o[0]=e[0]+2*e[1];for(t=1;t<r-1;++t)n[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];n[r-1]=2,a[r-1]=7,o[r-1]=8*e[r-1]+e[r];for(t=1;t<r;++t)i=n[t]/a[t-1],a[t]-=i,o[t]-=i*o[t-1];n[r-1]=o[r-1]/a[r-1];for(t=r-2;t>=0;--t)n[t]=(o[t]-n[t+1])/a[t];a[r-1]=(e[r]+n[r-1])/2;for(t=0;t<r-1;++t)a[t]=2*e[t+1]-n[t+1];return[n,a]}var ct=function(e){return new lt(e)};function ft(e,t){this._context=e;this._t=t}ft.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN;this._point=0},lineEnd:function(){if(0<this._t&&this._t<1&&this._point===2)this._context.lineTo(this._x,this._y);if(this._line||this._line!==0&&this._point===1)this._context.closePath();if(this._line>=0)this._t=1-this._t,this._line=1-this._line},point:function(e,t){e=+e,t=+t;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0){this._context.lineTo(this._x,t);this._context.lineTo(e,t)}else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y);this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};var ht=function(e){return new ft(e,.5)};function dt(e){return new ft(e,0)}function pt(e){return new ft(e,1)}var vt=function(e,t){if(!((o=e.length)>1))return;for(var r=1,i,n,a=e[t[0]],o,s=a.length;r<o;++r){n=a,a=e[t[r]];for(i=0;i<s;++i){a[i][1]+=a[i][0]=isNaN(n[i][1])?n[i][0]:n[i][1]}}};var gt=function(e){var t=e.length,r=new Array(t);while(--t>=0)r[t]=t;return r};function mt(e,t){return e[t]}var yt=function(){var e=d([]),t=gt,r=vt,i=mt;function n(n){var a=e.apply(this,arguments),o,s=n.length,l=a.length,u=new Array(l),c;for(o=0;o<l;++o){for(var f=a[o],h=u[o]=new Array(s),d=0,p;d<s;++d){h[d]=p=[0,+i(n[d],f,d,n)];p.data=n[d]}h.key=f}for(o=0,c=t(u);o<l;++o){u[c[o]].index=o}r(u,c);return u}n.keys=function(t){return arguments.length?(e=typeof t==="function"?t:d(Z.call(t)),n):e};n.value=function(e){return arguments.length?(i=typeof e==="function"?e:d(+e),n):i};n.order=function(e){return arguments.length?(t=e==null?gt:typeof e==="function"?e:d(Z.call(e)),n):t};n.offset=function(e){return arguments.length?(r=e==null?vt:e,n):r};return n};var _t=function(e,t){if(!((i=e.length)>0))return;for(var r,i,n=0,a=e[0].length,o;n<a;++n){for(o=r=0;r<i;++r)o+=e[r][n][1]||0;if(o)for(r=0;r<i;++r)e[r][n][1]/=o}vt(e,t)};var bt=function(e,t){if(!((l=e.length)>1))return;for(var r,i=0,n,a,o,s,l,u=e[t[0]].length;i<u;++i){for(o=s=0,r=0;r<l;++r){if((a=(n=e[t[r]][i])[1]-n[0])>=0){n[0]=o,n[1]=o+=a}else if(a<0){n[1]=s,n[0]=s+=a}else{n[0]=o}}}};var wt=function(e,t){if(!((n=e.length)>0))return;for(var r=0,i=e[t[0]],n,a=i.length;r<a;++r){for(var o=0,s=0;o<n;++o)s+=e[o][r][1]||0;i[r][1]+=i[r][0]=-s/2}vt(e,t)};var St=function(e,t){if(!((o=e.length)>0)||!((a=(n=e[t[0]]).length)>0))return;for(var r=0,i=1,n,a,o;i<a;++i){for(var s=0,l=0,u=0;s<o;++s){var c=e[t[s]],f=c[i][1]||0,h=c[i-1][1]||0,d=(f-h)/2;for(var p=0;p<s;++p){var v=e[t[p]],g=v[i][1]||0,m=v[i-1][1]||0;d+=g-m}l+=f,u+=d*f}n[i-1][1]+=n[i-1][0]=r;if(l)r-=u/l}n[i-1][1]+=n[i-1][0]=r;vt(e,t)};var Ct=function(e){var t=e.map(xt);return gt(e).sort(function(e,r){return t[e]-t[r]})};function xt(e){var t=0,r=-1,i=e.length,n;while(++r<i)if(n=+e[r][1])t+=n;return t}var Ot=function(e){return Ct(e).reverse()};var Tt=function(e){var t=e.length,r,i,n=e.map(xt),a=gt(e).sort(function(e,t){return n[t]-n[e]}),o=0,s=0,l=[],u=[];for(r=0;r<t;++r){i=a[r];if(o<s){o+=n[i];l.push(i)}else{s+=n[i];u.push(i)}}return u.reverse().concat(l)};var Et=function(e){return gt(e).reverse()};var Mt={bisector:l["c"],extent:l["d"],axisBottom:u["a"],axisLeft:u["b"],scaleLinear:c["a"],mouse:f["mouse"],select:f["select"],selectAll:f["selectAll"],area:G,line:F};var jt=function e(t){var r=t.light!==undefined?t.light:false;var n=r?{top:0,right:0,bottom:0,left:0}:{top:10,right:20,bottom:30,left:40};var o=t.hoverCallback!==undefined?t.hoverCallback:function(){};var s=t.outCallback!==undefined?t.outCallback:function(){};var l=t.distanceExtractor;var u=t.linesConfiguration;var c=Object.keys(u).length;var f=Mt.bisector(function(e){return l(e)}).left;var h=t.poiExtractor;var d=t.styleDefs;var p=t.poiLabelAngle!==undefined?t.poiLabelAngle:-60;var v=t.i18n||{};var g=v.xAxis||"Distance";var m=v.yAxis||"Elevation";var y={xhover:function e(t,r){return parseFloat(t.toPrecision(3))+" "+r},yhover:function e(t,r){return t!==null?Math.round(t)+" m":""},xtick:function e(t,r){return t},ytick:function e(t,r){return t}};if(t.formatter!==undefined){a["a"](y,t.formatter)}var _=t.lightXAxis!==undefined?t.lightXAxis:false;var b=void 0;var w=void 0;var S=void 0;var C=t.scaleModifier;var x=void 0;var O=void 0;var T=void 0;var E=void 0;var M=void 0;var j=void 0;var A=function e(t){t.each(function(t){Mt.select(this).selectAll("svg").remove();if(t===undefined){return}T=Math.max(this.clientWidth-n.right-n.left,0);w=Mt.scaleLinear().range([0,T]);O=Math.max(this.clientHeight-n.top-n.bottom,0);S=Mt.scaleLinear().range([O,0]);var i=Mt.axisBottom(w);var a=Mt.axisLeft(S);var o=void 0;if(c===1){o=Mt.area().x(function(e){return w(l(e))}).y0(O).y1(function(e){var t=Object.keys(u)[0];return S(u[t].zExtractor(e))})}b=Mt.select(this).selectAll("svg").data([t]);var s=b.enter().append("svg");b=Mt.select(this).selectAll("svg").data([t]);if(d!==undefined){s.append("defs").append("style").attr("type","text/css").text(d)}var f=s.append("g");P();f.style("font","11px Arial");if(c===1){f.append("path").attr("class","area").style("fill","rgba(222, 222, 222, 0.5)")}f.insert("g",":first-child").attr("class","grid-y");if(!r){f.append("g").attr("class","x axis").attr("transform","translate(0,"+O+")");f.append("text").attr("class","x label").attr("text-anchor","end").attr("x",T-4).attr("y",O-4);f.append("g").attr("class","y axis");f.append("text").attr("class","y label").attr("text-anchor","end").attr("y",6).attr("dy",".75em").attr("transform","rotate(-90)").style("fill","grey").text(m+" [m]");f.append("g").attr("class","metas").attr("transform","translate("+(T+3)+", 0)")}f.append("g").attr("class","pois");var h=f.append("g").attr("class","x grid-hover");h.append("svg:line").attr("stroke-dasharray","5,5");h.append("text");f.append("rect").attr("class","overlay").attr("width",T).attr("height",O).style("fill","none").style("pointer-events","all");b.attr("width",T+n.left+n.right).attr("height",O+n.top+n.bottom);x=b.select("g").attr("transform","translate("+n.left+","+n.top+")");j=Mt.extent(t,function(e){return l(e)});w.domain(j);var p=function(){var e=[];var r=void 0,i=void 0;for(i in u){r=Mt.extent(t,function(e){return u[i].zExtractor(e)});e=e.concat(r)}return[Math.min.apply(null,e),Math.max.apply(null,e)]}();S.domain(p);if(C!==undefined){C(w,S,T,O)}else{var v=(p[1]-p[0])*.1;S.domain([p[0]-v,p[1]+v])}if(c===1){x.select(".area").transition().attr("d",o)}var A=void 0,k=void 0,I=void 0;for(k in u){f.append("path").attr("class","line "+k).style("stroke",u[k].color||"#F00").style("fill","none");I=f.append("g").attr("class","y grid-hover "+k);I.append("svg:line").attr("stroke-dasharray","5,5");I.append("text");A=Mt.line().x(function(e){return w(l(e))}).y(function(e){return S(u[k].zExtractor(e))}).defined(function(e){return u[k].zExtractor(e)!==null});x.select(".line."+k).transition().attr("d",A)}if(j[1]>2e3){E=1e3;M="km"}else{E=1;M="m"}if(!r){i.tickFormat(function(e){return y.xtick(e/E,M)});if(_){i.tickValues([0,w.domain()[1]])}a.tickFormat(function(e){return y.ytick(e,"m")});x.select(".x.axis").transition().call(i);x.select(".x.label").text(g+" ["+M+"]").style("fill","grey").style("shape-rendering","crispEdges");if(O/15<10){a.ticks(O/15)}x.select(".y.axis").transition().call(a)}x.select(".grid-y").transition().call(a.tickSize(-T,0).tickFormat("")).selectAll(".tick line").style("stroke","#ccc").style("opacity",.7);x.selectAll(".axis").selectAll("path, line").style("fill","none").style("stroke","#000").style("shape-rendering","crispEdges");x.select(".grid-y").select("path").style("stroke","none");x.selectAll(".grid-hover line").style("stroke","#222").style("opacity",.8);x.select(".overlay").on("mouseout",R).on("mousemove",D);function D(){var t=Mt.mouse(this)[0];var r=w.invert(t);e.highlight(r)}function R(){e.clearHighlight()}})};A.clearHighlight=function(){x.selectAll(".grid-hover").style("display","none");s.call(null)};A.highlight=function(e){var t=b.datum();var r=f(t,e);if(r>=t.length){return}var i=t[r];var n=l(i);var a=void 0;var s=[];var h={};var d=void 0;for(d in u){a=u[d].zExtractor(i);s.push(a);h[d]=a;x.select(".y.grid-hover."+d).style("display","inline").select("line").attr("x1",w(0)).attr("y1",S(a)).attr("x2",T).attr("y2",S(a))}x.select(".x.grid-hover").style("display","inline").select("line").attr("x1",w(n)).attr("y1",O).attr("x2",w(n)).attr("y2",S(Math.max.apply(null,s)));var p=n>j[1]/2;var v=w(n);v+=p?-10:10;x.select(".x.grid-hover text").text(y.xhover(n/E,M)).style("text-anchor",p?"end":"start").attr("transform","translate("+v+","+(O-10)+")");var g="m";if(c===1){var m=s[0]===null?"no value":y.yhover(s[0],"m");x.select(".y.grid-hover text").text(m).style("text-anchor",p?"end":"start").attr("transform","translate("+v+","+(S(s[0])-10)+")")}o.call(null,i,n/E,M,h,g)};A.showPois=function(e){e=e!==undefined?e:[];i["a"].assert(e.length===0||h!==undefined);var t=h;var n=b.select("g");var a=b.datum();var o=n.select(".pois");var s=o.selectAll(".poi").data(e,function(e){var r=f(a,Math.round(t.dist(e)*10)/10,1);var i=a[r];if(i){var n=void 0;var o=[];for(n in u){o.push(u[n].zExtractor(i))}var s=Math.max.apply(null,o);t.z(e,s)}return t.id(e)});var l=s.enter().append("g").attr("class","poi");l.append("text").attr("x",r?0:9).attr("dy",".35em").attr("text-anchor",r?"middle":"start");l.append("line").style("shape-rendering","crispEdges");l.style("opacity",0).transition().duration(1e3).delay(100).style("opacity",1);l.selectAll("text").attr("transform",function(e){if(r){return["translate("+w(t.dist(e))+","+(S(t.z(e))-10)+")"]}else{return["translate("+w(t.dist(e))+","+(S(t.z(e))-20)+") rotate("+p+")"]}}).text(function(e){return t.sort(e)+(r?"":" - "+t.title(e))});l.selectAll("line").style("stroke","grey").attr("x1",function(e){return w(t.dist(e))}).attr("y1",function(e){return S(S.domain()[0])}).attr("x2",function(e){return w(t.dist(e))}).attr("y2",function(e){return S(t.z(e))});l.exit().remove()};function P(){A.showPois([])}return A};var At=jt;var Pt={select:f["select"]};var kt=angular.module("ngeoProfile",[o["a"].name]);kt.directive_=function(e){return{restrict:"A",link:function t(r,o,s){var l=s["ngeoProfileOptions"];i["a"].assert(l!==undefined);var u=Pt.select(o[0]);var c=void 0,f=void 0,h=void 0;r.$watchCollection(l,function(e){var t=a["a"]({},e);if(t!==undefined){if(t.hoverCallback!==undefined){var i=t.hoverCallback;t.hoverCallback=function(){i.apply(undefined,arguments);r.$applyAsync()}}if(t.outCallback!==undefined){var n=t.outCallback;t.outCallback=function(){n();r.$applyAsync()}}c=At(t);d()}});r.$watch(s["ngeoProfile"],function(e,t){f=e;d()});r.$watch(s["ngeoProfilePois"],function(e,t){h=e;d()});r.$watch(s["ngeoProfileHighlight"],function(e,t){if(e===undefined){return}if(e>0){c.highlight(e)}else{c.clearHighlight()}});n["a"](window,"resize",e(d,50,true));function d(){if(c!==undefined){u.datum(f).call(c);if(f!==undefined){c.showPois(h)}}}}}};kt.directive_.$inject=["ngeoDebounce"];kt.directive("ngeoProfile",kt.directive_);var It=t["a"]=kt},function(e,t,r){"use strict";var i=r(160);var n=r(127);var a=r(62);var o={};o.toXY=function(e,t){if(t===0){if(e.length>2){e=[e[0],e[1]]}}else{for(var r=0,i=e.length;r<i;r++){e[r]=o.toXY(e[r],t-1)}}return e};var s=o;var l=r(51);var u=r(130);var c=r(131);var f=r(141);var h=r(34);var d=r(49);var p=r(85);var v={};v.isEmpty=function(e){var t=true;if(e&&e instanceof p["a"]){t=e.getFlatCoordinates().length===0}return t};v.toXY=function(e){if(e instanceof h["a"]){e.setCoordinates(s.toXY(e.getCoordinates(),0))}else if(e instanceof c["a"]||e instanceof l["a"]){e.setCoordinates(s.toXY(e.getCoordinates(),1))}else if(e instanceof u["a"]||e instanceof d["a"]){e.setCoordinates(s.toXY(e.getCoordinates(),2))}else if(e instanceof f["a"]){e.setCoordinates(s.toXY(e.getCoordinates(),3))}else{throw"gmf.objectediting.geom.toXY - unsupported geometry type"}};var g=v;var m=r(227);var y=r(212);var _=r(1);var b=r(78);var w=r(86);var S=r(52);var C=r(50);var x=r(77);var O=r(66);var T=r(3);var E=r(28);var M=r(2);var j=r(176);var A=r(132);var P=r(54);var k=r(338);var I=r(101);var D=r(47);var R=r(38);var L=r(15);var $=function(e,t){return e.interfaces_&&e.interfaces_().indexOf(t)>-1};var N=function(e,t){for(let r in t){if(t.hasOwnProperty(r))e[r]=t[r]}};function F(){}function G(){}N(G.prototype,{setOrdinate:function(e,t,r){},size:function(){},getOrdinate:function(e,t){},getCoordinate:function(){if(arguments.length===1){let e=arguments[0]}else if(arguments.length===2){let e=arguments[0],t=arguments[1]}},getCoordinateCopy:function(e){},getDimension:function(){},getX:function(e){},expandEnvelope:function(e){},copy:function(){},getY:function(e){},toCoordinateArray:function(){},interfaces_:function(){return[F]},getClass:function(){return G}});G.X=0;G.Y=1;G.Z=2;G.M=3;function U(){}N(U.prototype,{create:function(){if(arguments.length===1){if(arguments[0]instanceof Array){let e=arguments[0]}else if($(arguments[0],G)){let e=arguments[0]}}else if(arguments.length===2){let e=arguments[0],t=arguments[1]}},interfaces_:function(){return[]},getClass:function(){return U}});function H(){}function Y(){}N(Y.prototype,{filter:function(e){},interfaces_:function(){return[]},getClass:function(){return Y}});function W(){}function V(){}function z(){}N(z.prototype,{interfaces_:function(){return[]},getClass:function(){return z}});z.equalsWithTolerance=function(e,t,r){return Math.abs(e-t)<=r};function q(e,t){this.low=t|0;this.high=e|0}q.toBinaryString=function(e){var t="";for(var r=2147483648;r>0;r>>>=1)t+=(e.high&r)===r?"1":"0";for(var r=2147483648;r>0;r>>>=1)t+=(e.low&r)===r?"1":"0";return t};function B(){}B.isNaN=(e=>Number.isNaN(e));B.isInfinite=(e=>!Number.isFinite(e));B.MAX_VALUE=Number.MAX_VALUE;if(typeof Float64Array=="function"&&typeof Int32Array=="function"){(function(){var e=2146435072;var t=1048575;var r=new Float64Array(1);var i=new Int32Array(r.buffer);B.doubleToLongBits=function(n){r[0]=n;var a=i[0]|0;var o=i[1]|0;if((o&e)===e&&(o&t)!==0&&a!==0){a=0|0;o=2146959360|0}return new q(o,a)};B.longBitsToDouble=function(e){i[0]=e.low;i[1]=e.high;return r[0]}})()}else{(function(){var e=1023;var t=Math.log2;var r=Math.floor;var i=Math.pow;var n=function(){for(var e=53;e>0;e--){var n=i(2,e)-1;if(r(t(n))+1===e){return n}}return 0}();B.doubleToLongBits=function(a){var o,s,l,u,c;var f,h,d,p;if(a<0||1/a===Number.NEGATIVE_INFINITY){f=1<<31;a=-a}else{f=0}if(a===0){p=0|0;d=f;return new q(d,p)}if(a===Infinity){p=0|0;d=f|2146435072;return new q(d,p)}if(a!==a){p=0|0;d=2146959360;return new q(d,p)}u=0;p=0|0;o=r(a);if(o>1){if(o<=n){u=r(t(o));if(u<=20){p=0|0;d=o<<20-u&1048575}else{l=u-20;s=i(2,l);p=o%s<<32-l;d=o/s&1048575}}else{l=o;p=0|0;while(true){s=l/2;l=r(s);if(l===0){break}u++;p>>>=1;p|=(d&1)<<31;d>>>=1;if(s!==l){d|=524288}}}}h=u+e;c=o===0;o=a-o;if(u<52&&o!==0){l=0;while(true){s=o*2;if(s>=1){o=s-1;if(!c){l<<=1;l|=1;u++}else{h--;c=false}}else{o=s;if(!c){l<<=1;u++}else if(--h===0){u++;c=false}}if(u===20){d|=l;l=0}else if(u===52){p|=l;break}if(s===1){if(u<20){d|=l<<20-u}else if(u<52){p|=l<<52-u}break}}}d|=h<<20;d|=f;return new q(d,p)};B.longBitsToDouble=function(t){var r,n,a,o;var s=t.high;var l=t.low;n=s&1<<31?-1:1;a=((s&2146435072)>>20)-e;o=0;r=1<<19;for(var u=1;u<=20;u++){if(s&r){o+=i(2,-u)}r>>>=1}r=1<<31;for(var u=21;u<=52;u++){if(l&r){o+=i(2,-u)}r>>>=1}if(a===-e){if(o===0){return n*0}a=-1022}else if(a===e+1){if(o===0){return n/0}return NaN}else{o+=1}return n*o*i(2,a)}})()}function X(){}function K(e){this.name="RuntimeException";this.message=e;this.stack=(new Error).stack;Error.call(this,e)}K.prototype=Object.create(Error.prototype);K.prototype.constructor=Error;var Z=function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e};function Q(){if(arguments.length===0){K.call(this)}else if(arguments.length===1){let e=arguments[0];K.call(this,e)}}Z(Q,K);N(Q.prototype,{interfaces_:function(){return[]},getClass:function(){return Q}});function J(){}N(J.prototype,{interfaces_:function(){return[]},getClass:function(){return J}});J.shouldNeverReachHere=function(){if(arguments.length===0){J.shouldNeverReachHere(null)}else if(arguments.length===1){let e=arguments[0];throw new Q("Should never reach here"+(e!==null?": "+e:""))}};J.isTrue=function(){if(arguments.length===1){let e=arguments[0];J.isTrue(e,null)}else if(arguments.length===2){let e=arguments[0],t=arguments[1];if(!e){if(t===null){throw new Q}else{throw new Q(t)}}}};J.equals=function(){if(arguments.length===2){let e=arguments[0],t=arguments[1];J.equals(e,t,null)}else if(arguments.length===3){let e=arguments[0],t=arguments[1],r=arguments[2];if(!t.equals(e)){throw new Q("Expected "+e+" but encountered "+t+(r!==null?": "+r:""))}}};function ee(){this.x=null;this.y=null;this.z=null;if(arguments.length===0){ee.call(this,0,0)}else if(arguments.length===1){let e=arguments[0];ee.call(this,e.x,e.y,e.z)}else if(arguments.length===2){let e=arguments[0],t=arguments[1];ee.call(this,e,t,ee.NULL_ORDINATE)}else if(arguments.length===3){let e=arguments[0],t=arguments[1],r=arguments[2];this.x=e;this.y=t;this.z=r}}N(ee.prototype,{setOrdinate:function(e,t){switch(e){case ee.X:this.x=t;break;case ee.Y:this.y=t;break;case ee.Z:this.z=t;break;default:throw new H("Invalid ordinate index: "+e)}},equals2D:function(){if(arguments.length===1){let e=arguments[0];if(this.x!==e.x){return false}if(this.y!==e.y){return false}return true}else if(arguments.length===2){let e=arguments[0],t=arguments[1];if(!z.equalsWithTolerance(this.x,e.x,t)){return false}if(!z.equalsWithTolerance(this.y,e.y,t)){return false}return true}},getOrdinate:function(e){switch(e){case ee.X:return this.x;case ee.Y:return this.y;case ee.Z:return this.z}throw new H("Invalid ordinate index: "+e)},equals3D:function(e){return this.x===e.x&&this.y===e.y&&(this.z===e.z||B.isNaN(this.z)&&B.isNaN(e.z))},equals:function(e){if(!(e instanceof ee)){return false}return this.equals2D(e)},equalInZ:function(e,t){return z.equalsWithTolerance(this.z,e.z,t)},compareTo:function(e){var t=e;if(this.x<t.x)return-1;if(this.x>t.x)return 1;if(this.y<t.y)return-1;if(this.y>t.y)return 1;return 0},clone:function(){try{var e=null;return e}catch(e){if(e instanceof CloneNotSupportedException){J.shouldNeverReachHere("this shouldn't happen because this class is Cloneable");return null}else throw e}finally{}},copy:function(){return new ee(this)},toString:function(){return"("+this.x+", "+this.y+", "+this.z+")"},distance3D:function(e){var t=this.x-e.x;var r=this.y-e.y;var i=this.z-e.z;return Math.sqrt(t*t+r*r+i*i)},distance:function(e){var t=this.x-e.x;var r=this.y-e.y;return Math.sqrt(t*t+r*r)},hashCode:function(){var e=17;e=37*e+ee.hashCode(this.x);e=37*e+ee.hashCode(this.y);return e},setCoordinate:function(e){this.x=e.x;this.y=e.y;this.z=e.z},interfaces_:function(){return[W,F,V]},getClass:function(){return ee}});ee.hashCode=function(){if(arguments.length===1&&typeof arguments[0]==="number"){let t=arguments[0];var e=B.doubleToLongBits(t);return Math.trunc(e^e>>>32)}};function te(){this._dimensionsToTest=2;if(arguments.length===0){te.call(this,2)}else if(arguments.length===1){let e=arguments[0];if(e!==2&&e!==3)throw new H("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}}N(te.prototype,{compare:function(e,t){var r=e;var i=t;var n=te.compare(r.x,i.x);if(n!==0)return n;var a=te.compare(r.y,i.y);if(a!==0)return a;if(this._dimensionsToTest<=2)return 0;var o=te.compare(r.z,i.z);return o},interfaces_:function(){return[X]},getClass:function(){return te}});te.compare=function(e,t){if(e<t)return-1;if(e>t)return 1;if(B.isNaN(e)){if(B.isNaN(t))return 0;return-1}if(B.isNaN(t))return 1;return 0};ee.DimensionalComparator=te;ee.serialVersionUID=0x5cbf2c235c7e5800;ee.NULL_ORDINATE=B.NaN;ee.X=0;ee.Y=1;ee.Z=2;function re(){this._minx=null;this._maxx=null;this._miny=null;this._maxy=null;if(arguments.length===0){this.init()}else if(arguments.length===1){if(arguments[0]instanceof ee){let e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof re){let e=arguments[0];this.init(e)}}else if(arguments.length===2){let e=arguments[0],t=arguments[1];this.init(e.x,t.x,e.y,t.y)}else if(arguments.length===4){let e=arguments[0],t=arguments[1],r=arguments[2],i=arguments[3];this.init(e,t,r,i)}}N(re.prototype,{getArea:function(){return this.getWidth()*this.getHeight()},equals:function(e){if(!(e instanceof re)){return false}var t=e;if(this.isNull()){return t.isNull()}return this._maxx===t.getMaxX()&&this._maxy===t.getMaxY()&&this._minx===t.getMinX()&&this._miny===t.getMinY()},intersection:function(e){if(this.isNull()||e.isNull()||!this.intersects(e))return new re;var t=this._minx>e._minx?this._minx:e._minx;var r=this._miny>e._miny?this._miny:e._miny;var i=this._maxx<e._maxx?this._maxx:e._maxx;var n=this._maxy<e._maxy?this._maxy:e._maxy;return new re(t,i,r,n)},isNull:function(){return this._maxx<this._minx},getMaxX:function(){return this._maxx},covers:function(){if(arguments.length===1){if(arguments[0]instanceof ee){let e=arguments[0];return this.covers(e.x,e.y)}else if(arguments[0]instanceof re){let e=arguments[0];if(this.isNull()||e.isNull()){return false}return e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(arguments.length===2){let e=arguments[0],t=arguments[1];if(this.isNull())return false;return e>=this._minx&&e<=this._maxx&&t>=this._miny&&t<=this._maxy}},intersects:function(){if(arguments.length===1){if(arguments[0]instanceof re){let e=arguments[0];if(this.isNull()||e.isNull()){return false}return!(e._minx>this._maxx||e._maxx<this._minx||e._miny>this._maxy||e._maxy<this._miny)}else if(arguments[0]instanceof ee){let e=arguments[0];return this.intersects(e.x,e.y)}}else if(arguments.length===2){if(arguments[0]instanceof ee&&arguments[1]instanceof ee){let n=arguments[0],a=arguments[1];if(this.isNull()){return false}var e=n.x<a.x?n.x:a.x;if(e>this._maxx)return false;var t=n.x>a.x?n.x:a.x;if(t<this._minx)return false;var r=n.y<a.y?n.y:a.y;if(r>this._maxy)return false;var i=n.y>a.y?n.y:a.y;if(i<this._miny)return false;return true}else if(typeof arguments[0]==="number"&&typeof arguments[1]==="number"){let e=arguments[0],t=arguments[1];if(this.isNull())return false;return!(e>this._maxx||e<this._minx||t>this._maxy||t<this._miny)}}},getMinY:function(){return this._miny},getMinX:function(){return this._minx},expandToInclude:function(){if(arguments.length===1){if(arguments[0]instanceof ee){let e=arguments[0];this.expandToInclude(e.x,e.y)}else if(arguments[0]instanceof re){let e=arguments[0];if(e.isNull()){return null}if(this.isNull()){this._minx=e.getMinX();this._maxx=e.getMaxX();this._miny=e.getMinY();this._maxy=e.getMaxY()}else{if(e._minx<this._minx){this._minx=e._minx}if(e._maxx>this._maxx){this._maxx=e._maxx}if(e._miny<this._miny){this._miny=e._miny}if(e._maxy>this._maxy){this._maxy=e._maxy}}}}else if(arguments.length===2){let e=arguments[0],t=arguments[1];if(this.isNull()){this._minx=e;this._maxx=e;this._miny=t;this._maxy=t}else{if(e<this._minx){this._minx=e}if(e>this._maxx){this._maxx=e}if(t<this._miny){this._miny=t}if(t>this._maxy){this._maxy=t}}}},minExtent:function(){if(this.isNull())return 0;var e=this.getWidth();var t=this.getHeight();if(e<t)return e;return t},getWidth:function(){if(this.isNull()){return 0}return this._maxx-this._minx},compareTo:function(e){var t=e;if(this.isNull()){if(t.isNull())return 0;return-1}else{if(t.isNull())return 1}if(this._minx<t._minx)return-1;if(this._minx>t._minx)return 1;if(this._miny<t._miny)return-1;if(this._miny>t._miny)return 1;if(this._maxx<t._maxx)return-1;if(this._maxx>t._maxx)return 1;if(this._maxy<t._maxy)return-1;if(this._maxy>t._maxy)return 1;return 0},translate:function(e,t){if(this.isNull()){return null}this.init(this.getMinX()+e,this.getMaxX()+e,this.getMinY()+t,this.getMaxY()+t)},toString:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},setToNull:function(){this._minx=0;this._maxx=-1;this._miny=0;this._maxy=-1},getHeight:function(){if(this.isNull()){return 0}return this._maxy-this._miny},maxExtent:function(){if(this.isNull())return 0;var e=this.getWidth();var t=this.getHeight();if(e>t)return e;return t},expandBy:function(){if(arguments.length===1){let e=arguments[0];this.expandBy(e,e)}else if(arguments.length===2){let e=arguments[0],t=arguments[1];if(this.isNull())return null;this._minx-=e;this._maxx+=e;this._miny-=t;this._maxy+=t;if(this._minx>this._maxx||this._miny>this._maxy)this.setToNull()}},contains:function(){if(arguments.length===1){if(arguments[0]instanceof re){let e=arguments[0];return this.covers(e)}else if(arguments[0]instanceof ee){let e=arguments[0];return this.covers(e)}}else if(arguments.length===2){let e=arguments[0],t=arguments[1];return this.covers(e,t)}},centre:function(){if(this.isNull())return null;return new ee((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},init:function(){if(arguments.length===0){this.setToNull()}else if(arguments.length===1){if(arguments[0]instanceof ee){let e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof re){let e=arguments[0];this._minx=e._minx;this._maxx=e._maxx;this._miny=e._miny;this._maxy=e._maxy}}else if(arguments.length===2){let e=arguments[0],t=arguments[1];this.init(e.x,t.x,e.y,t.y)}else if(arguments.length===4){let e=arguments[0],t=arguments[1],r=arguments[2],i=arguments[3];if(e<t){this._minx=e;this._maxx=t}else{this._minx=t;this._maxx=e}if(r<i){this._miny=r;this._maxy=i}else{this._miny=i;this._maxy=r}}},getMaxY:function(){return this._maxy},distance:function(e){if(this.intersects(e))return 0;var t=0;if(this._maxx<e._minx)t=e._minx-this._maxx;else if(this._minx>e._maxx)t=this._minx-e._maxx;var r=0;if(this._maxy<e._miny)r=e._miny-this._maxy;else if(this._miny>e._maxy)r=this._miny-e._maxy;if(t===0)return r;if(r===0)return t;return Math.sqrt(t*t+r*r)},hashCode:function(){var e=17;e=37*e+ee.hashCode(this._minx);e=37*e+ee.hashCode(this._maxx);e=37*e+ee.hashCode(this._miny);e=37*e+ee.hashCode(this._maxy);return e},interfaces_:function(){return[W,V]},getClass:function(){return re}});re.intersects=function(){if(arguments.length===3){let e=arguments[0],t=arguments[1],r=arguments[2];if(r.x>=(e.x<t.x?e.x:t.x)&&r.x<=(e.x>t.x?e.x:t.x)&&(r.y>=(e.y<t.y?e.y:t.y)&&r.y<=(e.y>t.y?e.y:t.y))){return true}return false}else if(arguments.length===4){let n=arguments[0],a=arguments[1],o=arguments[2],s=arguments[3];var e=Math.min(o.x,s.x);var t=Math.max(o.x,s.x);var r=Math.min(n.x,a.x);var i=Math.max(n.x,a.x);if(r>t)return false;if(i<e)return false;e=Math.min(o.y,s.y);t=Math.max(o.y,s.y);r=Math.min(n.y,a.y);i=Math.max(n.y,a.y);if(r>t)return false;if(i<e)return false;return true}};re.serialVersionUID=0x51845cd552189800;function ie(){this._envelope=null;this._factory=null;this._SRID=null;this._userData=null;let e=arguments[0];this._factory=e;this._SRID=e.getSRID()}N(ie.prototype,{isGeometryCollection:function(){return this.getTypeCode()===ie.TYPECODE_GEOMETRYCOLLECTION},getFactory:function(){return this._factory},getGeometryN:function(e){return this},getArea:function(){return 0},isRectangle:function(){return false},equals:function(){if(arguments[0]instanceof ie){let e=arguments[0];if(e===null)return false;return this.equalsTopo(e)}else if(arguments[0]instanceof Object){let t=arguments[0];if(!(t instanceof ie))return false;var e=t;return this.equalsExact(e)}},equalsExact:function(e){return this===e||this.equalsExact(e,0)},geometryChanged:function(){this.apply(ie.geometryChangedFilter)},geometryChangedAction:function(){this._envelope=null},equalsNorm:function(e){if(e===null)return false;return this.norm().equalsExact(e.norm())},getLength:function(){return 0},getNumGeometries:function(){return 1},compareTo:function(){if(arguments.length===1){let t=arguments[0];var e=t;if(this.getTypeCode()!==e.getTypeCode()){return this.getTypeCode()-e.getTypeCode()}if(this.isEmpty()&&e.isEmpty()){return 0}if(this.isEmpty()){return-1}if(e.isEmpty()){return 1}return this.compareToSameClass(t)}else if(arguments.length===2){let t=arguments[0],r=arguments[1];var e=t;if(this.getTypeCode()!==e.getTypeCode()){return this.getTypeCode()-e.getTypeCode()}if(this.isEmpty()&&e.isEmpty()){return 0}if(this.isEmpty()){return-1}if(e.isEmpty()){return 1}return this.compareToSameClass(t,r)}},getUserData:function(){return this._userData},getSRID:function(){return this._SRID},getEnvelope:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},checkNotGeometryCollection:function(e){if(e.getTypeCode()===ie.TYPECODE_GEOMETRYCOLLECTION){throw new H("This method does not support GeometryCollection arguments")}},equal:function(e,t,r){if(r===0){return e.equals(t)}return e.distance(t)<=r},norm:function(){var e=this.copy();e.normalize();return e},getPrecisionModel:function(){return this._factory.getPrecisionModel()},getEnvelopeInternal:function(){if(this._envelope===null){this._envelope=this.computeEnvelopeInternal()}return new re(this._envelope)},setSRID:function(e){this._SRID=e},setUserData:function(e){this._userData=e},compare:function(e,t){var r=e.iterator();var i=t.iterator();while(r.hasNext()&&i.hasNext()){var n=r.next();var a=i.next();var o=n.compareTo(a);if(o!==0){return o}}if(r.hasNext()){return 1}if(i.hasNext()){return-1}return 0},hashCode:function(){return this.getEnvelopeInternal().hashCode()},isGeometryCollectionOrDerived:function(){if(this.getTypeCode()===ie.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===ie.TYPECODE_MULTIPOINT||this.getTypeCode()===ie.TYPECODE_MULTILINESTRING||this.getTypeCode()===ie.TYPECODE_MULTIPOLYGON){return true}return false},interfaces_:function(){return[F,W,V]},getClass:function(){return ie}});ie.hasNonEmptyElements=function(e){for(var t=0;t<e.length;t++){if(!e[t].isEmpty()){return true}}return false};ie.hasNullElements=function(e){for(var t=0;t<e.length;t++){if(e[t]===null){return true}}return false};ie.serialVersionUID=0x799ea46522854c00;ie.TYPECODE_POINT=0;ie.TYPECODE_MULTIPOINT=1;ie.TYPECODE_LINESTRING=2;ie.TYPECODE_LINEARRING=3;ie.TYPECODE_MULTILINESTRING=4;ie.TYPECODE_POLYGON=5;ie.TYPECODE_MULTIPOLYGON=6;ie.TYPECODE_GEOMETRYCOLLECTION=7;ie.TYPENAME_POINT="Point";ie.TYPENAME_MULTIPOINT="MultiPoint";ie.TYPENAME_LINESTRING="LineString";ie.TYPENAME_LINEARRING="LinearRing";ie.TYPENAME_MULTILINESTRING="MultiLineString";ie.TYPENAME_POLYGON="Polygon";ie.TYPENAME_MULTIPOLYGON="MultiPolygon";ie.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection";ie.geometryChangedFilter={interfaces_:function(){return[Y]},filter:function(e){e.geometryChangedAction()}};function ne(){}N(ne.prototype,{filter:function(e){},interfaces_:function(){return[]},getClass:function(){return ne}});function ae(){}N(ae.prototype,{isInBoundary:function(e){},interfaces_:function(){return[]},getClass:function(){return ae}});function oe(){}N(oe.prototype,{isInBoundary:function(e){return e%2===1},interfaces_:function(){return[ae]},getClass:function(){return oe}});function se(){}N(se.prototype,{isInBoundary:function(e){return e>0},interfaces_:function(){return[ae]},getClass:function(){return se}});function le(){}N(le.prototype,{isInBoundary:function(e){return e>1},interfaces_:function(){return[ae]},getClass:function(){return le}});function ue(){}N(ue.prototype,{isInBoundary:function(e){return e===1},interfaces_:function(){return[ae]},getClass:function(){return ue}});ae.Mod2BoundaryNodeRule=oe;ae.EndPointBoundaryNodeRule=se;ae.MultiValentEndPointBoundaryNodeRule=le;ae.MonoValentEndPointBoundaryNodeRule=ue;ae.MOD2_BOUNDARY_RULE=new oe;ae.ENDPOINT_BOUNDARY_RULE=new se;ae.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new le;ae.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new ue;ae.OGC_SFS_BOUNDARY_RULE=ae.MOD2_BOUNDARY_RULE;function ce(){}ce.prototype.hasNext=function(){};ce.prototype.next=function(){};ce.prototype.remove=function(){};function fe(){}fe.prototype.add=function(){};fe.prototype.addAll=function(){};fe.prototype.isEmpty=function(){};fe.prototype.iterator=function(){};fe.prototype.size=function(){};fe.prototype.toArray=function(){};fe.prototype.remove=function(){};function he(e){this.message=e||""}he.prototype=new Error;he.prototype.name="IndexOutOfBoundsException";function de(){}de.prototype=Object.create(fe.prototype);de.prototype.constructor=de;de.prototype.get=function(){};de.prototype.set=function(){};de.prototype.isEmpty=function(){};function pe(e){this.message=e||""}pe.prototype=new Error;pe.prototype.name="NoSuchElementException";function ve(e){this.message=e||""}ve.prototype=new Error;ve.prototype.name="OperationNotSupported";function ge(){this.array_=[];if(arguments[0]instanceof fe){this.addAll(arguments[0])}}ge.prototype=Object.create(de.prototype);ge.prototype.constructor=ge;ge.prototype.ensureCapacity=function(){};ge.prototype.interfaces_=function(){return[de,fe]};ge.prototype.add=function(e){if(arguments.length===1){this.array_.push(e)}else{this.array_.splice(arguments[0],0,arguments[1])}return true};ge.prototype.clear=function(){this.array_=[]};ge.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();){this.add(t.next())}return true};ge.prototype.set=function(e,t){var r=this.array_[e];this.array_[e]=t;return r};ge.prototype.iterator=function(){return new me(this)};ge.prototype.get=function(e){if(e<0||e>=this.size()){throw new he}return this.array_[e]};ge.prototype.isEmpty=function(){return this.array_.length===0};ge.prototype.size=function(){return this.array_.length};ge.prototype.toArray=function(){var e=[];for(var t=0,r=this.array_.length;t<r;t++){e.push(this.array_[t])}return e};ge.prototype.remove=function(e){var t=false;for(var r=0,i=this.array_.length;r<i;r++){if(this.array_[r]===e){this.array_.splice(r,1);t=true;break}}return t};var me=function(e){this.arrayList_=e;this.position_=0};me.prototype.next=function(){if(this.position_===this.arrayList_.size()){throw new pe}return this.arrayList_.get(this.position_++)};me.prototype.hasNext=function(){if(this.position_<this.arrayList_.size()){return true}else{return false}};me.prototype.set=function(e){return this.arrayList_.set(this.position_-1,e)};me.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))};function ye(){ge.apply(this);if(arguments.length===0){}else if(arguments.length===1){let e=arguments[0];this.ensureCapacity(e.length);this.add(e,true)}else if(arguments.length===2){let e=arguments[0],t=arguments[1];this.ensureCapacity(e.length);this.add(e,t)}}Z(ye,ge);N(ye.prototype,{getCoordinate:function(e){return this.get(e)},addAll:function(){if(arguments.length===2&&(typeof arguments[1]==="boolean"&&$(arguments[0],fe))){let r=arguments[0],i=arguments[1];var e=false;for(var t=r.iterator();t.hasNext();){this.add(t.next(),i);e=true}return e}else return ge.prototype.addAll.apply(this,arguments)},clone:function(){var e=ge.prototype.clone.call(this);for(var t=0;t<this.size();t++){e.add(t,this.get(t).clone())}return e},toCoordinateArray:function(){return this.toArray(ye.coordArrayType)},add:function(){if(arguments.length===1){let e=arguments[0];ge.prototype.add.call(this,e)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]==="boolean"){let e=arguments[0],t=arguments[1];this.add(e,t,true);return true}else if(arguments[0]instanceof ee&&typeof arguments[1]==="boolean"){let t=arguments[0],r=arguments[1];if(!r){if(this.size()>=1){var e=this.get(this.size()-1);if(e.equals2D(t))return null}}ge.prototype.add.call(this,t)}else if(arguments[0]instanceof Object&&typeof arguments[1]==="boolean"){let e=arguments[0],t=arguments[1];this.add(e,t);return true}}else if(arguments.length===3){if(typeof arguments[2]==="boolean"&&(arguments[0]instanceof Array&&typeof arguments[1]==="boolean")){let e=arguments[0],r=arguments[1],i=arguments[2];if(i){for(var t=0;t<e.length;t++){this.add(e[t],r)}}else{for(var t=e.length-1;t>=0;t--){this.add(e[t],r)}}return true}else if(typeof arguments[2]==="boolean"&&(Number.isInteger(arguments[0])&&arguments[1]instanceof ee)){let e=arguments[0],t=arguments[1],a=arguments[2];if(!a){var r=this.size();if(r>0){if(e>0){var i=this.get(e-1);if(i.equals2D(t))return null}if(e<r){var n=this.get(e);if(n.equals2D(t))return null}}}ge.prototype.add.call(this,e,t)}}else if(arguments.length===4){let e=arguments[0],r=arguments[1],i=arguments[2],n=arguments[3];var a=1;if(i>n)a=-1;for(var t=i;t!==n;t+=a){this.add(e[t],r)}return true}},closeRing:function(){if(this.size()>0)this.add(new ee(this.get(0)),false)},interfaces_:function(){return[]},getClass:function(){return ye}});ye.coordArrayType=new Array(0).fill(null);function _e(){}N(_e.prototype,{interfaces_:function(){return[]},getClass:function(){return _e}});_e.log10=function(e){var t=Math.log(e);if(B.isInfinite(t))return t;if(B.isNaN(t))return t;return t/_e.LOG_10};_e.min=function(e,t,r,i){var n=e;if(t<n)n=t;if(r<n)n=r;if(i<n)n=i;return n};_e.clamp=function(){if(typeof arguments[2]==="number"&&(typeof arguments[0]==="number"&&typeof arguments[1]==="number")){let e=arguments[0],t=arguments[1],r=arguments[2];if(e<t)return t;if(e>r)return r;return e}else if(Number.isInteger(arguments[2])&&(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1]))){let e=arguments[0],t=arguments[1],r=arguments[2];if(e<t)return t;if(e>r)return r;return e}};_e.wrap=function(e,t){if(e<0){return t- -e%t}return e%t};_e.max=function(){if(arguments.length===3){let t=arguments[0],r=arguments[1],i=arguments[2];var e=t;if(r>e)e=r;if(i>e)e=i;return e}else if(arguments.length===4){let t=arguments[0],r=arguments[1],i=arguments[2],n=arguments[3];var e=t;if(r>e)e=r;if(i>e)e=i;if(n>e)e=n;return e}};_e.average=function(e,t){return(e+t)/2};_e.LOG_10=Math.log(10);function be(){}be.arraycopy=((e,t,r,i,n)=>{let a=0;for(let o=t;o<t+n;o++){r[i+a]=e[o];a++}});be.getProperty=(e=>{return{"line.separator":"\n"}[e]});function we(){}N(we.prototype,{interfaces_:function(){return[]},getClass:function(){return we}});we.isRing=function(e){if(e.length<4)return false;if(!e[0].equals2D(e[e.length-1]))return false;return true};we.ptNotInList=function(e,t){for(var r=0;r<e.length;r++){var i=e[r];if(we.indexOf(i,t)<0)return i}return null};we.scroll=function(e,t){var r=we.indexOf(t,e);if(r<0)return null;var i=new Array(e.length).fill(null);be.arraycopy(e,r,i,0,e.length-r);be.arraycopy(e,0,i,e.length-r,r);be.arraycopy(i,0,e,0,e.length)};we.equals=function(){if(arguments.length===2){let t=arguments[0],r=arguments[1];if(t===r)return true;if(t===null||r===null)return false;if(t.length!==r.length)return false;for(var e=0;e<t.length;e++){if(!t[e].equals(r[e]))return false}return true}else if(arguments.length===3){let t=arguments[0],r=arguments[1],i=arguments[2];if(t===r)return true;if(t===null||r===null)return false;if(t.length!==r.length)return false;for(var e=0;e<t.length;e++){if(i.compare(t[e],r[e])!==0)return false}return true}};we.intersection=function(e,t){var r=new ye;for(var i=0;i<e.length;i++){if(t.intersects(e[i]))r.add(e[i],true)}return r.toCoordinateArray()};we.hasRepeatedPoints=function(e){for(var t=1;t<e.length;t++){if(e[t-1].equals(e[t])){return true}}return false};we.removeRepeatedPoints=function(e){if(!we.hasRepeatedPoints(e))return e;var t=new ye(e,false);return t.toCoordinateArray()};we.reverse=function(e){var t=e.length-1;var r=Math.trunc(t/2);for(var i=0;i<=r;i++){var n=e[i];e[i]=e[t-i];e[t-i]=n}};we.removeNull=function(e){var t=0;for(var r=0;r<e.length;r++){if(e[r]!==null)t++}var i=new Array(t).fill(null);if(t===0)return i;var n=0;for(var r=0;r<e.length;r++){if(e[r]!==null)i[n++]=e[r]}return i};we.copyDeep=function(){if(arguments.length===1){let r=arguments[0];var e=new Array(r.length).fill(null);for(var t=0;t<r.length;t++){e[t]=new ee(r[t])}return e}else if(arguments.length===5){let e=arguments[0],r=arguments[1],i=arguments[2],n=arguments[3],a=arguments[4];for(var t=0;t<a;t++){i[n+t]=new ee(e[r+t])}}};we.isEqualReversed=function(e,t){for(var r=0;r<e.length;r++){var i=e[r];var n=t[e.length-r-1];if(i.compareTo(n)!==0)return false}return true};we.envelope=function(e){var t=new re;for(var r=0;r<e.length;r++){t.expandToInclude(e[r])}return t};we.toCoordinateArray=function(e){return e.toArray(we.coordArrayType)};we.atLeastNCoordinatesOrNothing=function(e,t){return t.length>=e?t:[]};we.indexOf=function(e,t){for(var r=0;r<t.length;r++){if(e.equals(t[r])){return r}}return-1};we.increasingDirection=function(e){for(var t=0;t<Math.trunc(e.length/2);t++){var r=e.length-1-t;var i=e[t].compareTo(e[r]);if(i!==0)return i}return 1};we.compare=function(e,t){var r=0;while(r<e.length&&r<t.length){var i=e[r].compareTo(t[r]);if(i!==0)return i;r++}if(r<t.length)return-1;if(r<e.length)return 1;return 0};we.minCoordinate=function(e){var t=null;for(var r=0;r<e.length;r++){if(t===null||t.compareTo(e[r])>0){t=e[r]}}return t};we.extract=function(e,t,r){t=_e.clamp(t,0,e.length);r=_e.clamp(r,-1,e.length);var i=r-t+1;if(r<0)i=0;if(t>=e.length)i=0;if(r<t)i=0;var n=new Array(i).fill(null);if(i===0)return n;var a=0;for(var o=t;o<=r;o++){n[a++]=e[o]}return n};function Se(){}N(Se.prototype,{compare:function(e,t){var r=e;var i=t;return we.compare(r,i)},interfaces_:function(){return[X]},getClass:function(){return Se}});function Ce(){}N(Ce.prototype,{compare:function(e,t){var r=e;var i=t;if(r.length<i.length)return-1;if(r.length>i.length)return 1;if(r.length===0)return 0;var n=we.compare(r,i);var a=we.isEqualReversed(r,i);if(a)return 0;return n},OLDcompare:function(e,t){var r=e;var i=t;if(r.length<i.length)return-1;if(r.length>i.length)return 1;if(r.length===0)return 0;var n=we.increasingDirection(r);var a=we.increasingDirection(i);var o=n>0?0:r.length-1;var s=a>0?0:r.length-1;for(var l=0;l<r.length;l++){var u=r[o].compareTo(i[s]);if(u!==0)return u;o+=n;s+=a}return 0},interfaces_:function(){return[X]},getClass:function(){return Ce}});we.ForwardComparator=Se;we.BidirectionalComparator=Ce;we.coordArrayType=new Array(0).fill(null);function xe(){}xe.prototype.get=function(){};xe.prototype.put=function(){};xe.prototype.size=function(){};xe.prototype.values=function(){};xe.prototype.entrySet=function(){};function Oe(){}Oe.prototype=new xe;function Te(){}Te.prototype=new fe;Te.prototype.contains=function(){};function Ee(){this.array_=[];if(arguments[0]instanceof fe){this.addAll(arguments[0])}}Ee.prototype=new Te;Ee.prototype.contains=function(e){for(var t=0,r=this.array_.length;t<r;t++){var i=this.array_[t];if(i===e){return true}}return false};Ee.prototype.add=function(e){if(this.contains(e)){return false}this.array_.push(e);return true};Ee.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();){this.add(t.next())}return true};Ee.prototype.remove=function(e){throw new javascript.util.OperationNotSupported};Ee.prototype.size=function(){return this.array_.length};Ee.prototype.isEmpty=function(){return this.array_.length===0};Ee.prototype.toArray=function(){var e=[];for(var t=0,r=this.array_.length;t<r;t++){e.push(this.array_[t])}return e};Ee.prototype.iterator=function(){return new Me(this)};var Me=function(e){this.hashSet_=e;this.position_=0};Me.prototype.next=function(){if(this.position_===this.hashSet_.size()){throw new pe}return this.hashSet_.array_[this.position_++]};Me.prototype.hasNext=function(){if(this.position_<this.hashSet_.size()){return true}else{return false}};Me.prototype.remove=function(){throw new ve};const je=0;const Ae=1;function Pe(e){return e==null?je:e.color}function ke(e){return e==null?null:e.parent}function Ie(e,t){if(e!==null)e.color=t}function De(e){return e==null?null:e.left}function Re(e){return e==null?null:e.right}function Le(){this.root_=null;this.size_=0}Le.prototype=new Oe;Le.prototype.get=function(e){var t=this.root_;while(t!==null){var r=e["compareTo"](t.key);if(r<0){t=t.left}else if(r>0){t=t.right}else{return t.value}}return null};Le.prototype.put=function(e,t){if(this.root_===null){this.root_={key:e,value:t,left:null,right:null,parent:null,color:je,getValue(){return this.value},getKey(){return this.key}};this.size_=1;return null}var r=this.root_,i,n;do{i=r;n=e["compareTo"](r.key);if(n<0){r=r.left}else if(n>0){r=r.right}else{var a=r.value;r.value=t;return a}}while(r!==null);var o={key:e,left:null,right:null,value:t,parent:i,color:je,getValue(){return this.value},getKey(){return this.key}};if(n<0){i.left=o}else{i.right=o}this.fixAfterInsertion(o);this.size_++;return null};Le.prototype.fixAfterInsertion=function(e){e.color=Ae;while(e!=null&&e!=this.root_&&e.parent.color==Ae){if(ke(e)==De(ke(ke(e)))){var t=Re(ke(ke(e)));if(Pe(t)==Ae){Ie(ke(e),je);Ie(t,je);Ie(ke(ke(e)),Ae);e=ke(ke(e))}else{if(e==Re(ke(e))){e=ke(e);this.rotateLeft(e)}Ie(ke(e),je);Ie(ke(ke(e)),Ae);this.rotateRight(ke(ke(e)))}}else{var t=De(ke(ke(e)));if(Pe(t)==Ae){Ie(ke(e),je);Ie(t,je);Ie(ke(ke(e)),Ae);e=ke(ke(e))}else{if(e==De(ke(e))){e=ke(e);this.rotateRight(e)}Ie(ke(e),je);Ie(ke(ke(e)),Ae);this.rotateLeft(ke(ke(e)))}}}this.root_.color=je};Le.prototype.values=function(){var e=new ge;var t=this.getFirstEntry();if(t!==null){e.add(t.value);while((t=Le.successor(t))!==null){e.add(t.value)}}return e};Le.prototype.entrySet=function(){var e=new Ee;var t=this.getFirstEntry();if(t!==null){e.add(t);while((t=Le.successor(t))!==null){e.add(t)}}return e};Le.prototype.rotateLeft=function(e){if(e!=null){var t=e.right;e.right=t.left;if(t.left!=null)t.left.parent=e;t.parent=e.parent;if(e.parent==null)this.root_=t;else if(e.parent.left==e)e.parent.left=t;else e.parent.right=t;t.left=e;e.parent=t}};Le.prototype.rotateRight=function(e){if(e!=null){var t=e.left;e.left=t.right;if(t.right!=null)t.right.parent=e;t.parent=e.parent;if(e.parent==null)this.root_=t;else if(e.parent.right==e)e.parent.right=t;else e.parent.left=t;t.right=e;e.parent=t}};Le.prototype.getFirstEntry=function(){var e=this.root_;if(e!=null){while(e.left!=null){e=e.left}}return e};Le.successor=function(e){if(e===null)return null;else if(e.right!==null){var t=e.right;while(t.left!==null){t=t.left}return t}else{var t=e.parent;var r=e;while(t!==null&&r===t.right){r=t;t=t.parent}return t}};Le.prototype.size=function(){return this.size_};function $e(){}N($e.prototype,{interfaces_:function(){return[]},getClass:function(){return $e}});function Ne(){}Ne.prototype=new Te;function Fe(){this.array_=[];if(arguments[0]instanceof fe){this.addAll(arguments[0])}}Fe.prototype=new Ne;Fe.prototype.contains=function(e){for(var t=0,r=this.array_.length;t<r;t++){var i=this.array_[t];if(i["compareTo"](e)===0){return true}}return false};Fe.prototype.add=function(e){if(this.contains(e)){return false}for(var t=0,r=this.array_.length;t<r;t++){var i=this.array_[t];if(i["compareTo"](e)===1){this.array_.splice(t,0,e);return true}}this.array_.push(e);return true};Fe.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();){this.add(t.next())}return true};Fe.prototype.remove=function(e){throw new ve};Fe.prototype.size=function(){return this.array_.length};Fe.prototype.isEmpty=function(){return this.array_.length===0};Fe.prototype.toArray=function(){var e=[];for(var t=0,r=this.array_.length;t<r;t++){e.push(this.array_[t])}return e};Fe.prototype.iterator=function(){return new Ge(this)};var Ge=function(e){this.treeSet_=e;this.position_=0};Ge.prototype.next=function(){if(this.position_===this.treeSet_.size()){throw new pe}return this.treeSet_.array_[this.position_++]};Ge.prototype.hasNext=function(){if(this.position_<this.treeSet_.size()){return true}else{return false}};Ge.prototype.remove=function(){throw new ve};function Ue(){}Ue.sort=function(){var e=arguments[0],t,r,i,n;if(arguments.length===1){n=function(e,t){return e.compareTo(t)};e.sort(n);return}else if(arguments.length===2){i=arguments[1];n=function(e,t){return i["compare"](e,t)};e.sort(n)}else if(arguments.length===3){r=e.slice(arguments[1],arguments[2]);r.sort();var a=e.slice(0,arguments[1]).concat(r,e.slice(arguments[2],e.length));e.splice(0,e.length);for(t=0;t<a.length;t++){e.push(a[t])}return}else if(arguments.length===4){r=e.slice(arguments[1],arguments[2]);i=arguments[3];n=function(e,t){return i["compare"](e,t)};r.sort(n);a=e.slice(0,arguments[1]).concat(r,e.slice(arguments[2],e.length));e.splice(0,e.length);for(t=0;t<a.length;t++){e.push(a[t])}return}};Ue.asList=function(e){var t=new ge;for(var r=0,i=e.length;r<i;r++){t.add(e[r])}return t};function He(){}He.isWhitespace=(e=>e<=32&&e>=0||e==127);He.toUpperCase=(e=>e.toUpperCase());function Ye(){}N(Ye.prototype,{interfaces_:function(){return[]},getClass:function(){return Ye}});Ye.toDimensionSymbol=function(e){switch(e){case Ye.FALSE:return Ye.SYM_FALSE;case Ye.TRUE:return Ye.SYM_TRUE;case Ye.DONTCARE:return Ye.SYM_DONTCARE;case Ye.P:return Ye.SYM_P;case Ye.L:return Ye.SYM_L;case Ye.A:return Ye.SYM_A}throw new H("Unknown dimension value: "+e)};Ye.toDimensionValue=function(e){switch(He.toUpperCase(e)){case Ye.SYM_FALSE:return Ye.FALSE;case Ye.SYM_TRUE:return Ye.TRUE;case Ye.SYM_DONTCARE:return Ye.DONTCARE;case Ye.SYM_P:return Ye.P;case Ye.SYM_L:return Ye.L;case Ye.SYM_A:return Ye.A}throw new H("Unknown dimension symbol: "+e)};Ye.P=0;Ye.L=1;Ye.A=2;Ye.FALSE=-1;Ye.TRUE=-2;Ye.DONTCARE=-3;Ye.SYM_FALSE="F";Ye.SYM_TRUE="T";Ye.SYM_DONTCARE="*";Ye.SYM_P="0";Ye.SYM_L="1";Ye.SYM_A="2";function We(){}N(We.prototype,{filter:function(e){},interfaces_:function(){return[]},getClass:function(){return We}});function Ve(){}N(Ve.prototype,{filter:function(e,t){},isDone:function(){},isGeometryChanged:function(){},interfaces_:function(){return[]},getClass:function(){return Ve}});function ze(){this._geometries=null;let e=arguments[0],t=arguments[1];ie.call(this,t);if(e===null){e=[]}if(ie.hasNullElements(e)){throw new H("geometries must not contain null elements")}this._geometries=e}Z(ze,ie);N(ze.prototype,{computeEnvelopeInternal:function(){var e=new re;for(var t=0;t<this._geometries.length;t++){e.expandToInclude(this._geometries[t].getEnvelopeInternal())}return e},getGeometryN:function(e){return this._geometries[e]},getCoordinates:function(){var e=new Array(this.getNumPoints()).fill(null);var t=-1;for(var r=0;r<this._geometries.length;r++){var i=this._geometries[r].getCoordinates();for(var n=0;n<i.length;n++){t++;e[t]=i[n]}}return e},getArea:function(){var e=0;for(var t=0;t<this._geometries.length;t++){e+=this._geometries[t].getArea()}return e},equalsExact:function(){if(arguments.length===2&&(typeof arguments[1]==="number"&&arguments[0]instanceof ie)){let r=arguments[0],i=arguments[1];if(!this.isEquivalentClass(r)){return false}var e=r;if(this._geometries.length!==e._geometries.length){return false}for(var t=0;t<this._geometries.length;t++){if(!this._geometries[t].equalsExact(e._geometries[t],i)){return false}}return true}else return ie.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var e=0;e<this._geometries.length;e++){this._geometries[e].normalize()}Ue.sort(this._geometries)},getCoordinate:function(){if(this.isEmpty())return null;return this._geometries[0].getCoordinate()},getBoundaryDimension:function(){var e=Ye.FALSE;for(var t=0;t<this._geometries.length;t++){e=Math.max(e,this._geometries[t].getBoundaryDimension())}return e},getTypeCode:function(){return ie.TYPECODE_GEOMETRYCOLLECTION},getDimension:function(){var e=Ye.FALSE;for(var t=0;t<this._geometries.length;t++){e=Math.max(e,this._geometries[t].getDimension())}return e},getLength:function(){var e=0;for(var t=0;t<this._geometries.length;t++){e+=this._geometries[t].getLength()}return e},getNumPoints:function(){var e=0;for(var t=0;t<this._geometries.length;t++){e+=this._geometries[t].getNumPoints()}return e},getNumGeometries:function(){return this._geometries.length},reverse:function(){var e=this._geometries.length;var t=new Array(e).fill(null);for(var r=0;r<this._geometries.length;r++){t[r]=this._geometries[r].reverse()}return this.getFactory().createGeometryCollection(t)},compareToSameClass:function(){if(arguments.length===1){let r=arguments[0];var e=new Fe(Ue.asList(this._geometries));var t=new Fe(Ue.asList(r._geometries));return this.compare(e,t)}else if(arguments.length===2){let e=arguments[0],t=arguments[1];var r=e;var i=this.getNumGeometries();var n=r.getNumGeometries();var a=0;while(a<i&&a<n){var o=this.getGeometryN(a);var s=r.getGeometryN(a);var l=o.compareToSameClass(s,t);if(l!==0)return l;a++}if(a<i)return 1;if(a<n)return-1;return 0}},apply:function(){if($(arguments[0],ne)){let t=arguments[0];for(var e=0;e<this._geometries.length;e++){this._geometries[e].apply(t)}}else if($(arguments[0],Ve)){let t=arguments[0];if(this._geometries.length===0)return null;for(var e=0;e<this._geometries.length;e++){this._geometries[e].apply(t);if(t.isDone()){break}}if(t.isGeometryChanged())this.geometryChanged()}else if($(arguments[0],We)){let t=arguments[0];t.filter(this);for(var e=0;e<this._geometries.length;e++){this._geometries[e].apply(t)}}else if($(arguments[0],Y)){let t=arguments[0];t.filter(this);for(var e=0;e<this._geometries.length;e++){this._geometries[e].apply(t)}}},getBoundary:function(){this.checkNotGeometryCollection(this);J.shouldNeverReachHere();return null},getGeometryType:function(){return ie.TYPENAME_GEOMETRYCOLLECTION},copy:function(){var e=new Array(this._geometries.length).fill(null);for(var t=0;t<e.length;t++){e[t]=this._geometries[t].copy()}return new ze(e,this._factory)},isEmpty:function(){for(var e=0;e<this._geometries.length;e++){if(!this._geometries[e].isEmpty()){return false}}return true},interfaces_:function(){return[]},getClass:function(){return ze}});ze.serialVersionUID=-0x4f07bcb1f857d800;function qe(){let e=arguments[0],t=arguments[1];ze.call(this,e,t)}Z(qe,ze);N(qe.prototype,{equalsExact:function(){if(arguments.length===2&&(typeof arguments[1]==="number"&&arguments[0]instanceof ie)){let e=arguments[0],t=arguments[1];if(!this.isEquivalentClass(e)){return false}return ze.prototype.equalsExact.call(this,e,t)}else return ze.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){if(this.isClosed()){return Ye.FALSE}return 0},isClosed:function(){if(this.isEmpty()){return false}for(var e=0;e<this._geometries.length;e++){if(!this._geometries[e].isClosed()){return false}}return true},getTypeCode:function(){return ie.TYPECODE_MULTILINESTRING},getDimension:function(){return 1},reverse:function(){var e=this._geometries.length;var t=new Array(e).fill(null);for(var r=0;r<this._geometries.length;r++){t[e-1-r]=this._geometries[r].reverse()}return this.getFactory().createMultiLineString(t)},getBoundary:function(){return new Be(this).getBoundary()},getGeometryType:function(){return ie.TYPENAME_MULTILINESTRING},copy:function(){var e=new Array(this._geometries.length).fill(null);for(var t=0;t<e.length;t++){e[t]=this._geometries[t].copy()}return new qe(e,this._factory)},interfaces_:function(){return[$e]},getClass:function(){return qe}});qe.serialVersionUID=0x7155d2ab4afa8000;function Be(){this._geom=null;this._geomFact=null;this._bnRule=null;this._endpointMap=null;if(arguments.length===1){let e=arguments[0];Be.call(this,e,ae.MOD2_BOUNDARY_RULE)}else if(arguments.length===2){let e=arguments[0],t=arguments[1];this._geom=e;this._geomFact=e.getFactory();this._bnRule=t}}N(Be.prototype,{boundaryMultiLineString:function(e){if(this._geom.isEmpty()){return this.getEmptyMultiPoint()}var t=this.computeBoundaryCoordinates(e);if(t.length===1){return this._geomFact.createPoint(t[0])}return this._geomFact.createMultiPointFromCoords(t)},getBoundary:function(){if(this._geom instanceof ot)return this.boundaryLineString(this._geom);if(this._geom instanceof qe)return this.boundaryMultiLineString(this._geom);return this._geom.getBoundary()},boundaryLineString:function(e){if(this._geom.isEmpty()){return this.getEmptyMultiPoint()}if(e.isClosed()){var t=this._bnRule.isInBoundary(2);if(t){return e.getStartPoint()}else{return this._geomFact.createMultiPoint()}}return this._geomFact.createMultiPoint([e.getStartPoint(),e.getEndPoint()])},getEmptyMultiPoint:function(){return this._geomFact.createMultiPoint()},computeBoundaryCoordinates:function(e){var t=new ge;this._endpointMap=new Le;for(var r=0;r<e.getNumGeometries();r++){var i=e.getGeometryN(r);if(i.getNumPoints()===0)continue;this.addEndpoint(i.getCoordinateN(0));this.addEndpoint(i.getCoordinateN(i.getNumPoints()-1))}for(var n=this._endpointMap.entrySet().iterator();n.hasNext();){var a=n.next();var o=a.getValue();var s=o.count;if(this._bnRule.isInBoundary(s)){t.add(a.getKey())}}return we.toCoordinateArray(t)},addEndpoint:function(e){var t=this._endpointMap.get(e);if(t===null){t=new Xe;this._endpointMap.put(e,t)}t.count++},interfaces_:function(){return[]},getClass:function(){return Be}});Be.getBoundary=function(){if(arguments.length===1){let t=arguments[0];var e=new Be(t);return e.getBoundary()}else if(arguments.length===2){let t=arguments[0],r=arguments[1];var e=new Be(t,r);return e.getBoundary()}};function Xe(){this.count=null}N(Xe.prototype,{interfaces_:function(){return[]},getClass:function(){return Xe}});function Ke(){}N(Ke.prototype,{interfaces_:function(){return[]},getClass:function(){return Ke}});Ke.ofLine=function(e){var t=e.size();if(t<=1)return 0;var r=0;var i=new ee;e.getCoordinate(0,i);var n=i.x;var a=i.y;for(var o=1;o<t;o++){e.getCoordinate(o,i);var s=i.x;var l=i.y;var u=s-n;var c=l-a;r+=Math.sqrt(u*u+c*c);n=s;a=l}return r};function Ze(){}function Qe(){}function Je(){}function et(){}function tt(){}function rt(){}function it(){}N(it.prototype,{interfaces_:function(){return[]},getClass:function(){return it}});it.chars=function(e,t){var r=new Array(t).fill(null);for(var i=0;i<t;i++){r[i]=e}return new String(r)};it.getStackTrace=function(){if(arguments.length===1){let r=arguments[0];var e=new et;var t=new Ze(e);r.printStackTrace(t);return e.toString()}else if(arguments.length===2){let e=arguments[0],t=arguments[1];var r="";var i=new Qe(it.getStackTrace(e));var n=new rt(i);for(var a=0;a<t;a++){try{r+=n.readLine()+it.NEWLINE}catch(e){if(e instanceof tt){J.shouldNeverReachHere()}else throw e}finally{}}return r}};it.split=function(e,t){var r=t.length;var i=new ge;var n=""+e;var a=n.indexOf(t);while(a>=0){var o=n.substring(0,a);i.add(o);n=n.substring(a+r);a=n.indexOf(t)}if(n.length>0)i.add(n);var s=new Array(i.size()).fill(null);for(var l=0;l<s.length;l++){s[l]=i.get(l)}return s};it.toString=function(){if(arguments.length===1&&typeof arguments[0]==="number"){let e=arguments[0];return it.SIMPLE_ORDINATE_FORMAT.format(e)}};it.spaces=function(e){return it.chars(" ",e)};it.NEWLINE=be.getProperty("line.separator");it.SIMPLE_ORDINATE_FORMAT=new Je("0.#");function nt(e){this.str=e}nt.prototype.append=function(e){this.str+=e};nt.prototype.setCharAt=function(e,t){this.str=this.str.substr(0,e)+t+this.str.substr(e+1)};nt.prototype.toString=function(e){return this.str};function at(){}N(at.prototype,{interfaces_:function(){return[]},getClass:function(){return at}});at.copyCoord=function(e,t,r,i){var n=Math.min(e.getDimension(),r.getDimension());for(var a=0;a<n;a++){r.setOrdinate(i,a,e.getOrdinate(t,a))}};at.isRing=function(e){var t=e.size();if(t===0)return true;if(t<=3)return false;return e.getOrdinate(0,G.X)===e.getOrdinate(t-1,G.X)&&e.getOrdinate(0,G.Y)===e.getOrdinate(t-1,G.Y)};at.isEqual=function(e,t){var r=e.size();var i=t.size();if(r!==i)return false;var n=Math.min(e.getDimension(),t.getDimension());for(var a=0;a<r;a++){for(var o=0;o<n;o++){var s=e.getOrdinate(a,o);var l=t.getOrdinate(a,o);if(e.getOrdinate(a,o)===t.getOrdinate(a,o))continue;if(B.isNaN(s)&&B.isNaN(l))continue;return false}}return true};at.extend=function(e,t,r){var i=e.create(r,t.getDimension());var n=t.size();at.copy(t,0,i,0,n);if(n>0){for(var a=n;a<r;a++)at.copy(t,n-1,i,a,1)}return i};at.reverse=function(e){var t=e.size()-1;var r=Math.trunc(t/2);for(var i=0;i<=r;i++){at.swap(e,i,t-i)}};at.swap=function(e,t,r){if(t===r)return null;for(var i=0;i<e.getDimension();i++){var n=e.getOrdinate(t,i);e.setOrdinate(t,i,e.getOrdinate(r,i));e.setOrdinate(r,i,n)}};at.copy=function(e,t,r,i,n){for(var a=0;a<n;a++){at.copyCoord(e,t+a,r,i+a)}};at.toString=function(){if(arguments.length===1&&$(arguments[0],G)){let a=arguments[0];var e=a.size();if(e===0)return"()";var t=a.getDimension();var r=new nt;r.append("(");for(var i=0;i<e;i++){if(i>0)r.append(" ");for(var n=0;n<t;n++){if(n>0)r.append(",");r.append(it.toString(a.getOrdinate(i,n)))}}r.append(")");return r.toString()}};at.ensureValidRing=function(e,t){var r=t.size();if(r===0)return t;if(r<=3)return at.createClosedRing(e,t,4);var i=t.getOrdinate(0,G.X)===t.getOrdinate(r-1,G.X)&&t.getOrdinate(0,G.Y)===t.getOrdinate(r-1,G.Y);if(i)return t;return at.createClosedRing(e,t,r+1)};at.createClosedRing=function(e,t,r){var i=e.create(r,t.getDimension());var n=t.size();at.copy(t,0,i,0,n);for(var a=n;a<r;a++)at.copy(t,0,i,a,1);return i};function ot(){this._points=null;let e=arguments[0],t=arguments[1];ie.call(this,t);this.init(e)}Z(ot,ie);N(ot.prototype,{computeEnvelopeInternal:function(){if(this.isEmpty()){return new re}return this._points.expandEnvelope(new re)},isRing:function(){return this.isClosed()&&this.isSimple()},getCoordinates:function(){return this._points.toCoordinateArray()},equalsExact:function(){if(arguments.length===2&&(typeof arguments[1]==="number"&&arguments[0]instanceof ie)){let r=arguments[0],i=arguments[1];if(!this.isEquivalentClass(r)){return false}var e=r;if(this._points.size()!==e._points.size()){return false}for(var t=0;t<this._points.size();t++){if(!this.equal(this._points.getCoordinate(t),e._points.getCoordinate(t),i)){return false}}return true}else return ie.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var e=0;e<Math.trunc(this._points.size()/2);e++){var t=this._points.size()-1-e;if(!this._points.getCoordinate(e).equals(this._points.getCoordinate(t))){if(this._points.getCoordinate(e).compareTo(this._points.getCoordinate(t))>0){var r=this._points.copy();at.reverse(r);this._points=r}return null}}},getCoordinate:function(){if(this.isEmpty())return null;return this._points.getCoordinate(0)},getBoundaryDimension:function(){if(this.isClosed()){return Ye.FALSE}return 0},isClosed:function(){if(this.isEmpty()){return false}return this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},getEndPoint:function(){if(this.isEmpty()){return null}return this.getPointN(this.getNumPoints()-1)},getTypeCode:function(){return ie.TYPECODE_LINESTRING},getDimension:function(){return 1},getLength:function(){return Ke.ofLine(this._points)},getNumPoints:function(){return this._points.size()},reverse:function(){var e=this._points.copy();at.reverse(e);var t=this.getFactory().createLineString(e);return t},compareToSameClass:function(){if(arguments.length===1){let n=arguments[0];var e=n;var t=0;var r=0;while(t<this._points.size()&&r<e._points.size()){var i=this._points.getCoordinate(t).compareTo(e._points.getCoordinate(r));if(i!==0){return i}t++;r++}if(t<this._points.size()){return 1}if(r<e._points.size()){return-1}return 0}else if(arguments.length===2){let t=arguments[0],r=arguments[1];var e=t;return r.compare(this._points,e._points)}},apply:function(){if($(arguments[0],ne)){let t=arguments[0];for(var e=0;e<this._points.size();e++){t.filter(this._points.getCoordinate(e))}}else if($(arguments[0],Ve)){let t=arguments[0];if(this._points.size()===0)return null;for(var e=0;e<this._points.size();e++){t.filter(this._points,e);if(t.isDone())break}if(t.isGeometryChanged())this.geometryChanged()}else if($(arguments[0],We)){let e=arguments[0];e.filter(this)}else if($(arguments[0],Y)){let e=arguments[0];e.filter(this)}},getBoundary:function(){return new Be(this).getBoundary()},isEquivalentClass:function(e){return e instanceof ot},getCoordinateN:function(e){return this._points.getCoordinate(e)},getGeometryType:function(){return ie.TYPENAME_LINESTRING},copy:function(){return new ot(this._points.copy(),this._factory)},getCoordinateSequence:function(){return this._points},isEmpty:function(){return this._points.size()===0},init:function(e){if(e===null){e=this.getFactory().getCoordinateSequenceFactory().create([])}if(e.size()===1){throw new H("Invalid number of points in LineString (found "+e.size()+" - must be 0 or >= 2)")}this._points=e},isCoordinate:function(e){for(var t=0;t<this._points.size();t++){if(this._points.getCoordinate(t).equals(e)){return true}}return false},getStartPoint:function(){if(this.isEmpty()){return null}return this.getPointN(0)},getPointN:function(e){return this.getFactory().createPoint(this._points.getCoordinate(e))},interfaces_:function(){return[$e]},getClass:function(){return ot}});ot.serialVersionUID=0x2b2b51ba435c8e00;function st(){}N(st.prototype,{interfaces_:function(){return[]},getClass:function(){return st}});function lt(){this._coordinates=null;let e=arguments[0],t=arguments[1];ie.call(this,t);this.init(e)}Z(lt,ie);N(lt.prototype,{computeEnvelopeInternal:function(){if(this.isEmpty()){return new re}var e=new re;e.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0));return e},getCoordinates:function(){return this.isEmpty()?[]:[this.getCoordinate()]},equalsExact:function(){if(arguments.length===2&&(typeof arguments[1]==="number"&&arguments[0]instanceof ie)){let e=arguments[0],t=arguments[1];if(!this.isEquivalentClass(e)){return false}if(this.isEmpty()&&e.isEmpty()){return true}if(this.isEmpty()!==e.isEmpty()){return false}return this.equal(e.getCoordinate(),this.getCoordinate(),t)}else return ie.prototype.equalsExact.apply(this,arguments)},normalize:function(){},getCoordinate:function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null},getBoundaryDimension:function(){return Ye.FALSE},getTypeCode:function(){return ie.TYPECODE_POINT},getDimension:function(){return 0},getNumPoints:function(){return this.isEmpty()?0:1},reverse:function(){return this.copy()},getX:function(){if(this.getCoordinate()===null){throw new IllegalStateException("getX called on empty Point")}return this.getCoordinate().x},compareToSameClass:function(){if(arguments.length===1){let t=arguments[0];var e=t;return this.getCoordinate().compareTo(e.getCoordinate())}else if(arguments.length===2){let t=arguments[0],r=arguments[1];var e=t;return r.compare(this._coordinates,e._coordinates)}},apply:function(){if($(arguments[0],ne)){let e=arguments[0];if(this.isEmpty()){return null}e.filter(this.getCoordinate())}else if($(arguments[0],Ve)){let e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0);if(e.isGeometryChanged())this.geometryChanged()}else if($(arguments[0],We)){let e=arguments[0];e.filter(this)}else if($(arguments[0],Y)){let e=arguments[0];e.filter(this)}},getBoundary:function(){return this.getFactory().createGeometryCollection()},getGeometryType:function(){return ie.TYPENAME_POINT},copy:function(){return new lt(this._coordinates.copy(),this._factory)},getCoordinateSequence:function(){return this._coordinates},getY:function(){if(this.getCoordinate()===null){throw new IllegalStateException("getY called on empty Point")}return this.getCoordinate().y},isEmpty:function(){return this._coordinates.size()===0},init:function(e){if(e===null){e=this.getFactory().getCoordinateSequenceFactory().create([])}J.isTrue(e.size()<=1);this._coordinates=e},isSimple:function(){return true},interfaces_:function(){return[st]},getClass:function(){return lt}});lt.serialVersionUID=0x44077bad161cbc00;function ut(){}N(ut.prototype,{interfaces_:function(){return[]},getClass:function(){return ut}});ut.ofRing=function(){if(arguments[0]instanceof Array){let e=arguments[0];return Math.abs(ut.ofRingSigned(e))}else if($(arguments[0],G)){let e=arguments[0];return Math.abs(ut.ofRingSigned(e))}};ut.ofRingSigned=function(){if(arguments[0]instanceof Array){let o=arguments[0];if(o.length<3)return 0;var e=0;var t=o[0].x;for(var r=1;r<o.length-1;r++){var i=o[r].x-t;var n=o[r+1].y;var a=o[r-1].y;e+=i*(a-n)}return e/2}else if($(arguments[0],G)){let i=arguments[0];var o=i.size();if(o<3)return 0;var s=new ee;var l=new ee;var u=new ee;i.getCoordinate(0,l);i.getCoordinate(1,u);var t=l.x;u.x-=t;var e=0;for(var r=1;r<o-1;r++){s.y=l.y;l.x=u.x;l.y=u.y;i.getCoordinate(r+1,u);u.x-=t;e+=l.x*(s.y-u.y)}return e/2}};function ct(e){this.str=e}ct.prototype.append=function(e){this.str+=e};ct.prototype.setCharAt=function(e,t){this.str=this.str.substr(0,e)+t+this.str.substr(e+1)};ct.prototype.toString=function(e){return this.str};function ft(e){this.value=e}ft.prototype.intValue=function(){return this.value};ft.prototype.compareTo=function(e){if(this.value<e)return-1;if(this.value>e)return 1;return 0};ft.isNaN=(e=>Number.isNaN(e));function ht(){this._hi=0;this._lo=0;if(arguments.length===0){this.init(0)}else if(arguments.length===1){if(typeof arguments[0]==="number"){let e=arguments[0];this.init(e)}else if(arguments[0]instanceof ht){let e=arguments[0];this.init(e)}else if(typeof arguments[0]==="string"){let e=arguments[0];ht.call(this,ht.parse(e))}}else if(arguments.length===2){let e=arguments[0],t=arguments[1];this.init(e,t)}}N(ht.prototype,{le:function(e){return this._hi<e._hi||this._hi===e._hi&&this._lo<=e._lo},extractSignificantDigits:function(e,t){var r=this.abs();var i=ht.magnitude(r._hi);var n=ht.TEN.pow(i);r=r.divide(n);if(r.gt(ht.TEN)){r=r.divide(ht.TEN);i+=1}else if(r.lt(ht.ONE)){r=r.multiply(ht.TEN);i-=1}var a=i+1;var o=new ct;var s=ht.MAX_PRINT_DIGITS-1;for(var l=0;l<=s;l++){if(e&&l===a){o.append(".")}var u=Math.trunc(r._hi);if(u<0||u>9){}if(u<0){break}var c=false;var f=0;if(u>9){c=true;f="9"}else{f="0"+u}o.append(f);r=r.subtract(ht.valueOf(u)).multiply(ht.TEN);if(c)r.selfAdd(ht.TEN);var h=true;var d=ht.magnitude(r._hi);if(d<0&&Math.abs(d)>=s-l)h=false;if(!h)break}t[0]=i;return o.toString()},sqr:function(){return this.multiply(this)},doubleValue:function(){return this._hi+this._lo},subtract:function(){if(arguments[0]instanceof ht){let e=arguments[0];return this.add(e.negate())}else if(typeof arguments[0]==="number"){let e=arguments[0];return this.add(-e)}},equals:function(){if(arguments.length===1&&arguments[0]instanceof ht){let e=arguments[0];return this._hi===e._hi&&this._lo===e._lo}},isZero:function(){return this._hi===0&&this._lo===0},selfSubtract:function(){if(arguments[0]instanceof ht){let e=arguments[0];if(this.isNaN())return this;return this.selfAdd(-e._hi,-e._lo)}else if(typeof arguments[0]==="number"){let e=arguments[0];if(this.isNaN())return this;return this.selfAdd(-e,0)}},getSpecialNumberString:function(){if(this.isZero())return"0.0";if(this.isNaN())return"NaN ";return null},min:function(e){if(this.le(e)){return this}else{return e}},selfDivide:function(){if(arguments.length===1){if(arguments[0]instanceof ht){let e=arguments[0];return this.selfDivide(e._hi,e._lo)}else if(typeof arguments[0]==="number"){let e=arguments[0];return this.selfDivide(e,0)}}else if(arguments.length===2){let l=arguments[0],u=arguments[1];var e=null,t=null,r=null,i=null,n=null,a=null,o=null,s=null;n=this._hi/l;a=ht.SPLIT*n;e=a-n;s=ht.SPLIT*l;e=a-e;t=n-e;r=s-l;o=n*l;r=s-r;i=l-r;s=e*r-o+e*i+t*r+t*i;a=(this._hi-o-s+this._lo-n*u)/l;s=n+a;this._hi=s;this._lo=n-s+a;return this}},dump:function(){return"DD<"+this._hi+", "+this._lo+">"},divide:function(){if(arguments[0]instanceof ht){let c=arguments[0];var e=null,t=null,r=null,i=null,n=null,a=null,o=null,s=null;n=this._hi/c._hi;a=ht.SPLIT*n;e=a-n;s=ht.SPLIT*c._hi;e=a-e;t=n-e;r=s-c._hi;o=n*c._hi;r=s-r;i=c._hi-r;s=e*r-o+e*i+t*r+t*i;a=(this._hi-o-s+this._lo-n*c._lo)/c._hi;s=n+a;var l=s;var u=n-s+a;return new ht(l,u)}else if(typeof arguments[0]==="number"){let e=arguments[0];if(B.isNaN(e))return ht.createNaN();return ht.copy(this).selfDivide(e,0)}},ge:function(e){return this._hi>e._hi||this._hi===e._hi&&this._lo>=e._lo},pow:function(e){if(e===0)return ht.valueOf(1);var t=new ht(this);var r=ht.valueOf(1);var i=Math.abs(e);if(i>1){while(i>0){if(i%2===1){r.selfMultiply(t)}i/=2;if(i>0)t=t.sqr()}}else{r=t}if(e<0)return r.reciprocal();return r},ceil:function(){if(this.isNaN())return ht.NaN;var e=Math.ceil(this._hi);var t=0;if(e===this._hi){t=Math.ceil(this._lo)}return new ht(e,t)},compareTo:function(e){var t=e;if(this._hi<t._hi)return-1;if(this._hi>t._hi)return 1;if(this._lo<t._lo)return-1;if(this._lo>t._lo)return 1;return 0},rint:function(){if(this.isNaN())return this;var e=this.add(.5);return e.floor()},setValue:function(){if(arguments[0]instanceof ht){let e=arguments[0];this.init(e);return this}else if(typeof arguments[0]==="number"){let e=arguments[0];this.init(e);return this}},max:function(e){if(this.ge(e)){return this}else{return e}},sqrt:function(){if(this.isZero())return ht.valueOf(0);if(this.isNegative()){return ht.NaN}var e=1/Math.sqrt(this._hi);var t=this._hi*e;var r=ht.valueOf(t);var i=this.subtract(r.sqr());var n=i._hi*(e*.5);return r.add(n)},selfAdd:function(){if(arguments.length===1){if(arguments[0]instanceof ht){let e=arguments[0];return this.selfAdd(e._hi,e._lo)}else if(typeof arguments[0]==="number"){let o=arguments[0];var e=null,t=null,r=null,i=null,n=null,a=null;r=this._hi+o;n=r-this._hi;i=r-n;i=o-n+(this._hi-i);a=i+this._lo;e=r+a;t=a+(r-e);this._hi=e+t;this._lo=t+(e-this._hi);return this}}else if(arguments.length===2){let c=arguments[0],f=arguments[1];var e=null,t=null,o=null,s=null,r=null,i=null,n=null,a=null;r=this._hi+c;o=this._lo+f;n=r-this._hi;a=o-this._lo;i=r-n;s=o-a;i=c-n+(this._hi-i);s=f-a+(this._lo-s);n=i+o;e=r+n;t=n+(r-e);n=s+t;var l=e+n;var u=n+(e-l);this._hi=l;this._lo=u;return this}},selfMultiply:function(){if(arguments.length===1){if(arguments[0]instanceof ht){let e=arguments[0];return this.selfMultiply(e._hi,e._lo)}else if(typeof arguments[0]==="number"){let e=arguments[0];return this.selfMultiply(e,0)}}else if(arguments.length===2){let l=arguments[0],u=arguments[1];var e=null,t=null,r=null,i=null,n=null,a=null;n=ht.SPLIT*this._hi;e=n-this._hi;a=ht.SPLIT*l;e=n-e;t=this._hi-e;r=a-l;n=this._hi*l;r=a-r;i=l-r;a=e*r-n+e*i+t*r+t*i+(this._hi*u+this._lo*l);var o=n+a;e=n-o;var s=a+e;this._hi=o;this._lo=s;return this}},selfSqr:function(){return this.selfMultiply(this)},floor:function(){if(this.isNaN())return ht.NaN;var e=Math.floor(this._hi);var t=0;if(e===this._hi){t=Math.floor(this._lo)}return new ht(e,t)},negate:function(){if(this.isNaN())return this;return new ht(-this._hi,-this._lo)},clone:function(){try{return null}catch(e){if(e instanceof CloneNotSupportedException){return null}else throw e}finally{}},multiply:function(){if(arguments[0]instanceof ht){let e=arguments[0];if(e.isNaN())return ht.createNaN();return ht.copy(this).selfMultiply(e)}else if(typeof arguments[0]==="number"){let e=arguments[0];if(B.isNaN(e))return ht.createNaN();return ht.copy(this).selfMultiply(e,0)}},isNaN:function(){return B.isNaN(this._hi)},intValue:function(){return Math.trunc(this._hi)},toString:function(){var e=ht.magnitude(this._hi);if(e>=-3&&e<=20)return this.toStandardNotation();return this.toSciNotation()},toStandardNotation:function(){var e=this.getSpecialNumberString();if(e!==null)return e;var t=new Array(1).fill(null);var r=this.extractSignificantDigits(true,t);var i=t[0]+1;var n=r;if(r.charAt(0)==="."){n="0"+r}else if(i<0){n="0."+ht.stringOfChar("0",-i)+r}else if(r.indexOf(".")===-1){var a=i-r.length;var o=ht.stringOfChar("0",a);n=r+o+".0"}if(this.isNegative())return"-"+n;return n},reciprocal:function(){var e=null,t=null,r=null,i=null,n=null,a=null,o=null,s=null;n=1/this._hi;a=ht.SPLIT*n;e=a-n;s=ht.SPLIT*this._hi;e=a-e;t=n-e;r=s-this._hi;o=n*this._hi;r=s-r;i=this._hi-r;s=e*r-o+e*i+t*r+t*i;a=(1-o-s-n*this._lo)/this._hi;var l=n+a;var u=n-l+a;return new ht(l,u)},toSciNotation:function(){if(this.isZero())return ht.SCI_NOT_ZERO;var e=this.getSpecialNumberString();if(e!==null)return e;var t=new Array(1).fill(null);var r=this.extractSignificantDigits(false,t);var i=ht.SCI_NOT_EXPONENT_CHAR+t[0];if(r.charAt(0)==="0"){throw new IllegalStateException("Found leading zero: "+r)}var n="";if(r.length>1)n=r.substring(1);var a=r.charAt(0)+"."+n;if(this.isNegative())return"-"+a+i;return a+i},abs:function(){if(this.isNaN())return ht.NaN;if(this.isNegative())return this.negate();return new ht(this)},isPositive:function(){return this._hi>0||this._hi===0&&this._lo>0},lt:function(e){return this._hi<e._hi||this._hi===e._hi&&this._lo<e._lo},add:function(){if(arguments[0]instanceof ht){let e=arguments[0];return ht.copy(this).selfAdd(e)}else if(typeof arguments[0]==="number"){let e=arguments[0];return ht.copy(this).selfAdd(e)}},init:function(){if(arguments.length===1){if(typeof arguments[0]==="number"){let e=arguments[0];this._hi=e;this._lo=0}else if(arguments[0]instanceof ht){let e=arguments[0];this._hi=e._hi;this._lo=e._lo}}else if(arguments.length===2){let e=arguments[0],t=arguments[1];this._hi=e;this._lo=t}},gt:function(e){return this._hi>e._hi||this._hi===e._hi&&this._lo>e._lo},isNegative:function(){return this._hi<0||this._hi===0&&this._lo<0},trunc:function(){if(this.isNaN())return ht.NaN;if(this.isPositive())return this.floor();else return this.ceil()},signum:function(){if(this._hi>0)return 1;if(this._hi<0)return-1;if(this._lo>0)return 1;if(this._lo<0)return-1;return 0},interfaces_:function(){return[V,W,F]},getClass:function(){return ht}});ht.sqr=function(e){return ht.valueOf(e).selfMultiply(e)};ht.valueOf=function(){if(typeof arguments[0]==="string"){let e=arguments[0];return ht.parse(e)}else if(typeof arguments[0]==="number"){let e=arguments[0];return new ht(e)}};ht.sqrt=function(e){return ht.valueOf(e).sqrt()};ht.parse=function(e){var t=0;var r=e.length;while(He.isWhitespace(e.charAt(t)))t++;var i=false;if(t<r){var n=e.charAt(t);if(n==="-"||n==="+"){t++;if(n==="-")i=true}}var a=new ht;var o=0;var s=0;var l=0;while(true){if(t>=r)break;var u=e.charAt(t);t++;if(He.isDigit(u)){var c=u-"0";a.selfMultiply(ht.TEN);a.selfAdd(c);o++;continue}if(u==="."){s=o;continue}if(u==="e"||u==="E"){var f=e.substring(t);try{l=ft.parseInt(f)}catch(t){if(t instanceof NumberFormatException){throw new NumberFormatException("Invalid exponent "+f+" in string "+e)}else throw t}finally{}break}throw new NumberFormatException("Unexpected character '"+u+"' at position "+t+" in string "+e)}var h=a;var d=o-s-l;if(d===0){h=a}else if(d>0){var p=ht.TEN.pow(d);h=a.divide(p)}else if(d<0){var p=ht.TEN.pow(-d);h=a.multiply(p)}if(i){return h.negate()}return h};ht.createNaN=function(){return new ht(B.NaN,B.NaN)};ht.copy=function(e){return new ht(e)};ht.magnitude=function(e){var t=Math.abs(e);var r=Math.log(t)/Math.log(10);var i=Math.trunc(Math.floor(r));var n=Math.pow(10,i);if(n*10<=t)i+=1;return i};ht.stringOfChar=function(e,t){var r=new ct;for(var i=0;i<t;i++){r.append(e)}return r.toString()};ht.PI=new ht(3.141592653589793,1.2246467991473532e-16);ht.TWO_PI=new ht(6.283185307179586,2.4492935982947064e-16);ht.PI_2=new ht(1.5707963267948966,6.123233995736766e-17);ht.E=new ht(2.718281828459045,1.4456468917292502e-16);ht.NaN=new ht(B.NaN,B.NaN);ht.EPS=1.23259516440783e-32;ht.SPLIT=134217729;ht.MAX_PRINT_DIGITS=32;ht.TEN=ht.valueOf(10);ht.ONE=ht.valueOf(1);ht.SCI_NOT_EXPONENT_CHAR="E";ht.SCI_NOT_ZERO="0.0E0";function dt(){}N(dt.prototype,{interfaces_:function(){return[]},getClass:function(){return dt}});dt.orientationIndex=function(e,t,r){var i=dt.orientationIndexFilter(e,t,r);if(i<=1)return i;var n=ht.valueOf(t.x).selfAdd(-e.x);var a=ht.valueOf(t.y).selfAdd(-e.y);var o=ht.valueOf(r.x).selfAdd(-t.x);var s=ht.valueOf(r.y).selfAdd(-t.y);return n.selfMultiply(s).selfSubtract(a.selfMultiply(o)).signum()};dt.signOfDet2x2=function(){if(arguments[0]instanceof ht){let t=arguments[0],r=arguments[1],i=arguments[2],n=arguments[3];var e=t.multiply(n).selfSubtract(r.multiply(i));return e.signum()}else if(typeof arguments[0]==="number"){let a=arguments[0],o=arguments[1],s=arguments[2],l=arguments[3];var t=ht.valueOf(a);var r=ht.valueOf(o);var i=ht.valueOf(s);var n=ht.valueOf(l);var e=t.multiply(n).selfSubtract(r.multiply(i));return e.signum()}};dt.intersection=function(e,t,r,i){var n=ht.valueOf(i.y).selfSubtract(r.y).selfMultiply(ht.valueOf(t.x).selfSubtract(e.x));var a=ht.valueOf(i.x).selfSubtract(r.x).selfMultiply(ht.valueOf(t.y).selfSubtract(e.y));var o=n.subtract(a);var s=ht.valueOf(i.x).selfSubtract(r.x).selfMultiply(ht.valueOf(e.y).selfSubtract(r.y));var l=ht.valueOf(i.y).selfSubtract(r.y).selfMultiply(ht.valueOf(e.x).selfSubtract(r.x));var u=s.subtract(l);var c=u.selfDivide(o).doubleValue();var f=ht.valueOf(e.x).selfAdd(ht.valueOf(t.x).selfSubtract(e.x).selfMultiply(c)).doubleValue();var h=ht.valueOf(t.x).selfSubtract(e.x).selfMultiply(ht.valueOf(e.y).selfSubtract(r.y));var d=ht.valueOf(t.y).selfSubtract(e.y).selfMultiply(ht.valueOf(e.x).selfSubtract(r.x));var p=h.subtract(d);var v=p.selfDivide(o).doubleValue();var g=ht.valueOf(r.y).selfAdd(ht.valueOf(i.y).selfSubtract(r.y).selfMultiply(v)).doubleValue();return new ee(f,g)};dt.orientationIndexFilter=function(e,t,r){var i=null;var n=(e.x-r.x)*(t.y-r.y);var a=(e.y-r.y)*(t.x-r.x);var o=n-a;if(n>0){if(a<=0){return dt.signum(o)}else{i=n+a}}else if(n<0){if(a>=0){return dt.signum(o)}else{i=-n-a}}else{return dt.signum(o)}var s=dt.DP_SAFE_EPSILON*i;if(o>=s||-o>=s){return dt.signum(o)}return 2};dt.signum=function(e){if(e>0)return 1;if(e<0)return-1;return 0};dt.DP_SAFE_EPSILON=1e-15;function pt(){}N(pt.prototype,{interfaces_:function(){return[]},getClass:function(){return pt}});pt.index=function(e,t,r){return dt.orientationIndex(e,t,r)};pt.isCCW=function(e){var t=e.length-1;if(t<3)throw new H("Ring has fewer than 4 points, so orientation cannot be determined");var r=e[0];var i=0;for(var n=1;n<=t;n++){var a=e[n];if(a.y>r.y){r=a;i=n}}var o=i;do{o=o-1;if(o<0)o=t}while(e[o].equals2D(r)&&o!==i);var s=i;do{s=(s+1)%t}while(e[s].equals2D(r)&&s!==i);var l=e[o];var u=e[s];if(l.equals2D(r)||u.equals2D(r)||l.equals2D(u))return false;var c=pt.index(l,r,u);var f=null;if(c===0){f=l.x>u.x}else{f=c>0}return f};pt.CLOCKWISE=-1;pt.RIGHT=pt.CLOCKWISE;pt.COUNTERCLOCKWISE=1;pt.LEFT=pt.COUNTERCLOCKWISE;pt.COLLINEAR=0;pt.STRAIGHT=pt.COLLINEAR;function vt(){}N(vt.prototype,{interfaces_:function(){return[]},getClass:function(){return vt}});function gt(){this._shell=null;this._holes=null;let e=arguments[0],t=arguments[1],r=arguments[2];ie.call(this,r);if(e===null){e=this.getFactory().createLinearRing()}if(t===null){t=[]}if(ie.hasNullElements(t)){throw new H("holes must not contain null elements")}if(e.isEmpty()&&ie.hasNonEmptyElements(t)){throw new H("shell is empty but holes are not")}this._shell=e;this._holes=t}Z(gt,ie);N(gt.prototype,{computeEnvelopeInternal:function(){return this._shell.getEnvelopeInternal()},getCoordinates:function(){if(this.isEmpty()){return[]}var e=new Array(this.getNumPoints()).fill(null);var t=-1;var r=this._shell.getCoordinates();for(var i=0;i<r.length;i++){t++;e[t]=r[i]}for(var n=0;n<this._holes.length;n++){var a=this._holes[n].getCoordinates();for(var o=0;o<a.length;o++){t++;e[t]=a[o]}}return e},getArea:function(){var e=0;e+=ut.ofRing(this._shell.getCoordinateSequence());for(var t=0;t<this._holes.length;t++){e-=ut.ofRing(this._holes[t].getCoordinateSequence())}return e},isRectangle:function(){if(this.getNumInteriorRing()!==0)return false;if(this._shell===null)return false;if(this._shell.getNumPoints()!==5)return false;var e=this._shell.getCoordinateSequence();var t=this.getEnvelopeInternal();for(var r=0;r<5;r++){var i=e.getX(r);if(!(i===t.getMinX()||i===t.getMaxX()))return false;var n=e.getY(r);if(!(n===t.getMinY()||n===t.getMaxY()))return false}var a=e.getX(0);var o=e.getY(0);for(var r=1;r<=4;r++){var i=e.getX(r);var n=e.getY(r);var s=i!==a;var l=n!==o;if(s===l)return false;a=i;o=n}return true},equalsExact:function(){if(arguments.length===2&&(typeof arguments[1]==="number"&&arguments[0]instanceof ie)){let n=arguments[0],a=arguments[1];if(!this.isEquivalentClass(n)){return false}var e=n;var t=this._shell;var r=e._shell;if(!t.equalsExact(r,a)){return false}if(this._holes.length!==e._holes.length){return false}for(var i=0;i<this._holes.length;i++){if(!this._holes[i].equalsExact(e._holes[i],a)){return false}}return true}else return ie.prototype.equalsExact.apply(this,arguments)},normalize:function(){if(arguments.length===0){this.normalize(this._shell,true);for(var e=0;e<this._holes.length;e++){this.normalize(this._holes[e],false)}Ue.sort(this._holes)}else if(arguments.length===2){let e=arguments[0],i=arguments[1];if(e.isEmpty()){return null}var t=new Array(e.getCoordinates().length-1).fill(null);be.arraycopy(e.getCoordinates(),0,t,0,t.length);var r=we.minCoordinate(e.getCoordinates());we.scroll(t,r);be.arraycopy(t,0,e.getCoordinates(),0,t.length);e.getCoordinates()[t.length]=t[0];if(pt.isCCW(e.getCoordinates())===i){we.reverse(e.getCoordinates())}}},getCoordinate:function(){return this._shell.getCoordinate()},getNumInteriorRing:function(){return this._holes.length},getBoundaryDimension:function(){return 1},getTypeCode:function(){return ie.TYPECODE_POLYGON},getDimension:function(){return 2},getLength:function(){var e=0;e+=this._shell.getLength();for(var t=0;t<this._holes.length;t++){e+=this._holes[t].getLength()}return e},getNumPoints:function(){var e=this._shell.getNumPoints();for(var t=0;t<this._holes.length;t++){e+=this._holes[t].getNumPoints()}return e},reverse:function(){var e=this.copy();e._shell=this._shell.copy().reverse();e._holes=new Array(this._holes.length).fill(null);for(var t=0;t<this._holes.length;t++){e._holes[t]=this._holes[t].copy().reverse()}return e},convexHull:function(){return this.getExteriorRing().convexHull()},compareToSameClass:function(){if(arguments.length===1){let r=arguments[0];var e=this._shell;var t=r._shell;return e.compareToSameClass(t)}else if(arguments.length===2){let c=arguments[0],f=arguments[1];var r=c;var e=this._shell;var t=r._shell;var i=e.compareToSameClass(t,f);if(i!==0)return i;var n=this.getNumInteriorRing();var a=r.getNumInteriorRing();var o=0;while(o<n&&o<a){var s=this.getInteriorRingN(o);var l=r.getInteriorRingN(o);var u=s.compareToSameClass(l,f);if(u!==0)return u;o++}if(o<n)return 1;if(o<a)return-1;return 0}},apply:function(){if($(arguments[0],ne)){let t=arguments[0];this._shell.apply(t);for(var e=0;e<this._holes.length;e++){this._holes[e].apply(t)}}else if($(arguments[0],Ve)){let t=arguments[0];this._shell.apply(t);if(!t.isDone()){for(var e=0;e<this._holes.length;e++){this._holes[e].apply(t);if(t.isDone())break}}if(t.isGeometryChanged())this.geometryChanged()}else if($(arguments[0],We)){let e=arguments[0];e.filter(this)}else if($(arguments[0],Y)){let t=arguments[0];t.filter(this);this._shell.apply(t);for(var e=0;e<this._holes.length;e++){this._holes[e].apply(t)}}},getBoundary:function(){if(this.isEmpty()){return this.getFactory().createMultiLineString()}var e=new Array(this._holes.length+1).fill(null);e[0]=this._shell;for(var t=0;t<this._holes.length;t++){e[t+1]=this._holes[t]}if(e.length<=1)return this.getFactory().createLinearRing(e[0].getCoordinateSequence());return this.getFactory().createMultiLineString(e)},getGeometryType:function(){return ie.TYPENAME_POLYGON},copy:function(){var e=this._shell.copy();var t=new Array(this._holes.length).fill(null);for(var r=0;r<this._holes.length;r++){t[r]=this._holes[r].copy()}return new gt(e,t,this._factory)},getExteriorRing:function(){return this._shell},isEmpty:function(){return this._shell.isEmpty()},getInteriorRingN:function(e){return this._holes[e]},interfaces_:function(){return[vt]},getClass:function(){return gt}});gt.serialVersionUID=-0x307ffefd8dc97200;function mt(){let e=arguments[0],t=arguments[1];ze.call(this,e,t)}Z(mt,ze);N(mt.prototype,{isValid:function(){return true},equalsExact:function(){if(arguments.length===2&&(typeof arguments[1]==="number"&&arguments[0]instanceof ie)){let e=arguments[0],t=arguments[1];if(!this.isEquivalentClass(e)){return false}return ze.prototype.equalsExact.call(this,e,t)}else return ze.prototype.equalsExact.apply(this,arguments)},getCoordinate:function(){if(arguments.length===1&&Number.isInteger(arguments[0])){let e=arguments[0];return this._geometries[e].getCoordinate()}else return ze.prototype.getCoordinate.apply(this,arguments)},getBoundaryDimension:function(){return Ye.FALSE},getTypeCode:function(){return ie.TYPECODE_MULTIPOINT},getDimension:function(){return 0},getBoundary:function(){return this.getFactory().createGeometryCollection()},getGeometryType:function(){return ie.TYPENAME_MULTIPOINT},copy:function(){var e=new Array(this._geometries.length).fill(null);for(var t=0;t<e.length;t++){e[t]=this._geometries[t].copy()}return new mt(e,this._factory)},interfaces_:function(){return[st]},getClass:function(){return mt}});mt.serialVersionUID=-0x6fb1ed4162e0fc00;function yt(){if(arguments[0]instanceof Array&&arguments[1]instanceof Xt){let e=arguments[0],t=arguments[1];yt.call(this,t.getCoordinateSequenceFactory().create(e),t)}else if($(arguments[0],G)&&arguments[1]instanceof Xt){let e=arguments[0],t=arguments[1];ot.call(this,e,t);this.validateConstruction()}}Z(yt,ot);N(yt.prototype,{getBoundaryDimension:function(){return Ye.FALSE},isClosed:function(){if(this.isEmpty()){return true}return ot.prototype.isClosed.call(this)},getTypeCode:function(){return ie.TYPECODE_LINEARRING},reverse:function(){var e=this._points.copy();at.reverse(e);var t=this.getFactory().createLinearRing(e);return t},validateConstruction:function(){if(!this.isEmpty()&&!ot.prototype.isClosed.call(this)){throw new H("Points of LinearRing do not form a closed linestring")}if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<yt.MINIMUM_VALID_SIZE){throw new H("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},getGeometryType:function(){return ie.TYPENAME_LINEARRING},copy:function(){return new yt(this._points.copy(),this._factory)},interfaces_:function(){return[]},getClass:function(){return yt}});yt.MINIMUM_VALID_SIZE=4;yt.serialVersionUID=-0x3b229e262367a600;function _t(){let e=arguments[0],t=arguments[1];ze.call(this,e,t)}Z(_t,ze);N(_t.prototype,{equalsExact:function(){if(arguments.length===2&&(typeof arguments[1]==="number"&&arguments[0]instanceof ie)){let e=arguments[0],t=arguments[1];if(!this.isEquivalentClass(e)){return false}return ze.prototype.equalsExact.call(this,e,t)}else return ze.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return 1},getTypeCode:function(){return ie.TYPECODE_MULTIPOLYGON},getDimension:function(){return 2},reverse:function(){var e=this._geometries.length;var t=new Array(e).fill(null);for(var r=0;r<this._geometries.length;r++){t[r]=this._geometries[r].reverse()}return this.getFactory().createMultiPolygon(t)},getBoundary:function(){if(this.isEmpty()){return this.getFactory().createMultiLineString()}var e=new ge;for(var t=0;t<this._geometries.length;t++){var r=this._geometries[t];var i=r.getBoundary();for(var n=0;n<i.getNumGeometries();n++){e.add(i.getGeometryN(n))}}var a=new Array(e.size()).fill(null);return this.getFactory().createMultiLineString(e.toArray(a))},getGeometryType:function(){return ie.TYPENAME_MULTIPOLYGON},copy:function(){var e=new Array(this._geometries.length).fill(null);for(var t=0;t<e.length;t++){e[t]=this._geometries[t].copy()}return new _t(e,this._factory)},interfaces_:function(){return[vt]},getClass:function(){return _t}});_t.serialVersionUID=-0x7a5aa1369171980;function bt(){this._factory=null;this._isUserDataCopied=false;if(arguments.length===0){}else if(arguments.length===1){let e=arguments[0];this._factory=e}}N(bt.prototype,{setCopyUserData:function(e){this._isUserDataCopied=e},edit:function(e,t){if(e===null)return null;var r=this.editInternal(e,t);if(this._isUserDataCopied){r.setUserData(e.getUserData())}return r},editInternal:function(e,t){if(this._factory===null)this._factory=e.getFactory();if(e instanceof ze){return this.editGeometryCollection(e,t)}if(e instanceof gt){return this.editPolygon(e,t)}if(e instanceof lt){return t.edit(e,this._factory)}if(e instanceof ot){return t.edit(e,this._factory)}J.shouldNeverReachHere("Unsupported Geometry class: "+e.getClass().getName());return null},editGeometryCollection:function(e,t){var r=t.edit(e,this._factory);var i=new ge;for(var n=0;n<r.getNumGeometries();n++){var a=this.edit(r.getGeometryN(n),t);if(a===null||a.isEmpty()){continue}i.add(a)}if(r.getClass()===mt){return this._factory.createMultiPoint(i.toArray([]))}if(r.getClass()===qe){return this._factory.createMultiLineString(i.toArray([]))}if(r.getClass()===_t){return this._factory.createMultiPolygon(i.toArray([]))}return this._factory.createGeometryCollection(i.toArray([]))},editPolygon:function(e,t){var r=t.edit(e,this._factory);if(r===null)r=this._factory.createPolygon();if(r.isEmpty()){return r}var i=this.edit(r.getExteriorRing(),t);if(i===null||i.isEmpty()){return this._factory.createPolygon()}var n=new ge;for(var a=0;a<r.getNumInteriorRing();a++){var o=this.edit(r.getInteriorRingN(a),t);if(o===null||o.isEmpty()){continue}n.add(o)}return this._factory.createPolygon(i,n.toArray([]))},interfaces_:function(){return[]},getClass:function(){return bt}});function wt(){}bt.GeometryEditorOperation=wt;function St(){}N(St.prototype,{edit:function(e,t){return e},interfaces_:function(){return[wt]},getClass:function(){return St}});function Ct(){}N(Ct.prototype,{edit:function(e,t){var r=this.edit(e.getCoordinates(),e);if(e instanceof yt){if(r===null)return t.createLinearRing();else return t.createLinearRing(r)}if(e instanceof ot){if(r===null)return t.createLineString();else return t.createLineString(r)}if(e instanceof lt){if(r===null||r.length===0)return t.createPoint();else return t.createPoint(r[0])}return e},interfaces_:function(){return[wt]},getClass:function(){return Ct}});function xt(){}N(xt.prototype,{edit:function(e,t){if(e instanceof yt){return t.createLinearRing(this.edit(e.getCoordinateSequence(),e))}if(e instanceof ot){return t.createLineString(this.edit(e.getCoordinateSequence(),e))}if(e instanceof lt){return t.createPoint(this.edit(e.getCoordinateSequence(),e))}return e},interfaces_:function(){return[wt]},getClass:function(){return xt}});bt.NoOpGeometryOperation=St;bt.CoordinateOperation=Ct;bt.CoordinateSequenceOperation=xt;function Ot(){this._dimension=3;this._coordinates=null;if(arguments.length===1){if(arguments[0]instanceof Array){let e=arguments[0];Ot.call(this,e,3)}else if(Number.isInteger(arguments[0])){let t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++){this._coordinates[e]=new ee}}else if($(arguments[0],G)){let t=arguments[0];if(t===null){this._coordinates=new Array(0).fill(null);return null}this._dimension=t.getDimension();this._coordinates=new Array(t.size()).fill(null);for(var e=0;e<this._coordinates.length;e++){this._coordinates[e]=t.getCoordinateCopy(e)}}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){let e=arguments[0],t=arguments[1];this._coordinates=e;this._dimension=t;if(e===null)this._coordinates=new Array(0).fill(null)}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){let t=arguments[0],r=arguments[1];this._coordinates=new Array(t).fill(null);this._dimension=r;for(var e=0;e<t;e++){this._coordinates[e]=new ee}}}}N(Ot.prototype,{setOrdinate:function(e,t,r){switch(t){case G.X:this._coordinates[e].x=r;break;case G.Y:this._coordinates[e].y=r;break;case G.Z:this._coordinates[e].z=r;break;default:throw new H("invalid ordinateIndex")}},size:function(){return this._coordinates.length},getOrdinate:function(e,t){switch(t){case G.X:return this._coordinates[e].x;case G.Y:return this._coordinates[e].y;case G.Z:return this._coordinates[e].z}return B.NaN},getCoordinate:function(){if(arguments.length===1){let e=arguments[0];return this._coordinates[e]}else if(arguments.length===2){let e=arguments[0],t=arguments[1];t.x=this._coordinates[e].x;t.y=this._coordinates[e].y;t.z=this._coordinates[e].z}},getCoordinateCopy:function(e){return new ee(this._coordinates[e])},getDimension:function(){return this._dimension},getX:function(e){return this._coordinates[e].x},expandEnvelope:function(e){for(var t=0;t<this._coordinates.length;t++){e.expandToInclude(this._coordinates[t])}return e},copy:function(){var e=new Array(this.size()).fill(null);for(var t=0;t<this._coordinates.length;t++){e[t]=this._coordinates[t].copy()}return new Ot(e,this._dimension)},toString:function(){if(this._coordinates.length>0){var e=new nt(17*this._coordinates.length);e.append("(");e.append(this._coordinates[0]);for(var t=1;t<this._coordinates.length;t++){e.append(", ");e.append(this._coordinates[t])}e.append(")");return e.toString()}else{return"()"}},getY:function(e){return this._coordinates[e].y},toCoordinateArray:function(){return this._coordinates},interfaces_:function(){return[G,V]},getClass:function(){return Ot}});Ot.serialVersionUID=-0xcb44a778db18e00;function Tt(){}N(Tt.prototype,{readResolve:function(){return Tt.instance()},create:function(){if(arguments.length===1){if(arguments[0]instanceof Array){let e=arguments[0];return new Ot(e)}else if($(arguments[0],G)){let e=arguments[0];return new Ot(e)}}else if(arguments.length===2){let e=arguments[0],t=arguments[1];if(t>3)t=3;if(t<2)return new Ot(e);return new Ot(e,t)}},interfaces_:function(){return[U,V]},getClass:function(){return Tt}});Tt.instance=function(){return Tt.instanceObject};Tt.serialVersionUID=-0x38e49fa6cf6f2e00;Tt.instanceObject=new Tt;var Et;var Mt=Object.defineProperty;function jt(e,t){return e===t||e!==e&&t!==t}var At=Pt({delete:It,has:Lt,get:Dt,set:$t,keys:Ft,values:Gt,entries:Ut,forEach:Wt,clear:Nt});function Pt(e,t){function r(e){if(!this||this.constructor!==r)return new r(e);this._keys=[];this._values=[];this._itp=[];this.objectOnly=t;if(e)kt.call(this,e)}if(!t){Mt(e,"size",{get:Yt})}e.constructor=r;r.prototype=e;return r}function kt(e){if(this.add)e.forEach(this.add,this);else e.forEach(function(e){this.set(e[0],e[1])},this)}function It(e){if(this.has(e)){this._keys.splice(Et,1);this._values.splice(Et,1);this._itp.forEach(function(e){if(Et<e[0])e[0]--})}return Et>-1}function Dt(e){return this.has(e)?this._values[Et]:undefined}function Rt(e,t){if(this.objectOnly&&t!==Object(t))throw new TypeError("Invalid value used as weak collection key");if(t!==t||t===0)for(Et=e.length;Et--&&!jt(e[Et],t);){}else Et=e.indexOf(t);return Et>-1}function Lt(e){return Rt.call(this,this._keys,e)}function $t(e,t){this.has(e)?this._values[Et]=t:this._values[this._keys.push(e)-1]=t;return this}function Nt(){(this._keys||0).length=this._values.length=0}function Ft(){return Ht(this._itp,this._keys)}function Gt(){return Ht(this._itp,this._values)}function Ut(){return Ht(this._itp,this._keys,this._values)}function Ht(e,t,r){var i=[0];var n=false;e.push(i);return{next:function(){var a;var o=i[0];if(!n&&o<t.length){a=r?[t[o],r[o]]:t[o];i[0]++}else{n=true;e.splice(e.indexOf(i),1)}return{done:n,value:a}}}}function Yt(){return this._values.length}function Wt(e,t){var r=this.entries();for(;;){var i=r.next();if(i.done)break;e.call(t,i.value[1],i.value[0],this)}}let Vt=typeof Map==="undefined"||!Map.prototype.values?At:Map;function zt(){this.map_=new Vt}zt.prototype=new xe;zt.prototype.get=function(e){return this.map_.get(e)||null};zt.prototype.put=function(e,t){this.map_.set(e,t);return t};zt.prototype.values=function(){const e=new ge;const t=this.map_.values();let r=t.next();while(!r.done){e.add(r.value);r=t.next()}return e};zt.prototype.entrySet=function(){const e=new Ee;this.map_.entries().forEach(t=>e.add(t));return e};zt.prototype.size=function(){return this.map_.size()};function qt(){this._modelType=null;this._scale=null;if(arguments.length===0){this._modelType=qt.FLOATING}else if(arguments.length===1){if(arguments[0]instanceof Bt){let e=arguments[0];this._modelType=e;if(e===qt.FIXED){this.setScale(1)}}else if(typeof arguments[0]==="number"){let e=arguments[0];this._modelType=qt.FIXED;this.setScale(e)}else if(arguments[0]instanceof qt){let e=arguments[0];this._modelType=e._modelType;this._scale=e._scale}}}N(qt.prototype,{equals:function(e){if(!(e instanceof qt)){return false}var t=e;return this._modelType===t._modelType&&this._scale===t._scale},compareTo:function(e){var t=e;var r=this.getMaximumSignificantDigits();var i=t.getMaximumSignificantDigits();return new ft(r).compareTo(new ft(i))},getScale:function(){return this._scale},isFloating:function(){return this._modelType===qt.FLOATING||this._modelType===qt.FLOATING_SINGLE},getType:function(){return this._modelType},toString:function(){var e="UNKNOWN";if(this._modelType===qt.FLOATING){e="Floating"}else if(this._modelType===qt.FLOATING_SINGLE){e="Floating-Single"}else if(this._modelType===qt.FIXED){e="Fixed (Scale="+this.getScale()+")"}return e},makePrecise:function(){if(typeof arguments[0]==="number"){let t=arguments[0];if(B.isNaN(t))return t;if(this._modelType===qt.FLOATING_SINGLE){var e=t;return e}if(this._modelType===qt.FIXED){return Math.round(t*this._scale)/this._scale}return t}else if(arguments[0]instanceof ee){let e=arguments[0];if(this._modelType===qt.FLOATING)return null;e.x=this.makePrecise(e.x);e.y=this.makePrecise(e.y)}},getMaximumSignificantDigits:function(){var e=16;if(this._modelType===qt.FLOATING){e=16}else if(this._modelType===qt.FLOATING_SINGLE){e=6}else if(this._modelType===qt.FIXED){e=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))}return e},setScale:function(e){this._scale=Math.abs(e)},interfaces_:function(){return[V,W]},getClass:function(){return qt}});qt.mostPrecise=function(e,t){if(e.compareTo(t)>=0)return e;return t};function Bt(){this._name=null;let e=arguments[0];this._name=e;Bt.nameToTypeMap.put(e,this)}N(Bt.prototype,{readResolve:function(){return Bt.nameToTypeMap.get(this._name)},toString:function(){return this._name},interfaces_:function(){return[V]},getClass:function(){return Bt}});Bt.serialVersionUID=-552860263173159e4;Bt.nameToTypeMap=new zt;qt.Type=Bt;qt.serialVersionUID=0x6bee6404e9a25c00;qt.FIXED=new Bt("FIXED");qt.FLOATING=new Bt("FLOATING");qt.FLOATING_SINGLE=new Bt("FLOATING SINGLE");qt.maximumPreciseValue=9007199254740992;function Xt(){this._precisionModel=null;this._coordinateSequenceFactory=null;this._SRID=null;if(arguments.length===0){Xt.call(this,new qt,0)}else if(arguments.length===1){if($(arguments[0],U)){let e=arguments[0];Xt.call(this,new qt,0,e)}else if(arguments[0]instanceof qt){let e=arguments[0];Xt.call(this,e,0,Xt.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){let e=arguments[0],t=arguments[1];Xt.call(this,e,t,Xt.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){let e=arguments[0],t=arguments[1],r=arguments[2];this._precisionModel=e;this._coordinateSequenceFactory=r;this._SRID=t}}N(Xt.prototype,{toGeometry:function(e){if(e.isNull()){return this.createPoint()}if(e.getMinX()===e.getMaxX()&&e.getMinY()===e.getMaxY()){return this.createPoint(new ee(e.getMinX(),e.getMinY()))}if(e.getMinX()===e.getMaxX()||e.getMinY()===e.getMaxY()){return this.createLineString([new ee(e.getMinX(),e.getMinY()),new ee(e.getMaxX(),e.getMaxY())])}return this.createPolygon(this.createLinearRing([new ee(e.getMinX(),e.getMinY()),new ee(e.getMinX(),e.getMaxY()),new ee(e.getMaxX(),e.getMaxY()),new ee(e.getMaxX(),e.getMinY()),new ee(e.getMinX(),e.getMinY())]),null)},createLineString:function(){if(arguments.length===0){return this.createLineString(this.getCoordinateSequenceFactory().create([]))}else if(arguments.length===1){if(arguments[0]instanceof Array){let e=arguments[0];return this.createLineString(e!==null?this.getCoordinateSequenceFactory().create(e):null)}else if($(arguments[0],G)){let e=arguments[0];return new ot(e,this)}}},createMultiLineString:function(){if(arguments.length===0){return new qe(null,this)}else if(arguments.length===1){let e=arguments[0];return new qe(e,this)}},buildGeometry:function(e){var t=null;var r=false;var i=false;for(var n=e.iterator();n.hasNext();){var a=n.next();var o=a.getClass();if(t===null){t=o}if(o!==t){r=true}if(a instanceof ze)i=true}if(t===null){return this.createGeometryCollection()}if(r||i){return this.createGeometryCollection(Xt.toGeometryArray(e))}var s=e.iterator().next();var l=e.size()>1;if(l){if(s instanceof gt){return this.createMultiPolygon(Xt.toPolygonArray(e))}else if(s instanceof ot){return this.createMultiLineString(Xt.toLineStringArray(e))}else if(s instanceof lt){return this.createMultiPoint(Xt.toPointArray(e))}J.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},createMultiPointFromCoords:function(e){return this.createMultiPoint(e!==null?this.getCoordinateSequenceFactory().create(e):null)},createPoint:function(){if(arguments.length===0){return this.createPoint(this.getCoordinateSequenceFactory().create([]))}else if(arguments.length===1){if(arguments[0]instanceof ee){let e=arguments[0];return this.createPoint(e!==null?this.getCoordinateSequenceFactory().create([e]):null)}else if($(arguments[0],G)){let e=arguments[0];return new lt(e,this)}}},getCoordinateSequenceFactory:function(){return this._coordinateSequenceFactory},createPolygon:function(){if(arguments.length===0){return this.createPolygon(null,null)}else if(arguments.length===1){if($(arguments[0],G)){let e=arguments[0];return this.createPolygon(this.createLinearRing(e))}else if(arguments[0]instanceof Array){let e=arguments[0];return this.createPolygon(this.createLinearRing(e))}else if(arguments[0]instanceof yt){let e=arguments[0];return this.createPolygon(e,null)}}else if(arguments.length===2){let e=arguments[0],t=arguments[1];return new gt(e,t,this)}},getSRID:function(){return this._SRID},createGeometryCollection:function(){if(arguments.length===0){return new ze(null,this)}else if(arguments.length===1){let e=arguments[0];return new ze(e,this)}},createGeometry:function(e){var t=new bt(this);return t.edit(e,{edit:function(){if(arguments.length===2&&(arguments[1]instanceof ie&&$(arguments[0],G))){let e=arguments[0],t=arguments[1];return this._coordinateSequenceFactory.create(e)}}})},getPrecisionModel:function(){return this._precisionModel},createLinearRing:function(){if(arguments.length===0){return this.createLinearRing(this.getCoordinateSequenceFactory().create([]))}else if(arguments.length===1){if(arguments[0]instanceof Array){let e=arguments[0];return this.createLinearRing(e!==null?this.getCoordinateSequenceFactory().create(e):null)}else if($(arguments[0],G)){let e=arguments[0];return new yt(e,this)}}},createMultiPolygon:function(){if(arguments.length===0){return new _t(null,this)}else if(arguments.length===1){let e=arguments[0];return new _t(e,this)}},createMultiPoint:function(){if(arguments.length===0){return new mt(null,this)}else if(arguments.length===1){if(arguments[0]instanceof Array){let e=arguments[0];return new mt(e,this)}else if($(arguments[0],G)){let i=arguments[0];if(i===null){return this.createMultiPoint(new Array(0).fill(null))}var e=new Array(i.size()).fill(null);for(var t=0;t<i.size();t++){var r=this.getCoordinateSequenceFactory().create(1,i.getDimension());at.copy(i,t,r,0,1);e[t]=this.createPoint(r)}return this.createMultiPoint(e)}}},interfaces_:function(){return[V]},getClass:function(){return Xt}});Xt.toMultiPolygonArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};Xt.toGeometryArray=function(e){if(e===null)return null;var t=new Array(e.size()).fill(null);return e.toArray(t)};Xt.getDefaultCoordinateSequenceFactory=function(){return Tt.instance()};Xt.toMultiLineStringArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};Xt.toLineStringArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};Xt.toMultiPointArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};Xt.toLinearRingArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};Xt.toPointArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};Xt.toPolygonArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};Xt.createPointFromInternalCoord=function(e,t){t.getPrecisionModel().makePrecise(e);return t.getFactory().createPoint(e)};Xt.serialVersionUID=-0x5ea75f2051eeb400;const Kt=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];function Zt(e){this.geometryFactory=e||new Xt}N(Zt.prototype,{read(e){let t;if(typeof e==="string")t=JSON.parse(e);else t=e;const r=t.type;if(!Qt[r])throw new Error("Unknown GeoJSON type: "+t.type);if(Kt.indexOf(r)!==-1)return Qt[r].call(this,t.coordinates);else if(r==="GeometryCollection")return Qt[r].call(this,t.geometries);return Qt[r].call(this,t)},write(e){const t=e.getGeometryType();if(!Jt[t])throw new Error("Geometry is not supported");return Jt[t].call(this,e)}});const Qt={Feature:function(e){const t={};for(let r in e)t[r]=e[r];if(e.geometry){const r=e.geometry.type;if(!Qt[r])throw new Error("Unknown GeoJSON type: "+e.type);t.geometry=this.read(e.geometry)}if(e.bbox)t.bbox=Qt.bbox.call(this,e.bbox);return t},FeatureCollection:function(e){const t={};if(e.features){t.features=[];for(let r=0;r<e.features.length;++r)t.features.push(this.read(e.features[r]))}if(e.bbox)t.bbox=this.parse.bbox.call(this,e.bbox);return t},coordinates:function(e){const t=[];for(let r=0;r<e.length;++r){const i=e[r];t.push(new ee(i[0],i[1]))}return t},bbox:function(e){return this.geometryFactory.createLinearRing([new ee(e[0],e[1]),new ee(e[2],e[1]),new ee(e[2],e[3]),new ee(e[0],e[3]),new ee(e[0],e[1])])},Point:function(e){const t=new ee(e[0],e[1]);return this.geometryFactory.createPoint(t)},MultiPoint:function(e){const t=[];for(let r=0;r<e.length;++r)t.push(Qt.Point.call(this,e[r]));return this.geometryFactory.createMultiPoint(t)},LineString:function(e){const t=Qt.coordinates.call(this,e);return this.geometryFactory.createLineString(t)},MultiLineString:function(e){const t=[];for(let r=0;r<e.length;++r)t.push(Qt.LineString.call(this,e[r]));return this.geometryFactory.createMultiLineString(t)},Polygon:function(e){const t=Qt.coordinates.call(this,e[0]);const r=this.geometryFactory.createLinearRing(t);const i=[];for(let t=1;t<e.length;++t){var n=e[t];var a=Qt.coordinates.call(this,n);var o=this.geometryFactory.createLinearRing(a);i.push(o)}return this.geometryFactory.createPolygon(r,i)},MultiPolygon:function(e){const t=[];for(let r=0;r<e.length;++r){const i=e[r];t.push(Qt.Polygon.call(this,i))}return this.geometryFactory.createMultiPolygon(t)},GeometryCollection:function(e){const t=[];for(let r=0;r<e.length;++r){const i=e[r];t.push(this.read(i))}return this.geometryFactory.createGeometryCollection(t)}};const Jt={coordinate:function(e){return[e.x,e.y]},Point:function(e){const t=Jt.coordinate.call(this,e.getCoordinate());return{type:"Point",coordinates:t}},MultiPoint:function(e){const t=[];for(let r=0;r<e._geometries.length;++r){const i=e._geometries[r];const n=Jt.Point.call(this,i);t.push(n.coordinates)}return{type:"MultiPoint",coordinates:t}},LineString:function(e){const t=[];const r=e.getCoordinates();for(let e=0;e<r.length;++e){const i=r[e];t.push(Jt.coordinate.call(this,i))}return{type:"LineString",coordinates:t}},MultiLineString:function(e){const t=[];for(let r=0;r<e._geometries.length;++r){const i=e._geometries[r];const n=Jt.LineString.call(this,i);t.push(n.coordinates)}return{type:"MultiLineString",coordinates:t}},Polygon:function(e){const t=[];const r=Jt.LineString.call(this,e._shell);t.push(r.coordinates);for(let r=0;r<e._holes.length;++r){const i=e._holes[r];const n=Jt.LineString.call(this,i);t.push(n.coordinates)}return{type:"Polygon",coordinates:t}},MultiPolygon:function(e){const t=[];for(let r=0;r<e._geometries.length;++r){const i=e._geometries[r];const n=Jt.Polygon.call(this,i);t.push(n.coordinates)}return{type:"MultiPolygon",coordinates:t}},GeometryCollection:function(e){const t=[];for(let r=0;r<e._geometries.length;++r){const i=e._geometries[r];const n=i.getGeometryType();t.push(Jt[n].call(this,i))}return{type:"GeometryCollection",geometries:t}}};function er(e){this.parser=new Zt(e||new Xt)}N(er.prototype,{read(e){var t=this.parser.read(e);return t}});function tr(){this.parser=new Zt(this.geometryFactory)}N(tr.prototype,{write(e){return this.parser.write(e)}});const rr={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};function ir(e){this.geometryFactory=e||new Xt;this.precisionModel=this.geometryFactory.getPrecisionModel()}N(ir.prototype,{read(e){var t,r,i;e=e.replace(/[\n\r]/g," ");var n=rr.typeStr.exec(e);if(e.search("EMPTY")!==-1){n=rr.emptyTypeStr.exec(e);n[2]=undefined}if(n){r=n[1].toLowerCase();i=n[2];if(ar[r]){t=ar[r].call(this,i)}}if(t===undefined)throw new Error("Could not parse WKT "+e);return t},write(e){return this.extractGeometry(e)},extractGeometry(e){var t=e.getGeometryType().toLowerCase();if(!nr[t]){return null}var r=t.toUpperCase();var i;if(e.isEmpty()){i=r+" EMPTY"}else{i=r+"("+nr[t].call(this,e)+")"}return i}});const nr={coordinate(e){return e.x+" "+e.y},point(e){return nr.coordinate.call(this,e._coordinates._coordinates[0])},multipoint(e){var t=[];for(let r=0,i=e._geometries.length;r<i;++r){t.push("("+nr.point.call(this,e._geometries[r])+")")}return t.join(",")},linestring(e){var t=[];for(let r=0,i=e._points._coordinates.length;r<i;++r){t.push(nr.coordinate.call(this,e._points._coordinates[r]))}return t.join(",")},linearring(e){var t=[];for(let r=0,i=e._points._coordinates.length;r<i;++r){t.push(nr.coordinate.call(this,e._points._coordinates[r]))}return t.join(",")},multilinestring(e){var t=[];for(let r=0,i=e._geometries.length;r<i;++r){t.push("("+nr.linestring.call(this,e._geometries[r])+")")}return t.join(",")},polygon(e){var t=[];t.push("("+nr.linestring.call(this,e._shell)+")");for(let r=0,i=e._holes.length;r<i;++r){t.push("("+nr.linestring.call(this,e._holes[r])+")")}return t.join(",")},multipolygon(e){var t=[];for(let r=0,i=e._geometries.length;r<i;++r){t.push("("+nr.polygon.call(this,e._geometries[r])+")")}return t.join(",")},geometrycollection(e){var t=[];for(let r=0,i=e._geometries.length;r<i;++r){t.push(this.extractGeometry(e._geometries[r]))}return t.join(",")}};const ar={coord(e){var t=e.trim().split(rr.spaces);var r=new ee(Number.parseFloat(t[0]),Number.parseFloat(t[1]));this.precisionModel.makePrecise(r);return r},point(e){if(e===undefined)return this.geometryFactory.createPoint();return this.geometryFactory.createPoint(ar.coord.call(this,e))},multipoint(e){if(e===undefined)return this.geometryFactory.createMultiPoint();var t;var r=e.trim().split(",");var i=[];for(let e=0,n=r.length;e<n;++e){t=r[e].replace(rr.trimParens,"$1");i.push(ar.point.call(this,t))}return this.geometryFactory.createMultiPoint(i)},linestring(e){if(e===undefined){return this.geometryFactory.createLineString()}var t=e.trim().split(",");var r=[];var i;for(let e=0,i=t.length;e<i;++e){r.push(ar.coord.call(this,t[e]))}return this.geometryFactory.createLineString(r)},linearring(e){if(e===undefined){return this.geometryFactory.createLinearRing()}var t=e.trim().split(",");var r=[];var i;for(let e=0,i=t.length;e<i;++e){r.push(ar.coord.call(this,t[e]))}return this.geometryFactory.createLinearRing(r)},multilinestring(e){if(e===undefined){return this.geometryFactory.createMultiLineString()}var t;var r=e.trim().split(rr.parenComma);var i=[];for(let e=0,n=r.length;e<n;++e){t=r[e].replace(rr.trimParens,"$1");i.push(ar.linestring.call(this,t))}return this.geometryFactory.createMultiLineString(i)},polygon(e){if(e===undefined){return this.geometryFactory.createPolygon()}var t,r,i;var n=e.trim().split(rr.parenComma);var a;var o=[];for(let e=0,s=n.length;e<s;++e){t=n[e].replace(rr.trimParens,"$1");r=ar.linestring.call(this,t);i=this.geometryFactory.createLinearRing(r._points);if(e===0){a=i}else{o.push(i)}}return this.geometryFactory.createPolygon(a,o)},multipolygon(e){if(e===undefined){return this.geometryFactory.createMultiPolygon()}var t;var r=e.trim().split(rr.doubleParenComma);var i=[];for(let e=0,n=r.length;e<n;++e){t=r[e].replace(rr.trimParens,"$1");i.push(ar.polygon.call(this,t))}return this.geometryFactory.createMultiPolygon(i)},geometrycollection(e){if(e===undefined){return this.geometryFactory.createGeometryCollection()}e=e.replace(/,\s*([A-Za-z])/g,"|$1");var t=e.trim().split("|");var r=[];for(let e=0,i=t.length;e<i;++e){r.push(this.read(t[e]))}return this.geometryFactory.createGeometryCollection(r)}};function or(e){this.parser=new ir(e||new Xt)}N(or.prototype,{read(e){var t=this.parser.read(e);return t}});function sr(e){this.parser=new ir(e)}N(sr.prototype,{write(e){return this.parser.write(e)}});N(sr,{toLineString(e,t){if(arguments.length!==2){throw new Error("Not implemented")}return"LINESTRING ( "+e.x+" "+e.y+", "+t.x+" "+t.y+" )"}});function lr(e){return[e.x,e.y]}function ur(e,t){this.geometryFactory=e||new Xt;this.ol=t||typeof ol!=="undefined"&&ol}N(ur.prototype,{inject(e,t,r,i,n,a,o,s){this.ol={geom:{Point:e,LineString:t,LinearRing:r,Polygon:i,MultiPoint:n,MultiLineString:a,MultiPolygon:o,GeometryCollection:s}}},read(e){const t=this.ol;if(e instanceof t.geom.Point){return this.convertFromPoint(e)}else if(e instanceof t.geom.LineString){return this.convertFromLineString(e)}else if(e instanceof t.geom.LinearRing){return this.convertFromLinearRing(e)}else if(e instanceof t.geom.Polygon){return this.convertFromPolygon(e)}else if(e instanceof t.geom.MultiPoint){return this.convertFromMultiPoint(e)}else if(e instanceof t.geom.MultiLineString){return this.convertFromMultiLineString(e)}else if(e instanceof t.geom.MultiPolygon){return this.convertFromMultiPolygon(e)}else if(e instanceof t.geom.GeometryCollection){return this.convertFromCollection(e)}},convertFromPoint(e){const t=e.getCoordinates();return this.geometryFactory.createPoint(new ee(t[0],t[1]))},convertFromLineString(e){return this.geometryFactory.createLineString(e.getCoordinates().map(function(e){return new ee(e[0],e[1])}))},convertFromLinearRing(e){return this.geometryFactory.createLinearRing(e.getCoordinates().map(function(e){return new ee(e[0],e[1])}))},convertFromPolygon(e){const t=e.getLinearRings();var r=null;var i=[];for(let e=0;e<t.length;e++){const n=this.convertFromLinearRing(t[e]);if(e===0){r=n}else{i.push(n)}}return this.geometryFactory.createPolygon(r,i)},convertFromMultiPoint(e){const t=e.getPoints().map(function(e){return this.convertFromPoint(e)},this);return this.geometryFactory.createMultiPoint(t)},convertFromMultiLineString(e){const t=e.getLineStrings().map(function(e){return this.convertFromLineString(e)},this);return this.geometryFactory.createMultiLineString(t)},convertFromMultiPolygon(e){const t=e.getPolygons().map(function(e){return this.convertFromPolygon(e)},this);return this.geometryFactory.createMultiPolygon(t)},convertFromCollection(e){const t=e.getGeometries().map(function(e){return this.read(e)},this);return this.geometryFactory.createGeometryCollection(t)},write(e){if(e.getGeometryType()==="Point"){return this.convertToPoint(e.getCoordinate())}else if(e.getGeometryType()==="LineString"){return this.convertToLineString(e)}else if(e.getGeometryType()==="LinearRing"){return this.convertToLinearRing(e)}else if(e.getGeometryType()==="Polygon"){return this.convertToPolygon(e)}else if(e.getGeometryType()==="MultiPoint"){return this.convertToMultiPoint(e)}else if(e.getGeometryType()==="MultiLineString"){return this.convertToMultiLineString(e)}else if(e.getGeometryType()==="MultiPolygon"){return this.convertToMultiPolygon(e)}else if(e.getGeometryType()==="GeometryCollection"){return this.convertToCollection(e)}},convertToPoint(e){return new this.ol.geom.Point([e.x,e.y])},convertToLineString(e){var t=e._points._coordinates.map(lr);return new this.ol.geom.LineString(t)},convertToLinearRing(e){var t=e._points._coordinates.map(lr);return new this.ol.geom.LinearRing(t)},convertToPolygon(e){var t=[e._shell._points._coordinates.map(lr)];for(let r=0;r<e._holes.length;r++){t.push(e._holes[r]._points._coordinates.map(lr))}return new this.ol.geom.Polygon(t)},convertToMultiPoint(e){return new this.ol.geom.MultiPoint(e.getCoordinates().map(lr))},convertToMultiLineString(e){var t=[];for(let r=0;r<e._geometries.length;r++){t.push(this.convertToLineString(e._geometries[r]).getCoordinates())}return new this.ol.geom.MultiLineString(t)},convertToMultiPolygon(e){var t=[];for(let r=0;r<e._geometries.length;r++){t.push(this.convertToPolygon(e._geometries[r]).getCoordinates())}return new this.ol.geom.MultiPolygon(t)},convertToCollection(e){var t=[];for(let i=0;i<e._geometries.length;i++){var r=e._geometries[i];t.push(this.write(r))}return new this.ol.geom.GeometryCollection(t)}});var cr={io:{OL3Parser:ur}};var fr=angular.module("gmfObjectEditingComponent",[i["a"].module.name,n["a"].module.name,a["a"].module.name,m["a"].module.name,y["a"].name,b["a"].module.name,S["a"].module.name,x["a"].module.name]);fr.run(["$templateCache",function(e){e.put("gmf/objectediting",r(484))}]);fr.value("gmfObjecteditingTemplateUrl",function(e,t){var r=t["gmfObjecteditingTemplateurl"];return r!==undefined?r:"gmf/objectediting"});hr.$inject=["$element","$attrs","gmfObjecteditingTemplateUrl"];function hr(e,t,r){return r(e,t)}fr.component_={controller:"GmfObjecteditingController as oeCtrl",bindings:{active:"=gmfObjecteditingActive",feature:"<gmfObjecteditingFeature",geomType:"<gmfObjecteditingGeomtype",layerNodeId:"<gmfObjecteditingLayernodeid",map:"<gmfObjecteditingMap",sketchFeatures:"<gmfObjecteditingSketchfeatures"},templateUrl:hr};fr.component("gmfObjectediting",fr.component_);fr.Controller=function(e,t,r,i,n,a,o,s,l){this.active;this.feature;this.geomType;this.layerNodeId;this.map;this.sketchFeatures;this.scope_=e;this.timeout_=t;this.gettextCatalog_=r;this.gmfEditFeature_=i;this.gmfObjectEditingQuery_=n;this.queryableLayersInfo;this.selectedQueryableLayerInfo;this.queryableLayerListShown=false;this.copyFromActive=false;this.deleteFromActive=false;this.featureHasGeom;this.ngeoLayerHelper_=s;this.gmfTreeManager_=a;this.ngeoFeatureHelper_=o;this.ngeoToolActivateMgr_=l;this.skipGeometryChange_=false;this.process=y["a"].ProcessType.ADD;this.editableWMSLayer_=null;this.jstsOL3Parser_=new cr.io.OL3Parser;this.state_;this.geometryChanges_=[];this.defaultStyles_={};this.defaultStylesWoVertice_={};this.dirtyStyles_={};this.dirtyStylesWoVertice_={};this.pending=false;this.dirty=false;this.listenerKeys_=[];this.features_=new E["b"];this.interactions_=new E["b"];this.modify_=new k["a"]({deleteCondition:O["a"].deleteCondition,features:this.features_,style:o.getVertexStyle(false)});this.interactions_.push(this.modify_);this.modifyToolActivate_=new C["a"](this.modify_,"active");this.toolsActive=false;this.toolsToolActivate_=new C["a"](this,"toolsActive")};fr.Controller.$inject=["$scope","$timeout","gettextCatalog","gmfEditFeature","gmfObjectEditingQuery","gmfTreeManager","ngeoFeatureHelper","ngeoLayerHelper","ngeoToolActivateMgr"];fr.Controller.prototype.$onInit=function(){var e=this;this.gmfObjectEditingQuery_.getQueryableLayersInfo().then(this.handleGetQueryableLayersInfo_.bind(this));this.scope_.$watchCollection(function(){if(e.gmfTreeManager_.rootCtrl){return e.gmfTreeManager_.rootCtrl.children}},function(t){e.timeout_(function(){if(t){e.unregisterAllTreeCtrl_();e.gmfTreeManager_.rootCtrl.traverseDepthFirst(e.registerTreeCtrl_.bind(e))}})});var t=this.feature.getGeometry();this.state_=t?fr.Controller.State.UPDATE:fr.Controller.State.INSERT;this.scope_.$watchCollection(function(){return e.geometryChanges_},function(t,r){if(t.length){if(t.length===1){e.dirty=false}else{e.dirty=true}}});var r=[39,155,145];var i=[153,51,51];this.initializeStyles_(this.defaultStyles_,r);this.initializeStyles_(this.defaultStylesWoVertice_,r,false);this.initializeStyles_(this.dirtyStyles_,i);this.initializeStyles_(this.dirtyStylesWoVertice_,i,false);this.scope_.$watch(function(){return e.dirty},this.setFeatureStyle_.bind(this));this.features_.push(this.feature);this.featureHasGeom=!g.isEmpty(t);this.initializeInteractions_();this.registerInteractions_();this.toggle_(true);this.resetGeometryChanges_();this.scope_.$on("$destroy",this.handleDestroy_.bind(this))};fr.Controller.prototype.delete=function(){var e=this.gettextCatalog_;var t=e.getString("Do you really want to delete the feature?");if(confirm(t)){this.dirty=false;this.pending=true;this.gmfEditFeature_.deleteFeature(this.layerNodeId,this.feature).then(this.handleDeleteFeature_.bind(this))}};fr.Controller.prototype.save=function(){this.pending=true;var e=this.feature.clone();e.setId(this.feature.getId());var t=e.getGeometry();if(t){g.toXY(t)}if(this.state_===fr.Controller.State.INSERT){this.gmfEditFeature_.insertFeatures(this.layerNodeId,[e]).then(this.handleEditFeature_.bind(this))}else if(this.state_===fr.Controller.State.UPDATE){this.gmfEditFeature_.updateFeature(this.layerNodeId,e).then(this.handleEditFeature_.bind(this))}};fr.Controller.prototype.undo=function(){if(this.geometryChanges_.length<=1){return}this.skipGeometryChange_=true;this.geometryChanges_.pop();var e=fr.Controller.cloneGeometry_(this.geometryChanges_[this.geometryChanges_.length-1]);this.feature.setGeometry(e);this.skipGeometryChange_=false};fr.Controller.prototype.isStateInsert=function(){return this.state_===fr.Controller.State.INSERT};fr.Controller.prototype.handleDeleteFeature_=function(e){this.feature.setGeometry(null);this.resetGeometryChanges_();this.state_=fr.Controller.State.INSERT;this.pending=false;this.refreshWMSLayer_()};fr.Controller.prototype.handleEditFeature_=function(e){var t=(new j["a"]).readFeatures(e.data);if(t.length){this.feature.setId(t[0].getId())}this.resetGeometryChanges_();if(this.feature.getGeometry()){this.state_=fr.Controller.State.UPDATE}else{this.state_=fr.Controller.State.INSERT}this.pending=false;this.refreshWMSLayer_()};fr.Controller.prototype.initializeInteractions_=function(){this.interactions_.forEach(function(e){e.setActive(false);w["a"].interaction(e)})};fr.Controller.prototype.registerInteractions_=function(){var e=this;this.interactions_.forEach(function(t){e.map.addInteraction(t)})};fr.Controller.prototype.unregisterInteractions_=function(){var e=this;this.interactions_.forEach(function(t){e.map.removeInteraction(t)})};fr.Controller.prototype.toggle_=function(e){var t=this.listenerKeys_;var r=fr.Controller.NAMESPACE_+"-"+T["c"](this);var i=this.ngeoToolActivateMgr_;if(e){t.push(M["a"](this.feature,"change:"+this.feature.getGeometryName(),this.handleFeatureGeometryChange_,this));t.push(M["a"](this.modify_,"change:active",this.setFeatureStyle_,this));t.push(M["a"](this.modify_,"modifyend",this.handleModifyInteractionModifyEnd_,this));t.push(M["a"](window,"beforeunload",this.handleWindowBeforeUnload_,this));t.push(M["a"](this.sketchFeatures,"add",this.handleSketchFeaturesAdd_,this));i.registerTool(r,this.modifyToolActivate_,true);i.registerTool(r,this.toolsToolActivate_,false)}else{this.undoAllChanges_();t.forEach(M["e"]);t.length=0;i.unregisterTool(r,this.modifyToolActivate_);i.unregisterTool(r,this.toolsToolActivate_)}this.modify_.setActive(e)};fr.Controller.prototype.undoAllChanges_=function(){var e=fr.Controller.cloneGeometry_(this.geometryChanges_[0]);this.feature.setGeometry(e);this.resetGeometryChanges_();this.dirty=false;this.setFeatureStyle_()};fr.Controller.prototype.resetGeometryChanges_=function(){if(this.geometryChanges_.length>1){this.geometryChanges_.length=0}if(this.geometryChanges_.length===0){var e=this.feature.getGeometry();var t=fr.Controller.cloneGeometry_(e);this.geometryChanges_.push(t)}};fr.Controller.prototype.handleModifyInteractionModifyEnd_=function(e){var t=this.feature.getGeometry();if(t instanceof f["a"]){var r=this.jstsOL3Parser_.read(t);var i=r.buffer(0);t=O["a"].toMulti(this.jstsOL3Parser_.write(i));this.skipGeometryChange_=true;this.feature.setGeometry(t.clone());this.skipGeometryChange_=false}var n=fr.Controller.cloneGeometry_(t);_["a"].assert(n);this.geometryChanges_.push(n);this.scope_.$apply()};fr.Controller.prototype.initializeStyles_=function(e,t,r){var i=r!==false;var n=t.slice();n.push(.3);var a=new I["a"]({radius:8,stroke:new R["a"]({color:t,width:1}),fill:new D["a"]({color:n})});e["Point"]=new L["c"]({image:a});e["MultiPoint"]=new L["c"]({image:a});e["LineString"]=[new L["c"]({stroke:new R["a"]({color:t,width:3})})];if(i){e["LineString"].push(this.ngeoFeatureHelper_.getVertexStyle(true))}e["MultiLineString"]=[new L["c"]({stroke:new R["a"]({color:t,width:3})})];if(i){e["MultiLineString"].push(this.ngeoFeatureHelper_.getVertexStyle(true))}e["Polygon"]=[new L["c"]({stroke:new R["a"]({color:t,width:2}),fill:new D["a"]({color:n})})];if(i){e["Polygon"].push(this.ngeoFeatureHelper_.getVertexStyle(true))}e["MultiPolygon"]=[new L["c"]({stroke:new R["a"]({color:t,width:2}),fill:new D["a"]({color:n})})];if(i){e["MultiPolygon"].push(this.ngeoFeatureHelper_.getVertexStyle(true))}};fr.Controller.prototype.setFeatureStyle_=function(){var e=this.feature.getGeometry();if(e){var t=e.getType();var r=this.modify_.getActive();var i=void 0;if(this.dirty){if(r){i=this.dirtyStyles_[t]}else{i=this.dirtyStylesWoVertice_[t]}}else{if(r){i=this.defaultStyles_[t]}else{i=this.defaultStylesWoVertice_[t]}}this.feature.setStyle(i)}};fr.Controller.prototype.registerTreeCtrl_=function(e){var t=e.node;if(t.children&&t.children.length){return}if(t.id===this.layerNodeId){var r=n["a"].getLayer(e);_["a"].assert(r instanceof A["a"]||r instanceof P["a"]);this.editableWMSLayer_=r}};fr.Controller.prototype.unregisterAllTreeCtrl_=function(){this.editableWMSLayer_=null};fr.Controller.prototype.refreshWMSLayer_=function(){if(this.editableWMSLayer_){this.ngeoLayerHelper_.refreshWMSLayer(this.editableWMSLayer_)}};fr.Controller.prototype.handleWindowBeforeUnload_=function(e){var t=this.gettextCatalog_;if(this.dirty){var r=t.getString("There are unsaved changes.");(e||window.event).returnValue=r;return r}return undefined};fr.Controller.prototype.handleSketchFeaturesAdd_=function(e){var t=e.element;var r=t.getGeometry();var i=this.feature.getGeometry();if(i){var n=this.jstsOL3Parser_.read(i);var a=this.jstsOL3Parser_.read(r);var o=void 0;if(this.process===y["a"].ProcessType.ADD){o=n.union(a)}else{if(n.intersects(a)){o=n.difference(a)}}if(o){var s=this.jstsOL3Parser_.write(o);var l=O["a"].toMulti(s);this.feature.setGeometry(l.clone())}}else if(this.process===y["a"].ProcessType.ADD){this.feature.setGeometry(O["a"].toMulti(r.clone()))}this.sketchFeatures.clear()};fr.Controller.prototype.handleFeatureGeometryChange_=function(){var e=this;var t=this.feature.getGeometry();this.timeout_(function(){e.featureHasGeom=!g.isEmpty(t)});if(this.skipGeometryChange_){return}if(t){this.timeout_(function(){e.geometryChanges_.push(t.clone())})}};fr.Controller.prototype.handleGetQueryableLayersInfo_=function(e){this.queryableLayersInfo=e;if(this.queryableLayersInfo.length){this.selectedQueryableLayerInfo=this.queryableLayersInfo[0]}};fr.Controller.prototype.handleDestroy_=function(){this.features_.clear();this.toggle_(false);this.unregisterInteractions_()};fr.Controller.cloneGeometry_=function(e){var t=null;if(e){t=e.clone()}return t};fr.Controller.NAMESPACE_="oe";fr.Controller.State={INSERT:"insert",UPDATE:"update"};fr.controller("GmfObjecteditingController",fr.Controller);var dr=t["a"]=fr},function(e,t,r){"use strict";var i=r(12);var n=r(384);var a=r(300);var o=r(193);var s=["+proj="+a["a"],"+lat_0=46.95240555555556","+lon_0=7.439583333333333","+k_0=1","+x_0=2600000","+y_0=1200000","+ellps=bessel","+towgs84=674.374,15.056,405.346,0,0,0,0","+units=m","+no_defs"].join(" ");var l=[242e4,103e4,29e5,135e4];o["a"].defs("EPSG:2056",s);n["a"](o["a"]);i["g"]("EPSG:2056").setExtent(l);var u="EPSG:2056";t["a"]=u},function(e,t,r){"use strict";var i=r(1);var n=r(5);var a=r(67);var o=r(218);var s=function e(t,r,n){var a=this;var o=n;this.url_=o.url;this.maxFeatures_=o.maxFeatures!==undefined?o.maxFeatures:50;this.wfsTypes_={};i["a"].assertArray(o.wfsTypes,"wfsTypes is not correctly set");o.wfsTypes.forEach(function(e){a.wfsTypes_[e.featureType]=e});this.defaultFeatureNS_=o.defaultFeatureNS;this.defaultFeaturePrefix_=o.defaultFeaturePrefix;this.pointRecenterZoom_=o.pointRecenterZoom;this.$http_=t;this.result_=r};s.$inject=["$http","ngeoQueryResult","ngeoWfsPermalinkOptions"];s.$inject=["$http","ngeoQueryResult","ngeoWfsPermalinkOptions"];s.prototype.clear=function(){this.clearResult_()};s.prototype.issue=function(e,t){i["a"].assert(this.url_,"url is not set. to use the wfs permalink service, "+"set the value `ngeoWfsPermalinkOptions`");this.clearResult_();var r=e.wfsType;if(!this.wfsTypes_.hasOwnProperty(r)){return}var n=this.wfsTypes_[r];var a=this.createFilters_(e.filterGroups);if(a===null){return}this.issueRequest_(n,a,t,e.showFeatures)};s.prototype.issueRequest_=function(e,t,r,i){var n=this;var a=new o["a"];var s=a.writeGetFeature({srsName:r.getView().getProjection().getCode(),featureNS:e.featureNS!==undefined?e.featureNS:this.defaultFeatureNS_,featurePrefix:e.featurePrefix!==undefined?e.featurePrefix:this.defaultFeaturePrefix_,featureTypes:[e.featureType],outputFormat:"GML3",filter:t,maxFeatures:this.maxFeatures_});var l=(new XMLSerializer).serializeToString(s);var u={headers:{"Content-Type":"text/xml; charset=UTF-8"}};this.$http_.post(this.url_,l,u).then(function(t){var o=a.readFeatures(t.data);if(o.length==0){return}var s=r.getSize();if(s!==undefined){var l=n.pointRecenterZoom_;var u=[10,10,10,10];r.getView().fit(n.getExtent_(o),{size:s,maxZoom:l,padding:u})}if(i){var c={features:o,id:e.featureType,identifierAttributeField:e.label,label:e.featureType,pending:false};n.result_.sources.push(c);n.result_.total=o.length}})};s.prototype.getExtent_=function(e){return e.reduce(function(e,t){return n["q"](e,t.getGeometry().getExtent())},n["j"]())};s.prototype.createFilters_=function(e){if(e.length==0){return null}var t=a;var r=function e(r){var i=r.filters.map(function(e){var r=e.condition;if(Array.isArray(r)){return s.or_(r.map(function(r){return t.equalTo(e.property,r)}))}else{return t.equalTo(e.property,e.condition)}});return s.and_(i)};return s.or_(e.map(r))};s.and_=function(e){return s.joinFilters_(e,a["and"])};s.or_=function(e){return s.joinFilters_(e,a["or"])};s.joinFilters_=function(e,t){return e.reduce(function(e,r){if(e===null){return r}else{i["a"].assert(r!==null);return t(e,r)}},null)};s.prototype.clearResult_=function(){this.result_.total=0;this.result_.sources.forEach(function(e){e.features.length=0})};s.module=angular.module("ngeoWfsPermalink",[]);s.module.value("ngeoWfsPermalinkOptions",{url:"",wfsTypes:[],defaultFeatureNS:"",defaultFeaturePrefix:""});s.module.service("ngeoWfsPermalink",s);t["a"]=s},function(e,t,r){"use strict";var i=r(311);var n=angular.module("ngeoLayertreeModule",[i["a"].name]);t["a"]=n},function(e,t,r){"use strict";var i=r(1);var n=r(107);var a=r(196);var o=r(84);var s=r(471);var l=r.n(s);var u=r(470);var c=r.n(u);var f=r(620);var h=r.n(f);var d=angular.module("ngeoGrid",[a["a"].module.name,n["a"].name,"floatThead"]);d.run(["$templateCache",function(e){e.put("ngeo/grid",r(469))}]);d.value("ngeoGridTemplateUrl",function(e){var t=e["ngeoGridTemplateurl"];return t!==undefined?t:"ngeo/grid"});p.$inject=["$attrs","ngeoGridTemplateUrl"];function p(e,t){return t(e)}d.component_={controller:"ngeoGridController as ctrl",bindings:{configuration:"=ngeoGridConfiguration"},templateUrl:p};d.component("ngeoGrid",d.component_);d.Controller_=function(e){this.scope_=e;this.configuration;this.selectedRows;this.sortedBy;this.sortAscending=true;this.floatTheadConfig={scrollContainer:function e(t){return t.closest(".ngeo-grid-table-container")}}};d.Controller_.$inject=["$scope"];d.Controller_.prototype.$onInit=function(){this.selectedRows=this.configuration.selectedRows};d.Controller_.prototype.sort=function(e){this.sortAscending=this.sortedBy===e?!this.sortAscending:true;this.sortedBy=e;var t=this.sortAscending?1:-1;this.configuration.data.sort(function(r,i){if(!r[e]){return 1}if(!i[e]){return-1}return r[e]>i[e]?t:-t})};d.Controller_.prototype.clickRow=function(e,t){var r=this.isShiftKeyOnly_(t);var i=this.isPlatformModifierKeyOnly_(t);this.clickRow_(e,r,i)};d.Controller_.prototype.clickRow_=function(e,t,r){if(t&&!r){this.selectRange_(e)}else if(!t&&r){this.configuration.toggleRow(e)}else{var i=this.configuration.isRowSelected(e);this.configuration.unselectAll();if(!i){this.configuration.selectRow(e)}}};d.Controller_.prototype.selectRange_=function(e){var t=a["a"].getRowUid(e);var r=this.configuration.data;if(this.configuration.isRowSelected(e)){return}var n=undefined;var o=[];for(var s=0;s<r.length;s++){var l=r[s];var u=a["a"].getRowUid(l);if(t===u){n=s}else if(this.configuration.isRowSelected(l)){o.push(s)}}i["a"].assert(n!==undefined);if(o.length==0){this.configuration.selectRow(e)}var c=Infinity;var f=o[0];for(var h=0;h<o.length;h++){var d=o[h];var p=Math.abs(d-n);if(c>p){c=p;f=d}}var v=n<f?n:f;var g=n>f?n:f;for(var m=v;m<=g;m++){this.configuration.selectRow(r[m])}};d.Controller_.prototype.preventTextSelection=function(e){var t=this.isShiftKeyOnly_(e);var r=this.isPlatformModifierKeyOnly_(e);if(t||r){e.preventDefault()}};d.Controller_.prototype.isPlatformModifierKeyOnly_=function(e){return!e.altKey&&(o["d"]?e.metaKey:e.ctrlKey)&&!e.shiftKey};d.Controller_.prototype.isShiftKeyOnly_=function(e){return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey};d.controller("ngeoGridController",d.Controller_);t["a"]=d},function(e,t,r){"use strict";var i=r(296);var n=angular.module("ngeoGridModule",[i["a"].name]);t["a"]=n},function(e,t,r){"use strict";function i(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e);var r=this.a;var i=this.rf;var n=1/i;var a=2*n-Math.pow(n,2);var o=this.e=Math.sqrt(a);this.R=this.k0*r*Math.sqrt(1-a)/(1-a*Math.pow(t,2));this.alpha=Math.sqrt(1+a/(1-a)*Math.pow(Math.cos(e),4));this.b0=Math.asin(t/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2));var l=Math.log(Math.tan(Math.PI/4+e/2));var u=Math.log((1+o*t)/(1-o*t));this.K=s-this.alpha*l+this.alpha*o/2*u}function n(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2));var r=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y)));var i=-this.alpha*(t+r)+this.K;var n=2*(Math.atan(Math.exp(i))-Math.PI/4);var a=this.alpha*(e.x-this.lambda0);var o=Math.atan(Math.sin(a)/(Math.sin(this.b0)*Math.tan(n)+Math.cos(this.b0)*Math.cos(a)));var s=Math.asin(Math.cos(this.b0)*Math.sin(n)-Math.sin(this.b0)*Math.cos(n)*Math.cos(a));e.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0;e.x=this.R*o+this.x0;return e}function a(e){var t=e.x-this.x0;var r=e.y-this.y0;var i=t/this.R;var n=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4);var a=Math.asin(Math.cos(this.b0)*Math.sin(n)+Math.sin(this.b0)*Math.cos(n)*Math.cos(i));var o=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(n)));var s=this.lambda0+o/this.alpha;var l=0;var u=a;var c=-1e3;var f=0;while(Math.abs(u-c)>1e-7){if(++f>20){return}l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+a/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2));c=u;u=2*Math.atan(Math.exp(l))-Math.PI/2}e.x=s;e.y=u;return e}var o=["somerc"];t["a"]={init:i,forward:n,inverse:a,names:o}},function(e,t,r){"use strict";var i=1;var n=2;var a=3;var o=4;var s=5;var l=-1;var u=/\s/;var c=/[A-Za-z]/;var f=/[A-Za-z84]/;var h=/[,\]]/;var d=/[\d\.E\-\+]/;function p(e){if(typeof e!=="string"){throw new Error("not a string")}this.text=e.trim();this.level=0;this.place=0;this.root=null;this.stack=[];this.currentObject=null;this.state=i}p.prototype.readCharicter=function(){var e=this.text[this.place++];if(this.state!==o){while(u.test(e)){if(this.place>=this.text.length){return}e=this.text[this.place++]}}switch(this.state){case i:return this.neutral(e);case n:return this.keyword(e);case o:return this.quoted(e);case s:return this.afterquote(e);case a:return this.number(e);case l:return}};p.prototype.afterquote=function(e){if(e==='"'){this.word+='"';this.state=o;return}if(h.test(e)){this.word=this.word.trim();this.afterItem(e);return}throw new Error("havn't handled \""+e+'" in afterquote yet, index '+this.place)};p.prototype.afterItem=function(e){if(e===","){if(this.word!==null){this.currentObject.push(this.word)}this.word=null;this.state=i;return}if(e==="]"){this.level--;if(this.word!==null){this.currentObject.push(this.word);this.word=null}this.state=i;this.currentObject=this.stack.pop();if(!this.currentObject){this.state=l}return}};p.prototype.number=function(e){if(d.test(e)){this.word+=e;return}if(h.test(e)){this.word=parseFloat(this.word);this.afterItem(e);return}throw new Error("havn't handled \""+e+'" in number yet, index '+this.place)};p.prototype.quoted=function(e){if(e==='"'){this.state=s;return}this.word+=e;return};p.prototype.keyword=function(e){if(f.test(e)){this.word+=e;return}if(e==="["){var t=[];t.push(this.word);this.level++;if(this.root===null){this.root=t}else{this.currentObject.push(t)}this.stack.push(this.currentObject);this.currentObject=t;this.state=i;return}if(h.test(e)){this.afterItem(e);return}throw new Error("havn't handled \""+e+'" in keyword yet, index '+this.place)};p.prototype.neutral=function(e){if(c.test(e)){this.word=e;this.state=n;return}if(e==='"'){this.word="";this.state=o;return}if(d.test(e)){this.word=e;this.state=a;return}if(h.test(e)){this.afterItem(e);return}throw new Error("havn't handled \""+e+'" in neutral yet, index '+this.place)};p.prototype.output=function(){while(this.place<this.text.length){this.readCharicter()}if(this.state===l){return this.root}throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function v(e){var t=new p(e);return t.output()}function g(e,t,r){if(Array.isArray(t)){r.unshift(t);t=null}var i=t?{}:e;var n=r.reduce(function(e,t){m(t,e);return e},i);if(t){e[t]=n}}function m(e,t){if(!Array.isArray(e)){t[e]=true;return}var r=e.shift();if(r==="PARAMETER"){r=e.shift()}if(e.length===1){if(Array.isArray(e[0])){t[r]={};m(e[0],t[r]);return}t[r]=e[0];return}if(!e.length){t[r]=true;return}if(r==="TOWGS84"){t[r]=e;return}if(!Array.isArray(r)){t[r]={}}var i;switch(r){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[r]={name:e[0].toLowerCase(),convert:e[1]};if(e.length===3){m(e[2],t[r])}return;case"SPHEROID":case"ELLIPSOID":t[r]={name:e[0],a:e[1],rf:e[2]};if(e.length===4){m(e[3],t[r])}return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":e[0]=["name",e[0]];g(t,r,e);return;default:i=-1;while(++i<e.length){if(!Array.isArray(e[i])){return m(e,t[r])}}return g(t,r,e)}}var y=.017453292519943295;function _(e,t){var r=t[0];var i=t[1];if(!(r in e)&&i in e){e[r]=e[i];if(t.length===3){e[r]=t[2](e[r])}}}function b(e){return e*y}function w(e){if(e.type==="GEOGCS"){e.projName="longlat"}else if(e.type==="LOCAL_CS"){e.projName="identity";e.local=true}else{if(typeof e.PROJECTION==="object"){e.projName=Object.keys(e.PROJECTION)[0]}else{e.projName=e.PROJECTION}}if(e.UNIT){e.units=e.UNIT.name.toLowerCase();if(e.units==="metre"){e.units="meter"}if(e.UNIT.convert){if(e.type==="GEOGCS"){if(e.DATUM&&e.DATUM.SPHEROID){e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a}}else{e.to_meter=e.UNIT.convert}}}var t=e.GEOGCS;if(e.type==="GEOGCS"){t=e}if(t){if(t.DATUM){e.datumCode=t.DATUM.name.toLowerCase()}else{e.datumCode=t.name.toLowerCase()}if(e.datumCode.slice(0,2)==="d_"){e.datumCode=e.datumCode.slice(2)}if(e.datumCode==="new_zealand_geodetic_datum_1949"||e.datumCode==="new_zealand_1949"){e.datumCode="nzgd49"}if(e.datumCode==="wgs_1984"){if(e.PROJECTION==="Mercator_Auxiliary_Sphere"){e.sphere=true}e.datumCode="wgs84"}if(e.datumCode.slice(-6)==="_ferro"){e.datumCode=e.datumCode.slice(0,-6)}if(e.datumCode.slice(-8)==="_jakarta"){e.datumCode=e.datumCode.slice(0,-8)}if(~e.datumCode.indexOf("belge")){e.datumCode="rnb72"}if(t.DATUM&&t.DATUM.SPHEROID){e.ellps=t.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk");if(e.ellps.toLowerCase().slice(0,13)==="international"){e.ellps="intl"}e.a=t.DATUM.SPHEROID.a;e.rf=parseFloat(t.DATUM.SPHEROID.rf,10)}if(t.DATUM&&t.DATUM.TOWGS84){e.datum_params=t.DATUM.TOWGS84}if(~e.datumCode.indexOf("osgb_1936")){e.datumCode="osgb36"}if(~e.datumCode.indexOf("osni_1952")){e.datumCode="osni52"}if(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965")){e.datumCode="ire65"}if(e.datumCode==="ch1903+"){e.datumCode="ch1903"}if(~e.datumCode.indexOf("israel")){e.datumCode="isr93"}}if(e.b&&!isFinite(e.b)){e.b=e.a}function r(t){var r=e.to_meter||1;return t*r}var i=function(t){return _(e,t)};var n=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",b],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",b],["x0","false_easting",r],["y0","false_northing",r],["long0","central_meridian",b],["lat0","latitude_of_origin",b],["lat0","standard_parallel_1",b],["lat1","standard_parallel_1",b],["lat2","standard_parallel_2",b],["azimuth","Azimuth"],["alpha","azimuth",b],["srsCode","name"]];n.forEach(i);if(!e.long0&&e.longc&&(e.projName==="Albers_Conic_Equal_Area"||e.projName==="Lambert_Azimuthal_Equal_Area")){e.long0=e.longc}if(!e.lat_ts&&e.lat1&&(e.projName==="Stereographic_South_Pole"||e.projName==="Polar Stereographic (variant B)")){e.lat0=b(e.lat1>0?90:-90);e.lat_ts=e.lat1}}var S=function(e){var t=v(e);var r=t.shift();var i=t.shift();t.unshift(["name",i]);t.unshift(["type",r]);var n={};m(t,n);w(n);return n};e.exports=S},function(e,t,r){"use strict";var i=r(193);var n=r(298);i["a"].Proj.projections.add(n["a"]);var a="somerc";t["a"]=a},function(e,t,r){"use strict";var i=r(12);var n=r(5);var a=function e(){};a.prototype.stringToCoordinates=function(e){var t=e.match(/([\d\.']+)[\s,]+([\d\.']+)/);if(t){var r=parseFloat(t[1].replace("'",""));var i=parseFloat(t[2].replace("'",""));if(!isNaN(r)&&!isNaN(i)){return[r,i]}}return null};a.prototype.getProjectionList=function(e){var t=void 0,r=void 0;var n=[];e.forEach(function(e){t=e.toUpperCase();if(t.substr(0,5)!="EPSG:"){t="EPSG:"+t}r=i["g"](t);if(r!==null){n.push(r)}else{console.error("The projection "+t+" is not defined in ol.proj.")}});return n};a.prototype.tryProjections=function(e,t,r,a){var o=void 0;if(a===undefined){a=[r]}a.some(function(a){try{o=i["m"](e,a,r);if(n["f"](t,o)){return true}}catch(e){}o=null});return o};a.prototype.tryProjectionsWithInversion=function(e,t,r,i){var n=this.tryProjections(e,t,r,i);if(n===null){n=this.tryProjections(e.reverse(),t,r,i)}return n};a.module=angular.module("ngeoAutoProjection",[]);a.module.service("ngeoAutoProjection",a);t["a"]=a},function(e,t,r){"use strict";var i=r(66);var n=function e(t,r){this.$http_=r;this.url_=t.get("fulltextsearchUrl");var n=this.url_.split("?");this.baseUrl_=n[0];var a=n.length==2?"?"+n[1]:"";this.defaultParams_=i["a"].decodeQueryString(a)};n.$inject=["$injector","$http"];n.$inject=["$injector","$http"];n.prototype.search=function(e,t){var r=this;var n=Object.assign({},this.defaultParams_,t);n["query"]=e;var a=this.baseUrl_+"?"+i["a"].encodeQueryString(n);return new Promise(function(e,t){r.$http_.get(a).then(function(t){return e(t["data"])}).catch(t)})};n.module=angular.module("gmfSearchFulltextSearch",[]);n.module.service("gmfSearchFulltextSearch",n);t["a"]=n},function(e,t,r){"use strict";var i=r(372);var n=r(302);var a=r(577);var o=r.n(a);var s=angular.module("gmfSearchModule",[i["a"].name,n["a"].module.name]);t["a"]=s},function(e,t,r){"use strict";(function(e){var i=r(48);var n=r(192);var a=r(19);var o=r(1);var s=r(78);var l=r(91);var u=r(52);var c=r(283);var f=r(197);var h=r(123);var d=r(9);var p=r(2);var v=r(132);var g=r(54);var m=r(121);var y=r(59);var _=r(22);var b=r(154);var w=r.n(b);function S(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var C=angular.module("gmfPrintComponent",[n["a"].module.name,a["a"].module.name,s["a"].module.name,l["a"].module.name,u["a"].module.name,c["a"].module.name,f["a"].module.name,h["a"].module.name]);C.value("gmfPrintTemplateUrl",function(e,t){var r=t["gmfPrintTemplateurl"];return r!==undefined?r:"gmf/print"});C.run(["$templateCache",function(e){e.put("gmf/print",r(483))}]);C.PrintStateEnum={NOT_IN_USE:"notInUse",PRINTING:"printing",ERROR_ON_REPORT:"errorOnReport",CAPABILITIES_NOT_LOADED:"capabilitiesNotLoaded",ERROR_ON_GETCAPABILITIES:"errorOnGetCapabilities"};C.value("gmfPrintState",{state:C.PrintStateEnum.CAPABILITIES_NOT_LOADED});x.$inject=["$element","$attrs","gmfPrintTemplateUrl"];function x(e,t,r){return r(e,t)}C.component_={bindings:{map:"<gmfPrintMap",active:"=gmfPrintActive",rotateMask:"<?gmfPrintRotatemask",fieldValues:"<?gmfPrintFieldvalues",hiddenAttributeNames:"<?gmfPrintHiddenattributes",attributesOut:"=?gmfPrintAttributesOut"},controller:"GmfPrintController",templateUrl:x,transclude:true};C.component("gmfPrint",C.component_);C.optionsLegendType;C.optionsType;C.Controller_=function(){t.$inject=["$element","$rootScope","$scope","$timeout","$q","$injector","gettextCatalog","ngeoLayerHelper","ngeoFeatureOverlayMgr","ngeoPrintUtils","ngeoCreatePrint","gmfPrintUrl","gmfAuthenticationService","ngeoQueryResult","$filter","gmfPrintState","gmfThemes"];function t(r,i,n,a,o,s,l,u,c,f,h,d,p,v,g,m,y){var _=this;S(this,t);this.gmfPrintState_=m;this.translate_=g("translate");this.map;this.active;this.rotateMask=false;this.fieldValues={};this.attributesOut;this.$rootScope_=i;this.$scope_=n;this.$timeout_=a;this.$q_=o;this.gettextCatalog_=l;this.ngeoLayerHelper_=u;this.featureOverlayLayer_=c.getLayer();this.ngeoPrintUtils_=f;this.ngeoPrint_=h(d);this.ngeoQueryResult_=v;this.gmfAuthenticationService_=p;this.gmfThemes_=y;this.cacheVersion_="0";if(s.has("cacheVersion")){this.cacheVersion_=s.get("cacheVersion")}this.scaleInput=false;this.gmfLegendOptions_={useBbox:true,label:{},params:{}};if(s.has("gmfPrintOptions")){var b=s.get("gmfPrintOptions");if(b.scaleInput){this.scaleInput=b.scaleInput}if(b.legend){Object.assign(this.gmfLegendOptions_,b.legend)}}this.requestCanceler_=null;this.statusTimeoutPromise_=null;this.onDragPreviousMousePosition_=null;this.rotationTimeoutPromise_=null;this.postComposeListenerKey_;this.pointerDragListenerKey_;this.mapViewResolutionChangeKey_;this.curRef_="";this.formats_=[];this.layouts_=[];this.layout_={};this.paperSize_=[];this.layoutInfo={};this.rotation=0;this.hiddenAttributeNames;this.scaleManuallySelected_=false;this.rotationInput_=r.find(".gmf-print-rotation-input");this.rotationInput_.on("input",function(t){var r=e(t.target).val();if(r!==""){_.setRotation(r)}});this.rotationInput_.on("change",function(t){var r=e(t.target).val();if(r!==""){_.setRotation(r)}});this.postcomposeListener_;this.capabilities_;this.ogcServers_;this.currentThemes_}t.prototype.$onInit=function e(){var t=this;this.$scope_.$watch(function(){return t.gmfAuthenticationService_.getRoleId()},function(){t.gmfPrintState_.state=C.PrintStateEnum.CAPABILITIES_NOT_LOADED;t.capabilities_=null});this.$scope_.$watch(function(){return t.active},function(e){t.togglePrintPanel_(e)});this.$rootScope_.$on("gmfStartPrint",function(e,r){t.print(""+r)});this.$rootScope_.$on("gmfCancelPrint",function(){t.cancel()});this.gmfThemes_.getOgcServersObject().then(function(e){t.ogcServers_=e});this.gmfThemes_.getThemesObject().then(function(e){t.currentThemes_=e});var r=function e(){return t.paperSize_};var i=void 0;if(this.rotateMask){i=function e(){return t.rotation}}this.postcomposeListener_=this.ngeoPrintUtils_.createPrintMaskPostcompose(r,this.getScaleFn.bind(this),i)};t.prototype.getScaleFn=function e(t){o["a"].assert(this.layoutInfo.scales);o["a"].assert(this.layoutInfo.scale!==undefined);if(!this.scaleManuallySelected_&&(this.layoutInfo.scale===-1||d["f"](this.layoutInfo.scales,this.layoutInfo.scale))){var r=t.size;var i=t.viewState.resolution;this.layoutInfo.scale=this.getOptimalScale_(r,i)}return this.layoutInfo.scale};t.prototype.togglePrintPanel_=function e(t){var r=this;if(t){if(!this.capabilities_){this.getCapabilities_()}this.capabilities_.then(function(e){if(!r.active){return}r.gmfPrintState_.state=C.PrintStateEnum.NOT_IN_USE;r.parseCapabilities_(e);r.postComposeListenerKey_=p["a"](r.map,"postcompose",r.postcomposeListener_);r.pointerDragListenerKey_=p["a"](r.map,"pointerdrag",r.onPointerDrag_,r);r.mapViewResolutionChangeKey_=p["a"](r.map.getView(),"change:resolution",function(){r.scaleManuallySelected_=false});r.map.render()},function(e){r.gmfPrintState_.state=C.PrintStateEnum.ERROR_ON_GETCAPABILITIES;r.capabilities_=null})}else{p["e"](this.postComposeListenerKey_);p["e"](this.pointerDragListenerKey_);p["e"](this.mapViewResolutionChangeKey_);this.setRotation(0);this.map.render()}};t.prototype.getCapabilities_=function e(t){this.capabilities_=this.ngeoPrint_.getCapabilities({withCredentials:true,params:t?{role:t,cache_version:this.cacheVersion_}:{cache_version:this.cacheVersion_}})};t.prototype.parseCapabilities_=function e(t){var r=this;var i=t["data"];this.formats_=i["formats"]||[];this.layouts_=i["layouts"];this.layout_=i["layouts"][0];this.layoutInfo.layouts=[];this.layouts_.forEach(function(e){r.layoutInfo.layouts.push(e.name)});this.updateFields_()};t.prototype.updateFields_=function e(){var t=this;this.layoutInfo.layout=this.layout_.name;var r=this.isAttributeInCurrentLayout_("map");o["a"].assertObject(r);var i=r["clientInfo"];o["a"].assertObject(i);this.paperSize_=[i["width"],i["height"]];this.updateCustomFields_();var n=this.isAttributeInCurrentLayout_("legend");if(this.layoutInfo.legend===undefined){this.layoutInfo.legend=!!(n!==undefined?n:this.fieldValues["legend"])}this.layoutInfo.scales=i["scales"]||[];this.layoutInfo.dpis=i["dpiSuggestions"]||[];var a=this.map.getSize();var s=this.map.getView().getResolution();this.layoutInfo.scale=this.getOptimalScale_(a,s);this.layoutInfo.dpi=this.layoutInfo.dpi&&this.layoutInfo.dpis.indexOf(this.layoutInfo.dpi)>0?this.layoutInfo.dpi:this.layoutInfo.dpis[0];this.layoutInfo.formats={};this.formats_.forEach(function(e){t.layoutInfo.formats[e]=true});this.attributesOut=this.layoutInfo["simpleAttributes"];this.map.render()};t.prototype.updateCustomFields_=function e(){var t=this;var r=void 0,i=void 0,n=void 0,a=void 0;if(!this.layoutInfo.simpleAttributes){this.layoutInfo.simpleAttributes=[]}var o=this.layoutInfo.simpleAttributes;var s=o.splice(0,o.length);this.layout_.attributes.forEach(function(e){if(!e["clientParams"]){r=""+e.name;var o=e.default;n=o!==undefined&&o!==""?o:t.fieldValues[r];i=""+e.type;switch(i){case"String":a=r==="comments"?"textarea":"text";break;case"Boolean":a="checkbox";break;case"Number":a="number";n=parseFloat(n);n=isNaN(n)?0:n;break;default:a=i}s.forEach(function(e){if(e.name===r&&e.type===a){return n=e.value}});t.layoutInfo.simpleAttributes.push({name:r,type:a,value:n})}})};t.prototype.isAttributeInCurrentLayout_=function e(t){var r=null;this.layout_.attributes.forEach(function(e){if(e.name===t){return r=e}});return r};t.prototype.setRotation=function e(t){this.rotation=_["a"](t,-180,180);this.rotationInput_.val(this.rotation.toString());if(this.rotateMask){this.map.render()}else{this.map.getView().setRotation(_["i"](this.rotation))}};t.prototype.onPointerDrag_=function e(t){var r=this;var i=t.originalEvent;var n=this.map.getView().getCenter();if(this.active&&i.altKey&&i.shiftKey&&n){var a=this.map.getPixelFromCoordinate(n);var o=t.pixel;if(this.rotationTimeoutPromise_===null){this.onDragPreviousMousePosition_=null}else{this.$timeout_.cancel(this.rotationTimeoutPromise_);var s=this.onDragPreviousMousePosition_[0]-a[0];var l=this.onDragPreviousMousePosition_[1]-a[1];var u=o[0]-a[0];var c=o[1]-a[1];var f=Math.sqrt(Math.pow(s,2)+Math.pow(l,2));var h=Math.sqrt(Math.pow(u,2)+Math.pow(c,2));var d=s*c-l*u>0?1:-1;var p=(s*u+l*c)/(f*h);p=p<=1?d*Math.acos(p):0;var v=h/200;var g=Math.round(_["h"](p)*v);this.setRotation(this.rotation+g);this.$scope_.$digest()}this.rotationTimeoutPromise_=this.$timeout_(function(){r.rotationTimeoutPromise_=null},500);this.onDragPreviousMousePosition_=o}};t.prototype.print=function e(t){if(this.gmfPrintState_.state===C.PrintStateEnum.PRINTING){return}this.requestCanceler_=this.$q_.defer();this.gmfPrintState_.state=C.PrintStateEnum.PRINTING;var r=this.map.getSize();var i=this.map.getView().getResolution()||0;var n=this.layoutInfo.scale||this.getOptimalScale_(r,i);var a=this.getDataSource_();var s={datasource:a};if(this.layoutInfo.simpleAttributes){this.layoutInfo.simpleAttributes.forEach(function(e){s[e.name]=e.value})}if(this.layoutInfo.legend){var l=this.map.getView().getCenter();var u=this.paperSize_[0]*n/2/f["a"].INCHES_PER_METER_/f["a"].DOTS_PER_INCH_;var c=this.paperSize_[1]*n/2/f["a"].INCHES_PER_METER_/f["a"].DOTS_PER_INCH_;var h=[l[0]-u,l[1]-c,l[0]+u,l[1]+c];var d=this.getLegend_(n,this.layoutInfo.dpi,h);if(d!==null){s["legend"]=d}}o["a"].assertNumber(this.layoutInfo.dpi);o["a"].assertString(this.layoutInfo.layout);var p=new y["a"]({});p.setView(this.map.getView());var g=this.ngeoLayerHelper_.getFlatLayers(this.map.getLayerGroup());var _=[];var b=true;for(var w=0,S=g.length;w<S;w++){var x=g[w];var O=x.get("metadata");if(O){var T=O.ogcServer;var E=O.printLayers||O.layers;if(T&&E){var M=this.ogcServers_[T];if(M){x=this.ngeoLayerHelper_.createBasicWMSLayer(M.url,E,M.imageType,M.type)}else{console.error("Missing ogcServer:",T)}}}if(x instanceof v["a"]&&x.get("printNativeAngle")===false){b=false}_.push(x)}p.setLayerGroup(new m["a"]({layers:_,printNativeAngle:b}));var j=this.ngeoPrint_.createSpec(p,n,this.layoutInfo.dpi,this.layoutInfo.layout,t,s);var A=[];this.ngeoPrint_.encodeLayer(A,this.featureOverlayLayer_,i);if(A.length>0){j.attributes.map.layers.unshift(A[0])}this.ngeoPrint_.createReport(j,{timeout:this.requestCanceler_.promise}).then(this.handleCreateReportSuccess_.bind(this),this.handleCreateReportError_.bind(this));p.setTarget(null)};t.prototype.cancel=function e(){if(this.requestCanceler_!==null){this.requestCanceler_.resolve()}if(this.statusTimeoutPromise_!==null){this.$timeout_.cancel(this.statusTimeoutPromise_)}if(this.curRef_.length>0){this.ngeoPrint_.cancel(this.curRef_)}this.resetPrintStates_()};t.prototype.resetPrintStates_=function e(t){this.gmfPrintState_.state=t||C.PrintStateEnum.NOT_IN_USE;this.curRef_=""};t.prototype.getDataSource_=function e(){var t=void 0,r=void 0,i=void 0;var n=[];var a=this.ngeoQueryResult_.sources;a.forEach(function(e){r=[];i=[];e.features.forEach(function(e,t){o["a"].assert(e);var n=u["a"].getFilteredFeatureValues(e);if(t===0){i=Object.keys(n).map(function e(t){return this.translate_(t)},this)}r.push(Object.keys(n).map(function(e){return n[e]}))},this);if(i.length){t={title:this.translate_(e.label),table:{columns:i,data:r}};n.push(t)}},this);return n};t.prototype.getOptimalScale_=function e(t,r){var i=this.layoutInfo.scales.slice();if(t!==undefined&&r!==undefined){return this.ngeoPrintUtils_.getOptimalScale(t,r,this.paperSize_,i.reverse())}return this.layoutInfo.scales[0]};t.prototype.handleCreateReportSuccess_=function e(t){var r=t.data;var i=r.ref;o["a"].assert(i.length>0);this.curRef_=i;this.getStatus_(i)};t.prototype.getStatus_=function e(t){this.requestCanceler_=this.$q_.defer();this.ngeoPrint_.getStatus(t,{timeout:this.requestCanceler_.promise}).then(this.handleGetStatusSuccess_.bind(this,t),this.handleCreateReportError_.bind(this))};t.prototype.handleGetStatusSuccess_=function e(t,r){var i=this;var n=r.data;var a=n.done;if(a){if(n.status!="error"){window.location.href=this.ngeoPrint_.getReportUrl(t);this.resetPrintStates_()}else{console.error(n.error);this.handleCreateReportError_()}}else{this.statusTimeoutPromise_=this.$timeout_(function(){i.getStatus_(t)},1e3,false)}};t.prototype.handleCreateReportError_=function e(){this.resetPrintStates_(C.PrintStateEnum.ERROR_ON_REPORT)};t.prototype.getLegend_=function e(t,r,n){var a=this;var o={classes:[]};var s=this.gettextCatalog_;var l=this.ngeoLayerHelper_.getGroupFromMap(this.map,i["a"].DATALAYERGROUP_NAME);var u=this.ngeoLayerHelper_.getFlatLayers(l);u.reverse().forEach(function(e){var i=[];if(e.getVisible()&&e.getSource()){if(e instanceof g["a"]){var l=""+e.get("layerNodeName");var u=a.getMetadataLegendImage_(l);if(!u){u=a.ngeoLayerHelper_.getWMTSLegendURL(e)}if(u){i.push({name:s.getString(l),icons:[u]})}}else{var c=e.getSource();var f=c.getParams()["LAYERS"].split(",");f.forEach(function(o){var l=a.getMetadataLegendImage_(o);if(!l){l=a.ngeoLayerHelper_.getWMSLegendURL(c.getUrl(),o,t,undefined,undefined,undefined,c.serverType_,r,a.gmfLegendOptions_.useBbox?n:undefined,a.map.getView().getProjection().getCode(),a.gmfLegendOptions_.params[e.getSource().serverType_])}if(l&&o.length!==0){i.push(Object.assign({name:a.gmfLegendOptions_.label[e.getSource().serverType_]===false?"":s.getString(o),icons:[l]},e.getSource().serverType_==="qgis"?{dpi:r}:{}))}})}}if(i.length>0){o["classes"].push({classes:i})}});return o["classes"].length>0?o:null};t.prototype.getMetadataLegendImage_=function e(t){var r=a["a"].findGroupByLayerNodeName(this.currentThemes_,t);var i=void 0;if(r&&r.children){i=a["a"].findObjectByName(r.children,t)}var n=void 0;if(i&&i.metadata){n=i.metadata.legendImage}return n};t.prototype.setLayout=function e(t){var r=void 0;this.layouts_.forEach(function(e){if(e.name===t){r=e;return true}});this.layout_=r;this.updateFields_()};t.prototype.getSetScale=function e(t){if(t!==undefined){var r=this.map.getSize()||[0,0];this.layoutInfo.scale=t;var i=this.ngeoPrintUtils_.getOptimalResolution(r,this.paperSize_,t);var n=this.map.getView().constrainResolution(i,0,1);this.map.getView().setResolution(n);this.map.render();this.scaleManuallySelected_=true}return this.layoutInfo.scale};t.prototype.setDpi=function e(t){this.layoutInfo.dpi=t};t.prototype.isState=function e(t){return this.gmfPrintState_.state===C.PrintStateEnum[t]};return t}();C.controller("GmfPrintController",C.Controller_);t["a"]=C}).call(this,r(24))},function(e,t,r){"use strict";var i=r(227);var n=r(2);var a=angular.module("gmfObjecteditingGetWMSFeatureComponent",[i["a"].module.name]);a.directive_=function(){return{controller:"gmfObjecteditinggetwmsfeatureController",scope:{active:"=gmfObjecteditinggetwmsfeatureActive",features:"<gmfObjecteditinggetwmsfeatureFeatures",layerInfo:"=gmfObjecteditinggetwmsfeatureLayerinfo",map:"<gmfObjecteditinggetwmsfeatureMap"},bindToController:true}};a.directive("gmfObjecteditinggetwmsfeature",a.directive_);a.Controller_=function(e,t){var r=this;this.active;e.$watch(function(){return r.active},this.handleActiveChange_.bind(this));this.features;this.layerInfo;this.map;this.gmfObjectEditingQuery_=t};a.Controller_.$inject=["$scope","gmfObjectEditingQuery"];a.Controller_.prototype.handleActiveChange_=function(e){if(e){n["a"](this.map,"click",this.handleMapClick_,this)}else{n["c"](this.map,"click",this.handleMapClick_,this)}};a.Controller_.prototype.handleMapClick_=function(e){var t=this;this.gmfObjectEditingQuery_.getFeatureInfo(this.layerInfo,e.coordinate,this.map).then(function(e){if(e){t.features.push(e)}})};a.controller("gmfObjecteditinggetwmsfeatureController",a.Controller_);t["a"]=a},function(e,t,r){"use strict";var i=r(242);var n=r(137);function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=angular.module("gmfPermalinkShareComponent",[i["a"].module.name,n["a"].module.name]);o.run(["$templateCache",function(e){e.put("gmf/permalink/shareComponent",r(489))}]);o.value("gmfPermalinkShareTemplateUrl",function(e){var t=e["gmfPermalinkShareTemplateUrl"];return t!==undefined?t:"gmf/permalink/shareComponent"});s.$inject=["$attrs","gmfPermalinkShareTemplateUrl"];function s(e,t){return t(e)}o.component_={bindings:{enableEmail:"<gmfShareEmail"},controller:"GmfShareController",templateUrl:s};o.component("gmfShare",o.component_);var l=function(){e.$inject=["$scope","ngeoLocation","gmfShareService","$q","$attrs"];function e(t,r,n,o,s){a(this,e);this.$scope_=t;this.gmfShareService_=n;this.$q_=o;this.ngeoLocation_=r;this.enableEmail;this.shortLink;this.email;this.message;this.permalink_=this.ngeoLocation_.getUriString();this.showLengthWarning=this.permalink_.length>i["a"].URL_MAX_LEN||r.getPath()>i["a"].URL_PATH_MAX_LEN;this.successfullySent=false;this.errorOnsend=false;this.errorOnGetShortUrl=false;this.getShortUrl()}e.prototype.getShortUrl=function e(){var t=this;this.$q_.when(this.gmfShareService_.getShortUrl(this.permalink_)).then(function(e){t.shortLink=e.data.short_url;t.errorOnGetShortUrl=false},function(e){t.shortLink=t.permalink;t.errorOnGetShortUrl=true})};e.prototype.sendShortUrl=function e(){var t=this;if(this.$scope_["gmfShareForm"].$valid){this.$q_.when(this.gmfShareService_.sendShortUrl(this.permalink_,this.email,this.message)).then(function(e){t.successfullySent=true},function(e){t.errorOnsend=true})}};return e}();o.controller("GmfShareController",l);t["a"]=o},function(e,t,r){"use strict";var i=r(184);var n=r(242);var a=r(306);var o=r(580);var s=r.n(o);var l=angular.module("gmfPermalinkModule",[i["a"].module.name,n["a"].module.name,a["a"].name]);t["a"]=l},function(e,t,r){"use strict";var i=r(1);var n=r(28);var a=r(166);var o=r(59);var s=r(15);var l=r(38);var u=r(91);var c=r(86);var f=angular.module("gmfDrawProfileLine",[u["a"].module.name]);f.directive_=function(){return{scope:true,controller:"GmfDrawprofilelineController as ctrl",restrict:"A",bindToController:{getMapFn:"&gmfDrawprofilelineMap",line:"=gmfDrawprofilelineLine",active:"=gmfDrawprofilelineActive",getStyleFn:"&?gmfDrawprofilelineStyle"}}};f.directive("gmfDrawprofileline",f.directive_);f.Controller_=function(e,t,r,o){var u=this;this.line;this.map_=null;this.active;this.features_=new n["b"];var f=o.getFeatureOverlay();f.setFeatures(this.features_);var h=void 0;var d=this["getStyleFn"];if(d){h=d();i["a"].assertInstanceof(h,s["c"])}else{h=new s["c"]({stroke:new l["a"]({color:"#ffcc33",width:2})})}f.setStyle(h);this.interaction=new a["a"]({type:"LineString",features:this.features_});c["a"].interaction(this.interaction);this.interaction.on("change:active",function(){if(u.interaction.getActive()){u.clear_()}});this.interaction.on("drawend",function(e){u.line=e.feature.getGeometry();r(function(){u.interaction.setActive(false)},0)});e.$watch(function(){return u.line},function(e,t){if(e===null){u.clear_()}});e.$watch(function(){return u.active},function(e){if(e===false){u.clear_()}u.interaction.setActive(u.active)})};f.Controller_.$inject=["$scope","$element","$timeout","ngeoFeatureOverlayMgr"];f.Controller_.prototype.$onInit=function(){var e=this["getMapFn"]();i["a"].assertInstanceof(e,o["a"]);this.map_=e;this.map_.addInteraction(this.interaction)};f.Controller_.prototype.clear_=function(){this.features_.clear();this.line=null};f.controller("GmfDrawprofilelineController",f.Controller_);t["a"]=f},function(e,t,r){(function(e,i){true?i(t,r(99)):undefined})(this,function(e,t){"use strict";function r(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);t.setFullYear(e.y);return t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function i(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));t.setUTCFullYear(e.y);return t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function n(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function a(e){var a=e.dateTime,s=e.date,l=e.time,u=e.periods,c=e.days,f=e.shortDays,ge=e.months,me=e.shortMonths;var ye=h(u),_e=d(u),be=h(c),we=d(c),Se=h(f),Ce=d(f),xe=h(ge),Oe=d(ge),Te=h(me),Ee=d(me);var Me={a:He,A:Ye,b:We,B:Ve,c:null,d:I,e:I,f:N,H:D,I:R,j:L,L:$,m:F,M:G,p:ze,Q:pe,s:ve,S:U,u:H,U:Y,V:W,w:V,W:z,x:null,X:null,y:q,Y:B,Z:X,"%":de};var je={a:qe,A:Be,b:Xe,B:Ke,c:null,d:K,e:K,f:te,H:Z,I:Q,j:J,L:ee,m:re,M:ie,p:Ze,Q:pe,s:ve,S:ne,u:ae,U:oe,V:se,w:le,W:ue,x:null,X:null,y:ce,Y:fe,Z:he,"%":de};var Ae={a:Re,A:Le,b:$e,B:Ne,c:Fe,d:C,e:C,f:j,H:O,I:O,j:x,L:M,m:S,M:T,p:De,Q:P,s:k,S:E,u:v,U:g,V:m,w:p,W:y,x:Ge,X:Ue,y:b,Y:_,Z:w,"%":A};Me.x=Pe(s,Me);Me.X=Pe(l,Me);Me.c=Pe(a,Me);je.x=Pe(s,je);je.X=Pe(l,je);je.c=Pe(a,je);function Pe(e,t){return function(r){var i=[],n=-1,a=0,s=e.length,l,u,c;if(!(r instanceof Date))r=new Date(+r);while(++n<s){if(e.charCodeAt(n)===37){i.push(e.slice(a,n));if((u=o[l=e.charAt(++n)])!=null)l=e.charAt(++n);else u=l==="e"?" ":"0";if(c=t[l])l=c(r,u);i.push(l);a=n+1}}i.push(e.slice(a,n));return i.join("")}}function ke(e,r){return function(a){var o=n(1900),s=Ie(o,e,a+="",0),l,u;if(s!=a.length)return null;if("Q"in o)return new Date(o.Q);if("p"in o)o.H=o.H%12+o.p*12;if("V"in o){if(o.V<1||o.V>53)return null;if(!("w"in o))o.w=1;if("Z"in o){l=i(n(o.y)),u=l.getUTCDay();l=u>4||u===0?t.utcMonday.ceil(l):t.utcMonday(l);l=t.utcDay.offset(l,(o.V-1)*7);o.y=l.getUTCFullYear();o.m=l.getUTCMonth();o.d=l.getUTCDate()+(o.w+6)%7}else{l=r(n(o.y)),u=l.getDay();l=u>4||u===0?t.timeMonday.ceil(l):t.timeMonday(l);l=t.timeDay.offset(l,(o.V-1)*7);o.y=l.getFullYear();o.m=l.getMonth();o.d=l.getDate()+(o.w+6)%7}}else if("W"in o||"U"in o){if(!("w"in o))o.w="u"in o?o.u%7:"W"in o?1:0;u="Z"in o?i(n(o.y)).getUTCDay():r(n(o.y)).getDay();o.m=0;o.d="W"in o?(o.w+6)%7+o.W*7-(u+5)%7:o.w+o.U*7-(u+6)%7}if("Z"in o){o.H+=o.Z/100|0;o.M+=o.Z%100;return i(o)}return r(o)}}function Ie(e,t,r,i){var n=0,a=t.length,s=r.length,l,u;while(n<a){if(i>=s)return-1;l=t.charCodeAt(n++);if(l===37){l=t.charAt(n++);u=Ae[l in o?t.charAt(n++):l];if(!u||(i=u(e,r,i))<0)return-1}else if(l!=r.charCodeAt(i++)){return-1}}return i}function De(e,t,r){var i=ye.exec(t.slice(r));return i?(e.p=_e[i[0].toLowerCase()],r+i[0].length):-1}function Re(e,t,r){var i=Se.exec(t.slice(r));return i?(e.w=Ce[i[0].toLowerCase()],r+i[0].length):-1}function Le(e,t,r){var i=be.exec(t.slice(r));return i?(e.w=we[i[0].toLowerCase()],r+i[0].length):-1}function $e(e,t,r){var i=Te.exec(t.slice(r));return i?(e.m=Ee[i[0].toLowerCase()],r+i[0].length):-1}function Ne(e,t,r){var i=xe.exec(t.slice(r));return i?(e.m=Oe[i[0].toLowerCase()],r+i[0].length):-1}function Fe(e,t,r){return Ie(e,a,t,r)}function Ge(e,t,r){return Ie(e,s,t,r)}function Ue(e,t,r){return Ie(e,l,t,r)}function He(e){return f[e.getDay()]}function Ye(e){return c[e.getDay()]}function We(e){return me[e.getMonth()]}function Ve(e){return ge[e.getMonth()]}function ze(e){return u[+(e.getHours()>=12)]}function qe(e){return f[e.getUTCDay()]}function Be(e){return c[e.getUTCDay()]}function Xe(e){return me[e.getUTCMonth()]}function Ke(e){return ge[e.getUTCMonth()]}function Ze(e){return u[+(e.getUTCHours()>=12)]}return{format:function(e){var t=Pe(e+="",Me);t.toString=function(){return e};return t},parse:function(e){var t=ke(e+="",r);t.toString=function(){return e};return t},utcFormat:function(e){var t=Pe(e+="",je);t.toString=function(){return e};return t},utcParse:function(e){var t=ke(e,i);t.toString=function(){return e};return t}}}var o={"-":"",_:" ",0:"0"},s=/^\s*\d+/,l=/^%/,u=/[\\^$*+?|[\]().{}]/g;function c(e,t,r){var i=e<0?"-":"",n=(i?-e:e)+"",a=n.length;return i+(a<r?new Array(r-a+1).join(t)+n:n)}function f(e){return e.replace(u,"\\$&")}function h(e){return new RegExp("^(?:"+e.map(f).join("|")+")","i")}function d(e){var t={},r=-1,i=e.length;while(++r<i)t[e[r].toLowerCase()]=r;return t}function p(e,t,r){var i=s.exec(t.slice(r,r+1));return i?(e.w=+i[0],r+i[0].length):-1}function v(e,t,r){var i=s.exec(t.slice(r,r+1));return i?(e.u=+i[0],r+i[0].length):-1}function g(e,t,r){var i=s.exec(t.slice(r,r+2));return i?(e.U=+i[0],r+i[0].length):-1}function m(e,t,r){var i=s.exec(t.slice(r,r+2));return i?(e.V=+i[0],r+i[0].length):-1}function y(e,t,r){var i=s.exec(t.slice(r,r+2));return i?(e.W=+i[0],r+i[0].length):-1}function _(e,t,r){var i=s.exec(t.slice(r,r+4));return i?(e.y=+i[0],r+i[0].length):-1}function b(e,t,r){var i=s.exec(t.slice(r,r+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),r+i[0].length):-1}function w(e,t,r){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),r+i[0].length):-1}function S(e,t,r){var i=s.exec(t.slice(r,r+2));return i?(e.m=i[0]-1,r+i[0].length):-1}function C(e,t,r){var i=s.exec(t.slice(r,r+2));return i?(e.d=+i[0],r+i[0].length):-1}function x(e,t,r){var i=s.exec(t.slice(r,r+3));return i?(e.m=0,e.d=+i[0],r+i[0].length):-1}function O(e,t,r){var i=s.exec(t.slice(r,r+2));return i?(e.H=+i[0],r+i[0].length):-1}function T(e,t,r){var i=s.exec(t.slice(r,r+2));return i?(e.M=+i[0],r+i[0].length):-1}function E(e,t,r){var i=s.exec(t.slice(r,r+2));return i?(e.S=+i[0],r+i[0].length):-1}function M(e,t,r){var i=s.exec(t.slice(r,r+3));return i?(e.L=+i[0],r+i[0].length):-1}function j(e,t,r){var i=s.exec(t.slice(r,r+6));return i?(e.L=Math.floor(i[0]/1e3),r+i[0].length):-1}function A(e,t,r){var i=l.exec(t.slice(r,r+1));return i?r+i[0].length:-1}function P(e,t,r){var i=s.exec(t.slice(r));return i?(e.Q=+i[0],r+i[0].length):-1}function k(e,t,r){var i=s.exec(t.slice(r));return i?(e.Q=+i[0]*1e3,r+i[0].length):-1}function I(e,t){return c(e.getDate(),t,2)}function D(e,t){return c(e.getHours(),t,2)}function R(e,t){return c(e.getHours()%12||12,t,2)}function L(e,r){return c(1+t.timeDay.count(t.timeYear(e),e),r,3)}function $(e,t){return c(e.getMilliseconds(),t,3)}function N(e,t){return $(e,t)+"000"}function F(e,t){return c(e.getMonth()+1,t,2)}function G(e,t){return c(e.getMinutes(),t,2)}function U(e,t){return c(e.getSeconds(),t,2)}function H(e){var t=e.getDay();return t===0?7:t}function Y(e,r){return c(t.timeSunday.count(t.timeYear(e),e),r,2)}function W(e,r){var i=e.getDay();e=i>=4||i===0?t.timeThursday(e):t.timeThursday.ceil(e);return c(t.timeThursday.count(t.timeYear(e),e)+(t.timeYear(e).getDay()===4),r,2)}function V(e){return e.getDay()}function z(e,r){return c(t.timeMonday.count(t.timeYear(e),e),r,2)}function q(e,t){return c(e.getFullYear()%100,t,2)}function B(e,t){return c(e.getFullYear()%1e4,t,4)}function X(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+c(t/60|0,"0",2)+c(t%60,"0",2)}function K(e,t){return c(e.getUTCDate(),t,2)}function Z(e,t){return c(e.getUTCHours(),t,2)}function Q(e,t){return c(e.getUTCHours()%12||12,t,2)}function J(e,r){return c(1+t.utcDay.count(t.utcYear(e),e),r,3)}function ee(e,t){return c(e.getUTCMilliseconds(),t,3)}function te(e,t){return ee(e,t)+"000"}function re(e,t){return c(e.getUTCMonth()+1,t,2)}function ie(e,t){return c(e.getUTCMinutes(),t,2)}function ne(e,t){return c(e.getUTCSeconds(),t,2)}function ae(e){var t=e.getUTCDay();return t===0?7:t}function oe(e,r){return c(t.utcSunday.count(t.utcYear(e),e),r,2)}function se(e,r){var i=e.getUTCDay();e=i>=4||i===0?t.utcThursday(e):t.utcThursday.ceil(e);return c(t.utcThursday.count(t.utcYear(e),e)+(t.utcYear(e).getUTCDay()===4),r,2)}function le(e){return e.getUTCDay()}function ue(e,r){return c(t.utcMonday.count(t.utcYear(e),e),r,2)}function ce(e,t){return c(e.getUTCFullYear()%100,t,2)}function fe(e,t){return c(e.getUTCFullYear()%1e4,t,4)}function he(){return"+0000"}function de(){return"%"}function pe(e){return+e}function ve(e){return Math.floor(+e/1e3)}var ge;me({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function me(t){ge=a(t);e.timeFormat=ge.format;e.timeParse=ge.parse;e.utcFormat=ge.utcFormat;e.utcParse=ge.utcParse;return ge}var ye="%Y-%m-%dT%H:%M:%S.%LZ";function _e(e){return e.toISOString()}var be=Date.prototype.toISOString?_e:e.utcFormat(ye);function we(e){var t=new Date(e);return isNaN(t)?null:t}var Se=+new Date("2000-01-01T00:00:00.000Z")?we:e.utcParse(ye);e.timeFormatDefaultLocale=me;e.timeFormatLocale=a;e.isoFormat=be;e.isoParse=Se;Object.defineProperty(e,"__esModule",{value:true})})},function(e,t,r){"use strict";var i=r(106);var n=r(503);var a=r.n(n);var o=r(502);var s=r.n(o);var l=r(583);var u=r.n(l);var c=angular.module("gmfLayertreeTimeSliderComponent",[i["a"].module.name,"ui.slider"]);c.run(["$templateCache",function(e){e.put("gmf/layertree/timesliderComponent",r(500))}]);c.directive_=function(e,t){return{scope:{onDateSelected:"&gmfTimeSliderOnDateSelected",time:"=gmfTimeSliderTime"},bindToController:true,controller:"gmfTimeSliderController as sliderCtrl",restrict:"AE",templateUrl:"gmf/layertree/timesliderComponent",link:{pre:function e(t,r,i,n){n.init();n.sliderOptions["stop"]=a;n.sliderOptions["slide"]=o;function a(e,r){n.onDateSelected({time:o(e,r)});t.$apply()}function o(e,r){var i=void 0,a=void 0,o=void 0;if(r.values){i=new Date(n.getClosestValue_(r.values[0]));a=new Date(n.getClosestValue_(r.values[1]));n.dates=[i,a];o={start:i.getTime(),end:a.getTime()}}else{i=new Date(n.getClosestValue_(r.value));n.dates=i;o={start:i.getTime()}}t.$apply();return o}}}}};c.directive_.$inject=["$timeout","$filter"];c.directive("gmfTimeSlider",c.directive_);c.Controller_=function(e,t){this.ngeoWMSTime_=t;this.onDateSelected;this.time;this.isModeRange;this.minValue;this.maxValue;this.timeValueList;this.sliderOptions;this.dates};c.Controller_.$inject=["$scope","ngeoWMSTime"];c.Controller_.prototype.init=function(){this.timeValueList=this.getTimeValueList_();var e=this.ngeoWMSTime_.getOptions(this.time);this.isModeRange=this.time.mode==="range";this.minValue=e.minDate;this.maxValue=e.maxDate;this.dates=this.isModeRange?[e.values[0],e.values[1]]:e.values;this.sliderOptions={range:this.isModeRange,min:this.minValue,max:this.maxValue}};c.Controller_.prototype.getTimeValueList_=function(){var e=this.time;var t=null;var r=new Date(this.minValue);var i=new Date(this.maxValue);if(e.values){t=[];e.values.forEach(function(e){t.push(new Date(e).getTime())})}else{var n=1024;var a=new Date(r.getTime());a.setFullYear(r.getFullYear()+n*e.interval[0]);a.setMonth(r.getMonth()+n*e.interval[1],r.getDate()+n*e.interval[2]);a.setSeconds(r.getSeconds()+n*e.interval[3]);if(a>i){t=[];for(var o=0;;o++){var s=new Date(r.getTime());s.setFullYear(r.getFullYear()+o*e.interval[0]);s.setMonth(r.getMonth()+o*e.interval[1],r.getDate()+o*e.interval[2]);s.setSeconds(r.getSeconds()+o*e.interval[3]);if(s<=i){t.push(s.getTime())}else{break}}}}return t};c.Controller_.prototype.getClosestValue_=function(e){if(e<=this.minValue){return this.minValue}if(e>=this.maxValue){return this.maxValue}if(this.timeValueList){var t=void 0;var r=0;var i=this.timeValueList.length-1;while(i-r>1){t=Math.floor((r+i)/2);if(this.timeValueList[t]>=e){i=t}else{r=t}}var n=Math.abs(this.timeValueList[r]-e);var a=Math.abs(this.timeValueList[i]-e);return this.timeValueList[n<a?r:i]}else{var o=new Date(e);var s=new Date(this.minValue);var l=new Date(this.minValue);var u=new Date(this.maxValue);var c=Math.abs(o-l);for(var f=1;;f++){var h=new Date(s.getTime());h.setFullYear(s.getFullYear()+f*this.time.interval[0]);h.setMonth(s.getMonth()+f*this.time.interval[1],s.getDate()+f*this.time.interval[2]);h.setSeconds(s.getSeconds()+f*this.time.interval[3]);if(h>u){break}var d=Math.abs(o-h);if(d<=c){l=h;c=d}else{break}}return l.getTime()}};c.Controller_.prototype.getLocalizedDate=function(e){return this.ngeoWMSTime_.formatTimeValue(e,this.time.resolution)};c.controller("gmfTimeSliderController",c.Controller_);t["a"]=c},function(e,t,r){"use strict";var i=r(109);var n=r(274);var a=r.n(n);var o=angular.module("ngeoLayertree",[i["a"].module.name]);o.value("ngeoLayertreeTemplateUrl",function(e,t){var r=t["ngeoLayertreeTemplateurl"];return r!==undefined?r:"ngeo/layertree"});o.run(["$templateCache",function(e){e.put("ngeo/layertree",r(505))}]);o.directive_=function(e){return{restrict:"A",scope:true,templateUrl:e,controller:i["a"]}};o.directive_.$inject=["ngeoLayertreeTemplateUrl"];o.directive("ngeoLayertree",o.directive_);t["a"]=o},function(e,t,r){"use strict";var i=r(113);var n=r(3);function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=angular.module("gmfLayertreeDatasourceGroupTreeComponent",[i["a"].module.name]);o.run(["$templateCache",function(e){e.put("gmf/layertree/datasourceGroupTreeComponent",r(506))}]);o.value("gmfLayertreeDatasourceGroupTreeTemplateUrl",function(e){var t=e["gmfLayertreeDatasourceGroupTreeTemplateUrl"];return t!==undefined?t:"gmf/layertree/datasourceGroupTreeComponent"});s.$inject=["$attrs","gmfLayertreeDatasourceGroupTreeTemplateUrl"];function s(e,t){return t(e)}o.Controller_=function(){e.$inject=["$scope","ngeoDataSources"];function e(t,r){a(this,e);this.group;this.scope_=t;this.dataSources_=r.collection}e.prototype.getGroupUid=function e(){return"datasourcegrouptree-"+n["c"](this.group)};e.prototype.toggle=function e(){this.group.toggleVisibilityState()};e.prototype.toggleDataSource=function e(t){t.visible=!t.visible};e.prototype.remove=function e(){for(var t=this.group.dataSources.length-1,r=0;t>=r;t--){this.dataSources_.remove(this.group.dataSources[t])}};e.prototype.removeDataSource=function e(t){this.dataSources_.remove(t)};return e}();o.component("gmfDatasourcegrouptree",{bindings:{group:"<"},controller:o.Controller_,templateUrl:s});t["a"]=o},function(e,t,r){"use strict";var i=r(137);var n=r(186);var a=angular.module("ngeoStatemanagerModule",[i["a"].module.name,n["a"].module.name]);t["a"]=a},function(e,t,r){"use strict";var i=r(156);var n=r(207);var a=r(3);function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var s=angular.module("gmfWmtscapabilitylayertree",[i["a"].module.name,n["a"].module.name]);s.run(["$templateCache",function(e){e.put("ngeo/import/wmtsCapabilityLayertreeComponent",r(508))}]);s.value("gmfWmtscapabilitylayertreTemplateUrl",function(e){var t=e["gmfWmtscapabilitylayertreTemplateUrl"];return t!==undefined?t:"ngeo/import/wmtsCapabilityLayertreeComponent"});l.$inject=["$attrs","gmfWmtscapabilitylayertreTemplateUrl"];function l(e,t){return t(e)}s.Controller_=function(){e.$inject=["gmfExternalDataSourcesManager"];function e(t){o(this,e);this.capabilities;this.layers;this.url;this.gmfExternalDataSourcesManager_=t}e.prototype.createAndAddDataSource=function e(t){var r=this.gmfExternalDataSourcesManager_;r.createAndAddDataSourceFromWMTSCapability(t,this.capabilities,this.url)};e.prototype.getUid=function e(t){return a["c"](t)};return e}();s.component("gmfWmtscapabilitylayertree",{bindings:{capabilities:"<",layers:"<",url:"<"},controller:s.Controller_,templateUrl:l});t["a"]=s},function(e,t,r){"use strict";var i=r(156);var n=r(207);var a=r(3);var o=r(274);var s=r.n(o);function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var u=angular.module("gmfWmscapabilitylayertreenode",[i["a"].module.name,n["a"].module.name]);u.run(["$templateCache",function(e){e.put("gmf/import/wmsCapabilityLayertreeComponent",r(509))}]);u.value("gmfWmscapabilitylayertreenodeTemplateUrl",function(e){var t=e["gmfWmscapabilitylayertreenodeTemplateUrl"];return t!==undefined?t:"gmf/import/wmsCapabilityLayertreeComponent"});c.$inject=["$attrs","gmfWmscapabilitylayertreenodeTemplateUrl"];function c(e,t){return t(e)}u.Controller_=function(){e.$inject=["gmfExternalDataSourcesManager"];function e(t){l(this,e);this.capabilities;this.layer;this.url;this.gmfExternalDataSourcesManager_=t}e.prototype.createAndAddDataSource=function e(t){this.gmfExternalDataSourcesManager_.createAndAddDataSourceFromWMSCapability(t,this.capabilities,this.url)};e.prototype.getUid=function e(t){return a["c"](t)};return e}();u.component("gmfWmscapabilitylayertreenode",{bindings:{capabilities:"<",layer:"<",url:"<"},controller:u.Controller_,templateUrl:c});t["a"]=u},function(e,t,r){"use strict";var i=r(156);var n=r(315);var a=r(314);var o=r(1);var s=r(182);var l=r(40);var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var f=angular.module("gmfImportdatasource",[i["a"].module.name,n["a"].name,a["a"].name,s["a"].module.name]);f.run(["$templateCache",function(e){e.put("gmf/import/importdatasourceComponent",r(507))}]);f.value("gmfImportdatasourceTemplateUrl",function(e){var t=e["gmfImportdatasourceTemplateUrl"];return t!==undefined?t:"gmf/import/importdatasourceComponent"});h.$inject=["$attrs","gmfImportdatasourceTemplateUrl"];function h(e,t){return t(e)}f.Controller_=function(){e.$inject=["$element","$filter","$injector","$scope","$timeout","gmfExternalDataSourcesManager","ngeoQuerent"];function e(t,r,i,n,a,s,l){var u=this;c(this,e);this.map;this.element_=t;this.scope_=n;this.timeout_=a;this.gmfExternalDataSourcesManager_=s;this.ngeoQuerent_=l;this.file;this.url;this.fileInput_=t.find("input[type=file]");this.hasError=false;this.hasErrorPromise_=null;this.mode=f.Controller_.Mode.ONLINE;this.modes=[f.Controller_.Mode.LOCAL,f.Controller_.Mode.ONLINE];this.pending=false;this.unitPrefixFormat_=r("ngeoUnitPrefix");this.wmsCapabilities=null;this.wmtsCapabilities=null;this.serversEngine_;var h=i.has("gmfExternalOGCServers")?i.get("gmfExternalOGCServers"):undefined;if(h){var d=h.map(function(e){return e["url"]});this.serversEngine_=new Bloodhound({datumTokenizer:function e(t){o["a"].assertString(t);var r=Bloodhound.tokenizers.whitespace(t);o["a"].assert(r);var i=[];for(var n=r,a=Array.isArray(n),s=0,n=a?n:n[Symbol.iterator]();;){var l;if(a){if(s>=n.length)break;l=n[s++]}else{s=n.next();if(s.done)break;l=s.value}var u=l;var c=0;while(c+1<u.length){i.push(u.substr(c,u.length));c++}}return i},queryTokenizer:Bloodhound.tokenizers.whitespace,identify:false,local:d})}this.fileInput_.on("change",function(){u.file=u.fileInput_[0].files&&u.fileInput_[0].files[0]?u.fileInput_[0].files[0]:undefined;u.scope_.$apply()})}e.prototype.$onInit=function e(){var t=this;this.gmfExternalDataSourcesManager_.map=this.map;if(this.serversEngine_){this.timeout_(function(){o["a"].assert(t.serversEngine_);var e=t.element_.find("input[name=url]");var r=t.element_.find("button.gmf-importdatasource-connect-btn");e.typeahead({hint:true,highlight:true,minLength:1},{name:"url",source:t.serversEngine_.ttAdapter()}).bind("typeahead:select",function(e,i){t.timeout_(function(){t.url=i;t.scope_.$apply();r.focus()})})})}};e.prototype.browse=function e(){this.hasError=false;this.element_.find("input[type=file][name=file]").click()};e.prototype.connect=function e(){var t=this;var r=o["a"].assertString(this.url);var i=l["a"].guessServiceTypeByUrl(r);this.startWorking_();if(i===l["a"].Type.WMS){this.ngeoQuerent_.wmsGetCapabilities(r).then(function(e){t.wmsCapabilities=e;t.stopWorking_()},function(){t.stopWorking_(true)})}else if(i===l["a"].Type.WMTS){this.ngeoQuerent_.wmtsGetCapabilities(r).then(function(e){t.wmtsCapabilities=e;t.stopWorking_()},function(){t.stopWorking_(true)})}else{this.timeout_(function(){t.stopWorking_(true)})}};e.prototype.load=function e(){var t=this;var r=o["a"].assert(this.file);this.gmfExternalDataSourcesManager_.createAndAddDataSourceFromFile(r,function(e){if(!e){t.hasError=true}})};e.prototype.startWorking_=function e(){this.pending=true;this.hasError=false;this.wmsCapabilities=null;this.wmtsCapabilities=null};e.prototype.stopWorking_=function e(){var t=this;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;this.pending=false;if(r){this.hasError=true;if(this.hasErrorPromise_){this.timeout_.cancel(this.hasErrorPromise_)}this.hasErrorPromise_=this.timeout_(function(){t.hasError=false;t.hasErrorPromise_=null},3e3)}};u(e,[{key:"fileNameAndSize",get:function e(){var t="";var r=this.file;if(r!==undefined){var i=this.unitPrefixFormat_(r.size,"o");t=r.name+", "+i}return t}}]);return e}();f.Controller_.Mode={LOCAL:"Local",ONLINE:"Online"};f.component("gmfImportdatasource",{bindings:{map:"<"},controller:f.Controller_,templateUrl:h});t["a"]=f},function(e,t,r){"use strict";var i=r(1);var n=r(236);var a=r(235);var o=r(134);var s=r(31);var l=r(18);var u=r(286);var c=r(233);var f=r(232);var h=r(209);var d=r(228);var p=r(86);var v=r(52);var g=r(50);var m=r(77);var y=r(41);var _=r(92);var b=r(175);var w=r(3);var S=r(21);var C=r(28);var x=r(2);var O=r(9);var T=r(15);var E=r(167);var M=r(47);var j=r(117);var A=r(620);var P=r.n(A);function k(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var I=angular.module("ngeoRule",[a["a"].name,o["a"].module.name,h["a"].module.name,d["a"].name,v["a"].module.name,m["a"].module.name]);I.run(["$templateCache",function(e){e.put("ngeo/filter/rulecomponent",r(512))}]);I.value("ngeoRuleTemplateUrl",function(e){var t=e["ngeoRuleTemplateUrl"];return t!==undefined?t:"ngeo/filter/rulecomponent"});D.$inject=["$attrs","ngeoRuleTemplateUrl"];function D(e,t){return t(e)}I.RuleController_=function(){e.$inject=["gettextCatalog","$scope","$timeout","ngeoFeatureHelper","ngeoRuleHelper","ngeoToolActivateMgr"];function e(t,r,i,n,a,o){var s,l;k(this,e);this.featureOverlay;this.map;this.rule;this.toolGroup;this.gettextCatalog_=t;this.scope_=r;this.timeout_=i;this.ngeoFeatureHelper_=n;this.ngeoRuleHelper_=a;this.ngeoToolActivateMgr_=o;this.clone;var h=y["a"].OperatorType;var d=y["a"].SpatialOperatorType;var p=y["a"].TemporalOperatorType;this.operators=(s={},s[h.EQUAL_TO]=t.getString("Is equal to"),s[h.GREATER_THAN]=t.getString("Is greater than"),s[h.GREATER_THAN_OR_EQUAL_TO]=t.getString("Is greater than or equal to"),s[h.LESSER_THAN]=t.getString("Is lesser than"),s[h.LESSER_THAN_OR_EQUAL_TO]=t.getString("Is lesser than or equal to"),s[h.NOT_EQUAL_TO]=t.getString("Is not equal to"),s[h.LIKE]=t.getString("Contains"),s[d.CONTAINS]=t.getString("Contains"),s[d.INTERSECTS]=t.getString("Intersects"),s[d.WITHIN]=t.getString("Is inside of"),s[p.BEGINS]=t.getString("Begins at"),s[p.DURING]=t.getString("During"),s[p.ENDS]=t.getString("Ends at"),s[p.EQUALS]=t.getString("Is equal to"),s);this.operatorsShortFormat=(l={},l[h.EQUAL_TO]="=",l[h.GREATER_THAN]=">",l[h.GREATER_THAN_OR_EQUAL_TO]=">=",l[h.LESSER_THAN]="<",l[h.LESSER_THAN_OR_EQUAL_TO]="<=",l[h.NOT_EQUAL_TO]="!=",l[h.LIKE]="~",l[p.BEGINS]=">=",l[p.ENDS]="<=",l[p.EQUALS]="=",l);this.timeRangeMode={widget:"datepicker",maxValue:null,minValue:null,maxDefValue:this.createDate_(),minDefValue:this.createWeekAgoDate_(),mode:"range",interval:[0,1,0,0]};this.timeValueMode={widget:"datepicker",maxValue:null,minValue:null,maxDefValue:this.createDate_(),minDefValue:this.createDate_(),mode:"value",interval:[0,1,0,0]};this.toolActivate_;this.unlisteners_=[];this.drawActive=false;this.drawToolActivate=new g["a"](this,"drawActive");this.drawnFeatures=new C["b"];this.menu_=null;this.selectedFeatures=new C["b"];this.interactions_=new C["b"];this.modify_=new u["a"]({features:this.selectedFeatures,style:n.getVertexStyle(false)});this.interactions_.push(this.modify_);this.rotate_=new c["a"]({features:this.selectedFeatures,style:new T["c"]({text:new E["a"]({text:"",font:"normal 18px FontAwesome",fill:new M["a"]({color:"#7a7a7a"})})})});this.interactions_.push(this.rotate_);this.translate_=new f["a"]({features:this.selectedFeatures,style:new T["c"]({text:new E["a"]({text:"",font:"normal 18px FontAwesome",fill:new M["a"]({color:"#7a7a7a"})})})});this.interactions_.push(this.translate_);this.listenerKeys_=[];this.initializeInteractions_();this.modifyToolActivate=new g["a"](this.modify_,"active");this.rotateToolActivate=new g["a"](this.rotate_,"active");this.translateToolActivate=new g["a"](this.translate_,"active");this.geomType=null}e.prototype.$onInit=function e(){var t=this;this.clone=this.ngeoRuleHelper_.cloneRule(this.rule);this.toolActivate_=new g["a"](this.rule,"active");this.ngeoToolActivateMgr_.registerTool(this.toolGroup,this.toolActivate_);this.scope_.$watch(function(){return t.rule.active},this.handleActiveChange_.bind(this));if(this.clone.type===s["a"].DATE||this.clone.type===s["a"].DATETIME){this.unlisteners_.push(this.scope_.$watch(function(){return t.clone.getExpression()},function(e){t.timeValueMode.minValue=e}));this.unlisteners_.push(this.scope_.$watch(function(){return t.clone.lowerBoundary},function(e){t.timeRangeMode.minValue=e}));this.unlisteners_.push(this.scope_.$watch(function(){return t.clone.upperBoundary},function(e){t.timeRangeMode.maxValue=e}))}else if(this.clone.type===s["a"].GEOMETRY){this.unlisteners_.push(this.scope_.$watch(function(){return t.clone.operator},function(e){if(e&&e===y["a"].SpatialOperatorType.CONTAINS){var r=i["a"].assertInstanceof(t.clone,_["a"]);var n=r.feature.getGeometry();if(n){var a=t.ngeoFeatureHelper_.getType(r.feature);var o=[l["a"].CIRCLE,l["a"].POLYGON,l["a"].RECTANGLE];if(!O["f"](o,a)){t.clone.setExpression(null)}}}}));this.unlisteners_.push(this.scope_.$watch(function(){return t.clone.expression},function(e){if(e){var r=i["a"].assertInstanceof(t.clone,_["a"]);t.geomType=t.ngeoFeatureHelper_.getType(r.feature)}else{t.geomType=null}}));this.unlisteners_.push(this.scope_.$watch(function(){var e=t.clone.getExpression()!==null;var r=t.rule.active===true;var i=t.modify_.getActive()||t.rotate_.getActive()||t.translate_.getActive();return e&&r&&i},function(e){if(e){var r=i["a"].assertInstanceof(t.clone,_["a"]);t.selectedFeatures.push(r.feature)}else{t.selectedFeatures.clear()}}))}};e.prototype.$onDestroy=function e(){if(this.rule.active){this.rule.active=false;this.handleActiveChange_(false,true)}this.ngeoToolActivateMgr_.unregisterTool(this.toolGroup,this.toolActivate_);for(var t=0,r=this.unlisteners_.length;t<r;t++){this.unlisteners_[t]()}this.unlisteners_.length=0;this.clone.destroy()};e.prototype.toggle=function e(){if(this.rule.active){this.cancel()}else{this.rule.active=true}};e.prototype.apply=function e(){this.ngeoRuleHelper_.extendRule(this.clone,this.rule);this.rule.active=false};e.prototype.cancel=function e(){this.ngeoRuleHelper_.extendRule(this.rule,this.clone);this.rule.active=false};e.prototype.reset=function e(){this.clone.reset();this.rule.reset()};e.prototype.toggleChoiceSelection=function e(t){var r=i["a"].assertInstanceof(this.clone,b["a"]);var n=r.getExpression()?r.getExpression().split(","):[];var a=n.indexOf(t);if(a>-1){n.splice(a,1)}else{n.push(t)}r.setExpression(n.length?n.join(","):null)};e.prototype.onDateSelected=function e(t){this.clone.setExpression(t["start"])};e.prototype.onDateRangeSelected=function e(t){this.clone.lowerBoundary=t["start"];this.clone.upperBoundary=t["end"]};e.prototype.createDate_=function e(t){var r=new Date;if(t!==undefined){var i=r.getTime()-t;r.setTime(i)}return r.toISOString()};e.prototype.createWeekAgoDate_=function e(){return this.createDate_(1e3*60*60*24*7)};e.prototype.timeToDate=function e(t){var r=new Date(t);return r.toLocaleDateString()};e.prototype.handleActiveChange_=function e(t,r){if(!(this.rule instanceof _["a"])||!(this.clone instanceof _["a"])||t===r){return}var n=this.listenerKeys_;var a=["ngeo-rule-",w["c"](this)].join("-");var o=this.ngeoToolActivateMgr_;var s=this.rule.feature;var l=this.clone.feature;var u=this.map.getViewport();i["a"].assertElement(u);if(t){n.push(x["a"](this.drawnFeatures,"add",this.handleFeaturesAdd_,this));n.push(x["a"](u,"contextmenu",this.handleMapContextMenu_,this));n.push(x["a"](this.translate_,"translateend",this.handleTranslateEnd_,this));n.push(x["a"](this.rotate_,"rotateend",this.handleRotateEnd_,this));this.featureOverlay.removeFeature(s);this.featureOverlay.addFeature(l);this.registerInteractions_();o.registerTool(a,this.drawToolActivate,false);o.registerTool(a,this.modifyToolActivate,true);o.registerTool(a,this.rotateToolActivate,false);o.registerTool(a,this.translateToolActivate,false);this.modify_.setActive(true);if(l.getGeometry()){this.ngeoFeatureHelper_.setStyle(l,true)}}else{l.setStyle(null);n.forEach(x["e"]);n.length=0;this.drawActive=false;o.unregisterTool(a,this.drawToolActivate);o.unregisterTool(a,this.modifyToolActivate);o.unregisterTool(a,this.rotateToolActivate);o.unregisterTool(a,this.translateToolActivate);this.modify_.setActive(false);this.unregisterInteractions_();if(this.selectedFeatures.getLength()){this.featureOverlay.removeFeature(l)}this.featureOverlay.addFeature(s);this.selectedFeatures.clear()}};e.prototype.initializeInteractions_=function e(){this.interactions_.forEach(function(e){e.setActive(false);p["a"].interaction(e)})};e.prototype.registerInteractions_=function e(){var t=this;this.interactions_.forEach(function(e){t.map.addInteraction(e)})};e.prototype.unregisterInteractions_=function e(){var t=this;this.interactions_.forEach(function(e){t.map.removeInteraction(e)})};e.prototype.handleFeaturesAdd_=function e(t){var r=this;this.timeout_(function(){var e=i["a"].assertInstanceof(r.clone,_["a"]);var n=e.feature;var a=i["a"].assertInstanceof(t.element,S["a"]);var o=i["a"].assertInstanceof(a.getGeometry(),j["a"]);e.geometry=o;r.drawActive=false;var s=r.ngeoFeatureHelper_.getNonSpatialProperties(a);r.ngeoFeatureHelper_.clearNonSpatialProperties(n);n.setProperties(s);r.ngeoFeatureHelper_.setStyle(n,true);r.scope_.$apply()})};e.prototype.getRuleGeometryType=function e(){var t=i["a"].assertInstanceof(this.rule,_["a"]);return this.ngeoFeatureHelper_.getType(t.feature)};e.prototype.handleMapContextMenu_=function e(t){var r=this;this.removeMenu_();var i=this.map.getEventPixel(t);var a=this.map.getCoordinateFromPixel(i);var o=this.map.forEachFeatureAtPixel(i,function(e){var t=false;if(O["f"](r.selectedFeatures.getArray(),e)){t=e}return t});o=o?o:null;var s=[];if(o){var u=this.ngeoFeatureHelper_.getType(o);var c=this.gettextCatalog_;if(u==l["a"].CIRCLE||u==l["a"].LINE_STRING||u==l["a"].POLYGON||u==l["a"].RECTANGLE){s.push({cls:"fa fa-arrows",label:c.getString("Move"),name:"move"})}if(u==l["a"].LINE_STRING||u==l["a"].POLYGON||u==l["a"].RECTANGLE){s.push({cls:"fa fa-rotate-right",label:c.getString("Rotate"),name:"rotate"})}}if(s.length){this.menu_=new n["a"]({actions:s});x["a"](this.menu_,"actionclick",this.handleMenuActionClick_,this);this.map.addOverlay(this.menu_);this.menu_.open(a);t.preventDefault();t.stopPropagation();this.scope_.$apply()}};e.prototype.removeMenu_=function e(){if(this.menu_){x["c"](this.menu_,"actionclick",this.handleMenuActionClick_,this);this.map.removeOverlay(this.menu_);this.menu_=null}};e.prototype.handleMenuActionClick_=function e(t){var r=t.detail.action;switch(r){case"move":this.translate_.setActive(true);this.scope_.$apply();break;case"rotate":this.rotate_.setActive(true);this.scope_.$apply();break;default:console.log("FIXME - support: "+r);break}};e.prototype.handleRotateEnd_=function e(t){this.rotate_.setActive(false);this.scope_.$apply()};e.prototype.handleTranslateEnd_=function e(t){this.translate_.setActive(false);this.scope_.$apply()};return e}();I.component("ngeoRule",{bindings:{featureOverlay:"<",map:"<",rule:"<",toolGroup:"<"},controller:I.RuleController_,templateUrl:D});t["a"]=I},function(e,t,r){"use strict";var i=r(1);var n=r(123);var a=r(148);var o=r(317);var s=r(134);var l=r(31);var u=r(92);var c=r(209);var f=r(3);var h=r(9);var d=r(620);var p=r.n(d);function v(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var g=angular.module("ngeoFilter",[s["a"].module.name,o["a"].name,c["a"].module.name,n["a"].module.name]);g.run(["$templateCache",function(e){e.put("ngeo/filter",r(511))}]);g.value("ngeoFilterTemplateUrl",function(e){var t=e["ngeoFilterTemplateUrl"];return t!==undefined?t:"ngeo/filter"});m.$inject=["$attrs","ngeoFilterTemplateUrl"];function m(e,t){return t(e)}g.component("ngeoFilter",{bindings:{aRuleIsActive:"=",customRules:"<",datasource:"<",directedRules:"<",featureOverlay:"<",map:"<",toolGroup:"<"},controller:"ngeoFilterController",templateUrl:m});g.FilterController_=function(){e.$inject=["gettextCatalog","$scope","$timeout","ngeoMapQuerent","ngeoRuleHelper"];function e(t,r,i,n,o){v(this,e);this.aRuleIsActive;this.customRules;this.datasource;this.directedRules;this.featureOverlay;this.map;this.toolGroup;this.gettextCatalog_=t;this.scope_=r;this.timeout_=i;this.ngeoMapQuerent_=n;this.ngeoRuleHelper_=o;this.conditions=[{text:t.getString("All"),value:a["a"].AND},{text:t.getString("At least one"),value:a["a"].OR},{text:t.getString("None"),value:a["a"].NOT}];this.geometryAttributes=[];this.otherAttributes=[];this.ruleUnlisteners_={}}e.prototype.$onInit=function e(){var t=this;this.scope_.$watch(function(){return t.aRuleIsActive},this.handleARuleIsActiveChange_.bind(this));var r=i["a"].assert(this.datasource.attributes);for(var n=r,a=Array.isArray(n),o=0,n=a?n:n[Symbol.iterator]();;){var s;if(a){if(o>=n.length)break;s=n[o++]}else{o=n.next();if(o.done)break;s=o.value}var u=s;if(u.type===l["a"].GEOMETRY){this.geometryAttributes.push(u)}else{this.otherAttributes.push(u)}}var c=[].concat(this.customRules,this.directedRules);for(var f=c,h=Array.isArray(f),d=0,f=h?f:f[Symbol.iterator]();;){var p;if(h){if(d>=f.length)break;p=f[d++]}else{d=f.next();if(d.done)break;p=d.value}var v=p;this.registerRule_(v)}this.apply()};e.prototype.$onDestroy=function e(){if(this.datasource.filterRules!==null){this.datasource.filterRules=null}this.featureOverlay.clear()};e.prototype.hasARule=function e(){return[].concat(this.customRules,this.directedRules).length>0};e.prototype.apply=function e(){var t=this;this.datasource.filterRules=null;this.timeout_(function(){var e=t.getRulesWithValue_();if(e.length){t.datasource.filterRules=e;t.ngeoMapQuerent_.clear()}})};e.prototype.getData=function e(){var t=this.getRulesWithValue_();if(!t.length){return}var r=this.datasource;var n=1e3;var a=this.map;var o=a.getView().getProjection().getCode();var s=this.ngeoRuleHelper_.createFilter({dataSource:r,filterRules:t,srsName:o});i["a"].assert(s);this.ngeoMapQuerent_.issue({dataSources:[r],filter:s,limit:n,map:a})};e.prototype.getRulesWithValue_=function e(){var t=[];var r=[].concat(this.customRules,this.directedRules);for(var i=r,n=Array.isArray(i),a=0,i=n?i:i[Symbol.iterator]();;){var o;if(n){if(a>=i.length)break;o=i[a++]}else{a=i.next();if(a.done)break;o=a.value}var s=o;if(s.value){t.push(s)}}return t};e.prototype.createAndAddCustomRule=function e(t){var r=this.ngeoRuleHelper_.createRuleFromAttribute(t,true);this.registerRule_(r);this.customRules.push(r);this.timeout_(function(){r.active=true},1)};e.prototype.setCondition=function e(t){if(this.datasource.filterCondition!==t.value){this.datasource.filterCondition=t.value}};e.prototype.removeCustomRule=function e(t){var r=this;t.active=false;this.timeout_(function(){h["j"](r.customRules,t);r.unregisterRule_(t);t.destroy()})};e.prototype.registerRule_=function e(t){var r=f["c"](t);this.ruleUnlisteners_[r]=this.scope_.$watch(function(){return t.active},this.handleRuleActiveChange_.bind(this));if(t instanceof u["a"]){this.featureOverlay.addFeature(t.feature)}};e.prototype.unregisterRule_=function e(t){var r=f["c"](t);var n=this.ruleUnlisteners_[r];i["a"].assert(n);n();delete this.ruleUnlisteners_[r];if(t instanceof u["a"]){this.featureOverlay.removeFeature(t.feature)}};e.prototype.handleRuleActiveChange_=function e(){var t=false;var r=[].concat(this.customRules,this.directedRules);for(var i=r,n=Array.isArray(i),a=0,i=n?i:i[Symbol.iterator]();;){var o;if(n){if(a>=i.length)break;o=i[a++]}else{a=i.next();if(a.done)break;o=a.value}var s=o;if(s.active){t=true;break}}this.aRuleIsActive=t};e.prototype.handleARuleIsActiveChange_=function e(){if(this.aRuleIsActive){return}var t=[].concat(this.customRules,this.directedRules);for(var r=t,i=Array.isArray(r),n=0,r=i?r:r[Symbol.iterator]();;){var a;if(i){if(n>=r.length)break;a=r[n++]}else{n=r.next();if(n.done)break;a=n.value}var o=a;if(o.active){o.active=false;break}}};return e}();g.controller("ngeoFilterController",g.FilterController_);t["a"]=g},function(e,t,r){"use strict";var i=r(1);var n=r(165);var a=r(62);var o=r(19);var s=angular.module("GmfEditingFeatureSelectorComponent",[n["a"].name,a["a"].module.name,o["a"].module.name]);s.run(["$templateCache",function(e){e.put("gmf/editing/editFeatureSelectorComponent",r(519))}]);s.component_=function(){return{controller:"GmfEditfeatureselectorController as efsCtrl",scope:{active:"=gmfEditfeatureselectorActive",map:"<gmfEditfeatureselectorMap",tolerance:"<?gmfEditfeatureselectorTolerance",vectorLayer:"<gmfEditfeatureselectorVector"},bindToController:true,templateUrl:"gmf/editing/editFeatureSelectorComponent"}};s.directive("gmfEditfeatureselector",s.component_);s.Controller_=function(e,t,r,a){var o=this;this.active=this.active===true;e.$watch(function(){return o.active},this.handleActiveChange_.bind(this));this.map;this.tolerance;this.vectorLayer;this.scope_=e;this.$timeout_=t;this.gmfThemes_=r;this.gmfTreeManager_=a;var s=function e(t){var r=this;this.$timeout_(function(){if(t){var e=r.editableTreeCtrls;e.length=0;r.gmfTreeManager_.rootCtrl.traverseDepthFirst(function(t){if(t.node.editable){i["a"].assert(t.children.length===0);e.push(t)}})}},0)};this.treeCtrlsWatcherUnregister_=e.$watchCollection(function(){if(a.rootCtrl){return a.rootCtrl.children}},s.bind(this));this.dirty=false;this.editableTreeCtrls=[];this.selectedEditableTreeCtrl=null;e.$watch(function(){return o.selectedEditableTreeCtrl},function(e,t){o.dirty=false;o.state=n["a"].State.IDLE});this.state=n["a"].State.IDLE;e.$watch(function(){return o.state},function(e,t){if(e===n["a"].State.STOP_EDITING_EXECUTE||e===n["a"].State.DEACTIVATE_EXECUTE){o.selectedEditableTreeCtrl=null}if(e===n["a"].State.DEACTIVATE_EXECUTE){o.active=false}});e.$on("$destroy",this.handleDestroy_.bind(this))};s.Controller_.$inject=["$scope","$timeout","gmfThemes","gmfTreeManager"];s.Controller_.prototype.stopEditing=function(){this.state=n["a"].State.STOP_EDITING_PENDING};s.Controller_.prototype.handleActiveChange_=function(e){var t=this;if(!e){if(!this.dirty){this.stopEditing()}else{this.$timeout_(function(){t.active=true;t.stopEditing()})}}};s.Controller_.prototype.handleDestroy_=function(){this.treeCtrlsWatcherUnregister_()};s.controller("GmfEditfeatureselectorController",s.Controller_);t["a"]=s},function(e,t,r){"use strict";var i=r(161);var n=r(107);var a=r(18);var o=r(194);var s=r(2);var l=r(15);var u=angular.module("ngeoMeasurelength",[i["a"].module.name,n["a"].name]);u.directive_=function(e,t,r,i){return{restrict:"A",require:"^^ngeoDrawfeature",link:function n(u,c,f,h){var d=t.getString("Click to start drawing line");var p=t.getString("Click to continue drawing<br>"+"Double-click or click last point to finish");var v=new o["a"](r("ngeoUnitPrefix"),t,{style:new l["c"],startMsg:e("<div translate>"+d+"</div>")(u)[0],continueMsg:e("<div translate>"+p+"</div>")(u)[0],precision:i.has("ngeoMeasurePrecision")?i.get("ngeoMeasurePrecision"):undefined});h.registerInteraction(v);h.measureLength=v;s["a"](v,"measureend",h.handleDrawEnd.bind(h,a["a"].LINE_STRING),h);s["a"](v,"change:active",h.handleActiveChange,h)}}};u.directive_.$inject=["$compile","gettextCatalog","$filter","$injector"];u.directive("ngeoMeasurelength",u.directive_);t["a"]=u},function(e,t,r){"use strict";var i=r(161);var n=r(107);var a=r(18);var o=r(208);var s=r(2);var l=r(21);var u=r(49);var c=r(15);var f=angular.module("ngeoMeasureazimut",[i["a"].module.name,n["a"].name]);f.directive_=function(e,t,r,i){return{restrict:"A",require:"^^ngeoDrawfeature",link:function n(f,h,d,p){var v=t.getString("Click to start drawing circle");var g=t.getString("Click to finish");var m=new o["a"](r("ngeoUnitPrefix"),r("number"),{style:new c["c"],startMsg:e("<div translate>"+v+"</div>")(f)[0],continueMsg:e("<div translate>"+g+"</div>")(f)[0],precision:i.has("ngeoMeasurePrecision")?i.get("ngeoMeasurePrecision"):undefined,decimals:i.has("ngeoMeasureDecimals")?i.get("ngeoMeasureDecimals"):undefined});p.registerInteraction(m);p.measureAzimut=m;s["a"](m,"measureend",function(e){var t=e.detail.feature.getGeometry();var r=t.getGeometries()[1];var i=Object(u["b"])(r,64);e.detail.feature=new l["a"](i);var n=o["a"].getAzimut(t.getGeometries()[0]);e.detail.feature.set("azimut",n);p.handleDrawEnd(a["a"].CIRCLE,e)},p);s["a"](m,"change:active",p.handleActiveChange,p)}}};f.directive_.$inject=["$compile","gettextCatalog","$filter","$injector"];f.directive("ngeoMeasureazimut",f.directive_);t["a"]=f},function(e,t,r){"use strict";var i=r(161);var n=r(18);var a=r(260);var o=r(2);var s=r(15);var l=angular.module("ngeoMeasurearea",[i["a"].module.name]);l.directive_=function(e,t,r,i){return{restrict:"A",require:"^^ngeoDrawfeature",link:function l(u,c,f,h){var d=t.getString("Click to start drawing polygon");var p=t.getString("Click to continue drawing<br>"+"Double-click or click starting point to finish");var v=new a["a"](r("ngeoUnitPrefix"),t,{style:new s["c"],startMsg:e("<div translate>"+d+"</div>")(u)[0],continueMsg:e("<div translate>"+p+"</div>")(u)[0],precision:i.has("ngeoMeasurePrecision")?i.get("ngeoMeasurePrecision"):undefined});h.registerInteraction(v);h.measureArea=v;o["a"](v,"measureend",h.handleDrawEnd.bind(h,n["a"].POLYGON),h);o["a"](v,"change:active",h.handleActiveChange,h)}}};l.directive_.$inject=["$compile","gettextCatalog","$filter","$injector"];l.directive("ngeoMeasurearea",l.directive_);t["a"]=l},function(e,t,r){"use strict";var i=r(18);var n=r(2);var a=r(166);var o=angular.module("ngeoDrawtext",[]);o.directive_=function(){return{restrict:"A",require:"^^ngeoDrawfeature",link:function e(t,r,o,s){var l=new a["a"]({type:"Point"});s.registerInteraction(l);s.drawText=l;n["a"](l,"drawend",s.handleDrawEnd.bind(s,i["a"].TEXT),s);n["a"](l,"change:active",s.handleActiveChange,s)}}};o.directive("ngeoDrawtext",o.directive_);t["a"]=o},function(e,t,r){"use strict";var i=r(18);var n=r(2);var a=r(166);var o=r(49);var s=angular.module("ngeoDrawrectangle",[]);s.directive_=function(){return{restrict:"A",require:"^^ngeoDrawfeature",link:function e(t,r,s,l){var u=new a["a"]({type:"LineString",geometryFunction:function e(t,r){if(!r){r=new o["a"](null)}var i=t[0];var n=t[1];r.setCoordinates([[i,[i[0],n[1]],n,[n[0],i[1]],i]]);return r},maxPoints:2});l.registerInteraction(u);l.drawRectangle=u;n["a"](u,"drawend",l.handleDrawEnd.bind(l,i["a"].RECTANGLE),l);n["a"](u,"change:active",l.handleActiveChange,l)}}};s.directive("ngeoDrawrectangle",s.directive_);t["a"]=s},function(e,t,r){"use strict";var i=r(18);var n=r(2);var a=r(166);var o=angular.module("ngeoDrawpoint",[]);o.directive_=function(){return{restrict:"A",require:"^^ngeoDrawfeature",link:function e(t,r,o,s){var l=new a["a"]({type:"Point"});s.registerInteraction(l);s.drawPoint=l;n["a"](l,"drawend",s.handleDrawEnd.bind(s,i["a"].POINT),s);n["a"](l,"change:active",s.handleActiveChange,s)}}};o.directive("ngeoDrawpoint",o.directive_);t["a"]=o},function(e,t,r){"use strict";var i=angular.module("ngeoColorpicker",[]);i.value("ngeoColorpickerTemplateUrl",function(e,t){var r=t["ngeoColorpickerTemplateurl"];return r!==undefined?r:"ngeo/misc/colorpickerComponent"});i.run(["$templateCache",function(e){e.put("ngeo/misc/colorpickerComponent",r(525))}]);i.component_=function(e){return{restrict:"A",scope:{colors:"<?ngeoColorpicker",color:"=?ngeoColorpickerColor"},controller:"NgeoColorpickerController as ctrl",bindToController:true,templateUrl:e}};i.component_.$inject=["ngeoColorpickerTemplateUrl"];i.directive("ngeoColorpicker",i.component_);i.DEFAULT_COLORS=[["#F4EB37","#CDDC39","#62AF44","#009D57","#0BA9CC","#4186F0","#3F5BA9","#7C3592","#A61B4A","#DB4436","#F8971B","#F4B400","#795046"],["#F9F7A6","#E6EEA3","#B7DBAB","#7CCFA9","#93D7E8","#9FC3FF","#A7B5D7","#C6A4CF","#D698AD","#EE9C96","#FAD199","#FFDD5E","#B29189"],["#ffffff","#CCCCCC","#777","#000000"]];i.Controller_=function(e,t,r){this.colors=this.colors||i.DEFAULT_COLORS;this.color};i.Controller_.$inject=["$scope","$element","$attrs"];i.Controller_.prototype.setColor=function(e){this.color=e};i.controller("NgeoColorpickerController",i.Controller_);t["a"]=i},function(e,t,r){"use strict";var i=r(180);function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=function(){e.$inject=["ngeoDataSourcesHelper"];function e(t){n(this,e);this.ngeoDataSourcesHelper_=t}e.prototype.describe=function e(t){if(t.ogcServerType==="qgisserver"&&t.wfsUrl_&&t.getOGCLayerNames().length==1&&!t.attributes){this.ngeoDataSourcesHelper_.getDataSourceAttributes(t)}};return e}();a.module=angular.module("gmfDatasourceWFSAliases",[i["a"].module.name]);a.module.service("gmfWFSAliases",a);t["a"]=a},function(e,t,r){"use strict";r.d(t,"a",function(){return i});r.d(t,"b",function(){return n});var i="Invalid date";function n(){return this._invalidDate}},function(e,t,r){"use strict";r.d(t,"a",function(){return i});r.d(t,"b",function(){return n});var i={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function n(e){var t=this._longDateFormat[e],r=this._longDateFormat[e.toUpperCase()];if(t||!r){return t}this._longDateFormat[e]=r.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)});return this._longDateFormat[e]}},function(e,t,r){"use strict";r.d(t,"b",function(){return n});r.d(t,"a",function(){return a});var i=r(108);var n={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function a(e,t,r){var n=this._calendar[e]||this._calendar["sameElse"];return Object(i["a"])(n)?n.call(t,r):n}},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var i=r(26);function n(e,t,r){var n=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),o=0,s;for(s=0;s<n;s++){if(r&&e[s]!==t[s]||!r&&Object(i["a"])(e[s])!==Object(i["a"])(t[s])){o++}}return o+a}},function(e,t,r){var i;
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */var n=n||function(e){"use strict";if(typeof e==="undefined"||typeof navigator!=="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent)){return}var t=e.document,r=function(){return e.URL||e.webkitURL||e},i=t.createElementNS("http://www.w3.org/1999/xhtml","a"),n="download"in i,a=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},o=/constructor/i.test(e.HTMLElement)||e.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},u="application/octet-stream",c=1e3*40,f=function(e){var t=function(){if(typeof e==="string"){r().revokeObjectURL(e)}else{e.remove()}};setTimeout(t,c)},h=function(e,t,r){t=[].concat(t);var i=t.length;while(i--){var n=e["on"+t[i]];if(typeof n==="function"){try{n.call(e,r||e)}catch(e){l(e)}}}},d=function(e){if(/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)){return new Blob([String.fromCharCode(65279),e],{type:e.type})}return e},p=function(t,l,c){if(!c){t=d(t)}var p=this,v=t.type,g=v===u,m,y=function(){h(p,"writestart progress write writeend".split(" "))},_=function(){if((s||g&&o)&&e.FileReader){var i=new FileReader;i.onloadend=function(){var t=s?i.result:i.result.replace(/^data:[^;]*;/,"data:attachment/file;");var r=e.open(t,"_blank");if(!r)e.location.href=t;t=undefined;p.readyState=p.DONE;y()};i.readAsDataURL(t);p.readyState=p.INIT;return}if(!m){m=r().createObjectURL(t)}if(g){e.location.href=m}else{var n=e.open(m,"_blank");if(!n){e.location.href=m}}p.readyState=p.DONE;y();f(m)};p.readyState=p.INIT;if(n){m=r().createObjectURL(t);setTimeout(function(){i.href=m;i.download=l;a(i);y();f(m);p.readyState=p.DONE});return}_()},v=p.prototype,g=function(e,t,r){return new p(e,t||e.name||"download",r)};if(typeof navigator!=="undefined"&&navigator.msSaveOrOpenBlob){return function(e,t,r){t=t||e.name||"download";if(!r){e=d(e)}return navigator.msSaveOrOpenBlob(e,t)}}v.abort=function(){};v.readyState=v.INIT=0;v.WRITING=1;v.DONE=2;v.error=v.onwritestart=v.onprogress=v.onwrite=v.onabort=v.onerror=v.onwriteend=null;return g}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this.content);if(typeof e!=="undefined"&&e.exports){e.exports.saveAs=n}else if("function"!=="undefined"&&r(530)!==null&&r(529)!==null){!(i=function(){return n}.call(t,r,t,e),i!==undefined&&(e.exports=i))}},function(e,t,r){"use strict";var i=r(31);var n={};n.setGeometryType=function(e,t){var r=/gml:((Multi)?(Point|Line|Polygon|Curve|Surface|Geometry)).*/;if(r.exec(t)){e.type=i["a"].GEOMETRY;if(/^gml:Point/.exec(t)){e.geomType="Point"}else if(/^gml:LineString|^gml:Curve/.exec(t)){e.geomType="LineString"}else if(/^gml:Polygon|^gml:Surface/.exec(t)){e.geomType="Polygon"}else if(/^gml:MultiPoint/.exec(t)){e.geomType="MultiPoint"}else if(/^gml:MultiLineString|^gml:MultiCurve/.exec(t)){e.geomType="MultiLineString"}else if(/^gml:MultiPolygon|^gml:MultiSurface/.exec(t)){e.geomType="MultiPolygon"}}return!!e.type&&!!e.geomType};t["a"]=n},function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var n=function(){e.$inject=["$http","gmfLayersUrl"];function e(t,r){i(this,e);this.http_=t;this.baseUrl_=r;this.promises_={}}e.prototype.getAttributeValues=function e(t,r){var i=t.id+"_"+r;var n=t.name;if(!this.promises_[i]){var a=this.baseUrl_+"/"+n+"/values/"+r;this.promises_[i]=this.http_.get(a).then(this.handleGetAttributeValues_.bind(this))}return this.promises_[i]};e.prototype.handleGetAttributeValues_=function e(t){var r=t.data;return r.items};return e}();n.module=angular.module("gmfEnumerateAttribute",[]);n.module.service("gmfEnumerateAttribute",n);t["a"]=n},function(e,t,r){"use strict";var i=r(334);var n=r(180);var a=r(31);var o=r(9);var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var u=function(){e.$inject=["$q","gmfEnumerateAttribute","ngeoDataSourcesHelper"];function e(t,r,i){l(this,e);this.q_=t;this.gmfEnumerateAttribute_=r;this.ngeoDataSourcesHelper_=i;this.collection_;this.cache_}e.prototype.getDataSource=function e(t){return this.ngeoDataSourcesHelper_.getDataSource(t)};e.prototype.prepareFiltrableDataSource=function e(t){var r=this;var i=this.q_.defer();this.ngeoDataSourcesHelper_.getDataSourceAttributes(t).then(function(e){var n=t.gmfLayer.metadata||{};var s=n.enumeratedAttributes;if(s&&s.length){var l=[];var u=function e(i){if(o["f"](s,i.name)&&i.type!==a["a"].SELECT&&(!i.choices||!i.choices.length)){l.push(r.gmfEnumerateAttribute_.getAttributeValues(t,i.name).then(function(e){var t=e.map(function(e){return e.value});i.type=a["a"].SELECT;i.choices=t}))}};for(var c=e,f=Array.isArray(c),h=0,c=f?c:c[Symbol.iterator]();;){var d;if(f){if(h>=c.length)break;d=c[h++]}else{h=c.next();if(h.done)break;d=h.value}var p=d;u(p)}return r.q_.all(l).then(i.resolve(t))}else{i.resolve(t)}});return i.promise};s(e,[{key:"collection",get:function e(){return this.ngeoDataSourcesHelper_.collection}}]);return e}();u.module=angular.module("gmfDataSourcesHelper",[n["a"].module.name,i["a"].module.name]);u.module.service("gmfDataSourcesHelper",u);t["a"]=u},function(e,t,r){"use strict";var i=function e(t,r,i){var n=void 0,a=void 0;this.isValidFileSize=function(e){return!(e>2e7)};this.isWmsGetCap=function(e){return/<(WMT_MS_Capabilities|WMS_Capabilities)/.test(e)};this.isWmtsGetCap=function(e){return/<Capabilities/.test(e)};this.isKml=function(e){return/<kml/.test(e)&&/<\/kml>/.test(e)};this.isGpx=function(e){return/<gpx/.test(e)&&/<\/gpx>/.test(e)};this.read=function(e){var r=t.defer();if(n&&n.readyState===FileReader.LOADING){n.abort()}n=new FileReader;n.onload=function(e){r.resolve(e.target.result)};n.onerror=function(e){var t=e.target.error;console.error("Reading file failed: ",t);r.reject({message:t.code==20?i("Operation canceled"):i("Read failed"),reason:t.message})};n.onprogress=function(e){r.notify(e)};n.readAsText(e);return r.promise};this.load=function(e,n){if(a){a.resolve()}a=n||t.defer();var o=t.defer();r.get(e,{timeout:a.promise}).then(function(e){o.resolve(e.data)},function(e){console.error("Uploading file failed: ",e);o.reject({message:i("Upload failed"),reason:e})});return o.promise}};i.$inject=["$q","$http","gettext"];i.$inject=["$q","$http","gettext"];i.module=angular.module("ngeoFile",[]);i.module.service("ngeoFile",i);t["a"]=i},function(e,t,r){"use strict";var i=r(56);var n=r(3);var a=r(55);var o=r(36);var s=r(29);var l=r(273);var u=r(49);var c=function e(t){this.geometry_=null;this.element_=document.createElement("div");this.element_.style.position="absolute";this.element_.className="ol-box "+t;this.map_=null;this.startPixel_=null;this.endPixel_=null};Object(n["d"])(c,l["a"]);c.prototype.disposeInternal=function(){this.setMap(null)};c.prototype.render_=function(){var e=this.startPixel_;var t=this.endPixel_;var r="px";var i=this.element_.style;i.left=Math.min(e[0],t[0])+r;i.top=Math.min(e[1],t[1])+r;i.width=Math.abs(t[0]-e[0])+r;i.height=Math.abs(t[1]-e[1])+r};c.prototype.setMap=function(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var t=this.element_.style;t.left=t.top=t.width=t.height="inherit"}this.map_=e;if(this.map_){this.map_.getOverlayContainer().appendChild(this.element_)}};c.prototype.setPixels=function(e,t){this.startPixel_=e;this.endPixel_=t;this.createOrUpdateGeometry();this.render_()};c.prototype.createOrUpdateGeometry=function(){var e=this.startPixel_;var t=this.endPixel_;var r=[e,[e[0],t[1]],t,[t[0],e[1]]];var i=r.map(this.map_.getCoordinateFromPixel,this.map_);i[4]=i[0].slice();if(!this.geometry_){this.geometry_=new u["a"]([i])}else{this.geometry_.setCoordinates([i])}};c.prototype.getGeometry=function(){return this.geometry_};var f=c;var h={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend"};var d=function e(t,r,n){i["a"].call(this,t);this.coordinate=r;this.mapBrowserEvent=n};Object(n["d"])(d,i["a"]);var p=function e(t){s["b"].call(this,{handleDownEvent:y,handleDragEvent:g,handleUpEvent:m});var r=t?t:{};this.box_=new f(r.className||"ol-dragbox");this.minArea_=r.minArea!==undefined?r.minArea:64;this.startPixel_=null;this.condition_=r.condition?r.condition:a["c"];this.boxEndCondition_=r.boxEndCondition?r.boxEndCondition:v};Object(n["d"])(p,s["b"]);function v(e,t,r){var i=r[0]-t[0];var n=r[1]-t[1];return i*i+n*n>=this.minArea_}function g(e){if(!Object(a["e"])(e)){return}this.box_.setPixels(this.startPixel_,e.pixel);this.dispatchEvent(new d(h.BOXDRAG,e.coordinate,e))}p.prototype.getGeometry=function(){return this.box_.getGeometry()};p.prototype.onBoxEnd=o["c"];function m(e){if(!Object(a["e"])(e)){return true}this.box_.setMap(null);if(this.boxEndCondition_(e,this.startPixel_,e.pixel)){this.onBoxEnd(e);this.dispatchEvent(new d(h.BOXEND,e.coordinate,e))}return false}function y(e){if(!Object(a["e"])(e)){return false}if(Object(a["d"])(e)&&this.condition_(e)){this.startPixel_=e.pixel;this.box_.setMap(e.map);this.box_.setPixels(this.startPixel_,this.startPixel_);this.dispatchEvent(new d(h.BOXSTART,e.coordinate,e));return true}else{return false}}var _=t["a"]=p},function(e,t,r){"use strict";var i=r(3);var n=r(28);var a=r(95);var o=r(21);var s=r(46);var l=r(142);var u=r(9);var c=r(27);var f=r(2);var h=r(56);var d=r(16);var p=r(55);var v=r(5);var g=r(7);var m=r(34);var y=r(29);var _=r(89);var b=r(76);var w=r(150);var S=r(268);var C=r(15);var x={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};var O=function e(t,r,i){h["a"].call(this,t);this.features=r;this.mapBrowserEvent=i};Object(i["d"])(O,h["a"]);var T=function e(t){y["b"].call(this,{handleDownEvent:A,handleDragEvent:P,handleEvent:I,handleUpEvent:k});this.condition_=t.condition?t.condition:p["h"];this.defaultDeleteCondition_=function(e){return Object(p["a"])(e)&&Object(p["j"])(e)};this.deleteCondition_=t.deleteCondition?t.deleteCondition:this.defaultDeleteCondition_;this.insertVertexCondition_=t.insertVertexCondition?t.insertVertexCondition:p["c"];this.vertexFeature_=null;this.vertexSegments_=null;this.lastPixel_=[0,0];this.ignoreNextSingleClick_=false;this.modified_=false;this.rBush_=new S["a"];this.pixelTolerance_=t.pixelTolerance!==undefined?t.pixelTolerance:10;this.snappedToVertex_=false;this.changingFeature_=false;this.dragSegments_=[];this.overlay_=new _["a"]({source:new b["b"]({useSpatialIndex:false,wrapX:!!t.wrapX}),style:t.style?t.style:L(),updateWhileAnimating:true,updateWhileInteracting:true});this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,Circle:this.writeCircleGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_};this.source_=null;var r=void 0;if(t.source){this.source_=t.source;r=new n["b"](this.source_.getFeatures());Object(f["a"])(this.source_,w["a"].ADDFEATURE,this.handleSourceAdd_,this);Object(f["a"])(this.source_,w["a"].REMOVEFEATURE,this.handleSourceRemove_,this)}else{r=t.features}if(!r){throw new Error("The modify interaction requires features or a source")}this.features_=r;this.features_.forEach(this.addFeature_.bind(this));Object(f["a"])(this.features_,a["a"].ADD,this.handleFeatureAdd_,this);Object(f["a"])(this.features_,a["a"].REMOVE,this.handleFeatureRemove_,this);this.lastPointerEvent_=null};Object(i["d"])(T,y["b"]);var E=0;var M=1;T.prototype.addFeature_=function(e){var t=e.getGeometry();if(t&&t.getType()in this.SEGMENT_WRITERS_){this.SEGMENT_WRITERS_[t.getType()].call(this,e,t)}var r=this.getMap();if(r&&r.isRendered()&&this.getActive()){this.handlePointerAtPixel_(this.lastPixel_,r)}Object(f["a"])(e,d["a"].CHANGE,this.handleFeatureChange_,this)};T.prototype.willModifyFeatures_=function(e){if(!this.modified_){this.modified_=true;this.dispatchEvent(new O(x.MODIFYSTART,this.features_,e))}};T.prototype.removeFeature_=function(e){this.removeFeatureSegmentData_(e);if(this.vertexFeature_&&this.features_.getLength()===0){this.overlay_.getSource().removeFeature(this.vertexFeature_);this.vertexFeature_=null}Object(f["c"])(e,d["a"].CHANGE,this.handleFeatureChange_,this)};T.prototype.removeFeatureSegmentData_=function(e){var t=this.rBush_;var r=[];t.forEach(function(t){if(e===t.feature){r.push(t)}});for(var i=r.length-1;i>=0;--i){t.remove(r[i])}};T.prototype.setActive=function(e){if(this.vertexFeature_&&!e){this.overlay_.getSource().removeFeature(this.vertexFeature_);this.vertexFeature_=null}y["b"].prototype.setActive.call(this,e)};T.prototype.setMap=function(e){this.overlay_.setMap(e);y["b"].prototype.setMap.call(this,e)};T.prototype.handleSourceAdd_=function(e){if(e.feature){this.features_.push(e.feature)}};T.prototype.handleSourceRemove_=function(e){if(e.feature){this.features_.remove(e.feature)}};T.prototype.handleFeatureAdd_=function(e){this.addFeature_(e.element)};T.prototype.handleFeatureChange_=function(e){if(!this.changingFeature_){var t=e.target;this.removeFeature_(t);this.addFeature_(t)}};T.prototype.handleFeatureRemove_=function(e){var t=e.element;this.removeFeature_(t)};T.prototype.writePointGeometry_=function(e,t){var r=t.getCoordinates();var i={feature:e,geometry:t,segment:[r,r]};this.rBush_.insert(t.getExtent(),i)};T.prototype.writeMultiPointGeometry_=function(e,t){var r=t.getCoordinates();for(var i=0,n=r.length;i<n;++i){var a=r[i];var o={feature:e,geometry:t,depth:[i],index:i,segment:[a,a]};this.rBush_.insert(t.getExtent(),o)}};T.prototype.writeLineStringGeometry_=function(e,t){var r=t.getCoordinates();for(var i=0,n=r.length-1;i<n;++i){var a=r.slice(i,i+2);var o={feature:e,geometry:t,index:i,segment:a};this.rBush_.insert(Object(v["b"])(a),o)}};T.prototype.writeMultiLineStringGeometry_=function(e,t){var r=t.getCoordinates();for(var i=0,n=r.length;i<n;++i){var a=r[i];for(var o=0,s=a.length-1;o<s;++o){var l=a.slice(o,o+2);var u={feature:e,geometry:t,depth:[i],index:o,segment:l};this.rBush_.insert(Object(v["b"])(l),u)}}};T.prototype.writePolygonGeometry_=function(e,t){var r=t.getCoordinates();for(var i=0,n=r.length;i<n;++i){var a=r[i];for(var o=0,s=a.length-1;o<s;++o){var l=a.slice(o,o+2);var u={feature:e,geometry:t,depth:[i],index:o,segment:l};this.rBush_.insert(Object(v["b"])(l),u)}}};T.prototype.writeMultiPolygonGeometry_=function(e,t){var r=t.getCoordinates();for(var i=0,n=r.length;i<n;++i){var a=r[i];for(var o=0,s=a.length;o<s;++o){var l=a[o];for(var u=0,c=l.length-1;u<c;++u){var f=l.slice(u,u+2);var h={feature:e,geometry:t,depth:[o,i],index:u,segment:f};this.rBush_.insert(Object(v["b"])(f),h)}}}};T.prototype.writeCircleGeometry_=function(e,t){var r=t.getCenter();var i={feature:e,geometry:t,index:E,segment:[r,r]};var n={feature:e,geometry:t,index:M,segment:[r,r]};var a=[i,n];i.featureSegments=n.featureSegments=a;this.rBush_.insert(Object(v["m"])(r),i);this.rBush_.insert(t.getExtent(),n)};T.prototype.writeGeometryCollectionGeometry_=function(e,t){var r=t.getGeometriesArray();for(var i=0;i<r.length;++i){this.SEGMENT_WRITERS_[r[i].getType()].call(this,e,r[i])}};T.prototype.createOrUpdateVertexFeature_=function(e){var t=this.vertexFeature_;if(!t){t=new o["a"](new m["a"](e));this.vertexFeature_=t;this.overlay_.getSource().addFeature(t)}else{var r=t.getGeometry();r.setCoordinates(e)}return t};function j(e,t){return e.index-t.index}function A(e){if(!this.condition_(e)){return false}this.handlePointerAtPixel_(e.pixel,e.map);var t=e.map.getCoordinateFromPixel(e.pixel);this.dragSegments_.length=0;this.modified_=false;var r=this.vertexFeature_;if(r){var n=[];var a=r.getGeometry();var o=a.getCoordinates();var s=Object(v["b"])([o]);var l=this.rBush_.getInExtent(s);var u={};l.sort(j);for(var f=0,h=l.length;f<h;++f){var d=l[f];var p=d.segment;var m=Object(i["c"])(d.feature);var y=d.depth;if(y){m+="-"+y.join("-")}if(!u[m]){u[m]=new Array(2)}if(d.geometry.getType()===g["a"].CIRCLE&&d.index===M){var _=R(t,d);if(Object(c["e"])(_,o)&&!u[m][0]){this.dragSegments_.push([d,0]);u[m][0]=d}}else if(Object(c["e"])(p[0],o)&&!u[m][0]){this.dragSegments_.push([d,0]);u[m][0]=d}else if(Object(c["e"])(p[1],o)&&!u[m][1]){if((d.geometry.getType()===g["a"].LINE_STRING||d.geometry.getType()===g["a"].MULTI_LINE_STRING)&&u[m][0]&&u[m][0].index===0){continue}this.dragSegments_.push([d,1]);u[m][1]=d}else if(this.insertVertexCondition_(e)&&Object(i["c"])(p)in this.vertexSegments_&&!u[m][0]&&!u[m][1]){n.push([d,o])}}if(n.length){this.willModifyFeatures_(e)}for(var b=n.length-1;b>=0;--b){this.insertVertex_.apply(this,n[b])}}return!!this.vertexFeature_}function P(e){this.ignoreNextSingleClick_=false;this.willModifyFeatures_(e);var t=e.coordinate;for(var r=0,i=this.dragSegments_.length;r<i;++r){var n=this.dragSegments_[r];var a=n[0];var o=a.depth;var s=a.geometry;var l=void 0;var u=a.segment;var f=n[1];while(t.length<s.getStride()){t.push(u[f][t.length])}switch(s.getType()){case g["a"].POINT:l=t;u[0]=u[1]=t;break;case g["a"].MULTI_POINT:l=s.getCoordinates();l[a.index]=t;u[0]=u[1]=t;break;case g["a"].LINE_STRING:l=s.getCoordinates();l[a.index+f]=t;u[f]=t;break;case g["a"].MULTI_LINE_STRING:l=s.getCoordinates();l[o[0]][a.index+f]=t;u[f]=t;break;case g["a"].POLYGON:l=s.getCoordinates();l[o[0]][a.index+f]=t;u[f]=t;break;case g["a"].MULTI_POLYGON:l=s.getCoordinates();l[o[1]][o[0]][a.index+f]=t;u[f]=t;break;case g["a"].CIRCLE:u[0]=u[1]=t;if(a.index===E){this.changingFeature_=true;s.setCenter(t);this.changingFeature_=false}else{this.changingFeature_=true;s.setRadius(Object(c["d"])(s.getCenter(),t));this.changingFeature_=false}break;default:}if(l){this.setGeometryCoordinates_(s,l)}}this.createOrUpdateVertexFeature_(t)}function k(e){for(var t=this.dragSegments_.length-1;t>=0;--t){var r=this.dragSegments_[t][0];var i=r.geometry;if(i.getType()===g["a"].CIRCLE){var n=i.getCenter();var a=r.featureSegments[0];var o=r.featureSegments[1];a.segment[0]=a.segment[1]=n;o.segment[0]=o.segment[1]=n;this.rBush_.update(Object(v["m"])(n),a);this.rBush_.update(i.getExtent(),o)}else{this.rBush_.update(Object(v["b"])(r.segment),r)}}if(this.modified_){this.dispatchEvent(new O(x.MODIFYEND,this.features_,e));this.modified_=false}return false}function I(e){if(!(e instanceof l["a"])){return true}this.lastPointerEvent_=e;var t=void 0;if(!e.map.getView().getInteracting()&&e.type==s["a"].POINTERMOVE&&!this.handlingDownUpSequence){this.handlePointerMove_(e)}if(this.vertexFeature_&&this.deleteCondition_(e)){if(e.type!=s["a"].SINGLECLICK||!this.ignoreNextSingleClick_){t=this.removePoint()}else{t=true}}if(e.type==s["a"].SINGLECLICK){this.ignoreNextSingleClick_=false}return y["c"].call(this,e)&&!t}T.prototype.handlePointerMove_=function(e){this.lastPixel_=e.pixel;this.handlePointerAtPixel_(e.pixel,e.map)};T.prototype.handlePointerAtPixel_=function(e,t){var r=t.getCoordinateFromPixel(e);var n=function e(t,i){return D(r,t)-D(r,i)};var a=Object(v["c"])(Object(v["m"])(r),t.getView().getResolution()*this.pixelTolerance_);var o=this.rBush_;var s=o.getInExtent(a);if(s.length>0){s.sort(n);var l=s[0];var u=l.segment;var f=R(r,l);var h=t.getPixelFromCoordinate(f);var d=Object(c["d"])(e,h);if(d<=this.pixelTolerance_){var p={};if(l.geometry.getType()===g["a"].CIRCLE&&l.index===M){this.snappedToVertex_=true;this.createOrUpdateVertexFeature_(f)}else{var m=t.getPixelFromCoordinate(u[0]);var y=t.getPixelFromCoordinate(u[1]);var _=Object(c["h"])(h,m);var b=Object(c["h"])(h,y);d=Math.sqrt(Math.min(_,b));this.snappedToVertex_=d<=this.pixelTolerance_;if(this.snappedToVertex_){f=_>b?u[1]:u[0]}this.createOrUpdateVertexFeature_(f);for(var w=1,S=s.length;w<S;++w){var C=s[w].segment;if(Object(c["e"])(u[0],C[0])&&Object(c["e"])(u[1],C[1])||Object(c["e"])(u[0],C[1])&&Object(c["e"])(u[1],C[0])){p[Object(i["c"])(C)]=true}else{break}}}p[Object(i["c"])(u)]=true;this.vertexSegments_=p;return}}if(this.vertexFeature_){this.overlay_.getSource().removeFeature(this.vertexFeature_);this.vertexFeature_=null}};function D(e,t){var r=t.geometry;if(r.getType()===g["a"].CIRCLE){var i=r;if(t.index===M){var n=Object(c["h"])(i.getCenter(),e);var a=Math.sqrt(n)-i.getRadius();return a*a}}return Object(c["i"])(e,t.segment)}function R(e,t){var r=t.geometry;if(r.getType()===g["a"].CIRCLE&&t.index===M){return r.getClosestPoint(e)}return Object(c["c"])(e,t.segment)}T.prototype.insertVertex_=function(e,t){var r=e.segment;var i=e.feature;var n=e.geometry;var a=e.depth;var o=e.index;var s=void 0;while(t.length<n.getStride()){t.push(0)}switch(n.getType()){case g["a"].MULTI_LINE_STRING:s=n.getCoordinates();s[a[0]].splice(o+1,0,t);break;case g["a"].POLYGON:s=n.getCoordinates();s[a[0]].splice(o+1,0,t);break;case g["a"].MULTI_POLYGON:s=n.getCoordinates();s[a[1]][a[0]].splice(o+1,0,t);break;case g["a"].LINE_STRING:s=n.getCoordinates();s.splice(o+1,0,t);break;default:return}this.setGeometryCoordinates_(n,s);var l=this.rBush_;l.remove(e);this.updateSegmentIndices_(n,o,a,1);var u={segment:[r[0],t],feature:i,geometry:n,depth:a,index:o};l.insert(Object(v["b"])(u.segment),u);this.dragSegments_.push([u,1]);var c={segment:[t,r[1]],feature:i,geometry:n,depth:a,index:o+1};l.insert(Object(v["b"])(c.segment),c);this.dragSegments_.push([c,0]);this.ignoreNextSingleClick_=true};T.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=s["a"].POINTERDRAG){var e=this.lastPointerEvent_;this.willModifyFeatures_(e);this.removeVertex_();this.dispatchEvent(new O(x.MODIFYEND,this.features_,e));this.modified_=false;return true}return false};T.prototype.removeVertex_=function(){var e=this.dragSegments_;var t={};var r=false;var n=void 0,a=void 0,o=void 0,s=void 0,l=void 0,u=void 0,c=void 0;var f=void 0,h=void 0,d=void 0,p=void 0;for(l=e.length-1;l>=0;--l){o=e[l];d=o[0];p=Object(i["c"])(d.feature);if(d.depth){p+="-"+d.depth.join("-")}if(!(p in t)){t[p]={}}if(o[1]===0){t[p].right=d;t[p].index=d.index}else if(o[1]==1){t[p].left=d;t[p].index=d.index+1}}for(p in t){h=t[p].right;c=t[p].left;u=t[p].index;f=u-1;if(c!==undefined){d=c}else{d=h}if(f<0){f=0}s=d.geometry;a=s.getCoordinates();n=a;r=false;switch(s.getType()){case g["a"].MULTI_LINE_STRING:if(a[d.depth[0]].length>2){a[d.depth[0]].splice(u,1);r=true}break;case g["a"].LINE_STRING:if(a.length>2){a.splice(u,1);r=true}break;case g["a"].MULTI_POLYGON:n=n[d.depth[1]];case g["a"].POLYGON:n=n[d.depth[0]];if(n.length>4){if(u==n.length-1){u=0}n.splice(u,1);r=true;if(u===0){n.pop();n.push(n[0]);f=n.length-1}}break;default:}if(r){this.setGeometryCoordinates_(s,a);var m=[];if(c!==undefined){this.rBush_.remove(c);m.push(c.segment[0])}if(h!==undefined){this.rBush_.remove(h);m.push(h.segment[1])}if(c!==undefined&&h!==undefined){var y={depth:d.depth,feature:d.feature,geometry:d.geometry,index:f,segment:m};this.rBush_.insert(Object(v["b"])(y.segment),y)}this.updateSegmentIndices_(s,u,d.depth,-1);if(this.vertexFeature_){this.overlay_.getSource().removeFeature(this.vertexFeature_);this.vertexFeature_=null}e.length=0}}return r};T.prototype.setGeometryCoordinates_=function(e,t){this.changingFeature_=true;e.setCoordinates(t);this.changingFeature_=false};T.prototype.updateSegmentIndices_=function(e,t,r,i){this.rBush_.forEachInExtent(e.getExtent(),function(n){if(n.geometry===e&&(r===undefined||n.depth===undefined||Object(u["b"])(n.depth,r))&&n.index>t){n.index+=i}})};function L(){var e=Object(C["b"])();return function(t,r){return e[g["a"].POINT]}}t["a"]=T},function(e,t,r){"use strict";var i=r(3);var n=r(42);var a=r(39);var o=r(116);var s=r(2);var l=r(16);var u=r(119);var c=r(65);var f=r(102);var h=r(354);var d=function e(t,r,i,a,o,s){f["a"].call(this);this.hitDetectionImage_=null;this.image_=!t?new Image:t;if(a!==null){this.image_.crossOrigin=a}this.canvas_=s?document.createElement("CANVAS"):null;this.color_=s;this.imageListenerKeys_=null;this.imageState_=o;this.size_=i;this.src_=r;this.tainting_=false;if(this.imageState_==n["a"].LOADED){this.determineTainting_()}};Object(i["d"])(d,f["a"]);function p(e,t,r,i,n,a){var o=h["a"].get(t,i,a);if(!o){o=new d(e,t,r,i,n,a);h["a"].set(t,i,a,o)}return o}d.prototype.determineTainting_=function(){var e=Object(c["a"])(1,1);try{e.drawImage(this.image_,0,0);e.getImageData(0,0,1,1)}catch(e){this.tainting_=true}};d.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(l["a"].CHANGE)};d.prototype.handleImageError_=function(){this.imageState_=n["a"].ERROR;this.unlistenImage_();this.dispatchChangeEvent_()};d.prototype.handleImageLoad_=function(){this.imageState_=n["a"].LOADED;if(this.size_){this.image_.width=this.size_[0];this.image_.height=this.size_[1]}this.size_=[this.image_.width,this.image_.height];this.unlistenImage_();this.determineTainting_();this.replaceColor_();this.dispatchChangeEvent_()};d.prototype.getImage=function(e){return this.canvas_?this.canvas_:this.image_};d.prototype.getImageState=function(){return this.imageState_};d.prototype.getHitDetectionImage=function(e){if(!this.hitDetectionImage_){if(this.tainting_){var t=this.size_[0];var r=this.size_[1];var i=Object(c["a"])(t,r);i.fillRect(0,0,t,r);this.hitDetectionImage_=i.canvas}else{this.hitDetectionImage_=this.image_}}return this.hitDetectionImage_};d.prototype.getSize=function(){return this.size_};d.prototype.getSrc=function(){return this.src_};d.prototype.load=function(){if(this.imageState_==n["a"].IDLE){this.imageState_=n["a"].LOADING;this.imageListenerKeys_=[Object(s["b"])(this.image_,l["a"].ERROR,this.handleImageError_,this),Object(s["b"])(this.image_,l["a"].LOAD,this.handleImageLoad_,this)];try{this.image_.src=this.src_}catch(e){this.handleImageError_()}}};d.prototype.replaceColor_=function(){if(this.tainting_||this.color_===null){return}this.canvas_.width=this.image_.width;this.canvas_.height=this.image_.height;var e=this.canvas_.getContext("2d");e.drawImage(this.image_,0,0);var t=e.getImageData(0,0,this.image_.width,this.image_.height);var r=t.data;var i=this.color_[0]/255;var n=this.color_[1]/255;var a=this.color_[2]/255;for(var o=0,s=r.length;o<s;o+=4){r[o]*=i;r[o+1]*=n;r[o+2]*=a}e.putImageData(t,0,0)};d.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(s["e"]);this.imageListenerKeys_=null};var v=d;var g=r(100);var m=r(344);var y=function e(t){var r=t||{};this.anchor_=r.anchor!==undefined?r.anchor:[.5,.5];this.normalizedAnchor_=null;this.anchorOrigin_=r.anchorOrigin!==undefined?r.anchorOrigin:g["a"].TOP_LEFT;this.anchorXUnits_=r.anchorXUnits!==undefined?r.anchorXUnits:u["a"].FRACTION;this.anchorYUnits_=r.anchorYUnits!==undefined?r.anchorYUnits:u["a"].FRACTION;this.crossOrigin_=r.crossOrigin!==undefined?r.crossOrigin:null;var s=r.img!==undefined?r.img:null;var l=r.imgSize!==undefined?r.imgSize:null;var c=r.src;Object(a["a"])(!(c!==undefined&&s),4);Object(a["a"])(!s||s&&l,5);if((c===undefined||c.length===0)&&s){c=s.src||Object(i["c"])(s).toString()}Object(a["a"])(c!==undefined&&c.length>0,6);var f=r.src!==undefined?n["a"].IDLE:n["a"].LOADED;this.color_=r.color!==undefined?Object(o["a"])(r.color):null;this.iconImage_=p(s,c,l,this.crossOrigin_,f,this.color_);this.offset_=r.offset!==undefined?r.offset:[0,0];this.offsetOrigin_=r.offsetOrigin!==undefined?r.offsetOrigin:g["a"].TOP_LEFT;this.origin_=null;this.size_=r.size!==undefined?r.size:null;var h=r.opacity!==undefined?r.opacity:1;var d=r.rotateWithView!==undefined?r.rotateWithView:false;var v=r.rotation!==undefined?r.rotation:0;var y=r.scale!==undefined?r.scale:1;var _=r.snapToPixel!==undefined?r.snapToPixel:true;m["a"].call(this,{opacity:h,rotation:v,scale:y,snapToPixel:_,rotateWithView:d})};Object(i["d"])(y,m["a"]);y.prototype.clone=function(){return new y({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||undefined,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:this.size_!==null?this.size_.slice():undefined,opacity:this.getOpacity(),scale:this.getScale(),snapToPixel:this.getSnapToPixel(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})};y.prototype.getAnchor=function(){if(this.normalizedAnchor_){return this.normalizedAnchor_}var e=this.anchor_;var t=this.getSize();if(this.anchorXUnits_==u["a"].FRACTION||this.anchorYUnits_==u["a"].FRACTION){if(!t){return null}e=this.anchor_.slice();if(this.anchorXUnits_==u["a"].FRACTION){e[0]*=t[0]}if(this.anchorYUnits_==u["a"].FRACTION){e[1]*=t[1]}}if(this.anchorOrigin_!=g["a"].TOP_LEFT){if(!t){return null}if(e===this.anchor_){e=this.anchor_.slice()}if(this.anchorOrigin_==g["a"].TOP_RIGHT||this.anchorOrigin_==g["a"].BOTTOM_RIGHT){e[0]=-e[0]+t[0]}if(this.anchorOrigin_==g["a"].BOTTOM_LEFT||this.anchorOrigin_==g["a"].BOTTOM_RIGHT){e[1]=-e[1]+t[1]}}this.normalizedAnchor_=e;return this.normalizedAnchor_};y.prototype.getColor=function(){return this.color_};y.prototype.getImage=function(e){return this.iconImage_.getImage(e)};y.prototype.getImageSize=function(){return this.iconImage_.getSize()};y.prototype.getHitDetectionImageSize=function(){return this.getImageSize()};y.prototype.getImageState=function(){return this.iconImage_.getImageState()};y.prototype.getHitDetectionImage=function(e){return this.iconImage_.getHitDetectionImage(e)};y.prototype.getOrigin=function(){if(this.origin_){return this.origin_}var e=this.offset_;if(this.offsetOrigin_!=g["a"].TOP_LEFT){var t=this.getSize();var r=this.iconImage_.getSize();if(!t||!r){return null}e=e.slice();if(this.offsetOrigin_==g["a"].TOP_RIGHT||this.offsetOrigin_==g["a"].BOTTOM_RIGHT){e[0]=r[0]-t[0]-e[0]}if(this.offsetOrigin_==g["a"].BOTTOM_LEFT||this.offsetOrigin_==g["a"].BOTTOM_RIGHT){e[1]=r[1]-t[1]-e[1]}}this.origin_=e;return this.origin_};y.prototype.getSrc=function(){return this.iconImage_.getSrc()};y.prototype.getSize=function(){return!this.size_?this.iconImage_.getSize():this.size_};y.prototype.listenImageChange=function(e,t){return Object(s["a"])(this.iconImage_,l["a"].CHANGE,e,t)};y.prototype.load=function(){this.iconImage_.load()};y.prototype.unlistenImageChange=function(e,t){Object(s["c"])(this.iconImage_,l["a"].CHANGE,e,t)};var _=t["a"]=y},function(e,t,r){"use strict";var i=r(133);var n=r(3);var a=r(42);var o=r(9);var s=r(56);var l=r(5);var u=r(12);var c=r(221);var f=r(2);var h=r(16);var d=r(251);var p=r(395);var v=function e(t,r,n,o,s,u){this.targetProj_=r;this.maxSourceExtent_=t.getExtent();var f=r.getExtent();var h=f?Object(l["B"])(n,f):n;var v=Object(l["x"])(h);var g=Object(d["a"])(t,r,v,o);var m=i["b"];this.triangulation_=new p["a"](t,r,h,this.maxSourceExtent_,g*m);this.targetResolution_=o;this.targetExtent_=n;var y=this.triangulation_.calculateSourceExtent();this.sourceImage_=u(y,g,s);this.sourcePixelRatio_=this.sourceImage_?this.sourceImage_.getPixelRatio():1;this.canvas_=null;this.sourceListenerKey_=null;var _=a["a"].LOADED;if(this.sourceImage_){_=a["a"].IDLE}c["a"].call(this,n,o,this.sourcePixelRatio_,_)};Object(n["d"])(v,c["a"]);v.prototype.disposeInternal=function(){if(this.state==a["a"].LOADING){this.unlistenSource_()}c["a"].prototype.disposeInternal.call(this)};v.prototype.getImage=function(){return this.canvas_};v.prototype.getProjection=function(){return this.targetProj_};v.prototype.reproject_=function(){var e=this.sourceImage_.getState();if(e==a["a"].LOADED){var t=Object(l["E"])(this.targetExtent_)/this.targetResolution_;var r=Object(l["A"])(this.targetExtent_)/this.targetResolution_;this.canvas_=Object(d["b"])(t,r,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0)}this.state=e;this.changed()};v.prototype.load=function(){if(this.state==a["a"].IDLE){this.state=a["a"].LOADING;this.changed();var e=this.sourceImage_.getState();if(e==a["a"].LOADED||e==a["a"].ERROR){this.reproject_()}else{this.sourceListenerKey_=Object(f["a"])(this.sourceImage_,h["a"].CHANGE,function(e){var t=this.sourceImage_.getState();if(t==a["a"].LOADED||t==a["a"].ERROR){this.unlistenSource_();this.reproject_()}},this);this.sourceImage_.load()}}};v.prototype.unlistenSource_=function(){Object(f["e"])(this.sourceListenerKey_);this.sourceListenerKey_=null};var g=v;var m=r(254);r.d(t,"b",function(){return w});var y={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};var _=function e(t,r){s["a"].call(this,t);this.image=r};Object(n["d"])(_,s["a"]);var b=function e(t){m["a"].call(this,{attributions:t.attributions,extent:t.extent,projection:t.projection,state:t.state});this.resolutions_=t.resolutions!==undefined?t.resolutions:null;this.reprojectedImage_=null;this.reprojectedRevision_=0};Object(n["d"])(b,m["a"]);b.prototype.getResolutions=function(){return this.resolutions_};b.prototype.findNearestResolution=function(e){if(this.resolutions_){var t=Object(o["h"])(this.resolutions_,e,0);e=this.resolutions_[t]}return e};b.prototype.getImage=function(e,t,r,n){var a=this.getProjection();if(!i["a"]||!a||!n||Object(u["e"])(a,n)){if(a){n=a}return this.getImageInternal(e,t,r,n)}else{if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Object(u["e"])(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==t&&Object(l["p"])(this.reprojectedImage_.getExtent(),e)){return this.reprojectedImage_}this.reprojectedImage_.dispose();this.reprojectedImage_=null}this.reprojectedImage_=new g(a,n,e,t,r,function(e,t,r){return this.getImageInternal(e,t,r,a)}.bind(this));this.reprojectedRevision_=this.getRevision();return this.reprojectedImage_}};b.prototype.getImageInternal=function(e,t,r,i){};b.prototype.handleImageChange=function(e){var t=e.target;switch(t.getState()){case a["a"].LOADING:this.dispatchEvent(new _(y.IMAGELOADSTART,t));break;case a["a"].LOADED:this.dispatchEvent(new _(y.IMAGELOADEND,t));break;case a["a"].ERROR:this.dispatchEvent(new _(y.IMAGELOADERROR,t));break;default:}};function w(e,t){e.getImage().src=t}var S=t["a"]=b},function(e,t,r){"use strict";t["a"]={ACTIVE:"active"}},function(e,t,r){"use strict";var i=r(3);var n=r(5);var a=r(94);var o=r(58);var s=r(4);var l=r(117);var u=r(11);var c=r(12);var f=r(0);var h=o["a"]+" http://schemas.opengis.net/gml/2.1.2/feature.xsd";var d=function e(t){var r=t?t:{};o["b"].call(this,r);this.FEATURE_COLLECTION_PARSERS[o["a"]]["featureMember"]=Object(f["j"])(o["b"].prototype.readFeaturesInternal);this.schemaLocation=r.schemaLocation?r.schemaLocation:h};Object(i["d"])(d,o["b"]);d.prototype.readFlatCoordinates_=function(e,t){var r=Object(f["e"])(e,false).replace(/^\s*|\s*$/g,"");var i=t[0];var n=i["srsName"];var a="enu";if(n){var o=Object(c["g"])(n);if(o){a=o.getAxisOrientation()}}var s=r.trim().split(/\s+/);var l=[];for(var u=0,h=s.length;u<h;u++){var d=s[u].split(/,+/);var p=parseFloat(d[0]);var v=parseFloat(d[1]);var g=d.length===3?parseFloat(d[2]):0;if(a.substr(0,2)==="en"){l.push(p,v,g)}else{l.push(v,p,g)}}return l};d.prototype.readBox_=function(e,t){var r=Object(f["u"])([null],this.BOX_PARSERS_,e,t,this);return Object(n["k"])(r[1][0],r[1][1],r[1][3],r[1][4])};d.prototype.innerBoundaryIsParser_=function(e,t){var r=Object(f["u"])(undefined,this.RING_PARSERS,e,t,this);if(r){var i=t[t.length-1];i.push(r)}};d.prototype.outerBoundaryIsParser_=function(e,t){var r=Object(f["u"])(undefined,this.RING_PARSERS,e,t,this);if(r){var i=t[t.length-1];i[0]=r}};d.prototype.GEOMETRY_NODE_FACTORY_=function(e,t,r){var i=t[t.length-1];var n=i["multiSurface"];var a=i["surface"];var o=i["multiCurve"];var s=void 0;if(!Array.isArray(e)){s=e.getType();if(s==="MultiPolygon"&&n===true){s="MultiSurface"}else if(s==="Polygon"&&a===true){s="Surface"}else if(s==="MultiLineString"&&o===true){s="MultiCurve"}}else{s="Envelope"}return Object(f["d"])("http://www.opengis.net/gml",s)};d.prototype.writeFeatureElement=function(e,t,r){var i=t.getId();if(i){e.setAttribute("fid",i)}var n=r[r.length-1];var a=n["featureNS"];var o=t.getGeometryName();if(!n.serializers){n.serializers={};n.serializers[a]={}}var c=t.getProperties();var h=[];var d=[];for(var p in c){var v=c[p];if(v!==null){h.push(p);d.push(v);if(p==o||v instanceof l["a"]){if(!(p in n.serializers[a])){n.serializers[a][p]=Object(f["l"])(this.writeGeometryElement,this)}}else{if(!(p in n.serializers[a])){n.serializers[a][p]=Object(f["l"])(s["n"])}}}}var g=Object(u["a"])({},n);g.node=e;Object(f["v"])(g,n.serializers,Object(f["q"])(undefined,a),d,r,h)};d.prototype.writeCurveOrLineString_=function(e,t,r){var i=r[r.length-1];var n=i["srsName"];if(e.nodeName!=="LineStringSegment"&&n){e.setAttribute("srsName",n)}if(e.nodeName==="LineString"||e.nodeName==="LineStringSegment"){var a=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(a);this.writeCoordinates_(a,t,r)}else if(e.nodeName==="Curve"){var o=Object(f["d"])(e.namespaceURI,"segments");e.appendChild(o);this.writeCurveSegments_(o,t,r)}};d.prototype.writeLineStringOrCurveMember_=function(e,t,r){var i=this.GEOMETRY_NODE_FACTORY_(t,r);if(i){e.appendChild(i);this.writeCurveOrLineString_(i,t,r)}};d.prototype.writeMultiCurveOrLineString_=function(e,t,r){var i=r[r.length-1];var n=i["hasZ"];var a=i["srsName"];var o=i["curve"];if(a){e.setAttribute("srsName",a)}var s=t.getLineStrings();Object(f["v"])({node:e,hasZ:n,srsName:a,curve:o},this.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,r,undefined,this)};d.prototype.writeGeometryElement=function(e,t,r){var i=r[r.length-1];var n=Object(u["a"])({},i);n.node=e;var o=void 0;if(Array.isArray(t)){if(i.dataProjection){o=Object(c["n"])(t,i.featureProjection,i.dataProjection)}else{o=t}}else{o=Object(a["b"])(t,true,i)}Object(f["v"])(n,this.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[o],r,undefined,this)};d.prototype.createCoordinatesNode_=function(e){var t=Object(f["d"])(e,"coordinates");t.setAttribute("decimal",".");t.setAttribute("cs",",");t.setAttribute("ts"," ");return t};d.prototype.writeCoordinates_=function(e,t,r){var i=r[r.length-1];var n=i["hasZ"];var a=i["srsName"];var o=t.getCoordinates();var l=o.length;var u=new Array(l);for(var c=0;c<l;++c){var f=o[c];u[c]=this.getCoords_(f,a,n)}Object(s["n"])(e,u.join(" "))};d.prototype.writeCurveSegments_=function(e,t,r){var i=Object(f["d"])(e.namespaceURI,"LineStringSegment");e.appendChild(i);this.writeCurveOrLineString_(i,t,r)};d.prototype.writeSurfaceOrPolygon_=function(e,t,r){var i=r[r.length-1];var n=i["hasZ"];var a=i["srsName"];if(e.nodeName!=="PolygonPatch"&&a){e.setAttribute("srsName",a)}if(e.nodeName==="Polygon"||e.nodeName==="PolygonPatch"){var o=t.getLinearRings();Object(f["v"])({node:e,hasZ:n,srsName:a},this.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,o,r,undefined,this)}else if(e.nodeName==="Surface"){var s=Object(f["d"])(e.namespaceURI,"patches");e.appendChild(s);this.writeSurfacePatches_(s,t,r)}};d.prototype.RING_NODE_FACTORY_=function(e,t,r){var i=t[t.length-1];var n=i.node;var a=i["exteriorWritten"];if(a===undefined){i["exteriorWritten"]=true}return Object(f["d"])(n.namespaceURI,a!==undefined?"innerBoundaryIs":"outerBoundaryIs")};d.prototype.writeSurfacePatches_=function(e,t,r){var i=Object(f["d"])(e.namespaceURI,"PolygonPatch");e.appendChild(i);this.writeSurfaceOrPolygon_(i,t,r)};d.prototype.writeRing_=function(e,t,r){var i=Object(f["d"])(e.namespaceURI,"LinearRing");e.appendChild(i);this.writeLinearRing_(i,t,r)};d.prototype.getCoords_=function(e,t,r){var i="enu";if(t){i=Object(c["g"])(t).getAxisOrientation()}var n=i.substr(0,2)==="en"?e[0]+","+e[1]:e[1]+","+e[0];if(r){var a=e[2]||0;n+=","+a}return n};d.prototype.writePoint_=function(e,t,r){var i=r[r.length-1];var n=i["hasZ"];var a=i["srsName"];if(a){e.setAttribute("srsName",a)}var o=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(o);var l=t.getCoordinates();var u=this.getCoords_(l,a,n);Object(s["n"])(o,u)};d.prototype.writeMultiPoint_=function(e,t,r){var i=r[r.length-1];var n=i["hasZ"];var a=i["srsName"];if(a){e.setAttribute("srsName",a)}var o=t.getPoints();Object(f["v"])({node:e,hasZ:n,srsName:a},this.POINTMEMBER_SERIALIZERS_,Object(f["q"])("pointMember"),o,r,undefined,this)};d.prototype.writePointMember_=function(e,t,r){var i=Object(f["d"])(e.namespaceURI,"Point");e.appendChild(i);this.writePoint_(i,t,r)};d.prototype.writeLinearRing_=function(e,t,r){var i=r[r.length-1];var n=i["srsName"];if(n){e.setAttribute("srsName",n)}var a=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(a);this.writeCoordinates_(a,t,r)};d.prototype.writeMultiSurfaceOrPolygon_=function(e,t,r){var i=r[r.length-1];var n=i["hasZ"];var a=i["srsName"];var o=i["surface"];if(a){e.setAttribute("srsName",a)}var s=t.getPolygons();Object(f["v"])({node:e,hasZ:n,srsName:a,surface:o},this.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,r,undefined,this)};d.prototype.writeSurfaceOrPolygonMember_=function(e,t,r){var i=this.GEOMETRY_NODE_FACTORY_(t,r);if(i){e.appendChild(i);this.writeSurfaceOrPolygon_(i,t,r)}};d.prototype.writeEnvelope=function(e,t,r){var i=r[r.length-1];var n=i["srsName"];if(n){e.setAttribute("srsName",n)}var a=["lowerCorner","upperCorner"];var o=[t[0]+" "+t[1],t[2]+" "+t[3]];Object(f["v"])({node:e},this.ENVELOPE_SERIALIZERS_,f["b"],o,r,a,this)};var p={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};d.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(e,t,r){var i=t[t.length-1].node;return Object(f["d"])("http://www.opengis.net/gml",p[i.nodeName])};d.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS_={"http://www.opengis.net/gml":{coordinates:Object(f["o"])(d.prototype.readFlatCoordinates_)}};d.prototype.FLAT_LINEAR_RINGS_PARSERS_={"http://www.opengis.net/gml":{innerBoundaryIs:d.prototype.innerBoundaryIsParser_,outerBoundaryIs:d.prototype.outerBoundaryIsParser_}};d.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:Object(f["j"])(d.prototype.readFlatCoordinates_)}};d.prototype.GEOMETRY_PARSERS_={"http://www.opengis.net/gml":{Point:Object(f["o"])(o["b"].prototype.readPoint),MultiPoint:Object(f["o"])(o["b"].prototype.readMultiPoint),LineString:Object(f["o"])(o["b"].prototype.readLineString),MultiLineString:Object(f["o"])(o["b"].prototype.readMultiLineString),LinearRing:Object(f["o"])(o["b"].prototype.readLinearRing),Polygon:Object(f["o"])(o["b"].prototype.readPolygon),MultiPolygon:Object(f["o"])(o["b"].prototype.readMultiPolygon),Box:Object(f["o"])(d.prototype.readBox_)}};d.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:Object(f["l"])(d.prototype.writeCurveOrLineString_),MultiCurve:Object(f["l"])(d.prototype.writeMultiCurveOrLineString_),Point:Object(f["l"])(d.prototype.writePoint_),MultiPoint:Object(f["l"])(d.prototype.writeMultiPoint_),LineString:Object(f["l"])(d.prototype.writeCurveOrLineString_),MultiLineString:Object(f["l"])(d.prototype.writeMultiCurveOrLineString_),LinearRing:Object(f["l"])(d.prototype.writeLinearRing_),Polygon:Object(f["l"])(d.prototype.writeSurfaceOrPolygon_),MultiPolygon:Object(f["l"])(d.prototype.writeMultiSurfaceOrPolygon_),Surface:Object(f["l"])(d.prototype.writeSurfaceOrPolygon_),MultiSurface:Object(f["l"])(d.prototype.writeMultiSurfaceOrPolygon_),Envelope:Object(f["l"])(d.prototype.writeEnvelope)}};d.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:Object(f["l"])(d.prototype.writeLineStringOrCurveMember_),curveMember:Object(f["l"])(d.prototype.writeLineStringOrCurveMember_)}};d.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml":{outerBoundaryIs:Object(f["l"])(d.prototype.writeRing_),innerBoundaryIs:Object(f["l"])(d.prototype.writeRing_)}};d.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:Object(f["l"])(d.prototype.writePointMember_)}};d.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:Object(f["l"])(d.prototype.writeSurfaceOrPolygonMember_),polygonMember:Object(f["l"])(d.prototype.writeSurfaceOrPolygonMember_)}};d.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:Object(f["l"])(s["n"]),upperCorner:Object(f["l"])(s["n"])}};t["a"]=d},function(e,t,r){"use strict";r.d(t,"a",function(){return a});r.d(t,"b",function(){return o});r.d(t,"c",function(){return s});var i=r(9);var n=r(22);function a(e,t,r,a,o,s){var l=NaN;var u=NaN;var c=(r-t)/a;if(c===1){l=e[t];u=e[t+1]}else if(c==2){l=(1-o)*e[t]+o*e[t+a];u=(1-o)*e[t+1]+o*e[t+a+1]}else if(c!==0){var f=e[t];var h=e[t+1];var d=0;var p=[0];for(var v=t+a;v<r;v+=a){var g=e[v];var m=e[v+1];d+=Math.sqrt((g-f)*(g-f)+(m-h)*(m-h));p.push(d);f=g;h=m}var y=o*d;var _=Object(i["a"])(p,y);if(_<0){var b=(y-p[-_-2])/(p[-_-1]-p[-_-2]);var w=t+(-_-2)*a;l=Object(n["c"])(e[w],e[w+a],b);u=Object(n["c"])(e[w+1],e[w+a+1],b)}else{l=e[t+_*a];u=e[t+_*a+1]}}if(s){s[0]=l;s[1]=u;return s}else{return[l,u]}}function o(e,t,r,i,a,o){if(r==t){return null}var s=void 0;if(a<e[t+i-1]){if(o){s=e.slice(t,t+i);s[i-1]=a;return s}else{return null}}else if(e[r-1]<a){if(o){s=e.slice(r-i,r);s[i-1]=a;return s}else{return null}}if(a==e[t+i-1]){return e.slice(t,t+i)}var l=t/i;var u=r/i;while(l<u){var c=l+u>>1;if(a<e[(c+1)*i-1]){u=c}else{l=c+1}}var f=e[l*i-1];if(a==f){return e.slice((l-1)*i,(l-1)*i+i)}var h=e[(l+1)*i-1];var d=(a-f)/(h-f);s=[];for(var p=0;p<i-1;++p){s.push(Object(n["c"])(e[(l-1)*i+p],e[l*i+p],d))}s.push(a);return s}function s(e,t,r,i,n,a,s){if(s){return o(e,t,r[r.length-1],i,n,a)}var l=void 0;if(n<e[i-1]){if(a){l=e.slice(0,i);l[i-1]=n;return l}else{return null}}if(e[e.length-1]<n){if(a){l=e.slice(e.length-i);l[i-1]=n;return l}else{return null}}for(var u=0,c=r.length;u<c;++u){var f=r[u];if(t==f){continue}if(n<e[t+i-1]){return null}else if(n<=e[f-1]){return o(e,t,f,i,n,false)}t=f}return null}},function(e,t,r){"use strict";var i=function e(t){this.opacity_=t.opacity;this.rotateWithView_=t.rotateWithView;this.rotation_=t.rotation;this.scale_=t.scale;this.snapToPixel_=t.snapToPixel};i.prototype.getOpacity=function(){return this.opacity_};i.prototype.getRotateWithView=function(){return this.rotateWithView_};i.prototype.getRotation=function(){return this.rotation_};i.prototype.getScale=function(){return this.scale_};i.prototype.getSnapToPixel=function(){return this.snapToPixel_};i.prototype.getAnchor=function(){};i.prototype.getImage=function(e){};i.prototype.getHitDetectionImage=function(e){};i.prototype.getImageState=function(){};i.prototype.getImageSize=function(){};i.prototype.getHitDetectionImageSize=function(){};i.prototype.getOrigin=function(){};i.prototype.getSize=function(){};i.prototype.setOpacity=function(e){this.opacity_=e};i.prototype.setRotateWithView=function(e){this.rotateWithView_=e};i.prototype.setRotation=function(e){this.rotation_=e};i.prototype.setScale=function(e){this.scale_=e};i.prototype.setSnapToPixel=function(e){this.snapToPixel_=e};i.prototype.listenImageChange=function(e,t){};i.prototype.load=function(){};i.prototype.unlistenImageChange=function(e,t){};t["a"]=i},function(e,t,r){"use strict";r.d(t,"a",function(){return o});r.d(t,"b",function(){return s});r.d(t,"c",function(){return u});r.d(t,"d",function(){return c});var i=r(5);var n=r(204);var a=r(391);function o(e,t,r,n,o){var s=Object(i["s"])(Object(i["j"])(),e,t,r,n);if(!Object(i["F"])(o,s)){return false}if(Object(i["g"])(o,s)){return true}if(s[0]>=o[0]&&s[2]<=o[2]){return true}if(s[1]>=o[1]&&s[3]<=o[3]){return true}return Object(a["a"])(e,t,r,n,function(e,t){return Object(i["G"])(o,e,t)})}function s(e,t,r,i,n){for(var a=0,s=r.length;a<s;++a){if(o(e,t,r[a],i,n)){return true}t=r[a]}return false}function l(e,t,r,i,a){if(o(e,t,r,i,a)){return true}if(Object(n["b"])(e,t,r,i,a[0],a[1])){return true}if(Object(n["b"])(e,t,r,i,a[0],a[3])){return true}if(Object(n["b"])(e,t,r,i,a[2],a[1])){return true}if(Object(n["b"])(e,t,r,i,a[2],a[3])){return true}return false}function u(e,t,r,i,a){if(!l(e,t,r[0],i,a)){return false}if(r.length===1){return true}for(var o=1,s=r.length;o<s;++o){if(Object(n["a"])(e,r[o-1],r[o],i,a)){return false}}return true}function c(e,t,r,i,n){for(var a=0,o=r.length;a<o;++a){var s=r[a];if(u(e,t,s,i,n)){return true}t=s[s.length-1]}return false}},function(e,t,r){"use strict";r.d(t,"a",function(){return i});r.d(t,"b",function(){return n});var i=42;var n=256},function(e,t,r){"use strict";var i=r(346);var n=r(39);var a=r(269);var o=r(9);var s=r(5);var l=r(22);var u=r(122);var c=r(151);var f=function e(t){this.minZoom=t.minZoom!==undefined?t.minZoom:0;this.resolutions_=t.resolutions;Object(n["a"])(Object(o["g"])(this.resolutions_,function(e,t){return t-e},true),17);var r=void 0;if(!t.origins){for(var l=0,u=this.resolutions_.length-1;l<u;++l){if(!r){r=this.resolutions_[l]/this.resolutions_[l+1]}else{if(this.resolutions_[l]/this.resolutions_[l+1]!==r){r=undefined;break}}}}this.zoomFactor_=r;this.maxZoom=this.resolutions_.length-1;this.origin_=t.origin!==undefined?t.origin:null;this.origins_=null;if(t.origins!==undefined){this.origins_=t.origins;Object(n["a"])(this.origins_.length==this.resolutions_.length,20)}var c=t.extent;if(c!==undefined&&!this.origin_&&!this.origins_){this.origin_=Object(s["C"])(c)}Object(n["a"])(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18);this.tileSizes_=null;if(t.tileSizes!==undefined){this.tileSizes_=t.tileSizes;Object(n["a"])(this.tileSizes_.length==this.resolutions_.length,19)}this.tileSize_=t.tileSize!==undefined?t.tileSize:!this.tileSizes_?i["b"]:null;Object(n["a"])(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22);this.extent_=c!==undefined?c:null;this.fullTileRanges_=null;this.tmpSize_=[0,0];if(t.sizes!==undefined){this.fullTileRanges_=t.sizes.map(function(e,t){var r=new a["b"](Math.min(0,e[0]),Math.max(e[0]-1,-1),Math.min(0,e[1]),Math.max(e[1]-1,-1));return r},this)}else if(c){this.calculateTileRanges_(c)}};var h=[0,0,0];f.prototype.forEachTileCoord=function(e,t,r){var i=this.getTileRangeForExtentAndZ(e,t);for(var n=i.minX,a=i.maxX;n<=a;++n){for(var o=i.minY,s=i.maxY;o<=s;++o){r([t,n,o])}}};f.prototype.forEachTileCoordParentTileRange=function(e,t,r,i,n){var o=void 0,s=void 0,l=void 0;var u=null;var c=e[0]-1;if(this.zoomFactor_===2){s=e[1];l=e[2]}else{u=this.getTileCoordExtent(e,n)}while(c>=this.minZoom){if(this.zoomFactor_===2){s=Math.floor(s/2);l=Math.floor(l/2);o=Object(a["a"])(s,s,l,l,i)}else{o=this.getTileRangeForExtentAndZ(u,c,i)}if(t.call(r,c,o)){return true}--c}return false};f.prototype.getExtent=function(){return this.extent_};f.prototype.getMaxZoom=function(){return this.maxZoom};f.prototype.getMinZoom=function(){return this.minZoom};f.prototype.getOrigin=function(e){if(this.origin_){return this.origin_}else{return this.origins_[e]}};f.prototype.getResolution=function(e){return this.resolutions_[e]};f.prototype.getResolutions=function(){return this.resolutions_};f.prototype.getTileCoordChildTileRange=function(e,t,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){var i=e[1]*2;var n=e[2]*2;return Object(a["a"])(i,i+1,n,n+1,t)}var o=this.getTileCoordExtent(e,r);return this.getTileRangeForExtentAndZ(o,e[0]+1,t)}return null};f.prototype.getTileRangeExtent=function(e,t,r){var i=this.getOrigin(e);var n=this.getResolution(e);var a=Object(u["d"])(this.getTileSize(e),this.tmpSize_);var o=i[0]+t.minX*a[0]*n;var l=i[0]+(t.maxX+1)*a[0]*n;var c=i[1]+t.minY*a[1]*n;var f=i[1]+(t.maxY+1)*a[1]*n;return Object(s["k"])(o,c,l,f,r)};f.prototype.getTileRangeForExtentAndZ=function(e,t,r){var i=h;this.getTileCoordForXYAndZ_(e[0],e[1],t,false,i);var n=i[1];var o=i[2];this.getTileCoordForXYAndZ_(e[2],e[3],t,true,i);return Object(a["a"])(n,i[1],o,i[2],r)};f.prototype.getTileCoordCenter=function(e){var t=this.getOrigin(e[0]);var r=this.getResolution(e[0]);var i=Object(u["d"])(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*i[0]*r,t[1]+(e[2]+.5)*i[1]*r]};f.prototype.getTileCoordExtent=function(e,t){var r=this.getOrigin(e[0]);var i=this.getResolution(e[0]);var n=Object(u["d"])(this.getTileSize(e[0]),this.tmpSize_);var a=r[0]+e[1]*n[0]*i;var o=r[1]+e[2]*n[1]*i;var l=a+n[0]*i;var c=o+n[1]*i;return Object(s["k"])(a,o,l,c,t)};f.prototype.getTileCoordForCoordAndResolution=function(e,t,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,false,r)};f.prototype.getTileCoordForXYAndResolution_=function(e,t,r,i,n){var a=this.getZForResolution(r);var o=r/this.getResolution(a);var s=this.getOrigin(a);var l=Object(u["d"])(this.getTileSize(a),this.tmpSize_);var f=i?.5:0;var h=i?0:.5;var d=Math.floor((e-s[0])/r+f);var p=Math.floor((t-s[1])/r+h);var v=o*d/l[0];var g=o*p/l[1];if(i){v=Math.ceil(v)-1;g=Math.ceil(g)-1}else{v=Math.floor(v);g=Math.floor(g)}return Object(c["a"])(a,v,g,n)};f.prototype.getTileCoordForXYAndZ_=function(e,t,r,i,n){var a=this.getOrigin(r);var o=this.getResolution(r);var s=Object(u["d"])(this.getTileSize(r),this.tmpSize_);var l=i?.5:0;var f=i?0:.5;var h=Math.floor((e-a[0])/o+l);var d=Math.floor((t-a[1])/o+f);var p=h/s[0];var v=d/s[1];if(i){p=Math.ceil(p)-1;v=Math.ceil(v)-1}else{p=Math.floor(p);v=Math.floor(v)}return Object(c["a"])(r,p,v,n)};f.prototype.getTileCoordForCoordAndZ=function(e,t,r){return this.getTileCoordForXYAndZ_(e[0],e[1],t,false,r)};f.prototype.getTileCoordResolution=function(e){return this.resolutions_[e[0]]};f.prototype.getTileSize=function(e){if(this.tileSize_){return this.tileSize_}else{return this.tileSizes_[e]}};f.prototype.getFullTileRange=function(e){if(!this.fullTileRanges_){return null}else{return this.fullTileRanges_[e]}};f.prototype.getZForResolution=function(e,t){var r=Object(o["h"])(this.resolutions_,e,t||0);return Object(l["a"])(r,this.minZoom,this.maxZoom)};f.prototype.calculateTileRanges_=function(e){var t=this.resolutions_.length;var r=new Array(t);for(var i=this.minZoom;i<t;++i){r[i]=this.getTileRangeForExtentAndZ(e,i)}this.fullTileRanges_=r};t["a"]=f},function(e,t,r){"use strict";r.d(t,"a",function(){return p});var i=r(3);var n=r(36);var a=r(394);var o=r(25);var s=r(56);var l=r(12);var u=r(122);var c=r(254);var f=r(151);var h=r(270);var d=function e(t){c["a"].call(this,{attributions:t.attributions,extent:t.extent,projection:t.projection,state:t.state,wrapX:t.wrapX});this.opaque_=t.opaque!==undefined?t.opaque:false;this.tilePixelRatio_=t.tilePixelRatio!==undefined?t.tilePixelRatio:1;this.tileGrid=t.tileGrid!==undefined?t.tileGrid:null;this.tileCache=new a["a"](t.cacheSize);this.tmpSize=[0,0];this.key_="";this.tileOptions={transition:t.transition}};Object(i["d"])(d,c["a"]);d.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()};d.prototype.expireCache=function(e,t){var r=this.getTileCacheForProjection(e);if(r){r.expireCache(t)}};d.prototype.forEachLoadedTile=function(e,t,r,i){var n=this.getTileCacheForProjection(e);if(!n){return false}var a=true;var s=void 0,l=void 0,u=void 0;for(var c=r.minX;c<=r.maxX;++c){for(var h=r.minY;h<=r.maxY;++h){l=Object(f["d"])(t,c,h);u=false;if(n.containsKey(l)){s=n.get(l);u=s.getState()===o["a"].LOADED;if(u){u=i(s)!==false}}if(!u){a=false}}}return a};d.prototype.getGutter=function(e){return 0};d.prototype.getKey=function(){return this.key_};d.prototype.setKey=function(e){if(this.key_!==e){this.key_=e;this.changed()}};d.prototype.getOpaque=function(e){return this.opaque_};d.prototype.getResolutions=function(){return this.tileGrid.getResolutions()};d.prototype.getTile=function(e,t,r,i,n){};d.prototype.getTileGrid=function(){return this.tileGrid};d.prototype.getTileGridForProjection=function(e){if(!this.tileGrid){return Object(h["c"])(e)}else{return this.tileGrid}};d.prototype.getTileCacheForProjection=function(e){var t=this.getProjection();if(t&&!Object(l["e"])(t,e)){return null}else{return this.tileCache}};d.prototype.getTilePixelRatio=function(e){return this.tilePixelRatio_};d.prototype.getTilePixelSize=function(e,t,r){var i=this.getTileGridForProjection(r);var n=this.getTilePixelRatio(t);var a=Object(u["d"])(i.getTileSize(e),this.tmpSize);if(n==1){return a}else{return Object(u["c"])(a,n,this.tmpSize)}};d.prototype.getTileCoordForTileUrlFunction=function(e,t){var r=t!==undefined?t:this.getProjection();var i=this.getTileGridForProjection(r);if(this.getWrapX()&&r.isGlobal()){e=Object(h["d"])(i,e,r)}return Object(f["f"])(e,i)?e:null};d.prototype.refresh=function(){this.tileCache.clear();this.changed()};d.prototype.useTile=n["c"];var p=function e(t,r){s["a"].call(this,t);this.tile=r};Object(i["d"])(p,s["a"]);t["b"]=d},function(e,t,r){var i,n,a;
/*!
 * jQuery UI Keycode 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/*!
 * jQuery UI Keycode 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(o){if(true){!(n=[r(24),r(103)],i=o,a=typeof i==="function"?i.apply(t,n):i,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}})},function(e,t,r){(function(e,i){true?i(t,r(17),r(257)):undefined})(this,function(e,t,r){"use strict";function i(){t.event.stopImmediatePropagation()}function n(){t.event.preventDefault();t.event.stopImmediatePropagation()}function a(e){var r=e.document.documentElement,i=t.select(e).on("dragstart.drag",n,true);if("onselectstart"in r){i.on("selectstart.drag",n,true)}else{r.__noselect=r.style.MozUserSelect;r.style.MozUserSelect="none"}}function o(e,r){var i=e.document.documentElement,a=t.select(e).on("dragstart.drag",null);if(r){a.on("click.drag",n,true);setTimeout(function(){a.on("click.drag",null)},0)}if("onselectstart"in i){a.on("selectstart.drag",null)}else{i.style.MozUserSelect=i.__noselect;delete i.__noselect}}function s(e){return function(){return e}}function l(e,t,r,i,n,a,o,s,l,u){this.target=e;this.type=t;this.subject=r;this.identifier=i;this.active=n;this.x=a;this.y=o;this.dx=s;this.dy=l;this._=u}l.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function u(){return!t.event.button}function c(){return this.parentNode}function f(e){return e==null?{x:t.event.x,y:t.event.y}:e}function h(){return"ontouchstart"in this}function d(){var e=u,d=c,p=f,v=h,g={},m=r.dispatch("start","drag","end"),y=0,_,b,w,S,C=0;function x(e){e.on("mousedown.drag",O).filter(v).on("touchstart.drag",M).on("touchmove.drag",j).on("touchend.drag touchcancel.drag",A).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function O(){if(S||!e.apply(this,arguments))return;var r=P("mouse",d.apply(this,arguments),t.mouse,this,arguments);if(!r)return;t.select(t.event.view).on("mousemove.drag",T,true).on("mouseup.drag",E,true);a(t.event.view);i();w=false;_=t.event.clientX;b=t.event.clientY;r("start")}function T(){n();if(!w){var e=t.event.clientX-_,r=t.event.clientY-b;w=e*e+r*r>C}g.mouse("drag")}function E(){t.select(t.event.view).on("mousemove.drag mouseup.drag",null);o(t.event.view,w);n();g.mouse("end")}function M(){if(!e.apply(this,arguments))return;var r=t.event.changedTouches,n=d.apply(this,arguments),a=r.length,o,s;for(o=0;o<a;++o){if(s=P(r[o].identifier,n,t.touch,this,arguments)){i();s("start")}}}function j(){var e=t.event.changedTouches,r=e.length,i,a;for(i=0;i<r;++i){if(a=g[e[i].identifier]){n();a("drag")}}}function A(){var e=t.event.changedTouches,r=e.length,n,a;if(S)clearTimeout(S);S=setTimeout(function(){S=null},500);for(n=0;n<r;++n){if(a=g[e[n].identifier]){i();a("end")}}}function P(e,r,i,n,a){var o=i(r,e),s,u,c,f=m.copy();if(!t.customEvent(new l(x,"beforestart",s,e,y,o[0],o[1],0,0,f),function(){if((t.event.subject=s=p.apply(n,a))==null)return false;u=s.x-o[0]||0;c=s.y-o[1]||0;return true}))return;return function h(d){var p=o,v;switch(d){case"start":g[e]=h,v=y++;break;case"end":delete g[e],--y;case"drag":o=i(r,e),v=y;break}t.customEvent(new l(x,d,s,e,v,o[0]+u,o[1]+c,o[0]-p[0],o[1]-p[1],f),f.apply,f,[d,n,a])}}x.filter=function(t){return arguments.length?(e=typeof t==="function"?t:s(!!t),x):e};x.container=function(e){return arguments.length?(d=typeof e==="function"?e:s(e),x):d};x.subject=function(e){return arguments.length?(p=typeof e==="function"?e:s(e),x):p};x.touchable=function(e){return arguments.length?(v=typeof e==="function"?e:s(!!e),x):v};x.on=function(){var e=m.on.apply(m,arguments);return e===m?x:e};x.clickDistance=function(e){return arguments.length?(C=(e=+e)*e,x):Math.sqrt(C)};return x}e.drag=d;e.dragDisable=a;e.dragEnable=o;Object.defineProperty(e,"__esModule",{value:true})})},function(e,t,r){(function(e,r){true?r(t):undefined})(this,function(e){"use strict";var t="$";function r(){}r.prototype=i.prototype={constructor:r,has:function(e){return t+e in this},get:function(e){return this[t+e]},set:function(e,r){this[t+e]=r;return this},remove:function(e){var r=t+e;return r in this&&delete this[r]},clear:function(){for(var e in this)if(e[0]===t)delete this[e]},keys:function(){var e=[];for(var r in this)if(r[0]===t)e.push(r.slice(1));return e},values:function(){var e=[];for(var r in this)if(r[0]===t)e.push(this[r]);return e},entries:function(){var e=[];for(var r in this)if(r[0]===t)e.push({key:r.slice(1),value:this[r]});return e},size:function(){var e=0;for(var r in this)if(r[0]===t)++e;return e},empty:function(){for(var e in this)if(e[0]===t)return false;return true},each:function(e){for(var r in this)if(r[0]===t)e(this[r],r.slice(1),this)}};function i(e,t){var i=new r;if(e instanceof r)e.each(function(e,t){i.set(t,e)});else if(Array.isArray(e)){var n=-1,a=e.length,o;if(t==null)while(++n<a)i.set(n,e[n]);else while(++n<a)i.set(t(o=e[n],n,e),o)}else if(e)for(var s in e)i.set(s,e[s]);return i}function n(){var e=[],t=[],r,n,u;function c(t,a,o,s){if(a>=e.length){if(r!=null)t.sort(r);return n!=null?n(t):t}var l=-1,u=t.length,f=e[a++],h,d,p=i(),v,g=o();while(++l<u){if(v=p.get(h=f(d=t[l])+"")){v.push(d)}else{p.set(h,[d])}}p.each(function(e,t){s(g,t,c(e,a,o,s))});return g}function f(r,i){if(++i>e.length)return r;var a,o=t[i-1];if(n!=null&&i>=e.length)a=r.entries();else a=[],r.each(function(e,t){a.push({key:t,values:f(e,i)})});return o!=null?a.sort(function(e,t){return o(e.key,t.key)}):a}return u={object:function(e){return c(e,0,a,o)},map:function(e){return c(e,0,s,l)},entries:function(e){return f(c(e,0,s,l),0)},key:function(t){e.push(t);return u},sortKeys:function(r){t[e.length-1]=r;return u},sortValues:function(e){r=e;return u},rollup:function(e){n=e;return u}}}function a(){return{}}function o(e,t,r){e[t]=r}function s(){return i()}function l(e,t,r){e.set(t,r)}function u(){}var c=i.prototype;u.prototype=f.prototype={constructor:u,has:c.has,add:function(e){e+="";this[t+e]=e;return this},remove:c.remove,clear:c.clear,values:c.keys,size:c.size,empty:c.empty,each:c.each};function f(e,t){var r=new u;if(e instanceof u)e.each(function(e){r.add(e)});else if(e){var i=-1,n=e.length;if(t==null)while(++i<n)r.add(e[i]);else while(++i<n)r.add(t(e[i],i,e))}return r}function h(e){var t=[];for(var r in e)t.push(r);return t}function d(e){var t=[];for(var r in e)t.push(e[r]);return t}function p(e){var t=[];for(var r in e)t.push({key:r,value:e[r]});return t}e.nest=n;e.set=f;e.map=i;e.keys=h;e.values=d;e.entries=p;Object.defineProperty(e,"__esModule",{value:true})})},function(e,t,r){"use strict";r.d(t,"a",function(){return h});var i=r(330);var n=r(329);var a=r(328);var o=r(263);var s=r(262);var l=r(79);var u=r(164);var c=r(98);var f=r(187);var h={calendar:i["b"],longDateFormat:n["a"],invalidDate:a["a"],ordinal:o["b"],dayOfMonthOrdinalParse:o["a"],relativeTime:s["a"],months:l["b"],monthsShort:l["c"],week:u["a"],weekdays:c["a"],weekdaysMin:c["b"],weekdaysShort:c["c"],meridiemParse:f["a"]}},function(e,t,r){"use strict";var i=r(3);var n=r(216);var a=function e(t,r,i,a,o){n["a"].call(this,t,r,o);this.originalEvent=i;this.pixel=r.getEventPixel(i);this.coordinate=r.getCoordinateFromPixel(this.pixel);this.dragging=a!==undefined?a:false};Object(i["d"])(a,n["a"]);a.prototype.preventDefault=function(){n["a"].prototype.preventDefault.call(this);this.originalEvent.preventDefault()};a.prototype.stopPropagation=function(){n["a"].prototype.stopPropagation.call(this);this.originalEvent.stopPropagation()};t["a"]=a},function(e,t,r){"use strict";r.d(t,"a",function(){return s});var i=r(116);var n=function e(){this.cache_={};this.cacheSize_=0;this.maxCacheSize_=32};function a(e,t,r){var n=r?Object(i["b"])(r):"null";return t+":"+e+":"+n}n.prototype.clear=function(){this.cache_={};this.cacheSize_=0};n.prototype.expire=function(){if(this.cacheSize_>this.maxCacheSize_){var e=0;for(var t in this.cache_){var r=this.cache_[t];if((e++&3)===0&&!r.hasListener()){delete this.cache_[t];--this.cacheSize_}}}};n.prototype.get=function(e,t,r){var i=a(e,t,r);return i in this.cache_?this.cache_[i]:null};n.prototype.set=function(e,t,r,i){var n=a(e,t,r);this.cache_[n]=i;++this.cacheSize_};n.prototype.setSize=function(e){this.maxCacheSize_=e;this.expire()};var o=n;var s=new n},function(e,t,r){"use strict";var i=r(3);var n=r(5);var a=r(23);var o=r(7);var s=r(85);var l=r(356);var u=r(170);var c=r(203);var f=r(177);var h=r(246);var d=function e(t,r){s["a"].call(this);this.maxDelta_=-1;this.maxDeltaRevision_=-1;this.setCoordinates(t,r)};Object(i["d"])(d,s["a"]);d.prototype.clone=function(){var e=new d(null);e.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return e};d.prototype.closestPointXY=function(e,t,r,i){if(i<Object(n["e"])(this.getExtent(),e,t)){return i}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(Object(u["e"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return Object(u["d"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,true,e,t,r,i)};d.prototype.getArea=function(){return Object(l["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};d.prototype.getCoordinates=function(){return Object(f["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};d.prototype.getSimplifiedGeometryInternal=function(e){var t=[];t.length=Object(h["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0);var r=new d(null);r.setFlatCoordinates(a["a"].XY,t);return r};d.prototype.getType=function(){return o["a"].LINEAR_RING};d.prototype.intersectsExtent=function(e){};d.prototype.setCoordinates=function(e,t){if(!e){this.setFlatCoordinates(a["a"].XY,null)}else{this.setLayout(t,e,1);if(!this.flatCoordinates){this.flatCoordinates=[]}this.flatCoordinates.length=Object(c["b"])(this.flatCoordinates,0,e,this.stride);this.changed()}};d.prototype.setFlatCoordinates=function(e,t){this.setFlatCoordinatesInternal(e,t);this.changed()};t["a"]=d},function(e,t,r){"use strict";r.d(t,"a",function(){return i});r.d(t,"b",function(){return n});r.d(t,"c",function(){return a});function i(e,t,r,i){var n=0;var a=e[r-i];var o=e[r-i+1];for(;t<r;t+=i){var s=e[t];var l=e[t+1];n+=o*s-a*l;a=s;o=l}return n/2}function n(e,t,r,n){var a=0;for(var o=0,s=r.length;o<s;++o){var l=r[o];a+=i(e,t,l,n);t=l}return a}function a(e,t,r,i){var a=0;for(var o=0,s=r.length;o<s;++o){var l=r[o];a+=n(e,t,l,i);t=l[l.length-1]}return a}},function(e,t,r){"use strict";var i=r(3);var n=r(39);var a=r(102);var o=r(16);var s=function e(t){a["a"].call(this);this.highWaterMark=t!==undefined?t:2048;this.count_=0;this.entries_={};this.oldest_=null;this.newest_=null};Object(i["d"])(s,a["a"]);s.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark};s.prototype.clear=function(){this.count_=0;this.entries_={};this.oldest_=null;this.newest_=null;this.dispatchEvent(o["a"].CLEAR)};s.prototype.containsKey=function(e){return this.entries_.hasOwnProperty(e)};s.prototype.forEach=function(e,t){var r=this.oldest_;while(r){e.call(t,r.value_,r.key_,this);r=r.newer}};s.prototype.get=function(e){var t=this.entries_[e];Object(n["a"])(t!==undefined,15);if(t===this.newest_){return t.value_}else if(t===this.oldest_){this.oldest_=this.oldest_.newer;this.oldest_.older=null}else{t.newer.older=t.older;t.older.newer=t.newer}t.newer=null;t.older=this.newest_;this.newest_.newer=t;this.newest_=t;return t.value_};s.prototype.remove=function(e){var t=this.entries_[e];Object(n["a"])(t!==undefined,15);if(t===this.newest_){this.newest_=t.older;if(this.newest_){this.newest_.newer=null}}else if(t===this.oldest_){this.oldest_=t.newer;if(this.oldest_){this.oldest_.older=null}}else{t.newer.older=t.older;t.older.newer=t.newer}delete this.entries_[e];--this.count_;return t.value_};s.prototype.getCount=function(){return this.count_};s.prototype.getKeys=function(){var e=new Array(this.count_);var t=0;var r=void 0;for(r=this.newest_;r;r=r.older){e[t++]=r.key_}return e};s.prototype.getValues=function(){var e=new Array(this.count_);var t=0;var r=void 0;for(r=this.newest_;r;r=r.older){e[t++]=r.value_}return e};s.prototype.peekLast=function(){return this.oldest_.value_};s.prototype.peekLastKey=function(){return this.oldest_.key_};s.prototype.peekFirstKey=function(){return this.newest_.key_};s.prototype.pop=function(){var e=this.oldest_;delete this.entries_[e.key_];if(e.newer){e.newer.older=null}this.oldest_=e.newer;if(!this.oldest_){this.newest_=null}--this.count_;return e.value_};s.prototype.replace=function(e,t){this.get(e);this.entries_[e].value_=t};s.prototype.set=function(e,t){Object(n["a"])(!(e in this.entries_),16);var r={key_:e,newer:null,older:this.newest_,value_:t};if(!this.newest_){this.oldest_=r}else{this.newest_.newer=r}this.newest_=r;this.entries_[e]=r;++this.count_};s.prototype.setSize=function(e){this.highWaterMark=e};s.prototype.prune=function(){while(this.canExpireCache()){this.pop()}};t["a"]=s},function(e,t){e.exports='<h3>Total: {{ $ctrl.result.total }}</h3> <ul class="nav nav-tabs" role=tablist> <li ng-repeat="source in $ctrl.result.sources" role=presentation ng-if=source.features.length> <a href="#{{ ::source.id }}" aria-controls="{{ ::source.id }}" role=tab data-toggle=tab> <span>{{ ::source.label }}</span> <span>({{ ::source.features.length }})</span> </a> </li> </ul> <div class=tab-content> <div ng-repeat="source in $ctrl.result.sources" role=tabpanel class=tab-pane ng-if=source.features.length id="{{ ::source.id }}"> <div ng-repeat="feature in ::source.features"> <h3>{{ ::feature.get(\'display_name\') }}</h3> <div ng-repeat="(key, value) in ::feature.getProperties()" ng-init="value = value !== undefined ? value : \'\'"> <span ng-if="::(key !== feature.getGeometryName() && key !== \'ngeo_feature_type_\')"> <span ng-bind=::key></span>: <span ng-bind=::value></span> </span> </div> </div> </div> </div> '},function(e){e.exports={a:"2.4.4"}},function(e,t,r){(function(t){e.exports=t["Bloodhound"]=r(478)}).call(this,r(276))},function(e,t,r){var i,n,a;
/**
 * @preserve jQuery DateTimePicker
 * @homepage http://xdsoft.net/jqplugins/datetimepicker/
 * @author Chupurnov Valeriy (<chupurnov@gmail.com>)
 */var o=function(e){"use strict";var t={i18n:{ar:{months:["كانون الثاني","شباط","آذار","نيسان","مايو","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول"],dayOfWeekShort:["ن","ث","ع","خ","ج","س","ح"],dayOfWeek:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت","الأحد"]},ro:{months:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"],dayOfWeekShort:["Du","Lu","Ma","Mi","Jo","Vi","Sâ"],dayOfWeek:["Duminică","Luni","Marţi","Miercuri","Joi","Vineri","Sâmbătă"]},id:{months:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],dayOfWeekShort:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],dayOfWeek:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"]},is:{months:["Janúar","Febrúar","Mars","Apríl","Maí","Júní","Júlí","Ágúst","September","Október","Nóvember","Desember"],dayOfWeekShort:["Sun","Mán","Þrið","Mið","Fim","Fös","Lau"],dayOfWeek:["Sunnudagur","Mánudagur","Þriðjudagur","Miðvikudagur","Fimmtudagur","Föstudagur","Laugardagur"]},bg:{months:["Януари","Февруари","Март","Април","Май","Юни","Юли","Август","Септември","Октомври","Ноември","Декември"],dayOfWeekShort:["Нд","Пн","Вт","Ср","Чт","Пт","Сб"],dayOfWeek:["Неделя","Понеделник","Вторник","Сряда","Четвъртък","Петък","Събота"]},fa:{months:["فروردین","اردیبهشت","خرداد","تیر","مرداد","شهریور","مهر","آبان","آذر","دی","بهمن","اسفند"],dayOfWeekShort:["یکشنبه","دوشنبه","سه شنبه","چهارشنبه","پنجشنبه","جمعه","شنبه"],dayOfWeek:["یک‌شنبه","دوشنبه","سه‌شنبه","چهارشنبه","پنج‌شنبه","جمعه","شنبه","یک‌شنبه"]},ru:{months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayOfWeekShort:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],dayOfWeek:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"]},uk:{months:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],dayOfWeekShort:["Ндл","Пнд","Втр","Срд","Чтв","Птн","Сбт"],dayOfWeek:["Неділя","Понеділок","Вівторок","Середа","Четвер","П'ятниця","Субота"]},en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeekShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},el:{months:["Ιανουάριος","Φεβρουάριος","Μάρτιος","Απρίλιος","Μάιος","Ιούνιος","Ιούλιος","Αύγουστος","Σεπτέμβριος","Οκτώβριος","Νοέμβριος","Δεκέμβριος"],dayOfWeekShort:["Κυρ","Δευ","Τρι","Τετ","Πεμ","Παρ","Σαβ"],dayOfWeek:["Κυριακή","Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο"]},de:{months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],dayOfWeekShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayOfWeek:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},nl:{months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],dayOfWeekShort:["zo","ma","di","wo","do","vr","za"],dayOfWeek:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"]},tr:{months:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],dayOfWeekShort:["Paz","Pts","Sal","Çar","Per","Cum","Cts"],dayOfWeek:["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"]},fr:{months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],dayOfWeekShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],dayOfWeek:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},es:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dayOfWeekShort:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],dayOfWeek:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"]},th:{months:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],dayOfWeekShort:["อา.","จ.","อ.","พ.","พฤ.","ศ.","ส."],dayOfWeek:["อาทิตย์","จันทร์","อังคาร","พุธ","พฤหัส","ศุกร์","เสาร์","อาทิตย์"]},pl:{months:["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"],dayOfWeekShort:["nd","pn","wt","śr","cz","pt","sb"],dayOfWeek:["niedziela","poniedziałek","wtorek","środa","czwartek","piątek","sobota"]},pt:{months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeekShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],dayOfWeek:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"]},ch:{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeekShort:["日","一","二","三","四","五","六"]},se:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeekShort:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"]},km:{months:["មករា​","កុម្ភៈ","មិនា​","មេសា​","ឧសភា​","មិថុនា​","កក្កដា​","សីហា​","កញ្ញា​","តុលា​","វិច្ឆិកា","ធ្នូ​"],dayOfWeekShort:["អាទិ​","ច័ន្ទ​","អង្គារ​","ពុធ​","ព្រហ​​","សុក្រ​","សៅរ៍"],dayOfWeek:["អាទិត្យ​","ច័ន្ទ​","អង្គារ​","ពុធ​","ព្រហស្បតិ៍​","សុក្រ​","សៅរ៍"]},kr:{months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dayOfWeekShort:["일","월","화","수","목","금","토"],dayOfWeek:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"]},it:{months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],dayOfWeekShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],dayOfWeek:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"]},da:{months:["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"],dayOfWeekShort:["Søn","Man","Tir","Ons","Tor","Fre","Lør"],dayOfWeek:["søndag","mandag","tirsdag","onsdag","torsdag","fredag","lørdag"]},no:{months:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],dayOfWeekShort:["Søn","Man","Tir","Ons","Tor","Fre","Lør"],dayOfWeek:["Søndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag"]},ja:{months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeekShort:["日","月","火","水","木","金","土"],dayOfWeek:["日曜","月曜","火曜","水曜","木曜","金曜","土曜"]},vi:{months:["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"],dayOfWeekShort:["CN","T2","T3","T4","T5","T6","T7"],dayOfWeek:["Chủ nhật","Thứ hai","Thứ ba","Thứ tư","Thứ năm","Thứ sáu","Thứ bảy"]},sl:{months:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],dayOfWeekShort:["Ned","Pon","Tor","Sre","Čet","Pet","Sob"],dayOfWeek:["Nedelja","Ponedeljek","Torek","Sreda","Četrtek","Petek","Sobota"]},cs:{months:["Leden","Únor","Březen","Duben","Květen","Červen","Červenec","Srpen","Září","Říjen","Listopad","Prosinec"],dayOfWeekShort:["Ne","Po","Út","St","Čt","Pá","So"]},hu:{months:["Január","Február","Március","Április","Május","Június","Július","Augusztus","Szeptember","Október","November","December"],dayOfWeekShort:["Va","Hé","Ke","Sze","Cs","Pé","Szo"],dayOfWeek:["vasárnap","hétfő","kedd","szerda","csütörtök","péntek","szombat"]},az:{months:["Yanvar","Fevral","Mart","Aprel","May","Iyun","Iyul","Avqust","Sentyabr","Oktyabr","Noyabr","Dekabr"],dayOfWeekShort:["B","Be","Ça","Ç","Ca","C","Ş"],dayOfWeek:["Bazar","Bazar ertəsi","Çərşənbə axşamı","Çərşənbə","Cümə axşamı","Cümə","Şənbə"]},bs:{months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],dayOfWeekShort:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"],dayOfWeek:["Nedjelja","Ponedjeljak","Utorak","Srijeda","Četvrtak","Petak","Subota"]},ca:{months:["Gener","Febrer","Març","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"],dayOfWeekShort:["Dg","Dl","Dt","Dc","Dj","Dv","Ds"],dayOfWeek:["Diumenge","Dilluns","Dimarts","Dimecres","Dijous","Divendres","Dissabte"]},"en-GB":{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeekShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},et:{months:["Jaanuar","Veebruar","Märts","Aprill","Mai","Juuni","Juuli","August","September","Oktoober","November","Detsember"],dayOfWeekShort:["P","E","T","K","N","R","L"],dayOfWeek:["Pühapäev","Esmaspäev","Teisipäev","Kolmapäev","Neljapäev","Reede","Laupäev"]},eu:{months:["Urtarrila","Otsaila","Martxoa","Apirila","Maiatza","Ekaina","Uztaila","Abuztua","Iraila","Urria","Azaroa","Abendua"],dayOfWeekShort:["Ig.","Al.","Ar.","Az.","Og.","Or.","La."],dayOfWeek:["Igandea","Astelehena","Asteartea","Asteazkena","Osteguna","Ostirala","Larunbata"]},fi:{months:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kesäkuu","Heinäkuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],dayOfWeekShort:["Su","Ma","Ti","Ke","To","Pe","La"],dayOfWeek:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"]},gl:{months:["Xan","Feb","Maz","Abr","Mai","Xun","Xul","Ago","Set","Out","Nov","Dec"],dayOfWeekShort:["Dom","Lun","Mar","Mer","Xov","Ven","Sab"],dayOfWeek:["Domingo","Luns","Martes","Mércores","Xoves","Venres","Sábado"]},hr:{months:["Siječanj","Veljača","Ožujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],dayOfWeekShort:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"],dayOfWeek:["Nedjelja","Ponedjeljak","Utorak","Srijeda","Četvrtak","Petak","Subota"]},ko:{months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dayOfWeekShort:["일","월","화","수","목","금","토"],dayOfWeek:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"]},lt:{months:["Sausio","Vasario","Kovo","Balandžio","Gegužės","Birželio","Liepos","Rugpjūčio","Rugsėjo","Spalio","Lapkričio","Gruodžio"],dayOfWeekShort:["Sek","Pir","Ant","Tre","Ket","Pen","Šeš"],dayOfWeek:["Sekmadienis","Pirmadienis","Antradienis","Trečiadienis","Ketvirtadienis","Penktadienis","Šeštadienis"]},lv:{months:["Janvāris","Februāris","Marts","Aprīlis ","Maijs","Jūnijs","Jūlijs","Augusts","Septembris","Oktobris","Novembris","Decembris"],dayOfWeekShort:["Sv","Pr","Ot","Tr","Ct","Pk","St"],dayOfWeek:["Svētdiena","Pirmdiena","Otrdiena","Trešdiena","Ceturtdiena","Piektdiena","Sestdiena"]},mk:{months:["јануари","февруари","март","април","мај","јуни","јули","август","септември","октомври","ноември","декември"],dayOfWeekShort:["нед","пон","вто","сре","чет","пет","саб"],dayOfWeek:["Недела","Понеделник","Вторник","Среда","Четврток","Петок","Сабота"]},mn:{months:["1-р сар","2-р сар","3-р сар","4-р сар","5-р сар","6-р сар","7-р сар","8-р сар","9-р сар","10-р сар","11-р сар","12-р сар"],dayOfWeekShort:["Дав","Мяг","Лха","Пүр","Бсн","Бям","Ням"],dayOfWeek:["Даваа","Мягмар","Лхагва","Пүрэв","Баасан","Бямба","Ням"]},"pt-BR":{months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeekShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],dayOfWeek:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"]},sk:{months:["Január","Február","Marec","Apríl","Máj","Jún","Júl","August","September","Október","November","December"],dayOfWeekShort:["Ne","Po","Ut","St","Št","Pi","So"],dayOfWeek:["Nedeľa","Pondelok","Utorok","Streda","Štvrtok","Piatok","Sobota"]},sq:{months:["Janar","Shkurt","Mars","Prill","Maj","Qershor","Korrik","Gusht","Shtator","Tetor","Nëntor","Dhjetor"],dayOfWeekShort:["Die","Hën","Mar","Mër","Enj","Pre","Shtu"],dayOfWeek:["E Diel","E Hënë","E Martē","E Mërkurë","E Enjte","E Premte","E Shtunë"]},"sr-YU":{months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],dayOfWeekShort:["Ned","Pon","Uto","Sre","čet","Pet","Sub"],dayOfWeek:["Nedelja","Ponedeljak","Utorak","Sreda","Četvrtak","Petak","Subota"]},sr:{months:["јануар","фебруар","март","април","мај","јун","јул","август","септембар","октобар","новембар","децембар"],dayOfWeekShort:["нед","пон","уто","сре","чет","пет","суб"],dayOfWeek:["Недеља","Понедељак","Уторак","Среда","Четвртак","Петак","Субота"]},sv:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeekShort:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"],dayOfWeek:["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag"]},"zh-TW":{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeekShort:["日","一","二","三","四","五","六"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},zh:{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeekShort:["日","一","二","三","四","五","六"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},ug:{months:["1-ئاي","2-ئاي","3-ئاي","4-ئاي","5-ئاي","6-ئاي","7-ئاي","8-ئاي","9-ئاي","10-ئاي","11-ئاي","12-ئاي"],dayOfWeek:["يەكشەنبە","دۈشەنبە","سەيشەنبە","چارشەنبە","پەيشەنبە","جۈمە","شەنبە"]},he:{months:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],dayOfWeekShort:["א'","ב'","ג'","ד'","ה'","ו'","שבת"],dayOfWeek:["ראשון","שני","שלישי","רביעי","חמישי","שישי","שבת","ראשון"]},hy:{months:["Հունվար","Փետրվար","Մարտ","Ապրիլ","Մայիս","Հունիս","Հուլիս","Օգոստոս","Սեպտեմբեր","Հոկտեմբեր","Նոյեմբեր","Դեկտեմբեր"],dayOfWeekShort:["Կի","Երկ","Երք","Չոր","Հնգ","Ուրբ","Շբթ"],dayOfWeek:["Կիրակի","Երկուշաբթի","Երեքշաբթի","Չորեքշաբթի","Հինգշաբթի","Ուրբաթ","Շաբաթ"]},kg:{months:["Үчтүн айы","Бирдин айы","Жалган Куран","Чын Куран","Бугу","Кулжа","Теке","Баш Оона","Аяк Оона","Тогуздун айы","Жетинин айы","Бештин айы"],dayOfWeekShort:["Жек","Дүй","Шей","Шар","Бей","Жум","Ише"],dayOfWeek:["Жекшемб","Дүйшөмб","Шейшемб","Шаршемб","Бейшемби","Жума","Ишенб"]},rm:{months:["Schaner","Favrer","Mars","Avrigl","Matg","Zercladur","Fanadur","Avust","Settember","October","November","December"],dayOfWeekShort:["Du","Gli","Ma","Me","Gie","Ve","So"],dayOfWeek:["Dumengia","Glindesdi","Mardi","Mesemna","Gievgia","Venderdi","Sonda"]},ka:{months:["იანვარი","თებერვალი","მარტი","აპრილი","მაისი","ივნისი","ივლისი","აგვისტო","სექტემბერი","ოქტომბერი","ნოემბერი","დეკემბერი"],dayOfWeekShort:["კვ","ორშ","სამშ","ოთხ","ხუთ","პარ","შაბ"],dayOfWeek:["კვირა","ორშაბათი","სამშაბათი","ოთხშაბათი","ხუთშაბათი","პარასკევი","შაბათი"]}},ownerDocument:document,contentWindow:window,value:"",rtl:false,format:"Y/m/d H:i",formatTime:"H:i",formatDate:"Y/m/d",startDate:false,step:60,monthChangeSpinner:true,closeOnDateSelect:false,closeOnTimeSelect:true,closeOnWithoutClick:true,closeOnInputClick:true,openOnFocus:true,timepicker:true,datepicker:true,weeks:false,defaultTime:false,defaultDate:false,minDate:false,maxDate:false,minTime:false,maxTime:false,minDateTime:false,maxDateTime:false,allowTimes:[],opened:false,initTime:true,inline:false,theme:"",touchMovedThreshold:5,onSelectDate:function(){},onSelectTime:function(){},onChangeMonth:function(){},onGetWeekOfYear:function(){},onChangeYear:function(){},onChangeDateTime:function(){},onShow:function(){},onClose:function(){},onGenerate:function(){},withoutCopyright:true,inverseButton:false,hours12:false,next:"xdsoft_next",prev:"xdsoft_prev",dayOfWeekStart:0,parentID:"body",timeHeightInTimePicker:25,timepickerScrollbar:true,todayButton:true,prevButton:true,nextButton:true,defaultSelect:true,scrollMonth:true,scrollTime:true,scrollInput:true,lazyInit:false,mask:false,validateOnBlur:true,allowBlank:true,yearStart:1950,yearEnd:2050,monthStart:0,monthEnd:11,style:"",id:"",fixed:false,roundTime:"round",className:"",weekends:[],highlightedDates:[],highlightedPeriods:[],allowDates:[],allowDateRe:null,disabledDates:[],disabledWeekDays:[],yearOffset:0,beforeShowDay:null,enterLikeTab:true,showApplyButton:false};var r=null,i=null,n="en",a="en";var o={meridiem:["AM","PM"]};var s=function(){var n=t.i18n[a],s={days:n.dayOfWeek,daysShort:n.dayOfWeekShort,months:n.months,monthsShort:e.map(n.months,function(e){return e.substring(0,3)})};if(typeof DateFormatter==="function"){r=i=new DateFormatter({dateSettings:e.extend({},o,s)})}};var l={moment:{default_options:{format:"YYYY/MM/DD HH:mm",formatDate:"YYYY/MM/DD",formatTime:"HH:mm"},formatter:{parseDate:function(e,t){if(c(t)){return i.parseDate(e,t)}var r=moment(e,t);return r.isValid()?r.toDate():false},formatDate:function(e,t){if(c(t)){return i.formatDate(e,t)}return moment(e).format(t)},formatMask:function(e){return e.replace(/Y{4}/g,"9999").replace(/Y{2}/g,"99").replace(/M{2}/g,"19").replace(/D{2}/g,"39").replace(/H{2}/g,"29").replace(/m{2}/g,"59").replace(/s{2}/g,"59")}}}};e.datetimepicker={setLocale:function(e){var r=t.i18n[e]?e:n;if(a!==r){a=r;s()}},setDateFormatter:function(i){if(typeof i==="string"&&l.hasOwnProperty(i)){var n=l[i];e.extend(t,n.default_options);r=n.formatter}else{r=i}}};var u={RFC_2822:"D, d M Y H:i:s O",ATOM:"Y-m-dTH:i:sP",ISO_8601:"Y-m-dTH:i:sO",RFC_822:"D, d M y H:i:s O",RFC_850:"l, d-M-y H:i:s T",RFC_1036:"D, d M y H:i:s O",RFC_1123:"D, d M Y H:i:s O",RSS:"D, d M Y H:i:s O",W3C:"Y-m-dTH:i:sP"};var c=function(e){return Object.values(u).indexOf(e)===-1?false:true};e.extend(e.datetimepicker,u);s();if(!window.getComputedStyle){window.getComputedStyle=function(e){this.el=e;this.getPropertyValue=function(t){var r=/(-([a-z]))/g;if(t==="float"){t="styleFloat"}if(r.test(t)){t=t.replace(r,function(e,t,r){return r.toUpperCase()})}return e.currentStyle[t]||null};return this}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(e,t){var r,i;for(r=t||0,i=this.length;r<i;r+=1){if(this[r]===e){return r}}return-1}}Date.prototype.countDaysInMonth=function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate()};e.fn.xdsoftScroller=function(t,r){return this.each(function(){var i=e(this),n=function(e){var t={x:0,y:0},r;if(e.type==="touchstart"||e.type==="touchmove"||e.type==="touchend"||e.type==="touchcancel"){r=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];t.x=r.clientX;t.y=r.clientY}else if(e.type==="mousedown"||e.type==="mouseup"||e.type==="mousemove"||e.type==="mouseover"||e.type==="mouseout"||e.type==="mouseenter"||e.type==="mouseleave"){t.x=e.clientX;t.y=e.clientY}return t},a,o,s,l,u,c=100,f=false,h=0,d=0,p=0,v=false,g=0,m=function(){};if(r==="hide"){i.find(".xdsoft_scrollbar").hide();return}if(!e(this).hasClass("xdsoft_scroller_box")){a=i.children().eq(0);o=i[0].clientHeight;s=a[0].offsetHeight;l=e('<div class="xdsoft_scrollbar"></div>');u=e('<div class="xdsoft_scroller"></div>');l.append(u);i.addClass("xdsoft_scroller_box").append(l);m=function e(t){var r=n(t).y-h+g;if(r<0){r=0}if(r+u[0].offsetHeight>p){r=p-u[0].offsetHeight}i.trigger("scroll_element.xdsoft_scroller",[c?r/c:0])};u.on("touchstart.xdsoft_scroller mousedown.xdsoft_scroller",function(a){if(!o){i.trigger("resize_scroll.xdsoft_scroller",[r])}h=n(a).y;g=parseInt(u.css("margin-top"),10);p=l[0].offsetHeight;if(a.type==="mousedown"||a.type==="touchstart"){if(t.ownerDocument){e(t.ownerDocument.body).addClass("xdsoft_noselect")}e([t.ownerDocument.body,t.contentWindow]).on("touchend mouseup.xdsoft_scroller",function r(){e([t.ownerDocument.body,t.contentWindow]).off("touchend mouseup.xdsoft_scroller",r).off("mousemove.xdsoft_scroller",m).removeClass("xdsoft_noselect")});e(t.ownerDocument.body).on("mousemove.xdsoft_scroller",m)}else{v=true;a.stopPropagation();a.preventDefault()}}).on("touchmove",function(e){if(v){e.preventDefault();m(e)}}).on("touchend touchcancel",function(){v=false;g=0});i.on("scroll_element.xdsoft_scroller",function(e,t){if(!o){i.trigger("resize_scroll.xdsoft_scroller",[t,true])}t=t>1?1:t<0||isNaN(t)?0:t;u.css("margin-top",c*t);setTimeout(function(){a.css("marginTop",-parseInt((a[0].offsetHeight-o)*t,10))},10)}).on("resize_scroll.xdsoft_scroller",function(e,t,r){var n,f;o=i[0].clientHeight;s=a[0].offsetHeight;n=o/s;f=n*l[0].offsetHeight;if(n>1){u.hide()}else{u.show();u.css("height",parseInt(f>10?f:10,10));c=l[0].offsetHeight-u[0].offsetHeight;if(r!==true){i.trigger("scroll_element.xdsoft_scroller",[t||Math.abs(parseInt(a.css("marginTop"),10))/(s-o)])}}});i.on("mousewheel",function(e){var t=Math.abs(parseInt(a.css("marginTop"),10));t=t-e.deltaY*20;if(t<0){t=0}i.trigger("scroll_element.xdsoft_scroller",[t/(s-o)]);e.stopPropagation();return false});i.on("touchstart",function(e){f=n(e);d=Math.abs(parseInt(a.css("marginTop"),10))});i.on("touchmove",function(e){if(f){e.preventDefault();var t=n(e);i.trigger("scroll_element.xdsoft_scroller",[(d-(t.y-f.y))/(s-o)])}});i.on("touchend touchcancel",function(){f=false;d=0})}i.trigger("resize_scroll.xdsoft_scroller",[r])})};e.fn.datetimepicker=function(i,n){var o=this,s=48,l=57,u=96,c=105,h=17,d=46,p=13,v=27,g=8,m=37,y=38,_=39,b=40,w=9,S=116,C=65,x=67,O=86,T=90,E=89,M=false,j=e.isPlainObject(i)||!i?e.extend(true,{},t,i):e.extend(true,{},t),A=0,P,k,I=function(e){e.on("open.xdsoft focusin.xdsoft mousedown.xdsoft touchstart",function t(){if(e.is(":disabled")||e.data("xdsoft_datetimepicker")){return}clearTimeout(A);A=setTimeout(function(){if(!e.data("xdsoft_datetimepicker")){P(e)}e.off("open.xdsoft focusin.xdsoft mousedown.xdsoft touchstart",t).trigger("open.xdsoft")},100)})};P=function(t){var n=e('<div class="xdsoft_datetimepicker xdsoft_noselect"></div>'),o=e('<div class="xdsoft_copyright"><a target="_blank" href="http://xdsoft.net/jqplugins/datetimepicker/">xdsoft.net</a></div>'),A=e('<div class="xdsoft_datepicker active"></div>'),P=e('<div class="xdsoft_monthpicker"><button type="button" class="xdsoft_prev"></button><button type="button" class="xdsoft_today_button"></button>'+'<div class="xdsoft_label xdsoft_month"><span></span><i></i></div>'+'<div class="xdsoft_label xdsoft_year"><span></span><i></i></div>'+'<button type="button" class="xdsoft_next"></button></div>'),k=e('<div class="xdsoft_calendar"></div>'),I=e('<div class="xdsoft_timepicker active"><button type="button" class="xdsoft_prev"></button><div class="xdsoft_time_box"></div><button type="button" class="xdsoft_next"></button></div>'),D=I.find(".xdsoft_time_box").eq(0),R=e('<div class="xdsoft_time_variant"></div>'),L=e('<button type="button" class="xdsoft_save_selected blue-gradient-button">Save Selected</button>'),$=e('<div class="xdsoft_select xdsoft_monthselect"><div></div></div>'),N=e('<div class="xdsoft_select xdsoft_yearselect"><div></div></div>'),F=false,G,U,H,Y,W,V=0,z,q;if(j.id){n.attr("id",j.id)}if(j.style){n.attr("style",j.style)}if(j.weeks){n.addClass("xdsoft_showweeks")}if(j.rtl){n.addClass("xdsoft_rtl")}n.addClass("xdsoft_"+j.theme);n.addClass(j.className);P.find(".xdsoft_month span").after($);P.find(".xdsoft_year span").after(N);P.find(".xdsoft_month,.xdsoft_year").on("touchstart mousedown.xdsoft",function(t){var r=e(this).find(".xdsoft_select").eq(0),i=0,n=0,a=r.is(":visible"),o,s;P.find(".xdsoft_select").hide();if(z.currentTime){i=z.currentTime[e(this).hasClass("xdsoft_month")?"getMonth":"getFullYear"]()}r[a?"hide":"show"]();for(o=r.find("div.xdsoft_option"),s=0;s<o.length;s+=1){if(o.eq(s).data("value")===i){break}else{n+=o[0].offsetHeight}}r.xdsoftScroller(j,n/(r.children()[0].offsetHeight-r[0].clientHeight));t.stopPropagation();return false});var B=function(e){var t=e.originalEvent;var r=t.touches?t.touches[0]:t;this.touchStartPosition=this.touchStartPosition||r;var i=Math.abs(this.touchStartPosition.clientX-r.clientX);var n=Math.abs(this.touchStartPosition.clientY-r.clientY);var a=Math.sqrt(i*i+n*n);if(a>j.touchMovedThreshold){this.touchMoved=true}};P.find(".xdsoft_select").xdsoftScroller(j).on("touchstart mousedown.xdsoft",function(e){var t=e.originalEvent;this.touchMoved=false;this.touchStartPosition=t.touches?t.touches[0]:t;e.stopPropagation();e.preventDefault()}).on("touchmove",".xdsoft_option",B).on("touchend mousedown.xdsoft",".xdsoft_option",function(){if(!this.touchMoved){if(z.currentTime===undefined||z.currentTime===null){z.currentTime=z.now()}var t=z.currentTime.getFullYear();if(z&&z.currentTime){z.currentTime[e(this).parent().parent().hasClass("xdsoft_monthselect")?"setMonth":"setFullYear"](e(this).data("value"))}e(this).parent().parent().hide();n.trigger("xchange.xdsoft");if(j.onChangeMonth&&e.isFunction(j.onChangeMonth)){j.onChangeMonth.call(n,z.currentTime,n.data("input"))}if(t!==z.currentTime.getFullYear()&&e.isFunction(j.onChangeYear)){j.onChangeYear.call(n,z.currentTime,n.data("input"))}}});n.getValue=function(){return z.getCurrentTime()};n.setOptions=function(i){var a={};j=e.extend(true,{},j,i);if(i.allowTimes&&e.isArray(i.allowTimes)&&i.allowTimes.length){j.allowTimes=e.extend(true,[],i.allowTimes)}if(i.weekends&&e.isArray(i.weekends)&&i.weekends.length){j.weekends=e.extend(true,[],i.weekends)}if(i.allowDates&&e.isArray(i.allowDates)&&i.allowDates.length){j.allowDates=e.extend(true,[],i.allowDates)}if(i.allowDateRe&&Object.prototype.toString.call(i.allowDateRe)==="[object String]"){j.allowDateRe=new RegExp(i.allowDateRe)}if(i.highlightedDates&&e.isArray(i.highlightedDates)&&i.highlightedDates.length){e.each(i.highlightedDates,function(t,i){var n=e.map(i.split(","),e.trim),o,s=new f(r.parseDate(n[0],j.formatDate),n[1],n[2]),l=r.formatDate(s.date,j.formatDate);if(a[l]!==undefined){o=a[l].desc;if(o&&o.length&&s.desc&&s.desc.length){a[l].desc=o+"\n"+s.desc}}else{a[l]=s}});j.highlightedDates=e.extend(true,[],a)}if(i.highlightedPeriods&&e.isArray(i.highlightedPeriods)&&i.highlightedPeriods.length){a=e.extend(true,[],j.highlightedDates);e.each(i.highlightedPeriods,function(t,i){var n,o,s,l,u,c,h;if(e.isArray(i)){n=i[0];o=i[1];s=i[2];h=i[3]}else{var d=e.map(i.split(","),e.trim);n=r.parseDate(d[0],j.formatDate);o=r.parseDate(d[1],j.formatDate);s=d[2];h=d[3]}while(n<=o){l=new f(n,s,h);u=r.formatDate(n,j.formatDate);n.setDate(n.getDate()+1);if(a[u]!==undefined){c=a[u].desc;if(c&&c.length&&l.desc&&l.desc.length){a[u].desc=c+"\n"+l.desc}}else{a[u]=l}}});j.highlightedDates=e.extend(true,[],a)}if(i.disabledDates&&e.isArray(i.disabledDates)&&i.disabledDates.length){j.disabledDates=e.extend(true,[],i.disabledDates)}if(i.disabledWeekDays&&e.isArray(i.disabledWeekDays)&&i.disabledWeekDays.length){j.disabledWeekDays=e.extend(true,[],i.disabledWeekDays)}if((j.open||j.opened)&&!j.inline){t.trigger("open.xdsoft")}if(j.inline){F=true;n.addClass("xdsoft_inline");t.after(n).hide()}if(j.inverseButton){j.next="xdsoft_prev";j.prev="xdsoft_next"}if(j.datepicker){A.addClass("active")}else{A.removeClass("active")}if(j.timepicker){I.addClass("active")}else{I.removeClass("active")}if(j.value){z.setCurrentTime(j.value);if(t&&t.val){t.val(z.str)}}if(isNaN(j.dayOfWeekStart)){j.dayOfWeekStart=0}else{j.dayOfWeekStart=parseInt(j.dayOfWeekStart,10)%7}if(!j.timepickerScrollbar){D.xdsoftScroller(j,"hide")}if(j.minDate&&/^[\+\-](.*)$/.test(j.minDate)){j.minDate=r.formatDate(z.strToDateTime(j.minDate),j.formatDate)}if(j.maxDate&&/^[\+\-](.*)$/.test(j.maxDate)){j.maxDate=r.formatDate(z.strToDateTime(j.maxDate),j.formatDate)}if(j.minDateTime&&/^\+(.*)$/.test(j.minDateTime)){j.minDateTime=z.strToDateTime(j.minDateTime).dateFormat(j.formatDate)}if(j.maxDateTime&&/^\+(.*)$/.test(j.maxDateTime)){j.maxDateTime=z.strToDateTime(j.maxDateTime).dateFormat(j.formatDate)}L.toggle(j.showApplyButton);P.find(".xdsoft_today_button").css("visibility",!j.todayButton?"hidden":"visible");P.find("."+j.prev).css("visibility",!j.prevButton?"hidden":"visible");P.find("."+j.next).css("visibility",!j.nextButton?"hidden":"visible");K(j);if(j.validateOnBlur){t.off("blur.xdsoft").on("blur.xdsoft",function(){if(j.allowBlank&&(!e.trim(e(this).val()).length||typeof j.mask==="string"&&e.trim(e(this).val())===j.mask.replace(/[0-9]/g,"_"))){e(this).val(null);n.data("xdsoft_datetime").empty()}else{var t=r.parseDate(e(this).val(),j.format);if(t){e(this).val(r.formatDate(t,j.format))}else{var i=+[e(this).val()[0],e(this).val()[1]].join(""),a=+[e(this).val()[2],e(this).val()[3]].join("");if(!j.datepicker&&j.timepicker&&i>=0&&i<24&&a>=0&&a<60){e(this).val([i,a].map(function(e){return e>9?e:"0"+e}).join(":"))}else{e(this).val(r.formatDate(z.now(),j.format))}}n.data("xdsoft_datetime").setCurrentTime(e(this).val())}n.trigger("changedatetime.xdsoft");n.trigger("close.xdsoft")})}j.dayOfWeekStartPrev=j.dayOfWeekStart===0?6:j.dayOfWeekStart-1;n.trigger("xchange.xdsoft").trigger("afterOpen.xdsoft")};n.data("options",j).on("touchstart mousedown.xdsoft",function(e){e.stopPropagation();e.preventDefault();N.hide();$.hide();return false});D.append(R);D.xdsoftScroller(j);n.on("afterOpen.xdsoft",function(){D.xdsoftScroller(j)});n.append(A).append(I);if(j.withoutCopyright!==true){n.append(o)}A.append(P).append(k).append(L);e(j.parentID).append(n);G=function(){var t=this;t.now=function(e){var r=new Date,i,n;if(!e&&j.defaultDate){i=t.strToDateTime(j.defaultDate);r.setFullYear(i.getFullYear());r.setMonth(i.getMonth());r.setDate(i.getDate())}r.setFullYear(r.getFullYear());if(!e&&j.defaultTime){n=t.strtotime(j.defaultTime);r.setHours(n.getHours());r.setMinutes(n.getMinutes());r.setSeconds(n.getSeconds());r.setMilliseconds(n.getMilliseconds())}return r};t.isValidDate=function(e){if(Object.prototype.toString.call(e)!=="[object Date]"){return false}return!isNaN(e.getTime())};t.setCurrentTime=function(e,r){if(typeof e==="string"){t.currentTime=t.strToDateTime(e)}else if(t.isValidDate(e)){t.currentTime=e}else if(!e&&!r&&j.allowBlank&&!j.inline){t.currentTime=null}else{t.currentTime=t.now()}n.trigger("xchange.xdsoft")};t.empty=function(){t.currentTime=null};t.getCurrentTime=function(){return t.currentTime};t.nextMonth=function(){if(t.currentTime===undefined||t.currentTime===null){t.currentTime=t.now()}var r=t.currentTime.getMonth()+1,i;if(r===12){t.currentTime.setFullYear(t.currentTime.getFullYear()+1);r=0}i=t.currentTime.getFullYear();t.currentTime.setDate(Math.min(new Date(t.currentTime.getFullYear(),r+1,0).getDate(),t.currentTime.getDate()));t.currentTime.setMonth(r);if(j.onChangeMonth&&e.isFunction(j.onChangeMonth)){j.onChangeMonth.call(n,z.currentTime,n.data("input"))}if(i!==t.currentTime.getFullYear()&&e.isFunction(j.onChangeYear)){j.onChangeYear.call(n,z.currentTime,n.data("input"))}n.trigger("xchange.xdsoft");return r};t.prevMonth=function(){if(t.currentTime===undefined||t.currentTime===null){t.currentTime=t.now()}var r=t.currentTime.getMonth()-1;if(r===-1){t.currentTime.setFullYear(t.currentTime.getFullYear()-1);r=11}t.currentTime.setDate(Math.min(new Date(t.currentTime.getFullYear(),r+1,0).getDate(),t.currentTime.getDate()));t.currentTime.setMonth(r);if(j.onChangeMonth&&e.isFunction(j.onChangeMonth)){j.onChangeMonth.call(n,z.currentTime,n.data("input"))}n.trigger("xchange.xdsoft");return r};t.getWeekOfYear=function(t){if(j.onGetWeekOfYear&&e.isFunction(j.onGetWeekOfYear)){var r=j.onGetWeekOfYear.call(n,t);if(typeof r!=="undefined"){return r}}var i=new Date(t.getFullYear(),0,1);if(i.getDay()!==4){i.setMonth(0,1+(4-i.getDay()+7)%7)}return Math.ceil(((t-i)/864e5+i.getDay()+1)/7)};t.strToDateTime=function(e){var i=[],n,a;if(e&&e instanceof Date&&t.isValidDate(e)){return e}i=/^([+-]{1})(.*)$/.exec(e);if(i){i[2]=r.parseDate(i[2],j.formatDate)}if(i&&i[2]){n=i[2].getTime()-i[2].getTimezoneOffset()*6e4;a=new Date(t.now(true).getTime()+parseInt(i[1]+"1",10)*n)}else{a=e?r.parseDate(e,j.format):t.now()}if(!t.isValidDate(a)){a=t.now()}return a};t.strToDate=function(e){if(e&&e instanceof Date&&t.isValidDate(e)){return e}var i=e?r.parseDate(e,j.formatDate):t.now(true);if(!t.isValidDate(i)){i=t.now(true)}return i};t.strtotime=function(e){if(e&&e instanceof Date&&t.isValidDate(e)){return e}var i=e?r.parseDate(e,j.formatTime):t.now(true);if(!t.isValidDate(i)){i=t.now(true)}return i};t.str=function(){var e=j.format;if(j.yearOffset){e=e.replace("Y",t.currentTime.getFullYear()+j.yearOffset);e=e.replace("y",String(t.currentTime.getFullYear()+j.yearOffset).substring(2,4))}return r.formatDate(t.currentTime,e)};t.currentTime=this.now()};z=new G;L.on("touchend click",function(e){e.preventDefault();n.data("changed",true);z.setCurrentTime(X());t.val(z.str());n.trigger("close.xdsoft")});P.find(".xdsoft_today_button").on("touchend mousedown.xdsoft",function(){n.data("changed",true);z.setCurrentTime(0,true);n.trigger("afterOpen.xdsoft")}).on("dblclick.xdsoft",function(){var e=z.getCurrentTime(),r,i;e=new Date(e.getFullYear(),e.getMonth(),e.getDate());r=z.strToDate(j.minDate);r=new Date(r.getFullYear(),r.getMonth(),r.getDate());if(e<r){return}i=z.strToDate(j.maxDate);i=new Date(i.getFullYear(),i.getMonth(),i.getDate());if(e>i){return}t.val(z.str());t.trigger("change");n.trigger("close.xdsoft")});P.find(".xdsoft_prev,.xdsoft_next").on("touchend mousedown.xdsoft",function(){var t=e(this),r=0,i=false;(function e(n){if(t.hasClass(j.next)){z.nextMonth()}else if(t.hasClass(j.prev)){z.prevMonth()}if(j.monthChangeSpinner){if(!i){r=setTimeout(e,n||100)}}})(500);e([j.ownerDocument.body,j.contentWindow]).on("touchend mouseup.xdsoft",function t(){clearTimeout(r);i=true;e([j.ownerDocument.body,j.contentWindow]).off("touchend mouseup.xdsoft",t)})});I.find(".xdsoft_prev,.xdsoft_next").on("touchend mousedown.xdsoft",function(){var t=e(this),r=0,i=false,n=110;(function e(a){var o=D[0].clientHeight,s=R[0].offsetHeight,l=Math.abs(parseInt(R.css("marginTop"),10));if(t.hasClass(j.next)&&s-o-j.timeHeightInTimePicker>=l){R.css("marginTop","-"+(l+j.timeHeightInTimePicker)+"px")}else if(t.hasClass(j.prev)&&l-j.timeHeightInTimePicker>=0){R.css("marginTop","-"+(l-j.timeHeightInTimePicker)+"px")}D.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(R[0].style.marginTop,10)/(s-o))]);n=n>10?10:n-10;if(!i){r=setTimeout(e,a||n)}})(500);e([j.ownerDocument.body,j.contentWindow]).on("touchend mouseup.xdsoft",function t(){clearTimeout(r);i=true;e([j.ownerDocument.body,j.contentWindow]).off("touchend mouseup.xdsoft",t)})});U=0;n.on("xchange.xdsoft",function(o){clearTimeout(U);U=setTimeout(function(){if(z.currentTime===undefined||z.currentTime===null){z.currentTime=z.now()}var o="",s=new Date(z.currentTime.getFullYear(),z.currentTime.getMonth(),1,12,0,0),l=0,u,c=z.now(),f=false,h=false,d=false,p=false,v,g,m,y,_,b,w=[],S,C=true,x="",O,T,E;while(s.getDay()!==j.dayOfWeekStart){s.setDate(s.getDate()-1)}o+="<table><thead><tr>";if(j.weeks){o+="<th></th>"}for(u=0;u<7;u+=1){o+="<th>"+j.i18n[a].dayOfWeekShort[(u+j.dayOfWeekStart)%7]+"</th>"}o+="</tr></thead>";o+="<tbody>";if(j.maxDate!==false){f=z.strToDate(j.maxDate);f=new Date(f.getFullYear(),f.getMonth(),f.getDate(),23,59,59,999)}if(j.minDate!==false){h=z.strToDate(j.minDate);h=new Date(h.getFullYear(),h.getMonth(),h.getDate())}if(j.minDateTime!==false){d=z.strToDate(j.minDateTime);d=new Date(d.getFullYear(),d.getMonth(),d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds())}if(j.maxDateTime!==false){p=z.strToDate(j.maxDateTime);p=new Date(p.getFullYear(),p.getMonth(),p.getDate(),p.getHours(),p.getMinutes(),p.getSeconds())}var M;if(p!==false){M=(p.getFullYear()*12+p.getMonth())*31+p.getDate()}while(l<z.currentTime.countDaysInMonth()||s.getDay()!==j.dayOfWeekStart||z.currentTime.getMonth()===s.getMonth()){w=[];l+=1;g=s.getDay();m=s.getDate();y=s.getFullYear();_=s.getMonth();b=z.getWeekOfYear(s);E="";w.push("xdsoft_date");if(j.beforeShowDay&&e.isFunction(j.beforeShowDay.call)){S=j.beforeShowDay.call(n,s)}else{S=null}if(j.allowDateRe&&Object.prototype.toString.call(j.allowDateRe)==="[object RegExp]"){if(!j.allowDateRe.test(r.formatDate(s,j.formatDate))){w.push("xdsoft_disabled")}}if(j.allowDates&&j.allowDates.length>0){if(j.allowDates.indexOf(r.formatDate(s,j.formatDate))===-1){w.push("xdsoft_disabled")}}var A=(s.getFullYear()*12+s.getMonth())*31+s.getDate();if(f!==false&&s>f||d!==false&&s<d||h!==false&&s<h||p!==false&&A>M||S&&S[0]===false){w.push("xdsoft_disabled")}if(j.disabledDates.indexOf(r.formatDate(s,j.formatDate))!==-1){w.push("xdsoft_disabled")}if(j.disabledWeekDays.indexOf(g)!==-1){w.push("xdsoft_disabled")}if(t.is("[disabled]")){w.push("xdsoft_disabled")}if(S&&S[1]!==""){w.push(S[1])}if(z.currentTime.getMonth()!==_){w.push("xdsoft_other_month")}if((j.defaultSelect||n.data("changed"))&&r.formatDate(z.currentTime,j.formatDate)===r.formatDate(s,j.formatDate)){w.push("xdsoft_current")}if(r.formatDate(c,j.formatDate)===r.formatDate(s,j.formatDate)){w.push("xdsoft_today")}if(s.getDay()===0||s.getDay()===6||j.weekends.indexOf(r.formatDate(s,j.formatDate))!==-1){w.push("xdsoft_weekend")}if(j.highlightedDates[r.formatDate(s,j.formatDate)]!==undefined){v=j.highlightedDates[r.formatDate(s,j.formatDate)];w.push(v.style===undefined?"xdsoft_highlighted_default":v.style);E=v.desc===undefined?"":v.desc}if(j.beforeShowDay&&e.isFunction(j.beforeShowDay)){w.push(j.beforeShowDay(s))}if(C){o+="<tr>";C=false;if(j.weeks){o+="<th>"+b+"</th>"}}o+='<td data-date="'+m+'" data-month="'+_+'" data-year="'+y+'"'+' class="xdsoft_date xdsoft_day_of_week'+s.getDay()+" "+w.join(" ")+'" title="'+E+'">'+"<div>"+m+"</div>"+"</td>";if(s.getDay()===j.dayOfWeekStartPrev){o+="</tr>";C=true}s.setDate(m+1)}o+="</tbody></table>";k.html(o);P.find(".xdsoft_label span").eq(0).text(j.i18n[a].months[z.currentTime.getMonth()]);P.find(".xdsoft_label span").eq(1).text(z.currentTime.getFullYear()+j.yearOffset);x="";O="";_="";var I=0;if(j.minTime!==false){var D=z.strtotime(j.minTime);I=60*D.getHours()+D.getMinutes()}var L=24*60;if(j.maxTime!==false){var D=z.strtotime(j.maxTime);L=60*D.getHours()+D.getMinutes()}if(j.minDateTime!==false){var D=z.strToDateTime(j.minDateTime);var F=r.formatDate(z.currentTime,j.formatDate)===r.formatDate(D,j.formatDate);if(F){var _=60*D.getHours()+D.getMinutes();if(_>I)I=_}}if(j.maxDateTime!==false){var D=z.strToDateTime(j.maxDateTime);var G=r.formatDate(z.currentTime,j.formatDate)===r.formatDate(D,j.formatDate);if(G){var _=60*D.getHours()+D.getMinutes();if(_<L)L=_}}T=function i(a,o){var s=z.now(),l,u=j.allowTimes&&e.isArray(j.allowTimes)&&j.allowTimes.length;s.setHours(a);a=parseInt(s.getHours(),10);s.setMinutes(o);o=parseInt(s.getMinutes(),10);w=[];var f=60*a+o;if(t.is("[disabled]")||f>=L||f<I){w.push("xdsoft_disabled")}l=new Date(z.currentTime);l.setHours(parseInt(z.currentTime.getHours(),10));if(!u){l.setMinutes(Math[j.roundTime](z.currentTime.getMinutes()/j.step)*j.step)}if((j.initTime||j.defaultSelect||n.data("changed"))&&l.getHours()===parseInt(a,10)&&(!u&&j.step>59||l.getMinutes()===parseInt(o,10))){if(j.defaultSelect||n.data("changed")){w.push("xdsoft_current")}else if(j.initTime){w.push("xdsoft_init_time")}}if(parseInt(c.getHours(),10)===parseInt(a,10)&&parseInt(c.getMinutes(),10)===parseInt(o,10)){w.push("xdsoft_today")}x+='<div class="xdsoft_time '+w.join(" ")+'" data-hour="'+a+'" data-minute="'+o+'">'+r.formatDate(s,j.formatTime)+"</div>"};if(!j.allowTimes||!e.isArray(j.allowTimes)||!j.allowTimes.length){for(l=0,u=0;l<(j.hours12?12:24);l+=1){for(u=0;u<60;u+=j.step){var U=l*60+u;if(U<I)continue;if(U>=L)continue;O=(l<10?"0":"")+l;_=(u<10?"0":"")+u;T(O,_)}}}else{for(l=0;l<j.allowTimes.length;l+=1){O=z.strtotime(j.allowTimes[l]).getHours();_=z.strtotime(j.allowTimes[l]).getMinutes();T(O,_)}}R.html(x);i="";for(l=parseInt(j.yearStart,10);l<=parseInt(j.yearEnd,10);l+=1){i+='<div class="xdsoft_option '+(z.currentTime.getFullYear()===l?"xdsoft_current":"")+'" data-value="'+l+'">'+(l+j.yearOffset)+"</div>"}N.children().eq(0).html(i);for(l=parseInt(j.monthStart,10),i="";l<=parseInt(j.monthEnd,10);l+=1){i+='<div class="xdsoft_option '+(z.currentTime.getMonth()===l?"xdsoft_current":"")+'" data-value="'+l+'">'+j.i18n[a].months[l]+"</div>"}$.children().eq(0).html(i);e(n).trigger("generate.xdsoft")},10);o.stopPropagation()}).on("afterOpen.xdsoft",function(){if(j.timepicker){var e,t,r,i;if(R.find(".xdsoft_current").length){e=".xdsoft_current"}else if(R.find(".xdsoft_init_time").length){e=".xdsoft_init_time"}if(e){t=D[0].clientHeight;r=R[0].offsetHeight;i=R.find(e).index()*j.timeHeightInTimePicker+1;if(r-t<i){i=r-t}D.trigger("scroll_element.xdsoft_scroller",[parseInt(i,10)/(r-t)])}else{D.trigger("scroll_element.xdsoft_scroller",[0])}}});H=0;k.on("touchend click.xdsoft","td",function(r){r.stopPropagation();H+=1;var i=e(this),a=z.currentTime;if(a===undefined||a===null){z.currentTime=z.now();a=z.currentTime}if(i.hasClass("xdsoft_disabled")){return false}a.setDate(1);a.setFullYear(i.data("year"));a.setMonth(i.data("month"));a.setDate(i.data("date"));n.trigger("select.xdsoft",[a]);t.val(z.str());if(j.onSelectDate&&e.isFunction(j.onSelectDate)){j.onSelectDate.call(n,z.currentTime,n.data("input"),r)}n.data("changed",true);n.trigger("xchange.xdsoft");n.trigger("changedatetime.xdsoft");if((H>1||(j.closeOnDateSelect===true||j.closeOnDateSelect===false&&!j.timepicker))&&!j.inline){n.trigger("close.xdsoft")}setTimeout(function(){H=0},200)});R.on("touchstart","div",function(e){this.touchMoved=false}).on("touchmove","div",B).on("touchend click.xdsoft","div",function(t){if(!this.touchMoved){t.stopPropagation();var r=e(this),i=z.currentTime;if(i===undefined||i===null){z.currentTime=z.now();i=z.currentTime}if(r.hasClass("xdsoft_disabled")){return false}i.setHours(r.data("hour"));i.setMinutes(r.data("minute"));n.trigger("select.xdsoft",[i]);n.data("input").val(z.str());if(j.onSelectTime&&e.isFunction(j.onSelectTime)){j.onSelectTime.call(n,z.currentTime,n.data("input"),t)}n.data("changed",true);n.trigger("xchange.xdsoft");n.trigger("changedatetime.xdsoft");if(j.inline!==true&&j.closeOnTimeSelect===true){n.trigger("close.xdsoft")}}});A.on("mousewheel.xdsoft",function(e){if(!j.scrollMonth){return true}if(e.deltaY<0){z.nextMonth()}else{z.prevMonth()}return false});t.on("mousewheel.xdsoft",function(e){if(!j.scrollInput){return true}if(!j.datepicker&&j.timepicker){Y=R.find(".xdsoft_current").length?R.find(".xdsoft_current").eq(0).index():0;if(Y+e.deltaY>=0&&Y+e.deltaY<R.children().length){Y+=e.deltaY}if(R.children().eq(Y).length){R.children().eq(Y).trigger("mousedown")}return false}if(j.datepicker&&!j.timepicker){A.trigger(e,[e.deltaY,e.deltaX,e.deltaY]);if(t.val){t.val(z.str())}n.trigger("changedatetime.xdsoft");return false}});n.on("changedatetime.xdsoft",function(t){if(j.onChangeDateTime&&e.isFunction(j.onChangeDateTime)){var r=n.data("input");j.onChangeDateTime.call(n,z.currentTime,r,t);delete j.value;r.trigger("change")}}).on("generate.xdsoft",function(){if(j.onGenerate&&e.isFunction(j.onGenerate)){j.onGenerate.call(n,z.currentTime,n.data("input"))}if(F){n.trigger("afterOpen.xdsoft");F=false}}).on("click.xdsoft",function(e){e.stopPropagation()});Y=0;q=function(e,t){do{e=e.parentNode;if(!e||t(e)===false){break}}while(e.nodeName!=="HTML")};W=function(){var t,r,i,a,o,s,l,u,c,f,h,d,p;u=n.data("input");t=u.offset();r=u[0];f="top";i=t.top+r.offsetHeight-1;a=t.left;o="absolute";c=e(j.contentWindow).width();d=e(j.contentWindow).height();p=e(j.contentWindow).scrollTop();if(j.ownerDocument.documentElement.clientWidth-t.left<A.parent().outerWidth(true)){var v=A.parent().outerWidth(true)-r.offsetWidth;a=a-v}if(u.parent().css("direction")==="rtl"){a-=n.outerWidth()-u.outerWidth()}if(j.fixed){i-=p;a-=e(j.contentWindow).scrollLeft();o="fixed"}else{l=false;q(r,function(e){if(e===null){return false}if(j.contentWindow.getComputedStyle(e).getPropertyValue("position")==="fixed"){l=true;return false}});if(l){o="fixed";if(i+n.outerHeight()>d+p){f="bottom";i=d+p-t.top}else{i-=p}}else{if(i+n[0].offsetHeight>d+p){i=t.top-n[0].offsetHeight+1}}if(i<0){i=0}if(a+r.offsetWidth>c){a=c-r.offsetWidth}}s=n[0];q(s,function(e){var t;t=j.contentWindow.getComputedStyle(e).getPropertyValue("position");if(t==="relative"&&c>=e.offsetWidth){a=a-(c-e.offsetWidth)/2;return false}});h={position:o,left:a,top:"",bottom:""};h[f]=i;n.css(h)};n.on("open.xdsoft",function(t){var r=true;if(j.onShow&&e.isFunction(j.onShow)){r=j.onShow.call(n,z.currentTime,n.data("input"),t)}if(r!==false){n.show();W();e(j.contentWindow).off("resize.xdsoft",W).on("resize.xdsoft",W);if(j.closeOnWithoutClick){e([j.ownerDocument.body,j.contentWindow]).on("touchstart mousedown.xdsoft",function t(){n.trigger("close.xdsoft");e([j.ownerDocument.body,j.contentWindow]).off("touchstart mousedown.xdsoft",t)})}}}).on("close.xdsoft",function(t){var r=true;P.find(".xdsoft_month,.xdsoft_year").find(".xdsoft_select").hide();if(j.onClose&&e.isFunction(j.onClose)){r=j.onClose.call(n,z.currentTime,n.data("input"),t)}if(r!==false&&!j.opened&&!j.inline){n.hide()}t.stopPropagation()}).on("toggle.xdsoft",function(){if(n.is(":visible")){n.trigger("close.xdsoft")}else{n.trigger("open.xdsoft")}}).data("input",t);V=0;n.data("xdsoft_datetime",z);n.setOptions(j);function X(){var e=false,r;if(j.startDate){e=z.strToDate(j.startDate)}else{e=j.value||(t&&t.val&&t.val()?t.val():"");if(e){e=z.strToDateTime(e);if(j.yearOffset){e=new Date(e.getFullYear()-j.yearOffset,e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}}else if(j.defaultDate){e=z.strToDateTime(j.defaultDate);if(j.defaultTime){r=z.strtotime(j.defaultTime);e.setHours(r.getHours());e.setMinutes(r.getMinutes())}}}if(e&&z.isValidDate(e)){n.data("changed",true)}else{e=""}return e||0}function K(i){var n=function(e,t){var r=e.replace(/([\[\]\/\{\}\(\)\-\.\+]{1})/g,"\\$1").replace(/_/g,"{digit+}").replace(/([0-9]{1})/g,"{digit$1}").replace(/\{digit([0-9]{1})\}/g,"[0-$1_]{1}").replace(/\{digit[\+]\}/g,"[0-9_]{1}");return new RegExp(r).test(t)},a=function(e){try{if(i.ownerDocument.selection&&i.ownerDocument.selection.createRange){var t=i.ownerDocument.selection.createRange();return t.getBookmark().charCodeAt(2)-2}if(e.setSelectionRange){return e.selectionStart}}catch(e){return 0}},o=function(e,t){e=typeof e==="string"||e instanceof String?i.ownerDocument.getElementById(e):e;if(!e){return false}if(e.createTextRange){var r=e.createTextRange();r.collapse(true);r.moveEnd("character",t);r.moveStart("character",t);r.select();return true}if(e.setSelectionRange){e.setSelectionRange(t,t);return true}return false};if(i.mask){t.off("keydown.xdsoft")}if(i.mask===true){if(r.formatMask){i.mask=r.formatMask(i.format)}else{i.mask=i.format.replace(/Y/g,"9999").replace(/F/g,"9999").replace(/m/g,"19").replace(/d/g,"39").replace(/H/g,"29").replace(/i/g,"59").replace(/s/g,"59")}}if(e.type(i.mask)==="string"){if(!n(i.mask,t.val())){t.val(i.mask.replace(/[0-9]/g,"_"));o(t[0],0)}t.on("paste.xdsoft",function(r){var a=r.clipboardData||r.originalEvent.clipboardData||window.clipboardData,s=a.getData("text"),l=this.value,u=this.selectionStart;var c=l.substr(0,u);var f=l.substr(u+s.length);l=c+s+f;u+=s.length;if(n(i.mask,l)){this.value=l;o(this,u)}else if(e.trim(l)===""){this.value=i.mask.replace(/[0-9]/g,"_")}else{t.trigger("error_input.xdsoft")}r.preventDefault();return false});t.on("keydown.xdsoft",function(r){var a=this.value,f=r.which,j=this.selectionStart,A=this.selectionEnd,P=j!==A,k;if(f>=s&&f<=l||f>=u&&f<=c||(f===g||f===d)){k=f===g||f===d?"_":String.fromCharCode(u<=f&&f<=c?f-s:f);if(f===g&&j&&!P){j-=1}while(true){var I=i.mask.substr(j,1);var D=j<i.mask.length;var R=j>0;var L=/[^0-9_]/;var $=L.test(I);var N=$&&D&&R;if(!N)break;j+=f===g&&!P?-1:1}if(P){var F=A-j;var G=i.mask.replace(/[0-9]/g,"_");var U=G.substr(j,F);var H=U.substr(1);var Y=a.substr(0,j);var W=k+H;var V=a.substr(j+F);a=Y+W+V}else{var z=a.substr(0,j);var q=k;var B=a.substr(j+1);a=z+q+B}if(e.trim(a)===""){a=G}else{if(j===i.mask.length){r.preventDefault();return false}}j+=f===g?0:1;while(/[^0-9_]/.test(i.mask.substr(j,1))&&j<i.mask.length&&j>0){j+=f===g?0:1}if(n(i.mask,a)){this.value=a;o(this,j)}else if(e.trim(a)===""){this.value=i.mask.replace(/[0-9]/g,"_")}else{t.trigger("error_input.xdsoft")}}else{if([C,x,O,T,E].indexOf(f)!==-1&&M||[v,y,b,m,_,S,h,w,p].indexOf(f)!==-1){return true}}r.preventDefault();return false})}}z.setCurrentTime(X());t.data("xdsoft_datetimepicker",n).on("open.xdsoft focusin.xdsoft mousedown.xdsoft touchstart",function(){if(t.is(":disabled")||t.data("xdsoft_datetimepicker").is(":visible")&&j.closeOnInputClick){return}if(!j.openOnFocus){return}clearTimeout(V);V=setTimeout(function(){if(t.is(":disabled")){return}F=true;z.setCurrentTime(X(),true);if(j.mask){K(j)}n.trigger("open.xdsoft")},100)}).on("keydown.xdsoft",function(t){var r,i=t.which;if([p].indexOf(i)!==-1&&j.enterLikeTab){r=e("input:visible,textarea:visible,button:visible,a:visible");n.trigger("close.xdsoft");r.eq(r.index(this)+1).focus();return false}if([w].indexOf(i)!==-1){n.trigger("close.xdsoft");return true}}).on("blur.xdsoft",function(){n.trigger("close.xdsoft")})};k=function(t){var r=t.data("xdsoft_datetimepicker");if(r){r.data("xdsoft_datetime",null);r.remove();t.data("xdsoft_datetimepicker",null).off(".xdsoft");e(j.contentWindow).off("resize.xdsoft");e([j.contentWindow,j.ownerDocument.body]).off("mousedown.xdsoft touchstart");if(t.unmousewheel){t.unmousewheel()}}};e(j.ownerDocument).off("keydown.xdsoftctrl keyup.xdsoftctrl").on("keydown.xdsoftctrl",function(e){if(e.keyCode===h){M=true}}).on("keyup.xdsoftctrl",function(e){if(e.keyCode===h){M=false}});this.each(function(){var t=e(this).data("xdsoft_datetimepicker"),a;if(t){if(e.type(i)==="string"){switch(i){case"show":e(this).select().focus();t.trigger("open.xdsoft");break;case"hide":t.trigger("close.xdsoft");break;case"toggle":t.trigger("toggle.xdsoft");break;case"destroy":k(e(this));break;case"reset":this.value=this.defaultValue;if(!this.value||!t.data("xdsoft_datetime").isValidDate(r.parseDate(this.value,j.format))){t.data("changed",false)}t.data("xdsoft_datetime").setCurrentTime(this.value);break;case"validate":a=t.data("input");a.trigger("blur.xdsoft");break;default:if(t[i]&&e.isFunction(t[i])){o=t[i](n)}}}else{t.setOptions(i)}return 0}if(e.type(i)!=="string"){if(!j.lazyInit||j.open||j.inline){P(e(this))}else{I(e(this))}}});return o};e.fn.datetimepicker.defaults=t;function f(e,t,r){"use strict";this.date=e;this.desc=t;this.style=r}};(function(o){if(true){!(n=[r(24),r(522)],i=o,a=typeof i==="function"?i.apply(t,n):i,a!==undefined&&(e.exports=a))}else{}})(o)},function(e,t,r){r(527);e.exports="ngSanitize"},function(e,t,r){var i,n,a;
/*!
 * jQuery UI Scroll Parent 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/*!
 * jQuery UI Scroll Parent 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(o){if(true){!(n=[r(24),r(103)],i=o,a=typeof i==="function"?i.apply(t,n):i,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.fn.scrollParent=function(t){var r=this.css("position"),i=r==="absolute",n=t?/(auto|scroll|hidden)/:/(auto|scroll)/,a=this.parents().filter(function(){var t=e(this);if(i&&t.css("position")==="static"){return false}return n.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return r==="fixed"||!a.length?e(this[0].ownerDocument||document):a}})},function(e,t,r){var i,n,a;(function(o){if(true){!(n=[r(24),r(103)],i=o,a=typeof i==="function"?i.apply(t,n):i,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.ui.plugin={add:function(t,r,i){var n,a=e.ui[t].prototype;for(n in i){a.plugins[n]=a.plugins[n]||[];a.plugins[n].push([r,i[n]])}},call:function(e,t,r,i){var n,a=e.plugins[t];if(!a){return}if(!i&&(!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)){return}for(n=0;n<a.length;n++){if(e.options[a[n][0]]){a[n][1].apply(e.element,r)}}}}})},function(e,t,r){var i,n,a;
/*!
 * jQuery UI :data 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/*!
 * jQuery UI :data 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(o){if(true){!(n=[r(24),r(103)],i=o,a=typeof i==="function"?i.apply(t,n):i,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(r){return!!e.data(r,t)}}):function(t,r,i){return!!e.data(t,i[3])}})})},function(e,t,r){var i,n,a;(function(o){if(true){!(n=[r(24),r(103)],i=o,a=typeof i==="function"?i.apply(t,n):i,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())})},function(e,t,r){(function(e){+function(e){"use strict";var t='[data-dismiss="alert"]';var r=function(r){e(r).on("click",t,this.close)};r.VERSION="3.3.7";r.TRANSITION_DURATION=150;r.prototype.close=function(t){var i=e(this);var n=i.attr("data-target");if(!n){n=i.attr("href");n=n&&n.replace(/.*(?=#[^\s]*$)/,"")}var a=e(n==="#"?[]:n);if(t)t.preventDefault();if(!a.length){a=i.closest(".alert")}a.trigger(t=e.Event("close.bs.alert"));if(t.isDefaultPrevented())return;a.removeClass("in");function o(){a.detach().trigger("closed.bs.alert").remove()}e.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",o).emulateTransitionEnd(r.TRANSITION_DURATION):o()};function i(t){return this.each(function(){var i=e(this);var n=i.data("bs.alert");if(!n)i.data("bs.alert",n=new r(this));if(typeof t=="string")n[t].call(i)})}var n=e.fn.alert;e.fn.alert=i;e.fn.alert.Constructor=r;e.fn.alert.noConflict=function(){e.fn.alert=n;return this};e(document).on("click.bs.alert.data-api",t,r.prototype.close)}(e)}).call(this,r(24))},function(e,t,r){(function(t){e.exports=t["angular"]=r(541)}).call(this,r(276))},function(e,t,r){"use strict";var i=r(1);var n=r(8);var a={LINE_STRING:"LineString",POINT:"Point",POLYGON:"Polygon"};var o=a;var s=r(66);var l=r(3);var u=r(21);var c=r(116);var f=r(9);var h=r(94);var d=r(201);var p=function e(){h["a"].call(this)};Object(l["d"])(p,h["a"]);function v(e){if(typeof e==="string"){return e}else{return""}}p.prototype.getType=function(){return d["a"].TEXT};p.prototype.readFeature=function(e,t){return this.readFeatureFromText(v(e),this.adaptOptions(t))};p.prototype.readFeatureFromText=function(e,t){};p.prototype.readFeatures=function(e,t){return this.readFeaturesFromText(v(e),this.adaptOptions(t))};p.prototype.readFeaturesFromText=function(e,t){};p.prototype.readGeometry=function(e,t){return this.readGeometryFromText(v(e),this.adaptOptions(t))};p.prototype.readGeometryFromText=function(e,t){};p.prototype.readProjection=function(e){return this.readProjectionFromText(v(e))};p.prototype.readProjectionFromText=function(e){return this.defaultDataProjection};p.prototype.writeFeature=function(e,t){return this.writeFeatureText(e,this.adaptOptions(t))};p.prototype.writeFeatureText=function(e,t){};p.prototype.writeFeatures=function(e,t){return this.writeFeaturesText(e,this.adaptOptions(t))};p.prototype.writeFeaturesText=function(e,t){};p.prototype.writeGeometry=function(e,t){return this.writeGeometryText(e,this.adaptOptions(t))};p.prototype.writeGeometryText=function(e,t){};var g=p;var m=r(23);var y=r(51);var _=r(130);var b=r(131);var w=r(141);var S=r(34);var C=r(49);var x=r(101);var O=r(47);var T=r(38);var E=r(15);var M=r(167);var j=function e(t){g.call(this);var r=t!==undefined?t:{};this.accuracy_=r.accuracy!==undefined?r.accuracy:e.ACCURACY_;this.encodeStyles_=r.encodeStyles!==undefined?r.encodeStyles:true;this.propertiesFunction_=r.properties!==undefined?r.properties:e.defaultPropertiesFunction_;this.setStyle_=r.setStyle!==undefined?r.setStyle:true;this.prevX_=0;this.prevY_=0;e.LegacyProperties_=r.propertiesType!==undefined&&r.propertiesType;this.defaultValues_=r.defaultValues!==undefined?r.defaultValues:{}};l["d"](j,g);j.StyleTypes_={LineString:o.LINE_STRING,Point:o.POINT,Polygon:o.POLYGON,MultiLineString:o.LINE_STRING,MultiPoint:o.POINT,MultiPolygon:o.POLYGON};j.LegacyProperties_={};j.prototype.readFeature;j.prototype.readFeatures;j.prototype.readGeometry;j.prototype.writeFeature;j.prototype.writeFeatures;j.prototype.writeGeometry;j.CHAR64_=".-_!*ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghjkmnpqrstuvwxyz";j.ACCURACY_=.1;j.defaultPropertiesFunction_=function(e){return e.getProperties()};j.encodeSignedNumber_=function(e){var t=e<<1;if(e<0){t=~t}return j.encodeNumber_(t)};j.encodeNumber_=function(e){var t="";while(e>=32){t+=j.CHAR64_.charAt(32|e&31);e>>=5}t+=j.CHAR64_.charAt(e);return t};j.encodeStyles_=function(e,t,r){var n=j.StyleTypes_[t];i["a"].assert(n!==undefined);for(var a=0;a<e.length;++a){var s=e[a];var l=s.getFill();var u=s.getImage();var c=s.getStroke();var f=s.getText();if(n==o.POLYGON){if(l!==null){j.encodeStylePolygon_(l,c,r)}}else if(n==o.LINE_STRING){if(c!==null){j.encodeStyleLine_(c,r)}}else if(n==o.POINT){if(u!==null){j.encodeStylePoint_(u,r)}}if(f!==null){j.encodeStyleText_(f,r)}}};j.encodeStyleLine_=function(e,t){j.encodeStyleStroke_(e,t)};j.encodeStylePoint_=function(e,t){if(e instanceof x["a"]){var r=e.getRadius();if(t.length>0){t.push("'")}t.push(encodeURIComponent("pointRadius*"+r));var i=e.getFill();if(i!==null){j.encodeStyleFill_(i,t)}var n=e.getStroke();if(n!==null){j.encodeStyleStroke_(n,t)}}};j.encodeStylePolygon_=function(e,t,r){j.encodeStyleFill_(e,r);if(t!==null){j.encodeStyleStroke_(t,r)}};j.encodeStyleFill_=function(e,t,r){var n=r!==undefined?r:"fillColor";var a=e.getColor();if(a!==null){i["a"].assert(Array.isArray(a),"only supporting fill colors");var o=c["a"](a);i["a"].assert(Array.isArray(o),"fill color must be an array");var l=s["a"].rgbArrayToHex(o);if(t.length>0){t.push("'")}t.push(encodeURIComponent(n+"*"+l))}};j.encodeStyleStroke_=function(e,t){var r=e.getColor();if(r!==null){i["a"].assert(Array.isArray(r));var n=c["a"](r);i["a"].assert(Array.isArray(n),"only supporting stroke colors");var a=s["a"].rgbArrayToHex(n);if(t.length>0){t.push("'")}t.push(encodeURIComponent("strokeColor*"+a))}var o=e.getWidth();if(o!==undefined){if(t.length>0){t.push("'")}t.push(encodeURIComponent("strokeWidth*"+o))}};j.encodeStyleText_=function(e,t){var r=e.getFont();if(r!==undefined){var i=r.split(" ");if(i.length>=3){if(t.length>0){t.push("'")}t.push(encodeURIComponent("fontSize*"+i[1]))}}var n=e.getFill();if(n!==null){j.encodeStyleFill_(n,t,"fontColor")}};j.readLineStringGeometry_=function(e){i["a"].assert(e.substring(0,2)==="l(");i["a"].assert(e[e.length-1]==")");e=e.substring(2,e.length-1);var t=this.decodeCoordinates_(e);var r=new y["a"](null);r.setFlatCoordinates(m["a"].XY,t);return r};j.readMultiLineStringGeometry_=function(e){i["a"].assert(e.substring(0,2)==="L(");i["a"].assert(e[e.length-1]==")");e=e.substring(2,e.length-1);var t=[];var r=[];var n=e.split("'");for(var a=0,o=n.length;a<o;++a){t=this.decodeCoordinates_(n[a],t);r[a]=t.length}var s=new _["a"](null);s.setFlatCoordinates(m["a"].XY,t,r);return s};j.readPointGeometry_=function(e){i["a"].assert(e.substring(0,2)==="p(");i["a"].assert(e[e.length-1]==")");e=e.substring(2,e.length-1);var t=this.decodeCoordinates_(e);i["a"].assert(t.length===2);var r=new S["a"](null);r.setFlatCoordinates(m["a"].XY,t);return r};j.readMultiPointGeometry_=function(e){i["a"].assert(e.substring(0,2)==="P(");i["a"].assert(e[e.length-1]==")");e=e.substring(2,e.length-1);var t=this.decodeCoordinates_(e);var r=new b["a"](null);r.setFlatCoordinates(m["a"].XY,t);return r};j.readPolygonGeometry_=function(e){i["a"].assert(e.substring(0,2)==="a(");i["a"].assert(e[e.length-1]==")");e=e.substring(2,e.length-1);var t=[];var r=[];var n=e.split("'");for(var a=0,o=n.length;a<o;++a){t=this.decodeCoordinates_(n[a],t);var s=t.length;if(a===0){t[s++]=t[0];t[s++]=t[1]}else{t[s++]=t[r[a-1]];t[s++]=t[r[a-1]+1]}r[a]=s}var l=new C["a"](null);l.setFlatCoordinates(m["a"].XY,t,r);return l};j.readMultiPolygonGeometry_=function(e){i["a"].assert(e.substring(0,2)==="A(");i["a"].assert(e[e.length-1]==")");e=e.substring(2,e.length-1);var t=[];var r=[];var n=e.split(")(");for(var a=0,o=n.length;a<o;++a){var s=n[a].split("'");var l=r[a]=[];for(var u=0,c=s.length;u<c;++u){t=this.decodeCoordinates_(s[u],t);var f=t.length;if(u===0){t[f++]=t[0];t[f++]=t[1]}else{t[f++]=t[l[u-1]];t[f++]=t[l[u-1]+1]}l[u]=f}}var h=new w["a"](null);h.setFlatCoordinates(m["a"].XY,t,r);return h};j.setStyleInFeature_=function(e,t){if(e==""){return}var r=j.getStyleProperties_(e,t);var i=r["fillColor"];var n=r["fontSize"];var a=r["fontColor"];var o=r["pointRadius"];var s=r["strokeColor"];var l=r["strokeWidth"];var u=null;if(i!==undefined){u=new O["a"]({color:i})}var c=null;if(s!==undefined&&l!==undefined){c=new T["a"]({color:s,width:l})}var f=null;if(o!==undefined){f=new x["a"]({radius:o,fill:u,stroke:c});u=c=null}var h=null;if(n!==undefined&&a!==undefined){h=new M["a"]({font:n+" sans-serif",fill:new O["a"]({color:a})})}var d=new E["c"]({fill:u,image:f,stroke:c,text:h});t.setStyle(d)};j.setStyleProperties_=function(e,t){var r=j.getStyleProperties_(e,t);var i=t.getGeometry();if(i instanceof S["a"]){if(r["isLabel"]||r[n["a"].IS_TEXT]){delete r["strokeColor"];delete r["fillColor"]}else{delete r["fontColor"];delete r["fontSize"]}}else{delete r["fontColor"];if(i instanceof y["a"]){delete r["fillColor"];delete r["fillOpacity"]}}if(r["fontSize"]){var a=parseFloat(r["fontSize"]);if(r["fontSize"].indexOf("px")!==-1){a=Math.round(a/1.333333)}r["fontSize"]=a}var o={};for(var s in r){var l=r[s];if(j.LegacyProperties_[s]){o[j.LegacyProperties_[s]]=l}else{o[s]=l}}t.setProperties(o)};j.castValue_=function(e,t){var r=[n["a"].ANGLE,n["a"].OPACITY,n["a"].SIZE,n["a"].STROKE,"pointRadius","strokeWidth"];var i=[n["a"].IS_CIRCLE,n["a"].IS_RECTANGLE,n["a"].IS_TEXT,n["a"].SHOW_MEASURE,n["a"].SHOW_LABEL,"isCircle","isRectangle","isLabel","showMeasure","showLabel"];if(f["f"](r,e)){return+t}else if(f["f"](i,e)){return t==="true"?true:false}else{return t}};j.getStyleProperties_=function(e,t){var r=e.split("'");var n={};for(var a=0;a<r.length;++a){var o=decodeURIComponent(r[a]);var s=o.split("*");i["a"].assert(s.length===2);var l=s[0];var u=s[1];n[l]=j.castValue_(l,u)}return n};j.writeLineStringGeometry_=function(e){i["a"].assertInstanceof(e,y["a"]);var t=e.getFlatCoordinates();var r=e.getStride();var n=t.length;return"l("+this.encodeCoordinates_(t,r,0,n)+")"};j.writeMultiLineStringGeometry_=function(e){i["a"].assertInstanceof(e,_["a"]);var t=e.getEnds();var r=t.length;var n=e.getFlatCoordinates();var a=e.getStride();var o=0;var s=["L("];for(var l=0;l<r;++l){var u=t[l];var c=this.encodeCoordinates_(n,a,o,u);if(l!==0){s.push("'")}s.push(c);o=u}s.push(")");return s.join("")};j.writePointGeometry_=function(e){i["a"].assertInstanceof(e,S["a"]);var t=e.getFlatCoordinates();var r=e.getStride();var n=t.length;return"p("+this.encodeCoordinates_(t,r,0,n)+")"};j.writeMultiPointGeometry_=function(e){i["a"].assertInstanceof(e,b["a"]);var t=e.getFlatCoordinates();var r=e.getStride();var n=t.length;return"P("+this.encodeCoordinates_(t,r,0,n)+")"};j.encodeRings_=function(e,t,r,i,n){var a=i.length;for(var o=0;o<a;++o){var s=i[o]-t;var l=this.encodeCoordinates_(e,t,r,s);if(o!==0){n.push("'")}n.push(l);r=i[o]}return r};j.writePolygonGeometry_=function(e){i["a"].assertInstanceof(e,C["a"]);var t=e.getFlatCoordinates();var r=e.getStride();var n=e.getEnds();var a=0;var o=["a("];j.encodeRings_.call(this,t,r,a,n,o);o.push(")");return o.join("")};j.writeMultiPolygonGeometry_=function(e){i["a"].assertInstanceof(e,w["a"]);var t=e.getFlatCoordinates();var r=e.getStride();var n=e.getEndss();var a=n.length;var o=0;var s=["A"];for(var l=0;l<a;++l){var u=n[l];s.push("(");o=j.encodeRings_.call(this,t,r,o,u,s);s.push(")")}return s.join("")};j.GEOMETRY_READERS_={P:j.readMultiPointGeometry_,L:j.readMultiLineStringGeometry_,A:j.readMultiPolygonGeometry_,l:j.readLineStringGeometry_,p:j.readPointGeometry_,a:j.readPolygonGeometry_};j.GEOMETRY_WRITERS_={MultiLineString:j.writeMultiLineStringGeometry_,MultiPoint:j.writeMultiPointGeometry_,MultiPolygon:j.writeMultiPolygonGeometry_,LineString:j.writeLineStringGeometry_,Point:j.writePointGeometry_,Polygon:j.writePolygonGeometry_};j.prototype.decodeCoordinates_=function(e,t){var r=e.length;var i=0;var n=t!==undefined?t:[];var a=n.length;while(i<r){var o=void 0;var s=0;var l=0;do{o=j.CHAR64_.indexOf(e.charAt(i++));l|=(o&31)<<s;s+=5}while(o>=32);var u=l&1?~(l>>1):l>>1;this.prevX_+=u;s=0;l=0;do{o=j.CHAR64_.indexOf(e.charAt(i++));l|=(o&31)<<s;s+=5}while(o>=32);var c=l&1?~(l>>1):l>>1;this.prevY_+=c;n[a++]=this.prevX_*this.accuracy_;n[a++]=this.prevY_*this.accuracy_}return n};j.prototype.encodeCoordinates_=function(e,t,r,i){var n="";for(var a=r;a<i;a+=t){var o=e[a];var s=e[a+1];o=Math.floor(o/this.accuracy_);s=Math.floor(s/this.accuracy_);var l=o-this.prevX_;var u=s-this.prevY_;this.prevX_=o;this.prevY_=s;n+=j.encodeSignedNumber_(l)+j.encodeSignedNumber_(u)}return n};j.prototype.readFeatureFromText=function(e,t){i["a"].assert(e.length>2);i["a"].assert(e[1]==="(");i["a"].assert(e[e.length-1]===")");var r=e.indexOf("~");var n=r>=0?e.substring(0,r)+")":e;var a=this.readGeometryFromText(n,t);var o=new u["a"](a);if(r>=0){var s=e.substring(r+1,e.length-1);r=s.indexOf("~");var l=r>=0?s.substring(0,r):s;if(l!=""){var c=l.split("'");for(var f=0;f<c.length;++f){var h=decodeURIComponent(c[f]);var d=h.split("*");i["a"].assert(d.length===2);var p=d[0];var v=d[1];if(!this.setStyle_&&j.LegacyProperties_[p]){p=j.LegacyProperties_[p]}o.set(p,j.castValue_(p,v))}}if(r>=0){var g=s.substring(r+1);if(this.setStyle_){j.setStyleInFeature_(g,o)}else{j.setStyleProperties_(g,o)}}}return o};j.prototype.readFeaturesFromText=function(e,t){var r=this;i["a"].assert(e[0]==="F");this.prevX_=0;this.prevY_=0;var n=[];e=e.substring(1);while(e.length>0){var a=e.indexOf(")");i["a"].assert(a>=0);var o=this.readFeatureFromText(e.substring(0,a+1),t);n.push(o);e=e.substring(a+1)}n.forEach(function(e){for(var t in r.defaultValues_){var i=j.LegacyProperties_[t];if(e.get(i)===undefined){e.set(i,r.defaultValues_[t].call(null,e))}}});return n};j.prototype.readGeometryFromText=function(e,t){var r=j.GEOMETRY_READERS_[e[0]];i["a"].assert(r!==undefined);return r.call(this,e)};j.prototype.writeFeatureText=function(e,t){var r=[];var n="";var a=e.getGeometry();if(a){n=this.writeGeometryText(a,t)}if(n.length>0){i["a"].assert(n[n.length-1]===")");n=n.substring(0,n.length-1);r.push(n)}var o=[];var s=this.propertiesFunction_(e);for(var l in s){var u=s[l];if(u!==undefined&&u!==null&&l!==e.getGeometryName()){if(o.length!==0){o.push("'")}var c=encodeURIComponent(l.replace(/[()'*]/g,"_")+"*"+u.toString().replace(/[()'*]/g,"_"));o.push(c)}}if(o.length>0){r.push("~");Array.prototype.push.apply(r,o)}if(this.encodeStyles_){var f=e.getStyleFunction();if(f!==undefined){var h=f.call(e,0);if(h!==null){var d=[];h=Array.isArray(h)?h:[h];j.encodeStyles_(h,a.getType(),d);if(d.length>0){r.push("~");Array.prototype.push.apply(r,d)}}}}r.push(")");return r.join("")};j.prototype.writeFeaturesText=function(e,t){this.prevX_=0;this.prevY_=0;var r=[];if(e.length>0){r.push("F");for(var i=0,n=e.length;i<n;++i){r.push(this.writeFeatureText(e[i],t))}}return r.join("")};j.prototype.writeGeometryText=function(e,t){var r=j.GEOMETRY_WRITERS_[e.getType()];i["a"].assert(r!==undefined);var n=h["b"](e,true,t);return r.call(this,n)};var A=t["a"]=j},function(e,t,r){"use strict";(function(e){var i=r(468);var n=r.n(i);var a=r(1);var o=angular.module("ngeoSortable",[]);o.component_=function(t){return{restrict:"A",link:function r(i,n,o){var s=i.$eval(o["ngeoSortable"])||[];a["a"].assert(Array.isArray(s));i.$watchCollection(function(){return s},function(){s.length&&t(h,0)});var l=i.$eval(o["ngeoSortableOptions"]);var u=d(l);var c=i.$eval(o["ngeoSortableCallback"]);var f=i.$eval(o["ngeoSortableCallbackCtx"]);function h(){var t=n.children();for(var r=0;r<t.length;++r){angular.element(t[r]).data("idx",r)}var a=e(n);if(a.data("ui-sortable")){a.off("sortupdate");a.sortable("destroy")}var o={axis:"y",classes:{"ui-sortable-helper":u["draggerClassName"]}};if(u["handleClassName"]){o["handle"]="."+u["handleClassName"]}if(u["placeholderClassName"]){o["placeholder"]=u["placeholderClassName"];o["forcePlaceholderSize"]=true}a.sortable(o);a.on("sortupdate",function(t,r){var a=e(r.item[0]).data("idx");var o=r.item.index();e(r.item[0]).data("idx",o);i.$apply(function(){s.splice(o,0,s.splice(a,1)[0])});if(c instanceof Function){c.apply(f,[n,s])}})}function d(e){var t=void 0;var r="ngeo-sortable-handle";if(e===undefined){t={handleClassName:r}}else{if(e["handleClassName"]===undefined){e["handleClassName"]=r}t=e}return t}}}};o.component_.$inject=["$timeout"];o.directive("ngeoSortable",o.component_);t["a"]=o}).call(this,r(24))},function(e,t,r){"use strict";(function(e){var i=r(480);var n=r.n(i);var a=r(479);var o=r.n(a);var s=angular.module("ngeoPopover",[]);s.component_=function(){return{restrict:"A",scope:true,controller:"NgeoPopoverController as popoverCtrl",link:function t(r,i,n,a){a.anchorElm.on("hidden.bs.popover",function(){var e=a.anchorElm.data("bs.popover");e["inState"].click=false});a.anchorElm.on("inserted.bs.popover",function(){a.bodyElm.show();a.shown=true});a.anchorElm.popover({container:"body",html:true,content:a.bodyElm,placement:n["ngeoPopoverPlacement"]||"right"});if(n["ngeoPopoverDismiss"]){e(n["ngeoPopoverDismiss"]).on("scroll",function(){a.dismissPopover()})}r.$on("$destroy",function(){a.anchorElm.popover("destroy");a.anchorElm.unbind("inserted.bs.popover");a.anchorElm.unbind("hidden.bs.popover")})}}};s.anchorComponent=function(){return{restrict:"A",require:"^^ngeoPopover",link:function e(t,r,i,n){n.anchorElm=r}}};s.contentComponent=function(){return{restrict:"A",require:"^^ngeoPopover",link:function e(t,r,i,n){n.bodyElm=r;r.hide()}}};s.PopoverController_=function(e){this.shown=false;this.anchorElm=undefined;this.bodyElm=undefined;function t(e){if(this.anchorElm[0]!==e.target&&this.bodyElm.parent()[0]!==e.target&this.bodyElm.parent().find(e.target).length===0&&this.shown){this.dismissPopover()}}angular.element("body").on("mousedown",t.bind(this));e.$on("$destroy",function(){angular.element("body").off("mousedown",t)})};s.PopoverController_.$inject=["$scope"];s.PopoverController_.prototype.dismissPopover=function(){this.shown=false;this.anchorElm.popover("hide")};s.controller("NgeoPopoverController",s.PopoverController_);s.directive("ngeoPopover",s.component_);s.directive("ngeoPopoverAnchor",s.anchorComponent);s.directive("ngeoPopoverContent",s.contentComponent);t["a"]=s}).call(this,r(24))},function(e,t,r){"use strict";(function(e){var i=r(48);var n=r(62);var a=r(302);var o=r(19);var s=r(1);var l=r(91);var u=r(301);var c=r(326);var f=r(371);var h=r(288);var d=r(21);var p=r(116);var v=r(34);var g=r(11);var m=r(176);var y=r(12);var _=r(101);var b=r(47);var w=r(143);var S=r(38);var C=r(15);var x=r(172);function O(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var T=angular.module("gmfSearch",[n["a"].module.name,a["a"].module.name,o["a"].module.name,u["a"].module.name,c["a"].name,h["a"].name,l["a"].module.name,f["a"].name]);T.gmfSearchTemplateUrl_=function(e,t){var r=t["gmfSearchTemplateurl"];return r!==undefined?r:"gmf/search"};T.run(["$templateCache",function(e){e.put("gmf/search",r(474))}]);E.$inject=["$element","$attrs","gmfSearchTemplateUrl"];function E(e,t,r){return r(e,t)}T.component_={bindings:{inputValue:"=?gmfSearchInputValue",placeholder:"@?gmfSearchPlaceholder",map:"<gmfSearchMap",datasources:"<gmfSearchDatasources",typeaheadOptions:"<?gmfSearchOptions",featuresStyles:"<?gmfSearchStyles",clearButton:"=?gmfSearchClearbutton",colorChooser:"<?gmfSearchColorchooser",coordinatesProjections:"<?gmfSearchCoordinatesprojections",additionalListeners:"<gmfSearchListeners",maxZoom:"<?gmfSearchMaxzoom",delay:"<?gmfSearchDelay",onInitCallback:"<?gmfSearchOnInit"},controller:"gmfSearchController",templateUrl:E};T.value("gmfSearchTemplateUrl",T.gmfSearchTemplateUrl_);T.component("gmfSearch",T.component_);T.SearchController_=function(){t.$inject=["$element","$scope","$compile","$timeout","$injector","gettextCatalog","ngeoAutoProjection","ngeoSearchCreateGeoJSONBloodhound","ngeoFeatureOverlayMgr","gmfThemes","gmfTreeManager","gmfSearchFulltextSearch"];function t(e,r,i,n,a,o,s,l,u,c,f,h){O(this,t);this.element_=e;this.scope_=r;this.compile_=i;this.timeout_=n;this.gettextCatalog_=o;this.gmfThemes_=c;this.gmfTreeManager_=f;this.fullTextSearch_=h;this.ngeoSearchCreateGeoJSONBloodhound_=l;this.ngeoFeatureOverlayMgr=u;this.ngeoLocation_;if(a.has("ngeoLocation")){this.ngeoLocation_=a.get("ngeoLocation")}this.ngeoAutoProjection_=s;this.map;this.styles_={};this.onInitCallback;this.clearButton;this.colorChooser;this.placeholder;this.delay;this.maxZoom=16;this.coordinatesProjections;this.featureOverlay_=u.getFeatureOverlay();this.datasources=[];this.typeaheadOptions;this.options={highlight:true};this.featuresStyles;this.datasets=[];this.inputValue="";this.color;this.displayColorPicker=false;this.listeners;this.additionalListeners}t.prototype.$onInit=function e(){var t=this;var r=this.gettextCatalog_;this.clearButton=this.clearButton!==false;this.colorChooser=this.colorChooser===true;if(this.delay===undefined){this.delay=50}this.placeholder=this.placeholder!==undefined?this.placeholder:r.getString("Search…");var i=this.coordinatesProjections;if(i===undefined){i=[this.map.getView().getProjection()]}else{i=this.ngeoAutoProjection_.getProjectionList(i)}this.coordinatesProjections=i;if(!this.clearButton){this.element_.find("input").on("focus blur",function(){t.clear()})}if(this.onInitCallback){this.onInitCallback()}this.initStyles_();this.featureOverlay_.setStyle(this.getSearchStyle_.bind(this));if(this.typeaheadOptions){g["a"](this.options,this.typeaheadOptions)}this.initDatasets_();this.scope_.$watch(function(){return t.color},this.setStyleColor.bind(this));this.listeners=this.mergeListeners_(this.additionalListeners,{select:this.select_.bind(this),close:this.close_.bind(this),datasetsempty:this.datasetsempty_.bind(this)});if(this.ngeoLocation_){var n=this.ngeoLocation_.getParam("search");if(n){var a=1;if(this.ngeoLocation_.getParam("search-select-index")){a=parseInt(this.ngeoLocation_.getParam("search-select-index"),10)}var o=void 0;if(this.ngeoLocation_.getParam("search-maxzoom")){o=parseInt(this.ngeoLocation_.getParam("search-maxzoom"),10)}else if(this.ngeoLocation_.getParam("map_zoom")){o=parseInt(this.ngeoLocation_.getParam("map_zoom"),10)}this.fulltextsearch_(n,a,o)}}};t.prototype.mergeListeners_=function e(t,r){if(t===undefined){return r}return{open:t.open,close:t.close===undefined?r.close:function(){r.close();t.close()},cursorchange:t.cursorchange,datasetsempty:t.datasetsempty,select:t.select===undefined?r.select:function(e,i,n){r.select(e,i,n);t.select(e,i,n)},autocomplete:t.autocomplete}};t.prototype.initDatasets_=function e(){var t=this;var r=this.gettextCatalog_;var i=function e(i){var n=t.datasources[i];var a=n.groupValues!==undefined?n.groupValues:[];var o=n.groupActions?n.groupActions:[];var s=[];if(a.length===0){s.push({title:"",filter:t.filterLayername_()})}else{a.forEach(function(e){s.push({title:e,filter:this.filterLayername_(e)})},t)}o.forEach(function(e){s.push({title:r.getString(e["title"]),filter:this.filterAction_(e["action"])})},t);s.forEach(function(e){this.datasets.push(this.createDataset_({bloodhoundOptions:n.bloodhoundOptions,datasetTitle:e["title"],groupsKey:"layer_name",labelKey:n.labelKey,projection:n.projection,typeaheadDatasetOptions:n.typeaheadDatasetOptions,url:n.url},e["filter"]))},t)};for(var n=0;n<this.datasources.length;n++){i(n)}this.datasets.push({source:this.createSearchCoordinates_(this.map.getView()),name:"coordinates",display:"label",templates:{header:function e(){var e=r.getString("Recenter to");return'<div class="gmf-search-header" translate>'+e+"</div>"},suggestion:function e(t){var r=t["label"];var i='<p class="gmf-search-label">'+r+"</p>";i='<div class="gmf-search-datum">'+i+"</div>";return i}}})};t.prototype.createDataset_=function e(t,r){var i=this.gettextCatalog_;var n=this.scope_;var a=this.compile_;var o=this.createAndInitBloodhound_(t,r);var s={limit:Infinity,source:o.ttAdapter(),display:function e(r){var i=r;return i.get(t.labelKey)},templates:{header:function e(){if(t.datasetTitle===undefined){return""}else{var e=i.getString(t.datasetTitle);return'<div class="gmf-search-header">'+e+"</div>"}},suggestion:function e(r){var i=r;var o=n.$new(true);o["feature"]=i;var s='<p class="gmf-search-label" translate>'+i.get(t.labelKey)+"</p>";s+='<p class="gmf-search-group" translate>'+(i.get("layer_name")||t.datasetTitle)+"</p>";s='<div class="gmf-search-datum">'+s+"</div>";return a(s)(o)}}};if(t.typeaheadDatasetOptions){g["a"](s,t.typeaheadDatasetOptions)}return s};t.prototype.filterAction_=function e(t){return function(e){var r=e["properties"];if(r["actions"]){return!r["layer_name"]&&r["actions"].some(function(e){return e.action===t})}else{return false}}};t.prototype.filterLayername_=function e(t){return function(e){var r=e["properties"]["layer_name"];if(r===undefined){return false}if(t===undefined){return true}return r===t}};t.prototype.createAndInitBloodhound_=function e(t,r){var i=this.map.getView().getProjection().getCode();var n=this.getBloodhoudRemoteOptions_();var a=this.ngeoSearchCreateGeoJSONBloodhound_(t.url,r,y["g"](i),y["g"](t.projection),t.bloodhoundOptions,n);a.initialize();return a};t.prototype.getBloodhoudRemoteOptions_=function e(){var t=this.gettextCatalog_;return{rateLimitWait:this.delay,prepare:function e(r,i){var n=i.url;var a=t.currentLanguage;i.xhrFields={withCredentials:true};i.url=x["a"](n,{query:r,lang:a});return i}}};t.prototype.createSearchCoordinates_=function e(t){var r=t.getProjection();var i=r.getExtent();return function(e,t){var n=[];var a=this.ngeoAutoProjection_.stringToCoordinates(e);if(a===null){return}var o=this.ngeoAutoProjection_.tryProjectionsWithInversion(a,i,r,this.coordinatesProjections);if(o===null){return}n.push({label:a.join(" "),position:o,tt_source:"coordinates"});t(n)}.bind(this)};t.prototype.initStyles_=function e(){this.styles_[i["a"].COORDINATES_LAYER_NAME]=new C["c"]({image:new w["a"]({stroke:new S["a"]({color:[0,0,0,.7],width:2}),points:4,radius:8,radius2:0,angle:0})});var t=new b["a"]({color:[65,134,240,.5]});var r=new S["a"]({color:[65,134,240,1],width:2});this.styles_["default"]=new C["c"]({fill:t,image:new _["a"]({fill:t,radius:5,stroke:r}),stroke:r});var n=this.featuresStyles||{};g["a"](this.styles_,n)};t.prototype.getSearchStyle_=function e(t,r){s["a"].assert(t);var i=this.styles_[t.get("layer_name")]||this.styles_["default"];if(this.color){var n=p["a"](this.color);var a=n.slice();a[3]=1;var o=n.slice();o[3]=.5;var l=i.getStroke();if(l){l.setColor(a)}var u=i.getFill();if(u){u.setColor(o)}var c=i.getImage();if(c){c=c.clone();var f=c.getStroke();if(f){f.setColor(a)}var h=c.getFill();if(h){h.setColor(o)}i.setImage(c)}}return i};t.prototype.setStyleColor=function e(t){if(t){this.color=t;this.ngeoFeatureOverlayMgr.getLayer().changed()}};t.prototype.setTTDropdownVisibility_=function e(){if(this.clearButton){var t=this.element_.find(".twitter-typeahead .tt-menu");this.inputValue?t.show():t.hide()}};t.prototype.onClearButton=function e(){this.featureOverlay_.clear();this.clear()};t.prototype.clear=function t(){var r=this.element_.find(".twitter-typeahead");var i=r.children(".tt-menu");var n=r.children("input");this.inputValue="";e(n[1]).typeahead("val","");i.children(".tt-dataset").empty();this.setTTDropdownVisibility_();this.displayColorPicker=false};t.prototype.blur=function t(){var r=this.element_.find(".twitter-typeahead");var i=r.children("input");this.timeout_(function(){e(i[1]).blur()})};t.prototype.select_=function e(t,r,n){if(r["tt_source"]==="coordinates"){var a=new v["a"](r["position"]);this.featureOverlay_.clear();this.featureOverlay_.addFeature(new d["a"]({geometry:a,layer_name:i["a"].COORDINATES_LAYER_NAME}));this.map.getView().setCenter(r["position"]);this.leaveSearch_()}else{s["a"].assertInstanceof(r,d["a"]);this.selectFromGMF_(t,r,n)}};t.prototype.selectFromGMF_=function e(t,r,i){var n=this;var a=r.get("actions");var s=r.getGeometry();if(a){var l=function e(t,r){var i=a[t];var l=i["action"];var u=i["data"];if(l=="add_theme"){n.gmfThemes_.getThemesObject().then(function(e){var t=o["a"].findThemeByName(e,u);if(t){n.gmfTreeManager_.addFirstLevelGroups(t.children)}})}else if(l=="add_group"){n.gmfTreeManager_.addGroupByName(u,true)}else if(l=="add_layer"){var c=n.datasources[0].groupActions;var f=void 0;c.forEach(function(e){if(e["action"]==="add_layer"){return f=true}});if(f){var h=!!s;n.gmfTreeManager_.addGroupByLayerName(u,true,h)}}};for(var u=0,c=a.length;u<c;u++){l(u,c)}}var f=this.map.getSize();if(s&&f){var h=this.map.getView();this.featureOverlay_.clear();this.featureOverlay_.addFeature(r);this.displayColorPicker=true;var d=s.getType()==="GeometryCollection"?s.getExtent():s;h.fit(d,{size:f,maxZoom:this.maxZoom})}this.leaveSearch_()};t.prototype.leaveSearch_=function e(){if(!this.clearButton){this.clear()}this.blur()};t.prototype.close_=function e(t){if(!this.clearButton){this.setTTDropdownVisibility_()}};t.prototype.datasetsempty_=function t(r,i,n){var a=this.element_.find(".twitter-typeahead .tt-menu");var o=a.children(".gmf-search-no-results");if(o.length==0){var s=e('<div class="gmf-search-no-results" translate>No result found</div>');a.append(s)}if(n){o.show();a.addClass("gmf-search-no-results")}else{a.removeClass("gmf-search-no-results");o.hide()}};t.prototype.fulltextsearch_=function e(t,r,i){var n=this;if(r<1){r=1}this.fullTextSearch_.search(t,{limit:r}).then(function(e){if(e&&e.features[r-1]){var t=new m["a"];var a=t.readFeature(e.features[r-1]);n.featureOverlay_.addFeature(a);var o={};if(i!==undefined){o.maxZoom=i;o.size=n.map.getSize()}n.map.getView().fit(a.getGeometry().getExtent(),o);n.inputValue=a.get("label")}})};return t}();T.controller("gmfSearchController",T.SearchController_);t["a"]=T}).call(this,r(24))},function(e,t,r){"use strict";(function(e){var r=angular.module("ngeoRecenter",[]);r.directive_=function(){return{restrict:"A",link:function t(r,i,n){var a=n["ngeoRecenterMap"];var o=r.$eval(a);function s(e){var t=e.attr("ngeo-extent");if(t!==undefined){var i=o.getSize();o.getView().fit(r.$eval(t),{size:i})}var n=e.attr("ngeo-zoom");if(n!==undefined){o.getView().setZoom(r.$eval(n))}}i.on("click","*",function(t){s(angular.element(e(this)))});i.on("change",function(e){var t=e.target.options[e.target.selectedIndex];s(angular.element(t))})}}};r.directive("ngeoRecenter",r.directive_);t["a"]=r}).call(this,r(24))},function(e,t,r){"use strict";var i=r(3);var n=r(44);var a=r(39);var o=r(72);var s=r(70);var l=r(2);var u=r(12);var c=r(93);var f="units";var h={DEGREES:"degrees",IMPERIAL:"imperial",NAUTICAL:"nautical",METRIC:"metric",US:"us"};var d=[1,2,5];var p=function e(t){var r=t?t:{};var i=r.className!==undefined?r.className:"ol-scale-line";this.innerElement_=document.createElement("DIV");this.innerElement_.className=i+"-inner";this.element_=document.createElement("DIV");this.element_.className=i+" "+s["e"];this.element_.appendChild(this.innerElement_);this.viewState_=null;this.minWidth_=r.minWidth!==undefined?r.minWidth:64;this.renderedVisible_=false;this.renderedWidth_=undefined;this.renderedHTML_="";o["a"].call(this,{element:this.element_,render:r.render||v,target:r.target});Object(l["a"])(this,Object(n["b"])(f),this.handleUnitsChanged_,this);this.setUnits(r.units||h.METRIC)};Object(i["d"])(p,o["a"]);p.prototype.getUnits=function(){return this.get(f)};function v(e){var t=e.frameState;if(!t){this.viewState_=null}else{this.viewState_=t.viewState}this.updateElement_()}p.prototype.handleUnitsChanged_=function(){this.updateElement_()};p.prototype.setUnits=function(e){this.set(f,e)};p.prototype.updateElement_=function(){var e=this.viewState_;if(!e){if(this.renderedVisible_){this.element_.style.display="none";this.renderedVisible_=false}return}var t=e.center;var r=e.projection;var i=this.getUnits();var n=i==h.DEGREES?c["b"].DEGREES:c["b"].METERS;var o=Object(u["h"])(r,e.resolution,t,n);if(r.getUnits()!=c["b"].DEGREES&&r.getMetersPerUnit()&&n==c["b"].METERS){o*=r.getMetersPerUnit()}var s=this.minWidth_*o;var l="";if(i==h.DEGREES){var f=c["a"][c["b"].DEGREES];if(r.getUnits()==c["b"].DEGREES){s*=f}else{o/=f}if(s<f/60){l="″";o*=3600}else if(s<f){l="′";o*=60}else{l="°"}}else if(i==h.IMPERIAL){if(s<.9144){l="in";o/=.0254}else if(s<1609.344){l="ft";o/=.3048}else{l="mi";o/=1609.344}}else if(i==h.NAUTICAL){o/=1852;l="nm"}else if(i==h.METRIC){if(s<.001){l="μm";o*=1e6}else if(s<1){l="mm";o*=1e3}else if(s<1e3){l="m"}else{l="km";o/=1e3}}else if(i==h.US){if(s<.9144){l="in";o*=39.37}else if(s<1609.344){l="ft";o/=.30480061}else{l="mi";o/=1609.3472}}else{Object(a["a"])(false,33)}var p=3*Math.floor(Math.log(this.minWidth_*o)/Math.log(10));var v=void 0,g=void 0;while(true){v=d[(p%3+3)%3]*Math.pow(10,Math.floor(p/3));g=Math.round(v/o);if(isNaN(g)){this.element_.style.display="none";this.renderedVisible_=false;return}else if(g>=this.minWidth_){break}++p}var m=v+" "+l;if(this.renderedHTML_!=m){this.innerElement_.innerHTML=m;this.renderedHTML_=m}if(this.renderedWidth_!=g){this.innerElement_.style.width=g+"px";this.renderedWidth_=g}if(!this.renderedVisible_){this.element_.style.display="";this.renderedVisible_=true}};t["a"]=p},function(e,t,r){(function(e,r){true?r(t):undefined})(this,function(e){"use strict";function t(e){return+e}function r(e){return e*e}function i(e){return e*(2-e)}function n(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function a(e){return e*e*e}function o(e){return--e*e*e+1}function s(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var l=3;var u=function e(t){t=+t;function r(e){return Math.pow(e,t)}r.exponent=e;return r}(l);var c=function e(t){t=+t;function r(e){return 1-Math.pow(1-e,t)}r.exponent=e;return r}(l);var f=function e(t){t=+t;function r(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}r.exponent=e;return r}(l);var h=Math.PI,d=h/2;function p(e){return 1-Math.cos(e*d)}function v(e){return Math.sin(e*d)}function g(e){return(1-Math.cos(h*e))/2}function m(e){return Math.pow(2,10*e-10)}function y(e){return 1-Math.pow(2,-10*e)}function _(e){return((e*=2)<=1?Math.pow(2,10*e-10):2-Math.pow(2,10-10*e))/2}function b(e){return 1-Math.sqrt(1-e*e)}function w(e){return Math.sqrt(1- --e*e)}function S(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var C=4/11,x=6/11,O=8/11,T=3/4,E=9/11,M=10/11,j=15/16,A=21/22,P=63/64,k=1/C/C;function I(e){return 1-D(1-e)}function D(e){return(e=+e)<C?k*e*e:e<O?k*(e-=x)*e+T:e<M?k*(e-=E)*e+j:k*(e-=A)*e+P}function R(e){return((e*=2)<=1?1-D(1-e):D(e-1)+1)/2}var L=1.70158;var $=function e(t){t=+t;function r(e){return e*e*((t+1)*e-t)}r.overshoot=e;return r}(L);var N=function e(t){t=+t;function r(e){return--e*e*((t+1)*e+t)+1}r.overshoot=e;return r}(L);var F=function e(t){t=+t;function r(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}r.overshoot=e;return r}(L);var G=2*Math.PI,U=1,H=.3;var Y=function e(t,r){var i=Math.asin(1/(t=Math.max(1,t)))*(r/=G);function n(e){return t*Math.pow(2,10*--e)*Math.sin((i-e)/r)}n.amplitude=function(t){return e(t,r*G)};n.period=function(r){return e(t,r)};return n}(U,H);var W=function e(t,r){var i=Math.asin(1/(t=Math.max(1,t)))*(r/=G);function n(e){return 1-t*Math.pow(2,-10*(e=+e))*Math.sin((e+i)/r)}n.amplitude=function(t){return e(t,r*G)};n.period=function(r){return e(t,r)};return n}(U,H);var V=function e(t,r){var i=Math.asin(1/(t=Math.max(1,t)))*(r/=G);function n(e){return((e=e*2-1)<0?t*Math.pow(2,10*e)*Math.sin((i-e)/r):2-t*Math.pow(2,-10*e)*Math.sin((i+e)/r))/2}n.amplitude=function(t){return e(t,r*G)};n.period=function(r){return e(t,r)};return n}(U,H);e.easeLinear=t;e.easeQuad=n;e.easeQuadIn=r;e.easeQuadOut=i;e.easeQuadInOut=n;e.easeCubic=s;e.easeCubicIn=a;e.easeCubicOut=o;e.easeCubicInOut=s;e.easePoly=f;e.easePolyIn=u;e.easePolyOut=c;e.easePolyInOut=f;e.easeSin=g;e.easeSinIn=p;e.easeSinOut=v;e.easeSinInOut=g;e.easeExp=_;e.easeExpIn=m;e.easeExpOut=y;e.easeExpInOut=_;e.easeCircle=S;e.easeCircleIn=b;e.easeCircleOut=w;e.easeCircleInOut=S;e.easeBounce=D;e.easeBounceIn=I;e.easeBounceOut=D;e.easeBounceInOut=R;e.easeBack=F;e.easeBackIn=$;e.easeBackOut=N;e.easeBackInOut=F;e.easeElastic=W;e.easeElasticIn=Y;e.easeElasticOut=W;e.easeElasticInOut=V;Object.defineProperty(e,"__esModule",{value:true})})},function(e,t,r){"use strict";var i=r(1);var n=function e(t,r,n,a,o){var s=a.$watchCollection(function(){return t},function(){var e=void 0,i=void 0,a=void 0;if(n){for(e=t.length-1,a=0;e>=0;--e){if(o(t[e])){r[a++]=t[e]}}}else{for(e=0,i=t.length,a=0;e<i;++e){if(o(t[e])){r[a++]=t[e]}}}r.length=a});var l=a.$watchCollection(function(){return r},function(){var e=void 0,a=void 0,s=void 0;if(n){for(e=0,a=t.length,s=r.length-1;e<a;++e){if(o(t[e])){t[e]=r[s--]}}i["a"].assert(s==-1)}else{for(e=0,a=t.length,s=0;e<a;++e){if(o(t[e])){t[e]=r[s++]}}i["a"].assert(s==r.length)}});return function(){s();l()}};t["a"]=n},function(e,t,r){"use strict";var i={};i.Permalink3dParam={ENABLED:"3d_enabled",LON:"3d_lon",LAT:"3d_lat",ELEVATION:"3d_elevation",HEADING:"3d_heading",PITCH:"3d_pitch",PREFIX:"3d_"};t["a"]=i},function(e,t,r){"use strict";(function(e){var i=r(3);var n=r(144);var a=function t(r){var i=r!==undefined?r:{};var a=void 0;if(i.element){a=i.element;delete i.element}else{a=e("<div />")[0]}this.closeEl_=e("<button>",{class:"close",html:"&times;"});this.contentEl_=e("<div/>").append(this.closeEl_).append(a);i.element=e("<div />")[0];n["a"].call(this,i)};i["d"](a,n["a"]);a.prototype.setMap=function(t){var r=this;var i=this.getElement();var a=this.getMap();if(a){e(i).popover("destroy")}n["a"].prototype.setMap.call(this,t);if(t){var o=this.contentEl_;window.setTimeout(function(){e(i).popover({content:o,html:true,placement:"top",template:['<div class="popover ngeo-popover" role="tooltip">','  <div class="arrow"></div>','  <h3 class="popover-title"></h3>','  <div class="popover-content"></div>',"</div>"].join("")}).popover("show")},0);this.closeEl_.one("click",function(){var e=r.getMap();if(e){e.removeOverlay(r)}})}};t["a"]=a}).call(this,r(24))},function(e,t,r){"use strict";(function(e){var i=r(243);var n=r(361);var a=r.n(n);var o=r(613);var s=r.n(o);var l=angular.module("ngeoDateTimePicker",["gettext"]);l.component_=function(){return{restrict:"A",controller:l.Controller_,bindToController:true,scope:{options:"<ngeoDatetimepickerOptions"}}};l.directive("ngeoDatetimepicker",l.component_);l.Controller_=function(e,t){this.element_=e;this.gettextCatalog_=t;this.options};l.Controller_.$inject=["$element","gettextCatalog"];l.Controller_.prototype.$onInit=function(){var t=this.gettextCatalog_.getCurrentLanguage();e.datetimepicker.setLocale(t);e.datetimepicker.setDateFormatter(new i["a"]);if(typeof this.options==="string"){this.options=angular.fromJson(this.options)}this.element_.datetimepicker(this.options)};l.controller("ngeoDateTimePickerController",l.Controller_);t["a"]=l}).call(this,r(24))},function(e,t,r){"use strict";var i=r(3);var n=r(28);var a=r(95);var o=r(27);var s=r(2);var l=r(16);var u=r(5);var c=r(36);var f=r(7);var h=r(49);var d=r(29);var p=r(11);var v=r(76);var g=r(150);var m=r(268);var y=function e(t){d["b"].call(this,{handleEvent:_,handleDownEvent:c["b"],handleUpEvent:b});var r=t?t:{};this.source_=r.source?r.source:null;this.vertex_=r.vertex!==undefined?r.vertex:true;this.edge_=r.edge!==undefined?r.edge:true;this.features_=r.features?r.features:null;this.featuresListenerKeys_=[];this.featureChangeListenerKeys_={};this.indexedFeaturesExtents_={};this.pendingFeatures_={};this.pixelCoordinate_=null;this.pixelTolerance_=r.pixelTolerance!==undefined?r.pixelTolerance:10;this.sortByDistance_=w.bind(this);this.rBush_=new m["a"];this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_,Circle:this.writeCircleGeometry_}};Object(i["d"])(y,d["b"]);y.prototype.addFeature=function(e,t){var r=t!==undefined?t:true;var n=Object(i["c"])(e);var a=e.getGeometry();if(a){var o=this.SEGMENT_WRITERS_[a.getType()];if(o){this.indexedFeaturesExtents_[n]=a.getExtent(Object(u["j"])());o.call(this,e,a)}}if(r){this.featureChangeListenerKeys_[n]=Object(s["a"])(e,l["a"].CHANGE,this.handleFeatureChange_,this)}};y.prototype.forEachFeatureAdd_=function(e){this.addFeature(e)};y.prototype.forEachFeatureRemove_=function(e){this.removeFeature(e)};y.prototype.getFeatures_=function(){var e=void 0;if(this.features_){e=this.features_}else if(this.source_){e=this.source_.getFeatures()}return e};y.prototype.handleFeatureAdd_=function(e){var t=void 0;if(e instanceof v["a"]){t=e.feature}else if(e instanceof n["a"]){t=e.element}this.addFeature(t)};y.prototype.handleFeatureRemove_=function(e){var t=void 0;if(e instanceof v["a"]){t=e.feature}else if(e instanceof n["a"]){t=e.element}this.removeFeature(t)};y.prototype.handleFeatureChange_=function(e){var t=e.target;if(this.handlingDownUpSequence){var r=Object(i["c"])(t);if(!(r in this.pendingFeatures_)){this.pendingFeatures_[r]=t}}else{this.updateFeature_(t)}};y.prototype.removeFeature=function(e,t){var r=t!==undefined?t:true;var n=Object(i["c"])(e);var a=this.indexedFeaturesExtents_[n];if(a){var o=this.rBush_;var l=[];o.forEachInExtent(a,function(t){if(e===t.feature){l.push(t)}});for(var u=l.length-1;u>=0;--u){o.remove(l[u])}}if(r){Object(s["e"])(this.featureChangeListenerKeys_[n]);delete this.featureChangeListenerKeys_[n]}};y.prototype.setMap=function(e){var t=this.getMap();var r=this.featuresListenerKeys_;var i=this.getFeatures_();if(t){r.forEach(s["e"]);r.length=0;i.forEach(this.forEachFeatureRemove_.bind(this))}d["b"].prototype.setMap.call(this,e);if(e){if(this.features_){r.push(Object(s["a"])(this.features_,a["a"].ADD,this.handleFeatureAdd_,this),Object(s["a"])(this.features_,a["a"].REMOVE,this.handleFeatureRemove_,this))}else if(this.source_){r.push(Object(s["a"])(this.source_,g["a"].ADDFEATURE,this.handleFeatureAdd_,this),Object(s["a"])(this.source_,g["a"].REMOVEFEATURE,this.handleFeatureRemove_,this))}i.forEach(this.forEachFeatureAdd_.bind(this))}};y.prototype.shouldStopEvent=c["a"];y.prototype.snapTo=function(e,t,r){var i=r.getCoordinateFromPixel([e[0]-this.pixelTolerance_,e[1]+this.pixelTolerance_]);var n=r.getCoordinateFromPixel([e[0]+this.pixelTolerance_,e[1]-this.pixelTolerance_]);var a=Object(u["b"])([i,n]);var s=this.rBush_.getInExtent(a);if(this.vertex_&&!this.edge_){s=s.filter(function(e){return e.feature.getGeometry().getType()!==f["a"].CIRCLE})}var l=false;var c=false;var h=null;var d=null;var p=void 0,v=void 0,g=void 0,m=void 0,y=void 0;if(s.length>0){this.pixelCoordinate_=t;s.sort(this.sortByDistance_);var _=s[0].segment;var b=s[0].feature.getGeometry().getType()===f["a"].CIRCLE;if(this.vertex_&&!this.edge_){v=r.getPixelFromCoordinate(_[0]);g=r.getPixelFromCoordinate(_[1]);m=Object(o["h"])(e,v);y=Object(o["h"])(e,g);p=Math.sqrt(Math.min(m,y));l=p<=this.pixelTolerance_;if(l){c=true;h=m>y?_[1]:_[0];d=r.getPixelFromCoordinate(h)}}else if(this.edge_){if(b){h=Object(o["b"])(t,s[0].feature.getGeometry())}else{h=Object(o["c"])(t,_)}d=r.getPixelFromCoordinate(h);if(Object(o["d"])(e,d)<=this.pixelTolerance_){c=true;if(this.vertex_&&!b){v=r.getPixelFromCoordinate(_[0]);g=r.getPixelFromCoordinate(_[1]);m=Object(o["h"])(d,v);y=Object(o["h"])(d,g);p=Math.sqrt(Math.min(m,y));l=p<=this.pixelTolerance_;if(l){h=m>y?_[1]:_[0];d=r.getPixelFromCoordinate(h)}}}}if(c){d=[Math.round(d[0]),Math.round(d[1])]}}return{snapped:c,vertex:h,vertexPixel:d}};y.prototype.updateFeature_=function(e){this.removeFeature(e,false);this.addFeature(e,false)};y.prototype.writeCircleGeometry_=function(e,t){var r=Object(h["b"])(t);var i=r.getCoordinates()[0];for(var n=0,a=i.length-1;n<a;++n){var o=i.slice(n,n+2);var s={feature:e,segment:o};this.rBush_.insert(Object(u["b"])(o),s)}};y.prototype.writeGeometryCollectionGeometry_=function(e,t){var r=t.getGeometriesArray();for(var i=0;i<r.length;++i){var n=this.SEGMENT_WRITERS_[r[i].getType()];if(n){n.call(this,e,r[i])}}};y.prototype.writeLineStringGeometry_=function(e,t){var r=t.getCoordinates();for(var i=0,n=r.length-1;i<n;++i){var a=r.slice(i,i+2);var o={feature:e,segment:a};this.rBush_.insert(Object(u["b"])(a),o)}};y.prototype.writeMultiLineStringGeometry_=function(e,t){var r=t.getCoordinates();for(var i=0,n=r.length;i<n;++i){var a=r[i];for(var o=0,s=a.length-1;o<s;++o){var l=a.slice(o,o+2);var c={feature:e,segment:l};this.rBush_.insert(Object(u["b"])(l),c)}}};y.prototype.writeMultiPointGeometry_=function(e,t){var r=t.getCoordinates();for(var i=0,n=r.length;i<n;++i){var a=r[i];var o={feature:e,segment:[a,a]};this.rBush_.insert(t.getExtent(),o)}};y.prototype.writeMultiPolygonGeometry_=function(e,t){var r=t.getCoordinates();for(var i=0,n=r.length;i<n;++i){var a=r[i];for(var o=0,s=a.length;o<s;++o){var l=a[o];for(var c=0,f=l.length-1;c<f;++c){var h=l.slice(c,c+2);var d={feature:e,segment:h};this.rBush_.insert(Object(u["b"])(h),d)}}}};y.prototype.writePointGeometry_=function(e,t){var r=t.getCoordinates();var i={feature:e,segment:[r,r]};this.rBush_.insert(t.getExtent(),i)};y.prototype.writePolygonGeometry_=function(e,t){var r=t.getCoordinates();for(var i=0,n=r.length;i<n;++i){var a=r[i];for(var o=0,s=a.length-1;o<s;++o){var l=a.slice(o,o+2);var c={feature:e,segment:l};this.rBush_.insert(Object(u["b"])(l),c)}}};function _(e){var t=this.snapTo(e.pixel,e.coordinate,e.map);if(t.snapped){e.coordinate=t.vertex.slice(0,2);e.pixel=t.vertexPixel}return d["c"].call(this,e)}function b(e){var t=Object(p["c"])(this.pendingFeatures_);if(t.length){t.forEach(this.updateFeature_.bind(this));this.pendingFeatures_={}}return false}function w(e,t){var r=Object(o["i"])(this.pixelCoordinate_,e.segment);var i=Object(o["i"])(this.pixelCoordinate_,t.segment);return r-i}t["a"]=y},function(e,t,r){"use strict";(function(e){var i=r(52);var n=r(3);var a=r(34);var o=r(51);var s=angular.module("ngeoExportfeatures",[i["a"].module.name]);s.directive_=function(){return{controller:"ngeoExportfeaturesController as efCtrl",scope:true,bindToController:{features:"=ngeoExportfeaturesFeatures"}}};s.directive("ngeoExportfeatures",s.directive_);s.Controller_=function(t,r,a,o){var s=this;this.features;this.element_=t;var l=n["c"](this);var u=["ngeo-exportfeature",l].join("-");this.id_=u;this.featureHelper_=o;var c=void 0;if(r.has("ngeoExportFeatureFormats")){c=r.get("ngeoExportFeatureFormats")}else{c=[i["a"].FormatType.KML]}this.menu_=null;this.items_=[];if(c.length>1){t.attr("id",u);var f=e("<ul />",{class:"dropdown-menu","aria-labelledby":u}).appendTo(t.parent()[0]);this.menu_=f;var h=void 0;c.forEach(function(t){h=e("<li />").appendTo(f).append(e("<a />",{href:"#",text:t}).on(["click",u].join("."),s.handleMenuItemClick_.bind(s,t)));s.items_.push(h)})}this.formats_=c;t.on(["click",u].join("."),this.handleElementClick_.bind(this));a.$on("$destroy",this.handleDestroy_.bind(this))};s.Controller_.$inject=["$element","$injector","$scope","ngeoFeatureHelper"];s.Controller_.prototype.handleElementClick_=function(){var e=this;var t=this.features.getArray();if(this.formats_.length===1){this.featureHelper_.export(t,this.formats_[0])}else if(t.length===1){var r=t[0];var n=r.getGeometry();var s=void 0;this.formats_.forEach(function(t,r){s=e.items_[r];if(t===i["a"].FormatType.GPX){if(n instanceof a["a"]||n instanceof o["a"]){s.removeClass("disabled")}else{s.addClass("disabled")}}})}};s.Controller_.prototype.handleMenuItemClick_=function(t,r){if(!e(r.target.parentElement).hasClass("disabled")){var i=this.features.getArray();this.featureHelper_.export(i,t)}};s.Controller_.prototype.handleDestroy_=function(){var e=this.id_;this.element_.off(["click",e].join("."));if(this.menu_){this.menu_.remove();this.items_.forEach(function(t){t.off(["click",e].join("."))});this.items_.length=0;this.menu_=null}};s.controller("ngeoExportfeaturesController",s.Controller_);t["a"]=s}).call(this,r(24))},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var i=r(57);var n;if(Object.keys){n=Object.keys}else{n=function(e){var t,r=[];for(t in e){if(Object(i["a"])(e,t)){r.push(t)}}return r}}},function(e,t,r){"use strict";var i=r(3);var n=r(5);var a=r(249);var o=r(152);var s=r(4);var l=r(0);var u=function e(){o["a"].call(this)};Object(i["d"])(u,o["a"]);var c=[null,"http://www.opengis.net/ows/1.1"];var f=Object(l["r"])(c,{ServiceIdentification:Object(l["n"])(R),ServiceProvider:Object(l["n"])($),OperationsMetadata:Object(l["n"])(I)});var h=Object(l["r"])(c,{DeliveryPoint:Object(l["n"])(s["h"]),City:Object(l["n"])(s["h"]),AdministrativeArea:Object(l["n"])(s["h"]),PostalCode:Object(l["n"])(s["h"]),Country:Object(l["n"])(s["h"]),ElectronicMailAddress:Object(l["n"])(s["h"])});var d=Object(l["r"])(c,{Value:Object(l["m"])(N)});var p=Object(l["r"])(c,{AllowedValues:Object(l["n"])(T)});var v=Object(l["r"])(c,{Phone:Object(l["n"])(D),Address:Object(l["n"])(O)});var g=Object(l["r"])(c,{HTTP:Object(l["n"])(P)});var m=Object(l["r"])(c,{Get:Object(l["m"])(A),Post:undefined});var y=Object(l["r"])(c,{DCP:Object(l["n"])(j)});var _=Object(l["r"])(c,{Operation:k});var b=Object(l["r"])(c,{Voice:Object(l["n"])(s["h"]),Facsimile:Object(l["n"])(s["h"])});var w=Object(l["r"])(c,{Constraint:Object(l["m"])(E)});var S=Object(l["r"])(c,{IndividualName:Object(l["n"])(s["h"]),PositionName:Object(l["n"])(s["h"]),ContactInfo:Object(l["n"])(M)});var C=Object(l["r"])(c,{Abstract:Object(l["n"])(s["h"]),AccessConstraints:Object(l["n"])(s["h"]),Fees:Object(l["n"])(s["h"]),Title:Object(l["n"])(s["h"]),ServiceTypeVersion:Object(l["n"])(s["h"]),ServiceType:Object(l["n"])(s["h"])});var x=Object(l["r"])(c,{ProviderName:Object(l["n"])(s["h"]),ProviderSite:Object(l["n"])(a["a"]),ServiceContact:Object(l["n"])(L)});u.prototype.readFromDocument=function(e){for(var t=e.firstChild;t;t=t.nextSibling){if(t.nodeType==Node.ELEMENT_NODE){return this.readFromNode(t)}}return null};u.prototype.readFromNode=function(e){var t=Object(l["u"])({},f,e,[]);return t?t:null};function O(e,t){return Object(l["u"])({},h,e,t)}function T(e,t){return Object(l["u"])({},d,e,t)}function E(e,t){var r=e.getAttribute("name");if(!r){return undefined}return Object(l["u"])({name:r},p,e,t)}function M(e,t){return Object(l["u"])({},v,e,t)}function j(e,t){return Object(l["u"])({},g,e,t)}function A(e,t){var r=Object(a["a"])(e);if(!r){return undefined}return Object(l["u"])({href:r},w,e,t)}function P(e,t){return Object(l["u"])({},m,e,t)}function k(e,t){var r=e.getAttribute("name");var i=Object(l["u"])({},y,e,t);if(!i){return undefined}var n=t[t.length-1];n[r]=i}function I(e,t){return Object(l["u"])({},_,e,t)}function D(e,t){return Object(l["u"])({},b,e,t)}function R(e,t){return Object(l["u"])({},C,e,t)}function L(e,t){return Object(l["u"])({},S,e,t)}function $(e,t){return Object(l["u"])({},x,e,t)}function N(e,t){return Object(s["h"])(e)}var F=u;var G=function e(){o["a"].call(this);this.owsParser_=new F};Object(i["d"])(G,o["a"]);var U=[null,"http://www.opengis.net/wmts/1.0"];var H=[null,"http://www.opengis.net/ows/1.1"];var Y=Object(l["r"])(U,{Contents:Object(l["n"])(ee)});var W=Object(l["r"])(U,{Layer:Object(l["m"])(te),TileMatrixSet:Object(l["m"])(re)});var V=Object(l["r"])(U,{Style:Object(l["m"])(ie),Format:Object(l["m"])(s["h"]),TileMatrixSetLink:Object(l["m"])(ne),Dimension:Object(l["m"])(ae),ResourceURL:Object(l["m"])(oe)},Object(l["r"])(H,{Title:Object(l["n"])(s["h"]),Abstract:Object(l["n"])(s["h"]),WGS84BoundingBox:Object(l["n"])(se),Identifier:Object(l["n"])(s["h"])}));var z=Object(l["r"])(U,{LegendURL:Object(l["m"])(le)},Object(l["r"])(H,{Title:Object(l["n"])(s["h"]),Identifier:Object(l["n"])(s["h"])}));var q=Object(l["r"])(U,{TileMatrixSet:Object(l["n"])(s["h"]),TileMatrixSetLimits:Object(l["n"])(fe)});var B=Object(l["r"])(U,{TileMatrixLimits:Object(l["j"])(he)});var X=Object(l["r"])(U,{TileMatrix:Object(l["n"])(s["h"]),MinTileRow:Object(l["n"])(s["f"]),MaxTileRow:Object(l["n"])(s["f"]),MinTileCol:Object(l["n"])(s["f"]),MaxTileCol:Object(l["n"])(s["f"])});var K=Object(l["r"])(U,{Default:Object(l["n"])(s["h"]),Value:Object(l["m"])(s["h"])},Object(l["r"])(H,{Identifier:Object(l["n"])(s["h"])}));var Z=Object(l["r"])(H,{LowerCorner:Object(l["j"])(ue),UpperCorner:Object(l["j"])(ue)});var Q=Object(l["r"])(U,{WellKnownScaleSet:Object(l["n"])(s["h"]),TileMatrix:Object(l["m"])(ce)},Object(l["r"])(H,{SupportedCRS:Object(l["n"])(s["h"]),Identifier:Object(l["n"])(s["h"])}));var J=Object(l["r"])(U,{TopLeftCorner:Object(l["n"])(ue),ScaleDenominator:Object(l["n"])(s["d"]),TileWidth:Object(l["n"])(s["f"]),TileHeight:Object(l["n"])(s["f"]),MatrixWidth:Object(l["n"])(s["f"]),MatrixHeight:Object(l["n"])(s["f"])},Object(l["r"])(H,{Identifier:Object(l["n"])(s["h"])}));G.prototype.read;G.prototype.readFromDocument=function(e){for(var t=e.firstChild;t;t=t.nextSibling){if(t.nodeType==Node.ELEMENT_NODE){return this.readFromNode(t)}}return null};G.prototype.readFromNode=function(e){var t=e.getAttribute("version").trim();var r=this.owsParser_.readFromNode(e);if(!r){return null}r["version"]=t;r=Object(l["u"])(r,Y,e,[]);return r?r:null};function ee(e,t){return Object(l["u"])({},W,e,t)}function te(e,t){return Object(l["u"])({},V,e,t)}function re(e,t){return Object(l["u"])({},Q,e,t)}function ie(e,t){var r=Object(l["u"])({},z,e,t);if(!r){return undefined}var i=e.getAttribute("isDefault")==="true";r["isDefault"]=i;return r}function ne(e,t){return Object(l["u"])({},q,e,t)}function ae(e,t){return Object(l["u"])({},K,e,t)}function oe(e,t){var r=e.getAttribute("format");var i=e.getAttribute("template");var n=e.getAttribute("resourceType");var a={};if(r){a["format"]=r}if(i){a["template"]=i}if(n){a["resourceType"]=n}return a}function se(e,t){var r=Object(l["u"])([],Z,e,t);if(r.length!=2){return undefined}return Object(n["b"])(r)}function le(e,t){var r={};r["format"]=e.getAttribute("format");r["href"]=Object(a["a"])(e);return r}function ue(e,t){var r=Object(s["h"])(e).split(" ");if(!r||r.length!=2){return undefined}var i=+r[0];var n=+r[1];if(isNaN(i)||isNaN(n)){return undefined}return[i,n]}function ce(e,t){return Object(l["u"])({},J,e,t)}function fe(e,t){return Object(l["u"])([],B,e,t)}function he(e,t){return Object(l["u"])({},X,e,t)}var de=t["a"]=G},function(e,t,r){"use strict";r.d(t,"a",function(){return o});var i=r(12);var n=r(179);var a=r(222);function o(e){var t=Object.keys(e.defs);var r=t.length;var o=void 0,s=void 0;for(o=0;o<r;++o){var l=t[o];if(!Object(i["g"])(l)){var u=e.defs(l);Object(i["c"])(new a["a"]({code:l,axisOrientation:u.axis,metersPerUnit:u.to_meter,units:u.units}))}}for(o=0;o<r;++o){var c=t[o];var f=Object(i["g"])(c);for(s=0;s<r;++s){var h=t[s];var d=Object(i["g"])(h);if(!Object(n["c"])(c,h)){if(e.defs[c]===e.defs[h]){Object(i["b"])([f,d])}else{var p=e(c,h);Object(i["a"])(f,d,p.forward,p.inverse)}}}}}},function(e,t,r){"use strict";var i=r(3);var n=r(21);var a=r(9);var o=r(94);var s=r(168);var l=r(4);var u=r(23);var c=r(51);var f=r(130);var h=r(34);var d=r(12);var p=r(0);var v=function e(t){var r=t?t:{};s["a"].call(this);this.defaultDataProjection=Object(d["g"])("EPSG:4326");this.readExtensions_=r.readExtensions};Object(i["d"])(v,s["a"]);var g=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"];var m="http://www.topografix.com/GPX/1/1 "+"http://www.topografix.com/GPX/1/1/gpx.xsd";var y={rte:B,trk:X,wpt:K};var _=Object(p["r"])(g,{rte:Object(p["j"])(B),trk:Object(p["j"])(X),wpt:Object(p["j"])(K)});var b=Object(p["r"])(g,{text:Object(p["n"])(l["h"],"linkText"),type:Object(p["n"])(l["h"],"linkType")});var w=Object(p["r"])(g,{name:Object(p["n"])(l["h"]),cmt:Object(p["n"])(l["h"]),desc:Object(p["n"])(l["h"]),src:Object(p["n"])(l["h"]),link:Y,number:Object(p["n"])(l["f"]),extensions:W,type:Object(p["n"])(l["h"]),rtept:V});var S=Object(p["r"])(g,{ele:Object(p["n"])(l["d"]),time:Object(p["n"])(l["c"])});var C=Object(p["r"])(g,{name:Object(p["n"])(l["h"]),cmt:Object(p["n"])(l["h"]),desc:Object(p["n"])(l["h"]),src:Object(p["n"])(l["h"]),link:Y,number:Object(p["n"])(l["f"]),type:Object(p["n"])(l["h"]),extensions:W,trkseg:q});var x=Object(p["r"])(g,{trkpt:z});var O=Object(p["r"])(g,{ele:Object(p["n"])(l["d"]),time:Object(p["n"])(l["c"])});var T=Object(p["r"])(g,{ele:Object(p["n"])(l["d"]),time:Object(p["n"])(l["c"]),magvar:Object(p["n"])(l["d"]),geoidheight:Object(p["n"])(l["d"]),name:Object(p["n"])(l["h"]),cmt:Object(p["n"])(l["h"]),desc:Object(p["n"])(l["h"]),src:Object(p["n"])(l["h"]),link:Y,sym:Object(p["n"])(l["h"]),type:Object(p["n"])(l["h"]),fix:Object(p["n"])(l["h"]),sat:Object(p["n"])(l["f"]),hdop:Object(p["n"])(l["d"]),vdop:Object(p["n"])(l["d"]),pdop:Object(p["n"])(l["d"]),ageofdgpsdata:Object(p["n"])(l["d"]),dgpsid:Object(p["n"])(l["f"]),extensions:W});var E=["text","type"];var M=Object(p["r"])(g,{text:Object(p["l"])(l["n"]),type:Object(p["l"])(l["n"])});var j=Object(p["r"])(g,["name","cmt","desc","src","link","number","type","rtept"]);var A=Object(p["r"])(g,{name:Object(p["l"])(l["n"]),cmt:Object(p["l"])(l["n"]),desc:Object(p["l"])(l["n"]),src:Object(p["l"])(l["n"]),link:Object(p["l"])(Z),number:Object(p["l"])(l["m"]),type:Object(p["l"])(l["n"]),rtept:Object(p["k"])(Object(p["l"])(Q))});var P=Object(p["r"])(g,["ele","time"]);var k=Object(p["r"])(g,["name","cmt","desc","src","link","number","type","trkseg"]);var I=Object(p["r"])(g,{name:Object(p["l"])(l["n"]),cmt:Object(p["l"])(l["n"]),desc:Object(p["l"])(l["n"]),src:Object(p["l"])(l["n"]),link:Object(p["l"])(Z),number:Object(p["l"])(l["m"]),type:Object(p["l"])(l["n"]),trkseg:Object(p["k"])(Object(p["l"])(te))});var D=Object(p["q"])("trkpt");var R=Object(p["r"])(g,{trkpt:Object(p["l"])(Q)});var L=Object(p["r"])(g,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]);var $=Object(p["r"])(g,{ele:Object(p["l"])(l["l"]),time:Object(p["l"])(l["k"]),magvar:Object(p["l"])(l["l"]),geoidheight:Object(p["l"])(l["l"]),name:Object(p["l"])(l["n"]),cmt:Object(p["l"])(l["n"]),desc:Object(p["l"])(l["n"]),src:Object(p["l"])(l["n"]),link:Object(p["l"])(Z),sym:Object(p["l"])(l["n"]),type:Object(p["l"])(l["n"]),fix:Object(p["l"])(l["n"]),sat:Object(p["l"])(l["m"]),hdop:Object(p["l"])(l["l"]),vdop:Object(p["l"])(l["l"]),pdop:Object(p["l"])(l["l"]),ageofdgpsdata:Object(p["l"])(l["l"]),dgpsid:Object(p["l"])(l["m"])});var N={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function F(e,t,r){var i=e.getGeometry();if(i){var n=N[i.getType()];if(n){var a=t[t.length-1].node;return Object(p["d"])(a.namespaceURI,n)}}}var G=Object(p["r"])(g,{rte:Object(p["l"])(J),trk:Object(p["l"])(ee),wpt:Object(p["l"])(re)});function U(e,t,r,i){e.push(parseFloat(r.getAttribute("lon")),parseFloat(r.getAttribute("lat")));if("ele"in i){e.push(i["ele"]);delete i["ele"];t.hasZ=true}else{e.push(0)}if("time"in i){e.push(i["time"]);delete i["time"];t.hasM=true}else{e.push(0)}return e}function H(e,t,r){var i=u["a"].XY;var n=2;if(e.hasZ&&e.hasM){i=u["a"].XYZM;n=4}else if(e.hasZ){i=u["a"].XYZ;n=3}else if(e.hasM){i=u["a"].XYM;n=3}if(n!==4){for(var a=0,o=t.length/4;a<o;a++){t[a*n]=t[a*4];t[a*n+1]=t[a*4+1];if(e.hasZ){t[a*n+2]=t[a*4+2]}if(e.hasM){t[a*n+2]=t[a*4+3]}}t.length=t.length/4*n;if(r){for(var s=0,l=r.length;s<l;s++){r[s]=r[s]/4*n}}}return i}function Y(e,t){var r=t[t.length-1];var i=e.getAttribute("href");if(i!==null){r["link"]=i}Object(p["t"])(b,e,t)}function W(e,t){var r=t[t.length-1];r["extensionsNode_"]=e}function V(e,t){var r=Object(p["u"])({},S,e,t);if(r){var i=t[t.length-1];var n=i["flatCoordinates"];var a=i["layoutOptions"];U(n,a,e,r)}}function z(e,t){var r=Object(p["u"])({},O,e,t);if(r){var i=t[t.length-1];var n=i["flatCoordinates"];var a=i["layoutOptions"];U(n,a,e,r)}}function q(e,t){var r=t[t.length-1];Object(p["t"])(x,e,t);var i=r["flatCoordinates"];var n=r["ends"];n.push(i.length)}function B(e,t){var r=t[0];var i=Object(p["u"])({flatCoordinates:[],layoutOptions:{}},w,e,t);if(!i){return undefined}var a=i["flatCoordinates"];delete i["flatCoordinates"];var s=i["layoutOptions"];delete i["layoutOptions"];var l=H(s,a);var u=new c["a"](null);u.setFlatCoordinates(l,a);Object(o["b"])(u,false,r);var f=new n["a"](u);f.setProperties(i);return f}function X(e,t){var r=t[0];var i=Object(p["u"])({flatCoordinates:[],ends:[],layoutOptions:{}},C,e,t);if(!i){return undefined}var a=i["flatCoordinates"];delete i["flatCoordinates"];var s=i["ends"];delete i["ends"];var l=i["layoutOptions"];delete i["layoutOptions"];var u=H(l,a,s);var c=new f["a"](null);c.setFlatCoordinates(u,a,s);Object(o["b"])(c,false,r);var h=new n["a"](c);h.setProperties(i);return h}function K(e,t){var r=t[0];var i=Object(p["u"])({},T,e,t);if(!i){return undefined}var a={};var s=U([],a,e,i);var l=H(a,s);var u=new h["a"](s,l);Object(o["b"])(u,false,r);var c=new n["a"](u);c.setProperties(i);return c}v.prototype.handleReadExtensions_=function(e){if(!e){e=[]}for(var t=0,r=e.length;t<r;++t){var i=e[t];if(this.readExtensions_){var n=i.get("extensionsNode_")||null;this.readExtensions_(i,n)}i.set("extensionsNode_",undefined)}};v.prototype.readFeature;v.prototype.readFeatureFromNode=function(e,t){if(!Object(a["f"])(g,e.namespaceURI)){return null}var r=y[e.localName];if(!r){return null}var i=r(e,[this.getReadOptions(e,t)]);if(!i){return null}this.handleReadExtensions_([i]);return i};v.prototype.readFeatures;v.prototype.readFeaturesFromNode=function(e,t){if(!Object(a["f"])(g,e.namespaceURI)){return[]}if(e.localName=="gpx"){var r=Object(p["u"])([],_,e,[this.getReadOptions(e,t)]);if(r){this.handleReadExtensions_(r);return r}else{return[]}}return[]};v.prototype.readProjection;function Z(e,t,r){e.setAttribute("href",t);var i=r[r.length-1];var n=i["properties"];var a=[n["linkText"],n["linkType"]];Object(p["v"])({node:e},M,p["b"],a,r,E)}function Q(e,t,r){var i=r[r.length-1];var n=i.node;var a=n.namespaceURI;var o=i["properties"];e.setAttributeNS(null,"lat",t[1]);e.setAttributeNS(null,"lon",t[0]);var s=i["geometryLayout"];switch(s){case u["a"].XYZM:if(t[3]!==0){o["time"]=t[3]}case u["a"].XYZ:if(t[2]!==0){o["ele"]=t[2]}break;case u["a"].XYM:if(t[2]!==0){o["time"]=t[2]}break;default:}var l=e.nodeName=="rtept"?P[a]:L[a];var c=Object(p["p"])(o,l);Object(p["v"])({node:e,properties:o},$,p["b"],c,r,l)}function J(e,t,r){var i=r[0];var n=t.getProperties();var a={node:e,properties:n};var s=t.getGeometry();if(s){s=Object(o["b"])(s,true,i);a["geometryLayout"]=s.getLayout();n["rtept"]=s.getCoordinates()}var l=r[r.length-1].node;var u=j[l.namespaceURI];var c=Object(p["p"])(n,u);Object(p["v"])(a,A,p["b"],c,r,u)}function ee(e,t,r){var i=r[0];var n=t.getProperties();var a={node:e,properties:n};var s=t.getGeometry();if(s){s=Object(o["b"])(s,true,i);n["trkseg"]=s.getLineStrings()}var l=r[r.length-1].node;var u=k[l.namespaceURI];var c=Object(p["p"])(n,u);Object(p["v"])(a,I,p["b"],c,r,u)}function te(e,t,r){var i={node:e,geometryLayout:t.getLayout(),properties:{}};Object(p["v"])(i,R,D,t.getCoordinates(),r)}function re(e,t,r){var i=r[0];var n=r[r.length-1];n["properties"]=t.getProperties();var a=t.getGeometry();if(a){a=Object(o["b"])(a,true,i);n["geometryLayout"]=a.getLayout();Q(e,a.getCoordinates(),r)}}v.prototype.writeFeatures;v.prototype.writeFeaturesNode=function(e,t){t=this.adaptOptions(t);var r=Object(p["d"])("http://www.topografix.com/GPX/1/1","gpx");var i="http://www.w3.org/2000/xmlns/";r.setAttributeNS(i,"xmlns:xsi",p["c"]);r.setAttributeNS(p["c"],"xsi:schemaLocation",m);r.setAttribute("version","1.1");r.setAttribute("creator","OpenLayers");Object(p["v"])({node:r},G,F,e,[t]);return r};t["a"]=v},function(e,t,r){"use strict";t["a"]={POINT:"point",LINE:"line"}},function(e,t,r){"use strict";var i=r(3);var n=r(21);var a=r(9);var o=r(39);var s=r(116);var l=r(94);var u=r(168);var c=r(4);var f=r(217);var h=r(23);var d=r(7);var p=r(51);var v=r(130);var g=r(131);var m=r(141);var y=r(34);var _=r(49);var b=r(22);var w=r(12);var S=r(47);var C=r(339);var x=r(119);var O=r(100);var T=r(38);var E=r(15);var M=r(167);var j=r(0);var A=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var P=void 0;var k=null;function I(){return k}var D=void 0;var R=void 0;var L=void 0;var $=void 0;var N=void 0;var F=void 0;var G=null;function U(){return G}var H=void 0;var Y=null;function W(){return Y}var V=void 0;var z=null;function q(){return z}var B=null;function X(){return B}var K=null;function Z(){return K}function Q(){P=[255,255,255,1];k=new S["a"]({color:P});D=[20,2];R=x["a"].PIXELS;L=x["a"].PIXELS;$=[64,64];N="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png";F=.5;G=new C["a"]({anchor:D,anchorOrigin:O["a"].BOTTOM_LEFT,anchorXUnits:R,anchorYUnits:L,crossOrigin:"anonymous",rotation:0,scale:F,size:$,src:N});H="NO_IMAGE";Y=new T["a"]({color:P,width:1});V=new T["a"]({color:[51,51,51,1],width:2});z=new M["a"]({font:"bold 16px Helvetica",fill:k,stroke:V,scale:.8});B=new E["c"]({fill:k,image:G,text:z,stroke:Y,zIndex:0});K=[B]}var J=function e(t){var r=t?t:{};u["a"].call(this);if(!K){Q()}this.defaultDataProjection=Object(w["g"])("EPSG:4326");this.defaultStyle_=r.defaultStyle?r.defaultStyle:K;this.extractStyles_=r.extractStyles!==undefined?r.extractStyles:true;this.writeStyles_=r.writeStyles!==undefined?r.writeStyles:true;this.sharedStyles_={};this.showPointNames_=r.showPointNames!==undefined?r.showPointNames:true};Object(i["d"])(J,u["a"]);var ee=["http://www.google.com/kml/ext/2.2"];var te=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"];var re="http://www.opengis.net/kml/2.2 "+"https://developers.google.com/kml/schema/kml22gx.xsd";var ie={fraction:x["a"].FRACTION,pixels:x["a"].PIXELS,insetPixels:x["a"].PIXELS};function ne(e,t){var r=null;var i=[0,0];var n="start";if(e.getImage()){var a=e.getImage().getImageSize();if(a===null){a=$}if(a.length==2){var o=e.getImage().getScale();i[0]=o*a[0]/2;i[1]=-o*a[1]/2;n="left"}}if(e.getText()!==null){var s=e.getText();r=s.clone();r.setFont(s.getFont()||z.getFont());r.setScale(s.getScale()||z.getScale());r.setFill(s.getFill()||z.getFill());r.setStroke(s.getStroke()||V)}else{r=z.clone()}r.setText(t);r.setOffsetX(i[0]);r.setOffsetY(i[1]);r.setTextAlign(n);var l=new E["c"]({text:r});return l}function ae(e,t,r,i,n){return function(a,o){var s=n;var l=void 0;var u="";if(s){var c=a.getGeometry();if(c){s=c.getType()===d["a"].POINT}}if(s){u=a.get("name");s=s&&u}if(e){if(s){l=ne(e[0],u);return e.concat(l)}return e}if(t){var f=oe(t,r,i);if(s){l=ne(f[0],u);return f.concat(l)}return f}if(s){l=ne(r[0],u);return r.concat(l)}return r}}function oe(e,t,r){if(Array.isArray(e)){return e}else if(typeof e==="string"){if(!(e in r)&&"#"+e in r){e="#"+e}return oe(r[e],t,r)}else{return t}}function se(e){var t=Object(j["e"])(e,false);var r=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(t);if(r){var i=r[1];return[parseInt(i.substr(6,2),16),parseInt(i.substr(4,2),16),parseInt(i.substr(2,2),16),parseInt(i.substr(0,2),16)/255]}else{return undefined}}function le(e){var t=Object(j["e"])(e,false);var r=[];var i=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i;var n=void 0;while(n=i.exec(t)){var a=parseFloat(n[1]);var o=parseFloat(n[2]);var s=n[3]?parseFloat(n[3]):0;r.push(a,o,s);t=t.substr(n[0].length)}if(t!==""){return undefined}return r}function ue(e){var t=Object(j["e"])(e,false).trim();var r=e.baseURI;if(!r||r=="about:blank"){r=window.location.href}if(r){var i=new URL(t,r);return i.href}else{return t}}function ce(e){var t=e.getAttribute("xunits");var r=e.getAttribute("yunits");var i=void 0;if(t!=="insetPixels"){if(r!=="insetPixels"){i=O["a"].BOTTOM_LEFT}else{i=O["a"].TOP_LEFT}}else{if(r!=="insetPixels"){i=O["a"].BOTTOM_RIGHT}else{i=O["a"].TOP_RIGHT}}return{x:parseFloat(e.getAttribute("x")),xunits:ie[t],y:parseFloat(e.getAttribute("y")),yunits:ie[r],origin:i}}function fe(e){return Object(c["d"])(e)}var he=Object(j["r"])(te,{Pair:Ze});function de(e,t){return Object(j["u"])(undefined,he,e,t)}var pe=Object(j["r"])(te,{Icon:Object(j["n"])(Ae),heading:Object(j["n"])(c["d"]),hotSpot:Object(j["n"])(ce),scale:Object(j["n"])(fe)});function ve(e,t){var r=Object(j["u"])({},pe,e,t);if(!r){return}var i=t[t.length-1];var n="Icon"in r?r["Icon"]:{};var a=!("Icon"in r)||Object.keys(n).length>0;var o=void 0;var s=n["href"];if(s){o=s}else if(a){o=N}var l=void 0,u=void 0,c=void 0;var f=O["a"].BOTTOM_LEFT;var h=r["hotSpot"];if(h){l=[h.x,h.y];u=h.xunits;c=h.yunits;f=h.origin}else if(o===N){l=D;u=R;c=L}else if(/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(o)){l=[.5,0];u=x["a"].FRACTION;c=x["a"].FRACTION}var d=void 0;var p=n["x"];var v=n["y"];if(p!==undefined&&v!==undefined){d=[p,v]}var g=void 0;var m=n["w"];var y=n["h"];if(m!==undefined&&y!==undefined){g=[m,y]}var _=void 0;var w=r["heading"];if(w!==undefined){_=Object(b["i"])(w)}var S=r["scale"];if(a){if(o==N){g=$;if(S===undefined){S=F}}var T=new C["a"]({anchor:l,anchorOrigin:f,anchorXUnits:u,anchorYUnits:c,crossOrigin:"anonymous",offset:d,offsetOrigin:O["a"].BOTTOM_LEFT,rotation:_,scale:S,size:g,src:o});i["imageStyle"]=T}else{i["imageStyle"]=H}}var ge=Object(j["r"])(te,{color:Object(j["n"])(se),scale:Object(j["n"])(fe)});function me(e,t){var r=Object(j["u"])({},ge,e,t);if(!r){return}var i=t[t.length-1];var n=new M["a"]({fill:new S["a"]({color:"color"in r?r["color"]:P}),scale:r["scale"]});i["textStyle"]=n}var ye=Object(j["r"])(te,{color:Object(j["n"])(se),width:Object(j["n"])(c["d"])});function _e(e,t){var r=Object(j["u"])({},ye,e,t);if(!r){return}var i=t[t.length-1];var n=new T["a"]({color:"color"in r?r["color"]:P,width:"width"in r?r["width"]:1});i["strokeStyle"]=n}var be=Object(j["r"])(te,{color:Object(j["n"])(se),fill:Object(j["n"])(c["a"]),outline:Object(j["n"])(c["a"])});function we(e,t){var r=Object(j["u"])({},be,e,t);if(!r){return}var i=t[t.length-1];var n=new S["a"]({color:"color"in r?r["color"]:P});i["fillStyle"]=n;var a=r["fill"];if(a!==undefined){i["fill"]=a}var o=r["outline"];if(o!==undefined){i["outline"]=o}}var Se=Object(j["r"])(te,{coordinates:Object(j["o"])(le)});function Ce(e,t){return Object(j["u"])(null,Se,e,t)}function xe(e,t){var r=t[t.length-1];var i=r.flatCoordinates;var n=Object(j["e"])(e,false);var a=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i;var o=a.exec(n);if(o){var s=parseFloat(o[1]);var l=parseFloat(o[2]);var u=parseFloat(o[3]);i.push(s,l,u,0)}else{i.push(0,0,0,0)}}var Oe=Object(j["r"])(ee,{Track:Object(j["j"])(Me)});function Te(e,t){var r=Object(j["u"])([],Oe,e,t);if(!r){return undefined}var i=new v["a"](null);i.setLineStrings(r);return i}var Ee=Object(j["r"])(te,{when:dt},Object(j["r"])(ee,{coord:xe}));function Me(e,t){var r=Object(j["u"])({flatCoordinates:[],whens:[]},Ee,e,t);if(!r){return undefined}var i=r.flatCoordinates;var n=r.whens;for(var a=0,o=Math.min(i.length,n.length);a<o;++a){i[4*a+3]=n[a]}var s=new p["a"](null);s.setFlatCoordinates(h["a"].XYZM,i);return s}var je=Object(j["r"])(te,{href:Object(j["n"])(ue)},Object(j["r"])(ee,{x:Object(j["n"])(c["d"]),y:Object(j["n"])(c["d"]),w:Object(j["n"])(c["d"]),h:Object(j["n"])(c["d"])}));function Ae(e,t){var r=Object(j["u"])({},je,e,t);if(r){return r}else{return null}}var Pe=Object(j["r"])(te,{coordinates:Object(j["o"])(le)});function ke(e,t){return Object(j["u"])(null,Pe,e,t)}var Ie=Object(j["r"])(te,{extrude:Object(j["n"])(c["a"]),tessellate:Object(j["n"])(c["a"]),altitudeMode:Object(j["n"])(c["h"])});function De(e,t){var r=Object(j["u"])({},Ie,e,t);var i=ke(e,t);if(i){var n=new p["a"](null);n.setFlatCoordinates(h["a"].XYZ,i);n.setProperties(r);return n}else{return undefined}}function Re(e,t){var r=Object(j["u"])({},Ie,e,t);var i=ke(e,t);if(i){var n=new _["a"](null);n.setFlatCoordinates(h["a"].XYZ,i,[i.length]);n.setProperties(r);return n}else{return undefined}}var Le=Object(j["r"])(te,{LineString:Object(j["j"])(De),LinearRing:Object(j["j"])(Re),MultiGeometry:Object(j["j"])($e),Point:Object(j["j"])(Ne),Polygon:Object(j["j"])(Ge)});function $e(e,t){var r=Object(j["u"])([],Le,e,t);if(!r){return null}if(r.length===0){return new f["a"](r)}var i=void 0;var n=true;var s=r[0].getType();var l=void 0;for(var u=1,c=r.length;u<c;++u){l=r[u];if(l.getType()!=s){n=false;break}}if(n){var h=void 0;var p=void 0;if(s==d["a"].POINT){var y=r[0];h=y.getLayout();p=y.getFlatCoordinates();for(var _=1,b=r.length;_<b;++_){l=r[_];Object(a["c"])(p,l.getFlatCoordinates())}i=new g["a"](null);i.setFlatCoordinates(h,p);Ye(i,r)}else if(s==d["a"].LINE_STRING){i=new v["a"](null);i.setLineStrings(r);Ye(i,r)}else if(s==d["a"].POLYGON){i=new m["a"](null);i.setPolygons(r);Ye(i,r)}else if(s==d["a"].GEOMETRY_COLLECTION){i=new f["a"](r)}else{Object(o["a"])(false,37)}}else{i=new f["a"](r)}return i}function Ne(e,t){var r=Object(j["u"])({},Ie,e,t);var i=ke(e,t);if(i){var n=new y["a"](null);n.setFlatCoordinates(h["a"].XYZ,i);n.setProperties(r);return n}else{return undefined}}var Fe=Object(j["r"])(te,{innerBoundaryIs:st,outerBoundaryIs:ut});function Ge(e,t){var r=Object(j["u"])({},Ie,e,t);var i=Object(j["u"])([null],Fe,e,t);if(i&&i[0]){var n=new _["a"](null);var o=i[0];var s=[o.length];for(var l=1,u=i.length;l<u;++l){Object(a["c"])(o,i[l]);s.push(o.length)}n.setFlatCoordinates(h["a"].XYZ,o,s);n.setProperties(r);return n}else{return undefined}}var Ue=Object(j["r"])(te,{IconStyle:ve,LabelStyle:me,LineStyle:_e,PolyStyle:we});function He(e,t){var r=Object(j["u"])({},Ue,e,t);if(!r){return null}var i="fillStyle"in r?r["fillStyle"]:k;var n=r["fill"];if(n!==undefined&&!n){i=null}var a="imageStyle"in r?r["imageStyle"]:G;if(a==H){a=undefined}var o="textStyle"in r?r["textStyle"]:z;var s="strokeStyle"in r?r["strokeStyle"]:Y;var l=r["outline"];if(l!==undefined&&!l){s=null}return[new E["c"]({fill:i,image:a,stroke:s,text:o,zIndex:undefined})]}function Ye(e,t){var r=t.length;var i=new Array(t.length);var n=new Array(t.length);var a=new Array(t.length);var o=void 0,s=void 0,l=void 0;o=s=l=false;for(var u=0;u<r;++u){var c=t[u];i[u]=c.get("extrude");n[u]=c.get("tessellate");a[u]=c.get("altitudeMode");o=o||i[u]!==undefined;s=s||n[u]!==undefined;l=l||a[u]}if(o){e.set("extrude",i)}if(s){e.set("tessellate",n)}if(l){e.set("altitudeMode",a)}}var We=Object(j["r"])(te,{displayName:Object(j["n"])(c["h"]),value:Object(j["n"])(c["h"])});function Ve(e,t){var r=e.getAttribute("name");Object(j["t"])(We,e,t);var i=t[t.length-1];if(r!==null){i[r]=i.value}else if(i.displayName!==null){i[i.displayName]=i.value}delete i["value"]}var ze=Object(j["r"])(te,{Data:Ve,SchemaData:et});function qe(e,t){Object(j["t"])(ze,e,t)}var Be=Object(j["r"])(te,{LatLonAltBox:it,Lod:at});function Xe(e,t){Object(j["t"])(Be,e,t)}var Ke=Object(j["r"])(te,{Style:Object(j["n"])(He),key:Object(j["n"])(c["h"]),styleUrl:Object(j["n"])(ue)});function Ze(e,t){var r=Object(j["u"])({},Ke,e,t);if(!r){return}var i=r["key"];if(i&&i=="normal"){var n=r["styleUrl"];if(n){t[t.length-1]=n}var a=r["Style"];if(a){t[t.length-1]=a}}}function Qe(e,t){var r=de(e,t);if(!r){return}var i=t[t.length-1];if(Array.isArray(r)){i["Style"]=r}else if(typeof r==="string"){i["styleUrl"]=r}else{Object(o["a"])(false,38)}}var Je=Object(j["r"])(te,{SimpleData:tt});function et(e,t){Object(j["t"])(Je,e,t)}function tt(e,t){var r=e.getAttribute("name");if(r!==null){var i=Object(c["h"])(e);var n=t[t.length-1];n[r]=i}}var rt=Object(j["r"])(te,{altitudeMode:Object(j["n"])(c["h"]),minAltitude:Object(j["n"])(c["d"]),maxAltitude:Object(j["n"])(c["d"]),north:Object(j["n"])(c["d"]),south:Object(j["n"])(c["d"]),east:Object(j["n"])(c["d"]),west:Object(j["n"])(c["d"])});function it(e,t){var r=Object(j["u"])({},rt,e,t);if(!r){return}var i=t[t.length-1];var n=[parseFloat(r["west"]),parseFloat(r["south"]),parseFloat(r["east"]),parseFloat(r["north"])];i["extent"]=n;i["altitudeMode"]=r["altitudeMode"];i["minAltitude"]=parseFloat(r["minAltitude"]);i["maxAltitude"]=parseFloat(r["maxAltitude"])}var nt=Object(j["r"])(te,{minLodPixels:Object(j["n"])(c["d"]),maxLodPixels:Object(j["n"])(c["d"]),minFadeExtent:Object(j["n"])(c["d"]),maxFadeExtent:Object(j["n"])(c["d"])});function at(e,t){var r=Object(j["u"])({},nt,e,t);if(!r){return}var i=t[t.length-1];i["minLodPixels"]=parseFloat(r["minLodPixels"]);i["maxLodPixels"]=parseFloat(r["maxLodPixels"]);i["minFadeExtent"]=parseFloat(r["minFadeExtent"]);i["maxFadeExtent"]=parseFloat(r["maxFadeExtent"])}var ot=Object(j["r"])(te,{LinearRing:Object(j["o"])(Ce)});function st(e,t){var r=Object(j["u"])(undefined,ot,e,t);if(r){var i=t[t.length-1];i.push(r)}}var lt=Object(j["r"])(te,{LinearRing:Object(j["o"])(Ce)});function ut(e,t){var r=Object(j["u"])(undefined,lt,e,t);if(r){var i=t[t.length-1];i[0]=r}}var ct=Object(j["r"])(te,{ExtendedData:qe,Region:Xe,Link:ht,address:Object(j["n"])(c["h"]),description:Object(j["n"])(c["h"]),name:Object(j["n"])(c["h"]),open:Object(j["n"])(c["a"]),phoneNumber:Object(j["n"])(c["h"]),visibility:Object(j["n"])(c["a"])});var ft=Object(j["r"])(te,{href:Object(j["n"])(ue)});function ht(e,t){Object(j["t"])(ft,e,t)}function dt(e,t){var r=t[t.length-1];var i=r.whens;var n=Object(j["e"])(e,false);var a=Date.parse(n);i.push(isNaN(a)?0:a)}var pt=Object(j["r"])(te,{ExtendedData:qe,Region:Xe,MultiGeometry:Object(j["n"])($e,"geometry"),LineString:Object(j["n"])(De,"geometry"),LinearRing:Object(j["n"])(Re,"geometry"),Point:Object(j["n"])(Ne,"geometry"),Polygon:Object(j["n"])(Ge,"geometry"),Style:Object(j["n"])(He),StyleMap:Qe,address:Object(j["n"])(c["h"]),description:Object(j["n"])(c["h"]),name:Object(j["n"])(c["h"]),open:Object(j["n"])(c["a"]),phoneNumber:Object(j["n"])(c["h"]),styleUrl:Object(j["n"])(ue),visibility:Object(j["n"])(c["a"])},Object(j["r"])(ee,{MultiTrack:Object(j["n"])(Te,"geometry"),Track:Object(j["n"])(Me,"geometry")}));J.prototype.readDocumentOrFolder_=function(e,t){var r=Object(j["r"])(te,{Document:Object(j["i"])(this.readDocumentOrFolder_,this),Folder:Object(j["i"])(this.readDocumentOrFolder_,this),Placemark:Object(j["j"])(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)});var i=Object(j["u"])([],r,e,t,this);if(i){return i}else{return undefined}};J.prototype.readPlacemark_=function(e,t){var r=Object(j["u"])({geometry:null},pt,e,t);if(!r){return undefined}var i=new n["a"];var a=e.getAttribute("id");if(a!==null){i.setId(a)}var o=t[0];var s=r["geometry"];if(s){Object(l["b"])(s,false,o)}i.setGeometry(s);delete r["geometry"];if(this.extractStyles_){var u=r["Style"];var c=r["styleUrl"];var f=ae(u,c,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);i.setStyle(f)}delete r["Style"];i.setProperties(r);return i};J.prototype.readSharedStyle_=function(e,t){var r=e.getAttribute("id");if(r!==null){var i=He(e,t);if(i){var n=void 0;var a=e.baseURI;if(!a||a=="about:blank"){a=window.location.href}if(a){var o=new URL("#"+r,a);n=o.href}else{n="#"+r}this.sharedStyles_[n]=i}}};J.prototype.readSharedStyleMap_=function(e,t){var r=e.getAttribute("id");if(r===null){return}var i=de(e,t);if(!i){return}var n=void 0;var a=e.baseURI;if(!a||a=="about:blank"){a=window.location.href}if(a){var o=new URL("#"+r,a);n=o.href}else{n="#"+r}this.sharedStyles_[n]=i};J.prototype.readFeature;J.prototype.readFeatureFromNode=function(e,t){if(!Object(a["f"])(te,e.namespaceURI)){return null}var r=this.readPlacemark_(e,[this.getReadOptions(e,t)]);if(r){return r}else{return null}};J.prototype.readFeatures;J.prototype.readFeaturesFromNode=function(e,t){if(!Object(a["f"])(te,e.namespaceURI)){return[]}var r=void 0;var i=e.localName;if(i=="Document"||i=="Folder"){r=this.readDocumentOrFolder_(e,[this.getReadOptions(e,t)]);if(r){return r}else{return[]}}else if(i=="Placemark"){var n=this.readPlacemark_(e,[this.getReadOptions(e,t)]);if(n){return[n]}else{return[]}}else if(i=="kml"){r=[];for(var o=e.firstElementChild;o;o=o.nextElementSibling){var s=this.readFeaturesFromNode(o,t);if(s){Object(a["c"])(r,s)}}return r}else{return[]}};J.prototype.readName=function(e){if(Object(j["g"])(e)){return this.readNameFromDocument(e)}else if(Object(j["h"])(e)){return this.readNameFromNode(e)}else if(typeof e==="string"){var t=Object(j["s"])(e);return this.readNameFromDocument(t)}else{return undefined}};J.prototype.readNameFromDocument=function(e){for(var t=e.firstChild;t;t=t.nextSibling){if(t.nodeType==Node.ELEMENT_NODE){var r=this.readNameFromNode(t);if(r){return r}}}return undefined};J.prototype.readNameFromNode=function(e){for(var t=e.firstElementChild;t;t=t.nextElementSibling){if(Object(a["f"])(te,t.namespaceURI)&&t.localName=="name"){return Object(c["h"])(t)}}for(var r=e.firstElementChild;r;r=r.nextElementSibling){var i=r.localName;if(Object(a["f"])(te,r.namespaceURI)&&(i=="Document"||i=="Folder"||i=="Placemark"||i=="kml")){var n=this.readNameFromNode(r);if(n){return n}}}return undefined};J.prototype.readNetworkLinks=function(e){var t=[];if(Object(j["g"])(e)){Object(a["c"])(t,this.readNetworkLinksFromDocument(e))}else if(Object(j["h"])(e)){Object(a["c"])(t,this.readNetworkLinksFromNode(e))}else if(typeof e==="string"){var r=Object(j["s"])(e);Object(a["c"])(t,this.readNetworkLinksFromDocument(r))}return t};J.prototype.readNetworkLinksFromDocument=function(e){var t=[];for(var r=e.firstChild;r;r=r.nextSibling){if(r.nodeType==Node.ELEMENT_NODE){Object(a["c"])(t,this.readNetworkLinksFromNode(r))}}return t};J.prototype.readNetworkLinksFromNode=function(e){var t=[];for(var r=e.firstElementChild;r;r=r.nextElementSibling){if(Object(a["f"])(te,r.namespaceURI)&&r.localName=="NetworkLink"){var i=Object(j["u"])({},ct,r,[]);t.push(i)}}for(var n=e.firstElementChild;n;n=n.nextElementSibling){var o=n.localName;if(Object(a["f"])(te,n.namespaceURI)&&(o=="Document"||o=="Folder"||o=="kml")){Object(a["c"])(t,this.readNetworkLinksFromNode(n))}}return t};J.prototype.readRegion=function(e){var t=[];if(Object(j["g"])(e)){Object(a["c"])(t,this.readRegionFromDocument(e))}else if(Object(j["h"])(e)){Object(a["c"])(t,this.readRegionFromNode(e))}else if(typeof e==="string"){var r=Object(j["s"])(e);Object(a["c"])(t,this.readRegionFromDocument(r))}return t};J.prototype.readRegionFromDocument=function(e){var t=[];for(var r=e.firstChild;r;r=r.nextSibling){if(r.nodeType==Node.ELEMENT_NODE){Object(a["c"])(t,this.readRegionFromNode(r))}}return t};J.prototype.readRegionFromNode=function(e){var t=[];for(var r=e.firstElementChild;r;r=r.nextElementSibling){if(Object(a["f"])(te,r.namespaceURI)&&r.localName=="Region"){var i=Object(j["u"])({},Be,r,[]);t.push(i)}}for(var n=e.firstElementChild;n;n=n.nextElementSibling){var o=n.localName;if(Object(a["f"])(te,n.namespaceURI)&&(o=="Document"||o=="Folder"||o=="kml")){Object(a["c"])(t,this.readRegionFromNode(n))}}return t};J.prototype.readProjection;function vt(e,t){var r=Object(s["a"])(t);var i=r.length==4?r[3]:1;var n=[i*255,r[2],r[1],r[0]];for(var a=0;a<4;++a){var o=parseInt(n[a],10).toString(16);n[a]=o.length==1?"0"+o:o}Object(c["n"])(e,n.join(""))}function gt(e,t,r){var i=r[r.length-1];var n=i["layout"];var a=i["stride"];var s=void 0;if(n==h["a"].XY||n==h["a"].XYM){s=2}else if(n==h["a"].XYZ||n==h["a"].XYZM){s=3}else{Object(o["a"])(false,34)}var l=t.length;var u="";if(l>0){u+=t[0];for(var f=1;f<s;++f){u+=","+t[f]}for(var d=a;d<l;d+=a){u+=" "+t[d];for(var p=1;p<s;++p){u+=","+t[d+p]}}}Object(c["n"])(e,u)}var mt=Object(j["r"])(te,{Data:Object(j["l"])(yt),value:Object(j["l"])(bt),displayName:Object(j["l"])(_t)});function yt(e,t,r){e.setAttribute("name",t.name);var i={node:e};var n=t.value;if((typeof n==="undefined"?"undefined":A(n))=="object"){if(n!==null&&n.displayName){Object(j["v"])(i,mt,j["b"],[n.displayName],r,["displayName"])}if(n!==null&&n.value){Object(j["v"])(i,mt,j["b"],[n.value],r,["value"])}}else{Object(j["v"])(i,mt,j["b"],[n],r,["value"])}}function _t(e,t){Object(c["j"])(e,t)}function bt(e,t){Object(c["n"])(e,t)}var wt=Object(j["r"])(te,{Placemark:Object(j["l"])(Qt)});var St=function e(t,r,i){var n=r[r.length-1].node;return Object(j["d"])(n.namespaceURI,"Placemark")};function Ct(e,t,r){var i={node:e};Object(j["v"])(i,wt,St,t,r,undefined,this)}var xt=Object(j["q"])("Data");function Ot(e,t,r){var i={node:e};var n=t.names;var a=t.values;var o=n.length;for(var s=0;s<o;s++){Object(j["v"])(i,mt,xt,[{name:n[s],value:a[s]}],r)}}var Tt=Object(j["r"])(te,["href"],Object(j["r"])(ee,["x","y","w","h"]));var Et=Object(j["r"])(te,{href:Object(j["l"])(c["n"])},Object(j["r"])(ee,{x:Object(j["l"])(c["l"]),y:Object(j["l"])(c["l"]),w:Object(j["l"])(c["l"]),h:Object(j["l"])(c["l"])}));var Mt=function e(t,r,i){return Object(j["d"])(ee[0],"gx:"+i)};function jt(e,t,r){var i={node:e};var n=r[r.length-1].node;var a=Tt[n.namespaceURI];var o=Object(j["p"])(t,a);Object(j["v"])(i,Et,j["b"],o,r,a);a=Tt[ee[0]];o=Object(j["p"])(t,a);Object(j["v"])(i,Et,Mt,o,r,a)}var At=Object(j["r"])(te,["scale","heading","Icon","hotSpot"]);var Pt=Object(j["r"])(te,{Icon:Object(j["l"])(jt),heading:Object(j["l"])(c["l"]),hotSpot:Object(j["l"])(dr),scale:Object(j["l"])(ur)});function kt(e,t,r){var i={node:e};var n={};var a=t.getSrc();var o=t.getSize();var s=t.getImageSize();var l={href:a};if(o){l["w"]=o[0];l["h"]=o[1];var u=t.getAnchor();var c=t.getOrigin();if(c&&s&&c[0]!==0&&c[1]!==o[1]){l["x"]=c[0];l["y"]=s[1]-(c[1]+o[1])}if(u&&(u[0]!==o[0]/2||u[1]!==o[1]/2)){var f={x:u[0],xunits:x["a"].PIXELS,y:o[1]-u[1],yunits:x["a"].PIXELS};n["hotSpot"]=f}}n["Icon"]=l;var h=t.getScale();if(h!==1){n["scale"]=h}var d=t.getRotation();if(d!==0){n["heading"]=d}var p=r[r.length-1].node;var v=At[p.namespaceURI];var g=Object(j["p"])(n,v);Object(j["v"])(i,Pt,j["b"],g,r,v)}var It=Object(j["r"])(te,["color","scale"]);var Dt=Object(j["r"])(te,{color:Object(j["l"])(vt),scale:Object(j["l"])(ur)});function Rt(e,t,r){var i={node:e};var n={};var a=t.getFill();if(a){n["color"]=a.getColor()}var o=t.getScale();if(o&&o!==1){n["scale"]=o}var s=r[r.length-1].node;var l=It[s.namespaceURI];var u=Object(j["p"])(n,l);Object(j["v"])(i,Dt,j["b"],u,r,l)}var Lt=Object(j["r"])(te,["color","width"]);var $t=Object(j["r"])(te,{color:Object(j["l"])(vt),width:Object(j["l"])(c["l"])});function Nt(e,t,r){var i={node:e};var n={color:t.getColor(),width:t.getWidth()};var a=r[r.length-1].node;var o=Lt[a.namespaceURI];var s=Object(j["p"])(n,o);Object(j["v"])(i,$t,j["b"],s,r,o)}var Ft={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"};var Gt=function e(t,r,i){if(t){var n=r[r.length-1].node;return Object(j["d"])(n.namespaceURI,Ft[t.getType()])}};var Ut=Object(j["q"])("Point");var Ht=Object(j["q"])("LineString");var Yt=Object(j["q"])("LinearRing");var Wt=Object(j["q"])("Polygon");var Vt=Object(j["r"])(te,{LineString:Object(j["l"])(tr),Point:Object(j["l"])(tr),Polygon:Object(j["l"])(ar),GeometryCollection:Object(j["l"])(zt)});function zt(e,t,r){var i={node:e};var n=t.getType();var a=void 0;var s=void 0;if(n==d["a"].GEOMETRY_COLLECTION){a=t.getGeometries();s=Gt}else if(n==d["a"].MULTI_POINT){a=t.getPoints();s=Ut}else if(n==d["a"].MULTI_LINE_STRING){a=t.getLineStrings();s=Ht}else if(n==d["a"].MULTI_POLYGON){a=t.getPolygons();s=Wt}else{Object(o["a"])(false,39)}Object(j["v"])(i,Vt,s,a,r)}var qt=Object(j["r"])(te,{LinearRing:Object(j["l"])(tr)});function Bt(e,t,r){var i={node:e};Object(j["v"])(i,qt,Yt,[t],r)}var Xt=Object(j["r"])(te,{ExtendedData:Object(j["l"])(Ot),MultiGeometry:Object(j["l"])(zt),LineString:Object(j["l"])(tr),LinearRing:Object(j["l"])(tr),Point:Object(j["l"])(tr),Polygon:Object(j["l"])(ar),Style:Object(j["l"])(hr),address:Object(j["l"])(c["n"]),description:Object(j["l"])(c["n"]),name:Object(j["l"])(c["n"]),open:Object(j["l"])(c["i"]),phoneNumber:Object(j["l"])(c["n"]),styleUrl:Object(j["l"])(c["n"]),visibility:Object(j["l"])(c["i"])});var Kt=Object(j["r"])(te,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]);var Zt=Object(j["q"])("ExtendedData");function Qt(e,t,r){var i={node:e};if(t.getId()){e.setAttribute("id",t.getId())}var n=t.getProperties();var a={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};a[t.getGeometryName()]=1;var o=Object.keys(n||{}).sort().filter(function(e){return!a[e]});if(o.length>0){var s=Object(j["p"])(n,o);var u={names:o,values:s};Object(j["v"])(i,Xt,Zt,[u],r)}var c=t.getStyleFunction();if(c){var f=c(t,0);if(f){var h=Array.isArray(f)?f[0]:f;if(this.writeStyles_){n["Style"]=h}var d=h.getText();if(d){n["name"]=d.getText()}}}var p=r[r.length-1].node;var v=Kt[p.namespaceURI];var g=Object(j["p"])(n,v);Object(j["v"])(i,Xt,j["b"],g,r,v);var m=r[0];var y=t.getGeometry();if(y){y=Object(l["b"])(y,true,m)}Object(j["v"])(i,Xt,Gt,[y],r)}var Jt=Object(j["r"])(te,["extrude","tessellate","altitudeMode","coordinates"]);var er=Object(j["r"])(te,{extrude:Object(j["l"])(c["i"]),tessellate:Object(j["l"])(c["i"]),altitudeMode:Object(j["l"])(c["n"]),coordinates:Object(j["l"])(gt)});function tr(e,t,r){var i=t.getFlatCoordinates();var n={node:e};n["layout"]=t.getLayout();n["stride"]=t.getStride();var a=t.getProperties();a.coordinates=i;var o=r[r.length-1].node;var s=Jt[o.namespaceURI];var l=Object(j["p"])(a,s);Object(j["v"])(n,er,j["b"],l,r,s)}var rr=Object(j["r"])(te,{outerBoundaryIs:Object(j["l"])(Bt),innerBoundaryIs:Object(j["l"])(Bt)});var ir=Object(j["q"])("innerBoundaryIs");var nr=Object(j["q"])("outerBoundaryIs");function ar(e,t,r){var i=t.getLinearRings();var n=i.shift();var a={node:e};Object(j["v"])(a,rr,ir,i,r);Object(j["v"])(a,rr,nr,[n],r)}var or=Object(j["r"])(te,{color:Object(j["l"])(vt)});var sr=Object(j["q"])("color");function lr(e,t,r){var i={node:e};Object(j["v"])(i,or,sr,[t.getColor()],r)}function ur(e,t){Object(c["l"])(e,Math.round(t*1e6)/1e6)}var cr=Object(j["r"])(te,["IconStyle","LabelStyle","LineStyle","PolyStyle"]);var fr=Object(j["r"])(te,{IconStyle:Object(j["l"])(kt),LabelStyle:Object(j["l"])(Rt),LineStyle:Object(j["l"])(Nt),PolyStyle:Object(j["l"])(lr)});function hr(e,t,r){var i={node:e};var n={};var a=t.getFill();var o=t.getStroke();var s=t.getImage();var l=t.getText();if(s instanceof C["a"]){n["IconStyle"]=s}if(l){n["LabelStyle"]=l}if(o){n["LineStyle"]=o}if(a){n["PolyStyle"]=a}var u=r[r.length-1].node;var c=cr[u.namespaceURI];var f=Object(j["p"])(n,c);Object(j["v"])(i,fr,j["b"],f,r,c)}function dr(e,t){e.setAttribute("x",t.x);e.setAttribute("y",t.y);e.setAttribute("xunits",t.xunits);e.setAttribute("yunits",t.yunits)}var pr=Object(j["r"])(te,["Document","Placemark"]);var vr=Object(j["r"])(te,{Document:Object(j["l"])(Ct),Placemark:Object(j["l"])(Qt)});J.prototype.writeFeatures;J.prototype.writeFeaturesNode=function(e,t){t=this.adaptOptions(t);var r=Object(j["d"])(te[4],"kml");var i="http://www.w3.org/2000/xmlns/";r.setAttributeNS(i,"xmlns:gx",ee[0]);r.setAttributeNS(i,"xmlns:xsi",j["c"]);r.setAttributeNS(j["c"],"xsi:schemaLocation",re);var n={node:r};var a={};if(e.length>1){a["Document"]=e}else if(e.length==1){a["Placemark"]=e[0]}var o=pr[r.namespaceURI];var s=Object(j["p"])(a,o);Object(j["v"])(n,vr,j["b"],s,[t],o,this);return r};t["a"]=J},function(e,t,r){"use strict";var i=r(3);var n=r(9);var a=r(342);var o=r(168);var s=r(11);var l=r(0);var u=function e(t){var r=t?t:{};this.featureNS_="http://mapserver.gis.umn.edu/mapserver";this.gmlFormat_=new a["a"];this.layers_=r.layers?r.layers:null;o["a"].call(this)};Object(i["d"])(u,o["a"]);var c="_feature";var f="_layer";u.prototype.getLayers=function(){return this.layers_};u.prototype.setLayers=function(e){this.layers_=e};u.prototype.readFeatures_=function(e,t){e.setAttribute("namespaceURI",this.featureNS_);var r=e.localName;var i=[];if(e.childNodes.length===0){return i}if(r=="msGMLOutput"){for(var a=0,o=e.childNodes.length;a<o;a++){var s=e.childNodes[a];if(s.nodeType!==Node.ELEMENT_NODE){continue}var u=t[0];var h=f;var d=s.localName.replace(h,"");if(this.layers_&&!Object(n["f"])(this.layers_,d)){continue}var p=d+c;u["featureType"]=p;u["featureNS"]=this.featureNS_;var v={};v[p]=Object(l["j"])(this.gmlFormat_.readFeatureElement,this.gmlFormat_);var g=Object(l["r"])([u["featureNS"],null],v);s.setAttribute("namespaceURI",this.featureNS_);var m=Object(l["u"])([],g,s,t,this.gmlFormat_);if(m){Object(n["c"])(i,m)}}}if(r=="FeatureCollection"){var y=Object(l["u"])([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,e,[{}],this.gmlFormat_);if(y){i=y}}return i};u.prototype.readFeatures;u.prototype.readFeaturesFromNode=function(e,t){var r={};if(t){Object(s["a"])(r,this.getReadOptions(e,t))}return this.readFeatures_(e,[r])};u.prototype.writeFeatureNode=function(e,t){};u.prototype.writeFeaturesNode=function(e,t){};u.prototype.writeGeometryNode=function(e,t){};t["a"]=u},function(e,t,r){"use strict";r.d(t,"a",function(){return i});function i(e,t,r,i){var n=e[t];var a=e[t+1];var o=0;for(var s=t+i;s<r;s+=i){var l=e[s];var u=e[s+1];o+=Math.sqrt((l-n)*(l-n)+(u-a)*(u-a));n=l;a=u}return o}function n(e,t,r,n){var a=i(e,t,r,n);var o=e[r-n]-e[t];var s=e[r-n+1]-e[t+1];a+=Math.sqrt(o*o+s*s);return a}},function(e,t,r){"use strict";t["a"]={IMAGE:"image",VECTOR:"vector"}},function(e,t,r){"use strict";r.d(t,"a",function(){return i});function i(e,t,r,i,n,a){var o=[e[t],e[t+1]];var s=[];var l=void 0;for(;t+i<r;t+=i){s[0]=e[t+i];s[1]=e[t+i+1];l=n.call(a,o,s);if(l){return l}o[0]=s[0];o[1]=s[1]}return false}},function(e,t,r){"use strict";r.d(t,"a",function(){return a});r.d(t,"b",function(){return o});var i=r(9);var n=r(204);function a(e,t,r,a,o,s,l){var u=void 0,c=void 0,f=void 0,h=void 0,d=void 0,p=void 0,v=void 0;var g=o[s+1];var m=[];for(var y=0,_=r.length;y<_;++y){var b=r[y];h=e[b-a];p=e[b-a+1];for(u=t;u<b;u+=a){d=e[u];v=e[u+1];if(g<=p&&v<=g||p<=g&&g<=v){f=(g-p)/(v-p)*(d-h)+h;m.push(f)}h=d;p=v}}var w=NaN;var S=-Infinity;m.sort(i["i"]);h=m[0];for(u=1,c=m.length;u<c;++u){d=m[u];var C=Math.abs(d-h);if(C>S){f=(h+d)/2;if(Object(n["c"])(e,t,r,a,f,g)){w=f;S=C}}h=d}if(isNaN(w)){w=o[s]}if(l){l.push(w,g,S);return l}else{return[w,g,S]}}function o(e,t,r,i,n){var o=[];for(var s=0,l=r.length;s<l;++s){var u=r[s];o=a(e,t,u,i,n,2*s,o);t=u[u.length-1]}return o}},function(e,t,r){"use strict";r.d(t,"a",function(){return l});var i=r(3);var n=r(9);var a=r(12);var o=r(347);var s=function e(t){this.matrixIds_=t.matrixIds;o["a"].call(this,{extent:t.extent,origin:t.origin,origins:t.origins,resolutions:t.resolutions,tileSize:t.tileSize,tileSizes:t.tileSizes,sizes:t.sizes})};Object(i["d"])(s,o["a"]);s.prototype.getMatrixId=function(e){return this.matrixIds_[e]};s.prototype.getMatrixIds=function(){return this.matrixIds_};t["b"]=s;function l(e,t,r){var i=[];var o=[];var l=[];var u=[];var c=[];var f=r!==undefined?r:[];var h="SupportedCRS";var d="TileMatrix";var p="Identifier";var v="ScaleDenominator";var g="TopLeftCorner";var m="TileWidth";var y="TileHeight";var _=e[h];var b=Object(a["g"])(_.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Object(a["g"])(_);var w=b.getMetersPerUnit();var S=b.getAxisOrientation().substr(0,2)=="ne";e[d].sort(function(e,t){return t[v]-e[v]});e[d].forEach(function(t){var r=void 0;if(f.length>0){r=Object(n["d"])(f,function(r){if(t[p]==r[d]){return true}if(t[p].indexOf(":")===-1){return e[p]+":"+t[p]===r[d]}return false})}else{r=true}if(r){o.push(t[p]);var a=t[v]*28e-5/w;var s=t[m];var h=t[y];if(S){l.push([t[g][1],t[g][0]])}else{l.push(t[g])}i.push(a);u.push(s==h?s:[s,h]);c.push([t["MatrixWidth"],-t["MatrixHeight"]])}});return new s({extent:t,origins:l,resolutions:i,matrixIds:o,tileSizes:u,sizes:c})}},function(e,t,r){"use strict";var i=r(3);var n=r(357);var a=r(151);var o=function e(t){n["a"].call(this,t)};Object(i["d"])(o,n["a"]);o.prototype.expireCache=function(e){while(this.canExpireCache()){var t=this.peekLast();var r=t.tileCoord[0].toString();if(r in e&&e[r].contains(t.tileCoord)){break}else{this.pop().dispose()}}};o.prototype.pruneExceptNewestZ=function(){if(this.getCount()===0){return}var e=this.peekFirstKey();var t=Object(a["b"])(e);var r=t[0];this.forEach(function(e){if(e.tileCoord[0]!==r){this.remove(Object(a["c"])(e.tileCoord));e.dispose()}},this)};t["a"]=o},function(e,t,r){"use strict";var i=r(5);var n=r(22);var a=r(12);var o=10;var s=.25;var l=function e(t,r,n,s,l){this.sourceProj_=t;this.targetProj_=r;var u={};var c=Object(a["i"])(this.targetProj_,this.sourceProj_);this.transformInv_=function(e){var t=e[0]+"/"+e[1];if(!u[t]){u[t]=c(e)}return u[t]};this.maxSourceExtent_=s;this.errorThresholdSquared_=l*l;this.triangles_=[];this.wrapsXInSource_=false;this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&Object(i["E"])(s)==Object(i["E"])(this.sourceProj_.getExtent());this.sourceWorldWidth_=this.sourceProj_.getExtent()?Object(i["E"])(this.sourceProj_.getExtent()):null;this.targetWorldWidth_=this.targetProj_.getExtent()?Object(i["E"])(this.targetProj_.getExtent()):null;var f=Object(i["C"])(n);var h=Object(i["D"])(n);var d=Object(i["w"])(n);var p=Object(i["v"])(n);var v=this.transformInv_(f);var g=this.transformInv_(h);var m=this.transformInv_(d);var y=this.transformInv_(p);this.addQuad_(f,h,d,p,v,g,m,y,o);if(this.wrapsXInSource_){var _=Infinity;this.triangles_.forEach(function(e,t,r){_=Math.min(_,e.source[0][0],e.source[1][0],e.source[2][0])});this.triangles_.forEach(function(e){if(Math.max(e.source[0][0],e.source[1][0],e.source[2][0])-_>this.sourceWorldWidth_/2){var t=[[e.source[0][0],e.source[0][1]],[e.source[1][0],e.source[1][1]],[e.source[2][0],e.source[2][1]]];if(t[0][0]-_>this.sourceWorldWidth_/2){t[0][0]-=this.sourceWorldWidth_}if(t[1][0]-_>this.sourceWorldWidth_/2){t[1][0]-=this.sourceWorldWidth_}if(t[2][0]-_>this.sourceWorldWidth_/2){t[2][0]-=this.sourceWorldWidth_}var r=Math.min(t[0][0],t[1][0],t[2][0]);var i=Math.max(t[0][0],t[1][0],t[2][0]);if(i-r<this.sourceWorldWidth_/2){e.source=t}}}.bind(this))}u={}};l.prototype.addTriangle_=function(e,t,r,i,n,a){this.triangles_.push({source:[i,n,a],target:[e,t,r]})};l.prototype.addQuad_=function(e,t,r,a,o,l,u,c,f){var h=Object(i["b"])([o,l,u,c]);var d=this.sourceWorldWidth_?Object(i["E"])(h)/this.sourceWorldWidth_:null;var p=this.sourceWorldWidth_;var v=this.sourceProj_.canWrapX()&&d>.5&&d<1;var g=false;if(f>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var m=Object(i["b"])([e,t,r,a]);var y=Object(i["E"])(m)/this.targetWorldWidth_;g|=y>s}if(!v&&this.sourceProj_.isGlobal()&&d){g|=d>s}}if(!g&&this.maxSourceExtent_){if(!Object(i["F"])(h,this.maxSourceExtent_)){return}}if(!g){if(!isFinite(o[0])||!isFinite(o[1])||!isFinite(l[0])||!isFinite(l[1])||!isFinite(u[0])||!isFinite(u[1])||!isFinite(c[0])||!isFinite(c[1])){if(f>0){g=true}else{return}}}if(f>0){if(!g){var _=[(e[0]+r[0])/2,(e[1]+r[1])/2];var b=this.transformInv_(_);var w=void 0;if(v){var S=(Object(n["d"])(o[0],p)+Object(n["d"])(u[0],p))/2;w=S-Object(n["d"])(b[0],p)}else{w=(o[0]+u[0])/2-b[0]}var C=(o[1]+u[1])/2-b[1];var x=w*w+C*C;g=x>this.errorThresholdSquared_}if(g){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){var O=[(t[0]+r[0])/2,(t[1]+r[1])/2];var T=this.transformInv_(O);var E=[(a[0]+e[0])/2,(a[1]+e[1])/2];var M=this.transformInv_(E);this.addQuad_(e,t,O,E,o,l,T,M,f-1);this.addQuad_(E,O,r,a,M,T,u,c,f-1)}else{var j=[(e[0]+t[0])/2,(e[1]+t[1])/2];var A=this.transformInv_(j);var P=[(r[0]+a[0])/2,(r[1]+a[1])/2];var k=this.transformInv_(P);this.addQuad_(e,j,P,a,o,A,k,c,f-1);this.addQuad_(j,t,r,P,A,l,u,k,f-1)}return}}if(v){if(!this.canWrapXInSource_){return}this.wrapsXInSource_=true}this.addTriangle_(e,r,a,o,u,c);this.addTriangle_(e,t,r,o,l,u)};l.prototype.calculateSourceExtent=function(){var e=Object(i["j"])();this.triangles_.forEach(function(t,r,n){var a=t.source;Object(i["r"])(e,a[0]);Object(i["r"])(e,a[1]);Object(i["r"])(e,a[2])});return e};l.prototype.getTriangles=function(){return this.triangles_};t["a"]=l},function(e,t,r){"use strict";var i=r(3);var n=function e(t){var r=i["b"]?i["b"].split("-")[0]:"latest";this.message="Assertion failed. See https://openlayers.org/en/"+r+"/doc/errors/#"+t+" for details.";this.code=t;this.name="AssertionError"};Object(i["d"])(n,Error);t["a"]=n},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){var i,n,a;
/*!
 * jQuery UI Unique ID 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/*!
 * jQuery UI Unique ID 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(o){if(true){!(n=[r(24),r(103)],i=o,a=typeof i==="function"?i.apply(t,n):i,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.fn.extend({uniqueId:function(){var e=0;return function(){return this.each(function(){if(!this.id){this.id="ui-id-"+ ++e}})}}(),removeUniqueId:function(){return this.each(function(){if(/^ui-id-\d+$/.test(this.id)){e(this).removeAttr("id")}})}})})},function(e,t,r){var i,n,a;
/*!
 * jQuery UI Position 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */
/*!
 * jQuery UI Position 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */
(function(o){if(true){!(n=[r(24),r(103)],i=o,a=typeof i==="function"?i.apply(t,n):i,a!==undefined&&(e.exports=a))}else{}})(function(e){(function(){var t,r=Math.max,i=Math.abs,n=/left|center|right/,a=/top|center|bottom/,o=/[\+\-]\d+(\.[\d]+)?%?/,s=/^\w+/,l=/%$/,u=e.fn.position;function c(e,t,r){return[parseFloat(e[0])*(l.test(e[0])?t/100:1),parseFloat(e[1])*(l.test(e[1])?r/100:1)]}function f(t,r){return parseInt(e.css(t,r),10)||0}function h(t){var r=t[0];if(r.nodeType===9){return{width:t.width(),height:t.height(),offset:{top:0,left:0}}}if(e.isWindow(r)){return{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}}if(r.preventDefault){return{width:0,height:0,offset:{top:r.pageY,left:r.pageX}}}return{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.position={scrollbarWidth:function(){if(t!==undefined){return t}var r,i,n=e("<div "+"style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'>"+"<div style='height:100px;width:auto;'></div></div>"),a=n.children()[0];e("body").append(n);r=a.offsetWidth;n.css("overflow","scroll");i=a.offsetWidth;if(r===i){i=n[0].clientWidth}n.remove();return t=r-i},getScrollInfo:function(t){var r=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),i=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),n=r==="scroll"||r==="auto"&&t.width<t.element[0].scrollWidth,a=i==="scroll"||i==="auto"&&t.height<t.element[0].scrollHeight;return{width:a?e.position.scrollbarWidth():0,height:n?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var r=e(t||window),i=e.isWindow(r[0]),n=!!r[0]&&r[0].nodeType===9,a=!i&&!n;return{element:r,isWindow:i,isDocument:n,offset:a?e(t).offset():{left:0,top:0},scrollLeft:r.scrollLeft(),scrollTop:r.scrollTop(),width:r.outerWidth(),height:r.outerHeight()}}};e.fn.position=function(t){if(!t||!t.of){return u.apply(this,arguments)}t=e.extend({},t);var l,d,p,v,g,m,y=e(t.of),_=e.position.getWithinInfo(t.within),b=e.position.getScrollInfo(_),w=(t.collision||"flip").split(" "),S={};m=h(y);if(y[0].preventDefault){t.at="left top"}d=m.width;p=m.height;v=m.offset;g=e.extend({},v);e.each(["my","at"],function(){var e=(t[this]||"").split(" "),r,i;if(e.length===1){e=n.test(e[0])?e.concat(["center"]):a.test(e[0])?["center"].concat(e):["center","center"]}e[0]=n.test(e[0])?e[0]:"center";e[1]=a.test(e[1])?e[1]:"center";r=o.exec(e[0]);i=o.exec(e[1]);S[this]=[r?r[0]:0,i?i[0]:0];t[this]=[s.exec(e[0])[0],s.exec(e[1])[0]]});if(w.length===1){w[1]=w[0]}if(t.at[0]==="right"){g.left+=d}else if(t.at[0]==="center"){g.left+=d/2}if(t.at[1]==="bottom"){g.top+=p}else if(t.at[1]==="center"){g.top+=p/2}l=c(S.at,d,p);g.left+=l[0];g.top+=l[1];return this.each(function(){var n,a,o=e(this),s=o.outerWidth(),u=o.outerHeight(),h=f(this,"marginLeft"),m=f(this,"marginTop"),C=s+h+f(this,"marginRight")+b.width,x=u+m+f(this,"marginBottom")+b.height,O=e.extend({},g),T=c(S.my,o.outerWidth(),o.outerHeight());if(t.my[0]==="right"){O.left-=s}else if(t.my[0]==="center"){O.left-=s/2}if(t.my[1]==="bottom"){O.top-=u}else if(t.my[1]==="center"){O.top-=u/2}O.left+=T[0];O.top+=T[1];n={marginLeft:h,marginTop:m};e.each(["left","top"],function(r,i){if(e.ui.position[w[r]]){e.ui.position[w[r]][i](O,{targetWidth:d,targetHeight:p,elemWidth:s,elemHeight:u,collisionPosition:n,collisionWidth:C,collisionHeight:x,offset:[l[0]+T[0],l[1]+T[1]],my:t.my,at:t.at,within:_,elem:o})}});if(t.using){a=function(e){var n=v.left-O.left,a=n+d-s,l=v.top-O.top,c=l+p-u,f={target:{element:y,left:v.left,top:v.top,width:d,height:p},element:{element:o,left:O.left,top:O.top,width:s,height:u},horizontal:a<0?"left":n>0?"right":"center",vertical:c<0?"top":l>0?"bottom":"middle"};if(d<s&&i(n+a)<d){f.horizontal="center"}if(p<u&&i(l+c)<p){f.vertical="middle"}if(r(i(n),i(a))>r(i(l),i(c))){f.important="horizontal"}else{f.important="vertical"}t.using.call(this,e,f)}}o.offset(e.extend(O,{using:a}))})};e.ui.position={fit:{left:function(e,t){var i=t.within,n=i.isWindow?i.scrollLeft:i.offset.left,a=i.width,o=e.left-t.collisionPosition.marginLeft,s=n-o,l=o+t.collisionWidth-a-n,u;if(t.collisionWidth>a){if(s>0&&l<=0){u=e.left+s+t.collisionWidth-a-n;e.left+=s-u}else if(l>0&&s<=0){e.left=n}else{if(s>l){e.left=n+a-t.collisionWidth}else{e.left=n}}}else if(s>0){e.left+=s}else if(l>0){e.left-=l}else{e.left=r(e.left-o,e.left)}},top:function(e,t){var i=t.within,n=i.isWindow?i.scrollTop:i.offset.top,a=t.within.height,o=e.top-t.collisionPosition.marginTop,s=n-o,l=o+t.collisionHeight-a-n,u;if(t.collisionHeight>a){if(s>0&&l<=0){u=e.top+s+t.collisionHeight-a-n;e.top+=s-u}else if(l>0&&s<=0){e.top=n}else{if(s>l){e.top=n+a-t.collisionHeight}else{e.top=n}}}else if(s>0){e.top+=s}else if(l>0){e.top-=l}else{e.top=r(e.top-o,e.top)}}},flip:{left:function(e,t){var r=t.within,n=r.offset.left+r.scrollLeft,a=r.width,o=r.isWindow?r.scrollLeft:r.offset.left,s=e.left-t.collisionPosition.marginLeft,l=s-o,u=s+t.collisionWidth-a-o,c=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,f=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],d,p;if(l<0){d=e.left+c+f+h+t.collisionWidth-a-n;if(d<0||d<i(l)){e.left+=c+f+h}}else if(u>0){p=e.left-t.collisionPosition.marginLeft+c+f+h-o;if(p>0||i(p)<u){e.left+=c+f+h}}},top:function(e,t){var r=t.within,n=r.offset.top+r.scrollTop,a=r.height,o=r.isWindow?r.scrollTop:r.offset.top,s=e.top-t.collisionPosition.marginTop,l=s-o,u=s+t.collisionHeight-a-o,c=t.my[1]==="top",f=c?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,d=-2*t.offset[1],p,v;if(l<0){v=e.top+f+h+d+t.collisionHeight-a-n;if(v<0||v<i(l)){e.top+=f+h+d}}else if(u>0){p=e.top-t.collisionPosition.marginTop+f+h+d-o;if(p>0||i(p)<u){e.top+=f+h+d}}}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments);e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments);e.ui.position.fit.top.apply(this,arguments)}}}})();return e.ui.position})},,,function(e,t){e.exports='<div class=gmf-displayquerywindow ng-class="{\'desktop\': ctrl.desktop, \'mobile\': !ctrl.desktop}" ng-show=ctrl.open ngeo-swipe-up="ctrl.collapsed = false" ngeo-swipe-down="ctrl.collapsed = true" ngeo-swipe-disable-mouse ng-swipe-disable-mouse ng-swipe-left=ctrl.next() ng-swipe-right=ctrl.previous()> <button class=collapse-button type=button ng-show=::!ctrl.desktop ng-click="ctrl.collapsed = !ctrl.collapsed" ng-class="[ctrl.collapsed ? \'collapse-button-up\' : \'collapse-button-down\']"> </button> <div class=windowcontainer> <button type=button class="btn fa-close close" ng-click=ctrl.close()> </button> <div class=animation-container ng-class="[ctrl.collapsed ? \'\' : \'animation-container-detailed\', ctrl.isNext ? \'next\' : \'previous\']"> <div ng-animate-swap=ctrl.animate class="slide-animation gmf-animatable"> <div class=header> <p class=title>{{ctrl.source.label | translate}}</p> <p class=subtitle>{{ctrl.getFeatureValues()[ctrl.source.identifierAttributeField]}}</p> </div> <div class=details> <table> <tr ng-repeat="(key, value) in ctrl.getFeatureValues()" ng-if="value !== undefined"> <td class=details-key ng-bind-html="key | translate | ngeoTrustHtml"></td> <td class=details-value ng-bind-html="value | ngeoTrustHtml"></td> </tr> </table> </div> </div> </div> <div class=navigate> <div class=placeholder> <button type=button class="previous btn" ng-disabled=ctrl.isFirst() ng-show="ctrl.getResultLength() > 1" ng-click=ctrl.previous()> <span ng-show=::ctrl.desktop>{{\'Prev.\' | translate}}</span> </button> </div> <div class=results> <span ng-show=::!ctrl.desktop>{{\'Result\' | translate}}</span> <span>{{ctrl.currentResult + 1}}</span> <span>/</span> <span>{{ctrl.getResultLength()}}</span> <div ng-show=::ctrl.desktop class=dropup> <button type=button class="btn btn-default dropdown-toggle" data-toggle=dropdown aria-expanded=false> <span class="fa fa-filter"></span> <span class="fa fa-caret-up"></span> </button> <ul class="dropdown-menu dropdown-menu-right" role=menu> <li> <a href=# ng-click=ctrl.setSelectedSource(null)> <i class="fa fa-fw" ng-class="{\'fa-check\': ctrl.selectedSource === null}"> </i> <span>{{\'All layers\' | translate}} ({{ctrl.ngeoQueryResult.total}})</span> </a> </li> <li role=separator class=divider> </li> <li ng-repeat-start="source in ctrl.ngeoQueryResult.sources | filter: ctrl.sourcesFilter" ng-repeat-end ng-class="{\'disabled\': source.features.length <= 0}"> <a href=# ng-click=ctrl.setSelectedSource(source)> <i class="fa fa-fw" ng-class="{\'fa-check\': ctrl.selectedSource === source}"> </i> <span>{{source.label | translate}} ({{source.features.length}})</span> </a> </li> </ul> </div> </div> <div class=placeholder> <button type=button class="next btn" ng-disabled=ctrl.isLast() ng-show="ctrl.getResultLength() > 1" ng-click=ctrl.next()> <span ng-show=::ctrl.desktop>{{\'Next\' | translate}}</span> </button> </div> </div> </div> </div> '},function(e,t){
/**
 * @license AngularJS v1.7.0
 * (c) 2010-2018 Google, Inc. http://angularjs.org
 * License: MIT
 */
(function(e,t){"use strict";var r=t.module("ngTouch",[]);r.info({angularVersion:"1.7.0"});function i(e){return t.$$lowercase(e.nodeName||e[0]&&e[0].nodeName)}r.factory("$swipe",[function(){var e=10;var r={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup",cancel:"pointercancel"}};function i(e){var t=e.originalEvent||e;var r=t.touches&&t.touches.length?t.touches:[t];var i=t.changedTouches&&t.changedTouches[0]||r[0];return{x:i.clientX,y:i.clientY}}function n(e,i){var n=[];t.forEach(e,function(e){var t=r[e][i];if(t){n.push(t)}});return n.join(" ")}return{bind:function(t,r,a){var o,s;var l;var u;var c=false;a=a||["mouse","touch","pointer"];t.on(n(a,"start"),function(e){l=i(e);c=true;o=0;s=0;u=l;if(r["start"]){r["start"](l,e)}});var f=n(a,"cancel");if(f){t.on(f,function(e){c=false;if(r["cancel"]){r["cancel"](e)}})}t.on(n(a,"move"),function(t){if(!c)return;if(!l)return;var n=i(t);o+=Math.abs(n.x-u.x);s+=Math.abs(n.y-u.y);u=n;if(o<e&&s<e){return}if(s>o){c=false;if(r["cancel"]){r["cancel"](t)}return}else{t.preventDefault();if(r["move"]){r["move"](n,t)}}});t.on(n(a,"end"),function(e){if(!c)return;c=false;if(r["end"]){r["end"](i(e),e)}})}}}]);function n(e,i,n){r.directive(e,["$parse","$swipe",function(r,a){var o=75;var s=.3;var l=30;return function(u,c,f){var h=r(f[e]);var d,p;function v(e){if(!d)return false;var t=Math.abs(e.y-d.y);var r=(e.x-d.x)*i;return p&&t<o&&r>0&&r>l&&t/r<s}var g=["touch"];if(!t.isDefined(f["ngSwipeDisableMouse"])){g.push("mouse")}a.bind(c,{start:function(e,t){d=e;p=true},cancel:function(e){p=false},end:function(e,t){if(v(e)){u.$apply(function(){c.triggerHandler(n);h(u,{$event:t})})}}},g)}}])}n("ngSwipeLeft",-1,"swipeleft");n("ngSwipeRight",1,"swiperight")})(window,window.angular)},function(e,t,r){r(451);e.exports="ngTouch"},function(e,t){
/**
 * @license AngularJS v1.7.0
 * (c) 2010-2018 Google, Inc. http://angularjs.org
 * License: MIT
 */
(function(e,t){"use strict";var r=1;var i=8;var n="-add";var a="-remove";var o="ng-";var s="-active";var l="-prepare";var u="ng-animate";var c="$$ngAnimateChildren";var f="",h,d,p,v;if(e.ontransitionend===undefined&&e.onwebkittransitionend!==undefined){f="-webkit-";h="WebkitTransition";d="webkitTransitionEnd transitionend"}else{h="transition";d="transitionend"}if(e.onanimationend===undefined&&e.onwebkitanimationend!==undefined){f="-webkit-";p="WebkitAnimation";v="webkitAnimationEnd animationend"}else{p="animation";v="animationend"}var g="Duration";var m="Property";var y="Delay";var _="TimingFunction";var b="IterationCount";var w="PlayState";var S=9999;var C=p+y;var x=p+g;var O=h+y;var T=h+g;var E=t.$$minErr("ng");function M(e,t,r){if(!e){throw E("areq","Argument '{0}' is {1}",t||"?",r||"required")}return e}function j(e,t){if(!e&&!t)return"";if(!e)return t;if(!t)return e;if(Oe(e))e=e.join(" ");if(Oe(t))t=t.join(" ");return e+" "+t}function A(e){var t={};if(e&&(e.to||e.from)){t.to=e.to;t.from=e.from}return t}function P(e,t,r){var i="";e=Oe(e)?e:e&&Ae(e)&&e.length?e.split(/\s+/):[];xe(e,function(e,n){if(e&&e.length>0){i+=n>0?" ":"";i+=r?t+e:e+t}});return i}function k(e,t){var r=e.indexOf(t);if(t>=0){e.splice(r,1)}}function I(e){if(e instanceof ke){switch(e.length){case 0:return e;case 1:if(e[0].nodeType===r){return e}break;default:return ke(D(e))}}if(e.nodeType===r){return ke(e)}}function D(e){if(!e[0])return e;for(var t=0;t<e.length;t++){var i=e[t];if(i.nodeType===r){return i}}}function R(e,t,r){xe(t,function(t){e.addClass(t,r)})}function L(e,t,r){xe(t,function(t){e.removeClass(t,r)})}function $(e){return function(t,r){if(r.addClass){R(e,t,r.addClass);r.addClass=null}if(r.removeClass){L(e,t,r.removeClass);r.removeClass=null}}}function N(e){e=e||{};if(!e.$$prepared){var t=e.domOperation||Ie;e.domOperation=function(){e.$$domOperationFired=true;t();t=Ie};e.$$prepared=true}return e}function F(e,t){G(e,t);U(e,t)}function G(e,t){if(t.from){e.css(t.from);t.from=null}}function U(e,t){if(t.to){e.css(t.to);t.to=null}}function H(e,t,r){var i=t.options||{};var n=r.options||{};var a=(i.addClass||"")+" "+(n.addClass||"");var o=(i.removeClass||"")+" "+(n.removeClass||"");var s=Y(e.attr("class"),a,o);if(n.preparationClasses){i.preparationClasses=K(n.preparationClasses,i.preparationClasses);delete n.preparationClasses}var l=i.domOperation!==Ie?i.domOperation:null;Ce(i,n);if(l){i.domOperation=l}if(s.addClass){i.addClass=s.addClass}else{i.addClass=null}if(s.removeClass){i.removeClass=s.removeClass}else{i.removeClass=null}t.addClass=i.addClass;t.removeClass=i.removeClass;return i}function Y(e,t,r){var i=1;var o=-1;var s={};e=u(e);t=u(t);xe(t,function(e,t){s[t]=i});r=u(r);xe(r,function(e,t){s[t]=s[t]===i?null:o});var l={addClass:"",removeClass:""};xe(s,function(t,r){var s,u;if(t===i){s="addClass";u=!e[r]||e[r+a]}else if(t===o){s="removeClass";u=e[r]||e[r+n]}if(u){if(l[s].length){l[s]+=" "}l[s]+=r}});function u(e){if(Ae(e)){e=e.split(" ")}var t={};xe(e,function(e){if(e.length){t[e]=true}});return t}return l}function W(e){return e instanceof ke?e[0]:e}function V(e,t,r){var i="";if(t){i=P(t,o,true)}if(r.addClass){i=K(i,P(r.addClass,n))}if(r.removeClass){i=K(i,P(r.removeClass,a))}if(i.length){r.preparationClasses=i;e.addClass(i)}}function z(e,t){if(t.preparationClasses){e.removeClass(t.preparationClasses);t.preparationClasses=null}if(t.activeClasses){e.removeClass(t.activeClasses);t.activeClasses=null}}function q(e,t){var r=t?"-"+t+"s":"";X(e,[O,r]);return[O,r]}function B(e,t){var r=t?"paused":"";var i=p+w;X(e,[i,r]);return[i,r]}function X(e,t){var r=t[0];var i=t[1];e.style[r]=i}function K(e,t){if(!e)return t;if(!t)return e;return e+" "+t}var Z=["$$rAF",function(e){var t,r;function i(e){t=t.concat(e);n()}t=i.queue=[];i.waitUntilQuiet=function(t){if(r)r();r=e(function(){r=null;t();n()})};return i;function n(){if(!t.length)return;var i=t.shift();for(var a=0;a<i.length;a++){i[a]()}if(!r){e(function(){if(!r)n()})}}}];var Q=["$interpolate",function(e){return{link:function(t,r,i){var n=i.ngAnimateChildren;if(Ae(n)&&n.length===0){r.data(c,true)}else{a(e(n)(t));i.$observe("ngAnimateChildren",a)}function a(e){e=e==="on"||e==="true";r.data(c,e)}}}}];var J="$$animateCss";var ee=1e3;var te=3;var re=1.5;var ie={transitionDuration:T,transitionDelay:O,transitionProperty:h+m,animationDuration:x,animationDelay:C,animationIterationCount:p+b};var ne={transitionDuration:T,transitionDelay:O,animationDuration:x,animationDelay:C};function ae(e){return[x,e+"s"]}function oe(e,t){var r=t?C:O;return[r,e+"s"]}function se(e,t,r){var i=Object.create(null);var n=e.getComputedStyle(t)||{};xe(r,function(e,t){var r=n[e];if(r){var a=r.charAt(0);if(a==="-"||a==="+"||a>=0){r=le(r)}if(r===0){r=null}i[t]=r}});return i}function le(e){var t=0;var r=e.split(/\s*,\s*/);xe(r,function(e){if(e.charAt(e.length-1)==="s"){e=e.substring(0,e.length-1)}e=parseFloat(e)||0;t=t?Math.max(e,t):e});return t}function ue(e){return e===0||e!=null}function ce(e,t){var r=h;var i=e+"s";if(t){r+=g}else{i+=" linear all"}return[r,i]}function fe(){var e=Object.create(null);return{flush:function(){e=Object.create(null)},count:function(t){var r=e[t];return r?r.total:0},get:function(t){var r=e[t];return r&&r.value},put:function(t,r){if(!e[t]){e[t]={total:1,value:r}}else{e[t].total++}}}}function he(e,t,r){xe(r,function(r){e[r]=Te(e[r])?e[r]:t.style.getPropertyValue(r)})}var de=["$animateProvider",function(e){var t=fe();var r=fe();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function(e,i,l,u,c,f,g,y){var b=$(i);var w=0;function C(e,t){var r="$$ngAnimateParentKey";var i=e.parentNode;var n=i[r]||(i[r]=++w);return n+"-"+e.getAttribute("class")+"-"+t}function x(r,i,n,a){var o=t.get(n);if(!o){o=se(e,r,a);if(o.animationIterationCount==="infinite"){o.animationIterationCount=1}}t.put(n,o);return o}function O(n,a,o,s){var l;if(t.count(o)>0){l=r.get(o);if(!l){var u=P(a,"-stagger");i.addClass(n,u);l=se(e,n,s);l.animationDuration=Math.max(l.animationDuration,0);l.transitionDuration=Math.max(l.transitionDuration,0);i.removeClass(n,u);r.put(o,l)}}return l||{}}var T=[];function E(e){T.push(e);g.waitUntilQuiet(function(){t.flush();r.flush();var e=c();for(var i=0;i<T.length;i++){T[i](e)}T.length=0})}function M(e,t,r){var i=x(e,t,r,ie);var n=i.animationDelay;var a=i.transitionDelay;i.maxDelay=n&&a?Math.max(n,a):n||a;i.maxDuration=Math.max(i.animationDuration*i.animationIterationCount,i.transitionDuration);return i}return function e(r,c){var g=c||{};if(!g.$$prepared){g=N(Se(g))}var w={};var x=W(r);if(!x||!x.parentNode||!y.enabled()){return Fe()}var T=[];var j=r.attr("class");var I=A(g);var D;var R;var L;var $;var H;var Y;var V;var z;var K;var Z;var Q=[];if(g.duration===0||!f.animations&&!f.transitions){return Fe()}var ie=g.event&&Oe(g.event)?g.event.join(" "):g.event;var se=ie&&g.structural;var le="";var fe="";if(se){le=P(ie,o,true)}else if(ie){le=ie}if(g.addClass){fe+=P(g.addClass,n)}if(g.removeClass){if(fe.length){fe+=" "}fe+=P(g.removeClass,a)}if(g.applyClassesEarly&&fe.length){b(r,g)}var de=[le,fe].join(" ").trim();var pe=j+" "+de;var ve=P(de,s);var ge=I.to&&Object.keys(I.to).length>0;var me=(g.keyframeStyle||"").length>0;if(!me&&!ge&&!de){return Fe()}var ye,_e;if(g.stagger>0){var be=parseFloat(g.stagger);_e={transitionDelay:be,animationDelay:be,transitionDuration:0,animationDuration:0}}else{ye=C(x,pe);_e=O(x,de,ye,ne)}if(!g.$$skipPreparationClasses){i.addClass(r,de)}var we;if(g.transitionStyle){var Ce=[h,g.transitionStyle];X(x,Ce);T.push(Ce)}if(g.duration>=0){we=x.style[h].length>0;var Te=ce(g.duration,we);X(x,Te);T.push(Te)}if(g.keyframeStyle){var Ee=[p,g.keyframeStyle];X(x,Ee);T.push(Ee)}var Me=_e?g.staggerIndex>=0?g.staggerIndex:t.count(ye):0;var je=Me===0;if(je&&!g.skipBlocking){q(x,S)}var Ae=M(x,pe,ye);var Pe=Ae.maxDelay;Y=Math.max(Pe,0);z=Ae.maxDuration;var ke={};ke.hasTransitions=Ae.transitionDuration>0;ke.hasAnimations=Ae.animationDuration>0;ke.hasTransitionAll=ke.hasTransitions&&Ae.transitionProperty==="all";ke.applyTransitionDuration=ge&&(ke.hasTransitions&&!ke.hasTransitionAll||ke.hasAnimations&&!ke.hasTransitions);ke.applyAnimationDuration=g.duration&&ke.hasAnimations;ke.applyTransitionDelay=ue(g.delay)&&(ke.applyTransitionDuration||ke.hasTransitions);ke.applyAnimationDelay=ue(g.delay)&&ke.hasAnimations;ke.recalculateTimingStyles=fe.length>0;if(ke.applyTransitionDuration||ke.applyAnimationDuration){z=g.duration?parseFloat(g.duration):z;if(ke.applyTransitionDuration){ke.hasTransitions=true;Ae.transitionDuration=z;we=x.style[h+m].length>0;T.push(ce(z,we))}if(ke.applyAnimationDuration){ke.hasAnimations=true;Ae.animationDuration=z;T.push(ae(z))}}if(z===0&&!ke.recalculateTimingStyles){return Fe()}if(g.delay!=null){var De;if(typeof g.delay!=="boolean"){De=parseFloat(g.delay);Y=Math.max(De,0)}if(ke.applyTransitionDelay){T.push(oe(De))}if(ke.applyAnimationDelay){T.push(oe(De,true))}}if(g.duration==null&&Ae.transitionDuration>0){ke.recalculateTimingStyles=ke.recalculateTimingStyles||je}V=Y*ee;K=z*ee;if(!g.skipBlocking){ke.blockTransition=Ae.transitionDuration>0;ke.blockKeyframeAnimation=Ae.animationDuration>0&&_e.animationDelay>0&&_e.animationDuration===0}if(g.from){if(g.cleanupStyles){he(w,x,Object.keys(g.from))}G(r,g)}if(ke.blockTransition||ke.blockKeyframeAnimation){Ne(z)}else if(!g.skipBlocking){q(x,false)}return{$$willAnimate:true,end:Re,start:function(){if(D)return;H={end:Re,cancel:Le,resume:null,pause:null};$=new l(H);E(Ue);return $}};function Re(){$e()}function Le(){$e(true)}function $e(e){if(D||L&&R)return;D=true;R=false;if(!g.$$skipPreparationClasses){i.removeClass(r,de)}i.removeClass(r,ve);B(x,false);q(x,false);xe(T,function(e){x.style[e[0]]=""});b(r,g);F(r,g);if(Object.keys(w).length){xe(w,function(e,t){if(e){x.style.setProperty(t,e)}else{x.style.removeProperty(t)}})}if(g.onDone){g.onDone()}if(Q&&Q.length){r.off(Q.join(" "),Ge)}var t=r.data(J);if(t){u.cancel(t[0].timer);r.removeData(J)}if($){$.complete(!e)}}function Ne(e){if(ke.blockTransition){q(x,e)}if(ke.blockKeyframeAnimation){B(x,!!e)}}function Fe(){$=new l({end:Re,cancel:Le});E(Ie);$e();return{$$willAnimate:false,start:function(){return $},end:Re}}function Ge(e){e.stopPropagation();var t=e.originalEvent||e;if(t.target!==x){return}var r=t.$manualTimeStamp||Date.now();var i=parseFloat(t.elapsedTime.toFixed(te));if(Math.max(r-Z,0)>=V&&i>=z){L=true;$e()}}function Ue(){if(D)return;if(!x.parentNode){$e();return}var e=function(e){if(!L){R=!e;if(Ae.animationDuration){var t=B(x,R);if(R){T.push(t)}else{k(T,t)}}}else if(R&&e){R=false;$e()}};var t=Me>0&&(Ae.transitionDuration&&_e.transitionDuration===0||Ae.animationDuration&&_e.animationDuration===0)&&Math.max(_e.animationDelay,_e.transitionDelay);if(t){u(n,Math.floor(t*Me*ee),false)}else{n()}H.resume=function(){e(true)};H.pause=function(){e(false)};function n(){if(D)return;Ne(false);xe(T,function(e){var t=e[0];var r=e[1];x.style[t]=r});b(r,g);i.addClass(r,ve);if(ke.recalculateTimingStyles){pe=x.getAttribute("class")+" "+de;ye=C(x,pe);Ae=M(x,pe,ye);Pe=Ae.maxDelay;Y=Math.max(Pe,0);z=Ae.maxDuration;if(z===0){$e();return}ke.hasTransitions=Ae.transitionDuration>0;ke.hasAnimations=Ae.animationDuration>0}if(ke.applyAnimationDelay){Pe=typeof g.delay!=="boolean"&&ue(g.delay)?parseFloat(g.delay):Pe;Y=Math.max(Pe,0);Ae.animationDelay=Pe;De=oe(Pe,true);T.push(De);x.style[De[0]]=De[1]}V=Y*ee;K=z*ee;if(g.easing){var e,t=g.easing;if(ke.hasTransitions){e=h+_;T.push([e,t]);x.style[e]=t}if(ke.hasAnimations){e=p+_;T.push([e,t]);x.style[e]=t}}if(Ae.transitionDuration){Q.push(d)}if(Ae.animationDuration){Q.push(v)}Z=Date.now();var n=V+re*K;var o=Z+n;var s=r.data(J)||[];var l=true;if(s.length){var c=s[0];l=o>c.expectedEndTime;if(l){u.cancel(c.timer)}else{s.push($e)}}if(l){var f=u(a,n,false);s[0]={timer:f,expectedEndTime:o};s.push($e);r.data(J,s)}if(Q.length){r.on(Q.join(" "),Ge)}if(g.to){if(g.cleanupStyles){he(w,x,Object.keys(g.to))}U(r,g)}}function a(){var e=r.data(J);if(e){for(var t=1;t<e.length;t++){e[t]()}r.removeData(J)}}}}}]}];var pe=["$$animationProvider",function(e){e.drivers.push("$$animateCssDriver");var t="ng-animate-shim";var r="ng-anchor";var i="ng-anchor-out";var n="ng-anchor-in";function a(e){return e.parentNode&&e.parentNode.nodeType===11}this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function(e,o,s,l,u,c,f){if(!u.animations&&!u.transitions)return Ie;var h=f[0].body;var d=W(l);var p=ke(a(d)||h.contains(d)?d:h);return function e(t){return t.from&&t.to?y(t.from,t.to,t.classes,t.anchors):_(t)};function v(e){return e.replace(/\bng-\S+\b/g,"")}function g(e,t){if(Ae(e))e=e.split(" ");if(Ae(t))t=t.split(" ");return e.filter(function(e){return t.indexOf(e)===-1}).join(" ")}function m(a,o,l){var u=ke(W(o).cloneNode(true));var c=v(b(u));o.addClass(t);l.addClass(t);u.addClass(r);p.append(u);var f,d=_();if(!d){f=w();if(!f){return S()}}var m=d||f;return{start:function(){var e;var t=m.start();t.done(function(){t=null;if(!f){f=w();if(f){t=f.start();t.done(function(){t=null;S();e.complete()});return t}}S();e.complete()});e=new s({end:r,cancel:r});return e;function r(){if(t){t.end()}}}};function y(e){var t={};var r=W(e).getBoundingClientRect();xe(["width","height","top","left"],function(e){var i=r[e];switch(e){case"top":i+=h.scrollTop;break;case"left":i+=h.scrollLeft;break}t[e]=Math.floor(i)+"px"});return t}function _(){var t=e(u,{addClass:i,delay:true,from:y(o)});return t.$$willAnimate?t:null}function b(e){return e.attr("class")||""}function w(){var t=v(b(l));var r=g(t,c);var a=g(c,t);var o=e(u,{to:y(l),addClass:n+" "+r,removeClass:i+" "+a,delay:true});return o.$$willAnimate?o:null}function S(){u.remove();o.removeClass(t);l.removeClass(t)}}function y(e,t,r,i){var n=_(e,Ie);var a=_(t,Ie);var o=[];xe(i,function(e){var t=e["out"];var i=e["in"];var n=m(r,t,i);if(n){o.push(n)}});if(!n&&!a&&o.length===0)return;return{start:function(){var e=[];if(n){e.push(n.start())}if(a){e.push(a.start())}xe(o,function(t){e.push(t.start())});var t=new s({end:r,cancel:r});s.all(e,function(e){t.complete(e)});return t;function r(){xe(e,function(e){e.end()})}}}}function _(t){var r=t.element;var i=t.options||{};if(t.structural){i.event=t.event;i.structural=true;i.applyClassesEarly=true;if(t.event==="leave"){i.onDone=i.domOperation}}if(i.preparationClasses){i.event=K(i.event,i.preparationClasses)}var n=e(r,i);return n.$$willAnimate?n:null}}]}];var ve=["$animateProvider",function(e){this.$get=["$injector","$$AnimateRunner","$$jqLite",function(t,r,i){var n=$(i);return function(e,t,i,o){var s=false;if(arguments.length===3&&je(i)){o=i;i=null}o=N(o);if(!i){i=e.attr("class")||"";if(o.addClass){i+=" "+o.addClass}if(o.removeClass){i+=" "+o.removeClass}}var l=o.addClass;var u=o.removeClass;var c=a(i);var f,h;if(c.length){var d,p;if(t==="leave"){p="leave";d="afterLeave"}else{p="before"+t.charAt(0).toUpperCase()+t.substr(1);d=t}if(t!=="enter"&&t!=="move"){f=b(e,t,o,c,p)}h=b(e,t,o,c,d)}if(!f&&!h)return;function v(){o.domOperation();n(e,o)}function g(){s=true;v();F(e,o)}var m;return{$$willAnimate:true,end:function(){if(m){m.end()}else{g();m=new r;m.complete(true)}return m},start:function(){if(m){return m}m=new r;var e;var t=[];if(f){t.push(function(t){e=f(t)})}if(t.length){t.push(function(e){v();e(true)})}else{v()}if(h){t.push(function(t){e=h(t)})}m.setHost({end:function(){n()},cancel:function(){n(true)}});r.chain(t,i);return m;function i(e){g(e);m.complete(e)}function n(t){if(!s){(e||Ie)(t);i(t)}}}};function y(e,t,i,n,a){var o;switch(i){case"animate":o=[t,n.from,n.to,a];break;case"setClass":o=[t,l,u,a];break;case"addClass":o=[t,l,a];break;case"removeClass":o=[t,u,a];break;default:o=[t,a];break}o.push(n);var s=e.apply(e,o);if(s){if(Me(s.start)){s=s.start()}if(s instanceof r){s.done(a)}else if(Me(s)){return s}}return Ie}function _(e,t,i,n,a){var o=[];xe(n,function(n){var s=n[a];if(!s)return;o.push(function(){var n;var a;var o=false;var l=function(e){if(!o){o=true;(a||Ie)(e);n.complete(!e)}};n=new r({end:function(){l()},cancel:function(){l(true)}});a=y(s,e,t,i,function(e){var t=e===false;l(t)});return n})});return o}function b(e,t,i,n,a){var o=_(e,t,i,n,a);if(o.length===0){var s,l;if(a==="beforeSetClass"){s=_(e,"removeClass",i,n,"beforeRemoveClass");l=_(e,"addClass",i,n,"beforeAddClass")}else if(a==="setClass"){s=_(e,"removeClass",i,n,"removeClass");l=_(e,"addClass",i,n,"addClass")}if(s){o=o.concat(s)}if(l){o=o.concat(l)}}if(o.length===0)return;return function e(t){var i=[];if(o.length){xe(o,function(e){i.push(e())})}if(i.length){r.all(i,t)}else{t()}return function e(t){xe(i,function(e){if(t){e.cancel()}else{e.end()}})}}}};function a(r){r=Oe(r)?r:r.split(" ");var i=[],n={};for(var a=0;a<r.length;a++){var o=r[a],s=e.$$registeredAnimations[o];if(s&&!n[o]){i.push(t.get(s));n[o]=true}}return i}}]}];var ge=["$$animationProvider",function(e){e.drivers.push("$$animateJsDriver");this.$get=["$$animateJs","$$AnimateRunner",function(e,t){return function e(i){if(i.from&&i.to){var n=r(i.from);var a=r(i.to);if(!n&&!a)return;return{start:function(){var e=[];if(n){e.push(n.start())}if(a){e.push(a.start())}t.all(e,o);var r=new t({end:i(),cancel:i()});return r;function i(){return function(){xe(e,function(e){e.end()})}}function o(e){r.complete(e)}}}}else{return r(i)}};function r(t){var r=t.element;var i=t.event;var n=t.options;var a=t.classes;return e(r,i,a,n)}}]}];var me="data-ng-animate";var ye="$ngAnimatePin";var _e=["$animateProvider",function(t){var i=1;var n=2;var a=" ";var o=this.rules={skip:[],cancel:[],join:[]};function s(e){if(!e){return null}var t=e.split(a);var r=Object.create(null);xe(t,function(e){r[e]=true});return r}function l(e,t){if(e&&t){var r=s(t);return e.split(a).some(function(e){return r[e]})}}function u(e,t,r){return o[e].some(function(e){return e(t,r)})}function f(e,t){var r=(e.addClass||"").length>0;var i=(e.removeClass||"").length>0;return t?r&&i:r||i}o.join.push(function(e,t){return!e.structural&&f(e)});o.skip.push(function(e,t){return!e.structural&&!f(e)});o.skip.push(function(e,t){return t.event==="leave"&&e.structural});o.skip.push(function(e,t){return t.structural&&t.state===n&&!e.structural});o.cancel.push(function(e,t){return t.structural&&e.structural});o.cancel.push(function(e,t){return t.state===n&&e.structural});o.cancel.push(function(e,t){if(t.structural)return false;var r=e.addClass;var i=e.removeClass;var n=t.addClass;var a=t.removeClass;if(Pe(r)&&Pe(i)||Pe(n)&&Pe(a)){return false}return l(r,a)||l(i,n)});this.$get=["$$rAF","$rootScope","$rootElement","$document","$$Map","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow","$$isDocumentHidden",function(a,o,s,l,h,d,p,v,g,m,y){var _=new h;var b=new h;var w=null;function S(){var e=false;return function(t){if(e){t()}else{o.$$postDigest(function(){e=true;t()})}}}var C=o.$watch(function(){return v.totalPendingRequests===0},function(e){if(!e)return;C();o.$$postDigest(function(){o.$$postDigest(function(){if(w===null){w=true}})})});var x=Object.create(null);var O=t.customFilter();var T=t.classNameFilter();var E=function(){return true};var j=O||E;var A=!T?E:function(e,t){var r=[e.getAttribute("class"),t.addClass,t.removeClass].join(" ");return T.test(r)};var P=$(g);function k(e,t){return H(e,t,{})}var R=e.Node.prototype.contains||function(e){return this===e||!!(this.compareDocumentPosition(e)&16)};function L(e,t,r){var i=[];var n=x[r];if(n){xe(n,function(n){if(R.call(n.node,t)){i.push(n.callback)}else if(r==="leave"&&R.call(n.node,e)){i.push(n.callback)}})}return i}function G(e,t,r){var i=D(t);return e.filter(function(e){var t=e.node===i&&(!r||e.callback===r);return!t})}function U(e,t){if(e==="close"&&!t.parentNode){Y.off(t)}}var Y={on:function(e,t,r){var i=D(t);x[e]=x[e]||[];x[e].push({node:i,callback:r});ke(t).on("$destroy",function(){var n=_.get(i);if(!n){Y.off(e,t,r)}})},off:function(e,t,r){if(arguments.length===1&&!Ae(arguments[0])){t=arguments[0];for(var i in x){x[i]=G(x[i],t)}return}var n=x[e];if(!n)return;x[e]=arguments.length===1?null:G(n,t,r)},pin:function(e,t){M(Ee(e),"element","not an element");M(Ee(t),"parentElement","not an element");e.data(ye,t)},push:function(e,t,r,i){r=r||{};r.domOperation=i;return q(e,t,r)},enabled:function(e,t){var r=arguments.length;if(r===0){t=!!w}else{var i=Ee(e);if(!i){t=w=!!e}else{var n=W(e);if(r===1){t=!b.get(n)}else{b.set(n,!t)}}}return t}};return Y;function q(e,t,r){var s=Se(r);var l=I(e);var c=W(l);var h=c&&c.parentNode;s=N(s);var v=new p;var g=S();if(Oe(s.addClass)){s.addClass=s.addClass.join(" ")}if(s.addClass&&!Ae(s.addClass)){s.addClass=null}if(Oe(s.removeClass)){s.removeClass=s.removeClass.join(" ")}if(s.removeClass&&!Ae(s.removeClass)){s.removeClass=null}if(s.from&&!je(s.from)){s.from=null}if(s.to&&!je(s.to)){s.to=null}if(!w||!c||!j(c,t,r)||!A(c,s)){q();return v}var m=["enter","move","leave"].indexOf(t)>=0;var C=y();var x=C||b.get(c);var O=!x&&_.get(c)||{};var T=!!O.state;if(!x&&(!T||O.state!==i)){x=!K(c,h,t)}if(x){if(C)Y(v,t,"start");q();if(C)Y(v,t,"close");return v}if(m){B(c)}var E={structural:m,element:l,event:t,addClass:s.addClass,removeClass:s.removeClass,close:q,options:s,runner:v};if(T){var M=u("skip",E,O);if(M){if(O.state===n){q();return v}else{H(l,O,E);return O.runner}}var D=u("cancel",E,O);if(D){if(O.state===n){O.runner.end()}else if(O.structural){O.close()}else{H(l,O,E);return O.runner}}else{var R=u("join",E,O);if(R){if(O.state===n){k(l,E)}else{V(l,m?t:null,s);t=E.event=O.event;s=H(l,O,E);return O.runner}}}}else{k(l,E)}var $=E.structural;if(!$){$=E.event==="animate"&&Object.keys(E.options.to||{}).length>0||f(E)}if(!$){q();X(c);return v}var G=(O.counter||0)+1;E.counter=G;Z(c,i,E);o.$$postDigest(function(){l=I(e);var r=_.get(c);var i=!r;r=r||{};var a=l.parent()||[];var o=a.length>0&&(r.event==="animate"||r.structural||f(r));if(i||r.counter!==G||!o){if(i){P(l,s);F(l,s)}if(i||m&&r.event!==t){s.domOperation();v.end()}if(!o){X(c)}return}t=!r.structural&&f(r,true)?"setClass":r.event;Z(c,n);var u=d(l,t,r.options);v.setHost(u);Y(v,t,"start",{});u.done(function(e){q(!e);var r=_.get(c);if(r&&r.counter===G){X(c)}Y(v,t,"close",{})})});return v;function Y(e,t,r,i){g(function(){var e=L(h,c,t);if(e.length){a(function(){xe(e,function(e){e(l,r,i)});U(r,c)})}else{U(r,c)}});e.progress(t,r,i)}function q(e){z(l,s);P(l,s);F(l,s);s.domOperation();v.complete(!e)}}function B(e){var t=e.querySelectorAll("["+me+"]");xe(t,function(e){var t=parseInt(e.getAttribute(me),10);var r=_.get(e);if(r){switch(t){case n:r.runner.end();case i:_.delete(e);break}}})}function X(e){e.removeAttribute(me);_.delete(e)}function K(e,t,i){var n=l[0].body;var a=W(s);var o=e===n||e.nodeName==="HTML";var u=e===a;var f=false;var h=b.get(e);var d;var p=ke.data(e,ye);if(p){t=W(p)}while(t){if(!u){u=t===a}if(t.nodeType!==r){break}var v=_.get(t)||{};if(!f){var g=b.get(t);if(g===true&&h!==false){h=true;break}else if(g===false){h=false}f=v.structural}if(Pe(d)||d===true){var m=ke.data(t,c);if(Te(m)){d=m}}if(f&&d===false)break;if(!o){o=t===n}if(o&&u){break}if(!u){p=ke.data(t,ye);if(p){t=W(p);continue}}t=t.parentNode}var y=(!f||d)&&h!==true;return y&&u&&o}function Z(e,t,r){r=r||{};r.state=t;e.setAttribute(me,t);var i=_.get(e);var n=i?Ce(i,r):r;_.set(e,n)}}]}];var be=["$animateProvider",function(e){var t="ng-animate-ref";var r=this.drivers=[];var i="$$animationRunner";function n(e,t){e.data(i,t)}function a(e){e.removeData(i)}function o(e){return e.data(i)}this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$Map","$$rAFScheduler",function(e,i,s,c,f,h){var d=[];var p=$(e);function v(e){var t={children:[]};var r,i=new f;for(r=0;r<e.length;r++){var n=e[r];i.set(n.domNode,e[r]={domNode:n.domNode,fn:n.fn,children:[]})}for(r=0;r<e.length;r++){a(e[r])}return o(t);function a(e){if(e.processed)return e;e.processed=true;var r=e.domNode;var n=r.parentNode;i.set(r,e);var o;while(n){o=i.get(n);if(o){if(!o.processed){o=a(o)}break}n=n.parentNode}(o||t).children.push(e);return e}function o(e){var t=[];var r=[];var i;for(i=0;i<e.children.length;i++){r.push(e.children[i])}var n=r.length;var a=0;var o=[];for(i=0;i<r.length;i++){var s=r[i];if(n<=0){n=a;a=0;t.push(o);o=[]}o.push(s.fn);s.children.forEach(function(e){a++;r.push(e)});n--}if(o.length){t.push(o)}return t}}return function(f,g,m){m=N(m);var y=["enter","move","leave"].indexOf(g)>=0;var _=new c({end:function(){P()},cancel:function(){P(true)}});if(!r.length){P();return _}n(f,_);var b=j(f.attr("class"),j(m.addClass,m.removeClass));var w=m.tempClasses;if(w){b+=" "+w;m.tempClasses=null}var S;if(y){S="ng-"+g+l;e.addClass(f,S)}d.push({element:f,classes:b,event:g,structural:y,options:m,beforeStart:E,close:P});f.on("$destroy",A);if(d.length>1)return _;i.$$postDigest(function(){var e=[];xe(d,function(t){if(o(t.element)){e.push(t)}else{t.close()}});d.length=0;var t=x(e);var r=[];xe(t,function(e){r.push({domNode:W(e.from?e.from.element:e.element),fn:function t(){e.beforeStart();var r,i=e.close;var n=e.anchors?e.from.element||e.to.element:e.element;if(o(n)){var a=T(e);if(a){r=a.start}}if(!r){i()}else{var s=r();s.done(function(e){i(!e)});M(e,s)}}})});h(v(r))});return _;function C(e){var r="["+t+"]";var i=e.hasAttribute(t)?[e]:e.querySelectorAll(r);var n=[];xe(i,function(e){var r=e.getAttribute(t);if(r&&r.length){n.push(e)}});return n}function x(e){var r=[];var i={};xe(e,function(e,n){var a=e.element;var o=W(a);var s=e.event;var l=["enter","move"].indexOf(s)>=0;var u=e.structural?C(o):[];if(u.length){var c=l?"to":"from";xe(u,function(e){var r=e.getAttribute(t);i[r]=i[r]||{};i[r][c]={animationID:n,element:ke(e)}})}else{r.push(e)}});var n={};var a={};xe(i,function(t,i){var o=t.from;var s=t.to;if(!o||!s){var l=o?o.animationID:s.animationID;var u=l.toString();if(!n[u]){n[u]=true;r.push(e[l])}return}var c=e[o.animationID];var f=e[s.animationID];var h=o.animationID.toString();if(!a[h]){var d=a[h]={structural:true,beforeStart:function(){c.beforeStart();f.beforeStart()},close:function(){c.close();f.close()},classes:O(c.classes,f.classes),from:c,to:f,anchors:[]};if(d.classes.length){r.push(d)}else{r.push(c);r.push(f)}}a[h].anchors.push({out:o.element,in:s.element})});return r}function O(e,t){e=e.split(" ");t=t.split(" ");var r=[];for(var i=0;i<e.length;i++){var n=e[i];if(n.substring(0,3)==="ng-")continue;for(var a=0;a<t.length;a++){if(n===t[a]){r.push(n);break}}}return r.join(" ")}function T(e){for(var t=r.length-1;t>=0;t--){var i=r[t];var n=s.get(i);var a=n(e);if(a){return a}}}function E(){f.addClass(u);if(w){e.addClass(f,w)}if(S){e.removeClass(f,S);S=null}}function M(e,t){if(e.from&&e.to){r(e.from.element);r(e.to.element)}else{r(e.element)}function r(e){var r=o(e);if(r)r.setHost(t)}}function A(){var e=o(f);if(e&&(g!=="leave"||!m.$$domOperationFired)){e.end()}}function P(t){f.off("$destroy",A);a(f);p(f,m);F(f,m);m.domOperation();if(w){e.removeClass(f,w)}f.removeClass(u);_.complete(!t)}}}]}];var we=["$animate","$rootScope",function(e,t){return{restrict:"A",transclude:"element",terminal:true,priority:600,link:function(t,r,i,n,a){var o,s;t.$watchCollection(i.ngAnimateSwap||i["for"],function(i){if(o){e.leave(o)}if(s){s.$destroy();s=null}if(i||i===0){s=t.$new();a(s,function(t){o=t;e.enter(t,null,r)})}})}}}];var Se;var Ce;var xe;var Oe;var Te;var Ee;var Me;var je;var Ae;var Pe;var ke;var Ie;t.module("ngAnimate",[],function e(){Ie=t.noop;Se=t.copy;Ce=t.extend;ke=t.element;xe=t.forEach;Oe=t.isArray;Ae=t.isString;je=t.isObject;Pe=t.isUndefined;Te=t.isDefined;Me=t.isFunction;Ee=t.isElement}).info({angularVersion:"1.7.0"}).directive("ngAnimateSwap",we).directive("ngAnimateChildren",Q).factory("$$rAFScheduler",Z).provider("$$animateQueue",_e).provider("$$animation",be).provider("$animateCss",de).provider("$$animateCssDriver",pe).provider("$$animateJs",ve).provider("$$animateJsDriver",ge)})(window,window.angular)},function(e,t,r){r(453);e.exports="ngAnimate"},function(e,t,r){var i,n,a;
/*!
 * jQuery UI Disable Selection 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/*!
 * jQuery UI Disable Selection 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(o){if(true){!(n=[r(24),r(103)],i=o,a=typeof i==="function"?i.apply(t,n):i,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.fn.extend({disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}})})},function(e,t,r){var i,n,a;
/*!
 * jQuery UI Resizable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/*!
 * jQuery UI Resizable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(o){if(true){!(n=[r(24),r(275),r(455),r(364),r(103),r(224)],i=o,a=typeof i==="function"?i.apply(t,n):i,a!==undefined&&(e.exports=a))}else{}})(function(e){e.widget("ui.resizable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(t,r){if(e(t).css("overflow")==="hidden"){return false}var i=r&&r==="left"?"scrollLeft":"scrollTop",n=false;if(t[i]>0){return true}t[i]=1;n=t[i]>0;t[i]=0;return n},_create:function(){var t,r=this.options,i=this;this._addClass("ui-resizable");e.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)){this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance"));this.elementIsWrapper=true;t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")};this.element.css(t);this.originalElement.css("margin",0);this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css(t);this._proportionallyResize()}this._setupHandles();if(r.autoHide){e(this.element).on("mouseenter",function(){if(r.disabled){return}i._removeClass("ui-resizable-autohide");i._handles.show()}).on("mouseleave",function(){if(r.disabled){return}if(!i.resizing){i._addClass("ui-resizable-autohide");i._handles.hide()}})}this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,r=function(t){e(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){r(this.element);t=this.element;this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t);t.remove()}this.originalElement.css("resize",this.originalResizeStyle);r(this.originalElement);return this},_setOption:function(e,t){this._super(e,t);switch(e){case"handles":this._removeHandles();this._setupHandles();break;default:break}},_setupHandles:function(){var t=this.options,r,i,n,a,o,s=this;this.handles=t.handles||(!e(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});this._handles=e();if(this.handles.constructor===String){if(this.handles==="all"){this.handles="n,e,s,w,se,sw,ne,nw"}n=this.handles.split(",");this.handles={};for(i=0;i<n.length;i++){r=e.trim(n[i]);a="ui-resizable-"+r;o=e("<div>");this._addClass(o,"ui-resizable-handle "+a);o.css({zIndex:t.zIndex});this.handles[r]=".ui-resizable-"+r;this.element.append(o)}}this._renderAxis=function(t){var r,i,n,a;t=t||this.element;for(r in this.handles){if(this.handles[r].constructor===String){this.handles[r]=this.element.children(this.handles[r]).first().show()}else if(this.handles[r].jquery||this.handles[r].nodeType){this.handles[r]=e(this.handles[r]);this._on(this.handles[r],{mousedown:s._mouseDown})}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)){i=e(this.handles[r],this.element);a=/sw|ne|nw|se|n|s/.test(r)?i.outerHeight():i.outerWidth();n=["padding",/ne|nw|n/.test(r)?"Top":/se|sw|s/.test(r)?"Bottom":/^e$/.test(r)?"Right":"Left"].join("");t.css(n,a);this._proportionallyResize()}this._handles=this._handles.add(this.handles[r])}};this._renderAxis(this.element);this._handles=this._handles.add(this.element.find(".ui-resizable-handle"));this._handles.disableSelection();this._handles.on("mouseover",function(){if(!s.resizing){if(this.className){o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}s.axis=o&&o[1]?o[1]:"se"}});if(t.autoHide){this._handles.hide();this._addClass("ui-resizable-autohide")}},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var r,i,n=false;for(r in this.handles){i=e(this.handles[r])[0];if(i===t.target||e.contains(i,t.target)){n=true}}return!this.options.disabled&&n},_mouseStart:function(t){var r,i,n,a=this.options,o=this.element;this.resizing=true;this._renderProxy();r=this._num(this.helper.css("left"));i=this._num(this.helper.css("top"));if(a.containment){r+=e(a.containment).scrollLeft()||0;i+=e(a.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:r,top:i};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()};this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()};this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()};this.originalPosition={left:r,top:i};this.originalMousePosition={left:t.pageX,top:t.pageY};this.aspectRatio=typeof a.aspectRatio==="number"?a.aspectRatio:this.originalSize.width/this.originalSize.height||1;n=e(".ui-resizable-"+this.axis).css("cursor");e("body").css("cursor",n==="auto"?this.axis+"-resize":n);this._addClass("ui-resizable-resizing");this._propagate("start",t);return true},_mouseDrag:function(t){var r,i,n=this.originalMousePosition,a=this.axis,o=t.pageX-n.left||0,s=t.pageY-n.top||0,l=this._change[a];this._updatePrevProperties();if(!l){return false}r=l.apply(this,[t,o,s]);this._updateVirtualBoundaries(t.shiftKey);if(this._aspectRatio||t.shiftKey){r=this._updateRatio(r,t)}r=this._respectSize(r,t);this._updateCache(r);this._propagate("resize",t);i=this._applyChanges();if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize()}if(!e.isEmptyObject(i)){this._updatePrevProperties();this._trigger("resize",t,this.ui());this._applyChanges()}return false},_mouseStop:function(t){this.resizing=false;var r,i,n,a,o,s,l,u=this.options,c=this;if(this._helper){r=this._proportionallyResizeElements;i=r.length&&/textarea/i.test(r[0].nodeName);n=i&&this._hasScroll(r[0],"left")?0:c.sizeDiff.height;a=i?0:c.sizeDiff.width;o={width:c.helper.width()-a,height:c.helper.height()-n};s=parseFloat(c.element.css("left"))+(c.position.left-c.originalPosition.left)||null;l=parseFloat(c.element.css("top"))+(c.position.top-c.originalPosition.top)||null;if(!u.animate){this.element.css(e.extend(o,{top:l,left:s}))}c.helper.height(c.size.height);c.helper.width(c.size.width);if(this._helper&&!u.animate){this._proportionallyResize()}}e("body").css("cursor","auto");this._removeClass("ui-resizable-resizing");this._propagate("stop",t);if(this._helper){this.helper.remove()}return false},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};if(this.position.top!==this.prevPosition.top){e.top=this.position.top+"px"}if(this.position.left!==this.prevPosition.left){e.left=this.position.left+"px"}if(this.size.width!==this.prevSize.width){e.width=this.size.width+"px"}if(this.size.height!==this.prevSize.height){e.height=this.size.height+"px"}this.helper.css(e);return e},_updateVirtualBoundaries:function(e){var t,r,i,n,a,o=this.options;a={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:Infinity,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:Infinity};if(this._aspectRatio||e){t=a.minHeight*this.aspectRatio;i=a.minWidth/this.aspectRatio;r=a.maxHeight*this.aspectRatio;n=a.maxWidth/this.aspectRatio;if(t>a.minWidth){a.minWidth=t}if(i>a.minHeight){a.minHeight=i}if(r<a.maxWidth){a.maxWidth=r}if(n<a.maxHeight){a.maxHeight=n}}this._vBoundaries=a},_updateCache:function(e){this.offset=this.helper.offset();if(this._isNumber(e.left)){this.position.left=e.left}if(this._isNumber(e.top)){this.position.top=e.top}if(this._isNumber(e.height)){this.size.height=e.height}if(this._isNumber(e.width)){this.size.width=e.width}},_updateRatio:function(e){var t=this.position,r=this.size,i=this.axis;if(this._isNumber(e.height)){e.width=e.height*this.aspectRatio}else if(this._isNumber(e.width)){e.height=e.width/this.aspectRatio}if(i==="sw"){e.left=t.left+(r.width-e.width);e.top=null}if(i==="nw"){e.top=t.top+(r.height-e.height);e.left=t.left+(r.width-e.width)}return e},_respectSize:function(e){var t=this._vBoundaries,r=this.axis,i=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,n=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,a=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,o=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,s=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,u=/sw|nw|w/.test(r),c=/nw|ne|n/.test(r);if(a){e.width=t.minWidth}if(o){e.height=t.minHeight}if(i){e.width=t.maxWidth}if(n){e.height=t.maxHeight}if(a&&u){e.left=s-t.minWidth}if(i&&u){e.left=s-t.maxWidth}if(o&&c){e.top=l-t.minHeight}if(n&&c){e.top=l-t.maxHeight}if(!e.width&&!e.height&&!e.left&&e.top){e.top=null}else if(!e.width&&!e.height&&!e.top&&e.left){e.left=null}return e},_getPaddingPlusBorderDimensions:function(e){var t=0,r=[],i=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],n=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];for(;t<4;t++){r[t]=parseFloat(i[t])||0;r[t]+=parseFloat(n[t])||0}return{height:r[0]+r[2],width:r[1]+r[3]}},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length){return}var e,t=0,r=this.helper||this.element;for(;t<this._proportionallyResizeElements.length;t++){e=this._proportionallyResizeElements[t];if(!this.outerDimensions){this.outerDimensions=this._getPaddingPlusBorderDimensions(e)}e.css({height:r.height()-this.outerDimensions.height||0,width:r.width()-this.outerDimensions.width||0})}},_renderProxy:function(){var t=this.element,r=this.options;this.elementOffset=t.offset();if(this._helper){this.helper=this.helper||e("<div style='overflow:hidden;'></div>");this._addClass(this.helper,this._helper);this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++r.zIndex});this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var r=this.originalSize,i=this.originalPosition;return{left:i.left+t,width:r.width-t}},n:function(e,t,r){var i=this.originalSize,n=this.originalPosition;return{top:n.top+r,height:i.height-r}},s:function(e,t,r){return{height:this.originalSize.height+r}},se:function(t,r,i){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,r,i]))},sw:function(t,r,i){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,r,i]))},ne:function(t,r,i){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,r,i]))},nw:function(t,r,i){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,r,i]))}},_propagate:function(t,r){e.ui.plugin.call(this,t,[r,this.ui()]);t!=="resize"&&this._trigger(t,r,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});e.ui.plugin.add("resizable","animate",{stop:function(t){var r=e(this).resizable("instance"),i=r.options,n=r._proportionallyResizeElements,a=n.length&&/textarea/i.test(n[0].nodeName),o=a&&r._hasScroll(n[0],"left")?0:r.sizeDiff.height,s=a?0:r.sizeDiff.width,l={width:r.size.width-s,height:r.size.height-o},u=parseFloat(r.element.css("left"))+(r.position.left-r.originalPosition.left)||null,c=parseFloat(r.element.css("top"))+(r.position.top-r.originalPosition.top)||null;r.element.animate(e.extend(l,c&&u?{top:c,left:u}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseFloat(r.element.css("width")),height:parseFloat(r.element.css("height")),top:parseFloat(r.element.css("top")),left:parseFloat(r.element.css("left"))};if(n&&n.length){e(n[0]).css({width:i.width,height:i.height})}r._updateCache(i);r._propagate("resize",t)}})}});e.ui.plugin.add("resizable","containment",{start:function(){var t,r,i,n,a,o,s,l=e(this).resizable("instance"),u=l.options,c=l.element,f=u.containment,h=f instanceof e?f.get(0):/parent/.test(f)?c.parent().get(0):f;if(!h){return}l.containerElement=e(h);if(/document/.test(f)||f===document){l.containerOffset={left:0,top:0};l.containerPosition={left:0,top:0};l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}}else{t=e(h);r=[];e(["Top","Right","Left","Bottom"]).each(function(e,i){r[e]=l._num(t.css("padding"+i))});l.containerOffset=t.offset();l.containerPosition=t.position();l.containerSize={height:t.innerHeight()-r[3],width:t.innerWidth()-r[1]};i=l.containerOffset;n=l.containerSize.height;a=l.containerSize.width;o=l._hasScroll(h,"left")?h.scrollWidth:a;s=l._hasScroll(h)?h.scrollHeight:n;l.parentData={element:h,left:i.left,top:i.top,width:o,height:s}}},resize:function(t){var r,i,n,a,o=e(this).resizable("instance"),s=o.options,l=o.containerOffset,u=o.position,c=o._aspectRatio||t.shiftKey,f={top:0,left:0},h=o.containerElement,d=true;if(h[0]!==document&&/static/.test(h.css("position"))){f=l}if(u.left<(o._helper?l.left:0)){o.size.width=o.size.width+(o._helper?o.position.left-l.left:o.position.left-f.left);if(c){o.size.height=o.size.width/o.aspectRatio;d=false}o.position.left=s.helper?l.left:0}if(u.top<(o._helper?l.top:0)){o.size.height=o.size.height+(o._helper?o.position.top-l.top:o.position.top);if(c){o.size.width=o.size.height*o.aspectRatio;d=false}o.position.top=o._helper?l.top:0}n=o.containerElement.get(0)===o.element.parent().get(0);a=/relative|absolute/.test(o.containerElement.css("position"));if(n&&a){o.offset.left=o.parentData.left+o.position.left;o.offset.top=o.parentData.top+o.position.top}else{o.offset.left=o.element.offset().left;o.offset.top=o.element.offset().top}r=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-f.left:o.offset.left-l.left));i=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-f.top:o.offset.top-l.top));if(r+o.size.width>=o.parentData.width){o.size.width=o.parentData.width-r;if(c){o.size.height=o.size.width/o.aspectRatio;d=false}}if(i+o.size.height>=o.parentData.height){o.size.height=o.parentData.height-i;if(c){o.size.width=o.size.height*o.aspectRatio;d=false}}if(!d){o.position.left=o.prevPosition.left;o.position.top=o.prevPosition.top;o.size.width=o.prevSize.width;o.size.height=o.prevSize.height}},stop:function(){var t=e(this).resizable("instance"),r=t.options,i=t.containerOffset,n=t.containerPosition,a=t.containerElement,o=e(t.helper),s=o.offset(),l=o.outerWidth()-t.sizeDiff.width,u=o.outerHeight()-t.sizeDiff.height;if(t._helper&&!r.animate&&/relative/.test(a.css("position"))){e(this).css({left:s.left-n.left-i.left,width:l,height:u})}if(t._helper&&!r.animate&&/static/.test(a.css("position"))){e(this).css({left:s.left-n.left-i.left,width:l,height:u})}}});e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),r=t.options;e(r.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function(t,r){var i=e(this).resizable("instance"),n=i.options,a=i.originalSize,o=i.originalPosition,s={height:i.size.height-a.height||0,width:i.size.width-a.width||0,top:i.position.top-o.top||0,left:i.position.left-o.left||0};e(n.alsoResize).each(function(){var t=e(this),i=e(this).data("ui-resizable-alsoresize"),n={},a=t.parents(r.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(a,function(e,t){var r=(i[t]||0)+(s[t]||0);if(r&&r>=0){n[t]=r||null}});t.css(n)})},stop:function(){e(this).removeData("ui-resizable-alsoresize")}});e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),r=t.size;t.ghost=t.originalElement.clone();t.ghost.css({opacity:.25,display:"block",position:"relative",height:r.height,width:r.width,margin:0,left:0,top:0});t._addClass(t.ghost,"ui-resizable-ghost");if(e.uiBackCompat!==false&&typeof t.options.ghost==="string"){t.ghost.addClass(this.options.ghost)}t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");if(t.ghost){t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})}},stop:function(){var t=e(this).resizable("instance");if(t.ghost&&t.helper){t.helper.get(0).removeChild(t.ghost.get(0))}}});e.ui.plugin.add("resizable","grid",{resize:function(){var t,r=e(this).resizable("instance"),i=r.options,n=r.size,a=r.originalSize,o=r.originalPosition,s=r.axis,l=typeof i.grid==="number"?[i.grid,i.grid]:i.grid,u=l[0]||1,c=l[1]||1,f=Math.round((n.width-a.width)/u)*u,h=Math.round((n.height-a.height)/c)*c,d=a.width+f,p=a.height+h,v=i.maxWidth&&i.maxWidth<d,g=i.maxHeight&&i.maxHeight<p,m=i.minWidth&&i.minWidth>d,y=i.minHeight&&i.minHeight>p;i.grid=l;if(m){d+=u}if(y){p+=c}if(v){d-=u}if(g){p-=c}if(/^(se|s|e)$/.test(s)){r.size.width=d;r.size.height=p}else if(/^(ne)$/.test(s)){r.size.width=d;r.size.height=p;r.position.top=o.top-h}else if(/^(sw)$/.test(s)){r.size.width=d;r.size.height=p;r.position.left=o.left-f}else{if(p-c<=0||d-u<=0){t=r._getPaddingPlusBorderDimensions(this)}if(p-c>0){r.size.height=p;r.position.top=o.top-h}else{p=c-t.height;r.size.height=p;r.position.top=o.top+a.height-p}if(d-u>0){r.size.width=d;r.position.left=o.left-f}else{d=u-t.width;r.size.width=d;r.position.left=o.left+a.width-d}}}});return e.ui.resizable})},,,,,,,,,,,,function(e,t,r){var i,n,a;
/*!
 * jQuery UI Sortable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/*!
 * jQuery UI Sortable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(o){if(true){!(n=[r(24),r(275),r(365),r(366),r(363),r(103),r(224)],i=o,a=typeof i==="function"?i.apply(t,n):i,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.widget("ui.sortable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,r){return e>=t&&e<t+r},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={};this._addClass("ui-sortable");this.refresh();this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=true},_setOption:function(e,t){this._super(e,t);if(e==="handle"){this._setHandleClassName()}},_setHandleClassName:function(){var t=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle");e.each(this.items,function(){t._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--){this.items[e].item.removeData(this.widgetName+"-item")}return this},_mouseCapture:function(t,r){var i=null,n=false,a=this;if(this.reverting){return false}if(this.options.disabled||this.options.type==="static"){return false}this._refreshItems(t);e(t.target).parents().each(function(){if(e.data(this,a.widgetName+"-item")===a){i=e(this);return false}});if(e.data(t.target,a.widgetName+"-item")===a){i=e(t.target)}if(!i){return false}if(this.options.handle&&!r){e(this.options.handle,i).find("*").addBack().each(function(){if(this===t.target){n=true}});if(!n){return false}}this.currentItem=i;this._removeCurrentsFromItems();return true},_mouseStart:function(t,r,i){var n,a,o=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(t);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(t);this.originalPageX=t.pageX;this.originalPageY=t.pageY;o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!==this.currentItem[0]){this.currentItem.hide()}this._createPlaceholder();if(o.containment){this._setContainment()}if(o.cursor&&o.cursor!=="auto"){a=this.document.find("body");this.storedCursor=a.css("cursor");a.css("cursor",o.cursor);this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(a)}if(o.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity")}this.helper.css("opacity",o.opacity)}if(o.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex")}this.helper.css("zIndex",o.zIndex)}if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){this.overflowOffset=this.scrollParent.offset()}this._trigger("start",t,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions()}if(!i){for(n=this.containers.length-1;n>=0;n--){this.containers[n]._trigger("activate",t,this._uiHash(this))}}if(e.ui.ddmanager){e.ui.ddmanager.current=this}if(e.ui.ddmanager&&!o.dropBehaviour){e.ui.ddmanager.prepareOffsets(this,t)}this.dragging=true;this._addClass(this.helper,"ui-sortable-helper");this._mouseDrag(t);return true},_mouseDrag:function(t){var r,i,n,a,o=this.options,s=false;this.position=this._generatePosition(t);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs}if(this.options.scroll){if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity){this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+o.scrollSpeed}else if(t.pageY-this.overflowOffset.top<o.scrollSensitivity){this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-o.scrollSpeed}if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity){this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+o.scrollSpeed}else if(t.pageX-this.overflowOffset.left<o.scrollSensitivity){this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-o.scrollSpeed}}else{if(t.pageY-this.document.scrollTop()<o.scrollSensitivity){s=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed)}else if(this.window.height()-(t.pageY-this.document.scrollTop())<o.scrollSensitivity){s=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)}if(t.pageX-this.document.scrollLeft()<o.scrollSensitivity){s=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed)}else if(this.window.width()-(t.pageX-this.document.scrollLeft())<o.scrollSensitivity){s=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed)}}if(s!==false&&e.ui.ddmanager&&!o.dropBehaviour){e.ui.ddmanager.prepareOffsets(this,t)}}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px"}for(r=this.items.length-1;r>=0;r--){i=this.items[r];n=i.item[0];a=this._intersectsWithPointer(i);if(!a){continue}if(i.instance!==this.currentContainer){continue}if(n!==this.currentItem[0]&&this.placeholder[a===1?"next":"prev"]()[0]!==n&&!e.contains(this.placeholder[0],n)&&(this.options.type==="semi-dynamic"?!e.contains(this.element[0],n):true)){this.direction=a===1?"down":"up";if(this.options.tolerance==="pointer"||this._intersectsWithSides(i)){this._rearrange(t,i)}else{break}this._trigger("change",t,this._uiHash());break}}this._contactContainers(t);if(e.ui.ddmanager){e.ui.ddmanager.drag(this,t)}this._trigger("sort",t,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(t,r){if(!t){return}if(e.ui.ddmanager&&!this.options.dropBehaviour){e.ui.ddmanager.drop(this,t)}if(this.options.revert){var i=this,n=this.placeholder.offset(),a=this.options.axis,o={};if(!a||a==="x"){o.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)}if(!a||a==="y"){o.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)}this.reverting=true;e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else{this._clear(t,r)}return false},cancel:function(){if(this.dragging){this._mouseUp(new e.Event("mouseup",{target:null}));if(this.options.helper==="original"){this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper")}else{this.currentItem.show()}for(var t=this.containers.length-1;t>=0;t--){this.containers[t]._trigger("deactivate",null,this._uiHash(this));if(this.containers[t].containerCache.over){this.containers[t]._trigger("out",null,this._uiHash(this));this.containers[t].containerCache.over=0}}}if(this.placeholder){if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0])}if(this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove()}e.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){e(this.domPosition.prev).after(this.currentItem)}else{e(this.domPosition.parent).prepend(this.currentItem)}}return this},serialize:function(t){var r=this._getItemsAsjQuery(t&&t.connected),i=[];t=t||{};e(r).each(function(){var r=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);if(r){i.push((t.key||r[1]+"[]")+"="+(t.key&&t.expression?r[1]:r[2]))}});if(!i.length&&t.key){i.push(t.key+"=")}return i.join("&")},toArray:function(t){var r=this._getItemsAsjQuery(t&&t.connected),i=[];t=t||{};r.each(function(){i.push(e(t.item||this).attr(t.attribute||"id")||"")});return i},_intersectsWith:function(e){var t=this.positionAbs.left,r=t+this.helperProportions.width,i=this.positionAbs.top,n=i+this.helperProportions.height,a=e.left,o=a+e.width,s=e.top,l=s+e.height,u=this.offset.click.top,c=this.offset.click.left,f=this.options.axis==="x"||i+u>s&&i+u<l,h=this.options.axis==="y"||t+c>a&&t+c<o,d=f&&h;if(this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]){return d}else{return a<t+this.helperProportions.width/2&&r-this.helperProportions.width/2<o&&s<i+this.helperProportions.height/2&&n-this.helperProportions.height/2<l}},_intersectsWithPointer:function(e){var t,r,i=this.options.axis==="x"||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),n=this.options.axis==="y"||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),a=i&&n;if(!a){return false}t=this._getDragVerticalDirection();r=this._getDragHorizontalDirection();return this.floating?r==="right"||t==="down"?2:1:t&&(t==="down"?2:1)},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),r=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),i=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();if(this.floating&&n){return n==="right"&&r||n==="left"&&!r}else{return i&&(i==="down"&&t||i==="up"&&!t)}},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!==0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!==0&&(e>0?"right":"left")},refresh:function(e){this._refreshItems(e);this._setHandleClassName();this.refreshPositions();return this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var r,i,n,a,o=[],s=[],l=this._connectWith();if(l&&t){for(r=l.length-1;r>=0;r--){n=e(l[r],this.document[0]);for(i=n.length-1;i>=0;i--){a=e.data(n[i],this.widgetFullName);if(a&&a!==this&&!a.options.disabled){s.push([e.isFunction(a.options.items)?a.options.items.call(a.element):e(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a])}}}}s.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);function u(){o.push(this)}for(r=s.length-1;r>=0;r--){s[r][0].each(u)}return e(o)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var r=0;r<t.length;r++){if(t[r]===e.item[0]){return false}}return true})},_refreshItems:function(t){this.items=[];this.containers=[this];var r,i,n,a,o,s,l,u,c=this.items,f=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready){for(r=h.length-1;r>=0;r--){n=e(h[r],this.document[0]);for(i=n.length-1;i>=0;i--){a=e.data(n[i],this.widgetFullName);if(a&&a!==this&&!a.options.disabled){f.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]);this.containers.push(a)}}}}for(r=f.length-1;r>=0;r--){o=f[r][1];s=f[r][0];for(i=0,u=s.length;i<u;i++){l=e(s[i]);l.data(this.widgetName+"-item",o);c.push({item:l,instance:o,width:0,height:0,left:0,top:0})}}},refreshPositions:function(t){this.floating=this.items.length?this.options.axis==="x"||this._isFloating(this.items[0].item):false;if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()}var r,i,n,a;for(r=this.items.length-1;r>=0;r--){i=this.items[r];if(i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]){continue}n=this.options.toleranceElement?e(this.options.toleranceElement,i.item):i.item;if(!t){i.width=n.outerWidth();i.height=n.outerHeight()}a=n.offset();i.left=a.left;i.top=a.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(r=this.containers.length-1;r>=0;r--){a=this.containers[r].element.offset();this.containers[r].containerCache.left=a.left;this.containers[r].containerCache.top=a.top;this.containers[r].containerCache.width=this.containers[r].element.outerWidth();this.containers[r].containerCache.height=this.containers[r].element.outerHeight()}}return this},_createPlaceholder:function(t){t=t||this;var r,i=t.options;if(!i.placeholder||i.placeholder.constructor===String){r=i.placeholder;i.placeholder={element:function(){var i=t.currentItem[0].nodeName.toLowerCase(),n=e("<"+i+">",t.document[0]);t._addClass(n,"ui-sortable-placeholder",r||t.currentItem[0].className)._removeClass(n,"ui-sortable-helper");if(i==="tbody"){t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(n))}else if(i==="tr"){t._createTrPlaceholder(t.currentItem,n)}else if(i==="img"){n.attr("src",t.currentItem.attr("src"))}if(!r){n.css("visibility","hidden")}return n},update:function(e,n){if(r&&!i.forcePlaceholderSize){return}if(!n.height()){n.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10))}if(!n.width()){n.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10))}}}}t.placeholder=e(i.placeholder.element.call(t.element,t.currentItem));t.currentItem.after(t.placeholder);i.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,r){var i=this;t.children().each(function(){e("<td>&#160;</td>",i.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(r)})},_contactContainers:function(t){var r,i,n,a,o,s,l,u,c,f,h=null,d=null;for(r=this.containers.length-1;r>=0;r--){if(e.contains(this.currentItem[0],this.containers[r].element[0])){continue}if(this._intersectsWith(this.containers[r].containerCache)){if(h&&e.contains(this.containers[r].element[0],h.element[0])){continue}h=this.containers[r];d=r}else{if(this.containers[r].containerCache.over){this.containers[r]._trigger("out",t,this._uiHash(this));this.containers[r].containerCache.over=0}}}if(!h){return}if(this.containers.length===1){if(!this.containers[d].containerCache.over){this.containers[d]._trigger("over",t,this._uiHash(this));this.containers[d].containerCache.over=1}}else{n=1e4;a=null;c=h.floating||this._isFloating(this.currentItem);o=c?"left":"top";s=c?"width":"height";f=c?"pageX":"pageY";for(i=this.items.length-1;i>=0;i--){if(!e.contains(this.containers[d].element[0],this.items[i].item[0])){continue}if(this.items[i].item[0]===this.currentItem[0]){continue}l=this.items[i].item.offset()[o];u=false;if(t[f]-l>this.items[i][s]/2){u=true}if(Math.abs(t[f]-l)<n){n=Math.abs(t[f]-l);a=this.items[i];this.direction=u?"up":"down"}}if(!a&&!this.options.dropOnEmpty){return}if(this.currentContainer===this.containers[d]){if(!this.currentContainer.containerCache.over){this.containers[d]._trigger("over",t,this._uiHash());this.currentContainer.containerCache.over=1}return}a?this._rearrange(t,a,null,true):this._rearrange(t,null,this.containers[d].element,true);this._trigger("change",t,this._uiHash());this.containers[d]._trigger("change",t,this._uiHash(this));this.currentContainer=this.containers[d];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[d]._trigger("over",t,this._uiHash(this));this.containers[d].containerCache.over=1}},_createHelper:function(t){var r=this.options,i=e.isFunction(r.helper)?e(r.helper.apply(this.element[0],[t,this.currentItem])):r.helper==="clone"?this.currentItem.clone():this.currentItem;if(!i.parents("body").length){e(r.appendTo!=="parent"?r.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0])}if(i[0]===this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}}if(!i[0].style.width||r.forceHelperSize){i.width(this.currentItem.width())}if(!i[0].style.height||r.forceHelperSize){i.height(this.currentItem.height())}return i},_adjustOffsetFromHelper:function(t){if(typeof t==="string"){t=t.split(" ")}if(e.isArray(t)){t={left:+t[0],top:+t[1]||0}}if("left"in t){this.offset.click.left=t.left+this.margins.left}if("right"in t){this.offset.click.left=this.helperProportions.width-t.right+this.margins.left}if("top"in t){this.offset.click.top=t.top+this.margins.top}if("bottom"in t){this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])){t.left+=this.scrollParent.scrollLeft();t.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&e.ui.ie){t={top:0,left:0}}return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,r,i,n=this.options;if(n.containment==="parent"){n.containment=this.helper[0].parentNode}if(n.containment==="document"||n.containment==="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,n.containment==="document"?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,(n.containment==="document"?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(n.containment)){t=e(n.containment)[0];r=e(n.containment).offset();i=e(t).css("overflow")!=="hidden";this.containment=[r.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,r.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,r){if(!r){r=this.position}var i=t==="absolute"?1:-1,n=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,a=/(html|body)/i.test(n[0].tagName);return{top:r.top+this.offset.relative.top*i+this.offset.parent.top*i-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():a?0:n.scrollTop())*i,left:r.left+this.offset.relative.left*i+this.offset.parent.left*i-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():a?0:n.scrollLeft())*i}},_generatePosition:function(t){var r,i,n=this.options,a=t.pageX,o=t.pageY,s=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,l=/(html|body)/i.test(s[0].tagName);if(this.cssPosition==="relative"&&!(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}if(this.originalPosition){if(this.containment){if(t.pageX-this.offset.click.left<this.containment[0]){a=this.containment[0]+this.offset.click.left}if(t.pageY-this.offset.click.top<this.containment[1]){o=this.containment[1]+this.offset.click.top}if(t.pageX-this.offset.click.left>this.containment[2]){a=this.containment[2]+this.offset.click.left}if(t.pageY-this.offset.click.top>this.containment[3]){o=this.containment[3]+this.offset.click.top}}if(n.grid){r=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1];o=this.containment?r-this.offset.click.top>=this.containment[1]&&r-this.offset.click.top<=this.containment[3]?r:r-this.offset.click.top>=this.containment[1]?r-n.grid[1]:r+n.grid[1]:r;i=this.originalPageX+Math.round((a-this.originalPageX)/n.grid[0])*n.grid[0];a=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-n.grid[0]:i+n.grid[0]:i}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():l?0:s.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():l?0:s.scrollLeft())}},_rearrange:function(e,t,r,i){r?r[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?t.item[0]:t.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){if(n===this.counter){this.refreshPositions(!i)}})},_clear:function(e,t){this.reverting=false;var r,i=[];if(!this._noFinalSort&&this.currentItem.parent().length){this.placeholder.before(this.currentItem)}this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(r in this._storedCSS){if(this._storedCSS[r]==="auto"||this._storedCSS[r]==="static"){this._storedCSS[r]=""}}this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper")}else{this.currentItem.show()}if(this.fromOutside&&!t){i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))})}if((this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!t){i.push(function(e){this._trigger("update",e,this._uiHash())})}if(this!==this.currentContainer){if(!t){i.push(function(e){this._trigger("remove",e,this._uiHash())});i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer));i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))}}function n(e,t,r){return function(i){r._trigger(e,i,t._uiHash(t))}}for(r=this.containers.length-1;r>=0;r--){if(!t){i.push(n("deactivate",this,this.containers[r]))}if(this.containers[r].containerCache.over){i.push(n("out",this,this.containers[r]));this.containers[r].containerCache.over=0}}if(this.storedCursor){this.document.find("body").css("cursor",this.storedCursor);this.storedStylesheet.remove()}if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity)}if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex)}this.dragging=false;if(!t){this._trigger("beforeStop",e,this._uiHash())}this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(!this.cancelHelperRemoval){if(this.helper[0]!==this.currentItem[0]){this.helper.remove()}this.helper=null}if(!t){for(r=0;r<i.length;r++){i[r].call(this,e)}this._trigger("stop",e,this._uiHash())}this.fromOutside=false;return!this.cancelHelperRemoval},_trigger:function(){if(e.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel()}},_uiHash:function(t){var r=t||this;return{helper:r.helper,placeholder:r.placeholder||e([]),position:r.position,originalPosition:r.originalPosition,offset:r.positionAbs,item:r.currentItem,sender:t?t.element:null}}})})},function(e,t){e.exports='<div class=ngeo-grid-table-container> <table float-thead=ctrl.floatTheadConfig ng-model=ctrl.configuration.data class="table table-bordered table-striped table-hover"> <thead class=table-header> <tr> <th ng-repeat="columnDefs in ctrl.configuration.columnDefs" ng-click=ctrl.sort(columnDefs.name) ng-bind-html="columnDefs.name | ngeoTrustHtml | translate"> <i ng-show="ctrl.sortedBy !== columnDefs.name" class="fa fa-fw"></i> <i ng-show="ctrl.sortedBy === columnDefs.name && ctrl.sortAscending === true" class="fa fa-caret-up"></i> <i ng-show="ctrl.sortedBy === columnDefs.name && ctrl.sortAscending === false" class="fa fa-caret-down"></i> </th> </tr> </thead> <tbody> <tr ng-repeat="attributes in ctrl.configuration.data" ng-class="[\'row-\' + ctrl.configuration.getRowUid(attributes), ctrl.configuration.isRowSelected(attributes) ? \'ngeo-grid-active\': \'\']" ng-click="ctrl.clickRow(attributes, $event)" ng-mousedown=ctrl.preventTextSelection($event)> <td ng-repeat="columnDefs in ctrl.configuration.columnDefs" ng-bind-html="attributes[columnDefs.name] | ngeoTrustHtml"></td> </tr> </tbody> </table> </div> '},function(e,t,r){(function(e){
/**
 * floatThead wrapper for AngularJS
 * @version v0.1.0 - 2015-10-25
 * @link https://github.com/brandon-barker/angular-floatThead
 * @author Brandon Barker
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
(function(){"use strict";angular.module("floatThead",[]).directive("floatThead",["$timeout","$log",t]);function t(t,r){var i={require:"?ngModel",scope:{floatThead:"=?",floatTheadEnabled:"=?"},controller:["$scope","$element","$attrs",function(e,t,r){if(!r.hasOwnProperty("floatTheadEnabled")){e.floatTheadEnabled=r.floatTheadEnabled=true}if(!r.hasOwnProperty("floatThead")||r.floatThead===""){e.floatThead=r.floatThead={}}}],link:n,restrict:"A"};return i;function n(i,n,a,o){i.$watch("floatTheadEnabled",function(t){if(t===true){if(angular.isObject(i.floatThead)){e(n).floatThead(i.floatThead)}}else{e(n).floatThead("destroy")}});i.$watch("floatThead",function(t,r){if(t===r||!i.floatTheadEnabled){return}e(n).floatThead("destroy");if(angular.isObject(t)){e(n).floatThead(t)}},true);if(o){o.$formatters.push(function(){if(i.floatTheadEnabled&&angular.isObject(i.floatThead)){t(function(){e(n).floatThead("reflow")})}})}else{r.info("floatThead: ngModel not provided!")}n.bind("update",function(){t(function(){e(n).floatThead("reflow")},0)});n.bind("$destroy",function(){e(n).floatThead("destroy")})}}})()}).call(this,r(24))},function(e,t,r){(function(t){/** @preserve jQuery.floatThead 2.1.2 - https://mkoryak.github.io/floatThead/ - Copyright (c) 2012 - 2018 Misha Koryak **/
// @license MIT
(function(e){e.floatThead=e.floatThead||{};e.floatThead.defaults={headerCellSelector:"tr:visible:first>*:visible",zIndex:1001,position:"auto",top:0,bottom:0,scrollContainer:function(t){return e([])},responsiveContainer:function(t){return e([])},getSizingRow:function(e,t,r){return e.find("tbody tr:visible:first>*:visible")},floatTableClass:"floatThead-table",floatWrapperClass:"floatThead-wrapper",floatContainerClass:"floatThead-container",copyTableClass:true,autoReflow:false,debug:false,support:{bootstrap:true,datatables:true,jqueryUI:true,perfectScrollbar:true},floatContainerCss:{"overflow-x":"hidden"}};var t=function t(){var r={};var i=Object.prototype.hasOwnProperty,n=["Arguments","Function","String","Number","Date","RegExp"];r.has=function(e,t){return i.call(e,t)};r.keys=Object.keys||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var i in e)if(r.has(e,i))t.push(i);return t};var a=0;r.uniqueId=function(e){var t=++a+"";return e?e+t:t};e.each(n,function(){var e=this;r["is"+e]=function(t){return Object.prototype.toString.call(t)=="[object "+e+"]"}});r.debounce=function(e,t,r){var i,n,a,o,s;return function(){a=this;n=arguments;o=new Date;var l=function(){var u=new Date-o;if(u<t){i=setTimeout(l,t-u)}else{i=null;if(!r)s=e.apply(a,n)}};var u=r&&!i;if(!i){i=setTimeout(l,t)}if(u)s=e.apply(a,n);return s}};return r}();var r=typeof MutationObserver!=="undefined";var i=function(){for(var e=3,t=document.createElement("b"),r=t.all||[];e=1+e,t.innerHTML="\x3c!--[if gt IE "+e+"]><i><![endif]--\x3e",r[0];);return 4<e?e:document.documentMode}();var n=/Gecko\//.test(navigator.userAgent);var a=/WebKit\//.test(navigator.userAgent);if(!(i||n||a)){i=11}var o=function(){if(a){var t=e("<div>").css("width",0).append(e("<table>").css("max-width","100%").append(e("<tr>").append(e("<th>").append(e("<div>").css("min-width",100).text("X")))));e("body").append(t);var r=t.find("table").width()==0;t.remove();return r}return false};var s=!n&&!i;var l=e(window);var u=n&&window.matchMedia;if(!window.matchMedia||u){var c=window.onbeforeprint;var f=window.onafterprint;window.onbeforeprint=function(){c&&c();l.triggerHandler("beforeprint")};window.onafterprint=function(){f&&f();l.triggerHandler("afterprint")}}function h(e,r){if(i==8){var n=l.width();var a=t.debounce(function(){var e=l.width();if(n!=e){n=e;r()}},1);l.on(e,a)}else{l.on(e,t.debounce(r,1))}}function d(t){var r=t[0];var i=r.parentElement;do{var n=window.getComputedStyle(i).getPropertyValue("overflow");if(n!="visible")break}while(i=i.parentElement);if(i==document.body){return e([])}return e(i)}function p(e){window&&window.console&&window.console.error&&window.console.error("jQuery.floatThead: "+e)}function v(e){var t=e.getBoundingClientRect();return t.width||t.right-t.left}function g(){var e=document.createElement("scrolltester");e.style.cssText="width:100px;height:100px;overflow:scroll!important;position:absolute;top:-9999px;display:block";document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;document.body.removeChild(e);return t}function m(e){if(e.dataTableSettings){for(var t=0;t<e.dataTableSettings.length;t++){var r=e.dataTableSettings[t].nTable;if(e[0]==r){return true}}}return false}function y(e,t,r){var i=r?"outerWidth":"width";if(o&&e.css("max-width")){var n=0;if(r){n+=parseInt(e.css("borderLeft"),10);n+=parseInt(e.css("borderRight"),10)}for(var a=0;a<t.length;a++){n+=v(t.get(a))}return n}else{return e[i]()}}e.fn.floatThead=function(n){n=n||{};if(i<8){return this}var c=null;if(t.isFunction(o)){o=o()}if(t.isString(n)){var f=n;var _=Array.prototype.slice.call(arguments,1);var b=this;this.filter("table").each(function(){var r=e(this);var i=r.data("floatThead-lazy");if(i){r.floatThead(i)}var n=r.data("floatThead-attached");if(n&&t.isFunction(n[f])){var a=n[f].apply(this,_);if(a!==undefined){b=a}}});return b}var w=e.extend({},e.floatThead.defaults||{},n);e.each(n,function(r,i){if(!(r in e.floatThead.defaults)&&w.debug){p("Used ["+r+"] key to init plugin, but that param is not an option for the plugin. Valid options are: "+t.keys(e.floatThead.defaults).join(", "))}});if(w.debug){var S=e.fn.jquery.split(".");if(parseInt(S[0],10)==1&&parseInt(S[1],10)<=7){p("jQuery version "+e.fn.jquery+" detected! This plugin supports 1.8 or better, or 1.7.x with jQuery UI 1.8.24 -> http://jqueryui.com/resources/download/jquery-ui-1.8.24.zip")}}this.filter(":not(."+w.floatTableClass+")").each(function(){var n=t.uniqueId();var o=e(this);if(o.data("floatThead-attached")){return true}if(!o.is("table")){throw new Error('jQuery.floatThead must be run on a table element. ex: $("table").floatThead();')}r=w.autoReflow&&r;var f=o.children("thead:first");var _=o.children("tbody:first");if(f.length==0||_.length==0){if(w.debug){if(f.length==0){p("The thead element is missing.")}else{p("The tbody element is missing.")}}o.data("floatThead-lazy",w);o.unbind("reflow").one("reflow",function(){o.floatThead(w)});return}if(o.data("floatThead-lazy")){o.unbind("reflow")}o.data("floatThead-lazy",false);var b=true;var S,C;var x={vertical:0,horizontal:0};if(t.isFunction(g)){g=g()}var O=0;if(w.scrollContainer===true){w.scrollContainer=d}var T=w.scrollContainer(o)||e([]);var E=T.length>0;var M=E?e([]):w.responsiveContainer(o)||e([]);var j=ge();var A=null;if(w.position==="auto"){A=null}else if(w.position==="fixed"){A=false}else if(w.position==="absolute"){A=true}else if(w.debug){p('Invalid value given to "position" option, valid is "fixed", "absolute" and "auto". You passed: ',w.position)}if(A==null){A=E}var P=o.find("caption");var k=P.length==1;if(k){var I=(P.css("caption-side")||P.attr("align")||"top")==="top"}var D=e("<fthfoot>").css({display:"table-footer-group","border-spacing":0,height:0,"border-collapse":"collapse",visibility:"hidden"});var R=false;var L=e([]);var $=i<=9&&!E&&A;var N=e("<table/>");var F=e("<colgroup/>");var G=o.children("colgroup:first");var U=true;if(G.length==0){G=e("<colgroup/>");U=false}var H=e("<fthtr>").css({display:"table-row","border-spacing":0,height:0,"border-collapse":"collapse"});var Y=e("<div>").css(w.floatContainerCss).attr("aria-hidden","true");var W=false;var V=e("<thead/>");var z=e('<tr class="size-row" aria-hidden="true"/>');var q=e([]);var B=e([]);var X=e([]);var K=e([]);V.append(z);o.prepend(G);if(s){D.append(H);o.append(D)}N.append(F);Y.append(N);if(w.copyTableClass){N.attr("class",o.attr("class"))}N.attr({cellpadding:o.attr("cellpadding"),cellspacing:o.attr("cellspacing"),border:o.attr("border")});var Z=o.css("display");N.css({borderCollapse:o.css("borderCollapse"),border:o.css("border"),display:Z});if(!E){N.css("width","auto")}if(Z==="none"){W=true}N.addClass(w.floatTableClass).css({margin:0,"border-bottom-width":0});if(A){var Q=function(t,r){var i=t.css("position");var n=i=="relative"||i=="absolute";var a=t;if(!n||r){var o={paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight")};Y.css(o);a=t.data("floatThead-containerWrap")||t.wrap(e("<div>").addClass(w.floatWrapperClass).css({position:"relative",clear:"both"})).parent();t.data("floatThead-containerWrap",a);R=true}return a};if(E){L=Q(T,true);L.prepend(Y)}else{L=Q(o);o.before(Y)}}else{o.before(Y)}Y.css({position:A?"absolute":"fixed",marginTop:0,top:A?0:"auto",zIndex:w.zIndex,willChange:"transform"});Y.addClass(w.floatContainerClass);oe();var J={"table-layout":"fixed"};var ee={"table-layout":o.css("tableLayout")||"auto"};var te=o[0].style.width||"";var re=o.css("minWidth")||"";function ie(e){return e+".fth-"+n+".floatTHead"}function ne(){var t=0;f.children("tr:visible").each(function(){t+=e(this).outerHeight(true)});if(o.css("border-collapse")=="collapse"){var r=parseInt(o.css("border-top-width"),10);var i=parseInt(o.find("thead tr:first").find(">*:first").css("border-top-width"),10);if(r>i){t-=r/2}}z.outerHeight(t);q.outerHeight(t)}function ae(){var e=y(o,K,true);var t=j?M:T;var r=t.length?v(t[0]):e;var i=t.css("overflow-y")!="hidden"?r-x.vertical:r;Y.width(i);if(E){var n=100*e/i;N.css("width",n+"%")}else{N.outerWidth(e)}}function oe(){S=(t.isFunction(w.top)?w.top(o):w.top)||0;C=(t.isFunction(w.bottom)?w.bottom(o):w.bottom)||0}function se(){var t;var r=f.find(w.headerCellSelector);if(U){t=G.find("col").length}else{t=0;r.each(function(){t+=parseInt(e(this).attr("colspan")||1,10)})}if(t!==O){O=t;var i=[],n=[],a=[],o;for(var l=0;l<t;l++){o=r.eq(l).text();i.push('<th class="floatThead-col" aria-label="'+o+'"/>');n.push("<col/>");a.push(e("<fthtd>").css({display:"table-cell",height:0,width:"auto"}))}n=n.join("");i=i.join("");if(s){H.empty();H.append(a);K=H.find("fthtd")}z.html(i);q=z.find("th");if(!U){G.html(n)}B=G.find("col");F.html(n);X=F.find("col")}return t}function le(){if(!b){b=true;if(A){var e=y(o,K,true);var t=L.width();if(e>t){o.css("minWidth",e)}}o.css(J);N.css(J);N.append(f);_.before(V);ne()}}function ue(){if(b){b=false;if(A){o.width(te)}V.detach();o.prepend(f);o.css(ee);N.css(ee);o.css("minWidth",re);o.css("minWidth",y(o,K))}}var ce=false;function fe(e){if(ce!=e){ce=e;o.triggerHandler("floatThead",[e,Y])}}function he(e){if(A!=e){A=e;Y.css({position:A?"absolute":"fixed"})}}function de(e,t,r,i){if(s){return r}else if(i){return w.getSizingRow(e,t,r)}else{return t}}function pe(){var e;var t=se();return function(){var r=Y.scrollLeft();B=G.find("col");var n=de(o,B,K,i);if(n.length==t&&t>0){if(!U){for(e=0;e<t;e++){B.eq(e).css("width","")}}ue();var a=[];for(e=0;e<t;e++){a[e]=v(n.get(e))}for(e=0;e<t;e++){X.eq(e).width(a[e]);B.eq(e).width(a[e])}le()}else{N.append(f);o.css(ee);N.css(ee);ne()}Y.scrollLeft(r);o.triggerHandler("reflowed",[Y])}}function ve(e){var t=T.css("border-"+e+"-width");var r=0;if(t&&~t.indexOf("px")){r=parseInt(t,10)}return r}function ge(){return M.css("overflow-x")=="auto"}function me(){var e=T.scrollTop();var t;var r=0;var i=k?P.outerHeight(true):0;var n=I?i:-i;var s=Y.height();var u=o.offset();var c=0;var f=0;if(E){var h=T.offset();r=u.top-h.top+e;if(k&&I){r+=i}c=ve("left");f=ve("top");r-=f}else{t=u.top-S-s+C+x.horizontal}var d=l.scrollTop();var p=l.scrollLeft();var v=function(){return(ge()?M:T).scrollLeft()||0};var g=v();return function(h){j=ge();var m=o[0].offsetWidth<=0&&o[0].offsetHeight<=0;if(!m&&W){W=false;setTimeout(function(){o.triggerHandler("reflow")},1);return null}if(m){W=true;if(!A){return null}}if(h=="windowScroll"){d=l.scrollTop();p=l.scrollLeft()}else if(h=="containerScroll"){if(M.length){if(!j){return}g=M.scrollLeft()}else{e=T.scrollTop();g=T.scrollLeft()}}else if(h!="init"){d=l.scrollTop();p=l.scrollLeft();e=T.scrollTop();g=v()}if(a&&(d<0||p<0)){return}if($){if(h=="windowScrollDone"){he(true)}else{he(false)}}else if(h=="windowScrollDone"){return null}u=o.offset();if(k&&I){u.top+=i}var y,_;var b=o.outerHeight();if(E&&A){if(r>=e){var w=r-e+f;y=w>0?w:0;fe(false)}else{y=R?f:e;fe(true)}_=c}else if(!E&&A){if(d>t+b+n){y=b-s+n}else if(u.top>=d+S){y=0;ue();fe(false)}else{y=S+d-u.top+r+(I?i:0);le();fe(true)}_=g}else if(E&&!A){if(r>e||e-r>b){y=u.top-d;ue();fe(false)}else{y=u.top+e-d-r;le();fe(true)}_=u.left+g-p}else if(!E&&!A){if(d>t+b+n){y=b+S-d+t+n}else if(u.top>d+S){y=u.top-d;le();fe(false)}else{y=S;fe(true)}_=u.left+g-p}return{top:Math.round(y),left:Math.round(_)}}}function ye(){var e=null;var t=null;var r=null;return function(n,a,o){if(n!=null&&(e!=n.top||t!=n.left)){if(i===8){Y.css({top:n.top,left:n.left})}else{var s="translateX("+n.left+"px) translateY("+n.top+"px)";var l={"-webkit-transform":s,"-moz-transform":s,"-ms-transform":s,"-o-transform":s,transform:s,top:0};l[/rtl/i.test(document.documentElement.dir||"")?"right":"left"]=0;Y.css(l)}e=n.top;t=n.left}if(a){ae()}if(o){ne()}var u=(j?M:T).scrollLeft();if(!A||r!=u){Y.scrollLeft(u);r=u}}}function _e(){if(T.length){if(w.support&&w.support.perfectScrollbar&&T.data().perfectScrollbar){x={horizontal:0,vertical:0}}else{if(T.css("overflow-x")=="scroll"){x.horizontal=g}else{var e=T.width(),t=y(o,K);var r=i<n?g:0;x.horizontal=e-r<t?g:0}if(T.css("overflow-y")=="scroll"){x.vertical=g}else{var i=T.height(),n=o.height();var a=e<t?g:0;x.vertical=i-a<n?g:0}}}}_e();var be;var we=function(){be=pe();be()};we();var Se=me();var Ce=ye();Ce(Se("init"),true);var xe=t.debounce(function(){Ce(Se("windowScrollDone"),false)},1);var Oe=function(){Ce(Se("windowScroll"),false);if($){xe()}};var Te=function(){Ce(Se("containerScroll"),false)};var Ee=function(){if(o.is(":hidden")){return}oe();_e();we();Se=me();Ce=ye();Ce(Se("resize"),true,true)};var Me=t.debounce(function(){if(o.is(":hidden")){return}_e();oe();we();Se=me();Ce(Se("reflow"),true,true)},1);var je=function(){ue()};var Ae=function(){le()};var Pe=function(e){if(e.matches){je()}else{Ae()}};var ke=null;if(window.matchMedia&&window.matchMedia("print").addListener&&!u){ke=window.matchMedia("print");ke.addListener(Pe)}else{l.on("beforeprint",je);l.on("afterprint",Ae)}if(E){if(A){T.on(ie("scroll"),Te)}else{T.on(ie("scroll"),Te);l.on(ie("scroll"),Oe)}}else{M.on(ie("scroll"),Te);l.on(ie("scroll"),Oe)}l.on(ie("load"),Me);h(ie("resize"),Ee);o.on("reflow",Me);if(w.support&&w.support.datatables&&m(o)){o.on("filter",Me).on("sort",Me).on("page",Me)}if(w.support&&w.support.bootstrap){l.on(ie("shown.bs.tab"),Me)}if(w.support&&w.support.jqueryUI){l.on(ie("tabsactivate"),Me)}if(r){var Ie=null;if(t.isFunction(w.autoReflow)){Ie=w.autoReflow(o,T)}if(!Ie){Ie=T.length?T[0]:o[0]}c=new MutationObserver(function(e){var t=function(e){return e&&e[0]&&(e[0].nodeName=="THEAD"||e[0].nodeName=="TD"||e[0].nodeName=="TH")};for(var r=0;r<e.length;r++){if(!(t(e[r].addedNodes)||t(e[r].removedNodes))){Me();break}}});c.observe(Ie,{childList:true,subtree:true})}o.data("floatThead-attached",{destroy:function(){var e=".fth-"+n;ue();o.css(ee);G.remove();s&&D.remove();if(V.parent().length){V.replaceWith(f)}fe(false);if(r){c.disconnect();c=null}o.off("reflow reflowed");T.off(e);M.off(e);if(R){if(T.length){T.unwrap()}else{o.unwrap()}}if(E){T.data("floatThead-containerWrap",false)}else{o.data("floatThead-containerWrap",false)}o.css("minWidth",re);Y.remove();o.data("floatThead-attached",false);l.off(e);if(ke){ke.removeListener(Pe)}je=Ae=function(){};return function e(){return o.floatThead(w)}},reflow:function(){Me()},setHeaderHeight:function(){ne()},getFloatContainer:function(){return Y},getRowGroups:function(){if(b){return Y.find(">table>thead").add(o.children("tbody,tfoot"))}else{return o.children("thead,tbody,tfoot")}}})});return this}})(function(){var i=t;if(typeof e!=="undefined"&&e.exports&&!i){i=r(24)}return i}())}).call(this,r(24))},function(e,t){e.exports='<div class=ngeo-googlestreetview-instructions ng-if="$ctrl.location === null" translate> Click on a road on the map to start StreetView. </div> <div class=ngeo-googlestreetview-nodata ng-if=$ctrl.noDataAtLocation translate> Street View data not found for this location. </div> '},function(e,t){e.exports='<ul class=gmf-theme-selector> <li ng-repeat="theme in $ctrl.themes" ng-click=$ctrl.setTheme(theme) ng-class="{\'gmf-theme-selector-active\': $ctrl.gmfThemeManager.getThemeName() == theme.name}"> <img class=gmf-thumb ng-src={{::theme.icon}} /> <span class=gmf-text>{{theme.name | translate}}</span> </li> </ul> '},function(e,t){e.exports='<div class=gmf-search> <input type=text ng-attr-placeholder={{$ctrl.placeholder|translate}} class=form-control ng-model=$ctrl.inputValue ngeo-search=$ctrl.options ngeo-search-datasets=$ctrl.datasets ngeo-search-listeners=$ctrl.listeners> <span class="gmf-clear-button ng-hide" ng-hide="!$ctrl.clearButton || $ctrl.inputValue == \'\'" ng-click=$ctrl.onClearButton()> </span> </div> <span ng-if=$ctrl.colorChooser> <span ng-show=$ctrl.displayColorPicker ngeo-popover ngeo-popover-placement=bottom> <button class="gmf-color-button fa fa-tint" ngeo-popover-anchor data-original-title="{{\'Change the color of the search result\'|translate}}"></button> <div ngeo-popover-content> <div ngeo-colorpicker ngeo-colorpicker-color=$ctrl.color></div> </div> </span> </span> '},function(e,t){var r=e.exports={};var i;var n;function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){i=setTimeout}else{i=a}}catch(e){i=a}try{if(typeof clearTimeout==="function"){n=clearTimeout}else{n=o}}catch(e){n=o}})();function s(e){if(i===setTimeout){return setTimeout(e,0)}if((i===a||!i)&&setTimeout){i=setTimeout;return setTimeout(e,0)}try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}function l(e){if(n===clearTimeout){return clearTimeout(e)}if((n===o||!n)&&clearTimeout){n=clearTimeout;return clearTimeout(e)}try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}var u=[];var c=false;var f;var h=-1;function d(){if(!c||!f){return}c=false;if(f.length){u=f.concat(u)}else{h=-1}if(u.length){p()}}function p(){if(c){return}var e=s(d);c=true;var t=u.length;while(t){f=u;u=[];while(++h<t){if(f){f[h].run()}}h=-1;t=u.length}f=null;c=false;l(e)}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}}u.push(new v(e,t));if(u.length===1&&!c){s(p)}};function v(e,t){this.fun=e;this.array=t}v.prototype.run=function(){this.fun.apply(null,this.array)};r.title="browser";r.browser=true;r.env={};r.argv=[];r.version="";r.versions={};function g(){}r.on=g;r.addListener=g;r.once=g;r.off=g;r.removeListener=g;r.removeAllListeners=g;r.emit=g;r.prependListener=g;r.prependOnceListener=g;r.listeners=function(e){return[]};r.binding=function(e){throw new Error("process.binding is not supported")};r.cwd=function(){return"/"};r.chdir=function(e){throw new Error("process.chdir is not supported")};r.umask=function(){return 0}},function(e,t,r){(function(e,t){(function(e,r){"use strict";if(e.setImmediate){return}var i=1;var n={};var a=false;var o=e.document;var s;function l(e){if(typeof e!=="function"){e=new Function(""+e)}var t=new Array(arguments.length-1);for(var r=0;r<t.length;r++){t[r]=arguments[r+1]}var a={callback:e,args:t};n[i]=a;s(i);return i++}function u(e){delete n[e]}function c(e){var t=e.callback;var i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(r,i);break}}function f(e){if(a){setTimeout(f,0,e)}else{var t=n[e];if(t){a=true;try{c(t)}finally{u(e);a=false}}}}function h(){s=function(e){t.nextTick(function(){f(e)})}}function d(){if(e.postMessage&&!e.importScripts){var t=true;var r=e.onmessage;e.onmessage=function(){t=false};e.postMessage("","*");e.onmessage=r;return t}}function p(){var t="setImmediate$"+Math.random()+"$";var r=function(r){if(r.source===e&&typeof r.data==="string"&&r.data.indexOf(t)===0){f(+r.data.slice(t.length))}};if(e.addEventListener){e.addEventListener("message",r,false)}else{e.attachEvent("onmessage",r)}s=function(r){e.postMessage(t+r,"*")}}function v(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;f(t)};s=function(t){e.port2.postMessage(t)}}function g(){var e=o.documentElement;s=function(t){var r=o.createElement("script");r.onreadystatechange=function(){f(t);r.onreadystatechange=null;e.removeChild(r);r=null};e.appendChild(r)}}function m(){s=function(e){setTimeout(f,0,e)}}var y=Object.getPrototypeOf&&Object.getPrototypeOf(e);y=y&&y.setTimeout?y:e;if({}.toString.call(e.process)==="[object process]"){h()}else if(d()){p()}else if(e.MessageChannel){v()}else if(o&&"onreadystatechange"in o.createElement("script")){g()}else{m()}y.setImmediate=l;y.clearImmediate=u})(typeof self==="undefined"?typeof e==="undefined"?this:e:self)}).call(this,r(276),r(475))},function(e,t,r){(function(e){var i=typeof e!=="undefined"&&e||typeof self!=="undefined"&&self||window;var n=Function.prototype.apply;t.setTimeout=function(){return new a(n.call(setTimeout,i,arguments),clearTimeout)};t.setInterval=function(){return new a(n.call(setInterval,i,arguments),clearInterval)};t.clearTimeout=t.clearInterval=function(e){if(e){e.close()}};function a(e,t){this._id=e;this._clearFn=t}a.prototype.unref=a.prototype.ref=function(){};a.prototype.close=function(){this._clearFn.call(i,this._id)};t.enroll=function(e,t){clearTimeout(e._idleTimeoutId);e._idleTimeout=t};t.unenroll=function(e){clearTimeout(e._idleTimeoutId);e._idleTimeout=-1};t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;if(t>=0){e._idleTimeoutId=setTimeout(function t(){if(e._onTimeout)e._onTimeout()},t)}};r(476);t.setImmediate=typeof self!=="undefined"&&self.setImmediate||typeof e!=="undefined"&&e.setImmediate||this&&this.setImmediate;t.clearImmediate=typeof self!=="undefined"&&self.clearImmediate||typeof e!=="undefined"&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(276))},function(e,t,r){(function(i){var n,a;var n,a;
/*!
 * typeahead.js 1.2.0
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2017 Twitter, Inc. and other contributors; Licensed MIT
 */
/*!
 * typeahead.js 1.2.0
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2017 Twitter, Inc. and other contributors; Licensed MIT
 */
(function(i,o){if(true){!(n=[r(24)],a=function(e){return i["Bloodhound"]=o(e)}.apply(t,n),a!==undefined&&(e.exports=a))}else{}})(this,function(e){var t=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:false},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return typeof e==="string"},isNumber:function(e){return typeof e==="number"},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(e){return typeof e==="undefined"},isElement:function(e){return!!(e&&e.nodeType===1)},isJQuery:function(t){return t instanceof e},toStr:function e(r){return t.isUndefined(r)||r===null?"":r+""},bind:e.proxy,each:function(t,r){e.each(t,i);function i(e,t){return r(t,e)}},map:e.map,filter:e.grep,every:function(t,r){var i=true;if(!t){return i}e.each(t,function(e,n){if(!(i=r.call(null,n,e,t))){return false}});return!!i},some:function(t,r){var i=false;if(!t){return i}e.each(t,function(e,n){if(i=r.call(null,n,e,t)){return false}});return!!i},mixin:e.extend,identity:function(e){return e},clone:function(t){return e.extend(true,{},t)},getIdGenerator:function(){var e=0;return function(){return e++}},templatify:function t(r){return e.isFunction(r)?r:i;function i(){return String(r)}},defer:function(e){setTimeout(e,0)},debounce:function(e,t,r){var i,n;return function(){var a=this,o=arguments,s,l;s=function(){i=null;if(!r){n=e.apply(a,o)}};l=r&&!i;clearTimeout(i);i=setTimeout(s,t);if(l){n=e.apply(a,o)}return n}},throttle:function(e,t){var r,i,n,a,o,s;o=0;s=function(){o=new Date;n=null;a=e.apply(r,i)};return function(){var l=new Date,u=t-(l-o);r=this;i=arguments;if(u<=0){clearTimeout(n);n=null;o=l;a=e.apply(r,i)}else if(!n){n=setTimeout(s,u)}return a}},stringify:function(e){return t.isString(e)?e:JSON.stringify(e)},guid:function(){function e(e){var t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t}return"tt-"+e()+e(true)+e(true)+e()},noop:function(){}}}();var r="1.2.0";var i=function(){"use strict";return{nonword:r,whitespace:e,ngram:i,obj:{nonword:n(r),whitespace:n(e),ngram:n(i)}};function e(e){e=t.toStr(e);return e?e.split(/\s+/):[]}function r(e){e=t.toStr(e);return e?e.split(/\W+/):[]}function i(e){e=t.toStr(e);var r=[],i="";t.each(e.split(""),function(e){if(e.match(/\s+/)){i=""}else{r.push(i+e);i+=e}});return r}function n(e){return function r(i){i=t.isArray(i)?i:[].slice.call(arguments,0);return function r(n){var a=[];t.each(i,function(r){a=a.concat(e(t.toStr(n[r])))});return a}}}}();var n=function(){"use strict";function r(r){this.maxSize=t.isNumber(r)?r:100;this.reset();if(this.maxSize<=0){this.set=this.get=e.noop}}t.mixin(r.prototype,{set:function e(t,r){var i=this.list.tail,a;if(this.size>=this.maxSize){this.list.remove(i);delete this.hash[i.key];this.size--}if(a=this.hash[t]){a.val=r;this.list.moveToFront(a)}else{a=new n(t,r);this.list.add(a);this.hash[t]=a;this.size++}},get:function e(t){var r=this.hash[t];if(r){this.list.moveToFront(r);return r.val}},reset:function e(){this.size=0;this.hash={};this.list=new i}});function i(){this.head=this.tail=null}t.mixin(i.prototype,{add:function e(t){if(this.head){t.next=this.head;this.head.prev=t}this.head=t;this.tail=this.tail||t},remove:function e(t){t.prev?t.prev.next=t.next:this.head=t.next;t.next?t.next.prev=t.prev:this.tail=t.prev},moveToFront:function(e){this.remove(e);this.add(e)}});function n(e,t){this.key=e;this.val=t;this.prev=this.next=null}return r}();var a=function(){"use strict";var r;try{r=window.localStorage;r.setItem("~~~","!");r.removeItem("~~~")}catch(e){r=null}function i(e,i){this.prefix=["__",e,"__"].join("");this.ttlKey="__ttl__";this.keyMatcher=new RegExp("^"+t.escapeRegExChars(this.prefix));this.ls=i||r;!this.ls&&this._noop()}t.mixin(i.prototype,{_prefix:function(e){return this.prefix+e},_ttlKey:function(e){return this._prefix(e)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=t.noop},_safeSet:function(e,t){try{this.ls.setItem(e,t)}catch(e){if(e.name==="QuotaExceededError"){this.clear();this._noop()}}},get:function(e){if(this.isExpired(e)){this.remove(e)}return o(this.ls.getItem(this._prefix(e)))},set:function(e,r,i){if(t.isNumber(i)){this._safeSet(this._ttlKey(e),a(n()+i))}else{this.ls.removeItem(this._ttlKey(e))}return this._safeSet(this._prefix(e),a(r))},remove:function(e){this.ls.removeItem(this._ttlKey(e));this.ls.removeItem(this._prefix(e));return this},clear:function(){var e,t=s(this.keyMatcher);for(e=t.length;e--;){this.remove(t[e])}return this},isExpired:function(e){var r=o(this.ls.getItem(this._ttlKey(e)));return t.isNumber(r)&&n()>r?true:false}});return i;function n(){return(new Date).getTime()}function a(e){return JSON.stringify(t.isUndefined(e)?null:e)}function o(t){return e.parseJSON(t)}function s(e){var t,i,n=[],a=r.length;for(t=0;t<a;t++){if((i=r.key(t)).match(e)){n.push(i.replace(e,""))}}return n}}();var o=function(){"use strict";var r=0,i={},a=new n(10);function o(e){e=e||{};this.maxPendingRequests=e.maxPendingRequests||6;this.cancelled=false;this.lastReq=null;this._send=e.transport;this._get=e.limiter?e.limiter(this._get):this._get;this._cache=e.cache===false?new n(0):a}o.setMaxPendingRequests=function e(t){this.maxPendingRequests=t};o.resetCache=function e(){a.reset()};t.mixin(o.prototype,{_fingerprint:function t(r){r=r||{};return r.url+r.type+e.param(r.data||{})},_get:function(e,t){var n=this,a,o;a=this._fingerprint(e);if(this.cancelled||a!==this.lastReq){return}if(o=i[a]){o.done(s).fail(l)}else if(r<this.maxPendingRequests){r++;i[a]=this._send(e).done(s).fail(l).always(u)}else{this.onDeckRequestArgs=[].slice.call(arguments,0)}function s(e){t(null,e);n._cache.set(a,e)}function l(){t(true)}function u(){r--;delete i[a];if(n.onDeckRequestArgs){n._get.apply(n,n.onDeckRequestArgs);n.onDeckRequestArgs=null}}},get:function(r,i){var n,a;i=i||e.noop;r=t.isString(r)?{url:r}:r||{};a=this._fingerprint(r);this.cancelled=false;this.lastReq=a;if(n=this._cache.get(a)){i(null,n)}else{this._get(r,i)}},cancel:function(){this.cancelled=true}});return o}();var s=window.SearchIndex=function(){"use strict";var r="c",i="i";function n(r){r=r||{};if(!r.datumTokenizer||!r.queryTokenizer){e.error("datumTokenizer and queryTokenizer are both required")}this.identify=r.identify||t.stringify;this.datumTokenizer=r.datumTokenizer;this.queryTokenizer=r.queryTokenizer;this.matchAnyQueryToken=r.matchAnyQueryToken;this.reset()}t.mixin(n.prototype,{bootstrap:function e(t){this.datums=t.datums;this.trie=t.trie},add:function(e){var n=this;e=t.isArray(e)?e:[e];t.each(e,function(e){var s,l;n.datums[s=n.identify(e)]=e;l=a(n.datumTokenizer(e));t.each(l,function(e){var t,a,l;t=n.trie;a=e.split("");while(l=a.shift()){t=t[r][l]||(t[r][l]=o());t[i].push(s)}})})},get:function e(r){var i=this;return t.map(r,function(e){return i.datums[e]})},search:function e(n){var o=this,u,c;u=a(this.queryTokenizer(n));t.each(u,function(e){var t,n,a,s;if(c&&c.length===0&&!o.matchAnyQueryToken){return false}t=o.trie;n=e.split("");while(t&&(a=n.shift())){t=t[r][a]}if(t&&n.length===0){s=t[i].slice(0);c=c?l(c,s):s}else{if(!o.matchAnyQueryToken){c=[];return false}}});return c?t.map(s(c),function(e){return o.datums[e]}):[]},all:function e(){var t=[];for(var r in this.datums){t.push(this.datums[r])}return t},reset:function e(){this.datums={};this.trie=o()},serialize:function e(){return{datums:this.datums,trie:this.trie}}});return n;function a(e){e=t.filter(e,function(e){return!!e});e=t.map(e,function(e){return e.toLowerCase()});return e}function o(){var e={};e[i]=[];e[r]={};return e}function s(e){var t={},r=[];for(var i=0,n=e.length;i<n;i++){if(!t[e[i]]){t[e[i]]=true;r.push(e[i])}}return r}function l(e,t){var r=0,i=0,n=[];e=e.sort();t=t.sort();var a=e.length,o=t.length;while(r<a&&i<o){if(e[r]<t[i]){r++}else if(e[r]>t[i]){i++}else{n.push(e[r]);r++;i++}}return n}}();var l=function(){"use strict";var e;e={data:"data",protocol:"protocol",thumbprint:"thumbprint"};function r(e){this.url=e.url;this.ttl=e.ttl;this.cache=e.cache;this.prepare=e.prepare;this.transform=e.transform;this.transport=e.transport;this.thumbprint=e.thumbprint;this.storage=new a(e.cacheKey)}t.mixin(r.prototype,{_settings:function e(){return{url:this.url,type:"GET",dataType:"json"}},store:function t(r){if(!this.cache){return}this.storage.set(e.data,r,this.ttl);this.storage.set(e.protocol,location.protocol,this.ttl);this.storage.set(e.thumbprint,this.thumbprint,this.ttl)},fromCache:function t(){var r={},i;if(!this.cache){return null}r.data=this.storage.get(e.data);r.protocol=this.storage.get(e.protocol);r.thumbprint=this.storage.get(e.thumbprint);i=r.thumbprint!==this.thumbprint||r.protocol!==location.protocol;return r.data&&!i?r.data:null},fromNetwork:function(e){var t=this,r;if(!e){return}r=this.prepare(this._settings());this.transport(r).fail(i).done(n);function i(){e(true)}function n(r){e(null,t.transform(r))}},clear:function e(){this.storage.clear();return this}});return r}();var u=function(){"use strict";function e(e){this.url=e.url;this.prepare=e.prepare;this.transform=e.transform;this.indexResponse=e.indexResponse;this.transport=new o({cache:e.cache,limiter:e.limiter,transport:e.transport,maxPendingRequests:e.maxPendingRequests})}t.mixin(e.prototype,{_settings:function e(){return{url:this.url,type:"GET",dataType:"json"}},get:function e(t,r){var i=this,n;if(!r){return}t=t||"";n=this.prepare(t,this._settings());return this.transport.get(n,a);function a(e,t){e?r([]):r(i.transform(t))}},cancelLastRequest:function e(){this.transport.cancel()}});return e}();var c=function(){"use strict";return function r(a){var o,s;o={initialize:true,identify:t.stringify,datumTokenizer:null,queryTokenizer:null,matchAnyQueryToken:false,sufficient:5,indexRemote:false,sorter:null,local:[],prefetch:null,remote:null};a=t.mixin(o,a||{});!a.datumTokenizer&&e.error("datumTokenizer is required");!a.queryTokenizer&&e.error("queryTokenizer is required");s=a.sorter;a.sorter=s?function(e){return e.sort(s)}:t.identity;a.local=t.isFunction(a.local)?a.local():a.local;a.prefetch=i(a.prefetch);a.remote=n(a.remote);return a};function i(i){var n;if(!i){return null}n={url:null,ttl:24*60*60*1e3,cache:true,cacheKey:null,thumbprint:"",prepare:t.identity,transform:t.identity,transport:null};i=t.isString(i)?{url:i}:i;i=t.mixin(n,i);!i.url&&e.error("prefetch requires url to be set");i.transform=i.filter||i.transform;i.cacheKey=i.cacheKey||i.url;i.thumbprint=r+i.thumbprint;i.transport=i.transport?s(i.transport):e.ajax;return i}function n(r){var i;if(!r){return}i={url:null,cache:true,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:t.identity,transport:null};r=t.isString(r)?{url:r}:r;r=t.mixin(i,r);!r.url&&e.error("remote requires url to be set");r.transform=r.filter||r.transform;r.prepare=a(r);r.limiter=o(r);r.transport=r.transport?s(r.transport):e.ajax;delete r.replace;delete r.wildcard;delete r.rateLimitBy;delete r.rateLimitWait;return r}function a(e){var t,r,i;t=e.prepare;r=e.replace;i=e.wildcard;if(t){return t}if(r){t=n}else if(e.wildcard){t=a}else{t=o}return t;function n(e,t){t.url=r(t.url,e);return t}function a(e,t){t.url=t.url.replace(i,encodeURIComponent(e));return t}function o(e,t){return t}}function o(e){var r,i,n;r=e.limiter;i=e.rateLimitBy;n=e.rateLimitWait;if(!r){r=/^throttle$/i.test(i)?o(n):a(n)}return r;function a(e){return function r(i){return t.debounce(i,e)}}function o(e){return function r(i){return t.throttle(i,e)}}}function s(r){return function i(n){var a=e.Deferred();r(n,o,s);return a;function o(e){t.defer(function(){a.resolve(e)})}function s(e){t.defer(function(){a.reject(e)})}}}}();var f=function(){"use strict";var r;r=window&&window.Bloodhound;function n(e){e=c(e);this.sorter=e.sorter;this.identify=e.identify;this.sufficient=e.sufficient;this.indexRemote=e.indexRemote;this.local=e.local;this.remote=e.remote?new u(e.remote):null;this.prefetch=e.prefetch?new l(e.prefetch):null;this.index=new s({identify:this.identify,datumTokenizer:e.datumTokenizer,queryTokenizer:e.queryTokenizer});e.initialize!==false&&this.initialize()}n.noConflict=function e(){window&&(window.Bloodhound=r);return n};n.tokenizers=i;t.mixin(n.prototype,{__ttAdapter:function e(){var t=this;return this.remote?r:i;function r(e,r,i){return t.search(e,r,i)}function i(e,r){return t.search(e,r)}},_loadPrefetch:function t(){var r=this,i,n;i=e.Deferred();if(!this.prefetch){i.resolve()}else if(n=this.prefetch.fromCache()){this.index.bootstrap(n);i.resolve()}else{this.prefetch.fromNetwork(a)}return i.promise();function a(e,t){if(e){return i.reject()}r.add(t);r.prefetch.store(r.index.serialize());i.resolve()}},_initialize:function e(){var t=this,r;this.clear();(this.initPromise=this._loadPrefetch()).done(i);return this.initPromise;function i(){t.add(t.local)}},initialize:function e(t){return!this.initPromise||t?this._initialize():this.initPromise},add:function e(t){this.index.add(t);return this},get:function e(r){r=t.isArray(r)?r:[].slice.call(arguments);return this.index.get(r)},search:function e(r,i,n){var a=this,o;i=i||t.noop;n=n||t.noop;o=this.sorter(this.index.search(r));i(this.remote?o.slice():o);if(this.remote&&o.length<this.sufficient){this.remote.get(r,s)}else if(this.remote){this.remote.cancelLastRequest()}return this;function s(e){var r=[];t.each(e,function(e){!t.some(o,function(t){return a.identify(e)===a.identify(t)})&&r.push(e)});a.indexRemote&&a.add(r);n(r)}},all:function e(){return this.index.all()},clear:function e(){this.index.reset();return this},clearPrefetchCache:function e(){this.prefetch&&this.prefetch.clear();return this},clearRemoteCache:function e(){o.resetCache();return this},ttAdapter:function e(){return this.__ttAdapter()}});return n}();return f});(function(i,o){if(true){!(n=[r(24)],a=function(e){return o(e)}.apply(t,n),a!==undefined&&(e.exports=a))}else{}})(this,function(e){var t=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:false},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return typeof e==="string"},isNumber:function(e){return typeof e==="number"},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(e){return typeof e==="undefined"},isElement:function(e){return!!(e&&e.nodeType===1)},isJQuery:function(t){return t instanceof e},toStr:function e(r){return t.isUndefined(r)||r===null?"":r+""},bind:e.proxy,each:function(t,r){e.each(t,i);function i(e,t){return r(t,e)}},map:e.map,filter:e.grep,every:function(t,r){var i=true;if(!t){return i}e.each(t,function(e,n){if(!(i=r.call(null,n,e,t))){return false}});return!!i},some:function(t,r){var i=false;if(!t){return i}e.each(t,function(e,n){if(i=r.call(null,n,e,t)){return false}});return!!i},mixin:e.extend,identity:function(e){return e},clone:function(t){return e.extend(true,{},t)},getIdGenerator:function(){var e=0;return function(){return e++}},templatify:function t(r){return e.isFunction(r)?r:i;function i(){return String(r)}},defer:function(e){setTimeout(e,0)},debounce:function(e,t,r){var i,n;return function(){var a=this,o=arguments,s,l;s=function(){i=null;if(!r){n=e.apply(a,o)}};l=r&&!i;clearTimeout(i);i=setTimeout(s,t);if(l){n=e.apply(a,o)}return n}},throttle:function(e,t){var r,i,n,a,o,s;o=0;s=function(){o=new Date;n=null;a=e.apply(r,i)};return function(){var l=new Date,u=t-(l-o);r=this;i=arguments;if(u<=0){clearTimeout(n);n=null;o=l;a=e.apply(r,i)}else if(!n){n=setTimeout(s,u)}return a}},stringify:function(e){return t.isString(e)?e:JSON.stringify(e)},guid:function(){function e(e){var t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t}return"tt-"+e()+e(true)+e(true)+e()},noop:function(){}}}();var r=function(){"use strict";var e={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return r;function r(r){var o,s;s=t.mixin({},e,r);o={css:a(),classes:s,html:i(s),selectors:n(s)};return{css:o.css,html:o.html,classes:o.classes,selectors:o.selectors,mixin:function(e){t.mixin(e,o)}}}function i(e){return{wrapper:'<span class="'+e.wrapper+'"></span>',menu:'<div role="listbox" class="'+e.menu+'"></div>'}}function n(e){var r={};t.each(e,function(e,t){r[t]="."+e});return r}function a(){var e={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};if(t.isMsie()){t.mixin(e.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"})}return e}}();var n=function(){"use strict";var r,i;r="typeahead:";i={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"};function n(t){if(!t||!t.el){e.error("EventBus initialized without el")}this.$el=e(t.el)}t.mixin(n.prototype,{_trigger:function(t,i){var n=e.Event(r+t);this.$el.trigger.call(this.$el,n,i||[]);return n},before:function(e){var t,r;t=[].slice.call(arguments,1);r=this._trigger("before"+e,t);return r.isDefaultPrevented()},trigger:function(e){var t;this._trigger(e,[].slice.call(arguments,1));if(t=i[e]){this._trigger(t,[].slice.call(arguments,1))}}});return n}();var a=function(){"use strict";var e=/\s+/,t=u();return{onSync:a,onAsync:n,off:o,trigger:s};function r(t,r,i,n){var a;if(!i){return this}r=r.split(e);i=n?c(i,n):i;this._callbacks=this._callbacks||{};while(a=r.shift()){this._callbacks[a]=this._callbacks[a]||{sync:[],async:[]};this._callbacks[a][t].push(i)}return this}function n(e,t,i){return r.call(this,"async",e,t,i)}function a(e,t,i){return r.call(this,"sync",e,t,i)}function o(t){var r;if(!this._callbacks){return this}t=t.split(e);while(r=t.shift()){delete this._callbacks[r]}return this}function s(r){var i,n,a,o,s;if(!this._callbacks){return this}r=r.split(e);a=[].slice.call(arguments,1);while((i=r.shift())&&(n=this._callbacks[i])){o=l(n.sync,this,[i].concat(a));s=l(n.async,this,[i].concat(a));o()&&t(s)}return this}function l(e,t,r){return i;function i(){var i;for(var n=0,a=e.length;!i&&n<a;n+=1){i=e[n].apply(t,r)===false}return!i}}function u(){var e;if(window.setImmediate){e=function e(t){i(function(){t()})}}else{e=function e(t){setTimeout(function(){t()},0)}}return e}function c(e,t){return e.bind?e.bind(t):function(){e.apply(t,[].slice.call(arguments,0))}}}();var o=function(e){"use strict";var r={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:false,caseSensitive:false,diacriticInsensitive:false};var i={A:"[AaªÀ-Åà-åĀ-ąǍǎȀ-ȃȦȧᴬᵃḀḁẚẠ-ảₐ℀℁℻⒜Ⓐⓐ㍱-㍴㎀-㎄㎈㎉㎩-㎯㏂㏊㏟㏿Ａａ]",B:"[BbᴮᵇḂ-ḇℬ⒝Ⓑⓑ㍴㎅-㎇㏃㏈㏔㏝Ｂｂ]",C:"[CcÇçĆ-čᶜ℀ℂ℃℅℆ℭⅭⅽ⒞Ⓒⓒ㍶㎈㎉㎝㎠㎤㏄-㏇Ｃｃ]",D:"[DdĎďǄ-ǆǱ-ǳᴰᵈḊ-ḓⅅⅆⅮⅾ⒟Ⓓⓓ㋏㍲㍷-㍹㎗㎭-㎯㏅㏈Ｄｄ]",E:"[EeÈ-Ëè-ëĒ-ěȄ-ȇȨȩᴱᵉḘ-ḛẸ-ẽₑ℡ℯℰⅇ⒠Ⓔⓔ㉐㋍㋎Ｅｅ]",F:"[FfᶠḞḟ℉ℱ℻⒡Ⓕⓕ㎊-㎌㎙ﬀ-ﬄＦｆ]",G:"[GgĜ-ģǦǧǴǵᴳᵍḠḡℊ⒢Ⓖⓖ㋌㋍㎇㎍-㎏㎓㎬㏆㏉㏒㏿Ｇｇ]",H:"[HhĤĥȞȟʰᴴḢ-ḫẖℋ-ℎ⒣Ⓗⓗ㋌㍱㎐-㎔㏊㏋㏗Ｈｈ]",I:"[IiÌ-Ïì-ïĨ-İĲĳǏǐȈ-ȋᴵᵢḬḭỈ-ịⁱℐℑℹⅈⅠ-ⅣⅥ-ⅨⅪⅫⅰ-ⅳⅵ-ⅸⅺⅻ⒤Ⓘⓘ㍺㏌㏕ﬁﬃＩｉ]",J:"[JjĲ-ĵǇ-ǌǰʲᴶⅉ⒥ⒿⓙⱼＪｊ]",K:"[KkĶķǨǩᴷᵏḰ-ḵK⒦Ⓚⓚ㎄㎅㎉㎏㎑㎘㎞㎢㎦㎪㎸㎾㏀㏆㏍-㏏Ｋｋ]",L:"[LlĹ-ŀǇ-ǉˡᴸḶḷḺ-ḽℒℓ℡Ⅼⅼ⒧Ⓛⓛ㋏㎈㎉㏐-㏓㏕㏖㏿ﬂﬄＬｌ]",M:"[MmᴹᵐḾ-ṃ℠™ℳⅯⅿ⒨Ⓜⓜ㍷-㍹㎃㎆㎎㎒㎖㎙-㎨㎫㎳㎷㎹㎽㎿㏁㏂㏎㏐㏔-㏖㏘㏙㏞㏟Ｍｍ]",N:"[NnÑñŃ-ŉǊ-ǌǸǹᴺṄ-ṋⁿℕ№⒩Ⓝⓝ㎁㎋㎚㎱㎵㎻㏌㏑Ｎｎ]",O:"[OoºÒ-Öò-öŌ-őƠơǑǒǪǫȌ-ȏȮȯᴼᵒỌ-ỏₒ℅№ℴ⒪Ⓞⓞ㍵㏇㏒㏖Ｏｏ]",P:"[PpᴾᵖṔ-ṗℙ⒫Ⓟⓟ㉐㍱㍶㎀㎊㎩-㎬㎰㎴㎺㏋㏗-㏚Ｐｐ]",Q:"[Qqℚ⒬Ⓠⓠ㏃Ｑｑ]",R:"[RrŔ-řȐ-ȓʳᴿᵣṘ-ṛṞṟ₨ℛ-ℝ⒭Ⓡⓡ㋍㍴㎭-㎯㏚㏛Ｒｒ]",S:"[SsŚ-šſȘșˢṠ-ṣ₨℁℠⒮Ⓢⓢ㎧㎨㎮-㎳㏛㏜ﬆＳｓ]",T:"[TtŢ-ťȚțᵀᵗṪ-ṱẗ℡™⒯Ⓣⓣ㉐㋏㎔㏏ﬅﬆＴｔ]",U:"[UuÙ-Üù-üŨ-ųƯưǓǔȔ-ȗᵁᵘᵤṲ-ṷỤ-ủ℆⒰Ⓤⓤ㍳㍺Ｕｕ]",V:"[VvᵛᵥṼ-ṿⅣ-Ⅷⅳ-ⅷ⒱Ⓥⓥⱽ㋎㍵㎴-㎹㏜㏞Ｖｖ]",W:"[WwŴŵʷᵂẀ-ẉẘ⒲Ⓦⓦ㎺-㎿㏝Ｗｗ]",X:"[XxˣẊ-ẍₓ℻Ⅸ-Ⅻⅸ-ⅻ⒳Ⓧⓧ㏓Ｘｘ]",Y:"[YyÝýÿŶ-ŸȲȳʸẎẏẙỲ-ỹ⒴Ⓨⓨ㏉Ｙｙ]",Z:"[ZzŹ-žǱ-ǳᶻẐ-ẕℤℨ⒵Ⓩⓩ㎐-㎔Ｚｚ]"};return function i(n){var o;n=t.mixin({},r,n);if(!n.node||!n.pattern){return}n.pattern=t.isArray(n.pattern)?n.pattern:[n.pattern];o=a(n.pattern,n.caseSensitive,n.wordsOnly,n.diacriticInsensitive);l(n.node,s);function s(t){var r,i,a;if(r=o.exec(t.data)){a=e.createElement(n.tagName);n.className&&(a.className=n.className);i=t.splitText(r.index);i.splitText(r[0].length);a.appendChild(i.cloneNode(true));t.parentNode.replaceChild(a,i)}return!!r}function l(e,t){var r,i=3;for(var n=0;n<e.childNodes.length;n++){r=e.childNodes[n];if(r.nodeType===i){n+=t(r)?1:0}else{l(r,t)}}}};function n(e){return i[e.toUpperCase()]||e}function a(e,r,i,a){var o=[],s;for(var l=0,u=e.length;l<u;l++){var c=t.escapeRegExChars(e[l]);if(a){c=c.replace(/\S/g,n)}o.push(c)}s=i?"\\b("+o.join("|")+")\\b":"("+o.join("|")+")";return r?new RegExp(s):new RegExp(s,"i")}}(window.document);var s=function(){"use strict";var r;r={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};function i(r,i){r=r||{};if(!r.input){e.error("input is missing")}i.mixin(this);this.$hint=e(r.hint);this.$input=e(r.input);this.$input.attr({"aria-activedescendant":"","aria-owns":this.$input.attr("id")+"_listbox",role:"combobox","aria-readonly":"true","aria-autocomplete":"list"});e(i.menu).attr("id",this.$input.attr("id")+"_listbox");this.query=this.$input.val();this.queryWhenFocused=this.hasFocus()?this.query:null;this.$overflowHelper=n(this.$input);this._checkLanguageDirection();if(this.$hint.length===0){this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=t.noop}this.onSync("cursorchange",this._updateDescendent)}i.normalizeQuery=function(e){return t.toStr(e).replace(/^\s*/g,"").replace(/\s{2,}/g," ")};t.mixin(i.prototype,a,{_onBlur:function e(){this.resetInputValue();this.trigger("blurred")},_onFocus:function e(){this.queryWhenFocused=this.query;this.trigger("focused")},_onKeydown:function e(t){var i=r[t.which||t.keyCode];this._managePreventDefault(i,t);if(i&&this._shouldTrigger(i,t)){this.trigger(i+"Keyed",t)}},_onInput:function e(){this._setQuery(this.getInputValue());this.clearHintIfInvalid();this._checkLanguageDirection()},_managePreventDefault:function e(t,r){var i;switch(t){case"up":case"down":i=!s(r);break;default:i=false}i&&r.preventDefault()},_shouldTrigger:function e(t,r){var i;switch(t){case"tab":i=!s(r);break;default:i=true}return i},_checkLanguageDirection:function e(){var t=(this.$input.css("direction")||"ltr").toLowerCase();if(this.dir!==t){this.dir=t;this.$hint.attr("dir",t);this.trigger("langDirChanged",t)}},_setQuery:function e(t,r){var i,n;i=o(t,this.query);n=i?this.query.length!==t.length:false;this.query=t;if(!r&&!i){this.trigger("queryChanged",this.query)}else if(!r&&n){this.trigger("whitespaceChanged",this.query)}},_updateDescendent:function e(t,r){this.$input.attr("aria-activedescendant",r)},bind:function(){var e=this,i,n,a,o;i=t.bind(this._onBlur,this);n=t.bind(this._onFocus,this);a=t.bind(this._onKeydown,this);o=t.bind(this._onInput,this);this.$input.on("blur.tt",i).on("focus.tt",n).on("keydown.tt",a);if(!t.isMsie()||t.isMsie()>9){this.$input.on("input.tt",o)}else{this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(i){if(r[i.which||i.keyCode]){return}t.defer(t.bind(e._onInput,e,i))})}return this},focus:function e(){this.$input.focus()},blur:function e(){this.$input.blur()},getLangDir:function e(){return this.dir},getQuery:function e(){return this.query||""},setQuery:function e(t,r){this.setInputValue(t);this._setQuery(t,r)},hasQueryChangedSinceLastFocus:function e(){return this.query!==this.queryWhenFocused},getInputValue:function e(){return this.$input.val()},setInputValue:function e(t){this.$input.val(t);this.clearHintIfInvalid();this._checkLanguageDirection()},resetInputValue:function e(){this.setInputValue(this.query)},getHint:function e(){return this.$hint.val()},setHint:function e(t){this.$hint.val(t)},clearHint:function e(){this.setHint("")},clearHintIfInvalid:function e(){var t,r,i,n;t=this.getInputValue();r=this.getHint();i=t!==r&&r.indexOf(t)===0;n=t!==""&&i&&!this.hasOverflow();!n&&this.clearHint()},hasFocus:function e(){return this.$input.is(":focus")},hasOverflow:function e(){var t=this.$input.width()-2;this.$overflowHelper.text(this.getInputValue());return this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var e,r,i;e=this.$input.val().length;r=this.$input[0].selectionStart;if(t.isNumber(r)){return r===e}else if(document.selection){i=document.selection.createRange();i.moveStart("character",-e);return e===i.text.length}return true},destroy:function t(){this.$hint.off(".tt");this.$input.off(".tt");this.$overflowHelper.remove();this.$hint=this.$input=this.$overflowHelper=e("<div>")}});return i;function n(t){return e('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t)}function o(e,t){return i.normalizeQuery(e)===i.normalizeQuery(t)}function s(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}}();var l=function(){"use strict";var r,i;r={dataset:"tt-selectable-dataset",val:"tt-selectable-display",obj:"tt-selectable-object"};i=t.getIdGenerator();function n(r,n){r=r||{};r.templates=r.templates||{};r.templates.notFound=r.templates.notFound||r.templates.empty;if(!r.source){e.error("missing source")}if(!r.node){e.error("missing node")}if(r.name&&!u(r.name)){e.error("invalid dataset name: "+r.name)}n.mixin(this);this.highlight=!!r.highlight;this.name=t.toStr(r.name||i());this.limit=r.limit||5;this.displayFn=s(r.display||r.displayKey);this.templates=l(r.templates,this.displayFn);this.source=r.source.__ttAdapter?r.source.__ttAdapter():r.source;this.async=t.isUndefined(r.async)?this.source.length>2:!!r.async;this._resetLastSuggestion();this.$el=e(r.node).attr("role","presentation").addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}n.extractData=function t(i){var n=e(i);if(n.data(r.obj)){return{dataset:n.data(r.dataset)||"",val:n.data(r.val)||"",obj:n.data(r.obj)||null}}return null};t.mixin(n.prototype,a,{_overwrite:function e(t,r){r=r||[];if(r.length){this._renderSuggestions(t,r)}else if(this.async&&this.templates.pending){this._renderPending(t)}else if(!this.async&&this.templates.notFound){this._renderNotFound(t)}else{this._empty()}this.trigger("rendered",r,false,this.name)},_append:function e(t,r){r=r||[];if(r.length&&this.$lastSuggestion.length){this._appendSuggestions(t,r)}else if(r.length){this._renderSuggestions(t,r)}else if(!this.$lastSuggestion.length&&this.templates.notFound){this._renderNotFound(t)}this.trigger("rendered",r,true,this.name)},_renderSuggestions:function e(t,r){var i;i=this._getSuggestionsFragment(t,r);this.$lastSuggestion=i.children().last();this.$el.html(i).prepend(this._getHeader(t,r)).append(this._getFooter(t,r))},_appendSuggestions:function e(t,r){var i,n;i=this._getSuggestionsFragment(t,r);n=i.children().last();this.$lastSuggestion.after(i);this.$lastSuggestion=n},_renderPending:function e(t){var r=this.templates.pending;this._resetLastSuggestion();r&&this.$el.html(r({query:t,dataset:this.name}))},_renderNotFound:function e(t){var r=this.templates.notFound;this._resetLastSuggestion();r&&this.$el.html(r({query:t,dataset:this.name}))},_empty:function e(){this.$el.empty();this._resetLastSuggestion()},_getSuggestionsFragment:function i(n,a){var s=this,l;l=document.createDocumentFragment();t.each(a,function t(i){var a,o;o=s._injectQuery(n,i);a=e(s.templates.suggestion(o)).data(r.dataset,s.name).data(r.obj,i).data(r.val,s.displayFn(i)).addClass(s.classes.suggestion+" "+s.classes.selectable);l.appendChild(a[0])});this.highlight&&o({className:this.classes.highlight,node:l,pattern:n});return e(l)},_getFooter:function e(t,r){return this.templates.footer?this.templates.footer({query:t,suggestions:r,dataset:this.name}):null},_getHeader:function e(t,r){return this.templates.header?this.templates.header({query:t,suggestions:r,dataset:this.name}):null},_resetLastSuggestion:function t(){this.$lastSuggestion=e()},_injectQuery:function e(r,i){return t.isObject(i)?t.mixin({_query:r},i):i},update:function t(r){var i=this,n=false,a=false,o=0;this.cancel();this.cancel=function t(){n=true;i.cancel=e.noop;i.async&&i.trigger("asyncCanceled",r,i.name)};this.source(r,s,l);!a&&s([]);function s(e){if(a){return}a=true;e=(e||[]).slice(0,i.limit);o=e.length;i._overwrite(r,e);if(o<i.limit&&i.async){i.trigger("asyncRequested",r,i.name)}}function l(t){t=t||[];if(!n&&o<i.limit){i.cancel=e.noop;var a=Math.abs(o-i.limit);o+=a;i._append(r,t.slice(0,a));i.async&&i.trigger("asyncReceived",r,i.name)}}},cancel:e.noop,clear:function e(){this._empty();this.cancel();this.trigger("cleared")},isEmpty:function e(){return this.$el.is(":empty")},destroy:function t(){this.$el=e("<div>")}});return n;function s(e){e=e||t.stringify;return t.isFunction(e)?e:r;function r(t){return t[e]}}function l(r,i){return{notFound:r.notFound&&t.templatify(r.notFound),pending:r.pending&&t.templatify(r.pending),header:r.header&&t.templatify(r.header),footer:r.footer&&t.templatify(r.footer),suggestion:r.suggestion||n};function n(r){return e('<div role="option">').attr("id",t.guid()).text(i(r))}}function u(e){return/^[_a-zA-Z0-9-]+$/.test(e)}}();var u=function(){"use strict";function r(r,i){var n=this;r=r||{};if(!r.node){e.error("node is required")}i.mixin(this);this.$node=e(r.node);this.query=null;this.datasets=t.map(r.datasets,a);function a(t){var r=n.$node.find(t.node).first();t.node=r.length?r:e("<div>").appendTo(n.$node);return new l(t,i)}}t.mixin(r.prototype,a,{_onSelectableClick:function t(r){this.trigger("selectableClicked",e(r.currentTarget))},_onRendered:function e(t,r,i,n){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty());this.trigger("datasetRendered",r,i,n)},_onCleared:function e(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty());this.trigger("datasetCleared")},_propagate:function e(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function e(){return t.every(this.datasets,t.bind(function e(t){var r=t.isEmpty();this.$node.attr("aria-expanded",!r);return r},this))},_getSelectables:function e(){return this.$node.find(this.selectors.selectable)},_removeCursor:function e(){var t=this.getActiveSelectable();t&&t.removeClass(this.classes.cursor)},_ensureVisible:function e(t){var r,i,n,a;r=t.position().top;i=r+t.outerHeight(true);n=this.$node.scrollTop();a=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10);if(r<0){this.$node.scrollTop(n+r)}else if(a<i){this.$node.scrollTop(n+(i-a))}},bind:function(){var r=this,i;i=t.bind(this._onSelectableClick,this);this.$node.on("click.tt",this.selectors.selectable,i);this.$node.on("mouseover",this.selectors.selectable,function(){r.setCursor(e(this))});this.$node.on("mouseleave",function(){r._removeCursor()});t.each(this.datasets,function(e){e.onSync("asyncRequested",r._propagate,r).onSync("asyncCanceled",r._propagate,r).onSync("asyncReceived",r._propagate,r).onSync("rendered",r._onRendered,r).onSync("cleared",r._onCleared,r)});return this},isOpen:function e(){return this.$node.hasClass(this.classes.open)},open:function e(){this.$node.scrollTop(0);this.$node.addClass(this.classes.open)},close:function e(){this.$node.attr("aria-expanded",false);this.$node.removeClass(this.classes.open);this._removeCursor()},setLanguageDirection:function e(t){this.$node.attr("dir",t)},selectableRelativeToCursor:function e(t){var r,i,n,a;i=this.getActiveSelectable();r=this._getSelectables();n=i?r.index(i):-1;a=n+t;a=(a+1)%(r.length+1)-1;a=a<-1?r.length-1:a;return a===-1?null:r.eq(a)},setCursor:function e(t){this._removeCursor();if(t=t&&t.first()){t.addClass(this.classes.cursor);this._ensureVisible(t)}},getSelectableData:function e(t){return t&&t.length?l.extractData(t):null},getActiveSelectable:function e(){var t=this._getSelectables().filter(this.selectors.cursor).first();return t.length?t:null},getTopSelectable:function e(){var t=this._getSelectables().first();return t.length?t:null},update:function e(r){var i=r!==this.query;if(i){this.query=r;t.each(this.datasets,n)}return i;function n(e){e.update(r)}},empty:function e(){t.each(this.datasets,r);this.query=null;this.$node.addClass(this.classes.empty);function r(e){e.clear()}},destroy:function r(){this.$node.off(".tt");this.$node=e("<div>");t.each(this.datasets,i);function i(e){e.destroy()}}});return r}();var c=function(){"use strict";function r(r){this.$el=e("<span></span>",{role:"status","aria-live":"polite"}).css({position:"absolute",padding:"0",border:"0",height:"1px",width:"1px","margin-bottom":"-1px","margin-right":"-1px",overflow:"hidden",clip:"rect(0 0 0 0)","white-space":"nowrap"});r.$input.after(this.$el);t.each(r.menu.datasets,t.bind(function(e){if(e.onSync){e.onSync("rendered",t.bind(this.update,this));e.onSync("cleared",t.bind(this.cleared,this))}},this))}t.mixin(r.prototype,{update:function e(t,r){var i=r.length;var n;if(i===1){n={result:"result",is:"is"}}else{n={result:"results",is:"are"}}this.$el.text(i+" "+n.result+" "+n.is+" available, use up and down arrow keys to navigate.")},cleared:function(){this.$el.text("")}});return r}();var f=function(){"use strict";var e=u.prototype;function r(){u.apply(this,[].slice.call(arguments,0))}t.mixin(r.prototype,u.prototype,{open:function t(){!this._allDatasetsEmpty()&&this._show();return e.open.apply(this,[].slice.call(arguments,0))},close:function t(){this._hide();return e.close.apply(this,[].slice.call(arguments,0))},_onRendered:function t(){if(this._allDatasetsEmpty()){this._hide()}else{this.isOpen()&&this._show()}return e._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function t(){if(this._allDatasetsEmpty()){this._hide()}else{this.isOpen()&&this._show()}return e._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function t(r){this.$node.css(r==="ltr"?this.css.ltr:this.css.rtl);return e.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function e(){this.$node.hide()},_show:function e(){this.$node.css("display","block")}});return r}();var h=function(){"use strict";function r(r,n){var a,o,s,l,u,c,f,h,d,p,v;r=r||{};if(!r.input){e.error("missing input")}if(!r.menu){e.error("missing menu")}if(!r.eventBus){e.error("missing event bus")}n.mixin(this);this.eventBus=r.eventBus;this.minLength=t.isNumber(r.minLength)?r.minLength:1;this.input=r.input;this.menu=r.menu;this.enabled=true;this.autoselect=!!r.autoselect;this.active=false;this.input.hasFocus()&&this.activate();this.dir=this.input.getLangDir();this._hacks();this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this);a=i(this,"activate","open","_onFocused");o=i(this,"deactivate","_onBlurred");s=i(this,"isActive","isOpen","_onEnterKeyed");l=i(this,"isActive","isOpen","_onTabKeyed");u=i(this,"isActive","_onEscKeyed");c=i(this,"isActive","open","_onUpKeyed");f=i(this,"isActive","open","_onDownKeyed");h=i(this,"isActive","isOpen","_onLeftKeyed");d=i(this,"isActive","isOpen","_onRightKeyed");p=i(this,"_openIfActive","_onQueryChanged");v=i(this,"_openIfActive","_onWhitespaceChanged");this.input.bind().onSync("focused",a,this).onSync("blurred",o,this).onSync("enterKeyed",s,this).onSync("tabKeyed",l,this).onSync("escKeyed",u,this).onSync("upKeyed",c,this).onSync("downKeyed",f,this).onSync("leftKeyed",h,this).onSync("rightKeyed",d,this).onSync("queryChanged",p,this).onSync("whitespaceChanged",v,this).onSync("langDirChanged",this._onLangDirChanged,this)}t.mixin(r.prototype,{_hacks:function r(){var i,n;i=this.input.$input||e("<div>");n=this.menu.$node||e("<div>");i.on("blur.tt",function(e){var r,a,o;r=document.activeElement;a=n.is(r);o=n.has(r).length>0;if(t.isMsie()&&(a||o)){e.preventDefault();e.stopImmediatePropagation();t.defer(function(){i.focus()})}});n.on("mousedown.tt",function(e){e.preventDefault()})},_onSelectableClicked:function e(t,r){this.select(r)},_onDatasetCleared:function e(){this._updateHint()},_onDatasetRendered:function e(t,r,i,n){this._updateHint();if(this.autoselect){var a=this.selectors.cursor.substr(1);this.menu.$node.find(this.selectors.suggestion).first().addClass(a)}this.eventBus.trigger("render",r,i,n)},_onAsyncRequested:function e(t,r,i){this.eventBus.trigger("asyncrequest",i,r)},_onAsyncCanceled:function e(t,r,i){this.eventBus.trigger("asynccancel",i,r)},_onAsyncReceived:function e(t,r,i){this.eventBus.trigger("asyncreceive",i,r)},_onFocused:function e(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function e(){if(this.input.hasQueryChangedSinceLastFocus()){this.eventBus.trigger("change",this.input.getQuery())}},_onEnterKeyed:function e(t,r){var i;if(i=this.menu.getActiveSelectable()){if(this.select(i)){r.preventDefault();r.stopPropagation()}}else if(this.autoselect){if(this.select(this.menu.getTopSelectable())){r.preventDefault();r.stopPropagation()}}},_onTabKeyed:function e(t,r){var i;if(i=this.menu.getActiveSelectable()){this.select(i)&&r.preventDefault()}else if(i=this.menu.getTopSelectable()){this.autocomplete(i)&&r.preventDefault()}},_onEscKeyed:function e(){this.close()},_onUpKeyed:function e(){this.moveCursor(-1)},_onDownKeyed:function e(){this.moveCursor(+1)},_onLeftKeyed:function e(){if(this.dir==="rtl"&&this.input.isCursorAtEnd()){this.autocomplete(this.menu.getActiveSelectable()||this.menu.getTopSelectable())}},_onRightKeyed:function e(){if(this.dir==="ltr"&&this.input.isCursorAtEnd()){this.autocomplete(this.menu.getActiveSelectable()||this.menu.getTopSelectable())}},_onQueryChanged:function e(t,r){this._minLengthMet(r)?this.menu.update(r):this.menu.empty()},_onWhitespaceChanged:function e(){this._updateHint()},_onLangDirChanged:function e(t,r){if(this.dir!==r){this.dir=r;this.menu.setLanguageDirection(r)}},_openIfActive:function e(){this.isActive()&&this.open()},_minLengthMet:function e(r){r=t.isString(r)?r:this.input.getQuery()||"";return r.length>=this.minLength},_updateHint:function e(){var r,i,n,a,o,l,u;r=this.menu.getTopSelectable();i=this.menu.getSelectableData(r);n=this.input.getInputValue();if(i&&!t.isBlankString(n)&&!this.input.hasOverflow()){a=s.normalizeQuery(n);o=t.escapeRegExChars(a);l=new RegExp("^(?:"+o+")(.+$)","i");u=l.exec(i.val);u&&this.input.setHint(n+u[1])}else{this.input.clearHint()}},isEnabled:function e(){return this.enabled},enable:function e(){this.enabled=true},disable:function e(){this.enabled=false},isActive:function e(){return this.active},activate:function e(){if(this.isActive()){return true}else if(!this.isEnabled()||this.eventBus.before("active")){return false}else{this.active=true;this.eventBus.trigger("active");return true}},deactivate:function e(){if(!this.isActive()){return true}else if(this.eventBus.before("idle")){return false}else{this.active=false;this.close();this.eventBus.trigger("idle");return true}},isOpen:function e(){return this.menu.isOpen()},open:function e(){if(!this.isOpen()&&!this.eventBus.before("open")){this.menu.open();this._updateHint();this.eventBus.trigger("open")}return this.isOpen()},close:function e(){if(this.isOpen()&&!this.eventBus.before("close")){this.menu.close();this.input.clearHint();this.input.resetInputValue();this.eventBus.trigger("close")}return!this.isOpen()},setVal:function e(r){this.input.setQuery(t.toStr(r))},getVal:function e(){return this.input.getQuery()},select:function e(t){var r=this.menu.getSelectableData(t);if(r&&!this.eventBus.before("select",r.obj,r.dataset)){this.input.setQuery(r.val,true);this.eventBus.trigger("select",r.obj,r.dataset);this.close();return true}return false},autocomplete:function e(t){var r,i,n;r=this.input.getQuery();i=this.menu.getSelectableData(t);n=i&&r!==i.val;if(n&&!this.eventBus.before("autocomplete",i.obj,i.dataset)){this.input.setQuery(i.val);this.eventBus.trigger("autocomplete",i.obj,i.dataset);return true}return false},moveCursor:function e(t){var r,i,n,a,o,s,l;r=this.input.getQuery();i=this.menu.selectableRelativeToCursor(t);n=this.menu.getSelectableData(i);a=n?n.obj:null;o=n?n.dataset:null;l=i?i.attr("id"):null;this.input.trigger("cursorchange",l);s=this._minLengthMet()&&this.menu.update(r);if(!s&&!this.eventBus.before("cursorchange",a,o)){this.menu.setCursor(i);if(n){this.input.setInputValue(n.val)}else{this.input.resetInputValue();this._updateHint()}this.eventBus.trigger("cursorchange",a,o);return true}return false},destroy:function e(){this.input.destroy();this.menu.destroy()}});return r;function i(e){var r=[].slice.call(arguments,1);return function(){var i=[].slice.call(arguments);t.each(r,function(t){return e[t].apply(e,i)})}}}();(function(){"use strict";var i,a,o;i=e.fn.typeahead;a={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"};o={initialize:function i(o,l){var v;l=t.isArray(l)?l:[].slice.call(arguments,1);o=o||{};v=r(o.classNames);return this.each(g);function g(){var r,i,g,y,_,b,w,S,C,x,O,T;t.each(l,function(e){e.highlight=!!o.highlight});r=e(this);i=e(v.html.wrapper);g=m(o.hint);y=m(o.menu);_=o.hint!==false&&!g;b=o.menu!==false&&!y;_&&(g=d(r,v));b&&(y=e(v.html.menu).css(v.css.menu));g&&g.val("");r=p(r,v);if(_||b){i.css(v.css.wrapper);r.css(_?v.css.input:v.css.inputWithNoHint);r.wrap(i).parent().prepend(_?g:null).append(b?y:null)}T=b?f:u;w=new n({el:r});S=new s({hint:g,input:r},v);C=new T({node:y,datasets:l},v);x=new c({$input:r,menu:C});O=new h({input:S,menu:C,eventBus:w,minLength:o.minLength,autoselect:o.autoselect},v);r.data(a.www,v);r.data(a.typeahead,O)}},isEnabled:function e(){var t;l(this.first(),function(e){t=e.isEnabled()});return t},enable:function e(){l(this,function(e){e.enable()});return this},disable:function e(){l(this,function(e){e.disable()});return this},isActive:function e(){var t;l(this.first(),function(e){t=e.isActive()});return t},activate:function e(){l(this,function(e){e.activate()});return this},deactivate:function e(){l(this,function(e){e.deactivate()});return this},isOpen:function e(){var t;l(this.first(),function(e){t=e.isOpen()});return t},open:function e(){l(this,function(e){e.open()});return this},close:function e(){l(this,function(e){e.close()});return this},select:function t(r){var i=false,n=e(r);l(this.first(),function(e){i=e.select(n)});return i},autocomplete:function t(r){var i=false,n=e(r);l(this.first(),function(e){i=e.autocomplete(n)});return i},moveCursor:function e(t){var r=false;l(this.first(),function(e){r=e.moveCursor(t)});return r},val:function e(r){var i;if(!arguments.length){l(this.first(),function(e){i=e.getVal()});return i}else{l(this,function(e){e.setVal(t.toStr(r))});return this}},destroy:function e(){l(this,function(e,t){g(t);e.destroy()});return this}};e.fn.typeahead=function(e){if(o[e]){return o[e].apply(this,[].slice.call(arguments,1))}else{return o.initialize.apply(this,arguments)}};e.fn.typeahead.noConflict=function t(){e.fn.typeahead=i;return this};function l(t,r){t.each(function(){var t=e(this),i;(i=t.data(a.typeahead))&&r(i,t)})}function d(e,t){return e.clone().addClass(t.classes.hint).removeData().css(t.css.hint).css(v(e)).prop({readonly:true,required:false}).removeAttr("id name placeholder").removeClass("required").attr({spellcheck:"false",tabindex:-1})}function p(e,t){e.data(a.attrs,{dir:e.attr("dir"),autocomplete:e.attr("autocomplete"),spellcheck:e.attr("spellcheck"),style:e.attr("style")});e.addClass(t.classes.input).attr({spellcheck:false});try{!e.attr("dir")&&e.attr("dir","auto")}catch(e){}return e}function v(e){return{backgroundAttachment:e.css("background-attachment"),backgroundClip:e.css("background-clip"),backgroundColor:e.css("background-color"),backgroundImage:e.css("background-image"),backgroundOrigin:e.css("background-origin"),backgroundPosition:e.css("background-position"),backgroundRepeat:e.css("background-repeat"),backgroundSize:e.css("background-size")}}function g(e){var r,i;r=e.data(a.www);i=e.parent().filter(r.selectors.wrapper);t.each(e.data(a.attrs),function(r,i){t.isUndefined(r)?e.removeAttr(i):e.attr(i,r)});e.removeData(a.typeahead).removeData(a.www).removeData(a.attr).removeClass(r.classes.input);if(i.length){e.detach().insertAfter(i);i.remove()}}function m(r){var i,n;i=t.isJQuery(r)||t.isElement(r);n=i?e(r).first():[];return n.length?n:null}})()})}).call(this,r(477).setImmediate)},function(e,t,r){(function(e){+function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.VERSION="3.3.7";t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype);t.prototype.constructor=t;t.prototype.getDefaults=function(){return t.DEFAULTS};t.prototype.setContent=function(){var e=this.tip();var t=this.getTitle();var r=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t);e.find(".popover-content").children().detach().end()[this.options.html?typeof r=="string"?"html":"append":"text"](r);e.removeClass("fade top bottom left right in");if(!e.find(".popover-title").html())e.find(".popover-title").hide()};t.prototype.hasContent=function(){return this.getTitle()||this.getContent()};t.prototype.getContent=function(){var e=this.$element;var t=this.options;return e.attr("data-content")||(typeof t.content=="function"?t.content.call(e[0]):t.content)};t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};function r(r){return this.each(function(){var i=e(this);var n=i.data("bs.popover");var a=typeof r=="object"&&r;if(!n&&/destroy|hide/.test(r))return;if(!n)i.data("bs.popover",n=new t(this,a));if(typeof r=="string")n[r]()})}var i=e.fn.popover;e.fn.popover=r;e.fn.popover.Constructor=t;e.fn.popover.noConflict=function(){e.fn.popover=i;return this}}(e)}).call(this,r(24))},function(e,t,r){(function(e){+function(e){"use strict";var t=function(e,t){this.type=null;this.options=null;this.enabled=null;this.timeout=null;this.hoverState=null;this.$element=null;this.inState=null;this.init("tooltip",e,t)};t.VERSION="3.3.7";t.TRANSITION_DURATION=150;t.DEFAULTS={animation:true,placement:"top",selector:false,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:false,container:false,viewport:{selector:"body",padding:0}};t.prototype.init=function(t,r,i){this.enabled=true;this.type=t;this.$element=e(r);this.options=this.getOptions(i);this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport);this.inState={click:false,hover:false,focus:false};if(this.$element[0]instanceof document.constructor&&!this.options.selector){throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!")}var n=this.options.trigger.split(" ");for(var a=n.length;a--;){var o=n[a];if(o=="click"){this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this))}else if(o!="manual"){var s=o=="hover"?"mouseenter":"focusin";var l=o=="hover"?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this));this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};t.prototype.getDefaults=function(){return t.DEFAULTS};t.prototype.getOptions=function(t){t=e.extend({},this.getDefaults(),this.$element.data(),t);if(t.delay&&typeof t.delay=="number"){t.delay={show:t.delay,hide:t.delay}}return t};t.prototype.getDelegateOptions=function(){var t={};var r=this.getDefaults();this._options&&e.each(this._options,function(e,i){if(r[e]!=i)t[e]=i});return t};t.prototype.enter=function(t){var r=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(!r){r=new this.constructor(t.currentTarget,this.getDelegateOptions());e(t.currentTarget).data("bs."+this.type,r)}if(t instanceof e.Event){r.inState[t.type=="focusin"?"focus":"hover"]=true}if(r.tip().hasClass("in")||r.hoverState=="in"){r.hoverState="in";return}clearTimeout(r.timeout);r.hoverState="in";if(!r.options.delay||!r.options.delay.show)return r.show();r.timeout=setTimeout(function(){if(r.hoverState=="in")r.show()},r.options.delay.show)};t.prototype.isInStateTrue=function(){for(var e in this.inState){if(this.inState[e])return true}return false};t.prototype.leave=function(t){var r=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(!r){r=new this.constructor(t.currentTarget,this.getDelegateOptions());e(t.currentTarget).data("bs."+this.type,r)}if(t instanceof e.Event){r.inState[t.type=="focusout"?"focus":"hover"]=false}if(r.isInStateTrue())return;clearTimeout(r.timeout);r.hoverState="out";if(!r.options.delay||!r.options.delay.hide)return r.hide();r.timeout=setTimeout(function(){if(r.hoverState=="out")r.hide()},r.options.delay.hide)};t.prototype.show=function(){var r=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(r);var i=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(r.isDefaultPrevented()||!i)return;var n=this;var a=this.tip();var o=this.getUID(this.type);this.setContent();a.attr("id",o);this.$element.attr("aria-describedby",o);if(this.options.animation)a.addClass("fade");var s=typeof this.options.placement=="function"?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement;var l=/\s?auto?\s?/i;var u=l.test(s);if(u)s=s.replace(l,"")||"top";a.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this);this.options.container?a.appendTo(this.options.container):a.insertAfter(this.$element);this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition();var f=a[0].offsetWidth;var h=a[0].offsetHeight;if(u){var d=s;var p=this.getPosition(this.$viewport);s=s=="bottom"&&c.bottom+h>p.bottom?"top":s=="top"&&c.top-h<p.top?"bottom":s=="right"&&c.right+f>p.width?"left":s=="left"&&c.left-f<p.left?"right":s;a.removeClass(d).addClass(s)}var v=this.getCalculatedOffset(s,c,f,h);this.applyPlacement(v,s);var g=function(){var e=n.hoverState;n.$element.trigger("shown.bs."+n.type);n.hoverState=null;if(e=="out")n.leave(n)};e.support.transition&&this.$tip.hasClass("fade")?a.one("bsTransitionEnd",g).emulateTransitionEnd(t.TRANSITION_DURATION):g()}};t.prototype.applyPlacement=function(t,r){var i=this.tip();var n=i[0].offsetWidth;var a=i[0].offsetHeight;var o=parseInt(i.css("margin-top"),10);var s=parseInt(i.css("margin-left"),10);if(isNaN(o))o=0;if(isNaN(s))s=0;t.top+=o;t.left+=s;e.offset.setOffset(i[0],e.extend({using:function(e){i.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0);i.addClass("in");var l=i[0].offsetWidth;var u=i[0].offsetHeight;if(r=="top"&&u!=a){t.top=t.top+a-u}var c=this.getViewportAdjustedDelta(r,t,l,u);if(c.left)t.left+=c.left;else t.top+=c.top;var f=/top|bottom/.test(r);var h=f?c.left*2-n+l:c.top*2-a+u;var d=f?"offsetWidth":"offsetHeight";i.offset(t);this.replaceArrow(h,i[0][d],f)};t.prototype.replaceArrow=function(e,t,r){this.arrow().css(r?"left":"top",50*(1-e/t)+"%").css(r?"top":"left","")};t.prototype.setContent=function(){var e=this.tip();var t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t);e.removeClass("fade in top bottom left right")};t.prototype.hide=function(r){var i=this;var n=e(this.$tip);var a=e.Event("hide.bs."+this.type);function o(){if(i.hoverState!="in")n.detach();if(i.$element){i.$element.removeAttr("aria-describedby").trigger("hidden.bs."+i.type)}r&&r()}this.$element.trigger(a);if(a.isDefaultPrevented())return;n.removeClass("in");e.support.transition&&n.hasClass("fade")?n.one("bsTransitionEnd",o).emulateTransitionEnd(t.TRANSITION_DURATION):o();this.hoverState=null;return this};t.prototype.fixTitle=function(){var e=this.$element;if(e.attr("title")||typeof e.attr("data-original-title")!="string"){e.attr("data-original-title",e.attr("title")||"").attr("title","")}};t.prototype.hasContent=function(){return this.getTitle()};t.prototype.getPosition=function(t){t=t||this.$element;var r=t[0];var i=r.tagName=="BODY";var n=r.getBoundingClientRect();if(n.width==null){n=e.extend({},n,{width:n.right-n.left,height:n.bottom-n.top})}var a=window.SVGElement&&r instanceof window.SVGElement;var o=i?{top:0,left:0}:a?null:t.offset();var s={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()};var l=i?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},n,s,l,o)};t.prototype.getCalculatedOffset=function(e,t,r,i){return e=="bottom"?{top:t.top+t.height,left:t.left+t.width/2-r/2}:e=="top"?{top:t.top-i,left:t.left+t.width/2-r/2}:e=="left"?{top:t.top+t.height/2-i/2,left:t.left-r}:{top:t.top+t.height/2-i/2,left:t.left+t.width}};t.prototype.getViewportAdjustedDelta=function(e,t,r,i){var n={top:0,left:0};if(!this.$viewport)return n;var a=this.options.viewport&&this.options.viewport.padding||0;var o=this.getPosition(this.$viewport);if(/right|left/.test(e)){var s=t.top-a-o.scroll;var l=t.top+a-o.scroll+i;if(s<o.top){n.top=o.top-s}else if(l>o.top+o.height){n.top=o.top+o.height-l}}else{var u=t.left-a;var c=t.left+a+r;if(u<o.left){n.left=o.left-u}else if(c>o.right){n.left=o.left+o.width-c}}return n};t.prototype.getTitle=function(){var e;var t=this.$element;var r=this.options;e=t.attr("data-original-title")||(typeof r.title=="function"?r.title.call(t[0]):r.title);return e};t.prototype.getUID=function(e){do{e+=~~(Math.random()*1e6)}while(document.getElementById(e));return e};t.prototype.tip=function(){if(!this.$tip){this.$tip=e(this.options.template);if(this.$tip.length!=1){throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!")}}return this.$tip};t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};t.prototype.enable=function(){this.enabled=true};t.prototype.disable=function(){this.enabled=false};t.prototype.toggleEnabled=function(){this.enabled=!this.enabled};t.prototype.toggle=function(t){var r=this;if(t){r=e(t.currentTarget).data("bs."+this.type);if(!r){r=new this.constructor(t.currentTarget,this.getDelegateOptions());e(t.currentTarget).data("bs."+this.type,r)}}if(t){r.inState.click=!r.inState.click;if(r.isInStateTrue())r.enter(r);else r.leave(r)}else{r.tip().hasClass("in")?r.leave(r):r.enter(r)}};t.prototype.destroy=function(){var e=this;clearTimeout(this.timeout);this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type);if(e.$tip){e.$tip.detach()}e.$tip=null;e.$arrow=null;e.$viewport=null;e.$element=null})};function r(r){return this.each(function(){var i=e(this);var n=i.data("bs.tooltip");var a=typeof r=="object"&&r;if(!n&&/destroy|hide/.test(r))return;if(!n)i.data("bs.tooltip",n=new t(this,a));if(typeof r=="string")n[r]()})}var i=e.fn.tooltip;e.fn.tooltip=r;e.fn.tooltip.Constructor=t;e.fn.tooltip.noConflict=function(){e.fn.tooltip=i;return this}}(e)}).call(this,r(24))},function(e,t){e.exports='<div class="text-center btn-group dropup" gmf-elevation gmf-elevation-active=ctrl.active gmf-elevation-elevation=ctrl.elevationValue gmf-elevation-loading=ctrl.elevationLoading gmf-elevation-layer=ctrl.selectedElevationLayer gmf-elevation-layersconfig=ctrl.layersconfig gmf-elevation-map=::ctrl.map> <a type=button class="btn btn-default" aria-expanded=false ng-class="::{\'dropdown-toggle\': ctrl.layers.length > 1}" ng-attr-data-toggle="{{::(ctrl.layers.length > 1) ? \'dropdown\' : \'\'}}"> <span class=gmf-elevationwidget-value> {{ctrl.elevationValue}} <span ng-show=ctrl.elevationLoading class="fa fa-spinner"></span> <span ng-show="!ctrl.elevationValue && !ctrl.elevationLoading" translate>Elevation…</span> </span><span class=caret ng-if="::ctrl.layers.length > 1"></span> </a> <ul class="dropdown-menu dropdown-menu-right" role=menu ng-if="::ctrl.layers.length > 1"> <li class=dropdown-header translate>Elevation data sources</li> <li ng-repeat="elevationItem in ::ctrl.layers"> <a href ng-click="ctrl.selectedElevationLayer = elevationItem"> <span class="fa fa-fw" ng-class="{\'fa-check\': ctrl.selectedElevationLayer === elevationItem}"></span> {{elevationItem | translate}} </a> </li> </ul> </div> '},function(e,t){e.exports='<div class="gmf-profile-container panel" ng-show=ctrl.active> <div class=ngeo-profile ng-show=!ctrl.isErrored ngeo-profile=ctrl.profileData ngeo-profile-highlight=ctrl.profileHighlight ngeo-profile-options=::ctrl.profileOptions> </div> <ul class=gmf-profile-legend ng-show=!ctrl.isErrored> <li ng-repeat="name in ::ctrl.getLayersNames()"> <i class="fa fa-minus" ng-style=ctrl.getStyle(name)></i> {{name | translate}} <span ng-if="ctrl.currentPoint.elevations[name] != null"> {{ctrl.currentPoint.elevations[name]}}&nbsp;{{ctrl.currentPoint.yUnits}} </span> </li> </ul> <div class="gmf-profile-export btn-group dropup" ng-show=!ctrl.isErrored> <a class=dropdown-toggle href="" ng-show="ctrl.profileData.length !== 0" data-toggle=dropdown aria-expanded=false> {{\'Export\' | translate}}&nbsp;<i class="fa fa-caret-up"></i> </a> <ul class="dropdown-menu dropdown-menu-right" role=menu> <li> <a href="" ng-click=::ctrl.downloadCsv()> <i class="fa fa-table"></i>&nbsp;{{\'Download CSV\' | translate}}</a> </li> </ul> </div> <div class=gmf-profile-error ng-show=ctrl.isErrored> <p>{{\'The profile service does not respond, please try later.\' | translate}}</p> </div> <div class=close ng-click="ctrl.line = null">&times;</div> </div> '},function(e,t){e.exports='<div class=gmf-print> <div ng-show="$ctrl.isState(\'CAPABILITIES_NOT_LOADED\') !== true && $ctrl.isState(\'ERROR_ON_GETCAPABILITIES\') !== true"> <div class="gmf-print-layout-selector form-horizontal"><ng-transclude/></div> <div ng-repeat="attribute in $ctrl.layoutInfo.simpleAttributes" class="gmf-print-layoutinfo form-group"> <div ng-if="$ctrl.hiddenAttributeNames === undefined || $ctrl.hiddenAttributeNames.indexOf(attribute.name) < 0"> <input ng-if="attribute.type === \'number\'" ng-model=attribute.value class=form-control type=number ng-attr-placeholder="{{attribute.name | translate}}"> <input ng-if="attribute.type === \'text\'" ng-model=attribute.value class=form-control type=text ng-attr-placeholder="{{attribute.name | translate}}"> <textarea ng-if="attribute.type === \'textarea\'" ng-model=attribute.value class=form-control row=3 ng-attr-placeholder="{{attribute.name | translate}}"></textarea> <div ng-if="attribute.type === \'checkbox\'" class=checkbox> <label> <input ng-model=attribute.value type=checkbox> <span>{{attribute.name | translate}}</span> </label> </div> </div> </div> <div ng-show="$ctrl.layoutInfo.legend !== undefined" class="gmf-print-legend checkbox"> <label> <input ng-model=$ctrl.layoutInfo.legend type=checkbox> <span translate>Legend</span> </label> </div> <div class="gmf-print-layout-selector form-horizontal"> <div ng-show="$ctrl.layoutInfo.layouts.length !== 1" class=form-group> <label class="control-label col-md-5" translate>Layout</label> <div class=col-md-7> <div class="btn-group btn-block"> <button type=button class="btn btn-default form-control" data-toggle=dropdown> <span>{{$ctrl.layoutInfo.layout | translate}}&nbsp;</span> <i class="fa fa-caret-down"></i> </button> <ul class="dropdown-menu dropdown-menu-right btn-block" role=menu> <li ng-repeat="layout in $ctrl.layoutInfo.layouts"> <a ng-click=$ctrl.setLayout(layout) href="">{{layout | translate}}</a> </li> </ul> </div> </div> </div> <div ng-show="$ctrl.layoutInfo.scales.length !== 1" class="gmf-print-scale-selector form-group"> <label class="control-label col-md-5" translate>Scale</label> <div class=col-md-7> <div class="btn-group btn-block"> <button type=button class="btn btn-default form-control" data-toggle=dropdown aria-expanded=false> <span>{{$ctrl.layoutInfo.scale | ngeoScalify}}&nbsp;</span> <i class="fa fa-caret-down"></i> </button> <ul class="dropdown-menu dropdown-menu-right btn-block" role=menu> <li ng-repeat="scale in $ctrl.layoutInfo.scales"> <a ng-click=$ctrl.getSetScale(scale) href="">{{scale | ngeoScalify}}</a> </li> <span ng-if=$ctrl.scaleInput> <li class=dropdown-header translate>Manual entry</li> <li> <div class=gmf-print-custom-scale> 1 : <input class=gmf-print-custom-scale-input type=number min=1 ng-model=$ctrl.getSetScale ng-model-options="{getterSetter: true}"> </div> </li> </span> </ul> </div> </div> </div> <div ng-show="$ctrl.layoutInfo.dpis.length !== 1" class="gmf-print-dpi-selector form-group"> <label class="control-label col-md-3" translate>DPI</label> <div class=col-md-5> <div class="btn-group btn-block"> <button type=button class="btn btn-default form-control" data-toggle=dropdown aria-expanded=false> <span>{{$ctrl.layoutInfo.dpi}}&nbsp;</span> <i class="fa fa-caret-down"></i> </button> <ul class="dropdown-menu dropdown-menu-right btn-block" role=menu> <li ng-repeat="dpi in $ctrl.layoutInfo.dpis"> <a href="" ng-click=$ctrl.setDpi(dpi)>{{dpi}}</a> </li> </ul> </div> </div> </div> <div class="gmf-print-rotation-selector form-group"> <label class="control-label col-md-3" translate>Rotation</label> <div class=col-md-5> <input class="form-control gmf-print-rotation-input" type=range value=0 min=-180 max=180 data-toggle=tooltip title="{{\'You can also use Alt+Shift on the map\' | translate}}"> </div> <div class=col-md-4> <input class="form-control gmf-print-rotation-input" type=number min=-180 max=180 value=0> </div> </div> </div> <div class="gmf-print-actions form-group pull-right"> <span ng-show="$ctrl.isState(\'PRINTING\')"> <i class="fa fa-refresh fa-spin"></i> </span> <a ng-show="$ctrl.isState(\'PRINTING\')" class="gmf-print-cancel btn btn-link" href="" ng-click=$ctrl.cancel() translate>Abort</a> <button ng-show=$ctrl.layoutInfo.formats.png class="gmf-print-image btn btn-primary" ng-disabled="$ctrl.isState(\'PRINTING\')" ng-click="$ctrl.print(\'png\')" translate>Image</button> <button ng-show=$ctrl.layoutInfo.formats.pdf class="gmf-print-pdf btn btn-primary" ng-disabled="$ctrl.isState(\'PRINTING\')" ng-click="$ctrl.print(\'pdf\')" translate>PDF</button> </div> <div ng-show="$ctrl.isState(\'ERROR_ON_REPORT\')" class="gmf-print-error-report form-group pull-left text-danger"> <p>{{\'Error during the print, please try again.\' | translate}}</p> </div> </div> <div ng-show="$ctrl.isState(\'CAPABILITIES_NOT_LOADED\')" class="gmf-print-wait form-group pull-left"> <p>{{\'Connecting to the print server, please wait.\' | translate}}</p> </div> <div ng-show="$ctrl.isState(\'ERROR_ON_GETCAPABILITIES\')" class="gmf-print-error-capabilities form-group pull-left text-danger"> <p>{{\'The print server is unavailable. Please, try later.\' | translate}}</p> </div> </div> '},function(e,t){e.exports='<gmf-objecteditingtools gmf-objecteditingtools-active=oeCtrl.toolsActive gmf-objecteditingtools-copyfromactive=oeCtrl.copyFromActive gmf-objecteditingtools-deletefromactive=oeCtrl.deleteFromActive gmf-objecteditingtools-feature=oeCtrl.feature gmf-objecteditingtools-geomtype=::oeCtrl.geomType gmf-objecteditingtools-map=::oeCtrl.map gmf-objecteditingtools-process=oeCtrl.process gmf-objecteditingtools-queryablelayerinfo=oeCtrl.selectedQueryableLayerInfo gmf-objecteditingtools-requireslayer=oeCtrl.queryableLayerListShown gmf-objecteditingtools-sketchfeatures=::oeCtrl.sketchFeatures> </gmf-objecteditingtools> <div class=form-group ng-show=oeCtrl.queryableLayerListShown> <label ng-show="oeCtrl.copyFromActive === true" class=control-label>{{\'Copy from:\' | translate}}</label> <label ng-show="oeCtrl.deleteFromActive === true" class=control-label>{{\'Cut from:\' | translate}}</label> <select class=form-control ng-model=oeCtrl.selectedQueryableLayerInfo ng-options="layerInfo.layerNode.name | translate for layerInfo in oeCtrl.queryableLayersInfo"> </select> </div> <form novalidate name=form class="form gmf-objectediting-form"> <input type=submit value="{{\'Save\' | translate}}" class="btn btn-sm btn-default gmf-objectediting-btn-save" ng-click="form.$valid && oeCtrl.save()" ng-disabled="!oeCtrl.dirty || oeCtrl.pending || !oeCtrl.featureHasGeom" title="{{\'Save modifications\' | translate}}"> <a class="btn btn-sm btn-link gmf-objectediting-btn-undo" ng-click=oeCtrl.undo() ng-disabled="!oeCtrl.dirty || oeCtrl.pending" title="{{\'Undo latest modifications\' | translate}}" href>{{\'Undo\' | translate}}</a> <a class="btn btn-sm btn-link gmf-objectediting-btn-delete" ng-click=oeCtrl.delete() ng-disabled="oeCtrl.isStateInsert() || oeCtrl.pending" title="{{\'Delete the feature\' | translate}}" href>{{\'Delete\' | translate}}</a> </form> '},function(e,t){e.exports='<div class=btn-group role=group aria-label=""> <a href ngeo-btn ngeo-createfeature ngeo-createfeature-active=oetCtrl.drawActive ngeo-createfeature-features=::oetCtrl.sketchFeatures ngeo-createfeature-geom-type=::oetCtrl.geomType ngeo-createfeature-map=::oetCtrl.map class="btn btn-sm btn-default" ng-class="{active: oetCtrl.drawActive}" ng-if="::(oetCtrl.geomType === \'MultiPoint\')" ng-model=oetCtrl.drawActive title="{{\'Add a point to the geometry\' | translate}}"> <span class="fa fa-plus-square-o gmf-icon-oe-draw"> </span> </a> <a href ngeo-btn ngeo-createfeature ngeo-createfeature-active=oetCtrl.drawActive ngeo-createfeature-features=::oetCtrl.sketchFeatures ngeo-createfeature-geom-type=::oetCtrl.geomType ngeo-createfeature-map=::oetCtrl.map class="btn btn-sm btn-default" ng-class="{active: oetCtrl.drawActive}" ng-if="::(oetCtrl.geomType === \'MultiLineString\')" ng-model=oetCtrl.drawActive title="{{\'Add a linestring to the geometry\' | translate}}"> <span class="fa fa-plus-square-o gmf-icon-oe-draw"> </span> </a> <a href ngeo-btn ngeo-createfeature ngeo-createfeature-active=oetCtrl.drawActive ngeo-createfeature-features=::oetCtrl.sketchFeatures ngeo-createfeature-geom-type=::oetCtrl.geomType ngeo-createfeature-map=::oetCtrl.map class="btn btn-sm btn-default" ng-class="{active: oetCtrl.drawActive}" ng-if="::(oetCtrl.geomType === \'MultiPolygon\')" ng-model=oetCtrl.drawActive title="{{\'Add a polygon to the geometry\' | translate}}"> <span class="fa fa-plus-square-o gmf-icon-oe-draw"> </span> </a> <a href ngeo-btn ngeo-createfeature ngeo-createfeature-active=oetCtrl.eraseActive ngeo-createfeature-features=::oetCtrl.sketchFeatures ngeo-createfeature-geom-type=::oetCtrl.geomTypePolygon ngeo-createfeature-map=::oetCtrl.map class="btn btn-sm btn-default" ng-class="{active: oetCtrl.eraseActive}" ng-model=oetCtrl.eraseActive title="{{\'Erase geometry\' | translate}}"> <span class="fa fa-minus-square-o gmf-icon-oe-erase"> </span> </a> <a href ng-if="::oetCtrl.geomType === \'MultiPolygon\'" ngeo-btn ngeo-createregularpolygonfromclick ngeo-createregularpolygonfromclick-active=oetCtrl.drawTriangleActive ngeo-createregularpolygonfromclick-angle=oetCtrl.triangleAngle ngeo-createregularpolygonfromclick-features=::oetCtrl.sketchFeatures ngeo-createregularpolygonfromclick-map=::oetCtrl.map ngeo-createregularpolygonfromclick-radius=::oetCtrl.triangleRadius class="btn btn-sm btn-default ngeo-createregularpolygonfromclick" ng-class="{active: oetCtrl.drawTriangleActive}" ng-model=oetCtrl.drawTriangleActive title="{{\'Draw a triangle\' | translate}}"> <span class="fa fa-play fa-rotate-270 gmf-icon-oe-triangle"> </span> </a> <a href ngeo-btn gmf-objecteditinggetwmsfeature gmf-objecteditinggetwmsfeature-active=oetCtrl.copyFromActive gmf-objecteditinggetwmsfeature-features=::oetCtrl.sketchFeatures gmf-objecteditinggetwmsfeature-layerinfo=oetCtrl.queryableLayerInfo gmf-objecteditinggetwmsfeature-map=::oetCtrl.map class="btn btn-sm btn-default gmf-objecteditinggetwmsfeature-add" ng-class="{active: oetCtrl.copyFromActive}" ng-model=oetCtrl.copyFromActive title="{{\'Copy from external WMS feature\' | translate}}"> <span class="fa fa-clone gmf-icon-oe-copyfrom"> </span> </a> <a href ngeo-btn gmf-objecteditinggetwmsfeature gmf-objecteditinggetwmsfeature-active=oetCtrl.deleteFromActive gmf-objecteditinggetwmsfeature-features=::oetCtrl.sketchFeatures gmf-objecteditinggetwmsfeature-layerinfo=oetCtrl.queryableLayerInfo gmf-objecteditinggetwmsfeature-map=::oetCtrl.map class="btn btn-sm btn-default gmf-objecteditinggetwmsfeature-delete" ng-class="{active: oetCtrl.deleteFromActive}" ng-model=oetCtrl.deleteFromActive title="{{\'Cut from external WMS feature\' | translate}}"> <span class="fa fa-scissors gmf-icon-oe-deletefrom"> </span> </a> </div> '},function(e,t){e.exports='<div class="btn-group dropup"> <a type=button class="btn btn-default dropdown-toggle" data-toggle=dropdown aria-expanded=false> <span class=gmf-mouseposition-control-target></span> <span class=caret></span> </a> <ul class="dropdown-menu dropdown-menu-right" role=menu> <li class=dropdown-header translate>Coordinate systems</li> <li ng-repeat="projitem in ::ctrl.projections"> <a href ng-click=ctrl.setProjection(projitem)> <span class="fa fa-fw" ng-class="{\'fa-check\': ctrl.projection == projitem}"></span> {{::projitem.label}} </a> </li> </ul> </div> '},function(e,t){e.exports="<div ngeo-map=ctrl.map ngeo-map-manage-resize=ctrl.manageResize ngeo-map-resize-transition=ctrl.resizeTransition> </div> "},function(e,t){e.exports='<div class="btn-group btn-block" ng-class="::{\'dropup\': scaleselectorCtrl.options.dropup}"> <button type=button class="btn btn-default dropdown-toggle" data-toggle=dropdown aria-expanded=false> <span ng-bind-html="scaleselectorCtrl.currentScale | ngeoScalify | ngeoTrustHtml"></span>&nbsp;<i class=caret></i> </button> <ul class="dropdown-menu btn-block" role=menu> <li ng-repeat="zoomLevel in ::scaleselectorCtrl.zoomLevels"> <a href ng-click=scaleselectorCtrl.changeZoom(zoomLevel) ng-bind-html="scaleselectorCtrl.getScale(zoomLevel) | ngeoScalify | ngeoTrustHtml"> </a> </li> </ul> </div> '},function(e,t){e.exports='<div class=modal-header> <button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button> <h4 class=modal-title translate>Share this map</h4> </div> <div class=modal-body> <form role=form name=gmfShareForm novalidate> <div class=form-group> <label for=gmfShareInputShortLink translate>Permalink</label> <input type=text class=form-control id=gmfShareInputShortLink onclick=this.select() ng-model=$ctrl.shortLink readonly=True> <p class=help-block translate>Copy this link to share it.</p> <p class=text-danger ng-if=$ctrl.showLengthWarning> <span class="fa fa-exclamation-triangle"></span> {{\'You have a lot of drawn elements in this map. The above link may not be correctly supported by some browsers.\' | translate}} </p> <p class=text-danger ng-if=$ctrl.errorOnGetShortUrl> <span class="fa fa-exclamation"></span> {{\'Error, cannot get the shortened URL.\' | translate}} </p> </div> <hr> <div class=gmf-share-email ng-if=::$ctrl.enableEmail> <div class=form-group> <label for=gmfShareInputEmail translate>Send this link to</label> <input type=email class=form-control name=inputEmail id=gmfShareInputEmail placeholder=E-mail ng-model=$ctrl.email required> <span ng-show="gmfShareForm.$submitted || gmfShareForm.inputEmail.$touched"> <span class=text-danger ng-show="gmfShareForm.inputEmail.$error.email || gmfShareForm.inputEmail.$error.required"> <i class="fa fa-exclamation-triangle" aria-hidden=true></i> {{\'Invalid email.\' | translate}}</span> </span> </div> <div class=form-group> <textarea class=form-control ng-attr-placeholder="{{\'Message (optional)\' | translate }}" ng-model=$ctrl.message></textarea> </div> <span class=text-success ng-if=$ctrl.successfullySent> <i class="fa fa-check" aria-hidden=true></i> {{ \'Link successfully sent.\' | translate }} </span> <span class=text-danger ng-if=$ctrl.errorOnsend> <i class="fa fa-exclamation" aria-hidden=true></i> {{ \'Error, the link has not been sent.\' | translate }} </span> </div> <div class=text-right> <button type=button class="btn btn-default" data-dismiss=modal translate>Close</button> <button ng-if=::$ctrl.enableEmail type=submit class="btn btn-default btn-primary" ng-click=$ctrl.sendShortUrl() ng-disabled=!gmfShareForm.$valid translate>Send </button> </div> </form> </div> '},function(e,t){e.exports='<div class=lidar-panel gmf-drawprofileline gmf-drawprofileline-active=$ctrl.active gmf-drawprofileline-map=::$ctrl.map gmf-drawprofileline-line=$ctrl.line> <p> <button class="btn btn-default" ngeo-btn ng-model=ctrl.interaction.active translate>Draw LIDAR profile line </button> </p> <p> <em ng-if=ctrl.interaction.active class="text-muted small" translate> Draw a line on the map to display the corresponding LIDAR profile. Use double-click to finish the drawing. </em> </p> <div ng-if=$ctrl.ready> <div ng-if=!!$ctrl.line> <div> <button class="btn btn-default" ng-click=$ctrl.csvExport() translate> CSV export </button> <button class="btn btn-default" ng-click=$ctrl.pngExport() translate> PNG export </button> <button class="btn btn-default" ng-if=!!$ctrl.line ng-click=$ctrl.resetPlot() data-toggle=tooltip data-placement=left data-original-title="{{\'Reset profile\'|translate}}"> <span class="fa fa-refresh"></span> </button> </div> <hr> <button class="btn btn-default" ngeo-btn ng-model=measureActive ng-click=$ctrl.setMeasureActive() data-toggle=tooltip data-placement=left data-original-title="{{\'Take measure on the graph\'|translate}}" translate> Take measure </button> <button class="btn btn-default" ng-if=!!$ctrl.line ng-click=$ctrl.clearMeasure() data-toggle=tooltip data-placement=left data-original-title="{{\'Clear measure\'|translate}}"> <span class="fa fa-eraser"></span> </button> </div> <div> <hr> <p translate>Material</p> <select ng-options="option.name | translate for option in ::$ctrl.getAvailablePointAttributes()" ng-model-options="{getterSetter: true}" ng-model=$ctrl.getSetSelectedPointAttribute> </select> </div> <hr> <p translate>Classes</p> <div ng-repeat="(key, classification) in ::$ctrl.getClassification()"> <input ng-true-value=1 ng-false-value=0 ng-model=classification.visible ng-change="$ctrl.setClassification(classification, key)" ng-checked=!!classification.visible type=checkbox> <span>{{classification.name}}</span> </div> </div> <div ng-if=!$ctrl.ready> <p translate>Initializing, please wait...</p> </div> </div> '},function(e,t,r){"use strict";r.r(t);var i=r(3);var n=r(95);var a=r(9);var o=r(2);var s=r(56);var l=r(55);var u=r(36);var c=r(7);var f=r(33);var h=r(89);var d=r(11);var p=r(76);var v=r(15);var g={SELECT:"select"};var m=function e(t,r,i,n){s["a"].call(this,t);this.selected=r;this.deselected=i;this.mapBrowserEvent=n};Object(i["d"])(m,s["a"]);var y=function e(t){f["a"].call(this,{handleEvent:_});var r=t?t:{};this.condition_=r.condition?r.condition:l["j"];this.addCondition_=r.addCondition?r.addCondition:l[false];this.removeCondition_=r.removeCondition?r.removeCondition:l[false];this.toggleCondition_=r.toggleCondition?r.toggleCondition:l["i"];this.multi_=r.multi?r.multi:false;this.filter_=r.filter?r.filter:u["b"];this.hitTolerance_=r.hitTolerance?r.hitTolerance:0;var i=new h["a"]({source:new p["b"]({useSpatialIndex:false,features:r.features,wrapX:r.wrapX}),style:r.style?r.style:b(),updateWhileAnimating:true,updateWhileInteracting:true});this.featureOverlay_=i;var s=void 0;if(r.layers){if(typeof r.layers==="function"){s=r.layers}else{var c=r.layers;s=function e(t){return Object(a["f"])(c,t)}}}else{s=u["b"]}this.layerFilter_=s;this.featureLayerAssociation_={};var d=this.featureOverlay_.getSource().getFeaturesCollection();Object(o["a"])(d,n["a"].ADD,this.addFeature_,this);Object(o["a"])(d,n["a"].REMOVE,this.removeFeature_,this)};Object(i["d"])(y,f["a"]);y.prototype.addFeatureLayerAssociation_=function(e,t){var r=Object(i["c"])(e);this.featureLayerAssociation_[r]=t};y.prototype.getFeatures=function(){return this.featureOverlay_.getSource().getFeaturesCollection()};y.prototype.getHitTolerance=function(){return this.hitTolerance_};y.prototype.getLayer=function(e){var t=Object(i["c"])(e);return this.featureLayerAssociation_[t]};function _(e){if(!this.condition_(e)){return true}var t=this.addCondition_(e);var r=this.removeCondition_(e);var i=this.toggleCondition_(e);var n=!t&&!r&&!i;var o=e.map;var s=this.featureOverlay_.getSource().getFeaturesCollection();var u=[];var c=[];if(n){Object(d["b"])(this.featureLayerAssociation_);o.forEachFeatureAtPixel(e.pixel,function(e,t){if(this.filter_(e,t)){c.push(e);this.addFeatureLayerAssociation_(e,t);return!this.multi_}}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var f=s.getLength()-1;f>=0;--f){var h=s.item(f);var p=c.indexOf(h);if(p>-1){c.splice(p,1)}else{s.remove(h);u.push(h)}}if(c.length!==0){s.extend(c)}}else{o.forEachFeatureAtPixel(e.pixel,function(e,n){if(this.filter_(e,n)){if((t||i)&&!Object(a["f"])(s.getArray(),e)){c.push(e);this.addFeatureLayerAssociation_(e,n)}else if((r||i)&&Object(a["f"])(s.getArray(),e)){u.push(e);this.removeFeatureLayerAssociation_(e)}return!this.multi_}}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var v=u.length-1;v>=0;--v){s.remove(u[v])}s.extend(c)}if(c.length>0||u.length>0){this.dispatchEvent(new m(g.SELECT,c,u,e))}return Object(l[false])(e)}y.prototype.setHitTolerance=function(e){this.hitTolerance_=e};y.prototype.setMap=function(e){var t=this.getMap();var r=this.featureOverlay_.getSource().getFeaturesCollection();if(t){r.forEach(t.unskipFeature.bind(t))}f["a"].prototype.setMap.call(this,e);this.featureOverlay_.setMap(e);if(e){r.forEach(e.skipFeature.bind(e))}};function b(){var e=Object(v["b"])();Object(a["c"])(e[c["a"].POLYGON],e[c["a"].LINE_STRING]);Object(a["c"])(e[c["a"].GEOMETRY_COLLECTION],e[c["a"].LINE_STRING]);return function(t,r){if(!t.getGeometry()){return null}return e[t.getGeometry().getType()]}}y.prototype.addFeature_=function(e){var t=this.getMap();if(t){t.skipFeature(e.element)}};y.prototype.removeFeature_=function(e){var t=this.getMap();if(t){t.unskipFeature(e.element)}};y.prototype.removeFeatureLayerAssociation_=function(e){var t=Object(i["c"])(e);delete this.featureLayerAssociation_[t]};t["default"]=y},function(e,t,r){"use strict";r.r(t);var i=r(3);var n=r(21);var a=r(46);var o=r(142);var s=r(27);var l=r(56);var u=r(5);var c=r(7);var f=r(34);var h=r(49);var d=r(29);var p=r(89);var v=r(76);var g=r(15);var m={EXTENTCHANGED:"extentchanged"};var y=function e(t){l["a"].call(this,m.EXTENTCHANGED);this.extent=t};Object(i["d"])(y,l["a"]);var _=function e(t){var r=t||{};this.extent_=null;this.pointerHandler_=null;this.pixelTolerance_=r.pixelTolerance!==undefined?r.pixelTolerance:10;this.snappedToVertex_=false;this.extentFeature_=null;this.vertexFeature_=null;if(!t){t={}}d["b"].call(this,{handleDownEvent:w,handleDragEvent:S,handleEvent:b,handleUpEvent:C});this.extentOverlay_=new p["a"]({source:new v["b"]({useSpatialIndex:false,wrapX:!!t.wrapX}),style:t.boxStyle?t.boxStyle:x(),updateWhileAnimating:true,updateWhileInteracting:true});this.vertexOverlay_=new p["a"]({source:new v["b"]({useSpatialIndex:false,wrapX:!!t.wrapX}),style:t.pointerStyle?t.pointerStyle:O(),updateWhileAnimating:true,updateWhileInteracting:true});if(t.extent){this.setExtent(t.extent)}};Object(i["d"])(_,d["b"]);function b(e){if(!(e instanceof o["a"])){return true}if(e.type==a["a"].POINTERMOVE&&!this.handlingDownUpSequence){this.handlePointerMove_(e)}d["c"].call(this,e);return false}function w(e){var t=e.pixel;var r=e.map;var i=this.getExtent();var n=this.snapToVertex_(t,r);var a=function e(t){var r=null;var n=null;if(t[0]==i[0]){r=i[2]}else if(t[0]==i[2]){r=i[0]}if(t[1]==i[1]){n=i[3]}else if(t[1]==i[3]){n=i[1]}if(r!==null&&n!==null){return[r,n]}return null};if(n&&i){var o=n[0]==i[0]||n[0]==i[2]?n[0]:null;var s=n[1]==i[1]||n[1]==i[3]?n[1]:null;if(o!==null&&s!==null){this.pointerHandler_=T(a(n))}else if(o!==null){this.pointerHandler_=E(a([o,i[1]]),a([o,i[3]]))}else if(s!==null){this.pointerHandler_=E(a([i[0],s]),a([i[2],s]))}}else{n=r.getCoordinateFromPixel(t);this.setExtent([n[0],n[1],n[0],n[1]]);this.pointerHandler_=T(n)}return true}function S(e){if(this.pointerHandler_){var t=e.coordinate;this.setExtent(this.pointerHandler_(t));this.createOrUpdatePointerFeature_(t)}return true}function C(e){this.pointerHandler_=null;var t=this.getExtent();if(!t||Object(u["u"])(t)===0){this.setExtent(null)}return false}function x(){var e=Object(g["b"])();return function(t,r){return e[c["a"].POLYGON]}}function O(){var e=Object(g["b"])();return function(t,r){return e[c["a"].POINT]}}function T(e){return function(t){return Object(u["b"])([e,t])}}function E(e,t){if(e[0]==t[0]){return function(r){return Object(u["b"])([e,[r[0],t[1]]])}}else if(e[1]==t[1]){return function(r){return Object(u["b"])([e,[t[0],r[1]]])}}else{return null}}function M(e){return[[[e[0],e[1]],[e[0],e[3]]],[[e[0],e[3]],[e[2],e[3]]],[[e[2],e[3]],[e[2],e[1]]],[[e[2],e[1]],[e[0],e[1]]]]}_.prototype.snapToVertex_=function(e,t){var r=t.getCoordinateFromPixel(e);var i=function e(t,i){return Object(s["i"])(r,t)-Object(s["i"])(r,i)};var n=this.getExtent();if(n){var a=M(n);a.sort(i);var o=a[0];var l=Object(s["c"])(r,o);var u=t.getPixelFromCoordinate(l);if(Object(s["d"])(e,u)<=this.pixelTolerance_){var c=t.getPixelFromCoordinate(o[0]);var f=t.getPixelFromCoordinate(o[1]);var h=Object(s["h"])(u,c);var d=Object(s["h"])(u,f);var p=Math.sqrt(Math.min(h,d));this.snappedToVertex_=p<=this.pixelTolerance_;if(this.snappedToVertex_){l=h>d?o[1]:o[0]}return l}}return null};_.prototype.handlePointerMove_=function(e){var t=e.pixel;var r=e.map;var i=this.snapToVertex_(t,r);if(!i){i=r.getCoordinateFromPixel(t)}this.createOrUpdatePointerFeature_(i)};_.prototype.createOrUpdateExtentFeature_=function(e){var t=this.extentFeature_;if(!t){if(!e){t=new n["a"]({})}else{t=new n["a"](Object(h["c"])(e))}this.extentFeature_=t;this.extentOverlay_.getSource().addFeature(t)}else{if(!e){t.setGeometry(undefined)}else{t.setGeometry(Object(h["c"])(e))}}return t};_.prototype.createOrUpdatePointerFeature_=function(e){var t=this.vertexFeature_;if(!t){t=new n["a"](new f["a"](e));this.vertexFeature_=t;this.vertexOverlay_.getSource().addFeature(t)}else{var r=t.getGeometry();r.setCoordinates(e)}return t};_.prototype.setMap=function(e){this.extentOverlay_.setMap(e);this.vertexOverlay_.setMap(e);d["b"].prototype.setMap.call(this,e)};_.prototype.getExtent=function(){return this.extent_};_.prototype.setExtent=function(e){this.extent_=e?e:null;this.createOrUpdateExtentFeature_(e);this.dispatchEvent(new y(this.extent_))};t["default"]=_},function(e,t,r){"use strict";r.r(t);var i=r(3);var n=r(202);var a=r(64);var o=r(55);var s=r(33);var l=r(29);var u=function e(t){var r=t?t:{};l["b"].call(this,{handleDownEvent:h,handleDragEvent:c,handleUpEvent:f});this.condition_=r.condition?r.condition:o["i"];this.lastAngle_=undefined;this.lastMagnitude_=undefined;this.lastScaleDelta_=0;this.duration_=r.duration!==undefined?r.duration:400};Object(i["d"])(u,l["b"]);function c(e){if(!Object(o["e"])(e)){return}var t=e.map;var r=t.getSize();var i=e.pixel;var a=i[0]-r[0]/2;var l=r[1]/2-i[1];var u=Math.atan2(l,a);var c=Math.sqrt(a*a+l*l);var f=t.getView();if(f.getConstraints().rotation!==n["c"]&&this.lastAngle_!==undefined){var h=u-this.lastAngle_;Object(s["d"])(f,f.getRotation()-h)}this.lastAngle_=u;if(this.lastMagnitude_!==undefined){var d=this.lastMagnitude_*(f.getResolution()/c);Object(s["g"])(f,d)}if(this.lastMagnitude_!==undefined){this.lastScaleDelta_=this.lastMagnitude_/c}this.lastMagnitude_=c}function f(e){if(!Object(o["e"])(e)){return true}var t=e.map;var r=t.getView();r.setHint(a["a"].INTERACTING,-1);var i=this.lastScaleDelta_-1;Object(s["c"])(r,r.getRotation());Object(s["e"])(r,r.getResolution(),undefined,this.duration_,i);this.lastScaleDelta_=0;return false}function h(e){if(!Object(o["e"])(e)){return false}if(this.condition_(e)){e.map.getView().setHint(a["a"].INTERACTING,1);this.lastAngle_=undefined;this.lastMagnitude_=undefined;return true}else{return false}}t["default"]=u},function(e,t,r){"use strict";r.r(t);var i=r(3);var n=r(36);var a=r(2);var o=r(56);var s=r(16);var l=r(33);var u=r(12);var c={ADD_FEATURES:"addfeatures"};var f=function e(t,r,i,n){o["a"].call(this,t);this.features=i;this.file=r;this.projection=n};Object(i["d"])(f,o["a"]);var h=function e(t){var r=t?t:{};l["a"].call(this,{handleEvent:n["b"]});this.formatConstructors_=r.formatConstructors?r.formatConstructors:[];this.projection_=r.projection?Object(u["g"])(r.projection):null;this.dropListenKeys_=null;this.source_=r.source||null;this.target=r.target?r.target:null};Object(i["d"])(h,l["a"]);function d(e){var t=e.dataTransfer.files;for(var r=0,i=t.length;r<i;++r){var n=t.item(r);var a=new FileReader;a.addEventListener(s["a"].LOAD,this.handleResult_.bind(this,n));a.readAsText(n)}}function p(e){e.stopPropagation();e.preventDefault();e.dataTransfer.dropEffect="copy"}h.prototype.handleResult_=function(e,t){var r=t.target.result;var i=this.getMap();var n=this.projection_;if(!n){var a=i.getView();n=a.getProjection()}var o=this.formatConstructors_;var s=[];for(var l=0,u=o.length;l<u;++l){var h=o[l];var d=new h;s=this.tryReadFeatures_(d,r,{featureProjection:n});if(s&&s.length>0){break}}if(this.source_){this.source_.clear();this.source_.addFeatures(s)}this.dispatchEvent(new f(c.ADD_FEATURES,e,s,n))};h.prototype.registerListeners_=function(){var e=this.getMap();if(e){var t=this.target?this.target:e.getViewport();this.dropListenKeys_=[Object(a["a"])(t,s["a"].DROP,d,this),Object(a["a"])(t,s["a"].DRAGENTER,p,this),Object(a["a"])(t,s["a"].DRAGOVER,p,this),Object(a["a"])(t,s["a"].DROP,p,this)]}};h.prototype.setActive=function(e){l["a"].prototype.setActive.call(this,e);if(e){this.registerListeners_()}else{this.unregisterListeners_()}};h.prototype.setMap=function(e){this.unregisterListeners_();l["a"].prototype.setMap.call(this,e);if(this.getActive()){this.registerListeners_()}};h.prototype.tryReadFeatures_=function(e,t,r){try{return e.readFeatures(t,r)}catch(e){return null}};h.prototype.unregisterListeners_=function(){if(this.dropListenKeys_){this.dropListenKeys_.forEach(a["e"]);this.dropListenKeys_=null}};t["default"]=h},function(e,t,r){"use strict";r.r(t);var i=r(3);var n=r(2);var a=r(16);var o=r(72);var s=r(70);var l=function e(t){var r=t?t:{};this.extent=r.extent?r.extent:null;var i=r.className!==undefined?r.className:"ol-zoom-extent";var l=r.label!==undefined?r.label:"E";var u=r.tipLabel!==undefined?r.tipLabel:"Fit to extent";var c=document.createElement("button");c.setAttribute("type","button");c.title=u;c.appendChild(typeof l==="string"?document.createTextNode(l):l);Object(n["a"])(c,a["a"].CLICK,this.handleClick_,this);var f=i+" "+s["e"]+" "+s["b"];var h=document.createElement("div");h.className=f;h.appendChild(c);o["a"].call(this,{element:h,target:r.target})};Object(i["d"])(l,o["a"]);l.prototype.handleClick_=function(e){e.preventDefault();this.handleZoomToExtent()};l.prototype.handleZoomToExtent=function(){var e=this.getMap();var t=e.getView();var r=!this.extent?t.getProjection().getExtent():this.extent;t.fit(r)};t["default"]=l},function(e,t,r){"use strict";r.r(t);r.d(t,"render",function(){return g});var i=r(3);var n=r(64);var a=r(72);var o=r(70);var s=r(125);var l=r(2);var u=r(56);var c=r(16);var f=r(22);var h=r(null);var d=r(null);var p={VERTICAL:0,HORIZONTAL:1};var v=function e(t){var r=t?t:{};this.currentResolution_=undefined;this.direction_=p.VERTICAL;this.dragging_;this.heightLimit_=0;this.widthLimit_=0;this.previousX_;this.previousY_;this.thumbSize_=null;this.sliderInitialized_=false;this.duration_=r.duration!==undefined?r.duration:200;var i=r.className!==undefined?r.className:"ol-zoomslider";var n=document.createElement("button");n.setAttribute("type","button");n.className=i+"-thumb "+o["e"];var s=document.createElement("div");s.className=i+" "+o["e"]+" "+o["b"];s.appendChild(n);this.dragger_=new d["a"](s);Object(l["a"])(this.dragger_,h["a"].POINTERDOWN,this.handleDraggerStart_,this);Object(l["a"])(this.dragger_,h["a"].POINTERMOVE,this.handleDraggerDrag_,this);Object(l["a"])(this.dragger_,h["a"].POINTERUP,this.handleDraggerEnd_,this);Object(l["a"])(s,c["a"].CLICK,this.handleContainerClick_,this);Object(l["a"])(n,c["a"].CLICK,u["b"]);a["a"].call(this,{element:s,render:r.render||g})};Object(i["d"])(v,a["a"]);v.prototype.disposeInternal=function(){this.dragger_.dispose();a["a"].prototype.disposeInternal.call(this)};v.prototype.setMap=function(e){a["a"].prototype.setMap.call(this,e);if(e){e.render()}};v.prototype.initSlider_=function(){var e=this.element;var t={width:e.offsetWidth,height:e.offsetHeight};var r=e.firstElementChild;var i=getComputedStyle(r);var n=r.offsetWidth+parseFloat(i["marginRight"])+parseFloat(i["marginLeft"]);var a=r.offsetHeight+parseFloat(i["marginTop"])+parseFloat(i["marginBottom"]);this.thumbSize_=[n,a];if(t.width>t.height){this.direction_=p.HORIZONTAL;this.widthLimit_=t.width-n}else{this.direction_=p.VERTICAL;this.heightLimit_=t.height-a}this.sliderInitialized_=true};function g(e){if(!e.frameState){return}if(!this.sliderInitialized_){this.initSlider_()}var t=e.frameState.viewState.resolution;if(t!==this.currentResolution_){this.currentResolution_=t;this.setThumbPosition_(t)}}v.prototype.handleContainerClick_=function(e){var t=this.getMap().getView();var r=this.getRelativePosition_(e.offsetX-this.thumbSize_[0]/2,e.offsetY-this.thumbSize_[1]/2);var i=this.getResolutionForPosition_(r);t.animate({resolution:t.constrainResolution(i),duration:this.duration_,easing:s["b"]})};v.prototype.handleDraggerStart_=function(e){if(!this.dragging_&&e.originalEvent.target===this.element.firstElementChild){this.getMap().getView().setHint(n["a"].INTERACTING,1);this.previousX_=e.clientX;this.previousY_=e.clientY;this.dragging_=true}};v.prototype.handleDraggerDrag_=function(e){if(this.dragging_){var t=this.element.firstElementChild;var r=e.clientX-this.previousX_+parseInt(t.style.left,10);var i=e.clientY-this.previousY_+parseInt(t.style.top,10);var n=this.getRelativePosition_(r,i);this.currentResolution_=this.getResolutionForPosition_(n);this.getMap().getView().setResolution(this.currentResolution_);this.setThumbPosition_(this.currentResolution_);this.previousX_=e.clientX;this.previousY_=e.clientY}};v.prototype.handleDraggerEnd_=function(e){if(this.dragging_){var t=this.getMap().getView();t.setHint(n["a"].INTERACTING,-1);t.animate({resolution:t.constrainResolution(this.currentResolution_),duration:this.duration_,easing:s["b"]});this.dragging_=false;this.previousX_=undefined;this.previousY_=undefined}};v.prototype.setThumbPosition_=function(e){var t=this.getPositionForResolution_(e);var r=this.element.firstElementChild;if(this.direction_==p.HORIZONTAL){r.style.left=this.widthLimit_*t+"px"}else{r.style.top=this.heightLimit_*t+"px"}};v.prototype.getRelativePosition_=function(e,t){var r=void 0;if(this.direction_===p.HORIZONTAL){r=e/this.widthLimit_}else{r=t/this.heightLimit_}return Object(f["a"])(r,0,1)};v.prototype.getResolutionForPosition_=function(e){var t=this.getMap().getView().getResolutionForValueFunction();return t(1-e)};v.prototype.getPositionForResolution_=function(e){var t=this.getMap().getView().getValueForResolutionFunction();return 1-t(e)};t["default"]=v},function(e,t,r){"use strict";r.r(t);r.d(t,"render",function(){return C});var i=r(3);var n=r(28);var a=r(59);var o=r(247);var s=r(null);var l=r(44);var u=r(223);var c=r(144);var f=r(120);var h=r(null);var d=r(72);var p=r(27);var v=r(70);var g=r(65);var m=r(2);var y=r(16);var _=r(5);var b=.75;var w=.1;var S=function e(t){var r=t?t:{};this.collapsed_=r.collapsed!==undefined?r.collapsed:true;this.collapsible_=r.collapsible!==undefined?r.collapsible:true;if(!this.collapsible_){this.collapsed_=false}var i=r.className!==undefined?r.className:"ol-overviewmap";var o=r.tipLabel!==undefined?r.tipLabel:"Overview map";var s=r.collapseLabel!==undefined?r.collapseLabel:"«";if(typeof s==="string"){this.collapseLabel_=document.createElement("span");this.collapseLabel_.textContent=s}else{this.collapseLabel_=s}var l=r.label!==undefined?r.label:"»";if(typeof l==="string"){this.label_=document.createElement("span");this.label_.textContent=l}else{this.label_=l}var u=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;var h=document.createElement("button");h.setAttribute("type","button");h.title=o;h.appendChild(u);Object(m["a"])(h,y["a"].CLICK,this.handleClick_,this);this.ovmapDiv_=document.createElement("DIV");this.ovmapDiv_.className="ol-overviewmap-map";this.ovmap_=new a["a"]({controls:new n["b"],interactions:new n["b"],view:r.view});var p=this.ovmap_;if(r.layers){r.layers.forEach(function(e){p.addLayer(e)}.bind(this))}var g=document.createElement("DIV");g.className="ol-overviewmap-box";g.style.boxSizing="border-box";this.boxOverlay_=new c["a"]({position:[0,0],positioning:f["a"].BOTTOM_LEFT,element:g});this.ovmap_.addOverlay(this.boxOverlay_);var _=i+" "+v["e"]+" "+v["b"]+(this.collapsed_&&this.collapsible_?" "+v["a"]:"")+(this.collapsible_?"":" ol-uncollapsible");var b=document.createElement("div");b.className=_;b.appendChild(this.ovmapDiv_);b.appendChild(h);d["a"].call(this,{element:b,render:r.render||C,target:r.target});var w=this;var S=this.boxOverlay_;var x=this.boxOverlay_.getElement();var O=function e(t){return{clientX:t.clientX-x.offsetWidth/2,clientY:t.clientY+x.offsetHeight/2}};var T=function e(t){var r=p.getEventCoordinate(O(t));S.setPosition(r)};var E=function e(t){var r=p.getEventCoordinate(t);w.getMap().getView().setCenter(r);window.removeEventListener("mousemove",T);window.removeEventListener("mouseup",e)};x.addEventListener("mousedown",function(){window.addEventListener("mousemove",T);window.addEventListener("mouseup",E)})};Object(i["d"])(S,d["a"]);S.prototype.setMap=function(e){var t=this.getMap();if(e===t){return}if(t){var r=t.getView();if(r){this.unbindView_(r)}this.ovmap_.setTarget(null)}d["a"].prototype.setMap.call(this,e);if(e){this.ovmap_.setTarget(this.ovmapDiv_);this.listenerKeys.push(Object(m["a"])(e,u["a"].PROPERTYCHANGE,this.handleMapPropertyChange_,this));if(this.ovmap_.getLayers().getLength()===0){this.ovmap_.setLayerGroup(e.getLayerGroup())}var i=e.getView();if(i){this.bindView_(i);if(i.isDef()){this.ovmap_.updateSize();this.resetExtent_()}}}};S.prototype.handleMapPropertyChange_=function(e){if(e.key===s["a"].VIEW){var t=e.oldValue;if(t){this.unbindView_(t)}var r=this.getMap().getView();this.bindView_(r)}};S.prototype.bindView_=function(e){Object(m["a"])(e,Object(l["b"])(h["a"].ROTATION),this.handleRotationChanged_,this)};S.prototype.unbindView_=function(e){Object(m["c"])(e,Object(l["b"])(h["a"].ROTATION),this.handleRotationChanged_,this)};S.prototype.handleRotationChanged_=function(){this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())};function C(e){this.validateExtent_();this.updateBox_()}S.prototype.validateExtent_=function(){var e=this.getMap();var t=this.ovmap_;if(!e.isRendered()||!t.isRendered()){return}var r=e.getSize();var i=e.getView();var n=i.calculateExtent(r);var a=t.getSize();var o=t.getView();var s=o.calculateExtent(a);var l=t.getPixelFromCoordinate(Object(_["C"])(n));var u=t.getPixelFromCoordinate(Object(_["w"])(n));var c=Math.abs(l[0]-u[0]);var f=Math.abs(l[1]-u[1]);var h=a[0];var d=a[1];if(c<h*w||f<d*w||c>h*b||f>d*b){this.resetExtent_()}else if(!Object(_["g"])(s,n)){this.recenter_()}};S.prototype.resetExtent_=function(){if(b===0||w===0){return}var e=this.getMap();var t=this.ovmap_;var r=e.getSize();var i=e.getView();var n=i.calculateExtent(r);var a=t.getView();var o=Math.log(b/w)/Math.LN2;var s=1/(Math.pow(2,o/2)*w);Object(_["J"])(n,s);a.fit(n)};S.prototype.recenter_=function(){var e=this.getMap();var t=this.ovmap_;var r=e.getView();var i=t.getView();i.setCenter(r.getCenter())};S.prototype.updateBox_=function(){var e=this.getMap();var t=this.ovmap_;if(!e.isRendered()||!t.isRendered()){return}var r=e.getSize();var i=e.getView();var n=t.getView();var a=i.getRotation();var o=this.boxOverlay_;var s=this.boxOverlay_.getElement();var l=i.calculateExtent(r);var u=n.getResolution();var c=Object(_["v"])(l);var f=Object(_["D"])(l);var h=this.calculateCoordinateRotate_(a,c);o.setPosition(h);if(s){s.style.width=Math.abs((c[0]-f[0])/u)+"px";s.style.height=Math.abs((f[1]-c[1])/u)+"px"}};S.prototype.calculateCoordinateRotate_=function(e,t){var r=void 0;var i=this.getMap();var n=i.getView();var a=n.getCenter();if(a){r=[t[0]-a[0],t[1]-a[1]];Object(p["f"])(r,e);Object(p["a"])(r,a)}return r};S.prototype.handleClick_=function(e){e.preventDefault();this.handleToggle_()};S.prototype.handleToggle_=function(){this.element.classList.toggle(v["a"]);if(this.collapsed_){Object(g["f"])(this.collapseLabel_,this.label_)}else{Object(g["f"])(this.label_,this.collapseLabel_)}this.collapsed_=!this.collapsed_;var e=this.ovmap_;if(!this.collapsed_&&!e.isRendered()){e.updateSize();this.resetExtent_();Object(m["b"])(e,o["a"].POSTRENDER,function(e){this.updateBox_()},this)}};S.prototype.getCollapsible=function(){return this.collapsible_};S.prototype.setCollapsible=function(e){if(this.collapsible_===e){return}this.collapsible_=e;this.element.classList.toggle("ol-uncollapsible");if(!e&&this.collapsed_){this.handleToggle_()}};S.prototype.setCollapsed=function(e){if(!this.collapsible_||this.collapsed_===e){return}this.handleToggle_()};S.prototype.getCollapsed=function(){return this.collapsed_};S.prototype.getOverviewMap=function(){return this.ovmap_};t["default"]=S},function(e,t,r){"use strict";r.r(t);var i=r(3);var n=r(72);var a=r(70);var o=r(65);var s=r(2);var l=r(16);var u=function(){var e=void 0;return function(){if(!e){var t=document.body;if(t.webkitRequestFullscreen){e="webkitfullscreenchange"}else if(t.mozRequestFullScreen){e="mozfullscreenchange"}else if(t.msRequestFullscreen){e="MSFullscreenChange"}else if(t.requestFullscreen){e="fullscreenchange"}}return e}}();var c=function e(t){var r=t?t:{};this.cssClassName_=r.className!==undefined?r.className:"ol-full-screen";var i=r.label!==undefined?r.label:"⤢";this.labelNode_=typeof i==="string"?document.createTextNode(i):i;var o=r.labelActive!==undefined?r.labelActive:"×";this.labelActiveNode_=typeof o==="string"?document.createTextNode(o):o;var u=r.tipLabel?r.tipLabel:"Toggle full-screen";var c=document.createElement("button");c.className=this.cssClassName_+"-"+h();c.setAttribute("type","button");c.title=u;c.appendChild(this.labelNode_);Object(s["a"])(c,l["a"].CLICK,this.handleClick_,this);var d=this.cssClassName_+" "+a["e"]+" "+a["b"]+" "+(!f()?a[false]:"");var p=document.createElement("div");p.className=d;p.appendChild(c);n["a"].call(this,{element:p,target:r.target});this.keys_=r.keys!==undefined?r.keys:false;this.source_=r.source};Object(i["d"])(c,n["a"]);c.prototype.handleClick_=function(e){e.preventDefault();this.handleFullScreen_()};c.prototype.handleFullScreen_=function(){if(!f()){return}var e=this.getMap();if(!e){return}if(h()){v()}else{var t=void 0;if(this.source_){t=typeof this.source_==="string"?document.getElementById(this.source_):this.source_}else{t=e.getTargetElement()}if(this.keys_){p(t)}else{d(t)}}};c.prototype.handleFullScreenChange_=function(){var e=this.element.firstElementChild;var t=this.getMap();if(h()){e.className=this.cssClassName_+"-true";Object(o["f"])(this.labelActiveNode_,this.labelNode_)}else{e.className=this.cssClassName_+"-false";Object(o["f"])(this.labelNode_,this.labelActiveNode_)}if(t){t.updateSize()}};c.prototype.setMap=function(e){n["a"].prototype.setMap.call(this,e);if(e){this.listenerKeys.push(Object(s["a"])(document,u(),this.handleFullScreenChange_,this))}};function f(){var e=document.body;return!!(e.webkitRequestFullscreen||e.mozRequestFullScreen&&document.mozFullScreenEnabled||e.msRequestFullscreen&&document.msFullscreenEnabled||e.requestFullscreen&&document.fullscreenEnabled)}function h(){return!!(document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)}function d(e){if(e.requestFullscreen){e.requestFullscreen()}else if(e.msRequestFullscreen){e.msRequestFullscreen()}else if(e.mozRequestFullScreen){e.mozRequestFullScreen()}else if(e.webkitRequestFullscreen){e.webkitRequestFullscreen()}}function p(e){if(e.mozRequestFullScreenWithKeys){e.mozRequestFullScreenWithKeys()}else if(e.webkitRequestFullscreen){e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}else{d(e)}}function v(){if(document.exitFullscreen){document.exitFullscreen()}else if(document.msExitFullscreen){document.msExitFullscreen()}else if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else if(document.webkitExitFullscreen){document.webkitExitFullscreen()}}t["default"]=c},function(e,t){e.exports='<div id=gmf-lidarprofile-container class=panel ng-show=$ctrl.active> <div class=lidarprofile> <div class=lidar-error></div> <canvas class=lidar-canvas></canvas> <svg class=lidar-svg style=fill:#ff0;position:absolute;z-index:1></svg> </div> <div class=lidar-legend> <div class=width-info></div> <div class=lod-info></div> <div class=lidar-info></div> </div> <div class=close ng-click="$ctrl.line = null">&times; </div> </div> '},function(e,t){e.exports='<div class=gmf-time-slider> <div ui-slider=sliderCtrl.sliderOptions ng-model=sliderCtrl.dates> <span class="ui-slider-handle ui-state-default ui-corner-all" tabindex=0 data-toggle=tooltip title=""> </span> </div> <div class=gmf-time-slider-displayed-dates> <div class=gmf-time-slider-start-date ng-if="::sliderCtrl.time.mode === \'range\'"> <span>{{sliderCtrl.getLocalizedDate(sliderCtrl.dates[0])}}</span> </div> <div class=gmf-time-slider-start-date ng-if="::sliderCtrl.time.mode === \'value\'"> <span>{{sliderCtrl.getLocalizedDate(sliderCtrl.dates)}}</span> </div> <div class=gmf-time-slider-end-date ng-if="::sliderCtrl.time.mode === \'range\'"> <span>{{sliderCtrl.getLocalizedDate(sliderCtrl.dates[1])}}</span> </div> </div> </div> '},function(e,t,r){(function(e){angular.module("ui.slider",[]).value("uiSliderConfig",{}).directive("uiSlider",["uiSliderConfig","$timeout",function(t,r){t=t||{};return{require:"ngModel",compile:function(){var i=function(i,n,a,o){function s(e,t){return t?parseFloat(e):parseInt(e,10)}var l=angular.copy(i.$eval(a.uiSlider));var u=angular.extend(l||{},t);var c={min:null,max:null};var f=["min","max","step","lowerBound","upperBound"];var h=!angular.isUndefined(a.useDecimals)?true:false;var d=angular.isDefined(u["updateOn"])?u["updateOn"]:"slide";var p=function(){if(angular.isArray(o.$viewValue)&&u.range!==true){console.warn("Change your range option of ui-slider. When assigning ngModel an array of values then the range option should be set to true.");u.range=true}angular.forEach(f,function(e){if(angular.isDefined(a[e])){u[e]=s(a[e],h)}});n.slider(u);p=angular.noop};angular.forEach(f,function(e){a.$observe(e,function(t){if(!!t){p();u[e]=s(t,h);n.slider("option",e,s(t,h));o.$render()}})});a.$observe("disabled",function(e){p();n.slider("option","disabled",!!e)});i.$watch(a.uiSlider,function(e){p();if(e!==undefined){n.slider("option",e)}},true);r(p,0,true);n.bind(d,function(t,r){var a;if(r.values){var s=r.values.slice();if(u.lowerBound&&s[0]<u.lowerBound){s[0]=Math.max(s[0],u.lowerBound)}if(u.upperBound&&s[1]>u.upperBound){s[1]=Math.min(s[1],u.upperBound)}if(s[0]!==r.values[0]||s[1]!==r.values[1]){a=true;r.values=s}}else{var l=r.value;if(u.lowerBound&&l<u.lowerBound){l=Math.max(l,u.lowerBound)}if(u.upperBound&&l>u.upperBound){l=Math.min(l,u.upperBound)}if(l!==r.value){a=true;r.value=l}}o.$setViewValue(r.values||r.value);e(r.handle).find(".ui-slider-tip").text(r.value);i.$apply();if(a){setTimeout(function(){n.slider("value",r.values||r.value)},0);return false}});o.$render=function(){p();var e=u.range===true?"values":"value";if(u.range!==true&&isNaN(o.$viewValue)&&!(o.$viewValue instanceof Array)){o.$viewValue=0}else if(u.range&&!angular.isDefined(o.$viewValue)){o.$viewValue=[0,0]}if(u.range===true){if(o.$viewValue&&angular.isString(o.$viewValue)&&(o.$viewValue.match(/,/g)||[]).length===1){var t=o.$viewValue.split(",");o.$viewValue=[Number(t[0]),Number(t[1])]}if(angular.isDefined(u.min)&&u.min>o.$viewValue[0]){o.$viewValue[0]=u.min}if(angular.isDefined(u.max)&&u.max<o.$viewValue[1]){o.$viewValue[1]=u.max}if(o.$viewValue[0]>o.$viewValue[1]){if(c.min>=o.$viewValue[1]){o.$viewValue[1]=c.min}if(c.max<=o.$viewValue[0]){o.$viewValue[0]=c.max}}c.min=o.$viewValue[0];c.max=o.$viewValue[1]}n.slider(e,o.$viewValue)};i.$watch(a.ngModel,function(){if(u.range===true){o.$render();e(n).find(".ui-slider-tip").each(function(t,r){e(r).text(o.$viewValue[t])})}else{e(n).find(".ui-slider-tip").text(o.$viewValue)}},true);function v(){if(n.hasClass("ui-slider")){n.slider("destroy")}}i.$on("$destroy",v);n.one("$destroy",v)};var n=function(t,i,n,a){var o=angular.extend({},t.$eval(n.uiSlider));var s=["min","max","step","tick","tip"];angular.forEach(s,function(e){if(angular.isDefined(n[e])){o[e]=n[e]}});if(angular.isDefined(o["tick"])&&angular.isDefined(o["step"])){var l=parseInt((parseInt(o["max"])-parseInt(o["min"]))/parseInt(o["step"]));for(var u=l;u>=0;u--){var c=u/l*100+"%";e("<div/>").addClass("ui-slider-tick").appendTo(i).css({left:c})}}if(angular.isDefined(o["tip"])){r(function(){var t=i.find(".ui-slider-handle");if(t&&t.length>1&&a.$viewValue&&angular.isArray(a.$viewValue)){e(t[0]).append('<div class="ui-slider-tip">'+a.$viewValue[0]+"</div>");e(t[1]).append('<div class="ui-slider-tip">'+a.$viewValue[1]+"</div>")}else{i.find(".ui-slider-handle").append('<div class="ui-slider-tip">'+a.$viewValue+"</div>")}},10)}};return{pre:i,post:n}}}}])}).call(this,r(24))},function(e,t,r){r(501);e.exports="ui.slider"},function(e,t,r){var i,n,a;
/*!
 * jQuery UI Slider 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/*!
 * jQuery UI Slider 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(o){if(true){!(n=[r(24),r(275),r(349),r(103),r(224)],i=o,a=typeof i==="function"?i.apply(t,n):i,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.widget("ui.slider",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:false,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this._calculateNewMax();this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content");this._refresh();this._animateOff=false},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue()},_createHandles:function(){var t,r,i=this.options,n=this.element.find(".ui-slider-handle"),a="<span tabindex='0'></span>",o=[];r=i.values&&i.values.length||1;if(n.length>r){n.slice(r).remove();n=n.slice(0,r)}for(t=n.length;t<r;t++){o.push(a)}this.handles=n.add(e(o.join("")).appendTo(this.element));this._addClass(this.handles,"ui-slider-handle","ui-state-default");this.handle=this.handles.eq(0);this.handles.each(function(t){e(this).data("ui-slider-handle-index",t).attr("tabIndex",0)})},_createRange:function(){var t=this.options;if(t.range){if(t.range===true){if(!t.values){t.values=[this._valueMin(),this._valueMin()]}else if(t.values.length&&t.values.length!==2){t.values=[t.values[0],t.values[0]]}else if(e.isArray(t.values)){t.values=t.values.slice(0)}}if(!this.range||!this.range.length){this.range=e("<div>").appendTo(this.element);this._addClass(this.range,"ui-slider-range")}else{this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max");this.range.css({left:"",bottom:""})}if(t.range==="min"||t.range==="max"){this._addClass(this.range,"ui-slider-range-"+t.range)}}else{if(this.range){this.range.remove()}this.range=null}},_setupEvents:function(){this._off(this.handles);this._on(this.handles,this._handleEvents);this._hoverable(this.handles);this._focusable(this.handles)},_destroy:function(){this.handles.remove();if(this.range){this.range.remove()}this._mouseDestroy()},_mouseCapture:function(t){var r,i,n,a,o,s,l,u,c=this,f=this.options;if(f.disabled){return false}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();r={x:t.pageX,y:t.pageY};i=this._normValueFromMouse(r);n=this._valueMax()-this._valueMin()+1;this.handles.each(function(t){var r=Math.abs(i-c.values(t));if(n>r||n===r&&(t===c._lastChangedValue||c.values(t)===f.min)){n=r;a=e(this);o=t}});s=this._start(t,o);if(s===false){return false}this._mouseSliding=true;this._handleIndex=o;this._addClass(a,null,"ui-state-active");a.trigger("focus");l=a.offset();u=!e(t.target).parents().addBack().is(".ui-slider-handle");this._clickOffset=u?{left:0,top:0}:{left:t.pageX-l.left-a.width()/2,top:t.pageY-l.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)};if(!this.handles.hasClass("ui-state-hover")){this._slide(t,o,i)}this._animateOff=true;return true},_mouseStart:function(){return true},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},r=this._normValueFromMouse(t);this._slide(e,this._handleIndex,r);return false},_mouseStop:function(e){this._removeClass(this.handles,null,"ui-state-active");this._mouseSliding=false;this._stop(e,this._handleIndex);this._change(e,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,r,i,n,a;if(this.orientation==="horizontal"){t=this.elementSize.width;r=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{t=this.elementSize.height;r=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}i=r/t;if(i>1){i=1}if(i<0){i=0}if(this.orientation==="vertical"){i=1-i}n=this._valueMax()-this._valueMin();a=this._valueMin()+i*n;return this._trimAlignValue(a)},_uiHash:function(e,t,r){var i={handle:this.handles[e],handleIndex:e,value:t!==undefined?t:this.value()};if(this._hasMultipleValues()){i.value=t!==undefined?t:this.values(e);i.values=r||this.values()}return i},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(e,t){return this._trigger("start",e,this._uiHash(t))},_slide:function(e,t,r){var i,n,a=this.value(),o=this.values();if(this._hasMultipleValues()){n=this.values(t?0:1);a=this.values(t);if(this.options.values.length===2&&this.options.range===true){r=t===0?Math.min(n,r):Math.max(n,r)}o[t]=r}if(r===a){return}i=this._trigger("slide",e,this._uiHash(t,r,o));if(i===false){return}if(this._hasMultipleValues()){this.values(t,r)}else{this.value(r)}},_stop:function(e,t){this._trigger("stop",e,this._uiHash(t))},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){this._lastChangedValue=t;this._trigger("change",e,this._uiHash(t))}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e);this._refreshValue();this._change(null,0);return}return this._value()},values:function(t,r){var i,n,a;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(r);this._refreshValue();this._change(null,t);return}if(arguments.length){if(e.isArray(arguments[0])){i=this.options.values;n=arguments[0];for(a=0;a<i.length;a+=1){i[a]=this._trimAlignValue(n[a]);this._change(null,a)}this._refreshValue()}else{if(this._hasMultipleValues()){return this._values(t)}else{return this.value()}}}else{return this._values()}},_setOption:function(t,r){var i,n=0;if(t==="range"&&this.options.range===true){if(r==="min"){this.options.value=this._values(0);this.options.values=null}else if(r==="max"){this.options.value=this._values(this.options.values.length-1);this.options.values=null}}if(e.isArray(this.options.values)){n=this.options.values.length}this._super(t,r);switch(t){case"orientation":this._detectOrientation();this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation);this._refreshValue();if(this.options.range){this._refreshRange(r)}this.handles.css(r==="horizontal"?"bottom":"left","");break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(i=n-1;i>=0;i--){this._change(null,i)}this._animateOff=false;break;case"step":case"min":case"max":this._animateOff=true;this._calculateNewMax();this._refreshValue();this._animateOff=false;break;case"range":this._animateOff=true;this._refresh();this._animateOff=false;break}},_setOptionDisabled:function(e){this._super(e);this._toggleClass(null,"ui-state-disabled",!!e)},_value:function(){var e=this.options.value;e=this._trimAlignValue(e);return e},_values:function(e){var t,r,i;if(arguments.length){t=this.options.values[e];t=this._trimAlignValue(t);return t}else if(this._hasMultipleValues()){r=this.options.values.slice();for(i=0;i<r.length;i+=1){r[i]=this._trimAlignValue(r[i])}return r}else{return[]}},_trimAlignValue:function(e){if(e<=this._valueMin()){return this._valueMin()}if(e>=this._valueMax()){return this._valueMax()}var t=this.options.step>0?this.options.step:1,r=(e-this._valueMin())%t,i=e-r;if(Math.abs(r)*2>=t){i+=r>0?t:-t}return parseFloat(i.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),r=this.options.step,i=Math.round((e-t)/r)*r;e=i+t;if(e>this.options.max){e-=r}this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);if(this.options.min!==null){e=Math.max(e,this._precisionOf(this.options.min))}return e},_precisionOf:function(e){var t=e.toString(),r=t.indexOf(".");return r===-1?0:t.length-r-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(e){if(e==="vertical"){this.range.css({width:"",left:""})}if(e==="horizontal"){this.range.css({height:"",bottom:""})}},_refreshValue:function(){var t,r,i,n,a,o=this.options.range,s=this.options,l=this,u=!this._animateOff?s.animate:false,c={};if(this._hasMultipleValues()){this.handles.each(function(i){r=(l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())*100;c[l.orientation==="horizontal"?"left":"bottom"]=r+"%";e(this).stop(1,1)[u?"animate":"css"](c,s.animate);if(l.options.range===true){if(l.orientation==="horizontal"){if(i===0){l.range.stop(1,1)[u?"animate":"css"]({left:r+"%"},s.animate)}if(i===1){l.range[u?"animate":"css"]({width:r-t+"%"},{queue:false,duration:s.animate})}}else{if(i===0){l.range.stop(1,1)[u?"animate":"css"]({bottom:r+"%"},s.animate)}if(i===1){l.range[u?"animate":"css"]({height:r-t+"%"},{queue:false,duration:s.animate})}}}t=r})}else{i=this.value();n=this._valueMin();a=this._valueMax();r=a!==n?(i-n)/(a-n)*100:0;c[this.orientation==="horizontal"?"left":"bottom"]=r+"%";this.handle.stop(1,1)[u?"animate":"css"](c,s.animate);if(o==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[u?"animate":"css"]({width:r+"%"},s.animate)}if(o==="max"&&this.orientation==="horizontal"){this.range.stop(1,1)[u?"animate":"css"]({width:100-r+"%"},s.animate)}if(o==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[u?"animate":"css"]({height:r+"%"},s.animate)}if(o==="max"&&this.orientation==="vertical"){this.range.stop(1,1)[u?"animate":"css"]({height:100-r+"%"},s.animate)}}},_handleEvents:{keydown:function(t){var r,i,n,a,o=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:t.preventDefault();if(!this._keySliding){this._keySliding=true;this._addClass(e(t.target),null,"ui-state-active");r=this._start(t,o);if(r===false){return}}break}a=this.options.step;if(this._hasMultipleValues()){i=n=this.values(o)}else{i=n=this.value()}switch(t.keyCode){case e.ui.keyCode.HOME:n=this._valueMin();break;case e.ui.keyCode.END:n=this._valueMax();break;case e.ui.keyCode.PAGE_UP:n=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax()){return}n=this._trimAlignValue(i+a);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin()){return}n=this._trimAlignValue(i-a);break}this._slide(t,o,n)},keyup:function(t){var r=e(t.target).data("ui-slider-handle-index");if(this._keySliding){this._keySliding=false;this._stop(t,r);this._change(t,r);this._removeClass(e(t.target),null,"ui-state-active")}}}})})},function(e,t){e.exports='<div class=gmf-layertree-root-tools ng-if=layertreeCtrl.isRoot> <a href ng-if="gmfLayertreeCtrl.nodesCount() > 0" ng-click=gmfLayertreeCtrl.removeAllNodes()> <span class="fa fa-trash"></span> {{\'Clear all\' | translate}} </a> </div> <div ng-if=::!layertreeCtrl.isRoot id=gmf-layertree-node-{{::layertreeCtrl.uid}} ng-class="[layertreeCtrl.node.children ? \'gmf-layertree-group\' : \'gmf-layertree-leaf\', \'gmf-layertree-depth-\' + layertreeCtrl.depth, gmfLayertreeCtrl.getResolutionStyle(layertreeCtrl.node), gmfLayertreeCtrl.getNodeState(layertreeCtrl)]"> <div class=ngeo-sortable-handle ng-show="layertreeCtrl.depth === 1 && layertreeCtrl.parent.children.length > 1"> <i class="gmf-layertree-sortable-handle-icon fa fa-ellipsis-v"></i> </div> <a ng-if=::layertreeCtrl.node.children data-toggle=collapse href=#gmf-layertree-layer-group-{{::layertreeCtrl.uid}} aria-expanded={{::layertreeCtrl.node.metadata.isExpanded}} class="fa gmf-layertree-expand-node fa-fw"> </a> <a href ng-click=::gmfLayertreeCtrl.toggleActive(layertreeCtrl) ng-if=::!layertreeCtrl.node.children ng-class="::{\'gmf-layertree-no-layer-icon\' : !gmfLayertreeCtrl.getLegendIconURL(layertreeCtrl)}" class=gmf-layertree-layer-icon> <img ng-if="::(legendIconUrl=gmfLayertreeCtrl.getLegendIconURL(layertreeCtrl))" ng-src={{::legendIconUrl}}>  </a> <a href ng-click=::gmfLayertreeCtrl.toggleActive(layertreeCtrl) ng-if=::layertreeCtrl.node.children> <span ng-switch="layertreeCtrl.node.children && !layertreeCtrl.layer.loading"> <i ng-switch-when=true class="fa fa-fw gmf-layertree-state"></i> <i ng-switch-when=false class="fa fa-fw fa-refresh fa-spin"></i> </span> </a> <a href ng-click=::gmfLayertreeCtrl.toggleActive(layertreeCtrl) class=gmf-layertree-name data-toggle=tooltip data-placement=top title="{{layertreeCtrl.node.name | translate}}"> {{layertreeCtrl.node.name | translate}} <i class="gmf-icon gmf-icon-search-go gmf-layertree-zoom" data-toggle=tooltip data-placement=bottom data-title="{{\'Not visible at current scale. Click to zoom.\'|translate}}" ng-click="::gmfLayertreeCtrl.zoomToResolution(layertreeCtrl); $event.preventDefault(); $event.stopPropagation();" ng-if="gmfLayertreeCtrl.getNodeState(layertreeCtrl) == \'on\'"> </i> <span ngeo-popover ngeo-popover-dismiss=.content ng-if="gmfLayertreeCtrl.getNodeState(layertreeCtrl) !== \'off\' && layertreeCtrl.node.time && layertreeCtrl.node.time.mode !== \'disabled\'"> <span ngeo-popover-anchor class="fa fa-clock-o" ng-click="$event.preventDefault(); $event.stopPropagation()"> </span> <div ngeo-popover-content> <ngeo-date-picker ng-if="::layertreeCtrl.node.time.widget === \'datepicker\'" time=layertreeCtrl.node.time on-date-selected="gmfLayertreeCtrl.updateWMSTimeLayerState(layertreeCtrl, time)"> </ngeo-date-picker> <gmf-time-slider ng-if="::layertreeCtrl.node.time.widget === \'slider\'" gmf-time-slider-time=layertreeCtrl.node.time gmf-time-slider-on-date-selected="gmfLayertreeCtrl.updateWMSTimeLayerState(layertreeCtrl, time)"> </gmf-time-slider> </div> </span> <span class="fa fa-pencil" data-toggle=tooltip data-placement=right title="{{\'Currently editing this layer\'|translate}}" ng-if=layertreeCtrl.properties.editing> </span> </a> <span class=gmf-layertree-right-buttons> <a href="" ng-if="::layertreeCtrl.depth == 1" ng-click=gmfLayertreeCtrl.removeNode(layertreeCtrl.node)> <span class="fa fa-trash"></span> </a> <a class=gmf-layertree-node-menu-btn href="" ng-if=::gmfLayertreeCtrl.supportsCustomization(layertreeCtrl) ng-click="::gmfLayertreeCtrl.toggleNodeLegend(\'#gmf-layertree-node-menu-\' + layertreeCtrl.uid)"> <span class="fa fa-cog"></span> </a> <span ngeo-popover ng-if="::(layertreeCtrl.depth === 1 && !layertreeCtrl.node.mixed) || (layertreeCtrl.depth > 1 && layertreeCtrl.parent.node.mixed && !layertreeCtrl.node.children) || (gmfLayertreeCtrl.getLegendsObject(layertreeCtrl) && layertreeCtrl.node.metadata.legend) || layertreeCtrl.getDataSource().filtrable" ngeo-popover-dismiss=.content> <span ngeo-popover-anchor class="extra-actions fa fa-cog"> </span> <div ngeo-popover-content> <ul> <li ng-if="::(layertreeCtrl.depth === 1 && !layertreeCtrl.node.mixed) || (layertreeCtrl.depth > 1 && layertreeCtrl.parent.node.mixed)"> <i class="fa fa-tint fa-fw"></i> <span for=layer-opactity>{{\'Opacity\'|translate}}</span> <input class=input-action name=layer-opactity type=range min=0 max=1 step=0.01 ng-model=layertreeCtrl.layer.opacity /> </li> <li ng-if="::gmfLayertreeCtrl.getLegendsObject(layertreeCtrl) && layertreeCtrl.node.metadata.legend"> <i class="fa fa-th-list fa-fw"></i> <a ng-click="::gmfLayertreeCtrl.toggleNodeLegend(\'#gmf-layertree-node-\' + layertreeCtrl.uid + \'-legend\'); popoverCtrl.dismissPopover()" data-toggle=collapse href=""> {{\'Show/hide legend\'|translate}} </a> </li> <li ng-if="layertreeCtrl.getDataSource() && layertreeCtrl.getDataSource().filtrable"> <i class="fa fa-filter fa-fw"></i> <a ng-click=gmfLayertreeCtrl.toggleFiltrableDataSource(layertreeCtrl.getDataSource()) href=""> {{\'Filter\'|translate}} </a> </li> </ul> </div> </span> <span class=gmf-layertree-metadata ng-if=::layertreeCtrl.node.metadata.metadataUrl> <span ng-if="::gmfLayertreeCtrl.openLinksInNewWindow === true"> <a title="{{\'More informations\'|translate}}" href={{::layertreeCtrl.node.metadata.metadataUrl}} target=blank_> </a> </span> <span ng-if="::gmfLayertreeCtrl.openLinksInNewWindow !== true"> <a title="{{\'More informations\'|translate}}" href="" ng-click=gmfLayertreeCtrl.displayMetadata(layertreeCtrl)> </a> </span> </span> </span> </div> <div class=gmf-layertree-node-menu id=gmf-layertree-node-menu-{{::layertreeCtrl.uid}} style=display:none ng-if=::gmfLayertreeCtrl.supportsCustomization(layertreeCtrl)> <div ng-if=::gmfLayertreeCtrl.supportsOpacityChange(layertreeCtrl)> <i class="fa fa-tint fa-fw"></i> <span for=layer-opactity>{{\'Opacity\'|translate}}</span> <input class=input-action name=layer-opactity type=range min=0 max=1 step=0.01 ng-model=layertreeCtrl.layer.opacity /> </div> <a class=gmf-layertree-node-menu-togglelegend ng-if=::gmfLayertreeCtrl.supportsLegend(layertreeCtrl) data-toggle=collapse ng-click="::gmfLayertreeCtrl.toggleNodeLegend(\'#gmf-layertree-node-\' + layertreeCtrl.uid + \'-legend\')" href=""> <span class="fa fa-th-list"> </span> {{\'Show/hide legend\'|translate}} </a> </div> <div ng-if="::!layertreeCtrl.isRoot && gmfLayertreeCtrl.getLegendsObject(layertreeCtrl) && layertreeCtrl.node.metadata.legend" id=gmf-layertree-node-{{::layertreeCtrl.uid}}-legend class="collapse gmf-layertree-legend" ng-class="::[layertreeCtrl.node.metadata.isLegendExpanded ? \'in\' : \'\']"> <a title="{{\'Hide legend\'|translate}}" data-toggle=collapse ng-click="::gmfLayertreeCtrl.toggleNodeLegend(\'#gmf-layertree-node-\' + layertreeCtrl.uid + \'-legend\')" href=""> {{\'Hide legend\'|translate}} </a> <div ng-if="gmfLayertreeCtrl.isNodeLegendVisible(\'#gmf-layertree-node-\' + layertreeCtrl.uid + \'-legend\')"> <div ng-repeat="(title, url) in gmfLayertreeCtrl.getLegendsObject(layertreeCtrl)"> <p ng-if="gmfLayertreeCtrl.getNumberOfLegendsObject(layertreeCtrl) > 1">{{title|translate}}</p> <img ng-src={{url}}> </div> </div> </div> <ul class=gmf-layertree-root-external-datasources ng-if="layertreeCtrl.isRoot && (gmfLayertreeCtrl.gmfExternalDataSourcesManager.wmsGroups.length || gmfLayertreeCtrl.gmfExternalDataSourcesManager.wmtsGroups.length || gmfLayertreeCtrl.gmfExternalDataSourcesManager.fileGroup.dataSources.length)"> <gmf-datasourcegrouptree class="gmf-layertree-node gmf-layertree-depth-1" ng-repeat="wmtsGroup in gmfLayertreeCtrl.gmfExternalDataSourcesManager.wmtsGroups" group=wmtsGroup> </gmf-datasourcegrouptree> <gmf-datasourcegrouptree class="gmf-layertree-node gmf-layertree-depth-1" ng-repeat="wmsGroup in gmfLayertreeCtrl.gmfExternalDataSourcesManager.wmsGroups" group=wmsGroup> </gmf-datasourcegrouptree> <gmf-datasourcegrouptree class="gmf-layertree-node gmf-layertree-depth-1" ng-if=gmfLayertreeCtrl.gmfExternalDataSourcesManager.fileGroup.dataSources.length group=gmfLayertreeCtrl.gmfExternalDataSourcesManager.fileGroup> </gmf-datasourcegrouptree> </ul> <ul id=gmf-layertree-layer-group-{{::layertreeCtrl.uid}} ng-if=::layertreeCtrl.node.children ng-class="{collapse: !layertreeCtrl.isRoot, in : layertreeCtrl.node.metadata.isExpanded}" ngeo-sortable="::layertreeCtrl.isRoot && layertreeCtrl.node.children" ngeo-sortable-options="{handleClassName: \'ngeo-sortable-handle\', draggerClassName: \'gmf-layertree-dragger\', placeholderClassName : \'gmf-layertree-curr-drag-item\'}" ngeo-sortable-callback=::gmfLayertreeCtrl.afterReorder ngeo-sortable-callback-ctx=::gmfLayertreeCtrl> <li class=gmf-layertree-node ng-repeat="node in layertreeCtrl.node.children" ng-class="\'gmf-layertree-depth-\' + layertreeCtrl.depth" ngeo-layertree=node ngeo-layertree-notroot ngeo-layertree-map=layertreeCtrl.map ngeo-layertree-nodelayerexpr=layertreeCtrl.nodelayerExpr ngeo-layertree-listenersexpr=layertreeCtrl.listenersExpr> </li> </ul> '},function(e,t){e.exports='<span ng-if=::!layertreeCtrl.isRoot>{{::layertreeCtrl.node.name}}</span> <input type=checkbox ng-if="::layertreeCtrl.node && !layertreeCtrl.node.children" ng-model=layertreeCtrl.getSetActive ng-model-options="{getterSetter: true}"/> <ul ng-if=::layertreeCtrl.node.children> <li ng-repeat="node in ::layertreeCtrl.node.children" ngeo-layertree=::node ngeo-layertree-notroot ngeo-layertree-map=layertreeCtrl.map ngeo-layertree-nodelayerexpr=layertreeCtrl.nodelayerExpr ngeo-layertree-listenersexpr=layertreeCtrl.listenersExpr> </li> </ul> '},function(e,t){e.exports='<div class="gmf-layertree-group gmf-layertree-depth-1 {{$ctrl.group.visibilityState}}"> <a data-toggle=collapse href=#gmf-layertree-layer-group-{{::$ctrl.getGroupUid()}} aria-expanded=true class="fa gmf-layertree-expand-node fa-fw"> </a> <a class="fa fa-fw gmf-layertree-state" href ng-click=$ctrl.toggle()> </a> <a class=gmf-layertree-name href ng-click=$ctrl.toggle()> <span>{{$ctrl.group.title | translate}}</span> </a> <span class=gmf-layertree-right-buttons> <a href="" ng-click=$ctrl.remove()> <span class="fa fa-trash"></span> </a> </span> </div> <ul id=gmf-layertree-layer-group-{{::$ctrl.getGroupUid()}} class="collapse in"> <li class="gmf-layertree-node gmf-layertree-depth-2" ng-class="[dataSource.visible ? \'on\' : \'off\']" ng-repeat="dataSource in $ctrl.group.dataSources"> <div class=gmf-layertree-leaf> <a href ng-click=$ctrl.toggleDataSource(dataSource) class="gmf-layertree-layer-icon gmf-layertree-no-layer-icon"> </a> <a class=gmf-layertree-name href ng-click=$ctrl.toggleDataSource(dataSource)> <span>{{dataSource.name | translate}}</span> </a> <span class=gmf-layertree-right-buttons> <a href="" ng-click=$ctrl.removeDataSource(dataSource)> <span class="fa fa-trash"></span> </a> </span> </div> </li> </ul> '},function(e,t){e.exports='<div class=form-group> <select class=form-control ng-model=$ctrl.mode ng-options="mode | translate for mode in $ctrl.modes" ng-click="$ctrl.hasError = false"> </select> </div> <div> <form name=idsl_form novalidate ng-show="$ctrl.mode === \'Local\'"> <div class=form-group> <div class=input-group> <input name=file type=file required/> <input class=form-control placeholder="{{\'No file\' | translate}}" readonly=readonly type=text value={{$ctrl.fileNameAndSize}} ng-click=$ctrl.browse() /> <span class=input-group-btn> <button class="btn btn-default" type=button ng-click=$ctrl.browse() translate>Browse</button> </span> </div> </div> <div class=form-group> <button class="btn btn-sm btn-default form-control" ng-class="{\'has-error\': $ctrl.hasError}" title="{{\'Load a file from local\' | translate}}" type=submit ng-click="idsl_form.$valid && $ctrl.load()" ng-disabled="$ctrl.file === undefined || $ctrl.hasError"> <span ng-if=!$ctrl.hasError>{{\'Load local file\' | translate}}</span> <span ng-if=$ctrl.hasError>{{\'Unable to load the file\' | translate}}</span> </button> </div> </form> <form name=idsc_form novalidate ng-show="$ctrl.mode === \'Online\'"> <div class="form-group gmf-importdatasource-url-form-group"> <input autocomplete=off class=form-control name=url placeholder="{{\'Choose or enter online resource URL\' | translate}}" required type=url ng-disabled=$ctrl.pending ng-model=$ctrl.url /> </div> <div class=form-group> <button class="btn btn-sm btn-default form-control gmf-importdatasource-connect-btn" ng-class="{\'has-error\': $ctrl.hasError}" title="{{\'Connect to online resource\' | translate}}" type=submit ng-click="idsc_form.$valid && $ctrl.connect()" ng-disabled="idsc_form.$invalid || $ctrl.pending"> <span ng-if=$ctrl.pending>{{\'Connecting, please wait...\' | translate}}</span> <span ng-if="!$ctrl.pending && $ctrl.hasError">{{\'Failed to connect\' | translate}}</span> <span ng-if="!$ctrl.pending && !$ctrl.hasError">{{\'Connect\' | translate}}</span> </button> </div> </form> </div> <div class=gmf-importdatasource-layers ng-if="$ctrl.wmsCapabilities !== null || $ctrl.wmtsCapabilities !== null"> <hr/> <gmf-wmscapabilitylayertreenode capabilities=::$ctrl.wmsCapabilities layer=::$ctrl.wmsCapabilities.Capability.Layer url=::$ctrl.url ng-if="$ctrl.wmsCapabilities !== null"> </gmf-wmscapabilitylayertreenode> <gmf-wmtscapabilitylayertree capabilities=::$ctrl.wmtsCapabilities layers=::$ctrl.wmtsCapabilities.Contents.Layer url=::$ctrl.url ng-if="$ctrl.wmtsCapabilities !== null"> </gmf-wmtscapabilitylayertree> </div> '},function(e,t){e.exports='<ul> <li ng-repeat="layer in ::$ctrl.layers"> <div class=gmf-wmscapabilitylayertreenode-header> <span class=gmf-wmscapabilitylayertreenode-popover-container ngeo-popover ngeo-popover-dismiss=.content ngeo-popover-placement=left> <span ngeo-popover-anchor class="fa fa-cog gmf-wmscapabilitylayertreenode-actions"> </span> <div class=gmf-wmscapabilitylayertreenode-popover-content ngeo-popover-content> <ul> <li> <i class="fa fa-plus fa-fw"></i> <a href="" ng-click="$ctrl.createAndAddDataSource(layer); popoverCtrl.dismissPopover()"> <span translate>Add layer</span> </a> </li> <li ng-if="::(layer.Abstract !== undefined)"> <i class="fa fa-th-list fa-fw"></i> <a aria-expanded=false data-toggle=collapse href=#gmf-wmscapabilitylayertreenode-description-{{::$ctrl.getUid(layer)}} ng-click=popoverCtrl.dismissPopover()> <span translate>Open/Close description</span> </a> </li> </ul> </div> </span> <a class="fa fa-circle-thin gmf-wmscapabilitylayertreenode-no-icon fa-fw"></a> <span class=gmf-wmscapabilitylayertreenode-title>{{ ::layer.Title }}</span> <div class="collapse gmf-wmscapabilitylayertreenode-description" id=gmf-wmscapabilitylayertreenode-description-{{::$ctrl.getUid(layer)}} ng-if="::(layer.Abstract !== undefined)"> <a aria-expanded=false class=gmf-wmscapabilitylayertreenode-description-toggle data-toggle=collapse href=#gmf-wmscapabilitylayertreenode-description-{{::$ctrl.getUid(layer)}}> <span translate>Hide description</span> </a> <span class=gmf-wmscapabilitylayertreenode-description-content>{{ ::layer.Abstract }}</span> </div> </div> </li> </ul> '},function(e,t){e.exports='<ul> <li ng-repeat="layer in ::$ctrl.layer.Layer"> <div class=gmf-wmscapabilitylayertreenode-header> <span class=gmf-wmscapabilitylayertreenode-popover-container ng-if="::(layer.Name !== undefined || layer.Abstract !== undefined)" ngeo-popover ngeo-popover-dismiss=.content ngeo-popover-placement=left> <span ngeo-popover-anchor class="fa fa-cog gmf-wmscapabilitylayertreenode-actions"> </span> <div class=gmf-wmscapabilitylayertreenode-popover-content ngeo-popover-content> <ul> <li ng-if="::(layer.Name !== undefined)"> <i class="fa fa-plus fa-fw"></i> <a href="" ng-click="$ctrl.createAndAddDataSource(layer); popoverCtrl.dismissPopover()"> <span translate>Add layer</span> </a> </li> <li ng-if="::(layer.Abstract !== undefined)"> <i class="fa fa-th-list fa-fw"></i> <a aria-expanded=false data-toggle=collapse href=#gmf-wmscapabilitylayertreenode-description-{{::$ctrl.getUid(layer)}} ng-click=popoverCtrl.dismissPopover()> <span translate>Open/Close description</span> </a> </li> </ul> </div> </span> <a aria-expanded=false class="fa gmf-wmscapabilitylayertreenode-expand-node fa-fw" data-toggle=collapse href=#gmf-wmscapabilitylayertreenode-children-{{::$ctrl.getUid(layer)}} ng-if="::(layer.Layer !== undefined && layer.Layer.length)"></a> <span ng-if="::(layer.Layer !== undefined && layer.Layer.length)" class="fa fa-fw gmf-wmscapabilitylayertreenode-group"> </span> <a class="fa fa-circle-thin gmf-wmscapabilitylayertreenode-no-icon fa-fw" ng-if="::(layer.Layer === undefined || layer.Layer.length === 0)"></a> <span class=gmf-wmscapabilitylayertreenode-title>{{ ::layer.Title }}</span> <div class="collapse gmf-wmscapabilitylayertreenode-description" id=gmf-wmscapabilitylayertreenode-description-{{::$ctrl.getUid(layer)}} ng-if="::(layer.Abstract !== undefined)"> <a aria-expanded=false class=gmf-wmscapabilitylayertreenode-description-toggle data-toggle=collapse href=#gmf-wmscapabilitylayertreenode-description-{{::$ctrl.getUid(layer)}}> <span translate>Hide description</span> </a> <span class=gmf-wmscapabilitylayertreenode-description-content>{{ ::layer.Abstract }}</span> </div> </div> <gmf-wmscapabilitylayertreenode class=collapse id=gmf-wmscapabilitylayertreenode-children-{{::$ctrl.getUid(layer)}} capabilities=::$ctrl.capabilities layer=::layer ng-if="::(layer.Layer !== undefined)"> </gmf-wmscapabilitylayertreenode> </li> </ul> '},function(e,t){e.exports='<div class=form-group ng-switch=$ctrl.filtrableDataSources.length> <span ng-switch-when=0 translate>No filtrable layer available!</span> <select class=form-control ng-disabled=$ctrl.aRuleIsActive ng-switch-default ng-model=$ctrl.gmfDataSourceBeingFiltered.dataSource ng-options="dataSource.name | translate for dataSource in $ctrl.filtrableDataSources"> <option value="" translate>-- Layer to filter --</option> </select> <div ng-if="$ctrl.customRules && $ctrl.directedRules && $ctrl.readyDataSource"> <hr class=gmf-filterselector-separator /> <div class="dropdown gmf-filterselector-savedfilters"> <a class="btn btn-link dropdown-toggle ngeo-filter-condition-button" ng-class="{disabled: $ctrl.aRuleIsActive || $ctrl.gmfSavedFilters.currentDataSourceItems.length === 0}" type=button data-toggle=dropdown ng-disabled="$ctrl.aRuleIsActive || $ctrl.gmfSavedFilters.currentDataSourceItems.length === 0"> <span translate>Saved</span> <span class=caret></span> </a> <ul class=dropdown-menu> <li ng-repeat="item in $ctrl.gmfSavedFilters.currentDataSourceItems"> <a href ng-click=$ctrl.saveFilterLoadItem(item)> <span>{{::item.name}}</span> </a> </li> <li role=separator class=divider></li> <li> <a href ng-click=$ctrl.saveFilterManage()> <span translate>Manage saved filters</span> </a> </li> </ul> </div> <ngeo-filter a-rule-is-active=$ctrl.aRuleIsActive custom-rules=$ctrl.customRules datasource=$ctrl.readyDataSource directed-rules=$ctrl.directedRules feature-overlay=$ctrl.featureOverlay map=$ctrl.map tool-group=$ctrl.toolGroup> </ngeo-filter> <div> <a class="btn btn-link gmf-filterselector-savebtn" type=button data-toggle=dropdown ng-click="!$ctrl.aRuleIsActive && $ctrl.saveFilterShowModal()" ng-disabled=$ctrl.aRuleIsActive> <span class="fa fa-save"></span> <span translate>Save</span> </a> </div> </div> <ngeo-modal ng-model=$ctrl.saveFilterSaveModalShown> <div class=modal-header> <button type=button class=close data-dismiss=modal aria-label="{{\'Close\' | translate}}"> <span aria-hidden=true>&times;</span> </button> <h4 class=modal-title>{{\'Save filter\' | translate}}</h4> </div> <div class=modal-body> <p class=gmf-filterselector-savefilter-desc translate> You can save the filter that you created to re-load it later. </p> <input type=text class=form-control name=name ng-model=$ctrl.saveFilterName placeholder="{{\'Filter name\' | translate}}"/> </div> <div class=modal-footer> <button type=button class="btn btn-default" data-dismiss=modal>{{\'Cancel\' | translate}}</button> <button type=button ng-click=$ctrl.saveFilterSave() ng-disabled="$ctrl.saveFilterName === \'\'" class="btn btn-primary">{{\'Save\' | translate}}</button> </div> </ngeo-modal> <ngeo-modal ng-model=$ctrl.saveFilterManageModalShown> <div class=gmf-filterselector-managefilter-modal> <div class=modal-header> <button type=button class=close data-dismiss=modal aria-label="{{\'Close\' | translate}}"> <span aria-hidden=true>&times;</span> </button> <h4 class=modal-title>{{\'Manage filters\' | translate}}</h4> </div> <div class=modal-body> <ul> <li ng-repeat="item in $ctrl.gmfSavedFilters.currentDataSourceItems"> <span>{{::item.name}}</span> <a href ng-click=$ctrl.saveFilterRemoveItem(item)> {{ \'Delete\' | translate }} </a> <div class=gmf-eol></div> </li> </ul> </div> <div class=modal-footer> <button type=button class="btn btn-default" data-dismiss=modal>{{\'Close\' | translate}}</button> </div> </div> </ngeo-modal> </div> '},function(e,t){e.exports='<div class=dropdown> <a class="btn btn-link dropdown-toggle ngeo-filter-condition-button" ng-class="{disabled: $ctrl.aRuleIsActive}" type=button data-toggle=dropdown ng-disabled=$ctrl.aRuleIsActive> <span class="fa fa-cog"></span> <span class=caret></span> </a> <ul class=dropdown-menu> <li class=ngeo-filter-condition-criteria-header translate>Criteria taken into account</li> <li ng-repeat="condition in ::$ctrl.conditions"> <a href ng-click=$ctrl.setCondition(condition)> <span ng-class="{\'ngeo-filter-condition-criteria-active\': condition.value == $ctrl.datasource.filterCondition}" class="fa fa-check ngeo-filter-condition-criteria"> </span> <span>{{::condition.text | translate}}</span> </a> </li> </ul> </div> <ngeo-rule ng-repeat="rule in $ctrl.directedRules" feature-overlay=::$ctrl.featureOverlay class=ngeo-filter-rule-directed map=$ctrl.map rule=rule tool-group=$ctrl.toolGroup> </ngeo-rule> <hr class=ngeo-filter-separator-rules /> <div ng-repeat="rule in $ctrl.customRules"> <a class="btn btn-xs btn-link ngeo-filter-rule-custom-rm-btn" ng-click="!$ctrl.aRuleIsActive && $ctrl.removeCustomRule(rule)" ng-disabled=$ctrl.aRuleIsActive href> <span class="fa fa-remove"></span> </a> <ngeo-rule feature-overlay=::$ctrl.featureOverlay class=ngeo-filter-rule-custom map=$ctrl.map rule=rule tool-group=$ctrl.toolGroup> </ngeo-rule> </div> <div class=dropdown> <a class="btn btn-link dropdown-toggle" ng-class="{disabled: $ctrl.aRuleIsActive}" type=button data-toggle=dropdown ng-disabled=$ctrl.aRuleIsActive> <span translate>+ Add a new criteria</span> <span class=caret></span> </a> <ul class=dropdown-menu> <li ng-repeat="attribute in ::$ctrl.geometryAttributes"> <a href ng-click=$ctrl.createAndAddCustomRule(attribute)> <span translate>Spatial filter</span> </a> </li> <li role=presentation class=divider></li> <li ng-repeat="attribute in ::$ctrl.otherAttributes"> <a href ng-click=$ctrl.createAndAddCustomRule(attribute)> <span>{{::attribute.name | translate}}</span> </a> </li> </ul> </div> <hr class=ngeo-filter-separator-criteria /> <a class="btn btn-link" type=button ng-click=$ctrl.apply() ng-disabled="$ctrl.hasARule() === false || $ctrl.datasource.visible === false"> <span class="fa fa-check"></span> <span translate>Apply filter</span> </a> <a class="btn btn-link" type=button ng-click=$ctrl.getData() ng-disabled="$ctrl.hasARule() === false || $ctrl.datasource.visible === false"> <span class="fa fa-chevron-right"></span> <span translate>Get data</span> </a> '},function(e,t){e.exports='<div class=dropdown ng-class="{open: $ctrl.rule.active}"> <a class="btn btn-default btn-sm dropdown-toggle" type=button ng-click=$ctrl.toggle()> <span>{{ ::$ctrl.clone.name | translate }}</span> <span class=caret></span> </a> <div class="dropdown-menu form-group"> <select class="form-control input-sm ngeo-rule-operators-list" ng-disabled=$ctrl.drawActive ng-if=::$ctrl.clone.operators ng-model=$ctrl.clone.operator ng-options="$ctrl.operators[operator] | translate for operator in ::$ctrl.clone.operators track by operator"> </select> <div ng-switch=::$ctrl.clone.type> <div class="ngeo-rule-type-date form-group" ng-if=$ctrl.rule.active ng-switch-when=date|datetime ng-switch-when-separator=|> <div ng-switch=$ctrl.clone.operator> <div ng-switch-when=..|time_during ng-switch-when-separator=|> <ngeo-date-picker time=$ctrl.timeRangeMode on-date-selected=$ctrl.onDateRangeSelected(time)> </ngeo-date-picker> </div> <div ng-switch-default> <ngeo-date-picker time=$ctrl.timeValueMode on-date-selected=$ctrl.onDateSelected(time)> </ngeo-date-picker> </div> </div> </div> <div class="ngeo-rule-type-geometry form-group" ng-switch-when=geometry> <div ng-switch=$ctrl.geomType> <span class="gmf-icon gmf-icon-point" ng-switch-when=Point> </span> <span class="gmf-icon gmf-icon-line" ng-switch-when=LineString> </span> <span class="gmf-icon gmf-icon-polygon" ng-switch-when=Polygon> </span> <span class="gmf-icon gmf-icon-circle" ng-switch-when=Circle> </span> <span class="gmf-icon gmf-icon-rectangle" ng-switch-when=Rectangle> </span> </div> <ngeo-drawfeature ngeo-drawfeature-active=$ctrl.drawActive ngeo-drawfeature-features=$ctrl.drawnFeatures ngeo-drawfeature-map=$ctrl.map> <div ngeo-btn-group class=btn-group> <a data-toggle=tooltip title="{{\'Draw a point on the map\' | translate}}" href ngeo-btn ngeo-drawpoint class="btn btn-sm btn-default ngeo-drawfeature-point" ng-show="[\'intersects\', \'within\'].indexOf($ctrl.clone.operator) !== -1" ng-class="{active: dfCtrl.drawPoint.active}" ng-model=dfCtrl.drawPoint.active> <span class="gmf-icon gmf-icon-point"></span> </a> <a data-toggle=tooltip title="{{\'Draw a line on the map\' | translate}}" href ngeo-btn ngeo-measurelength class="btn btn-sm btn-default ngeo-drawfeature-linestring" ng-show="[\'intersects\', \'within\'].indexOf($ctrl.clone.operator) !== -1" ng-class="{active: dfCtrl.measureLength.active}" ng-model=dfCtrl.measureLength.active> <span class="gmf-icon gmf-icon-line"></span> </a> <a data-toggle=tooltip title="{{\'Draw a polygon on the map\' | translate}}" href ngeo-btn ngeo-measurearea class="btn btn-sm btn-default ngeo-drawfeature-polygon" ng-class="{active: dfCtrl.measureArea.active}" ng-model=dfCtrl.measureArea.active> <span class="gmf-icon gmf-icon-polygon"></span> </a> <a data-toggle=tooltip title="{{\'Draw a circle on the map\' | translate}}" href ngeo-btn ngeo-measureazimut class="btn btn-sm btn-default ngeo-drawfeature-circle" ng-class="{active: dfCtrl.measureAzimut.active}" ng-model=dfCtrl.measureAzimut.active> <span class="gmf-icon gmf-icon-circle"></span> </a> <a data-toggle=tooltip title="{{\'Draw a rectangle on the map\' | translate}}" href ngeo-btn ngeo-drawrectangle class="btn btn-sm btn-default ngeo-drawfeature-rectangle" ng-class="{active: dfCtrl.drawRectangle.active}" ng-model=dfCtrl.drawRectangle.active> <span class="gmf-icon gmf-icon-rectangle"></span> </a> </div> <div class=ngeo-rule-type-geometry-instructions ng-if=$ctrl.drawActive> <span ng-if=dfCtrl.drawPoint.active> {{ \'Draw a point on the map.\' | translate }} </span> <span ng-if=dfCtrl.measureLength.active> {{ \'Draw a line string on the map.\' | translate }} </span> <span ng-if=dfCtrl.measureArea.active> {{ \'Draw a polygon on the map.\' | translate }} </span> <span ng-if=dfCtrl.measureAzimut.active> {{ \'Draw a circle on the map.\' | translate }} </span> <span ng-if=dfCtrl.drawRectangle.active> {{ \'Draw a rectangle on the map.\' | translate }} </span> </div> </ngeo-drawfeature> </div> <div class="checkbox ngeo-rule-type-select" ng-switch-when=select> <a ng-click=$ctrl.selectAllChoices() href>{{ All | translate}} </a> <label class="form-group ol-unselectable" ng-repeat="choice in ::$ctrl.clone.choices"> <input ng-checked="$ctrl.clone.getExpression() && $ctrl.clone.getExpression().split(\',\').indexOf(choice) > -1" ng-click=$ctrl.toggleChoiceSelection(choice) type=checkbox value=choice /> <span>{{ choice | translate }}</span> </label> </div> <div class="form-group ngeo-rule-type-text" ng-switch-default> <div ng-switch=$ctrl.clone.operator> <div ng-switch-when=..> <input type=number class="form-control input-sm" ng-model=$ctrl.clone.lowerBoundary /> <input type=number class="form-control input-sm" ng-model=$ctrl.clone.upperBoundary /> </div> <div ng-switch-default> <input type=number class="form-control input-sm" ng-if="$ctrl.clone.type === \'number\'" ng-model=$ctrl.clone.expression /> <input type=text class="form-control input-sm" ng-if="$ctrl.clone.type !== \'number\'" ng-model=$ctrl.clone.expression /> </div> </div> </div> <div class=ngeo-rule-btns> <button class="btn btn-xs btn-default" ng-click=$ctrl.apply() type=button>{{\'Apply\' | translate}}</button> <button class="btn btn-xs btn-default" ng-click=$ctrl.cancel() type=button>{{\'Cancel\' | translate}}</button> </div> </div> </div> </div> <div class=ngeo-rule-value ng-if="$ctrl.rule.value !== null"> <a class="btn btn-xs btn-link" ng-click="!$ctrl.rule.active && $ctrl.reset()" ng-disabled=$ctrl.rule.active href> <span class="fa fa-remove"></span> </a> <div ng-switch=::$ctrl.rule.type> <div ng-switch-when=date|datetime ng-switch-when-separator=|> <div ng-switch=$ctrl.rule.operator> <div ng-switch-when=..|time_during ng-switch-when-separator=|> <span translate>From </span> <span>{{ $ctrl.timeToDate($ctrl.rule.lowerBoundary) }}</span> <span translate> to </span> <span>{{ $ctrl.timeToDate($ctrl.rule.upperBoundary) }}</span> </div> <div ng-switch-default> <span>{{ $ctrl.operatorsShortFormat[$ctrl.rule.operator] }}</span> <span>{{ $ctrl.timeToDate($ctrl.rule.getExpression()) }}</span> </div> </div> </div> <div ng-switch-when=geometry> <span>{{ $ctrl.operators[$ctrl.rule.operator] }}</span> <span ng-switch=$ctrl.getRuleGeometryType()> <span class="gmf-icon gmf-icon-point" ng-switch-when=Point> </span> <span class="gmf-icon gmf-icon-line" ng-switch-when=LineString> </span> <span class="gmf-icon gmf-icon-polygon" ng-switch-when=Polygon> </span> <span class="gmf-icon gmf-icon-circle" ng-switch-when=Circle> </span> <span class="gmf-icon gmf-icon-rectangle" ng-switch-when=Rectangle> </span> </span> </div> <div ng-switch-when=select> <span ng-repeat="choice in $ctrl.rule.getExpression().split(\',\')"> {{ choice | translate }}{{ $last ? \'\' : \', \' }} </span> </div> <div ng-switch-default> <div ng-switch=$ctrl.rule.operator> <div ng-switch-when=..|time_during ng-switch-when-separator=|> <span translate>Between </span> <span>{{ $ctrl.rule.lowerBoundary }}</span> <span translate> and </span> <span>{{ $ctrl.rule.upperBoundary }}</span> </div> <div ng-switch-default> <span>{{ $ctrl.operatorsShortFormat[$ctrl.rule.operator] }}</span> <span>{{ $ctrl.rule.getExpression() }}</span> </div> </div> </div> </div> </div> '},function(e,t){e.exports='<div class=ngeo-datepicker> <form name=dateForm class=ngeo-datepicker-form novalidate> <div ng-if="::datepickerCtrl.time.widget === \'datepicker\'"> <div class=ngeo-datepicker-start-date> <span ng-if="::datepickerCtrl.time.mode === \'range\'" translate>From:</span> <span ng-if="::datepickerCtrl.time.mode !== \'range\'" translate>Date:</span> <input name=sdate ui-date=datepickerCtrl.sdateOptions ng-model=datepickerCtrl.sdate required=""/> </div> <div class=ngeo-datepicker-end-date ng-if="::datepickerCtrl.time.mode === \'range\'"> <span translate>To:</span> <input name=edate ui-date=datepickerCtrl.edateOptions ng-model=datepickerCtrl.edate required=""/> </div> </div> </form> </div> '},function(e,t,r){var i,n,a;(function(o){if(true){!(n=[r(256)],i=o,a=typeof i==="function"?i.apply(t,n):i,a!==undefined&&(e.exports=a))}else{}})(function(e){e.regional.it={closeText:"Chiudi",prevText:"&#x3C;Prec",nextText:"Succ&#x3E;",currentText:"Oggi",monthNames:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthNamesShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],dayNames:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"],dayNamesShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],dayNamesMin:["Do","Lu","Ma","Me","Gi","Ve","Sa"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};e.setDefaults(e.regional.it);return e.regional.it})},function(e,t,r){var i,n,a;(function(o){if(true){!(n=[r(256)],i=o,a=typeof i==="function"?i.apply(t,n):i,a!==undefined&&(e.exports=a))}else{}})(function(e){e.regional.de={closeText:"Schließen",prevText:"&#x3C;Zurück",nextText:"Vor&#x3E;",currentText:"Heute",monthNames:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayNamesMin:["So","Mo","Di","Mi","Do","Fr","Sa"],weekHeader:"KW",dateFormat:"dd.mm.yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};e.setDefaults(e.regional.de);return e.regional.de})},function(e,t,r){var i,n,a;(function(o){if(true){!(n=[r(256)],i=o,a=typeof i==="function"?i.apply(t,n):i,a!==undefined&&(e.exports=a))}else{}})(function(e){e.regional["en-GB"]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};e.setDefaults(e.regional["en-GB"]);return e.regional["en-GB"]})},function(e,t,r){var i,n,a;(function(o){if(true){!(n=[r(256)],i=o,a=typeof i==="function"?i.apply(t,n):i,a!==undefined&&(e.exports=a))}else{}})(function(e){e.regional.fr={closeText:"Fermer",prevText:"Précédent",nextText:"Suivant",currentText:"Aujourd'hui",monthNames:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],monthNamesShort:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],dayNamesShort:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],dayNamesMin:["D","L","M","M","J","V","S"],weekHeader:"Sem.",dateFormat:"dd/mm/yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};e.setDefaults(e.regional.fr);return e.regional.fr})},function(e,t,r){(function t(i,n){if(true)e.exports=n(r(24),r(368),r(256));else{}})(this,function(e,t,r){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={exports:{},id:i,loaded:false};e[i].call(n.exports,n,n.exports,r);n.loaded=true;return n.exports}r.m=e;r.c=t;r.p="assets";return r(0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var i=r(1);var n=u(i);var a=r(2);var o=u(a);var s=r(3);var l=u(s);function u(e){return e&&e.__esModule?e:{default:e}}t.default=o.default.module("ui.date",[]).constant("uiDateConfig",{}).constant("uiDateFormatConfig","").factory("uiDateConverter",["uiDateFormatConfig",function(e){return{stringToDate:r,dateToString:t};function t(t,r){var i=t||e;if(r){if(i){try{return n.default.datepicker.formatDate(i,r)}catch(e){return undefined}}if(r.toISOString){return r.toISOString()}}return null}function r(t,r){t=t||e;if(o.default.isDate(r)&&!isNaN(r)){return r}if(o.default.isString(r)){if(t){return n.default.datepicker.parseDate(t,r)}var i=new Date(r);return isNaN(i.getTime())?null:i}if(o.default.isNumber(r)){return new Date(r)}return null}}]).directive("uiDate",["uiDateConfig","uiDateConverter",function e(t,r){return{require:"?ngModel",link:function e(i,a,s,l){var u=(0,n.default)(a);var c=function e(){return o.default.extend({},t,i.$eval(s.uiDate))};var f=function e(){var t=false;var n=c();function f(e){var t=["Hours","Minutes","Seconds","Milliseconds"];var r=o.default.isDate(l.$modelValue);var i={};if(!e&&r&&l.$modelValue.toDateString()===u.datepicker("getDate").toDateString()){return}if(r){o.default.forEach(t,function(e){i[e]=l.$modelValue["get"+e]()})}var n=u.datepicker("getDate");if(r){o.default.forEach(t,function(e){n["set"+e](i[e])})}l.$setViewValue(n)}if(l){var h=n.onSelect||o.default.noop;n.onSelect=function(e,r){i.$apply(function(){t=true;f();u.blur();h(e,r,u)})};var d=n.beforeShow||o.default.noop;n.beforeShow=function(e,r){t=true;d(e,r,u)};var p=n.onClose||o.default.noop;n.onClose=function(e,r){t=false;p(e,r,u)};a.on("focus",function(e){if(s.readonly){e.stopImmediatePropagation()}});u.off("blur.datepicker").on("blur.datepicker",function(){if(!t){i.$apply(function(){u.datepicker("setDate",u.datepicker("getDate"));f()})}});l.$validators.uiDateValidator=function e(t,i){return i===null||i===""||o.default.isDate(r.stringToDate(s.uiDateFormat,i))};l.$parsers.push(function e(t){return r.stringToDate(s.uiDateFormat,t)});l.$render=function(){if(o.default.isDate(l.$modelValue)===false&&o.default.isString(l.$modelValue)){l.$modelValue=r.stringToDate(s.uiDateFormat,l.$modelValue)}u.datepicker("setDate",l.$modelValue)}}if(u.data("datepicker")){u.datepicker("option",n);u.datepicker("refresh")}else{u.datepicker(n);u.on("$destroy",function(){u.datepicker("hide");u.datepicker("destroy")})}if(l){l.$render();f(true)}};i.$watch(c,f,true)}}}]).directive("uiDateFormat",["uiDateConverter",function(e){return{require:"ngModel",link:function t(r,i,n,a){var o=n.uiDateFormat;a.$formatters.unshift(function(t){return e.stringToDate(o,t)});a.$parsers.push(function(t){return e.dateToString(o,t)})}}}])},function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t){e.exports=r}])})},function(e,t){e.exports='<div ng-switch=efsCtrl.selectedEditableTreeCtrl> <div ng-switch-when=null> <select class=form-control ng-model=efsCtrl.selectedEditableTreeCtrl ng-show="efsCtrl.editableTreeCtrls.length > 0" ng-options="treeCtrl.node.name | translate for treeCtrl in efsCtrl.editableTreeCtrls"> <option value="" translate>-- Choose a layer --</option> </select> <span ng-show="efsCtrl.editableTreeCtrls.length == 0" translate>No editable layer available!</span> </div> <div ng-switch-default> <div class=row> <div class=col-sm-12> <span translate>Currently editing: </span> <b>{{ efsCtrl.selectedEditableTreeCtrl.node.name | translate }}</b> <span class="fa fa-pencil"></span> <br> <button ng-click=efsCtrl.stopEditing() class="btn btn-link btn-xs pull-right"> <span class="fa fa-times"></span> {{\'Stop editing\' | translate}} </button> </div> </div> <gmf-editfeature gmf-editfeature-dirty=efsCtrl.dirty gmf-editfeature-editabletreectrl=::efsCtrl.selectedEditableTreeCtrl gmf-editfeature-map=::efsCtrl.map gmf-editfeature-state=efsCtrl.state gmf-editfeature-tolerance=::efsCtrl.tolerance gmf-editfeature-vector=::efsCtrl.vectorLayer> </gmf-editfeature> </div> </div> '},function(e,t){e.exports='<div> <div ng-switch=efCtrl.feature> <a ng-switch-when=null ng-if=efCtrl.geomType href ngeo-btn ngeo-createfeature ngeo-createfeature-active=efCtrl.createActive ngeo-createfeature-features=::efCtrl.features ngeo-createfeature-geom-type=::efCtrl.geomType ngeo-createfeature-map=::efCtrl.map class="btn btn-default" ng-class="{active: efCtrl.createActive}" ng-model=efCtrl.createActive> <span ng-switch=::efCtrl.geomType> <span ng-switch-when=Point> <span class="gmf-icon gmf-icon-point"></span> {{\'Draw new point\' | translate}} </span> <span ng-switch-when=MultiPoint> <span class="gmf-icon gmf-icon-point"></span> {{\'Draw new point\' | translate}} </span> <span ng-switch-when=LineString> <span class="gmf-icon gmf-icon-line"></span> {{\'Draw new linestring\' | translate}} </span> <span ng-switch-when=MultiLineString> <span class="gmf-icon gmf-icon-line"></span> {{\'Draw new linestring\' | translate}} </span> <span ng-switch-when=Polygon> <span class="gmf-icon gmf-icon-polygon"></span> {{\'Draw new polygon\' | translate}} </span> <span ng-switch-when=MultiPolygon> <span class="gmf-icon gmf-icon-polygon"></span> {{\'Draw new polygon\' | translate}} </span> </span> </a> <div ng-switch-default> <form novalidate name=form class="form gmf-editfeature-attributes-container" ng-if=efCtrl.attributes> <div class=row> <div class=col-sm-12> <a class=close ng-click=efCtrl.cancel() ng-disabled=efCtrl.pending title="{{\'Cancel modifications\' | translate}}" href>&times;</a> </div> </div> <ngeo-attributes ngeo-attributes-attributes=::efCtrl.attributes ngeo-attributes-disabled=efCtrl.pending ngeo-attributes-feature=::efCtrl.feature> </ngeo-attributes> <input type=submit value="{{\'Save\' | translate}}" class="btn btn-sm btn-default gmf-editfeature-btn-save" ng-click="form.$valid && efCtrl.save()" ng-disabled="!efCtrl.dirty || efCtrl.pending" title="{{\'Save modifications\' | translate}}"> <a class="btn btn-sm btn-default gmf-editfeature-btn-cancel" ng-click=efCtrl.confirmCancel() ng-disabled=efCtrl.pending title="{{\'Cancel modifications\' | translate}}" href>{{\'Cancel\' | translate}}</a> <button class="btn btn-sm btn-link gmf-editfeature-btn-delete" ng-click=efCtrl.delete() ng-disabled=efCtrl.pending ng-show=efCtrl.featureId title="{{\'Delete this feature\' | translate}}"> <span class="fa fa-trash"></span> {{\'Delete\' | translate}} </button> </form> </div> </div> <ngeo-modal ng-model=efCtrl.unsavedModificationsModalShown> <div class=modal-header> <button type=button class=close data-dismiss=modal aria-label="{{\'Close\' | translate}}"> <span aria-hidden=true>&times;</span> </button> <h4 class=modal-title> {{\'Unsaved modifications!\' | translate}} </h4> </div> <div class=modal-body> {{\'There are unsaved changes.\' | translate}} </div> <div class=modal-footer> <button type=button class="btn btn-default" data-dismiss=modal ng-click=efCtrl.continueWithoutSaving()> {{\'Continue without saving\' | translate}} </button> <button type=button class="btn btn-primary" data-dismiss=modal> {{\'Cancel\' | translate}} </button> <button type=button class="btn btn-default" data-dismiss=modal ng-click=efCtrl.submit()> {{\'Save\' | translate}} </button> </div> </ngeo-modal> <ngeo-modal ng-model=efCtrl.showServerError> <div class=modal-header>{{\'Server error.\' | translate}}</div> <div class=modal-body>{{$parent.efCtrl.serverErrorType}}<br> {{$parent.efCtrl.serverErrorMessage || (\'Unexpected server error.\' | translate)}}</div> </ngeo-modal> </div> '},function(e,t){e.exports='<fieldset ng-disabled=attrCtrl.disabled> <div class=form-group ng-repeat="attribute in ::attrCtrl.attributes"> <div ng-if="attribute.type !== \'geometry\'"> <label ng-if="::attribute.type !== \'boolean\'" class=control-label>{{ ::attribute.name | translate }} <span class=text-muted>{{::attribute.required ? "*" : ""}}</span> </label> <div ng-switch=::attribute.type> <div ng-switch-when=boolean class=checkbox> <label> <input name={{::attribute.name}} ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); type=checkbox>  <span> {{ ::attribute.name | translate }} <span class=text-muted>{{::attribute.required ? "*" : ""}}</span></span> </label> </div> <select name={{::attribute.name}} ng-required=attribute.required ng-switch-when=select ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); class=form-control type=text> <option ng-repeat="attribute in ::attribute.choices" value="{{ ::attribute }}"> {{ ::attribute }} </option> </select> <input name={{::attribute.name}} ng-required=attribute.required ng-switch-when=date ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); ngeo-datetimepicker ngeo-datetimepicker-options="\'{&quot;timepicker&quot;: false, &quot;format&quot;: &quot;\' + attribute.format + \'&quot;, &quot;allowBlank&quot;: true, &quot;todayButton&quot;: false, &quot;mask&quot;: &quot;\' + attribute.mask + \'&quot;}\'" class=form-control type=text>  <input name={{::attribute.name}} id=time ng-required=attribute.required ng-switch-when=time ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); ngeo-datetimepicker ngeo-datetimepicker-options="\'{&quot;datepicker&quot;: false, &quot;format&quot;: &quot;\' + attribute.format + \'&quot;, &quot;todayButton&quot;: false, &quot;mask&quot;: &quot;\' + attribute.mask + \'&quot;, &quot;defaultTime&quot;: &quot;00:00&quot;}\'" class=form-control type=text>  <input name={{::attribute.name}} ng-required=attribute.required ng-switch-when=datetime ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); ngeo-datetimepicker ngeo-datetimepicker-options="\'{&quot;scrollTime&quot;: false, &quot;format&quot;: &quot;\' + attribute.format + \'&quot;, &quot;allowBlank&quot;: true, &quot;todayButton&quot;: false, &quot;mask&quot;: &quot;\' + attribute.mask + \'&quot;, &quot;defaultTime&quot;: &quot;00:00&quot;}\'" class=form-control type=text>  <div ng-switch-when=number ng-switch=::attribute.numType> <input name={{::attribute.name}} ng-required=attribute.required ng-switch-when=integer ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); class=form-control step=1 type=number>  <input name={{::attribute.name}} ng-required=attribute.required ng-switch-default ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); class=form-control type=number>  </div> <input name={{::attribute.name}} ng-required=attribute.required ng-switch-default ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); ng-maxlength=attribute.maxLength class=form-control type=text>  <div ng-show="attrCtrl.form.$submitted || attrCtrl.form[attribute.name].$touched"> <p class=text-danger ng-show=attrCtrl.form[attribute.name].$error.required> {{\'This field is required\' | translate}} </p> </div> </div> </div> </div> </fieldset> '},function(e,t,r){var i,n,a;
/*!
 * jQuery Mousewheel 3.1.13
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 */
/*!
 * jQuery Mousewheel 3.1.13
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 */
(function(o){if(true){!(n=[r(24)],i=o,a=typeof i==="function"?i.apply(t,n):i,a!==undefined&&(e.exports=a))}else{}})(function(e){var t=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],r="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice,n,a;if(e.event.fixHooks){for(var o=t.length;o;){e.event.fixHooks[t[--o]]=e.event.mouseHooks}}var s=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener){for(var t=r.length;t;){this.addEventListener(r[--t],l,false)}}else{this.onmousewheel=l}e.data(this,"mousewheel-line-height",s.getLineHeight(this));e.data(this,"mousewheel-page-height",s.getPageHeight(this))},teardown:function(){if(this.removeEventListener){for(var t=r.length;t;){this.removeEventListener(r[--t],l,false)}}else{this.onmousewheel=null}e.removeData(this,"mousewheel-line-height");e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var r=e(t),i=r["offsetParent"in e.fn?"offsetParent":"parent"]();if(!i.length){i=e("body")}return parseInt(i.css("fontSize"),10)||parseInt(r.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:true,normalizeOffset:true}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}});function l(t){var r=t||window.event,o=i.call(arguments,1),l=0,f=0,h=0,d=0,p=0,v=0;t=e.event.fix(r);t.type="mousewheel";if("detail"in r){h=r.detail*-1}if("wheelDelta"in r){h=r.wheelDelta}if("wheelDeltaY"in r){h=r.wheelDeltaY}if("wheelDeltaX"in r){f=r.wheelDeltaX*-1}if("axis"in r&&r.axis===r.HORIZONTAL_AXIS){f=h*-1;h=0}l=h===0?f:h;if("deltaY"in r){h=r.deltaY*-1;l=h}if("deltaX"in r){f=r.deltaX;if(h===0){l=f*-1}}if(h===0&&f===0){return}if(r.deltaMode===1){var g=e.data(this,"mousewheel-line-height");l*=g;h*=g;f*=g}else if(r.deltaMode===2){var m=e.data(this,"mousewheel-page-height");l*=m;h*=m;f*=m}d=Math.max(Math.abs(h),Math.abs(f));if(!a||d<a){a=d;if(c(r,d)){a/=40}}if(c(r,d)){l/=40;f/=40;h/=40}l=Math[l>=1?"floor":"ceil"](l/a);f=Math[f>=1?"floor":"ceil"](f/a);h=Math[h>=1?"floor":"ceil"](h/a);if(s.settings.normalizeOffset&&this.getBoundingClientRect){var y=this.getBoundingClientRect();p=t.clientX-y.left;v=t.clientY-y.top}t.deltaX=f;t.deltaY=h;t.deltaFactor=a;t.offsetX=p;t.offsetY=v;t.deltaMode=0;o.unshift(t,l,f,h);if(n){clearTimeout(n)}n=setTimeout(u,200);return(e.event.dispatch||e.event.handle).apply(this,o)}function u(){a=null}function c(e,t){return s.settings.adjustOldDeltas&&e.type==="mousewheel"&&t%120===0}})},function(e,t){e.exports='<ngeo-drawfeature ngeo-btn-group class=btn-group ngeo-drawfeature-active=efCtrl.drawActive ngeo-drawfeature-map=efCtrl.map ngeo-drawfeature-showmeasure=efCtrl.showMeasure> <a data-toggle=tooltip title="{{\'Draw a point on the map\' | translate}}" href ngeo-btn ngeo-drawpoint class="btn btn-default ngeo-drawfeature-point" ng-class="{active: dfCtrl.drawPoint.active}" ng-model=dfCtrl.drawPoint.active> <span class="gmf-icon gmf-icon-point"></span> </a> <a data-toggle=tooltip title="{{\'Draw a line on the map\' | translate}}" href ngeo-btn ngeo-measurelength class="btn btn-default ngeo-drawfeature-linestring" ng-class="{active: dfCtrl.measureLength.active}" ng-model=dfCtrl.measureLength.active> <span class="gmf-icon gmf-icon-line"></span> </a> <a data-toggle=tooltip title="{{\'Draw a polygon on the map\' | translate}}" href ngeo-btn ngeo-measurearea class="btn btn-default ngeo-drawfeature-polygon" ng-class="{active: dfCtrl.measureArea.active}" ng-model=dfCtrl.measureArea.active> <span class="gmf-icon gmf-icon-polygon"></span> </a> <a data-toggle=tooltip title="{{\'Draw a circle on the map\' | translate}}" href ngeo-btn ngeo-measureazimut class="btn btn-default ngeo-drawfeature-circle" ng-class="{active: dfCtrl.measureAzimut.active}" ng-model=dfCtrl.measureAzimut.active> <span class="gmf-icon gmf-icon-circle"></span> </a> <a data-toggle=tooltip title="{{\'Draw a rectangle on the map\' | translate}}" href ngeo-btn ngeo-drawrectangle class="btn btn-default ngeo-drawfeature-rectangle" ng-class="{active: dfCtrl.drawRectangle.active}" ng-model=dfCtrl.drawRectangle.active> <span class="gmf-icon gmf-icon-rectangle"></span> </a> <a data-toggle=tooltip title="{{\'Draw a text label on the map\' | translate}}" href ngeo-btn ngeo-drawtext class="btn btn-default ngeo-drawfeature-text" ng-class="{active: dfCtrl.drawText.active}" ng-model=dfCtrl.drawText.active> <span class="gmf-icon gmf-icon-text"></span> </a> </ngeo-drawfeature> <div ng-switch=efCtrl.selectedFeature> <hr class=gmf-drawfeature-separator ng-show="efCtrl.getFeaturesArray().length > 0"> <div ng-switch-when=null> <div ng-show="efCtrl.getFeaturesArray().length > 0"> <div class=ngeo-drawfeature-actionbuttons> <button type=button data-toggle=dropdown aria-haspopup=true aria-expanded=false ngeo-exportfeatures ngeo-exportfeatures-features=efCtrl.features class="btn btn-link btn-sm"> <span class="fa fa-mail-forward"></span> {{\'Export\' | translate}} <span class=caret></span> </button> <button ng-click=efCtrl.clearFeatures() class="btn btn-link btn-xs"> <span class="fa fa-trash"></span> {{\'Delete All\' | translate}} </button> </div> <div class=gmf-eol></div> <div class="gmf-drawfeature-featurelist list-group list-group-sm"> <button role=button class=list-group-item ng-repeat="feature in efCtrl.getFeaturesArray()" ng-click=efCtrl.selectFeatureFromList(feature);> {{ feature.get(efCtrl.nameProperty) }} </button> </div> </div> </div> <div ng-switch-default> <button ng-click="efCtrl.selectedFeature = null;" class="btn btn-link btn-xs"> <span class="fa fa-arrow-left"></span> {{\'List\' | translate}} </button> <div class=ngeo-drawfeature-actionbuttons> <button type=button data-toggle=dropdown aria-haspopup=true aria-expanded=false ngeo-exportfeatures ngeo-exportfeatures-features=efCtrl.selectedFeatures class="btn btn-link btn-xs"> <span class="fa fa-mail-forward"></span> {{\'Export\' | translate}} <span class=caret></span> </button> <button ng-click=efCtrl.removeFeature(efCtrl.selectedFeature); class="btn btn-link btn-xs"> <span class="fa fa-trash"></span> {{\'Delete\' | translate}} </button> </div> <div class=gmf-eol></div> <gmf-featurestyle gmf-featurestyle-feature=efCtrl.selectedFeature> </gmf-featurestyle> </div> </div> '},function(e,t){e.exports='<div ng-if="fsCtrl.feature && fsCtrl.type"> <div class=form-group> <input ng-model=fsCtrl.getSetName ng-model-options="{getterSetter: true}" ng-attr-placeholder="{{\'Name\' | translate}}" class=form-control /> </div> <div ng-if="fsCtrl.type !== \'Text\'" class=form-group> <input id=gmf-featurestyle-showlabel type=checkbox ng-model=fsCtrl.getSetShowLabel ng-model-options="{getterSetter: true}"/> <label ng-switch=fsCtrl.type for=gmf-featurestyle-showlabel class=control-label> {{\'Display label\' | translate}} </label> </div> <div ng-if="fsCtrl.type !== \'Text\'" class=form-group> <input id=gmf-featurestyle-showmeasure type=checkbox ng-model=fsCtrl.getSetShowMeasure ng-model-options="{getterSetter: true}"/> <label ng-switch=fsCtrl.type for=gmf-featurestyle-showmeasure class=control-label> <span ng-switch-when=Circle> {{\'Display azimuth and radius\' | translate}} </span> <span ng-switch-when=Polygon> {{\'Display surface\' | translate}} </span> <span ng-switch-when=Rectangle> {{\'Display surface\' | translate}} </span> <span ng-switch-when=LineString> {{\'Display length\' | translate}} </span> <span ng-switch-when=Point> {{\'Display coordinates\' | translate}} </span> </label> <em class=text-muted> ({{ fsCtrl.measure }}) </em> </div> </div> <div ng-if="fsCtrl.feature && fsCtrl.type" class=form-horizontal> <div class=form-group> <div ngeo-colorpicker="" ngeo-colorpicker-color=fsCtrl.color class=col-md-12> </div> </div> <div ng-if="fsCtrl.type === \'Point\'" class="form-group form-group-nomargin"> <label class="control-label col-md-4">{{\'Size\' | translate}}</label> <div class=col-md-8> <input type=range class=form-control min=3 max=20 step=1 ng-model=fsCtrl.getSetSize ng-model-options="{getterSetter: true}"/> </div> </div> <div ng-if="fsCtrl.type === \'Text\'" class="form-group form-group-nomargin"> <label class="control-label col-md-4">{{\'Size\' | translate}}</label> <div class=col-md-8> <input type=range class=form-control min=8 max=30 step=1 ng-model=fsCtrl.getSetSize ng-model-options="{getterSetter: true}"/> </div> </div> <div ng-if="fsCtrl.type === \'Circle\' || fsCtrl.type === \'LineString\' || fsCtrl.type === \'Polygon\' || fsCtrl.type === \'Rectangle\'" class="form-group form-group-nomargin"> <label class="control-label col-md-4">{{\'Stroke\' | translate}}</label> <div class=col-md-8> <input type=range class=form-control min=0.5 max=5 step=0.5 ng-model=fsCtrl.getSetStroke ng-model-options="{getterSetter: true}"/> </div> </div> <div ng-if="fsCtrl.type === \'Circle\' || fsCtrl.type === \'Polygon\' || fsCtrl.type === \'Rectangle\'" class="form-group form-group-nomargin"> <label class="control-label col-md-4">{{\'Opacity\' | translate}}</label> <div class=col-md-8> <input type=range class=form-control min=0 max=1 step=0.05 ng-model=fsCtrl.getSetOpacity ng-model-options="{getterSetter: true}"/> </div> </div> <div ng-if="fsCtrl.type === \'Text\'" class="form-group form-group-nomargin"> <label class="control-label col-md-4">{{\'Angle\' | translate}}</label> <div class=col-md-8> <input type=range class=form-control min=-180 max=180 step=22.5 ng-model=fsCtrl.getSetAngle ng-model-options="{getterSetter: true}"/> </div> </div> </div> '},function(e,t){e.exports='<table class=ngeo-colorpicker-palette> <tr ng-repeat="colors in ::ctrl.colors"> <td ng-repeat="color in ::colors" ng-click=ctrl.setColor(color) ng-class="{\'ngeo-colorpicker-selected\': color == ctrl.color}"> <div ng-style="::{\'background-color\': color}"></div> </td> </tr> </table> '},function(e,t){e.exports='<h4 class="popover-title ngeo-popup-title"> <span ng-bind-html=title></span> <button type=button class=close ng-click="open = false"> &times;</button> </h4> <div class=popover-content ng-bind-html=content></div> '},function(e,t){
/**
 * @license AngularJS v1.7.0
 * (c) 2010-2018 Google, Inc. http://angularjs.org
 * License: MIT
 */
(function(e,t){"use strict";var r=t.$$minErr("$sanitize");var i;var n;var a;var o;var s;var l;var u;var c;var f;var h;function d(){var d=false;var p=false;this.$get=["$$sanitizeUri",function(e){d=true;if(p){n(O,C)}return function(t){var r=[];f(t,h(r,function(t,r){return!/^unsafe:/.test(e(t,r))}));return r.join("")}}];this.enableSvg=function(e){if(s(e)){p=e;return this}else{return p}};this.addValidElements=function(e){if(!d){if(o(e)){e={htmlElements:e}}k(C,e.svgElements);k(m,e.htmlVoidElements);k(O,e.htmlVoidElements);k(O,e.htmlElements)}return this};this.addValidAttrs=function(e){if(!d){n(j,P(e,true))}return this};i=t.bind;n=t.extend;a=t.forEach;o=t.isArray;s=t.isDefined;l=t.$$lowercase;u=t.noop;f=D;h=$;c=e.Node.prototype.contains||function(e){return!!(this.compareDocumentPosition(e)&16)};var v=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,g=/([^#-~ |!])/g;var m=A("area,br,col,hr,img,wbr");var y=A("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),_=A("rp,rt"),b=n({},_,y);var w=n({},y,A("address,article,"+"aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,"+"h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul"));var S=n({},_,A("a,abbr,acronym,b,"+"bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,"+"samp,small,span,strike,strong,sub,sup,time,tt,u,var"));var C=A("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,"+"hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,"+"radialGradient,rect,stop,svg,switch,text,title,tspan");var x=A("script,style");var O=n({},m,w,S,b);var T=A("background,cite,href,longdesc,src,xlink:href,xml:base");var E=A("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,"+"color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,"+"ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,"+"scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,"+"valign,value,vspace,width");var M=A("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,"+"baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,"+"cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,"+"font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,"+"height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,"+"marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,"+"max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,"+"path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,"+"requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,"+"stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,"+"stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,"+"stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,"+"underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,"+"width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,"+"xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",true);var j=n({},T,M,E);function A(e,t){return P(e.split(","),t)}function P(e,t){var r={},i;for(i=0;i<e.length;i++){r[t?l(e[i]):e[i]]=true}return r}function k(e,t){if(t&&t.length){n(e,P(t))}}var I=function(e,t){var i;if(t&&t.implementation){i=t.implementation.createHTMLDocument("inert")}else{throw r("noinert","Can't create an inert html document")}var n=(i.documentElement||i.getDocumentElement()).querySelector("body");n.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>';if(!n.querySelector("svg")){return a}else{n.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">';if(n.querySelector("svg img")){return o}else{return s}}function a(t){t="<remove></remove>"+t;try{t=encodeURI(t)}catch(e){return undefined}var r=new e.XMLHttpRequest;r.responseType="document";r.open("GET","data:text/html;charset=utf-8,"+t,false);r.send(null);var i=r.response.body;i.firstChild.remove();return i}function o(t){t="<remove></remove>"+t;try{var r=(new e.DOMParser).parseFromString(t,"text/html").body;r.firstChild.remove();return r}catch(e){return undefined}}function s(e){n.innerHTML=e;if(t.documentMode){N(n)}return n}}(e,e.document);function D(e,t){if(e===null||e===undefined){e=""}else if(typeof e!=="string"){e=""+e}var i=I(e);if(!i)return"";var n=5;do{if(n===0){throw r("uinput","Failed to sanitize html because the input is unstable")}n--;e=i.innerHTML;i=I(e)}while(e!==i.innerHTML);var a=i.firstChild;while(a){switch(a.nodeType){case 1:t.start(a.nodeName.toLowerCase(),R(a.attributes));break;case 3:t.chars(a.textContent);break}var o;if(!(o=a.firstChild)){if(a.nodeType===1){t.end(a.nodeName.toLowerCase())}o=F("nextSibling",a);if(!o){while(o==null){a=F("parentNode",a);if(a===i)break;o=F("nextSibling",a);if(a.nodeType===1){t.end(a.nodeName.toLowerCase())}}}}a=o}while(a=i.firstChild){i.removeChild(a)}}function R(e){var t={};for(var r=0,i=e.length;r<i;r++){var n=e[r];t[n.name]=n.value}return t}function L(e){return e.replace(/&/g,"&amp;").replace(v,function(e){var t=e.charCodeAt(0);var r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(g,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function $(e,t){var r=false;var n=i(e,e.push);return{start:function(e,i){e=l(e);if(!r&&x[e]){r=e}if(!r&&O[e]===true){n("<");n(e);a(i,function(r,i){var a=l(i);var o=e==="img"&&a==="src"||a==="background";if(j[a]===true&&(T[a]!==true||t(r,o))){n(" ");n(i);n('="');n(L(r));n('"')}});n(">")}},end:function(e){e=l(e);if(!r&&O[e]===true&&m[e]!==true){n("</");n(e);n(">")}if(e==r){r=false}},chars:function(e){if(!r){n(L(e))}}}}function N(t){while(t){if(t.nodeType===e.Node.ELEMENT_NODE){var r=t.attributes;for(var i=0,n=r.length;i<n;i++){var a=r[i];var o=a.name.toLowerCase();if(o==="xmlns:ns1"||o.lastIndexOf("ns1:",0)===0){t.removeAttributeNode(a);i--;n--}}}var s=t.firstChild;if(s){N(s)}t=F("nextSibling",t)}}function F(e,t){var i=t[e];if(i&&c.call(t,i)){throw r("elclob","Failed to sanitize html because the element is clobbered: {0}",t.outerHTML||t.outerText)}return i}}function p(e){var t=[];var r=h(t,u);r.chars(e);return t.join("")}t.module("ngSanitize",[]).provider("$sanitize",d).info({angularVersion:"1.7.0"});t.module("ngSanitize").filter("linky",["$sanitize",function(e){var r=/((s?ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,i=/^mailto:/i;var n=t.$$minErr("linky");var a=t.isDefined;var o=t.isFunction;var s=t.isObject;var l=t.isString;return function(t,u,c){if(t==null||t==="")return t;if(!l(t))throw n("notstring","Expected string but received: {0}",t);var f=o(c)?c:s(c)?function e(){return c}:function e(){return{}};var h;var d=t;var v=[];var g;var m;while(h=d.match(r)){g=h[0];if(!h[2]&&!h[4]){g=(h[3]?"http://":"mailto:")+g}m=h.index;y(d.substr(0,m));_(g,h[0].replace(i,""));d=d.substring(m+h[0].length)}y(d);return e(v.join(""));function y(e){if(!e){return}v.push(p(e))}function _(e,t){var r,i=f(e);v.push("<a ");for(r in i){v.push(r+'="'+i[r]+'" ')}if(a(u)&&!("target"in i)){v.push('target="',u,'" ')}v.push('href="',e.replace(/"/g,"&quot;"),'">');y(t);v.push("</a>")}}}])})(window,window.angular)},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);if(!t.children)t.children=[];Object.defineProperty(t,"loaded",{enumerable:true,get:function(){return t.l}});Object.defineProperty(t,"id",{enumerable:true,get:function(){return t.i}});Object.defineProperty(t,"exports",{enumerable:true});t.webpackPolyfill=1}return t}},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,r){(function(t,r){true?e.exports=r():undefined})(this,function(){"use strict";function e(e,r,n,a,o){t(e,r,n||0,a||e.length-1,o||i)}function t(e,i,n,a,o){while(a>n){if(a-n>600){var s=a-n+1;var l=i-n+1;var u=Math.log(s);var c=.5*Math.exp(2*u/3);var f=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1);var h=Math.max(n,Math.floor(i-l*c/s+f));var d=Math.min(a,Math.floor(i+(s-l)*c/s+f));t(e,i,h,d,o)}var p=e[i];var v=n;var g=a;r(e,n,i);if(o(e[a],p)>0)r(e,n,a);while(v<g){r(e,v,g);v++;g--;while(o(e[v],p)<0)v++;while(o(e[g],p)>0)g--}if(o(e[n],p)===0)r(e,n,g);else{g++;r(e,g,a)}if(g<=i)n=g+1;if(i<=g)a=g-1}}function r(e,t,r){var i=e[t];e[t]=e[r];e[r]=i}function i(e,t){return e<t?-1:e>t?1:0}return e})},function(e,t){e.exports='<ul class=gmf-backgroundlayerselector> <li ng-repeat="layer in ctrl.bgLayers" ng-click=ctrl.setLayer(layer) ng-class="{\'gmf-backgroundlayerselector-active\': ctrl.bgLayer == layer, \'gmf-backgroundlayerselector-disabled\': ctrl.opacityLayer == layer}"> <img class=gmf-thumb ng-src="{{::layer.get(\'metadata\')[\'thumbnail\']}}"/> <span class=gmf-text>{{layer.get("label") | translate}}</span> <span ng-class="{\'gmf-backgroundlayerselector-opacity-check\': ctrl.opacityLayer == layer}"></span> </li> <input ng-if=ctrl.opacityLayer class="input-action gmf-backgroundlayerselector-opacity-slider" name=bg-layer-opacity type=range min=0 max=1 step=0.01 ng-model=ctrl.getSetBgLayerOpacity ng-model-options="{getterSetter: true}"> </ul> '},function(e,t){e.exports='<div ng-if=$ctrl.gmfUser.username> <div class=form-group> <span>{{\'Logged in as\' | translate}}</span> <strong>{{ ::$ctrl.gmfUser.username }}</strong>. </div> <form name=logoutForm role=form ng-submit=$ctrl.logout() ng-controller=GmfAuthenticationController ng-class="{\'has-error\': $ctrl.error}" ng-if=!$ctrl.changingPassword> <div class=form-group> <input type=submit class="form-control btn btn-primary" value="{{\'Logout\' | translate}}"/> </div> <div class=form-group> <input ng-show=$ctrl.allowPasswordChange type=button class="form-control btn btn-default" value="{{\'Change password\' | translate}}" ng-click="$ctrl.changingPassword = true"/> </div> </form> <form name=changePasswordForm role=form ng-submit=$ctrl.changePassword() ng-controller=GmfAuthenticationController ng-class="{\'has-error\': $ctrl.error}" ng-if=$ctrl.changingPassword> <div class=form-group> <input type=password class=form-control name=oldpassword ng-model=$ctrl.oldPwdVal ng-attr-placeholder="{{\'Old password\' | translate}}"/> </div> <div class=form-group> <input type=password class=form-control name=newpassword ng-model=$ctrl.newPwdVal ng-attr-placeholder="{{\'New password\' | translate}}"/> </div> <div class=form-group> <input type=password class=form-control name=newpasswordconfirm ng-model=$ctrl.newPwdConfVal ng-attr-placeholder="{{\'Confirm new password\' | translate}}"/> </div> <div class=form-group> <input type=submit class="form-control btn btn-primary" value="{{\'Change password\' | translate}}"/> </div> <div class=form-group> <input type=button class="form-control btn btn-default" value="{{\'Cancel\' | translate}}" ng-if=!$ctrl.userMustChangeItsPassword() ng-click=$ctrl.changePasswordReset() /> <input type=button class="form-control btn btn-default" value="{{\'Logout\' | translate}}" ng-if=$ctrl.userMustChangeItsPassword() ng-click=$ctrl.logout() /> </div> </form> <div ng-show=$ctrl.error class="gmf-authentication-error help-block"></div> <ngeo-modal ng-model=$ctrl.changePasswordModalShown> <div class=modal-header> <button type=button class=close data-dismiss=modal aria-label="{{\'Close\' | translate}}"> <span aria-hidden=true>&times;</span> </button> <h4 class=modal-title> {{\'Password Changed\' | translate}} </h4> </div> <div class=modal-body> {{\'Your password has successfully been changed.\' | translate}} </div> <div class=modal-footer> <button type=button class="btn btn-default" data-dismiss=modal>{{\'OK\' | translate}}</button> </div> </ngeo-modal> </div> <div ng-if=!$ctrl.gmfUser.username> <div class="alert alert-warning" ng-show=$ctrl.infoMessage> <span>{{ $ctrl.infoMessage }}</span> </div> <form name=loginForm role=form ng-submit=$ctrl.login() ng-controller=GmfAuthenticationController ng-class="{\'has-error\': $ctrl.error}"> <div class=form-group> <input type=text class=form-control name=login ng-model=$ctrl.loginVal ng-attr-placeholder="{{\'Username\' | translate}}"/> </div> <div class=form-group> <input type=password class=form-control name=password ng-model=$ctrl.pwdVal ng-attr-placeholder="{{\'Password\' | translate}}"/> </div> <div class=form-group> <input type=submit class="form-control btn btn-primary" value="{{\'Connect\' | translate}}"/> </div> <div ng-show=$ctrl.allowPasswordReset class=form-group> <a ng-click=$ctrl.resetPassword() href="">{{\'Password forgotten?\' | translate}}</a> </div> </form> <div ng-show=$ctrl.error class="gmf-authentication-error help-block"></div> <ngeo-modal ng-model=$ctrl.resetPasswordModalShown> <div class=modal-header> <button type=button class=close data-dismiss=modal aria-label="{{\'Close\' | translate}}"> <span aria-hidden=true>&times;</span> </button> <h4 class=modal-title> {{\'Password forgotten?\' | translate}} </h4> </div> <div class=modal-body translate> A new password has just been sent to you by e-mail. </div> <div class=modal-footer> <button type=button class="btn btn-default" data-dismiss=modal>{{\'OK\' | translate}}</button> </div> </ngeo-modal> </div> '},function(e,t,r){(function(e){+function(e){"use strict";var t=function(t,r){this.options=r;this.$body=e(document.body);this.$element=e(t);this.$dialog=this.$element.find(".modal-dialog");this.$backdrop=null;this.isShown=null;this.originalBodyPad=null;this.scrollbarWidth=0;this.ignoreBackdropClick=false;if(this.options.remote){this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))}};t.VERSION="3.3.7";t.TRANSITION_DURATION=300;t.BACKDROP_TRANSITION_DURATION=150;t.DEFAULTS={backdrop:true,keyboard:true,show:true};t.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)};t.prototype.show=function(r){var i=this;var n=e.Event("show.bs.modal",{relatedTarget:r});this.$element.trigger(n);if(this.isShown||n.isDefaultPrevented())return;this.isShown=true;this.checkScrollbar();this.setScrollbar();this.$body.addClass("modal-open");this.escape();this.resize();this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this));this.$dialog.on("mousedown.dismiss.bs.modal",function(){i.$element.one("mouseup.dismiss.bs.modal",function(t){if(e(t.target).is(i.$element))i.ignoreBackdropClick=true})});this.backdrop(function(){var n=e.support.transition&&i.$element.hasClass("fade");if(!i.$element.parent().length){i.$element.appendTo(i.$body)}i.$element.show().scrollTop(0);i.adjustDialog();if(n){i.$element[0].offsetWidth}i.$element.addClass("in");i.enforceFocus();var a=e.Event("shown.bs.modal",{relatedTarget:r});n?i.$dialog.one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(a)}).emulateTransitionEnd(t.TRANSITION_DURATION):i.$element.trigger("focus").trigger(a)})};t.prototype.hide=function(r){if(r)r.preventDefault();r=e.Event("hide.bs.modal");this.$element.trigger(r);if(!this.isShown||r.isDefaultPrevented())return;this.isShown=false;this.escape();this.resize();e(document).off("focusin.bs.modal");this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal");this.$dialog.off("mousedown.dismiss.bs.modal");e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(t.TRANSITION_DURATION):this.hideModal()};t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){if(document!==e.target&&this.$element[0]!==e.target&&!this.$element.has(e.target).length){this.$element.trigger("focus")}},this))};t.prototype.escape=function(){if(this.isShown&&this.options.keyboard){this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){e.which==27&&this.hide()},this))}else if(!this.isShown){this.$element.off("keydown.dismiss.bs.modal")}};t.prototype.resize=function(){if(this.isShown){e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this))}else{e(window).off("resize.bs.modal")}};t.prototype.hideModal=function(){var e=this;this.$element.hide();this.backdrop(function(){e.$body.removeClass("modal-open");e.resetAdjustments();e.resetScrollbar();e.$element.trigger("hidden.bs.modal")})};t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};t.prototype.backdrop=function(r){var i=this;var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var a=e.support.transition&&n;this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+n).appendTo(this.$body);this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){if(this.ignoreBackdropClick){this.ignoreBackdropClick=false;return}if(e.target!==e.currentTarget)return;this.options.backdrop=="static"?this.$element[0].focus():this.hide()},this));if(a)this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");if(!r)return;a?this.$backdrop.one("bsTransitionEnd",r).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):r()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){i.removeBackdrop();r&&r()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):o()}else if(r){r()}};t.prototype.handleUpdate=function(){this.adjustDialog()};t.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})};t.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})};t.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e;this.scrollbarWidth=this.measureScrollbar()};t.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";if(this.bodyIsOverflowing)this.$body.css("padding-right",e+this.scrollbarWidth)};t.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)};t.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure";this.$body.append(e);var t=e.offsetWidth-e.clientWidth;this.$body[0].removeChild(e);return t};function r(r,i){return this.each(function(){var n=e(this);var a=n.data("bs.modal");var o=e.extend({},t.DEFAULTS,n.data(),typeof r=="object"&&r);if(!a)n.data("bs.modal",a=new t(this,o));if(typeof r=="string")a[r](i);else if(o.show)a.show(i)})}var i=e.fn.modal;e.fn.modal=r;e.fn.modal.Constructor=t;e.fn.modal.noConflict=function(){e.fn.modal=i;return this};e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var i=e(this);var n=i.attr("href");var a=e(i.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,""));var o=a.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(n)&&n},a.data(),i.data());if(i.is("a"))t.preventDefault();a.one("show.bs.modal",function(e){if(e.isDefaultPrevented())return;a.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})});r.call(a,o,this)})}(e)}).call(this,r(24))},function(e,t,r){var i,n,a;(function(o){if(true){!(n=[r(24),r(103)],i=o,a=typeof i==="function"?i.apply(t,n):i,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(r){t=e.body}if(!t){t=e.body}if(!t.nodeName){t=e.body}return t}})},function(e,t,r){var i,n,a;(function(o){if(true){!(n=[r(24),r(103)],i=o,a=typeof i==="function"?i.apply(t,n):i,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.ui.safeBlur=function(t){if(t&&t.nodeName.toLowerCase()!=="body"){e(t).trigger("blur")}}})},function(e,t,r){var i,n,a;
/*!
 * jQuery UI Draggable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/*!
 * jQuery UI Draggable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(o){if(true){!(n=[r(24),r(275),r(365),r(364),r(535),r(536),r(363),r(103),r(224)],i=o,a=typeof i==="function"?i.apply(t,n):i,a!==undefined&&(e.exports=a))}else{}})(function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false,drag:null,start:null,stop:null},_create:function(){if(this.options.helper==="original"){this._setPositionRelative()}if(this.options.addClasses){this._addClass("ui-draggable")}this._setHandleClassName();this._mouseInit()},_setOption:function(e,t){this._super(e,t);if(e==="handle"){this._removeHandleClassName();this._setHandleClassName()}},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=true;return}this._removeHandleClassName();this._mouseDestroy()},_mouseCapture:function(t){var r=this.options;if(this.helper||r.disabled||e(t.target).closest(".ui-resizable-handle").length>0){return false}this.handle=this._getHandle(t);if(!this.handle){return false}this._blurActiveElement(t);this._blockFrames(r.iframeFix===true?"iframe":r.iframeFix);return true},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks}},_blurActiveElement:function(t){var r=e.ui.safeActiveElement(this.document[0]),i=e(t.target);if(i.closest(r).length){return}e.ui.safeBlur(r)},_mouseStart:function(t){var r=this.options;this.helper=this._createHelper(t);this._addClass(this.helper,"ui-draggable-dragging");this._cacheHelperProportions();if(e.ui.ddmanager){e.ui.ddmanager.current=this}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent(true);this.offsetParent=this.helper.offsetParent();this.hasFixedAncestor=this.helper.parents().filter(function(){return e(this).css("position")==="fixed"}).length>0;this.positionAbs=this.element.offset();this._refreshOffsets(t);this.originalPosition=this.position=this._generatePosition(t,false);this.originalPageX=t.pageX;this.originalPageY=t.pageY;r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt);this._setContainment();if(this._trigger("start",t)===false){this._clear();return false}this._cacheHelperProportions();if(e.ui.ddmanager&&!r.dropBehaviour){e.ui.ddmanager.prepareOffsets(this,t)}this._mouseDrag(t,true);if(e.ui.ddmanager){e.ui.ddmanager.dragStart(this,t)}return true},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:false,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,r){if(this.hasFixedAncestor){this.offset.parent=this._getParentOffset()}this.position=this._generatePosition(t,true);this.positionAbs=this._convertPositionTo("absolute");if(!r){var i=this._uiHash();if(this._trigger("drag",t,i)===false){this._mouseUp(new e.Event("mouseup",t));return false}this.position=i.position}this.helper[0].style.left=this.position.left+"px";this.helper[0].style.top=this.position.top+"px";if(e.ui.ddmanager){e.ui.ddmanager.drag(this,t)}return false},_mouseStop:function(t){var r=this,i=false;if(e.ui.ddmanager&&!this.options.dropBehaviour){i=e.ui.ddmanager.drop(this,t)}if(this.dropped){i=this.dropped;this.dropped=false}if(this.options.revert==="invalid"&&!i||this.options.revert==="valid"&&i||this.options.revert===true||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)){e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(r._trigger("stop",t)!==false){r._clear()}})}else{if(this._trigger("stop",t)!==false){this._clear()}}return false},_mouseUp:function(t){this._unblockFrames();if(e.ui.ddmanager){e.ui.ddmanager.dragStop(this,t)}if(this.handleElement.is(t.target)){this.element.trigger("focus")}return e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp(new e.Event("mouseup",{target:this.element[0]}))}else{this._clear()}return this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:true},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var r=this.options,i=e.isFunction(r.helper),n=i?e(r.helper.apply(this.element[0],[t])):r.helper==="clone"?this.element.clone().removeAttr("id"):this.element;if(!n.parents("body").length){n.appendTo(r.appendTo==="parent"?this.element[0].parentNode:r.appendTo)}if(i&&n[0]===this.element[0]){this._setPositionRelative()}if(n[0]!==this.element[0]&&!/(fixed|absolute)/.test(n.css("position"))){n.css("position","absolute")}return n},_setPositionRelative:function(){if(!/^(?:r|a|f)/.test(this.element.css("position"))){this.element[0].style.position="relative"}},_adjustOffsetFromHelper:function(t){if(typeof t==="string"){t=t.split(" ")}if(e.isArray(t)){t={left:+t[0],top:+t[1]||0}}if("left"in t){this.offset.click.left=t.left+this.margins.left}if("right"in t){this.offset.click.left=this.helperProportions.width-t.right+this.margins.left}if("top"in t){this.offset.click.top=t.top+this.margins.top}if("bottom"in t){this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top}},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),r=this.document[0];if(this.cssPosition==="absolute"&&this.scrollParent[0]!==r&&e.contains(this.scrollParent[0],this.offsetParent[0])){t.left+=this.scrollParent.scrollLeft();t.top+=this.scrollParent.scrollTop()}if(this._isRootNode(this.offsetParent[0])){t={top:0,left:0}}return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition!=="relative"){return{top:0,left:0}}var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(!t?this.scrollParent.scrollTop():0),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(!t?this.scrollParent.scrollLeft():0)}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,r,i,n=this.options,a=this.document[0];this.relativeContainer=null;if(!n.containment){this.containment=null;return}if(n.containment==="window"){this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(n.containment==="document"){this.containment=[0,0,e(a).width()-this.helperProportions.width-this.margins.left,(e(a).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(n.containment.constructor===Array){this.containment=n.containment;return}if(n.containment==="parent"){n.containment=this.helper[0].parentNode}r=e(n.containment);i=r[0];if(!i){return}t=/(scroll|auto)/.test(r.css("overflow"));this.containment=[(parseInt(r.css("borderLeftWidth"),10)||0)+(parseInt(r.css("paddingLeft"),10)||0),(parseInt(r.css("borderTopWidth"),10)||0)+(parseInt(r.css("paddingTop"),10)||0),(t?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(r.css("borderRightWidth"),10)||0)-(parseInt(r.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(r.css("borderBottomWidth"),10)||0)-(parseInt(r.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relativeContainer=r},_convertPositionTo:function(e,t){if(!t){t=this.position}var r=e==="absolute"?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition==="fixed"?-this.offset.scroll.top:i?0:this.offset.scroll.top)*r,left:t.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition==="fixed"?-this.offset.scroll.left:i?0:this.offset.scroll.left)*r}},_generatePosition:function(e,t){var r,i,n,a,o=this.options,s=this._isRootNode(this.scrollParent[0]),l=e.pageX,u=e.pageY;if(!s||!this.offset.scroll){this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}}if(t){if(this.containment){if(this.relativeContainer){i=this.relativeContainer.offset();r=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]}else{r=this.containment}if(e.pageX-this.offset.click.left<r[0]){l=r[0]+this.offset.click.left}if(e.pageY-this.offset.click.top<r[1]){u=r[1]+this.offset.click.top}if(e.pageX-this.offset.click.left>r[2]){l=r[2]+this.offset.click.left}if(e.pageY-this.offset.click.top>r[3]){u=r[3]+this.offset.click.top}}if(o.grid){n=o.grid[1]?this.originalPageY+Math.round((u-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY;u=r?n-this.offset.click.top>=r[1]||n-this.offset.click.top>r[3]?n:n-this.offset.click.top>=r[1]?n-o.grid[1]:n+o.grid[1]:n;a=o.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX;l=r?a-this.offset.click.left>=r[0]||a-this.offset.click.left>r[2]?a:a-this.offset.click.left>=r[0]?a-o.grid[0]:a+o.grid[0]:a}if(o.axis==="y"){l=this.originalPageX}if(o.axis==="x"){u=this.originalPageY}}return{top:u-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.offset.scroll.top:s?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.offset.scroll.left:s?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging");if(this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval){this.helper.remove()}this.helper=null;this.cancelHelperRemoval=false;if(this.destroyOnClear){this.destroy()}},_trigger:function(t,r,i){i=i||this._uiHash();e.ui.plugin.call(this,t,[r,i,this],true);if(/^(drag|start|stop)/.test(t)){this.positionAbs=this._convertPositionTo("absolute");i.offset=this.positionAbs}return e.Widget.prototype._trigger.call(this,t,r,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});e.ui.plugin.add("draggable","connectToSortable",{start:function(t,r,i){var n=e.extend({},r,{item:i.element});i.sortables=[];e(i.options.connectToSortable).each(function(){var r=e(this).sortable("instance");if(r&&!r.options.disabled){i.sortables.push(r);r.refreshPositions();r._trigger("activate",t,n)}})},stop:function(t,r,i){var n=e.extend({},r,{item:i.element});i.cancelHelperRemoval=false;e.each(i.sortables,function(){var e=this;if(e.isOver){e.isOver=0;i.cancelHelperRemoval=true;e.cancelHelperRemoval=false;e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")};e._mouseStop(t);e.options.helper=e.options._helper}else{e.cancelHelperRemoval=true;e._trigger("deactivate",t,n)}})},drag:function(t,r,i){e.each(i.sortables,function(){var n=false,a=this;a.positionAbs=i.positionAbs;a.helperProportions=i.helperProportions;a.offset.click=i.offset.click;if(a._intersectsWith(a.containerCache)){n=true;e.each(i.sortables,function(){this.positionAbs=i.positionAbs;this.helperProportions=i.helperProportions;this.offset.click=i.offset.click;if(this!==a&&this._intersectsWith(this.containerCache)&&e.contains(a.element[0],this.element[0])){n=false}return n})}if(n){if(!a.isOver){a.isOver=1;i._parent=r.helper.parent();a.currentItem=r.helper.appendTo(a.element).data("ui-sortable-item",true);a.options._helper=a.options.helper;a.options.helper=function(){return r.helper[0]};t.target=a.currentItem[0];a._mouseCapture(t,true);a._mouseStart(t,true,true);a.offset.click.top=i.offset.click.top;a.offset.click.left=i.offset.click.left;a.offset.parent.left-=i.offset.parent.left-a.offset.parent.left;a.offset.parent.top-=i.offset.parent.top-a.offset.parent.top;i._trigger("toSortable",t);i.dropped=a.element;e.each(i.sortables,function(){this.refreshPositions()});i.currentItem=i.element;a.fromOutside=i}if(a.currentItem){a._mouseDrag(t);r.position=a.position}}else{if(a.isOver){a.isOver=0;a.cancelHelperRemoval=true;a.options._revert=a.options.revert;a.options.revert=false;a._trigger("out",t,a._uiHash(a));a._mouseStop(t,true);a.options.revert=a.options._revert;a.options.helper=a.options._helper;if(a.placeholder){a.placeholder.remove()}r.helper.appendTo(i._parent);i._refreshOffsets(t);r.position=i._generatePosition(t,true);i._trigger("fromSortable",t);i.dropped=false;e.each(i.sortables,function(){this.refreshPositions()})}}})}});e.ui.plugin.add("draggable","cursor",{start:function(t,r,i){var n=e("body"),a=i.options;if(n.css("cursor")){a._cursor=n.css("cursor")}n.css("cursor",a.cursor)},stop:function(t,r,i){var n=i.options;if(n._cursor){e("body").css("cursor",n._cursor)}}});e.ui.plugin.add("draggable","opacity",{start:function(t,r,i){var n=e(r.helper),a=i.options;if(n.css("opacity")){a._opacity=n.css("opacity")}n.css("opacity",a.opacity)},stop:function(t,r,i){var n=i.options;if(n._opacity){e(r.helper).css("opacity",n._opacity)}}});e.ui.plugin.add("draggable","scroll",{start:function(e,t,r){if(!r.scrollParentNotHidden){r.scrollParentNotHidden=r.helper.scrollParent(false)}if(r.scrollParentNotHidden[0]!==r.document[0]&&r.scrollParentNotHidden[0].tagName!=="HTML"){r.overflowOffset=r.scrollParentNotHidden.offset()}},drag:function(t,r,i){var n=i.options,a=false,o=i.scrollParentNotHidden[0],s=i.document[0];if(o!==s&&o.tagName!=="HTML"){if(!n.axis||n.axis!=="x"){if(i.overflowOffset.top+o.offsetHeight-t.pageY<n.scrollSensitivity){o.scrollTop=a=o.scrollTop+n.scrollSpeed}else if(t.pageY-i.overflowOffset.top<n.scrollSensitivity){o.scrollTop=a=o.scrollTop-n.scrollSpeed}}if(!n.axis||n.axis!=="y"){if(i.overflowOffset.left+o.offsetWidth-t.pageX<n.scrollSensitivity){o.scrollLeft=a=o.scrollLeft+n.scrollSpeed}else if(t.pageX-i.overflowOffset.left<n.scrollSensitivity){o.scrollLeft=a=o.scrollLeft-n.scrollSpeed}}}else{if(!n.axis||n.axis!=="x"){if(t.pageY-e(s).scrollTop()<n.scrollSensitivity){a=e(s).scrollTop(e(s).scrollTop()-n.scrollSpeed)}else if(e(window).height()-(t.pageY-e(s).scrollTop())<n.scrollSensitivity){a=e(s).scrollTop(e(s).scrollTop()+n.scrollSpeed)}}if(!n.axis||n.axis!=="y"){if(t.pageX-e(s).scrollLeft()<n.scrollSensitivity){a=e(s).scrollLeft(e(s).scrollLeft()-n.scrollSpeed)}else if(e(window).width()-(t.pageX-e(s).scrollLeft())<n.scrollSensitivity){a=e(s).scrollLeft(e(s).scrollLeft()+n.scrollSpeed)}}}if(a!==false&&e.ui.ddmanager&&!n.dropBehaviour){e.ui.ddmanager.prepareOffsets(i,t)}}});e.ui.plugin.add("draggable","snap",{start:function(t,r,i){var n=i.options;i.snapElements=[];e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var t=e(this),r=t.offset();if(this!==i.element[0]){i.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:r.top,left:r.left})}})},drag:function(t,r,i){var n,a,o,s,l,u,c,f,h,d,p=i.options,v=p.snapTolerance,g=r.offset.left,m=g+i.helperProportions.width,y=r.offset.top,_=y+i.helperProportions.height;for(h=i.snapElements.length-1;h>=0;h--){l=i.snapElements[h].left-i.margins.left;u=l+i.snapElements[h].width;c=i.snapElements[h].top-i.margins.top;f=c+i.snapElements[h].height;if(m<l-v||g>u+v||_<c-v||y>f+v||!e.contains(i.snapElements[h].item.ownerDocument,i.snapElements[h].item)){if(i.snapElements[h].snapping){i.options.snap.release&&i.options.snap.release.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[h].item}))}i.snapElements[h].snapping=false;continue}if(p.snapMode!=="inner"){n=Math.abs(c-_)<=v;a=Math.abs(f-y)<=v;o=Math.abs(l-m)<=v;s=Math.abs(u-g)<=v;if(n){r.position.top=i._convertPositionTo("relative",{top:c-i.helperProportions.height,left:0}).top}if(a){r.position.top=i._convertPositionTo("relative",{top:f,left:0}).top}if(o){r.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left}if(s){r.position.left=i._convertPositionTo("relative",{top:0,left:u}).left}}d=n||a||o||s;if(p.snapMode!=="outer"){n=Math.abs(c-y)<=v;a=Math.abs(f-_)<=v;o=Math.abs(l-g)<=v;s=Math.abs(u-m)<=v;if(n){r.position.top=i._convertPositionTo("relative",{top:c,left:0}).top}if(a){r.position.top=i._convertPositionTo("relative",{top:f-i.helperProportions.height,left:0}).top}if(o){r.position.left=i._convertPositionTo("relative",{top:0,left:l}).left}if(s){r.position.left=i._convertPositionTo("relative",{top:0,left:u-i.helperProportions.width}).left}}if(!i.snapElements[h].snapping&&(n||a||o||s||d)){i.options.snap.snap&&i.options.snap.snap.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[h].item}))}i.snapElements[h].snapping=n||a||o||s||d}}});e.ui.plugin.add("draggable","stack",{start:function(t,r,i){var n,a=i.options,o=e.makeArray(e(a.stack)).sort(function(t,r){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(r).css("zIndex"),10)||0)});if(!o.length){return}n=parseInt(e(o[0]).css("zIndex"),10)||0;e(o).each(function(t){e(this).css("zIndex",n+t)});this.css("zIndex",n+o.length)}});e.ui.plugin.add("draggable","zIndex",{start:function(t,r,i){var n=e(r.helper),a=i.options;if(n.css("zIndex")){a._zIndex=n.css("zIndex")}n.css("zIndex",a.zIndex)},stop:function(t,r,i){var n=i.options;if(n._zIndex){e(r.helper).css("zIndex",n._zIndex)}}});return e.ui.draggable})},function(e,t){angular.module("gettext",[]);angular.module("gettext").constant("gettext",function(e){return e});angular.module("gettext").factory("gettextCatalog",["gettextPlurals","gettextFallbackLanguage","$http","$cacheFactory","$interpolate","$rootScope",function(e,t,r,i,n,a){var o;var s="$$noContext";var l='<span id="test" title="test" class="tested">test</span>';var u=angular.element("<span>"+l+"</span>").html()!==l;var c=function(e){if(o.debug&&o.currentLanguage!==o.baseLanguage){return o.debugPrefix+e}else{return e}};var f=function(e){if(o.showTranslatedMarkers){return o.translatedMarkerPrefix+e+o.translatedMarkerSuffix}else{return e}};function h(){a.$broadcast("gettextLanguageChanged")}o={debug:false,debugPrefix:"[MISSING]: ",showTranslatedMarkers:false,translatedMarkerPrefix:"[",translatedMarkerSuffix:"]",strings:{},baseLanguage:"en",currentLanguage:"en",cache:i("strings"),setCurrentLanguage:function(e){this.currentLanguage=e;h()},getCurrentLanguage:function(){return this.currentLanguage},setStrings:function(t,r){if(!this.strings[t]){this.strings[t]={}}var i=e(t,1);for(var n in r){var a=r[n];if(u){n=angular.element("<span>"+n+"</span>").html()}if(angular.isString(a)||angular.isArray(a)){var o={};o[s]=a;a=o}if(!this.strings[t][n]){this.strings[t][n]={}}for(var l in a){var c=a[l];if(!angular.isArray(c)){this.strings[t][n][l]=[];this.strings[t][n][l][i]=c}else{this.strings[t][n][l]=c}}}h()},getStringFormFor:function(t,r,i,n){if(!t){return null}var a=this.strings[t]||{};var o=a[r]||{};var l=o[n||s]||[];return l[e(t,i)]},getString:function(e,r,i){var a=t(this.currentLanguage);e=this.getStringFormFor(this.currentLanguage,e,1,i)||this.getStringFormFor(a,e,1,i)||c(e);e=r?n(e)(r):e;return f(e)},getPlural:function(e,r,i,a,o){var s=t(this.currentLanguage);r=this.getStringFormFor(this.currentLanguage,r,e,o)||this.getStringFormFor(s,r,e,o)||c(e===1?r:i);if(a){a.$count=e;r=n(r)(a)}return f(r)},loadRemote:function(e){return r({method:"GET",url:e,cache:o.cache}).then(function(e){var t=e.data;for(var r in t){o.setStrings(r,t[r])}return e})}};return o}]);angular.module("gettext").directive("translate",["gettextCatalog","$parse","$animate","$compile","$window","gettextUtil",function(e,t,r,i,n,a){var o=angular.$$lowercase||angular.lowercase;var s=parseInt((/msie (\d+)/.exec(o(n.navigator.userAgent))||[])[1],10);var l="translateParams";function u(e){return a.lcFirst(e.replace(l,""))}function c(e,t,r){var i=Object.keys(t).filter(function(e){return a.startsWith(e,l)&&e!==l});if(!i.length){return null}var n=angular.extend({},e);var o=[];i.forEach(function(i){var a=e.$watch(t[i],function(e){var t=u(i);n[t]=e;r(n)});o.push(a)});e.$on("$destroy",function(){o.forEach(function(e){e()})});return n}return{restrict:"AE",terminal:true,compile:function n(o,l){a.assert(!l.translatePlural||l.translateN,"translate-n","translate-plural");a.assert(!l.translateN||l.translatePlural,"translate-plural","translate-n");var u=a.trim(o.html());var f=l.translatePlural;var h=l.translateContext;if(s<=8){if(u.slice(-13)==="\x3c!--IE fix--\x3e"){u=u.slice(0,-13)}}return{post:function(n,o,s){var l=t(s.translateN);var d=null;var p=true;function v(t){t=t||null;var s;if(f){n=d||(d=n.$new());n.$count=l(n);s=e.getPlural(n.$count,u,f,t,h)}else{s=e.getString(u,t,h)}var c=o.contents();if(!c&&!s){return}if(s===a.trim(c.html())){if(p){i(c)(n)}return}var v=angular.element("<span>"+s+"</span>");i(v.contents())(n);var g=v.contents();r.enter(g,o);r.leave(c)}var g=c(n,s,v);v(g);p=false;if(s.translateN){n.$watch(s.translateN,function(){v(g)})}n.$on("gettextLanguageChanged",function(){v(g)})}}}}}]);angular.module("gettext").factory("gettextFallbackLanguage",function(){var e={};var t=/([^_]+)_[^_]+$/;return function(r){if(e[r]){return e[r]}var i=t.exec(r);if(i){e[r]=i[1];return i[1]}return null}});angular.module("gettext").filter("translate",["gettextCatalog",function(e){function t(t,r){return e.getString(t,null,r)}t.$stateful=true;return t}]);angular.module("gettext").factory("gettextPlurals",function(){var e={pt_BR:"pt_BR","pt-BR":"pt_BR"};return function(e,r){switch(t(e)){case"ay":case"bo":case"cgg":case"dz":case"fa":case"id":case"ja":case"jbo":case"ka":case"kk":case"km":case"ko":case"ky":case"lo":case"ms":case"my":case"sah":case"su":case"th":case"tt":case"ug":case"vi":case"wo":case"zh":return 0;case"is":return r%10!=1||r%100==11?1:0;case"jv":return r!=0?1:0;case"mk":return r==1||r%10==1?0:1;case"ach":case"ak":case"am":case"arn":case"br":case"fil":case"fr":case"gun":case"ln":case"mfe":case"mg":case"mi":case"oc":case"pt_BR":case"tg":case"ti":case"tr":case"uz":case"wa":case"zh":return r>1?1:0;case"lv":return r%10==1&&r%100!=11?0:r!=0?1:2;case"lt":return r%10==1&&r%100!=11?0:r%10>=2&&(r%100<10||r%100>=20)?1:2;case"be":case"bs":case"hr":case"ru":case"sr":case"uk":return r%10==1&&r%100!=11?0:r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?1:2;case"mnk":return r==0?0:r==1?1:2;case"ro":return r==1?0:r==0||r%100>0&&r%100<20?1:2;case"pl":return r==1?0:r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?1:2;case"cs":case"sk":return r==1?0:r>=2&&r<=4?1:2;case"sl":return r%100==1?1:r%100==2?2:r%100==3||r%100==4?3:0;case"mt":return r==1?0:r==0||r%100>1&&r%100<11?1:r%100>10&&r%100<20?2:3;case"gd":return r==1||r==11?0:r==2||r==12?1:r>2&&r<20?2:3;case"cy":return r==1?0:r==2?1:r!=8&&r!=11?2:3;case"kw":return r==1?0:r==2?1:r==3?2:3;case"ga":return r==1?0:r==2?1:r<7?2:r<11?3:4;case"ar":return r==0?0:r==1?1:r==2?2:r%100>=3&&r%100<=10?3:r%100>=11?4:5;default:return r!=1?1:0}};function t(t){if(!e[t]){e[t]=t.split(/\-|_/).shift()}return e[t]}});angular.module("gettext").factory("gettextUtil",function e(){var t=function(){if(!String.prototype.trim){return function(e){return typeof e==="string"?e.replace(/^\s*/,"").replace(/\s*$/,""):e}}return function(e){return typeof e==="string"?e.trim():e}}();function r(e,t,r){if(!e){throw new Error("You should add a "+t+" attribute whenever you add a "+r+" attribute.")}}function i(e,t){return e.indexOf(t)===0}function n(e){var t=e.charAt(0).toLowerCase();return t+e.substr(1)}return{trim:t,assert:r,startsWith:i,lcFirst:n}})},function(e,t,r){r(538);e.exports="gettext"},function(e,t,r){(function(e){
/**
 * @license AngularJS v1.7.0
 * (c) 2010-2018 Google, Inc. http://angularjs.org
 * License: MIT
 */
(function(t){"use strict";var r={objectMaxDepth:5};function i(e){if(U(e)){if(G(e.objectMaxDepth)){r.objectMaxDepth=n(e.objectMaxDepth)?e.objectMaxDepth:NaN}}else{return r}}function n(e){return W(e)&&e>0}function a(e,t){t=t||Error;var i="https://errors.angularjs.org/1.7.0/";var n=i.replace(".","\\.")+"[\\s\\S]*";var a=new RegExp(n,"g");return function(){var n=arguments[0],o=arguments[1],s="["+(e?e+":":"")+n+"] ",l=_e(arguments,2).map(function(e){return lt(e,r.objectMaxDepth)}),u,c;s+=o.replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1);if(t<l.length){return l[t].replace(a,"")}return e});s+="\n"+i+(e?e+"/":"")+n;for(c=0,u="?";c<l.length;c++,u="&"){s+=u+"p"+c+"="+encodeURIComponent(l[c])}return new t(s)}}var o=/^\/(.+)\/([a-z]*)$/;var s="validity";var l=Object.prototype.hasOwnProperty;var u=function(e){return Y(e)?e.toLowerCase():e};var c=function(e){return Y(e)?e.toUpperCase():e};var f,h,d,p=[].slice,v=[].splice,g=[].push,m=Object.prototype.toString,y=Object.getPrototypeOf,_=a("ng"),b=t.angular||(t.angular={}),w,S=0;f=t.document.documentMode;function C(e){if(e==null||K(e))return false;if(z(e)||Y(e)||h&&e instanceof h)return true;var t="length"in Object(e)&&e.length;return W(t)&&(t>=0&&t-1 in e||typeof e.item==="function")}function x(e,t,r){var i,n;if(e){if(B(e)){for(i in e){if(i!=="prototype"&&i!=="length"&&i!=="name"&&e.hasOwnProperty(i)){t.call(r,e[i],i,e)}}}else if(z(e)||C(e)){var a=typeof e!=="object";for(i=0,n=e.length;i<n;i++){if(a||i in e){t.call(r,e[i],i,e)}}}else if(e.forEach&&e.forEach!==x){e.forEach(t,r,e)}else if(H(e)){for(i in e){t.call(r,e[i],i,e)}}else if(typeof e.hasOwnProperty==="function"){for(i in e){if(e.hasOwnProperty(i)){t.call(r,e[i],i,e)}}}else{for(i in e){if(l.call(e,i)){t.call(r,e[i],i,e)}}}}return e}function O(e,t,r){var i=Object.keys(e).sort();for(var n=0;n<i.length;n++){t.call(r,e[i[n]],i[n])}return i}function T(e){return function(t,r){e(r,t)}}function E(){return++S}function M(e,t){if(t){e.$$hashKey=t}else{delete e.$$hashKey}}function j(e,t,r){var i=e.$$hashKey;for(var n=0,a=t.length;n<a;++n){var o=t[n];if(!U(o)&&!B(o))continue;var s=Object.keys(o);for(var l=0,u=s.length;l<u;l++){var c=s[l];var f=o[c];if(r&&U(f)){if(V(f)){e[c]=new Date(f.valueOf())}else if(X(f)){e[c]=new RegExp(f)}else if(f.nodeName){e[c]=f.cloneNode(true)}else if(le(f)){e[c]=f.clone()}else{if(!U(e[c]))e[c]=z(f)?[]:{};j(e[c],[f],true)}}else{e[c]=f}}}M(e,i);return e}function A(e){return j(e,p.call(arguments,1),false)}function P(e){return j(e,p.call(arguments,1),true)}function k(e){return parseInt(e,10)}var I=Number.isNaN||function e(t){return t!==t};function D(e,t){return A(Object.create(e),t)}function R(){}R.$inject=[];function L(e){return e}L.$inject=[];function $(e){return function t(){return e}}function N(e){return B(e.toString)&&e.toString!==m}function F(e){return typeof e==="undefined"}function G(e){return typeof e!=="undefined"}function U(e){return e!==null&&typeof e==="object"}function H(e){return e!==null&&typeof e==="object"&&!y(e)}function Y(e){return typeof e==="string"}function W(e){return typeof e==="number"}function V(e){return m.call(e)==="[object Date]"}function z(e){return Array.isArray(e)||e instanceof Array}function q(e){var t=m.call(e);switch(t){case"[object Error]":return true;case"[object Exception]":return true;case"[object DOMException]":return true;default:return e instanceof Error}}function B(e){return typeof e==="function"}function X(e){return m.call(e)==="[object RegExp]"}function K(e){return e&&e.window===e}function Z(e){return e&&e.$evalAsync&&e.$watch}function Q(e){return m.call(e)==="[object File]"}function J(e){return m.call(e)==="[object FormData]"}function ee(e){return m.call(e)==="[object Blob]"}function te(e){return typeof e==="boolean"}function re(e){return e&&B(e.then)}var ie=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/;function ne(e){return e&&W(e.length)&&ie.test(m.call(e))}function ae(e){return m.call(e)==="[object ArrayBuffer]"}var oe=function(e){return Y(e)?e.trim():e};var se=function(e){return e.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function le(e){return!!(e&&(e.nodeName||e.prop&&e.attr&&e.find))}function ue(e){var t={},r=e.split(","),i;for(i=0;i<r.length;i++){t[r[i]]=true}return t}function ce(e){return u(e.nodeName||e[0]&&e[0].nodeName)}function fe(e,t){return Array.prototype.indexOf.call(e,t)!==-1}function he(e,t){var r=e.indexOf(t);if(r>=0){e.splice(r,1)}return r}function de(e,t,r){var i=[];var a=[];r=n(r)?r:NaN;if(t){if(ne(t)||ae(t)){throw _("cpta","Can't copy! TypedArray destination cannot be mutated.")}if(e===t){throw _("cpi","Can't copy! Source and destination are identical.")}if(z(t)){t.length=0}else{x(t,function(e,r){if(r!=="$$hashKey"){delete t[r]}})}i.push(e);a.push(t);return o(e,t,r)}return s(e,r);function o(e,t,r){r--;if(r<0){return"..."}var i=t.$$hashKey;var n;if(z(e)){for(var a=0,o=e.length;a<o;a++){t.push(s(e[a],r))}}else if(H(e)){for(n in e){t[n]=s(e[n],r)}}else if(e&&typeof e.hasOwnProperty==="function"){for(n in e){if(e.hasOwnProperty(n)){t[n]=s(e[n],r)}}}else{for(n in e){if(l.call(e,n)){t[n]=s(e[n],r)}}}M(t,i);return t}function s(e,t){if(!U(e)){return e}var r=i.indexOf(e);if(r!==-1){return a[r]}if(K(e)||Z(e)){throw _("cpws","Can't copy! Making copies of Window or Scope instances is not supported.")}var n=false;var s=u(e);if(s===undefined){s=z(e)?[]:Object.create(y(e));n=true}i.push(e);a.push(s);return n?o(e,s,t):s}function u(e){switch(m.call(e)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new e.constructor(s(e.buffer),e.byteOffset,e.length);case"[object ArrayBuffer]":if(!e.slice){var t=new ArrayBuffer(e.byteLength);new Uint8Array(t).set(new Uint8Array(e));return t}return e.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new e.constructor(e.valueOf());case"[object RegExp]":var r=new RegExp(e.source,e.toString().match(/[^/]*$/)[0]);r.lastIndex=e.lastIndex;return r;case"[object Blob]":return new e.constructor([e],{type:e.type})}if(B(e.cloneNode)){return e.cloneNode(true)}}}function pe(e,t){return e===t||e!==e&&t!==t}function ve(e,t){if(e===t)return true;if(e===null||t===null)return false;if(e!==e&&t!==t)return true;var r=typeof e,i=typeof t,n,a,o;if(r===i&&r==="object"){if(z(e)){if(!z(t))return false;if((n=e.length)===t.length){for(a=0;a<n;a++){if(!ve(e[a],t[a]))return false}return true}}else if(V(e)){if(!V(t))return false;return pe(e.getTime(),t.getTime())}else if(X(e)){if(!X(t))return false;return e.toString()===t.toString()}else{if(Z(e)||Z(t)||K(e)||K(t)||z(t)||V(t)||X(t))return false;o=Ze();for(a in e){if(a.charAt(0)==="$"||B(e[a]))continue;if(!ve(e[a],t[a]))return false;o[a]=true}for(a in t){if(!(a in o)&&a.charAt(0)!=="$"&&G(t[a])&&!B(t[a]))return false}return true}}return false}var ge=function(){if(!G(ge.rules)){var e=t.document.querySelector("[ng-csp]")||t.document.querySelector("[data-ng-csp]");if(e){var r=e.getAttribute("ng-csp")||e.getAttribute("data-ng-csp");ge.rules={noUnsafeEval:!r||r.indexOf("no-unsafe-eval")!==-1,noInlineStyle:!r||r.indexOf("no-inline-style")!==-1}}else{ge.rules={noUnsafeEval:i(),noInlineStyle:false}}}return ge.rules;function i(){try{new Function("");return false}catch(e){return true}}};var me=function(){if(G(me.name_))return me.name_;var e;var r,i=De.length,n,a;for(r=0;r<i;++r){n=De[r];e=t.document.querySelector("["+n.replace(":","\\:")+"jq]");if(e){a=e.getAttribute(n+"jq");break}}return me.name_=a};function ye(e,t,r){return e.concat(p.call(t,r))}function _e(e,t){return p.call(e,t||0)}function be(e,t){var r=arguments.length>2?_e(arguments,2):[];if(B(t)&&!(t instanceof RegExp)){return r.length?function(){return arguments.length?t.apply(e,ye(r,arguments,0)):t.apply(e,r)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}else{return t}}function we(e,r){var i=r;if(typeof e==="string"&&e.charAt(0)==="$"&&e.charAt(1)==="$"){i=undefined}else if(K(r)){i="$WINDOW"}else if(r&&t.document===r){i="$DOCUMENT"}else if(Z(r)){i="$SCOPE"}return i}function Se(e,t){if(F(e))return undefined;if(!W(t)){t=t?2:null}return JSON.stringify(e,we,t)}function Ce(e){return Y(e)?JSON.parse(e):e}var xe=/:/g;function Oe(e,t){e=e.replace(xe,"");var r=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return I(r)?t:r}function Te(e,t){e=new Date(e.getTime());e.setMinutes(e.getMinutes()+t);return e}function Ee(e,t,r){r=r?-1:1;var i=e.getTimezoneOffset();var n=Oe(t,i);return Te(e,r*(n-i))}function Me(e){e=h(e).clone().empty();var t=h("<div></div>").append(e).html();try{return e[0].nodeType===tt?u(t):t.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(e,t){return"<"+u(t)})}catch(e){return u(t)}}function je(e){try{return decodeURIComponent(e)}catch(e){}}function Ae(e){var t={};x((e||"").split("&"),function(e){var r,i,n;if(e){i=e=e.replace(/\+/g,"%20");r=e.indexOf("=");if(r!==-1){i=e.substring(0,r);n=e.substring(r+1)}i=je(i);if(G(i)){n=G(n)?je(n):true;if(!l.call(t,i)){t[i]=n}else if(z(t[i])){t[i].push(n)}else{t[i]=[t[i],n]}}}});return t}function Pe(e){var t=[];x(e,function(e,r){if(z(e)){x(e,function(e){t.push(Ie(r,true)+(e===true?"":"="+Ie(e,true)))})}else{t.push(Ie(r,true)+(e===true?"":"="+Ie(e,true)))}});return t.length?t.join("&"):""}function ke(e){return Ie(e,true).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Ie(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}var De=["ng-","data-ng-","ng:","x-ng-"];function Re(e,t){var r,i,n=De.length;for(i=0;i<n;++i){r=De[i]+t;if(Y(r=e.getAttribute(r))){return r}}return null}function Le(e){var r=e.currentScript;if(!r){return true}if(!(r instanceof t.HTMLScriptElement||r instanceof t.SVGScriptElement)){return false}var i=r.attributes;var n=[i.getNamedItem("src"),i.getNamedItem("href"),i.getNamedItem("xlink:href")];return n.every(function(t){if(!t){return true}if(!t.value){return false}var r=e.createElement("a");r.href=t.value;if(e.location.origin===r.origin){return true}switch(r.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return true;default:return false}})}var $e=Le(t.document);function Ne(e,r){var i,n,a={};x(De,function(t){var r=t+"app";if(!i&&e.hasAttribute&&e.hasAttribute(r)){i=e;n=e.getAttribute(r)}});x(De,function(t){var r=t+"app";var a;if(!i&&(a=e.querySelector("["+r.replace(":","\\:")+"]"))){i=a;n=a.getAttribute(r)}});if(i){if(!$e){t.console.error("AngularJS: disabling automatic bootstrap. <script> protocol indicates "+"an extension, document.location.href does not match.");return}a.strictDi=Re(i,"strict-di")!==null;r(i,n?[n]:[],a)}}function Fe(e,r,i){if(!U(i))i={};var n={strictDi:false};i=A(n,i);var a=function(){e=h(e);if(e.injector()){var n=e[0]===t.document?"document":Me(e);throw _("btstrpd","App already bootstrapped with this element '{0}'",n.replace(/</,"&lt;").replace(/>/,"&gt;"))}r=r||[];r.unshift(["$provide",function(t){t.value("$rootElement",e)}]);if(i.debugInfoEnabled){r.push(["$compileProvider",function(e){e.debugInfoEnabled(true)}])}r.unshift("ng");var a=Cr(r,i.strictDi);a.invoke(["$rootScope","$rootElement","$compile","$injector",function e(t,r,i,n){t.$apply(function(){r.data("$injector",n);i(r)(t)})}]);return a};var o=/^NG_ENABLE_DEBUG_INFO!/;var s=/^NG_DEFER_BOOTSTRAP!/;if(t&&o.test(t.name)){i.debugInfoEnabled=true;t.name=t.name.replace(o,"")}if(t&&!s.test(t.name)){return a()}t.name=t.name.replace(s,"");b.resumeBootstrap=function(e){x(e,function(e){r.push(e)});return a()};if(B(b.resumeDeferredBootstrap)){b.resumeDeferredBootstrap()}}function Ge(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name;t.location.reload()}function Ue(e){var t=b.element(e).injector();if(!t){throw _("test","no injector found for element argument to getTestability")}return t.get("$$testability")}var He=/[A-Z]/g;function Ye(e,t){t=t||"_";return e.replace(He,function(e,r){return(r?t:"")+e.toLowerCase()})}var We=false;function Ve(){var r;if(We){return}var i=me();d=F(i)?e:!i?undefined:t[i];if(d&&d.fn.on){h=d;A(d.fn,{scope:Qt.scope,isolateScope:Qt.isolateScope,controller:Qt.controller,injector:Qt.injector,inheritedData:Qt.inheritedData})}else{h=It}r=h.cleanData;h.cleanData=function(e){var t;for(var i=0,n;(n=e[i])!=null;i++){t=h._data(n).events;if(t&&t.$destroy){h(n).triggerHandler("$destroy")}}r(e)};b.element=h;We=true}function ze(e,t,r){if(!e){throw _("areq","Argument '{0}' is {1}",t||"?",r||"required")}return e}function qe(e,t,r){if(r&&z(e)){e=e[e.length-1]}ze(B(e),t,"not a function, got "+(e&&typeof e==="object"?e.constructor.name||"Object":typeof e));return e}function Be(e,t){if(e==="hasOwnProperty"){throw _("badname","hasOwnProperty is not a valid {0} name",t)}}function Xe(e,t,r){if(!t)return e;var i=t.split(".");var n;var a=e;var o=i.length;for(var s=0;s<o;s++){n=i[s];if(e){e=(a=e)[n]}}if(!r&&B(e)){return be(a,e)}return e}function Ke(e){var t=e[0];var r=e[e.length-1];var i;for(var n=1;t!==r&&(t=t.nextSibling);n++){if(i||e[n]!==t){if(!i){i=h(p.call(e,0,n))}i.push(t)}}return i||e}function Ze(){return Object.create(null)}function Qe(e){if(e==null){return""}switch(typeof e){case"string":break;case"number":e=""+e;break;default:if(N(e)&&!z(e)&&!V(e)){e=e.toString()}else{e=Se(e)}}return e}var Je=1;var et=2;var tt=3;var rt=8;var it=9;var nt=11;function at(e){var t=a("$injector");var r=a("ng");function i(e,t,r){return e[t]||(e[t]=r())}var n=i(e,"angular",Object);n.$$minErr=n.$$minErr||a;return i(n,"module",function(){var e={};return function n(a,o,s){var l={};var u=function(e,t){if(e==="hasOwnProperty"){throw r("badname","hasOwnProperty is not a valid {0} name",t)}};u(a,"module");if(o&&e.hasOwnProperty(a)){e[a]=null}return i(e,a,function(){if(!o){throw t("nomod","Module '{0}' is not available! You either misspelled "+"the module name or forgot to load it. If registering a module ensure that you "+"specify the dependencies as the second argument.",a)}var e=[];var i=[];var n=[];var u=f("$injector","invoke","push",i);var c={_invokeQueue:e,_configBlocks:i,_runBlocks:n,info:function(e){if(G(e)){if(!U(e))throw r("aobj","Argument '{0}' must be an object","value");l=e;return this}return l},requires:o,name:a,provider:h("$provide","provider"),factory:h("$provide","factory"),service:h("$provide","service"),value:f("$provide","value"),constant:f("$provide","constant","unshift"),decorator:h("$provide","decorator",i),animation:h("$animateProvider","register"),filter:h("$filterProvider","register"),controller:h("$controllerProvider","register"),directive:h("$compileProvider","directive"),component:h("$compileProvider","component"),config:u,run:function(e){n.push(e);return this}};if(s){u(s)}return c;function f(t,r,i,n){if(!n)n=e;return function(){n[i||"push"]([t,r,arguments]);return c}}function h(t,r,i){if(!i)i=e;return function(e,n){if(n&&B(n))n.$$moduleName=a;i.push([t,r,arguments]);return c}}})}})}function ot(e,t){if(z(e)){t=t||[];for(var r=0,i=e.length;r<i;r++){t[r]=e[r]}}else if(U(e)){t=t||{};for(var n in e){if(!(n.charAt(0)==="$"&&n.charAt(1)==="$")){t[n]=e[n]}}}return t||e}function st(e,t){var r=[];if(n(t)){e=b.copy(e,null,t)}return JSON.stringify(e,function(e,t){t=we(e,t);if(U(t)){if(r.indexOf(t)>=0)return"...";r.push(t)}return t})}function lt(e,t){if(typeof e==="function"){return e.toString().replace(/ \{[\s\S]*$/,"")}else if(F(e)){return"undefined"}else if(typeof e!=="string"){return st(e,t)}return e}var ut={full:"1.7.0",major:1,minor:7,dot:0,codeName:"nonexistent-physiology"};function ct(e){A(e,{errorHandlingConfig:i,bootstrap:Fe,copy:de,extend:A,merge:P,equals:ve,element:h,forEach:x,injector:Cr,noop:R,bind:be,toJson:Se,fromJson:Ce,identity:L,isUndefined:F,isDefined:G,isString:Y,isFunction:B,isObject:U,isNumber:W,isElement:le,isArray:z,version:ut,isDate:V,callbacks:{$$counter:0},getTestability:Ue,reloadWithDebugInfo:Ge,$$minErr:a,$$csp:ge,$$encodeUriSegment:ke,$$encodeUriQuery:Ie,$$lowercase:u,$$stringify:Qe,$$uppercase:c});w=at(t);w("ng",["ngLocale"],["$provide",function e(t){t.provider({$$sanitizeUri:In});t.provider("$compile",Vr).directive({a:Ga,input:Po,textarea:Po,form:Ba,script:As,select:Ds,option:Rs,ngBind:Do,ngBindHtml:Lo,ngBindTemplate:Ro,ngClass:Fo,ngClassEven:Uo,ngClassOdd:Go,ngCloak:Ho,ngController:Yo,ngForm:Xa,ngHide:Cs,ngIf:zo,ngInclude:qo,ngInit:Xo,ngNonBindable:ps,ngPluralize:ys,ngRepeat:_s,ngShow:Ss,ngStyle:xs,ngSwitch:Os,ngSwitchWhen:Ts,ngSwitchDefault:Es,ngOptions:ms,ngTransclude:js,ngModel:ls,ngList:Ko,ngChange:$o,pattern:$s,ngPattern:$s,required:Ls,ngRequired:Ls,minlength:Fs,ngMinlength:Fs,maxlength:Ns,ngMaxlength:Ns,ngValue:Io,ngModelOptions:hs}).directive({ngInclude:Bo}).directive(Ua).directive(Wo);t.provider({$anchorScroll:xr,$animate:Dr,$animateCss:$r,$$animateJs:kr,$$animateQueue:Ir,$$AnimateRunner:Lr,$$animateAsyncRun:Rr,$browser:Fr,$cacheFactory:Gr,$controller:ii,$document:ni,$$isDocumentHidden:ai,$exceptionHandler:oi,$filter:oa,$$forceReflow:si,$interpolate:Mi,$interval:Ai,$http:Ci,$httpParamSerializer:vi,$httpParamSerializerJQLike:gi,$httpBackend:Oi,$xhrFactory:xi,$jsonpCallbacks:Pi,$location:Qi,$log:Ji,$parse:xn,$rootScope:kn,$q:On,$$q:Tn,$sce:Un,$sceDelegate:Gn,$sniffer:Hn,$templateCache:Ur,$templateRequest:Wn,$$testability:Vn,$timeout:qn,$window:ia,$$rAF:Pn,$$jqLite:sr,$$Map:hr,$$cookieReader:aa})}]).info({angularVersion:"1.7.0"})}It.expando="ng339";var ft=It.cache={},ht=1;It._data=function(e){return this.cache[e[this.expando]]||{}};function dt(){return++ht}var pt=/-([a-z])/g;var vt=/^-ms-/;var gt={mouseleave:"mouseout",mouseenter:"mouseover"};var mt=a("jqLite");function yt(e){return bt(e.replace(vt,"ms-"))}function _t(e,t){return t.toUpperCase()}function bt(e){return e.replace(pt,_t)}var wt=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/;var St=/<|&#?\w+;/;var Ct=/<([\w:-]+)/;var xt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi;var Ot={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ot.optgroup=Ot.option;Ot.tbody=Ot.tfoot=Ot.colgroup=Ot.caption=Ot.thead;Ot.th=Ot.td;function Tt(e){return!St.test(e)}function Et(e){var t=e.nodeType;return t===Je||!t||t===it}function Mt(e){for(var t in ft[e.ng339]){return true}return false}function jt(e,t){var r,i,n,a=t.createDocumentFragment(),o=[],s;if(Tt(e)){o.push(t.createTextNode(e))}else{r=a.appendChild(t.createElement("div"));i=(Ct.exec(e)||["",""])[1].toLowerCase();n=Ot[i]||Ot._default;r.innerHTML=n[1]+e.replace(xt,"<$1></$2>")+n[2];s=n[0];while(s--){r=r.lastChild}o=ye(o,r.childNodes);r=a.firstChild;r.textContent=""}a.textContent="";a.innerHTML="";x(o,function(e){a.appendChild(e)});return a}function At(e,r){r=r||t.document;var i;if(i=wt.exec(e)){return[r.createElement(i[1])]}if(i=jt(e,r)){return i.childNodes}return[]}function Pt(e,t){var r=e.parentNode;if(r){r.replaceChild(t,e)}t.appendChild(e)}var kt=t.Node.prototype.contains||function(e){return!!(this.compareDocumentPosition(e)&16)};function It(e){if(e instanceof It){return e}var t;if(Y(e)){e=oe(e);t=true}if(!(this instanceof It)){if(t&&e.charAt(0)!=="<"){throw mt("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element")}return new It(e)}if(t){Vt(this,At(e))}else if(B(e)){Zt(e)}else{Vt(this,e)}}function Dt(e){return e.cloneNode(true)}function Rt(e,t){if(!t&&Et(e))h.cleanData([e]);if(e.querySelectorAll){h.cleanData(e.querySelectorAll("*"))}}function Lt(e){var t;for(t in e){return false}return true}function $t(e){var t=e.ng339;var r=t&&ft[t];var i=r&&r.events;var n=r&&r.data;if((!n||Lt(n))&&(!i||Lt(i))){delete ft[t];e.ng339=undefined}}function Nt(e,t,r,i){if(G(i))throw mt("offargs","jqLite#off() does not support the `selector` argument");var n=Gt(e);var a=n&&n.events;var o=n&&n.handle;if(!o)return;if(!t){for(t in a){if(t!=="$destroy"){e.removeEventListener(t,o)}delete a[t]}}else{var s=function(t){var i=a[t];if(G(r)){he(i||[],r)}if(!(G(r)&&i&&i.length>0)){e.removeEventListener(t,o);delete a[t]}};x(t.split(" "),function(e){s(e);if(gt[e]){s(gt[e])}})}$t(e)}function Ft(e,t){var r=e.ng339;var i=r&&ft[r];if(i){if(t){delete i.data[t]}else{i.data={}}$t(e)}}function Gt(e,t){var r=e.ng339,i=r&&ft[r];if(t&&!i){e.ng339=r=dt();i=ft[r]={events:{},data:{},handle:undefined}}return i}function Ut(e,t,r){if(Et(e)){var i;var n=G(r);var a=!n&&t&&!U(t);var o=!t;var s=Gt(e,!a);var l=s&&s.data;if(n){l[bt(t)]=r}else{if(o){return l}else{if(a){return l&&l[bt(t)]}else{for(i in t){l[bt(i)]=t[i]}}}}}}function Ht(e,t){if(!e.getAttribute)return false;return(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1}function Yt(e,t){if(t&&e.setAttribute){var r=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");var i=r;x(t.split(" "),function(e){e=oe(e);i=i.replace(" "+e+" "," ")});if(i!==r){e.setAttribute("class",oe(i))}}}function Wt(e,t){if(t&&e.setAttribute){var r=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");var i=r;x(t.split(" "),function(e){e=oe(e);if(i.indexOf(" "+e+" ")===-1){i+=e+" "}});if(i!==r){e.setAttribute("class",oe(i))}}}function Vt(e,t){if(t){if(t.nodeType){e[e.length++]=t}else{var r=t.length;if(typeof r==="number"&&t.window!==t){if(r){for(var i=0;i<r;i++){e[e.length++]=t[i]}}}else{e[e.length++]=t}}}}function zt(e,t){return qt(e,"$"+(t||"ngController")+"Controller")}function qt(e,t,r){if(e.nodeType===it){e=e.documentElement}var i=z(t)?t:[t];while(e){for(var n=0,a=i.length;n<a;n++){if(G(r=h.data(e,i[n])))return r}e=e.parentNode||e.nodeType===nt&&e.host}}function Bt(e){Rt(e,true);while(e.firstChild){e.removeChild(e.firstChild)}}function Xt(e,t){if(!t)Rt(e);var r=e.parentNode;if(r)r.removeChild(e)}function Kt(e,r){r=r||t;if(r.document.readyState==="complete"){r.setTimeout(e)}else{h(r).on("load",e)}}function Zt(e){function r(){t.document.removeEventListener("DOMContentLoaded",r);t.removeEventListener("load",r);e()}if(t.document.readyState==="complete"){t.setTimeout(e)}else{t.document.addEventListener("DOMContentLoaded",r);t.addEventListener("load",r)}}var Qt=It.prototype={ready:Zt,toString:function(){var e=[];x(this,function(t){e.push(""+t)});return"["+e.join(", ")+"]"},eq:function(e){return e>=0?h(this[e]):h(this[this.length+e])},length:0,push:g,sort:[].sort,splice:[].splice};var Jt={};x("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){Jt[u(e)]=e});var er={};x("input,select,option,textarea,button,form,details".split(","),function(e){er[e]=true});var tr={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};function rr(e,t){var r=Jt[t.toLowerCase()];return r&&er[ce(e)]&&r}function ir(e){return tr[e]}x({data:Ut,removeData:Ft,hasData:Mt,cleanData:function e(t){for(var r=0,i=t.length;r<i;r++){Ft(t[r]);Nt(t[r])}}},function(e,t){It[t]=e});x({data:Ut,inheritedData:qt,scope:function(e){return h.data(e,"$scope")||qt(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return h.data(e,"$isolateScope")||h.data(e,"$isolateScopeNoTemplate")},controller:zt,injector:function(e){return qt(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:Ht,css:function(e,t,r){t=yt(t);if(G(r)){e.style[t]=r}else{return e.style[t]}},attr:function(e,t,r){var i;var n=e.nodeType;if(n===tt||n===et||n===rt||!e.getAttribute){return}var a=u(t);var o=Jt[a];if(G(r)){if(r===null||r===false&&o){e.removeAttribute(t)}else{e.setAttribute(t,o?a:r)}}else{i=e.getAttribute(t);if(o&&i!==null){i=a}return i===null?undefined:i}},prop:function(e,t,r){if(G(r)){e[t]=r}else{return e[t]}},text:function(){e.$dv="";return e;function e(e,t){if(F(t)){var r=e.nodeType;return r===Je||r===tt?e.textContent:""}e.textContent=t}}(),val:function(e,t){if(F(t)){if(e.multiple&&ce(e)==="select"){var r=[];x(e.options,function(e){if(e.selected){r.push(e.value||e.text)}});return r}return e.value}e.value=t},html:function(e,t){if(F(t)){return e.innerHTML}Rt(e,true);e.innerHTML=t},empty:Bt},function(e,t){It.prototype[t]=function(t,r){var i,n;var a=this.length;if(e!==Bt&&F(e.length===2&&(e!==Ht&&e!==zt)?t:r)){if(U(t)){for(i=0;i<a;i++){if(e===Ut){e(this[i],t)}else{for(n in t){e(this[i],n,t[n])}}}return this}else{var o=e.$dv;var s=F(o)?Math.min(a,1):a;for(var l=0;l<s;l++){var u=e(this[l],t,r);o=o?o+u:u}return o}}else{for(i=0;i<a;i++){e(this[i],t,r)}return this}}});function nr(e,t){var r=function(r,i){r.isDefaultPrevented=function(){return r.defaultPrevented};var n=t[i||r.type];var a=n?n.length:0;if(!a)return;if(F(r.immediatePropagationStopped)){var o=r.stopImmediatePropagation;r.stopImmediatePropagation=function(){r.immediatePropagationStopped=true;if(r.stopPropagation){r.stopPropagation()}if(o){o.call(r)}}}r.isImmediatePropagationStopped=function(){return r.immediatePropagationStopped===true};var s=n.specialHandlerWrapper||ar;if(a>1){n=ot(n)}for(var l=0;l<a;l++){if(!r.isImmediatePropagationStopped()){s(e,r,n[l])}}};r.elem=e;return r}function ar(e,t,r){r.call(e,t)}function or(e,t,r){var i=t.relatedTarget;if(!i||i!==e&&!kt.call(e,i)){r.call(e,t)}}x({removeData:Ft,on:function e(t,r,i,n){if(G(n))throw mt("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(!Et(t)){return}var a=Gt(t,true);var o=a.events;var s=a.handle;if(!s){s=a.handle=nr(t,o)}var l=r.indexOf(" ")>=0?r.split(" "):[r];var u=l.length;var c=function(e,r,n){var a=o[e];if(!a){a=o[e]=[];a.specialHandlerWrapper=r;if(e!=="$destroy"&&!n){t.addEventListener(e,s)}}a.push(i)};while(u--){r=l[u];if(gt[r]){c(gt[r],or);c(r,undefined,true)}else{c(r)}}},off:Nt,one:function(e,t,r){e=h(e);e.on(t,function i(){e.off(t,r);e.off(t,i)});e.on(t,r)},replaceWith:function(e,t){var r,i=e.parentNode;Rt(e);x(new It(t),function(t){if(r){i.insertBefore(t,r.nextSibling)}else{i.replaceChild(t,e)}r=t})},children:function(e){var t=[];x(e.childNodes,function(e){if(e.nodeType===Je){t.push(e)}});return t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var r=e.nodeType;if(r!==Je&&r!==nt)return;t=new It(t);for(var i=0,n=t.length;i<n;i++){var a=t[i];e.appendChild(a)}},prepend:function(e,t){if(e.nodeType===Je){var r=e.firstChild;x(new It(t),function(t){e.insertBefore(t,r)})}},wrap:function(e,t){Pt(e,h(t).eq(0).clone()[0])},remove:Xt,detach:function(e){Xt(e,true)},after:function(e,t){var r=e,i=e.parentNode;if(i){t=new It(t);for(var n=0,a=t.length;n<a;n++){var o=t[n];i.insertBefore(o,r.nextSibling);r=o}}},addClass:Wt,removeClass:Yt,toggleClass:function(e,t,r){if(t){x(t.split(" "),function(t){var i=r;if(F(i)){i=!Ht(e,t)}(i?Wt:Yt)(e,t)})}},parent:function(e){var t=e.parentNode;return t&&t.nodeType!==nt?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){if(e.getElementsByTagName){return e.getElementsByTagName(t)}else{return[]}},clone:Dt,triggerHandler:function(e,t,r){var i,n,a;var o=t.type||t;var s=Gt(e);var l=s&&s.events;var u=l&&l[o];if(u){i={preventDefault:function(){this.defaultPrevented=true},isDefaultPrevented:function(){return this.defaultPrevented===true},stopImmediatePropagation:function(){this.immediatePropagationStopped=true},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===true},stopPropagation:R,type:o,target:e};if(t.type){i=A(i,t)}n=ot(u);a=r?[i].concat(r):[i];x(n,function(t){if(!i.isImmediatePropagationStopped()){t.apply(e,a)}})}}},function(e,t){It.prototype[t]=function(t,r,i){var n;for(var a=0,o=this.length;a<o;a++){if(F(n)){n=e(this[a],t,r,i);if(G(n)){n=h(n)}}else{Vt(n,e(this[a],t,r,i))}}return G(n)?n:this}});It.prototype.bind=It.prototype.on;It.prototype.unbind=It.prototype.off;function sr(){this.$get=function e(){return A(It,{hasClass:function(e,t){if(e.attr)e=e[0];return Ht(e,t)},addClass:function(e,t){if(e.attr)e=e[0];return Wt(e,t)},removeClass:function(e,t){if(e.attr)e=e[0];return Yt(e,t)}})}}function lr(e,t){var r=e&&e.$$hashKey;if(r){if(typeof r==="function"){r=e.$$hashKey()}return r}var i=typeof e;if(i==="function"||i==="object"&&e!==null){r=e.$$hashKey=i+":"+(t||E)()}else{r=i+":"+e}return r}var ur=Object.create(null);function cr(){this._keys=[];this._values=[];this._lastKey=NaN;this._lastIndex=-1}cr.prototype={_idx:function(e){if(e===this._lastKey){return this._lastIndex}this._lastKey=e;this._lastIndex=this._keys.indexOf(e);return this._lastIndex},_transformKey:function(e){return I(e)?ur:e},get:function(e){e=this._transformKey(e);var t=this._idx(e);if(t!==-1){return this._values[t]}},set:function(e,t){e=this._transformKey(e);var r=this._idx(e);if(r===-1){r=this._lastIndex=this._keys.length}this._keys[r]=e;this._values[r]=t},delete:function(e){e=this._transformKey(e);var t=this._idx(e);if(t===-1){return false}this._keys.splice(t,1);this._values.splice(t,1);this._lastKey=NaN;this._lastIndex=-1;return true}};var fr=cr;var hr=[function(){this.$get=[function(){return fr}]}];var dr=/^([^(]+?)=>/;var pr=/^[^(]*\(\s*([^)]*)\)/m;var vr=/,/;var gr=/^\s*(_?)(\S+?)\1\s*$/;var mr=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;var yr=a("$injector");function _r(e){return Function.prototype.toString.call(e)}function br(e){var t=_r(e).replace(mr,""),r=t.match(dr)||t.match(pr);return r}function wr(e){var t=br(e);if(t){return"function("+(t[1]||"").replace(/[\s\r\n]+/," ")+")"}return"fn"}function Sr(e,t,r){var i,n,a;if(typeof e==="function"){if(!(i=e.$inject)){i=[];if(e.length){if(t){if(!Y(r)||!r){r=e.name||wr(e)}throw yr("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",r)}n=br(e);x(n[1].split(vr),function(e){e.replace(gr,function(e,t,r){i.push(r)})})}e.$inject=i}}else if(z(e)){a=e.length-1;qe(e[a],"fn");i=e.slice(0,a)}else{qe(e,"fn",true)}return i}function Cr(e,t){t=t===true;var r={},i="Provider",n=[],a=new fr,o={$provide:{provider:d(p),factory:d(g),service:d(m),value:d(y),constant:d(_),decorator:S}},s=o.$injector=O(o,function(e,t){if(b.isString(t)){n.push(t)}throw yr("unpr","Unknown provider: {0}",n.join(" <- "))}),l={},u=O(l,function(e,t){var r=s.get(e+i,t);return c.invoke(r.$get,r,undefined,e)}),c=u;o["$injector"+i]={$get:$(u)};c.modules=s.modules=Ze();var h=C(e);c=u.get("$injector");c.strictDi=t;x(h,function(e){if(e)c.invoke(e)});c.loadNewModules=function(e){x(C(e),function(e){if(e)c.invoke(e)})};return c;function d(e){return function(t,r){if(U(t)){x(t,T(e))}else{return e(t,r)}}}function p(e,t){Be(e,"service");if(B(t)||z(t)){t=s.instantiate(t)}if(!t.$get){throw yr("pget","Provider '{0}' must define $get factory method.",e)}return o[e+i]=t}function v(e,t){return function r(){var i=c.invoke(t,this);if(F(i)){throw yr("undef","Provider '{0}' must return a value from $get factory method.",e)}return i}}function g(e,t,r){return p(e,{$get:r!==false?v(e,t):t})}function m(e,t){return g(e,["$injector",function(e){return e.instantiate(t)}])}function y(e,t){return g(e,$(t),false)}function _(e,t){Be(e,"constant");o[e]=t;l[e]=t}function S(e,t){var r=s.get(e+i),n=r.$get;r.$get=function(){var e=c.invoke(n,r);return c.invoke(t,null,{$delegate:e})}}function C(e){ze(F(e)||z(e),"modulesToLoad","not an array");var t=[],r;x(e,function(e){if(a.get(e))return;a.set(e,true);function i(e){var t,r;for(t=0,r=e.length;t<r;t++){var i=e[t],n=s.get(i[0]);n[i[1]].apply(n,i[2])}}try{if(Y(e)){r=w(e);c.modules[e]=r;t=t.concat(C(r.requires)).concat(r._runBlocks);i(r._invokeQueue);i(r._configBlocks)}else if(B(e)){t.push(s.invoke(e))}else if(z(e)){t.push(s.invoke(e))}else{qe(e,"module")}}catch(t){if(z(e)){e=e[e.length-1]}if(t.message&&t.stack&&t.stack.indexOf(t.message)===-1){t=t.message+"\n"+t.stack}throw yr("modulerr","Failed to instantiate module {0} due to:\n{1}",e,t.stack||t.message||t)}});return t}function O(e,a){function s(t,i){if(e.hasOwnProperty(t)){if(e[t]===r){throw yr("cdep","Circular dependency found: {0}",t+" <- "+n.join(" <- "))}return e[t]}else{try{n.unshift(t);e[t]=r;e[t]=a(t,i);return e[t]}catch(i){if(e[t]===r){delete e[t]}throw i}finally{n.shift()}}}function l(e,r,i){var n=[],a=Cr.$$annotate(e,t,i);for(var o=0,l=a.length;o<l;o++){var u=a[o];if(typeof u!=="string"){throw yr("itkn","Incorrect injection token! Expected service name as string, got {0}",u)}n.push(r&&r.hasOwnProperty(u)?r[u]:s(u,i))}return n}function u(e){if(f||typeof e!=="function"){return false}var t=e.$$ngIsClass;if(!te(t)){t=e.$$ngIsClass=/^class\b/.test(_r(e))}return t}function c(e,t,r,i){if(typeof r==="string"){i=r;r=null}var n=l(e,r,i);if(z(e)){e=e[e.length-1]}if(!u(e)){return e.apply(t,n)}else{n.unshift(null);return new(Function.prototype.bind.apply(e,n))}}function h(e,t,r){var i=z(e)?e[e.length-1]:e;var n=l(e,t,r);n.unshift(null);return new(Function.prototype.bind.apply(i,n))}return{invoke:c,instantiate:h,get:s,annotate:Cr.$$annotate,has:function(t){return o.hasOwnProperty(t+i)||e.hasOwnProperty(t)}}}}Cr.$$annotate=Sr;function xr(){var e=true;this.disableAutoScrolling=function(){e=false};this.$get=["$window","$location","$rootScope",function(t,r,i){var n=t.document;function a(e){var t=null;Array.prototype.some.call(e,function(e){if(ce(e)==="a"){t=e;return true}});return t}function o(){var e=l.yOffset;if(B(e)){e=e()}else if(le(e)){var r=e[0];var i=t.getComputedStyle(r);if(i.position!=="fixed"){e=0}else{e=r.getBoundingClientRect().bottom}}else if(!W(e)){e=0}return e}function s(e){if(e){e.scrollIntoView();var r=o();if(r){var i=e.getBoundingClientRect().top;t.scrollBy(0,i-r)}}else{t.scrollTo(0,0)}}function l(e){e=Y(e)?e:W(e)?e.toString():r.hash();var t;if(!e)s(null);else if(t=n.getElementById(e))s(t);else if(t=a(n.getElementsByName(e)))s(t);else if(e==="top")s(null)}if(e){i.$watch(function e(){return r.hash()},function e(t,r){if(t===r&&t==="")return;Kt(function(){i.$evalAsync(l)})})}return l}]}var Or=a("$animate");var Tr=1;var Er="ng-animate";function Mr(e,t){if(!e&&!t)return"";if(!e)return t;if(!t)return e;if(z(e))e=e.join(" ");if(z(t))t=t.join(" ");return e+" "+t}function jr(e){for(var t=0;t<e.length;t++){var r=e[t];if(r.nodeType===Tr){return r}}}function Ar(e){if(Y(e)){e=e.split(" ")}var t=Ze();x(e,function(e){if(e.length){t[e]=true}});return t}function Pr(e){return U(e)?e:{}}var kr=function(){this.$get=R};var Ir=function(){var e=new fr;var t=[];this.$get=["$$AnimateRunner","$rootScope",function(r,i){return{enabled:R,on:R,off:R,pin:R,push:function(e,t,i,n){if(n){n()}i=i||{};if(i.from){e.css(i.from)}if(i.to){e.css(i.to)}if(i.addClass||i.removeClass){o(e,i.addClass,i.removeClass)}var a=new r;a.complete();return a}};function n(e,t,r){var i=false;if(t){t=Y(t)?t.split(" "):z(t)?t:[];x(t,function(t){if(t){i=true;e[t]=r}})}return i}function a(){x(t,function(t){var r=e.get(t);if(r){var i=Ar(t.attr("class"));var n="";var a="";x(r,function(e,t){var r=!!i[t];if(e!==r){if(e){n+=(n.length?" ":"")+t}else{a+=(a.length?" ":"")+t}}});x(t,function(e){if(n){Wt(e,n)}if(a){Yt(e,a)}});e.delete(t)}});t.length=0}function o(r,o,s){var l=e.get(r)||{};var u=n(l,o,true);var c=n(l,s,false);if(u||c){e.set(r,l);t.push(r);if(t.length===1){i.$$postDigest(a)}}}}]};var Dr=["$provide",function(e){var t=this;var r=null;var i=null;this.$$registeredAnimations=Object.create(null);this.register=function(r,i){if(r&&r.charAt(0)!=="."){throw Or("notcsel","Expecting class selector starting with '.' got '{0}'.",r)}var n=r+"-animation";t.$$registeredAnimations[r.substr(1)]=n;e.factory(n,i)};this.customFilter=function(e){if(arguments.length===1){i=B(e)?e:null}return i};this.classNameFilter=function(e){if(arguments.length===1){r=e instanceof RegExp?e:null;if(r){var t=new RegExp("[(\\s|\\/)]"+Er+"[(\\s|\\/)]");if(t.test(r.toString())){r=null;throw Or("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',Er)}}}return r};this.$get=["$$animateQueue",function(e){function t(e,t,r){if(r){var i=jr(r);if(i&&!i.parentNode&&!i.previousElementSibling){r=null}}if(r){r.after(e)}else{t.prepend(e)}}return{on:e.on,off:e.off,pin:e.pin,enabled:e.enabled,cancel:function(e){if(e.cancel){e.cancel()}},enter:function(r,i,n,a){i=i&&h(i);n=n&&h(n);i=i||n.parent();t(r,i,n);return e.push(r,"enter",Pr(a))},move:function(r,i,n,a){i=i&&h(i);n=n&&h(n);i=i||n.parent();t(r,i,n);return e.push(r,"move",Pr(a))},leave:function(t,r){return e.push(t,"leave",Pr(r),function(){t.remove()})},addClass:function(t,r,i){i=Pr(i);i.addClass=Mr(i.addclass,r);return e.push(t,"addClass",i)},removeClass:function(t,r,i){i=Pr(i);i.removeClass=Mr(i.removeClass,r);return e.push(t,"removeClass",i)},setClass:function(t,r,i,n){n=Pr(n);n.addClass=Mr(n.addClass,r);n.removeClass=Mr(n.removeClass,i);return e.push(t,"setClass",n)},animate:function(t,r,i,n,a){a=Pr(a);a.from=a.from?A(a.from,r):r;a.to=a.to?A(a.to,i):i;n=n||"ng-inline-animate";a.tempClasses=Mr(a.tempClasses,n);return e.push(t,"animate",a)}}}]}];var Rr=function(){this.$get=["$$rAF",function(e){var t=[];function r(r){t.push(r);if(t.length>1)return;e(function(){for(var e=0;e<t.length;e++){t[e]()}t=[]})}return function(){var e=false;r(function(){e=true});return function(t){if(e){t()}else{r(t)}}}}]};var Lr=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(e,t,r,i,n){var a=0;var o=1;var s=2;l.chain=function(e,t){var r=0;i();function i(){if(r===e.length){t(true);return}e[r](function(e){if(e===false){t(false);return}r++;i()})}};l.all=function(e,t){var r=0;var i=true;x(e,function(e){e.done(n)});function n(n){i=i&&n;if(++r===e.length){t(i)}}};function l(e){this.setHost(e);var t=r();var a=function(e){n(e,0,false)};this._doneCallbacks=[];this._tick=function(e){if(i()){a(e)}else{t(e)}};this._state=0}l.prototype={setHost:function(e){this.host=e||{}},done:function(e){if(this._state===s){e()}else{this._doneCallbacks.push(e)}},progress:R,getPromise:function(){if(!this.promise){var t=this;this.promise=e(function(e,r){t.done(function(t){if(t===false){r()}else{e()}})})}return this.promise},then:function(e,t){return this.getPromise().then(e,t)},catch:function(e){return this.getPromise()["catch"](e)},finally:function(e){return this.getPromise()["finally"](e)},pause:function(){if(this.host.pause){this.host.pause()}},resume:function(){if(this.host.resume){this.host.resume()}},end:function(){if(this.host.end){this.host.end()}this._resolve(true)},cancel:function(){if(this.host.cancel){this.host.cancel()}this._resolve(false)},complete:function(e){var t=this;if(t._state===a){t._state=o;t._tick(function(){t._resolve(e)})}},_resolve:function(e){if(this._state!==s){x(this._doneCallbacks,function(t){t(e)});this._doneCallbacks.length=0;this._state=s}}};return l}]};var $r=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(e,t,r){return function(t,i){var n=i||{};if(!n.$$prepared){n=de(n)}if(n.cleanupStyles){n.from=n.to=null}if(n.from){t.css(n.from);n.from=null}var a,o=new r;return{start:s,end:s};function s(){e(function(){l();if(!a){o.complete()}a=true});return o}function l(){if(n.addClass){t.addClass(n.addClass);n.addClass=null}if(n.removeClass){t.removeClass(n.removeClass);n.removeClass=null}if(n.to){t.css(n.to);n.to=null}}}}]};function Nr(e,t,r,i){var n=this,a=e.location,o=e.history,s=e.setTimeout,l=e.clearTimeout,u={};n.isMock=false;var c=0;var f=[];n.$$completeOutstandingRequest=d;n.$$incOutstandingRequestCount=function(){c++};function d(e){try{e.apply(null,_e(arguments,1))}finally{c--;if(c===0){while(f.length){try{f.pop()()}catch(e){r.error(e)}}}}}function p(e){var t=e.indexOf("#");return t===-1?"":e.substr(t)}n.notifyWhenNoOutstandingRequests=function(e){if(c===0){e()}else{f.push(e)}};var v,g,m=a.href,y=t.find("base"),_=null,b=!i.history?R:function e(){try{return o.state}catch(e){}};T();n.url=function(t,r,s){if(F(s)){s=null}if(a!==e.location)a=e.location;if(o!==e.history)o=e.history;if(t){var l=g===s;if(m===t&&(!i.history||l)){return n}var u=m&&Hi(m)===Hi(t);m=t;g=s;if(i.history&&(!u||!l)){o[r?"replaceState":"pushState"](s,"",t);T()}else{if(!u){_=t}if(r){a.replace(t)}else if(!u){a.href=t}else{a.hash=p(t)}if(a.href!==t){_=t}}if(_){_=t}return n}else{return _||a.href}};n.state=function(){return v};var w=[],S=false;function C(){_=null;E()}var O=null;function T(){v=b();v=F(v)?null:v;if(ve(v,O)){v=O}O=v;g=v}function E(){var e=g;T();if(m===n.url()&&e===v){return}m=n.url();g=v;x(w,function(e){e(n.url(),v)})}n.onUrlChange=function(t){if(!S){if(i.history)h(e).on("popstate",C);h(e).on("hashchange",C);S=true}w.push(t);return t};n.$$applicationDestroyed=function(){h(e).off("hashchange popstate",C)};n.$$checkUrlChange=E;n.baseHref=function(){var e=y.attr("href");return e?e.replace(/^(https?:)?\/\/[^/]*/,""):""};n.defer=function(e,t){var r;c++;r=s(function(){delete u[r];d(e)},t||0);u[r]=true;return r};n.defer.cancel=function(e){if(u[e]){delete u[e];l(e);d(R);return true}return false}}function Fr(){this.$get=["$window","$log","$sniffer","$document",function(e,t,r,i){return new Nr(e,i,t,r)}]}function Gr(){this.$get=function(){var e={};function t(t,r){if(t in e){throw a("$cacheFactory")("iid","CacheId '{0}' is already taken!",t)}var i=0,n=A({},r,{id:t}),o=Ze(),s=r&&r.capacity||Number.MAX_VALUE,l=Ze(),u=null,c=null;return e[t]={put:function(e,t){if(F(t))return;if(s<Number.MAX_VALUE){var r=l[e]||(l[e]={key:e});f(r)}if(!(e in o))i++;o[e]=t;if(i>s){this.remove(c.key)}return t},get:function(e){if(s<Number.MAX_VALUE){var t=l[e];if(!t)return;f(t)}return o[e]},remove:function(e){if(s<Number.MAX_VALUE){var t=l[e];if(!t)return;if(t===u)u=t.p;if(t===c)c=t.n;h(t.n,t.p);delete l[e]}if(!(e in o))return;delete o[e];i--},removeAll:function(){o=Ze();i=0;l=Ze();u=c=null},destroy:function(){o=null;n=null;l=null;delete e[t]},info:function(){return A({},n,{size:i})}};function f(e){if(e!==u){if(!c){c=e}else if(c===e){c=e.n}h(e.n,e.p);h(e,u);u=e;u.n=null}}function h(e,t){if(e!==t){if(e)e.p=t;if(t)t.n=e}}}t.info=function(){var t={};x(e,function(e,r){t[r]=e.info()});return t};t.get=function(t){return e[t]};return t}}function Ur(){this.$get=["$cacheFactory",function(e){return e("templates")}]}var Hr=a("$compile");function Yr(){}var Wr=new Yr;Vr.$inject=["$provide","$$sanitizeUriProvider"];function Vr(e,r){var i={},n="Directive",a=/^\s*directive:\s*([\w-]+)\s+(.*)$/,o=/(([\w-]+)(?::([^;]+))?;?)/,s=ue("ngSrc,ngSrcset,src,srcset"),c=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/;var d=/^(on[a-z]+|formaction)$/;var p=Ze();function v(e,t,r){var i=/^([@&<]|=(\*?))(\??)\s*([\w$]*)$/;var n=Ze();x(e,function(e,a){e=e.trim();if(e in p){n[a]=p[e];return}var o=e.match(i);if(!o){throw Hr("iscp","Invalid {3} for directive '{0}'."+" Definition: {... {1}: '{2}' ...}",t,a,e,r?"controller bindings definition":"isolate scope definition")}n[a]={mode:o[1][0],collection:o[2]==="*",optional:o[3]==="?",attrName:o[4]||a};if(o[4]){p[e]=n[a]}});return n}function g(e,t){var r={isolateScope:null,bindToController:null};if(U(e.scope)){if(e.bindToController===true){r.bindToController=v(e.scope,t,true);r.isolateScope={}}else{r.isolateScope=v(e.scope,t,false)}}if(U(e.bindToController)){r.bindToController=v(e.bindToController,t,true)}if(r.bindToController&&!e.controller){throw Hr("noctrl","Cannot bind to controller without directive '{0}'s controller.",t)}return r}function y(e){var t=e.charAt(0);if(!t||t!==u(t)){throw Hr("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",e)}if(e!==e.trim()){throw Hr("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",e)}}function _(e){var t=e.require||e.controller&&e.name;if(!z(t)&&U(t)){x(t,function(e,r){var i=e.match(c);var n=e.substring(i[0].length);if(!n)t[r]=i[0]+r})}return t}function b(e,t){if(e&&!(Y(e)&&/[EACM]/.test(e))){throw Hr("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",e,t)}return e||"EA"}this.directive=function t(r,a){ze(r,"name");Be(r,"directive");if(Y(r)){y(r);ze(a,"directiveFactory");if(!i.hasOwnProperty(r)){i[r]=[];e.factory(r+n,["$injector","$exceptionHandler",function(e,t){var n=[];x(i[r],function(i,a){try{var o=e.invoke(i);if(B(o)){o={compile:$(o)}}else if(!o.compile&&o.link){o.compile=$(o.link)}o.priority=o.priority||0;o.index=a;o.name=o.name||r;o.require=_(o);o.restrict=b(o.restrict,r);o.$$moduleName=i.$$moduleName;n.push(o)}catch(e){t(e)}});return n}])}i[r].push(a)}else{x(r,T(t))}return this};this.component=function e(t,r){if(!Y(t)){x(t,T(be(this,e)));return this}var i=r.controller||function(){};function n(e){function t(t){if(B(t)||z(t)){return function(r,i){return e.invoke(t,this,{$element:r,$attrs:i})}}else{return t}}var n=!r.template&&!r.templateUrl?"":r.template;var a={controller:i,controllerAs:ri(r.controller)||r.controllerAs||"$ctrl",template:t(n),templateUrl:t(r.templateUrl),transclude:r.transclude,scope:{},bindToController:r.bindings||{},restrict:"E",require:r.require};x(r,function(e,t){if(t.charAt(0)==="$")a[t]=e});return a}x(r,function(e,t){if(t.charAt(0)==="$"){n[t]=e;if(B(i))i[t]=e}});n.$inject=["$injector"];return this.directive(t,n)};this.aHrefSanitizationWhitelist=function(e){if(G(e)){r.aHrefSanitizationWhitelist(e);return this}else{return r.aHrefSanitizationWhitelist()}};this.imgSrcSanitizationWhitelist=function(e){if(G(e)){r.imgSrcSanitizationWhitelist(e);return this}else{return r.imgSrcSanitizationWhitelist()}};var w=true;this.debugInfoEnabled=function(e){if(G(e)){w=e;return this}return w};var S=false;this.strictComponentBindingsEnabled=function(e){if(G(e)){S=e;return this}return S};var C=10;this.onChangesTtl=function(e){if(arguments.length){C=e;return this}return C};var O=true;this.commentDirectivesEnabled=function(e){if(arguments.length){O=e;return this}return O};var E=true;this.cssClassDirectivesEnabled=function(e){if(arguments.length){E=e;return this}return E};this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate",function(e,r,p,v,y,_,b,T,M){var j=/^\w/;var P=t.document.createElement("div");var k=O;var I=E;var $=C;var N;function G(){try{if(!--$){N=undefined;throw Hr("infchng","{0} $onChanges() iterations reached. Aborting!\n",C)}b.$apply(function(){for(var e=0,t=N.length;e<t;++e){try{N[e]()}catch(e){p(e)}}N=undefined})}finally{$++}}function H(e,t){if(t){var r=Object.keys(t);var i,n,a;for(i=0,n=r.length;i<n;i++){a=r[i];this[a]=t[a]}}else{this.$attr={}}this.$$element=e}H.prototype={$normalize:Xr,$addClass:function(e){if(e&&e.length>0){M.addClass(this.$$element,e)}},$removeClass:function(e){if(e&&e.length>0){M.removeClass(this.$$element,e)}},$updateClass:function(e,t){var r=Qr(e,t);if(r&&r.length){M.addClass(this.$$element,r)}var i=Qr(t,e);if(i&&i.length){M.removeClass(this.$$element,i)}},$set:function(e,t,r,i){var n=this.$$element[0],a=rr(n,e),o=ir(e),s=e,l;if(a){this.$$element.prop(e,t);i=a}else if(o){this[o]=t;s=o}this[e]=t;if(i){this.$attr[e]=i}else{i=this.$attr[e];if(!i){this.$attr[e]=i=Ye(e,"-")}}l=ce(this.$$element);if(l==="img"&&e==="srcset"&&t){if(!Y(t)){throw Hr("srcset","Can't pass trusted values to `$set('srcset', value)`: \"{0}\"",t.toString())}var u="";var c=oe(t);var f=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/;var h=/\s/.test(c)?f:/(,)/;var d=c.split(h);var v=Math.floor(d.length/2);for(var g=0;g<v;g++){var m=g*2;u+=T.getTrustedMediaUrl(oe(d[m]));u+=" "+oe(d[m+1])}var y=oe(d[g*2]).split(/\s/);u+=T.getTrustedMediaUrl(oe(y[0]));if(y.length===2){u+=" "+oe(y[1])}this[e]=t=u}if(r!==false){if(t===null||F(t)){this.$$element.removeAttr(i)}else{if(j.test(i)){this.$$element.attr(i,t)}else{W(this.$$element[0],i,t)}}}var _=this.$$observers;if(_){x(_[s],function(e){try{e(t)}catch(e){p(e)}})}},$observe:function(e,t){var r=this,i=r.$$observers||(r.$$observers=Ze()),n=i[e]||(i[e]=[]);n.push(t);b.$evalAsync(function(){if(!n.$$inter&&r.hasOwnProperty(e)&&!F(r[e])){t(r[e])}});return function(){he(n,t)}}};function W(e,t,r){P.innerHTML="<span "+t+">";var i=P.firstChild.attributes;var n=i[0];i.removeNamedItem(n.name);n.value=r;e.attributes.setNamedItem(n)}function V(e,t){try{e.addClass(t)}catch(e){}}var X=r.startSymbol(),K=r.endSymbol(),Q=X==="{{"&&K==="}}"?L:function e(t){return t.replace(/\{\{/g,X).replace(/}}/g,K)},J=/^ngAttr[A-Z]/;var ee=/^(.+)Start$/;re.$$addBindingInfo=w?function e(t,r){var i=t.data("$binding")||[];if(z(r)){i=i.concat(r)}else{i.push(r)}t.data("$binding",i)}:R;re.$$addBindingClass=w?function e(t){V(t,"ng-binding")}:R;re.$$addScopeInfo=w?function e(t,r,i,n){var a=i?n?"$isolateScopeNoTemplate":"$isolateScope":"$scope";t.data(a,r)}:R;re.$$addScopeClass=w?function e(t,r){V(t,r?"ng-isolate-scope":"ng-scope")}:R;re.$$createComment=function(e,r){var i="";if(w){i=" "+(e||"")+": ";if(r)i+=r+" "}return t.document.createComment(i)};return re;function re(e,t,r,i,n){if(!(e instanceof h)){e=h(e)}var a=ne(e,t,e,r,i,n);re.$$addScopeClass(e);var o=null;return function t(r,i,s){if(!e){throw Hr("multilink","This element has already been linked.")}ze(r,"scope");if(n&&n.needsNewScope){r=r.$parent.$new()}s=s||{};var l=s.parentBoundTranscludeFn,u=s.transcludeControllers,c=s.futureParentElement;if(l&&l.$$boundTransclude){l=l.$$boundTransclude}if(!o){o=ie(c)}var f;if(o!=="html"){f=h(Pe(o,h("<div></div>").append(e).html()))}else if(i){f=Qt.clone.call(e)}else{f=e}if(u){for(var d in u){f.data("$"+d+"Controller",u[d].instance)}}re.$$addScopeInfo(f,r);if(i)i(f,r);if(a)a(r,f,f,l);if(!i){e=a=null}return f}}function ie(e){var t=e&&e[0];if(!t){return"html"}else{return ce(t)!=="foreignobject"&&m.call(t).match(/SVG/)?"svg":"html"}}function ne(e,t,r,i,n,a){var o=[],s=z(e)||e instanceof h,l,u,c,d,p,v,g;for(var m=0;m<e.length;m++){l=new H;if(f===11){ae(e,m,s)}u=le(e[m],[],l,m===0?i:undefined,n);c=u.length?me(u,e[m],l,t,r,null,[],[],a):null;if(c&&c.scope){re.$$addScopeClass(l.$$element)}p=c&&c.terminal||!(d=e[m].childNodes)||!d.length?null:ne(d,c?(c.transcludeOnThisElement||!c.templateOnThisElement)&&c.transclude:t);if(c||p){o.push(m,c,p);v=true;g=g||c}a=null}return v?y:null;function y(e,r,i,n){var a,s,l,u,c,f,d,p;var v;if(g){var m=r.length;v=new Array(m);for(c=0;c<o.length;c+=3){d=o[c];v[d]=r[d]}}else{v=r}for(c=0,f=o.length;c<f;){l=v[o[c++]];a=o[c++];s=o[c++];if(a){if(a.scope){u=e.$new();re.$$addScopeInfo(h(l),u)}else{u=e}if(a.transcludeOnThisElement){p=se(e,a.transclude,n)}else if(!a.templateOnThisElement&&n){p=n}else if(!n&&t){p=se(e,t)}else{p=null}a(s,u,l,i,p)}else if(s){s(e,l.childNodes,undefined,n)}}}}function ae(e,t,r){var i=e[t];var n=i.parentNode;var a;if(i.nodeType!==tt){return}while(true){a=n?i.nextSibling:e[t+1];if(!a||a.nodeType!==tt){break}i.nodeValue=i.nodeValue+a.nodeValue;if(a.parentNode){a.parentNode.removeChild(a)}if(r&&a===e[t+1]){e.splice(t+1,1)}}}function se(e,t,r){function i(i,n,a,o,s){if(!i){i=e.$new(false,s);i.$$transcluded=true}return t(i,n,{parentBoundTranscludeFn:r,transcludeControllers:a,futureParentElement:o})}var n=i.$$slots=Ze();for(var a in t.$$slots){if(t.$$slots[a]){n[a]=se(e,t.$$slots[a],r)}else{n[a]=null}}return i}function le(e,t,r,i,n){var a=e.nodeType,s=r.$attr,l,u,c;switch(a){case Je:u=ce(e);Ce(t,Xr(u),"E",i,n);for(var f,h,d,p,v,g,m=e.attributes,y=0,_=m&&m.length;y<_;y++){var b=false;var w=false;f=m[y];h=f.name;v=f.value;p=Xr(h);g=J.test(p);if(g){h=h.replace(qr,"").substr(8).replace(/_(.)/g,function(e,t){return t.toUpperCase()})}var S=p.match(ee);if(S&&xe(S[1])){b=h;w=h.substr(0,h.length-5)+"end";h=h.substr(0,h.length-6)}d=Xr(h.toLowerCase());s[d]=h;if(g||!r.hasOwnProperty(d)){r[d]=v;if(rr(e,d)){r[d]=true}}Ie(e,t,v,d,g);Ce(t,d,"A",i,n,b,w)}if(u==="input"&&e.getAttribute("type")==="hidden"){e.setAttribute("autocomplete","off")}if(!I)break;c=e.className;if(U(c)){c=c.animVal}if(Y(c)&&c!==""){while(l=o.exec(c)){d=Xr(l[2]);if(Ce(t,d,"C",i,n)){r[d]=oe(l[3])}c=c.substr(l.index+l[0].length)}}break;case tt:Ae(t,e.nodeValue);break;case rt:if(!k)break;ue(e,t,r,i,n);break}t.sort(Ee);return t}function ue(e,t,r,i,n){try{var o=a.exec(e.nodeValue);if(o){var s=Xr(o[1]);if(Ce(t,s,"M",i,n)){r[s]=oe(o[2])}}}catch(e){}}function fe(e,t,r){var i=[];var n=0;if(t&&e.hasAttribute&&e.hasAttribute(t)){do{if(!e){throw Hr("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,r)}if(e.nodeType===Je){if(e.hasAttribute(t))n++;if(e.hasAttribute(r))n--}i.push(e);e=e.nextSibling}while(n>0)}else{i.push(e)}return h(i)}function de(e,t,r){return function i(n,a,o,s,l){a=fe(a[0],t,r);return e(n,a,o,s,l)}}function ge(e,t,r,i,n,a){var o;if(e){return re(t,r,i,n,a)}return function e(){if(!o){o=re(t,r,i,n,a);t=r=a=null}return o.apply(this,arguments)}}function me(e,t,r,i,n,a,o,s,l){l=l||{};var u=-Number.MAX_VALUE,c=l.newScopeDirective,f=l.controllerDirectives,d=l.newIsolateScopeDirective,v=l.templateDirective,g=l.nonTlbTranscludeDirective,m=false,y=false,_=l.hasElementTranscludeDirective,b=r.$$element=h(t),w,S,C,O=a,T=i,E,M=false,j=false,P;for(var k=0,I=e.length;k<I;k++){w=e[k];var D=w.$$start;var R=w.$$end;if(D){b=fe(t,D,R)}C=undefined;if(u>w.priority){break}P=w.scope;if(P){if(!w.templateUrl){if(U(P)){je("new/isolated scope",d||c,w,b);d=w}else{je("new/isolated scope",d,w,b)}}c=c||w}S=w.name;if(!M&&(w.replace&&(w.templateUrl||w.template)||w.transclude&&!w.$$tlb)){var L;for(var $=k+1;L=e[$++];){if(L.transclude&&!L.$$tlb||L.replace&&(L.templateUrl||L.template)){j=true;break}}M=true}if(!w.templateUrl&&w.controller){f=f||Ze();je("'"+S+"' controller",f[S],w,b);f[S]=w}P=w.transclude;if(P){m=true;if(!w.$$tlb){je("transclusion",g,w,b);g=w}if(P==="element"){_=true;u=w.priority;C=b;b=r.$$element=h(re.$$createComment(S,r[S]));t=b[0];De(n,_e(C),t);T=ge(j,C,i,u,O&&O.name,{nonTlbTranscludeDirective:g})}else{var N=Ze();if(!U(P)){C=h(Dt(t)).contents()}else{C=[];var G=Ze();var Y=Ze();x(P,function(e,t){var r=e.charAt(0)==="?";e=r?e.substring(1):e;G[e]=t;N[t]=null;Y[t]=r});x(b.contents(),function(e){var t=G[Xr(ce(e))];if(t){Y[t]=true;N[t]=N[t]||[];N[t].push(e)}else{C.push(e)}});x(Y,function(e,t){if(!e){throw Hr("reqslot","Required transclusion slot `{0}` was not filled.",t)}});for(var W in N){if(N[W]){N[W]=ge(j,N[W],i)}}}b.empty();T=ge(j,C,i,undefined,undefined,{needsNewScope:w.$$isolateScope||w.$$newScope});T.$$slots=N}}if(w.template){y=true;je("template",v,w,b);v=w;P=B(w.template)?w.template(b,r):w.template;P=Q(P);if(w.replace){O=w;if(Tt(P)){C=[]}else{C=Jr(Pe(w.templateNamespace,oe(P)))}t=C[0];if(C.length!==1||t.nodeType!==Je){throw Hr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",S,"")}De(n,b,t);var V={$attr:{}};var q=le(t,[],V);var X=e.splice(k+1,e.length-(k+1));if(d||c){Se(q,d,c)}e=e.concat(q).concat(X);Oe(r,V);I=e.length}else{b.html(P)}}if(w.templateUrl){y=true;je("template",v,w,b);v=w;if(w.replace){O=w}ee=Te(e.splice(k,e.length-k),b,r,n,m&&T,o,s,{controllerDirectives:f,newScopeDirective:c!==w&&c,newIsolateScopeDirective:d,templateDirective:v,nonTlbTranscludeDirective:g});I=e.length}else if(w.compile){try{E=w.compile(b,r,T);var K=w.$$originalDirective||w;if(B(E)){J(null,be(K,E),D,R)}else if(E){J(be(K,E.pre),be(K,E.post),D,R)}}catch(e){p(e,Me(b))}}if(w.terminal){ee.terminal=true;u=Math.max(u,w.priority)}}ee.scope=c&&c.scope===true;ee.transcludeOnThisElement=m;ee.templateOnThisElement=y;ee.transclude=T;l.hasElementTranscludeDirective=_;return ee;function J(e,t,r,i){if(e){if(r)e=de(e,r,i);e.require=w.require;e.directiveName=S;if(d===w||w.$$isolateScope){e=Re(e,{isolateScope:true})}o.push(e)}if(t){if(r)t=de(t,r,i);t.require=w.require;t.directiveName=S;if(d===w||w.$$isolateScope){t=Re(t,{isolateScope:true})}s.push(t)}}function ee(e,i,n,a,l){var u,g,m,y,b,w,S,C,O,T;if(t===n){O=r;C=r.$$element}else{C=h(n);O=new H(C,r)}b=i;if(d){y=i.$new(true)}else if(c){b=i.$parent}if(l){S=I;S.$$boundTransclude=l;S.isSlotFilled=function(e){return!!l.$$slots[e]}}if(f){w=we(C,O,S,f,y,i,d)}if(d){re.$$addScopeInfo(C,y,true,!(v&&(v===d||v===d.$$originalDirective)));re.$$addScopeClass(C,true);y.$$isolateBindings=d.$$isolateBindings;T=Ne(i,O,y,y.$$isolateBindings,d);if(T.removeWatches){y.$on("$destroy",T.removeWatches)}}for(var E in w){var M=f[E];var j=w[E];var P=M.$$bindings.bindToController;j.instance=j();C.data("$"+M.name+"Controller",j.instance);j.bindingInfo=Ne(b,O,j.instance,P,M)}x(f,function(e,t){var r=e.require;if(e.bindToController&&!z(r)&&U(r)){A(w[t].instance,ye(t,r,C,w))}});x(w,function(e){var t=e.instance;if(B(t.$onChanges)){try{t.$onChanges(e.bindingInfo.initialChanges)}catch(e){p(e)}}if(B(t.$onInit)){try{t.$onInit()}catch(e){p(e)}}if(B(t.$doCheck)){b.$watch(function(){t.$doCheck()});t.$doCheck()}if(B(t.$onDestroy)){b.$on("$destroy",function e(){t.$onDestroy()})}});for(u=0,g=o.length;u<g;u++){m=o[u];Le(m,m.isolateScope?y:i,C,O,m.require&&ye(m.directiveName,m.require,C,w),S)}var k=i;if(d&&(d.template||d.templateUrl===null)){k=y}if(e){e(k,n.childNodes,undefined,l)}for(u=s.length-1;u>=0;u--){m=s[u];Le(m,m.isolateScope?y:i,C,O,m.require&&ye(m.directiveName,m.require,C,w),S)}x(w,function(e){var t=e.instance;if(B(t.$postLink)){t.$postLink()}});function I(e,t,r,i){var n;if(!Z(e)){i=r;r=t;t=e;e=undefined}if(_){n=w}if(!r){r=_?C.parent():C}if(i){var a=l.$$slots[i];if(a){return a(e,t,n,r,k)}else if(F(a)){throw Hr("noslot",'No parent directive that requires a transclusion with slot name "{0}". '+"Element: {1}",i,Me(C))}}else{return l(e,t,n,r,k)}}}}function ye(e,t,r,i){var n;if(Y(t)){var a=t.match(c);var o=t.substring(a[0].length);var s=a[1]||a[3];var l=a[2]==="?";if(s==="^^"){r=r.parent()}else{n=i&&i[o];n=n&&n.instance}if(!n){var u="$"+o+"Controller";n=s?r.inheritedData(u):r.data(u)}if(!n&&!l){throw Hr("ctreq","Controller '{0}', required by directive '{1}', can't be found!",o,e)}}else if(z(t)){n=[];for(var f=0,h=t.length;f<h;f++){n[f]=ye(e,t[f],r,i)}}else if(U(t)){n={};x(t,function(t,a){n[a]=ye(e,t,r,i)})}return n||null}function we(e,t,r,i,n,a,o){var s=Ze();for(var l in i){var u=i[l];var c={$scope:u===o||u.$$isolateScope?n:a,$element:e,$attrs:t,$transclude:r};var f=u.controller;if(f==="@"){f=t[u.name]}var h=_(f,c,true,u.controllerAs);s[u.name]=h;e.data("$"+u.name+"Controller",h.instance)}return s}function Se(e,t,r){for(var i=0,n=e.length;i<n;i++){e[i]=D(e[i],{$$isolateScope:t,$$newScope:r})}}function Ce(t,r,a,o,s,l,u){if(r===s)return null;var c=null;if(i.hasOwnProperty(r)){for(var f,h=e.get(r+n),d=0,p=h.length;d<p;d++){f=h[d];if((F(o)||o>f.priority)&&f.restrict.indexOf(a)!==-1){if(l){f=D(f,{$$start:l,$$end:u})}if(!f.$$bindings){var v=f.$$bindings=g(f,f.name);if(U(v.isolateScope)){f.$$isolateBindings=v.isolateScope}}t.push(f);c=f}}}return c}function xe(t){if(i.hasOwnProperty(t)){for(var r,a=e.get(t+n),o=0,s=a.length;o<s;o++){r=a[o];if(r.multiElement){return true}}}return false}function Oe(e,t){var r=t.$attr,i=e.$attr;x(e,function(i,n){if(n.charAt(0)!=="$"){if(t[n]&&t[n]!==i){if(i.length){i+=(n==="style"?";":" ")+t[n]}else{i=t[n]}}e.$set(n,i,true,r[n])}});x(t,function(t,n){if(!e.hasOwnProperty(n)&&n.charAt(0)!=="$"){e[n]=t;if(n!=="class"&&n!=="style"){i[n]=r[n]}}})}function Te(e,t,r,i,n,a,o,s){var l=[],u,c,f=t[0],d=e.shift(),g=D(d,{templateUrl:null,transclude:null,replace:null,$$originalDirective:d}),m=B(d.templateUrl)?d.templateUrl(t,r):d.templateUrl,y=d.templateNamespace;t.empty();v(m).then(function(p){var v,_,b,w;p=Q(p);if(d.replace){if(Tt(p)){b=[]}else{b=Jr(Pe(y,oe(p)))}v=b[0];if(b.length!==1||v.nodeType!==Je){throw Hr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",d.name,m)}_={$attr:{}};De(i,t,v);var S=le(v,[],_);if(U(d.scope)){Se(S,true)}e=S.concat(e);Oe(r,_)}else{v=f;t.html(p)}e.unshift(g);u=me(e,v,r,n,t,d,a,o,s);x(i,function(e,r){if(e===v){i[r]=t[0]}});c=ne(t[0].childNodes,n);while(l.length){var C=l.shift(),O=l.shift(),T=l.shift(),E=l.shift(),M=t[0];if(C.$$destroyed)continue;if(O!==f){var j=O.className;if(!(s.hasElementTranscludeDirective&&d.replace)){M=Dt(v)}De(T,h(O),M);V(h(M),j)}if(u.transcludeOnThisElement){w=se(C,u.transclude,E)}else{w=E}u(c,C,M,i,w)}l=null}).catch(function(e){if(q(e)){p(e)}});return function e(t,r,i,n,a){var o=a;if(r.$$destroyed)return;if(l){l.push(r,i,n,o)}else{if(u.transcludeOnThisElement){o=se(r,u.transclude,a)}u(c,r,i,n,o)}}}function Ee(e,t){var r=t.priority-e.priority;if(r!==0)return r;if(e.name!==t.name)return e.name<t.name?-1:1;return e.index-t.index}function je(e,t,r,i){function n(e){return e?" (module: "+e+")":""}if(t){throw Hr("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",t.name,n(t.$$moduleName),r.name,n(r.$$moduleName),e,Me(i))}}function Ae(e,t){var i=r(t,true);if(i){e.push({priority:0,compile:function e(t){var r=t.parent(),n=!!r.length;if(n)re.$$addBindingClass(r);return function e(t,r){var a=r.parent();if(!n)re.$$addBindingClass(a);re.$$addBindingInfo(a,i.expressions);t.$watch(i,function e(t){r[0].nodeValue=t})}}})}}function Pe(e,r){e=u(e||"html");switch(e){case"svg":case"math":var i=t.document.createElement("div");i.innerHTML="<"+e+">"+r+"</"+e+">";return i.childNodes[0].childNodes;default:return r}}function ke(e,t){if(t==="srcdoc"){return T.HTML}var r=ce(e);if(t==="src"||t==="ngSrc"){if(["img","video","audio","source","track"].indexOf(r)===-1){return T.RESOURCE_URL}return T.MEDIA_URL}else if(t==="xlinkHref"){if(r==="image")return T.MEDIA_URL;if(r==="a")return T.URL;return T.RESOURCE_URL}else if(r==="form"&&t==="action"||r==="base"&&t==="href"||r==="link"&&t==="href"){return T.RESOURCE_URL}else if(r==="a"&&(t==="href"||t==="ngHref")){return T.URL}}function Ie(e,t,i,n,a){var o=ke(e,n);var l=!a;var u=s[n]||a;var c=r(i,l,o,u);if(!c)return;if(n==="multiple"&&ce(e)==="select"){throw Hr("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",Me(e))}if(d.test(n)){throw Hr("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the "+"ng- versions (such as ng-click instead of onclick) instead.")}t.push({priority:100,compile:function(){return{pre:function e(t,a,s){var l=s.$$observers||(s.$$observers=Ze());var f=s[n];if(f!==i){c=f&&r(f,true,o,u);i=f}if(!c)return;s[n]=c(t);(l[n]||(l[n]=[])).$$inter=true;(s.$$observers&&s.$$observers[n].$$scope||t).$watch(c,function e(t,r){if(n==="class"&&t!==r){s.$updateClass(t,r)}else{s.$set(n,t)}})}}}})}function De(e,r,i){var n=r[0],a=r.length,o=n.parentNode,s,l;if(e){for(s=0,l=e.length;s<l;s++){if(e[s]===n){e[s++]=i;for(var u=s,c=u+a-1,f=e.length;u<f;u++,c++){if(c<f){e[u]=e[c]}else{delete e[u]}}e.length-=a-1;if(e.context===n){e.context=i}break}}}if(o){o.replaceChild(i,n)}var d=t.document.createDocumentFragment();for(s=0;s<a;s++){d.appendChild(r[s])}if(h.hasData(n)){h.data(i,h.data(n));h(n).off("$destroy")}h.cleanData(d.querySelectorAll("*"));for(s=1;s<a;s++){delete r[s]}r[0]=i;r.length=1}function Re(e,t){return A(function(){return e.apply(null,arguments)},e,t)}function Le(e,t,r,i,n,a){try{e(t,r,i,n,a)}catch(e){p(e,Me(r))}}function $e(e,t){if(S){throw Hr("missingattr","Attribute '{0}' of '{1}' is non-optional and must be set!",e,t)}}function Ne(e,t,i,n,a){var o=[];var s={};var u;x(n,function n(u,f){var h=u.attrName,d=u.optional,p=u.mode,v,g,m,_,b;switch(p){case"@":if(!d&&!l.call(t,h)){$e(h,a.name);i[f]=t[h]=undefined}b=t.$observe(h,function(e){if(Y(e)||te(e)){var t=i[f];c(f,e,t);i[f]=e}});t.$$observers[h].$$scope=e;v=t[h];if(Y(v)){i[f]=r(v)(e)}else if(te(v)){i[f]=v}s[f]=new zr(Wr,i[f]);o.push(b);break;case"=":if(!l.call(t,h)){if(d)break;$e(h,a.name);t[h]=undefined}if(d&&!t[h])break;g=y(t[h]);if(g.literal){_=ve}else{_=pe}m=g.assign||function(){v=i[f]=g(e);throw Hr("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",t[h],h,a.name)};v=i[f]=g(e);var w=function t(r){if(!_(r,i[f])){if(!_(r,v)){i[f]=r}else{m(e,r=i[f])}}v=r;return v};w.$stateful=true;if(u.collection){b=e.$watchCollection(t[h],w)}else{b=e.$watch(y(t[h],w),null,g.literal)}o.push(b);break;case"<":if(!l.call(t,h)){if(d)break;$e(h,a.name);t[h]=undefined}if(d&&!t[h])break;g=y(t[h]);var S=g.literal;var C=i[f]=g(e);s[f]=new zr(Wr,i[f]);b=e.$watch(g,function e(t,r){if(r===t){if(r===C||S&&ve(r,C)){return}r=C}c(f,t,r);i[f]=t});o.push(b);break;case"&":if(!d&&!l.call(t,h)){$e(h,a.name)}g=t.hasOwnProperty(h)?y(t[h]):R;if(g===R&&d)break;i[f]=function(t){return g(e,t)};break}});function c(t,r,n){if(B(i.$onChanges)&&!pe(r,n)){if(!N){e.$$postDigest(G);N=[]}if(!u){u={};N.push(f)}if(u[t]){n=u[t].previousValue}u[t]=new zr(n,r)}}function f(){i.$onChanges(u);u=undefined}return{initialChanges:s,removeWatches:o.length&&function e(){for(var t=0,r=o.length;t<r;++t){o[t]()}}}}}]}function zr(e,t){this.previousValue=e;this.currentValue=t}zr.prototype.isFirstChange=function(){return this.previousValue===Wr};var qr=/^((?:x|data)[:\-_])/i;var Br=/[:\-_]+(.)/g;function Xr(e){return e.replace(qr,"").replace(Br,function(e,t,r){return r?t.toUpperCase():t})}function Kr(e,t,r,i){}function Zr(e,t,r,i,n){}function Qr(e,t){var r="",i=e.split(/\s+/),n=t.split(/\s+/);e:for(var a=0;a<i.length;a++){var o=i[a];for(var s=0;s<n.length;s++){if(o===n[s])continue e}r+=(r.length>0?" ":"")+o}return r}function Jr(e){e=h(e);var t=e.length;if(t<=1){return e}while(t--){var r=e[t];if(r.nodeType===rt||r.nodeType===tt&&r.nodeValue.trim()===""){v.call(e,t,1)}}return e}var ei=a("$controller");var ti=/^(\S+)(\s+as\s+([\w$]+))?$/;function ri(e,t){if(t&&Y(t))return t;if(Y(e)){var r=ti.exec(e);if(r)return r[3]}}function ii(){var e={};this.has=function(t){return e.hasOwnProperty(t)};this.register=function(t,r){Be(t,"controller");if(U(t)){A(e,t)}else{e[t]=r}};this.$get=["$injector",function(t){return function i(n,a,o,s){var l,u,c,f;o=o===true;if(s&&Y(s)){f=s}if(Y(n)){u=n.match(ti);if(!u){throw ei("ctrlfmt","Badly formed controller string '{0}'. "+"Must match `__name__ as __id__` or `__name__`.",n)}c=u[1];f=f||u[3];n=e.hasOwnProperty(c)?e[c]:Xe(a.$scope,c,true);if(!n){throw ei("ctrlreg","The controller with the name '{0}' is not registered.",c)}qe(n,c,true)}if(o){var h=(z(n)?n[n.length-1]:n).prototype;l=Object.create(h||null);if(f){r(a,f,l,c||n.name)}return A(function e(){var i=t.invoke(n,l,a,c);if(i!==l&&(U(i)||B(i))){l=i;if(f){r(a,f,l,c||n.name)}}return l},{instance:l,identifier:f})}l=t.instantiate(n,a,c);if(f){r(a,f,l,c||n.name)}return l};function r(e,t,r,i){if(!(e&&U(e.$scope))){throw a("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,t)}e.$scope[t]=r}}]}function ni(){this.$get=["$window",function(e){return h(e.document)}]}function ai(){this.$get=["$document","$rootScope",function(e,t){var r=e[0];var i=r&&r.hidden;e.on("visibilitychange",n);t.$on("$destroy",function(){e.off("visibilitychange",n)});function n(){i=r.hidden}return function(){return i}}]}function oi(){this.$get=["$log",function(e){return function(t,r){e.error.apply(e,arguments)}}]}var si=function(){this.$get=["$document",function(e){return function(t){if(t){if(!t.nodeType&&t instanceof h){t=t[0]}}else{t=e[0].body}return t.offsetWidth+1}}]};var li="application/json";var ui={"Content-Type":li+";charset=utf-8"};var ci=/^\[|^\{(?!\{)/;var fi={"[":/]$/,"{":/}$/};var hi=/^\)]\}',?\n/;var di=a("$http");function pi(e){if(U(e)){return V(e)?e.toISOString():Se(e)}return e}function vi(){this.$get=function(){return function e(t){if(!t)return"";var r=[];O(t,function(e,t){if(e===null||F(e)||B(e))return;if(z(e)){x(e,function(e){r.push(Ie(t)+"="+Ie(pi(e)))})}else{r.push(Ie(t)+"="+Ie(pi(e)))}});return r.join("&")}}}function gi(){this.$get=function(){return function e(t){if(!t)return"";var r=[];i(t,"",true);return r.join("&");function i(e,t,n){if(z(e)){x(e,function(e,r){i(e,t+"["+(U(e)?r:"")+"]")})}else if(U(e)&&!V(e)){O(e,function(e,r){i(e,t+(n?"":"[")+r+(n?"":"]"))})}else{if(B(e)){e=e()}r.push(Ie(t)+"="+(e==null?"":Ie(pi(e))))}}}}}function mi(e,t){if(Y(e)){var r=e.replace(hi,"").trim();if(r){var i=t("Content-Type");var n=i&&i.indexOf(li)===0;if(n||yi(r)){try{e=Ce(r)}catch(t){if(!n){return e}throw di("baddata",'Data must be a valid JSON object. Received: "{0}". '+'Parse error: "{1}"',e,t)}}}}return e}function yi(e){var t=e.match(ci);return t&&fi[t[0]].test(e)}function _i(e){var t=Ze(),r;function i(e,r){if(e){t[e]=t[e]?t[e]+", "+r:r}}if(Y(e)){x(e.split("\n"),function(e){r=e.indexOf(":");i(u(oe(e.substr(0,r))),oe(e.substr(r+1)))})}else if(U(e)){x(e,function(e,t){i(u(t),oe(e))})}return t}function bi(e){var t;return function(r){if(!t)t=_i(e);if(r){var i=t[u(r)];if(i===undefined){i=null}return i}return t}}function wi(e,t,r,i){if(B(i)){return i(e,t,r)}x(i,function(i){e=i(e,t,r)});return e}function Si(e){return 200<=e&&e<300}function Ci(){var e=this.defaults={transformResponse:[mi],transformRequest:[function(e){return U(e)&&!Q(e)&&!ee(e)&&!J(e)?Se(e):e}],headers:{common:{Accept:"application/json, text/plain, */*"},post:ot(ui),put:ot(ui),patch:ot(ui)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"};var t=false;this.useApplyAsync=function(e){if(G(e)){t=!!e;return this}return t};var r=this.interceptors=[];var i=this.xsrfWhitelistedOrigins=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(n,o,s,l,f,h,d,p){var v=l("$http");e.paramSerializer=Y(e.paramSerializer)?d.get(e.paramSerializer):e.paramSerializer;var g=[];x(r,function(e){g.unshift(Y(e)?d.get(e):d.invoke(e))});var m=ea(i);function y(t){if(!U(t)){throw a("$http")("badreq","Http request configuration must be an object.  Received: {0}",t)}if(!Y(p.valueOf(t.url))){throw a("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",t.url)}var r=A({method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse,paramSerializer:e.paramSerializer,jsonpCallbackParam:e.jsonpCallbackParam},t);r.headers=m(t);r.method=c(r.method);r.paramSerializer=Y(r.paramSerializer)?d.get(r.paramSerializer):r.paramSerializer;n.$$incOutstandingRequestCount();var i=[];var o=[];var s=h.resolve(r);x(g,function(e){if(e.request||e.requestError){i.unshift(e.request,e.requestError)}if(e.response||e.responseError){o.push(e.response,e.responseError)}});s=l(s,i);s=s.then(y);s=l(s,o);s=s.finally(f);return s;function l(e,t){for(var r=0,i=t.length;r<i;){var n=t[r++];var a=t[r++];e=e.then(n,a)}t.length=0;return e}function f(){n.$$completeOutstandingRequest(R)}function v(e,t){var r,i={};x(e,function(e,n){if(B(e)){r=e(t);if(r!=null){i[n]=r}}else{i[n]=e}});return i}function m(t){var r=e.headers,i=A({},t.headers),n,a,o;r=A({},r.common,r[u(t.method)]);e:for(n in r){a=u(n);for(o in i){if(u(o)===a){continue e}}i[n]=r[n]}return v(i,ot(t))}function y(t){var r=t.headers;var i=wi(t.data,bi(r),undefined,t.transformRequest);if(F(i)){x(r,function(e,t){if(u(t)==="content-type"){delete r[t]}})}if(F(t.withCredentials)&&!F(e.withCredentials)){t.withCredentials=e.withCredentials}return w(t,i).then(_,_)}function _(e){var t=A({},e);t.data=wi(e.data,e.headers,e.status,r.transformResponse);return Si(e.status)?t:h.reject(t)}}y.pendingRequests=[];_("get","delete","head","jsonp");b("post","put","patch");y.defaults=e;return y;function _(e){x(arguments,function(e){y[e]=function(t,r){return y(A({},r||{},{method:e,url:t}))}})}function b(e){x(arguments,function(e){y[e]=function(t,r,i){return y(A({},i||{},{method:e,url:t,data:r}))}})}function w(r,i){var n=h.defer(),a=n.promise,l,c,d=r.headers,g=u(r.method)==="jsonp",_=r.url;if(g){_=p.getTrustedResourceUrl(_)}else if(!Y(_)){_=p.valueOf(_)}_=S(_,r.paramSerializer(r.params));if(g){_=C(_,r.jsonpCallbackParam)}y.pendingRequests.push(r);a.then(M,M);if((r.cache||e.cache)&&r.cache!==false&&(r.method==="GET"||r.method==="JSONP")){l=U(r.cache)?r.cache:U(e.cache)?e.cache:v}if(l){c=l.get(_);if(G(c)){if(re(c)){c.then(E,E)}else{if(z(c)){T(c[1],c[0],ot(c[2]),c[3],c[4])}else{T(c,200,{},"OK","complete")}}}else{l.put(_,a)}}if(F(c)){var b=m(r.url)?s()[r.xsrfCookieName||e.xsrfCookieName]:undefined;if(b){d[r.xsrfHeaderName||e.xsrfHeaderName]=b}o(r.method,_,i,O,d,r.timeout,r.withCredentials,r.responseType,w(r.eventHandlers),w(r.uploadEventHandlers))}return a;function w(e){if(e){var r={};x(e,function(e,i){r[i]=function(r){if(t){f.$applyAsync(i)}else if(f.$$phase){i()}else{f.$apply(i)}function i(){e(r)}}});return r}}function O(e,r,i,n,a){if(l){if(Si(e)){l.put(_,[e,r,_i(i),n,a])}else{l.remove(_)}}function o(){T(r,e,i,n,a)}if(t){f.$applyAsync(o)}else{o();if(!f.$$phase)f.$apply()}}function T(e,t,i,a,o){t=t>=-1?t:0;(Si(t)?n.resolve:n.reject)({data:e,status:t,headers:bi(i),config:r,statusText:a,xhrStatus:o})}function E(e){T(e.data,e.status,ot(e.headers()),e.statusText,e.xhrStatus)}function M(){var e=y.pendingRequests.indexOf(r);if(e!==-1)y.pendingRequests.splice(e,1)}}function S(e,t){if(t.length>0){e+=(e.indexOf("?")===-1?"?":"&")+t}return e}function C(e,t){var r=e.split("?");if(r.length>2){throw di("badjsonp",'Illegal use more than one "?", in url, "{1}"',e)}var i=Ae(r[1]);x(i,function(r,i){if(r==="JSON_CALLBACK"){throw di("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',e)}if(i===t){throw di("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',t,e)}});e+=(e.indexOf("?")===-1?"?":"&")+t+"=JSON_CALLBACK";return e}}]}function xi(){this.$get=function(){return function e(){return new t.XMLHttpRequest}}}function Oi(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(e,t,r,i){return Ti(e,i,e.defer,t,r[0])}]}function Ti(e,t,r,i,n){return function(n,o,s,l,c,f,h,d,p,v){o=o||e.url();if(u(n)==="jsonp"){var g=i.createCallback(o);var m=a(o,g,function(e,t){var r=e===200&&i.getResponse(g);T(l,e,r,"",t,"complete");i.removeCallback(g)})}else{var y=t(n,o);var _=false;y.open(n,o,true);x(c,function(e,t){if(G(e)){y.setRequestHeader(t,e)}});y.onload=function e(){var t=y.statusText||"";var r="response"in y?y.response:y.responseText;var i=y.status===1223?204:y.status;if(i===0){i=r?200:Zn(o).protocol==="file"?404:0}T(l,i,r,y.getAllResponseHeaders(),t,"complete")};var b=function(){T(l,-1,null,null,"","error")};var w=function(){T(l,-1,null,null,"",_?"timeout":"abort")};var S=function(){T(l,-1,null,null,"","timeout")};y.onerror=b;y.ontimeout=S;y.onabort=w;x(p,function(e,t){y.addEventListener(t,e)});x(v,function(e,t){y.upload.addEventListener(t,e)});if(h){y.withCredentials=true}if(d){try{y.responseType=d}catch(e){if(d!=="json"){throw e}}}y.send(F(s)?null:s)}if(f>0){var C=r(function(){O("timeout")},f)}else if(re(f)){f.then(function(){O(G(f.$$timeoutId)?"timeout":"abort")})}function O(e){_=e==="timeout";if(m){m()}if(y){y.abort()}}function T(e,t,i,n,a,o){if(G(C)){r.cancel(C)}m=y=null;e(t,i,n,a,o)}};function a(e,t,r){e=e.replace("JSON_CALLBACK",t);var a=n.createElement("script"),o=null;a.type="text/javascript";a.src=e;a.async=true;o=function(e){a.removeEventListener("load",o);a.removeEventListener("error",o);n.body.removeChild(a);a=null;var s=-1;var l="unknown";if(e){if(e.type==="load"&&!i.wasCalled(t)){e={type:"error"}}l=e.type;s=e.type==="error"?404:200}if(r){r(s,l)}};a.addEventListener("load",o);a.addEventListener("error",o);n.body.appendChild(a);return o}}var Ei=b.$interpolateMinErr=a("$interpolate");Ei.throwNoconcat=function(e){throw Ei("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows "+"interpolations that concatenate multiple expressions when a trusted value is "+"required.  See http://docs.angularjs.org/api/ng.$sce",e)};Ei.interr=function(e,t){return Ei("interr","Can't interpolate: {0}\n{1}",e,t.toString())};function Mi(){var e="{{";var t="}}";this.startSymbol=function(t){if(t){e=t;return this}return e};this.endSymbol=function(e){if(e){t=e;return this}return t};this.$get=["$parse","$exceptionHandler","$sce",function(r,i,n){var a=e.length,o=t.length,s=new RegExp(e.replace(/./g,u),"g"),l=new RegExp(t.replace(/./g,u),"g");function u(e){return"\\\\\\"+e}function c(r){return r.replace(s,e).replace(l,t)}function f(e,t,r,i){var n=e.$watch(function e(t){n();return i(t)},t,r);return n}function h(s,l,u,h){var d=u===n.URL||u===n.MEDIA_URL;if(!s.length||s.indexOf(e)===-1){if(l&&!d)return;var p=c(s);if(d){p=n.getTrusted(u,p)}var v=$(p);v.exp=s;v.expressions=[];v.$$watchDelegate=f;return v}h=!!h;var g,m,y=0,_=[],b,w=s.length,S,C=[],x=[],O;while(y<w){if((g=s.indexOf(e,y))!==-1&&(m=s.indexOf(t,g+a))!==-1){if(y!==g){C.push(c(s.substring(y,g)))}S=s.substring(g+a,m);_.push(S);y=m+o;x.push(C.length);C.push("")}else{if(y!==w){C.push(c(s.substring(y)))}break}}O=C.length===1&&x.length===1;var T=d&&O?undefined:M;b=_.map(function(e){return r(e,T)});if(!l||_.length){var E=function(e){for(var t=0,r=_.length;t<r;t++){if(h&&F(e[t]))return;C[x[t]]=e[t]}if(d){return n.getTrusted(u,O?C[0]:C.join(""))}else if(u&&C.length>1){Ei.throwNoconcat(s)}return C.join("")};return A(function e(t){var r=0;var n=_.length;var a=new Array(n);try{for(;r<n;r++){a[r]=b[r](t)}return E(a)}catch(e){i(Ei.interr(s,e))}},{exp:s,expressions:_,$$watchDelegate:function(e,t){var r;return e.$watchGroup(b,function i(n,a){var o=E(n);t.call(this,o,n!==a?r:o,e);r=o})}})}function M(e){try{e=u&&!d?n.getTrusted(u,e):n.valueOf(e);return h&&!G(e)?e:Qe(e)}catch(e){i(Ei.interr(s,e))}}}h.startSymbol=function(){return e};h.endSymbol=function(){return t};return h}]}var ji=a("$interval");function Ai(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(e,t,r,i,n){var a={};function o(o,s,l,u){var c=arguments.length>4,f=c?_e(arguments,4):[],h=t.setInterval,d=t.clearInterval,p=0,v=G(u)&&!u,g=(v?i:r).defer(),m=g.promise;l=G(l)?l:0;m.$$intervalId=h(function t(){if(v){n.defer(y)}else{e.$evalAsync(y)}g.notify(p++);if(l>0&&p>=l){g.resolve(p);d(m.$$intervalId);delete a[m.$$intervalId]}if(!v)e.$apply()},s);a[m.$$intervalId]=g;return m;function y(){if(!c){o(p)}else{o.apply(null,f)}}}o.cancel=function(e){if(!e)return false;if(!e.hasOwnProperty("$$intervalId")){throw ji("badprom","`$interval.cancel()` called with a promise that was not generated by `$interval()`.")}if(!a.hasOwnProperty(e.$$intervalId))return false;var r=e.$$intervalId;var i=a[r];An(i.promise);i.reject("canceled");t.clearInterval(r);delete a[r];return true};return o}]}var Pi=function(){this.$get=function(){var e=b.callbacks;var t={};function r(e){var t=function(e){t.data=e;t.called=true};t.id=e;return t}return{createCallback:function(i){var n="_"+(e.$$counter++).toString(36);var a="angular.callbacks."+n;var o=r(n);t[a]=e[n]=o;return a},wasCalled:function(e){return t[e].called},getResponse:function(e){return t[e].data},removeCallback:function(r){var i=t[r];delete e[i.id];delete t[r]}}}};var ki=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,Ii={http:80,https:443,ftp:21};var Di=a("$location");function Ri(e){var t=e.split("/"),r=t.length;while(r--){t[r]=ke(t[r].replace(/%2F/g,"/"))}return t.join("/")}function Li(e,t){var r=e.split("/"),i=r.length;while(i--){r[i]=decodeURIComponent(r[i]);if(t){r[i]=r[i].replace(/\//g,"%2F")}}return r.join("/")}function $i(e,t){var r=Zn(e);t.$$protocol=r.protocol;t.$$host=r.hostname;t.$$port=k(r.port)||Ii[r.protocol]||null}var Ni=/^\s*[\\/]{2,}/;function Fi(e,t,r){if(Ni.test(e)){throw Di("badpath",'Invalid url "{0}".',e)}var i=e.charAt(0)!=="/";if(i){e="/"+e}var n=Zn(e);var a=i&&n.pathname.charAt(0)==="/"?n.pathname.substring(1):n.pathname;t.$$path=Li(a,r);t.$$search=Ae(n.search);t.$$hash=decodeURIComponent(n.hash);if(t.$$path&&t.$$path.charAt(0)!=="/"){t.$$path="/"+t.$$path}}function Gi(e,t){return e.slice(0,t.length)===t}function Ui(e,t){if(Gi(t,e)){return t.substr(e.length)}}function Hi(e){var t=e.indexOf("#");return t===-1?e:e.substr(0,t)}function Yi(e){return e.replace(/(#.+)|#$/,"$1")}function Wi(e){return e.substr(0,Hi(e).lastIndexOf("/")+1)}function Vi(e){return e.substring(0,e.indexOf("/",e.indexOf("//")+2))}function zi(e,t,r){this.$$html5=true;r=r||"";$i(e,this);this.$$parse=function(e){var r=Ui(t,e);if(!Y(r)){throw Di("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,t)}Fi(r,this,true);if(!this.$$path){this.$$path="/"}this.$$compose()};this.$$compose=function(){var e=Pe(this.$$search),r=this.$$hash?"#"+ke(this.$$hash):"";this.$$url=Ri(this.$$path)+(e?"?"+e:"")+r;this.$$absUrl=t+this.$$url.substr(1);this.$$urlUpdatedByLocation=true};this.$$parseLinkUrl=function(i,n){if(n&&n[0]==="#"){this.hash(n.slice(1));return true}var a,o;var s;if(G(a=Ui(e,i))){o=a;if(r&&G(a=Ui(r,a))){s=t+(Ui("/",a)||a)}else{s=e+o}}else if(G(a=Ui(t,i))){s=t+a}else if(t===i+"/"){s=t}if(s){this.$$parse(s)}return!!s}}function qi(e,t,r){$i(e,this);this.$$parse=function(i){var n=Ui(e,i)||Ui(t,i);var a;if(!F(n)&&n.charAt(0)==="#"){a=Ui(r,n);if(F(a)){a=n}}else{if(this.$$html5){a=n}else{a="";if(F(n)){e=i;this.replace()}}}Fi(a,this,false);this.$$path=o(this.$$path,a,e);this.$$compose();function o(e,t,r){var i=/^\/[A-Z]:(\/.*)/;var n;if(Gi(t,r)){t=t.replace(r,"")}if(i.exec(t)){return e}n=i.exec(e);return n?n[1]:e}};this.$$compose=function(){var t=Pe(this.$$search),i=this.$$hash?"#"+ke(this.$$hash):"";this.$$url=Ri(this.$$path)+(t?"?"+t:"")+i;this.$$absUrl=e+(this.$$url?r+this.$$url:"");this.$$urlUpdatedByLocation=true};this.$$parseLinkUrl=function(t,r){if(Hi(e)===Hi(t)){this.$$parse(t);return true}return false}}function Bi(e,t,r){this.$$html5=true;qi.apply(this,arguments);this.$$parseLinkUrl=function(i,n){if(n&&n[0]==="#"){this.hash(n.slice(1));return true}var a;var o;if(e===Hi(i)){a=i}else if(o=Ui(t,i)){a=e+r+o}else if(t===i+"/"){a=t}if(a){this.$$parse(a)}return!!a};this.$$compose=function(){var t=Pe(this.$$search),i=this.$$hash?"#"+ke(this.$$hash):"";this.$$url=Ri(this.$$path)+(t?"?"+t:"")+i;this.$$absUrl=e+r+this.$$url;this.$$urlUpdatedByLocation=true}}var Xi={$$absUrl:"",$$html5:false,$$replace:false,absUrl:Ki("$$absUrl"),url:function(e){if(F(e)){return this.$$url}var t=ki.exec(e);if(t[1]||e==="")this.path(decodeURIComponent(t[1]));if(t[2]||t[1]||e==="")this.search(t[3]||"");this.hash(t[5]||"");return this},protocol:Ki("$$protocol"),host:Ki("$$host"),port:Ki("$$port"),path:Zi("$$path",function(e){e=e!==null?e.toString():"";return e.charAt(0)==="/"?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(Y(e)||W(e)){e=e.toString();this.$$search=Ae(e)}else if(U(e)){e=de(e,{});x(e,function(t,r){if(t==null)delete e[r]});this.$$search=e}else{throw Di("isrcharg","The first argument of the `$location#search()` call must be a string or an object.")}break;default:if(F(t)||t===null){delete this.$$search[e]}else{this.$$search[e]=t}}this.$$compose();return this},hash:Zi("$$hash",function(e){return e!==null?e.toString():""}),replace:function(){this.$$replace=true;return this}};x([Bi,qi,zi],function(e){e.prototype=Object.create(Xi);e.prototype.state=function(t){if(!arguments.length){return this.$$state}if(e!==zi||!this.$$html5){throw Di("nostate","History API state support is available only "+"in HTML5 mode and only in browsers supporting HTML5 History API")}this.$$state=F(t)?null:t;this.$$urlUpdatedByLocation=true;return this}});function Ki(e){return function(){return this[e]}}function Zi(e,t){return function(r){if(F(r)){return this[e]}this[e]=t(r);this.$$compose();return this}}function Qi(){var e="!",t={enabled:false,requireBase:true,rewriteLinks:true};this.hashPrefix=function(t){if(G(t)){e=t;return this}else{return e}};this.html5Mode=function(e){if(te(e)){t.enabled=e;return this}else if(U(e)){if(te(e.enabled)){t.enabled=e.enabled}if(te(e.requireBase)){t.requireBase=e.requireBase}if(te(e.rewriteLinks)||Y(e.rewriteLinks)){t.rewriteLinks=e.rewriteLinks}return this}else{return t}};this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(r,i,n,a,o){var s,l,u=i.baseHref(),c=i.url(),f;if(t.enabled){if(!u&&t.requireBase){throw Di("nobase","$location in HTML5 mode requires a <base> tag to be present!")}f=Vi(c)+(u||"/");l=n.history?zi:Bi}else{f=Hi(c);l=qi}var d=Wi(f);s=new l(f,d,"#"+e);s.$$parseLinkUrl(c,c);s.$$state=i.state();var p=/^\s*(javascript|mailto):/i;function v(e,t,r){var n=s.url();var a=s.$$state;try{i.url(e,t,r);s.$$state=i.state()}catch(e){s.url(n);s.$$state=a;throw e}}a.on("click",function(e){var n=t.rewriteLinks;if(!n||e.ctrlKey||e.metaKey||e.shiftKey||e.which===2||e.button===2)return;var o=h(e.target);while(ce(o[0])!=="a"){if(o[0]===a[0]||!(o=o.parent())[0])return}if(Y(n)&&F(o.attr(n)))return;var l=o.prop("href");var u=o.attr("href")||o.attr("xlink:href");if(U(l)&&l.toString()==="[object SVGAnimatedString]"){l=Zn(l.animVal).href}if(p.test(l))return;if(l&&!o.attr("target")&&!e.isDefaultPrevented()){if(s.$$parseLinkUrl(l,u)){e.preventDefault();if(s.absUrl()!==i.url()){r.$apply()}}}});if(Yi(s.absUrl())!==Yi(c)){i.url(s.absUrl(),true)}var g=true;i.onUrlChange(function(e,t){if(!Gi(e,d)){o.location.href=e;return}r.$evalAsync(function(){var i=s.absUrl();var n=s.$$state;var a;e=Yi(e);s.$$parse(e);s.$$state=t;a=r.$broadcast("$locationChangeStart",e,i,t,n).defaultPrevented;if(s.absUrl()!==e)return;if(a){s.$$parse(i);s.$$state=n;v(i,false,n)}else{g=false;m(i,n)}});if(!r.$$phase)r.$digest()});r.$watch(function e(){if(g||s.$$urlUpdatedByLocation){s.$$urlUpdatedByLocation=false;var t=Yi(i.url());var a=Yi(s.absUrl());var o=i.state();var l=s.$$replace;var u=t!==a||s.$$html5&&n.history&&o!==s.$$state;if(g||u){g=false;r.$evalAsync(function(){var e=s.absUrl();var i=r.$broadcast("$locationChangeStart",e,t,s.$$state,o).defaultPrevented;if(s.absUrl()!==e)return;if(i){s.$$parse(t);s.$$state=o}else{if(u){v(e,l,o===s.$$state?null:s.$$state)}m(t,o)}})}}s.$$replace=false});return s;function m(e,t){r.$broadcast("$locationChangeSuccess",s.absUrl(),e,s.$$state,t)}}]}function Ji(){var e=true,t=this;this.debugEnabled=function(t){if(G(t)){e=t;return this}else{return e}};this.$get=["$window",function(r){var i=f||/\bEdge\//.test(r.navigator&&r.navigator.userAgent);return{log:a("log"),info:a("info"),warn:a("warn"),error:a("error"),debug:function(){var r=a("debug");return function(){if(e){r.apply(t,arguments)}}}()};function n(e){if(q(e)){if(e.stack&&i){e=e.message&&e.stack.indexOf(e.message)===-1?"Error: "+e.message+"\n"+e.stack:e.stack}else if(e.sourceURL){e=e.message+"\n"+e.sourceURL+":"+e.line}}return e}function a(e){var t=r.console||{},i=t[e]||t.log||R;return function(){var e=[];x(arguments,function(t){e.push(n(t))});return Function.prototype.apply.call(i,t,e)}}}]}var en=a("$parse");var tn={}.constructor.prototype.valueOf;function rn(e){return e+""}var nn=Ze();x("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(e){nn[e]=true});var an={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'};var on=function e(t){this.options=t};on.prototype={constructor:on,lex:function(e){this.text=e;this.index=0;this.tokens=[];while(this.index<this.text.length){var t=this.text.charAt(this.index);if(t==='"'||t==="'"){this.readString(t)}else if(this.isNumber(t)||t==="."&&this.isNumber(this.peek())){this.readNumber()}else if(this.isIdentifierStart(this.peekMultichar())){this.readIdent()}else if(this.is(t,"(){}[].,;:?")){this.tokens.push({index:this.index,text:t});this.index++}else if(this.isWhitespace(t)){this.index++}else{var r=t+this.peek();var i=r+this.peek(2);var n=nn[t];var a=nn[r];var o=nn[i];if(n||a||o){var s=o?i:a?r:t;this.tokens.push({index:this.index,text:s,operator:true});this.index+=s.length}else{this.throwError("Unexpected next character ",this.index,this.index+1)}}}return this.tokens},is:function(e,t){return t.indexOf(e)!==-1},peek:function(e){var t=e||1;return this.index+t<this.text.length?this.text.charAt(this.index+t):false},isNumber:function(e){return"0"<=e&&e<="9"&&typeof e==="string"},isWhitespace:function(e){return e===" "||e==="\r"||e==="\t"||e==="\n"||e==="\v"||e===" "},isIdentifierStart:function(e){return this.options.isIdentifierStart?this.options.isIdentifierStart(e,this.codePointAt(e)):this.isValidIdentifierStart(e)},isValidIdentifierStart:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e||e==="$"},isIdentifierContinue:function(e){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(e,this.codePointAt(e)):this.isValidIdentifierContinue(e)},isValidIdentifierContinue:function(e,t){return this.isValidIdentifierStart(e,t)||this.isNumber(e)},codePointAt:function(e){if(e.length===1)return e.charCodeAt(0);return(e.charCodeAt(0)<<10)+e.charCodeAt(1)-56613888},peekMultichar:function(){var e=this.text.charAt(this.index);var t=this.peek();if(!t){return e}var r=e.charCodeAt(0);var i=t.charCodeAt(0);if(r>=55296&&r<=56319&&i>=56320&&i<=57343){return e+t}return e},isExpOperator:function(e){return e==="-"||e==="+"||this.isNumber(e)},throwError:function(e,t,r){r=r||this.index;var i=G(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,r)+"]":" "+r;throw en("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,i,this.text)},readNumber:function(){var e="";var t=this.index;while(this.index<this.text.length){var r=u(this.text.charAt(this.index));if(r==="."||this.isNumber(r)){e+=r}else{var i=this.peek();if(r==="e"&&this.isExpOperator(i)){e+=r}else if(this.isExpOperator(r)&&i&&this.isNumber(i)&&e.charAt(e.length-1)==="e"){e+=r}else if(this.isExpOperator(r)&&(!i||!this.isNumber(i))&&e.charAt(e.length-1)==="e"){this.throwError("Invalid exponent")}else{break}}this.index++}this.tokens.push({index:t,text:e,constant:true,value:Number(e)})},readIdent:function(){var e=this.index;this.index+=this.peekMultichar().length;while(this.index<this.text.length){var t=this.peekMultichar();if(!this.isIdentifierContinue(t)){break}this.index+=t.length}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:true})},readString:function(e){var t=this.index;this.index++;var r="";var i=e;var n=false;while(this.index<this.text.length){var a=this.text.charAt(this.index);i+=a;if(n){if(a==="u"){var o=this.text.substring(this.index+1,this.index+5);if(!o.match(/[\da-f]{4}/i)){this.throwError("Invalid unicode escape [\\u"+o+"]")}this.index+=4;r+=String.fromCharCode(parseInt(o,16))}else{var s=an[a];r=r+(s||a)}n=false}else if(a==="\\"){n=true}else if(a===e){this.index++;this.tokens.push({index:t,text:i,constant:true,value:r});return}else{r+=a}this.index++}this.throwError("Unterminated quote",t)}};var sn=function e(t,r){this.lexer=t;this.options=r};sn.Program="Program";sn.ExpressionStatement="ExpressionStatement";sn.AssignmentExpression="AssignmentExpression";sn.ConditionalExpression="ConditionalExpression";sn.LogicalExpression="LogicalExpression";sn.BinaryExpression="BinaryExpression";sn.UnaryExpression="UnaryExpression";sn.CallExpression="CallExpression";sn.MemberExpression="MemberExpression";sn.Identifier="Identifier";sn.Literal="Literal";sn.ArrayExpression="ArrayExpression";sn.Property="Property";sn.ObjectExpression="ObjectExpression";sn.ThisExpression="ThisExpression";sn.LocalsExpression="LocalsExpression";sn.NGValueParameter="NGValueParameter";sn.prototype={ast:function(e){this.text=e;this.tokens=this.lexer.lex(e);var t=this.program();if(this.tokens.length!==0){this.throwError("is an unexpected token",this.tokens[0])}return t},program:function(){var e=[];while(true){if(this.tokens.length>0&&!this.peek("}",")",";","]"))e.push(this.expressionStatement());if(!this.expect(";")){return{type:sn.Program,body:e}}}},expressionStatement:function(){return{type:sn.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){var e=this.expression();while(this.expect("|")){e=this.filter(e)}return e},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary();if(this.expect("=")){if(!gn(e)){throw en("lval","Trying to assign a value to a non l-value")}e={type:sn.AssignmentExpression,left:e,right:this.assignment(),operator:"="}}return e},ternary:function(){var e=this.logicalOR();var t;var r;if(this.expect("?")){t=this.expression();if(this.consume(":")){r=this.expression();return{type:sn.ConditionalExpression,test:e,alternate:t,consequent:r}}}return e},logicalOR:function(){var e=this.logicalAND();while(this.expect("||")){e={type:sn.LogicalExpression,operator:"||",left:e,right:this.logicalAND()}}return e},logicalAND:function(){var e=this.equality();while(this.expect("&&")){e={type:sn.LogicalExpression,operator:"&&",left:e,right:this.equality()}}return e},equality:function(){var e=this.relational();var t;while(t=this.expect("==","!=","===","!==")){e={type:sn.BinaryExpression,operator:t.text,left:e,right:this.relational()}}return e},relational:function(){var e=this.additive();var t;while(t=this.expect("<",">","<=",">=")){e={type:sn.BinaryExpression,operator:t.text,left:e,right:this.additive()}}return e},additive:function(){var e=this.multiplicative();var t;while(t=this.expect("+","-")){e={type:sn.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()}}return e},multiplicative:function(){var e=this.unary();var t;while(t=this.expect("*","/","%")){e={type:sn.BinaryExpression,operator:t.text,left:e,right:this.unary()}}return e},unary:function(){var e;if(e=this.expect("+","-","!")){return{type:sn.UnaryExpression,operator:e.text,prefix:true,argument:this.unary()}}else{return this.primary()}},primary:function(){var e;if(this.expect("(")){e=this.filterChain();this.consume(")")}else if(this.expect("[")){e=this.arrayDeclaration()}else if(this.expect("{")){e=this.object()}else if(this.selfReferential.hasOwnProperty(this.peek().text)){e=de(this.selfReferential[this.consume().text])}else if(this.options.literals.hasOwnProperty(this.peek().text)){e={type:sn.Literal,value:this.options.literals[this.consume().text]}}else if(this.peek().identifier){e=this.identifier()}else if(this.peek().constant){e=this.constant()}else{this.throwError("not a primary expression",this.peek())}var t;while(t=this.expect("(","[",".")){if(t.text==="("){e={type:sn.CallExpression,callee:e,arguments:this.parseArguments()};this.consume(")")}else if(t.text==="["){e={type:sn.MemberExpression,object:e,property:this.expression(),computed:true};this.consume("]")}else if(t.text==="."){e={type:sn.MemberExpression,object:e,property:this.identifier(),computed:false}}else{this.throwError("IMPOSSIBLE")}}return e},filter:function(e){var t=[e];var r={type:sn.CallExpression,callee:this.identifier(),arguments:t,filter:true};while(this.expect(":")){t.push(this.expression())}return r},parseArguments:function(){var e=[];if(this.peekToken().text!==")"){do{e.push(this.filterChain())}while(this.expect(","))}return e},identifier:function(){var e=this.consume();if(!e.identifier){this.throwError("is not a valid identifier",e)}return{type:sn.Identifier,name:e.text}},constant:function(){return{type:sn.Literal,value:this.consume().value}},arrayDeclaration:function(){var e=[];if(this.peekToken().text!=="]"){do{if(this.peek("]")){break}e.push(this.expression())}while(this.expect(","))}this.consume("]");return{type:sn.ArrayExpression,elements:e}},object:function(){var e=[],t;if(this.peekToken().text!=="}"){do{if(this.peek("}")){break}t={type:sn.Property,kind:"init"};if(this.peek().constant){t.key=this.constant();t.computed=false;this.consume(":");t.value=this.expression()}else if(this.peek().identifier){t.key=this.identifier();t.computed=false;if(this.peek(":")){this.consume(":");t.value=this.expression()}else{t.value=t.key}}else if(this.peek("[")){this.consume("[");t.key=this.expression();this.consume("]");t.computed=true;this.consume(":");t.value=this.expression()}else{this.throwError("invalid key",this.peek())}e.push(t)}while(this.expect(","))}this.consume("}");return{type:sn.ObjectExpression,properties:e}},throwError:function(e,t){throw en("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},consume:function(e){if(this.tokens.length===0){throw en("ueoe","Unexpected end of expression: {0}",this.text)}var t=this.expect(e);if(!t){this.throwError("is unexpected, expecting ["+e+"]",this.peek())}return t},peekToken:function(){if(this.tokens.length===0){throw en("ueoe","Unexpected end of expression: {0}",this.text)}return this.tokens[0]},peek:function(e,t,r,i){return this.peekAhead(0,e,t,r,i)},peekAhead:function(e,t,r,i,n){if(this.tokens.length>e){var a=this.tokens[e];var o=a.text;if(o===t||o===r||o===i||o===n||!t&&!r&&!i&&!n){return a}}return false},expect:function(e,t,r,i){var n=this.peek(e,t,r,i);if(n){this.tokens.shift();return n}return false},selfReferential:{this:{type:sn.ThisExpression},$locals:{type:sn.LocalsExpression}}};function ln(e,t){return typeof e!=="undefined"?e:t}function un(e,t){if(typeof e==="undefined")return t;if(typeof t==="undefined")return e;return e+t}function cn(e,t){var r=e(t);return!r.$stateful}var fn=1;var hn=2;function dn(e,t){switch(e.type){case sn.MemberExpression:if(e.computed){return false}break;case sn.UnaryExpression:return fn;case sn.BinaryExpression:return e.operator!=="+"?fn:false;case sn.CallExpression:return false}return undefined===t?hn:t}function pn(e,t,r){var i;var n;var a;var o=e.isPure=dn(e,r);switch(e.type){case sn.Program:i=true;x(e.body,function(e){pn(e.expression,t,o);i=i&&e.expression.constant});e.constant=i;break;case sn.Literal:e.constant=true;e.toWatch=[];break;case sn.UnaryExpression:pn(e.argument,t,o);e.constant=e.argument.constant;e.toWatch=e.argument.toWatch;break;case sn.BinaryExpression:pn(e.left,t,o);pn(e.right,t,o);e.constant=e.left.constant&&e.right.constant;e.toWatch=e.left.toWatch.concat(e.right.toWatch);break;case sn.LogicalExpression:pn(e.left,t,o);pn(e.right,t,o);e.constant=e.left.constant&&e.right.constant;e.toWatch=e.constant?[]:[e];break;case sn.ConditionalExpression:pn(e.test,t,o);pn(e.alternate,t,o);pn(e.consequent,t,o);e.constant=e.test.constant&&e.alternate.constant&&e.consequent.constant;e.toWatch=e.constant?[]:[e];break;case sn.Identifier:e.constant=false;e.toWatch=[e];break;case sn.MemberExpression:pn(e.object,t,o);if(e.computed){pn(e.property,t,o)}e.constant=e.object.constant&&(!e.computed||e.property.constant);e.toWatch=e.constant?[]:[e];break;case sn.CallExpression:a=e.filter?cn(t,e.callee.name):false;i=a;n=[];x(e.arguments,function(e){pn(e,t,o);i=i&&e.constant;n.push.apply(n,e.toWatch)});e.constant=i;e.toWatch=a?n:[e];break;case sn.AssignmentExpression:pn(e.left,t,o);pn(e.right,t,o);e.constant=e.left.constant&&e.right.constant;e.toWatch=[e];break;case sn.ArrayExpression:i=true;n=[];x(e.elements,function(e){pn(e,t,o);i=i&&e.constant;n.push.apply(n,e.toWatch)});e.constant=i;e.toWatch=n;break;case sn.ObjectExpression:i=true;n=[];x(e.properties,function(e){pn(e.value,t,o);i=i&&e.value.constant;n.push.apply(n,e.value.toWatch);if(e.computed){pn(e.key,t,false);i=i&&e.key.constant;n.push.apply(n,e.key.toWatch)}});e.constant=i;e.toWatch=n;break;case sn.ThisExpression:e.constant=false;e.toWatch=[];break;case sn.LocalsExpression:e.constant=false;e.toWatch=[];break}}function vn(e){if(e.length!==1)return;var t=e[0].expression;var r=t.toWatch;if(r.length!==1)return r;return r[0]!==t?r:undefined}function gn(e){return e.type===sn.Identifier||e.type===sn.MemberExpression}function mn(e){if(e.body.length===1&&gn(e.body[0].expression)){return{type:sn.AssignmentExpression,left:e.body[0].expression,right:{type:sn.NGValueParameter},operator:"="}}}function yn(e){return e.body.length===0||e.body.length===1&&(e.body[0].expression.type===sn.Literal||e.body[0].expression.type===sn.ArrayExpression||e.body[0].expression.type===sn.ObjectExpression)}function _n(e){return e.constant}function bn(e){this.$filter=e}bn.prototype={compile:function(e){var t=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]};pn(e,t.$filter);var r="";var i;this.stage="assign";if(i=mn(e)){this.state.computing="assign";var n=this.nextId();this.recurse(i,n);this.return_(n);r="fn.assign="+this.generateFunction("assign","s,v,l")}var a=vn(e.body);t.stage="inputs";x(a,function(e,r){var i="fn"+r;t.state[i]={vars:[],body:[],own:{}};t.state.computing=i;var n=t.nextId();t.recurse(e,n);t.return_(n);t.state.inputs.push({name:i,isPure:e.isPure});e.watchId=r});this.state.computing="fn";this.stage="main";this.recurse(e);var o='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+r+this.watchFns()+"return fn;";var s=new Function("$filter","getStringValue","ifDefined","plus",o)(this.$filter,rn,ln,un);this.state=this.stage=undefined;return s},USE:"use",STRICT:"strict",watchFns:function(){var e=[];var t=this.state.inputs;var r=this;x(t,function(t){e.push("var "+t.name+"="+r.generateFunction(t.name,"s"));if(t.isPure){e.push(t.name,".isPure="+JSON.stringify(t.isPure)+";")}});if(t.length){e.push("fn.inputs=["+t.map(function(e){return e.name}).join(",")+"];")}return e.join("")},generateFunction:function(e,t){return"function("+t+"){"+this.varsPrefix(e)+this.body(e)+"};"},filterPrefix:function(){var e=[];var t=this;x(this.state.filters,function(r,i){e.push(r+"=$filter("+t.escape(i)+")")});if(e.length)return"var "+e.join(",")+";";return""},varsPrefix:function(e){return this.state[e].vars.length?"var "+this.state[e].vars.join(",")+";":""},body:function(e){return this.state[e].body.join("")},recurse:function(e,t,r,i,n,a){var o,s,l=this,u,c,f;i=i||R;if(!a&&G(e.watchId)){t=t||this.nextId();this.if_("i",this.lazyAssign(t,this.computedMember("i",e.watchId)),this.lazyRecurse(e,t,r,i,n,true));return}switch(e.type){case sn.Program:x(e.body,function(t,r){l.recurse(t.expression,undefined,undefined,function(e){s=e});if(r!==e.body.length-1){l.current().body.push(s,";")}else{l.return_(s)}});break;case sn.Literal:c=this.escape(e.value);this.assign(t,c);i(t||c);break;case sn.UnaryExpression:this.recurse(e.argument,undefined,undefined,function(e){s=e});c=e.operator+"("+this.ifDefined(s,0)+")";this.assign(t,c);i(c);break;case sn.BinaryExpression:this.recurse(e.left,undefined,undefined,function(e){o=e});this.recurse(e.right,undefined,undefined,function(e){s=e});if(e.operator==="+"){c=this.plus(o,s)}else if(e.operator==="-"){c=this.ifDefined(o,0)+e.operator+this.ifDefined(s,0)}else{c="("+o+")"+e.operator+"("+s+")"}this.assign(t,c);i(c);break;case sn.LogicalExpression:t=t||this.nextId();l.recurse(e.left,t);l.if_(e.operator==="&&"?t:l.not(t),l.lazyRecurse(e.right,t));i(t);break;case sn.ConditionalExpression:t=t||this.nextId();l.recurse(e.test,t);l.if_(t,l.lazyRecurse(e.alternate,t),l.lazyRecurse(e.consequent,t));i(t);break;case sn.Identifier:t=t||this.nextId();if(r){r.context=l.stage==="inputs"?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",e.name)+"?l:s");r.computed=false;r.name=e.name}l.if_(l.stage==="inputs"||l.not(l.getHasOwnProperty("l",e.name)),function(){l.if_(l.stage==="inputs"||"s",function(){if(n&&n!==1){l.if_(l.isNull(l.nonComputedMember("s",e.name)),l.lazyAssign(l.nonComputedMember("s",e.name),"{}"))}l.assign(t,l.nonComputedMember("s",e.name))})},t&&l.lazyAssign(t,l.nonComputedMember("l",e.name)));i(t);break;case sn.MemberExpression:o=r&&(r.context=this.nextId())||this.nextId();t=t||this.nextId();l.recurse(e.object,o,undefined,function(){l.if_(l.notNull(o),function(){if(e.computed){s=l.nextId();l.recurse(e.property,s);l.getStringValue(s);if(n&&n!==1){l.if_(l.not(l.computedMember(o,s)),l.lazyAssign(l.computedMember(o,s),"{}"))}c=l.computedMember(o,s);l.assign(t,c);if(r){r.computed=true;r.name=s}}else{if(n&&n!==1){l.if_(l.isNull(l.nonComputedMember(o,e.property.name)),l.lazyAssign(l.nonComputedMember(o,e.property.name),"{}"))}c=l.nonComputedMember(o,e.property.name);l.assign(t,c);if(r){r.computed=false;r.name=e.property.name}}},function(){l.assign(t,"undefined")});i(t)},!!n);break;case sn.CallExpression:t=t||this.nextId();if(e.filter){s=l.filter(e.callee.name);u=[];x(e.arguments,function(e){var t=l.nextId();l.recurse(e,t);u.push(t)});c=s+"("+u.join(",")+")";l.assign(t,c);i(t)}else{s=l.nextId();o={};u=[];l.recurse(e.callee,s,o,function(){l.if_(l.notNull(s),function(){x(e.arguments,function(t){l.recurse(t,e.constant?undefined:l.nextId(),undefined,function(e){u.push(e)})});if(o.name){c=l.member(o.context,o.name,o.computed)+"("+u.join(",")+")"}else{c=s+"("+u.join(",")+")"}l.assign(t,c)},function(){l.assign(t,"undefined")});i(t)})}break;case sn.AssignmentExpression:s=this.nextId();o={};this.recurse(e.left,undefined,o,function(){l.if_(l.notNull(o.context),function(){l.recurse(e.right,s);c=l.member(o.context,o.name,o.computed)+e.operator+s;l.assign(t,c);i(t||c)})},1);break;case sn.ArrayExpression:u=[];x(e.elements,function(t){l.recurse(t,e.constant?undefined:l.nextId(),undefined,function(e){u.push(e)})});c="["+u.join(",")+"]";this.assign(t,c);i(t||c);break;case sn.ObjectExpression:u=[];f=false;x(e.properties,function(e){if(e.computed){f=true}});if(f){t=t||this.nextId();this.assign(t,"{}");x(e.properties,function(e){if(e.computed){o=l.nextId();l.recurse(e.key,o)}else{o=e.key.type===sn.Identifier?e.key.name:""+e.key.value}s=l.nextId();l.recurse(e.value,s);l.assign(l.member(t,o,e.computed),s)})}else{x(e.properties,function(t){l.recurse(t.value,e.constant?undefined:l.nextId(),undefined,function(e){u.push(l.escape(t.key.type===sn.Identifier?t.key.name:""+t.key.value)+":"+e)})});c="{"+u.join(",")+"}";this.assign(t,c)}i(t||c);break;case sn.ThisExpression:this.assign(t,"s");i(t||"s");break;case sn.LocalsExpression:this.assign(t,"l");i(t||"l");break;case sn.NGValueParameter:this.assign(t,"v");i(t||"v");break}},getHasOwnProperty:function(e,t){var r=e+"."+t;var i=this.current().own;if(!i.hasOwnProperty(r)){i[r]=this.nextId(false,e+"&&("+this.escape(t)+" in "+e+")")}return i[r]},assign:function(e,t){if(!e)return;this.current().body.push(e,"=",t,";");return e},filter:function(e){if(!this.state.filters.hasOwnProperty(e)){this.state.filters[e]=this.nextId(true)}return this.state.filters[e]},ifDefined:function(e,t){return"ifDefined("+e+","+this.escape(t)+")"},plus:function(e,t){return"plus("+e+","+t+")"},return_:function(e){this.current().body.push("return ",e,";")},if_:function(e,t,r){if(e===true){t()}else{var i=this.current().body;i.push("if(",e,"){");t();i.push("}");if(r){i.push("else{");r();i.push("}")}}},not:function(e){return"!("+e+")"},isNull:function(e){return e+"==null"},notNull:function(e){return e+"!=null"},nonComputedMember:function(e,t){var r=/^[$_a-zA-Z][$_a-zA-Z0-9]*$/;var i=/[^$_a-zA-Z0-9]/g;if(r.test(t)){return e+"."+t}else{return e+'["'+t.replace(i,this.stringEscapeFn)+'"]'}},computedMember:function(e,t){return e+"["+t+"]"},member:function(e,t,r){if(r)return this.computedMember(e,t);return this.nonComputedMember(e,t)},getStringValue:function(e){this.assign(e,"getStringValue("+e+")")},lazyRecurse:function(e,t,r,i,n,a){var o=this;return function(){o.recurse(e,t,r,i,n,a)}},lazyAssign:function(e,t){var r=this;return function(){r.assign(e,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)},escape:function(e){if(Y(e))return"'"+e.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(W(e))return e.toString();if(e===true)return"true";if(e===false)return"false";if(e===null)return"null";if(typeof e==="undefined")return"undefined";throw en("esc","IMPOSSIBLE")},nextId:function(e,t){var r="v"+this.state.nextId++;if(!e){this.current().vars.push(r+(t?"="+t:""))}return r},current:function(){return this.state[this.state.computing]}};function wn(e){this.$filter=e}wn.prototype={compile:function(e){var t=this;pn(e,t.$filter);var r;var i;if(r=mn(e)){i=this.recurse(r)}var n=vn(e.body);var a;if(n){a=[];x(n,function(e,r){var i=t.recurse(e);i.isPure=e.isPure;e.input=i;a.push(i);e.watchId=r})}var o=[];x(e.body,function(e){o.push(t.recurse(e.expression))});var s=e.body.length===0?R:e.body.length===1?o[0]:function(e,t){var r;x(o,function(i){r=i(e,t)});return r};if(i){s.assign=function(e,t,r){return i(e,r,t)}}if(a){s.inputs=a}return s},recurse:function(e,t,r){var i,n,a=this,o;if(e.input){return this.inputs(e.input,e.watchId)}switch(e.type){case sn.Literal:return this.value(e.value,t);case sn.UnaryExpression:n=this.recurse(e.argument);return this["unary"+e.operator](n,t);case sn.BinaryExpression:i=this.recurse(e.left);n=this.recurse(e.right);return this["binary"+e.operator](i,n,t);case sn.LogicalExpression:i=this.recurse(e.left);n=this.recurse(e.right);return this["binary"+e.operator](i,n,t);case sn.ConditionalExpression:return this["ternary?:"](this.recurse(e.test),this.recurse(e.alternate),this.recurse(e.consequent),t);case sn.Identifier:return a.identifier(e.name,t,r);case sn.MemberExpression:i=this.recurse(e.object,false,!!r);if(!e.computed){n=e.property.name}if(e.computed)n=this.recurse(e.property);return e.computed?this.computedMember(i,n,t,r):this.nonComputedMember(i,n,t,r);case sn.CallExpression:o=[];x(e.arguments,function(e){o.push(a.recurse(e))});if(e.filter)n=this.$filter(e.callee.name);if(!e.filter)n=this.recurse(e.callee,true);return e.filter?function(e,r,i,a){var s=[];for(var l=0;l<o.length;++l){s.push(o[l](e,r,i,a))}var u=n.apply(undefined,s,a);return t?{context:undefined,name:undefined,value:u}:u}:function(e,r,i,a){var s=n(e,r,i,a);var l;if(s.value!=null){var u=[];for(var c=0;c<o.length;++c){u.push(o[c](e,r,i,a))}l=s.value.apply(s.context,u)}return t?{value:l}:l};case sn.AssignmentExpression:i=this.recurse(e.left,true,1);n=this.recurse(e.right);return function(e,r,a,o){var s=i(e,r,a,o);var l=n(e,r,a,o);s.context[s.name]=l;return t?{value:l}:l};case sn.ArrayExpression:o=[];x(e.elements,function(e){o.push(a.recurse(e))});return function(e,r,i,n){var a=[];for(var s=0;s<o.length;++s){a.push(o[s](e,r,i,n))}return t?{value:a}:a};case sn.ObjectExpression:o=[];x(e.properties,function(e){if(e.computed){o.push({key:a.recurse(e.key),computed:true,value:a.recurse(e.value)})}else{o.push({key:e.key.type===sn.Identifier?e.key.name:""+e.key.value,computed:false,value:a.recurse(e.value)})}});return function(e,r,i,n){var a={};for(var s=0;s<o.length;++s){if(o[s].computed){a[o[s].key(e,r,i,n)]=o[s].value(e,r,i,n)}else{a[o[s].key]=o[s].value(e,r,i,n)}}return t?{value:a}:a};case sn.ThisExpression:return function(e){return t?{value:e}:e};case sn.LocalsExpression:return function(e,r){return t?{value:r}:r};case sn.NGValueParameter:return function(e,r,i){return t?{value:i}:i}}},"unary+":function(e,t){return function(r,i,n,a){var o=e(r,i,n,a);if(G(o)){o=+o}else{o=0}return t?{value:o}:o}},"unary-":function(e,t){return function(r,i,n,a){var o=e(r,i,n,a);if(G(o)){o=-o}else{o=-0}return t?{value:o}:o}},"unary!":function(e,t){return function(r,i,n,a){var o=!e(r,i,n,a);return t?{value:o}:o}},"binary+":function(e,t,r){return function(i,n,a,o){var s=e(i,n,a,o);var l=t(i,n,a,o);var u=un(s,l);return r?{value:u}:u}},"binary-":function(e,t,r){return function(i,n,a,o){var s=e(i,n,a,o);var l=t(i,n,a,o);var u=(G(s)?s:0)-(G(l)?l:0);return r?{value:u}:u}},"binary*":function(e,t,r){return function(i,n,a,o){var s=e(i,n,a,o)*t(i,n,a,o);return r?{value:s}:s}},"binary/":function(e,t,r){return function(i,n,a,o){var s=e(i,n,a,o)/t(i,n,a,o);return r?{value:s}:s}},"binary%":function(e,t,r){return function(i,n,a,o){var s=e(i,n,a,o)%t(i,n,a,o);return r?{value:s}:s}},"binary===":function(e,t,r){return function(i,n,a,o){var s=e(i,n,a,o)===t(i,n,a,o);return r?{value:s}:s}},"binary!==":function(e,t,r){return function(i,n,a,o){var s=e(i,n,a,o)!==t(i,n,a,o);return r?{value:s}:s}},"binary==":function(e,t,r){return function(i,n,a,o){var s=e(i,n,a,o)==t(i,n,a,o);return r?{value:s}:s}},"binary!=":function(e,t,r){return function(i,n,a,o){var s=e(i,n,a,o)!=t(i,n,a,o);return r?{value:s}:s}},"binary<":function(e,t,r){return function(i,n,a,o){var s=e(i,n,a,o)<t(i,n,a,o);return r?{value:s}:s}},"binary>":function(e,t,r){return function(i,n,a,o){var s=e(i,n,a,o)>t(i,n,a,o);return r?{value:s}:s}},"binary<=":function(e,t,r){return function(i,n,a,o){var s=e(i,n,a,o)<=t(i,n,a,o);return r?{value:s}:s}},"binary>=":function(e,t,r){return function(i,n,a,o){var s=e(i,n,a,o)>=t(i,n,a,o);return r?{value:s}:s}},"binary&&":function(e,t,r){return function(i,n,a,o){var s=e(i,n,a,o)&&t(i,n,a,o);return r?{value:s}:s}},"binary||":function(e,t,r){return function(i,n,a,o){var s=e(i,n,a,o)||t(i,n,a,o);return r?{value:s}:s}},"ternary?:":function(e,t,r,i){return function(n,a,o,s){var l=e(n,a,o,s)?t(n,a,o,s):r(n,a,o,s);return i?{value:l}:l}},value:function(e,t){return function(){return t?{context:undefined,name:undefined,value:e}:e}},identifier:function(e,t,r){return function(i,n,a,o){var s=n&&e in n?n:i;if(r&&r!==1&&s&&s[e]==null){s[e]={}}var l=s?s[e]:undefined;if(t){return{context:s,name:e,value:l}}else{return l}}},computedMember:function(e,t,r,i){return function(n,a,o,s){var l=e(n,a,o,s);var u;var c;if(l!=null){u=t(n,a,o,s);u=rn(u);if(i&&i!==1){if(l&&!l[u]){l[u]={}}}c=l[u]}if(r){return{context:l,name:u,value:c}}else{return c}}},nonComputedMember:function(e,t,r,i){return function(n,a,o,s){var l=e(n,a,o,s);if(i&&i!==1){if(l&&l[t]==null){l[t]={}}}var u=l!=null?l[t]:undefined;if(r){return{context:l,name:t,value:u}}else{return u}}},inputs:function(e,t){return function(r,i,n,a){if(a)return a[t];return e(r,i,n)}}};function Sn(e,t,r){this.ast=new sn(e,r);this.astCompiler=r.csp?new wn(t):new bn(t)}Sn.prototype={constructor:Sn,parse:function(e){var t=this.getAst(e);var r=this.astCompiler.compile(t.ast);r.literal=yn(t.ast);r.constant=_n(t.ast);r.oneTime=t.oneTime;return r},getAst:function(e){var t=false;e=e.trim();if(e.charAt(0)===":"&&e.charAt(1)===":"){t=true;e=e.substring(2)}return{ast:this.ast.ast(e),oneTime:t}}};function Cn(e){return B(e.valueOf)?e.valueOf():tn.call(e)}function xn(){var e=Ze();var t={true:true,false:false,null:null,undefined:undefined};var r,i;this.addLiteral=function(e,r){t[e]=r};this.setIdentifierFns=function(e,t){r=e;i=t;return this};this.$get=["$filter",function(n){var a=ge().noUnsafeEval;var o={csp:a,literals:de(t),isIdentifierStart:B(r)&&r,isIdentifierContinue:B(i)&&i};s.$$getAst=l;return s;function s(t,r){var i,a;switch(typeof t){case"string":t=t.trim();a=t;i=e[a];if(!i){var s=new on(o);var l=new Sn(s,n,o);i=l.parse(t);e[a]=p(i)}return g(i,r);case"function":return g(t,r);default:return g(R,r)}}function l(e){var t=new on(o);var r=new Sn(t,n,o);return r.getAst(e).ast}function u(e,t,r){if(e==null||t==null){return e===t}if(typeof e==="object"){e=Cn(e);if(typeof e==="object"&&!r){return false}}return e===t||e!==e&&t!==t}function c(e,t,r,i,n){var a=i.inputs;var o;if(a.length===1){var s=u;a=a[0];return e.$watch(function e(t){var r=a(t);if(!u(r,s,a.isPure)){o=i(t,undefined,undefined,[r]);s=r&&Cn(r)}return o},t,r,n)}var l=[];var c=[];for(var f=0,h=a.length;f<h;f++){l[f]=u;c[f]=null}return e.$watch(function e(t){var r=false;for(var n=0,s=a.length;n<s;n++){var f=a[n](t);if(r||(r=!u(f,l[n],a[n].isPure))){c[n]=f;l[n]=f&&Cn(f)}}if(r){o=i(t,undefined,undefined,c)}return o},t,r,n)}function f(e,t,r,i,n){var a=i.literal?h:G;var o,s;var l=i.$$intercepted||i;var u=i.$$interceptor||L;var c=i.inputs&&!l.inputs;d.literal=i.literal;d.constant=i.constant;d.inputs=i.inputs;p(d);o=e.$watch(d,t,r,n);return o;function f(){if(a(s)){o()}}function d(e,t,r,i){s=c&&i?i[0]:l(e,t,r,i);if(a(s)){e.$$postDigest(f)}return u(s)}}function h(e){var t=true;x(e,function(e){if(!G(e))t=false});return t}function d(e,t,r,i){var n=e.$watch(function e(t){n();return i(t)},t,r);return n}function p(e){if(e.constant){e.$$watchDelegate=d}else if(e.oneTime){e.$$watchDelegate=f}else if(e.inputs){e.$$watchDelegate=c}return e}function v(e,t){function r(r){return t(e(r))}r.$stateful=e.$stateful||t.$stateful;r.$$pure=e.$$pure&&t.$$pure;return r}function g(e,t){if(!t)return e;if(e.$$interceptor){t=v(e.$$interceptor,t);e=e.$$intercepted}var r=false;var i=function i(n,a,o,s){var l=r&&s?s[0]:e(n,a,o,s);return t(l)};i.$$intercepted=e;i.$$interceptor=t;i.literal=e.literal;i.oneTime=e.oneTime;i.constant=e.constant;if(!t.$stateful){r=!e.inputs;i.inputs=e.inputs?e.inputs:[e];if(!t.$$pure){i.inputs=i.inputs.map(function(e){if(e.isPure===hn){return function t(r){return e(r)}}return e})}}return p(i)}}]}function On(){var e=true;this.$get=["$rootScope","$exceptionHandler",function(t,r){return En(function(e){t.$evalAsync(e)},r,e)}];this.errorOnUnhandledRejections=function(t){if(G(t)){e=t;return this}else{return e}}}function Tn(){var e=true;this.$get=["$browser","$exceptionHandler",function(t,r){return En(function(e){t.defer(e)},r,e)}];this.errorOnUnhandledRejections=function(t){if(G(t)){e=t;return this}else{return e}}}function En(e,t,r){var i=a("$q",TypeError);var n=0;var o=[];function s(){return new l}function l(){var e=this.promise=new u;this.resolve=function(t){d(e,t)};this.reject=function(t){v(e,t)};this.notify=function(t){m(e,t)}}function u(){this.$$state={status:0}}A(u.prototype,{then:function(e,t,r){if(F(e)&&F(t)&&F(r)){return this}var i=new u;this.$$state.pending=this.$$state.pending||[];this.$$state.pending.push([i,e,t,r]);if(this.$$state.status>0)h(this.$$state);return i},catch:function(e){return this.then(null,e)},finally:function(e,t){return this.then(function(t){return _(t,w,e)},function(t){return _(t,y,e)},t)}});function c(i){var a,o,s;s=i.pending;i.processScheduled=false;i.pending=undefined;try{for(var l=0,u=s.length;l<u;++l){jn(i);o=s[l][0];a=s[l][i.status];try{if(B(a)){d(o,a(i.value))}else if(i.status===1){d(o,i.value)}else{v(o,i.value)}}catch(e){v(o,e);if(e&&e.$$passToExceptionHandler===true){t(e)}}}}finally{--n;if(r&&n===0){e(f)}}}function f(){while(!n&&o.length){var e=o.shift();if(!Mn(e)){jn(e);var r="Possibly unhandled rejection: "+lt(e.value);if(q(e.value)){t(e.value,r)}else{t(r)}}}}function h(t){if(r&&!t.pending&&t.status===2&&!Mn(t)){if(n===0&&o.length===0){e(f)}o.push(t)}if(t.processScheduled||!t.pending)return;t.processScheduled=true;++n;e(function(){c(t)})}function d(e,t){if(e.$$state.status)return;if(t===e){g(e,i("qcycle","Expected promise to be resolved with value other than itself '{0}'",t))}else{p(e,t)}}function p(e,t){var r;var i=false;try{if(U(t)||B(t))r=t.then;if(B(r)){e.$$state.status=-1;r.call(t,n,a,o)}else{e.$$state.value=t;e.$$state.status=1;h(e.$$state)}}catch(e){a(e)}function n(t){if(i)return;i=true;p(e,t)}function a(t){if(i)return;i=true;g(e,t)}function o(t){m(e,t)}}function v(e,t){if(e.$$state.status)return;g(e,t)}function g(e,t){e.$$state.value=t;e.$$state.status=2;h(e.$$state)}function m(r,i){var n=r.$$state.pending;if(r.$$state.status<=0&&n&&n.length){e(function(){var e,r;for(var a=0,o=n.length;a<o;a++){r=n[a][0];e=n[a][3];try{m(r,B(e)?e(i):i)}catch(e){t(e)}}})}}function y(e){var t=new u;v(t,e);return t}function _(e,t,r){var i=null;try{if(B(r))i=r()}catch(e){return y(e)}if(re(i)){return i.then(function(){return t(e)},y)}else{return t(e)}}function b(e,t,r,i){var n=new u;d(n,e);return n.then(t,r,i)}var w=b;function S(e){var t=new u,r=0,i=z(e)?[]:{};x(e,function(e,n){r++;b(e).then(function(e){i[n]=e;if(!--r)d(t,i)},function(e){v(t,e)})});if(r===0){d(t,i)}return t}function C(e){var t=s();x(e,function(e){b(e).then(t.resolve,t.reject)});return t.promise}function O(e){if(!B(e)){throw i("norslvr","Expected resolverFn, got '{0}'",e)}var t=new u;function r(e){d(t,e)}function n(e){v(t,e)}e(r,n);return t}O.prototype=u.prototype;O.defer=s;O.reject=y;O.when=b;O.resolve=w;O.all=S;O.race=C;return O}function Mn(e){return!!e.pur}function jn(e){e.pur=true}function An(e){jn(e.$$state)}function Pn(){this.$get=["$window","$timeout",function(e,t){var r=e.requestAnimationFrame||e.webkitRequestAnimationFrame;var i=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame;var n=!!r;var a=n?function(e){var t=r(e);return function(){i(t)}}:function(e){var r=t(e,16.66,false);return function(){t.cancel(r)}};a.supported=n;return a}]}function kn(){var e=10;var t=a("$rootScope");var r=null;var i=null;this.digestTtl=function(t){if(arguments.length){e=t}return e};function n(e){function t(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$id=E();this.$$ChildScope=null;this.$$suspended=false}t.prototype=e;return t}this.$get=["$exceptionHandler","$parse","$browser",function(a,o,s){function u(e){e.currentScope.$$destroyed=true}function c(e){if(f===9){if(e.$$childHead){c(e.$$childHead)}if(e.$$nextSibling){c(e.$$nextSibling)}}e.$parent=e.$$nextSibling=e.$$prevSibling=e.$$childHead=e.$$childTail=e.$root=e.$$watchers=null}function h(){this.$id=E();this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this.$root=this;this.$$destroyed=false;this.$$suspended=false;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$$isolateBindings=null}h.prototype={constructor:h,$new:function(e,t){var r;t=t||this;if(e){r=new h;r.$root=this.$root}else{if(!this.$$ChildScope){this.$$ChildScope=n(this)}r=new this.$$ChildScope}r.$parent=t;r.$$prevSibling=t.$$childTail;if(t.$$childHead){t.$$childTail.$$nextSibling=r;t.$$childTail=r}else{t.$$childHead=t.$$childTail=r}if(e||t!==this)r.$on("$destroy",u);return r},$watch:function(e,t,i,n){var a=o(e);var s=B(t)?t:R;if(a.$$watchDelegate){return a.$$watchDelegate(this,s,i,a,e)}var l=this,u=l.$$watchers,c={fn:s,last:S,get:a,exp:n||e,eq:!!i};r=null;if(!u){u=l.$$watchers=[];u.$$digestWatchIndex=-1}u.unshift(c);u.$$digestWatchIndex++;b(this,1);return function e(){var t=he(u,c);if(t>=0){b(l,-1);if(t<u.$$digestWatchIndex){u.$$digestWatchIndex--}}r=null}},$watchGroup:function(e,t){var r=new Array(e.length);var i=new Array(e.length);var n=[];var a=this;var o=false;var s=true;if(!e.length){var l=true;a.$evalAsync(function(){if(l)t(i,i,a)});return function e(){l=false}}if(e.length===1){return this.$watch(e[0],function e(n,a,o){i[0]=n;r[0]=a;t(i,n===a?i:r,o)})}x(e,function(e,t){var r=a.$watch(e,function e(r){i[t]=r;if(!o){o=true;a.$evalAsync(u)}});n.push(r)});function u(){o=false;try{if(s){s=false;t(i,i,a)}else{t(i,r,a)}}finally{for(var n=0;n<e.length;n++){r[n]=i[n]}}}return function e(){while(n.length){n.shift()()}}},$watchCollection:function(e,t){v.$$pure=o(e).literal;v.$stateful=!v.$$pure;var r=this;var i;var n;var a;var s=t.length>1;var u=0;var c=o(e,v);var f=[];var h={};var d=true;var p=0;function v(e){i=e;var t,r,a,o,s;if(F(i))return;if(!U(i)){if(n!==i){n=i;u++}}else if(C(i)){if(n!==f){n=f;p=n.length=0;u++}t=i.length;if(p!==t){u++;n.length=p=t}for(var c=0;c<t;c++){s=n[c];o=i[c];a=s!==s&&o!==o;if(!a&&s!==o){u++;n[c]=o}}}else{if(n!==h){n=h={};p=0;u++}t=0;for(r in i){if(l.call(i,r)){t++;o=i[r];s=n[r];if(r in n){a=s!==s&&o!==o;if(!a&&s!==o){u++;n[r]=o}}else{p++;n[r]=o;u++}}}if(p>t){u++;for(r in n){if(!l.call(i,r)){p--;delete n[r]}}}}return u}function g(){if(d){d=false;t(i,i,r)}else{t(i,a,r)}if(s){if(!U(i)){a=i}else if(C(i)){a=new Array(i.length);for(var e=0;e<i.length;e++){a[e]=i[e]}}else{a={};for(var n in i){if(l.call(i,n)){a[n]=i[n]}}}}}return this.$watch(c,g)},$digest:function(){var n,o,l,u,c,f,h,g=e,b,w,C=p.length?d:this,x=[],T,E;y("$digest");s.$$checkUrlChange();if(this===d&&i!==null){s.defer.cancel(i);O()}r=null;do{h=false;w=C;for(var M=0;M<p.length;M++){try{E=p[M];u=E.fn;u(E.scope,E.locals)}catch(e){a(e)}r=null}p.length=0;e:do{if(f=!w.$$suspended&&w.$$watchers){f.$$digestWatchIndex=f.length;while(f.$$digestWatchIndex--){try{n=f[f.$$digestWatchIndex];if(n){c=n.get;if((o=c(w))!==(l=n.last)&&!(n.eq?ve(o,l):I(o)&&I(l))){h=true;r=n;n.last=n.eq?de(o,null):o;u=n.fn;u(o,l===S?o:l,w);if(g<5){T=4-g;if(!x[T])x[T]=[];x[T].push({msg:B(n.exp)?"fn: "+(n.exp.name||n.exp.toString()):n.exp,newVal:o,oldVal:l})}}else if(n===r){h=false;break e}}}catch(e){a(e)}}}if(!(b=!w.$$suspended&&w.$$watchersCount&&w.$$childHead||w!==C&&w.$$nextSibling)){while(w!==C&&!(b=w.$$nextSibling)){w=w.$parent}}}while(w=b);if((h||p.length)&&!g--){_();throw t("infdig","{0} $digest() iterations reached. Aborting!\n"+"Watchers fired in the last 5 iterations: {1}",e,x)}}while(h||p.length);_();while(m<v.length){try{v[m++]()}catch(e){a(e)}}v.length=m=0;s.$$checkUrlChange()},$suspend:function(){this.$$suspended=true},$isSuspended:function(){return this.$$suspended},$resume:function(){this.$$suspended=false},$destroy:function(){if(this.$$destroyed)return;var e=this.$parent;this.$broadcast("$destroy");this.$$destroyed=true;if(this===d){s.$$applicationDestroyed()}b(this,-this.$$watchersCount);for(var t in this.$$listenerCount){w(this,this.$$listenerCount[t],t)}if(e&&e.$$childHead===this)e.$$childHead=this.$$nextSibling;if(e&&e.$$childTail===this)e.$$childTail=this.$$prevSibling;if(this.$$prevSibling)this.$$prevSibling.$$nextSibling=this.$$nextSibling;if(this.$$nextSibling)this.$$nextSibling.$$prevSibling=this.$$prevSibling;this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=R;this.$on=this.$watch=this.$watchGroup=function(){return R};this.$$listeners={};this.$$nextSibling=null;c(this)},$eval:function(e,t){return o(e)(this,t)},$evalAsync:function(e,t){if(!d.$$phase&&!p.length){s.defer(function(){if(p.length){d.$digest()}})}p.push({scope:this,fn:o(e),locals:t})},$$postDigest:function(e){v.push(e)},$apply:function(e){try{y("$apply");try{return this.$eval(e)}finally{_()}}catch(e){a(e)}finally{try{d.$digest()}catch(e){a(e);throw e}}},$applyAsync:function(e){var t=this;if(e){g.push(r)}e=o(e);T();function r(){t.$eval(e)}},$on:function(e,t){var r=this.$$listeners[e];if(!r){this.$$listeners[e]=r=[]}r.push(t);var i=this;do{if(!i.$$listenerCount[e]){i.$$listenerCount[e]=0}i.$$listenerCount[e]++}while(i=i.$parent);var n=this;return function(){var i=r.indexOf(t);if(i!==-1){delete r[i];w(n,1,e)}}},$emit:function(e,t){var r=[],i,n=this,o=false,s={name:e,targetScope:n,stopPropagation:function(){o=true},preventDefault:function(){s.defaultPrevented=true},defaultPrevented:false},l=ye([s],arguments,1),u,c;do{i=n.$$listeners[e]||r;s.currentScope=n;for(u=0,c=i.length;u<c;u++){if(!i[u]){i.splice(u,1);u--;c--;continue}try{i[u].apply(null,l)}catch(e){a(e)}}if(o){break}n=n.$parent}while(n);s.currentScope=null;return s},$broadcast:function(e,t){var r=this,i=r,n=r,o={name:e,targetScope:r,preventDefault:function(){o.defaultPrevented=true},defaultPrevented:false};if(!r.$$listenerCount[e])return o;var s=ye([o],arguments,1),l,u,c;while(i=n){o.currentScope=i;l=i.$$listeners[e]||[];for(u=0,c=l.length;u<c;u++){if(!l[u]){l.splice(u,1);u--;c--;continue}try{l[u].apply(null,s)}catch(e){a(e)}}if(!(n=i.$$listenerCount[e]&&i.$$childHead||i!==r&&i.$$nextSibling)){while(i!==r&&!(n=i.$$nextSibling)){i=i.$parent}}}o.currentScope=null;return o}};var d=new h;var p=d.$$asyncQueue=[];var v=d.$$postDigestQueue=[];var g=d.$$applyAsyncQueue=[];var m=0;return d;function y(e){if(d.$$phase){throw t("inprog","{0} already in progress",d.$$phase)}d.$$phase=e}function _(){d.$$phase=null}function b(e,t){do{e.$$watchersCount+=t}while(e=e.$parent)}function w(e,t,r){do{e.$$listenerCount[r]-=t;if(e.$$listenerCount[r]===0){delete e.$$listenerCount[r]}}while(e=e.$parent)}function S(){}function O(){while(g.length){try{g.shift()()}catch(e){a(e)}}i=null}function T(){if(i===null){i=s.defer(function(){d.$apply(O)})}}}]}function In(){var e=/^\s*(https?|s?ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){if(G(t)){e=t;return this}return e};this.imgSrcSanitizationWhitelist=function(e){if(G(e)){t=e;return this}return t};this.$get=function(){return function r(i,n){var a=n?t:e;var o=Zn(i&&i.trim()).href;if(o!==""&&!o.match(a)){return"unsafe:"+o}return i}}}var Dn=a("$sce");var Rn={HTML:"html",CSS:"css",MEDIA_URL:"mediaUrl",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"};var Ln=/_([a-z])/g;function $n(e){return e.replace(Ln,_t)}function Nn(e){if(e==="self"){return e}else if(Y(e)){if(e.indexOf("***")>-1){throw Dn("iwcard","Illegal sequence *** in string matcher.  String: {0}",e)}e=se(e).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*");return new RegExp("^"+e+"$")}else if(X(e)){return new RegExp("^"+e.source+"$")}else{throw Dn("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}}function Fn(e){var t=[];if(G(e)){x(e,function(e){t.push(Nn(e))})}return t}function Gn(){this.SCE_CONTEXTS=Rn;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){if(arguments.length){e=Fn(t)}return e};this.resourceUrlBlacklist=function(e){if(arguments.length){t=Fn(e)}return t};this.$get=["$injector","$$sanitizeUri",function(r,i){var n=function e(t){throw Dn("unsafe","Attempting to use an unsafe value in a safe context.")};if(r.has("$sanitize")){n=r.get("$sanitize")}function a(e,t){if(e==="self"){return Qn(t)||Jn(t)}else{return!!e.exec(t.href)}}function o(r){var i=Zn(r.toString());var n,o,s=false;for(n=0,o=e.length;n<o;n++){if(a(e[n],i)){s=true;break}}if(s){for(n=0,o=t.length;n<o;n++){if(a(t[n],i)){s=false;break}}}return s}function s(e){var t=function e(t){this.$$unwrapTrustedValue=function(){return t}};if(e){t.prototype=new e}t.prototype.valueOf=function e(){return this.$$unwrapTrustedValue()};t.prototype.toString=function e(){return this.$$unwrapTrustedValue().toString()};return t}var l=s(),u={};u[Rn.HTML]=s(l);u[Rn.CSS]=s(l);u[Rn.MEDIA_URL]=s(l);u[Rn.URL]=s(u[Rn.MEDIA_URL]);u[Rn.JS]=s(l);u[Rn.RESOURCE_URL]=s(u[Rn.URL]);function c(e,t){var r=u.hasOwnProperty(e)?u[e]:null;if(!r){throw Dn("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t)}if(t===null||F(t)||t===""){return t}if(typeof t!=="string"){throw Dn("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e)}return new r(t)}function f(e){if(e instanceof l){return e.$$unwrapTrustedValue()}else{return e}}function h(e,t){if(t===null||F(t)||t===""){return t}var r=u.hasOwnProperty(e)?u[e]:null;if(r&&t instanceof r){return t.$$unwrapTrustedValue()}if(B(t.$$unwrapTrustedValue)){t=t.$$unwrapTrustedValue()}if(e===Rn.MEDIA_URL||e===Rn.URL){return i(t,e===Rn.MEDIA_URL)}else if(e===Rn.RESOURCE_URL){if(o(t)){return t}else{throw Dn("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}}else if(e===Rn.HTML){return n(t)}throw Dn("unsafe","Attempting to use an unsafe value in a safe context.")}return{trustAs:c,getTrusted:h,valueOf:f}}]}function Un(){var e=true;this.enabled=function(t){if(arguments.length){e=!!t}return e};this.$get=["$parse","$sceDelegate",function(t,r){if(e&&f<8){throw Dn("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks "+"mode.  You can fix this by adding the text <!doctype html> to the top of your HTML "+"document.  See http://docs.angularjs.org/api/ng.$sce for more information.")}var i=ot(Rn);i.isEnabled=function(){return e};i.trustAs=r.trustAs;i.getTrusted=r.getTrusted;i.valueOf=r.valueOf;if(!e){i.trustAs=i.getTrusted=function(e,t){return t};i.valueOf=L}i.parseAs=function e(r,n){var a=t(n);if(a.literal&&a.constant){return a}else{return t(n,function(e){return i.getTrusted(r,e)})}};var n=i.parseAs,a=i.getTrusted,o=i.trustAs;x(Rn,function(e,t){var r=u(t);i[$n("parse_as_"+r)]=function(t){return n(e,t)};i[$n("get_trusted_"+r)]=function(t){return a(e,t)};i[$n("trust_as_"+r)]=function(t){return o(e,t)}});return i}]}function Hn(){this.$get=["$window","$document",function(e,t){var r={},i=e.nw&&e.nw.process,n=!i&&e.chrome&&(e.chrome.app&&e.chrome.app.runtime||!e.chrome.app&&e.chrome.runtime&&e.chrome.runtime.id),a=!n&&e.history&&e.history.pushState,o=k((/android (\d+)/.exec(u((e.navigator||{}).userAgent))||[])[1]),s=/Boxee/i.test((e.navigator||{}).userAgent),l=t[0]||{},c=l.body&&l.body.style,h=false,d=false;if(c){h=!!("transition"in c||"webkitTransition"in c);d=!!("animation"in c||"webkitAnimation"in c)}return{history:!!(a&&!(o<4)&&!s),hasEvent:function(e){if(e==="input"&&f)return false;if(F(r[e])){var t=l.createElement("div");r[e]="on"+e in t}return r[e]},csp:ge(),transitions:h,animations:d,android:o}}]}var Yn=a("$templateRequest");function Wn(){var e;this.httpOptions=function(t){if(t){e=t;return this}return e};this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(t,r,i,n,a){function o(s,l){o.totalPendingRequests++;if(!Y(s)||F(r.get(s))){s=a.getTrustedResourceUrl(s)}var u=i.defaults&&i.defaults.transformResponse;if(z(u)){u=u.filter(function(e){return e!==mi})}else if(u===mi){u=null}return i.get(s,A({cache:r,transformResponse:u},e)).finally(function(){o.totalPendingRequests--}).then(function(e){return r.put(s,e.data)},c);function c(e){if(!l){e=Yn("tpload","Failed to load template: {0} (HTTP status: {1} {2})",s,e.status,e.statusText);t(e)}return n.reject(e)}}o.totalPendingRequests=0;return o}]}function Vn(){this.$get=["$rootScope","$browser","$location",function(e,t,r){var i={};i.findBindings=function(e,t,r){var i=e.getElementsByClassName("ng-binding");var n=[];x(i,function(e){var i=b.element(e).data("$binding");if(i){x(i,function(i){if(r){var a=new RegExp("(^|\\s)"+se(t)+"(\\s|\\||$)");if(a.test(i)){n.push(e)}}else{if(i.indexOf(t)!==-1){n.push(e)}}})}});return n};i.findModels=function(e,t,r){var i=["ng-","data-ng-","ng\\:"];for(var n=0;n<i.length;++n){var a=r?"=":"*=";var o="["+i[n]+"model"+a+'"'+t+'"]';var s=e.querySelectorAll(o);if(s.length){return s}}};i.getLocation=function(){return r.url()};i.setLocation=function(t){if(t!==r.url()){r.url(t);e.$digest()}};i.whenStable=function(e){t.notifyWhenNoOutstandingRequests(e)};return i}]}var zn=a("$timeout");function qn(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,r,i,n){var a={};function o(o,s,l){if(!B(o)){l=s;s=o;o=R}var u=_e(arguments,3),c=G(l)&&!l,f=(c?i:r).defer(),h=f.promise,d;d=t.defer(function(){try{f.resolve(o.apply(null,u))}catch(e){f.reject(e);n(e)}finally{delete a[h.$$timeoutId]}if(!c)e.$apply()},s);h.$$timeoutId=d;a[d]=f;return h}o.cancel=function(e){if(!e)return false;if(!e.hasOwnProperty("$$timeoutId")){throw zn("badprom","`$timeout.cancel()` called with a promise that was not generated by `$timeout()`.")}if(!a.hasOwnProperty(e.$$timeoutId))return false;var r=e.$$timeoutId;var i=a[r];An(i.promise);i.reject("canceled");delete a[r];return t.defer.cancel(r)};return o}]}var Bn=t.document.createElement("a");var Xn=Zn(t.location.href);var Kn;function Zn(e){if(!Y(e))return e;var t=e;if(f){Bn.setAttribute("href",t);t=Bn.href}Bn.setAttribute("href",t);return{href:Bn.href,protocol:Bn.protocol?Bn.protocol.replace(/:$/,""):"",host:Bn.host,search:Bn.search?Bn.search.replace(/^\?/,""):"",hash:Bn.hash?Bn.hash.replace(/^#/,""):"",hostname:Bn.hostname,port:Bn.port,pathname:Bn.pathname.charAt(0)==="/"?Bn.pathname:"/"+Bn.pathname}}function Qn(e){return ta(e,Xn)}function Jn(e){return ta(e,ra())}function ea(e){var t=[Xn].concat(e.map(Zn));return function e(r){var i=Zn(r);return t.some(ta.bind(null,i))}}function ta(e,t){e=Zn(e);t=Zn(t);return e.protocol===t.protocol&&e.host===t.host}function ra(){if(t.document.baseURI){return t.document.baseURI}if(!Kn){Kn=t.document.createElement("a");Kn.href=".";Kn=Kn.cloneNode(false)}return Kn.href}function ia(){this.$get=$(t)}function na(e){var t=e[0]||{};var r={};var i="";function n(e){try{return e.cookie||""}catch(e){return""}}function a(e){try{return decodeURIComponent(e)}catch(t){return e}}return function(){var e,o,s,l,u;var c=n(t);if(c!==i){i=c;e=i.split("; ");r={};for(s=0;s<e.length;s++){o=e[s];l=o.indexOf("=");if(l>0){u=a(o.substring(0,l));if(F(r[u])){r[u]=a(o.substring(l+1))}}}}return r}}na.$inject=["$document"];function aa(){this.$get=na}oa.$inject=["$provide"];function oa(e){var t="Filter";function r(i,n){if(U(i)){var a={};x(i,function(e,t){a[t]=r(t,e)});return a}else{return e.factory(i+t,n)}}this.register=r;this.$get=["$injector",function(e){return function(r){return e.get(r+t)}}];r("currency",pa);r("date",ka);r("filter",sa);r("json",Ia);r("limitTo",La);r("lowercase",Da);r("number",va);r("orderBy",Na);r("uppercase",Ra)}function sa(){return function(e,t,r,i){if(!C(e)){if(e==null){return e}else{throw a("filter")("notarray","Expected array but received: {0}",e)}}i=i||"$";var n=ca(t);var o;var s;switch(n){case"function":o=t;break;case"boolean":case"null":case"number":case"string":s=true;case"object":o=la(t,r,i,s);break;default:return e}return Array.prototype.filter.call(e,o)}}function la(e,t,r,i){var n=U(e)&&r in e;var a;if(t===true){t=ve}else if(!B(t)){t=function(e,t){if(F(e)){return false}if(e===null||t===null){return e===t}if(U(t)||U(e)&&!N(e)){return false}e=u(""+e);t=u(""+t);return e.indexOf(t)!==-1}}a=function(a){if(n&&!U(a)){return ua(a,e[r],t,r,false)}return ua(a,e,t,r,i)};return a}function ua(e,t,r,i,n,a){var o=ca(e);var s=ca(t);if(s==="string"&&t.charAt(0)==="!"){return!ua(e,t.substring(1),r,i,n)}else if(z(e)){return e.some(function(e){return ua(e,t,r,i,n)})}switch(o){case"object":var l;if(n){for(l in e){if(l.charAt&&l.charAt(0)!=="$"&&ua(e[l],t,r,i,true)){return true}}return a?false:ua(e,t,r,i,false)}else if(s==="object"){for(l in t){var u=t[l];if(B(u)||F(u)){continue}var c=l===i;var f=c?e:e[l];if(!ua(f,u,r,i,c,c)){return false}}return true}else{return r(e,t)}case"function":return false;default:return r(e,t)}}function ca(e){return e===null?"null":typeof e}var fa=22;var ha=".";var da="0";pa.$inject=["$locale"];function pa(e){var t=e.NUMBER_FORMATS;return function(e,r,i){if(F(r)){r=t.CURRENCY_SYM}if(F(i)){i=t.PATTERNS[1].maxFrac}var n=!r?/\s*\u00A4\s*/g:/\u00A4/g;return e==null?e:ya(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,i).replace(n,r)}}va.$inject=["$locale"];function va(e){var t=e.NUMBER_FORMATS;return function(e,r){return e==null?e:ya(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,r)}}function ga(e){var t=0,r,i;var n,a,o;if((i=e.indexOf(ha))>-1){e=e.replace(ha,"")}if((n=e.search(/e/i))>0){if(i<0)i=n;i+=+e.slice(n+1);e=e.substring(0,n)}else if(i<0){i=e.length}for(n=0;e.charAt(n)===da;n++){}if(n===(o=e.length)){r=[0];i=1}else{o--;while(e.charAt(o)===da)o--;i-=n;r=[];for(a=0;n<=o;n++,a++){r[a]=+e.charAt(n)}}if(i>fa){r=r.splice(0,fa-1);t=i-1;i=1}return{d:r,e:t,i:i}}function ma(e,t,r,i){var n=e.d;var a=n.length-e.i;t=F(t)?Math.min(Math.max(r,a),i):+t;var o=t+e.i;var s=n[o];if(o>0){n.splice(Math.max(e.i,o));for(var l=o;l<n.length;l++){n[l]=0}}else{a=Math.max(0,a);e.i=1;n.length=Math.max(1,o=t+1);n[0]=0;for(var u=1;u<o;u++)n[u]=0}if(s>=5){if(o-1<0){for(var c=0;c>o;c--){n.unshift(0);e.i++}n.unshift(1);e.i++}else{n[o-1]++}}for(;a<Math.max(0,t);a++)n.push(0);var f=n.reduceRight(function(e,t,r,i){t=t+e;i[r]=t%10;return Math.floor(t/10)},0);if(f){n.unshift(f);e.i++}}function ya(e,t,r,i,n){if(!(Y(e)||W(e))||isNaN(e))return"";var a=!isFinite(e);var o=false;var s=Math.abs(e)+"",l="",u;if(a){l="∞"}else{u=ga(s);ma(u,n,t.minFrac,t.maxFrac);var c=u.d;var f=u.i;var h=u.e;var d=[];o=c.reduce(function(e,t){return e&&!t},true);while(f<0){c.unshift(0);f++}if(f>0){d=c.splice(f,c.length)}else{d=c;c=[0]}var p=[];if(c.length>=t.lgSize){p.unshift(c.splice(-t.lgSize,c.length).join(""))}while(c.length>t.gSize){p.unshift(c.splice(-t.gSize,c.length).join(""))}if(c.length){p.unshift(c.join(""))}l=p.join(r);if(d.length){l+=i+d.join("")}if(h){l+="e+"+h}}if(e<0&&!o){return t.negPre+l+t.negSuf}else{return t.posPre+l+t.posSuf}}function _a(e,t,r,i){var n="";if(e<0||i&&e<=0){if(i){e=-e+1}else{e=-e;n="-"}}e=""+e;while(e.length<t)e=da+e;if(r){e=e.substr(e.length-t)}return n+e}function ba(e,t,r,i,n){r=r||0;return function(a){var o=a["get"+e]();if(r>0||o>-r){o+=r}if(o===0&&r===-12)o=12;return _a(o,t,i,n)}}function wa(e,t,r){return function(i,n){var a=i["get"+e]();var o=(r?"STANDALONE":"")+(t?"SHORT":"");var s=c(o+e);return n[s][a]}}function Sa(e,t,r){var i=-1*r;var n=i>=0?"+":"";n+=_a(Math[i>0?"floor":"ceil"](i/60),2)+_a(Math.abs(i%60),2);return n}function Ca(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(t<=4?5:12)-t)}function xa(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function Oa(e){return function(t){var r=Ca(t.getFullYear()),i=xa(t);var n=+i-+r,a=1+Math.round(n/6048e5);return _a(a,e)}}function Ta(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}function Ea(e,t){return e.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}function Ma(e,t){return e.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}var ja={yyyy:ba("FullYear",4,0,false,true),yy:ba("FullYear",2,0,true,true),y:ba("FullYear",1,0,false,true),MMMM:wa("Month"),MMM:wa("Month",true),MM:ba("Month",2,1),M:ba("Month",1,1),LLLL:wa("Month",false,true),dd:ba("Date",2),d:ba("Date",1),HH:ba("Hours",2),H:ba("Hours",1),hh:ba("Hours",2,-12),h:ba("Hours",1,-12),mm:ba("Minutes",2),m:ba("Minutes",1),ss:ba("Seconds",2),s:ba("Seconds",1),sss:ba("Milliseconds",3),EEEE:wa("Day"),EEE:wa("Day",true),a:Ta,Z:Sa,ww:Oa(2),w:Oa(1),G:Ea,GG:Ea,GGG:Ea,GGGG:Ma};var Aa=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,Pa=/^-?\d+$/;ka.$inject=["$locale"];function ka(e){var t=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;function r(e){var r;if(r=e.match(t)){var i=new Date(0),n=0,a=0,o=r[8]?i.setUTCFullYear:i.setFullYear,s=r[8]?i.setUTCHours:i.setHours;if(r[9]){n=k(r[9]+r[10]);a=k(r[9]+r[11])}o.call(i,k(r[1]),k(r[2])-1,k(r[3]));var l=k(r[4]||0)-n;var u=k(r[5]||0)-a;var c=k(r[6]||0);var f=Math.round(parseFloat("0."+(r[7]||0))*1e3);s.call(i,l,u,c,f);return i}return e}return function(t,i,n){var a="",o=[],s,l;i=i||"mediumDate";i=e.DATETIME_FORMATS[i]||i;if(Y(t)){t=Pa.test(t)?k(t):r(t)}if(W(t)){t=new Date(t)}if(!V(t)||!isFinite(t.getTime())){return t}while(i){l=Aa.exec(i);if(l){o=ye(o,l,1);i=o.pop()}else{o.push(i);i=null}}var u=t.getTimezoneOffset();if(n){u=Oe(n,u);t=Ee(t,n,true)}x(o,function(r){s=ja[r];a+=s?s(t,e.DATETIME_FORMATS,u):r==="''"?"'":r.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return a}}function Ia(){return function(e,t){if(F(t)){t=2}return Se(e,t)}}var Da=$(u);var Ra=$(c);function La(){return function(e,t,r){if(Math.abs(Number(t))===Infinity){t=Number(t)}else{t=k(t)}if(I(t))return e;if(W(e))e=e.toString();if(!C(e))return e;r=!r||isNaN(r)?0:k(r);r=r<0?Math.max(0,e.length+r):r;if(t>=0){return $a(e,r,r+t)}else{if(r===0){return $a(e,t,e.length)}else{return $a(e,Math.max(0,r+t),r)}}}}function $a(e,t,r){if(Y(e))return e.slice(t,r);return p.call(e,t,r)}Na.$inject=["$parse"];function Na(e){return function(e,r,i,s){if(e==null)return e;if(!C(e)){throw a("orderBy")("notarray","Expected array but received: {0}",e)}if(!z(r)){r=[r]}if(r.length===0){r=["+"]}var l=t(r);var u=i?-1:1;var c=B(s)?s:o;var f=Array.prototype.map.call(e,h);f.sort(d);e=f.map(function(e){return e.value});return e;function h(e,t){return{value:e,tieBreaker:{value:t,type:"number",index:t},predicateValues:l.map(function(r){return n(r.get(e),t)})}}function d(e,t){for(var r=0,i=l.length;r<i;r++){var n=c(e.predicateValues[r],t.predicateValues[r]);if(n){return n*l[r].descending*u}}return(c(e.tieBreaker,t.tieBreaker)||o(e.tieBreaker,t.tieBreaker))*u}};function t(t){return t.map(function(t){var r=1,i=L;if(B(t)){i=t}else if(Y(t)){if(t.charAt(0)==="+"||t.charAt(0)==="-"){r=t.charAt(0)==="-"?-1:1;t=t.substring(1)}if(t!==""){i=e(t);if(i.constant){var n=i();i=function(e){return e[n]}}}}return{get:i,descending:r}})}function r(e){switch(typeof e){case"number":case"boolean":case"string":return true;default:return false}}function i(e){if(B(e.valueOf)){e=e.valueOf();if(r(e))return e}if(N(e)){e=e.toString();if(r(e))return e}return e}function n(e,t){var r=typeof e;if(e===null){r="null"}else if(r==="object"){e=i(e)}return{value:e,type:r,index:t}}function o(e,t){var r=0;var i=e.type;var n=t.type;if(i===n){var a=e.value;var o=t.value;if(i==="string"){a=a.toLowerCase();o=o.toLowerCase()}else if(i==="object"){if(U(a))a=e.index;if(U(o))o=t.index}if(a!==o){r=a<o?-1:1}}else{r=i==="undefined"?1:n==="undefined"?-1:i==="null"?1:n==="null"?-1:i<n?-1:1}return r}}function Fa(e){if(B(e)){e={link:e}}e.restrict=e.restrict||"AC";return $(e)}var Ga=$({restrict:"E",compile:function(e,t){if(!t.href&&!t.xlinkHref){return function(e,t){if(t[0].nodeName.toLowerCase()!=="a")return;var r=m.call(t.prop("href"))==="[object SVGAnimatedString]"?"xlink:href":"href";t.on("click",function(e){if(!t.attr(r)){e.preventDefault()}})}}}});var Ua={};x(Jt,function(e,t){if(e==="multiple")return;function r(e,r,n){e.$watch(n[i],function e(r){n.$set(t,!!r)})}var i=Xr("ng-"+t);var n=r;if(e==="checked"){n=function(e,t,n){if(n.ngModel!==n[i]){r(e,t,n)}}}Ua[i]=function(){return{restrict:"A",priority:100,link:n}}});x(tr,function(e,t){Ua[t]=function(){return{priority:100,link:function(e,r,i){if(t==="ngPattern"&&i.ngPattern.charAt(0)==="/"){var n=i.ngPattern.match(o);if(n){i.$set("ngPattern",new RegExp(n[1],n[2]));return}}e.$watch(i[t],function e(r){i.$set(t,r)})}}}});x(["src","srcset","href"],function(e){var t=Xr("ng-"+e);Ua[t]=function(){return{priority:99,link:function(r,i,n){var a=e,o=e;if(e==="href"&&m.call(i.prop("href"))==="[object SVGAnimatedString]"){o="xlinkHref";n.$attr[o]="xlink:href";a=null}n.$observe(t,function(t){if(!t){if(e==="href"){n.$set(o,null)}return}n.$set(o,t);if(f&&a)i.prop(a,n[o])})}}}});var Ha={$addControl:R,$$renameControl:Va,$removeControl:R,$setValidity:R,$setDirty:R,$setPristine:R,$setSubmitted:R,$$setSubmitted:R},Ya="ng-pending",Wa="ng-submitted";function Va(e,t){e.$name=t}za.$inject=["$element","$attrs","$scope","$animate","$interpolate"];function za(e,t,r,i,n){this.$$controls=[];this.$error={};this.$$success={};this.$pending=undefined;this.$name=n(t.name||t.ngForm||"")(r);this.$dirty=false;this.$pristine=true;this.$valid=true;this.$invalid=false;this.$submitted=false;this.$$parentForm=Ha;this.$$element=e;this.$$animate=i;Ka(this)}za.prototype={$rollbackViewValue:function(){x(this.$$controls,function(e){e.$rollbackViewValue()})},$commitViewValue:function(){x(this.$$controls,function(e){e.$commitViewValue()})},$addControl:function(e){Be(e.$name,"input");this.$$controls.push(e);if(e.$name){this[e.$name]=e}e.$$parentForm=this},$$renameControl:function(e,t){var r=e.$name;if(this[r]===e){delete this[r]}this[t]=e;e.$name=t},$removeControl:function(e){if(e.$name&&this[e.$name]===e){delete this[e.$name]}x(this.$pending,function(t,r){this.$setValidity(r,null,e)},this);x(this.$error,function(t,r){this.$setValidity(r,null,e)},this);x(this.$$success,function(t,r){this.$setValidity(r,null,e)},this);he(this.$$controls,e);e.$$parentForm=Ha},$setDirty:function(){this.$$animate.removeClass(this.$$element,Jo);this.$$animate.addClass(this.$$element,es);this.$dirty=true;this.$pristine=false;this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Jo,es+" "+Wa);this.$dirty=false;this.$pristine=true;this.$submitted=false;x(this.$$controls,function(e){e.$setPristine()})},$setUntouched:function(){x(this.$$controls,function(e){e.$setUntouched()})},$setSubmitted:function(){var e=this;while(e.$$parentForm&&e.$$parentForm!==Ha){e=e.$$parentForm}e.$$setSubmitted()},$$setSubmitted:function(){this.$$animate.addClass(this.$$element,Wa);this.$submitted=true;x(this.$$controls,function(e){if(e.$$setSubmitted){e.$$setSubmitted()}})}};Za({clazz:za,set:function(e,t,r){var i=e[t];if(!i){e[t]=[r]}else{var n=i.indexOf(r);if(n===-1){i.push(r)}}},unset:function(e,t,r){var i=e[t];if(!i){return}he(i,r);if(i.length===0){delete e[t]}}});var qa=function(e){return["$timeout","$parse",function(t,r){var i={name:"form",restrict:e?"EAC":"E",require:["form","^^?form"],controller:za,compile:function r(i,a){i.addClass(Jo).addClass(Zo);var o=a.name?"name":e&&a.ngForm?"ngForm":false;return{pre:function e(r,i,a,s){var l=s[0];if(!("action"in a)){var u=function(e){r.$apply(function(){l.$commitViewValue();l.$setSubmitted()});e.preventDefault()};i[0].addEventListener("submit",u);i.on("$destroy",function(){t(function(){i[0].removeEventListener("submit",u)},0,false)})}var c=s[1]||l.$$parentForm;c.$addControl(l);var f=o?n(l.$name):R;if(o){f(r,l);a.$observe(o,function(e){if(l.$name===e)return;f(r,undefined);l.$$parentForm.$$renameControl(l,e);f=n(l.$name);f(r,l)})}i.on("$destroy",function(){l.$$parentForm.$removeControl(l);f(r,undefined);A(l,Ha)})}}}};return i;function n(e){if(e===""){return r('this[""]').assign}return r(e).assign||R}}]};var Ba=qa();var Xa=qa(true);function Ka(e){e.$$classCache={};e.$$classCache[Qo]=!(e.$$classCache[Zo]=e.$$element.hasClass(Zo))}function Za(e){var t=e.clazz,r=e.set,i=e.unset;t.prototype.$setValidity=function(e,t,l){if(F(t)){n(this,"$pending",e,l)}else{a(this,"$pending",e,l)}if(!te(t)){i(this.$error,e,l);i(this.$$success,e,l)}else{if(t){i(this.$error,e,l);r(this.$$success,e,l)}else{r(this.$error,e,l);i(this.$$success,e,l)}}if(this.$pending){o(this,Ya,true);this.$valid=this.$invalid=undefined;s(this,"",null)}else{o(this,Ya,false);this.$valid=Qa(this.$error);this.$invalid=!this.$valid;s(this,"",this.$valid)}var u;if(this.$pending&&this.$pending[e]){u=undefined}else if(this.$error[e]){u=false}else if(this.$$success[e]){u=true}else{u=null}s(this,e,u);this.$$parentForm.$setValidity(e,u,this)};function n(e,t,i,n){if(!e[t]){e[t]={}}r(e[t],i,n)}function a(e,t,r,n){if(e[t]){i(e[t],r,n)}if(Qa(e[t])){e[t]=undefined}}function o(e,t,r){if(r&&!e.$$classCache[t]){e.$$animate.addClass(e.$$element,t);e.$$classCache[t]=true}else if(!r&&e.$$classCache[t]){e.$$animate.removeClass(e.$$element,t);e.$$classCache[t]=false}}function s(e,t,r){t=t?"-"+Ye(t,"-"):"";o(e,Zo+t,r===true);o(e,Qo+t,r===false)}}function Qa(e){if(e){for(var t in e){if(e.hasOwnProperty(t)){return false}}}return true}var Ja=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/;var eo=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i;var to=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/;var ro=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/;var io=/^(\d{4,})-(\d{2})-(\d{2})$/;var no=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/;var ao=/^(\d{4,})-W(\d\d)$/;var oo=/^(\d{4,})-(\d\d)$/;var so=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/;var lo="keydown wheel mousedown";var uo=Ze();x("date,datetime-local,month,time,week".split(","),function(e){uo[e]=true});var co={text:ho,date:mo("date",io,go(io,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":mo("datetimelocal",no,go(no,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:mo("time",so,go(so,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:mo("week",ao,vo,"yyyy-Www"),month:mo("month",oo,go(oo,["yyyy","MM"]),"yyyy-MM"),number:xo,url:To,email:Eo,radio:Mo,range:Oo,checkbox:Ao,hidden:R,button:R,submit:R,reset:R,file:R};function fo(e){e.$formatters.push(function(t){return e.$isEmpty(t)?t:t.toString()})}function ho(e,t,r,i,n,a){po(e,t,r,i,n,a);fo(i)}function po(e,t,r,i,n,a){var o=u(t[0].type);if(!n.android){var l=false;t.on("compositionstart",function(){l=true});t.on("compositionupdate",function(e){if(F(e.data)||e.data===""){l=false}});t.on("compositionend",function(){l=false;f()})}var c;var f=function(e){if(c){a.defer.cancel(c);c=null}if(l)return;var n=t.val(),s=e&&e.type;if(o!=="password"&&(!r.ngTrim||r.ngTrim!=="false")){n=oe(n)}if(i.$viewValue!==n||n===""&&i.$$hasNativeValidators){i.$setViewValue(n,s)}};if(n.hasEvent("input")){t.on("input",f)}else{var h=function(e,t,r){if(!c){c=a.defer(function(){c=null;if(!t||t.value!==r){f(e)}})}};t.on("keydown",function(e){var t=e.keyCode;if(t===91||15<t&&t<19||37<=t&&t<=40)return;h(e,this,this.value)});if(n.hasEvent("paste")){t.on("paste cut drop",h)}}t.on("change",f);if(uo[o]&&i.$$hasNativeValidators&&o===r.type){t.on(lo,function(e){if(!c){var t=this[s];var r=t.badInput;var i=t.typeMismatch;c=a.defer(function(){c=null;if(t.badInput!==r||t.typeMismatch!==i){f(e)}})}})}i.$render=function(){var e=i.$isEmpty(i.$viewValue)?"":i.$viewValue;if(t.val()!==e){t.val(e)}}}function vo(e,t){if(V(e)){return e}if(Y(e)){ao.lastIndex=0;var r=ao.exec(e);if(r){var i=+r[1],n=+r[2],a=0,o=0,s=0,l=0,u=Ca(i),c=(n-1)*7;if(t){a=t.getHours();o=t.getMinutes();s=t.getSeconds();l=t.getMilliseconds()}return new Date(i,0,u.getDate()+c,a,o,s,l)}}return NaN}function go(e,t){return function(r,i){var n,a;if(V(r)){return r}if(Y(r)){if(r.charAt(0)==='"'&&r.charAt(r.length-1)==='"'){r=r.substring(1,r.length-1)}if(Ja.test(r)){return new Date(r)}e.lastIndex=0;n=e.exec(r);if(n){n.shift();if(i){a={yyyy:i.getFullYear(),MM:i.getMonth()+1,dd:i.getDate(),HH:i.getHours(),mm:i.getMinutes(),ss:i.getSeconds(),sss:i.getMilliseconds()/1e3}}else{a={yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0}}x(n,function(e,r){if(r<t.length){a[t[r]]=+e}});var o=new Date(a.yyyy,a.MM-1,a.dd,a.HH,a.mm,a.ss||0,a.sss*1e3||0);if(a.yyyy<100){o.setFullYear(a.yyyy)}return o}}return NaN}}function mo(e,t,r,i){return function n(a,o,s,l,u,c,f){yo(a,o,s,l,e);po(a,o,s,l,u,c);var h;var d;l.$parsers.push(function(r){if(l.$isEmpty(r))return null;if(t.test(r)){return y(r,h)}l.$$parserName=e;return undefined});l.$formatters.push(function(e){if(e&&!V(e)){throw as("datefmt","Expected `{0}` to be a date",e)}if(g(e)){h=e;var t=l.$options.getOption("timezone");if(t){d=t;h=Ee(h,t,true)}return f("date")(e,i,t)}else{h=null;d=null;return""}});if(G(s.min)||s.ngMin){var p;l.$validators.min=function(e){return!g(e)||F(p)||r(e)>=p};s.$observe("min",function(e){p=m(e);l.$validate()})}if(G(s.max)||s.ngMax){var v;l.$validators.max=function(e){return!g(e)||F(v)||r(e)<=v};s.$observe("max",function(e){v=m(e);l.$validate()})}function g(e){return e&&!(e.getTime&&e.getTime()!==e.getTime())}function m(e){return G(e)&&!V(e)?y(e)||undefined:e}function y(e,t){var i=l.$options.getOption("timezone");if(d&&d!==i){t=Te(t,Oe(d))}var n=r(e,t);if(!isNaN(n)&&i){n=Ee(n,i)}return n}}}function yo(e,t,r,i,n){var a=t[0];var o=i.$$hasNativeValidators=U(a.validity);if(o){i.$parsers.push(function(e){var r=t.prop(s)||{};if(r.badInput||r.typeMismatch){i.$$parserName=n;return undefined}return e})}}function _o(e){e.$parsers.push(function(t){if(e.$isEmpty(t))return null;if(ro.test(t))return parseFloat(t);e.$$parserName="number";return undefined});e.$formatters.push(function(t){if(!e.$isEmpty(t)){if(!W(t)){throw as("numfmt","Expected `{0}` to be a number",t)}t=t.toString()}return t})}function bo(e){if(G(e)&&!W(e)){e=parseFloat(e)}return!I(e)?e:undefined}function wo(e){return(e|0)===e}function So(e){var t=e.toString();var r=t.indexOf(".");if(r===-1){if(-1<e&&e<1){var i=/e-(\d+)$/.exec(t);if(i){return Number(i[1])}}return 0}return t.length-r-1}function Co(e,t,r){var i=Number(e);var n=!wo(i);var a=!wo(t);var o=!wo(r);if(n||a||o){var s=n?So(i):0;var l=a?So(t):0;var u=o?So(r):0;var c=Math.max(s,l,u);var f=Math.pow(10,c);i=i*f;t=t*f;r=r*f;if(n)i=Math.round(i);if(a)t=Math.round(t);if(o)r=Math.round(r)}return(i-t)%r===0}function xo(e,t,r,i,n,a){yo(e,t,r,i,"number");_o(i);po(e,t,r,i,n,a);var o;var s;if(G(r.min)||r.ngMin){i.$validators.min=function(e,t){return i.$isEmpty(t)||F(o)||t>=o};r.$observe("min",function(e){o=bo(e);i.$validate()})}if(G(r.max)||r.ngMax){i.$validators.max=function(e,t){return i.$isEmpty(t)||F(s)||t<=s};r.$observe("max",function(e){s=bo(e);i.$validate()})}if(G(r.step)||r.ngStep){var l;i.$validators.step=function(e,t){return i.$isEmpty(t)||F(l)||Co(t,o||0,l)};r.$observe("step",function(e){l=bo(e);i.$validate()})}}function Oo(e,t,r,i,n,a){yo(e,t,r,i,"range");_o(i);po(e,t,r,i,n,a);var o=i.$$hasNativeValidators&&t[0].type==="range",s=o?0:undefined,l=o?100:undefined,u=o?1:undefined,c=t[0].validity,f=G(r.min),h=G(r.max),d=G(r.step);var p=i.$render;i.$render=o&&G(c.rangeUnderflow)&&G(c.rangeOverflow)?function e(){p();i.$setViewValue(t.val())}:p;if(f){i.$validators.min=o?function e(){return true}:function e(t,r){return i.$isEmpty(r)||F(s)||r>=s};v("min",g)}if(h){i.$validators.max=o?function e(){return true}:function e(t,r){return i.$isEmpty(r)||F(l)||r<=l};v("max",m)}if(d){i.$validators.step=o?function e(){return!c.stepMismatch}:function e(t,r){return i.$isEmpty(r)||F(u)||Co(r,s||0,u)};v("step",y)}function v(e,i){t.attr(e,r[e]);r.$observe(e,i)}function g(e){s=bo(e);if(I(i.$modelValue)){return}if(o){var r=t.val();if(s>r){r=s;t.val(r)}i.$setViewValue(r)}else{i.$validate()}}function m(e){l=bo(e);if(I(i.$modelValue)){return}if(o){var r=t.val();if(l<r){t.val(l);r=l<s?s:l}i.$setViewValue(r)}else{i.$validate()}}function y(e){u=bo(e);if(I(i.$modelValue)){return}if(o&&i.$viewValue!==t.val()){i.$setViewValue(t.val())}else{i.$validate()}}}function To(e,t,r,i,n,a){po(e,t,r,i,n,a);fo(i);i.$validators.url=function(e,t){var r=e||t;return i.$isEmpty(r)||eo.test(r)}}function Eo(e,t,r,i,n,a){po(e,t,r,i,n,a);fo(i);i.$validators.email=function(e,t){var r=e||t;return i.$isEmpty(r)||to.test(r)}}function Mo(e,t,r,i){var n=!r.ngTrim||oe(r.ngTrim)!=="false";if(F(r.name)){t.attr("name",E())}var a=function(e){var a;if(t[0].checked){a=r.value;if(n){a=oe(a)}i.$setViewValue(a,e&&e.type)}};t.on("change",a);i.$render=function(){var e=r.value;if(n){e=oe(e)}t[0].checked=e===i.$viewValue};r.$observe("value",i.$render)}function jo(e,t,r,i,n){var a;if(G(i)){a=e(i);if(!a.constant){throw as("constexpr","Expected constant expression for `{0}`, but saw "+"`{1}`.",r,i)}return a(t)}return n}function Ao(e,t,r,i,n,a,o,s){var l=jo(s,e,"ngTrueValue",r.ngTrueValue,true);var u=jo(s,e,"ngFalseValue",r.ngFalseValue,false);var c=function(e){i.$setViewValue(t[0].checked,e&&e.type)};t.on("change",c);i.$render=function(){t[0].checked=i.$viewValue};i.$isEmpty=function(e){return e===false};i.$formatters.push(function(e){return ve(e,l)});i.$parsers.push(function(e){return e?l:u})}var Po=["$browser","$sniffer","$filter","$parse",function(e,t,r,i){return{restrict:"E",require:["?ngModel"],link:{pre:function(n,a,o,s){if(s[0]){(co[u(o.type)]||co.text)(n,a,o,s[0],t,e,r,i)}}}}}];var ko=/^(true|false|\d+)$/;var Io=function(){function e(e,t,r){var i=G(r)?r:f===9?"":null;e.prop("value",i);t.$set("value",r)}return{restrict:"A",priority:100,compile:function(t,r){if(ko.test(r.ngValue)){return function t(r,i,n){var a=r.$eval(n.ngValue);e(i,n,a)}}else{return function t(r,i,n){r.$watch(n.ngValue,function t(r){e(i,n,r)})}}}}};var Do=["$compile",function(e){return{restrict:"AC",compile:function t(r){e.$$addBindingClass(r);return function t(r,i,n){e.$$addBindingInfo(i,n.ngBind);i=i[0];r.$watch(n.ngBind,function e(t){i.textContent=Qe(t)})}}}}];var Ro=["$interpolate","$compile",function(e,t){return{compile:function r(i){t.$$addBindingClass(i);return function r(i,n,a){var o=e(n.attr(a.$attr.ngBindTemplate));t.$$addBindingInfo(n,o.expressions);n=n[0];a.$observe("ngBindTemplate",function(e){n.textContent=F(e)?"":e})}}}}];var Lo=["$sce","$parse","$compile",function(e,t,r){return{restrict:"A",compile:function i(n,a){var o=t(a.ngBindHtml);var s=t(a.ngBindHtml,function t(r){return e.valueOf(r)});r.$$addBindingClass(n);return function t(i,n,a){r.$$addBindingInfo(n,a.ngBindHtml);i.$watch(s,function t(){var r=o(i);n.html(e.getTrustedHtml(r)||"")})}}}}];var $o=$({restrict:"A",require:"ngModel",link:function(e,t,r,i){i.$viewChangeListeners.push(function(){e.$eval(r.ngChange)})}});function No(e,t){e="ngClass"+e;var r;return["$parse",function(o){return{restrict:"AC",link:function(s,l,u){var c=l.data("$classCounts");var f=true;var h;if(!c){c=Ze();l.data("$classCounts",c)}if(e!=="ngClass"){if(!r){r=o("$index",function e(t){return t&1})}s.$watch(r,m)}s.$watch(o(u[e],a),y);function d(e){e=g(n(e),1);u.$addClass(e)}function p(e){e=g(n(e),-1);u.$removeClass(e)}function v(e,t){var r=n(e);var a=n(t);var o=i(r,a);var s=i(a,r);var l=g(o,-1);var c=g(s,1);u.$addClass(c);u.$removeClass(l)}function g(e,t){var r=[];x(e,function(e){if(t>0||c[e]){c[e]=(c[e]||0)+t;if(c[e]===+(t>0)){r.push(e)}}});return r.join(" ")}function m(e){if(e===t){d(h)}else{p(h)}f=e}function y(e){if(f===t){v(h,e)}h=e}}}}];function i(e,t){if(!e||!e.length)return[];if(!t||!t.length)return e;var r=[];e:for(var i=0;i<e.length;i++){var n=e[i];for(var a=0;a<t.length;a++){if(n===t[a])continue e}r.push(n)}return r}function n(e){return e&&e.split(" ")}function a(e){var t=e;if(z(e)){t=e.map(a).join(" ")}else if(U(e)){t=Object.keys(e).filter(function(t){return e[t]}).join(" ")}return t}}var Fo=No("",true);var Go=No("Odd",0);var Uo=No("Even",1);var Ho=Fa({compile:function(e,t){t.$set("ngCloak",undefined);e.removeClass("ng-cloak")}});var Yo=[function(){return{restrict:"A",scope:true,controller:"@",priority:500}}];var Wo={};var Vo={blur:true,focus:true};x("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=Xr("ng-"+e);Wo[t]=["$parse","$rootScope",function(r,i){return{restrict:"A",compile:function(n,a){var o=r(a[t]);return function t(r,n){n.on(e,function(t){var n=function(){o(r,{$event:t})};if(Vo[e]&&i.$$phase){r.$evalAsync(n)}else{r.$apply(n)}})}}}}]});var zo=["$animate","$compile",function(e,t){return{multiElement:true,transclude:"element",priority:600,terminal:true,restrict:"A",$$tlb:true,link:function(r,i,n,a,o){var s,l,u;r.$watch(n.ngIf,function r(a){if(a){if(!l){o(function(r,a){l=a;r[r.length++]=t.$$createComment("end ngIf",n.ngIf);s={clone:r};e.enter(r,i.parent(),i)})}}else{if(u){u.remove();u=null}if(l){l.$destroy();l=null}if(s){u=Ke(s.clone);e.leave(u).done(function(e){if(e!==false)u=null});s=null}}})}}}];var qo=["$templateRequest","$anchorScroll","$animate",function(e,t,r){return{restrict:"ECA",priority:400,terminal:true,transclude:"element",controller:b.noop,compile:function(i,n){var a=n.ngInclude||n.src,o=n.onload||"",s=n.autoscroll;return function(i,n,l,u,c){var f=0,h,d,p;var v=function(){if(d){d.remove();d=null}if(h){h.$destroy();h=null}if(p){r.leave(p).done(function(e){if(e!==false)d=null});d=p;p=null}};i.$watch(a,function a(l){var d=function(e){if(e!==false&&G(s)&&(!s||i.$eval(s))){t()}};var g=++f;if(l){e(l,true).then(function(e){if(i.$$destroyed)return;if(g!==f)return;var t=i.$new();u.template=e;var a=c(t,function(e){v();r.enter(e,null,n).done(d)});h=t;p=a;h.$emit("$includeContentLoaded",l);i.$eval(o)},function(){if(i.$$destroyed)return;if(g===f){v();i.$emit("$includeContentError",l)}});i.$emit("$includeContentRequested",l)}else{v();u.template=null}})}}}}];var Bo=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(r,i,n,a){if(m.call(i[0]).match(/SVG/)){i.empty();e(jt(a.template,t.document).childNodes)(r,function e(t){i.append(t)},{futureParentElement:i});return}i.html(a.template);e(i.contents())(r)}}}];var Xo=Fa({priority:450,compile:function(){return{pre:function(e,t,r){e.$eval(r.ngInit)}}}});var Ko=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,r,i){var n=r.ngList||", ";var a=r.ngTrim!=="false";var o=a?oe(n):n;var s=function(e){if(F(e))return;var t=[];if(e){x(e.split(o),function(e){if(e)t.push(a?oe(e):e)})}return t};i.$parsers.push(s);i.$formatters.push(function(e){if(z(e)){return e.join(n)}return undefined});i.$isEmpty=function(e){return!e||!e.length}}}};var Zo="ng-valid",Qo="ng-invalid",Jo="ng-pristine",es="ng-dirty",ts="ng-untouched",rs="ng-touched",is="ng-empty",ns="ng-not-empty";var as=a("ngModel");os.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"];function os(e,t,r,i,n,a,o,s,l){this.$viewValue=Number.NaN;this.$modelValue=Number.NaN;this.$$rawModelValue=undefined;this.$validators={};this.$asyncValidators={};this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$untouched=true;this.$touched=false;this.$pristine=true;this.$dirty=false;this.$valid=true;this.$invalid=false;this.$error={};this.$$success={};this.$pending=undefined;this.$name=l(r.name||"",false)(e);this.$$parentForm=Ha;this.$options=us;this.$$updateEvents="";this.$$updateEventHandler=this.$$updateEventHandler.bind(this);this.$$parsedNgModel=n(r.ngModel);this.$$parsedNgModelAssign=this.$$parsedNgModel.assign;this.$$ngModelGet=this.$$parsedNgModel;this.$$ngModelSet=this.$$parsedNgModelAssign;this.$$pendingDebounce=null;this.$$parserValid=undefined;this.$$parserName="parse";this.$$currentValidationRunId=0;this.$$scope=e;this.$$attr=r;this.$$element=i;this.$$animate=a;this.$$timeout=o;this.$$parse=n;this.$$q=s;this.$$exceptionHandler=t;Ka(this);ss(this)}os.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var e=this.$$parse(this.$$attr.ngModel+"()"),t=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(t){var r=this.$$parsedNgModel(t);if(B(r)){r=e(t)}return r};this.$$ngModelSet=function(e,r){if(B(this.$$parsedNgModel(e))){t(e,{$$$p:r})}else{this.$$parsedNgModelAssign(e,r)}}}else if(!this.$$parsedNgModel.assign){throw as("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,Me(this.$$element))}},$render:R,$isEmpty:function(e){return F(e)||e===""||e===null||e!==e},$$updateEmptyClasses:function(e){if(this.$isEmpty(e)){this.$$animate.removeClass(this.$$element,ns);this.$$animate.addClass(this.$$element,is)}else{this.$$animate.removeClass(this.$$element,is);this.$$animate.addClass(this.$$element,ns)}},$setPristine:function(){this.$dirty=false;this.$pristine=true;this.$$animate.removeClass(this.$$element,es);this.$$animate.addClass(this.$$element,Jo)},$setDirty:function(){this.$dirty=true;this.$pristine=false;this.$$animate.removeClass(this.$$element,Jo);this.$$animate.addClass(this.$$element,es);this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=false;this.$untouched=true;this.$$animate.setClass(this.$$element,ts,rs)},$setTouched:function(){this.$touched=true;this.$untouched=false;this.$$animate.setClass(this.$$element,rs,ts)},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce);this.$viewValue=this.$$lastCommittedViewValue;this.$render()},$validate:function(){if(I(this.$modelValue)){return}var e=this.$$lastCommittedViewValue;var t=this.$$rawModelValue;var r=this.$valid;var i=this.$modelValue;var n=this.$options.getOption("allowInvalid");var a=this;this.$$runValidators(t,e,function(e){if(!n&&r!==e){a.$modelValue=e?t:undefined;if(a.$modelValue!==i){a.$$writeModelToScope()}}})},$$runValidators:function(e,t,r){this.$$currentValidationRunId++;var i=this.$$currentValidationRunId;var n=this;if(!a()){u(false);return}if(!o()){u(false);return}s();function a(){var e=n.$$parserName;if(F(n.$$parserValid)){l(e,null)}else{if(!n.$$parserValid){x(n.$validators,function(e,t){l(t,null)});x(n.$asyncValidators,function(e,t){l(t,null)})}l(e,n.$$parserValid);return n.$$parserValid}return true}function o(){var r=true;x(n.$validators,function(i,n){var a=Boolean(i(e,t));r=r&&a;l(n,a)});if(!r){x(n.$asyncValidators,function(e,t){l(t,null)});return false}return true}function s(){var r=[];var i=true;x(n.$asyncValidators,function(n,a){var o=n(e,t);if(!re(o)){throw as("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",o)}l(a,undefined);r.push(o.then(function(){l(a,true)},function(){i=false;l(a,false)}))});if(!r.length){u(true)}else{n.$$q.all(r).then(function(){u(i)},R)}}function l(e,t){if(i===n.$$currentValidationRunId){n.$setValidity(e,t)}}function u(e){if(i===n.$$currentValidationRunId){r(e)}}},$commitViewValue:function(){var e=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce);if(this.$$lastCommittedViewValue===e&&(e!==""||!this.$$hasNativeValidators)){return}this.$$updateEmptyClasses(e);this.$$lastCommittedViewValue=e;if(this.$pristine){this.$setDirty()}this.$$parseAndValidate()},$$parseAndValidate:function(){var e=this.$$lastCommittedViewValue;var t=e;var r=this;this.$$parserValid=F(t)?undefined:true;this.$setValidity(this.$$parserName,null);this.$$parserName="parse";if(this.$$parserValid){for(var i=0;i<this.$parsers.length;i++){t=this.$parsers[i](t);if(F(t)){this.$$parserValid=false;break}}}if(I(this.$modelValue)){this.$modelValue=this.$$ngModelGet(this.$$scope)}var n=this.$modelValue;var a=this.$options.getOption("allowInvalid");this.$$rawModelValue=t;if(a){this.$modelValue=t;o()}this.$$runValidators(t,this.$$lastCommittedViewValue,function(e){if(!a){r.$modelValue=e?t:undefined;o()}});function o(){if(r.$modelValue!==n){r.$$writeModelToScope()}}},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue);x(this.$viewChangeListeners,function(e){try{e()}catch(e){this.$$exceptionHandler(e)}},this)},$setViewValue:function(e,t){this.$viewValue=e;if(this.$options.getOption("updateOnDefault")){this.$$debounceViewValueCommit(t)}},$$debounceViewValueCommit:function(e){var t=this.$options.getOption("debounce");if(W(t[e])){t=t[e]}else if(W(t["default"])&&this.$options.getOption("updateOn").indexOf(e)===-1){t=t["default"]}else if(W(t["*"])){t=t["*"]}this.$$timeout.cancel(this.$$pendingDebounce);var r=this;if(t>0){this.$$pendingDebounce=this.$$timeout(function(){r.$commitViewValue()},t)}else if(this.$$scope.$root.$$phase){this.$commitViewValue()}else{this.$$scope.$apply(function(){r.$commitViewValue()})}},$overrideModelOptions:function(e){this.$options=this.$options.createChild(e);this.$$setUpdateOnEvents()},$processModelValue:function(){var e=this.$$format();if(this.$viewValue!==e){this.$$updateEmptyClasses(e);this.$viewValue=this.$$lastCommittedViewValue=e;this.$render();this.$$runValidators(this.$modelValue,this.$viewValue,R)}},$$format:function(){var e=this.$formatters,t=e.length;var r=this.$modelValue;while(t--){r=e[t](r)}return r},$$setModelValue:function(e){this.$modelValue=this.$$rawModelValue=e;this.$$parserValid=undefined;this.$processModelValue()},$$setUpdateOnEvents:function(){if(this.$$updateEvents){this.$$element.off(this.$$updateEvents,this.$$updateEventHandler)}this.$$updateEvents=this.$options.getOption("updateOn");if(this.$$updateEvents){this.$$element.on(this.$$updateEvents,this.$$updateEventHandler)}},$$updateEventHandler:function(e){this.$$debounceViewValueCommit(e&&e.type)}};function ss(e){e.$$scope.$watch(function t(r){var i=e.$$ngModelGet(r);if(i!==e.$modelValue&&(e.$modelValue===e.$modelValue||i===i)){e.$$setModelValue(i)}return i})}Za({clazz:os,set:function(e,t){e[t]=true},unset:function(e,t){delete e[t]}});var ls=["$rootScope",function(e){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:os,priority:1,compile:function t(r){r.addClass(Jo).addClass(ts).addClass(Zo);return{pre:function e(t,r,i,n){var a=n[0],o=n[1]||a.$$parentForm,s=n[2];if(s){a.$options=s.$options}a.$$initGetterSetters();o.$addControl(a);i.$observe("name",function(e){if(a.$name!==e){a.$$parentForm.$$renameControl(a,e)}});t.$on("$destroy",function(){a.$$parentForm.$removeControl(a)})},post:function t(r,i,n,a){var o=a[0];o.$$setUpdateOnEvents();function s(){o.$setTouched()}i.on("blur",function(){if(o.$touched)return;if(e.$$phase){r.$evalAsync(s)}else{r.$apply(s)}})}}}}}];var us;var cs=/(\s+|^)default(\s+|$)/;function fs(e){this.$$options=e}fs.prototype={getOption:function(e){return this.$$options[e]},createChild:function(e){var t=false;e=A({},e);x(e,function(r,i){if(r==="$inherit"){if(i==="*"){t=true}else{e[i]=this.$$options[i];if(i==="updateOn"){e.updateOnDefault=this.$$options.updateOnDefault}}}else{if(i==="updateOn"){e.updateOnDefault=false;e[i]=oe(r.replace(cs,function(){e.updateOnDefault=true;return" "}))}}},this);if(t){delete e["*"];ds(e,this.$$options)}ds(e,us.$$options);return new fs(e)}};us=new fs({updateOn:"",updateOnDefault:true,debounce:0,getterSetter:false,allowInvalid:false,timezone:null});var hs=function(){e.$inject=["$attrs","$scope"];function e(e,t){this.$$attrs=e;this.$$scope=t}e.prototype={$onInit:function(){var e=this.parentCtrl?this.parentCtrl.$options:us;var t=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=e.createChild(t)}};return{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:true,controller:e}};function ds(e,t){x(t,function(t,r){if(!G(e[r])){e[r]=t}})}var ps=Fa({terminal:true,priority:1e3});var vs=a("ngOptions");var gs=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/;var ms=["$compile","$document","$parse",function(e,r,i){function n(e,t,r){var n=e.match(gs);if(!n){throw vs("iexp","Expected expression in form of "+"'_select_ (as _label_)? for (_key_,)?_value_ in _collection_'"+" but got '{0}'. Element: {1}",e,Me(t))}var a=n[5]||n[7];var o=n[6];var s=/ as /.test(n[0])&&n[1];var l=n[9];var u=i(n[2]?n[1]:a);var c=s&&i(s);var f=c||u;var h=l&&i(l);var d=l?function(e,t){return h(r,t)}:function e(t){return lr(t)};var p=function(e,t){return d(e,b(e,t))};var v=i(n[2]||n[1]);var g=i(n[3]||"");var m=i(n[4]||"");var y=i(n[8]);var _={};var b=o?function(e,t){_[o]=t;_[a]=e;return _}:function(e){_[a]=e;return _};function w(e,t,r,i,n){this.selectValue=e;this.viewValue=t;this.label=r;this.group=i;this.disabled=n}function S(e){var t;if(!o&&C(e)){t=e}else{t=[];for(var r in e){if(e.hasOwnProperty(r)&&r.charAt(0)!=="$"){t.push(r)}}}return t}return{trackBy:l,getTrackByValue:p,getWatchables:i(y,function(e){var t=[];e=e||[];var i=S(e);var a=i.length;for(var o=0;o<a;o++){var s=e===i?o:i[o];var l=e[s];var u=b(l,s);var c=d(l,u);t.push(c);if(n[2]||n[1]){var f=v(r,u);t.push(f)}if(n[4]){var h=m(r,u);t.push(h)}}return t}),getOptions:function(){var e=[];var t={};var i=y(r)||[];var n=S(i);var a=n.length;for(var o=0;o<a;o++){var s=i===n?o:n[o];var u=i[s];var c=b(u,s);var h=f(r,c);var _=d(h,c);var C=v(r,c);var x=g(r,c);var O=m(r,c);var T=new w(_,h,C,x,O);e.push(T);t[_]=T}return{items:e,selectValueMap:t,getOptionFromViewValue:function(e){return t[p(e)]},getViewValueFromOption:function(e){return l?de(e.viewValue):e.viewValue}}}}}var a=t.document.createElement("option"),o=t.document.createElement("optgroup");function s(t,i,s,l){var u=l[0];var c=l[1];var f=s.multiple;for(var d=0,p=i.children(),v=p.length;d<v;d++){if(p[d].value===""){u.hasEmptyOption=true;u.emptyOption=p.eq(d);break}}i.empty();var g=!!u.emptyOption;var m=h(a.cloneNode(false));m.val("?");var y;var _=n(s.ngOptions,i,t);var b=r[0].createDocumentFragment();u.generateUnknownOptionValue=function(e){return"?"};if(!f){u.writeValue=function e(t){if(!y)return;var r=i[0].options[i[0].selectedIndex];var n=y.getOptionFromViewValue(t);if(r)r.removeAttribute("selected");if(n){if(i[0].value!==n.selectValue){u.removeUnknownOption();i[0].value=n.selectValue;n.element.selected=true}n.element.setAttribute("selected","selected")}else{u.selectUnknownOrEmptyOption(t)}};u.readValue=function e(){var t=y.selectValueMap[i.val()];if(t&&!t.disabled){u.unselectEmptyOption();u.removeUnknownOption();return y.getViewValueFromOption(t)}return null};if(_.trackBy){t.$watch(function(){return _.getTrackByValue(c.$viewValue)},function(){c.$render()})}}else{u.writeValue=function e(t){if(!y)return;var r=t&&t.map(S)||[];y.items.forEach(function(e){if(e.element.selected&&!fe(r,e)){e.element.selected=false}})};u.readValue=function e(){var t=i.val()||[],r=[];x(t,function(e){var t=y.selectValueMap[e];if(t&&!t.disabled)r.push(y.getViewValueFromOption(t))});return r};if(_.trackBy){t.$watchCollection(function(){if(z(c.$viewValue)){return c.$viewValue.map(function(e){return _.getTrackByValue(e)})}},function(){c.$render()})}}if(g){e(u.emptyOption)(t);i.prepend(u.emptyOption);if(u.emptyOption[0].nodeType===rt){u.hasEmptyOption=false;u.registerOption=function(e,t){if(t.val()===""){u.hasEmptyOption=true;u.emptyOption=t;u.emptyOption.removeClass("ng-scope");c.$render();t.on("$destroy",function(){var e=u.$isEmptyOptionSelected();u.hasEmptyOption=false;u.emptyOption=undefined;if(e)c.$render()})}}}else{u.emptyOption.removeClass("ng-scope")}}t.$watchCollection(_.getWatchables,O);function w(e,t){var r=a.cloneNode(false);t.appendChild(r);C(e,r)}function S(e){var t=y.getOptionFromViewValue(e);var r=t&&t.element;if(r&&!r.selected)r.selected=true;return t}function C(e,t){e.element=t;t.disabled=e.disabled;if(e.label!==t.label){t.label=e.label;t.textContent=e.label}t.value=e.selectValue}function O(){var e=y&&u.readValue();if(y){for(var t=y.items.length-1;t>=0;t--){var r=y.items[t];if(G(r.group)){Xt(r.element.parentNode)}else{Xt(r.element)}}}y=_.getOptions();var n={};y.items.forEach(function e(t){var r;if(G(t.group)){r=n[t.group];if(!r){r=o.cloneNode(false);b.appendChild(r);r.label=t.group===null?"null":t.group;n[t.group]=r}w(t,r)}else{w(t,b)}});i[0].appendChild(b);c.$render();if(!c.$isEmpty(e)){var a=u.readValue();var s=_.trackBy||f;if(s?!ve(e,a):e!==a){c.$setViewValue(a);c.$render()}}}}return{restrict:"A",terminal:true,require:["select","ngModel"],link:{pre:function e(t,r,i,n){n[0].registerOption=R},post:s}}}];var ys=["$locale","$interpolate","$log",function(e,t,r){var i=/{}/g,n=/^when(Minus)?(.+)$/;return{link:function(a,o,s){var l=s.count,c=s.$attr.when&&o.attr(s.$attr.when),f=s.offset||0,h=a.$eval(c)||{},d={},p=t.startSymbol(),v=t.endSymbol(),g=p+l+"-"+f+v,m=b.noop,y;x(s,function(e,t){var r=n.exec(t);if(r){var i=(r[1]?"-":"")+u(r[2]);h[i]=o.attr(s.$attr[t])}});x(h,function(e,r){d[r]=t(e.replace(i,g))});a.$watch(l,function t(i){var n=parseFloat(i);var o=I(n);if(!o&&!(n in h)){n=e.pluralCat(n-f)}if(n!==y&&!(o&&I(y))){m();var s=d[n];if(F(s)){if(i!=null){r.debug("ngPluralize: no rule defined for '"+n+"' in "+c)}m=R;_()}else{m=a.$watch(s,_)}y=n}});function _(e){o.text(e||"")}}}}];var _s=["$parse","$animate","$compile",function(e,t,r){var i="$$NG_REMOVED";var n=a("ngRepeat");var o=function(e,t,r,i,n,a,o){e[r]=i;if(n)e[n]=a;e.$index=t;e.$first=t===0;e.$last=t===o-1;e.$middle=!(e.$first||e.$last);e.$odd=!(e.$even=(t&1)===0)};var s=function(e){return e.clone[0]};var u=function(e){return e.clone[e.clone.length-1]};return{restrict:"A",multiElement:true,transclude:"element",priority:1e3,terminal:true,$$tlb:true,compile:function a(c,f){var h=f.ngRepeat;var d=r.$$createComment("end ngRepeat",h);var p=h.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!p){throw n("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",h)}var v=p[1];var g=p[2];var m=p[3];var y=p[4];p=v.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/);if(!p){throw n("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",v)}var _=p[3]||p[1];var b=p[2];if(m&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(m)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(m))){throw n("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",m)}var w,S,O,T;var E={$id:lr};if(y){w=e(y)}else{O=function(e,t){return lr(t)};T=function(e){return e}}return function e(r,a,c,f,p){if(w){S=function(e,t,i){if(b)E[b]=e;E[_]=t;E.$index=i;return w(r,E)}}var v=Ze();r.$watchCollection(g,function e(c){var f,g,y=a[0],w,E=Ze(),M,j,A,P,k,I,D,R,L;if(m){r[m]=c}if(C(c)){I=c;k=S||O}else{k=S||T;I=[];for(var $ in c){if(l.call(c,$)&&$.charAt(0)!=="$"){I.push($)}}}M=I.length;R=new Array(M);for(f=0;f<M;f++){j=c===I?f:I[f];A=c[j];P=k(j,A,f);if(v[P]){D=v[P];delete v[P];E[P]=D;R[f]=D}else if(E[P]){x(R,function(e){if(e&&e.scope)v[e.id]=e});throw n("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",h,P,A)}else{R[f]={id:P,scope:undefined,clone:undefined};E[P]=true}}for(var N in v){D=v[N];L=Ke(D.clone);t.leave(L);if(L[0].parentNode){for(f=0,g=L.length;f<g;f++){L[f][i]=true}}D.scope.$destroy()}for(f=0;f<M;f++){j=c===I?f:I[f];A=c[j];D=R[f];if(D.scope){w=y;do{w=w.nextSibling}while(w&&w[i]);if(s(D)!==w){t.move(Ke(D.clone),null,y)}y=u(D);o(D.scope,f,_,A,b,j,M)}else{p(function e(r,i){D.scope=i;var n=d.cloneNode(false);r[r.length++]=n;t.enter(r,null,y);y=n;D.clone=r;E[D.id]=D;o(D.scope,f,_,A,b,j,M)})}}v=E})}}}}];var bs="ng-hide";var ws="ng-hide-animate";var Ss=["$animate",function(e){return{restrict:"A",multiElement:true,link:function(t,r,i){t.$watch(i.ngShow,function t(i){e[i?"removeClass":"addClass"](r,bs,{tempClasses:ws})})}}}];var Cs=["$animate",function(e){return{restrict:"A",multiElement:true,link:function(t,r,i){t.$watch(i.ngHide,function t(i){e[i?"addClass":"removeClass"](r,bs,{tempClasses:ws})})}}}];var xs=Fa(function(e,t,r){e.$watchCollection(r.ngStyle,function e(r,i){if(i&&r!==i){x(i,function(e,r){t.css(r,"")})}if(r)t.css(r)})});var Os=["$animate","$compile",function(e,t){return{require:"ngSwitch",controller:["$scope",function e(){this.cases={}}],link:function(r,i,n,a){var o=n.ngSwitch||n.on,s=[],l=[],u=[],c=[];var f=function(e,t){return function(r){if(r!==false)e.splice(t,1)}};r.$watch(o,function r(i){var n,o;while(u.length){e.cancel(u.pop())}for(n=0,o=c.length;n<o;++n){var h=Ke(l[n].clone);c[n].$destroy();var d=u[n]=e.leave(h);d.done(f(u,n))}l.length=0;c.length=0;if(s=a.cases["!"+i]||a.cases["?"]){x(s,function(r){r.transclude(function(i,n){c.push(n);var a=r.element;i[i.length++]=t.$$createComment("end ngSwitchWhen");var o={clone:i};l.push(o);e.enter(i,a.parent(),a)})})}})}}}];var Ts=Fa({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:true,link:function(e,t,r,i,n){var a=r.ngSwitchWhen.split(r.ngSwitchWhenSeparator).sort().filter(function(e,t,r){return r[t-1]!==e});x(a,function(e){i.cases["!"+e]=i.cases["!"+e]||[];i.cases["!"+e].push({transclude:n,element:t})})}});var Es=Fa({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:true,link:function(e,t,r,i,n){i.cases["?"]=i.cases["?"]||[];i.cases["?"].push({transclude:n,element:t})}});var Ms=a("ngTransclude");var js=["$compile",function(e){return{restrict:"EAC",compile:function t(r){var i=e(r.contents());r.empty();return function e(t,r,n,a,o){if(!o){throw Ms("orphan","Illegal use of ngTransclude directive in the template! "+"No parent directive that requires a transclusion found. "+"Element: {0}",Me(r))}if(n.ngTransclude===n.$attr.ngTransclude){n.ngTransclude=""}var s=n.ngTransclude||n.ngTranscludeSlot;o(l,null,s);if(s&&!o.isSlotFilled(s)){u()}function l(e,t){if(e.length&&c(e)){r.append(e)}else{u();t.$destroy()}}function u(){i(t,function(e){r.append(e)})}function c(e){for(var t=0,r=e.length;t<r;t++){var i=e[t];if(i.nodeType!==tt||i.nodeValue.trim()){return true}}}}}}}];var As=["$templateCache",function(e){return{restrict:"E",terminal:true,compile:function(t,r){if(r.type==="text/ng-template"){var i=r.id,n=t[0].text;e.put(i,n)}}}}];var Ps={$setViewValue:R,$render:R};function ks(e,t){e.prop("selected",t);e.attr("selected",t)}var Is=["$element","$scope",function(e,r){var i=this,n=new fr;i.selectValueMap={};i.ngModelCtrl=Ps;i.multiple=false;i.unknownOption=h(t.document.createElement("option"));i.hasEmptyOption=false;i.emptyOption=undefined;i.renderUnknownOption=function(t){var r=i.generateUnknownOptionValue(t);i.unknownOption.val(r);e.prepend(i.unknownOption);ks(i.unknownOption,true);e.val(r)};i.updateUnknownOption=function(t){var r=i.generateUnknownOptionValue(t);i.unknownOption.val(r);ks(i.unknownOption,true);e.val(r)};i.generateUnknownOptionValue=function(e){return"? "+lr(e)+" ?"};i.removeUnknownOption=function(){if(i.unknownOption.parent())i.unknownOption.remove()};i.selectEmptyOption=function(){if(i.emptyOption){e.val("");ks(i.emptyOption,true)}};i.unselectEmptyOption=function(){if(i.hasEmptyOption){ks(i.emptyOption,false)}};r.$on("$destroy",function(){i.renderUnknownOption=R});i.readValue=function t(){var r=e.val();var n=r in i.selectValueMap?i.selectValueMap[r]:r;if(i.hasOption(n)){return n}return null};i.writeValue=function t(r){var n=e[0].options[e[0].selectedIndex];if(n)ks(h(n),false);if(i.hasOption(r)){i.removeUnknownOption();var a=lr(r);e.val(a in i.selectValueMap?a:r);var o=e[0].options[e[0].selectedIndex];ks(h(o),true)}else{i.selectUnknownOrEmptyOption(r)}};i.addOption=function(e,t){if(t[0].nodeType===rt)return;Be(e,'"option value"');if(e===""){i.hasEmptyOption=true;i.emptyOption=t}var r=n.get(e)||0;n.set(e,r+1);o()};i.removeOption=function(e){var t=n.get(e);if(t){if(t===1){n.delete(e);if(e===""){i.hasEmptyOption=false;i.emptyOption=undefined}}else{n.set(e,t-1)}}};i.hasOption=function(e){return!!n.get(e)};i.$hasEmptyOption=function(){return i.hasEmptyOption};i.$isUnknownOptionSelected=function(){return e[0].options[0]===i.unknownOption[0]};i.$isEmptyOptionSelected=function(){return i.hasEmptyOption&&e[0].options[e[0].selectedIndex]===i.emptyOption[0]};i.selectUnknownOrEmptyOption=function(e){if(e==null&&i.emptyOption){i.removeUnknownOption();i.selectEmptyOption()}else if(i.unknownOption.parent().length){i.updateUnknownOption(e)}else{i.renderUnknownOption(e)}};var a=false;function o(){if(a)return;a=true;r.$$postDigest(function(){a=false;i.ngModelCtrl.$render()})}var s=false;function l(e){if(s)return;s=true;r.$$postDigest(function(){if(r.$$destroyed)return;s=false;i.ngModelCtrl.$setViewValue(i.readValue());if(e)i.ngModelCtrl.$render()})}i.registerOption=function(e,t,r,n,a){if(r.$attr.ngValue){var s,u=NaN;r.$observe("value",function e(r){var n;var a=t.prop("selected");if(G(u)){i.removeOption(s);delete i.selectValueMap[u];n=true}u=lr(r);s=r;i.selectValueMap[u]=r;i.addOption(r,t);t.attr("value",u);if(n&&a){l()}})}else if(n){r.$observe("value",function e(r){i.readValue();var n;var a=t.prop("selected");if(G(s)){i.removeOption(s);n=true}s=r;i.addOption(r,t);if(n&&a){l()}})}else if(a){e.$watch(a,function e(n,a){r.$set("value",n);var o=t.prop("selected");if(a!==n){i.removeOption(a)}i.addOption(n,t);if(a&&o){l()}})}else{i.addOption(r.value,t)}r.$observe("disabled",function(e){if(e==="true"||e&&t.prop("selected")){if(i.multiple){l(true)}else{i.ngModelCtrl.$setViewValue(null);i.ngModelCtrl.$render()}}});t.on("$destroy",function(){var e=i.readValue();var t=r.value;i.removeOption(t);o();if(i.multiple&&e&&e.indexOf(t)!==-1||e===t){l(true)}})}}];var Ds=function(){return{restrict:"E",require:["select","?ngModel"],controller:Is,priority:1,link:{pre:e,post:t}};function e(e,t,r,i){var n=i[0];var a=i[1];if(!a){n.registerOption=R;return}n.ngModelCtrl=a;t.on("change",function(){n.removeUnknownOption();e.$apply(function(){a.$setViewValue(n.readValue())})});if(r.multiple){n.multiple=true;n.readValue=function e(){var r=[];x(t.find("option"),function(e){if(e.selected&&!e.disabled){var t=e.value;r.push(t in n.selectValueMap?n.selectValueMap[t]:t)}});return r};n.writeValue=function e(r){x(t.find("option"),function(e){var t=!!r&&(fe(r,e.value)||fe(r,n.selectValueMap[e.value]));var i=e.selected;if(t!==i){ks(h(e),t)}})};var o,s=NaN;e.$watch(function e(){if(s===a.$viewValue&&!ve(o,a.$viewValue)){o=ot(a.$viewValue);a.$render()}s=a.$viewValue});a.$isEmpty=function(e){return!e||e.length===0}}}function t(e,t,r,i){var n=i[1];if(!n)return;var a=i[0];n.$render=function(){a.writeValue(n.$viewValue)}}};var Rs=["$interpolate",function(e){return{restrict:"E",priority:100,compile:function(t,r){var i,n;if(G(r.ngValue)){}else if(G(r.value)){i=e(r.value,true)}else{n=e(t.text(),true);if(!n){r.$set("value",t.text())}}return function(e,t,r){var a="$selectController",o=t.parent(),s=o.data(a)||o.parent().data(a);if(s){s.registerOption(e,t,r,i,n)}}}}}];var Ls=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,r,i){if(!i)return;r.required=true;i.$validators.required=function(e,t){return!r.required||!i.$isEmpty(t)};r.$observe("required",function(){i.$validate()})}}};var $s=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,r,i){if(!i)return;var n,o=r.ngPattern||r.pattern;r.$observe("pattern",function(e){if(Y(e)&&e.length>0){e=new RegExp("^"+e+"$")}if(e&&!e.test){throw a("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",o,e,Me(t))}n=e||undefined;i.$validate()});i.$validators.pattern=function(e,t){return i.$isEmpty(t)||F(n)||n.test(t)}}}};var Ns=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,r,i){if(!i)return;var n=-1;r.$observe("maxlength",function(e){var t=k(e);n=I(t)?-1:t;i.$validate()});i.$validators.maxlength=function(e,t){return n<0||i.$isEmpty(t)||t.length<=n}}}};var Fs=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,r,i){if(!i)return;var n=0;r.$observe("minlength",function(e){n=k(e)||0;i.$validate()});i.$validators.minlength=function(e,t){return i.$isEmpty(t)||t.length>=n}}}};if(t.angular.bootstrap){if(t.console){console.log("WARNING: Tried to load AngularJS more than once.")}return}Ve();ct(b);b.module("ngLocale",[],["$provide",function(e){var t={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};function r(e){e=e+"";var t=e.indexOf(".");return t==-1?0:e.length-t-1}function i(e,t){var i=t;if(undefined===i){i=Math.min(r(e),3)}var n=Math.pow(10,i);var a=(e*n|0)%n;return{v:i,f:a}}e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(e,r){var n=e|0;var a=i(e,r);if(n==1&&a.v==0){return t.ONE}return t.OTHER}})}]);h(function(){Ne(t.document,Fe)})})(window);!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>')}).call(this,r(24))},function(e,t,r){r(540);e.exports=angular},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},,,,,,,function(e,t){},function(e,t){},,,,,,,,function(e,t){}]]);
//# sourceMappingURL=commons.c93f03.js.map