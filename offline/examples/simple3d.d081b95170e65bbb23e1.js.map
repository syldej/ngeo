{"version":3,"sources":["webpack:///./node_modules/olcs/core/OLImageryProvider.js","webpack:///./node_modules/olcs/core.js","webpack:///./node_modules/openlayers/src/ol/source/OSM.js","webpack:///./examples/simple3d.js","webpack:///./src/olcs/olcsModule.js","webpack:///./src/olcs/Service.js","webpack:///./src/olcs/constants.js","webpack:///./src/olcs/controls3d.js","webpack:///./src/olcs/Manager.js","webpack:///./node_modules/olcs/contrib/LazyLoader.js","webpack:///./node_modules/olcs/util.js","webpack:///./node_modules/olcs/AutoRenderLoop.js","webpack:///./node_modules/olcs/Camera.js","webpack:///./node_modules/olcs/AbstractSynchronizer.js","webpack:///./node_modules/olcs/RasterSynchronizer.js","webpack:///./node_modules/openlayers/src/ol/source/Cluster.js","webpack:///./node_modules/olcs/core/VectorLayerCounterpart.js","webpack:///./node_modules/olcs/FeatureConverter.js","webpack:///./node_modules/olcs/VectorSynchronizer.js","webpack:///./node_modules/olcs/SynchronizedOverlay.js","webpack:///./node_modules/olcs/OverlaySynchronizer.js","webpack:///./node_modules/olcs/OLCesium.js","webpack:///./node_modules/olcs/contrib/Manager.js","webpack:///./node_modules/openlayers/src/ol/source/XYZ.js"],"names":["OLImageryProvider_exports","source","opt_fallbackProj","this","source_","projection_","fallbackProj_","ready_","credit_","tilingScheme_","rectangle_","proxy","get","proxy_","getURL","Cesium","DefaultProxy","errorEvent_","Event","emptyCanvas_","document","createElement","width","height","on","events","EventType","CHANGE","e","handleSourceChanged_","Object","defineProperties","prototype","ready","rectangle","tileWidth","tg","getTileGrid","getTileSize","tileHeight","maximumLevel","getMaxZoom","minimumLevel","tilingScheme","tileDiscardPolicy","errorEvent","credit","hasAlphaChannel","pickFeatures","getState","proj","getProjection","ol_proj","GeographicTilingScheme","WebMercatorTilingScheme","createCreditForSource","text","attributions","getAttributions","imageUrl","link","forEach","el","getHTML","replace","length","logo","getLogo","src","href","Credit","getTileCredits","x","y","level","requestImage","tileUrlFunction","getTileUrlFunction","z_","y_","url","call","ImageryProvider","loadImage","OLImageryProvider","core_exports","computePixelSizeAtCoordinate","scene","target","camera","canvas","frustum","distance","Cartesian3","magnitude","subtract","position","pixelSize","Cartesian2","getPixelDimensions","clientWidth","clientHeight","computeBoundingBoxAtTarget","amount","transform","Transforms","eastNorthUpToFixedFrame","bottomLeft","Matrix4","multiplyByPoint","topRight","Ellipsoid","WGS84","cartesianArrayToCartographicArray","applyHeightOffsetToGeometry","geometry","applyTransform","input","output","stride","goog_asserts_prod_default","a","assert","undefined","i","rotateAroundAxis","angle","axis","opt_options","clamp","Math","defaultValue","options","duration","easing","ol_easing","linear","callback","lastProgress","oldTransform","start","Date","now","step","timestamp","progress","clone","stepAngle","lookAtTransform","rotate","window","requestAnimationFrame","setHeadingUsingBottomCenter","heading","bottomCenter","angleToZenith","computeAngleToZenith","right","quaternion","Quaternion","fromAxisAngle","rotation","Matrix3","fromQuaternion","vector","zenith","multiplyByVector","add","fromTranslation","pickOnTerrainOrEllipsoid","pixel","ray","getPickRay","globe","pick","pickEllipsoid","pickBottomPoint","bottom","pickCenterPoint","center","computeSignedTiltAngleOnGlobe","Ray","direction","ellipsoid","obj","IntersectionTests","rayEllipsoid","getPoint","normal","geocentricSurfaceNormal","angleBetween","signedAngleBetween","PI","convertLongitudeRange","bottomFovRay","fovy2","fovy","matrix","first","second","b","c","normalize","cross","cosine","dot","sine","sign","atan2","pivot","fy","negate","left","lookAt","opt_globe","getHeight","targetb","cartographicToCartesian","up","extentToRectangle","extent","projection","ext","transformExtent","Rectangle","fromDegrees","tileLayerToImageryLayer","olLayer","viewProj","Tile","Image","provider","getSource","ImageWMS","getUrl","getImageLoadFunction","source_Image","defaultImageLoadFunction","TileWMS","params","getParams","olcs.proxy","olcs.imagesource","TileImage","is3857","is4326","layerOptions","getExtent","ImageryLayer","updateCesiumLayerProperties","olLayerWithParents","csLayer","opacity","visible","layer","concat","parents","layerOpacity","getOpacity","layerVisible","getVisible","alpha","show","ol4326CoordinateToCesiumCartesian","coordinate","coo","ol4326CoordinateArrayToCsCartesians","coordinates","toCartesian","cartesians","push","olGeometryCloneTo4326","proj4326","properties","getProperties","setProperties","convertColorToCesium","olColor","Array","isArray","Color","byteToFloat","fromCssColorString","fail","convertUrlToCesium","subdomains","re","match","exec","startCharCode","charCodeAt","stopCharCode","charCode","String","fromCharCode","resetToNorthZenith","map","Promise","resolve","reject","currentHeading","getView","getRotation","view","normalizeView","rotateAroundBottomCenter","resolution","getResolution","setRotation","setResolution","constrainResolution","__webpack_exports__","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__index_js__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_1__source_XYZ_js__","OSM","ATTRIBUTION","crossOrigin","cacheSize","opaque","maxZoom","reprojectionErrorThreshold","tileLoadFunction","wrapX","exports","module","angular","ngeoBase","name","ngeoMapModule","ngeoOlcsOlcsModule","MainController","$rootScope","ngeoOlcsService","olMap","layers","olLayerTile","olSourceOSM","olView","zoom","ol3dm","ngeoOlcsManager","initialize","controller","control","Service","ngeoDebounce","ngeoLocation","ngeoStateManager","_classCallCheck","manager_","ngeoDebounce_","ngeoLocation_","ngeoStateManager_","$inject","_createClass","key","manager","_this","cameraToState_","getInitialBooleanValue","initialStateToCamera_","stateManager","lon","getInitialNumberValue","ngeoOlcsConstants","Permalink3dParam","LON","lat","LAT","elevation","ELEVATION","HEADING","pitch","PITCH","googAsserts","set3dWithView","_this2","getOl3d","getCesiumScene","moveEnd","addEventListener","_this2$ngeoStateManag","positionCartographic","updateState","_defineProperty","ENABLED","toDegrees","longitude","toFixed","latitude","event","is3dEnabled","remove3dState_","_this3","getParamKeysWithPrefix","PREFIX","deleteParam","ngeoMiscDebounce","ngeoStatemanagerLocation","ngeoStatemanagerService","service","olEasing","ngeoOlcsControls3dTemplateUrlInjectable","$attrs","ngeoOlcsControls3dTemplateUrl","templateUrl","baseModuleTemplateUrl","component","bindings","minTilt","maxTilt","Controller","$element","element_","tiltRightEl_","tiltLeftEl_","rotation3dEl_","angle3dEl_","previousRotation_","previousViewMatrix_","animationFrameRequestId_","olcsService_","older","newer","newRotation","getOlView","Number","isFinite","abs","rotateElement_","newViewMatrix","getCesiumViewMatrix","equalsEpsilon","newTilt","getTiltOnGlobe","addClass","hasClass","removeClass","updateWidget_","cancelAnimationFrame","getManager","find","element","r","css","-moz-transform","-webkit-transform","-o-transform","-ms-transform","toRadians","setHeading","tiltOnGlobe","olcsCore","delta","cur","newResolution","getAnimating","cancelAnimations","animate","easeOut","requires","_Manager","Manager","_possibleConstructorReturn","__proto__","getPrototypeOf","rootScope_","_inherits","olcsContribManager","promise","then","$apply","LazyLoader","[object Object]","url_","script","onload","onerror","head","appendChild","util_exports","param","supportsImageRenderingPixelatedResult_","imageRenderingValueResult_","supportsImageRenderingPixelated","setAttribute","tmp","style","imageRenderingValue","util","AutoRenderLoop_exports","ol3d","debug","scene_","canvas_","verboseRendering","_boundNotifyRepaintRequired","notifyRepaintRequired","bind","lastCameraViewMatrix_","lastCameraMoveTime_","stoppedRendering","_removePostRenderListener","postRender","repaintEventNames_","CameraPrototype","Camera","interceptedAPIs_","originalAPIs_","tuple","originalLoadWithXhr_","loadWithXhr","load","originalScheduleTask_","TaskProcessor","scheduleTask","enable","repaintKey","that","responseType","method","data","headers","deferred","overrideMimeType","preferText","timeout","arguments","parameters","transferableObjects","result","taskProcessor","_originalWorkerMessageSinkRepaint","worker","onmessage","api","parent","original","args","apply","getOlMap","getLayerGroup","disable","removeEventListener","un","date","viewMatrix","cameraMovedInLastSecond","surface","tilesWaiting","tweens","console","log","setBlockCesiumRendering","restartRenderLoop","setDebug","AutoRenderLoop","Camera_exports","cam_","map_","view_","viewListenKey_","toLonLat_","identityProjection","fromLonLat_","tilt_","distance_","viewUpdateInProgress_","setView_","opt_output","opt_dimension","dim","Observable","unByKey","toLonLat","getTransform","fromLonLat","listen","handleViewEvent_","readFromView","getHeading","setTilt","tilt","updateCamera_","getTilt","setDistance","updateView","getDistance","setCenter","getCenter","setPosition","ll","carto","Cartographic","math","getAltitude","getPosition","cartesianToCartographic","pos","setAltitude","altitude","core","destination","orientation","PI_OVER_TWO","roll","setView","moveBackward","checkCameraChange","calcDistanceForResolution","bestTarget","bestTargetCartographic","calcResolutionForDistance","targetNormal","targetToCamera","z","tiltAngle","acos","isNaN","opt_dontSync","old","current","metersPerUnit","getMetersPerUnit","cos","tan","AbstractSynchronizer_exports","olLayers","getLayers","mapLayerGroup","layerMap","olLayerListenKeys","olGroupListenKeys_","synchronize","destroyAll","addLayers_","orderLayers","root","fifo","splice","olLayerId","ol","getUid","toString","cesiumObjects","Group","listenForGroupChanges_","createSingleLayerCounterparts","l","newOlLayerWithParents","cesiumObject","addCesiumObject","removeAndDestroySingleLayer_","uid","counterparts","counterpart","removeSingleCesiumObject","destroyCesiumObject","unlistenSingleGroup_","group","removeLayer_","done","uuid","listenKeyArray","contentKeys","listenAddRemove","collection","indexOf","objKey","removeAllCesiumObjects","object","destroy","AbstractSynchronizer","RasterSynchronizer_exports","cesiumLayers_","imageryLayers","ourLayers_","ImageryLayerCollection","inherits","remove","removeAll","convertLayerToCesiumImageries","olLayerItem","zIndices","queue","getZIndex","sublayers","unshift","getArray","array","stableSort","layer1","layer2","raiseToTop","RasterSynchronizer","Cluster","Vector","features","geometryFunction","feature","getGeometry","asserts","Point","refresh","loadFeatures","clear","cluster","addFeatures","ol_extent","mapDistance","getFeatures","clustered","ii","getCoordinates","neighbors","getFeaturesInExtent","filter","neighbor","createCluster","centroid","scale","Feature","set","source_Cluster","VectorLayerCounterpart_exports","layerProjection","billboards","BillboardCollection","primitives","PrimitiveCollection","olListenKeys","rootCollection_","context","featureToCesiumMap","getRootPrimitive","VectorLayerCounterpart","FeatureConverter_exports","boundOnRemoveOrClearFeatureListener_","onRemoveOrClearFeature_","evt","assertInstanceof","cancellers","id","canceller","hasOwnProperty","setReferenceForPicking","primitive","olFeature","createColoredPrimitive","olGeometry","color","opt_lineWidth","flat","renderState","depthTest","enabled","lineWidth","instances","GeometryInstance","attributes","ColorGeometryInstanceAttribute","fromColor","createInstance","getHeightReference","HeightReference","CLAMP_TO_GROUND","ctor","constructor","GroundPrimitive","geometryInstances","appearance","PerInstanceColorAppearance","Primitive","extractColorFromOlStyle","outline","fillColor","getFill","getColor","strokeColor","getStroke","extractLineWidthFromOlStyle","getWidth","wrapFillAndOutlineGeometries","fillGeometry","outlineGeometry","olStyle","outlineColor","p1","p2","addTextStyle","getText","label","olGeometry4326TextPartToCesium","csAddBillboard","bbOptions","bb","olCircleGeometryToCesium","getType","point","slice","getRadius","radius","CircleGeometry","CircleOutlineGeometry","extrudedHeight","olLineStringGeometryToCesium","positions","PolylineMaterialAppearance","material","olStyleToCesium","geometryOptions","vertexFormat","outlinePrimitive","CorridorGeometry","PolylineGeometry","olPolygonGeometryToCesium","boundingExtent","maxHeight","max","RectangleGeometry","RectangleOutlineGeometry","rings","getLinearRings","hierarchy","polygonHierarchy","olPos","holes","PolygonGeometry","perPositionHeight","PolygonOutlineGeometry","altitudeMode","heightReference","NONE","RELATIVE_TO_GROUND","olPointGeometryToCesium","opt_newBillboardCallback","imageStyle","getImage","Icon","image","isImageLoaded","naturalHeight","naturalWidth","complete","reallyCreateBillboard","HTMLCanvasElement","HTMLImageElement","getScale","verticalOrigin","VerticalOrigin","BOTTOM","cancelled","fuid","listener","isDestroyed","listenOnce","olMultiGeometryToCesium","accumulate","geometries","functor","subgeos","getPoints","getLineStrings","getPolygons","labels","LabelCollection","extentCenter","SimpleGeometry","getFirstCoordinate","offsetX","getOffsetX","offsetY","getOffsetY","offset","pixelOffset","font","getFont","horizontalOrigin","labelStyle","LabelStyle","FILL","outlineWidth","OUTLINE","FILL_AND_OUTLINE","getTextAlign","HorizontalOrigin","LEFT","RIGHT","CENTER","getTextBaseline","TOP","fill","stroke","getLineDash","Material","fromType","horizontal","repeat","evenColor","oddColor","computePlainStyle","fallbackStyleFunction","featureStyleFunction","getStyleFunction","getGeometryFromFeature","opt_geom","geom3d","Geometry","geomFuncRes","getGeometryFunction","olFeatureToCesium","geom","newBillboardAddedCallback","getGeometries","prims","bbs","result2","Error","olVectorLayerToCesium","featurePrimitiveMap","layerStyle","styles","prim","convert","FeatureConverter","VectorSynchronizer_exports","opt_converter","converter","csAllPrimitives_","destroyPrimitives","updateLayerVisibility","csPrimitive","layer_Vector","Layer","csPrimitives","onAddFeature","layer_Image","onRemoveFeature","Billboard","VectorSynchronizer","SynchronizedOverlay_exports","scenePostRenderListenerRemover_","synchronizer_","synchronizer","parent_","positionWGS84_","observer_","MutationObserver","handleElementChanged","attributeObserver_","listenerKeys_","setPropertyFromEvent_","Overlay","getOptions","handleMapChanged","observeTarget_","disconnect","observe","childList","characterData","subtree","observer","childNodes","node","nodeType","getScene","dom","removeNode","updatePixelPosition","container","stopEvent","getOverlayContainerStopEvent","getOverlayContainer","insertFirst","insertBefore","handlePositionChanged","sourceProjection","getMap","cloneNode","Node","TEXT_NODE","dispatchEvent","MouseEvent","stopPropagation","nodes","removeChildren","getElement","parentNode","clonedNode","setVisible","cartesian","fromDegreesArray","fromDegreesArrayHeights","ellipsoidBoundingSphere","BoundingSphere","Occluder","isPointVisible","computeCullingVolume","computeVisibility","pixelCartesian","cartesianToCanvasCoordinates","mapSize","updateRenderedPosition","SynchronizedOverlay","OverlaySynchronizer_exports","overlays_","getOverlays","overlayContainerStopEvent_","className","CLICK","DBLCLICK","MOUSEDOWN","TOUCHSTART","MSPOINTERDOWN","MapBrowserEventType","POINTERDOWN","MOUSEWHEEL","WHEEL","parentElement","overlayContainer_","overlayMap_","addOverlays","addOverlayFromEvent_","removeOverlayFromEvent_","overlay","addOverlay","cesiumOverlay","overlayId","removedOverlay","removeOverlay","csOverlay","keys","OverlaySynchronizer","OLCesium_exports","autoRenderLoop_","time_","time","JulianDate","to4326Transform_","resolutionScale_","canvasClientWidth_","canvasClientHeight_","resolutionScaleChanged_","fillArea","container_","containerAttribute","createAttribute","setAttributeNode","targetElement","getElementById","oc","getViewport","querySelector","isOverMap_","stopOpenLayersEventsPropagation","overlayEvents","canvasAttribute","oncontextmenu","onselectstart","enabled_","pausedInteractions_","hiddenRootGroup_","sceneOptions","scene3DOnly","Scene","sscc","screenSpaceCameraController","tiltEventTypes","eventType","CameraEventType","LEFT_DRAG","modifier","KeyboardEventModifier","SHIFT","ALT","enableLook","constrainedAxis","UNIT_Z","camera_","globe_","Globe","baseColor","WHITE","skyAtmosphere","SkyAtmosphere","firstImageryProvider","SingleTileImageryProvider","addImageryProvider","dataSourceCollection_","DataSourceCollection","dataSourceDisplay_","DataSourceDisplay","dataSourceCollection","synchronizers","createSynchronizers","handleResize_","credits","nextElementSibling","display","lastFrameTime_","renderId_","targetFrameRate_","POSITIVE_INFINITY","blockCesiumRendering_","warmingUp_","trackedFeature_","trackedEntity_","entityView_","needTrackedEntityUpdate_","boundingSphereScratch_","EventHelper","updateTrackedEntity_","enableSuspendTerrainAdjustment","trackedFeature","enableTilt","defaultDataSource","entities","IDENTITY","to4326Transform","toCesiumPosition","coo4326","CallbackProperty","TRANSPARENT","render_","onAnimationFrame_","frameTime","interval","julianDate","initializeFrame","update","trackedEntity","getBoundingSphere","BoundingSphereState","DONE","render","state","PENDING","bs","FAILED","EntityView","mapProjection","resolutionScale","devicePixelRatio","aspectRatio","getCamera","getDataSources","getDataSourceDisplay","getEnabled","setEnabled","interactions","visibility","throwOnUnitializedMap_","getInteractions","arr","rootGroup","classList","interaction","warmUp","csCamera","setTimeout","block","enableAutoRenderLoop","getAutoRenderLoop","setResolutionScale","setTargetFrameRate","isDef","OLCesium","cesiumUrl","cameraExtentInRadians","super","cesiumUrl_","boundingSphere_","blockLimiter_","promise_","cesiumInitialTilt_","fogDensity","fogSSEFactor","minimumZoomDistance","maximumZoomDistance","limitCameraToBoundingSphereRatio","cesiumLazyLoader","onCesiumLoaded","rect","DEFAULT_VIEW_RECTANGLE","fromRectangle3D","instantiateOLCesium","configureForUsability","configureForPerformance","terrainProvider","CesiumTerrainProvider","fog","density","screenSpaceErrorFactor","sscController","depthTestAgainstTerrain","backgroundColor","limitCameraToBoundingSphere","fromCartesian","ratio","flying","unblockLimiter","flyToBoundingSphere","cancel","is3DCurrentlyEnabled","headingDeg","pitchDeg","getRectangleCameraCoordinates","mag","multiplyByScalar","flyTo","endTransform","__WEBPACK_IMPORTED_MODULE_1__source_TileImage_js__","__WEBPACK_IMPORTED_MODULE_2__tilegrid_js__","XYZ","tileGrid","createXYZ","extentFromProjection","minZoom","tileSize","tilePixelRatio","urls","transition"],"mappings":"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","file":"simple3d.d081b95170e65bbb23e1.js","sourcesContent":["/**\n * @module\n */\nimport olEvents from 'ol/events';\nimport olProj from 'ol/proj';\n\nconst exports = function(source, opt_fallbackProj) {\n  // Do not ol.inherit() or call super constructor from\n  // Cesium.ImageryProvider since this particular function is a\n  // 'non instanciable interface' which throws on instanciation.\n\n  /**\n   * @type {!ol.source.TileImage}\n   * @private\n   */\n  this.source_ = source;\n\n  /**\n   * @type {?ol.proj.Projection}\n   * @private\n   */\n  this.projection_ = null;\n\n  /**\n   * @type {?ol.proj.Projection}\n   * @private\n   */\n  this.fallbackProj_ = opt_fallbackProj || null;\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.ready_ = false;\n\n  /**\n   * @type {?Cesium.Credit}\n   * @private\n   */\n  this.credit_ = null;\n\n  /**\n   * @type {?Cesium.TilingScheme}\n   * @private\n   */\n  this.tilingScheme_ = null;\n\n  /**\n   * @type {?Cesium.Rectangle}\n   * @private\n   */\n  this.rectangle_ = null;\n\n  const proxy = this.source_.get('olcs.proxy');\n  if (proxy) {\n    if (typeof proxy === 'function') {\n      this.proxy_ = {\n        'getURL': proxy\n      };\n    } else if (typeof proxy === 'string') {\n      this.proxy_ = new Cesium.DefaultProxy(proxy);\n    }\n  }\n\n  this.errorEvent_ = new Cesium.Event();\n\n  this.emptyCanvas_ = document.createElement('canvas');\n  this.emptyCanvas_.width = 1;\n  this.emptyCanvas_.height = 1;\n\n  this.source_.on(olEvents.EventType.CHANGE, function(e) {\n    this.handleSourceChanged_();\n  }, this);\n  this.handleSourceChanged_();\n};\n\n\n// definitions of getters that are required to be present\n// in the Cesium.ImageryProvider instance:\nObject.defineProperties(exports.prototype, {\n  'ready': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.ready_;}\n  },\n\n  'rectangle': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.rectangle_;}\n  },\n\n  'tileWidth': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {\n          const tg = this.source_.getTileGrid();\n          return tg ? tg.getTileSize(0) : 256;\n        }\n  },\n\n  'tileHeight': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.tileWidth;}\n  },\n\n  'maximumLevel': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {\n          const tg = this.source_.getTileGrid();\n          return tg ? tg.getMaxZoom() : 18;\n        }\n  },\n\n  'minimumLevel': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {\n          // WARNING: Do not use the minimum level (at least until the extent is\n          // properly set). Cesium assumes the minimumLevel to contain only\n          // a few tiles and tries to load them all at once -- this can\n          // freeze and/or crash the browser !\n          return 0;\n          //var tg = this.source_.getTileGrid();\n          //return tg ? tg.getMinZoom() : 0;\n        }\n  },\n\n  'tilingScheme': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.tilingScheme_;}\n  },\n\n  'tileDiscardPolicy': {\n    'get': function() {return undefined;}\n  },\n\n  'errorEvent': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.errorEvent_;}\n  },\n\n  'credit': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.credit_;}\n  },\n\n  'proxy': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.proxy_;}\n  },\n\n  'hasAlphaChannel': {\n    'get': function() {return true;}\n  },\n\n  'pickFeatures': {\n    'get': function() {return undefined;}\n  }\n});\n\n\n/**\n * Checks if the underlying source is ready and cached required data.\n * @private\n */\nexports.prototype.handleSourceChanged_ = function() {\n  if (!this.ready_ && this.source_.getState() == 'ready') {\n    const proj = this.source_.getProjection();\n    this.projection_ = proj ? proj : this.fallbackProj_;\n    if (this.projection_ == olProj.get('EPSG:4326')) {\n      this.tilingScheme_ = new Cesium.GeographicTilingScheme();\n    } else if (this.projection_ == olProj.get('EPSG:3857')) {\n      this.tilingScheme_ = new Cesium.WebMercatorTilingScheme();\n    } else {\n      return;\n    }\n    this.rectangle_ = this.tilingScheme_.rectangle;\n\n    const credit = exports.createCreditForSource(this.source_);\n    this.credit_ = credit || null;\n\n    this.ready_ = true;\n  }\n};\n\n\n/**\n * Tries to create proper Cesium.Credit for\n * the given ol.source.Source as closely as possible.\n * @param {!ol.source.Source} source\n * @return {?Cesium.Credit}\n */\nexports.createCreditForSource = function(source) {\n  let text = '';\n  const attributions = source.getAttributions();\n  if (attributions) {\n    attributions.forEach((el) => {\n      // strip html tags (not supported in Cesium)\n      text += `${el.getHTML().replace(/<\\/?[^>]+(>|$)/g, '')} `;\n    });\n  }\n\n  let imageUrl, link;\n  if (text.length == 0) {\n    // only use logo if no text is specified\n    // otherwise the Cesium will automatically skip the text:\n    // \"The text to be displayed on the screen if no imageUrl is specified.\"\n    const logo = source.getLogo();\n    if (logo) {\n      if (typeof logo == 'string') {\n        imageUrl = logo;\n      } else {\n        imageUrl = logo.src;\n        link = logo.href;\n      }\n    }\n  }\n\n  return (imageUrl || text.length > 0) ? new Cesium.Credit(text, imageUrl, link) : null;\n};\n\n\n/**\n * TODO: attributions for individual tile ranges\n * @export\n * @override\n */\nexports.prototype.getTileCredits = function(x, y, level) {\n  return undefined;\n};\n\n\n/**\n * @export\n * @override\n */\nexports.prototype.requestImage = function(x, y, level) {\n  const tileUrlFunction = this.source_.getTileUrlFunction();\n  if (tileUrlFunction && this.projection_) {\n\n    // Perform mapping of Cesium tile coordinates to OpenLayers tile coordinates:\n    // 1) Cesium zoom level 0 is OpenLayers zoom level 1 for EPSG:4326\n    const z_ = this.tilingScheme_ instanceof Cesium.GeographicTilingScheme ? level + 1 : level;\n    // 2) OpenLayers tile coordinates increase from bottom to top\n    const y_ = -y - 1;\n\n    let url = tileUrlFunction.call(this.source_,\n        [z_, x, y_], 1, this.projection_);\n    if (this.proxy_) {\n      url = this.proxy_.getURL(url);\n    }\n    return url ? Cesium.ImageryProvider.loadImage(this, url) : this.emptyCanvas_;\n  } else {\n    // return empty canvas to stop Cesium from retrying later\n    return this.emptyCanvas_;\n  }\n};\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/core/OLImageryProvider.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nconst exports = {};\nimport olEasing from 'ol/easing';\nimport googAsserts from 'goog/asserts';\nimport olLayerTile from 'ol/layer/Tile';\nimport olLayerImage from 'ol/layer/Image';\nimport olProj from 'ol/proj';\nimport olSourceImage from 'ol/source/Image';\nimport olSourceImageWMS from 'ol/source/ImageWMS';\nimport olSourceTileImage from 'ol/source/TileImage';\nimport olSourceTileWMS from 'ol/source/TileWMS';\nimport olcsCoreOLImageryProvider from './core/OLImageryProvider.js';\n\n\n/**\n * Compute the pixel width and height of a point in meters using the\n * camera frustum.\n * @param {!Cesium.Scene} scene\n * @param {!Cesium.Cartesian3} target\n * @return {!Cesium.Cartesian2} the pixel size\n * @api\n */\nexports.computePixelSizeAtCoordinate = function(scene, target) {\n  const camera = scene.camera;\n  const canvas = scene.canvas;\n  const frustum = camera.frustum;\n  const distance = Cesium.Cartesian3.magnitude(Cesium.Cartesian3.subtract(\n      camera.position, target, new Cesium.Cartesian3()));\n  const pixelSize = new Cesium.Cartesian2();\n  return frustum.getPixelDimensions(canvas.clientWidth, canvas.clientHeight,\n      distance, pixelSize);\n};\n\n\n/**\n * Compute bounding box around a target point.\n * @param {!Cesium.Scene} scene\n * @param {!Cesium.Cartesian3} target\n * @param {number} amount Half the side of the box, in pixels.\n * @return {Array<Cesium.Cartographic>} bottom left and top right\n * coordinates of the box\n */\nexports.computeBoundingBoxAtTarget = function(scene, target, amount) {\n  const pixelSize = exports.computePixelSizeAtCoordinate(scene, target);\n  const transform = Cesium.Transforms.eastNorthUpToFixedFrame(target);\n\n  const bottomLeft = Cesium.Matrix4.multiplyByPoint(\n      transform,\n      new Cesium.Cartesian3(-pixelSize.x * amount, -pixelSize.y * amount, 0),\n      new Cesium.Cartesian3());\n\n  const topRight = Cesium.Matrix4.multiplyByPoint(\n      transform,\n      new Cesium.Cartesian3(pixelSize.x * amount, pixelSize.y * amount, 0),\n      new Cesium.Cartesian3());\n\n  return Cesium.Ellipsoid.WGS84.cartesianArrayToCartographicArray(\n      [bottomLeft, topRight]);\n};\n\n\n/**\n *\n * @param {!ol.geom.Geometry} geometry\n * @param {number} height\n * @api\n */\nexports.applyHeightOffsetToGeometry = function(geometry, height) {\n  geometry.applyTransform((input, output, stride) => {\n    googAsserts.assert(input === output);\n    if (stride !== undefined && stride >= 3) {\n      for (let i = 0; i < output.length; i += stride) {\n        output[i + 2] = output[i + 2] + height;\n      }\n    }\n    return output;\n  });\n};\n\n\n/**\n * @param {!Cesium.Camera} camera\n * @param {number} angle\n * @param {!Cesium.Cartesian3} axis\n * @param {!Cesium.Matrix4} transform\n * @param {olcsx.core.RotateAroundAxisOption=} opt_options\n * @api\n */\nexports.rotateAroundAxis = function(camera, angle, axis, transform,\n    opt_options) {\n  const clamp = Cesium.Math.clamp;\n  const defaultValue = Cesium.defaultValue;\n\n  const options = opt_options || {};\n  const duration = defaultValue(options.duration, 500); // ms\n  const easing = defaultValue(options.easing, olEasing.linear);\n  const callback = options.callback;\n\n  let lastProgress = 0;\n  const oldTransform = new Cesium.Matrix4();\n\n  const start = Date.now();\n  const step = function() {\n    const timestamp = Date.now();\n    const timeDifference = timestamp - start;\n    const progress = easing(clamp(timeDifference / duration, 0, 1));\n    googAsserts.assert(progress >= lastProgress);\n\n    camera.transform.clone(oldTransform);\n    const stepAngle = (progress - lastProgress) * angle;\n    lastProgress = progress;\n    camera.lookAtTransform(transform);\n    camera.rotate(axis, stepAngle);\n    camera.lookAtTransform(oldTransform);\n\n    if (progress < 1) {\n      window.requestAnimationFrame(step);\n    } else {\n      if (callback) {\n        callback();\n      }\n    }\n  };\n  window.requestAnimationFrame(step);\n};\n\n\n/**\n * @param {!Cesium.Scene} scene\n * @param {number} heading\n * @param {!Cesium.Cartesian3} bottomCenter\n * @param {olcsx.core.RotateAroundAxisOption=} opt_options\n * @api\n */\nexports.setHeadingUsingBottomCenter = function(scene, heading,\n    bottomCenter, opt_options) {\n  const camera = scene.camera;\n  // Compute the camera position to zenith quaternion\n  const angleToZenith = exports.computeAngleToZenith(scene, bottomCenter);\n  const axis = camera.right;\n  const quaternion = Cesium.Quaternion.fromAxisAngle(axis, angleToZenith);\n  const rotation = Cesium.Matrix3.fromQuaternion(quaternion);\n\n  // Get the zenith point from the rotation of the position vector\n  const vector = new Cesium.Cartesian3();\n  Cesium.Cartesian3.subtract(camera.position, bottomCenter, vector);\n  const zenith = new Cesium.Cartesian3();\n  Cesium.Matrix3.multiplyByVector(rotation, vector, zenith);\n  Cesium.Cartesian3.add(zenith, bottomCenter, zenith);\n\n  // Actually rotate around the zenith normal\n  const transform = Cesium.Matrix4.fromTranslation(zenith);\n  const rotateAroundAxis = exports.rotateAroundAxis;\n  rotateAroundAxis(camera, heading, zenith, transform, opt_options);\n};\n\n\n/**\n * Get the 3D position of the given pixel of the canvas.\n * @param {!Cesium.Scene} scene\n * @param {!Cesium.Cartesian2} pixel\n * @return {!Cesium.Cartesian3|undefined}\n * @api\n */\nexports.pickOnTerrainOrEllipsoid = function(scene, pixel) {\n  const ray = scene.camera.getPickRay(pixel);\n  const target = scene.globe.pick(ray, scene);\n  return target || scene.camera.pickEllipsoid(pixel);\n};\n\n\n/**\n * Get the 3D position of the point at the bottom-center of the screen.\n * @param {!Cesium.Scene} scene\n * @return {!Cesium.Cartesian3|undefined}\n * @api\n */\nexports.pickBottomPoint = function(scene) {\n  const canvas = scene.canvas;\n  const bottom = new Cesium.Cartesian2(\n      canvas.clientWidth / 2, canvas.clientHeight);\n  return exports.pickOnTerrainOrEllipsoid(scene, bottom);\n};\n\n\n/**\n * Get the 3D position of the point at the center of the screen.\n * @param {!Cesium.Scene} scene\n * @return {!Cesium.Cartesian3|undefined}\n * @api\n */\nexports.pickCenterPoint = function(scene) {\n  const canvas = scene.canvas;\n  const center = new Cesium.Cartesian2(\n      canvas.clientWidth / 2,\n      canvas.clientHeight / 2);\n  return exports.pickOnTerrainOrEllipsoid(scene, center);\n};\n\n\n/**\n * Compute the signed tilt angle on globe, between the opposite of the\n * camera direction and the target normal. Return undefined if there is no\n * intersection of the camera direction with the globe.\n * @param {!Cesium.Scene} scene\n * @return {number|undefined}\n * @api\n */\nexports.computeSignedTiltAngleOnGlobe = function(scene) {\n  const camera = scene.camera;\n  const ray = new Cesium.Ray(camera.position, camera.direction);\n  let target = scene.globe.pick(ray, scene);\n\n  if (!target) {\n    // no tiles in the area were loaded?\n    const ellipsoid = Cesium.Ellipsoid.WGS84;\n    const obj = Cesium.IntersectionTests.rayEllipsoid(ray, ellipsoid);\n    if (obj) {\n      target = Cesium.Ray.getPoint(ray, obj.start);\n    }\n  }\n\n  if (!target) {\n    return undefined;\n  }\n\n  const normal = new Cesium.Cartesian3();\n  Cesium.Ellipsoid.WGS84.geocentricSurfaceNormal(target, normal);\n\n  const angleBetween = exports.signedAngleBetween;\n  const angle = angleBetween(camera.direction, normal, camera.right) - Math.PI;\n  return Cesium.Math.convertLongitudeRange(angle);\n};\n\n\n/**\n * Compute the ray from the camera to the bottom-center of the screen.\n * @param {!Cesium.Scene} scene\n * @return {!Cesium.Ray}\n */\nexports.bottomFovRay = function(scene) {\n  const camera = scene.camera;\n  const fovy2 = camera.frustum.fovy / 2;\n  const direction = camera.direction;\n  const rotation = Cesium.Quaternion.fromAxisAngle(camera.right, fovy2);\n  const matrix = Cesium.Matrix3.fromQuaternion(rotation);\n  const vector = new Cesium.Cartesian3();\n  Cesium.Matrix3.multiplyByVector(matrix, direction, vector);\n  return new Cesium.Ray(camera.position, vector);\n};\n\n\n/**\n * Compute the angle between two Cartesian3.\n * @param {!Cesium.Cartesian3} first\n * @param {!Cesium.Cartesian3} second\n * @param {!Cesium.Cartesian3} normal Normal to test orientation against.\n * @return {number}\n */\nexports.signedAngleBetween = function(first, second, normal) {\n  // We are using the dot for the angle.\n  // Then the cross and the dot for the sign.\n  const a = new Cesium.Cartesian3();\n  const b = new Cesium.Cartesian3();\n  const c = new Cesium.Cartesian3();\n  Cesium.Cartesian3.normalize(first, a);\n  Cesium.Cartesian3.normalize(second, b);\n  Cesium.Cartesian3.cross(a, b, c);\n\n  const cosine = Cesium.Cartesian3.dot(a, b);\n  const sine = Cesium.Cartesian3.magnitude(c);\n\n  // Sign of the vector product and the orientation normal\n  const sign = Cesium.Cartesian3.dot(normal, c);\n  const angle = Math.atan2(sine, cosine);\n  return sign >= 0 ? angle : -angle;\n};\n\n\n/**\n * Compute the rotation angle around a given point, needed to reach the\n * zenith position.\n * At a zenith position, the camera direction is going througth the earth\n * center and the frustrum bottom ray is going through the chosen pivot\n * point.\n * The bottom-center of the screen is a good candidate for the pivot point.\n * @param {!Cesium.Scene} scene\n * @param {!Cesium.Cartesian3} pivot Point around which the camera rotates.\n * @return {number}\n * @api\n */\nexports.computeAngleToZenith = function(scene, pivot) {\n  // This angle is the sum of the angles 'fy' and 'a', which are defined\n  // using the pivot point and its surface normal.\n  //        Zenith |    camera\n  //           \\   |   /\n  //            \\fy|  /\n  //             \\ |a/\n  //              \\|/pivot\n  const camera = scene.camera;\n  const fy = camera.frustum.fovy / 2;\n  const ray = exports.bottomFovRay(scene);\n  const direction = Cesium.Cartesian3.clone(ray.direction);\n  Cesium.Cartesian3.negate(direction, direction);\n\n  const normal = new Cesium.Cartesian3();\n  Cesium.Ellipsoid.WGS84.geocentricSurfaceNormal(pivot, normal);\n\n  const left = new Cesium.Cartesian3();\n  Cesium.Cartesian3.negate(camera.right, left);\n\n  const a = exports.signedAngleBetween(normal, direction, left);\n  return a + fy;\n};\n\n\n/**\n * Rotate the camera so that its direction goes through the target point.\n * If a globe is given, the target height is first interpolated from terrain.\n * @param {!Cesium.Camera} camera\n * @param {!Cesium.Cartographic} target\n * @param {Cesium.Globe=} opt_globe\n * @api\n */\nexports.lookAt = function(camera, target, opt_globe) {\n  if (opt_globe) {\n    const height = opt_globe.getHeight(target);\n    target.height = height || 0;\n  }\n\n  const ellipsoid = Cesium.Ellipsoid.WGS84;\n  const targetb = ellipsoid.cartographicToCartesian(target);\n\n  const position = camera.position;\n  const up = new Cesium.Cartesian3();\n  ellipsoid.geocentricSurfaceNormal(position, up);\n\n  camera.lookAt(position, targetb, up);\n};\n\n\n/**\n * Convert an OpenLayers extent to a Cesium rectangle.\n * @param {ol.Extent} extent Extent.\n * @param {ol.ProjectionLike} projection Extent projection.\n * @return {Cesium.Rectangle} The corresponding Cesium rectangle.\n * @api\n */\nexports.extentToRectangle = function(extent, projection) {\n  if (extent && projection) {\n    const ext = olProj.transformExtent(extent, projection, 'EPSG:4326');\n    return Cesium.Rectangle.fromDegrees(ext[0], ext[1], ext[2], ext[3]);\n  } else {\n    return null;\n  }\n};\n\n\n/**\n * Creates Cesium.ImageryLayer best corresponding to the given ol.layer.Layer.\n * Only supports raster layers\n * @param {!ol.layer.Base} olLayer\n * @param {!ol.proj.Projection} viewProj Projection of the view.\n * @return {?Cesium.ImageryLayer} null if not possible (or supported)\n * @api\n */\nexports.tileLayerToImageryLayer = function(olLayer, viewProj) {\n\n  if (!(olLayer instanceof olLayerTile) && !(olLayer instanceof olLayerImage)) {\n    return null;\n  }\n\n  let provider = null;\n  let source = olLayer.getSource();\n\n  // Convert ImageWMS to TileWMS\n  if (source instanceof olSourceImageWMS && source.getUrl() &&\n    source.getImageLoadFunction() === olSourceImage.defaultImageLoadFunction) {\n    source = new olSourceTileWMS({\n      url: source.getUrl(),\n      params: source.getParams(),\n      attributions: source.getAttributions(),\n      projection: source.getProjection(),\n      logo: source.getLogo(),\n      'olcs.proxy': source.get('olcs.proxy'),\n      'olcs.imagesource': source\n    });\n  }\n\n  if (source instanceof olSourceTileImage) {\n    let projection = source.getProjection();\n\n    if (!projection) {\n      // if not explicit, assume the same projection as view\n      projection = viewProj;\n    } else if (projection !== viewProj) {\n      return null; // do not sync layers with projections different than view\n    }\n\n    const is3857 = projection === olProj.get('EPSG:3857');\n    const is4326 = projection === olProj.get('EPSG:4326');\n    if (is3857 || is4326) {\n      provider = new olcsCoreOLImageryProvider(source, viewProj);\n    } else {\n      return null;\n    }\n  } else {\n    // sources other than TileImage are currently not supported\n    return null;\n  }\n\n  // the provider is always non-null if we got this far\n\n  const layerOptions = {};\n\n  const forcedExtent = /** @type {ol.Extent} */ (olLayer.get('olcs.extent'));\n  const ext = forcedExtent || olLayer.getExtent();\n  if (ext) {\n    layerOptions.rectangle = exports.extentToRectangle(ext, viewProj);\n  }\n\n  const cesiumLayer = new Cesium.ImageryLayer(provider, layerOptions);\n  return cesiumLayer;\n};\n\n\n/**\n * Synchronizes the layer rendering properties (opacity, visible)\n * to the given Cesium ImageryLayer.\n * @param {olcsx.LayerWithParents} olLayerWithParents\n * @param {!Cesium.ImageryLayer} csLayer\n * @api\n */\nexports.updateCesiumLayerProperties = function(olLayerWithParents, csLayer) {\n  let opacity = 1;\n  let visible = true;\n  [olLayerWithParents.layer].concat(olLayerWithParents.parents).forEach((olLayer) => {\n    const layerOpacity = olLayer.getOpacity();\n    if (layerOpacity !== undefined) {\n      opacity *= layerOpacity;\n    }\n    const layerVisible = olLayer.getVisible();\n    if (layerVisible !== undefined) {\n      visible &= layerVisible;\n    }\n  });\n  csLayer.alpha = opacity;\n  csLayer.show = visible;\n};\n\n\n/**\n * Convert a 2D or 3D OpenLayers coordinate to Cesium.\n * @param {ol.Coordinate} coordinate Ol3 coordinate.\n * @return {!Cesium.Cartesian3} Cesium cartesian coordinate\n * @api\n */\nexports.ol4326CoordinateToCesiumCartesian = function(coordinate) {\n  const coo = coordinate;\n  return coo.length > 2 ?\n    Cesium.Cartesian3.fromDegrees(coo[0], coo[1], coo[2]) :\n    Cesium.Cartesian3.fromDegrees(coo[0], coo[1]);\n};\n\n\n/**\n * Convert an array of 2D or 3D OpenLayers coordinates to Cesium.\n * @param {Array.<!ol.Coordinate>} coordinates Ol3 coordinates.\n * @return {!Array.<Cesium.Cartesian3>} Cesium cartesian coordinates\n * @api\n */\nexports.ol4326CoordinateArrayToCsCartesians = function(coordinates) {\n  googAsserts.assert(coordinates !== null);\n  const toCartesian = exports.ol4326CoordinateToCesiumCartesian;\n  const cartesians = [];\n  for (let i = 0; i < coordinates.length; ++i) {\n    cartesians.push(toCartesian(coordinates[i]));\n  }\n  return cartesians;\n};\n\n\n/**\n * Reproject an OpenLayers geometry to EPSG:4326 if needed.\n * The geometry will be cloned only when original projection is not EPSG:4326\n * and the properties will be shallow copied.\n * @param {!T} geometry\n * @param {!ol.ProjectionLike} projection\n * @return {!T}\n * @template T\n * @api\n */\nexports.olGeometryCloneTo4326 = function(geometry, projection) {\n  googAsserts.assert(projection);\n\n  const proj4326 = olProj.get('EPSG:4326');\n  const proj = olProj.get(projection);\n  if (proj !== proj4326) {\n    const properties = geometry.getProperties();\n    geometry = geometry.clone();\n    geometry.transform(proj, proj4326);\n    geometry.setProperties(properties);\n  }\n  return geometry;\n};\n\n\n/**\n * Convert an OpenLayers color to Cesium.\n * @param {ol.Color|CanvasGradient|CanvasPattern|string} olColor\n * @return {!Cesium.Color}\n * @api\n */\nexports.convertColorToCesium = function(olColor) {\n  olColor = olColor || 'black';\n  if (Array.isArray(olColor)) {\n    return new Cesium.Color(\n        Cesium.Color.byteToFloat(olColor[0]),\n        Cesium.Color.byteToFloat(olColor[1]),\n        Cesium.Color.byteToFloat(olColor[2]),\n        olColor[3]\n    );\n  } else if (typeof olColor == 'string') {\n    return Cesium.Color.fromCssColorString(olColor);\n  }\n  googAsserts.fail('impossible');\n};\n\n\n/**\n * Convert an OpenLayers url to Cesium.\n * @param {string} url\n * @return {!olcsx.core.CesiumUrlDefinition}\n * @api\n */\nexports.convertUrlToCesium = function(url) {\n  let subdomains = '';\n  const re = /\\{(\\d|[a-z])-(\\d|[a-z])\\}/;\n  const match = re.exec(url);\n  if (match) {\n    url = url.replace(re, '{s}');\n    const startCharCode = match[1].charCodeAt(0);\n    const stopCharCode = match[2].charCodeAt(0);\n    let charCode;\n    for (charCode = startCharCode; charCode <= stopCharCode; ++charCode) {\n      subdomains += String.fromCharCode(charCode);\n    }\n  }\n  return {\n    url,\n    subdomains\n  };\n};\n\n\n/**\n * Animate the return to a top-down view from the zenith.\n * The camera is rotated to orient to the North.\n * @param {!ol.Map} map\n * @param {!Cesium.Scene} scene\n * @return {Promise<undefined>}\n * @api\n */\nexports.resetToNorthZenith = function(map, scene) {\n  return new Promise((resolve, reject) => {\n    const camera = scene.camera;\n    const pivot = exports.pickBottomPoint(scene);\n    if (!pivot) {\n      reject('Could not get bottom pivot');\n      return;\n    }\n\n    const currentHeading = map.getView().getRotation();\n    if (currentHeading === undefined) {\n      reject('The view is not initialized');\n      return;\n    }\n    const angle = exports.computeAngleToZenith(scene, pivot);\n\n    // Point to North\n    exports.setHeadingUsingBottomCenter(scene, currentHeading, pivot);\n\n    // Go to zenith\n    const transform = Cesium.Matrix4.fromTranslation(pivot);\n    const axis = camera.right;\n    const options = {\n      callback: () => {\n        const view = map.getView();\n        exports.normalizeView(view);\n        resolve();\n      }\n    };\n    exports.rotateAroundAxis(camera, -angle, axis, transform, options);\n  });\n};\n\n\n/**\n * @param {!Cesium.Scene} scene\n * @param {number} angle in radian\n * @return {Promise<undefined>}\n * @api\n */\nexports.rotateAroundBottomCenter = function(scene, angle) {\n  return new Promise((resolve, reject) => {\n    const camera = scene.camera;\n    const pivot = exports.pickBottomPoint(scene);\n    if (!pivot) {\n      reject('could not get bottom pivot');\n      return;\n    }\n\n    const options = {callback: resolve};\n    const transform = Cesium.Matrix4.fromTranslation(pivot);\n    const axis = camera.right;\n    const rotateAroundAxis = exports.rotateAroundAxis;\n    rotateAroundAxis(camera, -angle, axis, transform, options);\n  });\n};\n\n\n/**\n * Set the OpenLayers view to a specific rotation and\n * the nearest resolution.\n * @param {ol.View} view\n * @param {number=} angle\n * @api\n */\nexports.normalizeView = function(view, angle = 0) {\n  const resolution = view.getResolution();\n  view.setRotation(angle);\n  view.setResolution(view.constrainResolution(resolution));\n};\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/core.js\n// module id = null\n// module chunks = ","/**\n * @module ol/source/OSM\n */\nimport {inherits} from '../index.js';\nimport XYZ from '../source/XYZ.js';\n\n/**\n * @classdesc\n * Layer source for the OpenStreetMap tile server.\n *\n * @constructor\n * @extends {ol.source.XYZ}\n * @param {olx.source.OSMOptions=} opt_options Open Street Map options.\n * @api\n */\nconst OSM = function(opt_options) {\n\n  const options = opt_options || {};\n\n  let attributions;\n  if (options.attributions !== undefined) {\n    attributions = options.attributions;\n  } else {\n    attributions = [OSM.ATTRIBUTION];\n  }\n\n  const crossOrigin = options.crossOrigin !== undefined ?\n    options.crossOrigin : 'anonymous';\n\n  const url = options.url !== undefined ?\n    options.url : 'https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png';\n\n  XYZ.call(this, {\n    attributions: attributions,\n    cacheSize: options.cacheSize,\n    crossOrigin: crossOrigin,\n    opaque: options.opaque !== undefined ? options.opaque : true,\n    maxZoom: options.maxZoom !== undefined ? options.maxZoom : 19,\n    reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n    tileLoadFunction: options.tileLoadFunction,\n    url: url,\n    wrapX: options.wrapX\n  });\n\n};\n\ninherits(OSM, XYZ);\n\n\n/**\n * The attribution containing a link to the OpenStreetMap Copyright and License\n * page.\n * @const\n * @type {string}\n * @api\n */\nOSM.ATTRIBUTION = '&copy; ' +\n      '<a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> ' +\n      'contributors.';\nexport default OSM;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/OSM.js\n// module id = 5\n// module chunks = 0 1 2 3 4 5 6 8 9 10 11 12 13 14 15 17 18 19 20 22 23 24 25 26 27 28","/**\n * @module app.simple3d\n */\nconst exports = {};\n\nimport './simple3d.css';\nimport './common_dependencies.js';\n/** @suppress {extraRequire} */\nimport olMap from 'ol/Map.js';\n\nimport olView from 'ol/View.js';\nimport olLayerTile from 'ol/layer/Tile.js';\nimport olSourceOSM from 'ol/source/OSM.js';\nimport ngeoOlcsOlcsModule from 'ngeo/olcs/olcsModule.js';\nimport ngeoBase from 'ngeo/index.js';\nimport ngeoMapModule from 'ngeo/map/module.js';\nimport ngeoOlcsManager from 'ngeo/olcs/Manager.js';\n\n\n/** @type {!angular.Module} **/\nexports.module = angular.module('app', [\n  ngeoBase.module.name,\n  ngeoMapModule.name,\n  ngeoOlcsOlcsModule.name\n]);\n\n\n/*** @constructor\n * @ngInject\n * @param {angular.Scope} $rootScope Root scope.\n * @param {ngeo.olcs.Service} ngeoOlcsService The service.\n */\nexports.MainController = function($rootScope, ngeoOlcsService) {\n\n  /**\n   * @type {ol.Map}\n   * @export\n   */\n  this.map = new olMap({\n    layers: [\n      new olLayerTile({\n        source: new olSourceOSM()\n      })\n    ],\n    view: new olView({\n      center: [0, 0],\n      zoom: 4\n    })\n  });\n\n  // TODO: detect and use different URL for DEBUG MODE\n  const cesiumUrl = '../node_modules/@camptocamp/cesium/Build/Cesium/Cesium.js';\n\n  /**\n   * @export\n   * @type {olcs.contrib.Manager}\n   */\n  this.ol3dm = new ngeoOlcsManager(cesiumUrl, $rootScope, {\n    map: this.map\n  });\n\n  // Optionally, the manager can be registered into the olcs service\n  ngeoOlcsService.initialize(this.ol3dm);\n};\n\nexports.module.controller('MainController', exports.MainController);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./examples/simple3d.js","/**\n * @module ngeo.olcs.olcsModule\n */\nimport Service from 'ngeo/olcs/Service.js';\nimport control from 'ngeo/olcs/controls3d.js';\n\n\n/**\n * @type {!angular.Module}\n */\nconst m = angular.module('ngeoOlcsModule', [\n  control.name,\n  Service.module.name\n]);\n\nconst exports = m;\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/olcs/olcsModule.js","/**\n * @module ngeo.olcs.Service\n */\nimport googAsserts from 'goog/asserts.js';\nimport ngeoMiscDebounce from 'ngeo/misc/debounce.js';\nimport ngeoStatemanagerLocation from 'ngeo/statemanager/Location.js';\nimport ngeoOlcsConstants from 'ngeo/olcs/constants.js';\nimport ngeoStatemanagerService from 'ngeo/statemanager/Service.js';\n\nconst Service = class {\n\n  /**\n   * @ngInject\n   * @param {!ngeox.miscDebounce} ngeoDebounce ngeo debounce service.\n   * @param {!ngeo.statemanager.Location} ngeoLocation ngeo location service.\n   * @param {ngeo.statemanager.Service} ngeoStateManager The ngeo StateManager service.\n   */\n  constructor(ngeoDebounce, ngeoLocation, ngeoStateManager) {\n    /**\n     * @private\n     * @type {olcs.contrib.Manager|undefined}\n     */\n    this.manager_;\n\n    /**\n     * @private\n     * @type {!ngeox.miscDebounce}\n     */\n    this.ngeoDebounce_ = ngeoDebounce;\n\n    /**\n     * @private\n     * @type {!ngeo.statemanager.Location}\n     */\n    this.ngeoLocation_ = ngeoLocation;\n\n    /**\n     * @private\n     * @type {ngeo.statemanager.Service}\n     */\n    this.ngeoStateManager_ = ngeoStateManager;\n\n  }\n\n  /**\n   * @export\n   * @param {olcs.contrib.Manager} manager Manager.\n   */\n  initialize(manager) {\n    this.manager_ = manager;\n\n    this.manager_.on('load', () => {\n      this.cameraToState_();\n    });\n\n    if (this.ngeoStateManager_.getInitialBooleanValue('3d_enabled')) {\n      this.initialStateToCamera_();\n    }\n  }\n\n  /**\n   * @export\n   * @return {olcs.contrib.Manager|undefined} the manager.\n   */\n  getManager() {\n    return this.manager_;\n  }\n\n  /**\n   * @private\n   * @return {Promise<undefined>} A promise after load & enabled.\n   */\n  initialStateToCamera_() {\n    const stateManager = this.ngeoStateManager_;\n\n    const lon = stateManager.getInitialNumberValue(ngeoOlcsConstants.Permalink3dParam.LON);\n    const lat = stateManager.getInitialNumberValue(ngeoOlcsConstants.Permalink3dParam.LAT);\n    const elevation = stateManager.getInitialNumberValue(ngeoOlcsConstants.Permalink3dParam.ELEVATION);\n    const heading = stateManager.getInitialNumberValue(ngeoOlcsConstants.Permalink3dParam.HEADING) || 0;\n    const pitch = stateManager.getInitialNumberValue(ngeoOlcsConstants.Permalink3dParam.PITCH) || 0;\n\n    googAsserts.assert(lon !== undefined);\n    googAsserts.assert(lat !== undefined);\n    googAsserts.assert(elevation !== undefined);\n    return this.manager_.set3dWithView(lon, lat, elevation, heading, pitch);\n  }\n\n  /**\n   * @private\n   */\n  cameraToState_() {\n    const manager = this.manager_;\n    const scene = manager.getOl3d().getCesiumScene();\n    const camera = scene.camera;\n\n    camera.moveEnd.addEventListener(this.ngeoDebounce_(() => {\n      const position = camera.positionCartographic;\n      this.ngeoStateManager_.updateState({\n        [ngeoOlcsConstants.Permalink3dParam.ENABLED]: true,\n        [ngeoOlcsConstants.Permalink3dParam.LON]: Cesium.Math.toDegrees(position.longitude).toFixed(5),\n        [ngeoOlcsConstants.Permalink3dParam.LAT]: Cesium.Math.toDegrees(position.latitude).toFixed(5),\n        [ngeoOlcsConstants.Permalink3dParam.ELEVATION]: position.height.toFixed(0),\n        [ngeoOlcsConstants.Permalink3dParam.HEADING]: Cesium.Math.toDegrees(camera.heading).toFixed(3),\n        [ngeoOlcsConstants.Permalink3dParam.PITCH]: Cesium.Math.toDegrees(camera.pitch).toFixed(3)\n      });\n    }, 1000, true));\n\n    this.manager_.on('toggle', (event) => {\n      const target = /** @type {ngeo.olcs.Manager} */ (event.target);\n      if (!target.is3dEnabled()) {\n        this.remove3dState_();\n      }\n    });\n  }\n\n  /**\n   * @private\n   */\n  remove3dState_() {\n    this.ngeoLocation_.getParamKeysWithPrefix(ngeoOlcsConstants.Permalink3dParam.PREFIX).forEach((key) => {\n      this.ngeoStateManager_.deleteParam(key);\n    });\n  }\n\n};\n\nconst name = 'ngeoOlcsService';\nService.module = angular.module(name, [\n  ngeoMiscDebounce.name,\n  ngeoStatemanagerLocation.module.name,\n  ngeoStatemanagerService.module.name,\n]).service(name, Service);\n\nconst exports = Service;\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/olcs/Service.js","/**\n * @module ngeo.olcs.constants\n */\nconst exports = {};\n\n/**\n * @enum {string}\n * @export\n */\nexports.Permalink3dParam = {\n  /**\n   * @type {string}\n   * @export\n   */\n  ENABLED: '3d_enabled',\n  /**\n   * @type {string}\n   * @export\n   */\n  LON: '3d_lon',\n  /**\n   * @type {string}\n   * @export\n   */\n  LAT: '3d_lat',\n  /**\n   * @type {string}\n   * @export\n   */\n  ELEVATION: '3d_elevation',\n  /**\n   * @type {string}\n   * @export\n   */\n  HEADING: '3d_heading',\n  /**\n   * @type {string}\n   * @export\n   */\n  PITCH: '3d_pitch',\n  /**\n   * @type {string}\n   * @export\n   */\n  PREFIX: '3d_'\n};\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/olcs/constants.js","/**\n * @module ngeo.olcs.controls3d\n */\nimport googAsserts from 'goog/asserts.js';\nimport * as olEasing from 'ol/easing.js';\nimport olcsCore from 'olcs/core.js';\nimport ngeoBase from 'ngeo/index.js';\n\n\nfunction shouldUpdate(older, newer) {\n  return Number.isFinite(newer) && (!Number.isFinite(older) || Math.abs(newer - older) > 0.05);\n}\n\n\nconst Controller = class {\n\n  /**\n   * @ngInject\n   * @param {!jQuery} $element The element\n   * @param {ngeo.olcs.Service} ngeoOlcsService The ol-cesium service.\n   */\n  constructor($element, ngeoOlcsService) {\n\n    /**\n     * @type {jQuery}\n     * @private\n     */\n    this.element_ = $element;\n\n    /**\n     * @type {olcs.contrib.Manager}\n     * @export\n     */\n    this.ol3dm;\n\n    /**\n     * @type {number}\n     * @export\n     */\n    this.minTilt;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.maxTilt;\n\n    /**\n     * @type {jQuery}\n     * @private\n     */\n    this.tiltRightEl_;\n\n    /**\n     * @type {jQuery}\n     * @private\n     */\n    this.tiltLeftEl_;\n\n    /**\n     * @type {jQuery}\n     * @private\n     */\n    this.rotation3dEl_;\n\n    /**\n     * @type {jQuery}\n     * @private\n     */\n    this.angle3dEl_;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.previousRotation_;\n\n    /**\n     * @type {Cesium.Matrix4}\n     * @private\n     */\n    this.previousViewMatrix_;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.animationFrameRequestId_;\n\n    /**\n     * @type {ngeo.olcs.Service}\n     * @private\n     */\n    this.olcsService_ = ngeoOlcsService;\n  }\n\n  updateWidget_() {\n    const newRotation = this.ol3dm.getOl3d().getOlView().getRotation();\n    if (shouldUpdate(this.previousRotation_, newRotation)) {\n      this.rotateElement_(this.rotation3dEl_, newRotation);\n      this.previousRotation_ = newRotation;\n    }\n\n    const newViewMatrix = this.ol3dm.getCesiumViewMatrix();\n    if (!Cesium.Matrix4.equalsEpsilon(this.previousViewMatrix_, newViewMatrix, 1e-5)) {\n      const newTilt = this.ol3dm.getTiltOnGlobe(); // this is expensive!!\n      if (Number.isFinite(newTilt || 0)) { // Workaround https://github.com/google/closure-compiler/pull/2712\n        this.rotateElement_(this.angle3dEl_, newTilt);\n        this.previousViewMatrix_ = Cesium.Matrix4.clone(newViewMatrix);\n\n        // if min or max tilt is reached, disable the tilting buttons\n        const buffer = 0.01; // rad\n        if (newTilt - this.minTilt < buffer) {\n          this.tiltRightEl_.addClass('ngeo-right-inactive');\n        } else if (this.tiltRightEl_.hasClass('ngeo-right-inactive')) {\n          this.tiltRightEl_.removeClass('ngeo-right-inactive');\n        }\n        if (this.maxTilt - newTilt < buffer) {\n          this.tiltLeftEl_.addClass('ngeo-left-inactive');\n        } else if (this.tiltLeftEl_.hasClass('ngeo-left-inactive')) {\n          this.tiltLeftEl_.removeClass('ngeo-left-inactive');\n        }\n      }\n    }\n\n    this.animationFrameRequestId_ = requestAnimationFrame(() => this.updateWidget_());\n  }\n\n  $onDestroy() {\n    if (this.animationFrameRequestId_) {\n      cancelAnimationFrame(this.animationFrameRequestId_);\n    }\n  }\n\n  $onInit() {\n    if (this.minTilt === undefined) {\n      this.minTilt = 0;\n    }\n    if (this.maxTilt === undefined) {\n      this.maxTilt = 7 * Math.PI / 16;\n    }\n    if (!this.ol3dm) {\n      this.ol3dm = googAsserts.assert(this.olcsService_.getManager());\n    }\n    this.tiltRightEl_ = this.element_.find('.ngeo-tilt-right');\n    this.tiltLeftEl_ = this.element_.find('.ngeo-tilt-left');\n    this.rotation3dEl_ = this.element_.find('.ngeo-rotation3d');\n    this.angle3dEl_ = this.element_.find('.ngeo-angle3d');\n    this.updateWidget_();\n  }\n\n\n  /**\n   * @param {jQuery} element Element to rotate.\n   * @param {(number|undefined)} angle Angle in radians\n   * @private\n   */\n  rotateElement_(element, angle) {\n    const r = `rotate(${angle}rad)`;\n    element.css({\n      '-moz-transform': r,\n      '-webkit-transform': r,\n      '-o-transform': r,\n      '-ms-transform': r,\n      'transform': r\n    });\n  }\n\n\n  /**\n   * @param {number} angle Angle in degrees.\n   * @export\n   */\n  rotate(angle) {\n    angle = Cesium.Math.toRadians(angle);\n    this.ol3dm.setHeading(angle);\n  }\n\n\n  /**\n   * @param {number} angle Angle in degrees.\n   * @export\n   */\n  tilt(angle) {\n    angle = Cesium.Math.toRadians(angle);\n    const tiltOnGlobe = this.ol3dm.getTiltOnGlobe();\n    if (tiltOnGlobe + angle < this.minTilt) {\n      angle = this.minTilt - tiltOnGlobe;\n    } else if (tiltOnGlobe + angle > this.maxTilt) {\n      angle = this.maxTilt - tiltOnGlobe;\n    }\n    const scene = this.ol3dm.getCesiumScene();\n    olcsCore.rotateAroundBottomCenter(scene, angle);\n  }\n\n\n  /**\n   * @param {number} delta -1 to zoom out and 1 to zoom in.\n   * @export\n   */\n  zoom(delta) {\n    const view = this.ol3dm.getOlView();\n    const cur = view.getResolution();\n    const newResolution = view.constrainResolution(cur, delta);\n    if (view.getAnimating()) {\n      view.cancelAnimations();\n    }\n    view.animate({\n      resolution: newResolution,\n      duration: 250,\n      easing: olEasing.easeOut\n    });\n  }\n};\n\n\n/**\n * @param {!angular.Attributes} $attrs Attributes.\n * @param {!string} ngeoOlcsControls3dTemplateUrl Template function.\n * @return {string} Template URL.\n * @ngInject\n */\nfunction ngeoOlcsControls3dTemplateUrlInjectable($attrs, ngeoOlcsControls3dTemplateUrl) {\n  if (ngeoOlcsControls3dTemplateUrl) {\n    return ngeoOlcsControls3dTemplateUrl;\n  }\n  const templateUrl = $attrs['ngeoOlcsControls3dTemplateUrl'];\n  return templateUrl ? templateUrl : `${ngeoBase.baseModuleTemplateUrl}/olcs/controls3d.html`;\n}\n\n/**\n * Provides the \"ngeoOlcsControls3d\" component, a widget for\n * controlling the 3D camera.\n *\n * Example:\n *\n *     <ngeo-olcs-controls3d ng-if=\"$ctrl.manager && $ctrl.manager.is3dEnabled()\">\n *     </ngeo-olcs-controls3d>\n *\n * By default the directive uses \"controls3d.html\" as its templateUrl. This\n * can be changed by redefining the \"ngeoOlcsControls3dTemplateUrl\" value.\n *\n * See our live example: [../examples/simple3d.html](../examples/simple3d.html)\n *\n * @htmlAttribute {olcs.contrib.Manager} ngeo-olcs-manager The OL-Cesium manager.\n * @type {!angular.Component}\n * @ngdoc component\n * @ngname ngeoOlcsControls3d\n */\nconst component = {\n  bindings: {\n    'minTilt': '<?',\n    'maxTilt': '<?',\n    'ol3dm': '<?'\n  },\n  controller: Controller,\n  templateUrl: ngeoOlcsControls3dTemplateUrlInjectable\n};\n\nconst name = 'ngeoOlcsControls3d';\n\nconst exports = angular.module(name, [])\n  .component(name, component)\n  .value('ngeoOlcsControls3dTemplateUrl', '');\n\nngeoBase.module.requires.push(name);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/olcs/controls3d.js","/**\n * @module ngeo.olcs.Manager\n */\nimport olcsContribManager from 'olcs/contrib/Manager.js';\n\nconst Manager = class extends olcsContribManager {\n  /**\n   * @param {string} url .\n   * @param {angular.Scope} $rootScope .\n   * @param {olcsx.contrib.ManagerOptions} options .\n   */\n  constructor(url, $rootScope, options) {\n    super(url, options);\n    /**\n     * @type {angular.Scope}\n     * @private\n     */\n    this.rootScope_ = $rootScope;\n  }\n\n\n  /**\n   * @override\n   * @export\n   */\n  toggle3d() {\n    // The transition is asynchronous and at the end of it the state of OLCesium is changed.\n    // In order to have all code dependent on OLCesium state updated, we kick an Angular digest cycle.\n    const promise = super.toggle3d();\n    return promise.then(() => {\n      this.rootScope_.$apply();\n    });\n  }\n};\n\nconst exports = Manager;\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/olcs/Manager.js","/**\n * @module\n */\nconst exports = class {\n  /**\n   * @param {string} url\n   * @struct\n   * @api\n   */\n  constructor(url) {\n    /**\n     * @type {Promise<undefined>}\n     * @protected\n     */\n    this.promise;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.url_ = url;\n  }\n\n  /**\n   * @return {Promise<undefined>}\n   * @api\n   */\n  load() {\n    if (!this.promise) {\n      // not yet loading\n      this.promise = new Promise((resolve, reject) => {\n        const script = document.createElement('script');\n        script.onload = () => resolve();\n        script.onerror = () => reject();\n        document.head.appendChild(script);\n        script.src = this.url_;\n      });\n    }\n    return this.promise;\n  }\n};\n\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/contrib/LazyLoader.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nconst exports = {};\n\n\n/**\n * Cast to object.\n * @param {Object} param\n * @return {Object}\n */\nexports.obj = function(param) {\n  return param;\n};\n\n\n/**\n * @type {boolean|undefined}\n * @private\n */\nexports.supportsImageRenderingPixelatedResult_ = undefined;\n\n\n/**\n * @type {string|undefined}\n * @private\n */\nexports.imageRenderingValueResult_ = undefined;\n\n\n/**\n * @return {boolean}\n */\nexports.supportsImageRenderingPixelated = function() {\n  if (exports.supportsImageRenderingPixelatedResult_ === undefined) {\n    const canvas = document.createElement('canvas');\n    canvas.setAttribute('style', 'image-rendering: -moz-crisp-edges; image-rendering: pixelated;');\n    // canvas.style.imageRendering will be undefined, null or an\n    // empty string on unsupported browsers.\n    const tmp = canvas.style['imageRendering']; // non standard\n    exports.supportsImageRenderingPixelatedResult_ = !!tmp;\n    if (exports.supportsImageRenderingPixelatedResult_) {\n      exports.imageRenderingValueResult_ = tmp;\n    }\n  }\n  return exports.supportsImageRenderingPixelatedResult_;\n};\n\n\n/**\n * @return {string}\n */\nexports.imageRenderingValue = function() {\n  exports.supportsImageRenderingPixelated();\n  return exports.imageRenderingValueResult_ || '';\n};\n\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/util.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\n// Apache v2 license\n// https://github.com/TerriaJS/terriajs/blob/\n// ebd382a8278a817fce316730d9e459bbb9b829e9/lib/Models/Cesium.js\n\nconst exports = function(ol3d, debug) {\n  this.ol3d = ol3d;\n  this.scene_ = ol3d.getCesiumScene();\n  this.canvas_ = this.scene_.canvas;\n  this.verboseRendering = debug;\n  this._boundNotifyRepaintRequired = this.notifyRepaintRequired.bind(this);\n\n  this.lastCameraViewMatrix_ = new Cesium.Matrix4();\n  this.lastCameraMoveTime_ = 0;\n  this.stoppedRendering = false;\n\n  this._removePostRenderListener = this.scene_.postRender.addEventListener(this.postRender.bind(this));\n\n  this.repaintEventNames_ = [\n    'mousemove', 'mousedown', 'mouseup',\n    'touchstart', 'touchend', 'touchmove',\n    'pointerdown', 'pointerup', 'pointermove',\n    'wheel'\n  ];\n\n  const CameraPrototype = Cesium.Camera.prototype;\n  this.interceptedAPIs_ = [\n    [CameraPrototype, 'setView'],\n    [CameraPrototype, 'move'],\n    [CameraPrototype, 'rotate'],\n    [CameraPrototype, 'lookAt'],\n    [CameraPrototype, 'flyTo'],\n    [CameraPrototype, 'flyToHome'],\n    [CameraPrototype, 'flyToBoundingSphere']\n  ];\n\n  this.originalAPIs_ = this.interceptedAPIs_.map(tuple => tuple[0][tuple[1]]);\n\n  this.originalLoadWithXhr_ = Cesium.loadWithXhr.load;\n  this.originalScheduleTask_ = Cesium.TaskProcessor.prototype.scheduleTask;\n  this.enable();\n};\n\n\n/**\n * Enable.\n */\nexports.prototype.enable = function() {\n  for (const repaintKey of this.repaintEventNames_) {\n    this.canvas_.addEventListener(repaintKey, this._boundNotifyRepaintRequired, false);\n  }\n\n  window.addEventListener('resize', this._boundNotifyRepaintRequired, false);\n\n  // Hacky way to force a repaint when an async load request completes\n  const that = this;\n  Cesium.loadWithXhr.load = function(url, responseType, method, data, headers, deferred, overrideMimeType, preferText, timeout) {\n    deferred['promise']['always'](that._boundNotifyRepaintRequired);\n    that.originalLoadWithXhr_(...arguments); // eslint-disable-line prefer-rest-params\n  };\n\n  // Hacky way to force a repaint when a web worker sends something back.\n  Cesium.TaskProcessor.prototype.scheduleTask = function(parameters, transferableObjects) {\n    const result = that.originalScheduleTask_.call(this, parameters, transferableObjects);\n\n    const taskProcessor = this;\n    if (!taskProcessor._originalWorkerMessageSinkRepaint) {\n      const worker = taskProcessor['_worker'];\n      taskProcessor._originalWorkerMessageSinkRepaint = worker.onmessage;\n      worker.onmessage = function(event) {\n        taskProcessor._originalWorkerMessageSinkRepaint(event);\n        that.notifyRepaintRequired();\n      };\n    }\n\n    return result;\n  };\n\n  // Intercept API calls to trigger a repaint\n  for (let i = 0; i < this.interceptedAPIs_.length; ++i) {\n    const api = this.interceptedAPIs_[i];\n    const parent = api[0];\n    const original = this.originalAPIs_[i];\n    // Not using an arrow function to keep the \"this\" unbounded.\n    parent[api[1]] = function(...args) {\n      original.apply(this, args);\n      that.notifyRepaintRequired();\n    };\n  }\n\n  // Listen for changes on the layer group\n  this.ol3d.getOlMap().getLayerGroup().on('change', this._boundNotifyRepaintRequired);\n};\n\n\n/**\n * Disable.\n */\nexports.prototype.disable = function() {\n  if (!!this._removePostRenderListener) {\n    this._removePostRenderListener();\n    this._removePostRenderListener = undefined;\n  }\n  for (const repaintKey of this.repaintEventNames_) {\n    this.canvas_.removeEventListener(repaintKey, this._boundNotifyRepaintRequired, false);\n  }\n\n  window.removeEventListener('resize', this._boundNotifyRepaintRequired, false);\n\n  Cesium.loadWithXhr.load = this.originalLoadWithXhr_;\n  Cesium.TaskProcessor.prototype.scheduleTask = this.originalScheduleTask_;\n\n  // Restore original APIs\n  for (let i = 0; i < this.interceptedAPIs_.length; ++i) {\n    const api = this.interceptedAPIs_[i];\n    const parent = api[0];\n    const original = this.originalAPIs_[i];\n    parent[api[1]] = original;\n  }\n\n  this.ol3d.getOlMap().getLayerGroup().un('change', this._boundNotifyRepaintRequired);\n};\n\n\n/**\n * @param {number} date\n */\nexports.prototype.postRender = function(date) {\n  // We can safely stop rendering when:\n  //  - the camera position hasn't changed in over a second,\n  //  - there are no tiles waiting to load, and\n  //  - the clock is not animating\n  //  - there are no tweens in progress\n\n  const now = Date.now();\n\n  const scene = this.scene_;\n  const camera = scene.camera;\n\n  if (!Cesium.Matrix4.equalsEpsilon(this.lastCameraViewMatrix_, camera.viewMatrix, 1e-5)) {\n    this.lastCameraMoveTime_ = now;\n  }\n\n  const cameraMovedInLastSecond = now - this.lastCameraMoveTime_ < 1000;\n\n  const surface = scene.globe['_surface'];\n  const tilesWaiting = !surface['tileProvider'].ready ||\n      surface['_tileLoadQueueHigh'].length > 0 ||\n      surface['_tileLoadQueueMedium'].length > 0 ||\n      surface['_tileLoadQueueLow'].length > 0 ||\n      surface['_debug']['tilesWaitingForChildren'] > 0;\n\n  const tweens = scene['tweens'];\n  if (!cameraMovedInLastSecond && !tilesWaiting && tweens.length == 0) {\n    if (this.verboseRendering) {\n      console.log(`stopping rendering @ ${Date.now()}`);\n    }\n    this.ol3d.setBlockCesiumRendering(true);\n    this.stoppedRendering = true;\n  }\n\n  Cesium.Matrix4.clone(camera.viewMatrix, this.lastCameraViewMatrix_);\n};\n\n\n/**\n * Restart render loop.\n * Force a restart of the render loop.\n * @api\n */\nexports.prototype.restartRenderLoop = function() {\n  this.notifyRepaintRequired();\n};\n\n\n/**\n * Notifies the viewer that a repaint is required.\n */\nexports.prototype.notifyRepaintRequired = function() {\n  if (this.verboseRendering && this.stoppedRendering) {\n    console.log(`starting rendering @ ${Date.now()}`);\n  }\n  this.lastCameraMoveTime_ = Date.now();\n  // TODO: do not unblock if not blocked by us\n  this.ol3d.setBlockCesiumRendering(false);\n  this.stoppedRendering = false;\n};\n\n\n/**\n * @param {boolean} debug\n * @api\n */\nexports.prototype.setDebug = function(debug) {\n  this.verboseRendering = debug;\n};\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/AutoRenderLoop.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nimport googAsserts from 'goog/asserts';\nimport olObservable from 'ol/Observable';\nimport olEvents from 'ol/events';\nimport olMath from 'ol/math';\nimport olProj from 'ol/proj';\nimport olcsCore from './core.js';\n\nconst exports = function(scene, map) {\n  /**\n   * @type {!Cesium.Scene}\n   * @private\n   */\n  this.scene_ = scene;\n\n  /**\n   * @type {!Cesium.Camera}\n   * @private\n   */\n  this.cam_ = scene.camera;\n\n  /**\n   * @type {!ol.Map}\n   * @private\n   */\n  this.map_ = map;\n\n  /**\n   * @type {?ol.View}\n   * @private\n   */\n  this.view_ = null;\n\n  /**\n   * @type {?ol.EventsKey}\n   * @private\n   */\n  this.viewListenKey_ = null;\n\n  /**\n   * @type {!ol.TransformFunction}\n   * @private\n   */\n  this.toLonLat_ = exports.identityProjection;\n\n  /**\n   * @type {!ol.TransformFunction}\n   * @private\n   */\n  this.fromLonLat_ = exports.identityProjection;\n\n  /**\n   * 0 -- topdown, PI/2 -- the horizon\n   * @type {number}\n   * @private\n   */\n  this.tilt_ = 0;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.distance_ = 0;\n\n  /**\n   * @type {?Cesium.Matrix4}\n   * @private\n   */\n  this.lastCameraViewMatrix_ = null;\n\n  /**\n   * This is used to discard change events on view caused by updateView method.\n   * @type {boolean}\n   * @private\n   */\n  this.viewUpdateInProgress_ = false;\n\n  this.map_.on('change:view', function(e) {\n    this.setView_(this.map_.getView());\n  }, this);\n  this.setView_(this.map_.getView());\n};\n\n\n/**\n * @param {Array.<number>} input Input coordinate array.\n * @param {Array.<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension.\n * @return {Array.<number>} Input coordinate array (same array as input).\n */\nexports.identityProjection = function(input, opt_output, opt_dimension) {\n  const dim = opt_dimension || input.length;\n  if (opt_output) {\n    for (let i = 0; i < dim; ++i) {\n      opt_output[i] = input[i];\n    }\n  }\n  return input;\n};\n\n\n/**\n * @param {?ol.View} view New view to use.\n * @private\n */\nexports.prototype.setView_ = function(view) {\n  if (this.view_) {\n    olObservable.unByKey(this.viewListenKey_);\n    this.viewListenKey_ = null;\n  }\n\n  this.view_ = view;\n  if (view) {\n    const toLonLat = olProj.getTransform(view.getProjection(), 'EPSG:4326');\n    const fromLonLat = olProj.getTransform('EPSG:4326', view.getProjection());\n    googAsserts.assert(toLonLat && fromLonLat);\n\n    this.toLonLat_ = toLonLat;\n    this.fromLonLat_ = fromLonLat;\n\n    this.viewListenKey_ = olEvents.listen(view, 'propertychange',\n        this.handleViewEvent_, this);\n\n    this.readFromView();\n  } else {\n    this.toLonLat_ = exports.identityProjection;\n    this.fromLonLat_ = exports.identityProjection;\n  }\n};\n\n\n/**\n * @param {?} e\n * @private\n */\nexports.prototype.handleViewEvent_ = function(e) {\n  if (!this.viewUpdateInProgress_) {\n    this.readFromView();\n  }\n};\n\n\n/**\n * @param {number} heading In radians.\n * @api\n */\nexports.prototype.setHeading = function(heading) {\n  if (!this.view_) {\n    return;\n  }\n\n  this.view_.setRotation(heading);\n};\n\n\n/**\n * @return {number|undefined} Heading in radians.\n * @api\n */\nexports.prototype.getHeading = function() {\n  if (!this.view_) {\n    return undefined;\n  }\n  const rotation = this.view_.getRotation();\n  return rotation || 0;\n};\n\n\n/**\n * @param {number} tilt In radians.\n * @api\n */\nexports.prototype.setTilt = function(tilt) {\n  this.tilt_ = tilt;\n  this.updateCamera_();\n};\n\n\n/**\n * @return {number} Tilt in radians.\n * @api\n */\nexports.prototype.getTilt = function() {\n  return this.tilt_;\n};\n\n\n/**\n * @param {number} distance In meters.\n * @api\n */\nexports.prototype.setDistance = function(distance) {\n  this.distance_ = distance;\n  this.updateCamera_();\n  this.updateView();\n};\n\n\n/**\n * @return {number} Distance in meters.\n * @api\n */\nexports.prototype.getDistance = function() {\n  return this.distance_;\n};\n\n\n/**\n * Shortcut for ol.View.setCenter().\n * @param {!ol.Coordinate} center Same projection as the ol.View.\n * @api\n */\nexports.prototype.setCenter = function(center) {\n  if (!this.view_) {\n    return;\n  }\n  this.view_.setCenter(center);\n};\n\n\n/**\n * Shortcut for ol.View.getCenter().\n * @return {ol.Coordinate|undefined} Same projection as the ol.View.\n * @api\n */\nexports.prototype.getCenter = function() {\n  if (!this.view_) {\n    return undefined;\n  }\n  return this.view_.getCenter();\n};\n\n\n/**\n * Sets the position of the camera.\n * @param {!ol.Coordinate} position Same projection as the ol.View.\n * @api\n */\nexports.prototype.setPosition = function(position) {\n  if (!this.toLonLat_) {\n    return;\n  }\n  const ll = this.toLonLat_(position);\n  googAsserts.assert(ll);\n\n  const carto = new Cesium.Cartographic(\n      olMath.toRadians(ll[0]),\n      olMath.toRadians(ll[1]),\n      this.getAltitude());\n\n  this.cam_.position = Cesium.Ellipsoid.WGS84.cartographicToCartesian(carto);\n  this.updateView();\n};\n\n\n/**\n * Calculates position under the camera.\n * @return {!ol.Coordinate|undefined} Same projection as the ol.View.\n * @api\n */\nexports.prototype.getPosition = function() {\n  if (!this.fromLonLat_) {\n    return undefined;\n  }\n  const carto = Cesium.Ellipsoid.WGS84.cartesianToCartographic(this.cam_.position);\n\n  const pos = this.fromLonLat_([\n    olMath.toDegrees(carto.longitude),\n    olMath.toDegrees(carto.latitude)\n  ]);\n  googAsserts.assert(pos);\n  return pos;\n};\n\n\n/**\n * @param {number} altitude In meters.\n * @api\n */\nexports.prototype.setAltitude = function(altitude) {\n  const carto = Cesium.Ellipsoid.WGS84.cartesianToCartographic(\n      this.cam_.position);\n  carto.height = altitude;\n  this.cam_.position = Cesium.Ellipsoid.WGS84.cartographicToCartesian(carto);\n\n  this.updateView();\n};\n\n\n/**\n * @return {number} Altitude in meters.\n * @api\n */\nexports.prototype.getAltitude = function() {\n  const carto = Cesium.Ellipsoid.WGS84.cartesianToCartographic(\n      this.cam_.position);\n\n  return carto.height;\n};\n\n\n/**\n * Rotates the camera to point at the specified target.\n * @param {!ol.Coordinate} position Same projection as the ol.View.\n * @api\n */\nexports.prototype.lookAt = function(position) {\n  if (!this.toLonLat_) {\n    return;\n  }\n  const ll = this.toLonLat_(position);\n  googAsserts.assert(ll);\n\n  const carto = Cesium.Cartographic.fromDegrees(ll[0], ll[1]);\n  olcsCore.lookAt(this.cam_, carto, this.scene_.globe);\n\n  this.updateView();\n};\n\n\n/**\n * Updates the state of the underlying Cesium.Camera\n * according to the current values of the properties.\n * @private\n */\nexports.prototype.updateCamera_ = function() {\n  if (!this.view_ || !this.toLonLat_) {\n    return;\n  }\n  const center = this.view_.getCenter();\n  if (!center) {\n    return;\n  }\n  const ll = this.toLonLat_(center);\n  googAsserts.assert(ll);\n\n  const carto = new Cesium.Cartographic(olMath.toRadians(ll[0]),\n      olMath.toRadians(ll[1]));\n  if (this.scene_.globe) {\n    const height = this.scene_.globe.getHeight(carto);\n    carto.height = height || 0;\n  }\n\n  const destination = Cesium.Ellipsoid.WGS84.cartographicToCartesian(carto);\n\n  /** @type {Cesium.optionsOrientation} */\n  const orientation = {\n    pitch: this.tilt_ - Cesium.Math.PI_OVER_TWO,\n    heading: -this.view_.getRotation(),\n    roll: undefined\n  };\n  this.cam_.setView({\n    destination,\n    orientation\n  });\n\n  this.cam_.moveBackward(this.distance_);\n\n  this.checkCameraChange(true);\n};\n\n\n/**\n * Calculates the values of the properties from the current ol.View state.\n * @api\n */\nexports.prototype.readFromView = function() {\n  if (!this.view_ || !this.toLonLat_) {\n    return;\n  }\n  const center = this.view_.getCenter();\n  if (center === undefined || center === null) {\n    return;\n  }\n  const ll = this.toLonLat_(center);\n  googAsserts.assert(ll);\n\n  const resolution = this.view_.getResolution();\n  this.distance_ = this.calcDistanceForResolution(\n      resolution || 0, olMath.toRadians(ll[1]));\n\n  this.updateCamera_();\n};\n\n\n/**\n * Calculates the values of the properties from the current Cesium.Camera state.\n * Modifies the center, resolution and rotation properties of the view.\n * @api\n */\nexports.prototype.updateView = function() {\n  if (!this.view_ || !this.fromLonLat_) {\n    return;\n  }\n  this.viewUpdateInProgress_ = true;\n\n  // target & distance\n  const ellipsoid = Cesium.Ellipsoid.WGS84;\n  const scene = this.scene_;\n  const target = olcsCore.pickCenterPoint(scene);\n\n  let bestTarget = target;\n  if (!bestTarget) {\n    //TODO: how to handle this properly ?\n    const globe = scene.globe;\n    const carto = this.cam_.positionCartographic.clone();\n    const height = globe.getHeight(carto);\n    carto.height = height || 0;\n    bestTarget = Cesium.Ellipsoid.WGS84.cartographicToCartesian(carto);\n  }\n  this.distance_ = Cesium.Cartesian3.distance(bestTarget, this.cam_.position);\n  const bestTargetCartographic = ellipsoid.cartesianToCartographic(bestTarget);\n  this.view_.setCenter(this.fromLonLat_([\n    olMath.toDegrees(bestTargetCartographic.longitude),\n    olMath.toDegrees(bestTargetCartographic.latitude)]));\n\n  // resolution\n  this.view_.setResolution(\n      this.calcResolutionForDistance(this.distance_,\n          bestTargetCartographic ? bestTargetCartographic.latitude : 0));\n\n\n  /*\n   * Since we are positioning the target, the values of heading and tilt\n   * need to be calculated _at the target_.\n   */\n  if (target) {\n    const pos = this.cam_.position;\n\n    // normal to the ellipsoid at the target\n    const targetNormal = new Cesium.Cartesian3();\n    ellipsoid.geocentricSurfaceNormal(target, targetNormal);\n\n    // vector from the target to the camera\n    const targetToCamera = new Cesium.Cartesian3();\n    Cesium.Cartesian3.subtract(pos, target, targetToCamera);\n    Cesium.Cartesian3.normalize(targetToCamera, targetToCamera);\n\n\n    // HEADING\n    const up = this.cam_.up;\n    const right = this.cam_.right;\n    const normal = new Cesium.Cartesian3(-target.y, target.x, 0); // what is it?\n    const heading = Cesium.Cartesian3.angleBetween(right, normal);\n    const cross = Cesium.Cartesian3.cross(target, up, new Cesium.Cartesian3());\n    const orientation = cross.z;\n\n    this.view_.setRotation((orientation < 0 ? heading : -heading));\n\n    // TILT\n    const tiltAngle = Math.acos(\n        Cesium.Cartesian3.dot(targetNormal, targetToCamera));\n    this.tilt_ = isNaN(tiltAngle) ? 0 : tiltAngle;\n  } else {\n    // fallback when there is no target\n    this.view_.setRotation(this.cam_.heading);\n    this.tilt_ = -this.cam_.pitch + Math.PI / 2;\n  }\n\n  this.viewUpdateInProgress_ = false;\n};\n\n\n/**\n * Check if the underlying camera state has changed and ensure synchronization.\n * @param {boolean=} opt_dontSync Do not synchronize the view.\n */\nexports.prototype.checkCameraChange = function(opt_dontSync) {\n  const old = this.lastCameraViewMatrix_;\n  const current = this.cam_.viewMatrix;\n\n  if (!old || !Cesium.Matrix4.equalsEpsilon(old, current, 1e-5)) {\n    this.lastCameraViewMatrix_ = current.clone();\n    if (opt_dontSync !== true) {\n      this.updateView();\n    }\n  }\n};\n\n\n/**\n * calculate the distance between camera and centerpoint based on the resolution and latitude value\n * @param {number} resolution Number of map units per pixel.\n * @param {number} latitude Latitude in radians.\n * @return {number} The calculated distance.\n * @api\n */\nexports.prototype.calcDistanceForResolution = function(resolution, latitude) {\n  const canvas = this.scene_.canvas;\n  const fovy = this.cam_.frustum.fovy; // vertical field of view\n  googAsserts.assert(!isNaN(fovy));\n  const metersPerUnit = this.view_.getProjection().getMetersPerUnit();\n\n  // number of \"map units\" visible in 2D (vertically)\n  const visibleMapUnits = resolution * canvas.clientHeight;\n\n  // The metersPerUnit does not take latitude into account, but it should\n  // be lower with increasing latitude -- we have to compensate.\n  // In 3D it is not possible to maintain the resolution at more than one point,\n  // so it only makes sense to use the latitude of the \"target\" point.\n  const relativeCircumference = Math.cos(Math.abs(latitude));\n\n  // how many meters should be visible in 3D\n  const visibleMeters = visibleMapUnits * metersPerUnit * relativeCircumference;\n\n  // distance required to view the calculated length in meters\n  //\n  //  fovy/2\n  //    |\\\n  //  x | \\\n  //    |--\\\n  // visibleMeters/2\n  const requiredDistance = (visibleMeters / 2) / Math.tan(fovy / 2);\n\n  // NOTE: This calculation is not absolutely precise, because metersPerUnit\n  // is a great simplification. It does not take ellipsoid/terrain into account.\n\n  return requiredDistance;\n};\n\n\n/**\n * calculate the resolution based on a distance(camera to position) and latitude value\n * @param {number} distance\n * @param {number} latitude\n * @return {number} The calculated resolution.\n * @api\n */\nexports.prototype.calcResolutionForDistance = function(distance, latitude) {\n  // See the reverse calculation (calcDistanceForResolution) for details\n  const canvas = this.scene_.canvas;\n  const fovy = this.cam_.frustum.fovy;\n  const metersPerUnit = this.view_.getProjection().getMetersPerUnit();\n\n  const visibleMeters = 2 * distance * Math.tan(fovy / 2);\n  const relativeCircumference = Math.cos(Math.abs(latitude));\n  const visibleMapUnits = visibleMeters / metersPerUnit / relativeCircumference;\n  const resolution = visibleMapUnits / canvas.clientHeight;\n\n  return resolution;\n};\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/Camera.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nimport googAsserts from 'goog/asserts';\nimport olBase from 'ol';\nimport olObservable from 'ol/Observable';\nimport olEvents from 'ol/events';\nimport olLayerGroup from 'ol/layer/Group';\n\nconst exports = function(map, scene) {\n  /**\n   * @type {!ol.Map}\n   * @protected\n   */\n  this.map = map;\n\n  /**\n   * @type {ol.View}\n   * @protected\n   */\n  this.view = map.getView();\n\n  /**\n   * @type {!Cesium.Scene}\n   * @protected\n   */\n  this.scene = scene;\n\n  /**\n   * @type {ol.Collection.<ol.layer.Base>}\n   * @protected\n   */\n  this.olLayers = map.getLayerGroup().getLayers();\n\n  /**\n   * @type {ol.layer.Group}\n   */\n  this.mapLayerGroup = map.getLayerGroup();\n\n  /**\n   * Map of OpenLayers layer ids (from ol.getUid) to the Cesium ImageryLayers.\n   * Null value means, that we are unable to create equivalent layers.\n   * @type {Object.<string, ?Array.<T>>}\n   * @protected\n   */\n  this.layerMap = {};\n\n  /**\n   * Map of listen keys for OpenLayers layer layers ids (from ol.getUid).\n   * @type {!Object.<string, Array<ol.EventsKey>>}\n   * @protected\n   */\n  this.olLayerListenKeys = {};\n\n  /**\n   * Map of listen keys for OpenLayers layer groups ids (from ol.getUid).\n   * @type {!Object.<string, !Array.<ol.EventsKey>>}\n   * @private\n   */\n  this.olGroupListenKeys_ = {};\n};\n\n\n/**\n * Destroy all and perform complete synchronization of the layers.\n * @api\n */\nexports.prototype.synchronize = function() {\n  this.destroyAll();\n  this.addLayers_(this.mapLayerGroup);\n};\n\n\n/**\n * Order counterparts using the same algorithm as the Openlayers renderer:\n * z-index then original sequence order.\n * @protected\n */\nexports.prototype.orderLayers = function() {\n  // Ordering logics is handled in subclasses.\n};\n\n\n/**\n * Add a layer hierarchy.\n * @param {ol.layer.Base} root\n * @private\n */\nexports.prototype.addLayers_ = function(root) {\n  /** @type {Array<olcsx.LayerWithParents>} */\n  const fifo = [{\n    layer: root,\n    parents: []\n  }];\n  while (fifo.length > 0) {\n    const olLayerWithParents = fifo.splice(0, 1)[0];\n    const olLayer = olLayerWithParents.layer;\n    const olLayerId = olBase.getUid(olLayer).toString();\n    this.olLayerListenKeys[olLayerId] = [];\n    googAsserts.assert(!this.layerMap[olLayerId]);\n\n    let cesiumObjects = null;\n    if (olLayer instanceof olLayerGroup) {\n      this.listenForGroupChanges_(olLayer);\n      if (olLayer !== this.mapLayerGroup) {\n        cesiumObjects = this.createSingleLayerCounterparts(olLayerWithParents);\n      }\n      if (!cesiumObjects) {\n        olLayer.getLayers().forEach((l) => {\n          if (l) {\n            const newOlLayerWithParents = {\n              layer: l,\n              parents: olLayer === this.mapLayerGroup ?\n                [] :\n                [olLayerWithParents.layer].concat(olLayerWithParents.parents)\n            };\n            fifo.push(newOlLayerWithParents);\n          }\n        });\n      }\n    } else {\n      cesiumObjects = this.createSingleLayerCounterparts(olLayerWithParents);\n    }\n    // add Cesium layers\n    if (cesiumObjects) {\n      this.layerMap[olLayerId] = cesiumObjects;\n      this.olLayerListenKeys[olLayerId].push(olEvents.listen(olLayer, 'change:zIndex', this.orderLayers, this));\n      cesiumObjects.forEach(function(cesiumObject) {\n        this.addCesiumObject(cesiumObject);\n      }, this);\n    }\n  }\n\n  this.orderLayers();\n};\n\n\n/**\n * Remove and destroy a single layer.\n * @param {ol.layer.Layer} layer\n * @return {boolean} counterpart destroyed\n * @private\n */\nexports.prototype.removeAndDestroySingleLayer_ = function(layer) {\n  const uid = olBase.getUid(layer).toString();\n  const counterparts = this.layerMap[uid];\n  if (!!counterparts) {\n    counterparts.forEach(function(counterpart) {\n      this.removeSingleCesiumObject(counterpart, false);\n      this.destroyCesiumObject(counterpart);\n    }, this);\n    this.olLayerListenKeys[uid].forEach(olObservable.unByKey);\n    delete this.olLayerListenKeys[uid];\n  }\n  delete this.layerMap[uid];\n  return !!counterparts;\n};\n\n\n/**\n * Unlisten a single layer group.\n * @param {ol.layer.Group} group\n * @private\n */\nexports.prototype.unlistenSingleGroup_ = function(group) {\n  if (group === this.mapLayerGroup) {\n    return;\n  }\n  const uid = olBase.getUid(group).toString();\n  const keys = this.olGroupListenKeys_[uid];\n  keys.forEach((key) => {\n    olObservable.unByKey(key);\n  });\n  delete this.olGroupListenKeys_[uid];\n  delete this.layerMap[uid];\n};\n\n\n/**\n * Remove layer hierarchy.\n * @param {ol.layer.Base} root\n * @private\n */\nexports.prototype.removeLayer_ = function(root) {\n  if (!!root) {\n    const fifo = [root];\n    while (fifo.length > 0) {\n      const olLayer = fifo.splice(0, 1)[0];\n      const done = this.removeAndDestroySingleLayer_(olLayer);\n      if (olLayer instanceof olLayerGroup) {\n        this.unlistenSingleGroup_(olLayer);\n        if (!done) {\n          // No counterpart for the group itself so removing\n          // each of the child layers.\n          olLayer.getLayers().forEach((l) => {\n            fifo.push(l);\n          });\n        }\n      }\n    }\n  }\n};\n\n\n/**\n * Register listeners for single layer group change.\n * @param {ol.layer.Group} group\n * @private\n */\nexports.prototype.listenForGroupChanges_ = function(group) {\n  const uuid = olBase.getUid(group).toString();\n\n  googAsserts.assert(this.olGroupListenKeys_[uuid] === undefined);\n\n  const listenKeyArray = [];\n  this.olGroupListenKeys_[uuid] = listenKeyArray;\n\n  // only the keys that need to be relistened when collection changes\n  let contentKeys = [];\n  const listenAddRemove = (function() {\n    const collection = group.getLayers();\n    if (collection) {\n      contentKeys = [\n        collection.on('add', function(event) {\n          this.addLayers_(event.element);\n        }, this),\n        collection.on('remove', function(event) {\n          this.removeLayer_(event.element);\n        }, this)\n      ];\n      listenKeyArray.push(...contentKeys);\n    }\n  }).bind(this);\n\n  listenAddRemove();\n\n  listenKeyArray.push(group.on('change:layers', (e) => {\n    contentKeys.forEach((el) => {\n      const i = listenKeyArray.indexOf(el);\n      if (i >= 0) {\n        listenKeyArray.splice(i, 1);\n      }\n      olObservable.unByKey(el);\n    });\n    listenAddRemove();\n  }));\n};\n\n\n/**\n * Destroys all the created Cesium objects.\n * @protected\n */\nexports.prototype.destroyAll = function() {\n  this.removeAllCesiumObjects(true); // destroy\n  let objKey;\n  for (objKey in this.olGroupListenKeys_) {\n    const keys = this.olGroupListenKeys_[objKey];\n    keys.forEach(olObservable.unByKey);\n  }\n  for (objKey in this.olLayerListenKeys) {\n    this.olLayerListenKeys[objKey].forEach(olObservable.unByKey);\n  }\n  this.olGroupListenKeys_ = {};\n  this.olLayerListenKeys = {};\n  this.layerMap = {};\n};\n\n\n/**\n * Adds a single Cesium object to the collection.\n * @param {!T} object\n * @abstract\n * @protected\n */\nexports.prototype.addCesiumObject = function(object) {};\n\n\n/**\n * @param {!T} object\n * @abstract\n * @protected\n */\nexports.prototype.destroyCesiumObject = function(object) {};\n\n\n/**\n * Remove single Cesium object from the collection.\n * @param {!T} object\n * @param {boolean} destroy\n * @abstract\n * @protected\n */\nexports.prototype.removeSingleCesiumObject = function(object, destroy) {};\n\n\n/**\n * Remove all Cesium objects from the collection.\n * @param {boolean} destroy\n * @abstract\n * @protected\n */\nexports.prototype.removeAllCesiumObjects = function(destroy) {};\n\n\n/**\n * @param {olcsx.LayerWithParents} olLayerWithParents\n * @return {?Array.<T>}\n * @abstract\n * @protected\n */\nexports.prototype.createSingleLayerCounterparts = function(olLayerWithParents) {};\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/AbstractSynchronizer.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nimport olLayerGroup from 'ol/layer/Group';\nimport googAsserts from 'goog/asserts';\nimport olArray from 'ol/array';\nimport olBase from 'ol';\nimport olcsAbstractSynchronizer from './AbstractSynchronizer.js';\nimport olcsCore from './core.js';\n\nconst exports = function(map, scene) {\n  /**\n   * @type {!Cesium.ImageryLayerCollection}\n   * @private\n   */\n  this.cesiumLayers_ = scene.imageryLayers;\n\n  /**\n   * @type {!Cesium.ImageryLayerCollection}\n   * @private\n   */\n  this.ourLayers_ = new Cesium.ImageryLayerCollection();\n\n  olcsAbstractSynchronizer.call(this, map, scene);\n};\n\nolBase.inherits(exports, olcsAbstractSynchronizer);\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.addCesiumObject = function(object) {\n  this.cesiumLayers_.add(object);\n  this.ourLayers_.add(object);\n};\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.destroyCesiumObject = function(object) {\n  object.destroy();\n};\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.removeSingleCesiumObject = function(object, destroy) {\n  this.cesiumLayers_.remove(object, destroy);\n  this.ourLayers_.remove(object, false);\n};\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.removeAllCesiumObjects = function(destroy) {\n  for (let i = 0; i < this.ourLayers_.length; ++i) {\n    this.cesiumLayers_.remove(this.ourLayers_.get(i), destroy);\n  }\n  this.ourLayers_.removeAll(false);\n};\n\n\n/**\n * Creates an array of Cesium.ImageryLayer.\n * May be overriden by child classes to implement custom behavior.\n * The default implementation handles tiled imageries in EPSG:4326 or\n * EPSG:3859.\n * @param {!ol.layer.Base} olLayer\n * @param {!ol.proj.Projection} viewProj Projection of the view.\n * @return {?Array.<!Cesium.ImageryLayer>} array or null if not possible\n * (or supported)\n * @protected\n */\nexports.prototype.convertLayerToCesiumImageries = function(olLayer, viewProj) {\n  const result = olcsCore.tileLayerToImageryLayer(olLayer, viewProj);\n  return result ? [result] : null;\n};\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.createSingleLayerCounterparts = function(olLayerWithParents) {\n  const olLayer = olLayerWithParents.layer;\n  const uid = olBase.getUid(olLayer).toString();\n  const viewProj = this.view.getProjection();\n  googAsserts.assert(viewProj);\n  const cesiumObjects = this.convertLayerToCesiumImageries(olLayer, viewProj);\n  if (cesiumObjects) {\n    const listenKeyArray = [];\n    [olLayerWithParents.layer].concat(olLayerWithParents.parents).forEach((olLayerItem) => {\n      listenKeyArray.push(olLayerItem.on(['change:opacity', 'change:visible'], () => {\n        // the compiler does not seem to be able to infer this\n        googAsserts.assert(cesiumObjects);\n        for (let i = 0; i < cesiumObjects.length; ++i) {\n          olcsCore.updateCesiumLayerProperties(olLayerWithParents, cesiumObjects[i]);\n        }\n      }));\n    });\n\n    for (let i = 0; i < cesiumObjects.length; ++i) {\n      olcsCore.updateCesiumLayerProperties(olLayerWithParents, cesiumObjects[i]);\n    }\n\n    // there is no way to modify Cesium layer extent,\n    // we have to recreate when OpenLayers layer extent changes:\n    listenKeyArray.push(olLayer.on('change:extent', function(e) {\n      for (let i = 0; i < cesiumObjects.length; ++i) {\n        this.cesiumLayers_.remove(cesiumObjects[i], true); // destroy\n        this.ourLayers_.remove(cesiumObjects[i], false);\n      }\n      delete this.layerMap[olBase.getUid(olLayer)]; // invalidate the map entry\n      this.synchronize();\n    }, this));\n\n    listenKeyArray.push(olLayer.on('change', function(e) {\n      // when the source changes, re-add the layer to force update\n      for (let i = 0; i < cesiumObjects.length; ++i) {\n        const position = this.cesiumLayers_.indexOf(cesiumObjects[i]);\n        if (position >= 0) {\n          this.cesiumLayers_.remove(cesiumObjects[i], false);\n          this.cesiumLayers_.add(cesiumObjects[i], position);\n        }\n      }\n    }, this));\n\n    this.olLayerListenKeys[uid].push(...listenKeyArray);\n  }\n\n  return Array.isArray(cesiumObjects) ? cesiumObjects : null;\n};\n\n\n/**\n * Order counterparts using the same algorithm as the Openlayers renderer:\n * z-index then original sequence order.\n * @override\n * @protected\n */\nexports.prototype.orderLayers = function() {\n  const layers = [];\n  const zIndices = {};\n  const queue = [this.mapLayerGroup];\n\n  while (queue.length > 0) {\n    const olLayer = queue.splice(0, 1)[0];\n    layers.push(olLayer);\n    zIndices[olBase.getUid(olLayer)] = olLayer.getZIndex();\n\n    if (olLayer instanceof olLayerGroup) {\n      const sublayers = olLayer.getLayers();\n      if (sublayers) {\n        // Prepend queue with sublayers in order\n        queue.unshift(...sublayers.getArray());\n      }\n    }\n  }\n\n  olArray.stableSort(layers, (layer1, layer2) =>\n    zIndices[olBase.getUid(layer1)] - zIndices[olBase.getUid(layer2)]\n  );\n\n  layers.forEach(function(olLayer) {\n    const olLayerId = olBase.getUid(olLayer).toString();\n    const cesiumObjects = this.layerMap[olLayerId];\n    if (cesiumObjects) {\n      cesiumObjects.forEach(this.raiseToTop, this);\n    }\n  }, this);\n};\n\n\n/**\n * @param {Cesium.ImageryLayer} counterpart\n */\nexports.prototype.raiseToTop = function(counterpart) {\n  this.cesiumLayers_.raiseToTop(counterpart);\n};\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/RasterSynchronizer.js\n// module id = null\n// module chunks = ","/**\n * @module ol/source/Cluster\n */\n\nimport {getUid, inherits} from '../index.js';\nimport {assert} from '../asserts.js';\nimport Feature from '../Feature.js';\nimport _ol_coordinate_ from '../coordinate.js';\nimport EventType from '../events/EventType.js';\nimport {buffer, createEmpty, createOrUpdateFromCoordinate} from '../extent.js';\nimport Point from '../geom/Point.js';\nimport VectorSource from '../source/Vector.js';\n\n/**\n * @classdesc\n * Layer source to cluster vector data. Works out of the box with point\n * geometries. For other geometry types, or if not all geometries should be\n * considered for clustering, a custom `geometryFunction` can be defined.\n *\n * @constructor\n * @param {olx.source.ClusterOptions} options Constructor options.\n * @extends {ol.source.Vector}\n * @api\n */\nconst Cluster = function(options) {\n  VectorSource.call(this, {\n    attributions: options.attributions,\n    extent: options.extent,\n    projection: options.projection,\n    wrapX: options.wrapX\n  });\n\n  /**\n   * @type {number|undefined}\n   * @protected\n   */\n  this.resolution = undefined;\n\n  /**\n   * @type {number}\n   * @protected\n   */\n  this.distance = options.distance !== undefined ? options.distance : 20;\n\n  /**\n   * @type {Array.<ol.Feature>}\n   * @protected\n   */\n  this.features = [];\n\n  /**\n   * @param {ol.Feature} feature Feature.\n   * @return {ol.geom.Point} Cluster calculation point.\n   * @protected\n   */\n  this.geometryFunction = options.geometryFunction || function(feature) {\n    const geometry = /** @type {ol.geom.Point} */ (feature.getGeometry());\n    assert(geometry instanceof Point,\n      10); // The default `geometryFunction` can only handle `ol.geom.Point` geometries\n    return geometry;\n  };\n\n  /**\n   * @type {ol.source.Vector}\n   * @protected\n   */\n  this.source = options.source;\n\n  this.source.on(EventType.CHANGE,\n    Cluster.prototype.refresh, this);\n};\n\ninherits(Cluster, VectorSource);\n\n\n/**\n * Get the distance in pixels between clusters.\n * @return {number} Distance.\n * @api\n */\nCluster.prototype.getDistance = function() {\n  return this.distance;\n};\n\n\n/**\n * Get a reference to the wrapped source.\n * @return {ol.source.Vector} Source.\n * @api\n */\nCluster.prototype.getSource = function() {\n  return this.source;\n};\n\n\n/**\n * @inheritDoc\n */\nCluster.prototype.loadFeatures = function(extent, resolution,\n  projection) {\n  this.source.loadFeatures(extent, resolution, projection);\n  if (resolution !== this.resolution) {\n    this.clear();\n    this.resolution = resolution;\n    this.cluster();\n    this.addFeatures(this.features);\n  }\n};\n\n\n/**\n * Set the distance in pixels between clusters.\n * @param {number} distance The distance in pixels.\n * @api\n */\nCluster.prototype.setDistance = function(distance) {\n  this.distance = distance;\n  this.refresh();\n};\n\n\n/**\n * handle the source changing\n * @override\n */\nCluster.prototype.refresh = function() {\n  this.clear();\n  this.cluster();\n  this.addFeatures(this.features);\n  VectorSource.prototype.refresh.call(this);\n};\n\n\n/**\n * @protected\n */\nCluster.prototype.cluster = function() {\n  if (this.resolution === undefined) {\n    return;\n  }\n  this.features.length = 0;\n  const extent = createEmpty();\n  const mapDistance = this.distance * this.resolution;\n  const features = this.source.getFeatures();\n\n  /**\n   * @type {!Object.<string, boolean>}\n   */\n  const clustered = {};\n\n  for (let i = 0, ii = features.length; i < ii; i++) {\n    const feature = features[i];\n    if (!(getUid(feature).toString() in clustered)) {\n      const geometry = this.geometryFunction(feature);\n      if (geometry) {\n        const coordinates = geometry.getCoordinates();\n        createOrUpdateFromCoordinate(coordinates, extent);\n        buffer(extent, mapDistance, extent);\n\n        let neighbors = this.source.getFeaturesInExtent(extent);\n        neighbors = neighbors.filter(function(neighbor) {\n          const uid = getUid(neighbor).toString();\n          if (!(uid in clustered)) {\n            clustered[uid] = true;\n            return true;\n          } else {\n            return false;\n          }\n        });\n        this.features.push(this.createCluster(neighbors));\n      }\n    }\n  }\n};\n\n\n/**\n * @param {Array.<ol.Feature>} features Features\n * @return {ol.Feature} The cluster feature.\n * @protected\n */\nCluster.prototype.createCluster = function(features) {\n  const centroid = [0, 0];\n  for (let i = features.length - 1; i >= 0; --i) {\n    const geometry = this.geometryFunction(features[i]);\n    if (geometry) {\n      _ol_coordinate_.add(centroid, geometry.getCoordinates());\n    } else {\n      features.splice(i, 1);\n    }\n  }\n  _ol_coordinate_.scale(centroid, 1 / features.length);\n\n  const cluster = new Feature(new Point(centroid));\n  cluster.set('features', features);\n  return cluster;\n};\nexport default Cluster;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/Cluster.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nimport olObservable from 'ol/Observable';\n\nconst exports = function(layerProjection, scene) {\n  const billboards = new Cesium.BillboardCollection({scene});\n  const primitives = new Cesium.PrimitiveCollection();\n\n  /**\n   * @type {!Array.<ol.EventsKey>}\n   */\n  this.olListenKeys = [];\n\n  this.rootCollection_ = new Cesium.PrimitiveCollection();\n  /**\n   * @type {!olcsx.core.OlFeatureToCesiumContext}\n   */\n  this.context = {\n    projection: layerProjection,\n    billboards,\n    featureToCesiumMap: {},\n    primitives\n  };\n\n  this.rootCollection_.add(billboards);\n  this.rootCollection_.add(primitives);\n};\n\n\n/**\n * Unlisten.\n */\nexports.prototype.destroy = function() {\n  this.olListenKeys.forEach(olObservable.unByKey);\n  this.olListenKeys.length = 0;\n};\n\n\n/**\n * @return {!Cesium.Primitive}\n */\nexports.prototype.getRootPrimitive = function() {\n  return this.rootCollection_;\n};\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/core/VectorLayerCounterpart.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nimport olGeomGeometry from 'ol/geom/Geometry';\nimport olStyleIcon from 'ol/style/Icon';\nimport olSourceVector from 'ol/source/Vector';\nimport olSourceCluster from 'ol/source/Cluster';\nimport googAsserts from 'goog/asserts';\nimport olBase from 'ol';\nimport olEvents from 'ol/events';\nimport olExtent from 'ol/extent';\nimport olGeomSimpleGeometry from 'ol/geom/SimpleGeometry';\nimport olcsCore from './core.js';\nimport olcsCoreVectorLayerCounterpart from './core/VectorLayerCounterpart.js';\nimport olcsUtil from './util.js';\n\nconst exports = function(scene) {\n\n  /**\n   * @protected\n   */\n  this.scene = scene;\n\n  /**\n   * Bind once to have a unique function for using as a listener\n   * @type {function(ol.source.Vector.Event)}\n   * @private\n   */\n  this.boundOnRemoveOrClearFeatureListener_ =\n      this.onRemoveOrClearFeature_.bind(this);\n};\n\n\n/**\n * @param {ol.source.Vector.Event} evt\n * @private\n */\nexports.prototype.onRemoveOrClearFeature_ = function(evt) {\n  const source = evt.target;\n  googAsserts.assertInstanceof(source, olSourceVector);\n\n  const cancellers = olcsUtil.obj(source)['olcs_cancellers'];\n  if (cancellers) {\n    const feature = evt.feature;\n    if (feature) {\n      // remove\n      const id = olBase.getUid(feature);\n      const canceller = cancellers[id];\n      if (canceller) {\n        canceller();\n        delete cancellers[id];\n      }\n    } else {\n      // clear\n      for (const key in cancellers) {\n        if (cancellers.hasOwnProperty(key)) {\n          cancellers[key]();\n        }\n      }\n      olcsUtil.obj(source)['olcs_cancellers'] = {};\n    }\n  }\n};\n\n\n/**\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature.\n * @param {!Cesium.Primitive|Cesium.Label|Cesium.Billboard} primitive\n * @protected\n */\nexports.prototype.setReferenceForPicking = function(layer, feature, primitive) {\n  primitive.olLayer = layer;\n  primitive.olFeature = feature;\n};\n\n\n/**\n * Basics primitive creation using a color attribute.\n * Note that Cesium has 'interior' and outline geometries.\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature.\n * @param {!ol.geom.Geometry} olGeometry OpenLayers geometry.\n * @param {!Cesium.Geometry} geometry\n * @param {!Cesium.Color} color\n * @param {number=} opt_lineWidth\n * @return {Cesium.Primitive}\n * @protected\n */\nexports.prototype.createColoredPrimitive = function(layer, feature, olGeometry, geometry, color, opt_lineWidth) {\n  const createInstance = function(geometry, color) {\n    return new Cesium.GeometryInstance({\n      // always update Cesium externs before adding a property\n      geometry,\n      attributes: {\n        color: Cesium.ColorGeometryInstanceAttribute.fromColor(color)\n      }\n    });\n  };\n\n  const options = {\n    // always update Cesium externs before adding a property\n    flat: true, // work with all geometries\n    renderState: {\n      depthTest: {\n        enabled: true\n      }\n    }\n  };\n\n  if (opt_lineWidth !== undefined) {\n    if (!options.renderState) {\n      options.renderState = {};\n    }\n    options.renderState.lineWidth = opt_lineWidth;\n  }\n\n  const instances = createInstance(geometry, color);\n\n  const heightReference = this.getHeightReference(layer, feature, olGeometry);\n\n  let primitive;\n\n  if (heightReference == Cesium.HeightReference.CLAMP_TO_GROUND) {\n    const ctor = instances.geometry.constructor;\n    if (ctor && !ctor['createShadowVolume']) {\n      return null;\n    }\n    primitive = new Cesium.GroundPrimitive({\n      // always update Cesium externs before adding a property\n      geometryInstances: instances\n    });\n  } else {\n    const appearance = new Cesium.PerInstanceColorAppearance(options);\n    primitive = new Cesium.Primitive({\n      // always update Cesium externs before adding a property\n      geometryInstances: instances,\n      appearance\n    });\n  }\n\n  this.setReferenceForPicking(layer, feature, primitive);\n  return primitive;\n};\n\n\n/**\n * Return the fill or stroke color from a plain ol style.\n * @param {!ol.style.Style|ol.style.Text} style\n * @param {boolean} outline\n * @return {!Cesium.Color}\n * @protected\n */\nexports.prototype.extractColorFromOlStyle = function(style, outline) {\n  const fillColor = style.getFill() ? style.getFill().getColor() : null;\n  const strokeColor = style.getStroke() ? style.getStroke().getColor() : null;\n\n  let olColor = 'black';\n  if (strokeColor && outline) {\n    olColor = strokeColor;\n  } else if (fillColor) {\n    olColor = fillColor;\n  }\n\n  return olcsCore.convertColorToCesium(olColor);\n};\n\n\n/**\n * Return the width of stroke from a plain ol style.\n * @param {!ol.style.Style|ol.style.Text} style\n * @return {number}\n * @protected\n */\nexports.prototype.extractLineWidthFromOlStyle = function(style) {\n  // Handling of line width WebGL limitations is handled by Cesium.\n  const width = style.getStroke() ? style.getStroke().getWidth() : undefined;\n  return width !== undefined ? width : 1;\n};\n\n\n/**\n * Create a primitive collection out of two Cesium geometries.\n * Only the OpenLayers style colors will be used.\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature.\n * @param {!ol.geom.Geometry} olGeometry OpenLayers geometry.\n * @param {!Cesium.Geometry} fillGeometry\n * @param {!Cesium.Geometry} outlineGeometry\n * @param {!ol.style.Style} olStyle\n * @return {!Cesium.PrimitiveCollection}\n * @protected\n */\nexports.prototype.wrapFillAndOutlineGeometries = function(layer, feature, olGeometry, fillGeometry, outlineGeometry, olStyle) {\n  const fillColor = this.extractColorFromOlStyle(olStyle, false);\n  const outlineColor = this.extractColorFromOlStyle(olStyle, true);\n\n  const primitives = new Cesium.PrimitiveCollection();\n  if (olStyle.getFill()) {\n    const p1 = this.createColoredPrimitive(layer, feature, olGeometry,\n        fillGeometry, fillColor);\n    googAsserts.assert(!!p1);\n    primitives.add(p1);\n  }\n\n  if (olStyle.getStroke()) {\n    const width = this.extractLineWidthFromOlStyle(olStyle);\n    const p2 = this.createColoredPrimitive(layer, feature, olGeometry,\n        outlineGeometry, outlineColor, width);\n    if (p2) {\n      // Some outline geometries are not supported by Cesium in clamp to ground\n      // mode. These primitives are skipped.\n      primitives.add(p2);\n    }\n  }\n\n  return primitives;\n};\n\n\n// Geometry converters\n/**\n * Create a Cesium primitive if style has a text component.\n * Eventually return a PrimitiveCollection including current primitive.\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature..\n * @param {!ol.geom.Geometry} geometry\n * @param {!ol.style.Style} style\n * @param {!Cesium.Primitive} primitive current primitive\n * @return {!Cesium.PrimitiveCollection}\n * @protected\n */\nexports.prototype.addTextStyle = function(layer, feature, geometry, style, primitive) {\n  let primitives;\n  if (!(primitive instanceof Cesium.PrimitiveCollection)) {\n    primitives = new Cesium.PrimitiveCollection();\n    primitives.add(primitive);\n  } else {\n    primitives = primitive;\n  }\n\n  if (!style.getText()) {\n    return primitives;\n  }\n\n  const text = /** @type {!ol.style.Text} */ (style.getText());\n  const label = this.olGeometry4326TextPartToCesium(layer, feature, geometry,\n      text);\n  if (label) {\n    primitives.add(label);\n  }\n  return primitives;\n};\n\n\n/**\n * Add a billboard to a Cesium.BillboardCollection.\n * Overriding this wrapper allows manipulating the billboard options.\n * @param {!Cesium.BillboardCollection} billboards\n * @param {!Cesium.optionsBillboardCollectionAdd} bbOptions\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature.\n * @param {!ol.geom.Geometry} geometry\n * @param {!ol.style.Style} style\n * @return {!Cesium.Billboard} newly created billboard\n * @api\n */\nexports.prototype.csAddBillboard = function(billboards, bbOptions, layer, feature, geometry, style) {\n  const bb = billboards.add(bbOptions);\n  this.setReferenceForPicking(layer, feature, bb);\n  return bb;\n};\n\n\n/**\n * Convert an OpenLayers circle geometry to Cesium.\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature..\n * @param {!ol.geom.Circle} olGeometry OpenLayers circle geometry.\n * @param {!ol.ProjectionLike} projection\n * @param {!ol.style.Style} olStyle\n * @return {!Cesium.PrimitiveCollection} primitives\n * @api\n */\nexports.prototype.olCircleGeometryToCesium = function(layer, feature, olGeometry, projection, olStyle) {\n\n  olGeometry = olcsCore.olGeometryCloneTo4326(olGeometry, projection);\n  googAsserts.assert(olGeometry.getType() == 'Circle');\n\n  // ol.Coordinate\n  let center = olGeometry.getCenter();\n  const height = center.length == 3 ? center[2] : 0.0;\n  let point = center.slice();\n  point[0] += olGeometry.getRadius();\n\n  // Cesium\n  center = olcsCore.ol4326CoordinateToCesiumCartesian(center);\n  point = olcsCore.ol4326CoordinateToCesiumCartesian(point);\n\n  // Accurate computation of straight distance\n  const radius = Cesium.Cartesian3.distance(center, point);\n\n  const fillGeometry = new Cesium.CircleGeometry({\n    // always update Cesium externs before adding a property\n    center,\n    radius,\n    height\n  });\n\n  const outlineGeometry = new Cesium.CircleOutlineGeometry({\n    // always update Cesium externs before adding a property\n    center,\n    radius,\n    extrudedHeight: height,\n    height\n  });\n\n  const primitives = this.wrapFillAndOutlineGeometries(\n      layer, feature, olGeometry, fillGeometry, outlineGeometry, olStyle);\n\n  return this.addTextStyle(layer, feature, olGeometry, olStyle, primitives);\n};\n\n\n/**\n * Convert an OpenLayers line string geometry to Cesium.\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature..\n * @param {!ol.geom.LineString} olGeometry OpenLayers line string geometry.\n * @param {!ol.ProjectionLike} projection\n * @param {!ol.style.Style} olStyle\n * @return {!Cesium.PrimitiveCollection} primitives\n * @api\n */\nexports.prototype.olLineStringGeometryToCesium = function(layer, feature, olGeometry, projection, olStyle) {\n\n  olGeometry = olcsCore.olGeometryCloneTo4326(olGeometry, projection);\n  googAsserts.assert(olGeometry.getType() == 'LineString');\n\n  const positions = olcsCore.ol4326CoordinateArrayToCsCartesians(\n      olGeometry.getCoordinates());\n\n  const appearance = new Cesium.PolylineMaterialAppearance({\n    // always update Cesium externs before adding a property\n    material: this.olStyleToCesium(feature, olStyle, true)\n  });\n\n  const geometryOptions = {\n    // always update Cesium externs before adding a property\n    positions,\n    width: this.extractLineWidthFromOlStyle(olStyle),\n    vertexFormat: appearance.vertexFormat\n  };\n\n  let outlinePrimitive;\n  const heightReference = this.getHeightReference(layer, feature, olGeometry);\n\n  if (heightReference == Cesium.HeightReference.CLAMP_TO_GROUND) {\n    const color = this.extractColorFromOlStyle(olStyle, true);\n    outlinePrimitive = new Cesium.GroundPrimitive({\n      // always update Cesium externs before adding a property\n      geometryInstances: new Cesium.GeometryInstance({\n        geometry: new Cesium.CorridorGeometry(geometryOptions),\n        attributes: {\n          color: Cesium.ColorGeometryInstanceAttribute.fromColor(color)\n        }\n      })\n    });\n  } else {\n    outlinePrimitive = new Cesium.Primitive({\n      // always update Cesium externs before adding a property\n      geometryInstances: new Cesium.GeometryInstance({\n        geometry: new Cesium.PolylineGeometry(geometryOptions)\n      }),\n      appearance\n    });\n  }\n\n  this.setReferenceForPicking(layer, feature, outlinePrimitive);\n\n  return this.addTextStyle(layer, feature, olGeometry, olStyle,\n      outlinePrimitive);\n};\n\n\n/**\n * Convert an OpenLayers polygon geometry to Cesium.\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature..\n * @param {!ol.geom.Polygon} olGeometry OpenLayers polygon geometry.\n * @param {!ol.ProjectionLike} projection\n * @param {!ol.style.Style} olStyle\n * @return {!Cesium.PrimitiveCollection} primitives\n * @api\n */\nexports.prototype.olPolygonGeometryToCesium = function(layer, feature, olGeometry, projection, olStyle) {\n\n  olGeometry = olcsCore.olGeometryCloneTo4326(olGeometry, projection);\n  googAsserts.assert(olGeometry.getType() == 'Polygon');\n\n  let fillGeometry, outlineGeometry;\n  if ((olGeometry.getCoordinates()[0].length == 5) &&\n      (feature.getGeometry().get('olcs.polygon_kind') === 'rectangle')) {\n    // Create a rectangle according to the longitude and latitude curves\n    const coordinates = olGeometry.getCoordinates()[0];\n    // Extract the West, South, East, North coordinates\n    const extent = olExtent.boundingExtent(coordinates);\n    const rectangle = Cesium.Rectangle.fromDegrees(extent[0], extent[1],\n        extent[2], extent[3]);\n\n    // Extract the average height of the vertices\n    let maxHeight = 0.0;\n    if (coordinates[0].length == 3) {\n      for (let c = 0; c < coordinates.length; c++) {\n        maxHeight = Math.max(maxHeight, coordinates[c][2]);\n      }\n    }\n\n    // Render the cartographic rectangle\n    fillGeometry = new Cesium.RectangleGeometry({\n      ellipsoid: Cesium.Ellipsoid.WGS84,\n      rectangle,\n      height: maxHeight\n    });\n\n    outlineGeometry = new Cesium.RectangleOutlineGeometry({\n      ellipsoid: Cesium.Ellipsoid.WGS84,\n      rectangle,\n      height: maxHeight\n    });\n  } else {\n    const rings = olGeometry.getLinearRings();\n    // always update Cesium externs before adding a property\n    const hierarchy = {};\n    const polygonHierarchy = hierarchy;\n    googAsserts.assert(rings.length > 0);\n\n    for (let i = 0; i < rings.length; ++i) {\n      const olPos = rings[i].getCoordinates();\n      const positions = olcsCore.ol4326CoordinateArrayToCsCartesians(olPos);\n      googAsserts.assert(positions && positions.length > 0);\n      if (i == 0) {\n        hierarchy.positions = positions;\n      } else {\n        if (!hierarchy.holes) {\n          hierarchy.holes = [];\n        }\n        hierarchy.holes.push({\n          positions\n        });\n      }\n    }\n\n    fillGeometry = new Cesium.PolygonGeometry({\n      // always update Cesium externs before adding a property\n      polygonHierarchy,\n      perPositionHeight: true\n    });\n\n    outlineGeometry = new Cesium.PolygonOutlineGeometry({\n      // always update Cesium externs before adding a property\n      polygonHierarchy: hierarchy,\n      perPositionHeight: true\n    });\n  }\n\n  const primitives = this.wrapFillAndOutlineGeometries(\n      layer, feature, olGeometry, fillGeometry, outlineGeometry, olStyle);\n\n  return this.addTextStyle(layer, feature, olGeometry, olStyle, primitives);\n};\n\n\n/**\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {ol.Feature} feature OpenLayers feature..\n * @param {!ol.geom.Geometry} geometry\n * @return {!Cesium.HeightReference}\n * @api\n */\nexports.prototype.getHeightReference = function(layer, feature, geometry) {\n\n  // Read from the geometry\n  let altitudeMode = geometry.get('altitudeMode');\n\n  // Or from the feature\n  if (altitudeMode === undefined) {\n    altitudeMode = feature.get('altitudeMode');\n  }\n\n  // Or from the layer\n  if (altitudeMode === undefined) {\n    altitudeMode = layer.get('altitudeMode');\n  }\n\n  let heightReference = Cesium.HeightReference.NONE;\n  if (altitudeMode === 'clampToGround') {\n    heightReference = Cesium.HeightReference.CLAMP_TO_GROUND;\n  } else if (altitudeMode === 'relativeToGround') {\n    heightReference = Cesium.HeightReference.RELATIVE_TO_GROUND;\n  }\n\n  return heightReference;\n};\n\n\n/**\n * Convert a point geometry to a Cesium BillboardCollection.\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature..\n * @param {!ol.geom.Point} olGeometry OpenLayers point geometry.\n * @param {!ol.ProjectionLike} projection\n * @param {!ol.style.Style} style\n * @param {!Cesium.BillboardCollection} billboards\n * @param {function(!Cesium.Billboard)=} opt_newBillboardCallback Called when\n * the new billboard is added.\n * @return {Cesium.Primitive} primitives\n * @api\n */\nexports.prototype.olPointGeometryToCesium = function(layer, feature, olGeometry, projection, style, billboards,\n    opt_newBillboardCallback) {\n  googAsserts.assert(olGeometry.getType() == 'Point');\n  olGeometry = olcsCore.olGeometryCloneTo4326(olGeometry, projection);\n\n  const imageStyle = style.getImage();\n  if (imageStyle) {\n    if (imageStyle instanceof olStyleIcon) {\n      // make sure the image is scheduled for load\n      imageStyle.load();\n    }\n\n    const image = imageStyle.getImage(1); // get normal density\n    const isImageLoaded = function(image) {\n      return image.src != '' &&\n          image.naturalHeight != 0 &&\n          image.naturalWidth != 0 &&\n          image.complete;\n    };\n    const reallyCreateBillboard = (function() {\n      if (!image) {\n        return;\n      }\n      if (!(image instanceof HTMLCanvasElement ||\n          image instanceof Image ||\n          image instanceof HTMLImageElement)) {\n        return;\n      }\n      const center = olGeometry.getCoordinates();\n      const position = olcsCore.ol4326CoordinateToCesiumCartesian(center);\n      let color;\n      const opacity = imageStyle.getOpacity();\n      if (opacity !== undefined) {\n        color = new Cesium.Color(1.0, 1.0, 1.0, opacity);\n      }\n\n      const heightReference = this.getHeightReference(layer, feature, olGeometry);\n\n      const bbOptions = /** @type {Cesium.optionsBillboardCollectionAdd} */ ({\n        // always update Cesium externs before adding a property\n        image,\n        color,\n        scale: imageStyle.getScale(),\n        heightReference,\n        verticalOrigin: Cesium.VerticalOrigin.BOTTOM,\n        position\n      });\n      const bb = this.csAddBillboard(billboards, bbOptions, layer, feature,\n          olGeometry, style);\n      if (opt_newBillboardCallback) {\n        opt_newBillboardCallback(bb);\n      }\n    }).bind(this);\n\n    if (image instanceof Image && !isImageLoaded(image)) {\n      // Cesium requires the image to be loaded\n      let cancelled = false;\n      const source = layer.getSource();\n      const canceller = function() {\n        cancelled = true;\n      };\n      source.on(['removefeature', 'clear'],\n          this.boundOnRemoveOrClearFeatureListener_);\n      let cancellers = olcsUtil.obj(source)['olcs_cancellers'];\n      if (!cancellers) {\n        cancellers = olcsUtil.obj(source)['olcs_cancellers'] = {};\n      }\n\n      const fuid = olBase.getUid(feature);\n      if (cancellers[fuid]) {\n        // When the feature change quickly, a canceller may still be present so\n        // we cancel it here to prevent creation of a billboard.\n        cancellers[fuid]();\n      }\n      cancellers[fuid] = canceller;\n\n      const listener = function() {\n        if (!billboards.isDestroyed() && !cancelled) {\n          // Create billboard if the feature is still displayed on the map.\n          reallyCreateBillboard();\n        }\n      };\n\n      olEvents.listenOnce(image, 'load', listener);\n    } else {\n      reallyCreateBillboard();\n    }\n  }\n\n  if (style.getText()) {\n    return this.addTextStyle(layer, feature, olGeometry, style,\n        new Cesium.Primitive());\n  } else {\n    return null;\n  }\n};\n\n\n/**\n * Convert an OpenLayers multi-something geometry to Cesium.\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature..\n * @param {!ol.geom.Geometry} geometry OpenLayers geometry.\n * @param {!ol.ProjectionLike} projection\n * @param {!ol.style.Style} olStyle\n * @param {!Cesium.BillboardCollection} billboards\n * @param {function(!Cesium.Billboard)=} opt_newBillboardCallback Called when\n * the new billboard is added.\n * @return {Cesium.Primitive} primitives\n * @api\n */\nexports.prototype.olMultiGeometryToCesium = function(layer, feature, geometry, projection, olStyle, billboards,\n    opt_newBillboardCallback) {\n  // Do not reproject to 4326 now because it will be done later.\n\n  // FIXME: would be better to combine all child geometries in one primitive\n  // instead we create n primitives for simplicity.\n  const accumulate = function(geometries, functor) {\n    const primitives = new Cesium.PrimitiveCollection();\n    geometries.forEach((geometry) => {\n      primitives.add(functor(layer, feature, geometry, projection, olStyle));\n    });\n    return primitives;\n  };\n\n  let subgeos;\n  switch (geometry.getType()) {\n    case 'MultiPoint':\n      geometry = /** @type {!ol.geom.MultiPoint} */ (geometry);\n      subgeos = geometry.getPoints();\n      if (olStyle.getText()) {\n        const primitives = new Cesium.PrimitiveCollection();\n        subgeos.forEach((geometry) => {\n          googAsserts.assert(geometry);\n          const result = this.olPointGeometryToCesium(layer, feature, geometry,\n              projection, olStyle, billboards, opt_newBillboardCallback);\n          if (result) {\n            primitives.add(result);\n          }\n        });\n        return primitives;\n      } else {\n        subgeos.forEach((geometry) => {\n          googAsserts.assert(geometry);\n          this.olPointGeometryToCesium(layer, feature, geometry, projection,\n              olStyle, billboards, opt_newBillboardCallback);\n        });\n        return null;\n      }\n    case 'MultiLineString':\n      geometry = /** @type {!ol.geom.MultiLineString} */ (geometry);\n      subgeos = geometry.getLineStrings();\n      return accumulate(subgeos, this.olLineStringGeometryToCesium.bind(this));\n    case 'MultiPolygon':\n      geometry = /** @type {!ol.geom.MultiPolygon} */ (geometry);\n      subgeos = geometry.getPolygons();\n      return accumulate(subgeos, this.olPolygonGeometryToCesium.bind(this));\n    default:\n      googAsserts.fail(`Unhandled multi geometry type${geometry.getType()}`);\n  }\n};\n\n\n/**\n * Convert an OpenLayers text style to Cesium.\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature..\n * @param {!ol.geom.Geometry} geometry\n * @param {!ol.style.Text} style\n * @return {Cesium.LabelCollection} Cesium primitive\n * @api\n */\nexports.prototype.olGeometry4326TextPartToCesium = function(layer, feature, geometry, style) {\n  const text = style.getText();\n  googAsserts.assert(text !== undefined);\n\n\n  const labels = new Cesium.LabelCollection({scene: this.scene});\n  // TODO: export and use the text draw position from OpenLayers .\n  // See src/ol/render/vector.js\n  const extentCenter = olExtent.getCenter(geometry.getExtent());\n  if (geometry instanceof olGeomSimpleGeometry) {\n    const first = geometry.getFirstCoordinate();\n    extentCenter[2] = first.length == 3 ? first[2] : 0.0;\n  }\n  const options = /** @type {Cesium.optionsLabelCollection} */ ({});\n\n  options.position = olcsCore.ol4326CoordinateToCesiumCartesian(extentCenter);\n\n  options.text = text;\n\n  options.heightReference = this.getHeightReference(layer, feature, geometry);\n\n  const offsetX = style.getOffsetX();\n  const offsetY = style.getOffsetY();\n  if (offsetX != 0 && offsetY != 0) {\n    const offset = new Cesium.Cartesian2(offsetX, offsetY);\n    options.pixelOffset = offset;\n  }\n\n  const font = style.getFont();\n  if (font !== undefined) {\n    options.font = font;\n  }\n\n  let labelStyle = undefined;\n  if (style.getFill()) {\n    options.fillColor = this.extractColorFromOlStyle(style, false);\n    labelStyle = Cesium.LabelStyle.FILL;\n  }\n  if (style.getStroke()) {\n    options.outlineWidth = this.extractLineWidthFromOlStyle(style);\n    options.outlineColor = this.extractColorFromOlStyle(style, true);\n    labelStyle = Cesium.LabelStyle.OUTLINE;\n  }\n  if (style.getFill() && style.getStroke()) {\n    labelStyle = Cesium.LabelStyle.FILL_AND_OUTLINE;\n  }\n  options.style = labelStyle;\n\n  let horizontalOrigin;\n  switch (style.getTextAlign()) {\n    case 'left':\n      horizontalOrigin = Cesium.HorizontalOrigin.LEFT;\n      break;\n    case 'right':\n      horizontalOrigin = Cesium.HorizontalOrigin.RIGHT;\n      break;\n    case 'center':\n    default:\n      horizontalOrigin = Cesium.HorizontalOrigin.CENTER;\n  }\n  options.horizontalOrigin = horizontalOrigin;\n\n  if (style.getTextBaseline()) {\n    let verticalOrigin;\n    switch (style.getTextBaseline()) {\n      case 'top':\n        verticalOrigin = Cesium.VerticalOrigin.TOP;\n        break;\n      case 'middle':\n        verticalOrigin = Cesium.VerticalOrigin.CENTER;\n        break;\n      case 'bottom':\n        verticalOrigin = Cesium.VerticalOrigin.BOTTOM;\n        break;\n      case 'alphabetic':\n        verticalOrigin = Cesium.VerticalOrigin.TOP;\n        break;\n      case 'hanging':\n        verticalOrigin = Cesium.VerticalOrigin.BOTTOM;\n        break;\n      default:\n        googAsserts.fail(`unhandled baseline ${style.getTextBaseline()}`);\n    }\n    options.verticalOrigin = verticalOrigin;\n  }\n\n\n  const l = labels.add(options);\n  this.setReferenceForPicking(layer, feature, l);\n  return labels;\n};\n\n\n/**\n * Convert an OpenLayers style to a Cesium Material.\n * @param {ol.Feature} feature OpenLayers feature..\n * @param {!ol.style.Style} style\n * @param {boolean} outline\n * @return {Cesium.Material}\n * @api\n */\nexports.prototype.olStyleToCesium = function(feature, style, outline) {\n  const fill = style.getFill();\n  const stroke = style.getStroke();\n  if ((outline && !stroke) || (!outline && !fill)) {\n    return null; // FIXME use a default style? Developer error?\n  }\n\n  let color = outline ? stroke.getColor() : fill.getColor();\n  color = olcsCore.convertColorToCesium(color);\n\n  if (outline && stroke.getLineDash()) {\n    return Cesium.Material.fromType('Stripe', {\n      // always update Cesium externs before adding a property\n      horizontal: false,\n      repeat: 500, // TODO how to calculate this?\n      evenColor: color,\n      oddColor: new Cesium.Color(0, 0, 0, 0) // transparent\n    });\n  } else {\n    return Cesium.Material.fromType('Color', {\n      // always update Cesium externs before adding a property\n      color\n    });\n  }\n\n};\n\n\n/**\n * Compute OpenLayers plain style.\n * Evaluates style function, blend arrays, get default style.\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature\n * @param {ol.StyleFunction|undefined} fallbackStyleFunction\n * @param {number} resolution\n * @return {Array.<!ol.style.Style>} null if no style is available\n * @api\n */\nexports.prototype.computePlainStyle = function(layer, feature, fallbackStyleFunction, resolution) {\n  /**\n   * @type {ol.FeatureStyleFunction|undefined}\n   */\n  const featureStyleFunction = feature.getStyleFunction();\n\n  /**\n   * @type {ol.style.Style|Array.<ol.style.Style>}\n   */\n  let style = null;\n\n  if (featureStyleFunction) {\n    style = featureStyleFunction.call(feature, resolution);\n  }\n\n  if (!style && fallbackStyleFunction) {\n    style = fallbackStyleFunction(feature, resolution);\n  }\n\n  if (!style) {\n    // The feature must not be displayed\n    return null;\n  }\n\n  // FIXME combine materials as in cesium-materials-pack?\n  // then this function must return a custom material\n  // More simply, could blend the colors like described in\n  // http://en.wikipedia.org/wiki/Alpha_compositing\n  return Array.isArray(style) ? style : [style];\n};\n\n\n/**\n * @protected\n * @param {!ol.Feature} feature\n * @param {!ol.style.Style} style\n * @param {!ol.geom.Geometry=} opt_geom Geometry to be converted.\n * @return {ol.geom.Geometry|undefined}\n */\nexports.prototype.getGeometryFromFeature = function(feature, style, opt_geom) {\n  if (opt_geom) {\n    return opt_geom;\n  }\n\n  const geom3d = /** @type {!ol.geom.Geometry} */(feature.get('olcs.3d_geometry'));\n  if (geom3d && geom3d instanceof olGeomGeometry) {\n    return geom3d;\n  }\n\n  if (style) {\n    const geomFuncRes = style.getGeometryFunction()(feature);\n    if (geomFuncRes instanceof olGeomGeometry) {\n      return geomFuncRes;\n    }\n  }\n\n  return feature.getGeometry();\n};\n\n\n/**\n * Convert one OpenLayers feature up to a collection of Cesium primitives.\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature.\n * @param {!ol.style.Style} style\n * @param {!olcsx.core.OlFeatureToCesiumContext} context\n * @param {!ol.geom.Geometry=} opt_geom Geometry to be converted.\n * @return {Cesium.Primitive} primitives\n * @api\n */\nexports.prototype.olFeatureToCesium = function(layer, feature, style, context, opt_geom) {\n  let geom = this.getGeometryFromFeature(feature, style, opt_geom);\n\n  if (!geom) {\n    // OpenLayers features may not have a geometry\n    // See http://geojson.org/geojson-spec.html#feature-objects\n    return null;\n  }\n\n  const proj = context.projection;\n  const newBillboardAddedCallback = function(bb) {\n    context.featureToCesiumMap[olBase.getUid(feature)] = bb;\n  };\n\n  switch (geom.getType()) {\n    case 'GeometryCollection':\n      const primitives = new Cesium.PrimitiveCollection();\n      const collection = /** @type {!ol.geom.GeometryCollection} */ (geom);\n      // TODO: use getGeometriesArray() instead\n      collection.getGeometries().forEach((geom) => {\n        if (geom) {\n          const prims = this.olFeatureToCesium(layer, feature, style, context,\n              geom);\n          if (prims) {\n            primitives.add(prims);\n          }\n        }\n      });\n      return primitives;\n    case 'Point':\n      geom = /** @type {!ol.geom.Point} */ (geom);\n      const bbs = context.billboards;\n      const result = this.olPointGeometryToCesium(layer, feature, geom, proj,\n          style, bbs, newBillboardAddedCallback);\n      if (!result) {\n        // no wrapping primitive\n        return null;\n      } else {\n        return result;\n      }\n    case 'Circle':\n      geom = /** @type {!ol.geom.Circle} */ (geom);\n      return this.olCircleGeometryToCesium(layer, feature, geom, proj,\n          style);\n    case 'LineString':\n      geom = /** @type {!ol.geom.LineString} */ (geom);\n      return this.olLineStringGeometryToCesium(layer, feature, geom, proj,\n          style);\n    case 'Polygon':\n      geom = /** @type {!ol.geom.Polygon} */ (geom);\n      return this.olPolygonGeometryToCesium(layer, feature, geom, proj,\n          style);\n    case 'MultiPoint':\n    case 'MultiLineString':\n    case 'MultiPolygon':\n      const result2 = this.olMultiGeometryToCesium(layer, feature, geom, proj,\n          style, context.billboards, newBillboardAddedCallback);\n      if (!result2) {\n        // no wrapping primitive\n        return null;\n      } else {\n        return result2;\n      }\n    case 'LinearRing':\n      throw new Error('LinearRing should only be part of polygon.');\n    default:\n      throw new Error(`Ol geom type not handled : ${geom.getType()}`);\n  }\n};\n\n\n/**\n * Convert an OpenLayers vector layer to Cesium primitive collection.\n * For each feature, the associated primitive will be stored in\n * `featurePrimitiveMap`.\n * @param {!(ol.layer.Vector|ol.layer.Image)} olLayer\n * @param {!ol.View} olView\n * @param {!Object.<number, !Cesium.Primitive>} featurePrimitiveMap\n * @return {!olcs.core.VectorLayerCounterpart}\n * @api\n */\nexports.prototype.olVectorLayerToCesium = function(olLayer, olView, featurePrimitiveMap) {\n  const proj = olView.getProjection();\n  const resolution = olView.getResolution();\n\n  if (resolution === undefined || !proj) {\n    googAsserts.fail('View not ready');\n    // an assertion is not enough for closure to assume resolution and proj\n    // are defined\n    throw new Error('View not ready');\n  }\n\n  let source = olLayer.getSource();\n  if (source instanceof olSourceCluster) {\n    source = source.getSource();\n  }\n\n  googAsserts.assertInstanceof(source, olSourceVector);\n  const features = source.getFeatures();\n  const counterpart = new olcsCoreVectorLayerCounterpart(proj, this.scene);\n  const context = counterpart.context;\n  for (let i = 0; i < features.length; ++i) {\n    const feature = features[i];\n    if (!feature) {\n      continue;\n    }\n    /**\n     * @type {ol.StyleFunction|undefined}\n     */\n    const layerStyle = olLayer.getStyleFunction();\n    const styles = this.computePlainStyle(olLayer, feature, layerStyle,\n        resolution);\n    if (!styles || !styles.length) {\n      // only 'render' features with a style\n      continue;\n    }\n\n    /**\n     * @type {Cesium.Primitive|null}\n     */\n    let primitives = null;\n    for (let i = 0; i < styles.length; i++) {\n      const prims = this.olFeatureToCesium(olLayer, feature, styles[i], context);\n      if (prims) {\n        if (!primitives) {\n          primitives = prims;\n        } else if (prims) {\n          let i = 0, prim;\n          while ((prim = prims.get(i))) {\n            primitives.add(prim);\n            i++;\n          }\n        }\n      }\n    }\n    if (!primitives) {\n      continue;\n    }\n    featurePrimitiveMap[olBase.getUid(feature)] = primitives;\n    counterpart.getRootPrimitive().add(primitives);\n  }\n\n  return counterpart;\n};\n\n\n/**\n * Convert an OpenLayers feature to Cesium primitive collection.\n * @param {!(ol.layer.Vector|ol.layer.Image)} layer\n * @param {!ol.View} view\n * @param {!ol.Feature} feature\n * @param {!olcsx.core.OlFeatureToCesiumContext} context\n * @return {Cesium.Primitive}\n * @api\n */\nexports.prototype.convert = function(layer, view, feature, context) {\n  const proj = view.getProjection();\n  const resolution = view.getResolution();\n\n  if (resolution == undefined || !proj) {\n    return null;\n  }\n\n  /**\n   * @type {ol.StyleFunction|undefined}\n   */\n  const layerStyle = layer.getStyleFunction();\n\n  const styles = this.computePlainStyle(layer, feature, layerStyle, resolution);\n\n  if (!styles.length) {\n    // only 'render' features with a style\n    return null;\n  }\n\n  context.projection = proj;\n\n  /**\n   * @type {Cesium.Primitive|null}\n   */\n  let primitives = null;\n  for (let i = 0; i < styles.length; i++) {\n    const prims = this.olFeatureToCesium(layer, feature, styles[i], context);\n    if (!primitives) {\n      primitives = prims;\n    } else if (prims) {\n      let i = 0, prim;\n      while ((prim = prims.get(i))) {\n        primitives.add(prim);\n        i++;\n      }\n    }\n  }\n  return primitives;\n};\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/FeatureConverter.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nimport olSourceVector from 'ol/source/Vector';\nimport olLayerLayer from 'ol/layer/Layer';\nimport olSourceCluster from 'ol/source/Cluster';\nimport olLayerImage from 'ol/layer/Image';\nimport googAsserts from 'goog/asserts';\nimport olBase from 'ol';\nimport olEvents from 'ol/events';\nimport olLayerVector from 'ol/layer/Vector';\nimport olcsAbstractSynchronizer from './AbstractSynchronizer.js';\nimport olcsFeatureConverter from './FeatureConverter.js';\n\nconst exports = function(map, scene, opt_converter) {\n\n  /**\n   * @protected\n   */\n  this.converter = opt_converter || new olcsFeatureConverter(scene);\n\n  /**\n   * @private\n   */\n  this.csAllPrimitives_ = new Cesium.PrimitiveCollection();\n  scene.primitives.add(this.csAllPrimitives_);\n  this.csAllPrimitives_.destroyPrimitives = false;\n\n  olcsAbstractSynchronizer.call(this, map, scene);\n};\n\nolBase.inherits(exports, olcsAbstractSynchronizer);\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.addCesiumObject = function(counterpart) {\n  googAsserts.assert(counterpart);\n  counterpart.getRootPrimitive()['counterpart'] = counterpart;\n  this.csAllPrimitives_.add(counterpart.getRootPrimitive());\n};\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.destroyCesiumObject = function(object) {\n  object.getRootPrimitive().destroy();\n};\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.removeSingleCesiumObject = function(object, destroy) {\n  object.destroy();\n  this.csAllPrimitives_.destroyPrimitives = destroy;\n  this.csAllPrimitives_.remove(object.getRootPrimitive());\n  this.csAllPrimitives_.destroyPrimitives = false;\n};\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.removeAllCesiumObjects = function(destroy) {\n  this.csAllPrimitives_.destroyPrimitives = destroy;\n  if (destroy) {\n    for (let i = 0; i < this.csAllPrimitives_.length; ++i) {\n      this.csAllPrimitives_.get(i)['counterpart'].destroy();\n    }\n  }\n  this.csAllPrimitives_.removeAll();\n  this.csAllPrimitives_.destroyPrimitives = false;\n};\n\n/**\n * Synchronizes the layer visibility properties\n * to the given Cesium Primitive.\n * @param {olcsx.LayerWithParents} olLayerWithParents\n * @param {!Cesium.Primitive} csPrimitive\n */\nexports.prototype.updateLayerVisibility = function(olLayerWithParents, csPrimitive) {\n  let visible = true;\n  [olLayerWithParents.layer].concat(olLayerWithParents.parents).forEach((olLayer) => {\n    const layerVisible = olLayer.getVisible();\n    if (layerVisible !== undefined) {\n      visible &= layerVisible;\n    } else {\n      visible = false;\n    }\n  });\n  csPrimitive.show = visible;\n};\n/**\n * @inheritDoc\n */\nexports.prototype.createSingleLayerCounterparts = function(olLayerWithParents) {\n  const olLayer = olLayerWithParents.layer;\n  if (!(olLayer instanceof olLayerVector)) {\n    return null;\n  }\n  googAsserts.assertInstanceof(olLayer, olLayerLayer);\n\n  let source = olLayer.getSource();\n  if (source instanceof olSourceCluster) {\n    source = source.getSource();\n  }\n\n  googAsserts.assertInstanceof(source, olSourceVector);\n  googAsserts.assert(this.view);\n\n  const view = this.view;\n  const featurePrimitiveMap = {};\n  const counterpart = this.converter.olVectorLayerToCesium(olLayer, view,\n      featurePrimitiveMap);\n  const csPrimitives = counterpart.getRootPrimitive();\n  const olListenKeys = counterpart.olListenKeys;\n\n  [olLayerWithParents.layer].concat(olLayerWithParents.parents).forEach((olLayerItem) => {\n    olListenKeys.push(olEvents.listen(olLayerItem, 'change:visible', () => {\n      this.updateLayerVisibility(olLayerWithParents, csPrimitives);\n    }));\n  });\n  this.updateLayerVisibility(olLayerWithParents, csPrimitives);\n\n  const onAddFeature = (function(feature) {\n    googAsserts.assert(\n        (olLayer instanceof olLayerVector) ||\n        (olLayer instanceof olLayerImage)\n    );\n    const context = counterpart.context;\n    const prim = this.converter.convert(olLayer, view, feature, context);\n    if (prim) {\n      featurePrimitiveMap[olBase.getUid(feature)] = prim;\n      csPrimitives.add(prim);\n    }\n  }).bind(this);\n\n  const onRemoveFeature = (function(feature) {\n    const geometry = feature.getGeometry();\n    const id = olBase.getUid(feature);\n    if (!geometry || geometry.getType() == 'Point') {\n      const context = counterpart.context;\n      const bb = context.featureToCesiumMap[id];\n      delete context.featureToCesiumMap[id];\n      if (bb instanceof Cesium.Billboard) {\n        context.billboards.remove(bb);\n      }\n    }\n    const csPrimitive = featurePrimitiveMap[id];\n    delete featurePrimitiveMap[id];\n    if (csPrimitive) {\n      csPrimitives.remove(csPrimitive);\n    }\n  }).bind(this);\n\n  olListenKeys.push(olEvents.listen(source, 'addfeature', (e) => {\n    googAsserts.assert(e.feature);\n    onAddFeature(e.feature);\n  }, this));\n\n  olListenKeys.push(olEvents.listen(source, 'removefeature', (e) => {\n    googAsserts.assert(e.feature);\n    onRemoveFeature(e.feature);\n  }, this));\n\n  olListenKeys.push(olEvents.listen(source, 'changefeature', (e) => {\n    const feature = e.feature;\n    googAsserts.assert(feature);\n    onRemoveFeature(feature);\n    onAddFeature(feature);\n  }, this));\n\n  return counterpart ? [counterpart] : null;\n};\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/VectorSynchronizer.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nimport olBase from 'ol';\nimport olOverlay from 'ol/Overlay';\nimport olProj from 'ol/proj';\nimport olDom from 'ol/dom';\nimport olObservable from 'ol/Observable';\n\nconst exports = function(options) {\n  /**\n   * @private\n   * @type {?Function}\n   */\n  this.scenePostRenderListenerRemover_ = null;\n\n  /**\n   * @private\n   * @type {!Cesium.Scene}\n   */\n  this.scene_ = options.scene;\n\n  /**\n   * @private\n   * @type {!olcs.OverlaySynchronizer}\n   */\n  this.synchronizer_ = options.synchronizer;\n\n  /**\n   * @private\n   * @type {!ol.Overlay}\n   */\n  this.parent_ = options.parent;\n\n  /**\n   * @private\n   * @type {ol.Coordinate|undefined}\n   */\n  this.positionWGS84_ = undefined;\n\n  /**\n   * @private\n   * @type {MutationObserver}\n   */\n  this.observer_ = new MutationObserver(this.handleElementChanged.bind(this));\n  /**\n   * @private\n   * @type {Array.<MutationObserver>}\n   */\n  this.attributeObserver_ = [];\n\n  /**\n   * @private\n   * @type {Array<ol.EventsKey>}\n   */\n  this.listenerKeys_ = [];\n  // synchronize our Overlay with the parent Overlay\n  this.listenerKeys_.push(this.parent_.on('change:position', this.setPropertyFromEvent_.bind(this)));\n  this.listenerKeys_.push(this.parent_.on('change:element', this.setPropertyFromEvent_.bind(this)));\n  this.listenerKeys_.push(this.parent_.on('change:offset', this.setPropertyFromEvent_.bind(this)));\n  this.listenerKeys_.push(this.parent_.on('change:position', this.setPropertyFromEvent_.bind(this)));\n  this.listenerKeys_.push(this.parent_.on('change:positioning', this.setPropertyFromEvent_.bind(this)));\n\n  olOverlay.call(this, this.parent_.getOptions());\n  this.setProperties(this.parent_.getProperties());\n\n  this.handleMapChanged();\n};\n\nolBase.inherits(exports, olOverlay);\n\n/**\n * @param {Node} target\n * @private\n */\nexports.prototype.observeTarget_ = function(target) {\n  this.observer_.disconnect();\n  this.observer_.observe(target, {\n    attributes: false,\n    childList: true,\n    characterData: true,\n    subtree: true\n  });\n  this.attributeObserver_.forEach((observer) => {\n    observer.disconnect();\n  });\n  this.attributeObserver_.length = 0;\n  for (let i = 0; i < target.childNodes.length; i++) {\n    const node = target.childNodes[i];\n    if (node.nodeType === 1) {\n      const observer = new MutationObserver(this.handleElementChanged.bind(this));\n      observer.observe(node, {\n        attributes: true,\n        subtree: true\n      });\n      this.attributeObserver_.push(observer);\n    }\n  }\n};\n\n/**\n *\n * @param {ol.Object.Event} event\n * @private\n */\nexports.prototype.setPropertyFromEvent_ = function(event) {\n  if (event.target && event.key) {\n    this.set(event.key, event.target.get(event.key));\n  }\n};\n/**\n * Get the scene associated with this overlay.\n * @see ol.Overlay.prototype.getMap\n * @return {!Cesium.Scene} The scene that the overlay is part of.\n * @api\n */\nexports.prototype.getScene = function() {\n  return this.scene_;\n};\n\n\n\n/**\n * @override\n */\nexports.prototype.handleMapChanged = function() {\n  if (this.scenePostRenderListenerRemover_) {\n    this.scenePostRenderListenerRemover_();\n    olDom.removeNode(this.element);\n  }\n  this.scenePostRenderListenerRemover_ = null;\n  const scene = this.getScene();\n  if (scene) {\n    this.scenePostRenderListenerRemover_ = scene.postRender.addEventListener(this.updatePixelPosition.bind(this));\n    this.updatePixelPosition();\n    const container = this.stopEvent ?\n      this.synchronizer_.getOverlayContainerStopEvent() : this.synchronizer_.getOverlayContainer();\n    if (this.insertFirst) {\n      container.insertBefore(this.element, container.childNodes[0] || null);\n    } else {\n      container.appendChild(this.element);\n    }\n  }\n};\n\n/**\n * @override\n */\nexports.prototype.handlePositionChanged = function() {\n  // transform position to WGS84\n  const position = this.getPosition();\n  if (position) {\n    const sourceProjection = this.parent_.getMap().getView().getProjection();\n    this.positionWGS84_ = olProj.transform(position, sourceProjection, 'EPSG:4326');\n  } else {\n    this.positionWGS84_ = undefined;\n  }\n  this.updatePixelPosition();\n};\n\n/**\n * @override\n */\nexports.prototype.handleElementChanged = function() {\n  function cloneNode(node, parent) {\n    const clone = node.cloneNode();\n    if (parent) {\n      parent.appendChild(clone);\n    }\n    if (node.nodeType != Node.TEXT_NODE) {\n      clone.addEventListener('click', (event) => {\n        node.dispatchEvent(new MouseEvent('click', event));\n        event.stopPropagation();\n      });\n    }\n    const nodes = node.childNodes;\n    for (let i = 0; i < nodes.length; i++) {\n      if (!nodes[i]) {\n        continue;\n      }\n      cloneNode(nodes[i], clone);\n    }\n    return clone;\n  }\n  olDom.removeChildren(this.element);\n  const element = this.getElement();\n  if (element) {\n    if (element.parentNode && element.parentNode.childNodes) {\n      for (const node of element.parentNode.childNodes) {\n        const clonedNode = cloneNode(node, null);\n        this.element.appendChild(clonedNode);\n      }\n    }\n  }\n  if (element.parentNode) {\n    // set new Observer\n    this.observeTarget_(element.parentNode);\n  }\n};\n\n\n/**\n * @override\n */\nexports.prototype.updatePixelPosition = function() {\n  const position = this.positionWGS84_;\n  if (!this.scene_ || !position) {\n    this.setVisible(false);\n    return;\n  }\n  let cartesian;\n  if (position.length === 2) {\n    cartesian = Cesium.Cartesian3.fromDegreesArray(position)[0];\n  } else {\n    cartesian = Cesium.Cartesian3.fromDegreesArrayHeights(position)[0];\n  }\n  const camera = this.scene_.camera;\n  const ellipsoidBoundingSphere = new Cesium.BoundingSphere(new Cesium.Cartesian3(), 6356752);\n  const occluder = new Cesium.Occluder(ellipsoidBoundingSphere, camera.position);\n  // check if overlay position is behind the horizon\n  if (!occluder.isPointVisible(cartesian)) {\n    this.setVisible(false);\n    return;\n  }\n  const cullingVolume = camera.frustum.computeCullingVolume(camera.position, camera.direction, camera.up);\n  // check if overlay position is visible from the camera\n  if (cullingVolume.computeVisibility(new Cesium.BoundingSphere(cartesian)) !== 1) {\n    this.setVisible(false);\n    return;\n  }\n  this.setVisible(true);\n\n  const pixelCartesian = this.scene_.cartesianToCanvasCoordinates(cartesian);\n  const pixel = [pixelCartesian.x, pixelCartesian.y];\n  const mapSize = [this.scene_.canvas.width, this.scene_.canvas.height];\n  this.updateRenderedPosition(pixel, mapSize);\n};\n\n/**\n * Destroys the overlay, removing all its listeners and elements\n * @api\n */\nexports.prototype.destroy = function() {\n  if (this.scenePostRenderListenerRemover_) {\n    this.scenePostRenderListenerRemover_();\n  }\n  if (this.observer_) {\n    this.observer_.disconnect();\n  }\n  olObservable.unByKey(this.listenerKeys_);\n  this.listenerKeys_.splice(0);\n  if (this.element.removeNode) {\n    this.element.removeNode(true);\n  } else {\n    this.element.remove();\n  }\n  this.element = null;\n};\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/SynchronizedOverlay.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nimport olcsSynchronizedOverlay from './SynchronizedOverlay.js';\nimport olBase from 'ol';\nimport olEvents from 'ol/events';\n\nconst exports = function(map, scene) {\n  /**\n   * @type {!ol.Map}\n   * @protected\n   */\n  this.map = map;\n\n  /**\n   * @type {ol.Collection.<ol.Overlay>}\n   * @private\n   */\n  this.overlays_ = this.map.getOverlays();\n\n  /**\n   * @type {!Cesium.Scene}\n   * @protected\n   */\n  this.scene = scene;\n\n  /**\n   * @private\n   * @type {!Element}\n   */\n  this.overlayContainerStopEvent_ = document.createElement('DIV');\n  this.overlayContainerStopEvent_.className = 'ol-overlaycontainer-stopevent';\n  const overlayEvents = [\n    olEvents.EventType.CLICK,\n    olEvents.EventType.DBLCLICK,\n    olEvents.EventType.MOUSEDOWN,\n    olEvents.EventType.TOUCHSTART,\n    olEvents.EventType.MSPOINTERDOWN,\n    olBase.MapBrowserEventType.POINTERDOWN,\n    olEvents.EventType.MOUSEWHEEL,\n    olEvents.EventType.WHEEL\n  ];\n  overlayEvents.forEach((event) => {\n    olEvents.listen(this.overlayContainerStopEvent_, event, olEvents.Event.stopPropagation);\n  });\n  this.scene.canvas.parentElement.appendChild(this.overlayContainerStopEvent_);\n\n  /**\n   * @private\n   * @type {!Element}\n   */\n  this.overlayContainer_ = document.createElement('DIV');\n  this.overlayContainer_.className = 'ol-overlaycontainer';\n  this.scene.canvas.parentElement.appendChild(this.overlayContainer_);\n\n\n  /**\n   * @type {!Object<?,olcs.SynchronizedOverlay>}\n   * @private\n   */\n  this.overlayMap_ = {};\n};\n\n\n\n/**\n * Get the element that serves as a container for overlays that don't allow\n * event propagation. Elements added to this container won't let mousedown and\n * touchstart events through to the map, so clicks and gestures on an overlay\n * don't trigger any {@link ol.MapBrowserEvent}.\n * @return {!Element} The map's overlay container that stops events.\n */\nexports.prototype.getOverlayContainerStopEvent = function() {\n  return this.overlayContainerStopEvent_;\n};\n\n/**\n * Get the element that serves as a container for overlays.\n * @return {!Element} The map's overlay container.\n */\nexports.prototype.getOverlayContainer = function() {\n  return this.overlayContainer_;\n};\n\n/**\n * Destroy all and perform complete synchronization of the overlays.\n * @api\n */\nexports.prototype.synchronize = function() {\n  this.destroyAll();\n  this.addOverlays();\n  this.overlays_.on('add', this.addOverlayFromEvent_.bind(this));\n  this.overlays_.on('remove', this.removeOverlayFromEvent_.bind(this));\n};\n\n/**\n * @param {ol.Collection.Event} event\n * @private\n */\nexports.prototype.addOverlayFromEvent_ = function(event) {\n  const overlay = /** @type {ol.Overlay} */ (event.element);\n  this.addOverlay(overlay);\n};\n\n/**\n * @api\n */\nexports.prototype.addOverlays = function() {\n  this.overlays_.forEach(this.addOverlay, this);\n};\n\n/**\n * @param {ol.Overlay} overlay\n * @api\n */\nexports.prototype.addOverlay = function(overlay) {\n  if (!overlay) {\n    return;\n  }\n  const cesiumOverlay = new olcsSynchronizedOverlay({\n    scene: this.scene,\n    synchronizer: this,\n    parent: overlay\n  });\n\n  const overlayId = olBase.getUid(overlay).toString();\n  this.overlayMap_[overlayId] = cesiumOverlay;\n};\n\n/**\n * @param {ol.Collection.Event} event\n * @private\n */\nexports.prototype.removeOverlayFromEvent_ = function(event) {\n  const removedOverlay = /** @type {ol.Overlay} */ (event.element);\n  this.removeOverlay(removedOverlay);\n};\n\n/**\n * Removes an overlay from the scene\n * @param {ol.Overlay} overlay\n * @api\n */\nexports.prototype.removeOverlay = function(overlay) {\n  const overlayId = olBase.getUid(overlay).toString();\n  const csOverlay = this.overlayMap_[overlayId];\n  if (csOverlay) {\n    csOverlay.destroy();\n    delete this.overlayMap_[overlayId];\n  }\n};\n\n/**\n * Destroys all the created Cesium objects.\n * @protected\n */\nexports.prototype.destroyAll = function() {\n  Object.keys(this.overlayMap_).forEach((key) => {\n    const overlay = this.overlayMap_[key];\n    overlay.destroy();\n    delete this.overlayMap_[key];\n  });\n};\n\n\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/OverlaySynchronizer.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nimport olGeomPoint from 'ol/geom/Point';\nimport googAsserts from 'goog/asserts';\nimport olProj from 'ol/proj';\nimport olEvents from 'ol/events';\nimport olMapBrowserEventType from 'ol/MapBrowserEventType';\nimport olcsUtil from './util.js';\nimport olcsCore from './core.js';\nimport olcsAutoRenderLoop from './AutoRenderLoop.js';\nimport olcsCamera from './Camera.js';\nimport olcsRasterSynchronizer from './RasterSynchronizer.js';\nimport olcsVectorSynchronizer from './VectorSynchronizer.js';\nimport olcsOverlaySynchronizer from './OverlaySynchronizer.js';\n\nconst exports = function(options) {\n\n  /**\n   * @type {olcs.AutoRenderLoop}\n   * @private\n   */\n  this.autoRenderLoop_ = null;\n\n  /**\n   * @type {!ol.Map}\n   * @private\n   */\n  this.map_ = options.map;\n\n  /**\n   * @type {!function(): Cesium.JulianDate}\n   * @private\n   */\n  this.time_ = options.time || function() {\n    return Cesium.JulianDate.now();\n  };\n\n  /**\n   * No change of the view projection.\n   * @private\n   */\n  this.to4326Transform_ = olProj.getTransform(this.map_.getView().getProjection(), 'EPSG:4326');\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.resolutionScale_ = 1.0;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.canvasClientWidth_ = 0.0;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.canvasClientHeight_ = 0.0;\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.resolutionScaleChanged_ = true; // force resize\n\n  const fillArea = 'position:absolute;top:0;left:0;width:100%;height:100%;';\n\n  /**\n   * @type {!Element}\n   * @private\n   */\n  this.container_ = document.createElement('DIV');\n  const containerAttribute = document.createAttribute('style');\n  containerAttribute.value = `${fillArea}visibility:hidden;`;\n  this.container_.setAttributeNode(containerAttribute);\n\n  let targetElement = options.target || null;\n  if (targetElement) {\n    if (typeof targetElement === 'string') {\n      targetElement = document.getElementById(targetElement);\n    }\n    targetElement.appendChild(this.container_);\n  } else {\n    const oc = this.map_.getViewport().querySelector('.ol-overlaycontainer');\n    if (oc && oc.parentNode) {\n      oc.parentNode.insertBefore(this.container_, oc);\n    }\n  }\n\n  /**\n   * Whether the Cesium container is placed over the ol map.\n   * @type {boolean}\n   * @private\n   */\n  this.isOverMap_ = !targetElement;\n\n\n  if (this.isOverMap_ && options.stopOpenLayersEventsPropagation) {\n    const overlayEvents = [\n      olEvents.EventType.CLICK,\n      olEvents.EventType.DBLCLICK,\n      olEvents.EventType.MOUSEDOWN,\n      olEvents.EventType.TOUCHSTART,\n      olEvents.EventType.MSPOINTERDOWN,\n      olMapBrowserEventType.POINTERDOWN,\n      olEvents.EventType.MOUSEWHEEL,\n      olEvents.EventType.WHEEL\n    ];\n    for (let i = 0, ii = overlayEvents.length; i < ii; ++i) {\n      olEvents.listen(this.container_, overlayEvents[i], olEvents.Event.stopPropagation);\n    }\n  }\n\n\n  /**\n   * @type {!HTMLCanvasElement}\n   * @private\n   */\n  this.canvas_ = /** @type {!HTMLCanvasElement} */ (document.createElement('CANVAS'));\n  const canvasAttribute = document.createAttribute('style');\n  canvasAttribute.value = fillArea;\n  this.canvas_.setAttributeNode(canvasAttribute);\n\n  if (olcsUtil.supportsImageRenderingPixelated()) {\n    // non standard CSS4\n    this.canvas_.style['imageRendering'] = olcsUtil.imageRenderingValue();\n  }\n\n  this.canvas_.oncontextmenu = function() { return false; };\n  this.canvas_.onselectstart = function() { return false; };\n\n  this.container_.appendChild(this.canvas_);\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.enabled_ = false;\n\n  /**\n   * @type {!Array.<ol.interaction.Interaction>}\n   * @private\n   */\n  this.pausedInteractions_ = [];\n\n  /**\n   * @type {?ol.layer.Group}\n   * @private\n   */\n  this.hiddenRootGroup_ = null;\n\n  const sceneOptions = options.sceneOptions !== undefined ? options.sceneOptions :\n    /** @type {Cesium.SceneOptions} */ ({});\n  sceneOptions.canvas = this.canvas_;\n  sceneOptions.scene3DOnly = true;\n\n  /**\n   * @type {!Cesium.Scene}\n   * @private\n   */\n  this.scene_ = new Cesium.Scene(sceneOptions);\n\n  const sscc = this.scene_.screenSpaceCameraController;\n\n  sscc.tiltEventTypes.push({\n    'eventType': Cesium.CameraEventType.LEFT_DRAG,\n    'modifier': Cesium.KeyboardEventModifier.SHIFT\n  });\n\n  sscc.tiltEventTypes.push({\n    'eventType': Cesium.CameraEventType.LEFT_DRAG,\n    'modifier': Cesium.KeyboardEventModifier.ALT\n  });\n\n  sscc.enableLook = false;\n\n  this.scene_.camera.constrainedAxis = Cesium.Cartesian3.UNIT_Z;\n\n  /**\n   * @type {!olcs.Camera}\n   * @private\n   */\n  this.camera_ = new olcsCamera(this.scene_, this.map_);\n\n  /**\n   * @type {!Cesium.Globe}\n   * @private\n   */\n  this.globe_ = new Cesium.Globe(Cesium.Ellipsoid.WGS84);\n  this.globe_.baseColor = Cesium.Color.WHITE;\n  this.scene_.globe = this.globe_;\n  this.scene_.skyAtmosphere = new Cesium.SkyAtmosphere();\n\n  // The first layer of Cesium is special; using a 1x1 transparent image to workaround it.\n  // See https://github.com/AnalyticalGraphicsInc/cesium/issues/1323 for details.\n  const firstImageryProvider = new Cesium.SingleTileImageryProvider({\n    url: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=',\n    rectangle: Cesium.Rectangle.fromDegrees(0, 0, 1, 1) // the Rectangle dimensions are arbitrary\n  });\n  this.globe_.imageryLayers.addImageryProvider(firstImageryProvider, 0);\n\n  this.dataSourceCollection_ = new Cesium.DataSourceCollection();\n  this.dataSourceDisplay_ = new Cesium.DataSourceDisplay({\n    scene: this.scene_,\n    dataSourceCollection: this.dataSourceCollection_\n  });\n\n  const synchronizers = options.createSynchronizers ?\n    options.createSynchronizers(this.map_, this.scene_, this.dataSourceCollection_) : [\n      new olcsRasterSynchronizer(this.map_, this.scene_),\n      new olcsVectorSynchronizer(this.map_, this.scene_),\n      new olcsOverlaySynchronizer(this.map_, this.scene_)\n    ];\n\n  // Assures correct canvas size after initialisation\n  this.handleResize_();\n\n  for (let i = synchronizers.length - 1; i >= 0; --i) {\n    synchronizers[i].synchronize();\n  }\n\n  if (this.isOverMap_) {\n    // if in \"stacked mode\", hide everything except canvas (including credits)\n    const credits = this.canvas_.nextElementSibling;\n    if (credits) {\n      credits.style.display = 'none';\n    }\n  }\n\n  /**\n   * Time of the last rendered frame, as returned by `performance.now()`.\n   * @type {number}\n   * @private\n   */\n  this.lastFrameTime_ = 0;\n\n  /**\n   * The identifier returned by `requestAnimationFrame`.\n   * @type {number|undefined}\n   * @private\n   */\n  this.renderId_ = undefined;\n\n  /**\n   * Target frame rate for the render loop.\n   * @type {number}\n   * @private\n   */\n  this.targetFrameRate_ = Number.POSITIVE_INFINITY;\n\n  /**\n   * If the Cesium render loop is being blocked.\n   * @type {boolean}\n   * @private\n   */\n  this.blockCesiumRendering_ = false;\n\n  /**\n   * If the warmup routine is active.\n   * @type {boolean}\n   * @private\n   */\n  this.warmingUp_ = false;\n\n  /**\n   * @type {ol.Feature}\n   * @private\n   */\n  this.trackedFeature_ = null;\n\n  /**\n   * @type {Cesium.Entity}\n   * @private\n   */\n  this.trackedEntity_ = null;\n\n  /**\n   * @type {Cesium.EntityView}\n   * @private\n   */\n  this.entityView_ = null;\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.needTrackedEntityUpdate_ = false;\n\n  /**\n   * @type {!Cesium.BoundingSphere}\n   */\n  this.boundingSphereScratch_ = new Cesium.BoundingSphere();\n\n  const eventHelper = new Cesium.EventHelper();\n  eventHelper.add(this.scene_.postRender, exports.prototype.updateTrackedEntity_, this);\n\n  // Cesium has a mechanism to prevent the camera to go under the terrain.\n  // Unfortunately, it is only active when all the terrain has been loaded, which:\n  // - does not prevent the camera to sink under terrain anymore;\n  // - introduce a jumping effect once all terrain has been loaded and the position of the camera is finally fixed.\n  // The property below enables a workaround found in the Camptocamp Cesium fork.\n  // See also https://github.com/AnalyticalGraphicsInc/cesium/issues/5999.\n  Cesium.Camera.enableSuspendTerrainAdjustment = false;\n};\n\n\nObject.defineProperties(exports.prototype, {\n  'trackedFeature': {\n    'get': /** @this {olcs.OLCesium} */ function() {\n      return this.trackedFeature_;\n    },\n    'set': /** @this {olcs.OLCesium} */ function(feature) {\n      if (this.trackedFeature_ !== feature) {\n\n        const scene = this.scene_;\n\n        //Stop tracking\n        if (!feature || !feature.getGeometry()) {\n          this.needTrackedEntityUpdate_ = false;\n          scene.screenSpaceCameraController.enableTilt = true;\n\n          if (this.trackedEntity_) {\n            this.dataSourceDisplay_.defaultDataSource.entities.remove(this.trackedEntity_);\n          }\n          this.trackedEntity_ = null;\n          this.trackedFeature_ = null;\n          this.entityView_ = null;\n          scene.camera.lookAtTransform(Cesium.Matrix4.IDENTITY);\n          return;\n        }\n\n        this.trackedFeature_ = feature;\n\n        //We can't start tracking immediately, so we set a flag and start tracking\n        //when the bounding sphere is ready (most likely next frame).\n        this.needTrackedEntityUpdate_ = true;\n\n        const to4326Transform = this.to4326Transform_;\n        const toCesiumPosition = function() {\n          const geometry = feature.getGeometry();\n          googAsserts.assertInstanceof(geometry, olGeomPoint);\n          const coo = geometry.getCoordinates();\n          const coo4326 = to4326Transform(coo, undefined, coo.length);\n          return olcsCore.ol4326CoordinateToCesiumCartesian(coo4326);\n        };\n\n        // Create an invisible point entity for tracking.\n        // It is independant from the primitive/geometry created by the vector synchronizer.\n        const options = {\n          'position': new Cesium.CallbackProperty((time, result) => toCesiumPosition(), false),\n          'point': {\n            'pixelSize': 1,\n            'color': Cesium.Color.TRANSPARENT\n          }\n        };\n\n        this.trackedEntity_ = this.dataSourceDisplay_.defaultDataSource.entities.add(options);\n      }\n    }\n  }\n});\n\n\n/**\n * Render the Cesium scene.\n * @private\n */\nexports.prototype.render_ = function() {\n  // if a call to `requestAnimationFrame` is pending, cancel it\n  if (this.renderId_ !== undefined) {\n    cancelAnimationFrame(this.renderId_);\n    this.renderId_ = undefined;\n  }\n\n  // only render if Cesium is enabled/warming and rendering hasn't been blocked\n  if ((this.enabled_ || this.warmingUp_) && !this.blockCesiumRendering_) {\n    this.renderId_ = requestAnimationFrame(this.onAnimationFrame_.bind(this));\n  }\n};\n\n\n/**\n * Callback for `requestAnimationFrame`.\n * @param {number} frameTime The frame time, from `performance.now()`.\n * @private\n */\nexports.prototype.onAnimationFrame_ = function(frameTime) {\n  this.renderId_ = undefined;\n\n  // check if a frame was rendered within the target frame rate\n  const interval = 1000.0 / this.targetFrameRate_;\n  const delta = frameTime - this.lastFrameTime_;\n  if (delta < interval) {\n    // too soon, don't render yet\n    this.render_();\n    return;\n  }\n\n  // time to render a frame, save the time\n  this.lastFrameTime_ = frameTime;\n\n  const julianDate = this.time_();\n  this.scene_.initializeFrame();\n  this.handleResize_();\n  this.dataSourceDisplay_.update(julianDate);\n\n  // Update tracked entity\n  if (this.entityView_) {\n    const trackedEntity = this.trackedEntity_;\n    const trackedState = this.dataSourceDisplay_.getBoundingSphere(trackedEntity, false, this.boundingSphereScratch_);\n    if (trackedState === Cesium.BoundingSphereState.DONE) {\n      this.boundingSphereScratch_.radius = 1; // a radius of 1 is enough for tracking points\n      this.entityView_.update(julianDate, this.boundingSphereScratch_);\n    }\n  }\n\n  this.scene_.render(julianDate);\n  this.camera_.checkCameraChange();\n\n  // request the next render call after this one completes to ensure the browser doesn't get backed up\n  this.render_();\n};\n\n\n/**\n * @private\n */\nexports.prototype.updateTrackedEntity_ = function() {\n  if (!this.needTrackedEntityUpdate_) {\n    return;\n  }\n\n  const trackedEntity = this.trackedEntity_;\n  const scene = this.scene_;\n\n  const state = this.dataSourceDisplay_.getBoundingSphere(trackedEntity, false, this.boundingSphereScratch_);\n  if (state === Cesium.BoundingSphereState.PENDING) {\n    return;\n  }\n\n  scene.screenSpaceCameraController.enableTilt = false;\n\n  const bs = state !== Cesium.BoundingSphereState.FAILED ? this.boundingSphereScratch_ : undefined;\n  if (bs) {\n    bs.radius = 1;\n  }\n  this.entityView_ = new Cesium.EntityView(trackedEntity, scene, scene.mapProjection.ellipsoid);\n  this.entityView_.update(this.time_(), bs);\n  this.needTrackedEntityUpdate_ = false;\n};\n\n\n/**\n * @private\n */\nexports.prototype.handleResize_ = function() {\n  let width = this.canvas_.clientWidth;\n  let height = this.canvas_.clientHeight;\n\n  if (width === 0 | height === 0) {\n    // The canvas DOM element is not ready yet.\n    return;\n  }\n\n  if (width === this.canvasClientWidth_ &&\n      height === this.canvasClientHeight_ &&\n      !this.resolutionScaleChanged_) {\n    return;\n  }\n\n  let resolutionScale = this.resolutionScale_;\n  if (!olcsUtil.supportsImageRenderingPixelated()) {\n    resolutionScale *= window.devicePixelRatio || 1.0;\n  }\n  this.resolutionScaleChanged_ = false;\n\n  this.canvasClientWidth_ = width;\n  this.canvasClientHeight_ = height;\n\n  width *= resolutionScale;\n  height *= resolutionScale;\n\n  this.canvas_.width = width;\n  this.canvas_.height = height;\n  this.scene_.camera.frustum.aspectRatio = width / height;\n};\n\n\n/**\n * @return {!olcs.Camera}\n * @api\n */\nexports.prototype.getCamera = function() {\n  return this.camera_;\n};\n\n\n/**\n * @return {!ol.Map}\n * @api\n */\nexports.prototype.getOlMap = function() {\n  return this.map_;\n};\n\n/**\n * @return {!ol.View}\n * @api\n */\nexports.prototype.getOlView = function() {\n  const view = this.map_.getView();\n  googAsserts.assert(view);\n  return view;\n};\n\n/**\n * @return {!Cesium.Scene}\n * @api\n */\nexports.prototype.getCesiumScene = function() {\n  return this.scene_;\n};\n\n\n/**\n * @return {!Cesium.DataSourceCollection}\n * @api\n */\nexports.prototype.getDataSources = function() {\n  return this.dataSourceCollection_;\n};\n\n\n/**\n * @return {!Cesium.DataSourceDisplay}\n * @api\n */\nexports.prototype.getDataSourceDisplay = function() {\n  return this.dataSourceDisplay_;\n};\n\n\n/**\n * @return {boolean}\n * @api\n */\nexports.prototype.getEnabled = function() {\n  return this.enabled_;\n};\n\n\n/**\n * Enables/disables the Cesium.\n * This modifies the visibility style of the container element.\n * @param {boolean} enable\n * @api\n */\nexports.prototype.setEnabled = function(enable) {\n  if (this.enabled_ === enable) {\n    return;\n  }\n  this.enabled_ = enable;\n\n  // some Cesium operations are operating with canvas.clientWidth,\n  // so we can't remove it from DOM or even make display:none;\n  this.container_.style.visibility = this.enabled_ ? 'visible' : 'hidden';\n  let interactions;\n  if (this.enabled_) {\n    this.throwOnUnitializedMap_();\n    if (this.isOverMap_) {\n      interactions = this.map_.getInteractions();\n      interactions.forEach(function(el, i, arr) {\n        this.pausedInteractions_.push(el);\n      }, this);\n      interactions.clear();\n\n      const rootGroup = this.map_.getLayerGroup();\n      if (rootGroup.getVisible()) {\n        this.hiddenRootGroup_ = rootGroup;\n        this.hiddenRootGroup_.setVisible(false);\n      }\n\n      this.map_.getOverlayContainer().classList.add('olcs-hideoverlay');\n      this.map_.getOverlayContainerStopEvent().classList.add('olcs-hideoverlay');\n    }\n\n    this.camera_.readFromView();\n    this.render_();\n  } else {\n    if (this.isOverMap_) {\n      interactions = this.map_.getInteractions();\n      this.pausedInteractions_.forEach((interaction) => {\n        interactions.push(interaction);\n      });\n      this.pausedInteractions_.length = 0;\n      this.map_.getOverlayContainer().classList.remove('olcs-hideoverlay');\n      this.map_.getOverlayContainerStopEvent().classList.remove('olcs-hideoverlay');\n      if (this.hiddenRootGroup_) {\n        this.hiddenRootGroup_.setVisible(true);\n        this.hiddenRootGroup_ = null;\n      }\n    }\n\n    this.camera_.updateView();\n  }\n};\n\n\n/**\n * Preload Cesium so that it is ready when transitioning from 2D to 3D.\n * @param {number} height Target height of the camera\n * @param {number} timeout Milliseconds after which the warming will stop\n * @api\n*/\nexports.prototype.warmUp = function(height, timeout) {\n  if (this.enabled_) {\n    // already enabled\n    return;\n  }\n  this.throwOnUnitializedMap_();\n  this.camera_.readFromView();\n  const ellipsoid = this.globe_.ellipsoid;\n  const csCamera = this.scene_.camera;\n  const position = ellipsoid.cartesianToCartographic(csCamera.position);\n  if (position.height < height) {\n    position.height = height;\n    csCamera.position = ellipsoid.cartographicToCartesian(position);\n  }\n\n  this.warmingUp_ = true;\n  this.render_();\n\n  setTimeout(() => {\n    this.warmingUp_ = false;\n  }, timeout);\n};\n\n\n/**\n * Block Cesium rendering to save resources.\n * @param {boolean} block True to block.\n * @api\n*/\nexports.prototype.setBlockCesiumRendering = function(block) {\n  if (this.blockCesiumRendering_ !== block) {\n    this.blockCesiumRendering_ = block;\n\n    // reset the render loop\n    this.render_();\n  }\n};\n\n\n/**\n * Render the globe only when necessary in order to save resources.\n * Experimental.\n * @api\n */\nexports.prototype.enableAutoRenderLoop = function() {\n  if (!this.autoRenderLoop_) {\n    this.autoRenderLoop_ = new olcsAutoRenderLoop(this, false);\n  }\n};\n\n\n/**\n * Get the autorender loop.\n * @return {?olcs.AutoRenderLoop}\n * @api\n*/\nexports.prototype.getAutoRenderLoop = function() {\n  return this.autoRenderLoop_;\n};\n\n\n/**\n * The 3D Cesium globe is rendered in a canvas with two different dimensions:\n * clientWidth and clientHeight which are the dimension on the screen and\n * width and height which are the dimensions of the drawing buffer.\n *\n * By using a resolution scale lower than 1.0, it is possible to render the\n * globe in a buffer smaller than the canvas client dimensions and improve\n * performance, at the cost of quality.\n *\n * Pixel ratio should also be taken into account; by default, a device with\n * pixel ratio of 2.0 will have a buffer surface 4 times bigger than the client\n * surface.\n *\n * @param {number} value\n * @this {olcs.OLCesium}\n * @api\n */\nexports.prototype.setResolutionScale = function(value) {\n  value = Math.max(0, value);\n  if (value !== this.resolutionScale_) {\n    this.resolutionScale_ = Math.max(0, value);\n    this.resolutionScaleChanged_ = true;\n    if (this.autoRenderLoop_) {\n      this.autoRenderLoop_.restartRenderLoop();\n    }\n  }\n};\n\n\n/**\n * Set the target frame rate for the renderer. Set to `Number.POSITIVE_INFINITY`\n * to render as quickly as possible.\n * @param {number} value The frame rate, in frames per second.\n * @api\n */\nexports.prototype.setTargetFrameRate = function(value) {\n  if (this.targetFrameRate_ !== value) {\n    this.targetFrameRate_ = value;\n\n    // reset the render loop\n    this.render_();\n  }\n};\n\n\n/**\n * Check if OpenLayers map is not properly initialized.\n * @private\n */\nexports.prototype.throwOnUnitializedMap_ = function() {\n  const map = this.map_;\n  const view = map.getView();\n  const center = view.getCenter();\n  if (!view.isDef() || isNaN(center[0]) || isNaN(center[1])) {\n    throw new Error(`The OpenLayers map is not properly initialized: ${center} / ${view.getResolution()}`);\n  }\n};\n\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/OLCesium.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nimport olcsContribLazyLoader from '../contrib/LazyLoader.js';\nimport olcsOLCesium from '../OLCesium.js';\nimport olcsCore from '../core.js';\nimport olMath from 'ol/math';\nimport olObservable from 'ol/Observable';\nimport googAsserts from 'goog/asserts';\n\nconst exports = class extends olObservable {\n  /**\n   * @param {string} cesiumUrl\n   * @param {olcsx.contrib.ManagerOptions} options\n   * @api\n   */\n  constructor(cesiumUrl, {map, cameraExtentInRadians} = {}) {\n\n    super();\n\n    /**\n     * @type {string}\n     * @private\n     */\n    this.cesiumUrl_ = cesiumUrl;\n\n    /**\n     * @type {ol.Map}\n     * @protected\n     */\n    this.map = map;\n\n    /**\n     * @type {ol.Extent}\n     * @protected\n     */\n    this.cameraExtentInRadians = cameraExtentInRadians || null;\n\n    /**\n     * @private\n     * @type {Cesium.BoundingSphere}\n     */\n    this.boundingSphere_;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.blockLimiter_ = false;\n\n    /**\n     * @type {Promise.<olcs.OLCesium>}\n     * @private\n     */\n    this.promise_;\n\n    /**\n     * @type {olcs.OLCesium}\n     * @protected\n     */\n    this.ol3d;\n\n\n    /**\n     * @const {number} Tilt angle in radians\n     * @private\n     */\n    this.cesiumInitialTilt_ = olMath.toRadians(50);\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.fogDensity = 0.0001;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.fogSSEFactor = 25;\n\n    /**\n     * Limit the minimum distance to the terrain to 2m.\n     * @protected\n     * @type {number}\n     */\n    this.minimumZoomDistance = 2;\n\n    /**\n     * Limit the maximum distance to the earth to 10'000km.\n     * @protected\n     * @type {number}\n     */\n    this.maximumZoomDistance = 10000000;\n\n    // when closer to 3000m, restrict the available positions harder\n    /**\n     * @protected\n     * @param {number} height\n     */\n    this.limitCameraToBoundingSphereRatio = height => (height > 3000 ? 9 : 3);\n  }\n\n\n  /**\n   * @return {Promise.<olcs.OLCesium>}\n   */\n  load() {\n    if (!this.promise_) {\n      const cesiumLazyLoader = new olcsContribLazyLoader(this.cesiumUrl_);\n      this.promise_ = cesiumLazyLoader.load().then(() => this.onCesiumLoaded());\n    }\n    return this.promise_;\n  }\n\n\n  /**\n   * @protected\n   * @return {olcs.OLCesium}\n   */\n  onCesiumLoaded() {\n    if (this.cameraExtentInRadians) {\n      const rect = new Cesium.Rectangle(...this.cameraExtentInRadians);\n      // Set the fly home rectangle\n      Cesium.Camera.DEFAULT_VIEW_RECTANGLE = rect;\n      this.boundingSphere_ = Cesium.BoundingSphere.fromRectangle3D(rect, Cesium.Ellipsoid.WGS84, 300); // lux mean height is 300m\n    }\n\n    this.ol3d = this.instantiateOLCesium();\n    const scene = this.ol3d.getCesiumScene();\n    this.configureForUsability(scene);\n    this.configureForPerformance(scene);\n    this.dispatchEvent('load');\n    return this.ol3d;\n  }\n\n\n  /**\n   * Application code should override this method.\n   * @return {olcs.OLCesium}\n   */\n  instantiateOLCesium() {\n    googAsserts.assert(this.map);\n    const ol3d = new olcsOLCesium({map: this.map});\n    const scene = ol3d.getCesiumScene();\n    const terrainProvider = new Cesium.CesiumTerrainProvider({\n      url: '//assets.agi.com/stk-terrain/world'\n    });\n    scene.terrainProvider = terrainProvider;\n    return ol3d;\n  }\n\n\n  /**\n   * @param {!Cesium.Scene} scene The scene, passed as parameter for convenience.\n   * @protected\n   */\n  configureForPerformance(scene) {\n    const fog = scene.fog;\n    fog.enabled = true;\n    fog.density = this.fogDensity;\n    fog.screenSpaceErrorFactor = this.fogSSEFactor;\n  }\n\n\n  /**\n   * @param {!Cesium.Scene} scene The scene, passed as parameter for convenience.\n   * @protected\n   */\n  configureForUsability(scene) {\n    const sscController = scene.screenSpaceCameraController;\n    sscController.minimumZoomDistance = this.minimumZoomDistance;\n    sscController.maximumZoomDistance = this.maximumZoomDistance;\n\n    // Do not see through the terrain. Seeing through the terrain does not make\n    // sense anyway, except for debugging\n    scene.globe.depthTestAgainstTerrain = true;\n\n    // Use white instead of the black default colour for the globe when tiles are missing\n    scene.globe.baseColor = Cesium.Color.WHITE;\n    scene.backgroundColor = Cesium.Color.WHITE;\n\n    if (this.boundingSphere_) {\n      scene.postRender.addEventListener(this.limitCameraToBoundingSphere.bind(this), scene);\n    }\n    // Stop rendering Cesium when there is nothing to do. This drastically reduces CPU/GPU consumption.\n    this.ol3d.enableAutoRenderLoop();\n  }\n\n\n  /**\n   * Constrain the camera so that it stays close to the bounding sphere of the map extent.\n   * Near the ground the allowed distance is shorter.\n   * @protected\n   */\n  limitCameraToBoundingSphere() {\n    if (this.boundingSphere_ && !this.blockLimiter_) {\n      const scene = this.ol3d.getCesiumScene();\n      const camera = scene.camera;\n      const position = camera.position;\n      const carto = Cesium.Cartographic.fromCartesian(position);\n      const ratio = this.limitCameraToBoundingSphereRatio(carto.height);\n      if (Cesium.Cartesian3.distance(this.boundingSphere_.center, position) > this.boundingSphere_.radius * ratio) {\n        const currentlyFlying = camera.flying;\n        if (currentlyFlying === true) {\n          // There is a flying property and its value is true\n          return;\n        } else {\n          this.blockLimiter_ = true;\n          const unblockLimiter = () => this.blockLimiter_ = false;\n          camera.flyToBoundingSphere(this.boundingSphere_, {\n            complete: unblockLimiter,\n            cancel: unblockLimiter\n          });\n        }\n      }\n    }\n  }\n\n\n  /**\n   * Enable or disable ol3d with a default animation.\n   * @export\n   * @return {Promise<undefined>}\n   */\n  toggle3d() {\n    return this.load().then((/** @const {!olcs.OLCesium} */ ol3d) => {\n      const is3DCurrentlyEnabled = ol3d.getEnabled();\n      const scene = ol3d.getCesiumScene();\n      if (is3DCurrentlyEnabled) {\n        // Disable 3D\n        googAsserts.assert(this.map);\n        return olcsCore.resetToNorthZenith(this.map, scene).then(() => {\n          ol3d.setEnabled(false);\n          this.dispatchEvent('toggle');\n        });\n      } else {\n        // Enable 3D\n        ol3d.setEnabled(true);\n        this.dispatchEvent('toggle');\n        return olcsCore.rotateAroundBottomCenter(scene, this.cesiumInitialTilt_);\n      }\n    });\n  }\n\n\n  /**\n   * Enable ol3d with a view built from parameters.\n   *\n   * @export\n   * @param {number} lon\n   * @param {number} lat\n   * @param {number} elevation\n   * @param {number} headingDeg Heading value in degrees.\n   * @param {number} pitchDeg Pitch value in degrees.\n   * @returns {Promise<undefined>}\n   */\n  set3dWithView(lon, lat, elevation, headingDeg, pitchDeg) {\n    return this.load().then((/** @const {!olcs.OLCesium} */ ol3d) => {\n      const is3DCurrentlyEnabled = ol3d.getEnabled();\n      const scene = ol3d.getCesiumScene();\n      const camera = scene.camera;\n      const destination = Cesium.Cartesian3.fromDegrees(lon, lat, elevation);\n      const heading = Cesium.Math.toRadians(headingDeg);\n      const pitch = Cesium.Math.toRadians(pitchDeg);\n      const roll = 0;\n      const orientation = {heading, pitch, roll};\n\n      if (!is3DCurrentlyEnabled) {\n        ol3d.setEnabled(true);\n        this.dispatchEvent('toggle');\n      }\n\n      camera.setView({\n        destination,\n        orientation\n      });\n    });\n  }\n\n\n  /**\n   * @export\n   * @return {boolean}\n   */\n  is3dEnabled() {\n    return !!this.ol3d && this.ol3d.getEnabled();\n  }\n\n\n  /**\n   * @return {number}\n   */\n  getHeading() {\n    return this.map ? this.map.getView().getRotation() || 0 : 0;\n  }\n\n\n  /**\n   * @return {number|undefined}\n   */\n  getTiltOnGlobe() {\n    const scene = this.ol3d.getCesiumScene();\n    const tiltOnGlobe = olcsCore.computeSignedTiltAngleOnGlobe(scene);\n    return -tiltOnGlobe;\n  }\n\n\n  /**\n   * @param {number} angle\n   */\n  setHeading(angle) {\n    const scene = this.ol3d.getCesiumScene();\n    const bottom = olcsCore.pickBottomPoint(scene);\n    if (bottom) {\n      olcsCore.setHeadingUsingBottomCenter(scene, angle, bottom);\n    }\n  }\n\n  /**\n   * @export\n   * @return {olcs.OLCesium}\n   */\n  getOl3d() {\n    return this.ol3d;\n  }\n\n  /**\n   * @export\n   * @return {!ol.View}\n   */\n  getOlView() {\n    const view = this.map.getView();\n    googAsserts.assert(view);\n    return view;\n  }\n\n  /**\n   * @export\n   * @return {Cesium.Matrix4}\n   */\n  getCesiumViewMatrix() {\n    return this.ol3d.getCesiumScene().camera.viewMatrix;\n  }\n\n  /**\n   * @export\n   * @return {!Cesium.Scene}\n   */\n  getCesiumScene() {\n    return this.ol3d.getCesiumScene();\n  }\n\n  /**\n   * @export\n   * @param {!Cesium.Rectangle} rectangle\n   * @param {number=} offset in meters\n   * @return {Promise<undefined>}\n   */\n  flyToRectangle(rectangle, offset = 0) {\n    const camera = this.getCesiumScene().camera;\n    const destination = camera.getRectangleCameraCoordinates(rectangle);\n\n    const mag = Cesium.Cartesian3.magnitude(destination) + offset;\n    Cesium.Cartesian3.normalize(destination, destination);\n    Cesium.Cartesian3.multiplyByScalar(destination, mag, destination);\n\n    return new Promise((resolve, reject) => {\n      if (!this.cameraExtentInRadians) {\n        reject();\n        return;\n      }\n\n      camera.flyTo({\n        destination,\n        complete: () => resolve(),\n        cancel: () => reject(),\n        endTransform: Cesium.Matrix4.IDENTITY\n      });\n    });\n  }\n\n  /**\n   * @protected\n   * @return {Cesium.Rectangle|undefined}\n   */\n  getCameraExtentRectangle() {\n    if (this.cameraExtentInRadians) {\n      return new Cesium.Rectangle(...this.cameraExtentInRadians);\n    }\n  }\n};\n\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/contrib/Manager.js\n// module id = null\n// module chunks = ","/**\n * @module ol/source/XYZ\n */\nimport {inherits} from '../index.js';\nimport TileImage from '../source/TileImage.js';\nimport _ol_tilegrid_ from '../tilegrid.js';\n\n/**\n * @classdesc\n * Layer source for tile data with URLs in a set XYZ format that are\n * defined in a URL template. By default, this follows the widely-used\n * Google grid where `x` 0 and `y` 0 are in the top left. Grids like\n * TMS where `x` 0 and `y` 0 are in the bottom left can be used by\n * using the `{-y}` placeholder in the URL template, so long as the\n * source does not have a custom tile grid. In this case,\n * {@link ol.source.TileImage} can be used with a `tileUrlFunction`\n * such as:\n *\n *  tileUrlFunction: function(coordinate) {\n *    return 'http://mapserver.com/' + coordinate[0] + '/' +\n *        coordinate[1] + '/' + coordinate[2] + '.png';\n *    }\n *\n *\n * @constructor\n * @extends {ol.source.TileImage}\n * @param {olx.source.XYZOptions=} opt_options XYZ options.\n * @api\n */\nconst XYZ = function(opt_options) {\n  const options = opt_options || {};\n  const projection = options.projection !== undefined ?\n    options.projection : 'EPSG:3857';\n\n  const tileGrid = options.tileGrid !== undefined ? options.tileGrid :\n    _ol_tilegrid_.createXYZ({\n      extent: _ol_tilegrid_.extentFromProjection(projection),\n      maxZoom: options.maxZoom,\n      minZoom: options.minZoom,\n      tileSize: options.tileSize\n    });\n\n  TileImage.call(this, {\n    attributions: options.attributions,\n    cacheSize: options.cacheSize,\n    crossOrigin: options.crossOrigin,\n    opaque: options.opaque,\n    projection: projection,\n    reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n    tileGrid: tileGrid,\n    tileLoadFunction: options.tileLoadFunction,\n    tilePixelRatio: options.tilePixelRatio,\n    tileUrlFunction: options.tileUrlFunction,\n    url: options.url,\n    urls: options.urls,\n    wrapX: options.wrapX !== undefined ? options.wrapX : true,\n    transition: options.transition\n  });\n\n};\n\ninherits(XYZ, TileImage);\nexport default XYZ;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/XYZ.js\n// module id = 6\n// module chunks = 0 1 2 3 4 5 6 8 9 10 11 12 13 14 15 17 18 19 20 22 23 24 25 26 27 28"],"sourceRoot":""}