!function(c){function e(e){for(var t,o,n=e[0],i=e[1],r=e[2],a=0,l=[];a<n.length;a++)o=n[a],u[o]&&l.push(u[o][0]),u[o]=0;for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&(c[t]=i[t]);for(g&&g(e);l.length;)l.shift()();return h.push.apply(h,r||[]),s()}function s(){for(var e,t=0;t<h.length;t++){for(var o=h[t],n=!0,i=1;i<o.length;i++){var r=o[i];0!==u[r]&&(n=!1)}n&&(h.splice(t--,1),e=a(a.s=o[0]))}return e}var o={},u={27:0},h=[];function a(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return c[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.m=c,a.c=o,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(o,n,function(e){return t[e]}.bind(null,n));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var t=window.webpackJsonp=window.webpackJsonp||[],n=t.push.bind(t);t.push=e,t=t.slice();for(var i=0;i<t.length;i++)e(t[i]);var g=n;h.push([484,0]),s()}({484:function(e,t,o){o(52),o(53),e.exports=o(541)},485:function(e,t){},541:function(e,t,o){"use strict";o.r(t);o(485);var s=o(18),i=o(26),r=o(17),a=o(31),l=o(73),c=o(14),u=o(35),h=o(36),n=o(19),g=o(1),p=o(181),_=o(225),f=o(72),d=o(2),y=o(15),v=o(296),w=o(28),b=angular.module("ngeoMobileGeolocation",[p.a.module.name,_.a.module.name]);b.GeolocationEventType={ERROR:"mobile-geolocation-error"},b.directive_=function(){return{restrict:"A",scope:{getMobileMapFn:"&ngeoMobileGeolocationMap",getMobileGeolocationOptionsFn:"&ngeoMobileGeolocationOptions"},controller:"ngeoGeolocationMobileController"}},b.directive("ngeoMobileGeolocation",b.directive_),b.Controller_=function(o,e,n,t,i){var r=this;e.on("click",this.toggleTracking.bind(this));var a=o.getMobileMapFn();g.a.assertInstanceof(a,s.a),this.$scope_=o,this.map_=a;var l=o.getMobileGeolocationOptionsFn()||{};g.a.assertObject(l),this.notification_=i,this.featureOverlay_=t.getFeatureOverlay(),this.geolocation_=new v.a({projection:a.getView().getProjection(),trackingOptions:{enableHighAccuracy:!0}}),l.autorotate&&this.autorotateListener(),this.geolocation_.on("error",function(e){var t;switch(this.untrack_(),e.code){case 1:t=n.getString("User denied the request for Geolocation.");break;case 2:t=n.getString("Location information is unavailable.");break;case 3:t=n.getString("The request to get user location timed out.");break;default:t=n.getString("Geolocation: An unknown error occurred.")}this.notification_.error(t),o.$emit(b.GeolocationEventType.ERROR,e)},this),this.positionFeature_=new y.a,l.positionFeatureStyle&&this.positionFeature_.setStyle(l.positionFeatureStyle),this.accuracyFeature_=new y.a,l.accuracyFeatureStyle&&this.accuracyFeature_.setStyle(l.accuracyFeatureStyle),this.zoom_=l.zoom,this.follow_=!1,this.viewChangedByMe_=!1,d.a(this.geolocation_,"change:accuracyGeometry",function(){r.accuracyFeature_.setGeometry(r.geolocation_.getAccuracyGeometry()),r.setPosition_()}),d.a(this.geolocation_,"change:position",function(){r.setPosition_()});var c=a.getView();d.a(c,"change:center",this.handleViewChange_,this),d.a(c,"change:resolution",this.handleViewChange_,this)},b.Controller_.$inject=["$scope","$element","gettextCatalog","ngeoFeatureOverlayMgr","ngeoNotification"],b.Controller_.prototype.toggleTracking=function(){if(this.geolocation_.getTracking()){var e=this.geolocation_.getPosition();if(void 0===e)return this.untrack_(),void this.$scope_.$emit(b.GeolocationEventType.ERROR,null);g.a.assert(void 0!==e);var t=this.map_.getView().getCenter();Math.abs(e[0]-t[0])+Math.abs(e[1]-t[1])<2?this.untrack_():(this.untrack_(),this.track_())}else this.track_()},b.Controller_.prototype.track_=function(){this.featureOverlay_.addFeature(this.positionFeature_),this.featureOverlay_.addFeature(this.accuracyFeature_),this.follow_=!0,this.geolocation_.setTracking(!0)},b.Controller_.prototype.untrack_=function(){this.featureOverlay_.clear(),this.follow_=!1,this.geolocation_.setTracking(!1),this.notification_.clear()},b.Controller_.prototype.setPosition_=function(){var e=this.geolocation_.getPosition(),t=new w.a(e);this.positionFeature_.setGeometry(t);var o=this.accuracyFeature_.getGeometry();if(this.follow_){if(this.viewChangedByMe_=!0,void 0!==this.zoom_)this.map_.getView().setCenter(e),this.map_.getView().setZoom(this.zoom_);else if(o){var n=this.map_.getSize();this.map_.getView().fit(o,n)}this.viewChangedByMe_=!1}},b.Controller_.prototype.handleViewChange_=function(e){this.follow_&&!this.viewChangedByMe_&&(this.follow_=!1)},b.Controller_.prototype.autorotateListener=function(){var t=this,o=0;window.hasOwnProperty("ondeviceorientationabsolute")?window.addEventListener("deviceorientationabsolute",function(e){o=t.handleRotate_(e.alpha,o)},!0):window.hasOwnProperty("ondeviceorientation")?window.addEventListener("deviceorientation",function(e){o=e.webkitCompassHeading?t.handleRotate_(-e.webkitCompassHeading,o):t.handleRotate_(e.alpha-270,o)},!0):console.error("Orientation is not supported on this device")},b.Controller_.prototype.handleRotate_=function(e,t){if(this.geolocation_.getTracking()&&.2<Math.abs(e-t)){var o=(t=e)*Math.PI/180;this.map_.getView().animate({rotation:o,duration:350,easing:f.d})}return t},b.controller("ngeoGeolocationMobileController",b.Controller_);var m=b,M={},C=angular.module("app",["gettext",m.name,n.a.name]);M.MainController=function(e,t){var o=new c.c({image:new l.a({radius:6,fill:new u.a({color:"rgba(230, 100, 100, 1)"}),stroke:new h.a({color:"rgba(230, 40, 40, 1)",width:2})})}),n=new c.c({fill:new u.a({color:"rgba(100, 100, 230, 0.3)"}),stroke:new h.a({color:"rgba(40, 40, 230, 1)",width:2})});this.mobileGeolocationOptions={positionFeatureStyle:o,accuracyFeatureStyle:n,zoom:17,autorotate:!0},this.map=new s.a({layers:[new r.a({source:new a.b})],view:new i.a({center:[0,0],zoom:4})}),t.init(this.map)},M.MainController.$inject=["$scope","ngeoFeatureOverlayMgr"],C.controller("MainController",M.MainController);t.default=M}});
//# sourceMappingURL=mobilegeolocation.7431a4.js.map