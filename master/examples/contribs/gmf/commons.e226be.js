(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[0],[function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"c",function(){return i});r.d(t,"d",function(){return u});r.d(t,"e",function(){return a});r.d(t,"g",function(){return l});r.d(t,"f",function(){return c});r.d(t,"r",function(){return f});r.d(t,"h",function(){return h});r.d(t,"i",function(){return d});r.d(t,"n",function(){return p});r.d(t,"l",function(){return v});r.d(t,"m",function(){return g});r.d(t,"k",function(){return m});r.d(t,"j",function(){return _});r.d(t,"p",function(){return y});r.d(t,"b",function(){return b});r.d(t,"o",function(){return w});r.d(t,"q",function(){return S});r.d(t,"s",function(){return C});r.d(t,"t",function(){return O});r.d(t,"u",function(){return T});var o=r(8);var n=document.implementation.createDocument("","",null);var i="http://www.w3.org/2001/XMLSchema-instance";function u(e,t){return n.createElementNS(e,t)}function a(e,t){return s(e,t,[]).join("")}function s(e,t,r){if(e.nodeType==Node.CDATA_SECTION_NODE||e.nodeType==Node.TEXT_NODE){if(t){r.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,""))}else{r.push(e.nodeValue)}}else{var n;for(n=e.firstChild;n;n=n.nextSibling){s(n,t,r)}}return r}function l(e){return"documentElement"in e}function c(e,t,r){return e.getAttributeNS(t,r)||""}function f(e){return(new DOMParser).parseFromString(e,"application/xml")}function h(i,a){return function(e,t){var r=i.call(a!==undefined?a:this,e,t);if(r!==undefined){var n=t[t.length-1];Object(o["c"])(n,r)}}}function d(i,a){return function(e,t){var r=i.call(a!==undefined?a:this,e,t);if(r!==undefined){var n=t[t.length-1];n.push(r)}}}function p(n,i){return function(e,t){var r=n.call(i!==undefined?i:this,e,t);if(r!==undefined){t[t.length-1]=r}}}function v(o,s,l){return function(e,t){var r=o.call(l!==undefined?l:this,e,t);if(r!==undefined){var n=t[t.length-1];var i=s!==undefined?s:e.localName;var a;if(i in n){a=n[i]}else{a=n[i]=[]}a.push(r)}}}function g(a,o,s){return function(e,t){var r=a.call(s!==undefined?s:this,e,t);if(r!==undefined){var n=t[t.length-1];var i=o!==undefined?o:e.localName;n[i]=r}}}function m(a,o){return function(e,t,r){a.call(o!==undefined?o:this,e,t,r);var n=r[r.length-1];var i=n.node;i.appendChild(e)}}function _(i,e){var a,o;return function(e,t,r){if(a===undefined){a={};var n={};n[e.localName]=i;a[e.namespaceURI]=n;o=y(e.localName)}x(a,o,t,r)}}function y(e,s){var l=e;return function(e,t,r){var n=t[t.length-1];var i=n.node;var a=l;if(a===undefined){a=r}var o=s!==undefined?s:i.namespaceURI;return u(o,a)}}var b=y();function w(e,t){var r=t.length;var n=new Array(r);for(var i=0;i<r;++i){n[i]=e[t[i]]}return n}function S(e,t,r){var n=r!==undefined?r:{};var i,a;for(i=0,a=e.length;i<a;++i){n[e[i]]=t}return n}function C(e,t,r,n){var i;for(i=t.firstElementChild;i;i=i.nextElementSibling){var a=e[i.namespaceURI];if(a!==undefined){var o=a[i.localName];if(o!==undefined){o.call(n,i,r)}}}}function O(e,t,r,n,i){n.push(e);C(t,r,n,i);return n.pop()}function x(e,t,r,n,i,a){var o=(i!==undefined?i:r).length;var s,l;for(var u=0;u<o;++u){s=r[u];if(s!==undefined){l=t.call(a!==undefined?a:this,s,n,i!==undefined?i[u]:undefined);if(l!==undefined){e[l.namespaceURI][l.localName].call(a,l,s,n)}}}}function T(e,t,r,n,i,a,o){i.push(e);x(t,r,n,i,a,o);return i.pop()}},function(e,t,r){"use strict";var n={};n.assert=function(e,t,r){return e};n.assertNumber=function(e,t,r){return e};n.assertString=function(e,t,r){return e};n.assertFunction=function(e,t,r){return e};n.assertObject=function(e,t,r){return e};n.assertArray=function(e,t,r){return e};n.assertBoolean=function(e,t,r){return e};n.assertElement=function(e,t,r){return e};n.assertInstanceof=function(e,t,r,n){return e};n.assertObjectPrototypeIsIntact=function(){};t["a"]=n},function(e,t,r){"use strict";r.d(t,"a",function(){return i});r.d(t,"b",function(){return a});r.d(t,"c",function(){return h});r.d(t,"e",function(){return d});r.d(t,"d",function(){return p});var o=r(9);function l(i){var e=function e(t){var r=i.listener;var n=i.bindTo||i.target;if(i.callOnce){d(i)}return r.call(n,t)};i.boundListener=e;return e}function u(e,t,r,n){var i;for(var a=0,o=e.length;a<o;++a){i=e[a];if(i.listener===t&&i.bindTo===r){if(n){i.deleteIndex=a}return i}}return undefined}function s(e,t){var r=c(e);return r?r[t]:undefined}function c(e,t){var r=e.ol_lm;if(!r&&t){r=e.ol_lm={}}return r}function f(e){delete e.ol_lm}function n(e,t){var r=s(e,t);if(r){for(var n=0,i=r.length;n<i;++n){e.removeEventListener(t,r[n].boundListener);Object(o["b"])(r[n])}r.length=0;var a=c(e);if(a){delete a[t];if(Object.keys(a).length===0){f(e)}}}}function i(e,t,r,n,i){var a=c(e,true);var o=a[t];if(!o){o=a[t]=[]}var s=u(o,r,n,false);if(s){if(!i){s.callOnce=false}}else{s={bindTo:n,callOnce:!!i,listener:r,target:e,type:t};e.addEventListener(t,l(s));o.push(s)}return s}function a(e,t,r,n){return i(e,t,r,n,true)}function h(e,t,r,n){var i=s(e,t);if(i){var a=u(i,r,n,true);if(a){d(a)}}}function d(e){if(e&&e.target){e.target.removeEventListener(e.type,e.boundListener);var t=s(e.target,e.type);if(t){var r="deleteIndex"in e?e.deleteIndex:t.indexOf(e);if(r!==-1){t.splice(r,1)}if(t.length===0){n(e.target,e.type)}}Object(o["b"])(e)}}function p(e){var t=c(e);if(t){for(var r in t){n(e,r)}}}},function(e,t,r){"use strict";r.d(t,"b",function(){return a});r.d(t,"c",function(){return s});r.d(t,"d",function(){return l});r.d(t,"e",function(){return u});r.d(t,"f",function(){return c});r.d(t,"g",function(){return f});r.d(t,"h",function(){return h});r.d(t,"i",function(){return _});r.d(t,"j",function(){return d});r.d(t,"k",function(){return C});r.d(t,"l",function(){return p});r.d(t,"m",function(){return v});r.d(t,"n",function(){return g});r.d(t,"o",function(){return y});r.d(t,"p",function(){return w});r.d(t,"q",function(){return S});r.d(t,"r",function(){return O});r.d(t,"s",function(){return T});r.d(t,"t",function(){return A});r.d(t,"u",function(){return k});r.d(t,"v",function(){return j});r.d(t,"w",function(){return I});r.d(t,"x",function(){return D});r.d(t,"y",function(){return P});r.d(t,"z",function(){return L});r.d(t,"A",function(){return N});r.d(t,"B",function(){return F});r.d(t,"C",function(){return H});r.d(t,"D",function(){return W});r.d(t,"E",function(){return Y});r.d(t,"F",function(){return V});r.d(t,"H",function(){return q});r.d(t,"I",function(){return z});r.d(t,"J",function(){return B});r.d(t,"G",function(){return K});r.d(t,"a",function(){return X});var n=r(25);var i=r(242);var m=r(110);function a(e){var t=d();for(var r=0,n=e.length;r<n;++r){O(t,e[r])}return t}function o(e,t,r){var n=Math.min.apply(null,e);var i=Math.min.apply(null,t);var a=Math.max.apply(null,e);var o=Math.max.apply(null,t);return C(n,i,a,o,r)}function s(e,t,r){if(r){r[0]=e[0]-t;r[1]=e[1]-t;r[2]=e[2]+t;r[3]=e[3]+t;return r}else{return[e[0]-t,e[1]-t,e[2]+t,e[3]+t]}}function l(e,t){if(t){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];return t}else{return e.slice()}}function u(e,t,r){var n,i;if(t<e[0]){n=e[0]-t}else if(e[2]<t){n=t-e[2]}else{n=0}if(r<e[1]){i=e[1]-r}else if(e[3]<r){i=r-e[3]}else{i=0}return n*n+i*i}function c(e,t){return h(e,t[0],t[1])}function f(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]}function h(e,t,r){return e[0]<=t&&t<=e[2]&&e[1]<=r&&r<=e[3]}function _(e,t){var r=e[0];var n=e[1];var i=e[2];var a=e[3];var o=t[0];var s=t[1];var l=m["a"].UNKNOWN;if(o<r){l=l|m["a"].LEFT}else if(o>i){l=l|m["a"].RIGHT}if(s<n){l=l|m["a"].BELOW}else if(s>a){l=l|m["a"].ABOVE}if(l===m["a"].UNKNOWN){l=m["a"].INTERSECTING}return l}function d(){return[Infinity,Infinity,-Infinity,-Infinity]}function C(e,t,r,n,i){if(i){i[0]=e;i[1]=t;i[2]=r;i[3]=n;return i}else{return[e,t,r,n]}}function p(e){return C(Infinity,Infinity,-Infinity,-Infinity,e)}function v(e,t){var r=e[0];var n=e[1];return C(r,n,r,n,t)}function g(e,t){var r=p(t);return x(r,e)}function y(e,t,r,n,i){var a=p(i);return T(a,e,t,r,n)}function b(e,t){var r=p(t);return E(r,e)}function w(e,t){return e[0]==t[0]&&e[2]==t[2]&&e[1]==t[1]&&e[3]==t[3]}function S(e,t){if(t[0]<e[0]){e[0]=t[0]}if(t[2]>e[2]){e[2]=t[2]}if(t[1]<e[1]){e[1]=t[1]}if(t[3]>e[3]){e[3]=t[3]}return e}function O(e,t){if(t[0]<e[0]){e[0]=t[0]}if(t[0]>e[2]){e[2]=t[0]}if(t[1]<e[1]){e[1]=t[1]}if(t[1]>e[3]){e[3]=t[1]}}function x(e,t){for(var r=0,n=t.length;r<n;++r){O(e,t[r])}return e}function T(e,t,r,n,i){for(;r<n;r+=i){M(e,t[r],t[r+1])}return e}function E(e,t){for(var r=0,n=t.length;r<n;++r){x(e,t[r])}return e}function M(e,t,r){e[0]=Math.min(e[0],t);e[1]=Math.min(e[1],r);e[2]=Math.max(e[2],t);e[3]=Math.max(e[3],r)}function A(e,t,r){var n;n=t.call(r,j(e));if(n){return n}n=t.call(r,I(e));if(n){return n}n=t.call(r,W(e));if(n){return n}n=t.call(r,H(e));if(n){return n}return false}function k(e){var t=0;if(!q(e)){t=Y(e)*N(e)}return t}function j(e){return[e[0],e[1]]}function I(e){return[e[2],e[1]]}function D(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]}function P(e,t){var r;if(t===i["a"].BOTTOM_LEFT){r=j(e)}else if(t===i["a"].BOTTOM_RIGHT){r=I(e)}else if(t===i["a"].TOP_LEFT){r=H(e)}else if(t===i["a"].TOP_RIGHT){r=W(e)}else{Object(n["a"])(false,13)}return r}function R(e,t){var r=Math.min(e[0],t[0]);var n=Math.min(e[1],t[1]);var i=Math.max(e[2],t[2]);var a=Math.max(e[3],t[3]);return(i-r)*(a-n)}function L(e,t,r,n,i){var a=t*n[0]/2;var o=t*n[1]/2;var s=Math.cos(r);var l=Math.sin(r);var u=a*s;var c=a*l;var f=o*s;var h=o*l;var d=e[0];var p=e[1];var v=d-u+h;var g=d-u-h;var m=d+u-h;var _=d+u+h;var y=p-c-f;var b=p-c+f;var w=p+c+f;var S=p+c-f;return C(Math.min(v,g,m,_),Math.min(y,b,w,S),Math.max(v,g,m,_),Math.max(y,b,w,S),i)}function N(e){return e[3]-e[1]}function $(e,t){var r=F(e,t);return k(r)}function F(e,t,r){var n=r?r:d();if(V(e,t)){if(e[0]>t[0]){n[0]=e[0]}else{n[0]=t[0]}if(e[1]>t[1]){n[1]=e[1]}else{n[1]=t[1]}if(e[2]<t[2]){n[2]=e[2]}else{n[2]=t[2]}if(e[3]<t[3]){n[3]=e[3]}else{n[3]=t[3]}}else{p(n)}return n}function G(e){return Y(e)+N(e)}function U(e){return[e[2]-e[0],e[3]-e[1]]}function H(e){return[e[0],e[3]]}function W(e){return[e[2],e[3]]}function Y(e){return e[2]-e[0]}function V(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}function q(e){return e[2]<e[0]||e[3]<e[1]}function z(e,t){if(t){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];return t}else{return e}}function B(e,t){var r=(e[2]-e[0])/2*(t-1);var n=(e[3]-e[1])/2*(t-1);e[0]-=r;e[2]+=r;e[1]-=n;e[3]+=n}function K(e,t,r){var n=false;var i=_(e,t);var a=_(e,r);if(i===m["a"].INTERSECTING||a===m["a"].INTERSECTING){n=true}else{var o=e[0];var s=e[1];var l=e[2];var u=e[3];var c=t[0];var f=t[1];var h=r[0];var d=r[1];var p=(d-f)/(h-c);var v,g;if(!!(a&m["a"].ABOVE)&&!(i&m["a"].ABOVE)){v=h-(d-u)/p;n=v>=o&&v<=l}if(!n&&!!(a&m["a"].RIGHT)&&!(i&m["a"].RIGHT)){g=d-(h-l)*p;n=g>=s&&g<=u}if(!n&&!!(a&m["a"].BELOW)&&!(i&m["a"].BELOW)){v=h-(d-s)/p;n=v>=o&&v<=l}if(!n&&!!(a&m["a"].LEFT)&&!(i&m["a"].LEFT)){g=d-(h-o)*p;n=g>=s&&g<=u}}return n}function X(e,t,r){var n=[e[0],e[1],e[0],e[3],e[2],e[1],e[2],e[3]];t(n,n,2);var i=[n[0],n[2],n[4],n[6]];var a=[n[1],n[3],n[5],n[7]];return o(i,a,r)}},function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"b",function(){return o});r.d(t,"c",function(){return s});r.d(t,"d",function(){return l});r.d(t,"e",function(){return u});r.d(t,"f",function(){return c});r.d(t,"g",function(){return f});r.d(t,"h",function(){return h});r.d(t,"i",function(){return d});r.d(t,"j",function(){return p});r.d(t,"k",function(){return v});r.d(t,"l",function(){return g});r.d(t,"m",function(){return m});r.d(t,"n",function(){return _});var i=r(0);var a=r(139);function n(e){var t=Object(i["e"])(e,false);return o(t)}function o(e){var t=/^\s*(true|1)|(false|0)\s*$/.exec(e);if(t){return t[1]!==undefined||false}else{return undefined}}function s(e){var t=Object(i["e"])(e,false);var r=Date.parse(t);return isNaN(r)?undefined:r/1e3}function l(e){var t=Object(i["e"])(e,false);return u(t)}function u(e){var t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(e);if(t){return parseFloat(t[1])}else{return undefined}}function c(e){var t=Object(i["e"])(e,false);return f(t)}function f(e){var t=/^\s*(\d+)\s*$/.exec(e);if(t){return parseInt(t[1],10)}else{return undefined}}function h(e){return Object(i["e"])(e,false).trim()}function d(e,t){_(e,t?"1":"0")}function p(e,t){e.appendChild(i["a"].createCDATASection(t))}function v(e,t){var r=new Date(t*1e3);var n=r.getUTCFullYear()+"-"+Object(a["b"])(r.getUTCMonth()+1,2)+"-"+Object(a["b"])(r.getUTCDate(),2)+"T"+Object(a["b"])(r.getUTCHours(),2)+":"+Object(a["b"])(r.getUTCMinutes(),2)+":"+Object(a["b"])(r.getUTCSeconds(),2)+"Z";e.appendChild(i["a"].createTextNode(n))}function g(e,t){var r=t.toPrecision();e.appendChild(i["a"].createTextNode(r))}function m(e,t){var r=t.toString();e.appendChild(i["a"].createTextNode(r))}function _(e,t){e.appendChild(i["a"].createTextNode(t))}},function(e,t,r){"use strict";r.d(t,"b",function(){return n});r.d(t,"d",function(){return i});r.d(t,"c",function(){return o});r.d(t,"a",function(){return s});function n(){return function(){throw new Error("Unimplemented abstract method.")}()}function i(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e}var a=0;function o(e){return e.ol_uid||(e.ol_uid=String(++a))}var s="5.3.0"},function(e,t,r){"use strict";r.d(t,"c",function(){return a});r.d(t,"h",function(){return o});r.d(t,"i",function(){return s});r.d(t,"k",function(){return l});r.d(t,"m",function(){return u});r.d(t,"d",function(){return c});r.d(t,"j",function(){return f});r.d(t,"l",function(){return h});r.d(t,"e",function(){return d});r.d(t,"f",function(){return p});r.d(t,"g",function(){return v});r.d(t,"r",function(){return g});r.d(t,"p",function(){return m});r.d(t,"n",function(){return _});r.d(t,"o",function(){return y});r.d(t,"q",function(){return b});r.d(t,"s",function(){return w});r.d(t,"a",function(){return C});r.d(t,"b",function(){return O});r.d(t,"t",function(){return T});var n=r(68);var i=r(122);var a=/\d/;var o=/\d\d/;var s=/\d{3}/;var l=/\d{4}/;var u=/[+-]?\d{6}/;var c=/\d\d?/;var f=/\d\d\d\d?/;var h=/\d\d\d\d\d\d?/;var d=/\d{1,3}/;var p=/\d{1,4}/;var v=/[+-]?\d{1,6}/;var g=/\d+/;var m=/[+-]?\d+/;var _=/Z|[+-]\d\d:?\d\d/gi;var y=/Z|[+-]\d\d(?::?\d\d)?/gi;var b=/[+-]?\d+(\.\d{1,3})?/;var w=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;var S={};function C(e,r,n){S[e]=Object(i["a"])(r)?r:function(e,t){return e&&n?n:r}}function O(e,t){if(!Object(n["a"])(S,e)){return new RegExp(x(e))}return S[e](t._strict,t._locale)}function x(e){return T(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,r,n,i){return t||r||n||i}))}function T(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},function(e,t,r){"use strict";t["a"]={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"}},function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"i",function(){return u});r.d(t,"f",function(){return i});r.d(t,"h",function(){return a});r.d(t,"k",function(){return o});r.d(t,"c",function(){return s});r.d(t,"j",function(){return l});r.d(t,"d",function(){return c});r.d(t,"b",function(){return f});r.d(t,"l",function(){return h});r.d(t,"e",function(){return d});r.d(t,"g",function(){return p});function n(e,t,r){var n,i;var a=r||u;var o=0;var s=e.length;var l=false;while(o<s){n=o+(s-o>>1);i=+a(e[n],t);if(i<0){o=n+1}else{s=n;l=!i}}return l?o:~o}function u(e,t){return e>t?1:e<t?-1:0}function i(e,t){return e.indexOf(t)>=0}function a(e,t,r){var n=e.length;if(e[0]<=t){return 0}else if(t<=e[n-1]){return n-1}else{var i;if(r>0){for(i=1;i<n;++i){if(e[i]<t){return i-1}}}else if(r<0){for(i=1;i<n;++i){if(e[i]<=t){return i}}}else{for(i=1;i<n;++i){if(e[i]==t){return i}else if(e[i]<t){if(e[i-1]-t<t-e[i]){return i-1}else{return i}}}}return n-1}}function o(e,t,r){while(t<r){var n=e[t];e[t]=e[r];e[r]=n;++t;--r}}function s(e,t){var r=Array.isArray(t)?t:[t];var n=r.length;for(var i=0;i<n;i++){e[e.length]=r[i]}}function l(e,t){var r=e.indexOf(t);var n=r>-1;if(n){e.splice(r,1)}return n}function c(e,t){var r=e.length>>>0;var n;for(var i=0;i<r;i++){n=e[i];if(t(n,i,e)){return n}}return null}function f(e,t){var r=e.length;if(r!==t.length){return false}for(var n=0;n<r;n++){if(e[n]!==t[n]){return false}}return true}function h(e,r){var t=e.length;var n=Array(e.length);var i;for(i=0;i<t;i++){n[i]={index:i,value:e[i]}}n.sort(function(e,t){return r(e.value,t.value)||e.index-t.index});for(i=0;i<e.length;i++){e[i]=n[i].value}}function d(r,n){var i;var e=!r.every(function(e,t){i=t;return!n(e,t,r)});return e?i:-1}function p(n,e,i){var a=e||u;return n.every(function(e,t){if(t===0){return true}var r=a(n[t-1],e);return!(r>0||i&&r===0)})}},function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"b",function(){return i});r.d(t,"c",function(){return a});r.d(t,"d",function(){return o});var n=typeof Object.assign==="function"?Object.assign:function(e,t){var r=arguments;if(e===undefined||e===null){throw new TypeError("Cannot convert undefined or null to object")}var n=Object(e);for(var i=1,a=arguments.length;i<a;++i){var o=r[i];if(o!==undefined&&o!==null){for(var s in o){if(o.hasOwnProperty(s)){n[s]=o[s]}}}}return n};function i(e){for(var t in e){delete e[t]}}function a(e){var t=[];for(var r in e){t.push(e[r])}return t}function o(e){var t;for(t in e){return false}return!t}},function(e,t,r){"use strict";var h=r(220);var i=r(3);var a=r(15);var n=r(178);var d=r(79);var u=6378137;var c=Math.PI*u;var o=[-c,-c,c,c];var s=[-180,-85,180,85];var l=function(t){function e(e){t.call(this,{code:e,units:d["b"].METERS,extent:o,global:true,worldExtent:s,getPointResolution:function e(t,r){return t/Object(a["b"])(r[1]/u)}})}if(t)e.__proto__=t;e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;return e}(n["a"]);var f=[new l("EPSG:3857"),new l("EPSG:102100"),new l("EPSG:102113"),new l("EPSG:900913"),new l("urn:ogc:def:crs:EPSG:6.18:3:3857"),new l("urn:ogc:def:crs:EPSG::3857"),new l("http://www.opengis.net/gml/srs/epsg.xml#3857")];function p(e,t,r){var n=e.length;var i=r>1?r:2;var a=t;if(a===undefined){if(i>2){a=e.slice()}else{a=new Array(n)}}var o=c;for(var s=0;s<n;s+=i){a[s]=o*e[s]/180;var l=u*Math.log(Math.tan(Math.PI*(e[s+1]+90)/360));if(l>o){l=o}else if(l<-o){l=-o}a[s+1]=l}return a}function v(e,t,r){var n=e.length;var i=r>1?r:2;var a=t;if(a===undefined){if(i>2){a=e.slice()}else{a=new Array(n)}}for(var o=0;o<n;o+=i){a[o]=180*e[o]/c;a[o+1]=360*Math.atan(Math.exp(e[o+1]/u))/Math.PI-90}return a}var g=6378137;var m=[-180,-90,180,90];var _=Math.PI*g/180;var y=function(r){function e(e,t){r.call(this,{code:e,units:d["b"].DEGREES,extent:m,axisOrientation:t,global:true,metersPerUnit:_,worldExtent:m})}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;return e}(n["a"]);var b=[new y("CRS:84"),new y("EPSG:4326","neu"),new y("urn:ogc:def:crs:EPSG::4326","neu"),new y("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new y("urn:ogc:def:crs:OGC:1.3:CRS84"),new y("urn:ogc:def:crs:OGC:2:84"),new y("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new y("urn:x-ogc:def:crs:EPSG:4326","neu")];var w={};function S(){w={}}function C(e){return w[e]||null}function O(e,t){w[e]=t}var x=r(176);r.d(t,"k",function(){return E});r.d(t,"c",function(){return M});r.d(t,"g",function(){return k});r.d(t,"h",function(){return j});r.d(t,"b",function(){return I});r.d(t,"d",function(){return R});r.d(t,"a",function(){return N});r.d(t,"f",function(){return $});r.d(t,"l",function(){return F});r.d(t,"e",function(){return G});r.d(t,"j",function(){return U});r.d(t,"i",function(){return H});r.d(t,"m",function(){return W});r.d(t,"n",function(){return Y});function T(e,t,r){var n;if(t!==undefined){for(var i=0,a=e.length;i<a;++i){t[i]=e[i]}n=t}else{n=e.slice()}return n}function E(e,t,r){if(t!==undefined&&e!==t){for(var n=0,i=e.length;n<i;++n){t[n]=e[n]}e=t}return e}function M(e){O(e.getCode(),e);Object(x["a"])(e,e,T)}function A(e){e.forEach(M)}function k(e){return typeof e==="string"?C(e):e||null}function j(e,t,r,n){e=k(e);var i;var a=e.getPointResolutionFunc();if(a){i=a(t,r)}else{var o=e.getUnits();if(o==d["b"].DEGREES&&!n||n==d["b"].DEGREES){i=t}else{var s=U(e,k("EPSG:4326"));var l=[r[0]-t/2,r[1],r[0]+t/2,r[1],r[0],r[1]-t/2,r[0],r[1]+t/2];l=s(l,l,2);var u=Object(h["b"])(l.slice(0,2),l.slice(2,4));var c=Object(h["b"])(l.slice(4,6),l.slice(6,8));i=(u+c)/2;var f=n?d["a"][n]:e.getMetersPerUnit();if(f!==undefined){i/=f}}}return i}function I(e){A(e);e.forEach(function(t){e.forEach(function(e){if(t!==e){Object(x["a"])(t,e,T)}})})}function D(e,r,n,i){e.forEach(function(t){r.forEach(function(e){Object(x["a"])(t,e,n);Object(x["a"])(e,t,i)})})}function P(){S();Object(x["b"])()}function R(e,t){if(!e){return k(t)}else if(typeof e==="string"){return k(e)}else{return e}}function L(u){return function(e,t,r){var n=e.length;var i=r!==undefined?r:2;var a=t!==undefined?t:new Array(n);for(var o=0;o<n;o+=i){var s=u([e[o],e[o+1]]);a[o]=s[0];a[o+1]=s[1];for(var l=i-1;l>=2;--l){a[o+l]=e[o+l]}}return a}}function N(e,t,r,n){var i=k(e);var a=k(t);Object(x["a"])(i,a,L(r));Object(x["a"])(a,i,L(n))}function $(e,t){return W(e,"EPSG:4326",t!==undefined?t:"EPSG:3857")}function F(e,t){var r=W(e,t!==undefined?t:"EPSG:3857","EPSG:4326");var n=r[0];if(n<-180||n>180){r[0]=Object(a["d"])(n+180,360)-180}return r}function G(e,t){if(e===t){return true}var r=e.getUnits()===t.getUnits();if(e.getCode()===t.getCode()){return r}else{var n=U(e,t);return n===T&&r}}function U(e,t){var r=e.getCode();var n=t.getCode();var i=Object(x["c"])(r,n);if(!i){i=E}return i}function H(e,t){var r=k(e);var n=k(t);return U(r,n)}function W(e,t,r){var n=H(t,r);return n(e,undefined,e.length)}function Y(e,t,r){var n=H(t,r);return Object(i["a"])(e,n)}function V(e,t,r){var n=U(t,r);return n(e)}function q(){I(f);I(b);D(b,f,p,v)}q()},function(e,t,r){"use strict";r.d(t,"d",function(){return n});r.d(t,"a",function(){return f});r.d(t,"b",function(){return h});var i=r(25);var a=r(7);var o=r(66);var s=r(30);var l=r(29);var u=function e(t){var r=t||{};this.geometry_=null;this.geometryFunction_=d;if(r.geometry!==undefined){this.setGeometry(r.geometry)}this.fill_=r.fill!==undefined?r.fill:null;this.image_=r.image!==undefined?r.image:null;this.renderer_=r.renderer!==undefined?r.renderer:null;this.stroke_=r.stroke!==undefined?r.stroke:null;this.text_=r.text!==undefined?r.text:null;this.zIndex_=r.zIndex};u.prototype.clone=function e(){var t=this.getGeometry();if(t&&typeof t==="object"){t=t.clone()}return new u({geometry:t,fill:this.getFill()?this.getFill().clone():undefined,image:this.getImage()?this.getImage().clone():undefined,stroke:this.getStroke()?this.getStroke().clone():undefined,text:this.getText()?this.getText().clone():undefined,zIndex:this.getZIndex()})};u.prototype.getRenderer=function e(){return this.renderer_};u.prototype.setRenderer=function e(t){this.renderer_=t};u.prototype.getGeometry=function e(){return this.geometry_};u.prototype.getGeometryFunction=function e(){return this.geometryFunction_};u.prototype.getFill=function e(){return this.fill_};u.prototype.setFill=function e(t){this.fill_=t};u.prototype.getImage=function e(){return this.image_};u.prototype.setImage=function e(t){this.image_=t};u.prototype.getStroke=function e(){return this.stroke_};u.prototype.setStroke=function e(t){this.stroke_=t};u.prototype.getText=function e(){return this.text_};u.prototype.setText=function e(t){this.text_=t};u.prototype.getZIndex=function e(){return this.zIndex_};u.prototype.setGeometry=function e(t){if(typeof t==="function"){this.geometryFunction_=t}else if(typeof t==="string"){this.geometryFunction_=function(e){return e.get(t)}}else if(!t){this.geometryFunction_=d}else if(t!==undefined){this.geometryFunction_=function(){return t}}this.geometry_=t};u.prototype.setZIndex=function e(t){this.zIndex_=t};function n(e){var t;if(typeof e==="function"){t=e}else{var r;if(Array.isArray(e)){r=e}else{Object(i["a"])(typeof e.getZIndex==="function",41);var n=e;r=[n]}t=function e(){return r}}return t}var c=null;function f(e,t){if(!c){var r=new s["a"]({color:"rgba(255,255,255,0.4)"});var n=new l["a"]({color:"#3399CC",width:1.25});c=[new u({image:new o["a"]({fill:r,stroke:n,radius:5}),fill:r,stroke:n})]}return c}function h(){var e={};var t=[255,255,255,1];var r=[0,153,255,1];var n=3;e[a["a"].POLYGON]=[new u({fill:new s["a"]({color:[255,255,255,.5]})})];e[a["a"].MULTI_POLYGON]=e[a["a"].POLYGON];e[a["a"].LINE_STRING]=[new u({stroke:new l["a"]({color:t,width:n+2})}),new u({stroke:new l["a"]({color:r,width:n})})];e[a["a"].MULTI_LINE_STRING]=e[a["a"].LINE_STRING];e[a["a"].CIRCLE]=e[a["a"].POLYGON].concat(e[a["a"].LINE_STRING]);e[a["a"].POINT]=[new u({image:new o["a"]({radius:n*2,fill:new s["a"]({color:r}),stroke:new l["a"]({color:t,width:n/2})}),zIndex:Infinity})];e[a["a"].MULTI_POINT]=e[a["a"].POINT];e[a["a"].GEOMETRY_COLLECTION]=e[a["a"].POLYGON].concat(e[a["a"].LINE_STRING],e[a["a"].POINT]);return e}function d(e){return e.getGeometry()}t["c"]=u},function(e,t,r){"use strict";t["a"]={CHANGE:"change",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",ERROR:"error",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEOUT:"mouseout",MOUSEUP:"mouseup",MOUSEWHEEL:"mousewheel",MSPOINTERDOWN:"MSPointerDown",RESIZE:"resize",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",WHEEL:"wheel"}},function(e,t,r){"use strict";var n={ANGLE:"a",COLOR:"c",IS_CIRCLE:"l",IS_RECTANGLE:"r",IS_TEXT:"t",NAME:"n",SHOW_LABEL:"b",OPACITY:"o",AZIMUT:"z",SHOW_MEASURE:"m",SIZE:"s",STROKE:"k"};t["a"]=n},function(e,t,r){"use strict";var n=r(25);var a=r(2);var o=r(12);var s=r(50);var i=function(n){function i(e){n.call(this);this.id_=undefined;this.geometryName_="geometry";this.style_=null;this.styleFunction_=undefined;this.geometryChangeKey_=null;Object(a["a"])(this,Object(s["b"])(this.geometryName_),this.handleGeometryChanged_,this);if(e){if(typeof e.getSimplifiedGeometry==="function"){var t=e;this.setGeometry(t)}else{var r=e;this.setProperties(r)}}}if(n)i.__proto__=n;i.prototype=Object.create(n&&n.prototype);i.prototype.constructor=i;i.prototype.clone=function e(){var e=new i(this.getProperties());e.setGeometryName(this.getGeometryName());var t=this.getGeometry();if(t){e.setGeometry(t.clone())}var r=this.getStyle();if(r){e.setStyle(r)}return e};i.prototype.getGeometry=function e(){return this.get(this.geometryName_)};i.prototype.getId=function e(){return this.id_};i.prototype.getGeometryName=function e(){return this.geometryName_};i.prototype.getStyle=function e(){return this.style_};i.prototype.getStyleFunction=function e(){return this.styleFunction_};i.prototype.handleGeometryChange_=function e(){this.changed()};i.prototype.handleGeometryChanged_=function e(){if(this.geometryChangeKey_){Object(a["e"])(this.geometryChangeKey_);this.geometryChangeKey_=null}var t=this.getGeometry();if(t){this.geometryChangeKey_=Object(a["a"])(t,o["a"].CHANGE,this.handleGeometryChange_,this)}this.changed()};i.prototype.setGeometry=function e(t){this.set(this.geometryName_,t)};i.prototype.setStyle=function e(t){this.style_=t;this.styleFunction_=!t?undefined:l(t);this.changed()};i.prototype.setId=function e(t){this.id_=t;this.changed()};i.prototype.setGeometryName=function e(t){Object(a["c"])(this,Object(s["b"])(this.geometryName_),this.handleGeometryChanged_,this);this.geometryName_=t;Object(a["a"])(this,Object(s["b"])(this.geometryName_),this.handleGeometryChanged_,this);this.handleGeometryChanged_()};return i}(s["a"]);function l(e){if(typeof e==="function"){return e}else{var t;if(Array.isArray(e)){t=e}else{Object(n["a"])(typeof e.getZIndex==="function",41);var r=e;t=[r]}return function(){return t}}}t["a"]=i},function(e,t,r){"use strict";r.d(t,"a",function(){return i});r.d(t,"b",function(){return a});r.d(t,"g",function(){return s});r.d(t,"f",function(){return u});r.d(t,"e",function(){return l});r.d(t,"h",function(){return c});r.d(t,"i",function(){return f});r.d(t,"d",function(){return h});r.d(t,"c",function(){return d});var n=r(25);function i(e,t,r){return Math.min(Math.max(e,t),r)}var a=function(){var e;if("cosh"in Math){e=Math.cosh}else{e=function e(t){var r=Math.exp(t);return(r+1/r)/2}}return e}();function o(e){Object(n["a"])(0<e,29);return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function s(e,t,r,n,i,a){var o=i-r;var s=a-n;if(o!==0||s!==0){var l=((e-r)*o+(t-n)*s)/(o*o+s*s);if(l>1){r=i;n=a}else if(l>0){r+=o*l;n+=s*l}}return u(e,t,r,n)}function u(e,t,r,n){var i=r-e;var a=n-t;return i*i+a*a}function l(e){var t=e.length;for(var r=0;r<t;r++){var n=r;var i=Math.abs(e[r][r]);for(var a=r+1;a<t;a++){var o=Math.abs(e[a][r]);if(o>i){i=o;n=a}}if(i===0){return null}var s=e[n];e[n]=e[r];e[r]=s;for(var l=r+1;l<t;l++){var u=-e[l][r]/e[r][r];for(var c=r;c<t+1;c++){if(r==c){e[l][c]=0}else{e[l][c]+=u*e[r][c]}}}}var f=new Array(t);for(var h=t-1;h>=0;h--){f[h]=e[h][t]/e[h][h];for(var d=h-1;d>=0;d--){e[d][t]-=e[d][h]*f[h]}}return f}function c(e){return e*180/Math.PI}function f(e){return e*Math.PI/180}function h(e,t){var r=e%t;return r*t<0?r+t:r}function d(e,t,r){return e+r*(t-e)}},function(e,t,r){"use strict";r.d(t,"c",function(){return s});r.d(t,"b",function(){return l});r.d(t,"d",function(){return u});r.d(t,"e",function(){return c});r.d(t,"f",function(){return f});r.d(t,"g",function(){return h});r.d(t,"i",function(){return d});r.d(t,"k",function(){return p});r.d(t,"l",function(){return g});r.d(t,"m",function(){return m});r.d(t,"j",function(){return _});r.d(t,"h",function(){return y});r.d(t,"o",function(){return b});r.d(t,"a",function(){return O});r.d(t,"p",function(){return T});r.d(t,"q",function(){return E});r.d(t,"s",function(){return M});r.d(t,"r",function(){return A});r.d(t,"n",function(){return k});var v=r(90);var n=r(53);var i=r(9);var a=r(303);var o=r(36);var s="10px sans-serif";var l=[0,0,0,1];var u="round";var c=[];var f=0;var h="round";var d=10;var p=[0,0,0,1];var g="center";var m="middle";var _=[0,0,0,0];var y=1;var b=new a["a"];var w={};var S=null;var C={};var O=function(){var a=60;var o=w;var l="32px ";var u=["monospace","serif"];var c=u.length;var f="wmytzilWMYTZIL@#/&?$%10";var s,h;function d(e){var t=x();for(var r=100;r<=700;r+=300){var n=r+" ";var i=true;for(var a=0;a<c;++a){var o=u[a];t.font=n+l+o;h=t.measureText(f).width;if(e!=o){t.font=n+l+e+","+o;var s=t.measureText(f).width;i=i&&s!=h}}if(i){return true}}return false}function p(){var e=true;for(var t in o){if(o[t]<a){if(d(t)){o[t]=a;Object(i["b"])(C);S=null;b.clear()}else{++o[t];e=false}}}if(e){clearInterval(s);s=undefined}}return function(e){var t=Object(v["f"])(e);if(!t){return}for(var r=0,n=t.length;r<n;++r){var i=t[r];if(!(i in o)){o[i]=a;if(!d(i)){o[i]=0;if(s===undefined){s=setInterval(p,32)}}}}}}();function x(){if(!S){S=Object(n["a"])(1,1)}return S}var T=function(){var r;var n=C;return function(e){var t=n[e];if(t==undefined){if(!r){r=document.createElement("span");r.textContent="M";r.style.margin=r.style.padding="0 !important";r.style.position="absolute !important";r.style.left="-99999px !important"}r.style.font=e;document.body.appendChild(r);t=n[e]=r.offsetHeight;document.body.removeChild(r)}return t}}();function E(e,t){var r=x();if(e!=r.font){r.font=e}return r.measureText(t).width}function M(e,t,r,n){if(t!==0){e.translate(r,n);e.rotate(t);e.translate(-r,-n)}}var A=Object(o["c"])();function k(e,t,r,n,i,a,o,s,l,u,c){var f;if(r!=1){f=e.globalAlpha;e.globalAlpha=f*r}if(t){e.setTransform.apply(e,t)}e.drawImage(n,i,a,o,s,l,u,o*c,s*c);if(f){e.globalAlpha=f}if(t){e.setTransform.apply(e,A)}}},function(e,t,r){"use strict";r.d(t,"i",function(){return n});r.d(t,"e",function(){return i});r.d(t,"a",function(){return a});r.d(t,"b",function(){return o});r.d(t,"d",function(){return s});r.d(t,"f",function(){return l});r.d(t,"c",function(){return u});r.d(t,"g",function(){return c});r.d(t,"h",function(){return f});var n=0;var i=1;var a=2;var o=3;var s=4;var l=5;var u=6;var c=7;var f=8},function(e,t,r){"use strict";r.d(t,"a",function(){return i});r.d(t,"b",function(){return a});var n;function i(){return n.apply(null,arguments)}function a(e){n=e}},function(e,t,r){"use strict";var n={CIRCLE:"Circle",LINE_STRING:"LineString",MULTI_LINE_STRING:"MultiLineString",MULTI_POINT:"MultiPoint",MULTI_POLYGON:"MultiPolygon",POINT:"Point",POLYGON:"Polygon",RECTANGLE:"Rectangle",TEXT:"Text"};t["a"]=n},function(e,t,r){"use strict";r.r(t);var n="http://www.w3.org/1999/xhtml";var i={svg:"http://www.w3.org/2000/svg",xhtml:n,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};var a=function(e){var t=e+="",r=t.indexOf(":");if(r>=0&&(t=e.slice(0,r))!=="xmlns")e=e.slice(r+1);return i.hasOwnProperty(t)?{space:i[t],local:e}:e};function o(r){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===n&&e.documentElement.namespaceURI===n?e.createElement(r):e.createElementNS(t,r)}}function s(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}var l=function(e){var t=a(e);return(t.local?s:o)(t)};function u(){}var f=function(e){return e==null?u:function(){return this.querySelector(e)}};var c=function(e){if(typeof e!=="function")e=f(e);for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i){for(var a=t[i],o=a.length,s=n[i]=new Array(o),l,u,c=0;c<o;++c){if((l=a[c])&&(u=e.call(l,l.__data__,c,a))){if("__data__"in l)u.__data__=l.__data__;s[c]=u}}}return new ze(n,this._parents)};function h(){return[]}var d=function(e){return e==null?h:function(){return this.querySelectorAll(e)}};var p=function(e){if(typeof e!=="function")e=d(e);for(var t=this._groups,r=t.length,n=[],i=[],a=0;a<r;++a){for(var o=t[a],s=o.length,l,u=0;u<s;++u){if(l=o[u]){n.push(e.call(l,l.__data__,u,o));i.push(l)}}}return new ze(n,i)};var v=function e(t){return function(){return this.matches(t)}};if(typeof document!=="undefined"){var g=document.documentElement;if(!g.matches){var m=g.webkitMatchesSelector||g.msMatchesSelector||g.mozMatchesSelector||g.oMatchesSelector;v=function e(t){return function(){return m.call(this,t)}}}}var _=v;var y=function(e){if(typeof e!=="function")e=_(e);for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i){for(var a=t[i],o=a.length,s=n[i]=[],l,u=0;u<o;++u){if((l=a[u])&&e.call(l,l.__data__,u,a)){s.push(l)}}}return new ze(n,this._parents)};var b=function(e){return new Array(e.length)};var w=function(){return new ze(this._enter||this._groups.map(b),this._parents)};function S(e,t){this.ownerDocument=e.ownerDocument;this.namespaceURI=e.namespaceURI;this._next=null;this._parent=e;this.__data__=t}S.prototype={constructor:S,appendChild:function e(t){return this._parent.insertBefore(t,this._next)},insertBefore:function e(t,r){return this._parent.insertBefore(t,r)},querySelector:function e(t){return this._parent.querySelector(t)},querySelectorAll:function e(t){return this._parent.querySelectorAll(t)}};var C=function(e){return function(){return e}};var O="$";function x(e,t,r,n,i,a){var o=0,s,l=t.length,u=a.length;for(;o<u;++o){if(s=t[o]){s.__data__=a[o];n[o]=s}else{r[o]=new S(e,a[o])}}for(;o<l;++o){if(s=t[o]){i[o]=s}}}function T(e,t,r,n,i,a,o){var s,l,u={},c=t.length,f=a.length,h=new Array(c),d;for(s=0;s<c;++s){if(l=t[s]){h[s]=d=O+o.call(l,l.__data__,s,t);if(d in u){i[s]=l}else{u[d]=l}}}for(s=0;s<f;++s){d=O+o.call(e,a[s],s,a);if(l=u[d]){n[s]=l;l.__data__=a[s];u[d]=null}else{r[s]=new S(e,a[s])}}for(s=0;s<c;++s){if((l=t[s])&&u[h[s]]===l){i[s]=l}}}var E=function(e,t){if(!e){d=new Array(this.size()),u=-1;this.each(function(e){d[++u]=e});return d}var r=t?T:x,n=this._parents,i=this._groups;if(typeof e!=="function")e=C(e);for(var a=i.length,o=new Array(a),s=new Array(a),l=new Array(a),u=0;u<a;++u){var c=n[u],f=i[u],h=f.length,d=e.call(c,c&&c.__data__,u,n),p=d.length,v=s[u]=new Array(p),g=o[u]=new Array(p),m=l[u]=new Array(h);r(c,f,v,g,m,d,t);for(var _=0,y=0,b,w;_<p;++_){if(b=v[_]){if(_>=y)y=_+1;while(!(w=g[y])&&++y<p){}b._next=w||null}}}o=new ze(o,n);o._enter=s;o._exit=l;return o};var M=function(){return new ze(this._exit||this._groups.map(b),this._parents)};var A=function(e){for(var t=this._groups,r=e._groups,n=t.length,i=r.length,a=Math.min(n,i),o=new Array(n),s=0;s<a;++s){for(var l=t[s],u=r[s],c=l.length,f=o[s]=new Array(c),h,d=0;d<c;++d){if(h=l[d]||u[d]){f[d]=h}}}for(;s<n;++s){o[s]=t[s]}return new ze(o,this._parents)};var k=function(){for(var e=this._groups,t=-1,r=e.length;++t<r;){for(var n=e[t],i=n.length-1,a=n[i],o;--i>=0;){if(o=n[i]){if(a&&a!==o.nextSibling)a.parentNode.insertBefore(o,a);a=o}}}return this};var j=function(r){if(!r)r=I;function e(e,t){return e&&t?r(e.__data__,t.__data__):!e-!t}for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a){for(var o=t[a],s=o.length,l=i[a]=new Array(s),u,c=0;c<s;++c){if(u=o[c]){l[c]=u}}l.sort(e)}return new ze(i,this._parents).order()};function I(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var D=function(){var e=arguments[0];arguments[0]=this;e.apply(null,arguments);return this};var P=function(){var e=new Array(this.size()),t=-1;this.each(function(){e[++t]=this});return e};var R=function(){for(var e=this._groups,t=0,r=e.length;t<r;++t){for(var n=e[t],i=0,a=n.length;i<a;++i){var o=n[i];if(o)return o}}return null};var L=function(){var e=0;this.each(function(){++e});return e};var N=function(){return!this.node()};var $=function(e){for(var t=this._groups,r=0,n=t.length;r<n;++r){for(var i=t[r],a=0,o=i.length,s;a<o;++a){if(s=i[a])e.call(s,s.__data__,a,i)}}return this};function F(e){return function(){this.removeAttribute(e)}}function G(e){return function(){this.removeAttributeNS(e.space,e.local)}}function U(e,t){return function(){this.setAttribute(e,t)}}function H(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function W(t,r){return function(){var e=r.apply(this,arguments);if(e==null)this.removeAttribute(t);else this.setAttribute(t,e)}}function Y(t,r){return function(){var e=r.apply(this,arguments);if(e==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,e)}}var V=function(e,t){var r=a(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?G:F:typeof t==="function"?r.local?Y:W:r.local?H:U)(r,t))};var q=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView};function z(e){return function(){this.style.removeProperty(e)}}function B(e,t,r){return function(){this.style.setProperty(e,t,r)}}function K(t,r,n){return function(){var e=r.apply(this,arguments);if(e==null)this.style.removeProperty(t);else this.style.setProperty(t,e,n)}}var X=function(e,t,r){return arguments.length>1?this.each((t==null?z:typeof t==="function"?K:B)(e,t,r==null?"":r)):Z(this.node(),e)};function Z(e,t){return e.style.getPropertyValue(t)||q(e).getComputedStyle(e,null).getPropertyValue(t)}function Q(e){return function(){delete this[e]}}function J(e,t){return function(){this[e]=t}}function ee(t,r){return function(){var e=r.apply(this,arguments);if(e==null)delete this[t];else this[t]=e}}var te=function(e,t){return arguments.length>1?this.each((t==null?Q:typeof t==="function"?ee:J)(e,t)):this.node()[e]};function re(e){return e.trim().split(/^|\s+/)}function ne(e){return e.classList||new ie(e)}function ie(e){this._node=e;this._names=re(e.getAttribute("class")||"")}ie.prototype={add:function e(t){var r=this._names.indexOf(t);if(r<0){this._names.push(t);this._node.setAttribute("class",this._names.join(" "))}},remove:function e(t){var r=this._names.indexOf(t);if(r>=0){this._names.splice(r,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function e(t){return this._names.indexOf(t)>=0}};function ae(e,t){var r=ne(e),n=-1,i=t.length;while(++n<i){r.add(t[n])}}function oe(e,t){var r=ne(e),n=-1,i=t.length;while(++n<i){r.remove(t[n])}}function se(e){return function(){ae(this,e)}}function le(e){return function(){oe(this,e)}}function ue(e,t){return function(){(t.apply(this,arguments)?ae:oe)(this,e)}}var ce=function(e,t){var r=re(e+"");if(arguments.length<2){var n=ne(this.node()),i=-1,a=r.length;while(++i<a){if(!n.contains(r[i]))return false}return true}return this.each((typeof t==="function"?ue:t?se:le)(r,t))};function fe(){this.textContent=""}function he(e){return function(){this.textContent=e}}function de(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}var pe=function(e){return arguments.length?this.each(e==null?fe:(typeof e==="function"?de:he)(e)):this.node().textContent};function ve(){this.innerHTML=""}function ge(e){return function(){this.innerHTML=e}}function me(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}var _e=function(e){return arguments.length?this.each(e==null?ve:(typeof e==="function"?me:ge)(e)):this.node().innerHTML};function ye(){if(this.nextSibling)this.parentNode.appendChild(this)}var be=function(){return this.each(ye)};function we(){if(this.previousSibling)this.parentNode.insertBefore(this,this.parentNode.firstChild)}var Se=function(){return this.each(we)};var Ce=function(e){var t=typeof e==="function"?e:l(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})};function Oe(){return null}var xe=function(e,t){var r=typeof e==="function"?e:l(e),n=t==null?Oe:typeof t==="function"?t:f(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})};function Te(){var e=this.parentNode;if(e)e.removeChild(this)}var Ee=function(){return this.each(Te)};function Me(){return this.parentNode.insertBefore(this.cloneNode(false),this.nextSibling)}function Ae(){return this.parentNode.insertBefore(this.cloneNode(true),this.nextSibling)}var ke=function(e){return this.select(e?Ae:Me)};var je=function(e){return arguments.length?this.property("__data__",e):this.node().__data__};var Ie={};var De=null;if(typeof document!=="undefined"){var Pe=document.documentElement;if(!("onmouseenter"in Pe)){Ie={mouseenter:"mouseover",mouseleave:"mouseout"}}}function Re(r,e,t){r=Le(r,e,t);return function(e){var t=e.relatedTarget;if(!t||t!==this&&!(t.compareDocumentPosition(this)&8)){r.call(this,e)}}}function Le(r,n,i){return function(e){var t=De;De=e;try{r.call(this,this.__data__,n,i)}finally{De=t}}}function Ne(e){return e.trim().split(/^|\s+/).map(function(e){var t="",r=e.indexOf(".");if(r>=0)t=e.slice(r+1),e=e.slice(0,r);return{type:e,name:t}})}function $e(a){return function(){var e=this.__on;if(!e)return;for(var t=0,r=-1,n=e.length,i;t<n;++t){if(i=e[t],(!a.type||i.type===a.type)&&i.name===a.name){this.removeEventListener(i.type,i.listener,i.capture)}else{e[++r]=i}}if(++r)e.length=r;else delete this.__on}}function Fe(l,u,c){var f=Ie.hasOwnProperty(l.type)?Re:Le;return function(e,t,r){var n=this.__on,i,a=f(u,t,r);if(n)for(var o=0,s=n.length;o<s;++o){if((i=n[o]).type===l.type&&i.name===l.name){this.removeEventListener(i.type,i.listener,i.capture);this.addEventListener(i.type,i.listener=a,i.capture=c);i.value=u;return}}this.addEventListener(l.type,a,c);i={type:l.type,name:l.name,value:u,listener:a,capture:c};if(!n)this.__on=[i];else n.push(i)}}var Ge=function(e,t,r){var n=Ne(e+""),i,a=n.length,o;if(arguments.length<2){var s=this.node().__on;if(s)for(var l=0,u=s.length,c;l<u;++l){for(i=0,c=s[l];i<a;++i){if((o=n[i]).type===c.type&&o.name===c.name){return c.value}}}return}s=t?Fe:$e;if(r==null)r=false;for(i=0;i<a;++i){this.each(s(n[i],t,r))}return this};function Ue(e,t,r,n){var i=De;e.sourceEvent=De;De=e;try{return t.apply(r,n)}finally{De=i}}function He(e,t,r){var n=q(e),i=n.CustomEvent;if(typeof i==="function"){i=new i(t,r)}else{i=n.document.createEvent("Event");if(r)i.initEvent(t,r.bubbles,r.cancelable),i.detail=r.detail;else i.initEvent(t,false,false)}e.dispatchEvent(i)}function We(e,t){return function(){return He(this,e,t)}}function Ye(e,t){return function(){return He(this,e,t.apply(this,arguments))}}var Ve=function(e,t){return this.each((typeof t==="function"?Ye:We)(e,t))};var qe=[null];function ze(e,t){this._groups=e;this._parents=t}function Be(){return new ze([[document.documentElement]],qe)}ze.prototype=Be.prototype={constructor:ze,select:c,selectAll:p,filter:y,data:E,enter:w,exit:M,merge:A,order:k,sort:j,call:D,nodes:P,node:R,size:L,empty:N,each:$,attr:V,style:X,property:te,classed:ce,text:pe,html:_e,raise:be,lower:Se,append:Ce,insert:xe,remove:Ee,clone:ke,datum:je,on:Ge,dispatch:Ve};var Ke=Be;var Xe=function(e){return typeof e==="string"?new ze([[document.querySelector(e)]],[document.documentElement]):new ze([[e]],qe)};var Ze=function(e){return Xe(l(e).call(document.documentElement))};var Qe=0;function Je(){return new et}function et(){this._="@"+(++Qe).toString(36)}et.prototype=Je.prototype={constructor:et,get:function e(t){var r=this._;while(!(r in t)){if(!(t=t.parentNode))return}return t[r]},set:function e(t,r){return t[this._]=r},remove:function e(t){return this._ in t&&delete t[this._]},toString:function e(){return this._}};var tt=function(){var e=De,t;while(t=e.sourceEvent){e=t}return e};var rt=function(e,t){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var n=r.createSVGPoint();n.x=t.clientX,n.y=t.clientY;n=n.matrixTransform(e.getScreenCTM().inverse());return[n.x,n.y]}var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]};var nt=function(e){var t=tt();if(t.changedTouches)t=t.changedTouches[0];return rt(e,t)};var it=function(e){return typeof e==="string"?new ze([document.querySelectorAll(e)],[document.documentElement]):new ze([e==null?[]:e],qe)};var at=function(e,t,r){if(arguments.length<3)r=t,t=tt().changedTouches;for(var n=0,i=t?t.length:0,a;n<i;++n){if((a=t[n]).identifier===r){return rt(e,a)}}return null};var ot=function(e,t){if(t==null)t=tt().touches;for(var r=0,n=t?t.length:0,i=new Array(n);r<n;++r){i[r]=rt(e,t[r])}return i};r.d(t,"create",function(){return Ze});r.d(t,"creator",function(){return l});r.d(t,"local",function(){return Je});r.d(t,"matcher",function(){return _});r.d(t,"mouse",function(){return nt});r.d(t,"namespace",function(){return a});r.d(t,"namespaces",function(){return i});r.d(t,"clientPoint",function(){return rt});r.d(t,"select",function(){return Xe});r.d(t,"selectAll",function(){return it});r.d(t,"selection",function(){return Ke});r.d(t,"selector",function(){return f});r.d(t,"selectorAll",function(){return d});r.d(t,"style",function(){return Z});r.d(t,"touch",function(){return at});r.d(t,"touches",function(){return ot});r.d(t,"window",function(){return q});r.d(t,"event",function(){return De});r.d(t,"customEvent",function(){return Ue})},function(e,t,r){"use strict";var i=r(3);var a=r(7);var n=r(82);var o=r(133);var u=r(15);var s=function(r){function n(e,t){r.call(this);this.setCoordinates(e,t)}if(r)n.__proto__=r;n.prototype=Object.create(r&&r.prototype);n.prototype.constructor=n;n.prototype.clone=function e(){var t=new n(this.flatCoordinates.slice(),this.layout);return t};n.prototype.closestPointXY=function e(t,r,n,i){var a=this.flatCoordinates;var o=Object(u["f"])(t,r,a[0],a[1]);if(o<i){var s=this.stride;for(var l=0;l<s;++l){n[l]=a[l]}n.length=s;return o}else{return i}};n.prototype.getCoordinates=function e(){return!this.flatCoordinates?[]:this.flatCoordinates.slice()};n.prototype.computeExtent=function e(t){return Object(i["m"])(this.flatCoordinates,t)};n.prototype.getType=function e(){return a["a"].POINT};n.prototype.intersectsExtent=function e(t){return Object(i["h"])(t,this.flatCoordinates[0],this.flatCoordinates[1])};n.prototype.setCoordinates=function e(t,r){this.setLayout(r,t,0);if(!this.flatCoordinates){this.flatCoordinates=[]}this.flatCoordinates.length=Object(o["a"])(this.flatCoordinates,0,t,this.stride);this.changed()};return n}(n["a"]);t["a"]=s},function(e,t,r){"use strict";var v=r(1);var n=r(91);var s=r(5);var i=r(8);var l=r(23);var u=r(113);var c=r(28);var f=function e(t,r,n,i,a,o){u["a"].call(this);this.addBlankBackgroundLayer_=true;if(o.addBlankBackgroundLayer!==undefined){this.addBlankBackgroundLayer_=o.addBlankBackgroundLayer}this.$q_=n;this.$http_=t;this.treeUrl_=undefined;if(r.has("gmfTreeUrl")){this.treeUrl_=r.get("gmfTreeUrl")}this.cacheVersion_="0";if(r.has("cacheVersion")){this.cacheVersion_=r.get("cacheVersion")}this.ngeoLocation_=null;if(r.has("ngeoLocation")){this.ngeoLocation_=r.get("ngeoLocation")}this.layerHelper_=i;this.gettextCatalog=a;this.deferred_=n.defer();this.promise_=this.deferred_.promise;this.loaded=false;this.bgLayerPromise_=null};f.$inject=["$http","$injector","$q","ngeoLayerHelper","gettextCatalog","gmfThemesOptions"];f.$inject=["$http","$injector","$q","ngeoLayerHelper","gettextCatalog","gmfThemesOptions"];s["d"](f,u["a"]);f.findGroupByLayerNodeName=function(e,t){for(var r=0,n=e.length;r<n;r++){var i=e[r];for(var a=0,o=i.children.length;a<o;a++){var s=i.children[a];var l=[];f.getFlatNodes(s,l);if(f.findObjectByName(l,t)){return s}}}return null};f.findGroupByName=function(e,t){for(var r=0,n=e.length;r<n;r++){var i=e[r];for(var a=0,o=i.children.length;a<o;a++){var s=i.children[a];var l=[];f.getFlatInternalNodes(s,l);if(f.findObjectByName(l,t)){return s}}}return null};f.findObjectByName=function(e,t){return i["d"](e,function(e){return e["name"]===t})};f.findThemeByName=function(e,t){return f.findObjectByName(e,t)};f.getFlatInternalNodes=function(e,t){var r=e.children;if(r!==undefined){t.push(e);for(var n=0;n<r.length;n++){f.getFlatInternalNodes(r[n],t)}}};f.getFlatNodes=function(e,t){var r;var n=e.children;if(n!==undefined){for(r=0;r<n.length;r++){f.getFlatNodes(n[r],t)}}else{t.push(e)}};f.prototype.getBgLayers=function(){var r=this;var n=this.gettextCatalog;if(this.bgLayerPromise_){return this.bgLayerPromise_}var h=this.$q_;var d=this.layerHelper_;var i=function t(e,r){r.push(s["c"](e));var n=e.children||[];n.forEach(function(e){t(e,r)})};var p=function e(t,r){r.set("label",t.name);r.set("metadata",t.metadata);r.set("dimensions",t.dimensions);var n=[];i(t,n);r.set("querySourceIds",n);return r};var a=function e(t,r){if(r.type==="WMTS"){var n=r;v["a"].assert(n.url,"Layer URL is required");return d.createWMTSLayerFromCapabilitites(n.url,n.layer||"",n.matrixSet,r.dimensions,n.metadata.customOpenLayersOptions).then(p.bind(null,r)).then(null,function(e){var t='Unable to build layer "'+n.layer+'" from WMTSCapabilities: '+n.url+"\n";t+='OpenLayers error is "'+e["message"];console.error(t);return h.resolve(undefined)})}else if(r.type==="WMS"){var i=r;v["a"].assert(i.ogcServer,"An OGC server is required");var a=t[i.ogcServer];v["a"].assert(a,"The OGC server was not found");v["a"].assert(a.url,"The server URL is required");v["a"].assert(a.imageType,"The server image type is required");var o={STYLES:i.styles};if(r.dimensions){var s=Object.entries(r.dimensions);for(var l=0;l<s.length;l++){var u=s[l],c=u[0],f=u[1];o[c]=f}}return p(r,d.createBasicWMSLayer(a.url,i.layers||"",a.imageType,a.type,undefined,o,a.credential?"use-credentials":"anonymous",i.metadata.customOpenLayersOptions))}v["a"].fail("Unsupported type: "+r.type)};var o=function e(t,n){var r=n.children.map(function(e){return e}).reverse();var i=r.map(a.bind(null,t));return h.all(i).then(function(e){var t;if(e){e=e.filter(function(e){return e});t=new l["a"](e)}var r=d.createBasicGroup(t);p(n,r);return r})};var e=function(r){var e=r.background_layers.map(function(e){var t=e.type;if(t==="WMTS"||t==="WMS"){return a(r.ogcServers,e)}else if(e.children){return o(r.ogcServers,e)}else{return undefined}},this);return h.all(e)}.bind(this);this.bgLayerPromise_=this.promise_.then(e).then(function(e){var t=[];if(r.addBlankBackgroundLayer_){n.getString("blank");t.push(new c["a"]({label:"blank",metadata:{thumbnail:""}}))}e.forEach(function(e){if(e){t.push(e)}});return t});return this.bgLayerPromise_};f.prototype.getThemeObject=function(t){return this.promise_.then(function(e){return f.findThemeByName(e.themes,t)})};f.prototype.getThemesObject=function(){return this.promise_.then(function(e){return e.themes})};f.prototype.getBackgroundLayersObject=function(){v["a"].assert(this.promise_!==null);return this.promise_.then(function(e){return e.background_layers})};f.prototype.getOgcServersObject=function(){v["a"].assert(this.promise_!==null);return this.promise_.then(function(e){return e.ogcServers})};f.prototype.hasEditableLayers=function(){v["a"].assert(this.promise_!==null);return this.promise_.then(this.hasEditableLayers_.bind(this))};f.prototype.hasEditableLayers_=function(e){var r=this;return e.themes.some(function(e){var t=e.children.some(r.hasNodeEditableLayers_.bind(r));return t})};f.prototype.hasNodeEditableLayers_=function(e){if(e.editable){return true}var t=false;var r=e.children;if(r&&r.length){t=r.some(this.hasNodeEditableLayers_.bind(this))}return t};f.getSnappingConfig=function(e){var t=e.metadata&&e.metadata.snappingConfig!==undefined?e.metadata.snappingConfig:null;return t};f.getNodeMaxResolution=function(e){var t=e.metadata;var r=e.maxResolutionHint;if(r===undefined&&t!==undefined){r=t.maxResolution}return r};f.getNodeMinResolution=function(e){var t=e.metadata;var r=e.minResolutionHint;if(r===undefined&&t!==undefined){r=t.minResolution}return r};f.prototype.loadThemes=function(e){var r=this;v["a"].assert(this.treeUrl_,"gmfTreeUrl should be defined.");if(this.loaded){this.deferred_=this.$q_.defer();this.promise_=this.deferred_.promise;this.bgLayerPromise_=null;this.loaded=false}this.$http_.get(this.treeUrl_,{params:e!==undefined?{role:e,cache_version:this.cacheVersion_}:{cache_version:this.cacheVersion_},cache:false,withCredentials:true}).then(function(e){if(e.data.errors.length!=0){var t="The themes contain some errors:\n"+e.data.errors.join("\n");console.error(t);if(r.ngeoLocation_!==null&&r.ngeoLocation_.hasParam("debug")){window.alert(t)}}r.deferred_.resolve(e.data);r.dispatchEvent("change");r.loaded=true},function(e){r.deferred_.reject(e)})};f.NodeType={MIXED_GROUP:"MixedGroup",NOT_MIXED_GROUP:"NotMixedGroup",WMTS:"WMTS",WMS:"WMS"};f.module=angular.module("gmfThemes",[n["a"].module.name]);f.module.value("gmfThemesOptions",{});f.module.service("gmfThemes",f);t["a"]=f},function(e,t,r){"use strict";var o=r(300);var s=r(87);var n=r(50);var i=r(71);var l={LENGTH:"length"};var u=function(r){function e(e,t){r.call(this,e);this.element=t}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;return e}(i["a"]);var a=function(a){function e(e,t){a.call(this);var r=t||{};this.unique_=!!r.unique;this.array_=e?e:[];if(this.unique_){for(var n=0,i=this.array_.length;n<i;++n){this.assertUnique_(this.array_[n],n)}}this.updateLength_()}if(a)e.__proto__=a;e.prototype=Object.create(a&&a.prototype);e.prototype.constructor=e;e.prototype.clear=function e(){while(this.getLength()>0){this.pop()}};e.prototype.extend=function e(t){for(var r=0,n=t.length;r<n;++r){this.push(t[r])}return this};e.prototype.forEach=function e(t){var r=this.array_;for(var n=0,i=r.length;n<i;++n){t(r[n],n,r)}};e.prototype.getArray=function e(){return this.array_};e.prototype.item=function e(t){return this.array_[t]};e.prototype.getLength=function e(){return this.get(l.LENGTH)};e.prototype.insertAt=function e(t,r){if(this.unique_){this.assertUnique_(r)}this.array_.splice(t,0,r);this.updateLength_();this.dispatchEvent(new u(s["a"].ADD,r))};e.prototype.pop=function e(){return this.removeAt(this.getLength()-1)};e.prototype.push=function e(t){if(this.unique_){this.assertUnique_(t)}var r=this.getLength();this.insertAt(r,t);return this.getLength()};e.prototype.remove=function e(t){var r=this.array_;for(var n=0,i=r.length;n<i;++n){if(r[n]===t){return this.removeAt(n)}}return undefined};e.prototype.removeAt=function e(t){var r=this.array_[t];this.array_.splice(t,1);this.updateLength_();this.dispatchEvent(new u(s["a"].REMOVE,r));return r};e.prototype.setAt=function e(t,r){var n=this.getLength();if(t<n){if(this.unique_){this.assertUnique_(r,t)}var i=this.array_[t];this.array_[t]=r;this.dispatchEvent(new u(s["a"].REMOVE,i));this.dispatchEvent(new u(s["a"].ADD,r))}else{for(var a=n;a<t;++a){this.insertAt(a,undefined)}this.insertAt(t,r)}};e.prototype.updateLength_=function e(){this.set(l.LENGTH,this.array_.length)};e.prototype.assertUnique_=function e(t,r){for(var n=0,i=this.array_.length;n<i;++n){if(this.array_[n]===t&&n!==r){throw new o["a"](58)}}};return e}(n["a"]);t["a"]=a},function(e,t,r){"use strict";r.d(t,"e",function(){return s});r.d(t,"d",function(){return l});r.d(t,"a",function(){return u});r.d(t,"c",function(){return h});r.d(t,"b",function(){return d});var a=r(168);var o=r(122);var s=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;var i=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;var n={};var l={};function u(e,t,r,n){var i=n;if(typeof n==="string"){i=function e(){return this[n]()}}if(e){l[e]=i}if(t){l[t[0]]=function(){return Object(a["a"])(i.apply(this,arguments),t[1],t[2])}}if(r){l[r]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)}}}function c(e){if(e.match(/\[[\s\S]/)){return e.replace(/^\[|\]$/g,"")}return e.replace(/\\/g,"")}function f(n){var i=n.match(s),e,a;for(e=0,a=i.length;e<a;e++){if(l[i[e]]){i[e]=l[i[e]]}else{i[e]=c(i[e])}}return function(e){var t="",r;for(r=0;r<a;r++){t+=Object(o["a"])(i[r])?i[r].call(e,n):i[r]}return t}}function h(e,t){if(!e.isValid()){return e.localeData().invalidDate()}t=d(t,e.localeData());n[t]=n[t]||f(t);return n[t](e)}function d(e,t){var r=5;function n(e){return t.longDateFormat(e)||e}i.lastIndex=0;while(r>=0&&i.test(e)){e=e.replace(i,n);i.lastIndex=0;r-=1}return e}},function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r(300);function i(e,t){if(!e){throw new n["a"](t)}}},function(e,t,r){"use strict";t["a"]={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4,ABORT:5}},function(er,tr,e){var rr,nr;(function(e,t){"use strict";if(true&&typeof er.exports==="object"){er.exports=e.document?t(e,true):function(e){if(!e.document){throw new Error("jQuery requires a window with a document")}return t(e)}}else{t(e)}})(typeof window!=="undefined"?window:this,function(O,e){"use strict";var t=[];var x=O.document;var i=Object.getPrototypeOf;var l=t.slice;var v=t.concat;var s=t.push;var a=t.indexOf;var r={};var o=r.toString;var g=r.hasOwnProperty;var u=g.toString;var c=u.call(Object);var m={};var _=function e(t){return typeof t==="function"&&typeof t.nodeType!=="number"};var y=function e(t){return t!=null&&t===t.window};var f={type:true,src:true,noModule:true};function b(e,t,r){t=t||x;var n,i=t.createElement("script");i.text=e;if(r){for(n in f){if(r[n]){i[n]=r[n]}}}t.head.appendChild(i).parentNode.removeChild(i)}function w(e){if(e==null){return e+""}return typeof e==="object"||typeof e==="function"?r[o.call(e)]||"object":typeof e}var n="3.3.1",T=function e(t,r){return new e.fn.init(t,r)},h=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;T.fn=T.prototype={jquery:n,constructor:T,length:0,toArray:function e(){return l.call(this)},get:function e(t){if(t==null){return l.call(this)}return t<0?this[t+this.length]:this[t]},pushStack:function e(t){var r=T.merge(this.constructor(),t);r.prevObject=this;return r},each:function e(t){return T.each(this,t)},map:function e(r){return this.pushStack(T.map(this,function(e,t){return r.call(e,t,e)}))},slice:function e(){return this.pushStack(l.apply(this,arguments))},first:function e(){return this.eq(0)},last:function e(){return this.eq(-1)},eq:function e(t){var r=this.length,n=+t+(t<0?r:0);return this.pushStack(n>=0&&n<r?[this[n]]:[])},end:function e(){return this.prevObject||this.constructor()},push:s,sort:t.sort,splice:t.splice};T.extend=T.fn.extend=function(){var e,t,r,n,i,a,o=arguments[0]||{},s=1,l=arguments.length,u=false;if(typeof o==="boolean"){u=o;o=arguments[s]||{};s++}if(typeof o!=="object"&&!_(o)){o={}}if(s===l){o=this;s--}for(;s<l;s++){if((e=arguments[s])!=null){for(t in e){r=o[t];n=e[t];if(o===n){continue}if(u&&n&&(T.isPlainObject(n)||(i=Array.isArray(n)))){if(i){i=false;a=r&&Array.isArray(r)?r:[]}else{a=r&&T.isPlainObject(r)?r:{}}o[t]=T.extend(u,a,n)}else if(n!==undefined){o[t]=n}}}}return o};T.extend({expando:"jQuery"+(n+Math.random()).replace(/\D/g,""),isReady:true,error:function e(t){throw new Error(t)},noop:function e(){},isPlainObject:function e(t){var r,n;if(!t||o.call(t)!=="[object Object]"){return false}r=i(t);if(!r){return true}n=g.call(r,"constructor")&&r.constructor;return typeof n==="function"&&u.call(n)===c},isEmptyObject:function e(t){var r;for(r in t){return false}return true},globalEval:function e(t){b(t)},each:function e(t,r){var n,i=0;if(d(t)){n=t.length;for(;i<n;i++){if(r.call(t[i],i,t[i])===false){break}}}else{for(i in t){if(r.call(t[i],i,t[i])===false){break}}}return t},trim:function e(t){return t==null?"":(t+"").replace(h,"")},makeArray:function e(t,r){var n=r||[];if(t!=null){if(d(Object(t))){T.merge(n,typeof t==="string"?[t]:t)}else{s.call(n,t)}}return n},inArray:function e(t,r,n){return r==null?-1:a.call(r,t,n)},merge:function e(t,r){var n=+r.length,i=0,a=t.length;for(;i<n;i++){t[a++]=r[i]}t.length=a;return t},grep:function e(t,r,n){var i,a=[],o=0,s=t.length,l=!n;for(;o<s;o++){i=!r(t[o],o);if(i!==l){a.push(t[o])}}return a},map:function e(t,r,n){var i,a,o=0,s=[];if(d(t)){i=t.length;for(;o<i;o++){a=r(t[o],o,n);if(a!=null){s.push(a)}}}else{for(o in t){a=r(t[o],o,n);if(a!=null){s.push(a)}}}return v.apply([],s)},guid:1,support:m});if(typeof Symbol==="function"){T.fn[Symbol.iterator]=t[Symbol.iterator]}T.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){r["[object "+t+"]"]=t.toLowerCase()});function d(e){var t=!!e&&"length"in e&&e.length,r=w(e);if(_(e)||y(e)){return false}return r==="array"||t===0||typeof t==="number"&&t>0&&t-1 in e}var p=function(n){var e,d,w,a,i,p,f,v,S,l,u,C,O,o,x,g,s,c,m,b="sizzle"+1*new Date,_=n.document,T=0,r=0,h=oe(),y=oe(),E=oe(),M=function e(t,r){if(t===r){u=true}return 0},A={}.hasOwnProperty,t=[],k=t.pop,j=t.push,I=t.push,D=t.slice,P=function e(t,r){var n=0,i=t.length;for(;n<i;n++){if(t[n]===r){return n}}return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",$="\\["+L+"*("+N+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+L+"*\\]",F=":("+N+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+$+")*)|"+".*"+")\\)|)",G=new RegExp(L+"+","g"),U=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),H=new RegExp("^"+L+"*,"+L+"*"),W=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),Y=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),V=new RegExp(F),q=new RegExp("^"+N+"$"),z={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N+"|[*])"),ATTR:new RegExp("^"+$),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},B=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,X=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,J=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),ee=function e(t,r,n){var i="0x"+r-65536;return i!==i||n?r:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,i&1023|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,re=function e(t,r){if(r){if(t==="\0"){return"�"}return t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" "}return"\\"+t},ne=function e(){C()},ie=_e(function(e){return e.disabled===true&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{I.apply(t=D.call(_.childNodes),_.childNodes);t[_.childNodes.length].nodeType}catch(e){I={apply:t.length?function(e,t){j.apply(e,D.call(t))}:function(e,t){var r=e.length,n=0;while(e[r++]=t[n++]){}e.length=r-1}}}function ae(e,t,r,n){var i,a,o,s,l,u,c,f=t&&t.ownerDocument,h=t?t.nodeType:9;r=r||[];if(typeof e!=="string"||!e||h!==1&&h!==9&&h!==11){return r}if(!n){if((t?t.ownerDocument||t:_)!==O){C(t)}t=t||O;if(x){if(h!==11&&(l=Z.exec(e))){if(i=l[1]){if(h===9){if(o=t.getElementById(i)){if(o.id===i){r.push(o);return r}}else{return r}}else{if(f&&(o=f.getElementById(i))&&m(t,o)&&o.id===i){r.push(o);return r}}}else if(l[2]){I.apply(r,t.getElementsByTagName(e));return r}else if((i=l[3])&&d.getElementsByClassName&&t.getElementsByClassName){I.apply(r,t.getElementsByClassName(i));return r}}if(d.qsa&&!E[e+" "]&&(!g||!g.test(e))){if(h!==1){f=t;c=e}else if(t.nodeName.toLowerCase()!=="object"){if(s=t.getAttribute("id")){s=s.replace(te,re)}else{t.setAttribute("id",s=b)}u=p(e);a=u.length;while(a--){u[a]="#"+s+" "+me(u[a])}c=u.join(",");f=Q.test(e)&&ve(t.parentNode)||t}if(c){try{I.apply(r,f.querySelectorAll(c));return r}catch(e){}finally{if(s===b){t.removeAttribute("id")}}}}}}return v(e.replace(U,"$1"),t,r,n)}function oe(){var r=[];function n(e,t){if(r.push(e+" ")>w.cacheLength){delete n[r.shift()]}return n[e+" "]=t}return n}function se(e){e[b]=true;return e}function le(e){var t=O.createElement("fieldset");try{return!!e(t)}catch(e){return false}finally{if(t.parentNode){t.parentNode.removeChild(t)}t=null}}function ue(e,t){var r=e.split("|"),n=r.length;while(n--){w.attrHandle[r[n]]=t}}function ce(e,t){var r=t&&e,n=r&&e.nodeType===1&&t.nodeType===1&&e.sourceIndex-t.sourceIndex;if(n){return n}if(r){while(r=r.nextSibling){if(r===t){return-1}}}return e?1:-1}function fe(r){return function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type===r}}function he(r){return function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&e.type===r}}function de(t){return function(e){if("form"in e){if(e.parentNode&&e.disabled===false){if("label"in e){if("label"in e.parentNode){return e.parentNode.disabled===t}else{return e.disabled===t}}return e.isDisabled===t||e.isDisabled!==!t&&ie(e)===t}return e.disabled===t}else if("label"in e){return e.disabled===t}return false}}function pe(o){return se(function(a){a=+a;return se(function(e,t){var r,n=o([],e.length,a),i=n.length;while(i--){if(e[r=n[i]]){e[r]=!(t[r]=e[r])}}})})}function ve(e){return e&&typeof e.getElementsByTagName!=="undefined"&&e}d=ae.support={};i=ae.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":false};C=ae.setDocument=function(e){var t,r,n=e?e.ownerDocument||e:_;if(n===O||n.nodeType!==9||!n.documentElement){return O}O=n;o=O.documentElement;x=!i(O);if(_!==O&&(r=O.defaultView)&&r.top!==r){if(r.addEventListener){r.addEventListener("unload",ne,false)}else if(r.attachEvent){r.attachEvent("onunload",ne)}}d.attributes=le(function(e){e.className="i";return!e.getAttribute("className")});d.getElementsByTagName=le(function(e){e.appendChild(O.createComment(""));return!e.getElementsByTagName("*").length});d.getElementsByClassName=X.test(O.getElementsByClassName);d.getById=le(function(e){o.appendChild(e).id=b;return!O.getElementsByName||!O.getElementsByName(b).length});if(d.getById){w.filter["ID"]=function(e){var t=e.replace(J,ee);return function(e){return e.getAttribute("id")===t}};w.find["ID"]=function(e,t){if(typeof t.getElementById!=="undefined"&&x){var r=t.getElementById(e);return r?[r]:[]}}}else{w.filter["ID"]=function(e){var r=e.replace(J,ee);return function(e){var t=typeof e.getAttributeNode!=="undefined"&&e.getAttributeNode("id");return t&&t.value===r}};w.find["ID"]=function(e,t){if(typeof t.getElementById!=="undefined"&&x){var r,n,i,a=t.getElementById(e);if(a){r=a.getAttributeNode("id");if(r&&r.value===e){return[a]}i=t.getElementsByName(e);n=0;while(a=i[n++]){r=a.getAttributeNode("id");if(r&&r.value===e){return[a]}}}return[]}}}w.find["TAG"]=d.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!=="undefined"){return t.getElementsByTagName(e)}else if(d.qsa){return t.querySelectorAll(e)}}:function(e,t){var r,n=[],i=0,a=t.getElementsByTagName(e);if(e==="*"){while(r=a[i++]){if(r.nodeType===1){n.push(r)}}return n}return a};w.find["CLASS"]=d.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!=="undefined"&&x){return t.getElementsByClassName(e)}};s=[];g=[];if(d.qsa=X.test(O.querySelectorAll)){le(function(e){o.appendChild(e).innerHTML="<a id='"+b+"'></a>"+"<select id='"+b+"-\r\\' msallowcapture=''>"+"<option selected=''></option></select>";if(e.querySelectorAll("[msallowcapture^='']").length){g.push("[*^$]="+L+"*(?:''|\"\")")}if(!e.querySelectorAll("[selected]").length){g.push("\\["+L+"*(?:value|"+R+")")}if(!e.querySelectorAll("[id~="+b+"-]").length){g.push("~=")}if(!e.querySelectorAll(":checked").length){g.push(":checked")}if(!e.querySelectorAll("a#"+b+"+*").length){g.push(".#.+[+~]")}});le(function(e){e.innerHTML="<a href='' disabled='disabled'></a>"+"<select disabled='disabled'><option/></select>";var t=O.createElement("input");t.setAttribute("type","hidden");e.appendChild(t).setAttribute("name","D");if(e.querySelectorAll("[name=d]").length){g.push("name"+L+"*[*^$|!~]?=")}if(e.querySelectorAll(":enabled").length!==2){g.push(":enabled",":disabled")}o.appendChild(e).disabled=true;if(e.querySelectorAll(":disabled").length!==2){g.push(":enabled",":disabled")}e.querySelectorAll("*,:x");g.push(",.*:")})}if(d.matchesSelector=X.test(c=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector)){le(function(e){d.disconnectedMatch=c.call(e,"*");c.call(e,"[s!='']:x");s.push("!=",F)})}g=g.length&&new RegExp(g.join("|"));s=s.length&&new RegExp(s.join("|"));t=X.test(o.compareDocumentPosition);m=t||X.test(o.contains)?function(e,t){var r=e.nodeType===9?e.documentElement:e,n=t&&t.parentNode;return e===n||!!(n&&n.nodeType===1&&(r.contains?r.contains(n):e.compareDocumentPosition&&e.compareDocumentPosition(n)&16))}:function(e,t){if(t){while(t=t.parentNode){if(t===e){return true}}}return false};M=t?function(e,t){if(e===t){u=true;return 0}var r=!e.compareDocumentPosition-!t.compareDocumentPosition;if(r){return r}r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1;if(r&1||!d.sortDetached&&t.compareDocumentPosition(e)===r){if(e===O||e.ownerDocument===_&&m(_,e)){return-1}if(t===O||t.ownerDocument===_&&m(_,t)){return 1}return l?P(l,e)-P(l,t):0}return r&4?-1:1}:function(e,t){if(e===t){u=true;return 0}var r,n=0,i=e.parentNode,a=t.parentNode,o=[e],s=[t];if(!i||!a){return e===O?-1:t===O?1:i?-1:a?1:l?P(l,e)-P(l,t):0}else if(i===a){return ce(e,t)}r=e;while(r=r.parentNode){o.unshift(r)}r=t;while(r=r.parentNode){s.unshift(r)}while(o[n]===s[n]){n++}return n?ce(o[n],s[n]):o[n]===_?-1:s[n]===_?1:0};return O};ae.matches=function(e,t){return ae(e,null,null,t)};ae.matchesSelector=function(e,t){if((e.ownerDocument||e)!==O){C(e)}t=t.replace(Y,"='$1']");if(d.matchesSelector&&x&&!E[t+" "]&&(!s||!s.test(t))&&(!g||!g.test(t))){try{var r=c.call(e,t);if(r||d.disconnectedMatch||e.document&&e.document.nodeType!==11){return r}}catch(e){}}return ae(t,O,null,[e]).length>0};ae.contains=function(e,t){if((e.ownerDocument||e)!==O){C(e)}return m(e,t)};ae.attr=function(e,t){if((e.ownerDocument||e)!==O){C(e)}var r=w.attrHandle[t.toLowerCase()],n=r&&A.call(w.attrHandle,t.toLowerCase())?r(e,t,!x):undefined;return n!==undefined?n:d.attributes||!x?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null};ae.escape=function(e){return(e+"").replace(te,re)};ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};ae.uniqueSort=function(e){var t,r=[],n=0,i=0;u=!d.detectDuplicates;l=!d.sortStable&&e.slice(0);e.sort(M);if(u){while(t=e[i++]){if(t===e[i]){n=r.push(i)}}while(n--){e.splice(r[n],1)}}l=null;return e};a=ae.getText=function(e){var t,r="",n=0,i=e.nodeType;if(!i){while(t=e[n++]){r+=a(t)}}else if(i===1||i===9||i===11){if(typeof e.textContent==="string"){return e.textContent}else{for(e=e.firstChild;e;e=e.nextSibling){r+=a(e)}}}else if(i===3||i===4){return e.nodeValue}return r};w=ae.selectors={cacheLength:50,createPseudo:se,match:z,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function e(t){t[1]=t[1].replace(J,ee);t[3]=(t[3]||t[4]||t[5]||"").replace(J,ee);if(t[2]==="~="){t[3]=" "+t[3]+" "}return t.slice(0,4)},CHILD:function e(t){t[1]=t[1].toLowerCase();if(t[1].slice(0,3)==="nth"){if(!t[3]){ae.error(t[0])}t[4]=+(t[4]?t[5]+(t[6]||1):2*(t[3]==="even"||t[3]==="odd"));t[5]=+(t[7]+t[8]||t[3]==="odd")}else if(t[3]){ae.error(t[0])}return t},PSEUDO:function e(t){var r,n=!t[6]&&t[2];if(z["CHILD"].test(t[0])){return null}if(t[3]){t[2]=t[4]||t[5]||""}else if(n&&V.test(n)&&(r=p(n,true))&&(r=n.indexOf(")",n.length-r)-n.length)){t[0]=t[0].slice(0,r);t[2]=n.slice(0,r)}return t.slice(0,3)}},filter:{TAG:function e(t){var r=t.replace(J,ee).toLowerCase();return t==="*"?function(){return true}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===r}},CLASS:function e(t){var r=h[t+" "];return r||(r=new RegExp("(^|"+L+")"+t+"("+L+"|$)"))&&h(t,function(e){return r.test(typeof e.className==="string"&&e.className||typeof e.getAttribute!=="undefined"&&e.getAttribute("class")||"")})},ATTR:function e(r,n,i){return function(e){var t=ae.attr(e,r);if(t==null){return n==="!="}if(!n){return true}t+="";return n==="="?t===i:n==="!="?t!==i:n==="^="?i&&t.indexOf(i)===0:n==="*="?i&&t.indexOf(i)>-1:n==="$="?i&&t.slice(-i.length)===i:n==="~="?(" "+t.replace(G," ")+" ").indexOf(i)>-1:n==="|="?t===i||t.slice(0,i.length+1)===i+"-":false}},CHILD:function e(p,t,r,v,g){var m=p.slice(0,3)!=="nth",_=p.slice(-4)!=="last",y=t==="of-type";return v===1&&g===0?function(e){return!!e.parentNode}:function(e,t,r){var n,i,a,o,s,l,u=m!==_?"nextSibling":"previousSibling",c=e.parentNode,f=y&&e.nodeName.toLowerCase(),h=!r&&!y,d=false;if(c){if(m){while(u){o=e;while(o=o[u]){if(y?o.nodeName.toLowerCase()===f:o.nodeType===1){return false}}l=u=p==="only"&&!l&&"nextSibling"}return true}l=[_?c.firstChild:c.lastChild];if(_&&h){o=c;a=o[b]||(o[b]={});i=a[o.uniqueID]||(a[o.uniqueID]={});n=i[p]||[];s=n[0]===T&&n[1];d=s&&n[2];o=s&&c.childNodes[s];while(o=++s&&o&&o[u]||(d=s=0)||l.pop()){if(o.nodeType===1&&++d&&o===e){i[p]=[T,s,d];break}}}else{if(h){o=e;a=o[b]||(o[b]={});i=a[o.uniqueID]||(a[o.uniqueID]={});n=i[p]||[];s=n[0]===T&&n[1];d=s}if(d===false){while(o=++s&&o&&o[u]||(d=s=0)||l.pop()){if((y?o.nodeName.toLowerCase()===f:o.nodeType===1)&&++d){if(h){a=o[b]||(o[b]={});i=a[o.uniqueID]||(a[o.uniqueID]={});i[p]=[T,d]}if(o===e){break}}}}}d-=g;return d===v||d%v===0&&d/v>=0}}},PSEUDO:function e(t,a){var r,o=w.pseudos[t]||w.setFilters[t.toLowerCase()]||ae.error("unsupported pseudo: "+t);if(o[b]){return o(a)}if(o.length>1){r=[t,t,"",a];return w.setFilters.hasOwnProperty(t.toLowerCase())?se(function(e,t){var r,n=o(e,a),i=n.length;while(i--){r=P(e,n[i]);e[r]=!(t[r]=n[i])}}):function(e){return o(e,0,r)}}return o}},pseudos:{not:se(function(e){var n=[],i=[],s=f(e.replace(U,"$1"));return s[b]?se(function(e,t,r,n){var i,a=s(e,null,n,[]),o=e.length;while(o--){if(i=a[o]){e[o]=!(t[o]=i)}}}):function(e,t,r){n[0]=e;s(n,null,r,i);n[0]=null;return!i.pop()}}),has:se(function(t){return function(e){return ae(t,e).length>0}}),contains:se(function(t){t=t.replace(J,ee);return function(e){return(e.textContent||e.innerText||a(e)).indexOf(t)>-1}}),lang:se(function(r){if(!q.test(r||"")){ae.error("unsupported lang: "+r)}r=r.replace(J,ee).toLowerCase();return function(e){var t;do{if(t=x?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang")){t=t.toLowerCase();return t===r||t.indexOf(r+"-")===0}}while((e=e.parentNode)&&e.nodeType===1);return false}}),target:function e(t){var r=n.location&&n.location.hash;return r&&r.slice(1)===t.id},root:function e(t){return t===o},focus:function e(t){return t===O.activeElement&&(!O.hasFocus||O.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:de(false),disabled:de(true),checked:function e(t){var r=t.nodeName.toLowerCase();return r==="input"&&!!t.checked||r==="option"&&!!t.selected},selected:function e(t){if(t.parentNode){t.parentNode.selectedIndex}return t.selected===true},empty:function e(t){for(t=t.firstChild;t;t=t.nextSibling){if(t.nodeType<6){return false}}return true},parent:function e(t){return!w.pseudos["empty"](t)},header:function e(t){return K.test(t.nodeName)},input:function e(t){return B.test(t.nodeName)},button:function e(t){var r=t.nodeName.toLowerCase();return r==="input"&&t.type==="button"||r==="button"},text:function e(t){var r;return t.nodeName.toLowerCase()==="input"&&t.type==="text"&&((r=t.getAttribute("type"))==null||r.toLowerCase()==="text")},first:pe(function(){return[0]}),last:pe(function(e,t){return[t-1]}),eq:pe(function(e,t,r){return[r<0?r+t:r]}),even:pe(function(e,t){var r=0;for(;r<t;r+=2){e.push(r)}return e}),odd:pe(function(e,t){var r=1;for(;r<t;r+=2){e.push(r)}return e}),lt:pe(function(e,t,r){var n=r<0?r+t:r;for(;--n>=0;){e.push(n)}return e}),gt:pe(function(e,t,r){var n=r<0?r+t:r;for(;++n<t;){e.push(n)}return e})}};w.pseudos["nth"]=w.pseudos["eq"];for(e in{radio:true,checkbox:true,file:true,password:true,image:true}){w.pseudos[e]=fe(e)}for(e in{submit:true,reset:true}){w.pseudos[e]=he(e)}function ge(){}ge.prototype=w.filters=w.pseudos;w.setFilters=new ge;p=ae.tokenize=function(e,t){var r,n,i,a,o,s,l,u=y[e+" "];if(u){return t?0:u.slice(0)}o=e;s=[];l=w.preFilter;while(o){if(!r||(n=H.exec(o))){if(n){o=o.slice(n[0].length)||o}s.push(i=[])}r=false;if(n=W.exec(o)){r=n.shift();i.push({value:r,type:n[0].replace(U," ")});o=o.slice(r.length)}for(a in w.filter){if((n=z[a].exec(o))&&(!l[a]||(n=l[a](n)))){r=n.shift();i.push({value:r,type:a,matches:n});o=o.slice(r.length)}}if(!r){break}}return t?o.length:o?ae.error(e):y(e,s).slice(0)};function me(e){var t=0,r=e.length,n="";for(;t<r;t++){n+=e[t].value}return n}function _e(s,e,t){var l=e.dir,u=e.next,c=u||l,f=t&&c==="parentNode",h=r++;return e.first?function(e,t,r){while(e=e[l]){if(e.nodeType===1||f){return s(e,t,r)}}return false}:function(e,t,r){var n,i,a,o=[T,h];if(r){while(e=e[l]){if(e.nodeType===1||f){if(s(e,t,r)){return true}}}}else{while(e=e[l]){if(e.nodeType===1||f){a=e[b]||(e[b]={});i=a[e.uniqueID]||(a[e.uniqueID]={});if(u&&u===e.nodeName.toLowerCase()){e=e[l]||e}else if((n=i[c])&&n[0]===T&&n[1]===h){return o[2]=n[2]}else{i[c]=o;if(o[2]=s(e,t,r)){return true}}}}}return false}}function ye(i){return i.length>1?function(e,t,r){var n=i.length;while(n--){if(!i[n](e,t,r)){return false}}return true}:i[0]}function be(e,t,r){var n=0,i=t.length;for(;n<i;n++){ae(e,t[n],r)}return r}function we(e,t,r,n,i){var a,o=[],s=0,l=e.length,u=t!=null;for(;s<l;s++){if(a=e[s]){if(!r||r(a,n,i)){o.push(a);if(u){t.push(s)}}}}return o}function Se(d,p,v,g,m,e){if(g&&!g[b]){g=Se(g)}if(m&&!m[b]){m=Se(m,e)}return se(function(e,t,r,n){var i,a,o,s=[],l=[],u=t.length,c=e||be(p||"*",r.nodeType?[r]:r,[]),f=d&&(e||!p)?we(c,s,d,r,n):c,h=v?m||(e?d:u||g)?[]:t:f;if(v){v(f,h,r,n)}if(g){i=we(h,l);g(i,[],r,n);a=i.length;while(a--){if(o=i[a]){h[l[a]]=!(f[l[a]]=o)}}}if(e){if(m||d){if(m){i=[];a=h.length;while(a--){if(o=h[a]){i.push(f[a]=o)}}m(null,h=[],i,n)}a=h.length;while(a--){if((o=h[a])&&(i=m?P(e,o):s[a])>-1){e[i]=!(t[i]=o)}}}}else{h=we(h===t?h.splice(u,h.length):h);if(m){m(null,t,h,n)}else{I.apply(t,h)}}})}function Ce(e){var i,t,r,n=e.length,a=w.relative[e[0].type],o=a||w.relative[" "],s=a?1:0,l=_e(function(e){return e===i},o,true),u=_e(function(e){return P(i,e)>-1},o,true),c=[function(e,t,r){var n=!a&&(r||t!==S)||((i=t).nodeType?l(e,t,r):u(e,t,r));i=null;return n}];for(;s<n;s++){if(t=w.relative[e[s].type]){c=[_e(ye(c),t)]}else{t=w.filter[e[s].type].apply(null,e[s].matches);if(t[b]){r=++s;for(;r<n;r++){if(w.relative[e[r].type]){break}}return Se(s>1&&ye(c),s>1&&me(e.slice(0,s-1).concat({value:e[s-2].type===" "?"*":""})).replace(U,"$1"),t,s<r&&Ce(e.slice(s,r)),r<n&&Ce(e=e.slice(r)),r<n&&me(e))}c.push(t)}}return ye(c)}function Oe(m,_){var y=_.length>0,b=m.length>0,e=function e(t,r,n,i,a){var o,s,l,u=0,c="0",f=t&&[],h=[],d=S,p=t||b&&w.find["TAG"]("*",a),v=T+=d==null?1:Math.random()||.1,g=p.length;if(a){S=r===O||r||a}for(;c!==g&&(o=p[c])!=null;c++){if(b&&o){s=0;if(!r&&o.ownerDocument!==O){C(o);n=!x}while(l=m[s++]){if(l(o,r||O,n)){i.push(o);break}}if(a){T=v}}if(y){if(o=!l&&o){u--}if(t){f.push(o)}}}u+=c;if(y&&c!==u){s=0;while(l=_[s++]){l(f,h,r,n)}if(t){if(u>0){while(c--){if(!(f[c]||h[c])){h[c]=k.call(i)}}}h=we(h)}I.apply(i,h);if(a&&!t&&h.length>0&&u+_.length>1){ae.uniqueSort(i)}}if(a){T=v;S=d}return f};return y?se(e):e}f=ae.compile=function(e,t){var r,n=[],i=[],a=E[e+" "];if(!a){if(!t){t=p(e)}r=t.length;while(r--){a=Ce(t[r]);if(a[b]){n.push(a)}else{i.push(a)}}a=E(e,Oe(i,n));a.selector=e}return a};v=ae.select=function(e,t,r,n){var i,a,o,s,l,u=typeof e==="function"&&e,c=!n&&p(e=u.selector||e);r=r||[];if(c.length===1){a=c[0]=c[0].slice(0);if(a.length>2&&(o=a[0]).type==="ID"&&t.nodeType===9&&x&&w.relative[a[1].type]){t=(w.find["ID"](o.matches[0].replace(J,ee),t)||[])[0];if(!t){return r}else if(u){t=t.parentNode}e=e.slice(a.shift().value.length)}i=z["needsContext"].test(e)?0:a.length;while(i--){o=a[i];if(w.relative[s=o.type]){break}if(l=w.find[s]){if(n=l(o.matches[0].replace(J,ee),Q.test(a[0].type)&&ve(t.parentNode)||t)){a.splice(i,1);e=n.length&&me(a);if(!e){I.apply(r,n);return r}break}}}}(u||f(e,c))(n,t,!x,r,!t||Q.test(e)&&ve(t.parentNode)||t);return r};d.sortStable=b.split("").sort(M).join("")===b;d.detectDuplicates=!!u;C();d.sortDetached=le(function(e){return e.compareDocumentPosition(O.createElement("fieldset"))&1});if(!le(function(e){e.innerHTML="<a href='#'></a>";return e.firstChild.getAttribute("href")==="#"})){ue("type|href|height|width",function(e,t,r){if(!r){return e.getAttribute(t,t.toLowerCase()==="type"?1:2)}})}if(!d.attributes||!le(function(e){e.innerHTML="<input/>";e.firstChild.setAttribute("value","");return e.firstChild.getAttribute("value")===""})){ue("value",function(e,t,r){if(!r&&e.nodeName.toLowerCase()==="input"){return e.defaultValue}})}if(!le(function(e){return e.getAttribute("disabled")==null})){ue(R,function(e,t,r){var n;if(!r){return e[t]===true?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}})}return ae}(O);T.find=p;T.expr=p.selectors;T.expr[":"]=T.expr.pseudos;T.uniqueSort=T.unique=p.uniqueSort;T.text=p.getText;T.isXMLDoc=p.isXML;T.contains=p.contains;T.escapeSelector=p.escape;var S=function e(t,r,n){var i=[],a=n!==undefined;while((t=t[r])&&t.nodeType!==9){if(t.nodeType===1){if(a&&T(t).is(n)){break}i.push(t)}}return i};var C=function e(t,r){var n=[];for(;t;t=t.nextSibling){if(t.nodeType===1&&t!==r){n.push(t)}}return n};var E=T.expr.match.needsContext;function M(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function k(e,r,n){if(_(r)){return T.grep(e,function(e,t){return!!r.call(e,t,e)!==n})}if(r.nodeType){return T.grep(e,function(e){return e===r!==n})}if(typeof r!=="string"){return T.grep(e,function(e){return a.call(r,e)>-1!==n})}return T.filter(r,e,n)}T.filter=function(e,t,r){var n=t[0];if(r){e=":not("+e+")"}if(t.length===1&&n.nodeType===1){return T.find.matchesSelector(n,e)?[n]:[]}return T.find.matches(e,T.grep(t,function(e){return e.nodeType===1}))};T.fn.extend({find:function e(t){var r,n,i=this.length,a=this;if(typeof t!=="string"){return this.pushStack(T(t).filter(function(){for(r=0;r<i;r++){if(T.contains(a[r],this)){return true}}}))}n=this.pushStack([]);for(r=0;r<i;r++){T.find(t,a[r],n)}return i>1?T.uniqueSort(n):n},filter:function e(t){return this.pushStack(k(this,t||[],false))},not:function e(t){return this.pushStack(k(this,t||[],true))},is:function e(t){return!!k(this,typeof t==="string"&&E.test(t)?T(t):t||[],false).length}});var j,I=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,D=T.fn.init=function(e,t,r){var n,i;if(!e){return this}r=r||j;if(typeof e==="string"){if(e[0]==="<"&&e[e.length-1]===">"&&e.length>=3){n=[null,e,null]}else{n=I.exec(e)}if(n&&(n[1]||!t)){if(n[1]){t=t instanceof T?t[0]:t;T.merge(this,T.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:x,true));if(A.test(n[1])&&T.isPlainObject(t)){for(n in t){if(_(this[n])){this[n](t[n])}else{this.attr(n,t[n])}}}return this}else{i=x.getElementById(n[2]);if(i){this[0]=i;this.length=1}return this}}else if(!t||t.jquery){return(t||r).find(e)}else{return this.constructor(t).find(e)}}else if(e.nodeType){this[0]=e;this.length=1;return this}else if(_(e)){return r.ready!==undefined?r.ready(e):e(T)}return T.makeArray(e,this)};D.prototype=T.fn;j=T(x);var P=/^(?:parents|prev(?:Until|All))/,R={children:true,contents:true,next:true,prev:true};T.fn.extend({has:function e(t){var r=T(t,this),n=r.length;return this.filter(function(){var e=0;for(;e<n;e++){if(T.contains(this,r[e])){return true}}})},closest:function e(t,r){var n,i=0,a=this.length,o=[],s=typeof t!=="string"&&T(t);if(!E.test(t)){for(;i<a;i++){for(n=this[i];n&&n!==r;n=n.parentNode){if(n.nodeType<11&&(s?s.index(n)>-1:n.nodeType===1&&T.find.matchesSelector(n,t))){o.push(n);break}}}}return this.pushStack(o.length>1?T.uniqueSort(o):o)},index:function e(t){if(!t){return this[0]&&this[0].parentNode?this.first().prevAll().length:-1}if(typeof t==="string"){return a.call(T(t),this[0])}return a.call(this,t.jquery?t[0]:t)},add:function e(t,r){return this.pushStack(T.uniqueSort(T.merge(this.get(),T(t,r))))},addBack:function e(t){return this.add(t==null?this.prevObject:this.prevObject.filter(t))}});function L(e,t){while((e=e[t])&&e.nodeType!==1){}return e}T.each({parent:function e(t){var e=t.parentNode;return e&&e.nodeType!==11?e:null},parents:function e(t){return S(t,"parentNode")},parentsUntil:function e(t,r,n){return S(t,"parentNode",n)},next:function e(t){return L(t,"nextSibling")},prev:function e(t){return L(t,"previousSibling")},nextAll:function e(t){return S(t,"nextSibling")},prevAll:function e(t){return S(t,"previousSibling")},nextUntil:function e(t,r,n){return S(t,"nextSibling",n)},prevUntil:function e(t,r,n){return S(t,"previousSibling",n)},siblings:function e(t){return C((t.parentNode||{}).firstChild,t)},children:function e(t){return C(t.firstChild)},contents:function e(t){if(M(t,"iframe")){return t.contentDocument}if(M(t,"template")){t=t.content||t}return T.merge([],t.childNodes)}},function(n,i){T.fn[n]=function(e,t){var r=T.map(this,i,e);if(n.slice(-5)!=="Until"){t=e}if(t&&typeof t==="string"){r=T.filter(t,r)}if(this.length>1){if(!R[n]){T.uniqueSort(r)}if(P.test(n)){r.reverse()}}return this.pushStack(r)}});var N=/[^\x20\t\r\n\f]+/g;function $(e){var r={};T.each(e.match(N)||[],function(e,t){r[t]=true});return r}T.Callbacks=function(n){n=typeof n==="string"?$(n):T.extend({},n);var i,t,r,a,o=[],s=[],l=-1,u=function e(){a=a||n.once;r=i=true;for(;s.length;l=-1){t=s.shift();while(++l<o.length){if(o[l].apply(t[0],t[1])===false&&n.stopOnFalse){l=o.length;t=false}}}if(!n.memory){t=false}i=false;if(a){if(t){o=[]}else{o=""}}},c={add:function e(){if(o){if(t&&!i){l=o.length-1;s.push(t)}(function r(e){T.each(e,function(e,t){if(_(t)){if(!n.unique||!c.has(t)){o.push(t)}}else if(t&&t.length&&w(t)!=="string"){r(t)}})})(arguments);if(t&&!i){u()}}return this},remove:function e(){T.each(arguments,function(e,t){var r;while((r=T.inArray(t,o,r))>-1){o.splice(r,1);if(r<=l){l--}}});return this},has:function e(t){return t?T.inArray(t,o)>-1:o.length>0},empty:function e(){if(o){o=[]}return this},disable:function e(){a=s=[];o=t="";return this},disabled:function e(){return!o},lock:function e(){a=s=[];if(!t&&!i){o=t=""}return this},locked:function e(){return!!a},fireWith:function e(t,r){if(!a){r=r||[];r=[t,r.slice?r.slice():r];s.push(r);if(!i){u()}}return this},fire:function e(){c.fireWith(this,arguments);return this},fired:function e(){return!!r}};return c};function F(e){return e}function G(e){throw e}function U(e,t,r,n){var i;try{if(e&&_(i=e.promise)){i.call(e).done(t).fail(r)}else if(e&&_(i=e.then)){i.call(e,t,r)}else{t.apply(undefined,[e].slice(n))}}catch(e){r.apply(undefined,[e])}}T.extend({Deferred:function e(t){var a=[["notify","progress",T.Callbacks("memory"),T.Callbacks("memory"),2],["resolve","done",T.Callbacks("once memory"),T.Callbacks("once memory"),0,"resolved"],["reject","fail",T.Callbacks("once memory"),T.Callbacks("once memory"),1,"rejected"]],i="pending",o={state:function e(){return i},always:function e(){s.done(arguments).fail(arguments);return this},catch:function e(t){return o.then(null,t)},pipe:function e(){var i=arguments;return T.Deferred(function(n){T.each(a,function(e,t){var r=_(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=r&&r.apply(this,arguments);if(e&&_(e.promise)){e.promise().progress(n.notify).done(n.resolve).fail(n.reject)}else{n[t[0]+"With"](this,r?[e]:arguments)}})});i=null}).promise()},then:function e(t,r,n){var u=0;function c(a,o,s,l){return function(){var n=this,i=arguments,e=function e(){var t,r;if(a<u){return}t=s.apply(n,i);if(t===o.promise()){throw new TypeError("Thenable self-resolution")}r=t&&(typeof t==="object"||typeof t==="function")&&t.then;if(_(r)){if(l){r.call(t,c(u,o,F,l),c(u,o,G,l))}else{u++;r.call(t,c(u,o,F,l),c(u,o,G,l),c(u,o,F,o.notifyWith))}}else{if(s!==F){n=undefined;i=[t]}(l||o.resolveWith)(n,i)}},t=l?e:function(){try{e()}catch(e){if(T.Deferred.exceptionHook){T.Deferred.exceptionHook(e,t.stackTrace)}if(a+1>=u){if(s!==G){n=undefined;i=[e]}o.rejectWith(n,i)}}};if(a){t()}else{if(T.Deferred.getStackHook){t.stackTrace=T.Deferred.getStackHook()}O.setTimeout(t)}}}return T.Deferred(function(e){a[0][3].add(c(0,e,_(n)?n:F,e.notifyWith));a[1][3].add(c(0,e,_(t)?t:F));a[2][3].add(c(0,e,_(r)?r:G))}).promise()},promise:function e(t){return t!=null?T.extend(t,o):o}},s={};T.each(a,function(e,t){var r=t[2],n=t[5];o[t[1]]=r.add;if(n){r.add(function(){i=n},a[3-e][2].disable,a[3-e][3].disable,a[0][2].lock,a[0][3].lock)}r.add(t[3].fire);s[t[0]]=function(){s[t[0]+"With"](this===s?undefined:this,arguments);return this};s[t[0]+"With"]=r.fireWith});o.promise(s);if(t){t.call(s,s)}return s},when:function e(t){var r=arguments.length,n=r,i=Array(n),a=l.call(arguments),o=T.Deferred(),s=function e(t){return function(e){i[t]=this;a[t]=arguments.length>1?l.call(arguments):e;if(!--r){o.resolveWith(i,a)}}};if(r<=1){U(t,o.done(s(n)).resolve,o.reject,!r);if(o.state()==="pending"||_(a[n]&&a[n].then)){return o.then()}}while(n--){U(a[n],s(n),o.reject)}return o.promise()}});var H=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;T.Deferred.exceptionHook=function(e,t){if(O.console&&O.console.warn&&e&&H.test(e.name)){O.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)}};T.readyException=function(e){O.setTimeout(function(){throw e})};var W=T.Deferred();T.fn.ready=function(e){W.then(e).catch(function(e){T.readyException(e)});return this};T.extend({isReady:false,readyWait:1,ready:function e(t){if(t===true?--T.readyWait:T.isReady){return}T.isReady=true;if(t!==true&&--T.readyWait>0){return}W.resolveWith(x,[T])}});T.ready.then=W.then;function Y(){x.removeEventListener("DOMContentLoaded",Y);O.removeEventListener("load",Y);T.ready()}if(x.readyState==="complete"||x.readyState!=="loading"&&!x.documentElement.doScroll){O.setTimeout(T.ready)}else{x.addEventListener("DOMContentLoaded",Y);O.addEventListener("load",Y)}var V=function e(t,r,n,i,a,o,s){var l=0,u=t.length,c=n==null;if(w(n)==="object"){a=true;for(l in n){e(t,r,l,n[l],true,o,s)}}else if(i!==undefined){a=true;if(!_(i)){s=true}if(c){if(s){r.call(t,i);r=null}else{c=r;r=function e(t,r,n){return c.call(T(t),n)}}}if(r){for(;l<u;l++){r(t[l],n,s?i:i.call(t[l],l,r(t[l],n)))}}}if(a){return t}if(c){return r.call(t)}return u?r(t[0],n):o};var q=/^-ms-/,z=/-([a-z])/g;function B(e,t){return t.toUpperCase()}function K(e){return e.replace(q,"ms-").replace(z,B)}var X=function e(t){return t.nodeType===1||t.nodeType===9||!+t.nodeType};function Z(){this.expando=T.expando+Z.uid++}Z.uid=1;Z.prototype={cache:function e(t){var r=t[this.expando];if(!r){r={};if(X(t)){if(t.nodeType){t[this.expando]=r}else{Object.defineProperty(t,this.expando,{value:r,configurable:true})}}}return r},set:function e(t,r,n){var i,a=this.cache(t);if(typeof r==="string"){a[K(r)]=n}else{for(i in r){a[K(i)]=r[i]}}return a},get:function e(t,r){return r===undefined?this.cache(t):t[this.expando]&&t[this.expando][K(r)]},access:function e(t,r,n){if(r===undefined||r&&typeof r==="string"&&n===undefined){return this.get(t,r)}this.set(t,r,n);return n!==undefined?n:r},remove:function e(t,r){var n,i=t[this.expando];if(i===undefined){return}if(r!==undefined){if(Array.isArray(r)){r=r.map(K)}else{r=K(r);r=r in i?[r]:r.match(N)||[]}n=r.length;while(n--){delete i[r[n]]}}if(r===undefined||T.isEmptyObject(i)){if(t.nodeType){t[this.expando]=undefined}else{delete t[this.expando]}}},hasData:function e(t){var r=t[this.expando];return r!==undefined&&!T.isEmptyObject(r)}};var Q=new Z;var J=new Z;var ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function re(e){if(e==="true"){return true}if(e==="false"){return false}if(e==="null"){return null}if(e===+e+""){return+e}if(ee.test(e)){return JSON.parse(e)}return e}function ne(e,t,r){var n;if(r===undefined&&e.nodeType===1){n="data-"+t.replace(te,"-$&").toLowerCase();r=e.getAttribute(n);if(typeof r==="string"){try{r=re(r)}catch(e){}J.set(e,t,r)}else{r=undefined}}return r}T.extend({hasData:function e(t){return J.hasData(t)||Q.hasData(t)},data:function e(t,r,n){return J.access(t,r,n)},removeData:function e(t,r){J.remove(t,r)},_data:function e(t,r,n){return Q.access(t,r,n)},_removeData:function e(t,r){Q.remove(t,r)}});T.fn.extend({data:function e(r,t){var n,i,e,a=this[0],o=a&&a.attributes;if(r===undefined){if(this.length){e=J.get(a);if(a.nodeType===1&&!Q.get(a,"hasDataAttrs")){n=o.length;while(n--){if(o[n]){i=o[n].name;if(i.indexOf("data-")===0){i=K(i.slice(5));ne(a,i,e[i])}}}Q.set(a,"hasDataAttrs",true)}}return e}if(typeof r==="object"){return this.each(function(){J.set(this,r)})}return V(this,function(e){var t;if(a&&e===undefined){t=J.get(a,r);if(t!==undefined){return t}t=ne(a,r);if(t!==undefined){return t}return}this.each(function(){J.set(this,r,e)})},null,t,arguments.length>1,null,true)},removeData:function e(t){return this.each(function(){J.remove(this,t)})}});T.extend({queue:function e(t,r,n){var e;if(t){r=(r||"fx")+"queue";e=Q.get(t,r);if(n){if(!e||Array.isArray(n)){e=Q.access(t,r,T.makeArray(n))}else{e.push(n)}}return e||[]}},dequeue:function e(t,r){r=r||"fx";var n=T.queue(t,r),i=n.length,a=n.shift(),o=T._queueHooks(t,r),s=function e(){T.dequeue(t,r)};if(a==="inprogress"){a=n.shift();i--}if(a){if(r==="fx"){n.unshift("inprogress")}delete o.stop;a.call(t,s,o)}if(!i&&o){o.empty.fire()}},_queueHooks:function e(t,r){var n=r+"queueHooks";return Q.get(t,n)||Q.access(t,n,{empty:T.Callbacks("once memory").add(function(){Q.remove(t,[r+"queue",n])})})}});T.fn.extend({queue:function e(t,r){var n=2;if(typeof t!=="string"){r=t;t="fx";n--}if(arguments.length<n){return T.queue(this[0],t)}return r===undefined?this:this.each(function(){var e=T.queue(this,t,r);T._queueHooks(this,t);if(t==="fx"&&e[0]!=="inprogress"){T.dequeue(this,t)}})},dequeue:function e(t){return this.each(function(){T.dequeue(this,t)})},clearQueue:function e(t){return this.queue(t||"fx",[])},promise:function e(t,r){var n,i=1,a=T.Deferred(),o=this,s=this.length,l=function e(){if(!--i){a.resolveWith(o,[o])}};if(typeof t!=="string"){r=t;t=undefined}t=t||"fx";while(s--){n=Q.get(o[s],t+"queueHooks");if(n&&n.empty){i++;n.empty.add(l)}}l();return a.promise(r)}});var ie=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var ae=new RegExp("^(?:([+-])=|)("+ie+")([a-z%]*)$","i");var oe=["Top","Right","Bottom","Left"];var se=function e(t,r){t=r||t;return t.style.display==="none"||t.style.display===""&&T.contains(t.ownerDocument,t)&&T.css(t,"display")==="none"};var le=function e(t,r,n,i){var a,o,s={};for(o in r){s[o]=t.style[o];t.style[o]=r[o]}a=n.apply(t,i||[]);for(o in r){t.style[o]=s[o]}return a};function ue(e,t,r,n){var i,a,o=20,s=n?function(){return n.cur()}:function(){return T.css(e,t,"")},l=s(),u=r&&r[3]||(T.cssNumber[t]?"":"px"),c=(T.cssNumber[t]||u!=="px"&&+l)&&ae.exec(T.css(e,t));if(c&&c[3]!==u){l=l/2;u=u||c[3];c=+l||1;while(o--){T.style(e,t,c+u);if((1-a)*(1-(a=s()/l||.5))<=0){o=0}c=c/a}c=c*2;T.style(e,t,c+u);r=r||[]}if(r){c=+c||+l||0;i=r[1]?c+(r[1]+1)*r[2]:+r[2];if(n){n.unit=u;n.start=c;n.end=i}}return i}var ce={};function fe(e){var t,r=e.ownerDocument,n=e.nodeName,i=ce[n];if(i){return i}t=r.body.appendChild(r.createElement(n));i=T.css(t,"display");t.parentNode.removeChild(t);if(i==="none"){i="block"}ce[n]=i;return i}function he(e,t){var r,n,i=[],a=0,o=e.length;for(;a<o;a++){n=e[a];if(!n.style){continue}r=n.style.display;if(t){if(r==="none"){i[a]=Q.get(n,"display")||null;if(!i[a]){n.style.display=""}}if(n.style.display===""&&se(n)){i[a]=fe(n)}}else{if(r!=="none"){i[a]="none";Q.set(n,"display",r)}}}for(a=0;a<o;a++){if(i[a]!=null){e[a].style.display=i[a]}}return e}T.fn.extend({show:function e(){return he(this,true)},hide:function e(){return he(this)},toggle:function e(t){if(typeof t==="boolean"){return t?this.show():this.hide()}return this.each(function(){if(se(this)){T(this).show()}else{T(this).hide()}})}});var de=/^(?:checkbox|radio)$/i;var pe=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i;var ve=/^$|^module$|\/(?:java|ecma)script/i;var ge={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ge.optgroup=ge.option;ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead;ge.th=ge.td;function me(e,t){var r;if(typeof e.getElementsByTagName!=="undefined"){r=e.getElementsByTagName(t||"*")}else if(typeof e.querySelectorAll!=="undefined"){r=e.querySelectorAll(t||"*")}else{r=[]}if(t===undefined||t&&M(e,t)){return T.merge([e],r)}return r}function _e(e,t){var r=0,n=e.length;for(;r<n;r++){Q.set(e[r],"globalEval",!t||Q.get(t[r],"globalEval"))}}var ye=/<|&#?\w+;/;function be(e,t,r,n,i){var a,o,s,l,u,c,f=t.createDocumentFragment(),h=[],d=0,p=e.length;for(;d<p;d++){a=e[d];if(a||a===0){if(w(a)==="object"){T.merge(h,a.nodeType?[a]:a)}else if(!ye.test(a)){h.push(t.createTextNode(a))}else{o=o||f.appendChild(t.createElement("div"));s=(pe.exec(a)||["",""])[1].toLowerCase();l=ge[s]||ge._default;o.innerHTML=l[1]+T.htmlPrefilter(a)+l[2];c=l[0];while(c--){o=o.lastChild}T.merge(h,o.childNodes);o=f.firstChild;o.textContent=""}}}f.textContent="";d=0;while(a=h[d++]){if(n&&T.inArray(a,n)>-1){if(i){i.push(a)}continue}u=T.contains(a.ownerDocument,a);o=me(f.appendChild(a),"script");if(u){_e(o)}if(r){c=0;while(a=o[c++]){if(ve.test(a.type||"")){r.push(a)}}}}return f}(function(){var e=x.createDocumentFragment(),t=e.appendChild(x.createElement("div")),r=x.createElement("input");r.setAttribute("type","radio");r.setAttribute("checked","checked");r.setAttribute("name","t");t.appendChild(r);m.checkClone=t.cloneNode(true).cloneNode(true).lastChild.checked;t.innerHTML="<textarea>x</textarea>";m.noCloneChecked=!!t.cloneNode(true).lastChild.defaultValue})();var we=x.documentElement;var Se=/^key/,Ce=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Oe=/^([^.]*)(?:\.(.+)|)/;function xe(){return true}function Te(){return false}function Ee(){try{return x.activeElement}catch(e){}}function Me(e,t,r,n,i,a){var o,s;if(typeof t==="object"){if(typeof r!=="string"){n=n||r;r=undefined}for(s in t){Me(e,s,r,n,t[s],a)}return e}if(n==null&&i==null){i=r;n=r=undefined}else if(i==null){if(typeof r==="string"){i=n;n=undefined}else{i=n;n=r;r=undefined}}if(i===false){i=Te}else if(!i){return e}if(a===1){o=i;i=function e(t){T().off(t);return o.apply(this,arguments)};i.guid=o.guid||(o.guid=T.guid++)}return e.each(function(){T.event.add(this,t,i,n,r)})}T.event={global:{},add:function e(t,r,n,i,a){var o,s,l,u,c,f,h,d,p,v,g,m=Q.get(t);if(!m){return}if(n.handler){o=n;n=o.handler;a=o.selector}if(a){T.find.matchesSelector(we,a)}if(!n.guid){n.guid=T.guid++}if(!(u=m.events)){u=m.events={}}if(!(s=m.handle)){s=m.handle=function(e){return typeof T!=="undefined"&&T.event.triggered!==e.type?T.event.dispatch.apply(t,arguments):undefined}}r=(r||"").match(N)||[""];c=r.length;while(c--){l=Oe.exec(r[c])||[];p=g=l[1];v=(l[2]||"").split(".").sort();if(!p){continue}h=T.event.special[p]||{};p=(a?h.delegateType:h.bindType)||p;h=T.event.special[p]||{};f=T.extend({type:p,origType:g,data:i,handler:n,guid:n.guid,selector:a,needsContext:a&&T.expr.match.needsContext.test(a),namespace:v.join(".")},o);if(!(d=u[p])){d=u[p]=[];d.delegateCount=0;if(!h.setup||h.setup.call(t,i,v,s)===false){if(t.addEventListener){t.addEventListener(p,s)}}}if(h.add){h.add.call(t,f);if(!f.handler.guid){f.handler.guid=n.guid}}if(a){d.splice(d.delegateCount++,0,f)}else{d.push(f)}T.event.global[p]=true}},remove:function e(t,r,n,i,a){var o,s,l,u,c,f,h,d,p,v,g,m=Q.hasData(t)&&Q.get(t);if(!m||!(u=m.events)){return}r=(r||"").match(N)||[""];c=r.length;while(c--){l=Oe.exec(r[c])||[];p=g=l[1];v=(l[2]||"").split(".").sort();if(!p){for(p in u){T.event.remove(t,p+r[c],n,i,true)}continue}h=T.event.special[p]||{};p=(i?h.delegateType:h.bindType)||p;d=u[p]||[];l=l[2]&&new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)");s=o=d.length;while(o--){f=d[o];if((a||g===f.origType)&&(!n||n.guid===f.guid)&&(!l||l.test(f.namespace))&&(!i||i===f.selector||i==="**"&&f.selector)){d.splice(o,1);if(f.selector){d.delegateCount--}if(h.remove){h.remove.call(t,f)}}}if(s&&!d.length){if(!h.teardown||h.teardown.call(t,v,m.handle)===false){T.removeEvent(t,p,m.handle)}delete u[p]}}if(T.isEmptyObject(u)){Q.remove(t,"handle events")}},dispatch:function e(t){var r=T.event.fix(t);var n,i,a,o,s,l,u=new Array(arguments.length),c=(Q.get(this,"events")||{})[r.type]||[],f=T.event.special[r.type]||{};u[0]=r;for(n=1;n<arguments.length;n++){u[n]=arguments[n]}r.delegateTarget=this;if(f.preDispatch&&f.preDispatch.call(this,r)===false){return}l=T.event.handlers.call(this,r,c);n=0;while((o=l[n++])&&!r.isPropagationStopped()){r.currentTarget=o.elem;i=0;while((s=o.handlers[i++])&&!r.isImmediatePropagationStopped()){if(!r.rnamespace||r.rnamespace.test(s.namespace)){r.handleObj=s;r.data=s.data;a=((T.event.special[s.origType]||{}).handle||s.handler).apply(o.elem,u);if(a!==undefined){if((r.result=a)===false){r.preventDefault();r.stopPropagation()}}}}}if(f.postDispatch){f.postDispatch.call(this,r)}return r.result},handlers:function e(t,r){var n,i,a,o,s,l=[],u=r.delegateCount,c=t.target;if(u&&c.nodeType&&!(t.type==="click"&&t.button>=1)){for(;c!==this;c=c.parentNode||this){if(c.nodeType===1&&!(t.type==="click"&&c.disabled===true)){o=[];s={};for(n=0;n<u;n++){i=r[n];a=i.selector+" ";if(s[a]===undefined){s[a]=i.needsContext?T(a,this).index(c)>-1:T.find(a,this,null,[c]).length}if(s[a]){o.push(i)}}if(o.length){l.push({elem:c,handlers:o})}}}}c=this;if(u<r.length){l.push({elem:c,handlers:r.slice(u)})}return l},addProp:function e(r,t){Object.defineProperty(T.Event.prototype,r,{enumerable:true,configurable:true,get:_(t)?function(){if(this.originalEvent){return t(this.originalEvent)}}:function(){if(this.originalEvent){return this.originalEvent[r]}},set:function e(t){Object.defineProperty(this,r,{enumerable:true,configurable:true,writable:true,value:t})}})},fix:function e(t){return t[T.expando]?t:new T.Event(t)},special:{load:{noBubble:true},focus:{trigger:function e(){if(this!==Ee()&&this.focus){this.focus();return false}},delegateType:"focusin"},blur:{trigger:function e(){if(this===Ee()&&this.blur){this.blur();return false}},delegateType:"focusout"},click:{trigger:function e(){if(this.type==="checkbox"&&this.click&&M(this,"input")){this.click();return false}},_default:function e(t){return M(t.target,"a")}},beforeunload:{postDispatch:function e(t){if(t.result!==undefined&&t.originalEvent){t.originalEvent.returnValue=t.result}}}}};T.removeEvent=function(e,t,r){if(e.removeEventListener){e.removeEventListener(t,r)}};T.Event=function(e,t){if(!(this instanceof T.Event)){return new T.Event(e,t)}if(e&&e.type){this.originalEvent=e;this.type=e.type;this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&e.returnValue===false?xe:Te;this.target=e.target&&e.target.nodeType===3?e.target.parentNode:e.target;this.currentTarget=e.currentTarget;this.relatedTarget=e.relatedTarget}else{this.type=e}if(t){T.extend(this,t)}this.timeStamp=e&&e.timeStamp||Date.now();this[T.expando]=true};T.Event.prototype={constructor:T.Event,isDefaultPrevented:Te,isPropagationStopped:Te,isImmediatePropagationStopped:Te,isSimulated:false,preventDefault:function e(){var t=this.originalEvent;this.isDefaultPrevented=xe;if(t&&!this.isSimulated){t.preventDefault()}},stopPropagation:function e(){var t=this.originalEvent;this.isPropagationStopped=xe;if(t&&!this.isSimulated){t.stopPropagation()}},stopImmediatePropagation:function e(){var t=this.originalEvent;this.isImmediatePropagationStopped=xe;if(t&&!this.isSimulated){t.stopImmediatePropagation()}this.stopPropagation()}};T.each({altKey:true,bubbles:true,cancelable:true,changedTouches:true,ctrlKey:true,detail:true,eventPhase:true,metaKey:true,pageX:true,pageY:true,shiftKey:true,view:true,char:true,charCode:true,key:true,keyCode:true,button:true,buttons:true,clientX:true,clientY:true,offsetX:true,offsetY:true,pointerId:true,pointerType:true,screenX:true,screenY:true,targetTouches:true,toElement:true,touches:true,which:function e(t){var r=t.button;if(t.which==null&&Se.test(t.type)){return t.charCode!=null?t.charCode:t.keyCode}if(!t.which&&r!==undefined&&Ce.test(t.type)){if(r&1){return 1}if(r&2){return 3}if(r&4){return 2}return 0}return t.which}},T.event.addProp);T.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,o){T.event.special[e]={delegateType:o,bindType:o,handle:function e(t){var r,n=this,i=t.relatedTarget,a=t.handleObj;if(!i||i!==n&&!T.contains(n,i)){t.type=a.origType;r=a.handler.apply(this,arguments);t.type=o}return r}}});T.fn.extend({on:function e(t,r,n,i){return Me(this,t,r,n,i)},one:function e(t,r,n,i){return Me(this,t,r,n,i,1)},off:function e(t,r,n){var i,a;if(t&&t.preventDefault&&t.handleObj){i=t.handleObj;T(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler);return this}if(typeof t==="object"){for(a in t){this.off(a,r,t[a])}return this}if(r===false||typeof r==="function"){n=r;r=undefined}if(n===false){n=Te}return this.each(function(){T.event.remove(this,t,n,r)})}});var Ae=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,ke=/<script|<style|<link/i,je=/checked\s*(?:[^=]|=\s*.checked.)/i,Ie=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function De(e,t){if(M(e,"table")&&M(t.nodeType!==11?t:t.firstChild,"tr")){return T(e).children("tbody")[0]||e}return e}function Pe(e){e.type=(e.getAttribute("type")!==null)+"/"+e.type;return e}function Re(e){if((e.type||"").slice(0,5)==="true/"){e.type=e.type.slice(5)}else{e.removeAttribute("type")}return e}function Le(e,t){var r,n,i,a,o,s,l,u;if(t.nodeType!==1){return}if(Q.hasData(e)){a=Q.access(e);o=Q.set(t,a);u=a.events;if(u){delete o.handle;o.events={};for(i in u){for(r=0,n=u[i].length;r<n;r++){T.event.add(t,i,u[i][r])}}}}if(J.hasData(e)){s=J.access(e);l=T.extend({},s);J.set(t,l)}}function Ne(e,t){var r=t.nodeName.toLowerCase();if(r==="input"&&de.test(e.type)){t.checked=e.checked}else if(r==="input"||r==="textarea"){t.defaultValue=e.defaultValue}}function $e(r,n,i,a){n=v.apply([],n);var e,t,o,s,l,u,c=0,f=r.length,h=f-1,d=n[0],p=_(d);if(p||f>1&&typeof d==="string"&&!m.checkClone&&je.test(d)){return r.each(function(e){var t=r.eq(e);if(p){n[0]=d.call(this,e,t.html())}$e(t,n,i,a)})}if(f){e=be(n,r[0].ownerDocument,false,r,a);t=e.firstChild;if(e.childNodes.length===1){e=t}if(t||a){o=T.map(me(e,"script"),Pe);s=o.length;for(;c<f;c++){l=e;if(c!==h){l=T.clone(l,true,true);if(s){T.merge(o,me(l,"script"))}}i.call(r[c],l,c)}if(s){u=o[o.length-1].ownerDocument;T.map(o,Re);for(c=0;c<s;c++){l=o[c];if(ve.test(l.type||"")&&!Q.access(l,"globalEval")&&T.contains(u,l)){if(l.src&&(l.type||"").toLowerCase()!=="module"){if(T._evalUrl){T._evalUrl(l.src)}}else{b(l.textContent.replace(Ie,""),u,l)}}}}}}return r}function Fe(e,t,r){var n,i=t?T.filter(t,e):e,a=0;for(;(n=i[a])!=null;a++){if(!r&&n.nodeType===1){T.cleanData(me(n))}if(n.parentNode){if(r&&T.contains(n.ownerDocument,n)){_e(me(n,"script"))}n.parentNode.removeChild(n)}}return e}T.extend({htmlPrefilter:function e(t){return t.replace(Ae,"<$1></$2>")},clone:function e(t,r,n){var i,a,o,s,e=t.cloneNode(true),l=T.contains(t.ownerDocument,t);if(!m.noCloneChecked&&(t.nodeType===1||t.nodeType===11)&&!T.isXMLDoc(t)){s=me(e);o=me(t);for(i=0,a=o.length;i<a;i++){Ne(o[i],s[i])}}if(r){if(n){o=o||me(t);s=s||me(e);for(i=0,a=o.length;i<a;i++){Le(o[i],s[i])}}else{Le(t,e)}}s=me(e,"script");if(s.length>0){_e(s,!l&&me(t,"script"))}return e},cleanData:function e(t){var r,n,i,a=T.event.special,o=0;for(;(n=t[o])!==undefined;o++){if(X(n)){if(r=n[Q.expando]){if(r.events){for(i in r.events){if(a[i]){T.event.remove(n,i)}else{T.removeEvent(n,i,r.handle)}}}n[Q.expando]=undefined}if(n[J.expando]){n[J.expando]=undefined}}}}});T.fn.extend({detach:function e(t){return Fe(this,t,true)},remove:function e(t){return Fe(this,t)},text:function e(t){return V(this,function(e){return e===undefined?T.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=e}})},null,t,arguments.length)},append:function e(){return $e(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=De(this,e);t.appendChild(e)}})},prepend:function e(){return $e(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=De(this,e);t.insertBefore(e,t.firstChild)}})},before:function e(){return $e(this,arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this)}})},after:function e(){return $e(this,arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this.nextSibling)}})},empty:function e(){var t,r=0;for(;(t=this[r])!=null;r++){if(t.nodeType===1){T.cleanData(me(t,false));t.textContent=""}}return this},clone:function e(t,r){t=t==null?false:t;r=r==null?t:r;return this.map(function(){return T.clone(this,t,r)})},html:function e(t){return V(this,function(e){var t=this[0]||{},r=0,n=this.length;if(e===undefined&&t.nodeType===1){return t.innerHTML}if(typeof e==="string"&&!ke.test(e)&&!ge[(pe.exec(e)||["",""])[1].toLowerCase()]){e=T.htmlPrefilter(e);try{for(;r<n;r++){t=this[r]||{};if(t.nodeType===1){T.cleanData(me(t,false));t.innerHTML=e}}t=0}catch(e){}}if(t){this.empty().append(e)}},null,t,arguments.length)},replaceWith:function e(){var r=[];return $e(this,arguments,function(e){var t=this.parentNode;if(T.inArray(this,r)<0){T.cleanData(me(this));if(t){t.replaceChild(e,this)}}},r)}});T.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,o){T.fn[e]=function(e){var t,r=[],n=T(e),i=n.length-1,a=0;for(;a<=i;a++){t=a===i?this:this.clone(true);T(n[a])[o](t);s.apply(r,t.get())}return this.pushStack(r)}});var Ge=new RegExp("^("+ie+")(?!px)[a-z%]+$","i");var Ue=function e(t){var r=t.ownerDocument.defaultView;if(!r||!r.opener){r=O}return r.getComputedStyle(t)};var He=new RegExp(oe.join("|"),"i");(function(){function t(){if(!u){return}l.style.cssText="position:absolute;left:-11111px;width:60px;"+"margin-top:1px;padding:0;border:0";u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;"+"margin:auto;border:1px;padding:1px;"+"width:60%;top:1%";we.appendChild(l).appendChild(u);var e=O.getComputedStyle(u);n=e.top!=="1%";s=r(e.marginLeft)===12;u.style.right="60%";o=r(e.right)===36;i=r(e.width)===36;u.style.position="absolute";a=u.offsetWidth===36||"absolute";we.removeChild(l);u=null}function r(e){return Math.round(parseFloat(e))}var n,i,a,o,s,l=x.createElement("div"),u=x.createElement("div");if(!u.style){return}u.style.backgroundClip="content-box";u.cloneNode(true).style.backgroundClip="";m.clearCloneStyle=u.style.backgroundClip==="content-box";T.extend(m,{boxSizingReliable:function e(){t();return i},pixelBoxStyles:function e(){t();return o},pixelPosition:function e(){t();return n},reliableMarginLeft:function e(){t();return s},scrollboxSize:function e(){t();return a}})})();function We(e,t,r){var n,i,a,o,s=e.style;r=r||Ue(e);if(r){o=r.getPropertyValue(t)||r[t];if(o===""&&!T.contains(e.ownerDocument,e)){o=T.style(e,t)}if(!m.pixelBoxStyles()&&Ge.test(o)&&He.test(t)){n=s.width;i=s.minWidth;a=s.maxWidth;s.minWidth=s.maxWidth=s.width=o;o=r.width;s.width=n;s.minWidth=i;s.maxWidth=a}}return o!==undefined?o+"":o}function Ye(t,r){return{get:function e(){if(t()){delete this.get;return}return(this.get=r).apply(this,arguments)}}}var Ve=/^(none|table(?!-c[ea]).+)/,qe=/^--/,ze={position:"absolute",visibility:"hidden",display:"block"},Be={letterSpacing:"0",fontWeight:"400"},Ke=["Webkit","Moz","ms"],Xe=x.createElement("div").style;function Ze(e){if(e in Xe){return e}var t=e[0].toUpperCase()+e.slice(1),r=Ke.length;while(r--){e=Ke[r]+t;if(e in Xe){return e}}}function Qe(e){var t=T.cssProps[e];if(!t){t=T.cssProps[e]=Ze(e)||e}return t}function Je(e,t,r){var n=ae.exec(t);return n?Math.max(0,n[2]-(r||0))+(n[3]||"px"):t}function et(e,t,r,n,i,a){var o=t==="width"?1:0,s=0,l=0;if(r===(n?"border":"content")){return 0}for(;o<4;o+=2){if(r==="margin"){l+=T.css(e,r+oe[o],true,i)}if(!n){l+=T.css(e,"padding"+oe[o],true,i);if(r!=="padding"){l+=T.css(e,"border"+oe[o]+"Width",true,i)}else{s+=T.css(e,"border"+oe[o]+"Width",true,i)}}else{if(r==="content"){l-=T.css(e,"padding"+oe[o],true,i)}if(r!=="margin"){l-=T.css(e,"border"+oe[o]+"Width",true,i)}}}if(!n&&a>=0){l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-l-s-.5))}return l}function tt(e,t,r){var n=Ue(e),i=We(e,t,n),a=T.css(e,"boxSizing",false,n)==="border-box",o=a;if(Ge.test(i)){if(!r){return i}i="auto"}o=o&&(m.boxSizingReliable()||i===e.style[t]);if(i==="auto"||!parseFloat(i)&&T.css(e,"display",false,n)==="inline"){i=e["offset"+t[0].toUpperCase()+t.slice(1)];o=true}i=parseFloat(i)||0;return i+et(e,t,r||(a?"border":"content"),o,n,i)+"px"}T.extend({cssHooks:{opacity:{get:function e(t,r){if(r){var n=We(t,"opacity");return n===""?"1":n}}}},cssNumber:{animationIterationCount:true,columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{},style:function e(t,r,n,i){if(!t||t.nodeType===3||t.nodeType===8||!t.style){return}var a,o,s,l=K(r),u=qe.test(r),e=t.style;if(!u){r=Qe(l)}s=T.cssHooks[r]||T.cssHooks[l];if(n!==undefined){o=typeof n;if(o==="string"&&(a=ae.exec(n))&&a[1]){n=ue(t,r,a);o="number"}if(n==null||n!==n){return}if(o==="number"){n+=a&&a[3]||(T.cssNumber[l]?"":"px")}if(!m.clearCloneStyle&&n===""&&r.indexOf("background")===0){e[r]="inherit"}if(!s||!("set"in s)||(n=s.set(t,n,i))!==undefined){if(u){e.setProperty(r,n)}else{e[r]=n}}}else{if(s&&"get"in s&&(a=s.get(t,false,i))!==undefined){return a}return e[r]}},css:function e(t,r,n,i){var a,o,s,l=K(r),u=qe.test(r);if(!u){r=Qe(l)}s=T.cssHooks[r]||T.cssHooks[l];if(s&&"get"in s){a=s.get(t,true,n)}if(a===undefined){a=We(t,r,i)}if(a==="normal"&&r in Be){a=Be[r]}if(n===""||n){o=parseFloat(a);return n===true||isFinite(o)?o||0:a}return a}});T.each(["height","width"],function(e,l){T.cssHooks[l]={get:function e(t,r,n){if(r){return Ve.test(T.css(t,"display"))&&(!t.getClientRects().length||!t.getBoundingClientRect().width)?le(t,ze,function(){return tt(t,l,n)}):tt(t,l,n)}},set:function e(t,r,n){var i,a=Ue(t),o=T.css(t,"boxSizing",false,a)==="border-box",s=n&&et(t,l,n,o,a);if(o&&m.scrollboxSize()===a.position){s-=Math.ceil(t["offset"+l[0].toUpperCase()+l.slice(1)]-parseFloat(a[l])-et(t,l,"border",false,a)-.5)}if(s&&(i=ae.exec(r))&&(i[3]||"px")!=="px"){t.style[l]=r;r=T.css(t,l)}return Je(t,r,s)}}});T.cssHooks.marginLeft=Ye(m.reliableMarginLeft,function(e,t){if(t){return(parseFloat(We(e,"marginLeft"))||e.getBoundingClientRect().left-le(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}});T.each({margin:"",padding:"",border:"Width"},function(a,o){T.cssHooks[a+o]={expand:function e(t){var r=0,n={},i=typeof t==="string"?t.split(" "):[t];for(;r<4;r++){n[a+oe[r]+o]=i[r]||i[r-2]||i[0]}return n}};if(a!=="margin"){T.cssHooks[a+o].set=Je}});T.fn.extend({css:function e(t,r){return V(this,function(e,t,r){var n,i,a={},o=0;if(Array.isArray(t)){n=Ue(e);i=t.length;for(;o<i;o++){a[t[o]]=T.css(e,t[o],false,n)}return a}return r!==undefined?T.style(e,t,r):T.css(e,t)},t,r,arguments.length>1)}});function rt(e,t,r,n,i){return new rt.prototype.init(e,t,r,n,i)}T.Tween=rt;rt.prototype={constructor:rt,init:function e(t,r,n,i,a,o){this.elem=t;this.prop=n;this.easing=a||T.easing._default;this.options=r;this.start=this.now=this.cur();this.end=i;this.unit=o||(T.cssNumber[n]?"":"px")},cur:function e(){var t=rt.propHooks[this.prop];return t&&t.get?t.get(this):rt.propHooks._default.get(this)},run:function e(t){var r,n=rt.propHooks[this.prop];if(this.options.duration){this.pos=r=T.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration)}else{this.pos=r=t}this.now=(this.end-this.start)*r+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(n&&n.set){n.set(this)}else{rt.propHooks._default.set(this)}return this}};rt.prototype.init.prototype=rt.prototype;rt.propHooks={_default:{get:function e(t){var r;if(t.elem.nodeType!==1||t.elem[t.prop]!=null&&t.elem.style[t.prop]==null){return t.elem[t.prop]}r=T.css(t.elem,t.prop,"");return!r||r==="auto"?0:r},set:function e(t){if(T.fx.step[t.prop]){T.fx.step[t.prop](t)}else if(t.elem.nodeType===1&&(t.elem.style[T.cssProps[t.prop]]!=null||T.cssHooks[t.prop])){T.style(t.elem,t.prop,t.now+t.unit)}else{t.elem[t.prop]=t.now}}}};rt.propHooks.scrollTop=rt.propHooks.scrollLeft={set:function e(t){if(t.elem.nodeType&&t.elem.parentNode){t.elem[t.prop]=t.now}}};T.easing={linear:function e(t){return t},swing:function e(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"};T.fx=rt.prototype.init;T.fx.step={};var nt,it,at=/^(?:toggle|show|hide)$/,ot=/queueHooks$/;function st(){if(it){if(x.hidden===false&&O.requestAnimationFrame){O.requestAnimationFrame(st)}else{O.setTimeout(st,T.fx.interval)}T.fx.tick()}}function lt(){O.setTimeout(function(){nt=undefined});return nt=Date.now()}function ut(e,t){var r,n=0,i={height:e};t=t?1:0;for(;n<4;n+=2-t){r=oe[n];i["margin"+r]=i["padding"+r]=e}if(t){i.opacity=i.width=e}return i}function ct(e,t,r){var n,i=(dt.tweeners[t]||[]).concat(dt.tweeners["*"]),a=0,o=i.length;for(;a<o;a++){if(n=i[a].call(r,t,e)){return n}}}function ft(e,t,r){var n,i,a,o,s,l,u,c,f="width"in t||"height"in t,h=this,d={},p=e.style,v=e.nodeType&&se(e),g=Q.get(e,"fxshow");if(!r.queue){o=T._queueHooks(e,"fx");if(o.unqueued==null){o.unqueued=0;s=o.empty.fire;o.empty.fire=function(){if(!o.unqueued){s()}}}o.unqueued++;h.always(function(){h.always(function(){o.unqueued--;if(!T.queue(e,"fx").length){o.empty.fire()}})})}for(n in t){i=t[n];if(at.test(i)){delete t[n];a=a||i==="toggle";if(i===(v?"hide":"show")){if(i==="show"&&g&&g[n]!==undefined){v=true}else{continue}}d[n]=g&&g[n]||T.style(e,n)}}l=!T.isEmptyObject(t);if(!l&&T.isEmptyObject(d)){return}if(f&&e.nodeType===1){r.overflow=[p.overflow,p.overflowX,p.overflowY];u=g&&g.display;if(u==null){u=Q.get(e,"display")}c=T.css(e,"display");if(c==="none"){if(u){c=u}else{he([e],true);u=e.style.display||u;c=T.css(e,"display");he([e])}}if(c==="inline"||c==="inline-block"&&u!=null){if(T.css(e,"float")==="none"){if(!l){h.done(function(){p.display=u});if(u==null){c=p.display;u=c==="none"?"":c}}p.display="inline-block"}}}if(r.overflow){p.overflow="hidden";h.always(function(){p.overflow=r.overflow[0];p.overflowX=r.overflow[1];p.overflowY=r.overflow[2]})}l=false;for(n in d){if(!l){if(g){if("hidden"in g){v=g.hidden}}else{g=Q.access(e,"fxshow",{display:u})}if(a){g.hidden=!v}if(v){he([e],true)}h.done(function(){if(!v){he([e])}Q.remove(e,"fxshow");for(n in d){T.style(e,n,d[n])}})}l=ct(v?g[n]:0,n,h);if(!(n in g)){g[n]=l.start;if(v){l.end=l.start;l.start=0}}}}function ht(e,t){var r,n,i,a,o;for(r in e){n=K(r);i=t[n];a=e[r];if(Array.isArray(a)){i=a[1];a=e[r]=a[0]}if(r!==n){e[n]=a;delete e[r]}o=T.cssHooks[n];if(o&&"expand"in o){a=o.expand(a);delete e[n];for(r in a){if(!(r in e)){e[r]=a[r];t[r]=i}}}else{t[n]=i}}}function dt(s,e,t){var r,l,n=0,i=dt.prefilters.length,u=T.Deferred().always(function(){delete a.elem}),a=function e(){if(l){return false}var t=nt||lt(),r=Math.max(0,c.startTime+c.duration-t),n=r/c.duration||0,i=1-n,a=0,o=c.tweens.length;for(;a<o;a++){c.tweens[a].run(i)}u.notifyWith(s,[c,i,r]);if(i<1&&o){return r}if(!o){u.notifyWith(s,[c,1,0])}u.resolveWith(s,[c]);return false},c=u.promise({elem:s,props:T.extend({},e),opts:T.extend(true,{specialEasing:{},easing:T.easing._default},t),originalProperties:e,originalOptions:t,startTime:nt||lt(),duration:t.duration,tweens:[],createTween:function e(t,r){var n=T.Tween(s,c.opts,t,r,c.opts.specialEasing[t]||c.opts.easing);c.tweens.push(n);return n},stop:function e(t){var r=0,n=t?c.tweens.length:0;if(l){return this}l=true;for(;r<n;r++){c.tweens[r].run(1)}if(t){u.notifyWith(s,[c,1,0]);u.resolveWith(s,[c,t])}else{u.rejectWith(s,[c,t])}return this}}),o=c.props;ht(o,c.opts.specialEasing);for(;n<i;n++){r=dt.prefilters[n].call(c,s,o,c.opts);if(r){if(_(r.stop)){T._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)}return r}}T.map(o,ct,c);if(_(c.opts.start)){c.opts.start.call(s,c)}c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always);T.fx.timer(T.extend(a,{elem:s,anim:c,queue:c.opts.queue}));return c}T.Animation=T.extend(dt,{tweeners:{"*":[function(e,t){var r=this.createTween(e,t);ue(r.elem,e,ae.exec(t),r);return r}]},tweener:function e(t,r){if(_(t)){r=t;t=["*"]}else{t=t.match(N)}var n,i=0,a=t.length;for(;i<a;i++){n=t[i];dt.tweeners[n]=dt.tweeners[n]||[];dt.tweeners[n].unshift(r)}},prefilters:[ft],prefilter:function e(t,r){if(r){dt.prefilters.unshift(t)}else{dt.prefilters.push(t)}}});T.speed=function(e,t,r){var n=e&&typeof e==="object"?T.extend({},e):{complete:r||!r&&t||_(e)&&e,duration:e,easing:r&&t||t&&!_(t)&&t};if(T.fx.off){n.duration=0}else{if(typeof n.duration!=="number"){if(n.duration in T.fx.speeds){n.duration=T.fx.speeds[n.duration]}else{n.duration=T.fx.speeds._default}}}if(n.queue==null||n.queue===true){n.queue="fx"}n.old=n.complete;n.complete=function(){if(_(n.old)){n.old.call(this)}if(n.queue){T.dequeue(this,n.queue)}};return n};T.fn.extend({fadeTo:function e(t,r,n,i){return this.filter(se).css("opacity",0).show().end().animate({opacity:r},t,n,i)},animate:function e(r,t,n,i){var a=T.isEmptyObject(r),o=T.speed(t,n,i),s=function e(){var t=dt(this,T.extend({},r),o);if(a||Q.get(this,"finish")){t.stop(true)}};s.finish=s;return a||o.queue===false?this.each(s):this.queue(o.queue,s)},stop:function e(i,t,a){var o=function e(t){var r=t.stop;delete t.stop;r(a)};if(typeof i!=="string"){a=t;t=i;i=undefined}if(t&&i!==false){this.queue(i||"fx",[])}return this.each(function(){var e=true,t=i!=null&&i+"queueHooks",r=T.timers,n=Q.get(this);if(t){if(n[t]&&n[t].stop){o(n[t])}}else{for(t in n){if(n[t]&&n[t].stop&&ot.test(t)){o(n[t])}}}for(t=r.length;t--;){if(r[t].elem===this&&(i==null||r[t].queue===i)){r[t].anim.stop(a);e=false;r.splice(t,1)}}if(e||!a){T.dequeue(this,i)}})},finish:function e(o){if(o!==false){o=o||"fx"}return this.each(function(){var e,t=Q.get(this),r=t[o+"queue"],n=t[o+"queueHooks"],i=T.timers,a=r?r.length:0;t.finish=true;T.queue(this,o,[]);if(n&&n.stop){n.stop.call(this,true)}for(e=i.length;e--;){if(i[e].elem===this&&i[e].queue===o){i[e].anim.stop(true);i.splice(e,1)}}for(e=0;e<a;e++){if(r[e]&&r[e].finish){r[e].finish.call(this)}}delete t.finish})}});T.each(["toggle","show","hide"],function(e,n){var i=T.fn[n];T.fn[n]=function(e,t,r){return e==null||typeof e==="boolean"?i.apply(this,arguments):this.animate(ut(n,true),e,t,r)}});T.each({slideDown:ut("show"),slideUp:ut("hide"),slideToggle:ut("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,n){T.fn[e]=function(e,t,r){return this.animate(n,e,t,r)}});T.timers=[];T.fx.tick=function(){var e,t=0,r=T.timers;nt=Date.now();for(;t<r.length;t++){e=r[t];if(!e()&&r[t]===e){r.splice(t--,1)}}if(!r.length){T.fx.stop()}nt=undefined};T.fx.timer=function(e){T.timers.push(e);T.fx.start()};T.fx.interval=13;T.fx.start=function(){if(it){return}it=true;st()};T.fx.stop=function(){it=null};T.fx.speeds={slow:600,fast:200,_default:400};T.fn.delay=function(n,e){n=T.fx?T.fx.speeds[n]||n:n;e=e||"fx";return this.queue(e,function(e,t){var r=O.setTimeout(e,n);t.stop=function(){O.clearTimeout(r)}})};(function(){var e=x.createElement("input"),t=x.createElement("select"),r=t.appendChild(x.createElement("option"));e.type="checkbox";m.checkOn=e.value!=="";m.optSelected=r.selected;e=x.createElement("input");e.value="t";e.type="radio";m.radioValue=e.value==="t"})();var pt,vt=T.expr.attrHandle;T.fn.extend({attr:function e(t,r){return V(this,T.attr,t,r,arguments.length>1)},removeAttr:function e(t){return this.each(function(){T.removeAttr(this,t)})}});T.extend({attr:function e(t,r,n){var i,a,o=t.nodeType;if(o===3||o===8||o===2){return}if(typeof t.getAttribute==="undefined"){return T.prop(t,r,n)}if(o!==1||!T.isXMLDoc(t)){a=T.attrHooks[r.toLowerCase()]||(T.expr.match.bool.test(r)?pt:undefined)}if(n!==undefined){if(n===null){T.removeAttr(t,r);return}if(a&&"set"in a&&(i=a.set(t,n,r))!==undefined){return i}t.setAttribute(r,n+"");return n}if(a&&"get"in a&&(i=a.get(t,r))!==null){return i}i=T.find.attr(t,r);return i==null?undefined:i},attrHooks:{type:{set:function e(t,r){if(!m.radioValue&&r==="radio"&&M(t,"input")){var n=t.value;t.setAttribute("type",r);if(n){t.value=n}return r}}}},removeAttr:function e(t,r){var n,i=0,a=r&&r.match(N);if(a&&t.nodeType===1){while(n=a[i++]){t.removeAttribute(n)}}}});pt={set:function e(t,r,n){if(r===false){T.removeAttr(t,n)}else{t.setAttribute(n,n)}return n}};T.each(T.expr.match.bool.source.match(/\w+/g),function(e,t){var o=vt[t]||T.find.attr;vt[t]=function(e,t,r){var n,i,a=t.toLowerCase();if(!r){i=vt[a];vt[a]=n;n=o(e,t,r)!=null?a:null;vt[a]=i}return n}});var gt=/^(?:input|select|textarea|button)$/i,mt=/^(?:a|area)$/i;T.fn.extend({prop:function e(t,r){return V(this,T.prop,t,r,arguments.length>1)},removeProp:function e(t){return this.each(function(){delete this[T.propFix[t]||t]})}});T.extend({prop:function e(t,r,n){var i,a,o=t.nodeType;if(o===3||o===8||o===2){return}if(o!==1||!T.isXMLDoc(t)){r=T.propFix[r]||r;a=T.propHooks[r]}if(n!==undefined){if(a&&"set"in a&&(i=a.set(t,n,r))!==undefined){return i}return t[r]=n}if(a&&"get"in a&&(i=a.get(t,r))!==null){return i}return t[r]},propHooks:{tabIndex:{get:function e(t){var r=T.find.attr(t,"tabindex");if(r){return parseInt(r,10)}if(gt.test(t.nodeName)||mt.test(t.nodeName)&&t.href){return 0}return-1}}},propFix:{for:"htmlFor",class:"className"}});if(!m.optSelected){T.propHooks.selected={get:function e(t){var r=t.parentNode;if(r&&r.parentNode){r.parentNode.selectedIndex}return null},set:function e(t){var r=t.parentNode;if(r){r.selectedIndex;if(r.parentNode){r.parentNode.selectedIndex}}}}}T.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){T.propFix[this.toLowerCase()]=this});function _t(e){var t=e.match(N)||[];return t.join(" ")}function yt(e){return e.getAttribute&&e.getAttribute("class")||""}function bt(e){if(Array.isArray(e)){return e}if(typeof e==="string"){return e.match(N)||[]}return[]}T.fn.extend({addClass:function e(t){var r,n,i,a,o,s,l,u=0;if(_(t)){return this.each(function(e){T(this).addClass(t.call(this,e,yt(this)))})}r=bt(t);if(r.length){while(n=this[u++]){a=yt(n);i=n.nodeType===1&&" "+_t(a)+" ";if(i){s=0;while(o=r[s++]){if(i.indexOf(" "+o+" ")<0){i+=o+" "}}l=_t(i);if(a!==l){n.setAttribute("class",l)}}}}return this},removeClass:function e(t){var r,n,i,a,o,s,l,u=0;if(_(t)){return this.each(function(e){T(this).removeClass(t.call(this,e,yt(this)))})}if(!arguments.length){return this.attr("class","")}r=bt(t);if(r.length){while(n=this[u++]){a=yt(n);i=n.nodeType===1&&" "+_t(a)+" ";if(i){s=0;while(o=r[s++]){while(i.indexOf(" "+o+" ")>-1){i=i.replace(" "+o+" "," ")}}l=_t(i);if(a!==l){n.setAttribute("class",l)}}}}return this},toggleClass:function e(i,t){var a=typeof i,o=a==="string"||Array.isArray(i);if(typeof t==="boolean"&&o){return t?this.addClass(i):this.removeClass(i)}if(_(i)){return this.each(function(e){T(this).toggleClass(i.call(this,e,yt(this),t),t)})}return this.each(function(){var e,t,r,n;if(o){t=0;r=T(this);n=bt(i);while(e=n[t++]){if(r.hasClass(e)){r.removeClass(e)}else{r.addClass(e)}}}else if(i===undefined||a==="boolean"){e=yt(this);if(e){Q.set(this,"__className__",e)}if(this.setAttribute){this.setAttribute("class",e||i===false?"":Q.get(this,"__className__")||"")}}})},hasClass:function e(t){var r,n,i=0;r=" "+t+" ";while(n=this[i++]){if(n.nodeType===1&&(" "+_t(yt(n))+" ").indexOf(r)>-1){return true}}return false}});var wt=/\r/g;T.fn.extend({val:function e(r){var n,t,i,a=this[0];if(!arguments.length){if(a){n=T.valHooks[a.type]||T.valHooks[a.nodeName.toLowerCase()];if(n&&"get"in n&&(t=n.get(a,"value"))!==undefined){return t}t=a.value;if(typeof t==="string"){return t.replace(wt,"")}return t==null?"":t}return}i=_(r);return this.each(function(e){var t;if(this.nodeType!==1){return}if(i){t=r.call(this,e,T(this).val())}else{t=r}if(t==null){t=""}else if(typeof t==="number"){t+=""}else if(Array.isArray(t)){t=T.map(t,function(e){return e==null?"":e+""})}n=T.valHooks[this.type]||T.valHooks[this.nodeName.toLowerCase()];if(!n||!("set"in n)||n.set(this,t,"value")===undefined){this.value=t}})}});T.extend({valHooks:{option:{get:function e(t){var r=T.find.attr(t,"value");return r!=null?r:_t(T.text(t))}},select:{get:function e(t){var r,n,i,a=t.options,o=t.selectedIndex,s=t.type==="select-one",l=s?null:[],u=s?o+1:a.length;if(o<0){i=u}else{i=s?o:0}for(;i<u;i++){n=a[i];if((n.selected||i===o)&&!n.disabled&&(!n.parentNode.disabled||!M(n.parentNode,"optgroup"))){r=T(n).val();if(s){return r}l.push(r)}}return l},set:function e(t,r){var n,i,a=t.options,o=T.makeArray(r),s=a.length;while(s--){i=a[s];if(i.selected=T.inArray(T.valHooks.option.get(i),o)>-1){n=true}}if(!n){t.selectedIndex=-1}return o}}}});T.each(["radio","checkbox"],function(){T.valHooks[this]={set:function e(t,r){if(Array.isArray(r)){return t.checked=T.inArray(T(t).val(),r)>-1}}};if(!m.checkOn){T.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value}}});m.focusin="onfocusin"in O;var St=/^(?:focusinfocus|focusoutblur)$/,Ct=function e(t){t.stopPropagation()};T.extend(T.event,{trigger:function e(t,r,n,i){var a,o,s,l,u,c,f,h,d=[n||x],p=g.call(t,"type")?t.type:t,v=g.call(t,"namespace")?t.namespace.split("."):[];o=h=s=n=n||x;if(n.nodeType===3||n.nodeType===8){return}if(St.test(p+T.event.triggered)){return}if(p.indexOf(".")>-1){v=p.split(".");p=v.shift();v.sort()}u=p.indexOf(":")<0&&"on"+p;t=t[T.expando]?t:new T.Event(p,typeof t==="object"&&t);t.isTrigger=i?2:3;t.namespace=v.join(".");t.rnamespace=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;t.result=undefined;if(!t.target){t.target=n}r=r==null?[t]:T.makeArray(r,[t]);f=T.event.special[p]||{};if(!i&&f.trigger&&f.trigger.apply(n,r)===false){return}if(!i&&!f.noBubble&&!y(n)){l=f.delegateType||p;if(!St.test(l+p)){o=o.parentNode}for(;o;o=o.parentNode){d.push(o);s=o}if(s===(n.ownerDocument||x)){d.push(s.defaultView||s.parentWindow||O)}}a=0;while((o=d[a++])&&!t.isPropagationStopped()){h=o;t.type=a>1?l:f.bindType||p;c=(Q.get(o,"events")||{})[t.type]&&Q.get(o,"handle");if(c){c.apply(o,r)}c=u&&o[u];if(c&&c.apply&&X(o)){t.result=c.apply(o,r);if(t.result===false){t.preventDefault()}}}t.type=p;if(!i&&!t.isDefaultPrevented()){if((!f._default||f._default.apply(d.pop(),r)===false)&&X(n)){if(u&&_(n[p])&&!y(n)){s=n[u];if(s){n[u]=null}T.event.triggered=p;if(t.isPropagationStopped()){h.addEventListener(p,Ct)}n[p]();if(t.isPropagationStopped()){h.removeEventListener(p,Ct)}T.event.triggered=undefined;if(s){n[u]=s}}}}return t.result},simulate:function e(t,r,n){var i=T.extend(new T.Event,n,{type:t,isSimulated:true});T.event.trigger(i,null,r)}});T.fn.extend({trigger:function e(t,r){return this.each(function(){T.event.trigger(t,r,this)})},triggerHandler:function e(t,r){var n=this[0];if(n){return T.event.trigger(t,r,n,true)}}});if(!m.focusin){T.each({focus:"focusin",blur:"focusout"},function(n,i){var a=function e(t){T.event.simulate(i,t.target,T.event.fix(t))};T.event.special[i]={setup:function e(){var t=this.ownerDocument||this,r=Q.access(t,i);if(!r){t.addEventListener(n,a,true)}Q.access(t,i,(r||0)+1)},teardown:function e(){var t=this.ownerDocument||this,r=Q.access(t,i)-1;if(!r){t.removeEventListener(n,a,true);Q.remove(t,i)}else{Q.access(t,i,r)}}}})}var Ot=O.location;var xt=Date.now();var Tt=/\?/;T.parseXML=function(e){var t;if(!e||typeof e!=="string"){return null}try{t=(new O.DOMParser).parseFromString(e,"text/xml")}catch(e){t=undefined}if(!t||t.getElementsByTagName("parsererror").length){T.error("Invalid XML: "+e)}return t};var Et=/\[\]$/,Mt=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,kt=/^(?:input|select|textarea|keygen)/i;function jt(r,e,n,i){var t;if(Array.isArray(e)){T.each(e,function(e,t){if(n||Et.test(r)){i(r,t)}else{jt(r+"["+(typeof t==="object"&&t!=null?e:"")+"]",t,n,i)}})}else if(!n&&w(e)==="object"){for(t in e){jt(r+"["+t+"]",e[t],n,i)}}else{i(r,e)}}T.param=function(e,t){var r,i=[],n=function e(t,r){var n=_(r)?r():r;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(n==null?"":n)};if(Array.isArray(e)||e.jquery&&!T.isPlainObject(e)){T.each(e,function(){n(this.name,this.value)})}else{for(r in e){jt(r,e[r],t,n)}}return i.join("&")};T.fn.extend({serialize:function e(){return T.param(this.serializeArray())},serializeArray:function e(){return this.map(function(){var e=T.prop(this,"elements");return e?T.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!T(this).is(":disabled")&&kt.test(this.nodeName)&&!At.test(e)&&(this.checked||!de.test(e))}).map(function(e,t){var r=T(this).val();if(r==null){return null}if(Array.isArray(r)){return T.map(r,function(e){return{name:t.name,value:e.replace(Mt,"\r\n")}})}return{name:t.name,value:r.replace(Mt,"\r\n")}}).get()}});var It=/%20/g,Dt=/#.*$/,Pt=/([?&])_=[^&]*/,Rt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Lt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Nt=/^(?:GET|HEAD)$/,$t=/^\/\//,Ft={},Gt={},Ut="*/".concat("*"),Ht=x.createElement("a");Ht.href=Ot.href;function Wt(a){return function(e,t){if(typeof e!=="string"){t=e;e="*"}var r,n=0,i=e.toLowerCase().match(N)||[];if(_(t)){while(r=i[n++]){if(r[0]==="+"){r=r.slice(1)||"*";(a[r]=a[r]||[]).unshift(t)}else{(a[r]=a[r]||[]).push(t)}}}}}function Yt(t,i,a,o){var s={},l=t===Gt;function u(e){var n;s[e]=true;T.each(t[e]||[],function(e,t){var r=t(i,a,o);if(typeof r==="string"&&!l&&!s[r]){i.dataTypes.unshift(r);u(r);return false}else if(l){return!(n=r)}});return n}return u(i.dataTypes[0])||!s["*"]&&u("*")}function Vt(e,t){var r,n,i=T.ajaxSettings.flatOptions||{};for(r in t){if(t[r]!==undefined){(i[r]?e:n||(n={}))[r]=t[r]}}if(n){T.extend(true,e,n)}return e}function qt(e,t,r){var n,i,a,o,s=e.contents,l=e.dataTypes;while(l[0]==="*"){l.shift();if(n===undefined){n=e.mimeType||t.getResponseHeader("Content-Type")}}if(n){for(i in s){if(s[i]&&s[i].test(n)){l.unshift(i);break}}}if(l[0]in r){a=l[0]}else{for(i in r){if(!l[0]||e.converters[i+" "+l[0]]){a=i;break}if(!o){o=i}}a=a||o}if(a){if(a!==l[0]){l.unshift(a)}return r[a]}}function zt(e,t,r,n){var i,a,o,s,l,u={},c=e.dataTypes.slice();if(c[1]){for(o in e.converters){u[o.toLowerCase()]=e.converters[o]}}a=c.shift();while(a){if(e.responseFields[a]){r[e.responseFields[a]]=t}if(!l&&n&&e.dataFilter){t=e.dataFilter(t,e.dataType)}l=a;a=c.shift();if(a){if(a==="*"){a=l}else if(l!=="*"&&l!==a){o=u[l+" "+a]||u["* "+a];if(!o){for(i in u){s=i.split(" ");if(s[1]===a){o=u[l+" "+s[0]]||u["* "+s[0]];if(o){if(o===true){o=u[i]}else if(u[i]!==true){a=s[0];c.unshift(s[1])}break}}}}if(o!==true){if(o&&e.throws){t=o(t)}else{try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+a}}}}}}}return{state:"success",data:t}}T.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ot.href,type:"GET",isLocal:Lt.test(Ot.protocol),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ut,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":JSON.parse,"text xml":T.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function e(t,r){return r?Vt(Vt(t,T.ajaxSettings),r):Vt(T.ajaxSettings,t)},ajaxPrefilter:Wt(Ft),ajaxTransport:Wt(Gt),ajax:function e(t,r){if(typeof t==="object"){r=t;t=undefined}r=r||{};var c,f,h,n,d,i,p,v,a,o,g=T.ajaxSetup({},r),m=g.context||g,_=g.context&&(m.nodeType||m.jquery)?T(m):T.event,y=T.Deferred(),b=T.Callbacks("once memory"),w=g.statusCode||{},s={},l={},u="canceled",S={readyState:0,getResponseHeader:function e(t){var r;if(p){if(!n){n={};while(r=Rt.exec(h)){n[r[1].toLowerCase()]=r[2]}}r=n[t.toLowerCase()]}return r==null?null:r},getAllResponseHeaders:function e(){return p?h:null},setRequestHeader:function e(t,r){if(p==null){t=l[t.toLowerCase()]=l[t.toLowerCase()]||t;s[t]=r}return this},overrideMimeType:function e(t){if(p==null){g.mimeType=t}return this},statusCode:function e(t){var r;if(t){if(p){S.always(t[S.status])}else{for(r in t){w[r]=[w[r],t[r]]}}}return this},abort:function e(t){var r=t||u;if(c){c.abort(r)}C(0,r);return this}};y.promise(S);g.url=((t||g.url||Ot.href)+"").replace($t,Ot.protocol+"//");g.type=r.method||r.type||g.method||g.type;g.dataTypes=(g.dataType||"*").toLowerCase().match(N)||[""];if(g.crossDomain==null){i=x.createElement("a");try{i.href=g.url;i.href=i.href;g.crossDomain=Ht.protocol+"//"+Ht.host!==i.protocol+"//"+i.host}catch(e){g.crossDomain=true}}if(g.data&&g.processData&&typeof g.data!=="string"){g.data=T.param(g.data,g.traditional)}Yt(Ft,g,r,S);if(p){return S}v=T.event&&g.global;if(v&&T.active++===0){T.event.trigger("ajaxStart")}g.type=g.type.toUpperCase();g.hasContent=!Nt.test(g.type);f=g.url.replace(Dt,"");if(!g.hasContent){o=g.url.slice(f.length);if(g.data&&(g.processData||typeof g.data==="string")){f+=(Tt.test(f)?"&":"?")+g.data;delete g.data}if(g.cache===false){f=f.replace(Pt,"$1");o=(Tt.test(f)?"&":"?")+"_="+xt+++o}g.url=f+o}else if(g.data&&g.processData&&(g.contentType||"").indexOf("application/x-www-form-urlencoded")===0){g.data=g.data.replace(It,"+")}if(g.ifModified){if(T.lastModified[f]){S.setRequestHeader("If-Modified-Since",T.lastModified[f])}if(T.etag[f]){S.setRequestHeader("If-None-Match",T.etag[f])}}if(g.data&&g.hasContent&&g.contentType!==false||r.contentType){S.setRequestHeader("Content-Type",g.contentType)}S.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+(g.dataTypes[0]!=="*"?", "+Ut+"; q=0.01":""):g.accepts["*"]);for(a in g.headers){S.setRequestHeader(a,g.headers[a])}if(g.beforeSend&&(g.beforeSend.call(m,S,g)===false||p)){return S.abort()}u="abort";b.add(g.complete);S.done(g.success);S.fail(g.error);c=Yt(Gt,g,r,S);if(!c){C(-1,"No Transport")}else{S.readyState=1;if(v){_.trigger("ajaxSend",[S,g])}if(p){return S}if(g.async&&g.timeout>0){d=O.setTimeout(function(){S.abort("timeout")},g.timeout)}try{p=false;c.send(s,C)}catch(e){if(p){throw e}C(-1,e)}}function C(e,t,r,n){var i,a,o,s,l,u=t;if(p){return}p=true;if(d){O.clearTimeout(d)}c=undefined;h=n||"";S.readyState=e>0?4:0;i=e>=200&&e<300||e===304;if(r){s=qt(g,S,r)}s=zt(g,s,S,i);if(i){if(g.ifModified){l=S.getResponseHeader("Last-Modified");if(l){T.lastModified[f]=l}l=S.getResponseHeader("etag");if(l){T.etag[f]=l}}if(e===204||g.type==="HEAD"){u="nocontent"}else if(e===304){u="notmodified"}else{u=s.state;a=s.data;o=s.error;i=!o}}else{o=u;if(e||!u){u="error";if(e<0){e=0}}}S.status=e;S.statusText=(t||u)+"";if(i){y.resolveWith(m,[a,u,S])}else{y.rejectWith(m,[S,u,o])}S.statusCode(w);w=undefined;if(v){_.trigger(i?"ajaxSuccess":"ajaxError",[S,g,i?a:o])}b.fireWith(m,[S,u]);if(v){_.trigger("ajaxComplete",[S,g]);if(!--T.active){T.event.trigger("ajaxStop")}}}return S},getJSON:function e(t,r,n){return T.get(t,r,n,"json")},getScript:function e(t,r){return T.get(t,undefined,r,"script")}});T.each(["get","post"],function(e,i){T[i]=function(e,t,r,n){if(_(t)){n=n||r;r=t;t=undefined}return T.ajax(T.extend({url:e,type:i,dataType:n,data:t,success:r},T.isPlainObject(e)&&e))}});T._evalUrl=function(e){return T.ajax({url:e,type:"GET",dataType:"script",cache:true,async:false,global:false,throws:true})};T.fn.extend({wrapAll:function e(t){var r;if(this[0]){if(_(t)){t=t.call(this[0])}r=T(t,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){r.insertBefore(this[0])}r.map(function(){var e=this;while(e.firstElementChild){e=e.firstElementChild}return e}).append(this)}return this},wrapInner:function e(r){if(_(r)){return this.each(function(e){T(this).wrapInner(r.call(this,e))})}return this.each(function(){var e=T(this),t=e.contents();if(t.length){t.wrapAll(r)}else{e.append(r)}})},wrap:function e(t){var r=_(t);return this.each(function(e){T(this).wrapAll(r?t.call(this,e):t)})},unwrap:function e(t){this.parent(t).not("body").each(function(){T(this).replaceWith(this.childNodes)});return this}});T.expr.pseudos.hidden=function(e){return!T.expr.pseudos.visible(e)};T.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)};T.ajaxSettings.xhr=function(){try{return new O.XMLHttpRequest}catch(e){}};var Bt={0:200,1223:204},Kt=T.ajaxSettings.xhr();m.cors=!!Kt&&"withCredentials"in Kt;m.ajax=Kt=!!Kt;T.ajaxTransport(function(a){var o,s;if(m.cors||Kt&&!a.crossDomain){return{send:function e(t,r){var n,i=a.xhr();i.open(a.type,a.url,a.async,a.username,a.password);if(a.xhrFields){for(n in a.xhrFields){i[n]=a.xhrFields[n]}}if(a.mimeType&&i.overrideMimeType){i.overrideMimeType(a.mimeType)}if(!a.crossDomain&&!t["X-Requested-With"]){t["X-Requested-With"]="XMLHttpRequest"}for(n in t){i.setRequestHeader(n,t[n])}o=function e(t){return function(){if(o){o=s=i.onload=i.onerror=i.onabort=i.ontimeout=i.onreadystatechange=null;if(t==="abort"){i.abort()}else if(t==="error"){if(typeof i.status!=="number"){r(0,"error")}else{r(i.status,i.statusText)}}else{r(Bt[i.status]||i.status,i.statusText,(i.responseType||"text")!=="text"||typeof i.responseText!=="string"?{binary:i.response}:{text:i.responseText},i.getAllResponseHeaders())}}}};i.onload=o();s=i.onerror=i.ontimeout=o("error");if(i.onabort!==undefined){i.onabort=s}else{i.onreadystatechange=function(){if(i.readyState===4){O.setTimeout(function(){if(o){s()}})}}}o=o("abort");try{i.send(a.hasContent&&a.data||null)}catch(e){if(o){throw e}}},abort:function e(){if(o){o()}}}}});T.ajaxPrefilter(function(e){if(e.crossDomain){e.contents.script=false}});T.ajaxSetup({accepts:{script:"text/javascript, application/javascript, "+"application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function e(t){T.globalEval(t);return t}}});T.ajaxPrefilter("script",function(e){if(e.cache===undefined){e.cache=false}if(e.crossDomain){e.type="GET"}});T.ajaxTransport("script",function(n){if(n.crossDomain){var i,a;return{send:function e(t,r){i=T("<script>").prop({charset:n.scriptCharset,src:n.url}).on("load error",a=function e(t){i.remove();a=null;if(t){r(t.type==="error"?404:200,t.type)}});x.head.appendChild(i[0])},abort:function e(){if(a){a()}}}}});var Xt=[],Zt=/(=)\?(?=&|$)|\?\?/;T.ajaxSetup({jsonp:"callback",jsonpCallback:function e(){var t=Xt.pop()||T.expando+"_"+xt++;this[t]=true;return t}});T.ajaxPrefilter("json jsonp",function(e,t,r){var n,i,a,o=e.jsonp!==false&&(Zt.test(e.url)?"url":typeof e.data==="string"&&(e.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Zt.test(e.data)&&"data");if(o||e.dataTypes[0]==="jsonp"){n=e.jsonpCallback=_(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback;if(o){e[o]=e[o].replace(Zt,"$1"+n)}else if(e.jsonp!==false){e.url+=(Tt.test(e.url)?"&":"?")+e.jsonp+"="+n}e.converters["script json"]=function(){if(!a){T.error(n+" was not called")}return a[0]};e.dataTypes[0]="json";i=O[n];O[n]=function(){a=arguments};r.always(function(){if(i===undefined){T(O).removeProp(n)}else{O[n]=i}if(e[n]){e.jsonpCallback=t.jsonpCallback;Xt.push(n)}if(a&&_(i)){i(a[0])}a=i=undefined});return"script"}});m.createHTMLDocument=function(){var e=x.implementation.createHTMLDocument("").body;e.innerHTML="<form></form><form></form>";return e.childNodes.length===2}();T.parseHTML=function(e,t,r){if(typeof e!=="string"){return[]}if(typeof t==="boolean"){r=t;t=false}var n,i,a;if(!t){if(m.createHTMLDocument){t=x.implementation.createHTMLDocument("");n=t.createElement("base");n.href=x.location.href;t.head.appendChild(n)}else{t=x}}i=A.exec(e);a=!r&&[];if(i){return[t.createElement(i[1])]}i=be([e],t,a);if(a&&a.length){T(a).remove()}return T.merge([],i.childNodes)};T.fn.load=function(e,t,r){var n,i,a,o=this,s=e.indexOf(" ");if(s>-1){n=_t(e.slice(s));e=e.slice(0,s)}if(_(t)){r=t;t=undefined}else if(t&&typeof t==="object"){i="POST"}if(o.length>0){T.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){a=arguments;o.html(n?T("<div>").append(T.parseHTML(e)).find(n):e)}).always(r&&function(e,t){o.each(function(){r.apply(this,a||[e.responseText,t,e])})})}return this};T.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){T.fn[t]=function(e){return this.on(t,e)}});T.expr.pseudos.animated=function(t){return T.grep(T.timers,function(e){return t===e.elem}).length};T.offset={setOffset:function e(t,r,n){var i,a,o,s,l,u,c,f=T.css(t,"position"),h=T(t),d={};if(f==="static"){t.style.position="relative"}l=h.offset();o=T.css(t,"top");u=T.css(t,"left");c=(f==="absolute"||f==="fixed")&&(o+u).indexOf("auto")>-1;if(c){i=h.position();s=i.top;a=i.left}else{s=parseFloat(o)||0;a=parseFloat(u)||0}if(_(r)){r=r.call(t,n,T.extend({},l))}if(r.top!=null){d.top=r.top-l.top+s}if(r.left!=null){d.left=r.left-l.left+a}if("using"in r){r.using.call(t,d)}else{h.css(d)}}};T.fn.extend({offset:function e(t){if(arguments.length){return t===undefined?this:this.each(function(e){T.offset.setOffset(this,t,e)})}var r,n,i=this[0];if(!i){return}if(!i.getClientRects().length){return{top:0,left:0}}r=i.getBoundingClientRect();n=i.ownerDocument.defaultView;return{top:r.top+n.pageYOffset,left:r.left+n.pageXOffset}},position:function e(){if(!this[0]){return}var t,r,n,i=this[0],a={top:0,left:0};if(T.css(i,"position")==="fixed"){r=i.getBoundingClientRect()}else{r=this.offset();n=i.ownerDocument;t=i.offsetParent||n.documentElement;while(t&&(t===n.body||t===n.documentElement)&&T.css(t,"position")==="static"){t=t.parentNode}if(t&&t!==i&&t.nodeType===1){a=T(t).offset();a.top+=T.css(t,"borderTopWidth",true);a.left+=T.css(t,"borderLeftWidth",true)}}return{top:r.top-a.top-T.css(i,"marginTop",true),left:r.left-a.left-T.css(i,"marginLeft",true)}},offsetParent:function e(){return this.map(function(){var e=this.offsetParent;while(e&&T.css(e,"position")==="static"){e=e.offsetParent}return e||we})}});T.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var a="pageYOffset"===i;T.fn[t]=function(e){return V(this,function(e,t,r){var n;if(y(e)){n=e}else if(e.nodeType===9){n=e.defaultView}if(r===undefined){return n?n[i]:e[t]}if(n){n.scrollTo(!a?r:n.pageXOffset,a?r:n.pageYOffset)}else{e[t]=r}},t,e,arguments.length)}});T.each(["top","left"],function(e,r){T.cssHooks[r]=Ye(m.pixelPosition,function(e,t){if(t){t=We(e,r);return Ge.test(t)?T(e).position()[r]+"px":t}})});T.each({Height:"height",Width:"width"},function(o,s){T.each({padding:"inner"+o,content:s,"":"outer"+o},function(n,a){T.fn[a]=function(e,t){var r=arguments.length&&(n||typeof e!=="boolean"),i=n||(e===true||t===true?"margin":"border");return V(this,function(e,t,r){var n;if(y(e)){return a.indexOf("outer")===0?e["inner"+o]:e.document.documentElement["client"+o]}if(e.nodeType===9){n=e.documentElement;return Math.max(e.body["scroll"+o],n["scroll"+o],e.body["offset"+o],n["offset"+o],n["client"+o])}return r===undefined?T.css(e,t,i):T.style(e,t,r,i)},s,r?e:undefined,r)}})});T.each(("blur focus focusin focusout resize scroll click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup contextmenu").split(" "),function(e,r){T.fn[r]=function(e,t){return arguments.length>0?this.on(r,null,e,t):this.trigger(r)}});T.fn.extend({hover:function e(t,r){return this.mouseenter(t).mouseleave(r||t)}});T.fn.extend({bind:function e(t,r,n){return this.on(t,null,r,n)},unbind:function e(t,r){return this.off(t,null,r)},delegate:function e(t,r,n,i){return this.on(r,t,n,i)},undelegate:function e(t,r,n){return arguments.length===1?this.off(t,"**"):this.off(r,t||"**",n)}});T.proxy=function(t,r){var e,n,i;if(typeof r==="string"){e=t[r];r=t;t=e}if(!_(t)){return undefined}n=l.call(arguments,2);i=function e(){return t.apply(r||this,n.concat(l.call(arguments)))};i.guid=t.guid=t.guid||T.guid++;return i};T.holdReady=function(e){if(e){T.readyWait++}else{T.ready(true)}};T.isArray=Array.isArray;T.parseJSON=JSON.parse;T.nodeName=M;T.isFunction=_;T.isWindow=y;T.camelCase=K;T.type=w;T.now=Date.now;T.isNumeric=function(e){var t=T.type(e);return(t==="number"||t==="string")&&!isNaN(e-parseFloat(e))};if(true){!(rr=[],nr=function(){return T}.apply(tr,rr),nr!==undefined&&(er.exports=nr))}var Qt=O.jQuery,Jt=O.$;T.noConflict=function(e){if(O.$===T){O.$=Jt}if(e&&O.jQuery===T){O.jQuery=Qt}return T};if(!e){O.jQuery=O.$=T}return T})},function(e,t,r){"use strict";var i=r(134);var n=r(88);var a={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};var o=r(9);var s=function(n){function e(e){var t=e?e:{};var r=Object(o["a"])({},t);delete r.preload;delete r.useInterimTilesOnError;n.call(this,r);this.setPreload(t.preload!==undefined?t.preload:0);this.setUseInterimTilesOnError(t.useInterimTilesOnError!==undefined?t.useInterimTilesOnError:true);this.type=i["a"].TILE}if(n)e.__proto__=n;e.prototype=Object.create(n&&n.prototype);e.prototype.constructor=e;e.prototype.getPreload=function e(){return this.get(a.PRELOAD)};e.prototype.setPreload=function e(t){this.set(a.PRELOAD,t)};e.prototype.getUseInterimTilesOnError=function e(){return this.get(a.USE_INTERIM_TILES_ON_ERROR)};e.prototype.setUseInterimTilesOnError=function e(t){this.set(a.USE_INTERIM_TILES_ON_ERROR,t)};return e}(n["a"]);s.prototype.getSource;var l=t["a"]=s},function(e,t,r){"use strict";var n=r(5);var i=function e(t){var r=t||{};this.color_=r.color!==undefined?r.color:null;this.lineCap_=r.lineCap;this.lineDash_=r.lineDash!==undefined?r.lineDash:null;this.lineDashOffset_=r.lineDashOffset;this.lineJoin_=r.lineJoin;this.miterLimit_=r.miterLimit;this.width_=r.width;this.checksum_=undefined};i.prototype.clone=function e(){var t=this.getColor();return new i({color:Array.isArray(t)?t.slice():t||undefined,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():undefined,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})};i.prototype.getColor=function e(){return this.color_};i.prototype.getLineCap=function e(){return this.lineCap_};i.prototype.getLineDash=function e(){return this.lineDash_};i.prototype.getLineDashOffset=function e(){return this.lineDashOffset_};i.prototype.getLineJoin=function e(){return this.lineJoin_};i.prototype.getMiterLimit=function e(){return this.miterLimit_};i.prototype.getWidth=function e(){return this.width_};i.prototype.setColor=function e(t){this.color_=t;this.checksum_=undefined};i.prototype.setLineCap=function e(t){this.lineCap_=t;this.checksum_=undefined};i.prototype.setLineDash=function e(t){this.lineDash_=t;this.checksum_=undefined};i.prototype.setLineDashOffset=function e(t){this.lineDashOffset_=t;this.checksum_=undefined};i.prototype.setLineJoin=function e(t){this.lineJoin_=t;this.checksum_=undefined};i.prototype.setMiterLimit=function e(t){this.miterLimit_=t;this.checksum_=undefined};i.prototype.setWidth=function e(t){this.width_=t;this.checksum_=undefined};i.prototype.getChecksum=function e(){if(this.checksum_===undefined){this.checksum_="s";if(this.color_){if(typeof this.color_==="string"){this.checksum_+=this.color_}else{this.checksum_+=Object(n["c"])(this.color_)}}else{this.checksum_+="-"}this.checksum_+=","+(this.lineCap_!==undefined?this.lineCap_.toString():"-")+","+(this.lineDash_?this.lineDash_.toString():"-")+","+(this.lineDashOffset_!==undefined?this.lineDashOffset_:"-")+","+(this.lineJoin_!==undefined?this.lineJoin_:"-")+","+(this.miterLimit_!==undefined?this.miterLimit_.toString():"-")+","+(this.width_!==undefined?this.width_.toString():"-")}return this.checksum_};t["a"]=i},function(e,t,r){"use strict";var n=r(5);var i=r(77);var a=function e(t){var r=t||{};this.color_=r.color!==undefined?r.color:null;this.checksum_=undefined};a.prototype.clone=function e(){var t=this.getColor();return new a({color:Array.isArray(t)?t.slice():t||undefined})};a.prototype.getColor=function e(){return this.color_};a.prototype.setColor=function e(t){this.color_=t;this.checksum_=undefined};a.prototype.getChecksum=function e(){if(this.checksum_===undefined){var t=this.color_;if(t){if(Array.isArray(t)||typeof t=="string"){this.checksum_="f"+Object(i["b"])(t)}else{this.checksum_=Object(n["c"])(this.color_)}}else{this.checksum_="f-"}}return this.checksum_};t["a"]=a},function(e,t,r){"use strict";r.d(t,"c",function(){return C});r.d(t,"b",function(){return O});r.d(t,"d",function(){return x});var s=r(8);var a=r(3);var l=r(33);var o=r(7);var c=r(283);var u=r(21);var n=r(82);var f=r(220);var h=r(254);var d=r(142);var p=r(165);var v=r(133);var g=r(135);var m=r(306);var _=r(208);var y=r(230);var b=r(156);var w=r(15);var S=function(n){function i(e,t,r){n.call(this);this.ends_=[];this.flatInteriorPointRevision_=-1;this.flatInteriorPoint_=null;this.maxDelta_=-1;this.maxDeltaRevision_=-1;this.orientedRevision_=-1;this.orientedFlatCoordinates_=null;if(t!==undefined&&r){this.setFlatCoordinates(t,e);this.ends_=r}else{this.setCoordinates(e,t)}}if(n)i.__proto__=n;i.prototype=Object.create(n&&n.prototype);i.prototype.constructor=i;i.prototype.appendLinearRing=function e(t){if(!this.flatCoordinates){this.flatCoordinates=t.getFlatCoordinates().slice()}else{Object(s["c"])(this.flatCoordinates,t.getFlatCoordinates())}this.ends_.push(this.flatCoordinates.length);this.changed()};i.prototype.clone=function e(){return new i(this.flatCoordinates.slice(),this.layout,this.ends_.slice())};i.prototype.closestPointXY=function e(t,r,n,i){if(i<Object(a["e"])(this.getExtent(),t,r)){return i}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(Object(d["a"])(this.flatCoordinates,0,this.ends_,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return Object(d["b"])(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,true,t,r,n,i)};i.prototype.containsXY=function e(t,r){return Object(p["c"])(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,r)};i.prototype.getArea=function e(){return Object(h["b"])(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)};i.prototype.getCoordinates=function e(t){var r;if(t!==undefined){r=this.getOrientedFlatCoordinates().slice();Object(y["c"])(r,0,this.ends_,this.stride,t)}else{r=this.flatCoordinates}return Object(g["b"])(r,0,this.ends_,this.stride)};i.prototype.getEnds=function e(){return this.ends_};i.prototype.getFlatInteriorPoint=function e(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=Object(a["x"])(this.getExtent());this.flatInteriorPoint_=Object(m["a"])(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0);this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_};i.prototype.getInteriorPoint=function e(){return new u["a"](this.getFlatInteriorPoint(),l["a"].XYM)};i.prototype.getLinearRingCount=function e(){return this.ends_.length};i.prototype.getLinearRing=function e(t){if(t<0||this.ends_.length<=t){return null}return new c["a"](this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)};i.prototype.getLinearRings=function e(){var t=this.layout;var r=this.flatCoordinates;var n=this.ends_;var i=[];var a=0;for(var o=0,s=n.length;o<s;++o){var l=n[o];var u=new c["a"](r.slice(a,l),t);i.push(u);a=l}return i};i.prototype.getOrientedFlatCoordinates=function e(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;if(Object(y["a"])(t,0,this.ends_,this.stride)){this.orientedFlatCoordinates_=t}else{this.orientedFlatCoordinates_=t.slice();this.orientedFlatCoordinates_.length=Object(y["c"])(this.orientedFlatCoordinates_,0,this.ends_,this.stride)}this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_};i.prototype.getSimplifiedGeometryInternal=function e(t){var r=[];var n=[];r.length=Object(b["c"])(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),r,0,n);return new i(r,l["a"].XY,n)};i.prototype.getType=function e(){return o["a"].POLYGON};i.prototype.intersectsExtent=function e(t){return Object(_["c"])(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)};i.prototype.setCoordinates=function e(t,r){this.setLayout(r,t,2);if(!this.flatCoordinates){this.flatCoordinates=[]}var n=Object(v["c"])(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1];this.changed()};return i}(n["a"]);t["a"]=S;function i(e,t,r,n){var i=r?r:32;var a=[];for(var o=0;o<i;++o){Object(s["c"])(a,Object(f["c"])(e,t,2*Math.PI*o/i,n))}a.push(a[0],a[1]);return new S(a,l["a"].XY,[a.length])}function C(e){var t=e[0];var r=e[1];var n=e[2];var i=e[3];var a=[t,r,t,i,n,i,n,r,t,r];return new S(a,l["a"].XY,[a.length])}function O(e,t,r){var n=t?t:32;var i=e.getStride();var a=e.getLayout();var o=e.getCenter();var s=i*(n+1);var l=new Array(s);for(var u=0;u<s;u+=i){l[u]=0;l[u+1]=0;for(var c=2;c<i;c++){l[u+c]=o[c]}}var f=[l.length];var h=new S(l,a,f);x(h,o,e.getRadius(),r);return h}function x(e,t,r,n){var i=e.getFlatCoordinates();var a=e.getStride();var o=i.length/a-1;var s=n?n:0;for(var l=0;l<=o;++l){var u=l*a;var c=s+Object(w["d"])(l,o)*2*Math.PI/o;i[u]=t[0]+r*Math.cos(c);i[u+1]=t[1]+r*Math.sin(c)}e.changed()}},function(e,t,r){"use strict";var n={};n.GMF_DEMO="https://geomapfish-demo-dc.camptocamp.com/2.4/";n.GMF_LAYERS=n.GMF_DEMO+"layers";n.GMF_THEMES=n.GMF_DEMO+"themes?version=2&background=background";n.MAPSERVER_WFS_FEATURE_NS="http://mapserver.gis.umn.edu/mapserver";n.MAPSERVER_PROXY=n.GMF_DEMO+"mapserv_proxy";n.PRINT_PROXY=n.GMF_DEMO+"printproxy";n.PROFILE=n.GMF_DEMO+"profile.json";n.RASTER=n.GMF_DEMO+"raster";n.SEARCH=n.GMF_DEMO+"fulltextsearch";n.SHORT_CREATE=n.GMF_DEMO+"short/create";t["a"]=n},function(e,t,r){"use strict";t["a"]={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"}},function(e,t,r){"use strict";var Me=r(5);var h=r(23);var s=r(87);var a=r(326);var x=r(67);var l=r(46);var i=r(169);var d=r(2);var n=r(113);var o={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var c=r(224);var u=r(212);var f=["","unavailable","touch","pen","mouse"];function p(e){this.pointerMap[e.pointerId.toString()]=e;var t=this.prepareEvent_(e);this.dispatcher.down(t,e)}function v(e){var t=this.prepareEvent_(e);this.dispatcher.move(t,e)}function g(e){var t=this.prepareEvent_(e);this.dispatcher.up(t,e);this.cleanup(e.pointerId)}function m(e){var t=this.prepareEvent_(e);this.dispatcher.leaveOut(t,e)}function _(e){var t=this.prepareEvent_(e);this.dispatcher.enterOver(t,e)}function y(e){var t=this.prepareEvent_(e);this.dispatcher.cancel(t,e);this.cleanup(e.pointerId)}function b(e){var t=this.dispatcher.makeEvent("lostpointercapture",e,e);this.dispatcher.dispatchEvent(t)}function w(e){var t=this.dispatcher.makeEvent("gotpointercapture",e,e);this.dispatcher.dispatchEvent(t)}var S=function(r){function e(e){var t={MSPointerDown:p,MSPointerMove:v,MSPointerUp:g,MSPointerOut:m,MSPointerOver:_,MSPointerCancel:y,MSGotPointerCapture:w,MSLostPointerCapture:b};r.call(this,e,t);this.pointerMap=e.pointerMap}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;e.prototype.prepareEvent_=function e(t){var r=t;if(typeof t.pointerType==="number"){r=this.dispatcher.cloneEvent(t,t);r.pointerType=f[t.pointerType]}return r};e.prototype.cleanup=function e(t){delete this.pointerMap[t.toString()]};return e}(u["a"]);var C=S;function O(e){this.dispatcher.fireNativeEvent(e)}function T(e){this.dispatcher.fireNativeEvent(e)}function E(e){this.dispatcher.fireNativeEvent(e)}function M(e){this.dispatcher.fireNativeEvent(e)}function A(e){this.dispatcher.fireNativeEvent(e)}function k(e){this.dispatcher.fireNativeEvent(e)}function j(e){this.dispatcher.fireNativeEvent(e)}function I(e){this.dispatcher.fireNativeEvent(e)}var D=function(r){function e(e){var t={pointerdown:O,pointermove:T,pointerup:E,pointerout:M,pointerover:A,pointercancel:k,gotpointercapture:I,lostpointercapture:j};r.call(this,e,t)}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;return e}(u["a"]);var P=D;var R=r(71);var L=false;var N=function(i){function e(e,t,r){i.call(this,e);this.originalEvent=t;var n=r?r:{};this.buttons=$(n);this.pressure=F(n,this.buttons);this.bubbles="bubbles"in n?n["bubbles"]:false;this.cancelable="cancelable"in n?n["cancelable"]:false;this.view="view"in n?n["view"]:null;this.detail="detail"in n?n["detail"]:null;this.screenX="screenX"in n?n["screenX"]:0;this.screenY="screenY"in n?n["screenY"]:0;this.clientX="clientX"in n?n["clientX"]:0;this.clientY="clientY"in n?n["clientY"]:0;this.ctrlKey="ctrlKey"in n?n["ctrlKey"]:false;this.altKey="altKey"in n?n["altKey"]:false;this.shiftKey="shiftKey"in n?n["shiftKey"]:false;this.metaKey="metaKey"in n?n["metaKey"]:false;this.button="button"in n?n["button"]:0;this.relatedTarget="relatedTarget"in n?n["relatedTarget"]:null;this.pointerId="pointerId"in n?n["pointerId"]:0;this.width="width"in n?n["width"]:0;this.height="height"in n?n["height"]:0;this.tiltX="tiltX"in n?n["tiltX"]:0;this.tiltY="tiltY"in n?n["tiltY"]:0;this.pointerType="pointerType"in n?n["pointerType"]:"";this.hwTimestamp="hwTimestamp"in n?n["hwTimestamp"]:0;this.isPrimary="isPrimary"in n?n["isPrimary"]:false;if(t.preventDefault){this.preventDefault=function(){t.preventDefault()}}}if(i)e.__proto__=i;e.prototype=Object.create(i&&i.prototype);e.prototype.constructor=e;return e}(R["a"]);function $(e){var t;if(e.buttons||L){t=e.buttons}else{switch(e.which){case 1:t=1;break;case 2:t=4;break;case 3:t=2;break;default:t=0}}return t}function F(e,t){var r=0;if(e.pressure){r=e.pressure}else{r=t?.5:0}return r}(function(){try{var e=new MouseEvent("click",{buttons:1});L=e.buttons===1}catch(e){}})();var G=N;var Ae=r(8);var U=200;var H="touch";function W(e){this.vacuumTouches_(e);this.setPrimaryTouch_(e.changedTouches[0]);this.dedupSynthMouse_(e);this.clickCount_++;this.processTouches_(e,this.overDown_)}function Y(e){this.processTouches_(e,this.moveOverOut_)}function V(e){this.dedupSynthMouse_(e);this.processTouches_(e,this.upOut_)}function q(e){this.processTouches_(e,this.cancelOut_)}var z=function(n){function e(e,t){var r={touchstart:W,touchmove:Y,touchend:V,touchcancel:q};n.call(this,e,r);this.pointerMap=e.pointerMap;this.mouseSource=t;this.firstTouchId_=undefined;this.clickCount_=0;this.resetId_;this.dedupTimeout_=2500}if(n)e.__proto__=n;e.prototype=Object.create(n&&n.prototype);e.prototype.constructor=e;e.prototype.isPrimaryTouch_=function e(t){return this.firstTouchId_===t.identifier};e.prototype.setPrimaryTouch_=function e(t){var r=Object.keys(this.pointerMap).length;if(r===0||r===1&&c["a"].toString()in this.pointerMap){this.firstTouchId_=t.identifier;this.cancelResetClickCount_()}};e.prototype.removePrimaryPointer_=function e(t){if(t.isPrimary){this.firstTouchId_=undefined;this.resetClickCount_()}};e.prototype.resetClickCount_=function e(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),U)};e.prototype.resetClickCountHandler_=function e(){this.clickCount_=0;this.resetId_=undefined};e.prototype.cancelResetClickCount_=function e(){if(this.resetId_!==undefined){clearTimeout(this.resetId_)}};e.prototype.touchToPointer_=function e(t,r){var n=this.dispatcher.cloneEvent(t,r);n.pointerId=r.identifier+2;n.bubbles=true;n.cancelable=true;n.detail=this.clickCount_;n.button=0;n.buttons=1;n.width=r.radiusX||0;n.height=r.radiusY||0;n.pressure=r.force||.5;n.isPrimary=this.isPrimaryTouch_(r);n.pointerType=H;n.clientX=r.clientX;n.clientY=r.clientY;n.screenX=r.screenX;n.screenY=r.screenY;return n};e.prototype.processTouches_=function e(t,r){var n=Array.prototype.slice.call(t.changedTouches);var i=n.length;function a(){t.preventDefault()}for(var o=0;o<i;++o){var s=this.touchToPointer_(t,n[o]);s.preventDefault=a;r.call(this,t,s)}};e.prototype.findTouch_=function e(t,r){var n=t.length;for(var i=0;i<n;i++){var a=t[i];if(a.identifier===r){return true}}return false};e.prototype.vacuumTouches_=function e(t){var r=t.touches;var n=Object.keys(this.pointerMap);var i=n.length;if(i>=r.length){var a=[];for(var o=0;o<i;++o){var s=Number(n[o]);var l=this.pointerMap[s];if(s!=c["a"]&&!this.findTouch_(r,s-2)){a.push(l.out)}}for(var u=0;u<a.length;++u){this.cancelOut_(t,a[u])}}};e.prototype.overDown_=function e(t,r){this.pointerMap[r.pointerId]={target:r.target,out:r,outTarget:r.target};this.dispatcher.over(r,t);this.dispatcher.enter(r,t);this.dispatcher.down(r,t)};e.prototype.moveOverOut_=function e(t,r){var n=r;var i=this.pointerMap[n.pointerId];if(!i){return}var a=i.out;var o=i.outTarget;this.dispatcher.move(n,t);if(a&&o!==n.target){a.relatedTarget=n.target;n.relatedTarget=o;a.target=o;if(n.target){this.dispatcher.leaveOut(a,t);this.dispatcher.enterOver(n,t)}else{n.target=o;n.relatedTarget=null;this.cancelOut_(t,n)}}i.out=n;i.outTarget=n.target};e.prototype.upOut_=function e(t,r){this.dispatcher.up(r,t);this.dispatcher.out(r,t);this.dispatcher.leave(r,t);this.cleanUpPointer_(r)};e.prototype.cancelOut_=function e(t,r){this.dispatcher.cancel(r,t);this.dispatcher.out(r,t);this.dispatcher.leave(r,t);this.cleanUpPointer_(r)};e.prototype.cleanUpPointer_=function e(t){delete this.pointerMap[t.pointerId];this.removePrimaryPointer_(t)};e.prototype.dedupSynthMouse_=function e(t){var r=this.mouseSource.lastTouches;var n=t.changedTouches[0];if(this.isPrimaryTouch_(n)){var i=[n.clientX,n.clientY];r.push(i);setTimeout(function(){Object(Ae["j"])(r,i)},this.dedupTimeout_)}};return e}(u["a"]);var B=z;var K=[["bubbles",false],["cancelable",false],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",false],["altKey",false],["shiftKey",false],["metaKey",false],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",false],["type",""],["target",null],["currentTarget",null],["which",0]];var X=function(t){function e(e){t.call(this);this.element_=e;this.pointerMap={};this.eventMap_={};this.eventSourceList_=[];this.registerSources()}if(t)e.__proto__=t;e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;e.prototype.registerSources=function e(){if(x["f"]){this.registerSource("native",new P(this))}else if(x["e"]){this.registerSource("ms",new C(this))}else{var t=new c["c"](this);this.registerSource("mouse",t);if(x["h"]){this.registerSource("touch",new B(this,t))}}this.register_()};e.prototype.registerSource=function e(t,r){var n=r;var i=n.getEvents();if(i){i.forEach(function(e){var t=n.getHandlerForEvent(e);if(t){this.eventMap_[e]=t.bind(n)}}.bind(this));this.eventSourceList_.push(n)}};e.prototype.register_=function e(){var t=this.eventSourceList_.length;for(var r=0;r<t;r++){var n=this.eventSourceList_[r];this.addEvents_(n.getEvents())}};e.prototype.unregister_=function e(){var t=this.eventSourceList_.length;for(var r=0;r<t;r++){var n=this.eventSourceList_[r];this.removeEvents_(n.getEvents())}};e.prototype.eventHandler_=function e(t){var r=t.type;var n=this.eventMap_[r];if(n){n(t)}};e.prototype.addEvents_=function e(t){t.forEach(function(e){Object(d["a"])(this.element_,e,this.eventHandler_,this)}.bind(this))};e.prototype.removeEvents_=function e(t){t.forEach(function(e){Object(d["c"])(this.element_,e,this.eventHandler_,this)}.bind(this))};e.prototype.cloneEvent=function e(t,r){var n={};for(var i=0,a=K.length;i<a;i++){var o=K[i][0];n[o]=t[o]||r[o]||K[i][1]}return n};e.prototype.down=function e(t,r){this.fireEvent(o.POINTERDOWN,t,r)};e.prototype.move=function e(t,r){this.fireEvent(o.POINTERMOVE,t,r)};e.prototype.up=function e(t,r){this.fireEvent(o.POINTERUP,t,r)};e.prototype.enter=function e(t,r){t.bubbles=false;this.fireEvent(o.POINTERENTER,t,r)};e.prototype.leave=function e(t,r){t.bubbles=false;this.fireEvent(o.POINTERLEAVE,t,r)};e.prototype.over=function e(t,r){t.bubbles=true;this.fireEvent(o.POINTEROVER,t,r)};e.prototype.out=function e(t,r){t.bubbles=true;this.fireEvent(o.POINTEROUT,t,r)};e.prototype.cancel=function e(t,r){this.fireEvent(o.POINTERCANCEL,t,r)};e.prototype.leaveOut=function e(t,r){this.out(t,r);if(!this.contains_(t.target,t.relatedTarget)){this.leave(t,r)}};e.prototype.enterOver=function e(t,r){this.over(t,r);if(!this.contains_(t.target,t.relatedTarget)){this.enter(t,r)}};e.prototype.contains_=function e(t,r){if(!t||!r){return false}return t.contains(r)};e.prototype.makeEvent=function e(t,r,n){return new G(t,n,r)};e.prototype.fireEvent=function e(t,r,n){var i=this.makeEvent(t,r,n);this.dispatchEvent(i)};e.prototype.fireNativeEvent=function e(t){var r=this.makeEvent(t.type,t,t);this.dispatchEvent(r)};e.prototype.wrapMouseEvent=function e(t,r){var n=this.makeEvent(t,Object(c["d"])(r,this),r);return n};e.prototype.disposeInternal=function e(){this.unregister_();t.prototype.disposeInternal.call(this)};return e}(n["a"]);var Z=X;var Q=function(n){function e(e,t){n.call(this);this.map_=e;this.clickTimeoutId_;this.dragging_=false;this.dragListenerKeys_=[];this.moveTolerance_=t?t*x["b"]:x["b"];this.down_=null;var r=this.map_.getViewport();this.activePointers_=0;this.trackedTouches_={};this.pointerEventHandler_=new Z(r);this.documentPointerEventHandler_=null;this.pointerdownListenerKey_=Object(d["a"])(this.pointerEventHandler_,o.POINTERDOWN,this.handlePointerDown_,this);this.relayedListenerKey_=Object(d["a"])(this.pointerEventHandler_,o.POINTERMOVE,this.relayEvent_,this)}if(n)e.__proto__=n;e.prototype=Object.create(n&&n.prototype);e.prototype.constructor=e;e.prototype.emulateClick_=function e(t){var r=new i["a"](l["a"].CLICK,this.map_,t);this.dispatchEvent(r);if(this.clickTimeoutId_!==undefined){clearTimeout(this.clickTimeoutId_);this.clickTimeoutId_=undefined;r=new i["a"](l["a"].DBLCLICK,this.map_,t);this.dispatchEvent(r)}else{this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=undefined;var e=new i["a"](l["a"].SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)}};e.prototype.updateActivePointers_=function e(t){var r=t;if(r.type==l["a"].POINTERUP||r.type==l["a"].POINTERCANCEL){delete this.trackedTouches_[r.pointerId]}else if(r.type==l["a"].POINTERDOWN){this.trackedTouches_[r.pointerId]=true}this.activePointers_=Object.keys(this.trackedTouches_).length};e.prototype.handlePointerUp_=function e(t){this.updateActivePointers_(t);var r=new i["a"](l["a"].POINTERUP,this.map_,t);this.dispatchEvent(r);if(!r.propagationStopped&&!this.dragging_&&this.isMouseActionButton_(t)){this.emulateClick_(this.down_)}if(this.activePointers_===0){this.dragListenerKeys_.forEach(d["e"]);this.dragListenerKeys_.length=0;this.dragging_=false;this.down_=null;this.documentPointerEventHandler_.dispose();this.documentPointerEventHandler_=null}};e.prototype.isMouseActionButton_=function e(t){return t.button===0};e.prototype.handlePointerDown_=function e(t){this.updateActivePointers_(t);var r=new i["a"](l["a"].POINTERDOWN,this.map_,t);this.dispatchEvent(r);this.down_=t;if(this.dragListenerKeys_.length===0){this.documentPointerEventHandler_=new Z(document);this.dragListenerKeys_.push(Object(d["a"])(this.documentPointerEventHandler_,l["a"].POINTERMOVE,this.handlePointerMove_,this),Object(d["a"])(this.documentPointerEventHandler_,l["a"].POINTERUP,this.handlePointerUp_,this),Object(d["a"])(this.pointerEventHandler_,l["a"].POINTERCANCEL,this.handlePointerUp_,this))}};e.prototype.handlePointerMove_=function e(t){if(this.isMoving_(t)){this.dragging_=true;var r=new i["a"](l["a"].POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(r)}t.preventDefault()};e.prototype.relayEvent_=function e(t){var r=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new i["a"](t.type,this.map_,t,r))};e.prototype.isMoving_=function e(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_};e.prototype.disposeInternal=function e(){if(this.relayedListenerKey_){Object(d["e"])(this.relayedListenerKey_);this.relayedListenerKey_=null}if(this.pointerdownListenerKey_){Object(d["e"])(this.pointerdownListenerKey_);this.pointerdownListenerKey_=null}this.dragListenerKeys_.forEach(d["e"]);this.dragListenerKeys_.length=0;if(this.documentPointerEventHandler_){this.documentPointerEventHandler_.dispose();this.documentPointerEventHandler_=null}if(this.pointerEventHandler_){this.pointerEventHandler_.dispose();this.pointerEventHandler_=null}n.prototype.disposeInternal.call(this)};return e}(n["a"]);var J=Q;var ee=r(270);var te=r(222);var re={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};var ne=r(145);var ie=r(50);var ae=r(191);var oe=r(26);var se=r(12);var le=r(25);var ke=r(9);var ue=Infinity;var ce=function e(t,r){this.priorityFunction_=t;this.keyFunction_=r;this.elements_=[];this.priorities_=[];this.queuedElements_={}};ce.prototype.clear=function e(){this.elements_.length=0;this.priorities_.length=0;Object(ke["b"])(this.queuedElements_)};ce.prototype.dequeue=function e(){var t=this.elements_;var r=this.priorities_;var n=t[0];if(t.length==1){t.length=0;r.length=0}else{t[0]=t.pop();r[0]=r.pop();this.siftUp_(0)}var i=this.keyFunction_(n);delete this.queuedElements_[i];return n};ce.prototype.enqueue=function e(t){Object(le["a"])(!(this.keyFunction_(t)in this.queuedElements_),31);var r=this.priorityFunction_(t);if(r!=ue){this.elements_.push(t);this.priorities_.push(r);this.queuedElements_[this.keyFunction_(t)]=true;this.siftDown_(0,this.elements_.length-1);return true}return false};ce.prototype.getCount=function e(){return this.elements_.length};ce.prototype.getLeftChildIndex_=function e(t){return t*2+1};ce.prototype.getRightChildIndex_=function e(t){return t*2+2};ce.prototype.getParentIndex_=function e(t){return t-1>>1};ce.prototype.heapify_=function e(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--){this.siftUp_(t)}};ce.prototype.isEmpty=function e(){return this.elements_.length===0};ce.prototype.isKeyQueued=function e(t){return t in this.queuedElements_};ce.prototype.isQueued=function e(t){return this.isKeyQueued(this.keyFunction_(t))};ce.prototype.siftUp_=function e(t){var r=this.elements_;var n=this.priorities_;var i=r.length;var a=r[t];var o=n[t];var s=t;while(t<i>>1){var l=this.getLeftChildIndex_(t);var u=this.getRightChildIndex_(t);var c=u<i&&n[u]<n[l]?u:l;r[t]=r[c];n[t]=n[c];t=c}r[t]=a;n[t]=o;this.siftDown_(s,t)};ce.prototype.siftDown_=function e(t,r){var n=this.elements_;var i=this.priorities_;var a=n[r];var o=i[r];while(r>t){var s=this.getParentIndex_(r);if(i[s]>o){n[r]=n[s];i[r]=i[s];r=s}else{break}}n[r]=a;i[r]=o};ce.prototype.reprioritize=function e(){var t=this.priorityFunction_;var r=this.elements_;var n=this.priorities_;var i=0;var a=r.length;var o,s,l;for(s=0;s<a;++s){o=r[s];l=t(o);if(l==ue){delete this.queuedElements_[this.keyFunction_(o)]}else{n[i]=l;r[i++]=o}}r.length=i;n.length=i;this.heapify_()};var fe=ce;var he=function(i){function e(t,e){i.call(this,function(e){return t.apply(null,e)},function(e){return e[0].getKey()});this.tileChangeCallback_=e;this.tilesLoading_=0;this.tilesLoadingKeys_={}}if(i)e.__proto__=i;e.prototype=Object.create(i&&i.prototype);e.prototype.constructor=e;e.prototype.enqueue=function e(t){var r=i.prototype.enqueue.call(this,t);if(r){var n=t[0];Object(d["a"])(n,se["a"].CHANGE,this.handleTileChange,this)}return r};e.prototype.getTilesLoading=function e(){return this.tilesLoading_};e.prototype.handleTileChange=function e(t){var r=t.target;var n=r.getState();if(n===oe["a"].LOADED||n===oe["a"].ERROR||n===oe["a"].EMPTY||n===oe["a"].ABORT){Object(d["c"])(r,se["a"].CHANGE,this.handleTileChange,this);var i=r.getKey();if(i in this.tilesLoadingKeys_){delete this.tilesLoadingKeys_[i];--this.tilesLoading_}this.tileChangeCallback_()}};e.prototype.loadMoreTiles=function e(t,r){var n=0;var i=false;var a,o,s;while(this.tilesLoading_<t&&n<r&&this.getCount()>0){o=this.dequeue()[0];s=o.getKey();a=o.getState();if(a===oe["a"].ABORT){i=true}else if(a===oe["a"].IDLE&&!(s in this.tilesLoadingKeys_)){this.tilesLoadingKeys_[s]=true;++this.tilesLoading_;++n;o.load()}}if(n===0&&i){this.tileChangeCallback_()}};return e}(fe);var de=he;var pe=r(43);var ve=r(57);var ge=r(53);var je=r(3);var me=r(41);var _e=r(93);var ye=r(102);var Ie=r(36);var be=function(o){function e(e){o.call(this);var t=we(e);this.maxTilesLoading_=e.maxTilesLoading!==undefined?e.maxTilesLoading:16;this.loadTilesWhileAnimating_=e.loadTilesWhileAnimating!==undefined?e.loadTilesWhileAnimating:false;this.loadTilesWhileInteracting_=e.loadTilesWhileInteracting!==undefined?e.loadTilesWhileInteracting:false;this.pixelRatio_=e.pixelRatio!==undefined?e.pixelRatio:x["b"];this.animationDelayKey_;this.animationDelay_=function(){this.animationDelayKey_=undefined;this.renderFrame_.call(this,Date.now())}.bind(this);this.coordinateToPixelTransform_=Object(Ie["c"])();this.pixelToCoordinateTransform_=Object(Ie["c"])();this.frameIndex_=0;this.frameState_=null;this.previousExtent_=null;this.viewPropertyListenerKey_=null;this.viewChangeListenerKey_=null;this.layerGroupPropertyListenerKeys_=null;this.viewport_=document.createElement("div");this.viewport_.className="ol-viewport"+(x["h"]?" ol-touch":"");this.viewport_.style.position="relative";this.viewport_.style.overflow="hidden";this.viewport_.style.width="100%";this.viewport_.style.height="100%";this.viewport_.style.msTouchAction="none";this.viewport_.style.touchAction="none";this.overlayContainer_=document.createElement("div");this.overlayContainer_.className="ol-overlaycontainer";this.viewport_.appendChild(this.overlayContainer_);this.overlayContainerStopEvent_=document.createElement("div");this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent";var r=[se["a"].CLICK,se["a"].DBLCLICK,se["a"].MOUSEDOWN,se["a"].TOUCHSTART,se["a"].MSPOINTERDOWN,l["a"].POINTERDOWN,se["a"].MOUSEWHEEL,se["a"].WHEEL];for(var n=0,i=r.length;n<i;++n){Object(d["a"])(this.overlayContainerStopEvent_,r[n],R["b"])}this.viewport_.appendChild(this.overlayContainerStopEvent_);this.mapBrowserEventHandler_=new J(this,e.moveTolerance);for(var a in l["a"]){Object(d["a"])(this.mapBrowserEventHandler_,l["a"][a],this.handleMapBrowserEvent,this)}this.keyboardEventTarget_=t.keyboardEventTarget;this.keyHandlerKeys_=null;Object(d["a"])(this.viewport_,se["a"].CONTEXTMENU,this.handleBrowserEvent,this);Object(d["a"])(this.viewport_,se["a"].WHEEL,this.handleBrowserEvent,this);Object(d["a"])(this.viewport_,se["a"].MOUSEWHEEL,this.handleBrowserEvent,this);this.controls=t.controls||new h["a"];this.interactions=t.interactions||new h["a"];this.overlays_=t.overlays;this.overlayIdIndex_={};this.renderer_=this.createRenderer();this.handleResize_;this.focus_=null;this.postRenderFunctions_=[];this.tileQueue_=new de(this.getTilePriority.bind(this),this.handleTileChange_.bind(this));this.skippedFeatureUids_={};Object(d["a"])(this,Object(ie["b"])(re.LAYERGROUP),this.handleLayerGroupChanged_,this);Object(d["a"])(this,Object(ie["b"])(re.VIEW),this.handleViewChanged_,this);Object(d["a"])(this,Object(ie["b"])(re.SIZE),this.handleSizeChanged_,this);Object(d["a"])(this,Object(ie["b"])(re.TARGET),this.handleTargetChanged_,this);this.setProperties(t.values);this.controls.forEach(function(e){e.setMap(this)}.bind(this));Object(d["a"])(this.controls,s["a"].ADD,function(e){e.element.setMap(this)},this);Object(d["a"])(this.controls,s["a"].REMOVE,function(e){e.element.setMap(null)},this);this.interactions.forEach(function(e){e.setMap(this)}.bind(this));Object(d["a"])(this.interactions,s["a"].ADD,function(e){e.element.setMap(this)},this);Object(d["a"])(this.interactions,s["a"].REMOVE,function(e){e.element.setMap(null)},this);this.overlays_.forEach(this.addOverlayInternal_.bind(this));Object(d["a"])(this.overlays_,s["a"].ADD,function(e){this.addOverlayInternal_(e.element)},this);Object(d["a"])(this.overlays_,s["a"].REMOVE,function(e){var t=e.element;var r=t.getId();if(r!==undefined){delete this.overlayIdIndex_[r.toString()]}e.element.setMap(null)},this)}if(o)e.__proto__=o;e.prototype=Object.create(o&&o.prototype);e.prototype.constructor=e;e.prototype.createRenderer=function e(){throw new Error("Use a map type that has a createRenderer method")};e.prototype.addControl=function e(t){this.getControls().push(t)};e.prototype.addInteraction=function e(t){this.getInteractions().push(t)};e.prototype.addLayer=function e(t){var r=this.getLayerGroup().getLayers();r.push(t)};e.prototype.addOverlay=function e(t){this.getOverlays().push(t)};e.prototype.addOverlayInternal_=function e(t){var r=t.getId();if(r!==undefined){this.overlayIdIndex_[r.toString()]=t}t.setMap(this)};e.prototype.disposeInternal=function e(){this.mapBrowserEventHandler_.dispose();Object(d["c"])(this.viewport_,se["a"].CONTEXTMENU,this.handleBrowserEvent,this);Object(d["c"])(this.viewport_,se["a"].WHEEL,this.handleBrowserEvent,this);Object(d["c"])(this.viewport_,se["a"].MOUSEWHEEL,this.handleBrowserEvent,this);if(this.handleResize_!==undefined){removeEventListener(se["a"].RESIZE,this.handleResize_,false);this.handleResize_=undefined}if(this.animationDelayKey_){cancelAnimationFrame(this.animationDelayKey_);this.animationDelayKey_=undefined}this.setTarget(null);o.prototype.disposeInternal.call(this)};e.prototype.forEachFeatureAtPixel=function e(t,r,n){if(!this.frameState_){return}var i=this.getCoordinateFromPixel(t);n=n!==undefined?n:{};var a=n.hitTolerance!==undefined?n.hitTolerance*this.frameState_.pixelRatio:0;var o=n.layerFilter!==undefined?n.layerFilter:me["b"];return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,a,r,null,o,null)};e.prototype.getFeaturesAtPixel=function e(t,r){var n=null;this.forEachFeatureAtPixel(t,function(e){if(!n){n=[]}n.push(e)},r);return n};e.prototype.forEachLayerAtPixel=function e(t,r,n){if(!this.frameState_){return}var i=n||{};var a=i.hitTolerance!==undefined?n.hitTolerance*this.frameState_.pixelRatio:0;var o=i.layerFilter||me["b"];return this.renderer_.forEachLayerAtPixel(t,this.frameState_,a,r,null,o,null)};e.prototype.hasFeatureAtPixel=function e(t,r){if(!this.frameState_){return false}var n=this.getCoordinateFromPixel(t);r=r!==undefined?r:{};var i=r.layerFilter!==undefined?r.layerFilter:me["b"];var a=r.hitTolerance!==undefined?r.hitTolerance*this.frameState_.pixelRatio:0;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,a,i,null)};e.prototype.getEventCoordinate=function e(t){return this.getCoordinateFromPixel(this.getEventPixel(t))};e.prototype.getEventPixel=function e(t){var r=this.viewport_.getBoundingClientRect();var n="changedTouches"in t?t.changedTouches[0]:t;return[n.clientX-r.left,n.clientY-r.top]};e.prototype.getTarget=function e(){return this.get(re.TARGET)};e.prototype.getTargetElement=function e(){var t=this.getTarget();if(t!==undefined){return typeof t==="string"?document.getElementById(t):t}else{return null}};e.prototype.getCoordinateFromPixel=function e(t){var r=this.frameState_;if(!r){return null}else{return Object(Ie["a"])(r.pixelToCoordinateTransform,t.slice())}};e.prototype.getControls=function e(){return this.controls};e.prototype.getOverlays=function e(){return this.overlays_};e.prototype.getOverlayById=function e(t){var r=this.overlayIdIndex_[t.toString()];return r!==undefined?r:null};e.prototype.getInteractions=function e(){return this.interactions};e.prototype.getLayerGroup=function e(){return this.get(re.LAYERGROUP)};e.prototype.getLayers=function e(){var t=this.getLayerGroup().getLayers();return t};e.prototype.getPixelFromCoordinate=function e(t){var r=this.frameState_;if(!r){return null}else{return Object(Ie["a"])(r.coordinateToPixelTransform,t.slice(0,2))}};e.prototype.getRenderer=function e(){return this.renderer_};e.prototype.getSize=function e(){return this.get(re.SIZE)};e.prototype.getView=function e(){return this.get(re.VIEW)};e.prototype.getViewport=function e(){return this.viewport_};e.prototype.getOverlayContainer=function e(){return this.overlayContainer_};e.prototype.getOverlayContainerStopEvent=function e(){return this.overlayContainerStopEvent_};e.prototype.getTilePriority=function e(t,r,n,i){var a=this.frameState_;if(!a||!(r in a.wantedTiles)){return ue}if(!a.wantedTiles[r][t.getKey()]){return ue}var o=n[0]-a.focus[0];var s=n[1]-a.focus[1];return 65536*Math.log(i)+Math.sqrt(o*o+s*s)/i};e.prototype.handleBrowserEvent=function e(t,r){var n=r||t.type;var i=new a["a"](n,this,t);this.handleMapBrowserEvent(i)};e.prototype.handleMapBrowserEvent=function e(t){if(!this.frameState_){return}this.focus_=t.coordinate;t.frameState=this.frameState_;var r=this.getInteractions().getArray();if(this.dispatchEvent(t)!==false){for(var n=r.length-1;n>=0;n--){var i=r[n];if(!i.getActive()){continue}var a=i.handleEvent(t);if(!a){break}}}};e.prototype.handlePostRender=function e(){var t=this.frameState_;var r=this.tileQueue_;if(!r.isEmpty()){var n=this.maxTilesLoading_;var i=n;if(t){var a=t.viewHints;if(a[ve["a"].ANIMATING]){n=this.loadTilesWhileAnimating_?8:0;i=2}if(a[ve["a"].INTERACTING]){n=this.loadTilesWhileInteracting_?8:0;i=2}}if(r.getTilesLoading()<n){r.reprioritize();r.loadMoreTiles(n,i)}}if(t&&this.hasListener(ne["a"].RENDERCOMPLETE)&&!t.animate&&!this.tileQueue_.getTilesLoading()&&!Ce(this.getLayers().getArray())){this.renderer_.dispatchRenderEvent(ne["a"].RENDERCOMPLETE,t)}var o=this.postRenderFunctions_;for(var s=0,l=o.length;s<l;++s){o[s](this,t)}o.length=0};e.prototype.handleSizeChanged_=function e(){this.render()};e.prototype.handleTargetChanged_=function e(){var t;if(this.getTarget()){t=this.getTargetElement()}if(this.keyHandlerKeys_){for(var r=0,n=this.keyHandlerKeys_.length;r<n;++r){Object(d["e"])(this.keyHandlerKeys_[r])}this.keyHandlerKeys_=null}if(!t){this.renderer_.removeLayerRenderers();Object(ge["e"])(this.viewport_);if(this.handleResize_!==undefined){removeEventListener(se["a"].RESIZE,this.handleResize_,false);this.handleResize_=undefined}}else{t.appendChild(this.viewport_);var i=!this.keyboardEventTarget_?t:this.keyboardEventTarget_;this.keyHandlerKeys_=[Object(d["a"])(i,se["a"].KEYDOWN,this.handleBrowserEvent,this),Object(d["a"])(i,se["a"].KEYPRESS,this.handleBrowserEvent,this)];if(!this.handleResize_){this.handleResize_=this.updateSize.bind(this);addEventListener(se["a"].RESIZE,this.handleResize_,false)}}this.updateSize()};e.prototype.handleTileChange_=function e(){this.render()};e.prototype.handleViewPropertyChanged_=function e(){this.render()};e.prototype.handleViewChanged_=function e(){if(this.viewPropertyListenerKey_){Object(d["e"])(this.viewPropertyListenerKey_);this.viewPropertyListenerKey_=null}if(this.viewChangeListenerKey_){Object(d["e"])(this.viewChangeListenerKey_);this.viewChangeListenerKey_=null}var t=this.getView();if(t){this.viewport_.setAttribute("data-view",Object(Me["c"])(t));this.viewPropertyListenerKey_=Object(d["a"])(t,ae["a"].PROPERTYCHANGE,this.handleViewPropertyChanged_,this);this.viewChangeListenerKey_=Object(d["a"])(t,se["a"].CHANGE,this.handleViewPropertyChanged_,this)}this.render()};e.prototype.handleLayerGroupChanged_=function e(){if(this.layerGroupPropertyListenerKeys_){this.layerGroupPropertyListenerKeys_.forEach(d["e"]);this.layerGroupPropertyListenerKeys_=null}var t=this.getLayerGroup();if(t){this.layerGroupPropertyListenerKeys_=[Object(d["a"])(t,ae["a"].PROPERTYCHANGE,this.render,this),Object(d["a"])(t,se["a"].CHANGE,this.render,this)]}this.render()};e.prototype.isRendered=function e(){return!!this.frameState_};e.prototype.renderSync=function e(){if(this.animationDelayKey_){cancelAnimationFrame(this.animationDelayKey_)}this.animationDelay_()};e.prototype.render=function e(){if(this.animationDelayKey_===undefined){this.animationDelayKey_=requestAnimationFrame(this.animationDelay_)}};e.prototype.removeControl=function e(t){return this.getControls().remove(t)};e.prototype.removeInteraction=function e(t){return this.getInteractions().remove(t)};e.prototype.removeLayer=function e(t){var r=this.getLayerGroup().getLayers();return r.remove(t)};e.prototype.removeOverlay=function e(t){return this.getOverlays().remove(t)};e.prototype.renderFrame_=function e(t){var r;var n=this.getSize();var i=this.getView();var a=Object(je["j"])();var o=this.frameState_;var s=null;if(n!==undefined&&Object(ye["b"])(n)&&i&&i.isDef()){var l=i.getHints(this.frameState_?this.frameState_.viewHints:undefined);var u=this.getLayerGroup().getLayerStatesArray();var c={};for(var f=0,h=u.length;f<h;++f){c[Object(Me["c"])(u[f].layer)]=u[f]}r=i.getState(this.pixelRatio_);s={animate:false,coordinateToPixelTransform:this.coordinateToPixelTransform_,extent:a,focus:this.focus_?this.focus_:r.center,index:this.frameIndex_++,layerStates:c,layerStatesArray:u,pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:r,viewHints:l,wantedTiles:{}}}if(s){s.extent=Object(je["z"])(r.center,r.resolution,r.rotation,s.size,a)}this.frameState_=s;this.renderer_.renderFrame(s);if(s){if(s.animate){this.render()}Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions);if(o){var d=!this.previousExtent_||!Object(je["H"])(this.previousExtent_)&&!Object(je["p"])(s.extent,this.previousExtent_);if(d){this.dispatchEvent(new ee["a"](te["a"].MOVESTART,this,o));this.previousExtent_=Object(je["l"])(this.previousExtent_)}}var p=this.previousExtent_&&!s.viewHints[ve["a"].ANIMATING]&&!s.viewHints[ve["a"].INTERACTING]&&!Object(je["p"])(s.extent,this.previousExtent_);if(p){this.dispatchEvent(new ee["a"](te["a"].MOVEEND,this,s));Object(je["d"])(s.extent,this.previousExtent_)}}this.dispatchEvent(new ee["a"](te["a"].POSTRENDER,this,s));setTimeout(this.handlePostRender.bind(this),0)};e.prototype.setLayerGroup=function e(t){this.set(re.LAYERGROUP,t)};e.prototype.setSize=function e(t){this.set(re.SIZE,t)};e.prototype.setTarget=function e(t){this.set(re.TARGET,t)};e.prototype.setView=function e(t){this.set(re.VIEW,t)};e.prototype.skipFeature=function e(t){this.skippedFeatureUids_[Object(Me["c"])(t)]=true;this.render()};e.prototype.updateSize=function e(){var t=this.getTargetElement();if(!t){this.setSize(undefined)}else{var r=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(r["borderLeftWidth"])-parseFloat(r["paddingLeft"])-parseFloat(r["paddingRight"])-parseFloat(r["borderRightWidth"]),t.offsetHeight-parseFloat(r["borderTopWidth"])-parseFloat(r["paddingTop"])-parseFloat(r["paddingBottom"])-parseFloat(r["borderBottomWidth"])])}};e.prototype.unskipFeature=function e(t){delete this.skippedFeatureUids_[Object(Me["c"])(t)];this.render()};return e}(ie["a"]);function we(e){var t=null;if(e.keyboardEventTarget!==undefined){t=typeof e.keyboardEventTarget==="string"?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget}var r={};var n=e.layers&&typeof e.layers.getLayers==="function"?e.layers:new _e["a"]({layers:e.layers});r[re.LAYERGROUP]=n;r[re.TARGET]=e.target;r[re.VIEW]=e.view!==undefined?e.view:new pe["a"];var i;if(e.controls!==undefined){if(Array.isArray(e.controls)){i=new h["a"](e.controls.slice())}else{Object(le["a"])(typeof e.controls.getArray==="function",47);i=e.controls}}var a;if(e.interactions!==undefined){if(Array.isArray(e.interactions)){a=new h["a"](e.interactions.slice())}else{Object(le["a"])(typeof e.interactions.getArray==="function",48);a=e.interactions}}var o;if(e.overlays!==undefined){if(Array.isArray(e.overlays)){o=new h["a"](e.overlays.slice())}else{Object(le["a"])(typeof e.overlays.getArray==="function",49);o=e.overlays}}else{o=new h["a"]}return{controls:i,interactions:a,keyboardEventTarget:t,overlays:o,values:r}}var Se=be;function Ce(e){for(var t=0,r=e.length;t<r;++t){var n=e[t];if(typeof n.getLayers==="function"){return Ce(n.getLayers().getArray())}else{var i=n.getSource();if(i&&i.loading){return true}}}return false}var Oe=r(161);var xe=r(90);var Te=r(88);var Ee=function(c){function e(e){var t=e?e:{};c.call(this,{element:document.createElement("div"),render:t.render||De,target:t.target});this.ulElement_=document.createElement("ul");this.collapsed_=t.collapsed!==undefined?t.collapsed:true;this.overrideCollapsible_=t.collapsible!==undefined;this.collapsible_=t.collapsible!==undefined?t.collapsible:true;if(!this.collapsible_){this.collapsed_=false}var r=t.className!==undefined?t.className:"ol-attribution";var n=t.tipLabel!==undefined?t.tipLabel:"Attributions";var i=t.collapseLabel!==undefined?t.collapseLabel:"»";if(typeof i==="string"){this.collapseLabel_=document.createElement("span");this.collapseLabel_.textContent=i}else{this.collapseLabel_=i}var a=t.label!==undefined?t.label:"i";if(typeof a==="string"){this.label_=document.createElement("span");this.label_.textContent=a}else{this.label_=a}var o=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;var s=document.createElement("button");s.setAttribute("type","button");s.title=n;s.appendChild(o);Object(d["a"])(s,se["a"].CLICK,this.handleClick_,this);var l=r+" "+xe["e"]+" "+xe["b"]+(this.collapsed_&&this.collapsible_?" "+xe["a"]:"")+(this.collapsible_?"":" ol-uncollapsible");var u=this.element;u.className=l;u.appendChild(this.ulElement_);u.appendChild(s);this.renderedAttributions_=[];this.renderedVisible_=true}if(c)e.__proto__=c;e.prototype=Object.create(c&&c.prototype);e.prototype.constructor=e;e.prototype.collectSourceAttributions_=function e(t){var r={};var n=[];var i=t.layerStatesArray;var a=t.viewState.resolution;for(var o=0,s=i.length;o<s;++o){var l=i[o];if(!Object(Te["b"])(l,a)){continue}var u=l.layer.getSource();if(!u){continue}var c=u.getAttributions();if(!c){continue}var f=c(t);if(!f){continue}if(!this.overrideCollapsible_&&u.getAttributionsCollapsible()===false){this.setCollapsible(false)}if(Array.isArray(f)){for(var h=0,d=f.length;h<d;++h){if(!(f[h]in r)){n.push(f[h]);r[f[h]]=true}}}else{if(!(f in r)){n.push(f);r[f]=true}}}return n};e.prototype.updateElement_=function e(t){if(!t){if(this.renderedVisible_){this.element.style.display="none";this.renderedVisible_=false}return}var r=this.collectSourceAttributions_(t);var n=r.length>0;if(this.renderedVisible_!=n){this.element.style.display=n?"":"none";this.renderedVisible_=n}if(Object(Ae["b"])(r,this.renderedAttributions_)){return}Object(ge["d"])(this.ulElement_);for(var i=0,a=r.length;i<a;++i){var o=document.createElement("li");o.innerHTML=r[i];this.ulElement_.appendChild(o)}this.renderedAttributions_=r};e.prototype.handleClick_=function e(t){t.preventDefault();this.handleToggle_()};e.prototype.handleToggle_=function e(){this.element.classList.toggle(xe["a"]);if(this.collapsed_){Object(ge["f"])(this.collapseLabel_,this.label_)}else{Object(ge["f"])(this.label_,this.collapseLabel_)}this.collapsed_=!this.collapsed_};e.prototype.getCollapsible=function e(){return this.collapsible_};e.prototype.setCollapsible=function e(t){if(this.collapsible_===t){return}this.collapsible_=t;this.element.classList.toggle("ol-uncollapsible");if(!t&&this.collapsed_){this.handleToggle_()}};e.prototype.setCollapsed=function e(t){if(!this.collapsible_||this.collapsed_===t){return}this.handleToggle_()};e.prototype.getCollapsed=function e(){return this.collapsed_};return e}(Oe["a"]);function De(e){this.updateElement_(e.frameState)}var Pe=Ee;var Re=r(108);var Le=function(l){function e(e){var t=e?e:{};l.call(this,{element:document.createElement("div"),render:t.render||Ne,target:t.target});var r=t.className!==undefined?t.className:"ol-rotate";var n=t.label!==undefined?t.label:"⇧";this.label_=null;if(typeof n==="string"){this.label_=document.createElement("span");this.label_.className="ol-compass";this.label_.textContent=n}else{this.label_=n;this.label_.classList.add("ol-compass")}var i=t.tipLabel?t.tipLabel:"Reset rotation";var a=document.createElement("button");a.className=r+"-reset";a.setAttribute("type","button");a.title=i;a.appendChild(this.label_);Object(d["a"])(a,se["a"].CLICK,this.handleClick_,this);var o=r+" "+xe["e"]+" "+xe["b"];var s=this.element;s.className=o;s.appendChild(a);this.callResetNorth_=t.resetNorth?t.resetNorth:undefined;this.duration_=t.duration!==undefined?t.duration:250;this.autoHide_=t.autoHide!==undefined?t.autoHide:true;this.rotation_=undefined;if(this.autoHide_){this.element.classList.add(xe["c"])}}if(l)e.__proto__=l;e.prototype=Object.create(l&&l.prototype);e.prototype.constructor=e;e.prototype.handleClick_=function e(t){t.preventDefault();if(this.callResetNorth_!==undefined){this.callResetNorth_()}else{this.resetNorth_()}};e.prototype.resetNorth_=function e(){var t=this.getMap();var r=t.getView();if(!r){return}if(r.getRotation()!==undefined){if(this.duration_>0){r.animate({rotation:0,duration:this.duration_,easing:Re["b"]})}else{r.setRotation(0)}}};return e}(Oe["a"]);function Ne(e){var t=e.frameState;if(!t){return}var r=t.viewState.rotation;if(r!=this.rotation_){var n="rotate("+r+"rad)";if(this.autoHide_){var i=this.element.classList.contains(xe["c"]);if(!i&&r===0){this.element.classList.add(xe["c"])}else if(i&&r!==0){this.element.classList.remove(xe["c"])}}this.label_.style.msTransform=n;this.label_.style.webkitTransform=n;this.label_.style.transform=n}this.rotation_=r}var $e=Le;var Fe=function(h){function e(e){var t=e?e:{};h.call(this,{element:document.createElement("div"),target:t.target});var r=t.className!==undefined?t.className:"ol-zoom";var n=t.delta!==undefined?t.delta:1;var i=t.zoomInLabel!==undefined?t.zoomInLabel:"+";var a=t.zoomOutLabel!==undefined?t.zoomOutLabel:"−";var o=t.zoomInTipLabel!==undefined?t.zoomInTipLabel:"Zoom in";var s=t.zoomOutTipLabel!==undefined?t.zoomOutTipLabel:"Zoom out";var l=document.createElement("button");l.className=r+"-in";l.setAttribute("type","button");l.title=o;l.appendChild(typeof i==="string"?document.createTextNode(i):i);Object(d["a"])(l,se["a"].CLICK,this.handleClick_.bind(this,n));var u=document.createElement("button");u.className=r+"-out";u.setAttribute("type","button");u.title=s;u.appendChild(typeof a==="string"?document.createTextNode(a):a);Object(d["a"])(u,se["a"].CLICK,this.handleClick_.bind(this,-n));var c=r+" "+xe["e"]+" "+xe["b"];var f=this.element;f.className=c;f.appendChild(l);f.appendChild(u);this.duration_=t.duration!==undefined?t.duration:250}if(h)e.__proto__=h;e.prototype=Object.create(h&&h.prototype);e.prototype.constructor=e;e.prototype.handleClick_=function e(t,r){r.preventDefault();this.zoomByDelta_(t)};e.prototype.zoomByDelta_=function e(t){var r=this.getMap();var n=r.getView();if(!n){return}var i=n.getResolution();if(i){var a=n.constrainResolution(i,t);if(this.duration_>0){if(n.getAnimating()){n.cancelAnimations()}n.animate({resolution:a,duration:this.duration_,easing:Re["b"]})}else{n.setResolution(a)}}};return e}(Oe["a"]);var Ge=Fe;function Ue(e){var t=e?e:{};var r=new h["a"];var n=t.zoom!==undefined?t.zoom:true;if(n){r.push(new Ge(t.zoomOptions))}var i=t.rotate!==undefined?t.rotate:true;if(i){r.push(new $e(t.rotateOptions))}var a=t.attribution!==undefined?t.attribution:true;if(a){r.push(new Pe(t.attributionOptions))}return r}var He=function e(t,r,n){this.decay_=t;this.minVelocity_=r;this.delay_=n;this.points_=[];this.angle_=0;this.initialVelocity_=0};He.prototype.begin=function e(){this.points_.length=0;this.angle_=0;this.initialVelocity_=0};He.prototype.update=function e(t,r){this.points_.push(t,r,Date.now())};He.prototype.end=function e(){if(this.points_.length<6){return false}var t=Date.now()-this.delay_;var r=this.points_.length-3;if(this.points_[r+2]<t){return false}var n=r-3;while(n>0&&this.points_[n+2]>t){n-=3}var i=this.points_[r+2]-this.points_[n+2];if(i<1e3/60){return false}var a=this.points_[r]-this.points_[n];var o=this.points_[r+1]-this.points_[n+1];this.angle_=Math.atan2(o,a);this.initialVelocity_=Math.sqrt(a*a+o*o)/i;return this.initialVelocity_>this.minVelocity_};He.prototype.getDistance=function e(){return(this.minVelocity_-this.initialVelocity_)/this.decay_};He.prototype.getAngle=function e(){return this.angle_};var We=He;var Ye=r(47);var Ve=function(r){function e(e){r.call(this,{handleEvent:qe});var t=e?e:{};this.delta_=t.delta?t.delta:1;this.duration_=t.duration!==undefined?t.duration:250}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;return e}(Ye["a"]);function qe(e){var t=false;if(e.type==l["a"].DBLCLICK){var r=e.originalEvent;var n=e.map;var i=e.coordinate;var a=r.shiftKey?-this.delta_:this.delta_;var o=n.getView();Object(Ye["f"])(o,a,i,this.duration_);e.preventDefault();t=true}return!t}var ze=Ve;var Be=r(39);var Ke=r(58);var Xe=r(54);var Ze=function(r){function e(e){r.call(this,{stopDown:me["a"]});var t=e?e:{};this.kinetic_=t.kinetic;this.lastCentroid=null;this.lastPointersCount_;this.panning_=false;this.condition_=t.condition?t.condition:Ke["g"];this.noKinetic_=false}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;e.prototype.handleDragEvent=function e(t){if(!this.panning_){this.panning_=true;this.getMap().getView().setHint(ve["a"].INTERACTING,1)}var r=this.targetPointers;var n=Object(Xe["a"])(r);if(r.length==this.lastPointersCount_){if(this.kinetic_){this.kinetic_.update(n[0],n[1])}if(this.lastCentroid){var i=this.lastCentroid[0]-n[0];var a=n[1]-this.lastCentroid[1];var o=t.map;var s=o.getView();var l=[i,a];Object(Be["g"])(l,s.getResolution());Object(Be["f"])(l,s.getRotation());Object(Be["a"])(l,s.getCenter());l=s.constrainCenter(l);s.setCenter(l)}}else if(this.kinetic_){this.kinetic_.begin()}this.lastCentroid=n;this.lastPointersCount_=r.length};e.prototype.handleUpEvent=function e(t){var r=t.map;var n=r.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var i=this.kinetic_.getDistance();var a=this.kinetic_.getAngle();var o=n.getCenter();var s=r.getPixelFromCoordinate(o);var l=r.getCoordinateFromPixel([s[0]-i*Math.cos(a),s[1]-i*Math.sin(a)]);n.animate({center:n.constrainCenter(l),duration:500,easing:Re["b"]})}if(this.panning_){this.panning_=false;n.setHint(ve["a"].INTERACTING,-1)}return false}else{if(this.kinetic_){this.kinetic_.begin()}this.lastCentroid=null;return true}};e.prototype.handleDownEvent=function e(t){if(this.targetPointers.length>0&&this.condition_(t)){var r=t.map;var n=r.getView();this.lastCentroid=null;if(n.getAnimating()){n.setCenter(t.frameState.viewState.center)}if(this.kinetic_){this.kinetic_.begin()}this.noKinetic_=this.targetPointers.length>1;return true}else{return false}};return e}(Xe["b"]);var Qe=Ze;var Je=r(193);var et=function(r){function e(e){var t=e?e:{};r.call(this,{stopDown:me["a"]});this.condition_=t.condition?t.condition:Ke["b"];this.lastAngle_=undefined;this.duration_=t.duration!==undefined?t.duration:250}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;e.prototype.handleDragEvent=function e(t){if(!Object(Ke["f"])(t)){return}var r=t.map;var n=r.getView();if(n.getConstraints().rotation===Je["c"]){return}var i=r.getSize();var a=t.pixel;var o=Math.atan2(i[1]/2-a[1],a[0]-i[0]/2);if(this.lastAngle_!==undefined){var s=o-this.lastAngle_;var l=n.getRotation();Object(Ye["d"])(n,l-s)}this.lastAngle_=o};e.prototype.handleUpEvent=function e(t){if(!Object(Ke["f"])(t)){return true}var r=t.map;var n=r.getView();n.setHint(ve["a"].INTERACTING,-1);var i=n.getRotation();Object(Ye["c"])(n,i,undefined,this.duration_);return false};e.prototype.handleDownEvent=function e(t){if(!Object(Ke["f"])(t)){return false}if(Object(Ke["e"])(t)&&this.condition_(t)){var r=t.map;r.getView().setHint(ve["a"].INTERACTING,1);this.lastAngle_=undefined;return true}else{return false}};return e}(Xe["b"]);var tt=et;var rt=r(248);var nt=function(n){function e(e){var t=e?e:{};var r=t.condition?t.condition:Ke["j"];n.call(this,{condition:r,className:t.className||"ol-dragzoom",onBoxEnd:it});this.duration_=t.duration!==undefined?t.duration:200;this.out_=t.out!==undefined?t.out:false}if(n)e.__proto__=n;e.prototype=Object.create(n&&n.prototype);e.prototype.constructor=e;return e}(rt["a"]);function it(){var e=this.getMap();var t=e.getView();var r=e.getSize();var n=this.getGeometry().getExtent();if(this.out_){var i=t.calculateExtent(r);var a=Object(je["n"])([e.getPixelFromCoordinate(Object(je["v"])(n)),e.getPixelFromCoordinate(Object(je["D"])(n))]);var o=t.getResolutionForExtent(a,r);Object(je["J"])(i,1/o);n=i}var s=t.constrainResolution(t.getResolutionForExtent(n,r));var l=Object(je["x"])(n);l=t.constrainCenter(l);t.animate({resolution:s,center:l,duration:this.duration_,easing:Re["b"]})}var at=nt;var ot={LEFT:37,UP:38,RIGHT:39,DOWN:40};var st=function(r){function e(e){r.call(this,{handleEvent:lt});var t=e||{};this.defaultCondition_=function(e){return Object(Ke["g"])(e)&&Object(Ke["l"])(e)};this.condition_=t.condition!==undefined?t.condition:this.defaultCondition_;this.duration_=t.duration!==undefined?t.duration:100;this.pixelDelta_=t.pixelDelta!==undefined?t.pixelDelta:128}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;return e}(Ye["a"]);function lt(e){var t=false;if(e.type==se["a"].KEYDOWN){var r=e.originalEvent;var n=r.keyCode;if(this.condition_(e)&&(n==ot.DOWN||n==ot.LEFT||n==ot.RIGHT||n==ot.UP)){var i=e.map;var a=i.getView();var o=a.getResolution()*this.pixelDelta_;var s=0,l=0;if(n==ot.DOWN){l=-o}else if(n==ot.LEFT){s=-o}else if(n==ot.RIGHT){s=o}else{l=o}var u=[s,l];Object(Be["f"])(u,a.getRotation());Object(Ye["b"])(a,u,this.duration_);e.preventDefault();t=true}}return!t}var ut=st;var ct=function(r){function e(e){r.call(this,{handleEvent:ft});var t=e?e:{};this.condition_=t.condition?t.condition:Ke["l"];this.delta_=t.delta?t.delta:1;this.duration_=t.duration!==undefined?t.duration:100}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;return e}(Ye["a"]);function ft(e){var t=false;if(e.type==se["a"].KEYDOWN||e.type==se["a"].KEYPRESS){var r=e.originalEvent;var n=r.charCode;if(this.condition_(e)&&(n=="+".charCodeAt(0)||n=="-".charCodeAt(0))){var i=e.map;var a=n=="+".charCodeAt(0)?this.delta_:-this.delta_;var o=i.getView();Object(Ye["f"])(o,a,undefined,this.duration_);e.preventDefault();t=true}}return!t}var ht=ct;var dt=r(15);var pt=1;var vt={TRACKPAD:"trackpad",WHEEL:"wheel"};var gt=function(r){function e(e){var t=e?e:{};r.call(this,t);this.delta_=0;this.duration_=t.duration!==undefined?t.duration:250;this.timeout_=t.timeout!==undefined?t.timeout:80;this.useAnchor_=t.useAnchor!==undefined?t.useAnchor:true;this.constrainResolution_=t.constrainResolution||false;this.condition_=t.condition?t.condition:Ke["c"];this.lastAnchor_=null;this.startTime_=undefined;this.timeoutId_;this.mode_=undefined;this.trackpadEventGap_=400;this.trackpadTimeoutId_;this.trackpadDeltaPerZoom_=300;this.trackpadZoomBuffer_=1.5}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;e.prototype.decrementInteractingHint_=function e(){this.trackpadTimeoutId_=undefined;var t=this.getMap().getView();t.setHint(ve["a"].INTERACTING,-1)};e.prototype.handleEvent=function e(t){if(!this.condition_(t)){return true}var r=t.type;if(r!==se["a"].WHEEL&&r!==se["a"].MOUSEWHEEL){return true}t.preventDefault();var n=t.map;var i=t.originalEvent;if(this.useAnchor_){this.lastAnchor_=t.coordinate}var a;if(t.type==se["a"].WHEEL){a=i.deltaY;if(x["c"]&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL){a/=x["b"]}if(i.deltaMode===WheelEvent.DOM_DELTA_LINE){a*=40}}else if(t.type==se["a"].MOUSEWHEEL){a=-i.wheelDeltaY;if(x["g"]){a/=3}}if(a===0){return false}var o=Date.now();if(this.startTime_===undefined){this.startTime_=o}if(!this.mode_||o-this.startTime_>this.trackpadEventGap_){this.mode_=Math.abs(a)<4?vt.TRACKPAD:vt.WHEEL}if(this.mode_===vt.TRACKPAD){var s=n.getView();if(this.trackpadTimeoutId_){clearTimeout(this.trackpadTimeoutId_)}else{s.setHint(ve["a"].INTERACTING,1)}this.trackpadTimeoutId_=setTimeout(this.decrementInteractingHint_.bind(this),this.trackpadEventGap_);var l=s.getResolution()*Math.pow(2,a/this.trackpadDeltaPerZoom_);var u=s.getMinResolution();var c=s.getMaxResolution();var f=0;if(l<u){l=Math.max(l,u/this.trackpadZoomBuffer_);f=1}else if(l>c){l=Math.min(l,c*this.trackpadZoomBuffer_);f=-1}if(this.lastAnchor_){var h=s.calculateCenterZoom(l,this.lastAnchor_);s.setCenter(s.constrainCenter(h))}s.setResolution(l);if(f===0&&this.constrainResolution_){s.animate({resolution:s.constrainResolution(l,a>0?-1:1),easing:Re["b"],anchor:this.lastAnchor_,duration:this.duration_})}if(f>0){s.animate({resolution:u,easing:Re["b"],anchor:this.lastAnchor_,duration:500})}else if(f<0){s.animate({resolution:c,easing:Re["b"],anchor:this.lastAnchor_,duration:500})}this.startTime_=o;return false}this.delta_+=a;var d=Math.max(this.timeout_-(o-this.startTime_),0);clearTimeout(this.timeoutId_);this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),d);return false};e.prototype.handleWheelZoom_=function e(t){var r=t.getView();if(r.getAnimating()){r.cancelAnimations()}var n=pt;var i=Object(dt["a"])(this.delta_,-n,n);Object(Ye["f"])(r,-i,this.lastAnchor_,this.duration_);this.mode_=undefined;this.delta_=0;this.lastAnchor_=null;this.startTime_=undefined;this.timeoutId_=undefined};e.prototype.setMouseAnchor=function e(t){this.useAnchor_=t;if(!t){this.lastAnchor_=null}};return e}(Ye["a"]);var mt=gt;var _t=function(n){function e(e){var t=e?e:{};var r=t;if(!r.stopDown){r.stopDown=me["a"]}n.call(this,r);this.anchor_=null;this.lastAngle_=undefined;this.rotating_=false;this.rotationDelta_=0;this.threshold_=t.threshold!==undefined?t.threshold:.3;this.duration_=t.duration!==undefined?t.duration:250}if(n)e.__proto__=n;e.prototype=Object.create(n&&n.prototype);e.prototype.constructor=e;e.prototype.handleDragEvent=function e(t){var r=0;var n=this.targetPointers[0];var i=this.targetPointers[1];var a=Math.atan2(i.clientY-n.clientY,i.clientX-n.clientX);if(this.lastAngle_!==undefined){var o=a-this.lastAngle_;this.rotationDelta_+=o;if(!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_){this.rotating_=true}r=o}this.lastAngle_=a;var s=t.map;var l=s.getView();if(l.getConstraints().rotation===Je["c"]){return}var u=s.getViewport().getBoundingClientRect();var c=Object(Xe["a"])(this.targetPointers);c[0]-=u.left;c[1]-=u.top;this.anchor_=s.getCoordinateFromPixel(c);if(this.rotating_){var f=l.getRotation();s.render();Object(Ye["d"])(l,f+r,this.anchor_)}};e.prototype.handleUpEvent=function e(t){if(this.targetPointers.length<2){var r=t.map;var n=r.getView();n.setHint(ve["a"].INTERACTING,-1);if(this.rotating_){var i=n.getRotation();Object(Ye["c"])(n,i,this.anchor_,this.duration_)}return false}else{return true}};e.prototype.handleDownEvent=function e(t){if(this.targetPointers.length>=2){var r=t.map;this.anchor_=null;this.lastAngle_=undefined;this.rotating_=false;this.rotationDelta_=0;if(!this.handlingDownUpSequence){r.getView().setHint(ve["a"].INTERACTING,1)}return true}else{return false}};return e}(Xe["b"]);var yt=_t;var bt=function(n){function e(e){var t=e?e:{};var r=t;if(!r.stopDown){r.stopDown=me["a"]}n.call(this,r);this.constrainResolution_=t.constrainResolution||false;this.anchor_=null;this.duration_=t.duration!==undefined?t.duration:400;this.lastDistance_=undefined;this.lastScaleDelta_=1}if(n)e.__proto__=n;e.prototype=Object.create(n&&n.prototype);e.prototype.constructor=e;e.prototype.handleDragEvent=function e(t){var r=1;var n=this.targetPointers[0];var i=this.targetPointers[1];var a=n.clientX-i.clientX;var o=n.clientY-i.clientY;var s=Math.sqrt(a*a+o*o);if(this.lastDistance_!==undefined){r=this.lastDistance_/s}this.lastDistance_=s;var l=t.map;var u=l.getView();var c=u.getResolution();var f=u.getMaxResolution();var h=u.getMinResolution();var d=c*r;if(d>f){r=f/c;d=f}else if(d<h){r=h/c;d=h}if(r!=1){this.lastScaleDelta_=r}var p=l.getViewport().getBoundingClientRect();var v=Object(Xe["a"])(this.targetPointers);v[0]-=p.left;v[1]-=p.top;this.anchor_=l.getCoordinateFromPixel(v);l.render();Object(Ye["g"])(u,d,this.anchor_)};e.prototype.handleUpEvent=function e(t){if(this.targetPointers.length<2){var r=t.map;var n=r.getView();n.setHint(ve["a"].INTERACTING,-1);var i=n.getResolution();if(this.constrainResolution_||i<n.getMinResolution()||i>n.getMaxResolution()){var a=this.lastScaleDelta_-1;Object(Ye["e"])(n,i,this.anchor_,this.duration_,a)}return false}else{return true}};e.prototype.handleDownEvent=function e(t){if(this.targetPointers.length>=2){var r=t.map;this.anchor_=null;this.lastDistance_=undefined;this.lastScaleDelta_=1;if(!this.handlingDownUpSequence){r.getView().setHint(ve["a"].INTERACTING,1)}return true}else{return false}};return e}(Xe["b"]);var wt=bt;function St(e){var t=e?e:{};var r=new h["a"];var n=new We(-.005,.05,100);var i=t.altShiftDragRotate!==undefined?t.altShiftDragRotate:true;if(i){r.push(new tt)}var a=t.doubleClickZoom!==undefined?t.doubleClickZoom:true;if(a){r.push(new ze({delta:t.zoomDelta,duration:t.zoomDuration}))}var o=t.dragPan!==undefined?t.dragPan:true;if(o){r.push(new Qe({condition:t.onFocusOnly?Ke["d"]:undefined,kinetic:n}))}var s=t.pinchRotate!==undefined?t.pinchRotate:true;if(s){r.push(new yt)}var l=t.pinchZoom!==undefined?t.pinchZoom:true;if(l){r.push(new wt({constrainResolution:t.constrainResolution,duration:t.zoomDuration}))}var u=t.keyboard!==undefined?t.keyboard:true;if(u){r.push(new ut);r.push(new ht({delta:t.zoomDelta,duration:t.zoomDuration}))}var c=t.mouseWheelZoom!==undefined?t.mouseWheelZoom:true;if(c){r.push(new mt({condition:t.onFocusOnly?Ke["d"]:undefined,constrainResolution:t.constrainResolution,duration:t.zoomDuration}))}var f=t.shiftDragZoom!==undefined?t.shiftDragZoom:true;if(f){r.push(new at({duration:t.zoomDuration}))}return r}var Ct=r(126);var Ot=r(250);var xt=r(38);var Tt=function(o){function e(e,t,r,n,i){var a=i!==undefined?xt["a"].IDLE:xt["a"].LOADED;o.call(this,e,t,r,a);this.loader_=i!==undefined?i:null;this.canvas_=n;this.error_=null}if(o)e.__proto__=o;e.prototype=Object.create(o&&o.prototype);e.prototype.constructor=e;e.prototype.getError=function e(){return this.error_};e.prototype.handleLoad_=function e(t){if(t){this.error_=t;this.state=xt["a"].ERROR}else{this.state=xt["a"].LOADED}this.changed()};e.prototype.load=function e(){if(this.state==xt["a"].IDLE){this.state=xt["a"].LOADING;this.changed();this.loader_(this.handleLoad_.bind(this))}};e.prototype.getImage=function e(){return this.canvas_};return e}(Ot["a"]);var Et=Tt;var Mt=r(134);var At=r(308);var kt=function(a){function e(e,t,r,n,i){a.call(this,e);this.vectorContext=t;this.frameState=r;this.context=n;this.glContext=i}if(a)e.__proto__=a;e.prototype=Object.create(a&&a.prototype);e.prototype.constructor=e;return e}(R["a"]);var jt=kt;var It=r(16);var Dt=r(146);var Pt=r(7);var Rt=r(82);var Lt=r(143);var Nt=function e(){};Nt.prototype.drawCustom=function e(t,r,n){};Nt.prototype.drawGeometry=function e(t){};Nt.prototype.setStyle=function e(t){};Nt.prototype.drawCircle=function e(t,r){};Nt.prototype.drawFeature=function e(t,r){};Nt.prototype.drawGeometryCollection=function e(t,r){};Nt.prototype.drawLineString=function e(t,r){};Nt.prototype.drawMultiLineString=function e(t,r){};Nt.prototype.drawMultiPoint=function e(t,r){};Nt.prototype.drawMultiPolygon=function e(t,r){};Nt.prototype.drawPoint=function e(t,r){};Nt.prototype.drawPolygon=function e(t,r){};Nt.prototype.drawText=function e(t,r){};Nt.prototype.setFillStrokeStyle=function e(t,r){};Nt.prototype.setImageStyle=function e(t,r){};Nt.prototype.setTextStyle=function e(t,r){};var $t=Nt;var Ft=function(a){function e(e,t,r,n,i){a.call(this);this.context_=e;this.pixelRatio_=t;this.extent_=r;this.transform_=n;this.viewRotation_=i;this.contextFillState_=null;this.contextStrokeState_=null;this.contextTextState_=null;this.fillState_=null;this.strokeState_=null;this.image_=null;this.imageAnchorX_=0;this.imageAnchorY_=0;this.imageHeight_=0;this.imageOpacity_=0;this.imageOriginX_=0;this.imageOriginY_=0;this.imageRotateWithView_=false;this.imageRotation_=0;this.imageScale_=0;this.imageWidth_=0;this.text_="";this.textOffsetX_=0;this.textOffsetY_=0;this.textRotateWithView_=false;this.textRotation_=0;this.textScale_=0;this.textFillState_=null;this.textStrokeState_=null;this.textState_=null;this.pixelCoordinates_=[];this.tmpLocalTransform_=Object(Ie["c"])()}if(a)e.__proto__=a;e.prototype=Object.create(a&&a.prototype);e.prototype.constructor=e;e.prototype.drawImages_=function e(t,r,n,i){if(!this.image_){return}var a=Object(Lt["c"])(t,r,n,2,this.transform_,this.pixelCoordinates_);var o=this.context_;var s=this.tmpLocalTransform_;var l=o.globalAlpha;if(this.imageOpacity_!=1){o.globalAlpha=l*this.imageOpacity_}var u=this.imageRotation_;if(this.imageRotateWithView_){u+=this.viewRotation_}for(var c=0,f=a.length;c<f;c+=2){var h=a[c]-this.imageAnchorX_;var d=a[c+1]-this.imageAnchorY_;if(u!==0||this.imageScale_!=1){var p=h+this.imageAnchorX_;var v=d+this.imageAnchorY_;Object(Ie["b"])(s,p,v,this.imageScale_,this.imageScale_,u,-p,-v);o.setTransform.apply(o,s)}o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,h,d,this.imageWidth_,this.imageHeight_)}if(u!==0||this.imageScale_!=1){o.setTransform(1,0,0,1,0,0)}if(this.imageOpacity_!=1){o.globalAlpha=l}};e.prototype.drawText_=function e(t,r,n,i){if(!this.textState_||this.text_===""){return}if(this.textFillState_){this.setContextFillState_(this.textFillState_)}if(this.textStrokeState_){this.setContextStrokeState_(this.textStrokeState_)}this.setContextTextState_(this.textState_);var a=Object(Lt["c"])(t,r,n,i,this.transform_,this.pixelCoordinates_);var o=this.context_;var s=this.textRotation_;if(this.textRotateWithView_){s+=this.viewRotation_}for(;r<n;r+=i){var l=a[r]+this.textOffsetX_;var u=a[r+1]+this.textOffsetY_;if(s!==0||this.textScale_!=1){var c=Object(Ie["b"])(this.tmpLocalTransform_,l,u,this.textScale_,this.textScale_,s,-l,-u);o.setTransform.apply(o,c)}if(this.textStrokeState_){o.strokeText(this.text_,l,u)}if(this.textFillState_){o.fillText(this.text_,l,u)}}if(s!==0||this.textScale_!=1){o.setTransform(1,0,0,1,0,0)}};e.prototype.moveToLineTo_=function e(t,r,n,i,a){var o=this.context_;var s=Object(Lt["c"])(t,r,n,i,this.transform_,this.pixelCoordinates_);o.moveTo(s[0],s[1]);var l=s.length;if(a){l-=2}for(var u=2;u<l;u+=2){o.lineTo(s[u],s[u+1])}if(a){o.closePath()}return n};e.prototype.drawRings_=function e(t,r,n,i){for(var a=0,o=n.length;a<o;++a){r=this.moveToLineTo_(t,r,n[a],i,true)}return r};e.prototype.drawCircle=function e(t){if(!Object(je["F"])(this.extent_,t.getExtent())){return}if(this.fillState_||this.strokeState_){if(this.fillState_){this.setContextFillState_(this.fillState_)}if(this.strokeState_){this.setContextStrokeState_(this.strokeState_)}var r=Object(Rt["b"])(t,this.transform_,this.pixelCoordinates_);var n=r[2]-r[0];var i=r[3]-r[1];var a=Math.sqrt(n*n+i*i);var o=this.context_;o.beginPath();o.arc(r[0],r[1],a,0,2*Math.PI);if(this.fillState_){o.fill()}if(this.strokeState_){o.stroke()}}if(this.text_!==""){this.drawText_(t.getCenter(),0,2,2)}};e.prototype.setStyle=function e(t){this.setFillStrokeStyle(t.getFill(),t.getStroke());this.setImageStyle(t.getImage());this.setTextStyle(t.getText())};e.prototype.drawGeometry=function e(t){var r=t.getType();switch(r){case Pt["a"].POINT:this.drawPoint(t);break;case Pt["a"].LINE_STRING:this.drawLineString(t);break;case Pt["a"].POLYGON:this.drawPolygon(t);break;case Pt["a"].MULTI_POINT:this.drawMultiPoint(t);break;case Pt["a"].MULTI_LINE_STRING:this.drawMultiLineString(t);break;case Pt["a"].MULTI_POLYGON:this.drawMultiPolygon(t);break;case Pt["a"].GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case Pt["a"].CIRCLE:this.drawCircle(t);break;default:}};e.prototype.drawFeature=function e(t,r){var n=r.getGeometryFunction()(t);if(!n||!Object(je["F"])(this.extent_,n.getExtent())){return}this.setStyle(r);this.drawGeometry(n)};e.prototype.drawGeometryCollection=function e(t){var r=t.getGeometriesArray();for(var n=0,i=r.length;n<i;++n){this.drawGeometry(r[n])}};e.prototype.drawPoint=function e(t){var r=t.getFlatCoordinates();var n=t.getStride();if(this.image_){this.drawImages_(r,0,r.length,n)}if(this.text_!==""){this.drawText_(r,0,r.length,n)}};e.prototype.drawMultiPoint=function e(t){var r=t.getFlatCoordinates();var n=t.getStride();if(this.image_){this.drawImages_(r,0,r.length,n)}if(this.text_!==""){this.drawText_(r,0,r.length,n)}};e.prototype.drawLineString=function e(t){if(!Object(je["F"])(this.extent_,t.getExtent())){return}if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var r=this.context_;var n=t.getFlatCoordinates();r.beginPath();this.moveToLineTo_(n,0,n.length,t.getStride(),false);r.stroke()}if(this.text_!==""){var i=t.getFlatMidpoint();this.drawText_(i,0,2,2)}};e.prototype.drawMultiLineString=function e(t){var r=t.getExtent();if(!Object(je["F"])(this.extent_,r)){return}if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var n=this.context_;var i=t.getFlatCoordinates();var a=0;var o=t.getEnds();var s=t.getStride();n.beginPath();for(var l=0,u=o.length;l<u;++l){a=this.moveToLineTo_(i,a,o[l],s,false)}n.stroke()}if(this.text_!==""){var c=t.getFlatMidpoints();this.drawText_(c,0,c.length,2)}};e.prototype.drawPolygon=function e(t){if(!Object(je["F"])(this.extent_,t.getExtent())){return}if(this.strokeState_||this.fillState_){if(this.fillState_){this.setContextFillState_(this.fillState_)}if(this.strokeState_){this.setContextStrokeState_(this.strokeState_)}var r=this.context_;r.beginPath();this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride());if(this.fillState_){r.fill()}if(this.strokeState_){r.stroke()}}if(this.text_!==""){var n=t.getFlatInteriorPoint();this.drawText_(n,0,2,2)}};e.prototype.drawMultiPolygon=function e(t){if(!Object(je["F"])(this.extent_,t.getExtent())){return}if(this.strokeState_||this.fillState_){if(this.fillState_){this.setContextFillState_(this.fillState_)}if(this.strokeState_){this.setContextStrokeState_(this.strokeState_)}var r=this.context_;var n=t.getOrientedFlatCoordinates();var i=0;var a=t.getEndss();var o=t.getStride();r.beginPath();for(var s=0,l=a.length;s<l;++s){var u=a[s];i=this.drawRings_(n,i,u,o)}if(this.fillState_){r.fill()}if(this.strokeState_){r.stroke()}}if(this.text_!==""){var c=t.getFlatInteriorPoints();this.drawText_(c,0,c.length,2)}};e.prototype.setContextFillState_=function e(t){var r=this.context_;var n=this.contextFillState_;if(!n){r.fillStyle=t.fillStyle;this.contextFillState_={fillStyle:t.fillStyle}}else{if(n.fillStyle!=t.fillStyle){n.fillStyle=r.fillStyle=t.fillStyle}}};e.prototype.setContextStrokeState_=function e(t){var r=this.context_;var n=this.contextStrokeState_;if(!n){r.lineCap=t.lineCap;if(x["a"]){r.setLineDash(t.lineDash);r.lineDashOffset=t.lineDashOffset}r.lineJoin=t.lineJoin;r.lineWidth=t.lineWidth;r.miterLimit=t.miterLimit;r.strokeStyle=t.strokeStyle;this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle}}else{if(n.lineCap!=t.lineCap){n.lineCap=r.lineCap=t.lineCap}if(x["a"]){if(!Object(Ae["b"])(n.lineDash,t.lineDash)){r.setLineDash(n.lineDash=t.lineDash)}if(n.lineDashOffset!=t.lineDashOffset){n.lineDashOffset=r.lineDashOffset=t.lineDashOffset}}if(n.lineJoin!=t.lineJoin){n.lineJoin=r.lineJoin=t.lineJoin}if(n.lineWidth!=t.lineWidth){n.lineWidth=r.lineWidth=t.lineWidth}if(n.miterLimit!=t.miterLimit){n.miterLimit=r.miterLimit=t.miterLimit}if(n.strokeStyle!=t.strokeStyle){n.strokeStyle=r.strokeStyle=t.strokeStyle}}};e.prototype.setContextTextState_=function e(t){var r=this.context_;var n=this.contextTextState_;var i=t.textAlign?t.textAlign:It["l"];if(!n){r.font=t.font;r.textAlign=i;r.textBaseline=t.textBaseline;this.contextTextState_={font:t.font,textAlign:i,textBaseline:t.textBaseline}}else{if(n.font!=t.font){n.font=r.font=t.font}if(n.textAlign!=i){n.textAlign=r.textAlign=i}if(n.textBaseline!=t.textBaseline){n.textBaseline=r.textBaseline=t.textBaseline}}};e.prototype.setFillStrokeStyle=function e(t,r){if(!t){this.fillState_=null}else{var n=t.getColor();this.fillState_={fillStyle:Object(Dt["a"])(n?n:It["b"])}}if(!r){this.strokeState_=null}else{var i=r.getColor();var a=r.getLineCap();var o=r.getLineDash();var s=r.getLineDashOffset();var l=r.getLineJoin();var u=r.getWidth();var c=r.getMiterLimit();this.strokeState_={lineCap:a!==undefined?a:It["d"],lineDash:o?o:It["e"],lineDashOffset:s?s:It["f"],lineJoin:l!==undefined?l:It["g"],lineWidth:this.pixelRatio_*(u!==undefined?u:It["h"]),miterLimit:c!==undefined?c:It["i"],strokeStyle:Object(Dt["a"])(i?i:It["k"])}}};e.prototype.setImageStyle=function e(t){if(!t){this.image_=null}else{var r=t.getAnchor();var n=t.getImage(1);var i=t.getOrigin();var a=t.getSize();this.imageAnchorX_=r[0];this.imageAnchorY_=r[1];this.imageHeight_=a[1];this.image_=n;this.imageOpacity_=t.getOpacity();this.imageOriginX_=i[0];this.imageOriginY_=i[1];this.imageRotateWithView_=t.getRotateWithView();this.imageRotation_=t.getRotation();this.imageScale_=t.getScale()*this.pixelRatio_;this.imageWidth_=a[0]}};e.prototype.setTextStyle=function e(t){if(!t){this.text_=""}else{var r=t.getFill();if(!r){this.textFillState_=null}else{var n=r.getColor();this.textFillState_={fillStyle:Object(Dt["a"])(n?n:It["b"])}}var i=t.getStroke();if(!i){this.textStrokeState_=null}else{var a=i.getColor();var o=i.getLineCap();var s=i.getLineDash();var l=i.getLineDashOffset();var u=i.getLineJoin();var c=i.getWidth();var f=i.getMiterLimit();this.textStrokeState_={lineCap:o!==undefined?o:It["d"],lineDash:s?s:It["e"],lineDashOffset:l?l:It["f"],lineJoin:u!==undefined?u:It["g"],lineWidth:c!==undefined?c:It["h"],miterLimit:f!==undefined?f:It["i"],strokeStyle:Object(Dt["a"])(a?a:It["k"])}}var h=t.getFont();var d=t.getOffsetX();var p=t.getOffsetY();var v=t.getRotateWithView();var g=t.getRotation();var m=t.getScale();var _=t.getText();var y=t.getTextAlign();var b=t.getTextBaseline();this.textState_={font:h!==undefined?h:It["c"],textAlign:y!==undefined?y:It["l"],textBaseline:b!==undefined?b:It["m"]};this.text_=_!==undefined?_:"";this.textOffsetX_=d!==undefined?this.pixelRatio_*d:0;this.textOffsetY_=p!==undefined?this.pixelRatio_*p:0;this.textRotateWithView_=v!==undefined?v:false;this.textRotation_=g!==undefined?g:0;this.textScale_=this.pixelRatio_*(m!==undefined?m:1)}};return e}($t);var Gt=Ft;var Ut=r(249);var Ht=r(284);var Wt=function(t){function e(e){t.call(this);this.map_=e;this.layerRenderers_={};this.layerRendererListeners_={};this.layerRendererConstructors_=[]}if(t)e.__proto__=t;e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;e.prototype.dispatchRenderEvent=function e(t,r){Object(Me["b"])()};e.prototype.registerLayerRenderers=function e(t){this.layerRendererConstructors_.push.apply(this.layerRendererConstructors_,t)};e.prototype.calculateMatrices2D=function e(t){var r=t.viewState;var n=t.coordinateToPixelTransform;var i=t.pixelToCoordinateTransform;Object(Ie["b"])(n,t.size[0]/2,t.size[1]/2,1/r.resolution,-1/r.resolution,-r.rotation,-r.center[0],-r.center[1]);Object(Ie["d"])(Object(Ie["g"])(i,n))};e.prototype.removeLayerRenderers=function e(){for(var t in this.layerRenderers_){this.removeLayerRendererByKey_(t).dispose()}};e.prototype.forEachFeatureAtCoordinate=function e(t,n,r,i,a,o,s){var l;var u=n.viewState;var c=u.resolution;function e(e,t){var r=n.layerStates[Object(Me["c"])(t)].managed;if(!(Object(Me["c"])(e)in n.skippedFeatureUids&&!r)){return i.call(a,e,r?t:null)}}var f=u.projection;var h=t;if(f.canWrapX()){var d=f.getExtent();var p=Object(je["E"])(d);var v=t[0];if(v<d[0]||v>d[2]){var g=Math.ceil((d[0]-v)/p);h=[v+p*g,t[1]]}}var m=n.layerStatesArray;var _=m.length;var y;for(y=_-1;y>=0;--y){var b=m[y];var w=b.layer;if(Object(Te["b"])(b,c)&&o.call(s,w)){var S=this.getLayerRenderer(w);var C=w.getSource();if(C){l=S.forEachFeatureAtCoordinate(C.getWrapX()?h:t,n,r,e)}if(l){return l}}}return undefined};e.prototype.forEachLayerAtPixel=function e(t,r,n,i,a,o,s){return Object(Me["b"])()};e.prototype.hasFeatureAtCoordinate=function e(t,r,n,i,a){var o=this.forEachFeatureAtCoordinate(t,r,n,me["b"],this,i,a);return o!==undefined};e.prototype.getLayerRenderer=function e(t){var r=Object(Me["c"])(t);if(r in this.layerRenderers_){return this.layerRenderers_[r]}else{var n;for(var i=0,a=this.layerRendererConstructors_.length;i<a;++i){var o=this.layerRendererConstructors_[i];if(o["handles"](t)){n=o["create"](this,t);break}}if(n){this.layerRenderers_[r]=n;this.layerRendererListeners_[r]=Object(d["a"])(n,se["a"].CHANGE,this.handleLayerRendererChange_,this)}else{throw new Error("Unable to create renderer for layer: "+t.getType())}return n}};e.prototype.getLayerRendererByKey=function e(t){return this.layerRenderers_[t]};e.prototype.getLayerRenderers=function e(){return this.layerRenderers_};e.prototype.getMap=function e(){return this.map_};e.prototype.handleLayerRendererChange_=function e(){this.map_.render()};e.prototype.removeLayerRendererByKey_=function e(t){var r=this.layerRenderers_[t];delete this.layerRenderers_[t];Object(d["e"])(this.layerRendererListeners_[t]);delete this.layerRendererListeners_[t];return r};e.prototype.removeUnusedLayerRenderers_=function e(t,r){for(var n in this.layerRenderers_){if(!r||!(n in r.layerStates)){this.removeLayerRendererByKey_(n).dispose()}}};e.prototype.renderFrame=function e(t){Object(Me["b"])()};e.prototype.scheduleExpireIconCache=function e(t){t.postRenderFunctions.push(Yt)};e.prototype.scheduleRemoveUnusedLayerRenderers=function e(t){for(var r in this.layerRenderers_){if(!(r in t.layerStates)){t.postRenderFunctions.push(this.removeUnusedLayerRenderers_.bind(this));return}}};return e}(Ut["a"]);function Yt(e,t){Ht["a"].expire()}function Vt(e,t){return e.zIndex-t.zIndex}var qt=Wt;var zt=r(155);var Bt=[];var Kt=function(a){function e(e){a.call(this,e);var t=e.getViewport();this.context_=Object(ge["a"])();this.canvas_=this.context_.canvas;this.canvas_.style.width="100%";this.canvas_.style.height="100%";this.canvas_.style.display="block";this.canvas_.className=xe["e"];t.insertBefore(this.canvas_,t.childNodes[0]||null);this.renderedVisible_=true;this.transform_=Object(Ie["c"])()}if(a)e.__proto__=a;e.prototype=Object.create(a&&a.prototype);e.prototype.constructor=e;e.prototype.dispatchRenderEvent=function e(t,r){var n=this.getMap();var i=this.context_;if(n.hasListener(t)){var a=r.extent;var o=r.pixelRatio;var s=r.viewState;var l=s.rotation;var u=this.getTransform(r);var c=new Gt(i,o,a,u,l);var f=new jt(t,c,r,i,null);n.dispatchEvent(f)}};e.prototype.getTransform=function e(t){var r=t.viewState;var n=this.canvas_.width/2;var i=this.canvas_.height/2;var a=t.pixelRatio/r.resolution;var o=-a;var s=-r.rotation;var l=-r.center[0];var u=-r.center[1];return Object(Ie["b"])(this.transform_,n,i,a,o,s,l,u)};e.prototype.renderFrame=function e(t){if(!t){if(this.renderedVisible_){this.canvas_.style.display="none";this.renderedVisible_=false}return}var r=this.context_;var n=t.pixelRatio;var i=Math.round(t.size[0]*n);var a=Math.round(t.size[1]*n);if(this.canvas_.width!=i||this.canvas_.height!=a){this.canvas_.width=i;this.canvas_.height=a}else{r.clearRect(0,0,i,a)}var o=t.viewState.rotation;this.calculateMatrices2D(t);this.dispatchRenderEvent(ne["a"].PRECOMPOSE,t);var s=t.layerStatesArray;Object(Ae["l"])(s,Vt);if(o){r.save();Object(It["s"])(r,o,i/2,a/2)}var l=t.viewState.resolution;var u,c;for(u=0,c=s.length;u<c;++u){var f=s[u];var h=f.layer;var d=this.getLayerRenderer(h);if(!Object(Te["b"])(f,l)||f.sourceState!=zt["a"].READY){continue}if(d.prepareFrame(t,f)){d.composeFrame(t,f,r)}}if(o){r.restore()}this.dispatchRenderEvent(ne["a"].POSTCOMPOSE,t);if(!this.renderedVisible_){this.canvas_.style.display="";this.renderedVisible_=true}this.scheduleRemoveUnusedLayerRenderers(t);this.scheduleExpireIconCache(t)};e.prototype.forEachLayerAtPixel=function e(t,r,n,i,a,o,s){var l;var u=r.viewState;var c=u.resolution;var f=r.layerStatesArray;var h=f.length;var d=Object(Ie["a"])(r.pixelToCoordinateTransform,t.slice());var p;for(p=h-1;p>=0;--p){var v=f[p];var g=v.layer;if(Object(Te["b"])(v,c)&&o.call(s,g)){var m=this.getLayerRenderer(g);l=m.forEachLayerAtCoordinate(d,r,n,i,a);if(l){return l}}}return undefined};e.prototype.registerLayerRenderers=function e(t){a.prototype.registerLayerRenderers.call(this,t);for(var r=0,n=t.length;r<n;++r){var i=t[r];if(!Object(Ae["f"])(Bt,i)){Bt.push(i)}}};return e}(qt);var Xt=Kt;var Zt=r(231);var Qt=function(t){function e(e){t.call(this);this.layer_=e}if(t)e.__proto__=t;e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;e.prototype.createLoadedTileFinder=function e(n,i,a){return function(t,e){function r(e){if(!a[t]){a[t]={}}a[t][e.tileCoord.toString()]=e}return n.forEachLoadedTile(i,t,e,r)}};e.prototype.forEachFeatureAtCoordinate=function e(t,r,n,i){};e.prototype.getLayer=function e(){return this.layer_};e.prototype.handleImageChange_=function e(t){var r=t.target;if(r.getState()===xt["a"].LOADED){this.renderIfReadyAndVisible()}};e.prototype.hasFeatureAtCoordinate=function e(t,r){return false};e.prototype.loadImage=function e(t){var r=t.getState();if(r!=xt["a"].LOADED&&r!=xt["a"].ERROR){Object(d["a"])(t,se["a"].CHANGE,this.handleImageChange_,this)}if(r==xt["a"].IDLE){t.load();r=t.getState()}return r==xt["a"].LOADED};e.prototype.renderIfReadyAndVisible=function e(){var t=this.getLayer();if(t.getVisible()&&t.getSourceState()==zt["a"].READY){this.changed()}};e.prototype.scheduleExpireCache=function e(t,r){if(r.canExpireCache()){var n=function(e,t,r){var n=Object(Me["c"])(e);if(n in r.usedTiles){e.expireCache(r.viewState.projection,r.usedTiles[n])}}.bind(null,r);t.postRenderFunctions.push(n)}};e.prototype.updateUsedTiles=function e(t,r,n,i){var a=Object(Me["c"])(r);var o=n.toString();if(a in t){if(o in t[a]){t[a][o].extend(i)}else{t[a][o]=i}}else{t[a]={};t[a][o]=i}};e.prototype.manageTilePyramid=function e(t,r,n,i,a,o,s,l,u,c){var f=Object(Me["c"])(r);if(!(f in t.wantedTiles)){t.wantedTiles[f]={}}var h=t.wantedTiles[f];var d=t.tileQueue;var p=n.getMinZoom();var v,g,m,_,y,b;for(b=p;b<=s;++b){g=n.getTileRangeForExtentAndZ(o,b,g);m=n.getResolution(b);for(_=g.minX;_<=g.maxX;++_){for(y=g.minY;y<=g.maxY;++y){if(s-b<=l){v=r.getTile(b,_,y,i,a);if(v.getState()==oe["a"].IDLE){h[v.getKey()]=true;if(!d.isKeyQueued(v.getKey())){d.enqueue([v,f,n.getTileCoordCenter(v.tileCoord),m])}}if(u!==undefined){u.call(c,v)}}else{r.useTile(b,_,y,a)}}}}};return e}(Zt["a"]);var Jt=Qt;var er=function(t){function e(e){t.call(this,e);this.renderedResolution;this.transform_=Object(Ie["c"])()}if(t)e.__proto__=t;e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;e.prototype.clip=function e(t,r,n){var i=r.pixelRatio;var a=r.size[0]*i;var o=r.size[1]*i;var s=r.viewState.rotation;var l=Object(je["C"])(n);var u=Object(je["D"])(n);var c=Object(je["w"])(n);var f=Object(je["v"])(n);Object(Ie["a"])(r.coordinateToPixelTransform,l);Object(Ie["a"])(r.coordinateToPixelTransform,u);Object(Ie["a"])(r.coordinateToPixelTransform,c);Object(Ie["a"])(r.coordinateToPixelTransform,f);t.save();Object(It["s"])(t,-s,a/2,o/2);t.beginPath();t.moveTo(l[0]*i,l[1]*i);t.lineTo(u[0]*i,u[1]*i);t.lineTo(c[0]*i,c[1]*i);t.lineTo(f[0]*i,f[1]*i);t.clip();Object(It["s"])(t,s,a/2,o/2)};e.prototype.dispatchComposeEvent_=function e(t,r,n,i){var a=this.getLayer();if(a.hasListener(t)){var o=n.size[0]*n.pixelRatio;var s=n.size[1]*n.pixelRatio;var l=n.viewState.rotation;Object(It["s"])(r,-l,o/2,s/2);var u=i!==undefined?i:this.getTransform(n,0);var c=new Gt(r,n.pixelRatio,n.extent,u,n.viewState.rotation);var f=new jt(t,c,n,r,null);a.dispatchEvent(f);Object(It["s"])(r,l,o/2,s/2)}};e.prototype.forEachLayerAtCoordinate=function e(t,r,n,i,a){var o=this.forEachFeatureAtCoordinate(t,r,n,me["b"]);if(o){return i.call(a,this.getLayer(),null)}else{return undefined}};e.prototype.postCompose=function e(t,r,n,i){this.dispatchComposeEvent_(ne["a"].POSTCOMPOSE,t,r,i)};e.prototype.preCompose=function e(t,r,n){this.dispatchComposeEvent_(ne["a"].PRECOMPOSE,t,r,n)};e.prototype.dispatchRenderEvent=function e(t,r,n){this.dispatchComposeEvent_(ne["a"].RENDER,t,r,n)};e.prototype.getTransform=function e(t,r){var n=t.viewState;var i=t.pixelRatio;var a=i*t.size[0]/2;var o=i*t.size[1]/2;var s=i/n.resolution;var l=-s;var u=-n.rotation;var c=-n.center[0]+r;var f=-n.center[1];return Object(Ie["b"])(this.transform_,a,o,s,l,u,c,f)};e.prototype.composeFrame=function e(t,r,n){Object(Me["b"])()};e.prototype.prepareFrame=function e(t,r){return Object(Me["b"])()};return e}(Jt);var tr=er;var rr=function(t){function e(e){t.call(this,e);this.coordinateToCanvasPixelTransform=Object(Ie["c"])();this.hitCanvasContext_=null}if(t)e.__proto__=t;e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;e.prototype.composeFrame=function e(t,r,n){this.preCompose(n,t);var i=this.getImage();if(i){var a=r.extent;var o=a!==undefined&&!Object(je["g"])(a,t.extent)&&Object(je["F"])(a,t.extent);if(o){this.clip(n,t,a)}var s=this.getImageTransform();var l=n.globalAlpha;n.globalAlpha=r.opacity;var u=s[4];var c=s[5];var f=i.width*s[0];var h=i.height*s[3];if(f>=.5&&h>=.5){n.drawImage(i,0,0,+i.width,+i.height,Math.round(u),Math.round(c),Math.round(f),Math.round(h))}n.globalAlpha=l;if(o){n.restore()}}this.postCompose(n,t,r)};e.prototype.getImage=function e(){return Object(Me["b"])()};e.prototype.getImageTransform=function e(){return Object(Me["b"])()};e.prototype.forEachLayerAtCoordinate=function e(t,r,n,i,a){if(!this.getImage()){return undefined}var o=Object(Ie["a"])(this.coordinateToCanvasPixelTransform,t.slice());Object(Be["g"])(o,r.viewState.resolution/this.renderedResolution);if(!this.hitCanvasContext_){this.hitCanvasContext_=Object(ge["a"])(1,1)}this.hitCanvasContext_.clearRect(0,0,1,1);this.hitCanvasContext_.drawImage(this.getImage(),o[0],o[1],1,1,0,0,1,1);var s=this.hitCanvasContext_.getImageData(0,0,1,1).data;if(s[3]>0){return i.call(a,this.getLayer(),s)}else{return undefined}};return e}(tr);var nr=rr;var ir=function(a){function i(e){a.call(this,e);this.image_=null;this.imageTransform_=Object(Ie["c"])();this.skippedFeatures_=[];this.vectorRenderer_=null;if(e.getType()===Mt["a"].VECTOR){for(var t=0,r=Bt.length;t<r;++t){var n=Bt[t];if(n!==i&&n["handles"](e)){this.vectorRenderer_=new n(e);break}}}}if(a)i.__proto__=a;i.prototype=Object.create(a&&a.prototype);i.prototype.constructor=i;i.prototype.disposeInternal=function e(){if(this.vectorRenderer_){this.vectorRenderer_.dispose()}a.prototype.disposeInternal.call(this)};i.prototype.getImage=function e(){return!this.image_?null:this.image_.getImage()};i.prototype.getImageTransform=function e(){return this.imageTransform_};i.prototype.prepareFrame=function e(t,r){var n=t.pixelRatio;var i=t.size;var a=t.viewState;var o=a.center;var s=a.resolution;var l;var u=this.getLayer();var c=u.getSource();var f=t.viewHints;var h=this.vectorRenderer_;var d=t.extent;if(!h&&r.extent!==undefined){d=Object(je["B"])(d,r.extent)}if(!f[ve["a"].ANIMATING]&&!f[ve["a"].INTERACTING]&&!Object(je["H"])(d)){var p=a.projection;if(!Ct["a"]){var v=c.getProjection();if(v){p=v}}var g=this.skippedFeatures_;if(h){var m=h.context;var _=Object(ke["a"])({},t,{size:[Object(je["E"])(d)/s,Object(je["A"])(d)/s],viewState:Object(ke["a"])({},t.viewState,{rotation:0})});var y=Object.keys(_.skippedFeatureUids).sort();l=new Et(d,s,n,m.canvas,function(e){if(h.prepareFrame(_,r)&&(h.replayGroupChanged||!Object(Ae["b"])(g,y))){m.canvas.width=_.size[0]*n;m.canvas.height=_.size[1]*n;h.compose(m,_,r);g=y;e()}})}else{l=c.getImage(d,s,n,p)}if(l&&this.loadImage(l)){this.image_=l;this.skippedFeatures_=g}}if(this.image_){l=this.image_;var b=l.getExtent();var w=l.getResolution();var S=l.getPixelRatio();var C=n*w/(s*S);var O=Object(Ie["b"])(this.imageTransform_,n*i[0]/2,n*i[1]/2,C,C,0,S*(b[0]-o[0])/w,S*(o[1]-b[3])/w);Object(Ie["b"])(this.coordinateToCanvasPixelTransform,n*i[0]/2-O[4],n*i[1]/2-O[5],n/s,-n/s,0,-o[0],-o[1]);this.renderedResolution=w*n/S}return!!this.image_};i.prototype.forEachFeatureAtCoordinate=function e(t,r,n,i){if(this.vectorRenderer_){return this.vectorRenderer_.forEachFeatureAtCoordinate(t,r,n,i)}else{return a.prototype.forEachFeatureAtCoordinate.call(this,t,r,n,i)}};return i}(nr);ir["handles"]=function(e){return e.getType()===Mt["a"].IMAGE||e.getType()===Mt["a"].VECTOR&&e.getRenderMode()===At["a"].IMAGE};ir["create"]=function(e,t){return new ir(t)};var ar=ir;var or=r(243);var sr=function(r){function e(e,t){r.call(this,e);this.context=t?null:Object(ge["a"])();this.oversampling_;this.renderedExtent_=null;this.renderedRevision;this.renderedTiles=[];this.newTiles_=false;this.tmpExtent=Object(je["j"])();this.tmpTileRange_=new or["b"](0,0,0,0);this.imageTransform_=Object(Ie["c"])();this.zDirection=0}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;e.prototype.isDrawableTile_=function e(t){var r=this.getLayer();var n=t.getState();var i=r.getUseInterimTilesOnError();return n==oe["a"].LOADED||n==oe["a"].EMPTY||n==oe["a"].ERROR&&!i};e.prototype.getTile=function e(t,r,n,i,a){var o=this.getLayer();var s=o.getSource();var l=s.getTile(t,r,n,i,a);if(l.getState()==oe["a"].ERROR){if(!o.getUseInterimTilesOnError()){l.setState(oe["a"].LOADED)}else if(o.getPreload()>0){this.newTiles_=true}}if(!this.isDrawableTile_(l)){l=l.getInterimTile()}return l};e.prototype.prepareFrame=function e(t,r){var n=t.pixelRatio;var i=t.size;var a=t.viewState;var o=a.projection;var s=a.resolution;var l=a.center;var u=this.getLayer();var c=u.getSource();var f=c.getRevision();var h=c.getTileGridForProjection(o);var d=h.getZForResolution(s,this.zDirection);var p=h.getResolution(d);var v=Math.round(s/p)||1;var g=t.extent;if(r.extent!==undefined){g=Object(je["B"])(g,r.extent)}if(Object(je["H"])(g)){return false}var m=h.getTileRangeForExtentAndZ(g,d);var _=h.getTileRangeExtent(d,m);var y=c.getTilePixelRatio(n);var b={};b[d]={};var w=this.createLoadedTileFinder(c,o,b);var S=t.viewHints;var C=S[ve["a"].ANIMATING]||S[ve["a"].INTERACTING];var O=this.tmpExtent;var x=this.tmpTileRange_;this.newTiles_=false;var T,E,M;for(E=m.minX;E<=m.maxX;++E){for(M=m.minY;M<=m.maxY;++M){if(Date.now()-t.time>16&&C){continue}T=this.getTile(d,E,M,n,o);if(this.isDrawableTile_(T)){var A=Object(Me["c"])(this);if(T.getState()==oe["a"].LOADED){b[d][T.tileCoord.toString()]=T;var k=T.inTransition(A);if(!this.newTiles_&&(k||this.renderedTiles.indexOf(T)===-1)){this.newTiles_=true}}if(T.getAlpha(A,t.time)===1){continue}}var j=h.getTileCoordChildTileRange(T.tileCoord,x,O);var I=false;if(j){I=w(d+1,j)}if(!I){h.forEachTileCoordParentTileRange(T.tileCoord,w,null,x,O)}}}var D=p*n/y*v;if(!(this.renderedResolution&&Date.now()-t.time>16&&C)&&(this.newTiles_||!(this.renderedExtent_&&Object(je["g"])(this.renderedExtent_,g))||this.renderedRevision!=f||v!=this.oversampling_||!C&&D!=this.renderedResolution)){var P=this.context;if(P){var R=c.getTilePixelSize(d,n,o);var L=Math.round(m.getWidth()*R[0]/v);var N=Math.round(m.getHeight()*R[1]/v);var $=P.canvas;if($.width!=L||$.height!=N){this.oversampling_=v;$.width=L;$.height=N}else{if(this.renderedExtent_&&!Object(je["p"])(_,this.renderedExtent_)){P.clearRect(0,0,L,N)}v=this.oversampling_}}this.renderedTiles.length=0;var F=Object.keys(b).map(Number);F.sort(function(e,t){if(e===d){return 1}else if(t===d){return-1}else{return e>t?1:e<t?-1:0}});var G,U,H,W,Y,V;var q,z,B,K,X;for(Y=0,V=F.length;Y<V;++Y){W=F[Y];H=c.getTilePixelSize(W,n,o);G=h.getResolution(W);U=G/p;z=y*c.getGutterForProjection(o);B=b[W];for(var Z in B){T=B[Z];q=h.getTileCoordExtent(T.getTileCoord(),O);E=(q[0]-_[0])/p*y/v;M=(_[3]-q[3])/p*y/v;K=H[0]*U/v;X=H[1]*U/v;this.drawTileImage(T,t,r,E,M,K,X,z,d===W);this.renderedTiles.push(T)}}this.renderedRevision=f;this.renderedResolution=p*n/y*v;this.renderedExtent_=_}var Q=this.renderedResolution/s;var J=Object(Ie["b"])(this.imageTransform_,n*i[0]/2,n*i[1]/2,Q,Q,0,(this.renderedExtent_[0]-l[0])/this.renderedResolution*n,(l[1]-this.renderedExtent_[3])/this.renderedResolution*n);Object(Ie["b"])(this.coordinateToCanvasPixelTransform,n*i[0]/2-J[4],n*i[1]/2-J[5],n/s,-n/s,0,-l[0],-l[1]);this.updateUsedTiles(t.usedTiles,c,d,m);this.manageTilePyramid(t,c,h,n,o,g,d,u.getPreload());this.scheduleExpireCache(t,c);return this.renderedTiles.length>0};e.prototype.drawTileImage=function e(t,r,n,i,a,o,s,l,u){var c=this.getTileImage(t);if(!c){return}var f=Object(Me["c"])(this);var h=u?t.getAlpha(f,r.time):1;var d=this.getLayer();var p=d.getSource();if(h===1&&!p.getOpaque(r.viewState.projection)){this.context.clearRect(i,a,o,s)}var v=h!==this.context.globalAlpha;if(v){this.context.save();this.context.globalAlpha=h}this.context.drawImage(c,l,l,c.width-2*l,c.height-2*l,i,a,o,s);if(v){this.context.restore()}if(h!==1){r.animate=true}else if(u){t.endTransition(f)}};e.prototype.getImage=function e(){var t=this.context;return t?t.canvas:null};e.prototype.getImageTransform=function e(){return this.imageTransform_};e.prototype.getTileImage=function e(t){return t.getImage()};return e}(nr);sr["handles"]=function(e){return e.getType()===Mt["a"].TILE};sr["create"]=function(e,t){return new sr(t)};sr.prototype.getLayer;var lr=sr;var ur=r(255);var cr=r.n(ur);var fr=function e(){};fr.prototype.getReplay=function e(t,r){return Object(Me["b"])()};fr.prototype.isEmpty=function e(){return Object(Me["b"])()};fr.prototype.addDeclutter=function e(t){return Object(Me["b"])()};var hr=fr;var dr={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};var pr=r(110);var vr=r(135);var gr=r(310);function mr(e,t,r,n,i,a,o,s){var l=[];var u=e[t]>e[r-n];var c=i.length;var f=e[t];var h=e[t+1];t+=n;var d=e[t];var p=e[t+1];var v=0;var g=Math.sqrt(Math.pow(d-f,2)+Math.pow(p-h,2));var m="";var _=0;var y,b,w;for(var S=0;S<c;++S){b=u?c-S-1:S;var C=i.charAt(b);m=u?C+m:m+C;var O=a(m)-_;_+=O;var x=o+O/2;while(t<r-n&&v+g<x){f=d;h=p;t+=n;d=e[t];p=e[t+1];v+=g;g=Math.sqrt(Math.pow(d-f,2)+Math.pow(p-h,2))}var T=x-v;var E=Math.atan2(p-h,d-f);if(u){E+=E>0?-Math.PI:Math.PI}if(w!==undefined){var M=E-w;M+=M>Math.PI?-2*Math.PI:M<-Math.PI?2*Math.PI:0;if(Math.abs(M)>s){return null}}var A=T/g;var k=Object(dt["c"])(f,d,A);var j=Object(dt["c"])(h,p,A);if(w==E){if(u){y[0]=k;y[1]=j;y[2]=O/2}y[4]=m}else{m=C;_=O;y=[k,j,O/2,E,m];if(u){l.unshift(y)}else{l.push(y)}w=E}o+=O}return l}var _r={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12};var yr=[_r.FILL];var br=[_r.STROKE];var wr=[_r.BEGIN_PATH];var Sr=[_r.CLOSE_PATH];var Cr=_r;var Or=[dr.POLYGON,dr.CIRCLE,dr.LINE_STRING,dr.IMAGE,dr.TEXT,dr.DEFAULT];var xr={};xr["left"]=0;xr["end"]=0;xr["center"]=.5;xr["right"]=1;xr["start"]=1;xr["top"]=0;xr["middle"]=.5;xr["hanging"]=.2;xr["alphabetic"]=.8;xr["ideographic"]=.8;xr["bottom"]=1;var Tr=Object(je["j"])();var Er=Object(Ie["c"])();var Mr=function(o){function e(e,t,r,n,i,a){o.call(this);this.declutterTree=a;this.tolerance=e;this.maxExtent=t;this.overlaps=i;this.pixelRatio=n;this.maxLineWidth=0;this.resolution=r;this.alignFill_;this.beginGeometryInstruction1_=null;this.beginGeometryInstruction2_=null;this.bufferedMaxExtent_=null;this.instructions=[];this.coordinates=[];this.coordinateCache_={};this.renderedTransform_=Object(Ie["c"])();this.hitDetectionInstructions=[];this.pixelCoordinates_=null;this.state={};this.viewRotation_=0}if(o)e.__proto__=o;e.prototype=Object.create(o&&o.prototype);e.prototype.constructor=e;e.prototype.replayTextBackground_=function e(t,r,n,i,a,o,s){t.beginPath();t.moveTo.apply(t,r);t.lineTo.apply(t,n);t.lineTo.apply(t,i);t.lineTo.apply(t,a);t.lineTo.apply(t,r);if(o){this.alignFill_=o[2];this.fill_(t)}if(s){this.setStrokeStyle_(t,s);t.stroke()}};e.prototype.replayImage_=function e(t,r,n,i,a,o,s,l,u,c,f,h,d,p,v,g,m,_){var y=m||_;a*=d;o*=d;r-=a;n-=o;var b=v+c>i.width?i.width-c:v;var w=l+f>i.height?i.height-f:l;var S=g[3]+b*d+g[1];var C=g[0]+w*d+g[2];var O=r-g[3];var x=n-g[0];var T;var E;var M;var A;if(y||h!==0){T=[O,x];E=[O+S,x];M=[O+S,x+C];A=[O,x+C]}var k=null;if(h!==0){var j=r+a;var I=n+o;k=Object(Ie["b"])(Er,j,I,1,1,h,-j,-I);Object(je["l"])(Tr);Object(je["r"])(Tr,Object(Ie["a"])(Er,T));Object(je["r"])(Tr,Object(Ie["a"])(Er,E));Object(je["r"])(Tr,Object(Ie["a"])(Er,M));Object(je["r"])(Tr,Object(Ie["a"])(Er,A))}else{Object(je["k"])(O,x,O+S,x+C,Tr)}var D=t.canvas;var P=_?_[2]*d/2:0;var R=Tr[0]-P<=D.width&&Tr[2]+P>=0&&Tr[1]-P<=D.height&&Tr[3]+P>=0;if(p){r=Math.round(r);n=Math.round(n)}if(s){if(!R&&s[4]==1){return}Object(je["q"])(s,Tr);var L=R?[t,k?k.slice(0):null,u,i,c,f,b,w,r,n,d]:null;if(L&&y){L.push(m,_,T,E,M,A)}s.push(L)}else if(R){if(y){this.replayTextBackground_(t,T,E,M,A,m,_)}Object(It["n"])(t,k,u,i,c,f,b,w,r,n,d)}};e.prototype.applyPixelRatio=function e(t){var r=this.pixelRatio;return r==1?t:t.map(function(e){return e*r})};e.prototype.appendFlatCoordinates=function e(t,r,n,i,a,o){var s=this.coordinates.length;var l=this.getBufferedMaxExtent();if(o){r+=i}var u=[t[r],t[r+1]];var c=[NaN,NaN];var f=true;var h,d,p;for(h=r+i;h<n;h+=i){c[0]=t[h];c[1]=t[h+1];p=Object(je["i"])(l,c);if(p!==d){if(f){this.coordinates[s++]=u[0];this.coordinates[s++]=u[1]}this.coordinates[s++]=c[0];this.coordinates[s++]=c[1];f=false}else if(p===pr["a"].INTERSECTING){this.coordinates[s++]=c[0];this.coordinates[s++]=c[1];f=false}else{f=true}u[0]=c[0];u[1]=c[1];d=p}if(a&&f||h===r+i){this.coordinates[s++]=u[0];this.coordinates[s++]=u[1]}return s};e.prototype.drawCustomCoordinates_=function e(t,r,n,i,a){for(var o=0,s=n.length;o<s;++o){var l=n[o];var u=this.appendFlatCoordinates(t,r,l,i,false,false);a.push(u);r=l}return r};e.prototype.drawCustom=function e(t,r,n){this.beginGeometry(t,r);var i=t.getType();var a=t.getStride();var o=this.coordinates.length;var s,l,u,c;var f;if(i==Pt["a"].MULTI_POLYGON){t=t;s=t.getOrientedFlatCoordinates();c=[];var h=t.getEndss();f=0;for(var d=0,p=h.length;d<p;++d){var v=[];f=this.drawCustomCoordinates_(s,f,h[d],a,v);c.push(v)}this.instructions.push([Cr.CUSTOM,o,c,t,n,vr["c"]])}else if(i==Pt["a"].POLYGON||i==Pt["a"].MULTI_LINE_STRING){u=[];s=i==Pt["a"].POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates();f=this.drawCustomCoordinates_(s,0,t.getEnds(),a,u);this.instructions.push([Cr.CUSTOM,o,u,t,n,vr["b"]])}else if(i==Pt["a"].LINE_STRING||i==Pt["a"].MULTI_POINT){s=t.getFlatCoordinates();l=this.appendFlatCoordinates(s,0,s.length,a,false,false);this.instructions.push([Cr.CUSTOM,o,l,t,n,vr["a"]])}else if(i==Pt["a"].POINT){s=t.getFlatCoordinates();this.coordinates.push(s[0],s[1]);l=this.coordinates.length;this.instructions.push([Cr.CUSTOM,o,l,t,n])}this.endGeometry(t,r)};e.prototype.beginGeometry=function e(t,r){this.beginGeometryInstruction1_=[Cr.BEGIN_GEOMETRY,r,0];this.instructions.push(this.beginGeometryInstruction1_);this.beginGeometryInstruction2_=[Cr.BEGIN_GEOMETRY,r,0];this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)};e.prototype.finish=function e(){};e.prototype.fill_=function e(t){if(this.alignFill_){var r=Object(Ie["a"])(this.renderedTransform_,[0,0]);var n=512*this.pixelRatio;t.translate(r[0]%n,r[1]%n);t.rotate(this.viewRotation_)}t.fill();if(this.alignFill_){t.setTransform.apply(t,It["r"])}};e.prototype.setStrokeStyle_=function e(t,r){t.strokeStyle=r[1];t.lineWidth=r[2];t.lineCap=r[3];t.lineJoin=r[4];t.miterLimit=r[5];if(x["a"]){t.lineDashOffset=r[7];t.setLineDash(r[6])}};e.prototype.renderDeclutter_=function e(t,r){if(t&&t.length>5){var n=t[4];if(n==1||n==t.length-5){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:r};if(!this.declutterTree.collides(i)){this.declutterTree.insert(i);for(var a=5,o=t.length;a<o;++a){var s=t[a];if(s){if(s.length>11){this.replayTextBackground_(s[0],s[13],s[14],s[15],s[16],s[11],s[12])}It["n"].apply(undefined,s)}}}t.length=5;Object(je["l"])(t)}}};e.prototype.replay_=function e(t,r,n,i,a,o,s){var l;if(this.pixelCoordinates_&&Object(Ae["b"])(r,this.renderedTransform_)){l=this.pixelCoordinates_}else{if(!this.pixelCoordinates_){this.pixelCoordinates_=[]}l=Object(Lt["c"])(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_);Object(Ie["g"])(this.renderedTransform_,r)}var u=!Object(ke["d"])(n);var c=0;var f=i.length;var h=0;var d;var p,v,g,m,_,y,b,w;var S=0;var C=0;var O=null;var x=null;var T=this.coordinateCache_;var E=this.viewRotation_;var M={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:E};var A=this.instructions!=i||this.overlaps?0:200;var k;var j,I;while(c<f){var D=i[c];var P=D[0];switch(P){case Cr.BEGIN_GEOMETRY:k=D[1];if(u&&n[Object(Me["c"])(k)]||!k.getGeometry()){c=D[2]}else if(s!==undefined&&!Object(je["F"])(s,k.getGeometry().getExtent())){c=D[2]+1}else{++c}break;case Cr.BEGIN_PATH:if(S>A){this.fill_(t);S=0}if(C>A){t.stroke();C=0}if(!S&&!C){t.beginPath();g=m=NaN}++c;break;case Cr.CIRCLE:h=D[1];var R=l[h];var L=l[h+1];var N=l[h+2];var $=l[h+3];var F=N-R;var G=$-L;var U=Math.sqrt(F*F+G*G);t.moveTo(R+U,L);t.arc(R,L,U,0,2*Math.PI,true);++c;break;case Cr.CLOSE_PATH:t.closePath();++c;break;case Cr.CUSTOM:h=D[1];d=D[2];var H=D[3];var W=D[4];var Y=D.length==6?D[5]:undefined;M.geometry=H;M.feature=k;if(!(c in T)){T[c]=[]}var V=T[c];if(Y){Y(l,h,d,2,V)}else{V[0]=l[h];V[1]=l[h+1];V.length=2}W(V,M);++c;break;case Cr.DRAW_IMAGE:h=D[1];d=D[2];w=D[3];p=D[4];v=D[5];b=o?null:D[6];var q=D[7];var z=D[8];var B=D[9];var K=D[10];var X=D[11];var Z=D[12];var Q=D[13];var J=D[14];var ee=void 0,te=void 0,re=void 0;if(D.length>16){ee=D[15];te=D[16];re=D[17]}else{ee=It["j"];te=re=false}if(X){Z+=E}for(;h<d;h+=2){this.replayImage_(t,l[h],l[h+1],w,p,v,b,q,z,B,K,Z,Q,a,J,ee,te?O:null,re?x:null)}this.renderDeclutter_(b,k);++c;break;case Cr.DRAW_CHARS:var ne=D[1];var ie=D[2];var ae=D[3];b=o?null:D[4];var oe=D[5];var se=D[6];var le=D[7];var ue=D[8];var ce=D[9];var fe=D[10];var he=D[11];var de=D[12];var pe=D[13];var ve=D[14];var ge=Object(gr["a"])(l,ne,ie,2);var me=ue(de);if(oe||me<=ge){var _e=this;var ye=_e.textStates[pe].textAlign;var be=(ge-me)*xr[ye];var we=mr(l,ne,ie,2,de,ue,be,le);if(we){var Se=void 0,Ce=void 0,Oe=void 0,xe=void 0,Te=void 0;if(fe){for(Se=0,Ce=we.length;Se<Ce;++Se){Te=we[Se];Oe=Te[4];xe=_e.getImage(Oe,pe,"",fe);p=Te[2]+he;v=ae*xe.height+(.5-ae)*2*he-ce;this.replayImage_(t,Te[0],Te[1],xe,p,v,b,xe.height,1,0,0,Te[3],ve,false,xe.width,It["j"],null,null)}}if(se){for(Se=0,Ce=we.length;Se<Ce;++Se){Te=we[Se];Oe=Te[4];xe=_e.getImage(Oe,pe,se,"");p=Te[2];v=ae*xe.height-ce;this.replayImage_(t,Te[0],Te[1],xe,p,v,b,xe.height,1,0,0,Te[3],ve,false,xe.width,It["j"],null,null)}}}}this.renderDeclutter_(b,k);++c;break;case Cr.END_GEOMETRY:if(o!==undefined){k=D[1];var Ee=o(k);if(Ee){return Ee}}++c;break;case Cr.FILL:if(A){S++}else{this.fill_(t)}++c;break;case Cr.MOVE_TO_LINE_TO:h=D[1];d=D[2];j=l[h];I=l[h+1];_=j+.5|0;y=I+.5|0;if(_!==g||y!==m){t.moveTo(j,I);g=_;m=y}for(h+=2;h<d;h+=2){j=l[h];I=l[h+1];_=j+.5|0;y=I+.5|0;if(h==d-2||_!==g||y!==m){t.lineTo(j,I);g=_;m=y}}++c;break;case Cr.SET_FILL_STYLE:O=D;this.alignFill_=D[2];if(S){this.fill_(t);S=0;if(C){t.stroke();C=0}}t.fillStyle=D[1];++c;break;case Cr.SET_STROKE_STYLE:x=D;if(C){t.stroke();C=0}this.setStrokeStyle_(t,D);++c;break;case Cr.STROKE:if(A){C++}else{t.stroke()}++c;break;default:++c;break}}if(S){this.fill_(t)}if(C){t.stroke()}return undefined};e.prototype.replay=function e(t,r,n,i,a){this.viewRotation_=n;this.replay_(t,r,i,this.instructions,a,undefined,undefined)};e.prototype.replayHitDetection=function e(t,r,n,i,a,o){this.viewRotation_=n;return this.replay_(t,r,i,this.hitDetectionInstructions,true,a,o)};e.prototype.reverseHitDetectionInstructions=function e(){var t=this.hitDetectionInstructions;t.reverse();var r;var n=t.length;var i;var a;var o=-1;for(r=0;r<n;++r){i=t[r];a=i[0];if(a==Cr.END_GEOMETRY){o=r}else if(a==Cr.BEGIN_GEOMETRY){i[2]=r;Object(Ae["k"])(this.hitDetectionInstructions,o,r);o=-1}}};e.prototype.setFillStrokeStyle=function e(t,r){var n=this.state;if(t){var i=t.getColor();n.fillStyle=Object(Dt["a"])(i?i:It["b"])}else{n.fillStyle=undefined}if(r){var a=r.getColor();n.strokeStyle=Object(Dt["a"])(a?a:It["k"]);var o=r.getLineCap();n.lineCap=o!==undefined?o:It["d"];var s=r.getLineDash();n.lineDash=s?s.slice():It["e"];var l=r.getLineDashOffset();n.lineDashOffset=l?l:It["f"];var u=r.getLineJoin();n.lineJoin=u!==undefined?u:It["g"];var c=r.getWidth();n.lineWidth=c!==undefined?c:It["h"];var f=r.getMiterLimit();n.miterLimit=f!==undefined?f:It["i"];if(n.lineWidth>this.maxLineWidth){this.maxLineWidth=n.lineWidth;this.bufferedMaxExtent_=null}}else{n.strokeStyle=undefined;n.lineCap=undefined;n.lineDash=null;n.lineDashOffset=undefined;n.lineJoin=undefined;n.lineWidth=undefined;n.miterLimit=undefined}};e.prototype.createFill=function e(t,r){var n=t.fillStyle;var i=[Cr.SET_FILL_STYLE,n];if(typeof n!=="string"){i.push(true)}return i};e.prototype.applyStroke=function e(t){this.instructions.push(this.createStroke(t))};e.prototype.createStroke=function e(t){return[Cr.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]};e.prototype.updateFillStyle=function e(t,r,n){var i=t.fillStyle;if(typeof i!=="string"||t.currentFillStyle!=i){if(i!==undefined){this.instructions.push(r.call(this,t,n))}t.currentFillStyle=i}};e.prototype.updateStrokeStyle=function e(t,r){var n=t.strokeStyle;var i=t.lineCap;var a=t.lineDash;var o=t.lineDashOffset;var s=t.lineJoin;var l=t.lineWidth;var u=t.miterLimit;if(t.currentStrokeStyle!=n||t.currentLineCap!=i||a!=t.currentLineDash&&!Object(Ae["b"])(t.currentLineDash,a)||t.currentLineDashOffset!=o||t.currentLineJoin!=s||t.currentLineWidth!=l||t.currentMiterLimit!=u){if(n!==undefined){r.call(this,t)}t.currentStrokeStyle=n;t.currentLineCap=i;t.currentLineDash=a;t.currentLineDashOffset=o;t.currentLineJoin=s;t.currentLineWidth=l;t.currentMiterLimit=u}};e.prototype.endGeometry=function e(t,r){this.beginGeometryInstruction1_[2]=this.instructions.length;this.beginGeometryInstruction1_=null;this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length;this.beginGeometryInstruction2_=null;var n=[Cr.END_GEOMETRY,r];this.instructions.push(n);this.hitDetectionInstructions.push(n)};e.prototype.getBufferedMaxExtent=function e(){if(!this.bufferedMaxExtent_){this.bufferedMaxExtent_=Object(je["d"])(this.maxExtent);if(this.maxLineWidth>0){var t=this.resolution*(this.maxLineWidth+1)/2;Object(je["c"])(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}}return this.bufferedMaxExtent_};return e}($t);var Ar=Mr;var kr=function(o){function e(e,t,r,n,i,a){o.call(this,e,t,r,n,i,a);this.declutterGroup_=null;this.hitDetectionImage_=null;this.image_=null;this.anchorX_=undefined;this.anchorY_=undefined;this.height_=undefined;this.opacity_=undefined;this.originX_=undefined;this.originY_=undefined;this.rotateWithView_=undefined;this.rotation_=undefined;this.scale_=undefined;this.width_=undefined}if(o)e.__proto__=o;e.prototype=Object.create(o&&o.prototype);e.prototype.constructor=e;e.prototype.drawCoordinates_=function e(t,r,n,i){return this.appendFlatCoordinates(t,r,n,i,false,false)};e.prototype.drawPoint=function e(t,r){if(!this.image_){return}this.beginGeometry(t,r);var n=t.getFlatCoordinates();var i=t.getStride();var a=this.coordinates.length;var o=this.drawCoordinates_(n,0,n.length,i);this.instructions.push([Cr.DRAW_IMAGE,a,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]);this.hitDetectionInstructions.push([Cr.DRAW_IMAGE,a,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]);this.endGeometry(t,r)};e.prototype.drawMultiPoint=function e(t,r){if(!this.image_){return}this.beginGeometry(t,r);var n=t.getFlatCoordinates();var i=t.getStride();var a=this.coordinates.length;var o=this.drawCoordinates_(n,0,n.length,i);this.instructions.push([Cr.DRAW_IMAGE,a,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]);this.hitDetectionInstructions.push([Cr.DRAW_IMAGE,a,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]);this.endGeometry(t,r)};e.prototype.finish=function e(){this.reverseHitDetectionInstructions();this.anchorX_=undefined;this.anchorY_=undefined;this.hitDetectionImage_=null;this.image_=null;this.height_=undefined;this.scale_=undefined;this.opacity_=undefined;this.originX_=undefined;this.originY_=undefined;this.rotateWithView_=undefined;this.rotation_=undefined;this.width_=undefined};e.prototype.setImageStyle=function e(t,r){var n=t.getAnchor();var i=t.getSize();var a=t.getHitDetectionImage(1);var o=t.getImage(1);var s=t.getOrigin();this.anchorX_=n[0];this.anchorY_=n[1];this.declutterGroup_=r;this.hitDetectionImage_=a;this.image_=o;this.height_=i[1];this.opacity_=t.getOpacity();this.originX_=s[0];this.originY_=s[1];this.rotateWithView_=t.getRotateWithView();this.rotation_=t.getRotation();this.scale_=t.getScale();this.width_=i[0]};return e}(Ar);var jr=kr;var Ir=function(o){function e(e,t,r,n,i,a){o.call(this,e,t,r,n,i,a)}if(o)e.__proto__=o;e.prototype=Object.create(o&&o.prototype);e.prototype.constructor=e;e.prototype.drawFlatCoordinates_=function e(t,r,n,i){var a=this.coordinates.length;var o=this.appendFlatCoordinates(t,r,n,i,false,false);var s=[Cr.MOVE_TO_LINE_TO,a,o];this.instructions.push(s);this.hitDetectionInstructions.push(s);return n};e.prototype.drawLineString=function e(t,r){var n=this.state;var i=n.strokeStyle;var a=n.lineWidth;if(i===undefined||a===undefined){return}this.updateStrokeStyle(n,this.applyStroke);this.beginGeometry(t,r);this.hitDetectionInstructions.push([Cr.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],wr);var o=t.getFlatCoordinates();var s=t.getStride();this.drawFlatCoordinates_(o,0,o.length,s);this.hitDetectionInstructions.push(br);this.endGeometry(t,r)};e.prototype.drawMultiLineString=function e(t,r){var n=this.state;var i=n.strokeStyle;var a=n.lineWidth;if(i===undefined||a===undefined){return}this.updateStrokeStyle(n,this.applyStroke);this.beginGeometry(t,r);this.hitDetectionInstructions.push([Cr.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],wr);var o=t.getEnds();var s=t.getFlatCoordinates();var l=t.getStride();var u=0;for(var c=0,f=o.length;c<f;++c){u=this.drawFlatCoordinates_(s,u,o[c],l)}this.hitDetectionInstructions.push(br);this.endGeometry(t,r)};e.prototype.finish=function e(){var t=this.state;if(t.lastStroke!=undefined&&t.lastStroke!=this.coordinates.length){this.instructions.push(br)}this.reverseHitDetectionInstructions();this.state=null};e.prototype.applyStroke=function e(t){if(t.lastStroke!=undefined&&t.lastStroke!=this.coordinates.length){this.instructions.push(br);t.lastStroke=this.coordinates.length}t.lastStroke=0;o.prototype.applyStroke.call(this,t);this.instructions.push(wr)};return e}(Ar);var Dr=Ir;var Pr=r(77);var Rr=r(156);var Lr=function(o){function e(e,t,r,n,i,a){o.call(this,e,t,r,n,i,a)}if(o)e.__proto__=o;e.prototype=Object.create(o&&o.prototype);e.prototype.constructor=e;e.prototype.drawFlatCoordinatess_=function e(t,r,n,i){var a=this.state;var o=a.fillStyle!==undefined;var s=a.strokeStyle!=undefined;var l=n.length;this.instructions.push(wr);this.hitDetectionInstructions.push(wr);for(var u=0;u<l;++u){var c=n[u];var f=this.coordinates.length;var h=this.appendFlatCoordinates(t,r,c,i,true,!s);var d=[Cr.MOVE_TO_LINE_TO,f,h];this.instructions.push(d);this.hitDetectionInstructions.push(d);if(s){this.instructions.push(Sr);this.hitDetectionInstructions.push(Sr)}r=c}if(o){this.instructions.push(yr);this.hitDetectionInstructions.push(yr)}if(s){this.instructions.push(br);this.hitDetectionInstructions.push(br)}return r};e.prototype.drawCircle=function e(t,r){var n=this.state;var i=n.fillStyle;var a=n.strokeStyle;if(i===undefined&&a===undefined){return}this.setFillStrokeStyles_(t);this.beginGeometry(t,r);if(n.fillStyle!==undefined){this.hitDetectionInstructions.push([Cr.SET_FILL_STYLE,Object(Pr["b"])(It["b"])])}if(n.strokeStyle!==undefined){this.hitDetectionInstructions.push([Cr.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset])}var o=t.getFlatCoordinates();var s=t.getStride();var l=this.coordinates.length;this.appendFlatCoordinates(o,0,o.length,s,false,false);var u=[Cr.CIRCLE,l];this.instructions.push(wr,u);this.hitDetectionInstructions.push(wr,u);this.hitDetectionInstructions.push(yr);if(n.fillStyle!==undefined){this.instructions.push(yr)}if(n.strokeStyle!==undefined){this.instructions.push(br);this.hitDetectionInstructions.push(br)}this.endGeometry(t,r)};e.prototype.drawPolygon=function e(t,r){var n=this.state;var i=n.fillStyle;var a=n.strokeStyle;if(i===undefined&&a===undefined){return}this.setFillStrokeStyles_(t);this.beginGeometry(t,r);if(n.fillStyle!==undefined){this.hitDetectionInstructions.push([Cr.SET_FILL_STYLE,Object(Pr["b"])(It["b"])])}if(n.strokeStyle!==undefined){this.hitDetectionInstructions.push([Cr.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset])}var o=t.getEnds();var s=t.getOrientedFlatCoordinates();var l=t.getStride();this.drawFlatCoordinatess_(s,0,o,l);this.endGeometry(t,r)};e.prototype.drawMultiPolygon=function e(t,r){var n=this.state;var i=n.fillStyle;var a=n.strokeStyle;if(i===undefined&&a===undefined){return}this.setFillStrokeStyles_(t);this.beginGeometry(t,r);if(n.fillStyle!==undefined){this.hitDetectionInstructions.push([Cr.SET_FILL_STYLE,Object(Pr["b"])(It["b"])])}if(n.strokeStyle!==undefined){this.hitDetectionInstructions.push([Cr.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset])}var o=t.getEndss();var s=t.getOrientedFlatCoordinates();var l=t.getStride();var u=0;for(var c=0,f=o.length;c<f;++c){u=this.drawFlatCoordinatess_(s,u,o[c],l)}this.endGeometry(t,r)};e.prototype.finish=function e(){this.reverseHitDetectionInstructions();this.state=null;var t=this.tolerance;if(t!==0){var r=this.coordinates;for(var n=0,i=r.length;n<i;++n){r[n]=Object(Rr["e"])(r[n],t)}}};e.prototype.setFillStrokeStyles_=function e(t){var r=this.state;var n=r.fillStyle;if(n!==undefined){this.updateFillStyle(r,this.createFill,t)}if(r.strokeStyle!==undefined){this.updateStrokeStyle(r,this.applyStroke)}};return e}(Ar);var Nr=Lr;function $r(e,t,r,n,i){var a=r;var o=r;var s=0;var l=0;var u=r;var c,f,h,d,p,v,g,m,_,y;for(f=r;f<n;f+=i){var b=t[f];var w=t[f+1];if(p!==undefined){_=b-p;y=w-v;d=Math.sqrt(_*_+y*y);if(g!==undefined){l+=h;c=Math.acos((g*_+m*y)/(h*d));if(c>e){if(l>s){s=l;a=u;o=f}l=0;u=f-i}}h=d;g=_;m=y}p=b;v=w}l+=d;return l>s?[u,f]:[a,o]}var Fr=r(313);var Gr=function(o){function e(e,t,r,n,i,a){o.call(this,e,t,r,n,i,a);this.declutterGroup_;this.labels_=null;this.text_="";this.textOffsetX_=0;this.textOffsetY_=0;this.textRotateWithView_=undefined;this.textRotation_=0;this.textFillState_=null;this.fillStates={};this.textStrokeState_=null;this.strokeStates={};this.textState_={};this.textStates={};this.textKey_="";this.fillKey_="";this.strokeKey_="";this.widths_={};It["o"].prune()}if(o)e.__proto__=o;e.prototype=Object.create(o&&o.prototype);e.prototype.constructor=e;e.prototype.drawText=function e(t,r){var n=this.textFillState_;var i=this.textStrokeState_;var a=this.textState_;if(this.text_===""||!a||!n&&!i){return}var o=this.coordinates.length;var s=t.getType();var l=null;var u=2;var c=2;var f,h;if(a.placement===Fr["a"].LINE){if(!Object(je["F"])(this.getBufferedMaxExtent(),t.getExtent())){return}var d;l=t.getFlatCoordinates();c=t.getStride();if(s==Pt["a"].LINE_STRING){d=[l.length]}else if(s==Pt["a"].MULTI_LINE_STRING){d=t.getEnds()}else if(s==Pt["a"].POLYGON){d=t.getEnds().slice(0,1)}else if(s==Pt["a"].MULTI_POLYGON){var p=t.getEndss();d=[];for(f=0,h=p.length;f<h;++f){d.push(p[f][0])}}this.beginGeometry(t,r);var v=a.textAlign;var g=0;var m;for(var _=0,y=d.length;_<y;++_){if(v==undefined){var b=$r(a.maxAngle,l,g,d[_],c);g=b[0];m=b[1]}else{m=d[_]}for(f=g;f<m;f+=c){this.coordinates.push(l[f],l[f+1])}u=this.coordinates.length;g=d[_];this.drawChars_(o,u,this.declutterGroup_);o=u}this.endGeometry(t,r)}else{var w=this.getImage(this.text_,this.textKey_,this.fillKey_,this.strokeKey_);var S=w.width/this.pixelRatio;switch(s){case Pt["a"].POINT:case Pt["a"].MULTI_POINT:l=t.getFlatCoordinates();u=l.length;break;case Pt["a"].LINE_STRING:l=t.getFlatMidpoint();break;case Pt["a"].CIRCLE:l=t.getCenter();break;case Pt["a"].MULTI_LINE_STRING:l=t.getFlatMidpoints();u=l.length;break;case Pt["a"].POLYGON:l=t.getFlatInteriorPoint();if(!a.overflow&&l[2]/this.resolution<S){return}c=3;break;case Pt["a"].MULTI_POLYGON:var C=t.getFlatInteriorPoints();l=[];for(f=0,h=C.length;f<h;f+=3){if(a.overflow||C[f+2]/this.resolution>=S){l.push(C[f],C[f+1])}}u=l.length;if(u==0){return}break;default:}u=this.appendFlatCoordinates(l,0,u,c,false,false);if(a.backgroundFill||a.backgroundStroke){this.setFillStrokeStyle(a.backgroundFill,a.backgroundStroke);if(a.backgroundFill){this.updateFillStyle(this.state,this.createFill,t);this.hitDetectionInstructions.push(this.createFill(this.state,t))}if(a.backgroundStroke){this.updateStrokeStyle(this.state,this.applyStroke);this.hitDetectionInstructions.push(this.createStroke(this.state))}}this.beginGeometry(t,r);this.drawTextImage_(w,o,u);this.endGeometry(t,r)}};e.prototype.getImage=function e(t,r,n,i){var a;var o=i+r+t+n+this.pixelRatio;if(!It["o"].containsKey(o)){var s=i?this.strokeStates[i]||this.textStrokeState_:null;var l=n?this.fillStates[n]||this.textFillState_:null;var u=this.textStates[r]||this.textState_;var c=this.pixelRatio;var f=u.scale*c;var h=xr[u.textAlign||It["l"]];var d=i&&s.lineWidth?s.lineWidth:0;var p=t.split("\n");var v=p.length;var g=[];var m=Ur(u.font,p,g);var _=Object(It["p"])(u.font);var y=_*v;var b=m+d;var w=Object(ge["a"])(Math.ceil(b*f),Math.ceil((y+d)*f));a=w.canvas;It["o"].set(o,a);if(f!=1){w.scale(f,f)}w.font=u.font;if(i){w.strokeStyle=s.strokeStyle;w.lineWidth=d;w.lineCap=s.lineCap;w.lineJoin=s.lineJoin;w.miterLimit=s.miterLimit;if(x["a"]&&s.lineDash.length){w.setLineDash(s.lineDash);w.lineDashOffset=s.lineDashOffset}}if(n){w.fillStyle=l.fillStyle}w.textBaseline="middle";w.textAlign="center";var S=.5-h;var C=h*a.width/f+S*d;var O;if(i){for(O=0;O<v;++O){w.strokeText(p[O],C+S*g[O],.5*(d+_)+O*_)}}if(n){for(O=0;O<v;++O){w.fillText(p[O],C+S*g[O],.5*(d+_)+O*_)}}}return It["o"].get(o)};e.prototype.drawTextImage_=function e(t,r,n){var i=this.textState_;var a=this.textStrokeState_;var o=this.pixelRatio;var s=xr[i.textAlign||It["l"]];var l=xr[i.textBaseline];var u=a&&a.lineWidth?a.lineWidth:0;var c=s*t.width/o+2*(.5-s)*u;var f=l*t.height/o+2*(.5-l)*u;this.instructions.push([Cr.DRAW_IMAGE,r,n,t,(c-this.textOffsetX_)*o,(f-this.textOffsetY_)*o,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1,t.width,i.padding==It["j"]?It["j"]:i.padding.map(function(e){return e*o}),!!i.backgroundFill,!!i.backgroundStroke]);this.hitDetectionInstructions.push([Cr.DRAW_IMAGE,r,n,t,(c-this.textOffsetX_)*o,(f-this.textOffsetY_)*o,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1/o,t.width,i.padding,!!i.backgroundFill,!!i.backgroundStroke])};e.prototype.drawChars_=function e(t,r,n){var i=this.textStrokeState_;var a=this.textState_;var o=this.textFillState_;var s=this.strokeKey_;if(i){if(!(s in this.strokeStates)){this.strokeStates[s]={strokeStyle:i.strokeStyle,lineCap:i.lineCap,lineDashOffset:i.lineDashOffset,lineWidth:i.lineWidth,lineJoin:i.lineJoin,miterLimit:i.miterLimit,lineDash:i.lineDash}}}var l=this.textKey_;if(!(this.textKey_ in this.textStates)){this.textStates[this.textKey_]={font:a.font,textAlign:a.textAlign||It["l"],scale:a.scale}}var u=this.fillKey_;if(o){if(!(u in this.fillStates)){this.fillStates[u]={fillStyle:o.fillStyle}}}var c=this.pixelRatio;var f=xr[a.textBaseline];var h=this.textOffsetY_*c;var d=this.text_;var p=a.font;var v=a.scale;var g=i?i.lineWidth*v/2:0;var m=this.widths_[p];if(!m){this.widths_[p]=m={}}this.instructions.push([Cr.DRAW_CHARS,t,r,f,n,a.overflow,u,a.maxAngle,function(e){var t=m[e];if(!t){t=m[e]=Object(It["q"])(p,e)}return t*v*c},h,s,g*c,d,l,1]);this.hitDetectionInstructions.push([Cr.DRAW_CHARS,t,r,f,n,a.overflow,u,a.maxAngle,function(e){var t=m[e];if(!t){t=m[e]=Object(It["q"])(p,e)}return t*v},h,s,g,d,l,1/c])};e.prototype.setTextStyle=function e(t,r){var n,i,a;if(!t){this.text_=""}else{this.declutterGroup_=r;var o=t.getFill();if(!o){i=this.textFillState_=null}else{i=this.textFillState_;if(!i){i=this.textFillState_={}}i.fillStyle=Object(Dt["a"])(o.getColor()||It["b"])}var s=t.getStroke();if(!s){a=this.textStrokeState_=null}else{a=this.textStrokeState_;if(!a){a=this.textStrokeState_={}}var l=s.getLineDash();var u=s.getLineDashOffset();var c=s.getWidth();var f=s.getMiterLimit();a.lineCap=s.getLineCap()||It["d"];a.lineDash=l?l.slice():It["e"];a.lineDashOffset=u===undefined?It["f"]:u;a.lineJoin=s.getLineJoin()||It["g"];a.lineWidth=c===undefined?It["h"]:c;a.miterLimit=f===undefined?It["i"]:f;a.strokeStyle=Object(Dt["a"])(s.getColor()||It["k"])}n=this.textState_;var h=t.getFont()||It["c"];Object(It["a"])(h);var d=t.getScale();n.overflow=t.getOverflow();n.font=h;n.maxAngle=t.getMaxAngle();n.placement=t.getPlacement();n.textAlign=t.getTextAlign();n.textBaseline=t.getTextBaseline()||It["m"];n.backgroundFill=t.getBackgroundFill();n.backgroundStroke=t.getBackgroundStroke();n.padding=t.getPadding()||It["j"];n.scale=d===undefined?1:d;var p=t.getOffsetX();var v=t.getOffsetY();var g=t.getRotateWithView();var m=t.getRotation();this.text_=t.getText()||"";this.textOffsetX_=p===undefined?0:p;this.textOffsetY_=v===undefined?0:v;this.textRotateWithView_=g===undefined?false:g;this.textRotation_=m===undefined?0:m;this.strokeKey_=a?(typeof a.strokeStyle=="string"?a.strokeStyle:Object(Me["c"])(a.strokeStyle))+a.lineCap+a.lineDashOffset+"|"+a.lineWidth+a.lineJoin+a.miterLimit+"["+a.lineDash.join()+"]":"";this.textKey_=n.font+n.scale+(n.textAlign||"?");this.fillKey_=i?typeof i.fillStyle=="string"?i.fillStyle:"|"+Object(Me["c"])(i.fillStyle):""}};return e}(Ar);function Ur(e,t,r){var n=t.length;var i=0;for(var a=0;a<n;++a){var o=Object(It["q"])(e,t[a]);i=Math.max(i,o);r.push(o)}return i}var Hr=Gr;var Wr={Circle:Nr,Default:Ar,Image:jr,LineString:Dr,Polygon:Nr,Text:Hr};var Yr=function(s){function e(e,t,r,n,i,a,o){s.call(this);this.declutterTree_=a;this.declutterGroup_=null;this.tolerance_=e;this.maxExtent_=t;this.overlaps_=i;this.pixelRatio_=n;this.resolution_=r;this.renderBuffer_=o;this.replaysByZIndex_={};this.hitDetectionContext_=Object(ge["a"])(1,1);this.hitDetectionTransform_=Object(Ie["c"])()}if(s)e.__proto__=s;e.prototype=Object.create(s&&s.prototype);e.prototype.constructor=e;e.prototype.addDeclutter=function e(t){var r=null;if(this.declutterTree_){if(t){r=this.declutterGroup_;r[4]++}else{r=this.declutterGroup_=Object(je["j"])();r.push(1)}}return r};e.prototype.clip=function e(t,r){var n=this.getClipCoords(r);t.beginPath();t.moveTo(n[0],n[1]);t.lineTo(n[2],n[3]);t.lineTo(n[4],n[5]);t.lineTo(n[6],n[7]);t.clip()};e.prototype.hasReplays=function e(t){for(var r in this.replaysByZIndex_){var n=this.replaysByZIndex_[r];for(var i=0,a=t.length;i<a;++i){if(t[i]in n){return true}}}return false};e.prototype.finish=function e(){for(var t in this.replaysByZIndex_){var r=this.replaysByZIndex_[t];for(var n in r){r[n].finish()}}};e.prototype.forEachFeatureAtCoordinate=function e(t,r,n,i,a,o,s){i=Math.round(i);var l=i*2+1;var u=Object(Ie["b"])(this.hitDetectionTransform_,i+.5,i+.5,1/r,-1/r,-n,-t[0],-t[1]);var c=this.hitDetectionContext_;if(c.canvas.width!==l||c.canvas.height!==l){c.canvas.width=l;c.canvas.height=l}else{c.clearRect(0,0,l,l)}var f;if(this.renderBuffer_!==undefined){f=Object(je["j"])();Object(je["r"])(f,t);Object(je["c"])(f,r*(this.renderBuffer_+i),f)}var h=zr(i);var d;if(this.declutterTree_){d=this.declutterTree_.all().map(function(e){return e.value})}var p;function v(e){var t=c.getImageData(0,0,l,l).data;for(var r=0;r<l;r++){for(var n=0;n<l;n++){if(h[r][n]){if(t[(n*l+r)*4+3]>0){var i=void 0;if(!(d&&(p==dr.IMAGE||p==dr.TEXT))||d.indexOf(e)!==-1){i=o(e)}if(i){return i}else{c.clearRect(0,0,l,l);return undefined}}}}}}var g=Object.keys(this.replaysByZIndex_).map(Number);g.sort(Ae["i"]);var m,_,y,b,w;for(m=g.length-1;m>=0;--m){var S=g[m].toString();y=this.replaysByZIndex_[S];for(_=Or.length-1;_>=0;--_){p=Or[_];b=y[p];if(b!==undefined){if(s&&(p==dr.IMAGE||p==dr.TEXT)){var C=s[S];if(!C){s[S]=[b,u.slice(0)]}else{C.push(b,u.slice(0))}}else{w=b.replayHitDetection(c,u,n,a,v,f);if(w){return w}}}}}return undefined};e.prototype.getClipCoords=function e(t){var r=this.maxExtent_;var n=r[0];var i=r[1];var a=r[2];var o=r[3];var s=[n,i,n,o,a,o,a,i];Object(Lt["c"])(s,0,8,2,t,s);return s};e.prototype.getReplay=function e(t,r){var n=t!==undefined?t.toString():"0";var i=this.replaysByZIndex_[n];if(i===undefined){i={};this.replaysByZIndex_[n]=i}var a=i[r];if(a===undefined){var o=Wr[r];a=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_,this.overlaps_,this.declutterTree_);i[r]=a}return a};e.prototype.getReplays=function e(){return this.replaysByZIndex_};e.prototype.isEmpty=function e(){return Object(ke["d"])(this.replaysByZIndex_)};e.prototype.replay=function e(t,r,n,i,a,o,s){var l=Object.keys(this.replaysByZIndex_).map(Number);l.sort(Ae["i"]);t.save();this.clip(t,r);var u=o?o:Or;var c,f,h,d,p,e;for(c=0,f=l.length;c<f;++c){var v=l[c].toString();p=this.replaysByZIndex_[v];for(h=0,d=u.length;h<d;++h){var g=u[h];e=p[g];if(e!==undefined){if(s&&(g==dr.IMAGE||g==dr.TEXT)){var m=s[v];if(!m){s[v]=[e,r.slice(0)]}else{m.push(e,r.slice(0))}}else{e.replay(t,r,n,i,a)}}}}t.restore()};return e}(hr);var Vr={0:[[true]]};function qr(e,t,r){var n;var i=Math.floor(e.length/2);if(t>=i){for(n=i;n<t;n++){e[n][r]=true}}else if(t<i){for(n=t+1;n<i;n++){e[n][r]=true}}}function zr(e){if(Vr[e]!==undefined){return Vr[e]}var t=e*2+1;var r=new Array(t);for(var n=0;n<t;n++){r[n]=new Array(t)}var i=e;var a=0;var o=0;while(i>=a){qr(r,e+i,e+a);qr(r,e+a,e+i);qr(r,e-a,e+i);qr(r,e-i,e+a);qr(r,e-i,e-a);qr(r,e-a,e-i);qr(r,e+a,e-i);qr(r,e+i,e-a);a++;o+=1+2*a;if(2*(o-i)+1>0){i-=1;o+=1-2*i}}Vr[e]=r;return r}function Br(e,t,r,n){var i=Object.keys(e).map(Number).sort(Ae["i"]);var a={};for(var o=0,s=i.length;o<s;++o){var l=e[i[o].toString()];for(var u=0,c=l.length;u<c;){var f=l[u++];var h=l[u++];f.replay(t,h,r,a,n)}}}var Kr=Yr;var Xr=.5;var Zr={Point:cn,LineString:sn,Polygon:hn,MultiPoint:fn,MultiLineString:ln,MultiPolygon:un,GeometryCollection:on,Circle:tn};function Qr(e,t){return parseInt(Object(Me["c"])(e),10)-parseInt(Object(Me["c"])(t),10)}function Jr(e,t){var r=en(e,t);return r*r}function en(e,t){return Xr*e/t}function tn(e,t,r,n){var i=r.getFill();var a=r.getStroke();if(i||a){var o=e.getReplay(r.getZIndex(),dr.CIRCLE);o.setFillStrokeStyle(i,a);o.drawCircle(t,n)}var s=r.getText();if(s){var l=e.getReplay(r.getZIndex(),dr.TEXT);l.setTextStyle(s,e.addDeclutter(false));l.drawText(t,n)}}function rn(e,t,r,n,i,a){var o=false;var s=r.getImage();if(s){var l=s.getImageState();if(l==xt["a"].LOADED||l==xt["a"].ERROR){s.unlistenImageChange(i,a)}else{if(l==xt["a"].IDLE){s.load()}l=s.getImageState();s.listenImageChange(i,a);o=true}}nn(e,t,r,n);return o}function nn(e,t,r,n){var i=r.getGeometryFunction()(t);if(!i){return}var a=i.getSimplifiedGeometry(n);var o=r.getRenderer();if(o){an(e,a,r,t)}else{var s=Zr[a.getType()];s(e,a,r,t)}}function an(e,t,r,n){if(t.getType()==Pt["a"].GEOMETRY_COLLECTION){var i=t.getGeometries();for(var a=0,o=i.length;a<o;++a){an(e,i[a],r,n)}return}var s=e.getReplay(r.getZIndex(),dr.DEFAULT);s.drawCustom(t,n,r.getRenderer())}function on(e,t,r,n){var i=t.getGeometriesArray();var a,o;for(a=0,o=i.length;a<o;++a){var s=Zr[i[a].getType()];s(e,i[a],r,n)}}function sn(e,t,r,n){var i=r.getStroke();if(i){var a=e.getReplay(r.getZIndex(),dr.LINE_STRING);a.setFillStrokeStyle(null,i);a.drawLineString(t,n)}var o=r.getText();if(o){var s=e.getReplay(r.getZIndex(),dr.TEXT);s.setTextStyle(o,e.addDeclutter(false));s.drawText(t,n)}}function ln(e,t,r,n){var i=r.getStroke();if(i){var a=e.getReplay(r.getZIndex(),dr.LINE_STRING);a.setFillStrokeStyle(null,i);a.drawMultiLineString(t,n)}var o=r.getText();if(o){var s=e.getReplay(r.getZIndex(),dr.TEXT);s.setTextStyle(o,e.addDeclutter(false));s.drawText(t,n)}}function un(e,t,r,n){var i=r.getFill();var a=r.getStroke();if(a||i){var o=e.getReplay(r.getZIndex(),dr.POLYGON);o.setFillStrokeStyle(i,a);o.drawMultiPolygon(t,n)}var s=r.getText();if(s){var l=e.getReplay(r.getZIndex(),dr.TEXT);l.setTextStyle(s,e.addDeclutter(false));l.drawText(t,n)}}function cn(e,t,r,n){var i=r.getImage();if(i){if(i.getImageState()!=xt["a"].LOADED){return}var a=e.getReplay(r.getZIndex(),dr.IMAGE);a.setImageStyle(i,e.addDeclutter(false));a.drawPoint(t,n)}var o=r.getText();if(o){var s=e.getReplay(r.getZIndex(),dr.TEXT);s.setTextStyle(o,e.addDeclutter(!!i));s.drawText(t,n)}}function fn(e,t,r,n){var i=r.getImage();if(i){if(i.getImageState()!=xt["a"].LOADED){return}var a=e.getReplay(r.getZIndex(),dr.IMAGE);a.setImageStyle(i,e.addDeclutter(false));a.drawMultiPoint(t,n)}var o=r.getText();if(o){var s=e.getReplay(r.getZIndex(),dr.TEXT);s.setTextStyle(o,e.addDeclutter(!!i));s.drawText(t,n)}}function hn(e,t,r,n){var i=r.getFill();var a=r.getStroke();if(i||a){var o=e.getReplay(r.getZIndex(),dr.POLYGON);o.setFillStrokeStyle(i,a);o.drawPolygon(t,n)}var s=r.getText();if(s){var l=e.getReplay(r.getZIndex(),dr.TEXT);l.setTextStyle(s,e.addDeclutter(false));l.drawText(t,n)}}var dn=function(t){function e(e){t.call(this,e);this.declutterTree_=e.getDeclutter()?cr()(9,undefined):null;this.dirty_=false;this.renderedRevision_=-1;this.renderedResolution_=NaN;this.renderedExtent_=Object(je["j"])();this.renderedRenderOrder_=null;this.replayGroup_=null;this.replayGroupChanged=true;this.context=Object(ge["a"])();Object(d["a"])(It["o"],se["a"].CLEAR,this.handleFontsChanged_,this)}if(t)e.__proto__=t;e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;e.prototype.disposeInternal=function e(){Object(d["c"])(It["o"],se["a"].CLEAR,this.handleFontsChanged_,this);t.prototype.disposeInternal.call(this)};e.prototype.compose=function e(t,r,n){var i=r.extent;var a=r.pixelRatio;var o=n.managed?r.skippedFeatureUids:{};var s=r.viewState;var l=s.projection;var u=s.rotation;var c=l.getExtent();var f=this.getLayer().getSource();var h=this.getTransform(r,0);var d=n.extent;var p=d!==undefined;if(p){this.clip(t,r,d)}var v=this.replayGroup_;if(v&&!v.isEmpty()){if(this.declutterTree_){this.declutterTree_.clear()}var g=this.getLayer();var m=0;var _=0;var y;var b=n.opacity!==1;var w=g.hasListener(ne["a"].RENDER);if(b||w){var S=t.canvas.width;var C=t.canvas.height;if(u){var O=Math.round(Math.sqrt(S*S+C*C));m=(O-S)/2;_=(O-C)/2;S=C=O}this.context.canvas.width=S;this.context.canvas.height=C;y=this.context}else{y=t}var x=y.globalAlpha;if(!b){y.globalAlpha=n.opacity}if(y!=t){y.translate(m,_)}var T=r.viewHints;var E=!(T[ve["a"].ANIMATING]||T[ve["a"].INTERACTING]);var M=r.size[0]*a;var A=r.size[1]*a;Object(It["s"])(y,-u,M/2,A/2);v.replay(y,h,u,o,E);if(f.getWrapX()&&l.canWrapX()&&!Object(je["g"])(c,i)){var k=i[0];var j=Object(je["E"])(c);var I=0;var D;while(k<c[0]){--I;D=j*I;h=this.getTransform(r,D);v.replay(y,h,u,o,E);k+=j}I=0;k=i[2];while(k>c[2]){++I;D=j*I;h=this.getTransform(r,D);v.replay(y,h,u,o,E);k-=j}}Object(It["s"])(y,u,M/2,A/2);if(w){this.dispatchRenderEvent(y,r,h)}if(y!=t){if(b){var P=t.globalAlpha;t.globalAlpha=n.opacity;t.drawImage(y.canvas,-m,-_);t.globalAlpha=P}else{t.drawImage(y.canvas,-m,-_)}y.translate(-m,-_)}if(!b){y.globalAlpha=x}}if(p){t.restore()}};e.prototype.composeFrame=function e(t,r,n){var i=this.getTransform(t,0);this.preCompose(n,t,i);this.compose(n,t,r);this.postCompose(n,t,r,i)};e.prototype.forEachFeatureAtCoordinate=function e(t,r,n,i,a){if(!this.replayGroup_){return undefined}else{var o=r.viewState.resolution;var s=r.viewState.rotation;var l=this.getLayer();var u={};var c=this.replayGroup_.forEachFeatureAtCoordinate(t,o,s,n,{},function(e){var t=Object(Me["c"])(e);if(!(t in u)){u[t]=true;return i.call(a,e,l)}},null);return c}};e.prototype.handleFontsChanged_=function e(t){var r=this.getLayer();if(r.getVisible()&&this.replayGroup_){r.changed()}};e.prototype.handleStyleImageChange_=function e(t){this.renderIfReadyAndVisible()};e.prototype.prepareFrame=function e(t,r){var i=this.getLayer();var n=i.getSource();var a=t.viewHints[ve["a"].ANIMATING];var o=t.viewHints[ve["a"].INTERACTING];var s=i.getUpdateWhileAnimating();var l=i.getUpdateWhileInteracting();if(!this.dirty_&&!s&&a||!l&&o){return true}var u=t.extent;var c=t.viewState;var f=c.projection;var h=c.resolution;var d=t.pixelRatio;var p=i.getRevision();var v=i.getRenderBuffer();var g=i.getRenderOrder();if(g===undefined){g=Qr}var m=Object(je["c"])(u,v*h);var _=c.projection.getExtent();if(n.getWrapX()&&c.projection.canWrapX()&&!Object(je["g"])(_,t.extent)){var y=Object(je["E"])(_);var b=Math.max(Object(je["E"])(m)/2,y);m[0]=_[0]-b;m[2]=_[2]+b}if(!this.dirty_&&this.renderedResolution_==h&&this.renderedRevision_==p&&this.renderedRenderOrder_==g&&Object(je["g"])(this.renderedExtent_,m)){this.replayGroupChanged=false;return true}this.replayGroup_=null;this.dirty_=false;var w=new Kr(en(h,d),m,h,d,n.getOverlaps(),this.declutterTree_,i.getRenderBuffer());n.loadFeatures(m,h,f);var S=function(e){var t;var r=e.getStyleFunction()||i.getStyleFunction();if(r){t=r(e,h)}if(t){var n=this.renderFeature(e,h,d,t,w);this.dirty_=this.dirty_||n}}.bind(this);if(g){var C=[];n.forEachFeatureInExtent(m,function(e){C.push(e)});C.sort(g);for(var O=0,x=C.length;O<x;++O){S(C[O])}}else{n.forEachFeatureInExtent(m,S)}w.finish();this.renderedResolution_=h;this.renderedRevision_=p;this.renderedRenderOrder_=g;this.renderedExtent_=m;this.replayGroup_=w;this.replayGroupChanged=true;return true};e.prototype.renderFeature=function e(t,r,n,i,a){if(!i){return false}var o=false;if(Array.isArray(i)){for(var s=0,l=i.length;s<l;++s){o=rn(a,t,i[s],Jr(r,n),this.handleStyleImageChange_,this)||o}}else{o=rn(a,t,i,Jr(r,n),this.handleStyleImageChange_,this)}return o};return e}(tr);dn["handles"]=function(e){return e.getType()===Mt["a"].VECTOR};dn["create"]=function(e,t){return new dn(t)};var pn=dn;var vn={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"};var gn=r(10);var mn=r(79);var _n={image:[dr.POLYGON,dr.CIRCLE,dr.LINE_STRING,dr.IMAGE,dr.TEXT],hybrid:[dr.POLYGON,dr.LINE_STRING]};var yn={image:[dr.DEFAULT],hybrid:[dr.IMAGE,dr.TEXT,dr.DEFAULT],vector:Or};var bn=function(P){function e(e){P.call(this,e,true);this.declutterTree_=e.getDeclutter()?cr()(9,undefined):null;this.dirty_=false;this.renderedLayerRevision_;this.tmpTransform_=Object(Ie["c"])();var t=e.getRenderMode();this.zDirection=t===vn.VECTOR?1:0;if(t!==vn.VECTOR){this.context=Object(ge["a"])()}Object(d["a"])(It["o"],se["a"].CLEAR,this.handleFontsChanged_,this)}if(P)e.__proto__=P;e.prototype=Object.create(P&&P.prototype);e.prototype.constructor=e;e.prototype.disposeInternal=function e(){Object(d["c"])(It["o"],se["a"].CLEAR,this.handleFontsChanged_,this);P.prototype.disposeInternal.call(this)};e.prototype.getTile=function e(t,r,n,i,a){var o=P.prototype.getTile.call(this,t,r,n,i,a);if(o.getState()===oe["a"].LOADED){this.createReplayGroup_(o,i,a);if(this.context){this.renderTileImage_(o,i,a)}}return o};e.prototype.getTileImage=function e(t){var r=this.getLayer();return t.getImage(r)};e.prototype.prepareFrame=function e(t,r){var n=this.getLayer();var i=n.getRevision();if(this.renderedLayerRevision_!=i){this.renderedTiles.length=0}this.renderedLayerRevision_=i;return P.prototype.prepareFrame.call(this,t,r)};e.prototype.createReplayGroup_=function e(m,_,y){var b=this;var w=this.getLayer();var t=w.getRevision();var S=w.getRenderOrder()||null;var C=m.getReplayState(w);if(!C.dirty&&C.renderedRevision==t&&C.renderedRenderOrder==S){return}var O=w.getSource();var x=O.getTileGrid();var r=O.getTileGridForProjection(y);var T=r.getResolution(m.tileCoord[0]);var E=m.extent;var n=function e(t,r){var n=m.getTile(m.tileKeys[t]);if(n.getState()!=oe["a"].LOADED){return}var i=n.tileCoord;var a=x.getTileCoordExtent(i);var o=Object(je["B"])(E,a);var s=Object(je["p"])(a,o)?null:Object(je["c"])(o,w.getRenderBuffer()*T,b.tmpExtent);var l=n.getProjection();var u=false;if(!Object(gn["e"])(y,l)){u=true;n.setProjection(y)}C.dirty=false;var c=new Kr(0,o,T,_,O.getOverlaps(),b.declutterTree_,w.getRenderBuffer());var f=Jr(T,_);var h=function e(t){var r;var n=t.getStyleFunction()||w.getStyleFunction();if(n){r=n(t,T)}if(r){var i=this.renderFeature(t,f,r,c);this.dirty_=this.dirty_||i;C.dirty=C.dirty||i}};var d=n.getFeatures();if(S&&S!==C.renderedRenderOrder){d.sort(S)}for(var p=0,v=d.length;p<v;++p){var g=d[p];if(u){if(l.getUnits()==mn["b"].TILE_PIXELS){l.setWorldExtent(a);l.setExtent(n.getExtent())}g.getGeometry().transform(l,y)}if(!s||Object(je["F"])(s,g.getGeometry().getExtent())){h.call(b,g)}}c.finish();n.setReplayGroup(w,m.tileCoord.toString(),c)};for(var i=0,a=m.tileKeys.length;i<a;++i){n(i,a)}C.renderedRevision=t;C.renderedRenderOrder=S};e.prototype.forEachFeatureAtCoordinate=function e(t,r,n,i,a){var o=r.viewState.resolution;var s=r.viewState.rotation;n=n==undefined?0:n;var l=this.getLayer();var u={};var c=this.renderedTiles;var f,h;var d,p;for(d=0,p=c.length;d<p;++d){var v=c[d];f=Object(je["c"])(v.extent,n*o,f);if(!Object(je["f"])(f,t)){continue}for(var g=0,m=v.tileKeys.length;g<m;++g){var _=v.getTile(v.tileKeys[g]);if(_.getState()!=oe["a"].LOADED){continue}var y=_.getReplayGroup(l,v.tileCoord.toString());h=h||y.forEachFeatureAtCoordinate(t,o,s,n,{},function(e){var t=Object(Me["c"])(e);if(!(t in u)){u[t]=true;return i.call(a,e,l)}},null)}}return h};e.prototype.getReplayTransform_=function e(t,r){var n=this.getLayer();var i=n.getSource();var a=i.getTileGrid();var o=t.tileCoord;var s=a.getResolution(o[0]);var l=r.viewState;var u=r.pixelRatio;var c=l.resolution/u;var f=a.getTileCoordExtent(o,this.tmpExtent);var h=l.center;var d=Object(je["C"])(f);var p=r.size;var v=Math.round(u*p[0]/2);var g=Math.round(u*p[1]/2);return Object(Ie["b"])(this.tmpTransform_,v,g,s/c,s/c,l.rotation,(d[0]-h[0])/s,(h[1]-d[1])/s)};e.prototype.handleFontsChanged_=function e(t){var r=this.getLayer();if(r.getVisible()&&this.renderedLayerRevision_!==undefined){r.changed()}};e.prototype.handleStyleImageChange_=function e(t){this.renderIfReadyAndVisible()};e.prototype.postCompose=function e(t,r,n){var i=this.getLayer();var a=i.getRenderMode();if(a!=vn.IMAGE){var o=i.getDeclutter()?{}:null;var s=i.getSource();var l=yn[a];var u=r.pixelRatio;var c=r.viewState.rotation;var f=r.size;var h,d;if(c){h=Math.round(u*f[0]/2);d=Math.round(u*f[1]/2);Object(It["s"])(t,-c,h,d)}if(o){this.declutterTree_.clear()}var p=r.viewHints;var v=!(p[ve["a"].ANIMATING]||p[ve["a"].INTERACTING]);var g=this.renderedTiles;var m=s.getTileGridForProjection(r.viewState.projection);var _=[];var y=[];for(var b=g.length-1;b>=0;--b){var w=g[b];if(w.getState()==oe["a"].ABORT){continue}var S=w.tileCoord;var C=m.getTileCoordExtent(S,this.tmpExtent)[0]-w.extent[0];var O=undefined;for(var x=0,T=w.tileKeys.length;x<T;++x){var E=w.getTile(w.tileKeys[x]);if(E.getState()!=oe["a"].LOADED){continue}var M=E.getReplayGroup(i,S.toString());if(!M||!M.hasReplays(l)){continue}if(!O){O=this.getTransform(r,C)}var A=E.tileCoord[0];var k=M.getClipCoords(O);t.save();t.globalAlpha=n.opacity;for(var j=0,I=_.length;j<I;++j){var D=_[j];if(A<y[j]){t.beginPath();t.moveTo(k[0],k[1]);t.lineTo(k[2],k[3]);t.lineTo(k[4],k[5]);t.lineTo(k[6],k[7]);t.moveTo(D[6],D[7]);t.lineTo(D[4],D[5]);t.lineTo(D[2],D[3]);t.lineTo(D[0],D[1]);t.clip()}}M.replay(t,O,c,{},v,l,o);t.restore();_.push(k);y.push(A)}}if(o){Br(o,t,c,v)}if(c){Object(It["s"])(t,c,h,d)}}P.prototype.postCompose.call(this,t,r,n)};e.prototype.renderFeature=function e(t,r,n,i){if(!n){return false}var a=false;if(Array.isArray(n)){for(var o=0,s=n.length;o<s;++o){a=rn(i,t,n[o],r,this.handleStyleImageChange_,this)||a}}else{a=rn(i,t,n,r,this.handleStyleImageChange_,this)}return a};e.prototype.renderTileImage_=function e(t,r,n){var i=this.getLayer();var a=t.getReplayState(i);var o=i.getRevision();var s=_n[i.getRenderMode()];if(s&&a.renderedTileRevision!==o){a.renderedTileRevision=o;var l=t.wrappedTileCoord;var u=l[0];var c=i.getSource();var f=c.getTileGridForProjection(n);var h=f.getResolution(u);var d=t.getContext(i);var p=c.getTilePixelSize(u,r,n);d.canvas.width=p[0];d.canvas.height=p[1];var v=f.getTileCoordExtent(l,this.tmpExtent);for(var g=0,m=t.tileKeys.length;g<m;++g){var _=t.getTile(t.tileKeys[g]);if(_.getState()!=oe["a"].LOADED){continue}var y=r/h;var b=Object(Ie["e"])(this.tmpTransform_);Object(Ie["f"])(b,y,-y);Object(Ie["h"])(b,-v[0],-v[3]);var w=_.getReplayGroup(i,t.tileCoord.toString());w.replay(d,b,0,{},true,s)}}};return e}(lr);bn["handles"]=function(e){return e.getType()===Mt["a"].VECTOR_TILE};bn["create"]=function(e,t){return new bn(t)};var wn=bn;var Sn=function(t){function e(e){e=Object(ke["a"])({},e);if(!e.controls){e.controls=Ue()}if(!e.interactions){e.interactions=St()}t.call(this,e)}if(t)e.__proto__=t;e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;e.prototype.createRenderer=function e(){var t=new Xt(this);t.registerLayerRenderers([ar,lr,pn,wn]);return t};return e}(Se);var Cn=t["a"]=Sn},function(e,t,r){"use strict";var i=r(8);var a=r(3);var o=r(33);var s=r(7);var n=r(82);var l=r(142);var u=r(133);var c=r(135);var f=r(269);var h=r(208);var d=r(310);var p=r(307);var v=r(156);var g=function(r){function n(e,t){r.call(this);this.flatMidpoint_=null;this.flatMidpointRevision_=-1;this.maxDelta_=-1;this.maxDeltaRevision_=-1;if(t!==undefined&&!Array.isArray(e[0])){this.setFlatCoordinates(t,e)}else{this.setCoordinates(e,t)}}if(r)n.__proto__=r;n.prototype=Object.create(r&&r.prototype);n.prototype.constructor=n;n.prototype.appendCoordinate=function e(t){if(!this.flatCoordinates){this.flatCoordinates=t.slice()}else{Object(i["c"])(this.flatCoordinates,t)}this.changed()};n.prototype.clone=function e(){return new n(this.flatCoordinates.slice(),this.layout)};n.prototype.closestPointXY=function e(t,r,n,i){if(i<Object(a["e"])(this.getExtent(),t,r)){return i}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(Object(l["e"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return Object(l["d"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,false,t,r,n,i)};n.prototype.forEachSegment=function e(t){return Object(p["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)};n.prototype.getCoordinateAtM=function e(t,r){if(this.layout!=o["a"].XYM&&this.layout!=o["a"].XYZM){return null}var n=r!==undefined?r:false;return Object(f["b"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n)};n.prototype.getCoordinates=function e(){return Object(c["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};n.prototype.getCoordinateAt=function e(t,r){return Object(f["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r)};n.prototype.getLength=function e(){return Object(d["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};n.prototype.getFlatMidpoint=function e(){if(this.flatMidpointRevision_!=this.getRevision()){this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_);this.flatMidpointRevision_=this.getRevision()}return this.flatMidpoint_};n.prototype.getSimplifiedGeometryInternal=function e(t){var r=[];r.length=Object(v["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r,0);return new n(r,o["a"].XY)};n.prototype.getType=function e(){return s["a"].LINE_STRING};n.prototype.intersectsExtent=function e(t){return Object(h["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)};n.prototype.setCoordinates=function e(t,r){this.setLayout(r,t,1);if(!this.flatCoordinates){this.flatCoordinates=[]}this.flatCoordinates.length=Object(u["b"])(this.flatCoordinates,0,t,this.stride);this.changed()};return n}(n["a"]);t["a"]=g},function(e,t,r){"use strict";r.d(t,"c",function(){return n});r.d(t,"e",function(){return a});r.d(t,"g",function(){return u});r.d(t,"a",function(){return c});r.d(t,"f",function(){return h});r.d(t,"h",function(){return d});r.d(t,"b",function(){return p});r.d(t,"d",function(){return v});var l=r(25);var i=new Array(6);function n(){return[1,0,0,1,0,0]}function a(e){return s(e,1,0,0,1,0,0)}function o(e,t){var r=e[0];var n=e[1];var i=e[2];var a=e[3];var o=e[4];var s=e[5];var l=t[0];var u=t[1];var c=t[2];var f=t[3];var h=t[4];var d=t[5];e[0]=r*l+i*u;e[1]=n*l+a*u;e[2]=r*c+i*f;e[3]=n*c+a*f;e[4]=r*h+i*d+o;e[5]=n*h+a*d+s;return e}function s(e,t,r,n,i,a,o){e[0]=t;e[1]=r;e[2]=n;e[3]=i;e[4]=a;e[5]=o;return e}function u(e,t){e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];e[4]=t[4];e[5]=t[5];return e}function c(e,t){var r=t[0];var n=t[1];t[0]=e[0]*r+e[2]*n+e[4];t[1]=e[1]*r+e[3]*n+e[5];return t}function f(e,t){var r=Math.cos(t);var n=Math.sin(t);return o(e,s(i,r,n,-n,r,0,0))}function h(e,t,r){return o(e,s(i,t,0,0,r,0,0))}function d(e,t,r){return o(e,s(i,1,0,0,1,t,r))}function p(e,t,r,n,i,a,o,s){var l=Math.sin(a);var u=Math.cos(a);e[0]=n*u;e[1]=i*l;e[2]=-n*l;e[3]=i*u;e[4]=o*n*u-s*n*l+t;e[5]=o*i*l+s*i*u+r;return e}function v(e){var t=g(e);Object(l["a"])(t!==0,32);var r=e[0];var n=e[1];var i=e[2];var a=e[3];var o=e[4];var s=e[5];e[0]=a/t;e[1]=-n/t;e[2]=-i/t;e[3]=r/t;e[4]=(i*s-a*o)/t;e[5]=-(r*s-n*o)/t;return e}function g(e){return e[0]*e[3]-e[1]*e[2]}},function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r(130);function i(e){var t=+e,r=0;if(t!==0&&isFinite(t)){r=Object(n["a"])(t)}return r}},function(e,t,r){"use strict";t["a"]={IDLE:0,LOADING:1,LOADED:2,ERROR:3}},function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"b",function(){return i});r.d(t,"c",function(){return a});r.d(t,"e",function(){return u});r.d(t,"f",function(){return h});r.d(t,"g",function(){return d});r.d(t,"h",function(){return p});r.d(t,"d",function(){return v});r.d(t,"i",function(){return g});var c=r(15);var f=r(139);function n(e,t){e[0]+=t[0];e[1]+=t[1];return e}function i(e,t){var r=t.getRadius();var n=t.getCenter();var i=n[0];var a=n[1];var o=e[0];var s=e[1];var l=o-i;var u=s-a;if(l===0&&u===0){l=1}var c=Math.sqrt(l*l+u*u);var f=i+r*l/c;var h=a+r*u/c;return[f,h]}function a(e,t){var r=e[0];var n=e[1];var i=t[0];var a=t[1];var o=i[0];var s=i[1];var l=a[0];var u=a[1];var c=l-o;var f=u-s;var h=c===0&&f===0?0:(c*(r-o)+f*(n-s))/(c*c+f*f||0);var d,p;if(h<=0){d=o;p=s}else if(h>=1){d=l;p=u}else{d=o+h*c;p=s+h*f}return[d,p]}function o(t){return function(e){return _(e,t)}}function s(e,t,r){var n=Object(c["d"])(t+180,360)-180;var i=Math.abs(3600*n);var a=r||0;var o=Math.pow(10,a);var s=Math.floor(i/3600);var l=Math.floor((i-s*3600)/60);var u=i-s*3600-l*60;u=Math.ceil(u*o)/o;if(u>=60){u=0;l+=1}if(l>=60){l=0;s+=1}return s+"° "+Object(f["b"])(l,2)+"′ "+Object(f["b"])(u,2,a)+"″"+(n==0?"":" "+e.charAt(n<0?1:0))}function l(e,t,r){if(e){return t.replace("{x}",e[0].toFixed(r)).replace("{y}",e[1].toFixed(r))}else{return""}}function u(e,t){var r=true;for(var n=e.length-1;n>=0;--n){if(e[n]!=t[n]){r=false;break}}return r}function h(e,t){var r=Math.cos(t);var n=Math.sin(t);var i=e[0]*r-e[1]*n;var a=e[1]*r+e[0]*n;e[0]=i;e[1]=a;return e}function d(e,t){e[0]*=t;e[1]*=t;return e}function p(e,t){var r=e[0]-t[0];var n=e[1]-t[1];return r*r+n*n}function v(e,t){return Math.sqrt(p(e,t))}function g(e,t){return p(e,a(e,t))}function m(e,t){if(e){return s("NS",e[1],t)+" "+s("EW",e[0],t)}else{return""}}function _(e,t){return l(e,"{x}, {y}",t)}},function(e,t,r){"use strict";r.d(t,"a",function(){return a});r.d(t,"c",function(){return o});r.d(t,"b",function(){return s});var i=r(68);var n={};function a(e,t){var r=e.toLowerCase();n[r]=n[r+"s"]=n[t]=e}function o(e){return typeof e==="string"?n[e]||n[e.toLowerCase()]:undefined}function s(e){var t={},r,n;for(n in e){if(Object(i["a"])(e,n)){r=o(n);if(r){t[r]=e[n]}}}return t}},function(e,t,r){"use strict";r.d(t,"b",function(){return n});r.d(t,"a",function(){return i});r.d(t,"c",function(){return a});function n(){return true}function i(){return false}function a(){}},function(e,t,r){"use strict";var n={BOOLEAN:"boolean",DATE:"date",DATETIME:"datetime",TIME:"time",GEOMETRY:"geometry",NUMBER:"number",SELECT:"select",TEXT:"text"};t["a"]=n},function(e,t,r){"use strict";var v=r(232);var a=r(5);var j=r(41);var w=r(15);function n(t){return function(e){if(e){return[Object(w["a"])(e[0],t[0],t[2]),Object(w["a"])(e[1],t[1],t[3])]}else{return undefined}}}function i(e){return e}var o=r(50);var s=r(8);function g(o){return function(e,t,r){if(e!==undefined){var n=Object(s["h"])(o,e,r);n=Object(w["a"])(n+t,0,o.length-1);var i=Math.floor(n);if(n!=i&&i<o.length-1){var a=o[i]/o[i+1];return o[i]/Math.pow(a,n-i)}else{return o[i]}}else{return undefined}}}function m(o,s,l){return function(e,t,r){if(e!==undefined){var n=-r/2+.5;var i=Math.floor(Math.log(s/e)/Math.log(o)+n);var a=Math.max(i+t,0);if(l!==undefined){a=Math.min(a,l)}return s/Math.pow(o,a)}else{return undefined}}}var l=r(193);var S=r(57);var C={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};var I=r(25);var u=r(39);var _=r(108);var D=r(3);var P=r(7);var R=r(31);var c=r(9);var y=r(10);var b=r(79);var O=0;var f=function(r){function e(e){r.call(this);var t=Object(c["a"])({},e);this.hints_=[0,0];this.animations_=[];this.updateAnimationKey_;this.updateAnimations_=this.updateAnimations_.bind(this);this.projection_=Object(y["d"])(t.projection,"EPSG:3857");this.applyOptions_(t)}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;e.prototype.applyOptions_=function e(t){var r={};r[C.CENTER]=t.center!==undefined?t.center:null;var n=d(t);this.maxResolution_=n.maxResolution;this.minResolution_=n.minResolution;this.zoomFactor_=n.zoomFactor;this.resolutions_=t.resolutions;this.minZoom_=n.minZoom;var i=h(t);var a=n.constraint;var o=p(t);this.constraints_={center:i,resolution:a,rotation:o};if(t.resolution!==undefined){r[C.RESOLUTION]=t.resolution}else if(t.zoom!==undefined){r[C.RESOLUTION]=this.constrainResolution(this.maxResolution_,t.zoom-this.minZoom_);if(this.resolutions_){r[C.RESOLUTION]=Object(w["a"])(Number(this.getResolution()||r[C.RESOLUTION]),this.minResolution_,this.maxResolution_)}}r[C.ROTATION]=t.rotation!==undefined?t.rotation:0;this.setProperties(r);this.options_=t};e.prototype.getUpdatedOptions_=function e(t){var r=Object(c["a"])({},this.options_);if(r.resolution!==undefined){r.resolution=this.getResolution()}else{r.zoom=this.getZoom()}r.center=this.getCenter();r.rotation=this.getRotation();return Object(c["a"])({},r,t)};e.prototype.animate=function e(t){var r=arguments;var n=arguments.length;var i;if(n>1&&typeof arguments[n-1]==="function"){i=arguments[n-1];--n}if(!this.isDef()){var a=arguments[n-1];if(a.center){this.setCenter(a.center)}if(a.zoom!==undefined){this.setZoom(a.zoom)}if(a.rotation!==undefined){this.setRotation(a.rotation)}if(i){L(i,true)}return}var o=Date.now();var s=this.getCenter().slice();var l=this.getResolution();var u=this.getRotation();var c=[];for(var f=0;f<n;++f){var h=r[f];var d={start:o,complete:false,anchor:h.anchor,duration:h.duration!==undefined?h.duration:1e3,easing:h.easing||_["c"]};if(h.center){d.sourceCenter=s;d.targetCenter=h.center;s=d.targetCenter}if(h.zoom!==undefined){d.sourceResolution=l;d.targetResolution=this.constrainResolution(this.maxResolution_,h.zoom-this.minZoom_,0);l=d.targetResolution}else if(h.resolution){d.sourceResolution=l;d.targetResolution=h.resolution;l=d.targetResolution}if(h.rotation!==undefined){d.sourceRotation=u;var p=Object(w["d"])(h.rotation-u+Math.PI,2*Math.PI)-Math.PI;d.targetRotation=u+p;u=d.targetRotation}d.callback=i;if(x(d)){d.complete=true}else{o+=d.duration}c.push(d)}this.animations_.push(c);this.setHint(S["a"].ANIMATING,1);this.updateAnimations_()};e.prototype.getAnimating=function e(){return this.hints_[S["a"].ANIMATING]>0};e.prototype.getInteracting=function e(){return this.hints_[S["a"].INTERACTING]>0};e.prototype.cancelAnimations=function e(){this.setHint(S["a"].ANIMATING,-this.hints_[S["a"].ANIMATING]);for(var t=0,r=this.animations_.length;t<r;++t){var n=this.animations_[t];if(n[0].callback){L(n[0].callback,false)}}this.animations_.length=0};e.prototype.updateAnimations_=function e(){if(this.updateAnimationKey_!==undefined){cancelAnimationFrame(this.updateAnimationKey_);this.updateAnimationKey_=undefined}if(!this.getAnimating()){return}var t=Date.now();var r=false;for(var n=this.animations_.length-1;n>=0;--n){var i=this.animations_[n];var a=true;for(var o=0,s=i.length;o<s;++o){var l=i[o];if(l.complete){continue}var u=t-l.start;var c=l.duration>0?u/l.duration:1;if(c>=1){l.complete=true;c=1}else{a=false}var f=l.easing(c);if(l.sourceCenter){var h=l.sourceCenter[0];var d=l.sourceCenter[1];var p=l.targetCenter[0];var v=l.targetCenter[1];var g=h+f*(p-h);var m=d+f*(v-d);this.set(C.CENTER,[g,m])}if(l.sourceResolution&&l.targetResolution){var _=f===1?l.targetResolution:l.sourceResolution+f*(l.targetResolution-l.sourceResolution);if(l.anchor){this.set(C.CENTER,this.calculateCenterZoom(_,l.anchor))}this.set(C.RESOLUTION,_)}if(l.sourceRotation!==undefined&&l.targetRotation!==undefined){var y=f===1?Object(w["d"])(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+f*(l.targetRotation-l.sourceRotation);if(l.anchor){this.set(C.CENTER,this.calculateCenterRotate(y,l.anchor))}this.set(C.ROTATION,y)}r=true;if(!l.complete){break}}if(a){this.animations_[n]=null;this.setHint(S["a"].ANIMATING,-1);var b=i[0].callback;if(b){L(b,true)}}}this.animations_=this.animations_.filter(Boolean);if(r&&this.updateAnimationKey_===undefined){this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_)}};e.prototype.calculateCenterRotate=function e(t,r){var n;var i=this.getCenter();if(i!==undefined){n=[i[0]-r[0],i[1]-r[1]];Object(u["f"])(n,t-this.getRotation());Object(u["a"])(n,r)}return n};e.prototype.calculateCenterZoom=function e(t,r){var n;var i=this.getCenter();var a=this.getResolution();if(i!==undefined&&a!==undefined){var o=r[0]-t*(r[0]-i[0])/a;var s=r[1]-t*(r[1]-i[1])/a;n=[o,s]}return n};e.prototype.getSizeFromViewport_=function e(){var t=[100,100];var r='.ol-viewport[data-view="'+Object(a["c"])(this)+'"]';var n=document.querySelector(r);if(n){var i=getComputedStyle(n);t[0]=parseInt(i.width,10);t[1]=parseInt(i.height,10)}return t};e.prototype.constrainCenter=function e(t){return this.constraints_.center(t)};e.prototype.constrainResolution=function e(t,r,n){var i=r||0;var a=n||0;return this.constraints_.resolution(t,i,a)};e.prototype.constrainRotation=function e(t,r){var n=r||0;return this.constraints_.rotation(t,n)};e.prototype.getCenter=function e(){return this.get(C.CENTER)};e.prototype.getConstraints=function e(){return this.constraints_};e.prototype.getHints=function e(t){if(t!==undefined){t[0]=this.hints_[0];t[1]=this.hints_[1];return t}else{return this.hints_.slice()}};e.prototype.calculateExtent=function e(t){var r=t||this.getSizeFromViewport_();var n=this.getCenter();Object(I["a"])(n,1);var i=this.getResolution();Object(I["a"])(i!==undefined,2);var a=this.getRotation();Object(I["a"])(a!==undefined,3);return Object(D["z"])(n,i,a,r)};e.prototype.getMaxResolution=function e(){return this.maxResolution_};e.prototype.getMinResolution=function e(){return this.minResolution_};e.prototype.getMaxZoom=function e(){return this.getZoomForResolution(this.minResolution_)};e.prototype.setMaxZoom=function e(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))};e.prototype.getMinZoom=function e(){return this.getZoomForResolution(this.maxResolution_)};e.prototype.setMinZoom=function e(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))};e.prototype.getProjection=function e(){return this.projection_};e.prototype.getResolution=function e(){return this.get(C.RESOLUTION)};e.prototype.getResolutions=function e(){return this.resolutions_};e.prototype.getResolutionForExtent=function e(t,r){var n=r||this.getSizeFromViewport_();var i=Object(D["E"])(t)/n[0];var a=Object(D["A"])(t)/n[1];return Math.max(i,a)};e.prototype.getResolutionForValueFunction=function e(t){var r=t||2;var n=this.maxResolution_;var i=this.minResolution_;var a=Math.log(n/i)/Math.log(r);return function(e){var t=n/Math.pow(r,e*a);return t}};e.prototype.getRotation=function e(){return this.get(C.ROTATION)};e.prototype.getValueForResolutionFunction=function e(t){var r=t||2;var n=this.maxResolution_;var i=this.minResolution_;var a=Math.log(n/i)/Math.log(r);return function(e){var t=Math.log(n/e)/Math.log(r)/a;return t}};e.prototype.getState=function e(t){var r=this.getCenter();var n=this.getProjection();var i=this.getResolution();var a=i/t;var o=this.getRotation();return{center:[Math.round(r[0]/a)*a,Math.round(r[1]/a)*a],projection:n!==undefined?n:null,resolution:i,rotation:o,zoom:this.getZoom()}};e.prototype.getZoom=function e(){var t;var r=this.getResolution();if(r!==undefined){t=this.getZoomForResolution(r)}return t};e.prototype.getZoomForResolution=function e(t){var r=this.minZoom_||0;var n,i;if(this.resolutions_){var a=Object(s["h"])(this.resolutions_,t,1);r=a;n=this.resolutions_[a];if(a==this.resolutions_.length-1){i=2}else{i=n/this.resolutions_[a+1]}}else{n=this.maxResolution_;i=this.zoomFactor_}return r+Math.log(n/t)/Math.log(i)};e.prototype.getResolutionForZoom=function e(t){return this.constrainResolution(this.maxResolution_,t-this.minZoom_,0)};e.prototype.fit=function e(t,r){var n=r||{};var i=n.size;if(!i){i=this.getSizeFromViewport_()}var a;Object(I["a"])(Array.isArray(t)||typeof t.getSimplifiedGeometry==="function",24);if(Array.isArray(t)){Object(I["a"])(!Object(D["H"])(t),25);a=Object(R["c"])(t)}else if(t.getType()===P["a"].CIRCLE){t=t.getExtent();a=Object(R["c"])(t);a.rotate(this.getRotation(),Object(D["x"])(t))}else{a=t}var o=n.padding!==undefined?n.padding:[0,0,0,0];var s=n.constrainResolution!==undefined?n.constrainResolution:true;var l=n.nearest!==undefined?n.nearest:false;var u;if(n.minResolution!==undefined){u=n.minResolution}else if(n.maxZoom!==undefined){u=this.constrainResolution(this.maxResolution_,n.maxZoom-this.minZoom_,0)}else{u=0}var c=a.getFlatCoordinates();var f=this.getRotation();var h=Math.cos(-f);var d=Math.sin(-f);var p=+Infinity;var v=+Infinity;var g=-Infinity;var m=-Infinity;var _=a.getStride();for(var y=0,b=c.length;y<b;y+=_){var w=c[y]*h-c[y+1]*d;var S=c[y]*d+c[y+1]*h;p=Math.min(p,w);v=Math.min(v,S);g=Math.max(g,w);m=Math.max(m,S)}var C=this.getResolutionForExtent([p,v,g,m],[i[0]-o[1]-o[3],i[1]-o[0]-o[2]]);C=isNaN(C)?u:Math.max(C,u);if(s){var O=this.constrainResolution(C,0,0);if(!l&&O<C){O=this.constrainResolution(O,-1,0)}C=O}d=-d;var x=(p+g)/2;var T=(v+m)/2;x+=(o[1]-o[3])/2*C;T+=(o[0]-o[2])/2*C;var E=x*h-T*d;var M=T*h+x*d;var A=[E,M];var k=n.callback?n.callback:j["c"];if(n.duration!==undefined){this.animate({resolution:C,center:A,duration:n.duration,easing:n.easing},k)}else{this.setResolution(C);this.setCenter(A);L(k,true)}};e.prototype.centerOn=function e(t,r,n){var i=this.getRotation();var a=Math.cos(-i);var o=Math.sin(-i);var s=t[0]*a-t[1]*o;var l=t[1]*a+t[0]*o;var u=this.getResolution();s+=(r[0]/2-n[0])*u;l+=(n[1]-r[1]/2)*u;o=-o;var c=s*a-l*o;var f=l*a+s*o;this.setCenter([c,f])};e.prototype.isDef=function e(){return!!this.getCenter()&&this.getResolution()!==undefined};e.prototype.rotate=function e(t,r){if(r!==undefined){var n=this.calculateCenterRotate(t,r);this.setCenter(n)}this.setRotation(t)};e.prototype.setCenter=function e(t){this.set(C.CENTER,t);if(this.getAnimating()){this.cancelAnimations()}};e.prototype.setHint=function e(t,r){this.hints_[t]+=r;this.changed();return this.hints_[t]};e.prototype.setResolution=function e(t){this.set(C.RESOLUTION,t);if(this.getAnimating()){this.cancelAnimations()}};e.prototype.setRotation=function e(t){this.set(C.ROTATION,t);if(this.getAnimating()){this.cancelAnimations()}};e.prototype.setZoom=function e(t){this.setResolution(this.getResolutionForZoom(t))};return e}(o["a"]);function L(e,t){setTimeout(function(){e(t)},0)}function h(e){if(e.extent!==undefined){return n(e.extent)}else{return i}}function d(e){var t;var r;var n;var i=28;var a=2;var o=e.minZoom!==undefined?e.minZoom:O;var s=e.maxZoom!==undefined?e.maxZoom:i;var l=e.zoomFactor!==undefined?e.zoomFactor:a;if(e.resolutions!==undefined){var u=e.resolutions;r=u[o];n=u[s]!==undefined?u[s]:u[u.length-1];t=g(u)}else{var c=Object(y["d"])(e.projection,"EPSG:3857");var f=c.getExtent();var h=!f?360*b["a"][b["b"].DEGREES]/c.getMetersPerUnit():Math.max(Object(D["E"])(f),Object(D["A"])(f));var d=h/v["b"]/Math.pow(a,O);var p=d/Math.pow(a,i-O);r=e.maxResolution;if(r!==undefined){o=0}else{r=d/Math.pow(l,o)}n=e.minResolution;if(n===undefined){if(e.maxZoom!==undefined){if(e.maxResolution!==undefined){n=r/Math.pow(l,s)}else{n=d/Math.pow(l,s)}}else{n=p}}s=o+Math.floor(Math.log(r/n)/Math.log(l));n=r/Math.pow(l,s-o);t=m(l,r,s-o)}return{constraint:t,maxResolution:r,minResolution:n,minZoom:o,zoomFactor:l}}function p(e){var t=e.enableRotation!==undefined?e.enableRotation:true;if(t){var r=e.constrainRotation;if(r===undefined||r===true){return Object(l["b"])()}else if(r===false){return l["d"]}else if(typeof r==="number"){return Object(l["a"])(r)}else{return l["d"]}}else{return l["c"]}}function x(e){if(e.sourceCenter&&e.targetCenter){if(!Object(u["e"])(e.sourceCenter,e.targetCenter)){return false}}if(e.sourceResolution!==e.targetResolution){return false}if(e.sourceRotation!==e.targetRotation){return false}return true}var T=t["a"]=f},function(e,t,r){"use strict";r.d(t,"a",function(){return i});function n(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false,parsedDateParts:[],meridiem:null,rfc2822:false,weekdayMismatch:false}}function i(e){if(e._pf==null){e._pf=n()}return e._pf}},,function(e,t,r){"use strict";var n=r(12);t["a"]={SINGLECLICK:"singleclick",CLICK:n["a"].CLICK,DBLCLICK:n["a"].DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},function(e,t,r){"use strict";r.d(t,"b",function(){return o});r.d(t,"c",function(){return l});r.d(t,"d",function(){return c});r.d(t,"e",function(){return f});r.d(t,"f",function(){return h});r.d(t,"g",function(){return d});var n=r(50);var s=r(108);var i=r(235);var u=r(15);var a=function(t){function e(e){t.call(this);if(e.handleEvent){this.handleEvent=e.handleEvent}this.map_=null;this.setActive(true)}if(t)e.__proto__=t;e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;e.prototype.getActive=function e(){return this.get(i["a"].ACTIVE)};e.prototype.getMap=function e(){return this.map_};e.prototype.handleEvent=function e(t){return true};e.prototype.setActive=function e(t){this.set(i["a"].ACTIVE,t)};e.prototype.setMap=function e(t){this.map_=t};return e}(n["a"]);function o(e,t,r){var n=e.getCenter();if(n){var i=e.constrainCenter([n[0]+t[0],n[1]+t[1]]);if(r){e.animate({duration:r,easing:s["d"],center:i})}else{e.setCenter(i)}}}function l(e,t,r,n){t=e.constrainRotation(t,0);c(e,t,r,n)}function c(e,t,r,n){if(t!==undefined){var i=e.getRotation();var a=e.getCenter();if(i!==undefined&&a&&n>0){e.animate({rotation:t,anchor:r,duration:n,easing:s["b"]})}else{e.rotate(t,r)}}}function f(e,t,r,n,i){t=e.constrainResolution(t,0,i);d(e,t,r,n)}function h(e,t,r,n){var i=e.getResolution();var a=e.constrainResolution(i,t,0);if(a!==undefined){var o=e.getResolutions();a=Object(u["a"])(a,e.getMinResolution()||o[o.length-1],e.getMaxResolution()||o[0])}if(r&&a!==undefined&&a!==i){var s=e.getCenter();var l=e.calculateCenterZoom(a,r);l=e.constrainCenter(l);r=[(a*s[0]-i*l[0])/(a-i),(a*s[1]-i*l[1])/(a-i)]}d(e,a,r,n)}function d(e,t,r,n){if(t){var i=e.getResolution();var a=e.getCenter();if(i!==undefined&&a&&t!==i&&n){e.animate({resolution:t,anchor:r,duration:n,easing:s["b"]})}else{if(r){var o=e.calculateCenterZoom(t,r);e.setCenter(o)}e.setResolution(t)}}}t["a"]=a},function(e,t,r){"use strict";r.d(t,"a",function(){return s});r.d(t,"c",function(){return l});r.d(t,"b",function(){return u});var n=r(68);var i=r(164);var a=r(37);var o={};function s(e,n){var t,r=n;if(typeof e==="string"){e=[e]}if(Object(i["a"])(n)){r=function e(t,r){r[n]=Object(a["a"])(t)}}for(t=0;t<e.length;t++){o[e[t]]=r}}function l(e,i){s(e,function(e,t,r,n){r._w=r._w||{};i(e,r._w,r,n)})}function u(e,t,r){if(t!=null&&Object(n["a"])(o,e)){o[e](t,r._a,r,e)}}},function(e,t,r){"use strict";var n=r(267);var a=r(221);var i=function(i){function e(e){var t=e||{};var r=t.projection!==undefined?t.projection:"EPSG:3857";var n=t.tileGrid!==undefined?t.tileGrid:Object(a["a"])({extent:Object(a["b"])(r),maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});i.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,opaque:t.opaque,projection:r,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==undefined?t.wrapX:true,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible})}if(i)e.__proto__=i;e.prototype=Object.create(i&&i.prototype);e.prototype.constructor=e;return e}(n["a"]);var o=i;var s="&#169; "+'<a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> '+"contributors.";var l=function(a){function e(e){var t=e||{};var r;if(t.attributions!==undefined){r=t.attributions}else{r=[s]}var n=t.crossOrigin!==undefined?t.crossOrigin:"anonymous";var i=t.url!==undefined?t.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";a.call(this,{attributions:r,cacheSize:t.cacheSize,crossOrigin:n,opaque:t.opaque!==undefined?t.opaque:true,maxZoom:t.maxZoom!==undefined?t.maxZoom:19,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,url:i,wrapX:t.wrapX,attributionsCollapsible:false})}if(a)e.__proto__=a;e.prototype=Object.create(a&&a.prototype);e.prototype.constructor=e;return e}(o);var u=t["a"]=l},function(e,t,r){"use strict";r.d(t,"b",function(){return f});var n=r(5);var i=r(191);var a=r(231);var o=r(71);var s=r(9);var l=function(n){function e(e,t,r){n.call(this,e);this.key=t;this.oldValue=r}if(n)e.__proto__=n;e.prototype=Object.create(n&&n.prototype);e.prototype.constructor=e;return e}(o["a"]);var u=function(t){function e(e){t.call(this);Object(n["c"])(this);this.values_={};if(e!==undefined){this.setProperties(e)}}if(t)e.__proto__=t;e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;e.prototype.get=function e(t){var r;if(this.values_.hasOwnProperty(t)){r=this.values_[t]}return r};e.prototype.getKeys=function e(){return Object.keys(this.values_)};e.prototype.getProperties=function e(){return Object(s["a"])({},this.values_)};e.prototype.notify=function e(t,r){var n;n=f(t);this.dispatchEvent(new l(n,t,r));n=i["a"].PROPERTYCHANGE;this.dispatchEvent(new l(n,t,r))};e.prototype.set=function e(t,r,n){if(n){this.values_[t]=r}else{var i=this.values_[t];this.values_[t]=r;if(i!==r){this.notify(t,i)}}};e.prototype.setProperties=function e(t,r){for(var n in t){this.set(n,t[n],r)}};e.prototype.unset=function e(t,r){if(t in this.values_){var n=this.values_[t];delete this.values_[t];if(!r){this.notify(t,n)}}};return e}(a["a"]);var c={};function f(e){return c.hasOwnProperty(e)?c[e]:c[e]="change:"+e}t["a"]=u},function(e,t,r){"use strict";var d=r(1);var n=r(198);var p=r(174);var s=r(42);var v=r(234);var g=r(195);var m=r(151);var _=r(311);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function a(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}function o(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}var l=function(f){o(h,f);function h(e){var t;t=f.call(this,e)||this;t.dimensionsConfig_=e.dimensionsConfig||null;t.dimensionsFiltersConfig_=e.dimensionsFiltersConfig||null;t.filterCondition_=e.filterCondition||p["a"].AND;t.filterRules_=e.filterRules||null;t.filtrable_=e.filtrable||null;t.copyable_=e.copyable===true;t.dimensions_=e.dimensions||null;t.geometryName_=e.geometryName||h.DEFAULT_GEOMETRY_NAME_;t.ogcImageType_=e.ogcImageType||"image/png";t.ogcLayers_=e.ogcLayers||null;t.ogcServerType_=e.ogcServerType||h.ServerType.MAPSERVER;t.ogcType_=e.ogcType||h.Type.WMS;t.snappable_=e.snappable===true;t.snappingToEdges_=e.snappingToEdges!==false;t.snappingToVertice_=e.snappingToVertice!==false;t.snappingTolerance_=e.snappingTolerance!==undefined?e.snappingTolerance:10;t.timeAttributeName_=e.timeAttributeName;t.timeLowerValue_=e.timeLowerValue;t.timeProperty_=e.timeProperty!==undefined?e.timeProperty:null;t.timeUpperValue_=e.timeUpperValue;t.wfsFeatureNS_=e.wfsFeatureNS;t.wfsFeaturePrefix_=e.wfsFeaturePrefix||h.WFSFeaturePrefix.FEATURE;t.wfsOutputFormat_=e.wfsOutputFormat||h.WFSOutputFormat.GML3;t.wfsUrl_=e.wfsUrl;t.wmsInfoFormat_=e.wmsInfoFormat||h.WMSInfoFormat.GML;t.wmsIsSingleTile_=e.wmsIsSingleTile===true;t.wmsUrl_=e.wmsUrl;t.wmtsLayer_=e.wmtsLayer;t.wmtsUrl_=e.wmtsUrl;var r=[];if(t.queryable&&t.ogcLayers){for(var n=t.ogcLayers,i=Array.isArray(n),a=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(a>=n.length)break;o=n[a++]}else{a=n.next();if(a.done)break;o=a.value}var s=o;if(s.queryable){r.push(s.name)}}}var l=null;if(t.supportsWFS&&r.length){var u=undefined;if(t.wfsOutputFormat_===h.WFSOutputFormat.GML3){u=new g["a"]}else if(t.wfsOutputFormat_===h.WFSOutputFormat.GML2){u=new v["a"]}d["a"].assert(u);l=new m["a"]({featureNS:t.wfsFeatureNS,featureType:r,gmlFormat:u})}t.wfsFormat_=l;var c=null;if(t.supportsWMS&&r.length){if(t.wmsInfoFormat===h.WMSInfoFormat.GML){c=new _["a"]({layers:r})}}t.wmsFormat_=c;return t}var e=h.prototype;e.getAttributes=function e(){return f.prototype.attributes};e.setAttributes=function e(t){f.prototype.setAttributes.call(this,t);this.updateGeometryNameFromAttributes_()};e.combinableWithDataSourceForWFS=function e(t){return this.combinableForWFS&&t.combinableForWFS&&this.supportsWFS&&t.supportsWFS&&this.queryable&&t.queryable&&this.wfsUrl===t.wfsUrl&&this.haveTheSameActiveDimensions(t)};e.combinableWithDataSourceForWMS=function e(t){return this.combinableForWMS&&t.combinableForWMS&&this.supportsWMS&&t.supportsWMS&&this.queryable&&t.queryable&&this.wmsUrl===t.wmsUrl&&this.haveTheSameActiveDimensions(t)};e.isAnyOGCLayerInRange=function e(t,r){if(r===void 0){r=false}return!!this.getInRangeOGCLayerNames(t,r).length};e.getInRangeOGCLayerNames=function e(t,r){if(r===void 0){r=false}var n=[];if(this.ogcLayers){for(var i=this.ogcLayers,a=Array.isArray(i),o=0,i=a?i:i[Symbol.iterator]();;){var s;if(a){if(o>=i.length)break;s=i[o++]}else{o=i.next();if(o.done)break;s=o.value}var l=s;var u=l.maxResolution;var c=l.minResolution;var f=c===undefined||t>=c;var h=u===undefined||t<=u;var d=f&&h;if(d&&(!r||l.queryable)){n.push(l.name)}}}return n};e.getOGCLayerNames=function e(t){if(t===void 0){t=false}var r=[];if(this.ogcLayers){for(var n=this.ogcLayers,i=Array.isArray(n),a=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(a>=n.length)break;o=n[a++]}else{a=n.next();if(a.done)break;o=a.value}var s=o;if(!t||s.queryable){r.push(s.name)}}}return r};e.getFiltrableOGCLayerName=function e(){d["a"].assert(this.filtrable);var t=this.getOGCLayerNames();d["a"].assert(t.length===1);return t[0]};e.updateGeometryNameFromAttributes_=function e(){var t=h.DEFAULT_GEOMETRY_NAME_;if(this.attributes){for(var r=this.attributes,n=Array.isArray(r),i=0,r=n?r:r[Symbol.iterator]();;){var a;if(n){if(i>=r.length)break;a=r[i++]}else{i=r.next();if(i.done)break;a=i.value}var o=a;if(o.type===s["a"].GEOMETRY){t=o.name;break}}}this.geometryName_=t};e.haveTheSameActiveDimensions=function e(t){var r=true;var n=this.activeDimensions;var i=t.activeDimensions;for(var a in n){if(n[a]!==i[a]){r=false;break}}if(r){for(var o in i){if(i[o]!==n[o]){r=false;break}}}return r};a(h,[{key:"dimensions",get:function e(){return this.dimensions_}},{key:"dimensionsConfig",get:function e(){return this.dimensionsConfig_},set:function e(t){this.dimensionsConfig_=t}},{key:"dimensionsFiltersConfig",get:function e(){return this.dimensionsFiltersConfig_},set:function e(t){this.dimensionsFiltersConfig_=t}},{key:"filterCondition",get:function e(){return this.filterCondition_},set:function e(t){this.filterCondition_=t}},{key:"filterRules",get:function e(){return this.filterRules_},set:function e(t){this.filterRules_=t}},{key:"timeLowerValue",get:function e(){return this.timeLowerValue_},set:function e(t){this.timeLowerValue_=t}},{key:"timeRangeValue",get:function e(){var t=null;var r=this.timeLowerValue;var n=this.timeUpperValue;if(r!==undefined){t={end:n,start:r}}return t},set:function e(t){if(t){this.timeUpperValue=t.end;this.timeLowerValue=t.start}else{this.timeUpperValue=undefined;this.timeLowerValue=undefined}}},{key:"timeUpperValue",get:function e(){return this.timeUpperValue_},set:function e(t){this.timeUpperValue_=t}},{key:"copyable",get:function e(){return this.copyable_}},{key:"filtrable",get:function e(){return this.filtrable_},set:function e(t){this.filtrable_=t}},{key:"geometryName",get:function e(){return this.geometryName_}},{key:"ogcImageType",get:function e(){return this.ogcImageType_}},{key:"ogcLayers",get:function e(){return this.ogcLayers_}},{key:"ogcServerType",get:function e(){return this.ogcServerType_}},{key:"ogcType",get:function e(){return this.ogcType_}},{key:"snappable",get:function e(){return this.snappable_}},{key:"snappingToEdges",get:function e(){return this.snappingToEdges_}},{key:"snappingToVertice",get:function e(){return this.snappingToVertice_}},{key:"snappingTolerance",get:function e(){return this.snappingTolerance_}},{key:"timeAttributeName",get:function e(){return this.timeAttributeName_}},{key:"timeProperty",get:function e(){return this.timeProperty_}},{key:"wfsFeatureNS",get:function e(){return this.wfsFeatureNS_}},{key:"wfsFeaturePrefix",get:function e(){return this.wfsFeaturePrefix_}},{key:"wfsOutputFormat",get:function e(){return this.wfsOutputFormat_}},{key:"wfsUrl",get:function e(){return this.wfsUrl_}},{key:"wmsInfoFormat",get:function e(){return this.wmsInfoFormat_}},{key:"wmsIsSingleTile",get:function e(){return this.wmsIsSingleTile_}},{key:"wmsUrl",get:function e(){return this.wmsUrl_}},{key:"wmtsLayer",get:function e(){return this.wmtsLayer_}},{key:"wmtsUrl",get:function e(){return this.wmtsUrl_}},{key:"activeDimensions",get:function e(){var t={};var r=this.dimensions_||{};var n=this.dimensionsConfig||{};for(var i in n){if(n[i]===null){if(r[i]!==undefined&&r[i]!==null){t[i]=r[i]}}else{t[i]=n[i]}}return t}},{key:"combinableForWFS",get:function e(){return this.filterRules_===null&&this.timeRangeValue===null}},{key:"combinableForWMS",get:function e(){return this.filterRules_===null&&this.timeRangeValue===null}},{key:"queryable",get:function e(){var t=false;var r=this.supportsWMS||this.supportsWFS;if(r&&this.ogcLayers){for(var n=this.ogcLayers,i=Array.isArray(n),a=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(a>=n.length)break;o=n[a++]}else{a=n.next();if(a.done)break;o=a.value}var s=o;if(s.queryable===true){t=true;break}}}return t}},{key:"supportsWFS",get:function e(){return this.wfsUrl!==undefined}},{key:"supportsAttributes",get:function e(){return this.attributes!==null||this.supportsWFS&&this.ogcLayers!==null&&this.ogcLayers.length===1&&this.ogcLayers[0].queryable===true}},{key:"supportsWMS",get:function e(){return this.wmsUrl!==undefined}},{key:"supportsWMTS",get:function e(){return this.wmtsUrl!==undefined}},{key:"wfsFormat",get:function e(){return this.wfsFormat_}},{key:"wmsFormat",get:function e(){return this.wmsFormat_}}]);return h}(n["a"]);l.guessServiceTypeByUrl=function(e){var t;if(/(wmts)/i.test(e)){t=l.Type.WMTS}else{t=l.Type.WMS}return t};l.DEFAULT_GEOMETRY_NAME_="geom";l.ServerType={GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGISSERVER:"qgisserver"};l.Type={WMS:"WMS",WMTS:"WMTS"};l.WFSFeaturePrefix={FEATURE:"feature"};l.WFSOutputFormat={GML2:"GML2",GML3:"GML3"};l.WMSInfoFormat={GML:"application/vnd.ogc.gml"};t["a"]=l},function(e,t,r){"use strict";var n=r(1);var i=r(2);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function o(e,t,r){if(t)a(e.prototype,t);if(r)a(e,r);return e}var s=function(){function s(e){this.active_=e.active===true;this.expression=e.expression!==undefined?e.expression:null;this.lowerBoundary_=e.lowerBoundary!==undefined?e.lowerBoundary:null;this.operator_=e.operator||null;this.upperBoundary_=e.upperBoundary!==undefined?e.upperBoundary:null;this.isCustom_=e.isCustom!==false;this.name_=e.name;this.operators_=e.operators||null;this.propertyName_=e.propertyName;this.type_=n["a"].assert(e.type);this.listenerKeys=[]}var e=s.prototype;e.getExpression=function e(){return this.expression};e.setExpression=function e(t){this.expression=t};e.reset=function e(){if(this.getExpression()!==null){this.setExpression(null)}if(this.lowerBoundary!==null){this.lowerBoundary=null}if(this.upperBoundary!==null){this.upperBoundary=null}};e.destroy=function e(){this.listenerKeys.forEach(i["e"]);this.listenerKeys.length=0};o(s,[{key:"active",get:function e(){return this.active_},set:function e(t){this.active_=t}},{key:"lowerBoundary",get:function e(){return this.lowerBoundary_},set:function e(t){this.lowerBoundary_=t}},{key:"operator",get:function e(){return this.operator_},set:function e(t){this.operator_=t}},{key:"upperBoundary",get:function e(){return this.upperBoundary_},set:function e(t){this.upperBoundary_=t}},{key:"isCustom",get:function e(){return this.isCustom_}},{key:"name",get:function e(){return this.name_}},{key:"operators",get:function e(){return this.operators_}},{key:"propertyName",get:function e(){return this.propertyName_}},{key:"type",get:function e(){return this.type_}},{key:"value",get:function e(){var t=null;var r=this.getExpression();var n=this.lowerBoundary;var i=this.operator;var a=this.propertyName;var o=this.upperBoundary;if(i){if(i===s.OperatorType.BETWEEN||i===s.TemporalOperatorType.DURING){if(n!==null&&o!==null){t={operator:i,lowerBoundary:n,propertyName:a,upperBoundary:o}}}else{if(r!==null){t={expression:r,operator:i,propertyName:a}}}}return t}}]);return s}();s.OperatorType={BETWEEN:"..",EQUAL_TO:"=",GREATER_THAN:">",GREATER_THAN_OR_EQUAL_TO:">=",LESSER_THAN:"<",LESSER_THAN_OR_EQUAL_TO:"<=",LIKE:"~",NOT_EQUAL_TO:"!="};s.SpatialOperatorType={CONTAINS:"contains",INTERSECTS:"intersects",WITHIN:"within"};s.TemporalOperatorType={BEGINS:"time_start",DURING:"time_during",ENDS:"time_end",EQUALS:"time_equal"};t["a"]=s},function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"c",function(){return i});r.d(t,"b",function(){return a});r.d(t,"f",function(){return o});r.d(t,"e",function(){return s});r.d(t,"d",function(){return l});function n(e,t){var r=document.createElement("canvas");if(e){r.width=e}if(t){r.height=t}return r.getContext("2d")}function i(e){var t=e.offsetWidth;var r=getComputedStyle(e);t+=parseInt(r.marginLeft,10)+parseInt(r.marginRight,10);return t}function a(e){var t=e.offsetHeight;var r=getComputedStyle(e);t+=parseInt(r.marginTop,10)+parseInt(r.marginBottom,10);return t}function o(e,t){var r=t.parentNode;if(r){r.replaceChild(e,t)}}function s(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function l(e){while(e.lastChild){e.removeChild(e.lastChild)}}},function(e,t,r){"use strict";r.d(t,"a",function(){return s});var a=r(46);var n=r(47);var i=r(9);var o=function(r){function e(e){var t=e?e:{};r.call(this,t);if(t.handleDownEvent){this.handleDownEvent=t.handleDownEvent}if(t.handleDragEvent){this.handleDragEvent=t.handleDragEvent}if(t.handleMoveEvent){this.handleMoveEvent=t.handleMoveEvent}if(t.handleUpEvent){this.handleUpEvent=t.handleUpEvent}if(t.stopDown){this.stopDown=t.stopDown}this.handlingDownUpSequence=false;this.trackedPointers_={};this.targetPointers=[]}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;e.prototype.handleDownEvent=function e(t){return false};e.prototype.handleDragEvent=function e(t){};e.prototype.handleEvent=function e(t){if(!t.pointerEvent){return true}var r=false;this.updateTrackedPointers_(t);if(this.handlingDownUpSequence){if(t.type==a["a"].POINTERDRAG){this.handleDragEvent(t)}else if(t.type==a["a"].POINTERUP){var n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else{if(t.type==a["a"].POINTERDOWN){var i=this.handleDownEvent(t);if(i){t.preventDefault()}this.handlingDownUpSequence=i;r=this.stopDown(i)}else if(t.type==a["a"].POINTERMOVE){this.handleMoveEvent(t)}}return!r};e.prototype.handleMoveEvent=function e(t){};e.prototype.handleUpEvent=function e(t){return false};e.prototype.stopDown=function e(t){return t};e.prototype.updateTrackedPointers_=function e(t){if(l(t)){var r=t.pointerEvent;var n=r.pointerId.toString();if(t.type==a["a"].POINTERUP){delete this.trackedPointers_[n]}else if(t.type==a["a"].POINTERDOWN){this.trackedPointers_[n]=r}else if(n in this.trackedPointers_){this.trackedPointers_[n]=r}this.targetPointers=Object(i["c"])(this.trackedPointers_)}};return e}(n["a"]);function s(e){var t=e.length;var r=0;var n=0;for(var i=0;i<t;i++){r+=e[i].clientX;n+=e[i].clientY}return[r/t,n/t]}function l(e){var t=e.type;return t===a["a"].POINTERDOWN||t===a["a"].POINTERDRAG||t===a["a"].POINTERUP}t["b"]=o},function(e,t,r){"use strict";var n=r(345);var i=r(261);var a=r(121);var o=r(105);var s=angular.module("gmfMapComponent",[n["a"].name,i["a"].module.name,a["a"].name,o["a"].module.name]);s.run(["$templateCache",function(e){e.put("gmf/map",r(497))}]);s.directive_=function(){return{scope:{map:"<gmfMapMap",manageResize:"<gmfMapManageResize",resizeTransition:"<gmfMapResizeTransition"},controller:"GmfMapController as ctrl",bindToController:true,templateUrl:"gmf/map"}};s.directive("gmfMap",s.directive_);s.Controller_=function(e,t,r){this.map;this.manageResize;this.resizeTransition;this.ngeoFeatureOverlayMgr_=e;this.gmfPermalink_=t;this.gmfSnapping_=r};s.Controller_.$inject=["ngeoFeatureOverlayMgr","gmfPermalink","gmfSnapping"];s.Controller_.prototype.$onInit=function(){this.ngeoFeatureOverlayMgr_.init(this.map);this.gmfPermalink_.setMap(this.map);this.gmfSnapping_.setMap(this.map)};s.controller("GmfMapController",s.Controller_);t["a"]=s},function(e,t,r){"use strict";var n=r(10);var i=r(355);var a=r(352);var o=r(226);var s=["+proj="+a["a"],"+lat_0=46.95240555555556","+lon_0=7.439583333333333","+k_0=1","+x_0=600000","+y_0=200000","+ellps=bessel","+towgs84=674.374,15.056,405.346,0,0,0,0","+units=m","+no_defs"].join(" ");var l=[42e4,3e4,9e5,35e4];o["a"].defs("EPSG:21781",s);i["a"](o["a"]);n["g"]("EPSG:21781").setExtent(l);var u="EPSG:21781";t["a"]=u},function(e,t,r){"use strict";t["a"]={ANIMATING:0,INTERACTING:1}},function(e,t,r){"use strict";r.d(t,"a",function(){return s});r.d(t,"b",function(){return l});r.d(t,"d",function(){return u});r.d(t,"c",function(){return c});r.d(t,"e",function(){return h});r.d(t,"k",function(){return v});r.d(t,"g",function(){return m});r.d(t,"h",function(){return _});r.d(t,"j",function(){return y});r.d(t,"l",function(){return b});r.d(t,"f",function(){return w});r.d(t,"i",function(){return S});var n=r(46);var i=r(25);var a=r(41);var o=r(67);var s=function e(t){var r=t.originalEvent;return r.altKey&&!(r.metaKey||r.ctrlKey)&&!r.shiftKey};var l=function e(t){var r=t.originalEvent;return r.altKey&&!(r.metaKey||r.ctrlKey)&&r.shiftKey};var u=function e(t){return t.target.getTargetElement()===document.activeElement};var c=a["b"];var f=function e(t){return t.type==n["a"].CLICK};var h=function e(t){var r=t.originalEvent;return r.button==0&&!(o["i"]&&o["d"]&&r.ctrlKey)};var d=a["a"];var p=function e(t){return t.type=="pointermove"};var v=function e(t){return t.type==n["a"].SINGLECLICK};var g=function e(t){return t.type==n["a"].DBLCLICK};var m=function e(t){var r=t.originalEvent;return!r.altKey&&!(r.metaKey||r.ctrlKey)&&!r.shiftKey};var _=function e(t){var r=t.originalEvent;return!r.altKey&&(o["d"]?r.metaKey:r.ctrlKey)&&!r.shiftKey};var y=function e(t){var r=t.originalEvent;return!r.altKey&&!(r.metaKey||r.ctrlKey)&&r.shiftKey};var b=function e(t){var r=t.originalEvent.target;var n=r.tagName;return n!=="INPUT"&&n!=="SELECT"&&n!=="TEXTAREA"};var w=function e(t){var r=t.pointerEvent;Object(i["a"])(r!==undefined,56);return r.pointerType=="mouse"};var S=function e(t){var r=t.pointerEvent;Object(i["a"])(r!==undefined,56);return r.isPrimary&&r.button===0}},function(e,t,r){"use strict";var n={};n.DATALAYERGROUP_NAME="data";n.EXTERNALLAYERGROUP_NAME="external";n.COORDINATES_LAYER_NAME="gmfCoordinatesLayerName";n.PermalinkParam={BG_LAYER:"baselayer_ref",EXTERNAL_DATASOURCES_NAMES:"eds_n",EXTERNAL_DATASOURCES_URLS:"eds_u",FEATURES:"rl_features",MAP_CROSSHAIR:"map_crosshair",MAP_TOOLTIP:"map_tooltip",MAP_X:"map_x",MAP_Y:"map_y",MAP_Z:"map_zoom",TREE_GROUPS:"tree_groups",WFS_LAYER:"wfs_layer",WFS_NGROUPS:"wfs_ngroups",WFS_SHOW_FEATURES:"wfs_showFeatures"};t["a"]=n},function(e,t,r){"use strict";var n=r(27);var i=r.n(n);var a=function(i){var r="transitionend";var n=1e6;var a=1e3;function l(e){return{}.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase()}function e(){return{bindType:r,delegateType:r,handle:function e(t){if(i(t.target).is(this)){return t.handleObj.handler.apply(this,arguments)}return undefined}}}function t(e){var t=this;var r=false;i(this).one(u.TRANSITION_END,function(){r=true});setTimeout(function(){if(!r){u.triggerTransitionEnd(t)}},e);return this}function o(){i.fn.emulateTransitionEnd=t;i.event.special[u.TRANSITION_END]=e()}var u={TRANSITION_END:"bsTransitionEnd",getUID:function e(t){do{t+=~~(Math.random()*n)}while(document.getElementById(t));return t},getSelectorFromElement:function e(t){var r=t.getAttribute("data-target");if(!r||r==="#"){r=t.getAttribute("href")||""}try{return document.querySelector(r)?r:null}catch(e){return null}},getTransitionDurationFromElement:function e(t){if(!t){return 0}var r=i(t).css("transition-duration");var n=parseFloat(r);if(!n){return 0}r=r.split(",")[0];return parseFloat(r)*a},reflow:function e(t){return t.offsetHeight},triggerTransitionEnd:function e(t){i(t).trigger(r)},supportsTransitionEnd:function e(){return Boolean(r)},isElement:function e(t){return(t[0]||t).nodeType},typeCheckConfig:function e(t,r,n){for(var i in n){if(Object.prototype.hasOwnProperty.call(n,i)){var a=n[i];var o=r[i];var s=o&&u.isElement(o)?"element":l(o);if(!new RegExp(a).test(s)){throw new Error(t.toUpperCase()+": "+('Option "'+i+'" provided type "'+s+'" ')+('but expected type "'+a+'".'))}}}}};o();return u}(i.a);t["a"]=a},function(e,t,r){"use strict";var n=function e(t,r){this.getActive=function(){return t[r]};this.setActive=function(e){t[r]=e}};t["a"]=n},function(e,t,r){"use strict";var b=r(1);var n=r(118);var i=r(209);var d=r(13);var s=r(19);var p=r(103);var l=r(240);var a=r(8);var o=r(77);var w=r(3);var c=r(14);var S=r(35);var C=r(83);var u=r(85);var O=r(21);var x=r(31);var T=r(86);var v=r(82);var f=r(314);var h=r(312);var g=r(66);var m=r(30);var _=r(107);var y=r(29);var E=r(11);var M=r(138);var A=function e(t,r){this.$filter_=r;this.decimals_=undefined;if(t.has("ngeoMeasureDecimals")){this.decimals_=t.get("ngeoMeasureDecimals")}this.precision_=undefined;if(t.has("ngeoMeasurePrecision")){this.precision_=t.get("ngeoMeasurePrecision")}this.numberFormat_=r("number");this.unitPrefixFormat_=r("ngeoUnitPrefix");this.ngeoNumberCoordinates_=r("ngeoNumberCoordinates");this.pointFilterFn_=null;this.pointFilterArgs_=[];if(t.has("ngeoPointfilter")){var n=t.get("ngeoPointfilter").split(":");var i=n.shift();var a=this.$filter_(i);b["a"].assertFunction(a);this.pointFilterFn_=a;this.pointFilterArgs_=n}else{this.pointFilterFn_=null}this.projection_;this.download_=t.get("ngeoDownload")};A.$inject=["$injector","$filter"];A.$inject=["$injector","$filter"];A.prototype.setProjection=function(e){this.projection_=e};A.prototype.setStyle=function(e,t){var r=this.getStyle(e);if(t){if(this.supportsVertex_(e)){r.push(this.getVertexStyle())}r.unshift(this.getHaloStyle_(e))}e.setStyle(r)};A.prototype.getStyle=function(e){var t=this.getType(e);var r;switch(t){case s["a"].LINE_STRING:r=this.getLineStringStyle_(e);break;case s["a"].POINT:r=this.getPointStyle_(e);break;case s["a"].CIRCLE:case s["a"].POLYGON:case s["a"].RECTANGLE:r=this.getPolygonStyle_(e);break;case s["a"].TEXT:r=this.getTextStyle_(e);break;default:break}b["a"].assert(r,"Style should be thruthy");var n;if(r.constructor===Array){n=r}else{n=[r]}return n};A.prototype.getLineStringStyle_=function(e){var t=this.getStrokeProperty(e);var r=this.getShowLabelProperty(e);var n=this.getShowMeasureProperty(e);var i=this.getRGBAColorProperty(e);var a=[new E["c"]({stroke:new y["a"]({color:i,width:t})})];var o=[];if(n){o.push(this.getMeasure(e))}if(r){o.push(this.getNameProperty(e))}if(r||n){var s=o.join("\n");a.push(new E["c"]({text:this.createTextStyle_({text:s})}))}return a};A.prototype.getPointStyle_=function(e){var t=this.getSizeProperty(e);var r=this.getRGBAColorProperty(e);var n=this.getShowLabelProperty(e);var i=this.getShowMeasureProperty(e);var a=[new E["c"]({image:new g["a"]({radius:t,fill:new m["a"]({color:r})})})];var o=[];if(i){o.push(this.getMeasure(e))}if(n){o.push(this.getNameProperty(e))}if(n||i){var s=o.join("\n");var l=10;var u=1.3;a.push(new E["c"]({text:this.createTextStyle_({text:s,size:l,offsetY:-(t+l/2*o.length*u+4)})}))}return a};A.prototype.optNumber=function(e,t){var r=e.get(t);if(r!==undefined){if(typeof r=="string"){return+r}else{return b["a"].assertNumber(r)}}else{return undefined}};A.prototype.getNumber=function(e,t){var r=e.get(t);if(typeof r=="string"){return+r}else{return b["a"].assertNumber(r)}};A.prototype.getPolygonStyle_=function(e){var t=this.getStrokeProperty(e);var r=this.getOpacityProperty(e);var n=this.getRGBAColorProperty(e);var i=this.getShowLabelProperty(e);var a=this.getShowMeasureProperty(e);var o=n.slice();o[3]=r;var s=this.optNumber(e,d["a"].AZIMUT);var l=[new E["c"]({fill:new m["a"]({color:o}),stroke:new y["a"]({color:n,width:t})})];if(a||i){if(a&&s!==undefined){var u=this.getRadiusLine(e,s);var c=p["a"].getFormattedLength(u,this.projection_,this.precision_,this.unitPrefixFormat_);l.push(new E["c"]({geometry:u,fill:new m["a"]({color:o}),stroke:new y["a"]({color:n,width:t}),text:this.createTextStyle_({text:c,angle:(s%180+180)%180-90})}));l.push(new E["c"]({geometry:new O["a"](u.getLastCoordinate()),text:this.createTextStyle_({text:this.numberFormat_(s,this.decimals_)+"°",size:10,offsetX:Math.cos((s-90)*Math.PI/180)*20,offsetY:Math.sin((s-90)*Math.PI/180)*20})}));if(i){l.push(new E["c"]({text:this.createTextStyle_({text:this.getNameProperty(e),offsetY:-8,exceedLength:true})}))}}else{var f=[];if(a){f.push(this.getMeasure(e))}if(i){f.push(this.getNameProperty(e))}if(i||a){var h=f.join("\n");l.push(new E["c"]({text:this.createTextStyle_({text:h,exceedLength:true})}))}}}return l};A.prototype.getTextStyle_=function(e){return new E["c"]({text:this.createTextStyle_({text:this.getNameProperty(e),size:this.getSizeProperty(e),angle:this.getAngleProperty(e),color:this.getRGBAColorProperty(e),width:this.getStrokeProperty(e)})})};A.prototype.createEditingStyles=function(e){var t=[255,255,255,1];var r=[0,153,255,1];var n=3;var i=[];var a=e.getGeometry();console.assert(a);var o=a.getType();if(o==="Point"){i.push(new E["c"]({image:new g["a"]({radius:n*2,fill:new m["a"]({color:r}),stroke:new y["a"]({color:t,width:n/2})}),zIndex:Infinity}))}else{if(o==="LineString"){i.push(new E["c"]({stroke:new y["a"]({color:t,width:n+2})}));i.push(new E["c"]({stroke:new y["a"]({color:r,width:n})}))}else{i.push(new E["c"]({stroke:new y["a"]({color:r,width:n/2}),fill:new m["a"]({color:[255,255,255,.5]})}))}i.push(this.getVertexStyle(true))}return i};A.prototype.getVertexInfoAtCoordinate=function(e,t,r){var n=null;if(this.supportsVertexRemoval_(e)){var i=r*A.VertexStyleRegularShapeRadius;var a=null;var o=null;var s=null;var l;var u=e.getGeometry();if(u instanceof S["a"]){a=u.getCoordinates();l=2}else if(u instanceof x["a"]){o=u.getCoordinates();l=4}else if(u instanceof C["a"]){o=u.getCoordinates();l=2}else if(u instanceof T["a"]){s=u.getCoordinates();l=4}if(a){var c=this.getCoordinateIndexThatHitsAt_(a,t,l,i);if(c!==-1){n=[c]}}else if(o){var f=o.length;for(var h=0;h<f;h++){var d=this.getCoordinateIndexThatHitsAt_(o[h],t,l,i);if(d!==-1){n=[h,d];break}}}else if(s){var p=s.length;for(var v=0;v<p;v++){var g=s[v];var m=g.length;for(var _=0;_<m;_++){var y=this.getCoordinateIndexThatHitsAt_(g[_],t,l,i);if(y!==-1){n=[v,_,y];break}}if(n){break}}}}return n};A.prototype.getCoordinateIndexThatHitsAt_=function(e,t,r,n){var i=-1;var a=e.length;if(a>r){for(var o=0;o<a;o++){var s=w["f"](w["c"](w["m"](e[o]),n),t);if(s){i=o;break}}}return i};A.prototype.getVertexStyle=function(e){var t=e!==undefined?e:true;var r={image:new _["a"]({radius:A.VertexStyleRegularShapeRadius,points:4,angle:Math.PI/4,fill:new m["a"]({color:[255,255,255,.5]}),stroke:new y["a"]({color:[0,0,0,1]})})};if(t){r.geometry=function(e){var t=e.getGeometry();if(t.getType()=="Point"){return}var r;var n=[];var i=[];var a,o;if(t instanceof S["a"]){i=t.getCoordinates()}else if(t instanceof C["a"]){n=t.getCoordinates()}else if(t instanceof x["a"]){i=t.getCoordinates()[0]}else if(t instanceof T["a"]){r=t.getCoordinates()}if(r){for(a=0,o=r.length;a<o;a++){n=n.concat(r[a])}}for(a=0,o=n.length;a<o;a++){i=i.concat(n[a])}if(i.length){return new u["a"](i)}else{return t}}}return new E["c"](r)};A.prototype.removeVertex=function(e,t){var r=false;var n=e.getGeometry();b["a"].assertInstanceof(n,v["a"]);var i=n.getCoordinates();if(n instanceof S["a"]){var a=t[0];if(i.length>2){i.splice(a,1);r=true}}else if(n instanceof x["a"]){var o=t[0];var s=t[1];var l=i[o];if(l.length>4){l.splice(s,1);r=true;if(s===0){l.pop();l.push(l[0])}}}else if(n instanceof C["a"]){var u=t[0];var c=t[1];if(i[u].length>2){i[u].splice(c,1);r=true}}else if(n instanceof T["a"]){var f=t[0];var h=t[1];var d=t[2];var p=i[f][h];if(p.length>4){p.splice(d,1);r=true;if(d===0){p.pop();p.push(p[0])}}}if(r){n.setCoordinates(i)}};A.prototype.supportsVertex_=function(e){var t=[s["a"].LINE_STRING,s["a"].MULTI_LINE_STRING,s["a"].MULTI_POLYGON,s["a"].POLYGON,s["a"].RECTANGLE];var r=this.getType(e);return a["f"](t,r)};A.prototype.supportsVertexRemoval_=function(e){var t=[s["a"].LINE_STRING,s["a"].MULTI_LINE_STRING,s["a"].MULTI_POLYGON,s["a"].POLYGON];var r=this.getType(e);return a["f"](t,r)};A.prototype.getHaloStyle_=function(e){var t=this.getType(e);var r;var n=3;switch(t){case s["a"].POINT:var i=this.getSizeProperty(e);r=new E["c"]({image:new g["a"]({radius:i+n,fill:new m["a"]({color:[255,255,255,1]})})});break;case s["a"].LINE_STRING:case s["a"].CIRCLE:case s["a"].POLYGON:case s["a"].RECTANGLE:var a=this.getStrokeProperty(e);r=new E["c"]({stroke:new y["a"]({color:[255,255,255,1],width:a+n*2})});break;case s["a"].TEXT:r=new E["c"]({text:this.createTextStyle_({text:this.getNameProperty(e),size:this.getSizeProperty(e),angle:this.getAngleProperty(e),width:n*3})});break;default:break}b["a"].assert(r,"Style should be thruthy");return r};A.getFilteredFeatureValues=function(e){var t=e.getProperties();delete t["boundedBy"];delete t[e.getGeometryName()];delete t["ngeo_feature_type_"];return t};A.prototype.getAngleProperty=function(e){var t=+e.get(d["a"].ANGLE);b["a"].assertNumber(t);return t};A.prototype.getColorProperty=function(e){var t=b["a"].assertString(e.get(d["a"].COLOR));b["a"].assertString(t);return t};A.prototype.getRGBAColorProperty=function(e){return o["c"](this.getColorProperty(e))};A.prototype.getNameProperty=function(e){var t=b["a"].assertString(e.get(d["a"].NAME));b["a"].assertString(t);return t};A.prototype.getOpacityProperty=function(e){return this.getNumber(e,d["a"].OPACITY)};A.prototype.getShowMeasureProperty=function(e){var t=e.get(d["a"].SHOW_MEASURE);if(t===undefined){t=false}else if(typeof t==="string"){t=t==="true"?true:false}return b["a"].assertBoolean(t)};A.prototype.getShowLabelProperty=function(e){var t=e.get(d["a"].SHOW_LABEL);if(t===undefined){t=false}else if(typeof t==="string"){t=t==="true"?true:false}return b["a"].assertBoolean(t)};A.prototype.getSizeProperty=function(e){return this.getNumber(e,d["a"].SIZE)};A.prototype.getStrokeProperty=function(e){return this.getNumber(e,d["a"].STROKE)};A.prototype.export=function(e,t){switch(t){case A.FormatType.GPX:this.exportGPX(e);break;case A.FormatType.KML:this.exportKML(e);break;default:break}};A.prototype.exportGPX=function(e){var t=new f["a"];var r="application/gpx+xml";var n="export.gpx";this.export_(e,t,n,r)};A.prototype.exportKML=function(e){var t=new h["a"];var r="application/vnd.google-earth.kml+xml";var n="export.kml";this.export_(e,t,n,r)};A.prototype.export_=function(e,t,r,n){var i=this;var a=n!==undefined?n:"text/plain";var o=[];var s;e.forEach(function(e){s=new c["a"](e.getProperties());i.setStyle(s,false);o.push(s)});var l=this.projection_?{dataProjection:"EPSG:4326",featureProjection:this.projection_}:{};var u=t.writeFeatures(o,l);this.download_(u,r,a+";charset=utf-8")};A.prototype.createTextStyle_=function(e){if(e.angle){var t=e.angle!==undefined?e.angle:0;var r=t*Math.PI/180;e.rotation=r;delete e.angle}e.font=["normal",(e.size||10)+"pt","Arial"].join(" ");if(e.color){e.fill=new m["a"]({color:e.color||[0,0,0,1]});delete e.color}e.stroke=new y["a"]({color:[255,255,255,1],width:e.width||3});delete e.width;return new M["a"](e)};A.prototype.getMeasure=function(e){var t=e.getGeometry();b["a"].assert(t,"Geometry should be truthy");var r="";if(t instanceof x["a"]){if(this.getType(e)===s["a"].CIRCLE){var n=this.optNumber(e,d["a"].AZIMUT);b["a"].assertNumber(n);var i=this.getRadiusLine(e,n);r=l["a"].getFormattedAzimutRadius(i,this.projection_,this.decimals_,this.precision_,this.unitPrefixFormat_,this.numberFormat_)}else{r=p["a"].getFormattedArea(t,this.projection_,this.precision_,this.unitPrefixFormat_)}}else if(t instanceof S["a"]){r=p["a"].getFormattedLength(t,this.projection_,this.precision_,this.unitPrefixFormat_)}else if(t instanceof O["a"]){if(this.pointFilterFn_===null){r=p["a"].getFormattedPoint(t,this.decimals_,this.ngeoNumberCoordinates_)}else{var a=t.getCoordinates();var o=this.pointFilterArgs_.slice(0);o.unshift(a);r=this.pointFilterFn_.apply(this,o)}}return r};A.prototype.getType=function(e){var t=e.getGeometry();b["a"].assert(t,"Geometry should be thruthy");var r;if(t instanceof O["a"]){if(e.get(d["a"].IS_TEXT)){r=s["a"].TEXT}else{r=s["a"].POINT}}else if(t instanceof u["a"]){r=s["a"].MULTI_POINT}else if(t instanceof x["a"]){if(e.get(d["a"].IS_CIRCLE)){r=s["a"].CIRCLE}else if(e.get(d["a"].IS_RECTANGLE)){r=s["a"].RECTANGLE}else{r=s["a"].POLYGON}}else if(t instanceof T["a"]){r=s["a"].MULTI_POLYGON}else if(t instanceof S["a"]){r=s["a"].LINE_STRING}else if(t instanceof C["a"]){r=s["a"].MULTI_LINE_STRING}b["a"].assert(r,"Type should be thruthy");return r};A.prototype.fitMapToFeature=function(e,t,r){var n=r!==undefined?r:250;var i=t.getSize();b["a"].assertArray(i);var a=t.getView();var o=a.calculateExtent(i);var s=e.getGeometry();var l=s.intersectsExtent(o);var u=a.getCenter();b["a"].assertArray(u);var c=s.getExtent();if(l){if(!(s instanceof O["a"])){var f=a.getResolutionForExtent(c);var h=Math.floor(a.getZoomForResolution(f));var d=a.getZoom();if(h<d){a.animate({center:u,duration:n},{center:u,duration:n,zoom:h})}}}else{var p=w["A"](c);var v=w["E"](c);var g=w["A"](o);var m=w["E"](o);var _=g>=p&&m>=v;if(_){var y;if(s instanceof S["a"]){y=s.getCoordinateAt(.5)}else if(s instanceof x["a"]){y=s.getInteriorPoint().getCoordinates()}else if(s instanceof O["a"]){y=s.getCoordinates()}else{y=w["x"](s.getExtent())}a.animate({center:u,duration:n},{center:y,duration:n})}else{a.fit(c,{duration:n,size:i})}}};A.prototype.getRadiusLine=function(e,t){var r=e.getGeometry();var n=r.getExtent();var i=(n[3]-n[1])/2;var a=w["x"](r.getExtent());var o=Math.cos((t-90)*Math.PI/180)*i;var s=-Math.sin((t-90)*Math.PI/180)*i;var l=[o+a[0],s+a[1]];return new S["a"]([a,l])};A.prototype.getNonSpatialProperties=function(e){var t=e.getGeometryName();var r={};var n=e.getProperties();for(var i in n){if(i!==t){r[i]=n[i]}}return r};A.prototype.clearNonSpatialProperties=function(e){var t=e.getGeometryName();var r=e.getProperties();for(var n in r){if(n!==t){e.set(n,undefined)}}};A.FormatType={GPX:"GPX",KML:"KML"};A.VertexStyleRegularShapeRadius=6;A.module=angular.module("ngeoFeatureHelper",[i["a"].name,n["a"].name]);A.module.service("ngeoFeatureHelper",A);t["a"]=A},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var i=r(266);function n(e,t,r,n){return Object(i["a"])(e,t,r,n,false)}},function(e,t,r){"use strict";var i=r(134);var n=r(88);var a=r(308);var o=r(9);var s=r(11);var l={RENDER_ORDER:"renderOrder"};var u=function(n){function e(e){var t=e?e:{};var r=Object(o["a"])({},t);delete r.style;delete r.renderBuffer;delete r.updateWhileAnimating;delete r.updateWhileInteracting;n.call(this,r);this.declutter_=t.declutter!==undefined?t.declutter:false;this.renderBuffer_=t.renderBuffer!==undefined?t.renderBuffer:100;this.style_=null;this.styleFunction_=undefined;this.setStyle(t.style);this.updateWhileAnimating_=t.updateWhileAnimating!==undefined?t.updateWhileAnimating:false;this.updateWhileInteracting_=t.updateWhileInteracting!==undefined?t.updateWhileInteracting:false;this.renderMode_=t.renderMode||a["a"].VECTOR;this.type=i["a"].VECTOR}if(n)e.__proto__=n;e.prototype=Object.create(n&&n.prototype);e.prototype.constructor=e;e.prototype.getDeclutter=function e(){return this.declutter_};e.prototype.setDeclutter=function e(t){this.declutter_=t};e.prototype.getRenderBuffer=function e(){return this.renderBuffer_};e.prototype.getRenderOrder=function e(){return this.get(l.RENDER_ORDER)};e.prototype.getStyle=function e(){return this.style_};e.prototype.getStyleFunction=function e(){return this.styleFunction_};e.prototype.getUpdateWhileAnimating=function e(){return this.updateWhileAnimating_};e.prototype.getUpdateWhileInteracting=function e(){return this.updateWhileInteracting_};e.prototype.setRenderOrder=function e(t){this.set(l.RENDER_ORDER,t)};e.prototype.setStyle=function e(t){this.style_=t!==undefined?t:s["a"];this.styleFunction_=t===null?undefined:Object(s["d"])(this.style_);this.changed()};e.prototype.getRenderMode=function e(){return this.renderMode_};return e}(n["a"]);u.prototype.getSource;t["a"]=u},function(e,t,r){"use strict";var m=r(5);var o=r(23);var n=r(87);var i=r(191);var s=r(8);var l=r(25);var u=r(2);var a=r(71);var c=r(12);var f=r(3);var h=r(41);var d=r(166);function p(r,a,o,s){return function(e,t,n){var i=new XMLHttpRequest;i.open("GET",typeof r==="function"?r(e,t,n):r,true);if(a.getType()==d["a"].ARRAY_BUFFER){i.responseType="arraybuffer"}i.onload=function(e){if(!i.status||i.status>=200&&i.status<300){var t=a.getType();var r;if(t==d["a"].JSON||t==d["a"].TEXT){r=i.responseText}else if(t==d["a"].XML){r=i.responseXML;if(!r){r=(new DOMParser).parseFromString(i.responseText,"application/xml")}}else if(t==d["a"].ARRAY_BUFFER){r=i.response}if(r){o.call(this,a.readFeatures(r,{featureProjection:n}),a.readProjection(r),a.getLastExtent())}else{s.call(this)}}else{s.call(this)}}.bind(this);i.onerror=function(){s.call(this)}.bind(this);i.send()}}function v(e,t){return p(e,t,function(e,t){var r=this;if(typeof r.addFeatures==="function"){r.addFeatures(e)}},h["c"])}function g(e,t){return[[-Infinity,-Infinity,Infinity,Infinity]]}function _(e,t){return[e]}function y(o){return function(e,t){var r=o.getZForResolution(t);var n=o.getTileRangeForExtentAndZ(e,r);var i=[];var a=[r,0,0];for(a[1]=n.minX;a[1]<=n.maxX;++a[1]){for(a[2]=n.minY;a[2]<=n.maxY;++a[2]){i.push(o.getTileCoordExtent(a))}}return i}}var b=r(9);var w=r(251);var S=r(155);var C=r(147);var O=r(199);var x=function(r){function e(e,t){r.call(this,e);this.feature=t}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;return e}(a["a"]);var T=function(a){function e(e){var t=e||{};a.call(this,{attributions:t.attributions,projection:undefined,state:S["a"].READY,wrapX:t.wrapX!==undefined?t.wrapX:true});this.loader_=h["c"];this.format_=t.format;this.overlaps_=t.overlaps==undefined?true:t.overlaps;this.url_=t.url;if(t.loader!==undefined){this.loader_=t.loader}else if(this.url_!==undefined){Object(l["a"])(this.format_,7);this.loader_=v(this.url_,this.format_)}this.strategy_=t.strategy!==undefined?t.strategy:g;var r=t.useSpatialIndex!==undefined?t.useSpatialIndex:true;this.featuresRtree_=r?new O["a"]:null;this.loadedExtentsRtree_=new O["a"];this.nullGeometryFeatures_={};this.idIndex_={};this.undefIdIndex_={};this.featureChangeKeys_={};this.featuresCollection_=null;var n,i;if(Array.isArray(t.features)){i=t.features}else if(t.features){n=t.features;i=n.getArray()}if(!r&&n===undefined){n=new o["a"](i)}if(i!==undefined){this.addFeaturesInternal(i)}if(n!==undefined){this.bindFeaturesCollection_(n)}}if(a)e.__proto__=a;e.prototype=Object.create(a&&a.prototype);e.prototype.constructor=e;e.prototype.addFeature=function e(t){this.addFeatureInternal(t);this.changed()};e.prototype.addFeatureInternal=function e(t){var r=Object(m["c"])(t);if(!this.addToIndex_(r,t)){return}this.setupChangeEvents_(r,t);var n=t.getGeometry();if(n){var i=n.getExtent();if(this.featuresRtree_){this.featuresRtree_.insert(i,t)}}else{this.nullGeometryFeatures_[r]=t}this.dispatchEvent(new x(C["a"].ADDFEATURE,t))};e.prototype.setupChangeEvents_=function e(t,r){this.featureChangeKeys_[t]=[Object(u["a"])(r,c["a"].CHANGE,this.handleFeatureChange_,this),Object(u["a"])(r,i["a"].PROPERTYCHANGE,this.handleFeatureChange_,this)]};e.prototype.addToIndex_=function e(t,r){var n=true;var i=r.getId();if(i!==undefined){if(!(i.toString()in this.idIndex_)){this.idIndex_[i.toString()]=r}else{n=false}}else{Object(l["a"])(!(t in this.undefIdIndex_),30);this.undefIdIndex_[t]=r}return n};e.prototype.addFeatures=function e(t){this.addFeaturesInternal(t);this.changed()};e.prototype.addFeaturesInternal=function e(t){var r=[];var n=[];var i=[];for(var a=0,o=t.length;a<o;a++){var s=t[a];var l=Object(m["c"])(s);if(this.addToIndex_(l,s)){n.push(s)}}for(var u=0,c=n.length;u<c;u++){var f=n[u];var h=Object(m["c"])(f);this.setupChangeEvents_(h,f);var d=f.getGeometry();if(d){var p=d.getExtent();r.push(p);i.push(f)}else{this.nullGeometryFeatures_[h]=f}}if(this.featuresRtree_){this.featuresRtree_.load(r,i)}for(var v=0,g=n.length;v<g;v++){this.dispatchEvent(new x(C["a"].ADDFEATURE,n[v]))}};e.prototype.bindFeaturesCollection_=function e(t){var r=false;Object(u["a"])(this,C["a"].ADDFEATURE,function(e){if(!r){r=true;t.push(e.feature);r=false}});Object(u["a"])(this,C["a"].REMOVEFEATURE,function(e){if(!r){r=true;t.remove(e.feature);r=false}});Object(u["a"])(t,n["a"].ADD,function(e){if(!r){r=true;this.addFeature(e.element);r=false}},this);Object(u["a"])(t,n["a"].REMOVE,function(e){if(!r){r=true;this.removeFeature(e.element);r=false}},this);this.featuresCollection_=t};e.prototype.clear=function e(t){if(t){for(var r in this.featureChangeKeys_){var n=this.featureChangeKeys_[r];n.forEach(u["e"])}if(!this.featuresCollection_){this.featureChangeKeys_={};this.idIndex_={};this.undefIdIndex_={}}}else{if(this.featuresRtree_){this.featuresRtree_.forEach(this.removeFeatureInternal,this);for(var i in this.nullGeometryFeatures_){this.removeFeatureInternal(this.nullGeometryFeatures_[i])}}}if(this.featuresCollection_){this.featuresCollection_.clear()}if(this.featuresRtree_){this.featuresRtree_.clear()}this.loadedExtentsRtree_.clear();this.nullGeometryFeatures_={};var a=new x(C["a"].CLEAR);this.dispatchEvent(a);this.changed()};e.prototype.forEachFeature=function e(t){if(this.featuresRtree_){return this.featuresRtree_.forEach(t)}else if(this.featuresCollection_){this.featuresCollection_.forEach(t)}};e.prototype.forEachFeatureAtCoordinateDirect=function e(r,n){var t=[r[0],r[1],r[0],r[1]];return this.forEachFeatureInExtent(t,function(e){var t=e.getGeometry();if(t.intersectsCoordinate(r)){return n(e)}else{return undefined}})};e.prototype.forEachFeatureInExtent=function e(t,r){if(this.featuresRtree_){return this.featuresRtree_.forEachInExtent(t,r)}else if(this.featuresCollection_){this.featuresCollection_.forEach(r)}};e.prototype.forEachFeatureIntersectingExtent=function e(n,i){return this.forEachFeatureInExtent(n,function(e){var t=e.getGeometry();if(t.intersectsExtent(n)){var r=i(e);if(r){return r}}})};e.prototype.getFeaturesCollection=function e(){return this.featuresCollection_};e.prototype.getFeatures=function e(){var t;if(this.featuresCollection_){t=this.featuresCollection_.getArray()}else if(this.featuresRtree_){t=this.featuresRtree_.getAll();if(!Object(b["d"])(this.nullGeometryFeatures_)){Object(s["c"])(t,Object(b["c"])(this.nullGeometryFeatures_))}}return t};e.prototype.getFeaturesAtCoordinate=function e(t){var r=[];this.forEachFeatureAtCoordinateDirect(t,function(e){r.push(e)});return r};e.prototype.getFeaturesInExtent=function e(t){return this.featuresRtree_.getInExtent(t)};e.prototype.getClosestFeatureToCoordinate=function e(t,r){var i=t[0];var a=t[1];var o=null;var s=[NaN,NaN];var l=Infinity;var u=[-Infinity,-Infinity,Infinity,Infinity];var c=r?r:h["b"];this.featuresRtree_.forEachInExtent(u,function(e){if(c(e)){var t=e.getGeometry();var r=l;l=t.closestPointXY(i,a,s,l);if(l<r){o=e;var n=Math.sqrt(l);u[0]=i-n;u[1]=a-n;u[2]=i+n;u[3]=a+n}}});return o};e.prototype.getExtent=function e(t){return this.featuresRtree_.getExtent(t)};e.prototype.getFeatureById=function e(t){var r=this.idIndex_[t.toString()];return r!==undefined?r:null};e.prototype.getFormat=function e(){return this.format_};e.prototype.getOverlaps=function e(){return this.overlaps_};e.prototype.getUrl=function e(){return this.url_};e.prototype.handleFeatureChange_=function e(t){var r=t.target;var n=Object(m["c"])(r);var i=r.getGeometry();if(!i){if(!(n in this.nullGeometryFeatures_)){if(this.featuresRtree_){this.featuresRtree_.remove(r)}this.nullGeometryFeatures_[n]=r}}else{var a=i.getExtent();if(n in this.nullGeometryFeatures_){delete this.nullGeometryFeatures_[n];if(this.featuresRtree_){this.featuresRtree_.insert(a,r)}}else{if(this.featuresRtree_){this.featuresRtree_.update(a,r)}}}var o=r.getId();if(o!==undefined){var s=o.toString();if(n in this.undefIdIndex_){delete this.undefIdIndex_[n];this.idIndex_[s]=r}else{if(this.idIndex_[s]!==r){this.removeFromIdIndex_(r);this.idIndex_[s]=r}}}else{if(!(n in this.undefIdIndex_)){this.removeFromIdIndex_(r);this.undefIdIndex_[n]=r}}this.changed();this.dispatchEvent(new x(C["a"].CHANGEFEATURE,r))};e.prototype.hasFeature=function e(t){var r=t.getId();if(r!==undefined){return r in this.idIndex_}else{return Object(m["c"])(t)in this.undefIdIndex_}};e.prototype.isEmpty=function e(){return this.featuresRtree_.isEmpty()&&Object(b["d"])(this.nullGeometryFeatures_)};e.prototype.loadFeatures=function e(t,a,o){var s=this;var l=this.loadedExtentsRtree_;var u=this.strategy_(t,a);this.loading=false;var r=function e(t,r){var n=u[t];var i=l.forEachInExtent(n,function(e){return Object(f["g"])(e.extent,n)});if(!i){s.loader_.call(s,n,a,o);l.insert(n,{extent:n.slice()});s.loading=s.loader_!==h["c"]}};for(var n=0,i=u.length;n<i;++n){r(n,i)}};e.prototype.removeLoadedExtent=function e(t){var r=this.loadedExtentsRtree_;var n;r.forEachInExtent(t,function(e){if(Object(f["p"])(e.extent,t)){n=e;return true}});if(n){r.remove(n)}};e.prototype.removeFeature=function e(t){var r=Object(m["c"])(t);if(r in this.nullGeometryFeatures_){delete this.nullGeometryFeatures_[r]}else{if(this.featuresRtree_){this.featuresRtree_.remove(t)}}this.removeFeatureInternal(t);this.changed()};e.prototype.removeFeatureInternal=function e(t){var r=Object(m["c"])(t);this.featureChangeKeys_[r].forEach(u["e"]);delete this.featureChangeKeys_[r];var n=t.getId();if(n!==undefined){delete this.idIndex_[n.toString()]}else{delete this.undefIdIndex_[r]}this.dispatchEvent(new x(C["a"].REMOVEFEATURE,t))};e.prototype.removeFromIdIndex_=function e(t){var r=false;for(var n in this.idIndex_){if(this.idIndex_[n]===t){delete this.idIndex_[n];r=true;break}}return r};e.prototype.setLoader=function e(t){this.loader_=t};return e}(w["a"]);var E=t["a"]=T},function(e,t,r){"use strict";var n=r(107);var i=function(r){function n(e){var t=e||{};r.call(this,{points:Infinity,fill:t.fill,radius:t.radius,stroke:t.stroke,atlasManager:t.atlasManager})}if(r)n.__proto__=r;n.prototype=Object.create(r&&r.prototype);n.prototype.constructor=n;n.prototype.clone=function e(){var t=new n({fill:this.getFill()?this.getFill().clone():undefined,stroke:this.getStroke()?this.getStroke().clone():undefined,radius:this.getRadius(),atlasManager:this.atlasManager_});t.setOpacity(this.getOpacity());t.setScale(this.getScale());return t};n.prototype.setRadius=function e(t){this.radius_=t;this.render_(this.atlasManager_)};return n}(n["a"]);t["a"]=i},function(e,t,r){"use strict";r.d(t,"c",function(){return i});r.d(t,"g",function(){return a});r.d(t,"i",function(){return o});r.d(t,"d",function(){return s});r.d(t,"b",function(){return l});r.d(t,"a",function(){return u});r.d(t,"h",function(){return f});r.d(t,"f",function(){return h});r.d(t,"e",function(){return d});var n=typeof navigator!=="undefined"?navigator.userAgent.toLowerCase():"";var i=n.indexOf("firefox")!==-1;var a=n.indexOf("safari")!==-1&&n.indexOf("chrom")==-1;var o=n.indexOf("webkit")!==-1&&n.indexOf("edge")==-1;var s=n.indexOf("macintosh")!==-1;var l=window.devicePixelRatio||1;var u=function(){var e=false;try{e=!!document.createElement("canvas").getContext("2d").setLineDash}catch(e){}return e}();var c="geolocation"in navigator;var f="ontouchstart"in window;var h="PointerEvent"in window;var d=!!navigator.msPointerEnabled},function(e,t,r){"use strict";r.d(t,"a",function(){return n});function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},function(e,t,r){"use strict";r.d(t,"a",function(){return m});var l=r(8);var p=r(14);var a=r(81);var n=r(180);var u=r(33);var o=r(35);var i=r(283);var s=r(83);var c=r(85);var f=r(86);var h=r(21);var d=r(31);var v=r(9);var g=r(10);var T=r(0);var m="http://www.opengis.net/gml";var _=/^[\s\xa0]*$/;var y=function(r){function e(e){r.call(this);var t=e?e:{};this.featureType=t.featureType;this.featureNS=t.featureNS;this.srsName=t.srsName;this.schemaLocation="";this.FEATURE_COLLECTION_PARSERS={};this.FEATURE_COLLECTION_PARSERS[this.namespace]={featureMember:Object(T["i"])(this.readFeaturesInternal),featureMembers:Object(T["n"])(this.readFeaturesInternal)}}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;e.prototype.readFeaturesInternal=function e(t,r){var n=t.localName;var i=null;if(n=="FeatureCollection"){i=Object(T["t"])([],this.FEATURE_COLLECTION_PARSERS,t,r,this)}else if(n=="featureMembers"||n=="featureMember"){var a=r[0];var o=a["featureType"];var s=a["featureNS"];var l="p";var u="p0";if(!o&&t.childNodes){o=[],s={};for(var c=0,f=t.childNodes.length;c<f;++c){var h=t.childNodes[c];if(h.nodeType===1){var d=h.nodeName.split(":").pop();if(o.indexOf(d)===-1){var p="";var v=0;var g=h.namespaceURI;for(var m in s){if(s[m]===g){p=m;break}++v}if(!p){p=l+v;s[p]=g}o.push(p+":"+d)}}}if(n!="featureMember"){a["featureType"]=o;a["featureNS"]=s}}if(typeof s==="string"){var _=s;s={};s[u]=_}var y={};var b=Array.isArray(o)?o:[o];for(var w in s){var S={};for(var C=0,O=b.length;C<O;++C){var x=b[C].indexOf(":")===-1?u:b[C].split(":")[0];if(x===w){S[b[C].split(":").pop()]=n=="featureMembers"?Object(T["i"])(this.readFeatureElement,this):Object(T["n"])(this.readFeatureElement,this)}}y[s[w]]=S}if(n=="featureMember"){i=Object(T["t"])(undefined,y,t,r)}else{i=Object(T["t"])([],y,t,r)}}if(i===null){i=[]}return i};e.prototype.readGeometryElement=function e(t,r){var n=r[0];n["srsName"]=t.firstElementChild.getAttribute("srsName");n["srsDimension"]=t.firstElementChild.getAttribute("srsDimension");var i=Object(T["t"])(null,this.GEOMETRY_PARSERS,t,r,this);if(i){return Object(a["b"])(i,false,n)}else{return undefined}};e.prototype.readFeatureElementInternal=function e(t,r,n){var i;var a={};for(var o=t.firstElementChild;o;o=o.nextElementSibling){var s=void 0;var l=o.localName;if(o.childNodes.length===0||o.childNodes.length===1&&(o.firstChild.nodeType===3||o.firstChild.nodeType===4)){s=Object(T["e"])(o,false);if(_.test(s)){s=undefined}}else{if(n){s=this.readGeometryElement(o,r)}if(!s){s=this.readFeatureElementInternal(o,r,false)}else if(l!=="boundedBy"){i=l}}if(a[l]){if(!(a[l]instanceof Array)){a[l]=[a[l]]}a[l].push(s)}else{a[l]=s}var u=o.attributes.length;if(u>0){a[l]={_content_:a[l]};for(var c=0;c<u;c++){var f=o.attributes[c].name;a[l][f]=o.attributes[c].value}}}if(!n){return a}else{var h=new p["a"](a);if(i){h.setGeometryName(i)}var d=t.getAttribute("fid")||Object(T["f"])(t,this.namespace,"id");if(d){h.setId(d)}return h}};e.prototype.readFeatureElement=function e(t,r){return this.readFeatureElementInternal(t,r,true)};e.prototype.readPoint=function e(t,r){var n=this.readFlatCoordinatesFromNode_(t,r);if(n){return new h["a"](n,u["a"].XYZ)}};e.prototype.readMultiPoint=function e(t,r){var n=Object(T["t"])([],this.MULTIPOINT_PARSERS_,t,r,this);if(n){return new c["a"](n)}else{return undefined}};e.prototype.readMultiLineString=function e(t,r){var n=Object(T["t"])([],this.MULTILINESTRING_PARSERS_,t,r,this);if(n){return new s["a"](n)}};e.prototype.readMultiPolygon=function e(t,r){var n=Object(T["t"])([],this.MULTIPOLYGON_PARSERS_,t,r,this);if(n){return new f["a"](n)}};e.prototype.pointMemberParser_=function e(t,r){Object(T["s"])(this.POINTMEMBER_PARSERS_,t,r,this)};e.prototype.lineStringMemberParser_=function e(t,r){Object(T["s"])(this.LINESTRINGMEMBER_PARSERS_,t,r,this)};e.prototype.polygonMemberParser_=function e(t,r){Object(T["s"])(this.POLYGONMEMBER_PARSERS_,t,r,this)};e.prototype.readLineString=function e(t,r){var n=this.readFlatCoordinatesFromNode_(t,r);if(n){var i=new o["a"](n,u["a"].XYZ);return i}else{return undefined}};e.prototype.readFlatLinearRing_=function e(t,r){var n=Object(T["t"])(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,r,this);if(n){return n}else{return undefined}};e.prototype.readLinearRing=function e(t,r){var n=this.readFlatCoordinatesFromNode_(t,r);if(n){return new i["a"](n,u["a"].XYZ)}};e.prototype.readPolygon=function e(t,r){var n=Object(T["t"])([null],this.FLAT_LINEAR_RINGS_PARSERS,t,r,this);if(n&&n[0]){var i=n[0];var a=[i.length];var o,s;for(o=1,s=n.length;o<s;++o){Object(l["c"])(i,n[o]);a.push(i.length)}return new d["a"](i,u["a"].XYZ,a)}else{return undefined}};e.prototype.readFlatCoordinatesFromNode_=function e(t,r){return Object(T["t"])(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,r,this)};e.prototype.readGeometryFromNode=function e(t,r){var n=this.readGeometryElement(t,[this.getReadOptions(t,r?r:{})]);return n?n:null};e.prototype.readFeaturesFromNode=function e(t,r){var n={featureType:this.featureType,featureNS:this.featureNS};if(r){Object(v["a"])(n,this.getReadOptions(t,r))}var i=this.readFeaturesInternal(t,[n]);return i||[]};e.prototype.readProjectionFromNode=function e(t){return Object(g["g"])(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))};return e}(n["a"]);y.prototype.namespace=m;y.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}};y.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}};y.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}};y.prototype.MULTIPOINT_PARSERS_={"http://www.opengis.net/gml":{pointMember:Object(T["i"])(y.prototype.pointMemberParser_),pointMembers:Object(T["i"])(y.prototype.pointMemberParser_)}};y.prototype.MULTILINESTRING_PARSERS_={"http://www.opengis.net/gml":{lineStringMember:Object(T["i"])(y.prototype.lineStringMemberParser_),lineStringMembers:Object(T["i"])(y.prototype.lineStringMemberParser_)}};y.prototype.MULTIPOLYGON_PARSERS_={"http://www.opengis.net/gml":{polygonMember:Object(T["i"])(y.prototype.polygonMemberParser_),polygonMembers:Object(T["i"])(y.prototype.polygonMemberParser_)}};y.prototype.POINTMEMBER_PARSERS_={"http://www.opengis.net/gml":{Point:Object(T["i"])(y.prototype.readFlatCoordinatesFromNode_)}};y.prototype.LINESTRINGMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:Object(T["i"])(y.prototype.readLineString)}};y.prototype.POLYGONMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:Object(T["i"])(y.prototype.readPolygon)}};y.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:Object(T["n"])(y.prototype.readFlatLinearRing_)}};t["b"]=y},function(e,t,r){"use strict";r.r(t);var n=r(25);var i=function e(t){this.tagName_=t};i.prototype.getTagName=function e(){return this.tagName_};var a=i;var o=function(r){function e(e,t){r.call(this,e);this.conditions=t;Object(n["a"])(this.conditions.length>=2,57)}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;return e}(a);var s=o;var l=function(t){function e(e){t.call(this,"And",Array.prototype.slice.call(arguments))}if(t)e.__proto__=t;e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;return e}(s);var u=l;var c=function(n){function e(e,t,r){n.call(this,"BBOX");this.geometryName=e;this.extent=t;this.srsName=r}if(n)e.__proto__=n;e.prototype=Object.create(n&&n.prototype);e.prototype.constructor=e;return e}(a);var f=c;var h=function(i){function e(e,t,r,n){i.call(this,e);this.geometryName=t||"the_geom";this.geometry=r;this.srsName=n}if(i)e.__proto__=i;e.prototype=Object.create(i&&i.prototype);e.prototype.constructor=e;return e}(a);var d=h;var p=function(n){function e(e,t,r){n.call(this,"Contains",e,t,r)}if(n)e.__proto__=n;e.prototype=Object.create(n&&n.prototype);e.prototype.constructor=e;return e}(d);var v=p;var g=function(r){function e(e,t){r.call(this,e);this.propertyName=t}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;return e}(a);var m=g;var _=function(n){function e(e,t,r){n.call(this,"During",e);this.begin=t;this.end=r}if(n)e.__proto__=n;e.prototype=Object.create(n&&n.prototype);e.prototype.constructor=e;return e}(m);var y=_;var b=function(i){function e(e,t,r,n){i.call(this,e,t);this.expression=r;this.matchCase=n}if(i)e.__proto__=i;e.prototype=Object.create(i&&i.prototype);e.prototype.constructor=e;return e}(m);var w=b;var S=function(n){function e(e,t,r){n.call(this,"PropertyIsEqualTo",e,t,r)}if(n)e.__proto__=n;e.prototype=Object.create(n&&n.prototype);e.prototype.constructor=e;return e}(w);var C=S;var O=function(r){function e(e,t){r.call(this,"PropertyIsGreaterThan",e,t)}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;return e}(w);var x=O;var T=function(r){function e(e,t){r.call(this,"PropertyIsGreaterThanOrEqualTo",e,t)}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;return e}(w);var E=T;var M=function(n){function e(e,t,r){n.call(this,"Intersects",e,t,r)}if(n)e.__proto__=n;e.prototype=Object.create(n&&n.prototype);e.prototype.constructor=e;return e}(d);var A=M;var k=function(n){function e(e,t,r){n.call(this,"PropertyIsBetween",e);this.lowerBoundary=t;this.upperBoundary=r}if(n)e.__proto__=n;e.prototype=Object.create(n&&n.prototype);e.prototype.constructor=e;return e}(m);var j=k;var I=function(o){function e(e,t,r,n,i,a){o.call(this,"PropertyIsLike",e);this.pattern=t;this.wildCard=r!==undefined?r:"*";this.singleChar=n!==undefined?n:".";this.escapeChar=i!==undefined?i:"!";this.matchCase=a}if(o)e.__proto__=o;e.prototype=Object.create(o&&o.prototype);e.prototype.constructor=e;return e}(m);var D=I;var P=function(t){function e(e){t.call(this,"PropertyIsNull",e)}if(t)e.__proto__=t;e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;return e}(m);var R=P;var L=function(r){function e(e,t){r.call(this,"PropertyIsLessThan",e,t)}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;return e}(w);var N=L;var $=function(r){function e(e,t){r.call(this,"PropertyIsLessThanOrEqualTo",e,t)}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;return e}(w);var F=$;var G=function(t){function e(e){t.call(this,"Not");this.condition=e}if(t)e.__proto__=t;e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;return e}(a);var U=G;var H=function(n){function e(e,t,r){n.call(this,"PropertyIsNotEqualTo",e,t,r)}if(n)e.__proto__=n;e.prototype=Object.create(n&&n.prototype);e.prototype.constructor=e;return e}(w);var W=H;var Y=function(t){function e(e){t.call(this,"Or",Array.prototype.slice.call(arguments))}if(t)e.__proto__=t;e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;return e}(s);var V=Y;var q=function(n){function e(e,t,r){n.call(this,"Within",e,t,r)}if(n)e.__proto__=n;e.prototype=Object.create(n&&n.prototype);e.prototype.constructor=e;return e}(d);var z=q;r.d(t,"and",function(){return B});r.d(t,"or",function(){return K});r.d(t,"not",function(){return X});r.d(t,"bbox",function(){return Z});r.d(t,"contains",function(){return Q});r.d(t,"intersects",function(){return J});r.d(t,"within",function(){return ee});r.d(t,"equalTo",function(){return te});r.d(t,"notEqualTo",function(){return re});r.d(t,"lessThan",function(){return ne});r.d(t,"lessThanOrEqualTo",function(){return ie});r.d(t,"greaterThan",function(){return ae});r.d(t,"greaterThanOrEqualTo",function(){return oe});r.d(t,"isNull",function(){return se});r.d(t,"between",function(){return le});r.d(t,"like",function(){return ue});r.d(t,"during",function(){return ce});function B(e){var t=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(u,t))}function K(e){var t=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(V,t))}function X(e){return new U(e)}function Z(e,t,r){return new f(e,t,r)}function Q(e,t,r){return new v(e,t,r)}function J(e,t,r){return new A(e,t,r)}function ee(e,t,r){return new z(e,t,r)}function te(e,t,r){return new C(e,t,r)}function re(e,t,r){return new W(e,t,r)}function ne(e,t){return new N(e,t)}function ie(e,t){return new F(e,t)}function ae(e,t){return new x(e,t)}function oe(e,t){return new E(e,t)}function se(e){return new R(e)}function le(e,t,r){return new j(e,t,r)}function ue(e,t,r,n,i,a){return new D(e,t,r,n,i,a)}function ce(e,t,r){return new y(e,t,r)}},function(e,t,r){"use strict";r.d(t,"b",function(){return i});var n=function e(t){this.propagationStopped;this.type=t;this.target=null};n.prototype.preventDefault=function e(){this.propagationStopped=true};n.prototype.stopPropagation=function e(){this.propagationStopped=true};function i(e){e.stopPropagation()}function a(e){e.preventDefault()}t["a"]=n},function(e,t,r){"use strict";r.r(t);var n=r(417);var i=r.n(n);var a=r(27);var o=r.n(a);var s=r(386);var l=r.n(s);var u=r(420);var c=r.n(u);var f=r(422);var h=r.n(f);var d=r(423);var p=r.n(d);var v=r(424);var g=r.n(v);if(window.location.protocol=="http:"&&window.location.hostname!="localhost"){var m=window.location.href.substr(5);window.location="https:"+m}},function(e,t,r){"use strict";r.r(t);var n=r(189);var i=r(374);var a=r(368);var o=r(253);var s=r(188);var l=r(315);var u=r(182);var c=r(323);var f=angular.module("gmfDatasourceModule",[o["a"].module.name,s["a"].module.name,l["a"].module.name,u["a"].module.name,c["a"].module.name]);var h=f;var d=r(268);var p=r(373);var v=r(184);var g=r(196);var m=r(332);var _=r(316);var y=r(261);var b=r(213);var w=angular.module("gmfEditingModule",[v["a"].module.name,g["a"].name,m["a"].name,_["a"].module.name,y["a"].module.name,b["a"].module.name]);var S=w;var C=r(367);var O=r(335);var x=r(336);var T=r(337);var E=r(478);var M=angular.module("gmfImportModule",[O["a"].name,x["a"].name,T["a"].name]);var A=M;var k=r(106);var j=r(339);var I=r(154);var D=r(341);var P=r(74);var R=r(490);var L=angular.module("gmfLayertreeModule",[k["a"].name,j["a"].name,I["a"].module.name,D["a"].name,P["a"].module.name]);var N=L;var $=r(364);var F=r(217);var G=r(361);var U=r(347);var H=r(175);var W=r(265);var Y=r(246);var V=angular.module("gmfObjecteditingModule",[G["a"].name,U["a"].name,H["a"].module.name,W["a"].module.name,Y["a"].name]);var q=V;var z=r(345);var B=r(348);var K=r(502);var X=angular.module("gmfPrintModule",[B["a"].name]);var Z=X;var Q=r(371);var J=r(369);var ee=r(349);var te=r(370);var re=r(132);var ne=r(219);var ie=angular.module("ngeoDatasourceModule",[re["a"].module.name,ne["a"].module.name]);var ae=ie;var oe=r(215);var se=r(209);var le=angular.module("ngeoDownloadModule",[oe["a"].module.name,se["a"].name]);var ue=le;var ce=r(257);var fe=r(183);var he=r(258);var de=r(325);var pe=r(327);var ve=r(328);var ge=angular.module("ngeoDrawModule",[fe["a"].module.name,ce["a"].name,he["a"].name,de["a"].name,pe["a"].name,ve["a"].name]);var me=ge;var _e=r(262);var ye=r(263);var be=r(375);var we=angular.module("ngeoEditingModule",[_e["a"].name,ye["a"].name,be["a"].name]);var Se=we;var Ce=r(333);var Oe=r(162);var xe=r(334);var Te=angular.module("ngeoFilterModule",[Ce["a"].name,Oe["a"].module.name,xe["a"].name]);var Ee=Te;var Me=r(1);var Ae=r(105);var ke=r(8);var je=r(2);var Ie=r(10);var De=r(14);var Pe=r(21);var Re=angular.module("ngeoGooglestreetview",[Ae["a"].module.name]);Re.value("ngeoGooglestreetviewTemplateUrl",function(e){var t=e["ngeoGooglestreetviewTemplateUrl"];return t!==undefined?t:"ngeo/googlestreetview"});Re.run(["$templateCache",function(e){e.put("ngeo/googlestreetview",r(514))}]);Le.$inject=["$attrs","ngeoGooglestreetviewTemplateUrl"];function Le(e,t){return t(e)}Re.Controller_=function(){e.$inject=["$element","$scope","ngeoFeatureOverlayMgr"];function e(e,t,r){var n=this;this.active;t.$watch(function(){return n.active},this.handleActiveChange_.bind(this));this.featureStyle;this.map;this.radius;this.scope_=t;this.feature_=new De["a"];this.featureOverlay_=Me["a"].assert(r.getFeatureOverlay());this.listenerKeys_=[];this.location=null;this.noDataAtLocation=false;this.panorama_=new google.maps.StreetViewPanorama(e[0],{pov:{heading:0,pitch:0},visible:false,zoom:1});this.panoramaListener_=null;this.point_=new Pe["a"]([0,0]);this.feature_.setGeometry(this.point_);this.streetViewService_=new google.maps.StreetViewService;this.panoramaPositionChanging_=false}var t=e.prototype;t.$onInit=function e(){var n=this;this.scope_.$watch(function(){return n.location},this.handleLocationChange_.bind(this));this.scope_.$watch(function(){var e=n.active;var t=n.location!==null;return e&&t},this.handleReadyChange_.bind(this));this.scope_.$watch(function(){var e=n.active;var t=n.location!==null;var r=n.noDataAtLocation===false;return e&&t&&r},function(e,t){if(e===t){return}n.panorama_.setVisible(e);if(e){n.panoramaListener_=google.maps.event.addListener(n.panorama_,"position_changed",n.handlePanoramaPositionChange_.bind(n))}else if(n.panoramaListener_){google.maps.event.removeListener(n.panoramaListener_);n.panoramaListener_=null}});if(this.featureStyle){this.feature_.setStyle(this.featureStyle)}};t.handleActiveChange_=function e(t){var r=this.listenerKeys_;if(t){r.push(je["a"](this.map,"click",this.handleMapClick_,this))}else{r.forEach(je["e"]);r.length=0}};t.handleLocationChange_=function e(t,r){if(t===r||Array.isArray(t)&&Array.isArray(r)&&ke["b"](t,r)){return}this.point_.setCoordinates(t);if(t&&!this.panoramaPositionChanging_){var n=this.toLonLat_(t);this.streetViewService_.getPanorama({location:{lat:n[1],lng:n[0]},radius:this.radius},this.handleStreetViewServiceGetPanorama_.bind(this))}};t.handleMapClick_=function e(t){this.location=t.coordinate;this.scope_.$apply()};t.handleReadyChange_=function e(t,r){if(t===r){return}if(t){this.featureOverlay_.addFeature(this.feature_)}else{this.featureOverlay_.removeFeature(this.feature_)}};t.handleStreetViewServiceGetPanorama_=function e(t,r){var n=this.panorama_;if(r===google.maps.StreetViewStatus.OK){this.noDataAtLocation=false;n.setPosition(t.location.latLng)}else{this.noDataAtLocation=true}this.scope_.$apply()};t.handlePanoramaPositionChange_=function e(){this.panoramaPositionChanging_=true;var t=this.panorama_.getPosition();var r=[t.lng(),t.lat()];var n=this.fromLonLat_(r);this.location=n;this.scope_.$apply();this.panoramaPositionChanging_=false};t.fromLonLat_=function e(t){return Ie["f"](t,this.map.getView().getProjection())};t.toLonLat_=function e(t){return Ie["l"](t,this.map.getView().getProjection())};return e}();Re.component("ngeoGooglestreetview",{bindings:{active:"<",featureStyle:"<?",map:"<",radius:"<?"},controller:Re.Controller_,templateUrl:Le});var Ne=Re;var $e=angular.module("ngeoGooglestreetviewModule",[Ne.name]);var Fe=$e;var Ge=r(356);var Ue=r(358);var He=r(121);var We=r(91);var Ye=r(329);var Ve=r(330);var qe=r(331);var ze=angular.module("ngeoMeasureModule",[Ye["a"].name,Ve["a"].name,qe["a"].name]);var Be=ze;var Ke=r(372);var Xe=r(228);var Ze=angular.module("ngeoPrintModule",[Ke["a"].module.name,Xe["a"].module.name]);var Qe=Ze;var Je=r(362);var et=angular.module("ngeoProfileModule",[Je["a"].name]);var tt=et;var rt=r(216);var nt=r(144);var it=r(186);var at=r(187);var ot=angular.module("ngeoQueryModule",[rt["a"].module.name,nt["a"].module.name,it["a"].name,at["a"].name]);var st=ot;var lt=r(365);var ut=r(338);var ct=r(359);var ft=r(351);var ht=r(120);var dt=r(34);var pt=r(161);var vt=angular.module("ngeoControl",[]);vt.component_=function(){return{restrict:"A",link:function e(t,r,n){var i=t.$eval(n["ngeoControl"]);Me["a"].assertInstanceof(i,pt["a"]);var a=t.$eval(n["ngeoControlMap"]);Me["a"].assertInstanceof(a,dt["a"]);i.setTarget(r[0]);a.addControl(i)}}};vt.directive("ngeoControl",vt.component_);var gt=vt;var mt=r(264);var _t=r(160);var yt=r(159);var bt=r(62);var wt=r(305);var St=angular.module("ngeoFilereader",[]);St.component_=function(a){return{restrict:"A",scope:{fileContent:"=ngeoFilereader",supported:"=?ngeoFilereaderSupported"},link:function e(r,t,n){var i="FileReader"in a;r["supported"]=i;if(!i){return}t.on("change",function(e){var t=new a.FileReader;t.onload=function(e){r.$apply(function(){r["fileContent"]=e.target.result})};t.readAsText(e.target.files[0])})}}};St.component_.$inject=["$window"];St.directive("ngeoFilereader",St.component_);var Ct=St;var Ot=r(118);var xt=angular.module("ngeoGetBrowserLanguage",[]);xt.factory_=function(i){return function(t){var e=i.navigator;var r=e.languages||e.language||e.browserLanguage||e.systemLanguage||e.userLanguage;if(!Array.isArray(r)){r=[r]}r=r.map(function(e){return e.substring(0,2)});r=r.filter(function(e,t,r){return r.indexOf(e)==t});var n=r.filter(function(e){return t.indexOf(e)!=-1});return n[0]}};xt.factory_.$inject=["$window"];xt.factory("ngeoGetBrowserLanguage",xt.factory_);var Tt=xt;var Et=r(407);var Mt=r(223);var At=r(92);var kt=r(119);var jt=angular.module("ngeoMiscExtraModule",[ft["a"].module.name,ht["a"].name,gt.name,mt["a"].name,_t["a"].name,yt["a"].module.name,bt["a"].module.name,wt["a"].module.name,Ct.name,Ot["a"].name,Tt.name,Et["a"].name,Mt["a"].module.name,At["a"].module.name,kt["a"].module.name]);var It=jt;var Dt=angular.module("ngeo",[ae.name,ue.name,me.name,Se.name,Ee.name,Fe.name,Ge["a"].name,Ue["a"].name,He["a"].name,We["a"].module.name,Be.name,Qe.name,tt.name,st.name,lt["a"].name,ut["a"].name,ct["a"].module.name,It.name]);var Pt=Dt;var Rt=angular.module("gmf",[n["a"].name,i["a"].name,a["a"].name,h.name,d["a"].name,p["a"].name,S.name,C["a"].name,A.name,N.name,$["a"].name,F["a"].name,q.name,z["a"].name,Z.name,Q["a"].name,J["a"].name,ee["a"].name,te["a"].name,Pt.name]);var Lt=t["default"]=Rt},function(e,h,d){"use strict";(function(l){var r=d(59);var u=d(22);var i=d(1);var s=d(125);var a=d(84);var e=d(206);var t=d(211);var n=d(8);var c=d(2);var o=d(9);var f=function e(t,r,n,i,a,o,s){this.$timeout_=t;this.$injector_=r;this.gettextCatalog_=n;this.layerHelper_=i;this.ngeoNotification_=a;this.gmfThemes_=o;this.root={children:[]};this.rootCtrl=null;this.numberOfGroupsToAddInThisDigestLoop=0;this.groupsToAddInThisDigestLoop_=[];this.promiseForGroupsToAddInThisDigestLoop_=null;this.ngeoStateManager_=s;this.ogcServers_=null;c["a"](this.gmfThemes_,"change",this.handleThemesChange_,this)};f.$inject=["$timeout","$injector","gettextCatalog","ngeoLayerHelper","ngeoNotification","gmfThemes","ngeoStateManager"];f.$inject=["$timeout","$injector","gettextCatalog","ngeoLayerHelper","ngeoNotification","gmfThemes","ngeoStateManager"];f.prototype.handleThemesChange_=function(){var t=this;this.gmfThemes_.getOgcServersObject().then(function(e){t.ogcServers_=e});if(this.rootCtrl&&this.rootCtrl.children){this.gmfThemes_.getThemesObject().then(function(e){t.refreshFirstLevelGroups_(e)})}};f.prototype.setFirstLevelGroups=function(e){this.root.children.length=0;this.ngeoStateManager_.deleteParam(r["a"].PermalinkParam.TREE_GROUPS);return this.addFirstLevelGroups(e)};f.prototype.addFirstLevelGroups=function(e,t,r){var n=this;var i=[];e.slice().reverse().forEach(function(e){if(!n.addFirstLevelGroup_(e)){i.push(e)}});if(i.length>0&&!r){this.notifyCantAddGroups_(i)}return i.length===0};f.prototype.updateTreeGroupsState_=function(e){var t={};t[r["a"].PermalinkParam.TREE_GROUPS]=e.map(function(e){return e.name}).join(",");this.ngeoStateManager_.updateState(t);if(this.$injector_.has("gmfPermalink")){this.$injector_.get("gmfPermalink").cleanParams(e)}};f.prototype.addFirstLevelGroup_=function(e){var t=this;var r=false;var n=e.id;this.root.children.some(function(e){if(n===e.id){return r=true}},this);this.groupsToAddInThisDigestLoop_.some(function(e){if(n===e.id){return r=true}},this);if(r){return false}this.groupsToAddInThisDigestLoop_.push(e);this.numberOfGroupsToAddInThisDigestLoop=0;if(this.promiseForGroupsToAddInThisDigestLoop_!==null){this.$timeout_.cancel(this.promiseForGroupsToAddInThisDigestLoop_)}this.promiseForGroupsToAddInThisDigestLoop_=this.$timeout_(function(){t.numberOfGroupsToAddInThisDigestLoop=t.groupsToAddInThisDigestLoop_.length;t.groupsToAddInThisDigestLoop_.forEach(function(e){t.root.children.unshift(e)});t.updateTreeGroupsState_(t.root.children);t.groupsToAddInThisDigestLoop_.length=0;t.promiseForGroupsToAddInThisDigestLoop_=null});if(e.metadata.exclusiveGroup){this.manageExclusiveGroupSingleChecked_(e,false)}return true};f.prototype.manageExclusiveGroupSingleChecked_=function(e,t){var r=e.children;if(r){for(var n=r,i=Array.isArray(n),a=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(a>=n.length)break;o=n[a++]}else{a=n.next();if(a.done)break;o=a.value}var s=o;if(s.children){t=this.manageExclusiveGroupSingleChecked_(s,t)}else{if(s.metadata.isChecked){if(t){s.metadata.isChecked=false}else{t=true}}}}}return t};f.prototype.addGroupByName=function(r,n){var i=this;this.gmfThemes_.getThemesObject().then(function(e){var t=u["a"].findGroupByName(e,r);if(t){i.addFirstLevelGroups([t],n,false)}})};f.prototype.addGroupByLayerName=function(i,t,a){var o=this;this.gmfThemes_.getThemesObject().then(function(e){var r=u["a"].findGroupByLayerNodeName(e,i);if(r){var n=o.addFirstLevelGroups([r],t,a);o.$timeout_(function(){var e=o.getTreeCtrlByNodeId(r.id);if(!e){console.warn("Tree controller not found, unable to add the group");return}var t;e.traverseDepthFirst(function(e){if(e.node.name===i){t=e;return s["a"].VisitorDecision.STOP}});if(n){e.setState("off")}if(t){t.setState("on")}})}})};f.prototype.removeGroup=function(t){var e=this.root.children;var r=0,n=false;e.some(function(e){if(e.name===t.name){return n=true}r++});if(n){e.splice(r,1);this.updateTreeGroupsState_(e)}};f.prototype.removeAll=function(){while(this.root.children.length){this.removeGroup(this.root.children[0])}};f.prototype.cloneGroupNode_=function(e,t){var r=o["a"]({},e);this.toggleNodeCheck_(r,t);return r};f.prototype.toggleNodeCheck_=function(e,t){var r=this;if(!e.children){return}e.children.forEach(function(e){if(e.children){r.toggleNodeCheck_(e,t)}else if(e.metadata){e.metadata.isChecked=n["f"](t,e.name)}})};f.prototype.notifyCantAddGroups_=function(e){var t=[];var r=this.gettextCatalog_;e.forEach(function(e){t.push(r.getString(e.name))});var n=t.length<2?r.getString("group is already loaded."):r.getString("groups are already loaded.");this.ngeoNotification_.notify({msg:t.join(", ")+" "+n,type:a["a"].Type.INFORMATION})};f.prototype.getTreeCtrlByNodeId=function(t){var r=null;if(this.rootCtrl&&this.rootCtrl.traverseDepthFirst){this.rootCtrl.traverseDepthFirst(function(e){if(e.node.id===t){r=e;return s["a"].VisitorDecision.STOP}})}return r};f.prototype.getOgcServer=function(e){if(e.parent.node.mixed){var t=e.node;i["a"].assert(t.ogcServer);return this.ogcServers_[t.ogcServer]}else{var r=e;while(!r.parent.isRoot){r=r.parent}var n=r.node;i["a"].assert(n.ogcServer);return this.ogcServers_[n.ogcServer]}};f.prototype.refreshFirstLevelGroups_=function(i){var a=this;var o={};this.rootCtrl.children.map(function(e){var t=e.node.name;o[t]=a.getFirstLevelGroupFullState_(e)});var s=[];this.root.children.map(function(e){var t=e.name;var r=u["a"].findGroupByName(i,t);if(r){var n=o[t];if(n){a.setNodeMetadataFromFullState_(r,n)}s.push(r)}});this.setFirstLevelGroups(s);this.$timeout_(function(){a.updateTreeGroupsState_(a.root.children)})};f.prototype.getFirstLevelGroupFullState_=function(e){var t=this;var r={};e.children.map(function(e){r[e.node.name]=t.getFirstLevelGroupFullState_(e)});var n,i,a;if(e.children.length>0){var o=l("#gmf-layertree-layer-group-"+e.uid);if(o){i=o.hasClass("show")}}else{n=e.getState();if(n==="on"){n=true}else if(n==="off"){n=false}else{n=undefined}var s=l("#gmf-layertree-node-"+e.uid+"-legend");if(s){a=s.is(":visible")}}return{children:r,isChecked:n,isExpanded:i,isLegendExpanded:a}};f.prototype.setNodeMetadataFromFullState_=function(e,t){var r=this;if(!t){return e}if(e.children){e.children.map(function(e){r.setNodeMetadataFromFullState_(e,t.children[e.name])})}var n=e.metadata;n.isChecked=t.isChecked;n.isExpanded=t.isExpanded;n.isLegendExpanded=t.isLegendExpanded;return e};f.module=angular.module("gmfTreeManager",[u["a"].module.name,s["a"].module.name,e["a"].module.name,t["a"].module.name]);f.module.service("gmfTreeManager",f);h["a"]=f}).call(this,d(27))},function(e,t,r){"use strict";r.d(t,"a",function(){return i});r.d(t,"b",function(){return a});var n={};function i(e,t){n[e]=t}function a(e){var t=[];for(var r in e){t.push({unit:r,priority:n[r]})}t.sort(function(e,t){return e.priority-t.priority});return t}},function(e,t,r){"use strict";var n=r(58);var i=r(35);var a=r(85);var o=r(83);var s=r(86);var l=r(21);var u=r(31);var c={};c.toMulti=function(e){var t;if(e instanceof l["a"]){t=new a["a"]([]);t.appendPoint(e)}else if(e instanceof i["a"]){t=new o["a"]([]);t.appendLineString(e)}else if(e instanceof u["a"]){t=new s["a"]([]);t.appendPolygon(e)}else{t=e}return t};c.isSafari=function(){return navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1};c.colorZeroPadding=function(e){return e.length==1?"0"+e:e};c.rgbArrayToHex=function(e){var t=e[0];var r=e[1];var n=e[2];if(t!=(t&255)||r!=(r&255)||n!=(n&255)){throw Error('"('+t+","+r+","+n+')" is not a valid RGB color')}var i=c.colorZeroPadding(t.toString(16));var a=c.colorZeroPadding(r.toString(16));var o=c.colorZeroPadding(n.toString(16));return"#"+i+a+o};c.decodeQueryString=function(e){var t={};if(e){var r=e.substring(1).split("&");for(var n=r,i=Array.isArray(n),a=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(a>=n.length)break;o=n[a++]}else{a=n.next();if(a.done)break;o=a.value}var s=o;var l=s.indexOf("=");if(l>=0){var u=s.substring(0,l);var c=s.substring(l+1);t[decodeURIComponent(u)]=decodeURIComponent(c)}else{t[s]=""}}}return t};c.encodeQueryString=function(e){var t=[];for(var r in e){var n=e[r];t.push(encodeURIComponent(r)+"="+encodeURIComponent(n))}return t.join("&")};c.deleteCondition=function(e){return n["h"](e)&&n["k"](e)};t["a"]=c},function(e,t,r){"use strict";r.d(t,"b",function(){return i});r.d(t,"c",function(){return a});r.d(t,"a",function(){return o});r.d(t,"d",function(){return l});var u=r(25);var n=r(15);var c=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i;var f=/^([a-z]*)$/i;function i(e){if(typeof e==="string"){return e}else{return l(e)}}function h(e){var t=document.createElement("div");t.style.color=e;if(t.style.color!==""){document.body.appendChild(t);var r=getComputedStyle(t).color;document.body.removeChild(t);return r}else{return""}}var a=function(){var i=1024;var a={};var o=0;return function(e){var t;if(a.hasOwnProperty(e)){t=a[e]}else{if(o>=i){var r=0;for(var n in a){if((r++&3)===0){delete a[n];--o}}}t=s(e);a[e]=t;++o}return t}}();function o(e){if(Array.isArray(e)){return e}else{return a(e)}}function s(e){var t,r,n,i,a;if(f.exec(e)){e=h(e)}if(c.exec(e)){var o=e.length-1;var s;if(o<=4){s=1}else{s=2}var l=o===4||o===8;t=parseInt(e.substr(1+0*s,s),16);r=parseInt(e.substr(1+1*s,s),16);n=parseInt(e.substr(1+2*s,s),16);if(l){i=parseInt(e.substr(1+3*s,s),16)}else{i=255}if(s==1){t=(t<<4)+t;r=(r<<4)+r;n=(n<<4)+n;if(l){i=(i<<4)+i}}a=[t,r,n,i/255]}else if(e.indexOf("rgba(")==0){a=e.slice(5,-1).split(",").map(Number);d(a)}else if(e.indexOf("rgb(")==0){a=e.slice(4,-1).split(",").map(Number);a.push(1);d(a)}else{Object(u["a"])(false,14)}return a}function d(e){e[0]=Object(n["a"])(e[0]+.5|0,0,255);e[1]=Object(n["a"])(e[1]+.5|0,0,255);e[2]=Object(n["a"])(e[2]+.5|0,0,255);e[3]=Object(n["a"])(e[3],0,1);return e}function l(e){var t=e[0];if(t!=(t|0)){t=t+.5|0}var r=e[1];if(r!=(r|0)){r=r+.5|0}var n=e[2];if(n!=(n|0)){n=n+.5|0}var i=e[3]===undefined?1:e[3];return"rgba("+t+","+r+","+n+","+i+")"}},function(e,t,r){"use strict";var n=r(5);var i=r(71);var a=function e(t,r){if(r===void 0){r={}}i["a"].call(this,t);this.detail=r};n["d"](a,i["a"]);t["a"]=a},function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"};var i={};i[n.DEGREES]=2*Math.PI*6370997/360;i[n.FEET]=.3048;i[n.METERS]=1;i[n.USFEET]=1200/3937;t["b"]=n},function(e,t,r){"use strict";var s=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN};var n=function(o){if(o.length===1)o=i(o);return{left:function e(t,r,n,i){if(n==null)n=0;if(i==null)i=t.length;while(n<i){var a=n+i>>>1;if(o(t[a],r)<0)n=a+1;else i=a}return n},right:function e(t,r,n,i){if(n==null)n=0;if(i==null)i=t.length;while(n<i){var a=n+i>>>1;if(o(t[a],r)>0)i=a;else n=a+1}return n}}};function i(r){return function(e,t){return s(r(e),t)}}var a=n(s);var o=a.right;var l=a.left;var v=o;var u=function(e,t){if(t==null)t=c;var r=0,n=e.length-1,i=e[0],a=new Array(n<0?0:n);while(r<n){a[r]=t(i,i=e[++r])}return a};function c(e,t){return[e,t]}var f=function(e,t,r){var n=e.length,i=t.length,a=new Array(n*i),o,s,l,u;if(r==null)r=c;for(o=l=0;o<n;++o){for(u=e[o],s=0;s<i;++s,++l){a[l]=r(u,t[s])}}return a};var h=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN};var d=function(e){return e===null?NaN:+e};var p=function(e,t){var r=e.length,n=0,i=-1,a=0,o,s,l=0;if(t==null){while(++i<r){if(!isNaN(o=d(e[i]))){s=o-a;a+=s/++n;l+=s*(o-a)}}}else{while(++i<r){if(!isNaN(o=d(t(e[i],i,e)))){s=o-a;a+=s/++n;l+=s*(o-a)}}}if(n>1)return l/(n-1)};var g=function(e,t){var r=p(e,t);return r?Math.sqrt(r):r};var m=function(e,t){var r=e.length,n=-1,i,a,o;if(t==null){while(++n<r){if((i=e[n])!=null&&i>=i){a=o=i;while(++n<r){if((i=e[n])!=null){if(a>i)a=i;if(o<i)o=i}}}}}else{while(++n<r){if((i=t(e[n],n,e))!=null&&i>=i){a=o=i;while(++n<r){if((i=t(e[n],n,e))!=null){if(a>i)a=i;if(o<i)o=i}}}}}return[a,o]};var _=Array.prototype;var y=_.slice;var b=_.map;var w=function(e){return function(){return e}};var S=function(e){return e};var C=function(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,a=new Array(i);while(++n<i){a[n]=e+n*r}return a};var O=Math.sqrt(50),x=Math.sqrt(10),T=Math.sqrt(2);var E=function(e,t,r){var n,i=-1,a,o,s;t=+t,e=+e,r=+r;if(e===t&&r>0)return[e];if(n=t<e)a=e,e=t,t=a;if((s=M(e,t,r))===0||!isFinite(s))return[];if(s>0){e=Math.ceil(e/s);t=Math.floor(t/s);o=new Array(a=Math.ceil(t-e+1));while(++i<a){o[i]=(e+i)*s}}else{e=Math.floor(e*s);t=Math.ceil(t*s);o=new Array(a=Math.ceil(e-t+1));while(++i<a){o[i]=(e-i)/s}}if(n)o.reverse();return o};function M(e,t,r){var n=(t-e)/Math.max(0,r),i=Math.floor(Math.log(n)/Math.LN10),a=n/Math.pow(10,i);return i>=0?(a>=O?10:a>=x?5:a>=T?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=O?10:a>=x?5:a>=T?2:1)}function A(e,t,r){var n=Math.abs(t-e)/Math.max(0,r),i=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),a=n/i;if(a>=O)i*=10;else if(a>=x)i*=5;else if(a>=T)i*=2;return t<e?-i:i}var k=function(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1};var j=function(){var h=S,d=m,p=k;function t(e){var t,r=e.length,n,i=new Array(r);for(t=0;t<r;++t){i[t]=h(e[t],t,e)}var a=d(i),o=a[0],s=a[1],l=p(i,o,s);if(!Array.isArray(l)){l=A(o,s,l);l=C(Math.ceil(o/l)*l,s,l)}var u=l.length;while(l[0]<=o){l.shift(),--u}while(l[u-1]>s){l.pop(),--u}var c=new Array(u+1),f;for(t=0;t<=u;++t){f=c[t]=[];f.x0=t>0?l[t-1]:o;f.x1=t<u?l[t]:s}for(t=0;t<r;++t){n=i[t];if(o<=n&&n<=s){c[v(l,n,0,u)].push(e[t])}}return c}t.value=function(e){return arguments.length?(h=typeof e==="function"?e:w(e),t):h};t.domain=function(e){return arguments.length?(d=typeof e==="function"?e:w([e[0],e[1]]),t):d};t.thresholds=function(e){return arguments.length?(p=typeof e==="function"?e:Array.isArray(e)?w(y.call(e)):w(e),t):p};return t};var I=function(e,t,r){if(r==null)r=d;if(!(n=e.length))return;if((t=+t)<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,a=Math.floor(i),o=+r(e[a],a,e),s=+r(e[a+1],a+1,e);return o+(s-o)*(i-a)};var D=function(e,t,r){e=b.call(e,d).sort(s);return Math.ceil((r-t)/(2*(I(e,.75)-I(e,.25))*Math.pow(e.length,-1/3)))};var P=function(e,t,r){return Math.ceil((r-t)/(3.5*g(e)*Math.pow(e.length,-1/3)))};var R=function(e,t){var r=e.length,n=-1,i,a;if(t==null){while(++n<r){if((i=e[n])!=null&&i>=i){a=i;while(++n<r){if((i=e[n])!=null&&i>a){a=i}}}}}else{while(++n<r){if((i=t(e[n],n,e))!=null&&i>=i){a=i;while(++n<r){if((i=t(e[n],n,e))!=null&&i>a){a=i}}}}}return a};var L=function(e,t){var r=e.length,n=r,i=-1,a,o=0;if(t==null){while(++i<r){if(!isNaN(a=d(e[i])))o+=a;else--n}}else{while(++i<r){if(!isNaN(a=d(t(e[i],i,e))))o+=a;else--n}}if(n)return o/n};var N=function(e,t){var r=e.length,n=-1,i,a=[];if(t==null){while(++n<r){if(!isNaN(i=d(e[n]))){a.push(i)}}}else{while(++n<r){if(!isNaN(i=d(t(e[n],n,e)))){a.push(i)}}}return I(a.sort(s),.5)};var $=function(e){var t=e.length,r,n=-1,i=0,a,o;while(++n<t){i+=e[n].length}a=new Array(i);while(--t>=0){o=e[t];r=o.length;while(--r>=0){a[--i]=o[r]}}return a};var F=function(e,t){var r=e.length,n=-1,i,a;if(t==null){while(++n<r){if((i=e[n])!=null&&i>=i){a=i;while(++n<r){if((i=e[n])!=null&&a>i){a=i}}}}}else{while(++n<r){if((i=t(e[n],n,e))!=null&&i>=i){a=i;while(++n<r){if((i=t(e[n],n,e))!=null&&a>i){a=i}}}}}return a};var G=function(e,t){var r=t.length,n=new Array(r);while(r--){n[r]=e[t[r]]}return n};var U=function(e,t){if(!(r=e.length))return;var r,n=0,i=0,a,o=e[i];if(t==null)t=s;while(++n<r){if(t(a=e[n],o)<0||t(o,o)!==0){o=a,i=n}}if(t(o,o)===0)return i};var H=function(e,t,r){var n=(r==null?e.length:r)-(t=t==null?0:+t),i,a;while(n){a=Math.random()*n--|0;i=e[n+t];e[n+t]=e[a+t];e[a+t]=i}return e};var W=function(e,t){var r=e.length,n=-1,i,a=0;if(t==null){while(++n<r){if(i=+e[n])a+=i}}else{while(++n<r){if(i=+t(e[n],n,e))a+=i}}return a};var Y=function(e){if(!(a=e.length))return[];for(var t=-1,r=F(e,V),n=new Array(r);++t<r;){for(var i=-1,a,o=n[t]=new Array(a);++i<a;){o[i]=e[i][t]}}return n};function V(e){return e.length}var q=function(){return Y(arguments)};r.d(t,"b",function(){return v});r.d(t,"a",function(){return s});r.d(t,"c",function(){return n});r.d(t,"d",function(){return m});r.d(t,"e",function(){return I});r.d(t,"f",function(){return C});r.d(t,"i",function(){return E});r.d(t,"g",function(){return M});r.d(t,"h",function(){return A})},function(e,t,r){"use strict";r.d(t,"b",function(){return o});var n=r(9);var i=r(5);var l=r(10);var a=function e(){this.dataProjection=null;this.defaultFeatureProjection=null};a.prototype.getReadOptions=function e(t,r){var n;if(r){n={dataProjection:r.dataProjection?r.dataProjection:this.readProjection(t),featureProjection:r.featureProjection}}return this.adaptOptions(n)};a.prototype.adaptOptions=function e(t){return Object(n["a"])({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)};a.prototype.getLastExtent=function e(){return null};a.prototype.getType=function e(){return Object(i["b"])()};a.prototype.readFeature=function e(t,r){return Object(i["b"])()};a.prototype.readFeatures=function e(t,r){return Object(i["b"])()};a.prototype.readGeometry=function e(t,r){return Object(i["b"])()};a.prototype.readProjection=function e(t){return Object(i["b"])()};a.prototype.writeFeature=function e(t,r){return Object(i["b"])()};a.prototype.writeFeatures=function e(t,r){return Object(i["b"])()};a.prototype.writeGeometry=function e(t,r){return Object(i["b"])()};t["a"]=a;function o(e,t,r){var n=r?Object(l["g"])(r.featureProjection):null;var i=r?Object(l["g"])(r.dataProjection):null;var a;if(n&&i&&!Object(l["e"])(n,i)){if(Array.isArray(e)){a=Object(l["n"])(e,i,n)}else{a=(t?e.clone():e).transform(t?n:i,t?i:n)}}else{a=e}if(t&&r&&r.decimals!==undefined&&!Array.isArray(a)){var o=Math.pow(10,r.decimals);var s=function e(t){for(var r=0,n=t.length;r<n;++r){t[r]=Math.round(t[r]*o)/o}return t};if(a===e){a=e.clone()}a.applyTransform(s)}return a}},function(e,t,r){"use strict";r.d(t,"b",function(){return h});var n=r(5);var l=r(3);var i=r(150);var o=r(33);var u=r(143);var a=r(9);var s=function(e){function t(){e.call(this);this.layout=o["a"].XY;this.stride=2;this.flatCoordinates=null}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.computeExtent=function e(t){return Object(l["o"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)};t.prototype.getCoordinates=function e(){return Object(n["b"])()};t.prototype.getFirstCoordinate=function e(){return this.flatCoordinates.slice(0,this.stride)};t.prototype.getFlatCoordinates=function e(){return this.flatCoordinates};t.prototype.getLastCoordinate=function e(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)};t.prototype.getLayout=function e(){return this.layout};t.prototype.getSimplifiedGeometry=function e(t){if(this.simplifiedGeometryRevision!=this.getRevision()){Object(a["b"])(this.simplifiedGeometryCache);this.simplifiedGeometryMaxMinSquaredTolerance=0;this.simplifiedGeometryRevision=this.getRevision()}if(t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance){return this}var r=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(r)){return this.simplifiedGeometryCache[r]}else{var n=this.getSimplifiedGeometryInternal(t);var i=n.getFlatCoordinates();if(i.length<this.flatCoordinates.length){this.simplifiedGeometryCache[r]=n;return n}else{this.simplifiedGeometryMaxMinSquaredTolerance=t;return this}}};t.prototype.getSimplifiedGeometryInternal=function e(t){return this};t.prototype.getStride=function e(){return this.stride};t.prototype.setFlatCoordinates=function e(t,r){this.stride=f(t);this.layout=t;this.flatCoordinates=r};t.prototype.setCoordinates=function e(t,r){Object(n["b"])()};t.prototype.setLayout=function e(t,r,n){var i;if(t){i=f(t)}else{for(var a=0;a<n;++a){if(r.length===0){this.layout=o["a"].XY;this.stride=2;return}else{r=r[0]}}i=r.length;t=c(i)}this.layout=t;this.stride=i};t.prototype.applyTransform=function e(t){if(this.flatCoordinates){t(this.flatCoordinates,this.flatCoordinates,this.stride);this.changed()}};t.prototype.rotate=function e(t,r){var n=this.getFlatCoordinates();if(n){var i=this.getStride();Object(u["a"])(n,0,n.length,i,t,r,n);this.changed()}};t.prototype.scale=function e(t,r,n){var i=r;if(i===undefined){i=t}var a=n;if(!a){a=Object(l["x"])(this.getExtent())}var o=this.getFlatCoordinates();if(o){var s=this.getStride();Object(u["b"])(o,0,o.length,s,t,i,a,o);this.changed()}};t.prototype.translate=function e(t,r){var n=this.getFlatCoordinates();if(n){var i=this.getStride();Object(u["d"])(n,0,n.length,i,t,r,n);this.changed()}};return t}(i["a"]);function c(e){var t;if(e==2){t=o["a"].XY}else if(e==3){t=o["a"].XYZ}else if(e==4){t=o["a"].XYZM}return t}function f(e){var t;if(e==o["a"].XY){t=2}else if(e==o["a"].XYZ||e==o["a"].XYM){t=3}else if(e==o["a"].XYZM){t=4}return t}function h(e,t,r){var n=e.getFlatCoordinates();if(!n){return null}else{var i=e.getStride();return Object(u["c"])(n,0,n.length,i,t,r)}}t["a"]=s},function(e,t,r){"use strict";var f=r(8);var a=r(3);var o=r(33);var n=r(7);var h=r(35);var i=r(82);var s=r(142);var l=r(133);var u=r(135);var d=r(269);var p=r(208);var v=r(156);var c=function(c){function i(e,t,r){c.call(this);this.ends_=[];this.maxDelta_=-1;this.maxDeltaRevision_=-1;if(Array.isArray(e[0])){this.setCoordinates(e,t)}else if(t!==undefined&&r){this.setFlatCoordinates(t,e);this.ends_=r}else{var n=this.getLayout();var i=e;var a=[];var o=[];for(var s=0,l=i.length;s<l;++s){var u=i[s];if(s===0){n=u.getLayout()}Object(f["c"])(a,u.getFlatCoordinates());o.push(a.length)}this.setFlatCoordinates(n,a);this.ends_=o}}if(c)i.__proto__=c;i.prototype=Object.create(c&&c.prototype);i.prototype.constructor=i;i.prototype.appendLineString=function e(t){if(!this.flatCoordinates){this.flatCoordinates=t.getFlatCoordinates().slice()}else{Object(f["c"])(this.flatCoordinates,t.getFlatCoordinates().slice())}this.ends_.push(this.flatCoordinates.length);this.changed()};i.prototype.clone=function e(){return new i(this.flatCoordinates.slice(),this.layout,this.ends_.slice())};i.prototype.closestPointXY=function e(t,r,n,i){if(i<Object(a["e"])(this.getExtent(),t,r)){return i}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(Object(s["a"])(this.flatCoordinates,0,this.ends_,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return Object(s["b"])(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,false,t,r,n,i)};i.prototype.getCoordinateAtM=function e(t,r,n){if(this.layout!=o["a"].XYM&&this.layout!=o["a"].XYZM||this.flatCoordinates.length===0){return null}var i=r!==undefined?r:false;var a=n!==undefined?n:false;return Object(d["c"])(this.flatCoordinates,0,this.ends_,this.stride,t,i,a)};i.prototype.getCoordinates=function e(){return Object(u["b"])(this.flatCoordinates,0,this.ends_,this.stride)};i.prototype.getEnds=function e(){return this.ends_};i.prototype.getLineString=function e(t){if(t<0||this.ends_.length<=t){return null}return new h["a"](this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)};i.prototype.getLineStrings=function e(){var t=this.flatCoordinates;var r=this.ends_;var n=this.layout;var i=[];var a=0;for(var o=0,s=r.length;o<s;++o){var l=r[o];var u=new h["a"](t.slice(a,l),n);i.push(u);a=l}return i};i.prototype.getFlatMidpoints=function e(){var t=[];var r=this.flatCoordinates;var n=0;var i=this.ends_;var a=this.stride;for(var o=0,s=i.length;o<s;++o){var l=i[o];var u=Object(d["a"])(r,n,l,a,.5);Object(f["c"])(t,u);n=l}return t};i.prototype.getSimplifiedGeometryInternal=function e(t){var r=[];var n=[];r.length=Object(v["b"])(this.flatCoordinates,0,this.ends_,this.stride,t,r,0,n);return new i(r,o["a"].XY,n)};i.prototype.getType=function e(){return n["a"].MULTI_LINE_STRING};i.prototype.intersectsExtent=function e(t){return Object(p["b"])(this.flatCoordinates,0,this.ends_,this.stride,t)};i.prototype.setCoordinates=function e(t,r){this.setLayout(r,t,2);if(!this.flatCoordinates){this.flatCoordinates=[]}var n=Object(l["c"])(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1];this.changed()};return i}(i["a"]);t["a"]=c},function(e,t,r){"use strict";var o=function e(){};o.prototype.showMessage=function(e){};o.prototype.show=function(e){var t=this.getMessageObjects(e);t.forEach(this.showMessage,this)};o.prototype.error=function(e){this.show(this.getMessageObjects(e,o.Type.ERROR))};o.prototype.info=function(e){this.show(this.getMessageObjects(e,o.Type.INFORMATION))};o.prototype.success=function(e){this.show(this.getMessageObjects(e,o.Type.SUCCESS))};o.prototype.warn=function(e){this.show(this.getMessageObjects(e,o.Type.WARNING))};o.prototype.getMessageObjects=function(t,r){var n=[];var i=null;var a=o.Type.INFORMATION;if(typeof t==="string"){n.push({msg:t,type:r!==undefined?r:a})}else if(Array.isArray(t)){t.forEach(function(e){if(typeof t==="string"){i={msg:e,type:r!==undefined?r:a}}else{i=e;if(r!==undefined){i.type=r}}n.push(i)},this)}else{i=t;if(r!==undefined){i.type=r}if(i.type===undefined){i.type=a}n.push(i)}return n};o.Type={ERROR:"error",INFORMATION:"information",SUCCESS:"success",WARNING:"warning"};t["a"]=o},function(e,t,r){"use strict";var i=r(8);var f=r(3);var a=r(7);var l=r(21);var n=r(82);var o=r(133);var s=r(135);var h=r(15);var u=function(r){function n(e,t){r.call(this);if(t&&!Array.isArray(e[0])){this.setFlatCoordinates(t,e)}else{this.setCoordinates(e,t)}}if(r)n.__proto__=r;n.prototype=Object.create(r&&r.prototype);n.prototype.constructor=n;n.prototype.appendPoint=function e(t){if(!this.flatCoordinates){this.flatCoordinates=t.getFlatCoordinates().slice()}else{Object(i["c"])(this.flatCoordinates,t.getFlatCoordinates())}this.changed()};n.prototype.clone=function e(){var t=new n(this.flatCoordinates.slice(),this.layout);return t};n.prototype.closestPointXY=function e(t,r,n,i){if(i<Object(f["e"])(this.getExtent(),t,r)){return i}var a=this.flatCoordinates;var o=this.stride;for(var s=0,l=a.length;s<l;s+=o){var u=Object(h["f"])(t,r,a[s],a[s+1]);if(u<i){i=u;for(var c=0;c<o;++c){n[c]=a[s+c]}n.length=o}}return i};n.prototype.getCoordinates=function e(){return Object(s["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};n.prototype.getPoint=function e(t){var r=!this.flatCoordinates?0:this.flatCoordinates.length/this.stride;if(t<0||r<=t){return null}return new l["a"](this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)};n.prototype.getPoints=function e(){var t=this.flatCoordinates;var r=this.layout;var n=this.stride;var i=[];for(var a=0,o=t.length;a<o;a+=n){var s=new l["a"](t.slice(a,a+n),r);i.push(s)}return i};n.prototype.getType=function e(){return a["a"].MULTI_POINT};n.prototype.intersectsExtent=function e(t){var r=this.flatCoordinates;var n=this.stride;for(var i=0,a=r.length;i<a;i+=n){var o=r[i];var s=r[i+1];if(Object(f["h"])(t,o,s)){return true}}return false};n.prototype.setCoordinates=function e(t,r){this.setLayout(r,t,1);if(!this.flatCoordinates){this.flatCoordinates=[]}this.flatCoordinates.length=Object(o["b"])(this.flatCoordinates,0,t,this.stride);this.changed()};return n}(n["a"]);t["a"]=u},function(e,t,r){"use strict";var v=r(8);var u=r(3);var a=r(33);var n=r(7);var o=r(85);var d=r(31);var i=r(82);var s=r(254);function l(e,t,r,n){var i=[];var a=Object(u["j"])();for(var o=0,s=r.length;o<s;++o){var l=r[o];a=Object(u["o"])(e,t,l[0],n);i.push((a[0]+a[2])/2,(a[1]+a[3])/2);t=l[l.length-1]}return i}var c=r(142);var f=r(165);var h=r(133);var g=r(135);var m=r(306);var _=r(208);var y=r(230);var b=r(156);var p=function(p){function i(e,t,r){p.call(this);this.endss_=[];this.flatInteriorPointsRevision_=-1;this.flatInteriorPoints_=null;this.maxDelta_=-1;this.maxDeltaRevision_=-1;this.orientedRevision_=-1;this.orientedFlatCoordinates_=null;if(!r&&!Array.isArray(e[0])){var n=this.getLayout();var i=e;var a=[];var o=[];for(var s=0,l=i.length;s<l;++s){var u=i[s];if(s===0){n=u.getLayout()}var c=a.length;var f=u.getEnds();for(var h=0,d=f.length;h<d;++h){f[h]+=c}Object(v["c"])(a,u.getFlatCoordinates());o.push(f)}t=n;e=a;r=o}if(t!==undefined&&r){this.setFlatCoordinates(t,e);this.endss_=r}else{this.setCoordinates(e,t)}}if(p)i.__proto__=p;i.prototype=Object.create(p&&p.prototype);i.prototype.constructor=i;i.prototype.appendPolygon=function e(t){var r;if(!this.flatCoordinates){this.flatCoordinates=t.getFlatCoordinates().slice();r=t.getEnds().slice();this.endss_.push()}else{var n=this.flatCoordinates.length;Object(v["c"])(this.flatCoordinates,t.getFlatCoordinates());r=t.getEnds().slice();for(var i=0,a=r.length;i<a;++i){r[i]+=n}}this.endss_.push(r);this.changed()};i.prototype.clone=function e(){var t=this.endss_.length;var r=new Array(t);for(var n=0;n<t;++n){r[n]=this.endss_[n].slice()}return new i(this.flatCoordinates.slice(),this.layout,r)};i.prototype.closestPointXY=function e(t,r,n,i){if(i<Object(u["e"])(this.getExtent(),t,r)){return i}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(Object(c["f"])(this.flatCoordinates,0,this.endss_,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return Object(c["c"])(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,true,t,r,n,i)};i.prototype.containsXY=function e(t,r){return Object(f["d"])(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,r)};i.prototype.getArea=function e(){return Object(s["c"])(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)};i.prototype.getCoordinates=function e(t){var r;if(t!==undefined){r=this.getOrientedFlatCoordinates().slice();Object(y["d"])(r,0,this.endss_,this.stride,t)}else{r=this.flatCoordinates}return Object(g["c"])(r,0,this.endss_,this.stride)};i.prototype.getEndss=function e(){return this.endss_};i.prototype.getFlatInteriorPoints=function e(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=l(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Object(m["b"])(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t);this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_};i.prototype.getInteriorPoints=function e(){return new o["a"](this.getFlatInteriorPoints().slice(),a["a"].XYM)};i.prototype.getOrientedFlatCoordinates=function e(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;if(Object(y["b"])(t,0,this.endss_,this.stride)){this.orientedFlatCoordinates_=t}else{this.orientedFlatCoordinates_=t.slice();this.orientedFlatCoordinates_.length=Object(y["d"])(this.orientedFlatCoordinates_,0,this.endss_,this.stride)}this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_};i.prototype.getSimplifiedGeometryInternal=function e(t){var r=[];var n=[];r.length=Object(b["d"])(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),r,0,n);return new i(r,a["a"].XY,n)};i.prototype.getPolygon=function e(t){if(t<0||this.endss_.length<=t){return null}var r;if(t===0){r=0}else{var n=this.endss_[t-1];r=n[n.length-1]}var i=this.endss_[t].slice();var a=i[i.length-1];if(r!==0){for(var o=0,s=i.length;o<s;++o){i[o]-=r}}return new d["a"](this.flatCoordinates.slice(r,a),this.layout,i)};i.prototype.getPolygons=function e(){var t=this.layout;var r=this.flatCoordinates;var n=this.endss_;var i=[];var a=0;for(var o=0,s=n.length;o<s;++o){var l=n[o].slice();var u=l[l.length-1];if(a!==0){for(var c=0,f=l.length;c<f;++c){l[c]-=a}}var h=new d["a"](r.slice(a,u),t,l);i.push(h);a=u}return i};i.prototype.getType=function e(){return n["a"].MULTI_POLYGON};i.prototype.intersectsExtent=function e(t){return Object(_["d"])(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)};i.prototype.setCoordinates=function e(t,r){this.setLayout(r,t,3);if(!this.flatCoordinates){this.flatCoordinates=[]}var n=Object(h["d"])(this.flatCoordinates,0,t,this.stride,this.endss_);if(n.length===0){this.flatCoordinates.length=0}else{var i=n[n.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()};return i}(i["a"]);var w=t["a"]=p},function(e,t,r){"use strict";t["a"]={ADD:"add",REMOVE:"remove"}},function(e,t,r){"use strict";r.d(t,"b",function(){return d});var i=r(2);var a=r(12);var o=r(5);var s=r(50);var n=r(197);var l=r(98);var u=r(9);var c=r(145);var f=r(155);var h=function(n){function e(e){var t=Object(u["a"])({},e);delete t.source;n.call(this,t);this.mapPrecomposeKey_=null;this.mapRenderKey_=null;this.sourceChangeKey_=null;if(e.map){this.setMap(e.map)}Object(i["a"])(this,Object(s["b"])(l["a"].SOURCE),this.handleSourcePropertyChange_,this);var r=e.source?e.source:null;this.setSource(r)}if(n)e.__proto__=n;e.prototype=Object.create(n&&n.prototype);e.prototype.constructor=e;e.prototype.getLayersArray=function e(t){var r=t?t:[];r.push(this);return r};e.prototype.getLayerStatesArray=function e(t){var r=t?t:[];r.push(this.getLayerState());return r};e.prototype.getSource=function e(){var t=this.get(l["a"].SOURCE);return t||null};e.prototype.getSourceState=function e(){var t=this.getSource();return!t?f["a"].UNDEFINED:t.getState()};e.prototype.handleSourceChange_=function e(){this.changed()};e.prototype.handleSourcePropertyChange_=function e(){if(this.sourceChangeKey_){Object(i["e"])(this.sourceChangeKey_);this.sourceChangeKey_=null}var t=this.getSource();if(t){this.sourceChangeKey_=Object(i["a"])(t,a["a"].CHANGE,this.handleSourceChange_,this)}this.changed()};e.prototype.setMap=function e(t){if(this.mapPrecomposeKey_){Object(i["e"])(this.mapPrecomposeKey_);this.mapPrecomposeKey_=null}if(!t){this.changed()}if(this.mapRenderKey_){Object(i["e"])(this.mapRenderKey_);this.mapRenderKey_=null}if(t){this.mapPrecomposeKey_=Object(i["a"])(t,c["a"].PRECOMPOSE,function(e){var t=e;var r=this.getLayerState();r.managed=false;if(this.getZIndex()===undefined){r.zIndex=Infinity}t.frameState.layerStatesArray.push(r);t.frameState.layerStates[Object(o["c"])(this)]=r},this);this.mapRenderKey_=Object(i["a"])(this,a["a"].CHANGE,t.render,t);this.changed()}};e.prototype.setSource=function e(t){this.set(l["a"].SOURCE,t)};return e}(n["a"]);function d(e,t){return e.visible&&t>=e.minResolution&&t<e.maxResolution}t["a"]=h},function(e,t,r){"use strict";r.d(t,"b",function(){return l});r.d(t,"a",function(){return c});r.d(t,"c",function(){return f});var n=r(18);var i=r(68);var a=r(96);var o=r(44);var s=n["a"].momentProperties=[];function l(e,t){var r,n,i;if(!Object(a["a"])(t._isAMomentObject)){e._isAMomentObject=t._isAMomentObject}if(!Object(a["a"])(t._i)){e._i=t._i}if(!Object(a["a"])(t._f)){e._f=t._f}if(!Object(a["a"])(t._l)){e._l=t._l}if(!Object(a["a"])(t._strict)){e._strict=t._strict}if(!Object(a["a"])(t._tzm)){e._tzm=t._tzm}if(!Object(a["a"])(t._isUTC)){e._isUTC=t._isUTC}if(!Object(a["a"])(t._offset)){e._offset=t._offset}if(!Object(a["a"])(t._pf)){e._pf=Object(o["a"])(t)}if(!Object(a["a"])(t._locale)){e._locale=t._locale}if(s.length>0){for(r=0;r<s.length;r++){n=s[r];i=t[n];if(!Object(a["a"])(i)){e[n]=i}}}return e}var u=false;function c(e){l(this,e);this._d=new Date(e._d!=null?e._d.getTime():NaN);if(!this.isValid()){this._d=new Date(NaN)}if(u===false){u=true;n["a"].updateOffset(this);u=false}}function f(e){return e instanceof c||e!=null&&e._isAMomentObject!=null}},function(e,t,r){"use strict";r.d(t,"c",function(){return n});r.d(t,"d",function(){return i});r.d(t,"e",function(){return a});r.d(t,"b",function(){return s});r.d(t,"a",function(){return l});r.d(t,"f",function(){return u});var n="ol-hidden";var i="ol-selectable";var a="ol-unselectable";var o="ol-unsupported";var s="ol-control";var l="ol-collapsed";var u=function(){var r;var n={};return function(e){if(!r){r=document.createElement("div").style}if(!(e in n)){r.font=e;var t=r.fontFamily;r.font="";if(!t){return null}n[e]=t.split(/,\s?/)}return n[e]}}()},function(e,t,r){"use strict";var s=r(1);var p=r(8);var n=r(376);var o=r(93);var h=r(101);var a=r(28);var v=r(9);var d=r(114);var i=r(170);var g=r(167);var m=r(127);var l=function e(t,r,n){this.$q_=t;this.$http_=r;this.tilesPreloadingLimit_=n};l.$inject=["$q","$http","ngeoTilesPreloadingLimit"];l.$inject=["$q","$http","ngeoTilesPreloadingLimit"];l.GROUP_KEY="groupName";l.REFRESH_PARAM="random";l.prototype.createBasicWMSLayer=function(e,t,r,n,i,a,o,s){var l={FORMAT:r,LAYERS:t};var u;if(i){l["TIME"]=i}if(n){l["SERVERTYPE"]=n;u=n.replace("qgisserver","qgis")}var c=Object.assign({},s,{url:e,params:l,serverType:u,crossOrigin:o});var f=new d["a"](c);if(a){f.updateParams(a)}return new h["a"]({source:f})};l.prototype.createBasicWMSLayerFromDataSource=function(e,t){var r=e.wmsUrl;s["a"].assert(r);var n=e.getOGCLayerNames().join(",");var i=e.ogcServerType;var a=e.ogcImageType;var o=this.createBasicWMSLayer(r,n,a,i,undefined,undefined,t);o.setVisible(e.visible);o.set("querySourceIds",[e.id]);return o};l.prototype.createWMTSLayerFromCapabilitites=function(o,s,l,u,c){var f=new n["a"];var h=new a["a"]({preload:this.tilesPreloadingLimit_});var d=this.$q_;return this.$http_.get(o,{cache:true}).then(function(e){var t;if(e.data){t=f.read(e.data)}if(t){var r=Object.assign({},c,Object(g["b"])(t,{matrixSet:l,crossOrigin:"anonymous",layer:s}));var n=new g["a"](r);if(u&&!v["d"](u)){n.updateDimensions(u)}h.setSource(n);var i=t["Contents"]["Layer"];var a=p["d"](i,function(e,t,r){return e["Identifier"]==s});h.set("capabilitiesStyles",a["Style"]);return d.resolve(h)}return d.reject("Failed to get WMTS capabilities from "+o)})};l.prototype.createWMTSLayerFromCapabilititesObj=function(e,t,r){var n=Object(g["b"])(e,{crossOrigin:"anonymous",layer:t["Identifier"]});s["a"].assert(n);var i=new g["a"](n);if(r&&!v["d"](r)){i.updateDimensions(r)}return new a["a"]({capabilitiesStyles:t["Style"],preload:Infinity,source:i})};l.prototype.createBasicGroup=function(e){var t=new o["a"];if(e){t.setLayers(e)}return t};l.prototype.getGroupFromMap=function(e,t){var r=e.getLayerGroup().getLayers();var n;r.getArray().some(function(e){if(e.get(l.GROUP_KEY)===t){n=e;return true}else{return false}});if(!n){n=this.createBasicGroup();n.set(l.GROUP_KEY,t);e.addLayer(n)}return n};l.prototype.getFlatLayers=function(e){if(e instanceof o["a"]){var t=e.getLayers().getArray();var r=t.some(function(e){return e instanceof o["a"]});if(!r){return t.slice()}}return this.getFlatLayers_(e,[],undefined)};l.prototype.getFlatLayers_=function(e,t,r){var n=this;var i=e.getOpacity();if(r!==undefined){r*=i}else{r=i}if(e instanceof o["a"]){var a=e.getLayers();a.forEach(function(e){n.getFlatLayers_(e,t,r)})}else{if(t.indexOf(e)<0){e.set("inheritedOpacity",r,true);t.push(e)}}return t};l.prototype.getLayerByName=function(r,e){var n=this;var i=null;e.some(function(e){if(e instanceof o["a"]){var t=e.getLayers().getArray();i=n.getLayerByName(r,t)}else if(e.get("layerNodeName")===r){i=e}return!!i});return i};l.prototype.getWMTSLegendURL=function(e){var t;var r=e.get("capabilitiesStyles");if(r!==undefined){var n=r[0]["legendURL"];if(n!==undefined){t=n[0]["href"]}}return t};l.prototype.getWMSLegendURL=function(e,t,r,n,i,a,o,s,l,u,c){if(!e){return undefined}var f={FORMAT:"image/png",TRANSPARENT:true,SERVICE:"WMS",VERSION:"1.1.1",REQUEST:"GetLegendGraphic",LAYER:t};if(r!==undefined){f["SCALE"]=r}if(n!==undefined){f["RULE"]=n;if(i!==undefined){f["WIDTH"]=i}if(a!==undefined){f["HEIGHT"]=a}}if(o=="qgis"){if(s!=undefined){f["DPI"]=s}if(l!=undefined&&u!=undefined&&r!=undefined&&s!=undefined&&n==undefined){f["BBOX"]=l.join(",");f["SRS"]=u;f["WIDTH"]=Math.round((l[2]-l[0])/r*39.37*s);f["HEIGHT"]=Math.round((l[3]-l[1])/r*39.37*s)}}if(c){Object.assign(f,c)}return m["a"](e,f)};l.prototype.isLayerVisible=function(e,t){if(!e.getVisible()){return false}var r=t.getView().getResolution();return r>e.getMinResolution()&&r<e.getMaxResolution()};l.prototype.refreshWMSLayer=function(e){var t=e.getSource();s["a"].assert(t instanceof d["a"]||t instanceof i["a"]);var r=t;var n=r.getParams();n[l.REFRESH_PARAM]=Math.random();r.updateParams(n)};l.prototype.setZIndexToFirstLevelChildren=function(e,t){if(!(e instanceof o["a"])){return}var r=e.getLayers();r.forEach(function(e){return e.setZIndex(t)})};l.prototype.updateWMSLayerState=function(e,t,r){if(t.length<=0){e.setVisible(false)}else{e.setVisible(true);var n=e.getSource();if(r){n.updateParams({LAYERS:t,TIME:r})}else{n.updateParams({LAYERS:t})}}};l.prototype.getQuerySourceIds=function(e){return e.get("querySourceIds")};l.module=angular.module("ngeoLayerHelper",[]).service("ngeoLayerHelper",l).value("ngeoTilesPreloadingLimit",Infinity);t["a"]=l},function(e,t,r){"use strict";var s=r(1);var n=function e(t){this.groups_={};this.scope_=t};n.$inject=["$rootScope"];n.$inject=["$rootScope"];n.prototype.registerTool=function(r,n,e){var i=this;var t=this.groups_[r];if(!t){t=this.groups_[r]=[]}var a=this.scope_.$watch(n.getActive,function(e,t){if(e===t){return}if(e){i.deactivateTools_(r,n)}else{i.activateDefault_(r)}});t.push({tool:n,defaultTool:e||false,unlisten:a});if(s["a"].ENABLE_ASSERTS){var o=0;t.forEach(function(e){if(e.defaultTool){o++}});s["a"].assert(o<=1,"more than one default tool in group "+r)}};n.prototype.unregisterTool=function(e,t){var r=this.groups_[e];if(r){for(var n=0;n<r.length;n++){if(r[n].tool==t){r[n].unlisten();r.splice(n,1);break}}}};n.prototype.unregisterGroup=function(e){var t=this.groups_[e];if(t){for(var r=0;r<t.length;r++){t[r].unlisten()}delete this.groups_[e]}};n.prototype.activateTool=function(e){e.setActive(true)};n.prototype.deactivateTool=function(e){e.setActive(false)};n.prototype.deactivateTools_=function(e,t){var r=this.groups_[e];for(var n=0;n<r.length;n++){if(t!=r[n].tool){r[n].tool.setActive(false)}}};n.prototype.activateDefault_=function(e){var t=this.groups_[e];var r=null;var n=false;for(var i=0;i<t.length;i++){n=n||t[i].tool.getActive();if(t[i].defaultTool){r=t[i].tool}}if(!n&&r!==null){r.setActive(true)}};n.module=angular.module("ngeoToolActivateMgr",[]);n.module.service("ngeoToolActivateMgr",n);t["a"]=n},function(e,t,r){"use strict";var s=r(5);var a=r(23);var l=r(87);var o=r(50);var u=r(191);var c=r(25);var f=r(2);var h=r(12);var d=r(3);var n=r(197);var p=r(9);var v=r(155);var g={LAYERS:"layers"};var i=function(i){function e(e){var t=e||{};var r=Object(p["a"])({},t);delete r.layers;var n=t.layers;i.call(this,r);this.layersListenerKeys_=[];this.listenerKeys_={};Object(f["a"])(this,Object(o["b"])(g.LAYERS),this.handleLayersChanged_,this);if(n){if(Array.isArray(n)){n=new a["a"](n.slice(),{unique:true})}else{Object(c["a"])(typeof n.getArray==="function",43)}}else{n=new a["a"](undefined,{unique:true})}this.setLayers(n)}if(i)e.__proto__=i;e.prototype=Object.create(i&&i.prototype);e.prototype.constructor=e;e.prototype.handleLayerChange_=function e(){this.changed()};e.prototype.handleLayersChanged_=function e(){this.layersListenerKeys_.forEach(f["e"]);this.layersListenerKeys_.length=0;var t=this.getLayers();this.layersListenerKeys_.push(Object(f["a"])(t,l["a"].ADD,this.handleLayersAdd_,this),Object(f["a"])(t,l["a"].REMOVE,this.handleLayersRemove_,this));for(var r in this.listenerKeys_){this.listenerKeys_[r].forEach(f["e"])}Object(p["b"])(this.listenerKeys_);var n=t.getArray();for(var i=0,a=n.length;i<a;i++){var o=n[i];this.listenerKeys_[Object(s["c"])(o)]=[Object(f["a"])(o,u["a"].PROPERTYCHANGE,this.handleLayerChange_,this),Object(f["a"])(o,h["a"].CHANGE,this.handleLayerChange_,this)]}this.changed()};e.prototype.handleLayersAdd_=function e(t){var r=t.element;this.listenerKeys_[Object(s["c"])(r)]=[Object(f["a"])(r,u["a"].PROPERTYCHANGE,this.handleLayerChange_,this),Object(f["a"])(r,h["a"].CHANGE,this.handleLayerChange_,this)];this.changed()};e.prototype.handleLayersRemove_=function e(t){var r=t.element;var n=Object(s["c"])(r);this.listenerKeys_[n].forEach(f["e"]);delete this.listenerKeys_[n];this.changed()};e.prototype.getLayers=function e(){return this.get(g.LAYERS)};e.prototype.setLayers=function e(t){this.set(g.LAYERS,t)};e.prototype.getLayersArray=function e(t){var r=t!==undefined?t:[];this.getLayers().forEach(function(e){e.getLayersArray(r)});return r};e.prototype.getLayerStatesArray=function e(t){var r=t!==undefined?t:[];var n=r.length;this.getLayers().forEach(function(e){e.getLayerStatesArray(r)});var i=this.getLayerState();for(var a=n,o=r.length;a<o;a++){var s=r[a];s.opacity*=i.opacity;s.visible=s.visible&&i.visible;s.maxResolution=Math.min(s.maxResolution,i.maxResolution);s.minResolution=Math.max(s.minResolution,i.minResolution);if(i.extent!==undefined){if(s.extent!==undefined){s.extent=Object(d["B"])(s.extent,i.extent)}else{s.extent=i.extent}}}return r};e.prototype.getSourceState=function e(){return v["a"].READY};return e}(n["a"]);t["a"]=i},function(e,t,r){"use strict";r.d(t,"a",function(){return a});r.d(t,"b",function(){return u});var n=r(153);var s=r(18);var i=r(96);function l(e){if(s["a"].suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+e)}}function a(i,a){var o=true;return Object(n["a"])(function(){if(s["a"].deprecationHandler!=null){s["a"].deprecationHandler(null,i)}if(o){var e=[];var t;for(var r=0;r<arguments.length;r++){t="";if(typeof arguments[r]==="object"){t+="\n["+r+"] ";for(var n in arguments[0]){t+=n+": "+arguments[0][n]+", "}t=t.slice(0,-2)}else{t=arguments[r]}e.push(t)}l(i+"\nArguments: "+Array.prototype.slice.call(e).join("")+"\n"+(new Error).stack);o=false}return a.apply(this,arguments)},a)}var o={};function u(e,t){if(s["a"].deprecationHandler!=null){s["a"].deprecationHandler(e,t)}if(!o[e]){l(t);o[e]=true}}s["a"].suppressDeprecationWarnings=false;s["a"].deprecationHandler=null},function(e,t,r){"use strict";var n=r(99);var i=r(68);var a=r(24);var o=r(40);var s=r(75);var l=r(6);var u=r(48);var c=r(18);var f=r(17);var h=r(37);var d=r(140);var p=r(164);function v(e,t){return(e%t+t)%t}var g=r(97);var m=r(136);var _=r(44);var y=r(128);r.d(t,"a",function(){return b});r.d(t,"b",function(){return S});r.d(t,"f",function(){return C});r.d(t,"c",function(){return O});r.d(t,"h",function(){return x});r.d(t,"g",function(){return E});r.d(t,"k",function(){return M});r.d(t,"e",function(){return A});r.d(t,"d",function(){return k});r.d(t,"j",function(){return I});r.d(t,"i",function(){return P});function b(e,t){if(isNaN(e)||isNaN(t)){return NaN}var r=v(t,12);e+=(t-r)/12;return r===1?Object(y["d"])(e)?29:28:31-r%7%2}Object(a["a"])("M",["MM",2],"Mo",function(){return this.month()+1});Object(a["a"])("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});Object(a["a"])("MMMM",0,0,function(e){return this.localeData().months(this,e)});Object(o["a"])("month","M");Object(s["a"])("month",8);Object(l["a"])("M",l["d"]);Object(l["a"])("MM",l["d"],l["h"]);Object(l["a"])("MMM",function(e,t){return t.monthsShortRegex(e)});Object(l["a"])("MMMM",function(e,t){return t.monthsRegex(e)});Object(u["a"])(["M","MM"],function(e,t){t[f["e"]]=Object(h["a"])(e)-1});Object(u["a"])(["MMM","MMMM"],function(e,t,r,n){var i=r._locale.monthsParse(e,n,r._strict);if(i!=null){t[f["e"]]=i}else{Object(_["a"])(r).invalidMonth=e}});var w=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;var S="January_February_March_April_May_June_July_August_September_October_November_December".split("_");function C(e,t){if(!e){return Object(d["a"])(this._months)?this._months:this._months["standalone"]}return Object(d["a"])(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||w).test(t)?"format":"standalone"][e.month()]}var O="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function x(e,t){if(!e){return Object(d["a"])(this._monthsShort)?this._monthsShort:this._monthsShort["standalone"]}return Object(d["a"])(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[w.test(t)?"format":"standalone"][e.month()]}function T(e,t,r){var n,i,a,o=e.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];for(n=0;n<12;++n){a=Object(m["a"])([2e3,n]);this._shortMonthsParse[n]=this.monthsShort(a,"").toLocaleLowerCase();this._longMonthsParse[n]=this.months(a,"").toLocaleLowerCase()}}if(r){if(t==="MMM"){i=g["a"].call(this._shortMonthsParse,o);return i!==-1?i:null}else{i=g["a"].call(this._longMonthsParse,o);return i!==-1?i:null}}else{if(t==="MMM"){i=g["a"].call(this._shortMonthsParse,o);if(i!==-1){return i}i=g["a"].call(this._longMonthsParse,o);return i!==-1?i:null}else{i=g["a"].call(this._longMonthsParse,o);if(i!==-1){return i}i=g["a"].call(this._shortMonthsParse,o);return i!==-1?i:null}}}function E(e,t,r){var n,i,a;if(this._monthsParseExact){return T.call(this,e,t,r)}if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(n=0;n<12;n++){i=Object(m["a"])([2e3,n]);if(r&&!this._longMonthsParse[n]){this._longMonthsParse[n]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i");this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")}if(!r&&!this._monthsParse[n]){a="^"+this.months(i,"")+"|^"+this.monthsShort(i,"");this._monthsParse[n]=new RegExp(a.replace(".",""),"i")}if(r&&t==="MMMM"&&this._longMonthsParse[n].test(e)){return n}else if(r&&t==="MMM"&&this._shortMonthsParse[n].test(e)){return n}else if(!r&&this._monthsParse[n].test(e)){return n}}}function M(e,t){var r;if(!e.isValid()){return e}if(typeof t==="string"){if(/^\d+$/.test(t)){t=Object(h["a"])(t)}else{t=e.localeData().monthsParse(t);if(!Object(p["a"])(t)){return e}}}r=Math.min(e.date(),b(e.year(),t));e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,r);return e}function A(e){if(e!=null){M(this,e);c["a"].updateOffset(this,true);return this}else{return Object(n["a"])(this,"Month")}}function k(){return b(this.year(),this.month())}var j=l["s"];function I(e){if(this._monthsParseExact){if(!Object(i["a"])(this,"_monthsRegex")){R.call(this)}if(e){return this._monthsShortStrictRegex}else{return this._monthsShortRegex}}else{if(!Object(i["a"])(this,"_monthsShortRegex")){this._monthsShortRegex=j}return this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex}}var D=l["s"];function P(e){if(this._monthsParseExact){if(!Object(i["a"])(this,"_monthsRegex")){R.call(this)}if(e){return this._monthsStrictRegex}else{return this._monthsRegex}}else{if(!Object(i["a"])(this,"_monthsRegex")){this._monthsRegex=D}return this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex}}function R(){function e(e,t){return t.length-e.length}var t=[],r=[],n=[],i,a;for(i=0;i<12;i++){a=Object(m["a"])([2e3,i]);t.push(this.monthsShort(a,""));r.push(this.months(a,""));n.push(this.months(a,""));n.push(this.monthsShort(a,""))}t.sort(e);r.sort(e);n.sort(e);for(i=0;i<12;i++){t[i]=Object(l["t"])(t[i]);r[i]=Object(l["t"])(r[i])}for(i=0;i<24;i++){n[i]=Object(l["t"])(n[i])}this._monthsRegex=new RegExp("^("+n.join("|")+")","i");this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}},function(e,t,r){"use strict";r.d(t,"a",function(){return n});function n(e){return e===void 0}},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n;if(Array.prototype.indexOf){n=Array.prototype.indexOf}else{n=function e(t){var r;for(r=0;r<this.length;++r){if(this[r]===t){return r}}return-1}}},function(e,t,r){"use strict";t["a"]={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",SOURCE:"source"}},function(e,t,r){"use strict";r.d(t,"b",function(){return u});r.d(t,"a",function(){return c});r.d(t,"c",function(){return f});r.d(t,"d",function(){return h});r.d(t,"e",function(){return d});var i=r(40);var a=r(75);var n=r(18);var o=r(122);var s=r(95);var l=r(128);function u(t,r){return function(e){if(e!=null){f(this,t,e);n["a"].updateOffset(this,r);return this}else{return c(this,t)}}}function c(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function f(e,t,r){if(e.isValid()&&!isNaN(r)){if(t==="FullYear"&&Object(l["d"])(e.year())&&e.month()===1&&e.date()===29){e._d["set"+(e._isUTC?"UTC":"")+t](r,e.month(),Object(s["a"])(r,e.month()))}else{e._d["set"+(e._isUTC?"UTC":"")+t](r)}}}function h(e){e=Object(i["c"])(e);if(Object(o["a"])(this[e])){return this[e]()}return this}function d(e,t){if(typeof e==="object"){e=Object(i["b"])(e);var r=Object(a["b"])(e);for(var n=0;n<r.length;n++){this[r[n].unit](e[r[n].unit])}}else{e=Object(i["c"])(e);if(Object(o["a"])(this[e])){return this[e](t)}}return this}},function(e,t,r){"use strict";var u=r(1);var n=r(47);var i=r(197);var c=r(93);var f=r(88);var h=r(295);var d=r(282);var a={};a.interaction=function(r){u["a"].assertInstanceof(r,n["a"]);Object.defineProperty(r,"active",{get:function e(){return r.getActive()},set:function e(t){r.setActive(t)}})};a.layer=function(r){u["a"].assertInstanceof(r,i["a"]);Object.defineProperty(r,"visible",{configurable:true,get:function e(){return r.getVisible()},set:function e(t){r.setVisible(t)}});Object.defineProperty(r,"opacity",{configurable:true,get:function e(){return r.getOpacity()},set:function e(t){r.setOpacity(t)}})};a.layerLoading=function(r,e){var t;var n=null;var i=null;var a=s;var o=l;r.set("load_count",0,true);if(r instanceof c["a"]){r.getLayers().on("add",function(e){var t=e.element;t.set("parent_group",r)})}if(r instanceof f["a"]){t=r.getSource();if(t===null){return}else if(t instanceof d["b"]){n=["tileloadstart"];i=["tileloadend","tileloaderror"]}else if(t instanceof h["a"]){n=["imageloadstart"];i=["imageloadend","imageloaderror"]}else{u["a"].fail("unsupported source type")}t.on(n,function(){a(r);e.$applyAsync()});t.on(i,function(){o(r);e.$applyAsync()})}Object.defineProperty(r,"loading",{configurable:true,get:function e(){return r.get("load_count")>0}});function s(e){var t=e.get("load_count");var r=e.get("parent_group");e.set("load_count",++t,true);if(r){s(r)}}function l(e){var t=e.get("load_count");var r=e.get("parent_group");e.set("load_count",--t,true);if(r){l(r)}}};t["a"]=a},function(e,t,r){"use strict";var n=r(134);var i=r(88);var a=function(r){function e(e){var t=e?e:{};r.call(this,t);this.type=n["a"].IMAGE}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;return e}(i["a"]);a.prototype.getSource;t["a"]=a},function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"b",function(){return i});r.d(t,"c",function(){return a});r.d(t,"d",function(){return o});function n(e,t,r){if(r===undefined){r=[0,0]}r[0]=e[0]+2*t;r[1]=e[1]+2*t;return r}function i(e){return e[0]>0&&e[1]>0}function a(e,t,r){if(r===undefined){r=[0,0]}r[0]=e[0]*t+.5|0;r[1]=e[1]*t+.5|0;return r}function o(e,t){if(Array.isArray(e)){return e}else{if(t===undefined){t=[e,e]}else{t[0]=t[1]=e}return t}}},function(e,t,r){"use strict";var n=r(1);var i=r(78);var a=r(5);var o=r(53);var c=r(10);var s=r(129);var f=r(220);var l=r(2);var u=r(47);var h=r(64);var d=r(65);var p=r(30);var v=r(29);var g=r(11);var m=function e(t){if(t===void 0){t={}}u["a"].call(this,{handleEvent:e.handleEvent_});this.helpTooltipElement_=null;this.helpTooltipOverlay_=null;this.measureTooltipElement_=null;this.measureTooltipOverlay_=null;this.measureTooltipOverlayCoord_=null;this.sketchFeature=null;this.continueMsg=null;this.decimals=t.decimals;this.precision=t.precision;this.displayHelpTooltip_=t.displayHelpTooltip!==undefined?t.displayHelpTooltip:true;this.startMsg;if(t.startMsg!==undefined){this.startMsg=t.startMsg}else{this.startMsg=document.createElement("span");this.startMsg.textContent="Click to start drawing."}this.changeEventKey_=null;this.postcomposeEventKey_=null;var r=t.style!==undefined?t.style:[new g["c"]({fill:new p["a"]({color:"rgba(255, 255, 255, 0.2)"})}),new g["c"]({stroke:new v["a"]({color:"white",width:5})}),new g["c"]({stroke:new v["a"]({color:"#ffcc33",width:3})})];this.vectorLayer_=new h["a"]({source:new d["a"],style:r});this.drawInteraction_=this.createDrawInteraction(t.sketchStyle,this.vectorLayer_.getSource());this.shouldHandleDrawInteractionActiveChange_=true;l["a"](this.drawInteraction_,"change:active",this.handleDrawInteractionActiveChange_,this);l["a"](this.drawInteraction_,"drawstart",this.onDrawStart_,this);l["a"](this.drawInteraction_,"drawend",this.onDrawEnd_,this);l["a"](this,"change:active",this.updateState_,this)};a["d"](m,u["a"]);m.getFormattedArea=function(e,t,r,n){var i=e.clone().transform(t,"EPSG:4326");var a=Math.abs(f["a"](i,{projection:"EPSG:4326"}));return n(a,"m²","square",r)};m.getFormattedCircleArea=function(e,t,r){var n=Math.PI*Math.pow(e.getRadius(),2);return r(n,"m²","square",t)};m.getFormattedLength=function(e,t,r,n){var i=0;var a=e.getCoordinates();for(var o=0,s=a.length-1;o<s;++o){var l=c["m"](a[o],t,"EPSG:4326");var u=c["m"](a[o+1],t,"EPSG:4326");i+=f["b"](l,u)}return n(i,"m","unit",r)};m.getFormattedPoint=function(e,t,r,n){return r(e.getCoordinates(),t,n)};m.handleEvent_=function(e){if(e.type!="pointermove"||e.dragging){return true}var t=this.sketchFeature===null?this.startMsg:this.continueMsg;if(this.displayHelpTooltip_){o["d"](this.helpTooltipElement_);this.helpTooltipElement_.appendChild(t);this.helpTooltipOverlay_.setPosition(e.coordinate)}return true};m.prototype.getDrawInteraction=function(){return this.drawInteraction_};m.prototype.createDrawInteraction=function(e,t){};m.prototype.setMap=function(e){u["a"].prototype.setMap.call(this,e);this.vectorLayer_.setMap(e);var t=this.drawInteraction_.getMap();if(t!==null){t.removeInteraction(this.drawInteraction_)}if(e!==null){e.addInteraction(this.drawInteraction_)}};m.prototype.onDrawStart_=function(e){var r=this;this.sketchFeature=e.feature||e.detail.feature;this.vectorLayer_.getSource().clear(true);this.createMeasureTooltip_();var t=this.sketchFeature.getGeometry();n["a"].assert(t!==undefined);this.changeEventKey_=l["a"](t,"change",function(){r.handleMeasure(function(e,t){if(t!==null){r.measureTooltipElement_.innerHTML=e;r.measureTooltipOverlayCoord_=t}})});this.postcomposeEventKey_=l["a"](this.getMap(),"postcompose",function(){r.measureTooltipOverlay_.setPosition(r.measureTooltipOverlayCoord_)})};m.prototype.onDrawEnd_=function(e){this.measureTooltipElement_.classList.add("ngeo-tooltip-static");this.measureTooltipOverlay_.setOffset([0,-7]);var t=new i["a"]("measureend",{feature:this.sketchFeature});this.dispatchEvent(t);this.sketchFeature=null;this.unlistenerEvent_()};m.prototype.unlistenerEvent_=function(){if(this.changeEventKey_!==null&&this.postcomposeEventKey_!==null){l["e"](this.changeEventKey_);l["e"](this.postcomposeEventKey_);this.changeEventKey_=null;this.postcomposeEventKey_=null}};m.prototype.createHelpTooltip_=function(){this.removeHelpTooltip_();if(this.displayHelpTooltip_){this.helpTooltipElement_=document.createElement("div");this.helpTooltipElement_.classList.add("tooltip");this.helpTooltipOverlay_=new s["a"]({element:this.helpTooltipElement_,offset:[15,0],positioning:"center-left"});this.getMap().addOverlay(this.helpTooltipOverlay_)}};m.prototype.removeHelpTooltip_=function(){if(this.displayHelpTooltip_){this.getMap().removeOverlay(this.helpTooltipOverlay_);if(this.helpTooltipElement_!==null){this.helpTooltipElement_.parentNode.removeChild(this.helpTooltipElement_)}this.helpTooltipElement_=null;this.helpTooltipOverlay_=null}};m.prototype.createMeasureTooltip_=function(){this.removeMeasureTooltip_();this.measureTooltipElement_=document.createElement("div");this.measureTooltipElement_.classList.add("tooltip");this.measureTooltipElement_.classList.add("ngeo-tooltip-measure");this.measureTooltipOverlay_=new s["a"]({element:this.measureTooltipElement_,offset:[0,-15],positioning:"bottom-center",stopEvent:false});this.getMap().addOverlay(this.measureTooltipOverlay_)};m.prototype.removeMeasureTooltip_=function(){if(this.measureTooltipElement_!==null){this.measureTooltipElement_.parentNode.removeChild(this.measureTooltipElement_);this.measureTooltipElement_=null;this.measureTooltipOverlay_=null;this.measureTooltipOverlayCoord_=null}};m.prototype.updateState_=function(){var e=this.getActive();this.shouldHandleDrawInteractionActiveChange_=false;this.drawInteraction_.setActive(e);this.shouldHandleDrawInteractionActiveChange_=true;if(!this.getMap()){return}if(e){if(!this.measureTooltipOverlay_){this.createMeasureTooltip_();this.createHelpTooltip_()}}else{this.vectorLayer_.getSource().clear(true);this.getMap().removeOverlay(this.measureTooltipOverlay_);this.removeMeasureTooltip_();this.removeHelpTooltip_();this.unlistenerEvent_()}};m.prototype.handleMeasure=function(e){};m.prototype.getTooltipElement=function(){return this.measureTooltipElement_};m.prototype.handleDrawInteractionActiveChange_=function(){if(this.shouldHandleDrawInteractionActiveChange_){this.setActive(this.drawInteraction_.getActive())}};t["a"]=m},function(e,t,r){"use strict";t["a"]={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"}},function(e,t,r){"use strict";var a=r(1);var n=r(239);var o=r(5);var i=r(64);var s=r(9);var l=r(65);var u=r(11);var c=function e(){this.featureUidToGroupIndex_={};this.groups_=[];this.source_=new l["a"]({useSpatialIndex:false});this.layer_=new i["a"]({source:this.source_,style:this.styleFunction_.bind(this),updateWhileAnimating:true,updateWhileInteracting:true})};c.prototype.addFeature=function(e,t){a["a"].assert(t>=0);a["a"].assert(t<this.groups_.length);var r=o["c"](e).toString();this.featureUidToGroupIndex_[r]=t;this.groups_[t].features[r]=e;this.source_.addFeature(e)};c.prototype.removeFeature=function(e,t){a["a"].assert(t>=0);a["a"].assert(t<this.groups_.length);var r=o["c"](e).toString();delete this.featureUidToGroupIndex_[r];delete this.groups_[t].features[r];this.source_.removeFeature(e)};c.prototype.clear=function(e){a["a"].assert(e>=0);a["a"].assert(e<this.groups_.length);var t=this.groups_[e];for(var r in t.features){this.removeFeature(t.features[r],e)}a["a"].assert(s["d"](t.features))};c.prototype.getLayer=function(){return this.layer_};c.prototype.getFeatureOverlay=function(){var e=this.groups_.length;this.groups_.push({styleFunction:u["a"],features:{}});return new n["a"](this,e)};c.prototype.init=function(e){this.layer_.setMap(e)};c.prototype.setStyle=function(e,t){a["a"].assert(t>=0);a["a"].assert(t<this.groups_.length);this.groups_[t].styleFunction=e===null?u["c"].defaultFunction:Object(u["d"])(e)};c.prototype.styleFunction_=function(e,t){var r=o["c"](e).toString();a["a"].assert(r in this.featureUidToGroupIndex_);var n=this.featureUidToGroupIndex_[r];var i=this.groups_[n];return i.styleFunction(e,t)};c.module=angular.module("ngeoFeatureOverlayMgr",[n["a"].module.name]);c.module.service("ngeoFeatureOverlayMgr",c);t["a"]=c},function(e,x,T){"use strict";(function(t){var e=T(59);var r=T(253);var n=T(188);var i=T(214);var a=T(339);var o=T(154);var s=T(74);var l=T(22);var h=T(1);var f=T(51);var u=T(340);var c=T(125);var d=T(91);var p=T(402);var v=T(119);var g=T(28);var m=T(88);var _=T(9);var y=T(114);var b=T(170);var w=T(167);var S=T(298);var C=angular.module("gmfLayertreeComponent",[r["a"].module.name,n["a"].module.name,i["a"].module.name,a["a"].name,o["a"].module.name,s["a"].module.name,l["a"].module.name,u["a"].name,c["a"].module.name,d["a"].module.name,v["a"].module.name]);C.value("ngeoLayertreeTemplateUrl",function(e,t){return"gmf/layertree"});C.run(["$templateCache",function(e){e.put("gmf/layertree",T(481))}]);C.value("gmfLayertreeTemplate",function(e,t){var r="gmf/layertree";return'<div ngeo-layertree="gmfLayertreeCtrl.root" '+'ngeo-layertree-map="gmfLayertreeCtrl.map" '+'ngeo-layertree-nodelayer="gmfLayertreeCtrl.getLayer(treeCtrl)" '+'ngeo-layertree-listeners="gmfLayertreeCtrl.listeners(treeScope, treeCtrl)" '+('ngeo-layertree-templateurl="'+r+'">')+"</div>"});O.$inject=["$element","$attrs","gmfLayertreeTemplate"];function O(e,t,r){return r(e,t)}C.component_={controller:"GmfLayertreeController as gmfLayertreeCtrl",bindings:{map:"=gmfLayertreeMap",dimensions:"=?gmfLayertreeDimensions",openLinksInNewWindow:"<?gmfLayertreeOpenlinksinnewwindow"},template:O};C.component("gmfLayertree",C.component_);C.Controller_=function(e,t,r,n,i,a,o,s,l,u){var c=this;this.map;this.dimensions;this.scope_=t;this.layerHelper_=r;this.gmfDataSourceBeingFiltered=n;this.gmfExternalDataSourcesManager=i;this.gmfPermalink_=a;this.gmfTreeManager_=o;var f=o.root;h["a"].assert(f);this.root=f;this.gmfSyncLayertreeMap_=s;this.ngeoWMSTime_=l;this.groupNodeStates_={};this.openLinksInNewWindow;this.dataLayerGroup_=null;this.layers=[];this.gmfThemes_=u;e.on("shown.bs.collapse",function(){c.scope_.$apply()})};C.Controller_.$inject=["$element","$scope","ngeoLayerHelper","gmfDataSourceBeingFiltered","gmfExternalDataSourcesManager","gmfPermalink","gmfTreeManager","gmfSyncLayertreeMap","ngeoWMSTime","gmfThemes"];C.Controller_.prototype.$onInit=function(){var t=this;this.openLinksInNewWindow=this.openLinksInNewWindow===true;this.dataLayerGroup_=this.layerHelper_.getGroupFromMap(this.map,e["a"].DATALAYERGROUP_NAME);Object(p["a"])(this.dataLayerGroup_.getLayers().getArray(),this.layers,true,this.scope_,function(){return true});this.scope_.$watchCollection(function(){return t.layers},function(){t.map.render()});this.scope_.$watchCollection(function(){if(t.gmfTreeManager_.rootCtrl){return t.dimensions}},function(e){if(e){t.updateDimensions_(t.gmfTreeManager_.rootCtrl)}})};C.Controller_.prototype.updateDimensions_=function(e){var r=this;e.traverseDepthFirst(function(e){if(e.node.dimensions){var t=e.layer;h["a"].assertInstanceof(t,m["a"]);r.updateLayerDimensions_(t,e.node)}})};C.Controller_.prototype.updateLayerDimensions_=function(e,t){var r=this;if(this.dimensions&&t.dimensions){var n={};for(var i in t.dimensions){if(t.dimensions[i]===null){var a=this.dimensions[i];if(a!==undefined){n[i]=a}}else{n[i]=t.dimensions[i]}}if(!_["d"](n)){var o=e.getSource();if(o instanceof w["a"]){o.updateDimensions(n)}else if(o instanceof b["a"]||o instanceof y["a"]){o.updateParams(n)}else{e.once("change:source",function(){h["a"].assertInstanceof(e,m["a"]);r.updateLayerDimensions_(e,t)})}}}};C.Controller_.prototype.getLayer=function(e){var t;if(e.parent.isRoot){this.gmfTreeManager_.rootCtrl=e.parent;t=this.gmfTreeManager_.root.children.length-this.gmfTreeManager_.numberOfGroupsToAddInThisDigestLoop||0}var r=this.gmfSyncLayertreeMap_.createLayer(e,this.map,this.dataLayerGroup_,t);if(r instanceof m["a"]){var n=e.node;this.updateLayerDimensions_(r,n)}return r};C.Controller_.prototype.listeners=function(e,t){var r=this.dataLayerGroup_;e.$on("$destroy",function(){r.getLayers().remove(t.layer)})};C.Controller_.prototype.toggleActive=function(e){var t=e.getState();if(e.node.metadata&&e.node.metadata.exclusiveGroup){e.setState(t==="off"?"on":"off")}else{e.setState(t==="on"?"off":"on")}};C.Controller_.prototype.getNodeState=function(e){return e.getState()};C.Controller_.prototype.updateWMSTimeLayerState=function(e,t){if(!t){return}var r=e.getDataSource();if(r){h["a"].assertInstanceof(r,f["a"]);r.timeRangeValue=t}else if(e.children){for(var n=0,i=e.children.length;n<i;n++){this.updateWMSTimeLayerState(e.children[n],t)}}};C.Controller_.prototype.getLegendIconURL=function(e){var t=e.node.metadata.iconUrl;if(t!==undefined){return t}if(e.node.children!==undefined){return undefined}var r=e.node;if(r.type!=="WMS"){return undefined}var n=r;var i=n.metadata.legendRule;if(i===undefined){return undefined}var a=n.layers.split(",")[0];var o=this.gmfTreeManager_.getOgcServer(e);return this.layerHelper_.getWMSLegendURL(o.url,a,undefined,i,20,20)};C.Controller_.prototype.getLegendsObject=function(e){var t=this;var r={};if(e.node.children!==undefined){return null}var n=e.node;var i=n.name;if(n.metadata.legendImage){r[i]=n.metadata.legendImage;return r}var a=e.layer;if(n.type==="WMTS"){h["a"].assertInstanceof(a,g["a"]);var o=this.layerHelper_.getWMTSLegendURL(a);r[i]=o;return o?r:null}else{var s=n;var l=s.layers;var u=this.gmfTreeManager_.getOgcServer(e);var c=this.getScale_();if(u.type===f["a"].ServerType.QGISSERVER){l=[l]}else{l=l.split(",")}l.forEach(function(e){r[e]=t.layerHelper_.getWMSLegendURL(u.url,e,c)});return r}};C.Controller_.prototype.getNumberOfLegendsObject=function(e){var t=this.getLegendsObject(e);return t?Object.keys(t).length:0};C.Controller_.prototype.getScale_=function(){var e=this.map.getView();var t=e.getResolution();var r=e.getProjection().getMetersPerUnit();var n=25.4/.28;return t*r*39.37*n};C.Controller_.prototype.displayMetadata=function(e){var t=e.node;var r=t.metadata["metadataUrl"];if(r!==undefined){var n=window.gmfx;if(n.openIframePopup){n.openIframePopup(r,t.name,undefined,undefined,false)}}};C.Controller_.prototype.afterReorder=function(){var t=this;var e=this.gmfTreeManager_.rootCtrl.node.children;var r=this.gmfTreeManager_.rootCtrl.children;var n=[];e.forEach(function(t){r.some(function(e){if(e.node===t){n.push(e);return}})});this.gmfTreeManager_.rootCtrl.children=n;this.layers.length=0;this.gmfTreeManager_.rootCtrl.children.forEach(function(e){t.layers.push(e.layer)});this.gmfPermalink_.refreshFirstLevelGroups()};C.Controller_.prototype.removeNode=function(e){this.gmfTreeManager_.removeGroup(e)};C.Controller_.prototype.removeAllNodes=function(){this.gmfTreeManager_.removeAll()};C.Controller_.prototype.nodesCount=function(){return this.gmfTreeManager_.root.children.length};C.Controller_.prototype.getResolutionStyle=function(e){var t=this.map.getView().getResolution();var r=l["a"].getNodeMinResolution(e);if(r!==undefined&&t<r){return"out-of-resolution"}var n=l["a"].getNodeMaxResolution(e);if(n!==undefined&&t>n){return"out-of-resolution"}return undefined};C.Controller_.prototype.zoomToResolution=function(e){var t=e.node;var r=this.map.getView();var n=r.getResolution();var i=l["a"].getNodeMinResolution(t);if(i!==undefined&&n<i){r.setResolution(r.constrainResolution(i,0,1))}else{var a=l["a"].getNodeMaxResolution(t);if(a!==undefined&&n>a){r.setResolution(r.constrainResolution(a,0,-1))}}};C.Controller_.prototype.toggleNodeLegend=function(e){t(e).toggle({toggle:true})};C.Controller_.prototype.toggleFiltrableDataSource=function(e){this.gmfDataSourceBeingFiltered.dataSource=e};C.Controller_.prototype.isNodeLegendVisible=function(e){return t(e).is(":visible")};C.Controller_.prototype.supportsCustomization=function(e){return!e.isRoot&&(this.supportsLegend(e)||this.supportsOpacityChange(e))};C.Controller_.prototype.supportsLegend=function(e){var t=e.node;return!!t.metadata&&!!t.metadata.legend&&!!this.getLegendsObject(e)};C.Controller_.prototype.supportsOpacityChange=function(e){var t=e.node;var r=e.parent.node;return!!e.layer&&(e.depth===1&&!t.mixed||e.depth>1&&r.mixed)};C.controller("GmfLayertreeController",C.Controller_);x["a"]=C}).call(this,T(27))},function(e,t,r){"use strict";var c=r(77);var m=r(146);var _=r(53);var y=r(67);var i=r(38);var b=r(16);var n=r(309);var a=function(r){function n(e){var t=e.rotateWithView!==undefined?e.rotateWithView:false;r.call(this,{opacity:1,rotateWithView:t,rotation:e.rotation!==undefined?e.rotation:0,scale:1});this.checksums_=null;this.canvas_=null;this.hitDetectionCanvas_=null;this.fill_=e.fill!==undefined?e.fill:null;this.origin_=[0,0];this.points_=e.points;this.radius_=e.radius!==undefined?e.radius:e.radius1;this.radius2_=e.radius2;this.angle_=e.angle!==undefined?e.angle:0;this.stroke_=e.stroke!==undefined?e.stroke:null;this.anchor_=null;this.size_=null;this.imageSize_=null;this.hitDetectionImageSize_=null;this.atlasManager_=e.atlasManager;this.render_(this.atlasManager_)}if(r)n.__proto__=r;n.prototype=Object.create(r&&r.prototype);n.prototype.constructor=n;n.prototype.clone=function e(){var t=new n({fill:this.getFill()?this.getFill().clone():undefined,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():undefined,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),atlasManager:this.atlasManager_});t.setOpacity(this.getOpacity());t.setScale(this.getScale());return t};n.prototype.getAnchor=function e(){return this.anchor_};n.prototype.getAngle=function e(){return this.angle_};n.prototype.getFill=function e(){return this.fill_};n.prototype.getHitDetectionImage=function e(t){return this.hitDetectionCanvas_};n.prototype.getImage=function e(t){return this.canvas_};n.prototype.getImageSize=function e(){return this.imageSize_};n.prototype.getHitDetectionImageSize=function e(){return this.hitDetectionImageSize_};n.prototype.getImageState=function e(){return i["a"].LOADED};n.prototype.getOrigin=function e(){return this.origin_};n.prototype.getPoints=function e(){return this.points_};n.prototype.getRadius=function e(){return this.radius_};n.prototype.getRadius2=function e(){return this.radius2_};n.prototype.getSize=function e(){return this.size_};n.prototype.getStroke=function e(){return this.stroke_};n.prototype.listenImageChange=function e(t,r){return undefined};n.prototype.load=function e(){};n.prototype.unlistenImageChange=function e(t,r){};n.prototype.render_=function e(t){var r;var n="";var i="";var a=0;var o=null;var s=0;var l;var u=0;if(this.stroke_){l=this.stroke_.getColor();if(l===null){l=b["k"]}l=Object(m["a"])(l);u=this.stroke_.getWidth();if(u===undefined){u=b["h"]}o=this.stroke_.getLineDash();s=this.stroke_.getLineDashOffset();if(!y["a"]){o=null;s=0}i=this.stroke_.getLineJoin();if(i===undefined){i=b["g"]}n=this.stroke_.getLineCap();if(n===undefined){n=b["d"]}a=this.stroke_.getMiterLimit();if(a===undefined){a=b["i"]}}var c=2*(this.radius_+u)+1;var f={strokeStyle:l,strokeWidth:u,size:c,lineCap:n,lineDash:o,lineDashOffset:s,lineJoin:i,miterLimit:a};if(t===undefined){var h=Object(_["a"])(c,c);this.canvas_=h.canvas;c=this.canvas_.width;r=c;this.draw_(f,h,0,0);this.createHitDetectionCanvas_(f)}else{c=Math.round(c);var d=!this.fill_;var p;if(d){p=this.drawHitDetectionCanvas_.bind(this,f)}var v=this.getChecksum();var g=t.add(v,c,c,this.draw_.bind(this,f),p);this.canvas_=g.image;this.origin_=[g.offsetX,g.offsetY];r=g.image.width;if(d){this.hitDetectionCanvas_=g.hitImage;this.hitDetectionImageSize_=[g.hitImage.width,g.hitImage.height]}else{this.hitDetectionCanvas_=this.canvas_;this.hitDetectionImageSize_=[r,r]}}this.anchor_=[c/2,c/2];this.size_=[c,c];this.imageSize_=[r,r]};n.prototype.draw_=function e(t,r,n,i){var a,o,s;r.setTransform(1,0,0,1,0,0);r.translate(n,i);r.beginPath();var l=this.points_;if(l===Infinity){r.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,true)}else{var u=this.radius2_!==undefined?this.radius2_:this.radius_;if(u!==this.radius_){l=2*l}for(a=0;a<=l;a++){o=a*2*Math.PI/l-Math.PI/2+this.angle_;s=a%2===0?this.radius_:u;r.lineTo(t.size/2+s*Math.cos(o),t.size/2+s*Math.sin(o))}}if(this.fill_){var c=this.fill_.getColor();if(c===null){c=b["b"]}r.fillStyle=Object(m["a"])(c);r.fill()}if(this.stroke_){r.strokeStyle=t.strokeStyle;r.lineWidth=t.strokeWidth;if(t.lineDash){r.setLineDash(t.lineDash);r.lineDashOffset=t.lineDashOffset}r.lineCap=t.lineCap;r.lineJoin=t.lineJoin;r.miterLimit=t.miterLimit;r.stroke()}r.closePath()};n.prototype.createHitDetectionCanvas_=function e(t){this.hitDetectionImageSize_=[t.size,t.size];if(this.fill_){this.hitDetectionCanvas_=this.canvas_;return}var r=Object(_["a"])(t.size,t.size);this.hitDetectionCanvas_=r.canvas;this.drawHitDetectionCanvas_(t,r,0,0)};n.prototype.drawHitDetectionCanvas_=function e(t,r,n,i){r.setTransform(1,0,0,1,0,0);r.translate(n,i);r.beginPath();var a=this.points_;if(a===Infinity){r.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,true)}else{var o=this.radius2_!==undefined?this.radius2_:this.radius_;if(o!==this.radius_){a=2*a}var s,l,u;for(s=0;s<=a;s++){u=s*2*Math.PI/a-Math.PI/2+this.angle_;l=s%2===0?this.radius_:o;r.lineTo(t.size/2+l*Math.cos(u),t.size/2+l*Math.sin(u))}}r.fillStyle=Object(c["b"])(b["b"]);r.fill();if(this.stroke_){r.strokeStyle=t.strokeStyle;r.lineWidth=t.strokeWidth;if(t.lineDash){r.setLineDash(t.lineDash);r.lineDashOffset=t.lineDashOffset}r.stroke()}r.closePath()};n.prototype.getChecksum=function e(){var t=this.stroke_?this.stroke_.getChecksum():"-";var r=this.fill_?this.fill_.getChecksum():"-";var n=!this.checksums_||t!=this.checksums_[1]||r!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.radius2_!=this.checksums_[4]||this.angle_!=this.checksums_[5]||this.points_!=this.checksums_[6];if(n){var i="r"+t+r+(this.radius_!==undefined?this.radius_.toString():"-")+(this.radius2_!==undefined?this.radius2_.toString():"-")+(this.angle_!==undefined?this.angle_.toString():"-")+(this.points_!==undefined?this.points_.toString():"-");this.checksums_=[i,t,r,this.radius_,this.radius2_,this.angle_,this.points_]}return this.checksums_[0]};return n}(n["a"]);t["a"]=a},function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"b",function(){return i});r.d(t,"c",function(){return a});r.d(t,"d",function(){return o});function n(e){return Math.pow(e,3)}function i(e){return 1-n(1-e)}function a(e){return 3*e*e-2*e*e*e}function o(e){return e}function s(e){if(e<.5){return a(2*e)}else{return 1-a(2*(e-.5))}}},function(e,t,r){"use strict";var i=r(1);var a=r(42);var n=r(52);var o=r(2);var s=r(14);var l=r(137);var u=r(150);function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function f(e,t,r){if(t)c(e.prototype,t);if(r)c(e,r);return e}function h(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}function d(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}var p=function(n){h(e,n);function e(e){var t;e.type=a["a"].GEOMETRY;t=n.call(this,e)||this;var r=e.featureProperties||{};t.feature_=new s["a"](r);t.format_=new l["a"];t.updatingExpression_=false;t.updatingGeometry_=false;t.geometryChangeListenerKey_=null;t.listenerKeys.push(o["a"](t.feature_,"change:"+t.feature.getGeometryName(),t.handleFeatureGeometryChange_,d(d(t))));t.setGeometryFromExpression_();return t}var t=e.prototype;t.setExpression=function e(t){this.updatingExpression_=true;n.prototype.setExpression.call(this,t);if(!this.updatingGeometry_){this.setGeometryFromExpression_()}this.registerGeometryChange_();this.updatingExpression_=false};t.handleFeatureGeometryChange_=function e(){if(this.updatingExpression_){return}this.updatingGeometry_=true;var t=this.feature_.getGeometry();if(t){this.expression=this.format_.writeGeometry(t)}else{this.expression=null}this.registerGeometryChange_();this.updatingGeometry_=false};t.handleGeometryChange_=function e(t){var r=i["a"].assertInstanceof(t.target,u["a"]);this.updatingGeometry_=true;this.expression=this.format_.writeGeometry(r);this.updatingGeometry_=false};t.setGeometryFromExpression_=function e(){var t=null;if(this.expression){var r=i["a"].assertString(this.expression);t=this.format_.readGeometry(r)}this.geometry=t};t.registerGeometryChange_=function e(){if(this.geometryChangeListenerKey_!==null){o["e"](this.geometryChangeListenerKey_);this.geometryChangeListenerKey_=null}var t=this.feature_.getGeometry();if(t){this.geometryChangeListenerKey_=o["a"](t,"change",this.handleGeometryChange_,this)}};f(e,[{key:"feature",get:function e(){return this.feature_}},{key:"geometry",get:function e(){return this.feature_.getGeometry()||null},set:function e(t){this.feature_.setGeometry(t)}}]);return e}(n["a"]);t["a"]=p},function(e,t,r){"use strict";t["a"]={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},function(e,S,C){"use strict";(function(n){C.d(S,"c",function(){return m});C.d(S,"a",function(){return _});C.d(S,"e",function(){return y});C.d(S,"b",function(){return b});C.d(S,"d",function(){return w});var r=C(140);var e=C(68);var i=C(96);var o=C(319);var a=C(94);var s=C(285);var l=C(286);var t=C(397);var u=C(383);var c;var f={};var h={};var d;function p(e){return e?e.toLowerCase().replace("_","-"):e}function v(e){var t=0,r,n,i,a;while(t<e.length){a=p(e[t]).split("-");r=a.length;n=p(e[t+1]);n=n?n.split("-"):null;while(r>0){i=g(a.slice(0,r).join("-"));if(i){return i}if(n&&n.length>=r&&Object(o["a"])(a,n,true)>=r-1){break}r--}t++}return d}function g(e){var t=null;if(!f[e]&&typeof n!=="undefined"&&n&&n.exports){try{t=d._abbr;var r=c;!function e(){var t=new Error("Cannot find module 'undefined'");t.code="MODULE_NOT_FOUND";throw t}();m(t)}catch(e){}}return f[e]}function m(e,t){var r;if(e){if(Object(i["a"])(t)){r=b(e)}else{r=_(e,t)}if(r){d=r}else{if(typeof console!=="undefined"&&console.warn){console.warn("Locale "+e+" not found. Did you forget to load it?")}}}return d._abbr}function _(e,t){if(t!==null){var r,n=u["a"];t.abbr=e;if(f[e]!=null){Object(a["b"])("defineLocaleOverride","use moment.updateLocale(localeName, config) to change "+"an existing locale. moment.defineLocale(localeName, "+"config) should only be used for creating a new locale "+"See http://momentjs.com/guides/#/warnings/define-locale/ for more info.");n=f[e]._config}else if(t.parentLocale!=null){if(f[t.parentLocale]!=null){n=f[t.parentLocale]._config}else{r=g(t.parentLocale);if(r!=null){n=r._config}else{if(!h[t.parentLocale]){h[t.parentLocale]=[]}h[t.parentLocale].push({name:e,config:t});return null}}}f[e]=new l["a"](Object(s["a"])(n,t));if(h[e]){h[e].forEach(function(e){_(e.name,e.config)})}m(e);return f[e]}else{delete f[e];return null}}function y(e,t){if(t!=null){var r,n,i=u["a"];n=g(e);if(n!=null){i=n._config}t=Object(s["a"])(i,t);r=new l["a"](t);r.parentLocale=f[e];f[e]=r;m(e)}else{if(f[e]!=null){if(f[e].parentLocale!=null){f[e]=f[e].parentLocale}else if(f[e]!=null){delete f[e]}}}return f[e]}function b(e){var t;if(e&&e._locale&&e._locale._abbr){e=e._locale._abbr}if(!e){return d}if(!Object(r["a"])(e)){t=g(e);if(t){return t}e=[e]}return v(e)}function w(){return Object(t["a"])(f)}}).call(this,C(434)(e))},function(e,t,r){"use strict";var a=r(12);var u=r(14);var s=r(46);var n=r(169);var l=r(50);var f=r(39);var c=r(2);var i=r(71);var h=r(58);var o=r(3);var d=r(41);var p=r(163);var v=r(7);var g=r(35);var m=r(83);var _=r(85);var y=r(86);var b=r(224);var w=r(21);var S=r(31);var C=r(54);var O=r(235);var x=r(64);var T=r(65);var E=r(11);var M={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"};var A={DRAWSTART:"drawstart",DRAWEND:"drawend"};var k=function(r){function e(e,t){r.call(this,e);this.feature=t}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;return e}(i["a"]);var j=function(o){function e(e){var t=e;if(!t.stopDown){t.stopDown=d["a"]}o.call(this,t);this.shouldHandle_=false;this.downPx_=null;this.downTimeout_;this.lastDragTime_;this.freehand_=false;this.source_=e.source?e.source:null;this.features_=e.features?e.features:null;this.snapTolerance_=e.snapTolerance?e.snapTolerance:12;this.type_=e.type;this.mode_=R(this.type_);this.stopClick_=!!e.stopClick;this.minPoints_=e.minPoints?e.minPoints:this.mode_===M.POLYGON?3:2;this.maxPoints_=e.maxPoints?e.maxPoints:Infinity;this.finishCondition_=e.finishCondition?e.finishCondition:d["b"];var r=e.geometryFunction;if(!r){if(this.type_===v["a"].CIRCLE){r=function e(t,r){var n=r?r:new p["a"]([NaN,NaN]);var i=Object(f["h"])(t[0],t[1]);n.setCenterAndRadius(t[0],Math.sqrt(i));return n}}else{var i;var a=this.mode_;if(a===M.POINT){i=w["a"]}else if(a===M.LINE_STRING){i=g["a"]}else if(a===M.POLYGON){i=S["a"]}r=function e(t,r){var n=r;if(n){if(a===M.POLYGON){if(t[0].length){n.setCoordinates([t[0].concat([t[0][0]])])}else{n.setCoordinates([])}}else{n.setCoordinates(t)}}else{n=new i(t)}return n}}}this.geometryFunction_=r;this.dragVertexDelay_=e.dragVertexDelay!==undefined?e.dragVertexDelay:500;this.finishCoordinate_=null;this.sketchFeature_=null;this.sketchPoint_=null;this.sketchCoords_=null;this.sketchLine_=null;this.sketchLineCoords_=null;this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36;this.overlay_=new x["a"]({source:new T["a"]({useSpatialIndex:false,wrapX:e.wrapX?e.wrapX:false}),style:e.style?e.style:I(),updateWhileInteracting:true});this.geometryName_=e.geometryName;this.condition_=e.condition?e.condition:h["g"];this.freehandCondition_;if(e.freehand){this.freehandCondition_=h["c"]}else{this.freehandCondition_=e.freehandCondition?e.freehandCondition:h["j"]}Object(c["a"])(this,Object(l["b"])(O["a"].ACTIVE),this.updateState_,this)}if(o)e.__proto__=o;e.prototype=Object.create(o&&o.prototype);e.prototype.constructor=e;e.prototype.setMap=function e(t){o.prototype.setMap.call(this,t);this.updateState_()};e.prototype.getOverlay=function e(){return this.overlay_};e.prototype.handleEvent=function e(t){if(t.originalEvent.type===a["a"].CONTEXTMENU){t.preventDefault()}this.freehand_=this.mode_!==M.POINT&&this.freehandCondition_(t);var r=t.type===s["a"].POINTERMOVE;var n=true;if(!this.freehand_&&this.lastDragTime_&&t.type===s["a"].POINTERDRAG){var i=Date.now();if(i-this.lastDragTime_>=this.dragVertexDelay_){this.downPx_=t.pixel;this.shouldHandle_=!this.freehand_;r=true}else{this.lastDragTime_=undefined}if(this.shouldHandle_&&this.downTimeout_!==undefined){clearTimeout(this.downTimeout_);this.downTimeout_=undefined}}if(this.freehand_&&t.type===s["a"].POINTERDRAG&&this.sketchFeature_!==null){this.addToDrawing_(t);n=false}else if(this.freehand_&&t.type===s["a"].POINTERDOWN){n=false}else if(r){n=t.type===s["a"].POINTERMOVE;if(n&&this.freehand_){n=this.handlePointerMove_(t)}else if(t.pointerEvent.pointerType==b["b"]||t.type===s["a"].POINTERDRAG&&this.downTimeout_===undefined){this.handlePointerMove_(t)}}else if(t.type===s["a"].DBLCLICK){n=false}return o.prototype.handleEvent.call(this,t)&&n};e.prototype.handleDownEvent=function e(t){this.shouldHandle_=!this.freehand_;if(this.freehand_){this.downPx_=t.pixel;if(!this.finishCoordinate_){this.startDrawing_(t)}return true}else if(this.condition_(t)){this.lastDragTime_=Date.now();this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new n["a"](s["a"].POINTERMOVE,t.map,t.pointerEvent,false,t.frameState))}.bind(this),this.dragVertexDelay_);this.downPx_=t.pixel;return true}else{return false}};e.prototype.handleUpEvent=function e(t){var r=true;if(this.downTimeout_){clearTimeout(this.downTimeout_);this.downTimeout_=undefined}this.handlePointerMove_(t);var n=this.mode_===M.CIRCLE;if(this.shouldHandle_){if(!this.finishCoordinate_){this.startDrawing_(t);if(this.mode_===M.POINT){this.finishDrawing()}}else if(this.freehand_||n){this.finishDrawing()}else if(this.atFinish_(t)){if(this.finishCondition_(t)){this.finishDrawing()}}else{this.addToDrawing_(t)}r=false}else if(this.freehand_){this.finishCoordinate_=null;this.abortDrawing_()}if(!r&&this.stopClick_){t.stopPropagation()}return r};e.prototype.handlePointerMove_=function e(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var r=this.downPx_;var n=t.pixel;var i=r[0]-n[0];var a=r[1]-n[1];var o=i*i+a*a;this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_;if(!this.shouldHandle_){return true}}if(this.finishCoordinate_){this.modifyDrawing_(t)}else{this.createOrUpdateSketchPoint_(t)}return true};e.prototype.atFinish_=function e(t){var r=false;if(this.sketchFeature_){var n=false;var i=[this.finishCoordinate_];if(this.mode_===M.LINE_STRING){n=this.sketchCoords_.length>this.minPoints_}else if(this.mode_===M.POLYGON){var a=this.sketchCoords_;n=a[0].length>this.minPoints_;i=[a[0][0],a[0][a[0].length-2]]}if(n){var o=t.map;for(var s=0,l=i.length;s<l;s++){var u=i[s];var c=o.getPixelFromCoordinate(u);var f=t.pixel;var h=f[0]-c[0];var d=f[1]-c[1];var p=this.freehand_?1:this.snapTolerance_;r=Math.sqrt(h*h+d*d)<=p;if(r){this.finishCoordinate_=u;break}}}}return r};e.prototype.createOrUpdateSketchPoint_=function e(t){var r=t.coordinate.slice();if(!this.sketchPoint_){this.sketchPoint_=new u["a"](new w["a"](r));this.updateSketchFeatures_()}else{var n=this.sketchPoint_.getGeometry();n.setCoordinates(r)}};e.prototype.startDrawing_=function e(t){var r=t.coordinate;this.finishCoordinate_=r;if(this.mode_===M.POINT){this.sketchCoords_=r.slice()}else if(this.mode_===M.POLYGON){this.sketchCoords_=[[r.slice(),r.slice()]];this.sketchLineCoords_=this.sketchCoords_[0]}else{this.sketchCoords_=[r.slice(),r.slice()]}if(this.sketchLineCoords_){this.sketchLine_=new u["a"](new g["a"](this.sketchLineCoords_))}var n=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new u["a"];if(this.geometryName_){this.sketchFeature_.setGeometryName(this.geometryName_)}this.sketchFeature_.setGeometry(n);this.updateSketchFeatures_();this.dispatchEvent(new k(A.DRAWSTART,this.sketchFeature_))};e.prototype.modifyDrawing_=function e(t){var r=t.coordinate;var n=this.sketchFeature_.getGeometry();var i,a;if(this.mode_===M.POINT){a=this.sketchCoords_}else if(this.mode_===M.POLYGON){i=this.sketchCoords_[0];a=i[i.length-1];if(this.atFinish_(t)){r=this.finishCoordinate_.slice()}}else{i=this.sketchCoords_;a=i[i.length-1]}a[0]=r[0];a[1]=r[1];this.geometryFunction_(this.sketchCoords_,n);if(this.sketchPoint_){var o=this.sketchPoint_.getGeometry();o.setCoordinates(r)}var s;if(n.getType()==v["a"].POLYGON&&this.mode_!==M.POLYGON){if(!this.sketchLine_){this.sketchLine_=new u["a"]}var l=n.getLinearRing(0);s=this.sketchLine_.getGeometry();if(!s){s=new g["a"](l.getFlatCoordinates(),l.getLayout());this.sketchLine_.setGeometry(s)}else{s.setFlatCoordinates(l.getLayout(),l.getFlatCoordinates());s.changed()}}else if(this.sketchLineCoords_){s=this.sketchLine_.getGeometry();s.setCoordinates(this.sketchLineCoords_)}this.updateSketchFeatures_()};e.prototype.addToDrawing_=function e(t){var r=t.coordinate;var n=this.sketchFeature_.getGeometry();var i;var a;if(this.mode_===M.LINE_STRING){this.finishCoordinate_=r.slice();a=this.sketchCoords_;if(a.length>=this.maxPoints_){if(this.freehand_){a.pop()}else{i=true}}a.push(r.slice());this.geometryFunction_(a,n)}else if(this.mode_===M.POLYGON){a=this.sketchCoords_[0];if(a.length>=this.maxPoints_){if(this.freehand_){a.pop()}else{i=true}}a.push(r.slice());if(i){this.finishCoordinate_=a[0]}this.geometryFunction_(this.sketchCoords_,n)}this.updateSketchFeatures_();if(i){this.finishDrawing()}};e.prototype.removeLastPoint=function e(){if(!this.sketchFeature_){return}var t=this.sketchFeature_.getGeometry();var r;var n;if(this.mode_===M.LINE_STRING){r=this.sketchCoords_;r.splice(-2,1);this.geometryFunction_(r,t);if(r.length>=2){this.finishCoordinate_=r[r.length-2].slice()}}else if(this.mode_===M.POLYGON){r=this.sketchCoords_[0];r.splice(-2,1);n=this.sketchLine_.getGeometry();n.setCoordinates(r);this.geometryFunction_(this.sketchCoords_,t)}if(r.length===0){this.finishCoordinate_=null}this.updateSketchFeatures_()};e.prototype.finishDrawing=function e(){var t=this.abortDrawing_();if(!t){return}var r=this.sketchCoords_;var n=t.getGeometry();if(this.mode_===M.LINE_STRING){r.pop();this.geometryFunction_(r,n)}else if(this.mode_===M.POLYGON){r[0].pop();this.geometryFunction_(r,n);r=n.getCoordinates()}if(this.type_===v["a"].MULTI_POINT){t.setGeometry(new _["a"]([r]))}else if(this.type_===v["a"].MULTI_LINE_STRING){t.setGeometry(new m["a"]([r]))}else if(this.type_===v["a"].MULTI_POLYGON){t.setGeometry(new y["a"]([r]))}this.dispatchEvent(new k(A.DRAWEND,t));if(this.features_){this.features_.push(t)}if(this.source_){this.source_.addFeature(t)}};e.prototype.abortDrawing_=function e(){this.finishCoordinate_=null;var t=this.sketchFeature_;if(t){this.sketchFeature_=null;this.sketchPoint_=null;this.sketchLine_=null;this.overlay_.getSource().clear(true)}return t};e.prototype.extend=function e(t){var r=t.getGeometry();var n=r;this.sketchFeature_=t;this.sketchCoords_=n.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice();this.sketchCoords_.push(i.slice());this.updateSketchFeatures_();this.dispatchEvent(new k(A.DRAWSTART,this.sketchFeature_))};e.prototype.updateSketchFeatures_=function e(){var t=[];if(this.sketchFeature_){t.push(this.sketchFeature_)}if(this.sketchLine_){t.push(this.sketchLine_)}if(this.sketchPoint_){t.push(this.sketchPoint_)}var r=this.overlay_.getSource();r.clear(true);r.addFeatures(t)};e.prototype.updateState_=function e(){var t=this.getMap();var r=this.getActive();if(!t||!r){this.abortDrawing_()}this.overlay_.setMap(r?t:null)};return e}(C["b"]);function I(){var r=Object(E["b"])();return function(e,t){return r[e.getGeometry().getType()]}}function D(u,c){return function(e,t){var r=e[0];var n=e[1];var i=Math.sqrt(Object(f["h"])(r,n));var a=t?t:Object(S["b"])(new p["a"](r),u);var o=c;if(!c){var s=n[0]-r[0];var l=n[1]-r[1];o=Math.atan(l/s)-(s<0?Math.PI:0)}Object(S["d"])(a,r,i,o);return a}}function P(){return function(e,t){var r=Object(o["b"])(e);var n=[[Object(o["v"])(r),Object(o["w"])(r),Object(o["D"])(r),Object(o["C"])(r),Object(o["v"])(r)]];var i=t;if(i){i.setCoordinates(n)}else{i=new S["a"](n)}return i}}function R(e){var t;if(e===v["a"].POINT||e===v["a"].MULTI_POINT){t=M.POINT}else if(e===v["a"].LINE_STRING||e===v["a"].MULTI_LINE_STRING){t=M.LINE_STRING}else if(e===v["a"].POLYGON||e===v["a"].MULTI_POLYGON){t=M.POLYGON}else if(e===v["a"].CIRCLE){t=M.CIRCLE}return t}t["a"]=j},function(e,t,r){"use strict";var n=r(249);var i=r(2);var u=r(41);var c=r(71);var a=function(e){function t(){e.call(this);this.pendingRemovals_={};this.dispatching_={};this.listeners_={}}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.addEventListener=function e(t,r){var n=this.listeners_[t];if(!n){n=this.listeners_[t]=[]}if(n.indexOf(r)===-1){n.push(r)}};t.prototype.dispatchEvent=function e(t){var r=typeof t==="string"?new c["a"](t):t;var n=r.type;r.target=this;var i=this.listeners_[n];var a;if(i){if(!(n in this.dispatching_)){this.dispatching_[n]=0;this.pendingRemovals_[n]=0}++this.dispatching_[n];for(var o=0,s=i.length;o<s;++o){if(i[o].call(this,r)===false||r.propagationStopped){a=false;break}}--this.dispatching_[n];if(this.dispatching_[n]===0){var l=this.pendingRemovals_[n];delete this.pendingRemovals_[n];while(l--){this.removeEventListener(n,u["c"])}delete this.dispatching_[n]}return a}};t.prototype.disposeInternal=function e(){Object(i["d"])(this)};t.prototype.getListeners=function e(t){return this.listeners_[t]};t.prototype.hasListener=function e(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0};t.prototype.removeEventListener=function e(t,r){var n=this.listeners_[t];if(n){var i=n.indexOf(r);if(t in this.pendingRemovals_){n[i]=u["c"];++this.pendingRemovals_[t]}else{n.splice(i,1);if(n.length===0){delete this.listeners_[t]}}}};return t}(n["a"]);t["a"]=a},function(e,t,r){"use strict";var g=r(227);var n=r(250);var s=r(38);var m=r(2);var _=r(12);var y=r(3);var i=function(o){function e(e,t,r,n,i,a){o.call(this,e,t,r,s["a"].IDLE);this.src_=n;this.image_=new Image;if(i!==null){this.image_.crossOrigin=i}this.imageListenerKeys_=null;this.state=s["a"].IDLE;this.imageLoadFunction_=a}if(o)e.__proto__=o;e.prototype=Object.create(o&&o.prototype);e.prototype.constructor=e;e.prototype.getImage=function e(){return this.image_};e.prototype.handleImageError_=function e(){this.state=s["a"].ERROR;this.unlistenImage_();this.changed()};e.prototype.handleImageLoad_=function e(){if(this.resolution===undefined){this.resolution=Object(y["A"])(this.extent)/this.image_.height}this.state=s["a"].LOADED;this.unlistenImage_();this.changed()};e.prototype.load=function e(){if(this.state==s["a"].IDLE||this.state==s["a"].ERROR){this.state=s["a"].LOADING;this.changed();this.imageListenerKeys_=[Object(m["b"])(this.image_,_["a"].ERROR,this.handleImageError_,this),Object(m["b"])(this.image_,_["a"].LOAD,this.handleImageLoad_,this)];this.imageLoadFunction_(this,this.src_)}};e.prototype.setImage=function e(t){this.image_=t};e.prototype.unlistenImage_=function e(){this.imageListenerKeys_.forEach(m["e"]);this.imageListenerKeys_=null};return e}(n["a"]);var b=i;var u=r(25);var w=r(9);var f=r(10);var h=r(190);var a=r(295);var c=r(194);var o=r(139);var d=r(127);var p=[101,101];var l=function(r){function e(e){var t=e||{};r.call(this,{attributions:t.attributions,projection:t.projection,resolutions:t.resolutions});this.crossOrigin_=t.crossOrigin!==undefined?t.crossOrigin:null;this.url_=t.url;this.imageLoadFunction_=t.imageLoadFunction!==undefined?t.imageLoadFunction:a["b"];this.params_=t.params||{};this.v13_=true;this.updateV13_();this.serverType_=t.serverType;this.hidpi_=t.hidpi!==undefined?t.hidpi:true;this.image_=null;this.imageSize_=[0,0];this.renderedRevision_=0;this.ratio_=t.ratio!==undefined?t.ratio:1.5}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;e.prototype.getGetFeatureInfoUrl=function e(t,r,n,i){if(this.url_===undefined){return undefined}var a=Object(f["g"])(n);var o=this.getProjection();if(o&&o!==a){r=Object(h["a"])(o,a,t,r);t=Object(f["m"])(t,a,o)}var s=Object(y["z"])(t,r,0,p);var l={SERVICE:"WMS",VERSION:g["a"],REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:true,QUERY_LAYERS:this.params_["LAYERS"]};Object(w["a"])(l,this.params_,i);var u=Math.floor((t[0]-s[0])/r);var c=Math.floor((s[3]-t[1])/r);l[this.v13_?"I":"X"]=u;l[this.v13_?"J":"Y"]=c;return this.getRequestUrl_(s,p,1,o||a,l)};e.prototype.getParams=function e(){return this.params_};e.prototype.getImageInternal=function e(t,r,n,i){if(this.url_===undefined){return null}r=this.findNearestResolution(r);if(n!=1&&(!this.hidpi_||this.serverType_===undefined)){n=1}var a=r/n;var o=Object(y["x"])(t);var s=Math.ceil(Object(y["E"])(t)/a);var l=Math.ceil(Object(y["A"])(t)/a);var u=Object(y["z"])(o,a,0,[s,l]);var c=Math.ceil(this.ratio_*Object(y["E"])(t)/a);var f=Math.ceil(this.ratio_*Object(y["A"])(t)/a);var h=Object(y["z"])(o,a,0,[c,f]);var d=this.image_;if(d&&this.renderedRevision_==this.getRevision()&&d.getResolution()==r&&d.getPixelRatio()==n&&Object(y["g"])(d.getExtent(),u)){return d}var p={SERVICE:"WMS",VERSION:g["a"],REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:true};Object(w["a"])(p,this.params_);this.imageSize_[0]=Math.round(Object(y["E"])(h)/a);this.imageSize_[1]=Math.round(Object(y["A"])(h)/a);var v=this.getRequestUrl_(h,this.imageSize_,n,i,p);this.image_=new b(h,r,n,v,this.crossOrigin_,this.imageLoadFunction_);this.renderedRevision_=this.getRevision();Object(m["a"])(this.image_,_["a"].CHANGE,this.handleImageChange,this);return this.image_};e.prototype.getImageLoadFunction=function e(){return this.imageLoadFunction_};e.prototype.getRequestUrl_=function e(t,r,n,i,a){Object(u["a"])(this.url_!==undefined,9);a[this.v13_?"CRS":"SRS"]=i.getCode();if(!("STYLES"in this.params_)){a["STYLES"]=""}if(n!=1){switch(this.serverType_){case c["a"].GEOSERVER:var o=90*n+.5|0;if("FORMAT_OPTIONS"in a){a["FORMAT_OPTIONS"]+=";dpi:"+o}else{a["FORMAT_OPTIONS"]="dpi:"+o}break;case c["a"].MAPSERVER:a["MAP_RESOLUTION"]=90*n;break;case c["a"].CARMENTA_SERVER:case c["a"].QGIS:a["DPI"]=90*n;break;default:Object(u["a"])(false,8);break}}a["WIDTH"]=r[0];a["HEIGHT"]=r[1];var s=i.getAxisOrientation();var l;if(this.v13_&&s.substr(0,2)=="ne"){l=[t[1],t[0],t[3],t[2]]}else{l=t}a["BBOX"]=l.join(",");return Object(d["a"])(this.url_,a)};e.prototype.getUrl=function e(){return this.url_};e.prototype.setImageLoadFunction=function e(t){this.image_=null;this.imageLoadFunction_=t;this.changed()};e.prototype.setUrl=function e(t){if(t!=this.url_){this.url_=t;this.image_=null;this.changed()}};e.prototype.updateParams=function e(t){Object(w["a"])(this.params_,t);this.updateV13_();this.image_=null;this.changed()};e.prototype.updateV13_=function e(){var t=this.params_["VERSION"]||g["a"];this.v13_=Object(o["a"])(t,"1.3")>=0};return e}(a["a"]);var v=t["a"]=l},function(e,t,r){"use strict";r.d(t,"a",function(){return g});r.d(t,"g",function(){return m});r.d(t,"c",function(){return _});r.d(t,"j",function(){return y});r.d(t,"b",function(){return b});r.d(t,"h",function(){return w});r.d(t,"i",function(){return C});r.d(t,"d",function(){return O});r.d(t,"f",function(){return x});r.d(t,"e",function(){return T});r.d(t,"l",function(){return M});r.d(t,"m",function(){return k});r.d(t,"k",function(){return I});var n=r(24);var i=r(40);var a=r(75);var c=r(6);var o=r(48);var s=r(37);var l=r(140);var u=r(97);var f=r(68);var h=r(136);var d=r(44);Object(n["a"])("d",0,"do","day");Object(n["a"])("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});Object(n["a"])("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});Object(n["a"])("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});Object(n["a"])("e",0,0,"weekday");Object(n["a"])("E",0,0,"isoWeekday");Object(i["a"])("day","d");Object(i["a"])("weekday","e");Object(i["a"])("isoWeekday","E");Object(a["a"])("day",11);Object(a["a"])("weekday",11);Object(a["a"])("isoWeekday",11);Object(c["a"])("d",c["d"]);Object(c["a"])("e",c["d"]);Object(c["a"])("E",c["d"]);Object(c["a"])("dd",function(e,t){return t.weekdaysMinRegex(e)});Object(c["a"])("ddd",function(e,t){return t.weekdaysShortRegex(e)});Object(c["a"])("dddd",function(e,t){return t.weekdaysRegex(e)});Object(o["c"])(["dd","ddd","dddd"],function(e,t,r,n){var i=r._locale.weekdaysParse(e,n,r._strict);if(i!=null){t.d=i}else{Object(d["a"])(r).invalidWeekday=e}});Object(o["c"])(["d","e","E"],function(e,t,r,n){t[n]=Object(s["a"])(e)});function p(e,t){if(typeof e!=="string"){return e}if(!isNaN(e)){return parseInt(e,10)}e=t.weekdaysParse(e);if(typeof e==="number"){return e}return null}function v(e,t){if(typeof e==="string"){return t.weekdaysParse(e)%7||7}return isNaN(e)?null:e}var g="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");function m(e,t){if(!e){return Object(l["a"])(this._weekdays)?this._weekdays:this._weekdays["standalone"]}return Object(l["a"])(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]}var _="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function y(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort}var b="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function w(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin}function S(e,t,r){var n,i,a,o=e.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[];this._shortWeekdaysParse=[];this._minWeekdaysParse=[];for(n=0;n<7;++n){a=Object(h["a"])([2e3,1]).day(n);this._minWeekdaysParse[n]=this.weekdaysMin(a,"").toLocaleLowerCase();this._shortWeekdaysParse[n]=this.weekdaysShort(a,"").toLocaleLowerCase();this._weekdaysParse[n]=this.weekdays(a,"").toLocaleLowerCase()}}if(r){if(t==="dddd"){i=u["a"].call(this._weekdaysParse,o);return i!==-1?i:null}else if(t==="ddd"){i=u["a"].call(this._shortWeekdaysParse,o);return i!==-1?i:null}else{i=u["a"].call(this._minWeekdaysParse,o);return i!==-1?i:null}}else{if(t==="dddd"){i=u["a"].call(this._weekdaysParse,o);if(i!==-1){return i}i=u["a"].call(this._shortWeekdaysParse,o);if(i!==-1){return i}i=u["a"].call(this._minWeekdaysParse,o);return i!==-1?i:null}else if(t==="ddd"){i=u["a"].call(this._shortWeekdaysParse,o);if(i!==-1){return i}i=u["a"].call(this._weekdaysParse,o);if(i!==-1){return i}i=u["a"].call(this._minWeekdaysParse,o);return i!==-1?i:null}else{i=u["a"].call(this._minWeekdaysParse,o);if(i!==-1){return i}i=u["a"].call(this._weekdaysParse,o);if(i!==-1){return i}i=u["a"].call(this._shortWeekdaysParse,o);return i!==-1?i:null}}}function C(e,t,r){var n,i,a;if(this._weekdaysParseExact){return S.call(this,e,t,r)}if(!this._weekdaysParse){this._weekdaysParse=[];this._minWeekdaysParse=[];this._shortWeekdaysParse=[];this._fullWeekdaysParse=[]}for(n=0;n<7;n++){i=Object(h["a"])([2e3,1]).day(n);if(r&&!this._fullWeekdaysParse[n]){this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i");this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i");this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")}if(!this._weekdaysParse[n]){a="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,"");this._weekdaysParse[n]=new RegExp(a.replace(".",""),"i")}if(r&&t==="dddd"&&this._fullWeekdaysParse[n].test(e)){return n}else if(r&&t==="ddd"&&this._shortWeekdaysParse[n].test(e)){return n}else if(r&&t==="dd"&&this._minWeekdaysParse[n].test(e)){return n}else if(!r&&this._weekdaysParse[n].test(e)){return n}}}function O(e){if(!this.isValid()){return e!=null?this:NaN}var t=this._isUTC?this._d.getUTCDay():this._d.getDay();if(e!=null){e=p(e,this.localeData());return this.add(e-t,"d")}else{return t}}function x(e){if(!this.isValid()){return e!=null?this:NaN}var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function T(e){if(!this.isValid()){return e!=null?this:NaN}if(e!=null){var t=v(e,this.localeData());return this.day(this.day()%7?t:t-7)}else{return this.day()||7}}var E=c["s"];function M(e){if(this._weekdaysParseExact){if(!Object(f["a"])(this,"_weekdaysRegex")){D.call(this)}if(e){return this._weekdaysStrictRegex}else{return this._weekdaysRegex}}else{if(!Object(f["a"])(this,"_weekdaysRegex")){this._weekdaysRegex=E}return this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex}}var A=c["s"];function k(e){if(this._weekdaysParseExact){if(!Object(f["a"])(this,"_weekdaysRegex")){D.call(this)}if(e){return this._weekdaysShortStrictRegex}else{return this._weekdaysShortRegex}}else{if(!Object(f["a"])(this,"_weekdaysShortRegex")){this._weekdaysShortRegex=A}return this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}}var j=c["s"];function I(e){if(this._weekdaysParseExact){if(!Object(f["a"])(this,"_weekdaysRegex")){D.call(this)}if(e){return this._weekdaysMinStrictRegex}else{return this._weekdaysMinRegex}}else{if(!Object(f["a"])(this,"_weekdaysMinRegex")){this._weekdaysMinRegex=j}return this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}}function D(){function e(e,t){return t.length-e.length}var t=[],r=[],n=[],i=[],a,o,s,l,u;for(a=0;a<7;a++){o=Object(h["a"])([2e3,1]).day(a);s=this.weekdaysMin(o,"");l=this.weekdaysShort(o,"");u=this.weekdays(o,"");t.push(s);r.push(l);n.push(u);i.push(s);i.push(l);i.push(u)}t.sort(e);r.sort(e);n.sort(e);i.sort(e);for(a=0;a<7;a++){r[a]=Object(c["t"])(r[a]);n[a]=Object(c["t"])(n[a]);i[a]=Object(c["t"])(i[a])}this._weekdaysRegex=new RegExp("^("+i.join("|")+")","i");this._weekdaysShortRegex=this._weekdaysRegex;this._weekdaysMinRegex=this._weekdaysRegex;this._weekdaysStrictRegex=new RegExp("^("+n.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}},function(e,r,t){(function(e,t){true?t(r):undefined})(this,function(e){"use strict";var i=new Date,l=new Date;function u(a,o,r,n){function s(e){return a(e=new Date(+e)),e}s.floor=s;s.ceil=function(e){return a(e=new Date(e-1)),o(e,1),a(e),e};s.round=function(e){var t=s(e),r=s.ceil(e);return e-t<r-e?t:r};s.offset=function(e,t){return o(e=new Date(+e),t==null?1:Math.floor(t)),e};s.range=function(e,t,r){var n=[],i;e=s.ceil(e);r=r==null?1:Math.floor(r);if(!(e<t)||!(r>0))return n;do{n.push(i=new Date(+e)),o(e,r),a(e)}while(i<e&&e<t);return n};s.filter=function(r){return u(function(e){if(e>=e)while(a(e),!r(e)){e.setTime(e-1)}},function(e,t){if(e>=e){if(t<0)while(++t<=0){while(o(e,-1),!r(e)){}}else while(--t>=0){while(o(e,+1),!r(e)){}}}})};if(r){s.count=function(e,t){i.setTime(+e),l.setTime(+t);a(i),a(l);return Math.floor(r(i,l))};s.every=function(t){t=Math.floor(t);return!isFinite(t)||!(t>0)?null:!(t>1)?s:s.filter(n?function(e){return n(e)%t===0}:function(e){return s.count(0,e)%t===0})}}return s}var t=u(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});t.every=function(r){r=Math.floor(r);if(!isFinite(r)||!(r>0))return null;if(!(r>1))return t;return u(function(e){e.setTime(Math.floor(e/r)*r)},function(e,t){e.setTime(+e+t*r)},function(e,t){return(t-e)/r})};var r=t.range;var n=1e3;var a=6e4;var o=36e5;var s=864e5;var c=6048e5;var f=u(function(e){e.setTime(Math.floor(e/n)*n)},function(e,t){e.setTime(+e+t*n)},function(e,t){return(t-e)/n},function(e){return e.getUTCSeconds()});var h=f.range;var d=u(function(e){e.setTime(Math.floor(e/a)*a)},function(e,t){e.setTime(+e+t*a)},function(e,t){return(t-e)/a},function(e){return e.getMinutes()});var p=d.range;var v=u(function(e){var t=e.getTimezoneOffset()*a%o;if(t<0)t+=o;e.setTime(Math.floor((+e-t)/o)*o+t)},function(e,t){e.setTime(+e+t*o)},function(e,t){return(t-e)/o},function(e){return e.getHours()});var g=v.range;var m=u(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*a)/s},function(e){return e.getDate()-1});var _=m.range;function y(t){return u(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7);e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t*7)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*a)/c})}var b=y(0);var w=y(1);var S=y(2);var C=y(3);var O=y(4);var x=y(5);var T=y(6);var E=b.range;var M=w.range;var A=S.range;var k=C.range;var j=O.range;var I=x.range;var D=T.range;var P=u(function(e){e.setDate(1);e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()});var R=P.range;var L=u(function(e){e.setMonth(0,1);e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});L.every=function(r){return!isFinite(r=Math.floor(r))||!(r>0)?null:u(function(e){e.setFullYear(Math.floor(e.getFullYear()/r)*r);e.setMonth(0,1);e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t*r)})};var N=L.range;var $=u(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*a)},function(e,t){return(t-e)/a},function(e){return e.getUTCMinutes()});var F=$.range;var G=u(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*o)},function(e,t){return(t-e)/o},function(e){return e.getUTCHours()});var U=G.range;var H=u(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/s},function(e){return e.getUTCDate()-1});var W=H.range;function Y(t){return u(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7);e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t*7)},function(e,t){return(t-e)/c})}var V=Y(0);var q=Y(1);var z=Y(2);var B=Y(3);var K=Y(4);var X=Y(5);var Z=Y(6);var Q=V.range;var J=q.range;var ee=z.range;var te=B.range;var re=K.range;var ne=X.range;var ie=Z.range;var ae=u(function(e){e.setUTCDate(1);e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12},function(e){return e.getUTCMonth()});var oe=ae.range;var se=u(function(e){e.setUTCMonth(0,1);e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});se.every=function(r){return!isFinite(r=Math.floor(r))||!(r>0)?null:u(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/r)*r);e.setUTCMonth(0,1);e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t*r)})};var le=se.range;e.timeInterval=u;e.timeMillisecond=t;e.timeMilliseconds=r;e.utcMillisecond=t;e.utcMilliseconds=r;e.timeSecond=f;e.timeSeconds=h;e.utcSecond=f;e.utcSeconds=h;e.timeMinute=d;e.timeMinutes=p;e.timeHour=v;e.timeHours=g;e.timeDay=m;e.timeDays=_;e.timeWeek=b;e.timeWeeks=E;e.timeSunday=b;e.timeSundays=E;e.timeMonday=w;e.timeMondays=M;e.timeTuesday=S;e.timeTuesdays=A;e.timeWednesday=C;e.timeWednesdays=k;e.timeThursday=O;e.timeThursdays=j;e.timeFriday=x;e.timeFridays=I;e.timeSaturday=T;e.timeSaturdays=D;e.timeMonth=P;e.timeMonths=R;e.timeYear=L;e.timeYears=N;e.utcMinute=$;e.utcMinutes=F;e.utcHour=G;e.utcHours=U;e.utcDay=H;e.utcDays=W;e.utcWeek=V;e.utcWeeks=Q;e.utcSunday=V;e.utcSundays=Q;e.utcMonday=q;e.utcMondays=J;e.utcTuesday=z;e.utcTuesdays=ee;e.utcWednesday=B;e.utcWednesdays=te;e.utcThursday=K;e.utcThursdays=re;e.utcFriday=X;e.utcFridays=ne;e.utcSaturday=Z;e.utcSaturdays=ie;e.utcMonth=ae;e.utcMonths=oe;e.utcYear=se;e.utcYears=le;Object.defineProperty(e,"__esModule",{value:true})})},function(t,r,n){var i,a,o;(function(e){if(true){!(a=[n(27)],i=e,o=typeof i==="function"?i.apply(r,a):i,o!==undefined&&(t.exports=o))}else{}})(function(e){e.ui=e.ui||{};return e.ui.version="1.12.1"})},function(e,t,r){"use strict";var u=r(15);var c=r(139);var n=angular.module("ngeoAngularFilters",[]);n.Scalify=function(e){var n=e("number");var t=function e(t){var r=n(t,0);return r?"1 : "+r:""};t["$stateful"]=true;return t};n.Scalify.$inject=["$filter"];n.filter("ngeoScalify",n.Scalify);n.Number=function(e){var p=e.NUMBER_FORMATS;var t=function e(t,r){var n=p.GROUP_SEP;var i=p.DECIMAL_SEP;if(r===undefined){r=3}if(t===Infinity){return"∞"}else if(t===-Infinity){return"-∞"}else if(t===0){return"0"}var a=t<0;t=Math.abs(t);var o=r-Math.floor(Math.log(t)/Math.log(10))-1;var s=Math.pow(10,o);t=Math.round(t*s);var l="";var u=Math.floor(t/s);if(o>0){var c=""+t;while(c.length<o){c="0"+c}l=c.substring(c.length-o);while(l[l.length-1]==="0"){l=l.substring(0,l.length-1)}}var f=[];var h=""+u;while(h.length>3){var d=h.length-3;f.unshift(h.substring(d));h=h.substring(0,d)}f.unshift(h);return(a?"-":"")+f.join(n)+(l.length===0?"":i+l)};return t};n.Number.$inject=["$locale"];n.filter("ngeoNumber",n.Number);n.UnitPrefix=function(e){var f=e("ngeoNumber");var h=["","k","M","G","T","P"];var d=["","Ki","Mi","Gi","Ti","Pi"];var t=function e(t,r,n,i){if(r===undefined){r=""}var a=1e3;var o=h;if(n==="square"){a=1e6}else if(n==="binary"){a=1024;o=d}var s=0;var l=o.length-1;while(t>=a&&s<l){t=t/a;s++}var u=o[s]+r;var c=u.length==0?"":" ";return f(t,i)+c+u};return t};n.UnitPrefix.$inject=["$filter"];n.filter("ngeoUnitPrefix",n.UnitPrefix);n.NumberCoordinates=function(l){var e=function e(t,r,n){var i=n?n:"{x} {y}";var a=t[0];var o=t[1];var s=parseInt(r,10)|0;a=l("number")(a,s);o=l("number")(o,s);return i.replace("{x}",a).replace("{y}",o)};return e};n.NumberCoordinates.$inject=["$filter"];n.filter("ngeoNumberCoordinates",n.NumberCoordinates);n.DMSCoordinates=function(){var l=function e(t,r,n){var i=u["d"](t+180,360)-180;var a=Math.abs(3600*i);var o=Math.floor(a/3600);var s=Math.floor(a/60%60);var l=a%60;return o+"° "+c["b"](s,2)+"′ "+c["b"](l,2,n)+"″ "+r.charAt(i<0?1:0)};var e=function e(t,r,n){var i=parseInt(r,10)|0;var a=n?n:"{x} {y}";var o=l(t[0],"EW",i);var s=l(t[1],"NS",i);return a.replace("{x}",o).replace("{y}",s)};return e};n.filter("ngeoDMSCoordinates",n.DMSCoordinates);n.trustHtmlFilter=function(t){return function(e){if(e!==undefined&&e!==null){return t.trustAsHtml(""+e)}else{return t.trustAsHtml("&nbsp;")}}};n.trustHtmlFilter.$inject=["$sce"];n.filter("ngeoTrustHtml",n.trustHtmlFilter);n.trustHtmlAutoFilter=function(o,s){return function(e){if(e!==undefined&&e!==null){if(typeof e==="string"){for(var t=s,r=Array.isArray(t),n=0,t=r?t:t[Symbol.iterator]();;){var i;if(r){if(n>=t.length)break;i=t[n++]}else{n=t.next();if(n.done)break;i=n.value}var a=i;if(e.match(a.expression)){e=a.template.replace(/\$1/g,e);break}}return o.trustAsHtml(""+e)}else{return o.trustAsHtml(""+e)}}else{return o.trustAsHtml("&nbsp;")}}};n.trustHtmlAutoFilter.$inject=["$sce","ngeoStringToHtmlReplacements"];n.filter("ngeoTrustHtmlAuto",n.trustHtmlAutoFilter);n.Duration=function(i){var a=Object.freeze({SECONDS:Symbol("seconds"),MINUTES:Symbol("minutes"),HOURS:Symbol("hours"),DAYS:Symbol("days")});var o=function e(t,r){var n="";switch(r){case a.SECONDS:n=i.getPlural(t,"second","seconds");break;case a.MINUTES:n=i.getPlural(t,"minute","minutes");break;case a.HOURS:n=i.getPlural(t,"hour","hours");break;case a.DAYS:n=i.getPlural(t,"day","days");break;default:break}return t+" "+n};var e=function e(t){t=Math.round(t);var r;if(t<60){return o(t,a.SECONDS)}var n=t%60;t=Math.floor(t/60);if(t<60){r=o(t,a.MINUTES);if(n>0){r+=" "+o(n,a.SECONDS)}return r}n=t%60;t=Math.floor(t/60);if(t<24){r=o(t,a.HOURS);if(n>0){r+=" "+o(n,a.MINUTES)}return r}n=t%24;t=Math.floor(t/24);r=o(t,a.DAYS);if(n>0){r+=" "+o(n,a.HOURS)}return r};return e};n.Duration.$inject=["gettextCatalog"];n.filter("ngeoDuration",n.Duration);n.StringToHtmlReplacements=[{expression:/^(https?:\/\/.+)$/gm,template:'<a target="_blank" href="$1">$1</a>'},{expression:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/gim,template:'<a href="mailto:$1">$1</a>'}];n.constant("ngeoStringToHtmlReplacements",n.StringToHtmlReplacements);t["a"]=n},function(e,t,r){"use strict";var n=r(1);var i=r(223);var a=r(5);var o=function e(t,r){this.$filter_=t;this.gettextCatalog_=r;i["a"].call(this)};o.$inject=["$filter","gettextCatalog"];o.$inject=["$filter","gettextCatalog"];a["d"](o,i["a"]);o.prototype.formatTimeValue=function(e,t,r,n){var i=new Date(e);var a=n?"UTC":undefined;var o="yyyy";var s="yyyy-MM";var l="yyyy-MM-dd";if(!r){var u=this.gettextCatalog_;o=u.getString("yyyy");s=u.getString("M/yyyy");l=u.getString("M/d/yyyy")}switch(t){case"year":return this.$filter_("date")(i,o,a);case"month":return this.$filter_("date")(i,s,a);case"day":return this.$filter_("date")(i,l,a);default:return i.toISOString().replace(/\.\d{3}/,"")}};o.prototype.formatWMSTimeParam=function(e,t,r){n["a"].assert(e.resolution!==undefined);if(e.mode==="range"){n["a"].assert(t.end!==undefined);return this.formatTimeValue(t.start,e.resolution,true,r)+"/"+this.formatTimeValue(t.end,e.resolution,true,r)}else{return this.formatTimeValue(t.start,e.resolution,true,r)}};o.module=angular.module("ngeoWMSTime",[i["a"].module.name]);o.module.service("ngeoWMSTime",o);t["a"]=o},function(e,t,r){"use strict";var n=angular.module("ngeoBtnComponent",[]);n.btnGroupComponent_=function(o){return{restrict:"A",controller:"ngeoBtnGroupController",link:function e(t,r,n,i){var a=o(n["ngeoBtnGroupActive"]).assign;if(a){t.$watch(function(){return i.buttons_.some(function(e){return e(t)===true})},function(e){a(t,e)})}}}};n.btnGroupComponent_.$inject=["$parse"];n.directive("ngeoBtnGroup",n.btnGroupComponent_);n.BtnGroupController=function(e){this.buttons_=[];this.scope_=e};n.BtnGroupController.$inject=["$scope"];n.BtnGroupController.prototype.activate=function(r){var n=this;this.buttons_.forEach(function(e,t){if(t!=r){e.assign(n.scope_,false)}})};n.BtnGroupController.prototype.addButton=function(e){this.buttons_.push(e);return this.buttons_.length-1};n.controller("ngeoBtnGroupController",n.BtnGroupController);n.btnComponent_=function(c){return{require:["?^ngeoBtnGroup","ngModel"],restrict:"A",link:function e(t,r,n,i){var a=i[0];var o=i[1];var s=-1;var l=c(n["ngModel"]);var u=l.assign;if(l(t)===undefined){u(t,false)}if(a!==null){s=a.addButton(l)}r.on("click",function(){t.$apply(function(){o.$setViewValue(!o.$viewValue);o.$render()})});o.$render=function(){if(o.$viewValue&&a!==null){a.activate(s)}r.toggleClass("active",o.$viewValue)}}}};n.btnComponent_.$inject=["$parse"];n.directive("ngeoBtn",n.btnComponent_);t["a"]=n},function(e,t,r){"use strict";var n=r(252);var p=r(1);var v=r(2);var g=r(34);var i=angular.module("ngeoMap",[]);i.directive_=function(d){return{restrict:"A",link:function e(t,r,n){var i="ngeoMap";var a=n[i];var o=t.$eval(a);p["a"].assertInstanceof(o,g["a"]);o.setTarget(r[0]);var s="ngeoMapManageResize";var l=n[s];var u=t.$eval(l);if(u){var c="ngeoMapResizeTransition";var f=n[c];var h=t.$eval(f);v["a"](d,"resize",function(){if(h){var t=Date.now();var r=true;var e=function e(){o.updateSize();o.renderSync();if(r){d.requestAnimationFrame(e)}if(Date.now()-t>h){r=false}};e()}else{o.updateSize()}})}}}};i.directive_.$inject=["$window"];i.directive("ngeoMap",i.directive_);var a=i;var o=r(105);var s=r(404);var l=angular.module("ngeoResizemap",[]);l.directive_=function(f){var h=1e3;return{restrict:"A",link:function e(t,r,n){var i="ngeoResizemap";var a=n[i];var o=t.$eval(a);p["a"].assertInstanceof(o,g["a"]);var s=n["ngeoResizemapState"];p["a"].assert(s!==undefined);var l;var u;var c=function e(){o.updateSize();o.renderSync();if(Date.now()-l<h){u=f.requestAnimationFrame(e)}};r.on("transitionend",function(){o.updateSize();o.renderSync()});t.$watch(s,function(e,t){if(e!=t){l=Date.now();f.cancelAnimationFrame(u);u=f.requestAnimationFrame(c)}})}}};l.directive_.$inject=["$window"];l.directive("ngeoResizemap",l.directive_);var u=l;var f=r(8);var c=r(177);var h=angular.module("ngeoScaleselector",[]);h.value("ngeoScaleselectorTemplateUrl",function(e,t){var r=t["ngeoScaleselectorTemplateurl"];return r!==undefined?r:"ngeo/map/scaleselector"});h.run(["$templateCache",function(e){e.put("ngeo/map/scaleselector",r(496))}]);var d=function e(t){return{restrict:"A",scope:true,controller:"NgeoScaleselectorController",templateUrl:t}};d.$inject=["ngeoScaleselectorTemplateUrl"];d.$inject=["ngeoScaleselectorTemplateUrl"];h.directive("ngeoScaleselector",d);var m=function e(t,r,n){var i=this;var a=n["ngeoScaleselector"];this.scales=t.$eval(a);p["a"].assert(this.scales!==undefined);this.zoomLevels;t.$watch(function(){return Object.keys(i.scales).length},function(e){i.zoomLevels=Object.keys(i.scales).map(Number);i.zoomLevels.sort(f["i"])});var o=n["ngeoScaleselectorMap"];this.map_=t.$eval(o);p["a"].assertInstanceof(this.map_,g["a"]);var s=n["ngeoScaleselectorOptions"];var l=t.$eval(s);this.options=e.getOptions_(l);this.$scope_=t;this.resolutionChangeKey_=null;this.currentScale=undefined;var u=this.map_.getView();if(u!==null){var c=this.map_.getView().getZoom();if(c!==undefined){this.currentScale=this.getScale(c)}}v["a"](this.map_,"change:view",this.handleViewChange_,this);this.registerResolutionChangeListener_();t["scaleselectorCtrl"]=this};m.$inject=["$scope","$element","$attrs"];m.$inject=["$scope","$element","$attrs"];m.getOptions_=function(e){var t=false;if(e!==undefined){t=e["dropup"]==true}return{dropup:t}};m.prototype.getScale=function(e){return this.scales[e]};m.prototype.changeZoom=function(e){this.map_.getView().setZoom(e)};m.prototype.handleResolutionChange_=function(e){var t=this;var r=this.map_.getView();var n=this.scales[r.getZoom()];if(n!==undefined){this.$scope_.$applyAsync(function(){t.currentScale=n})}};m.prototype.handleViewChange_=function(e){this.registerResolutionChangeListener_();this.handleResolutionChange_(null)};m.prototype.registerResolutionChangeListener_=function(){if(this.resolutionChangeKey_!==null){v["e"](this.resolutionChangeKey_)}var e=this.map_.getView();this.resolutionChangeKey_=v["a"](e,"change:resolution",this.handleResolutionChange_,this)};h.controller("NgeoScaleselectorController",m);var _=h;var y=angular.module("ngeoMapModule",[n["a"].module.name,a.name,o["a"].module.name,s["a"].name,u.name,_.name]);var b=t["a"]=y},function(e,t,r){"use strict";r.d(t,"a",function(){return n});function n(e){return e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}},function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"d",function(){return i});r.d(t,"c",function(){return a});r.d(t,"b",function(){return o});r.d(t,"e",function(){return s});r.d(t,"f",function(){return u});function n(e,t,r,n){if(n!==undefined){n[0]=e;n[1]=t;n[2]=r;return n}else{return[e,t,r]}}function i(e,t,r){return e+"/"+t+"/"+r}function a(e){return i(e[0],e[1],e[2])}function o(e){return e.split("/").map(Number)}function s(e){return(e[1]<<e[0])+e[2]}function l(e){var t=e[0];var r=new Array(t);var n=1<<t-1;var i,a;for(i=0;i<t;++i){a=48;if(e[1]&n){a+=1}if(e[2]&n){a+=2}r[i]=String.fromCharCode(a);n>>=1}return r.join("")}function u(e,t){var r=e[0];var n=e[1];var i=e[2];if(t.getMinZoom()>r||r>t.getMaxZoom()){return false}var a=t.getExtent();var o;if(!a){o=t.getFullTileRange(r)}else{o=t.getTileRangeForExtentAndZ(a,r)}if(!o){return true}else{return o.containsXY(n,i)}}},function(e,r,n){(function(e,t){true?t(r,n(342)):undefined})(this,function(e,l){"use strict";function u(e,t,r,n,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*r+(1+3*e+3*a-3*o)*n+o*i)/6}function t(o){var s=o.length-1;return function(e){var t=e<=0?e=0:e>=1?(e=1,s-1):Math.floor(e*s),r=o[t],n=o[t+1],i=t>0?o[t-1]:2*r-n,a=t<s-1?o[t+2]:2*n-r;return u((e-t/s)*s,i,r,n,a)}}function r(o){var s=o.length;return function(e){var t=Math.floor(((e%=1)<0?++e:e)*s),r=o[(t+s-1)%s],n=o[t%s],i=o[(t+1)%s],a=o[(t+2)%s];return u((e-t/s)*s,r,n,i,a)}}function i(e){return function(){return e}}function n(t,r){return function(e){return t+e*r}}function a(t,r,n){return t=Math.pow(t,n),r=Math.pow(r,n)-t,n=1/n,function(e){return Math.pow(t+e*r,n)}}function o(e,t){var r=t-e;return r?n(e,r>180||r<-180?r-360*Math.round(r/360):r):i(isNaN(e)?t:e)}function s(r){return(r=+r)===1?c:function(e,t){return t-e?a(e,t,r):i(isNaN(e)?t:e)}}function c(e,t){var r=t-e;return r?n(e,r):i(isNaN(e)?t:e)}var f=function e(t){var o=s(t);function r(t,e){var r=o((t=l.rgb(t)).r,(e=l.rgb(e)).r),n=o(t.g,e.g),i=o(t.b,e.b),a=c(t.opacity,e.opacity);return function(e){t.r=r(e);t.g=n(e);t.b=i(e);t.opacity=a(e);return t+""}}r.gamma=e;return r}(1);function h(s){return function(e){var t=e.length,r=new Array(t),n=new Array(t),i=new Array(t),a,o;for(a=0;a<t;++a){o=l.rgb(e[a]);r[a]=o.r||0;n[a]=o.g||0;i[a]=o.b||0}r=s(r);n=s(n);i=s(i);o.opacity=1;return function(e){o.r=r(e);o.g=n(e);o.b=i(e);return o+""}}}var d=h(t);var p=h(r);function v(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),a=new Array(r),o;for(o=0;o<n;++o){i[o]=O(e[o],t[o])}for(;o<r;++o){a[o]=t[o]}return function(e){for(o=0;o<n;++o){a[o]=i[o](e)}return a}}function g(t,r){var n=new Date;return t=+t,r-=t,function(e){return n.setTime(t+r*e),n}}function m(t,r){return t=+t,r-=t,function(e){return t+r*e}}function _(e,t){var r={},n={},i;if(e===null||typeof e!=="object")e={};if(t===null||typeof t!=="object")t={};for(i in t){if(i in e){r[i]=O(e[i],t[i])}else{n[i]=t[i]}}return function(e){for(i in r){n[i]=r[i](e)}return n}}var y=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,b=new RegExp(y.source,"g");function w(e){return function(){return e}}function S(t){return function(e){return t(e)+""}}function C(e,n){var t=y.lastIndex=b.lastIndex=0,r,i,a,o=-1,s=[],l=[];e=e+"",n=n+"";while((r=y.exec(e))&&(i=b.exec(n))){if((a=i.index)>t){a=n.slice(t,a);if(s[o])s[o]+=a;else s[++o]=a}if((r=r[0])===(i=i[0])){if(s[o])s[o]+=i;else s[++o]=i}else{s[++o]=null;l.push({i:o,x:m(r,i)})}t=b.lastIndex}if(t<n.length){a=n.slice(t);if(s[o])s[o]+=a;else s[++o]=a}return s.length<2?l[0]?S(l[0].x):w(n):(n=l.length,function(e){for(var t=0,r;t<n;++t){s[(r=l[t]).i]=r.x(e)}return s.join("")})}function O(e,t){var r=typeof t,n;return t==null||r==="boolean"?i(t):(r==="number"?m:r==="string"?(n=l.color(t))?(t=n,f):C:t instanceof l.color?f:t instanceof Date?g:Array.isArray(t)?v:typeof t.valueOf!=="function"&&typeof t.toString!=="function"||isNaN(t)?_:m)(e,t)}function x(t){var r=t.length;return function(e){return t[Math.max(0,Math.min(r-1,Math.floor(e*r)))]}}function T(e,t){var r=o(+e,+t);return function(e){var t=r(e);return t-360*Math.floor(t/360)}}function E(t,r){return t=+t,r-=t,function(e){return Math.round(t+r*e)}}var M=180/Math.PI;var A={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function k(e,t,r,n,i,a){var o,s,l;if(o=Math.sqrt(e*e+t*t))e/=o,t/=o;if(l=e*r+t*n)r-=e*l,n-=t*l;if(s=Math.sqrt(r*r+n*n))r/=s,n/=s,l/=s;if(e*n<t*r)e=-e,t=-t,l=-l,o=-o;return{translateX:i,translateY:a,rotate:Math.atan2(t,e)*M,skewX:Math.atan(l)*M,scaleX:o,scaleY:s}}var j,I,D,P;function R(e){if(e==="none")return A;if(!j)j=document.createElement("DIV"),I=document.documentElement,D=document.defaultView;j.style.transform=e;e=D.getComputedStyle(I.appendChild(j),null).getPropertyValue("transform");I.removeChild(j);e=e.slice(7,-1).split(",");return k(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5])}function L(e){if(e==null)return A;if(!P)P=document.createElementNS("http://www.w3.org/2000/svg","g");P.setAttribute("transform",e);if(!(e=P.transform.baseVal.consolidate()))return A;e=e.matrix;return k(e.a,e.b,e.c,e.d,e.e,e.f)}function N(r,s,l,i){function u(e){return e.length?e.pop()+" ":""}function n(e,t,r,n,i,a){if(e!==r||t!==n){var o=i.push("translate(",null,s,null,l);a.push({i:o-4,x:m(e,r)},{i:o-2,x:m(t,n)})}else if(r||n){i.push("translate("+r+s+n+l)}}function o(e,t,r,n){if(e!==t){if(e-t>180)t+=360;else if(t-e>180)e+=360;n.push({i:r.push(u(r)+"rotate(",null,i)-2,x:m(e,t)})}else if(t){r.push(u(r)+"rotate("+t+i)}}function c(e,t,r,n){if(e!==t){n.push({i:r.push(u(r)+"skewX(",null,i)-2,x:m(e,t)})}else if(t){r.push(u(r)+"skewX("+t+i)}}function f(e,t,r,n,i,a){if(e!==r||t!==n){var o=i.push(u(i)+"scale(",null,",",null,")");a.push({i:o-4,x:m(e,r)},{i:o-2,x:m(t,n)})}else if(r!==1||n!==1){i.push(u(i)+"scale("+r+","+n+")")}}return function(e,t){var i=[],a=[];e=r(e),t=r(t);n(e.translateX,e.translateY,t.translateX,t.translateY,i,a);o(e.rotate,t.rotate,i,a);c(e.skewX,t.skewX,i,a);f(e.scaleX,e.scaleY,t.scaleX,t.scaleY,i,a);e=t=null;return function(e){var t=-1,r=a.length,n;while(++t<r){i[(n=a[t]).i]=n.x(e)}return i.join("")}}}var $=N(R,"px, ","px)","deg)");var F=N(L,", ",")",")");var G=Math.SQRT2,U=2,H=4,W=1e-12;function Y(e){return((e=Math.exp(e))+1/e)/2}function V(e){return((e=Math.exp(e))-1/e)/2}function q(e){return((e=Math.exp(2*e))-1)/(e+1)}function z(e,t){var a=e[0],o=e[1],s=e[2],r=t[0],n=t[1],i=t[2],l=r-a,u=n-o,c=l*l+u*u,f,h;if(c<W){h=Math.log(i/s)/G;f=function e(t){return[a+t*l,o+t*u,s*Math.exp(G*t*h)]}}else{var d=Math.sqrt(c),p=(i*i-s*s+H*c)/(2*s*U*d),v=(i*i-s*s-H*c)/(2*i*U*d),g=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(v*v+1)-v);h=(m-g)/G;f=function e(t){var r=t*h,n=Y(g),i=s/(U*d)*(n*q(G*r+g)-V(g));return[a+i*l,o+i*u,s*n/Y(G*r+g)]}}f.duration=h*1e3;return f}function B(o){return function(t,e){var r=o((t=l.hsl(t)).h,(e=l.hsl(e)).h),n=c(t.s,e.s),i=c(t.l,e.l),a=c(t.opacity,e.opacity);return function(e){t.h=r(e);t.s=n(e);t.l=i(e);t.opacity=a(e);return t+""}}}var K=B(o);var X=B(c);function Z(t,e){var r=c((t=l.lab(t)).l,(e=l.lab(e)).l),n=c(t.a,e.a),i=c(t.b,e.b),a=c(t.opacity,e.opacity);return function(e){t.l=r(e);t.a=n(e);t.b=i(e);t.opacity=a(e);return t+""}}function Q(o){return function(t,e){var r=o((t=l.hcl(t)).h,(e=l.hcl(e)).h),n=c(t.c,e.c),i=c(t.l,e.l),a=c(t.opacity,e.opacity);return function(e){t.h=r(e);t.c=n(e);t.l=i(e);t.opacity=a(e);return t+""}}}var J=Q(o);var ee=Q(c);function te(s){return function e(o){o=+o;function t(t,e){var r=s((t=l.cubehelix(t)).h,(e=l.cubehelix(e)).h),n=c(t.s,e.s),i=c(t.l,e.l),a=c(t.opacity,e.opacity);return function(e){t.h=r(e);t.s=n(e);t.l=i(Math.pow(e,o));t.opacity=a(e);return t+""}}t.gamma=e;return t}(1)}var re=te(o);var ne=te(c);function ie(e,t){var r=0,n=t.length-1,i=t[0],a=new Array(n<0?0:n);while(r<n){a[r]=e(i,i=t[++r])}return function(e){var t=Math.max(0,Math.min(n-1,Math.floor(e*=n)));return a[t](e-t)}}function ae(e,t){var r=new Array(t);for(var n=0;n<t;++n){r[n]=e(n/(t-1))}return r}e.interpolate=O;e.interpolateArray=v;e.interpolateBasis=t;e.interpolateBasisClosed=r;e.interpolateDate=g;e.interpolateDiscrete=x;e.interpolateHue=T;e.interpolateNumber=m;e.interpolateObject=_;e.interpolateRound=E;e.interpolateString=C;e.interpolateTransformCss=$;e.interpolateTransformSvg=F;e.interpolateZoom=z;e.interpolateRgb=f;e.interpolateRgbBasis=d;e.interpolateRgbBasisClosed=p;e.interpolateHsl=K;e.interpolateHslLong=X;e.interpolateLab=Z;e.interpolateHcl=J;e.interpolateHclLong=ee;e.interpolateCubehelix=re;e.interpolateCubehelixLong=ne;e.piecewise=ie;e.quantize=ae;Object.defineProperty(e,"__esModule",{value:true})})},function(e,t,r){"use strict";var v=r(1);var g=r(100);var m=r(5);var _=r(2);var y=r(93);var b=r(88);var a=function e(t,r,n){var i=this;var a=n["ngeoLayertreeNotroot"]===undefined;this.isRoot=a;var o=n["ngeoLayertree"];this.rootScope_=r;this.properties={};this.state_="off";this.node;if(a){t.$watch(o,function(e,t){i.node=e})}else{this.node=t.$eval(o);v["a"].assert(this.node!==undefined)}var s=n["ngeoLayertreeMap"];var l=t.$eval(s);v["a"].assert(l!==undefined);this.parent=t.$parent["layertreeCtrl"];this.children=[];if(this.parent){this.parent.children.push(this)}t.$on("$destroy",function(){if(i.parent){var e=i.parent.children.indexOf(i);v["a"].assert(e>=0);i.parent.children.splice(e,1)}});this.uid=m["c"](this);this.depth=a?0:this.parent.depth+1;t["uid"]=this.uid;t["depth"]=this.depth;this.map=l;var u=n["ngeoLayertreeNodelayer"];if(u===undefined){var c=n["ngeoLayertreeNodelayerexpr"];var f=t.$eval(c);v["a"].assertString(f);u=f}v["a"].assert(u!==undefined);this.nodelayerExpr=u;this.layer=null;if(!a){var h=t.$eval(u,{treeCtrl:this})||null;if(h){v["a"].assert(h instanceof b["a"]||h instanceof y["a"]);this.layer=h}}this.dataSource_=null;if(this.layer){g["a"].layerLoading(this.layer,t);g["a"].layer(this.layer);_["a"](this.layer,"change:opacity",function(){i.rootScope_.$broadcast("ngeo-layertree-opacity",i)})}var d=n["ngeoLayertreeListeners"];if(d===undefined){var p=n["ngeoLayertreeListenersexpr"];d=t.$eval(p)}if(d!==undefined){v["a"].assertString(d)}this.listenersExpr=d;if(d){t.$eval(d,{treeScope:t,treeCtrl:this})}t["layertreeCtrl"]=this};a.$inject=["$scope","$rootScope","$attrs"];a.$inject=["$scope","$rootScope","$attrs"];a.prototype.getState=function(){return this.state_};a.prototype.setState=function(e,t){var r=this;if(e===this.state_){return}this.setStateInternal_(e);if(this.parent){this.parent.refreshState(this,t)}var n=this.isRoot?this.children:[a.getFirstParentTree(this)];if(t===undefined||t){n.forEach(function(e){r.rootScope_.$broadcast("ngeo-layertree-state",r,e)})}};a.prototype.setStateInternal_=function(e){var t=this;this.state_=e==="on"?"on":"off";if(this.state_==="on"&&this.node.metadata&&this.node.metadata.exclusiveGroup){var r;for(var n=this.children,i=Array.isArray(n),a=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(a>=n.length)break;o=n[a++]}else{a=n.next();if(a.done)break;o=a.value}var s=o;if(!r){r=s;s.setStateInternal_("on")}else{s.setStateInternal_("off")}}}else{this.children.forEach(function(e){e.setStateInternal_(t.state_)})}};a.prototype.refreshState=function(e,t){if(this.node.children&&e&&e.getState()!=="off"&&this.node.metadata&&this.node.metadata.exclusiveGroup){var r=v["a"].assert(e);this.children.forEach(function(e){if(e!==r){e.setState("off",t)}})}var n=this.getCalculateState();if(this.state_===n){return}this.state_=n;if(this.parent){this.parent.refreshState(this,t)}};a.prototype.getCalculateState=function(){if(this.node.children===undefined){return this.state_}var t;var r;this.children.some(function(e){t=e.getCalculateState();if(r){if(r!==t){return t="indeterminate"}}r=t});return t};a.prototype.getSetActive=function(e){var t=this.layer;var r=this.map;if(!t){return}if(e!==undefined){if(!e){r.removeLayer(t)}else{r.addLayer(t)}}else{return r.getLayers().getArray().indexOf(t)>=0}};a.prototype.getDataSource=function(){return this.dataSource_};a.prototype.setDataSource=function(e){this.dataSource_=e};a.getFirstParentTree=function(e){var t=e;while(!t.parent.isRoot){t=t.parent}return t};a.VisitorDecision={STOP:"STOP",SKIP:"SKIP",DESCEND:"DESCEND"};a.Visitor;a.prototype.traverseDepthFirst=function(e){var t=e(this)||a.VisitorDecision.DESCEND;switch(t){case a.VisitorDecision.STOP:return true;case a.VisitorDecision.SKIP:return false;case a.VisitorDecision.DESCEND:for(var r=0;r<this.children.length;++r){var n=this.children[r];var i=n.traverseDepthFirst(e);if(i){return true}}return false;default:v["a"].fail("Unhandled case")}};a.module=angular.module("ngeoLayertreeController",[]);a.module.controller("ngeoLayertreeController",a);t["a"]=a},function(e,t,r){"use strict";r.d(t,"b",function(){return n});r.d(t,"a",function(){return i});var n=.5;var i=true},function(e,t,r){"use strict";r.d(t,"a",function(){return n});function n(e,t){var r=[];Object.keys(t).forEach(function(e){if(t[e]!==null&&t[e]!==undefined){r.push(e+"="+encodeURIComponent(t[e]))}});var n=r.join("&");e=e.replace(/[?&]$/,"");e=e.indexOf("?")===-1?e+"?":e+"&";return e+n}},function(e,t,r){"use strict";r.d(t,"a",function(){return h});r.d(t,"d",function(){return d});r.d(t,"c",function(){return p});r.d(t,"b",function(){return v});var n=r(99);var i=r(24);var a=r(40);var o=r(75);var s=r(6);var l=r(48);var u=r(18);var c=r(17);var f=r(37);Object(i["a"])("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e});Object(i["a"])(0,["YY",2],0,function(){return this.year()%100});Object(i["a"])(0,["YYYY",4],0,"year");Object(i["a"])(0,["YYYYY",5],0,"year");Object(i["a"])(0,["YYYYYY",6,true],0,"year");Object(a["a"])("year","y");Object(o["a"])("year",1);Object(s["a"])("Y",s["p"]);Object(s["a"])("YY",s["d"],s["h"]);Object(s["a"])("YYYY",s["f"],s["k"]);Object(s["a"])("YYYYY",s["g"],s["m"]);Object(s["a"])("YYYYYY",s["g"],s["m"]);Object(l["a"])(["YYYYY","YYYYYY"],c["i"]);Object(l["a"])("YYYY",function(e,t){t[c["i"]]=e.length===2?u["a"].parseTwoDigitYear(e):Object(f["a"])(e)});Object(l["a"])("YY",function(e,t){t[c["i"]]=u["a"].parseTwoDigitYear(e)});Object(l["a"])("Y",function(e,t){t[c["i"]]=parseInt(e,10)});function h(e){return d(e)?366:365}function d(e){return e%4===0&&e%100!==0||e%400===0}u["a"].parseTwoDigitYear=function(e){return Object(f["a"])(e)+(Object(f["a"])(e)>68?1900:2e3)};var p=Object(n["b"])("FullYear",true);function v(){return d(this.year())}},function(e,t,r){"use strict";var n=r(222);var i=r(50);var h=r(141);var a=r(90);var p=r(53);var o=r(2);var v=r(3);var s={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};var l=function(t){function e(e){t.call(this);this.options=e;this.id=e.id;this.insertFirst=e.insertFirst!==undefined?e.insertFirst:true;this.stopEvent=e.stopEvent!==undefined?e.stopEvent:true;this.element=document.createElement("div");this.element.className=e.className!==undefined?e.className:"ol-overlay-container "+a["d"];this.element.style.position="absolute";this.autoPan=e.autoPan!==undefined?e.autoPan:false;this.autoPanAnimation=e.autoPanAnimation||{};this.autoPanMargin=e.autoPanMargin!==undefined?e.autoPanMargin:20;this.rendered={bottom_:"",left_:"",right_:"",top_:"",visible:true};this.mapPostrenderListenerKey=null;Object(o["a"])(this,Object(i["b"])(s.ELEMENT),this.handleElementChanged,this);Object(o["a"])(this,Object(i["b"])(s.MAP),this.handleMapChanged,this);Object(o["a"])(this,Object(i["b"])(s.OFFSET),this.handleOffsetChanged,this);Object(o["a"])(this,Object(i["b"])(s.POSITION),this.handlePositionChanged,this);Object(o["a"])(this,Object(i["b"])(s.POSITIONING),this.handlePositioningChanged,this);if(e.element!==undefined){this.setElement(e.element)}this.setOffset(e.offset!==undefined?e.offset:[0,0]);this.setPositioning(e.positioning!==undefined?e.positioning:h["a"].TOP_LEFT);if(e.position!==undefined){this.setPosition(e.position)}}if(t)e.__proto__=t;e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;e.prototype.getElement=function e(){return this.get(s.ELEMENT)};e.prototype.getId=function e(){return this.id};e.prototype.getMap=function e(){return this.get(s.MAP)};e.prototype.getOffset=function e(){return this.get(s.OFFSET)};e.prototype.getPosition=function e(){return this.get(s.POSITION)};e.prototype.getPositioning=function e(){return this.get(s.POSITIONING)};e.prototype.handleElementChanged=function e(){Object(p["d"])(this.element);var t=this.getElement();if(t){this.element.appendChild(t)}};e.prototype.handleMapChanged=function e(){if(this.mapPostrenderListenerKey){Object(p["e"])(this.element);Object(o["e"])(this.mapPostrenderListenerKey);this.mapPostrenderListenerKey=null}var t=this.getMap();if(t){this.mapPostrenderListenerKey=Object(o["a"])(t,n["a"].POSTRENDER,this.render,this);this.updatePixelPosition();var r=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();if(this.insertFirst){r.insertBefore(this.element,r.childNodes[0]||null)}else{r.appendChild(this.element)}}};e.prototype.render=function e(){this.updatePixelPosition()};e.prototype.handleOffsetChanged=function e(){this.updatePixelPosition()};e.prototype.handlePositionChanged=function e(){this.updatePixelPosition();if(this.get(s.POSITION)&&this.autoPan){this.panIntoView()}};e.prototype.handlePositioningChanged=function e(){this.updatePixelPosition()};e.prototype.setElement=function e(t){this.set(s.ELEMENT,t)};e.prototype.setMap=function e(t){this.set(s.MAP,t)};e.prototype.setOffset=function e(t){this.set(s.OFFSET,t)};e.prototype.setPosition=function e(t){this.set(s.POSITION,t)};e.prototype.panIntoView=function e(){var t=this.getMap();if(!t||!t.getTargetElement()){return}var r=this.getRect(t.getTargetElement(),t.getSize());var n=this.getElement();var i=this.getRect(n,[Object(p["c"])(n),Object(p["b"])(n)]);var a=this.autoPanMargin;if(!Object(v["g"])(r,i)){var o=i[0]-r[0];var s=r[2]-i[2];var l=i[1]-r[1];var u=r[3]-i[3];var c=[0,0];if(o<0){c[0]=o-a}else if(s<0){c[0]=Math.abs(s)+a}if(l<0){c[1]=l-a}else if(u<0){c[1]=Math.abs(u)+a}if(c[0]!==0||c[1]!==0){var f=t.getView().getCenter();var h=t.getPixelFromCoordinate(f);var d=[h[0]+c[0],h[1]+c[1]];t.getView().animate({center:t.getCoordinateFromPixel(d),duration:this.autoPanAnimation.duration,easing:this.autoPanAnimation.easing})}}};e.prototype.getRect=function e(t,r){var n=t.getBoundingClientRect();var i=n.left+window.pageXOffset;var a=n.top+window.pageYOffset;return[i,a,i+r[0],a+r[1]]};e.prototype.setPositioning=function e(t){this.set(s.POSITIONING,t)};e.prototype.setVisible=function e(t){if(this.rendered.visible!==t){this.element.style.display=t?"":"none";this.rendered.visible=t}};e.prototype.updatePixelPosition=function e(){var t=this.getMap();var r=this.getPosition();if(!t||!t.isRendered()||!r){this.setVisible(false);return}var n=t.getPixelFromCoordinate(r);var i=t.getSize();this.updateRenderedPosition(n,i)};e.prototype.updateRenderedPosition=function e(t,r){var n=this.element.style;var i=this.getOffset();var a=this.getPositioning();this.setVisible(true);var o=i[0];var s=i[1];if(a==h["a"].BOTTOM_RIGHT||a==h["a"].CENTER_RIGHT||a==h["a"].TOP_RIGHT){if(this.rendered.left_!==""){this.rendered.left_=n.left=""}var l=Math.round(r[0]-t[0]-o)+"px";if(this.rendered.right_!=l){this.rendered.right_=n.right=l}}else{if(this.rendered.right_!==""){this.rendered.right_=n.right=""}if(a==h["a"].BOTTOM_CENTER||a==h["a"].CENTER_CENTER||a==h["a"].TOP_CENTER){o-=this.element.offsetWidth/2}var u=Math.round(t[0]+o)+"px";if(this.rendered.left_!=u){this.rendered.left_=n.left=u}}if(a==h["a"].BOTTOM_LEFT||a==h["a"].BOTTOM_CENTER||a==h["a"].BOTTOM_RIGHT){if(this.rendered.top_!==""){this.rendered.top_=n.top=""}var c=Math.round(r[1]-t[1]-s)+"px";if(this.rendered.bottom_!=c){this.rendered.bottom_=n.bottom=c}}else{if(this.rendered.bottom_!==""){this.rendered.bottom_=n.bottom=""}if(a==h["a"].CENTER_LEFT||a==h["a"].CENTER_CENTER||a==h["a"].CENTER_RIGHT){s-=this.element.offsetHeight/2}var f=Math.round(t[1]+s)+"px";if(this.rendered.top_!=f){this.rendered.top_=n.top=f}}};e.prototype.getOptions=function e(){return this.options};return e}(i["a"]);t["a"]=l},function(e,t,r){"use strict";r.d(t,"a",function(){return n});function n(e){if(e<0){return Math.ceil(e)||0}else{return Math.floor(e)}}},function(e,t,r){"use strict";t["a"]={FRACTION:"fraction",PIXELS:"pixels"}},function(e,t,r){"use strict";var i=r(1);var a=r(198);var n=r(23);var o=r(2);var s=r(43);function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function u(e,t,r){if(t)l(e.prototype,t);if(r)l(e,r);return e}var c=function(){function e(){this.collection_=new n["a"];this.map_=null;this.listenerKeys_=[];o["a"](this.collection_,"add",this.handleDataSourcesAdd_,this)}var t=e.prototype;t.bindMap_=function e(t){var r=t.getView();this.listenerKeys_.push(o["a"](r,"change:resolution",this.handleViewResolutionChange_,this));var n=r.getResolution();i["a"].assertNumber(n);this.syncDataSourcesToResolution_(n)};t.unbindMap_=function e(t){this.listenerKeys_.forEach(o["e"]);this.listenerKeys_=[]};t.handleViewResolutionChange_=function e(t){var r=t.target;i["a"].assertInstanceof(r,s["a"]);var n=r.getResolution();i["a"].assertNumber(n);this.syncDataSourcesToResolution_(n)};t.syncDataSourcesToResolution_=function e(t){var r=this;this.collection_.forEach(function(e){r.syncDataSourceToResolution_(e,t)})};t.syncDataSourceToResolution_=function e(t,r){if(!t.supportsDynamicInRange){return}var n=t.maxResolution;var i=t.minResolution;var a=i===null||i===undefined||r>=i;var o=n===null||n===undefined||r<=n;var s=a&&o;t.inRange=s};t.handleDataSourcesAdd_=function e(t){var r=i["a"].assertInstanceof(t.element,a["a"]);if(this.map_){var n=this.map_.getView().getResolution();i["a"].assertNumber(n);this.syncDataSourceToResolution_(r,n)}};u(e,[{key:"map",set:function e(t){if(this.map_===t){return}if(this.map_){this.unbindMap_(this.map_)}this.map_=t;if(t){this.bindMap_(t)}}},{key:"collection",get:function e(){return this.collection_}}]);return e}();c.module=angular.module("ngeoDataSources",[]);c.module.service("ngeoDataSources",c);t["a"]=c},function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"b",function(){return c});r.d(t,"c",function(){return f});r.d(t,"d",function(){return i});function n(e,t,r,n){for(var i=0,a=r.length;i<a;++i){e[t++]=r[i]}return t}function c(e,t,r,n){for(var i=0,a=r.length;i<a;++i){var o=r[i];for(var s=0;s<n;++s){e[t++]=o[s]}}return t}function f(e,t,r,n,i){var a=i?i:[];var o=0;for(var s=0,l=r.length;s<l;++s){var u=c(e,t,r[s],n);a[o++]=u;t=u}a.length=o;return a}function i(e,t,r,n,i){var a=i?i:[];var o=0;for(var s=0,l=r.length;s<l;++s){var u=f(e,t,r[s],n,a[o]);a[o++]=u;t=u[u.length-1]}a.length=o;return a}},function(e,t,r){"use strict";t["a"]={IMAGE:"IMAGE",TILE:"TILE",VECTOR_TILE:"VECTOR_TILE",VECTOR:"VECTOR"}},function(e,t,r){"use strict";r.d(t,"a",function(){return c});r.d(t,"b",function(){return f});r.d(t,"c",function(){return n});function c(e,t,r,n,i){var a=i!==undefined?i:[];var o=0;for(var s=t;s<r;s+=n){a[o++]=e.slice(s,s+n)}a.length=o;return a}function f(e,t,r,n,i){var a=i!==undefined?i:[];var o=0;for(var s=0,l=r.length;s<l;++s){var u=r[s];a[o++]=c(e,t,u,n,a[o]);t=u}a.length=o;return a}function n(e,t,r,n,i){var a=i!==undefined?i:[];var o=0;for(var s=0,l=r.length;s<l;++s){var u=r[s];a[o++]=f(e,t,u,n,a[o]);t=u[u.length-1]}a.length=o;return a}},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var i=r(266);function n(e,t,r,n){return Object(i["a"])(e,t,r,n,true).utc()}},function(e,t,r){"use strict";var i=r(25);var o=r(14);var a=r(81);var n=r(5);var s=r(166);var l=function(e){function t(){e.call(this)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getType=function e(){return s["a"].JSON};t.prototype.readFeature=function e(t,r){return this.readFeatureFromObject(u(t),this.getReadOptions(t,r))};t.prototype.readFeatures=function e(t,r){return this.readFeaturesFromObject(u(t),this.getReadOptions(t,r))};t.prototype.readFeatureFromObject=function e(t,r){return Object(n["b"])()};t.prototype.readFeaturesFromObject=function e(t,r){return Object(n["b"])()};t.prototype.readGeometry=function e(t,r){return this.readGeometryFromObject(u(t),this.getReadOptions(t,r))};t.prototype.readGeometryFromObject=function e(t,r){return Object(n["b"])()};t.prototype.readProjection=function e(t){return this.readProjectionFromObject(u(t))};t.prototype.readProjectionFromObject=function e(t){return Object(n["b"])()};t.prototype.writeFeature=function e(t,r){return JSON.stringify(this.writeFeatureObject(t,r))};t.prototype.writeFeatureObject=function e(t,r){return Object(n["b"])()};t.prototype.writeFeatures=function e(t,r){return JSON.stringify(this.writeFeaturesObject(t,r))};t.prototype.writeFeaturesObject=function e(t,r){return Object(n["b"])()};t.prototype.writeGeometry=function e(t,r){return JSON.stringify(this.writeGeometryObject(t,r))};t.prototype.writeGeometryObject=function e(t,r){return Object(n["b"])()};return t}(a["a"]);function u(e){if(typeof e==="string"){var t=JSON.parse(e);return t?t:null}else if(e!==null){return e}else{return null}}var c=l;var f=r(173);var h=r(35);var d=r(83);var p=r(85);var v=r(86);var g=r(21);var m=r(31);var _=r(9);var y=r(10);var b=r(7);var w=function(r){function e(e){var t=e?e:{};r.call(this);this.dataProjection=Object(y["g"])(t.dataProjection?t.dataProjection:"EPSG:4326");if(t.featureProjection){this.defaultFeatureProjection=Object(y["g"])(t.featureProjection)}this.geometryName_=t.geometryName;this.extractGeometryName_=t.extractGeometryName}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;e.prototype.readFeatureFromObject=function e(t,r){var n=null;if(t["type"]==="Feature"){n=t}else{n={type:"Feature",geometry:t,properties:null}}var i=S(n["geometry"],r);var a=new o["a"];if(this.geometryName_){a.setGeometryName(this.geometryName_)}else if(this.extractGeometryName_&&"geometry_name"in n!==undefined){a.setGeometryName(n["geometry_name"])}a.setGeometry(i);if("id"in n){a.setId(n["id"])}if(n["properties"]){a.setProperties(n["properties"])}return a};e.prototype.readFeaturesFromObject=function e(t,r){var n=t;var i=null;if(n["type"]==="FeatureCollection"){var a=t;i=[];var o=a["features"];for(var s=0,l=o.length;s<l;++s){i.push(this.readFeatureFromObject(o[s],r))}}else{i=[this.readFeatureFromObject(t,r)]}return i};e.prototype.readGeometryFromObject=function e(t,r){return S(t,r)};e.prototype.readProjectionFromObject=function e(t){var r=t["crs"];var n;if(r){if(r["type"]=="name"){n=Object(y["g"])(r["properties"]["name"])}else{Object(i["a"])(false,36)}}else{n=this.dataProjection}return n};e.prototype.writeFeatureObject=function e(t,r){r=this.adaptOptions(r);var n={type:"Feature",geometry:null,properties:null};var i=t.getId();if(i!==undefined){n.id=i}var a=t.getGeometry();if(a){n.geometry=k(a,r)}var o=t.getProperties();delete o[t.getGeometryName()];if(!Object(_["d"])(o)){n.properties=o}return n};e.prototype.writeFeaturesObject=function e(t,r){r=this.adaptOptions(r);var n=[];for(var i=0,a=t.length;i<a;++i){n.push(this.writeFeatureObject(t[i],r))}return{type:"FeatureCollection",features:n}};e.prototype.writeGeometryObject=function e(t,r){return k(t,this.adaptOptions(r))};return e}(c);function S(e,t){if(!e){return null}var r;switch(e["type"]){case b["a"].POINT:{r=O(e);break}case b["a"].LINE_STRING:{r=x(e);break}case b["a"].POLYGON:{r=A(e);break}case b["a"].MULTI_POINT:{r=E(e);break}case b["a"].MULTI_LINE_STRING:{r=T(e);break}case b["a"].MULTI_POLYGON:{r=M(e);break}case b["a"].GEOMETRY_COLLECTION:{r=C(e);break}default:{throw new Error("Unsupported GeoJSON type: "+e.type)}}return Object(a["b"])(r,false,t)}function C(e,t){var r=e["geometries"].map(function(e){return S(e,t)});return new f["a"](r)}function O(e){return new g["a"](e["coordinates"])}function x(e){return new h["a"](e["coordinates"])}function T(e){return new d["a"](e["coordinates"])}function E(e){return new p["a"](e["coordinates"])}function M(e){return new v["a"](e["coordinates"])}function A(e){return new m["a"](e["coordinates"])}function k(e,t){e=Object(a["b"])(e,true,t);var r=e.getType();var n;switch(r){case b["a"].POINT:{n=L(e,t);break}case b["a"].LINE_STRING:{n=I(e,t);break}case b["a"].POLYGON:{n=N(e,t);break}case b["a"].MULTI_POINT:{n=P(e,t);break}case b["a"].MULTI_LINE_STRING:{n=D(e,t);break}case b["a"].MULTI_POLYGON:{n=R(e,t);break}case b["a"].GEOMETRY_COLLECTION:{n=j(e,t);break}case b["a"].CIRCLE:{n={type:"GeometryCollection",geometries:[]};break}default:{throw new Error("Unsupported geometry type: "+r)}}return n}function j(e,r){var t=e.getGeometriesArray().map(function(e){var t=Object(_["a"])({},r);delete t.featureProjection;return k(e,t)});return{type:"GeometryCollection",geometries:t}}function I(e,t){return{type:"LineString",coordinates:e.getCoordinates()}}function D(e,t){return{type:"MultiLineString",coordinates:e.getCoordinates()}}function P(e,t){return{type:"MultiPoint",coordinates:e.getCoordinates()}}function R(e,t){var r;if(t){r=t.rightHanded}return{type:"MultiPolygon",coordinates:e.getCoordinates(r)}}function L(e,t){return{type:"Point",coordinates:e.getCoordinates()}}function N(e,t){var r;if(t){r=t.rightHanded}return{type:"Polygon",coordinates:e.getCoordinates(r)}}var $=t["a"]=w},function(e,t,r){"use strict";var n=r(30);var i=r(313);var a="#333";var o=function e(t){var r=t||{};this.font_=r.font;this.rotation_=r.rotation;this.rotateWithView_=r.rotateWithView;this.scale_=r.scale;this.text_=r.text;this.textAlign_=r.textAlign;this.textBaseline_=r.textBaseline;this.fill_=r.fill!==undefined?r.fill:new n["a"]({color:a});this.maxAngle_=r.maxAngle!==undefined?r.maxAngle:Math.PI/4;this.placement_=r.placement!==undefined?r.placement:i["a"].POINT;this.overflow_=!!r.overflow;this.stroke_=r.stroke!==undefined?r.stroke:null;this.offsetX_=r.offsetX!==undefined?r.offsetX:0;this.offsetY_=r.offsetY!==undefined?r.offsetY:0;this.backgroundFill_=r.backgroundFill?r.backgroundFill:null;this.backgroundStroke_=r.backgroundStroke?r.backgroundStroke:null;this.padding_=r.padding===undefined?null:r.padding};o.prototype.clone=function e(){return new o({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():undefined,stroke:this.getStroke()?this.getStroke().clone():undefined,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():undefined,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():undefined})};o.prototype.getOverflow=function e(){return this.overflow_};o.prototype.getFont=function e(){return this.font_};o.prototype.getMaxAngle=function e(){return this.maxAngle_};o.prototype.getPlacement=function e(){return this.placement_};o.prototype.getOffsetX=function e(){return this.offsetX_};o.prototype.getOffsetY=function e(){return this.offsetY_};o.prototype.getFill=function e(){return this.fill_};o.prototype.getRotateWithView=function e(){return this.rotateWithView_};o.prototype.getRotation=function e(){return this.rotation_};o.prototype.getScale=function e(){return this.scale_};o.prototype.getStroke=function e(){return this.stroke_};o.prototype.getText=function e(){return this.text_};o.prototype.getTextAlign=function e(){return this.textAlign_};o.prototype.getTextBaseline=function e(){return this.textBaseline_};o.prototype.getBackgroundFill=function e(){return this.backgroundFill_};o.prototype.getBackgroundStroke=function e(){return this.backgroundStroke_};o.prototype.getPadding=function e(){return this.padding_};o.prototype.setOverflow=function e(t){this.overflow_=t};o.prototype.setFont=function e(t){this.font_=t};o.prototype.setMaxAngle=function e(t){this.maxAngle_=t};o.prototype.setOffsetX=function e(t){this.offsetX_=t};o.prototype.setOffsetY=function e(t){this.offsetY_=t};o.prototype.setPlacement=function e(t){this.placement_=t};o.prototype.setFill=function e(t){this.fill_=t};o.prototype.setRotation=function e(t){this.rotation_=t};o.prototype.setScale=function e(t){this.scale_=t};o.prototype.setStroke=function e(t){this.stroke_=t};o.prototype.setText=function e(t){this.text_=t};o.prototype.setTextAlign=function e(t){this.textAlign_=t};o.prototype.setTextBaseline=function e(t){this.textBaseline_=t};o.prototype.setBackgroundFill=function e(t){this.backgroundFill_=t};o.prototype.setBackgroundStroke=function e(t){this.backgroundStroke_=t};o.prototype.setPadding=function e(t){this.padding_=t};t["a"]=o},function(e,t,r){"use strict";r.d(t,"b",function(){return n});r.d(t,"a",function(){return i});function n(e,t,r){var n=r!==undefined?e.toFixed(r):""+e;var i=n.indexOf(".");i=i===-1?n.length:i;return i>t?n:new Array(1+t-i).join("0")+n}function i(e,t){var r=(""+e).split(".");var n=(""+t).split(".");for(var i=0;i<Math.max(r.length,n.length);i++){var a=parseInt(r[i]||"0",10);var o=parseInt(n[i]||"0",10);if(a>o){return 1}if(o>a){return-1}}return 0}},function(e,t,r){"use strict";r.d(t,"a",function(){return n});function n(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}},function(e,t,r){"use strict";t["a"]={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"}},function(e,t,r){"use strict";r.d(t,"e",function(){return l});r.d(t,"a",function(){return u});r.d(t,"f",function(){return n});r.d(t,"d",function(){return m});r.d(t,"b",function(){return _});r.d(t,"c",function(){return i});var v=r(15);function g(e,t,r,n,i,a,o){var s=e[t];var l=e[t+1];var u=e[r]-s;var c=e[r+1]-l;var f;if(u===0&&c===0){f=t}else{var h=((i-s)*u+(a-l)*c)/(u*u+c*c);if(h>1){f=r}else if(h>0){for(var d=0;d<n;++d){o[d]=Object(v["c"])(e[t+d],e[r+d],h)}o.length=n;return}else{f=t}}for(var p=0;p<n;++p){o[p]=e[f+p]}o.length=n}function l(e,t,r,n,i){var a=e[t];var o=e[t+1];for(t+=n;t<r;t+=n){var s=e[t];var l=e[t+1];var u=Object(v["f"])(a,o,s,l);if(u>i){i=u}a=s;o=l}return i}function u(e,t,r,n,i){for(var a=0,o=r.length;a<o;++a){var s=r[a];i=l(e,t,s,n,i);t=s}return i}function n(e,t,r,n,i){for(var a=0,o=r.length;a<o;++a){var s=r[a];i=u(e,t,s,n,i);t=s[s.length-1]}return i}function m(e,t,r,n,i,a,o,s,l,u,c){if(t==r){return u}var f,h;if(i===0){h=Object(v["f"])(o,s,e[t],e[t+1]);if(h<u){for(f=0;f<n;++f){l[f]=e[t+f]}l.length=n;return h}else{return u}}var d=c?c:[NaN,NaN];var p=t+n;while(p<r){g(e,p-n,p,n,o,s,d);h=Object(v["f"])(o,s,d[0],d[1]);if(h<u){u=h;for(f=0;f<n;++f){l[f]=d[f]}l.length=n;p+=n}else{p+=n*Math.max((Math.sqrt(h)-Math.sqrt(u))/i|0,1)}}if(a){g(e,r-n,t,n,o,s,d);h=Object(v["f"])(o,s,d[0],d[1]);if(h<u){u=h;for(f=0;f<n;++f){l[f]=d[f]}l.length=n}}return u}function _(e,t,r,n,i,a,o,s,l,u,c){var f=c?c:[NaN,NaN];for(var h=0,d=r.length;h<d;++h){var p=r[h];u=m(e,t,p,n,i,a,o,s,l,u,f);t=p}return u}function i(e,t,r,n,i,a,o,s,l,u,c){var f=c?c:[NaN,NaN];for(var h=0,d=r.length;h<d;++h){var p=r[h];u=_(e,t,p,n,i,a,o,s,l,u,f);t=p[p.length-1]}return u}},function(e,t,r){"use strict";r.d(t,"c",function(){return n});r.d(t,"a",function(){return i});r.d(t,"b",function(){return a});r.d(t,"d",function(){return o});function n(e,t,r,n,i,a){var o=a?a:[];var s=0;for(var l=t;l<r;l+=n){var u=e[l];var c=e[l+1];o[s++]=i[0]*u+i[2]*c+i[4];o[s++]=i[1]*u+i[3]*c+i[5]}if(a&&o.length!=s){o.length=s}return o}function i(e,t,r,n,i,a,o){var s=o?o:[];var l=Math.cos(i);var u=Math.sin(i);var c=a[0];var f=a[1];var h=0;for(var d=t;d<r;d+=n){var p=e[d]-c;var v=e[d+1]-f;s[h++]=c+p*l-v*u;s[h++]=f+p*u+v*l;for(var g=d+2;g<d+n;++g){s[h++]=e[g]}}if(o&&s.length!=h){s.length=h}return s}function a(e,t,r,n,i,a,o,s){var l=s?s:[];var u=o[0];var c=o[1];var f=0;for(var h=t;h<r;h+=n){var d=e[h]-u;var p=e[h+1]-c;l[f++]=u+i*d;l[f++]=c+a*p;for(var v=h+2;v<h+n;++v){l[f++]=e[v]}}if(s&&l.length!=f){l.length=f}return l}function o(e,t,r,n,i,a,o){var s=o?o:[];var l=0;for(var u=t;u<r;u+=n){s[l++]=e[u]+i;s[l++]=e[u+1]+a;for(var c=u+2;c<u+n;++c){s[l++]=e[c]}}if(o&&s.length!=l){s.length=l}return s}},function(e,t,r){"use strict";var g=r(1);var n=r(216);var i=r(132);var a=r(219);var o=r(9);var s=function(){e.$inject=["$injector","ngeoDataSources","ngeoDataSourcesHelper","ngeoQuerent","ngeoQueryResult"];function e(e,t,r,n,i){var a=e.has("ngeoQueryOptions")?e.get("ngeoQueryOptions"):{};this.dataSources_=t.collection;this.ngeoDataSourcesHelper_=r;this.ngeoQuerent_=n;this.result_=i;this.limit_=a.limit!==undefined?a.limit:50;this.queryCountFirst_=a.queryCountFirst!==undefined?a.queryCountFirst:false;this.tolerancePx_=a.tolerance!==undefined?a.tolerance:3;this.dataSourceNames_={}}var t=e.prototype;t.issue=function e(t){this.clear();var r;if(t.dataSources===undefined&&t.queryableDataSources===undefined){r=this.ngeoQuerent_.getQueryableDataSources(this.dataSources_.getArray(),t.map)}var n=t.limit!==undefined?t.limit:this.limit_;o["a"](t,{queryableDataSources:r,limit:n,tolerancePx:this.tolerancePx_,wfsCount:this.queryCountFirst_});this.result_.pending=true;this.ngeoQuerent_.issue(t).then(this.handleResult_.bind(this))};t.clear=function e(){this.result_.total=0;for(var t=this.result_.sources,r=Array.isArray(t),n=0,t=r?t:t[Symbol.iterator]();;){var i;if(r){if(n>=t.length)break;i=t[n++]}else{n=t.next();if(n.done)break;i=n.value}var a=i;a.features.length=0;a.pending=false;a.queried=false;a.tooManyResults=false;a.totalFeatureCount=undefined}this.result_.sources.length=0;this.result_.pending=false};t.handleResult_=function e(d){var p=this;var v=0;var t=function e(t){var r=Number(t);var i=p.ngeoDataSourcesHelper_.getDataSource(r);var n=i.name;g["a"].assert(i);var a=d[r];var o=a.features;var s=a.limit;var l=a.tooManyFeatures===true;var u=a.totalFeatureCount;var c={};o.forEach(function(t){var e=g["a"].assertString(t.get("ngeo_feature_type_"));if(!c[e]){c[e]=[]}if(i.attributes&&i.attributes.length){var r=t.getProperties();var n={};i.attributes.forEach(function(e){if(e.alias){n[e.alias]=r[e.name];t.unset(e.name,true)}else{n[e.name]=r[e.name]}});t.setProperties(n,true)}c[e].push(t)});for(var f in c){n=f?f:n;var h=c[f];p.result_.sources.push({features:h,id:r,label:n,limit:s,pending:false,queried:true,tooManyResults:l,totalFeatureCount:u});v+=o.length}};for(var r in d){t(r)}this.result_.total=v;this.result_.pending=false};return e}();s.module=angular.module("ngeoMapQuerent",[i["a"].module.name,a["a"].module.name,n["a"].module.name]);s.module.service("ngeoMapQuerent",s);s.module.value("ngeoQueryResult",{sources:[],total:0,pending:false});t["a"]=s},function(e,t,r){"use strict";t["a"]={POSTCOMPOSE:"postcompose",PRECOMPOSE:"precompose",RENDER:"render",RENDERCOMPLETE:"rendercomplete"}},function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r(77);function i(e){if(Array.isArray(e)){return Object(n["d"])(e)}else{return e}}},function(e,t,r){"use strict";t["a"]={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"}},function(e,t,r){"use strict";r.d(t,"a",function(){return i});r.d(t,"b",function(){return o});r.d(t,"c",function(){return s});var c=r(128);var n=r(63);var a=r(157);function f(e,t,r){var n=7+t-r,i=(7+Object(a["b"])(e,0,n).getUTCDay()-t)%7;return-i+n-1}function i(e,t,r,n,i){var a=(7+r-n)%7,o=f(e,n,i),s=1+7*(t-1)+a+o,l,u;if(s<=0){l=e-1;u=Object(c["a"])(l)+s}else if(s>Object(c["a"])(e)){l=e+1;u=s-Object(c["a"])(e)}else{l=e;u=s}return{year:l,dayOfYear:u}}function o(e,t,r){var n=f(e.year(),t,r),i=Math.floor((e.dayOfYear()-n-1)/7)+1,a,o;if(i<1){o=e.year()-1;a=i+s(o,t,r)}else if(i>s(e.year(),t,r)){a=i-s(e.year(),t,r);o=e.year()+1}else{o=e.year();a=i}return{week:a,year:o}}function s(e,t,r){var n=f(e,t,r),i=f(e+1,t,r);return(Object(c["a"])(e)-n+i)/7}},function(e,t,r){"use strict";var n=r(153);var i=r(136);var a=r(44);var o;if(Array.prototype.some){o=Array.prototype.some}else{o=function e(t){var r=Object(this);var n=r.length>>>0;for(var i=0;i<n;i++){if(i in r&&t.call(this,r[i],i,r)){return true}}return false}}r.d(t,"b",function(){return s});r.d(t,"a",function(){return l});function s(e){if(e._isValid==null){var t=Object(a["a"])(e);var r=o.call(t.parsedDateParts,function(e){return e!=null});var n=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r);if(e._strict){n=n&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===undefined}if(Object.isFrozen==null||!Object.isFrozen(e)){e._isValid=n}else{return n}}return e._isValid}function l(e){var t=Object(i["a"])(NaN);if(e!=null){Object(n["a"])(Object(a["a"])(t),e)}else{Object(a["a"])(t).userInvalidated=true}return t}},function(e,t,r){"use strict";var a=r(5);var n=r(50);var l=r(3);var u=r(143);var c=r(10);var i=r(79);var f=r(36);var h=Object(f["c"])();var o=function(e){function t(){e.call(this);this.extent_=Object(l["j"])();this.extentRevision_=-1;this.simplifiedGeometryCache={};this.simplifiedGeometryMaxMinSquaredTolerance=0;this.simplifiedGeometryRevision=0}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.clone=function e(){return Object(a["b"])()};t.prototype.closestPointXY=function e(t,r,n,i){return Object(a["b"])()};t.prototype.containsXY=function e(t,r){return false};t.prototype.getClosestPoint=function e(t,r){var n=r?r:[NaN,NaN];this.closestPointXY(t[0],t[1],n,Infinity);return n};t.prototype.intersectsCoordinate=function e(t){return this.containsXY(t[0],t[1])};t.prototype.computeExtent=function e(t){return Object(a["b"])()};t.prototype.getExtent=function e(t){if(this.extentRevision_!=this.getRevision()){this.extent_=this.computeExtent(this.extent_);this.extentRevision_=this.getRevision()}return Object(l["I"])(this.extent_,t)};t.prototype.rotate=function e(t,r){Object(a["b"])()};t.prototype.scale=function e(t,r,n){Object(a["b"])()};t.prototype.simplify=function e(t){return this.getSimplifiedGeometry(t*t)};t.prototype.getSimplifiedGeometry=function e(t){return Object(a["b"])()};t.prototype.getType=function e(){return Object(a["b"])()};t.prototype.applyTransform=function e(t){Object(a["b"])()};t.prototype.intersectsExtent=function e(t){return Object(a["b"])()};t.prototype.translate=function e(t,r){Object(a["b"])()};t.prototype.transform=function e(t,o){var s=Object(c["g"])(t);var r=s.getUnits()==i["b"].TILE_PIXELS?function(e,t,r){var n=s.getExtent();var i=s.getWorldExtent();var a=Object(l["A"])(i)/Object(l["A"])(n);Object(f["b"])(h,i[0],i[3],a,-a,0,0,0);Object(u["c"])(e,0,e.length,r,h,t);return Object(c["i"])(s,o)(e,t,r)}:Object(c["i"])(s,o);this.applyTransform(r);return this};return t}(n["a"]);t["a"]=o},function(e,t,r){"use strict";r.d(t,"b",function(){return re});var g=r(25);var l=r(234);var u=r(195);var s=r(69);var o=r(70);var n=r(180);var c=r(4);var d=r(9);var i=r(10);var m=r(0);var a={"http://www.opengis.net/gml":{boundedBy:Object(m["m"])(s["b"].prototype.readGeometryElement,"bounds")}};var f={"http://www.opengis.net/wfs":{totalInserted:Object(m["m"])(c["f"]),totalUpdated:Object(m["m"])(c["f"]),totalDeleted:Object(m["m"])(c["f"])}};var h={"http://www.opengis.net/wfs":{TransactionSummary:Object(m["m"])(T,"transactionSummary"),InsertResults:Object(m["m"])(k,"insertIds")}};var p={"http://www.opengis.net/wfs":{PropertyName:Object(m["k"])(c["n"])}};var _={"http://www.opengis.net/wfs":{Insert:Object(m["k"])(j),Update:Object(m["k"])(R),Delete:Object(m["k"])(P),Property:Object(m["k"])(L),Native:Object(m["k"])(N)}};var v="feature";var y="http://www.w3.org/2000/xmlns/";var b="http://www.opengis.net/ogc";var w="http://www.opengis.net/wfs";var S="http://www.opengis.net/fes";var C={"1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"};var O="1.1.0";var x=function(r){function e(e){r.call(this);var t=e?e:{};this.featureType_=t.featureType;this.featureNS_=t.featureNS;this.gmlFormat_=t.gmlFormat?t.gmlFormat:new u["a"];this.schemaLocation_=t.schemaLocation?t.schemaLocation:C[O]}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;e.prototype.getFeatureType=function e(){return this.featureType_};e.prototype.setFeatureType=function e(t){this.featureType_=t};e.prototype.readFeaturesFromNode=function e(t,r){var n={node:t};Object(d["a"])(n,{featureType:this.featureType_,featureNS:this.featureNS_});Object(d["a"])(n,this.getReadOptions(t,r?r:{}));var i=[n];this.gmlFormat_.FEATURE_COLLECTION_PARSERS[s["a"]]["featureMember"]=Object(m["i"])(s["b"].prototype.readFeaturesInternal);var a=Object(m["t"])([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,i,this.gmlFormat_);if(!a){a=[]}return a};e.prototype.readTransactionResponse=function e(t){if(!t){return undefined}else if(typeof t==="string"){var r=Object(m["r"])(t);return this.readTransactionResponseFromDocument(r)}else if(Object(m["g"])(t)){return this.readTransactionResponseFromDocument(t)}else{return this.readTransactionResponseFromNode(t)}};e.prototype.readFeatureCollectionMetadata=function e(t){if(!t){return undefined}else if(typeof t==="string"){var r=Object(m["r"])(t);return this.readFeatureCollectionMetadataFromDocument(r)}else if(Object(m["g"])(t)){return this.readFeatureCollectionMetadataFromDocument(t)}else{return this.readFeatureCollectionMetadataFromNode(t)}};e.prototype.readFeatureCollectionMetadataFromDocument=function e(t){for(var r=t.firstChild;r;r=r.nextSibling){if(r.nodeType==Node.ELEMENT_NODE){return this.readFeatureCollectionMetadataFromNode(r)}}return undefined};e.prototype.readFeatureCollectionMetadataFromNode=function e(t){var r={};var n=Object(c["g"])(t.getAttribute("numberOfFeatures"));r["numberOfFeatures"]=n;return Object(m["t"])(r,a,t,[],this.gmlFormat_)};e.prototype.readTransactionResponseFromDocument=function e(t){for(var r=t.firstChild;r;r=r.nextSibling){if(r.nodeType==Node.ELEMENT_NODE){return this.readTransactionResponseFromNode(r)}}return undefined};e.prototype.readTransactionResponseFromNode=function e(t){return Object(m["t"])({},h,t,[])};e.prototype.writeGetFeature=function e(t){var r=Object(m["d"])(w,"GetFeature");r.setAttribute("service","WFS");r.setAttribute("version","1.1.0");var n;if(t){if(t.handle){r.setAttribute("handle",t.handle)}if(t.outputFormat){r.setAttribute("outputFormat",t.outputFormat)}if(t.maxFeatures!==undefined){r.setAttribute("maxFeatures",String(t.maxFeatures))}if(t.resultType){r.setAttribute("resultType",t.resultType)}if(t.startIndex!==undefined){r.setAttribute("startIndex",String(t.startIndex))}if(t.count!==undefined){r.setAttribute("count",String(t.count))}if(t.viewParams!==undefined){r.setAttribute("viewParams ",t.viewParams)}n=t.filter;if(t.bbox){Object(g["a"])(t.geometryName,12);var i=Object(o["bbox"])(t.geometryName,t.bbox,t.srsName);if(n){n=Object(o["and"])(n,i)}else{n=i}}}r.setAttributeNS(m["c"],"xsi:schemaLocation",this.schemaLocation_);var a={node:r};Object(d["a"])(a,{srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.featureNS_,featurePrefix:t.featurePrefix,geometryName:t.geometryName,filter:n,propertyNames:t.propertyNames?t.propertyNames:[]});Object(g["a"])(Array.isArray(t.featureTypes),11);ne(r,t.featureTypes,[a]);return r};e.prototype.writeTransaction=function e(t,r,n,i){var a=[];var o=Object(m["d"])(w,"Transaction");var s=i.version?i.version:O;var l=s==="1.0.0"?2:3;o.setAttribute("service","WFS");o.setAttribute("version",s);var u;var c;if(i){u=i.gmlOptions?i.gmlOptions:{};if(i.handle){o.setAttribute("handle",i.handle)}}var f=C[s];o.setAttributeNS(m["c"],"xsi:schemaLocation",f);var h=i.featurePrefix?i.featurePrefix:v;if(t){c=Object(d["a"])({node:o},{featureNS:i.featureNS,featureType:i.featureType,featurePrefix:h,gmlVersion:l,hasZ:i.hasZ,srsName:i.srsName});Object(d["a"])(c,u);Object(m["u"])(c,_,Object(m["p"])("Insert"),t,a)}if(r){c=Object(d["a"])({node:o},{featureNS:i.featureNS,featureType:i.featureType,featurePrefix:h,gmlVersion:l,hasZ:i.hasZ,srsName:i.srsName});Object(d["a"])(c,u);Object(m["u"])(c,_,Object(m["p"])("Update"),r,a)}if(n){Object(m["u"])({node:o,featureNS:i.featureNS,featureType:i.featureType,featurePrefix:h,gmlVersion:l,srsName:i.srsName},_,Object(m["p"])("Delete"),n,a)}if(i.nativeElements){Object(m["u"])({node:o,featureNS:i.featureNS,featureType:i.featureType,featurePrefix:h,gmlVersion:l,srsName:i.srsName},_,Object(m["p"])("Native"),i.nativeElements,a)}return o};e.prototype.readProjectionFromDocument=function e(t){for(var r=t.firstChild;r;r=r.nextSibling){if(r.nodeType==Node.ELEMENT_NODE){return this.readProjectionFromNode(r)}}return null};e.prototype.readProjectionFromNode=function e(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild){t=t.firstElementChild.firstElementChild;for(var r=t.firstElementChild;r;r=r.nextElementSibling){if(!(r.childNodes.length===0||r.childNodes.length===1&&r.firstChild.nodeType===3)){var n=[{}];this.gmlFormat_.readGeometryElement(r,n);return Object(i["g"])(n.pop().srsName)}}}return null};return e}(n["a"]);function T(e,t){return Object(m["t"])({},f,e,t)}var E={"http://www.opengis.net/ogc":{FeatureId:Object(m["i"])(function(e,t){return e.getAttribute("fid")})}};function M(e,t){Object(m["s"])(E,e,t)}var A={"http://www.opengis.net/wfs":{Feature:M}};function k(e,t){return Object(m["t"])([],A,e,t)}function j(e,t,r){var n=r[r.length-1];var i=n["featureType"];var a=n["featureNS"];var o=n["gmlVersion"];var s=Object(m["d"])(a,i);e.appendChild(s);if(o===2){l["a"].prototype.writeFeatureElement(s,t,r)}else{u["a"].prototype.writeFeatureElement(s,t,r)}}function I(e,t,r){var n=Object(m["d"])(b,"Filter");var i=Object(m["d"])(b,"FeatureId");n.appendChild(i);i.setAttribute("fid",t);e.appendChild(n)}function D(e,t){e=e?e:v;var r=e+":";if(t.indexOf(r)===0){return t}else{return r+t}}function P(e,t,r){var n=r[r.length-1];Object(g["a"])(t.getId()!==undefined,26);var i=n["featureType"];var a=n["featurePrefix"];var o=n["featureNS"];var s=D(a,i);e.setAttribute("typeName",s);e.setAttributeNS(y,"xmlns:"+a,o);var l=t.getId();if(l!==undefined){I(e,l,r)}}function R(e,t,r){var n=r[r.length-1];Object(g["a"])(t.getId()!==undefined,27);var i=n["featureType"];var a=n["featurePrefix"];var o=n["featureNS"];var s=D(a,i);var l=t.getGeometryName();e.setAttribute("typeName",s);e.setAttributeNS(y,"xmlns:"+a,o);var u=t.getId();if(u!==undefined){var c=t.getKeys();var f=[];for(var h=0,d=c.length;h<d;h++){var p=t.get(c[h]);if(p!==undefined){var v=c[h];if(p&&typeof p.getSimplifiedGeometry==="function"){v=l}f.push({name:v,value:p})}}Object(m["u"])({gmlVersion:n["gmlVersion"],node:e,hasZ:n["hasZ"],srsName:n["srsName"]},_,Object(m["p"])("Property"),f,r);I(e,u,r)}}function L(e,t,r){var n=Object(m["d"])(w,"Name");var i=r[r.length-1];var a=i["gmlVersion"];e.appendChild(n);Object(c["n"])(n,t.name);if(t.value!==undefined&&t.value!==null){var o=Object(m["d"])(w,"Value");e.appendChild(o);if(t.value&&typeof t.value.getSimplifiedGeometry==="function"){if(a===2){l["a"].prototype.writeGeometryElement(o,t.value,r)}else{u["a"].prototype.writeGeometryElement(o,t.value,r)}}else{Object(c["n"])(o,t.value)}}}function N(e,t,r){if(t.vendorId){e.setAttribute("vendorId",t.vendorId)}if(t.safeToIgnore!==undefined){e.setAttribute("safeToIgnore",String(t.safeToIgnore))}if(t.value!==undefined){Object(c["n"])(e,t.value)}}var $={"http://www.opengis.net/wfs":{Query:Object(m["k"])(F)},"http://www.opengis.net/ogc":{During:Object(m["k"])(V),And:Object(m["k"])(q),Or:Object(m["k"])(q),Not:Object(m["k"])(z),BBOX:Object(m["k"])(U),Contains:Object(m["k"])(H),Intersects:Object(m["k"])(W),Within:Object(m["k"])(Y),PropertyIsEqualTo:Object(m["k"])(B),PropertyIsNotEqualTo:Object(m["k"])(B),PropertyIsLessThan:Object(m["k"])(B),PropertyIsLessThanOrEqualTo:Object(m["k"])(B),PropertyIsGreaterThan:Object(m["k"])(B),PropertyIsGreaterThanOrEqualTo:Object(m["k"])(B),PropertyIsNull:Object(m["k"])(K),PropertyIsBetween:Object(m["k"])(X),PropertyIsLike:Object(m["k"])(Z)}};function F(e,t,r){var n=r[r.length-1];var i=n["featurePrefix"];var a=n["featureNS"];var o=n["propertyNames"];var s=n["srsName"];var l;if(i){l=D(i,t)}else{l=t}e.setAttribute("typeName",l);if(s){e.setAttribute("srsName",s)}if(a){e.setAttributeNS(y,"xmlns:"+i,a)}var u=Object(d["a"])({},n);u.node=e;Object(m["u"])(u,p,Object(m["p"])("PropertyName"),o,r);var c=n["filter"];if(c){var f=Object(m["d"])(b,"Filter");e.appendChild(f);G(f,c,r)}}function G(e,t,r){var n={node:e};Object(m["u"])(n,$,Object(m["p"])(t.getTagName()),[t],r)}function U(e,t,r){var n=r[r.length-1];n["srsName"]=t.srsName;J(e,t.geometryName);u["a"].prototype.writeGeometryElement(e,t.extent,r)}function H(e,t,r){var n=r[r.length-1];n["srsName"]=t.srsName;J(e,t.geometryName);u["a"].prototype.writeGeometryElement(e,t.geometry,r)}function W(e,t,r){var n=r[r.length-1];n["srsName"]=t.srsName;J(e,t.geometryName);u["a"].prototype.writeGeometryElement(e,t.geometry,r)}function Y(e,t,r){var n=r[r.length-1];n["srsName"]=t.srsName;J(e,t.geometryName);u["a"].prototype.writeGeometryElement(e,t.geometry,r)}function V(e,t,r){var n=Object(m["d"])(S,"ValueReference");Object(c["n"])(n,t.propertyName);e.appendChild(n);var i=Object(m["d"])(s["a"],"TimePeriod");e.appendChild(i);var a=Object(m["d"])(s["a"],"begin");i.appendChild(a);te(a,t.begin);var o=Object(m["d"])(s["a"],"end");i.appendChild(o);te(o,t.end)}function q(e,t,r){var n={node:e};var i=t.conditions;for(var a=0,o=i.length;a<o;++a){var s=i[a];Object(m["u"])(n,$,Object(m["p"])(s.getTagName()),[s],r)}}function z(e,t,r){var n={node:e};var i=t.condition;Object(m["u"])(n,$,Object(m["p"])(i.getTagName()),[i],r)}function B(e,t,r){if(t.matchCase!==undefined){e.setAttribute("matchCase",t.matchCase.toString())}J(e,t.propertyName);ee(e,""+t.expression)}function K(e,t,r){J(e,t.propertyName)}function X(e,t,r){J(e,t.propertyName);var n=Object(m["d"])(b,"LowerBoundary");e.appendChild(n);ee(n,""+t.lowerBoundary);var i=Object(m["d"])(b,"UpperBoundary");e.appendChild(i);ee(i,""+t.upperBoundary)}function Z(e,t,r){e.setAttribute("wildCard",t.wildCard);e.setAttribute("singleChar",t.singleChar);e.setAttribute("escapeChar",t.escapeChar);if(t.matchCase!==undefined){e.setAttribute("matchCase",t.matchCase.toString())}J(e,t.propertyName);ee(e,""+t.pattern)}function Q(e,t,r){var n=Object(m["d"])(b,e);Object(c["n"])(n,r);t.appendChild(n)}function J(e,t){Q("PropertyName",e,t)}function ee(e,t){Q("Literal",e,t)}function te(e,t){var r=Object(m["d"])(s["a"],"TimeInstant");e.appendChild(r);var n=Object(m["d"])(s["a"],"timePosition");r.appendChild(n);Object(c["n"])(n,t)}function re(e){var t=Object(m["d"])(b,"Filter");G(t,e,[]);return t}function ne(e,t,r){var n=r[r.length-1];var i=Object(d["a"])({},n);i.node=e;Object(m["u"])(i,$,Object(m["p"])("Query"),t,r)}t["a"]=x},function(e,t,r){"use strict";var n=r(0);var i=function e(){};i.prototype.read=function e(t){if(!t){return null}else if(typeof t==="string"){var r=Object(n["r"])(t);return this.readFromDocument(r)}else if(Object(n["g"])(t)){return this.readFromDocument(t)}else{return this.readFromNode(t)}};i.prototype.readFromDocument=function e(t){};i.prototype.readFromNode=function e(t){};t["a"]=i},function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r(68);function i(e,t){for(var r in t){if(Object(n["a"])(t,r)){e[r]=t[r]}}if(Object(n["a"])(t,"toString")){e.toString=t.toString}if(Object(n["a"])(t,"valueOf")){e.valueOf=t.valueOf}return e}},function(e,t,r){"use strict";var n=r(22);var c=r(1);var a=r(125);var i=r(119);var o=r(5);var s=r(101);var l=r(28);var f=function e(t,r,n,i){var a=this;this.layerHelper_=r;this.ngeoWMSTime_=n;this.ogcServersObject_;i.getOgcServersObject().then(function(e){a.ogcServersObject_=e});t.$on("ngeo-layertree-state",function(e,t,r){a.sync_(e,r)})};f.$inject=["$rootScope","ngeoLayerHelper","ngeoWMSTime","gmfThemes"];f.$inject=["$rootScope","ngeoLayerHelper","ngeoWMSTime","gmfThemes"];f.prototype.createLayer=function(e,t,r,n){var i=null;if(e.node.children!==undefined&&e.node.mixed){i=this.createGroup_(e,t,r,n)}else if(e.node.children===undefined&&e.parent.node.mixed){i=this.createLeafInAMixedGroup_(e,t)}else if(e.node.children===undefined){this.initGmfLayerInANotMixedGroup_(e,t)}else if(e.depth===1&&!e.node.mixed){i=this.createGroup_(e,t,r,n)}if(i&&e.node.metadata.opacity){i.setOpacity(e.node.metadata.opacity)}return i};f.prototype.sync_=function(e,t){var r=this;t.traverseDepthFirst(function(e){if(e.layer&&!e.node.mixed){r.updateLayerState_(e.layer,e)}})};f.prototype.updateLayerState_=function(e,t){var r=t.getState()==="on";if(t.node.type==="WMTS"){e.setVisible(r)}else if(!t.node.mixed&&t.depth===1){c["a"].assertInstanceof(e,s["a"]);var n=[];var i=[];t.traverseDepthFirst(function(e){if(e.node.children===undefined&&e.getState()==="on"){n.push(e.node.layers);var t=e.node.style!==undefined?e.node.style:"";i.push(t)}});if(n.length===0){e.setVisible(false)}e.getSource().updateParams({LAYERS:n.reverse().join(","),STYLES:i.reverse().join(",")});if(n.length!==0){e.setVisible(true)}}else{c["a"].assertInstanceof(e,s["a"]);e.setVisible(r)}};f.prototype.createGroup_=function(e,t,r,n){var i=e.node;var a=null;var o=e.parent.isRoot;var s=true;if(i.metadata.printNativeAngle!==undefined){s=i.metadata.printNativeAngle}if(o){a=this.createLayerFromGroup_(e,!!i.mixed);var l=n|0;r.getLayers().insertAt(l,a)}else{var u=!this.isOneParentNotMixed_(e);if(u){a=this.createLayerFromGroup_(e,true);var c=f.getLayer(e.parent);c.getLayers().insertAt(0,a)}}a.set("printNativeAngle",s);return a};f.prototype.createLayerFromGroup_=function(e,t){var r=this;var n;var i=e.node;if(t){n=this.layerHelper_.createBasicGroup()}else{var a=this.getTimeParam_(e);var o=this.ogcServersObject_[i.ogcServer||""];c["a"].assert(o);c["a"].assert(o.url);c["a"].assert(o.type);c["a"].assert(o.imageType);n=this.layerHelper_.createBasicWMSLayer(o.url,"",o.imageType,o.type,a,undefined,o.credential?"use-credentials":"anonymous");var s=false;e.traverseDepthFirst(function(e){r.updateLayerReferences_(e.node,n);if(e.node.metadata.isChecked){e.setState("on",false);r.updateLayerState_(n,e);s=true}});n.setVisible(s);n.set("layerNodeName",i.name)}return n};f.prototype.createLeafInAMixedGroup_=function(e,t){var r=e.node;var n;if(r.type==="WMTS"){n=this.createWMTSLayer_(r)}else{var i=r;var a=this.getTimeParam_(e);var o=this.ogcServersObject_[i.ogcServer];c["a"].assert(o);c["a"].assert(o.url);c["a"].assert(o.type);c["a"].assert(i.layers);c["a"].assert(o.imageType);var s={STYLES:i.style};n=this.layerHelper_.createBasicWMSLayer(o.url,i.layers,o.imageType,o.type,a,s,o.credential?"use-credentials":"anonymous")}n.set("layerNodeName",r.name);this.updateLayerReferences_(r,n);var l=r.metadata.isChecked===true;if(l){e.setState("on",false)}n.setVisible(l);var u=f.getLayer(e.parent);u.getLayers().insertAt(0,n);return n};f.prototype.initGmfLayerInANotMixedGroup_=function(e,t){var r=e.node;var n=this.getFirstLevelGroupCtrl_(e);c["a"].assert(n);var i=n.layer;c["a"].assertInstanceof(i,s["a"]);this.updateLayerReferences_(r,i);if(r.metadata.isChecked){e.setState("on",false);this.updateLayerState_(i,n)}else{e.parent.refreshState()}};f.prototype.createWMTSLayer_=function(e){var t=new l["a"];c["a"].assert(e.url);c["a"].assert(e.layer);this.layerHelper_.createWMTSLayerFromCapabilitites(e.url,e.layer,e.matrixSet,e.dimensions).then(function(e){t.setSource(e.getSource());t.set("capabilitiesStyles",e.get("capabilitiesStyles"))});return t};f.prototype.updateLayerReferences_=function(e,t){var r=o["c"](e);var n=t.get("querySourceIds")||[];n.push(r);t.set("querySourceIds",n);var i=e.metadata.disclaimer;if(i){var a=t.get("disclaimers")||[];a.push(e.metadata.disclaimer);t.set("disclaimers",a)}};f.prototype.getTimeParam_=function(e){var t;var r;var n=e.node;if(n.time){t=n.time}else if(n.children){e.traverseDepthFirst(function(e){if(e.node.children===undefined&&e.node.time){t=e.node.time;return a["a"].VisitorDecision.STOP}})}if(t){var i=this.ngeoWMSTime_.getOptions(t)["values"];r=this.ngeoWMSTime_.formatWMSTimeParam(t,{start:i[0]||i,end:i[1]})}return r};f.prototype.isOneParentNotMixed_=function(e){var t=e.parent;var r=false;do{r=t.node.mixed===false;t=t.parent}while(t.parent&&!r);return r};f.prototype.getFirstLevelGroupCtrl_=function(e){var t=e;while(!t.parent.isRoot){t=t.parent}return t};f.getLayer=function(e){var t=e;var r=null;while(!t.isRoot&&r===null){if(t.layer){r=t.layer}t=t.parent}return r};f.module=angular.module("gmfSyncLayertreeMap",[n["a"].module.name,a["a"].module.name,i["a"].module.name]);f.module.service("gmfSyncLayertreeMap",f);t["a"]=f},function(e,t,r){"use strict";t["a"]={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"}},function(e,t,r){"use strict";r.d(t,"a",function(){return f});r.d(t,"b",function(){return h});r.d(t,"e",function(){return m});r.d(t,"c",function(){return p});r.d(t,"d",function(){return a});var C=r(15);function n(e,t,r,n,i,a,o){var s=o!==undefined?o:[];if(!a){r=l(e,t,r,n,i,s,0);e=s;t=0;n=2}s.length=f(e,t,r,n,i,s,0);return s}function f(e,t,r,n,i,a,o){var s=(r-t)/n;if(s<3){for(;t<r;t+=n){a[o++]=e[t];a[o++]=e[t+1]}return o}var l=new Array(s);l[0]=1;l[s-1]=1;var u=[t,r-n];var c=0;while(u.length>0){var f=u.pop();var h=u.pop();var d=0;var p=e[h];var v=e[h+1];var g=e[f];var m=e[f+1];for(var _=h+n;_<f;_+=n){var y=e[_];var b=e[_+1];var w=Object(C["g"])(y,b,p,v,g,m);if(w>d){c=_;d=w}}if(d>i){l[(c-t)/n]=1;if(h+n<c){u.push(h,c)}if(c+n<f){u.push(c,f)}}}for(var S=0;S<s;++S){if(l[S]){a[o++]=e[t+S*n];a[o++]=e[t+S*n+1]}}return o}function h(e,t,r,n,i,a,o,s){for(var l=0,u=r.length;l<u;++l){var c=r[l];o=f(e,t,c,n,i,a,o);s.push(o);t=c}return o}function i(e,t,r,n,i,a,o,s){for(var l=0,u=r.length;l<u;++l){var c=r[l];var f=[];o=h(e,t,c,n,i,a,o,f);s.push(f);t=c[c.length-1]}return o}function l(e,t,r,n,i,a,o){if(r<=t+n){for(;t<r;t+=n){a[o++]=e[t];a[o++]=e[t+1]}return o}var s=e[t];var l=e[t+1];a[o++]=s;a[o++]=l;var u=s;var c=l;for(t+=n;t<r;t+=n){u=e[t];c=e[t+1];if(Object(C["f"])(s,l,u,c)>i){a[o++]=u;a[o++]=c;s=u;l=c}}if(u!=s||c!=l){a[o++]=u;a[o++]=c}return o}function m(e,t){return t*Math.round(e/t)}function d(e,t,r,n,i,a,o){if(t==r){return o}var s=m(e[t],i);var l=m(e[t+1],i);t+=n;a[o++]=s;a[o++]=l;var u,c;do{u=m(e[t],i);c=m(e[t+1],i);t+=n;if(t==r){a[o++]=u;a[o++]=c;return o}}while(u==s&&c==l);while(t<r){var f=m(e[t],i);var h=m(e[t+1],i);t+=n;if(f==u&&h==c){continue}var d=u-s;var p=c-l;var v=f-s;var g=h-l;if(d*g==p*v&&(d<0&&v<d||d==v||d>0&&v>d)&&(p<0&&g<p||p==g||p>0&&g>p)){u=f;c=h;continue}a[o++]=u;a[o++]=c;s=u;l=c;u=f;c=h}a[o++]=u;a[o++]=c;return o}function p(e,t,r,n,i,a,o,s){for(var l=0,u=r.length;l<u;++l){var c=r[l];o=d(e,t,c,n,i,a,o);s.push(o);t=c}return o}function a(e,t,r,n,i,a,o,s){for(var l=0,u=r.length;l<u;++l){var c=r[l];var f=[];o=p(e,t,c,n,i,a,o,f);s.push(f);t=c[c.length-1]}return o}},function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"b",function(){return i});function n(e,t,r,n,i,a,o){var s=new Date(e,t,r,n,i,a,o);if(e<100&&e>=0&&isFinite(s.getFullYear())){s.setFullYear(e)}return s}function i(e){var t=new Date(Date.UTC.apply(null,arguments));if(e<100&&e>=0&&isFinite(t.getUTCFullYear())){t.setUTCFullYear(e)}return t}},function(e,t,r){"use strict";var n=r(1);var i=r(76);var a=function e(t,r){this.history_=r;this.schema_=t.protocol.substring(0,t.protocol.length-1);this.domain_=t.hostname;this.port_=t.port?parseInt(t.port,10):undefined;this.path_=t.pathname;this.queryData_=i["a"].decodeQueryString(t.search);this.fragment_=i["a"].decodeQueryString(t.hash)};a.replaceState=function(e,t){try{e.replaceState(null,"",t)}catch(e){}};a.prototype.getPath=function(){return this.path_};a.prototype.getUriString=function(){var e=[];if(this.schema_){e.push(this.schema_,":")}if(this.domain_||this.schema_==="file"){e.push("//");e.push(this.domain_);if(this.port_!==undefined){e.push(":",String(this.port_))}}if(this.path_){if(this.domain_&&this.path_.charAt(0)!=="/"){e.push("/")}e.push(this.path_)}var t=i["a"].encodeQueryString(this.queryData_);if(t.length>0){e.push("?",t)}var r=i["a"].encodeQueryString(this.fragment_);if(r.length>0){e.push("#",r)}return e.join("")};a.prototype.hasParam=function(e){return e in this.queryData_};a.prototype.hasFragmentParam=function(e){return e in this.fragment_};a.prototype.getParam=function(e){return this.queryData_[e]};a.prototype.getFragmentParam=function(e){return this.fragment_[e]};a.prototype.getParamAsInt=function(e){var t=this.getParam(e);if(t===undefined){return undefined}n["a"].assertString(t);var r=parseInt(t,10);return isNaN(r)?undefined:r};a.prototype.getParamAsFloat=function(e){var t=this.getParam(e);if(t===undefined){return undefined}n["a"].assertString(t);var r=parseFloat(t);return isNaN(r)?undefined:r};a.prototype.getFragmentParamAsInt=function(e){var t=this.getFragmentParam(e);if(t===undefined){return undefined}n["a"].assertString(t);var r=parseInt(t,10);return isNaN(r)?undefined:r};a.prototype.getParamKeys=function(){var e=[];for(var t in this.queryData_){e.push(t)}return e};a.prototype.getFragmentParamKeys=function(){var e=[];for(var t in this.fragment_){e.push(t)}return e};a.prototype.getParamKeysWithPrefix=function(e){var t=[];for(var r in this.queryData_){if(r.indexOf(e)==0){t.push(r)}}return t};a.prototype.getFragmentParamKeysWithPrefix=function(e){var t=[];for(var r in this.fragment_){if(r.indexOf(e)==0){t.push(r)}}return t};a.prototype.updateParams=function(e){for(var t in e){this.queryData_[t]=e[t]}};a.prototype.updateFragmentParams=function(e){for(var t in e){this.fragment_[t]=e[t]}};a.prototype.deleteParam=function(e){delete this.queryData_[e]};a.prototype.deleteFragmentParam=function(e){delete this.fragment_[e]};a.prototype.refresh=function(){a.replaceState(this.history_,this.getUriString())};a.prototype.setPath=function(e){this.path_=e};a.LocationFactory=function(t,e){var r=e.history;var n=new a(e.location,e.history);var i=n.getUriString();t.$watch(function(){var e=n.getUriString();if(i!==e){t.$evalAsync(function(){i=e;if(r!==undefined&&r.replaceState!==undefined){a.replaceState(r,e)}t.$broadcast("ngeoLocationChange")})}});return n};a.LocationFactory.$inject=["$rootScope","$window"];a.MockProvider=function(e){e["$get"]=function(){var e={absUrl:function e(){return""},hash:function e(t){return t!==undefined?this:""},host:function e(){return""},path:function e(t){return t!==undefined?this:""},port:function e(){return 0},protocol:function e(){return""},replace:function e(){},search:function e(t,r){return t!==undefined?this:{}},url:function e(t){return""}};return e}};a.MockProvider.$inject=["$locationProvider"];a.module=angular.module("ngeoLocation",[]);a.module.factory("ngeoLocation",a.LocationFactory);t["a"]=a},function(e,t,r){"use strict";var n=r(2);var i=function e(){this.listenerKeys_={}};i.prototype.addListenerKey=function(e,t){if(!this.listenerKeys_[e]){this.initListenerKey_(e)}this.listenerKeys_[e].push(t)};i.prototype.clearListenerKey=function(e){this.initListenerKey_(e)};i.prototype.initListenerKey_=function(e){if(!this.listenerKeys_[e]){this.listenerKeys_[e]=[]}else{if(this.listenerKeys_[e].length){this.listenerKeys_[e].forEach(n["e"]);this.listenerKeys_[e].length=0}}};i.module=angular.module("ngeoEventHelper",[]);i.module.service("ngeoEventHelper",i);t["a"]=i},function(e,t,r){"use strict";var n=angular.module("ngeoDebounce",[]);n.factory_=function(u){return function(a,o,s){var l=null;return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}var n=this;var i=function e(){l=null;a.apply(n,t)};if(l!==null){u.cancel(l)}l=u(i,o,s)}}};n.factory_.$inject=["$timeout"];n.factory("ngeoDebounce",n.factory_);t["a"]=n},function(e,t,r){"use strict";var a=r(41);var o=r(222);var n=r(50);var s=r(53);var l=r(2);var i=function(t){function e(e){t.call(this);this.element=e.element?e.element:null;this.target_=null;this.map_=null;this.listenerKeys=[];this.render=e.render?e.render:a["c"];if(e.target){this.setTarget(e.target)}}if(t)e.__proto__=t;e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;e.prototype.disposeInternal=function e(){Object(s["e"])(this.element);t.prototype.disposeInternal.call(this)};e.prototype.getMap=function e(){return this.map_};e.prototype.setMap=function e(t){if(this.map_){Object(s["e"])(this.element)}for(var r=0,n=this.listenerKeys.length;r<n;++r){Object(l["e"])(this.listenerKeys[r])}this.listenerKeys.length=0;this.map_=t;if(this.map_){var i=this.target_?this.target_:t.getOverlayContainerStopEvent();i.appendChild(this.element);if(this.render!==a["c"]){this.listenerKeys.push(Object(l["a"])(t,o["a"].POSTRENDER,this.render,this))}t.render()}};e.prototype.setTarget=function e(t){this.target_=typeof t==="string"?document.getElementById(t):t};return e}(n["a"]);t["a"]=i},function(e,t,r){"use strict";var A=r(1);var v=r(174);var o=r(42);var n=r(62);var i=r(119);var k=r(52);function a(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}var s=function(t){a(e,t);function e(e){e.type=e.type||o["a"].DATE;return t.call(this,e)||this}return e}(k["a"]);var j=s;var I=r(109);var D=r(203);function l(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}var u=function(t){l(e,t);function e(e){e.operator=e.operator||k["a"].OperatorType.LIKE;e.type=o["a"].TEXT;return t.call(this,e)||this}return e}(k["a"]);var d=u;var c=r(151);var P=r(70);var R=r(8);var f=r(18);var h=r(63);var p=r(136);var g=r(149);var m=r(89);var _=r(94);var y=r(140);var b=Object(_["a"])("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=h["a"].apply(null,arguments);if(this.isValid()&&e.isValid()){return e<this?this:e}else{return Object(g["a"])()}});var w=Object(_["a"])("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=h["a"].apply(null,arguments);if(this.isValid()&&e.isValid()){return e>this?this:e}else{return Object(g["a"])()}});function S(e,t){var r,n;if(t.length===1&&Object(y["a"])(t[0])){t=t[0]}if(!t.length){return Object(h["a"])()}r=t[0];for(n=1;n<t.length;++n){if(!t[n].isValid()||t[n][e](r)){r=t[n]}}return r}function C(){var e=[].slice.call(arguments,0);return S("isBefore",e)}function O(){var e=[].slice.call(arguments,0);return S("isAfter",e)}var x=function e(){return Date.now?Date.now():+new Date};var T=r(99);var E=r(95);var M=r(40);var L=r(111);var N=r(37);var $=r(97);var F=["year","quarter","month","week","day","hour","minute","second","millisecond"];function G(e){for(var t in e){if(!($["a"].call(F,t)!==-1&&(e[t]==null||!isNaN(e[t])))){return false}}var r=false;for(var n=0;n<F.length;++n){if(e[F[n]]){if(r){return false}if(parseFloat(e[F[n]])!==Object(N["a"])(e[F[n]])){r=true}}}return true}function U(){return this._isValid}function H(){return we(NaN)}function W(e){var t=Object(M["b"])(e),r=t.year||0,n=t.quarter||0,i=t.month||0,a=t.week||0,o=t.day||0,s=t.hour||0,l=t.minute||0,u=t.second||0,c=t.millisecond||0;this._isValid=G(t);this._milliseconds=+c+u*1e3+l*6e4+s*1e3*60*60;this._days=+o+a*7;this._months=+i+n*3+r*12;this._data={};this._locale=Object(L["b"])();this._bubble()}function Y(e){return e instanceof W}var V=r(164);function q(e){if(e<0){return Math.round(-1*e)*-1}else{return Math.round(e)}}var z=r(68);var B=r(17);var K=r(168);var X=r(24);var Z=r(6);var Q=r(48);var J=r(266);var ee=r(236);var te=r(96);var re=r(319);function ne(e,r){Object(X["a"])(e,0,0,function(){var e=this.utcOffset();var t="+";if(e<0){e=-e;t="-"}return t+Object(K["a"])(~~(e/60),2)+r+Object(K["a"])(~~e%60,2)})}ne("Z",":");ne("ZZ","");Object(Z["a"])("Z",Z["o"]);Object(Z["a"])("ZZ",Z["o"]);Object(Q["a"])(["Z","ZZ"],function(e,t,r){r._useUTC=true;r._tzm=ae(Z["o"],e)});var ie=/([\+\-]|\d\d)/gi;function ae(e,t){var r=(t||"").match(e);if(r===null){return null}var n=r[r.length-1]||[];var i=(n+"").match(ie)||["-",0,0];var a=+(i[1]*60)+Object(N["a"])(i[2]);return a===0?0:i[0]==="+"?a:-a}function oe(e,t){var r,n;if(t._isUTC){r=t.clone();n=(Object(m["c"])(e)||Object(ee["a"])(e)?e.valueOf():Object(h["a"])(e).valueOf())-r.valueOf();r._d.setTime(r._d.valueOf()+n);f["a"].updateOffset(r,false);return r}else{return Object(h["a"])(e).local()}}function se(e){return-Math.round(e._d.getTimezoneOffset()/15)*15}f["a"].updateOffset=function(){};function le(e,t,r){var n=this._offset||0,i;if(!this.isValid()){return e!=null?this:NaN}if(e!=null){if(typeof e==="string"){e=ae(Z["o"],e);if(e===null){return this}}else if(Math.abs(e)<16&&!r){e=e*60}if(!this._isUTC&&t){i=se(this)}this._offset=e;this._isUTC=true;if(i!=null){this.add(i,"m")}if(n!==e){if(!t||this._changeInProgress){Te(this,we(e-n,"m"),1,false)}else if(!this._changeInProgress){this._changeInProgress=true;f["a"].updateOffset(this,true);this._changeInProgress=null}}return this}else{return this._isUTC?n:se(this)}}function ue(e,t){if(e!=null){if(typeof e!=="string"){e=-e}this.utcOffset(e,t);return this}else{return-this.utcOffset()}}function ce(e){return this.utcOffset(0,e)}function fe(e){if(this._isUTC){this.utcOffset(0,e);this._isUTC=false;if(e){this.subtract(se(this),"m")}}return this}function he(){if(this._tzm!=null){this.utcOffset(this._tzm,false,true)}else if(typeof this._i==="string"){var e=ae(Z["n"],this._i);if(e!=null){this.utcOffset(e)}else{this.utcOffset(0,true)}}return this}function de(e){if(!this.isValid()){return false}e=e?Object(h["a"])(e).utcOffset():0;return(this.utcOffset()-e)%60===0}function pe(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function ve(){if(!Object(te["a"])(this._isDSTShifted)){return this._isDSTShifted}var e={};Object(m["b"])(e,this);e=Object(J["b"])(e);if(e._a){var t=e._isUTC?Object(p["a"])(e._a):Object(h["a"])(e._a);this._isDSTShifted=this.isValid()&&Object(re["a"])(e._a,t.toArray())>0}else{this._isDSTShifted=false}return this._isDSTShifted}function ge(){return this.isValid()?!this._isUTC:false}function me(){return this.isValid()?this._isUTC:false}function _e(){return this.isValid()?this._isUTC&&this._offset===0:false}var ye=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/;var be=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function we(e,t){var r=e,n=null,i,a,o;if(Y(e)){r={ms:e._milliseconds,d:e._days,M:e._months}}else if(Object(V["a"])(e)){r={};if(t){r[t]=e}else{r.milliseconds=e}}else if(!!(n=ye.exec(e))){i=n[1]==="-"?-1:1;r={y:0,d:Object(N["a"])(n[B["a"]])*i,h:Object(N["a"])(n[B["b"]])*i,m:Object(N["a"])(n[B["d"]])*i,s:Object(N["a"])(n[B["f"]])*i,ms:Object(N["a"])(q(n[B["c"]]*1e3))*i}}else if(!!(n=be.exec(e))){i=n[1]==="-"?-1:n[1]==="+"?1:1;r={y:Se(n[2],i),M:Se(n[3],i),w:Se(n[4],i),d:Se(n[5],i),h:Se(n[6],i),m:Se(n[7],i),s:Se(n[8],i)}}else if(r==null){r={}}else if(typeof r==="object"&&("from"in r||"to"in r)){o=Oe(Object(h["a"])(r.from),Object(h["a"])(r.to));r={};r.ms=o.milliseconds;r.M=o.months}a=new W(r);if(Y(e)&&Object(z["a"])(e,"_locale")){a._locale=e._locale}return a}we.fn=W.prototype;we.invalid=H;function Se(e,t){var r=e&&parseFloat(e.replace(",","."));return(isNaN(r)?0:r)*t}function Ce(e,t){var r={milliseconds:0,months:0};r.months=t.month()-e.month()+(t.year()-e.year())*12;if(e.clone().add(r.months,"M").isAfter(t)){--r.months}r.milliseconds=+t-+e.clone().add(r.months,"M");return r}function Oe(e,t){var r;if(!(e.isValid()&&t.isValid())){return{milliseconds:0,months:0}}t=oe(t,e);if(e.isBefore(t)){r=Ce(e,t)}else{r=Ce(t,e);r.milliseconds=-r.milliseconds;r.months=-r.months}return r}function xe(i,a){return function(e,t){var r,n;if(t!==null&&!isNaN(+t)){Object(_["b"])(a,"moment()."+a+"(period, number) is deprecated. Please use moment()."+a+"(number, period). "+"See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");n=e;e=t;t=n}e=typeof e==="string"?+e:e;r=we(e,t);Te(this,r,i);return this}}function Te(e,t,r,n){var i=t._milliseconds,a=q(t._days),o=q(t._months);if(!e.isValid()){return}n=n==null?true:n;if(o){Object(E["k"])(e,Object(T["a"])(e,"Month")+o*r)}if(a){Object(T["c"])(e,"Date",Object(T["a"])(e,"Date")+a*r)}if(i){e._d.setTime(e._d.valueOf()+i*r)}if(n){f["a"].updateOffset(e,a||o)}}var Ee=xe(1,"add");var Me=xe(-1,"subtract");var Ae=r(122);function ke(e,t){var r=e.diff(t,"days",true);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"}function je(e,t){var r=e||Object(h["a"])(),n=oe(r,this).startOf("day"),i=f["a"].calendarFormat(this,n)||"sameElse";var a=t&&(Object(Ae["a"])(t[i])?t[i].call(this,r):t[i]);return this.format(a||this.localeData().calendar(i,this,Object(h["a"])(r)))}function Ie(){return new m["a"](this)}function De(e,t){var r=Object(m["c"])(e)?e:Object(h["a"])(e);if(!(this.isValid()&&r.isValid())){return false}t=Object(M["c"])(!Object(te["a"])(t)?t:"millisecond");if(t==="millisecond"){return this.valueOf()>r.valueOf()}else{return r.valueOf()<this.clone().startOf(t).valueOf()}}function Pe(e,t){var r=Object(m["c"])(e)?e:Object(h["a"])(e);if(!(this.isValid()&&r.isValid())){return false}t=Object(M["c"])(!Object(te["a"])(t)?t:"millisecond");if(t==="millisecond"){return this.valueOf()<r.valueOf()}else{return this.clone().endOf(t).valueOf()<r.valueOf()}}function Re(e,t,r,n){n=n||"()";return(n[0]==="("?this.isAfter(e,r):!this.isBefore(e,r))&&(n[1]===")"?this.isBefore(t,r):!this.isAfter(t,r))}function Le(e,t){var r=Object(m["c"])(e)?e:Object(h["a"])(e),n;if(!(this.isValid()&&r.isValid())){return false}t=Object(M["c"])(t||"millisecond");if(t==="millisecond"){return this.valueOf()===r.valueOf()}else{n=r.valueOf();return this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()}}function Ne(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function $e(e,t){return this.isSame(e,t)||this.isBefore(e,t)}var Fe=r(130);function Ge(e,t,r){var n,i,a,o;if(!this.isValid()){return NaN}n=oe(e,this);if(!n.isValid()){return NaN}i=(n.utcOffset()-this.utcOffset())*6e4;t=Object(M["c"])(t);switch(t){case"year":o=Ue(this,n)/12;break;case"month":o=Ue(this,n);break;case"quarter":o=Ue(this,n)/3;break;case"second":o=(this-n)/1e3;break;case"minute":o=(this-n)/6e4;break;case"hour":o=(this-n)/36e5;break;case"day":o=(this-n-i)/864e5;break;case"week":o=(this-n-i)/6048e5;break;default:o=this-n}return r?o:Object(Fe["a"])(o)}function Ue(e,t){var r=(t.year()-e.year())*12+(t.month()-e.month()),n=e.clone().add(r,"months"),i,a;if(t-n<0){i=e.clone().add(r-1,"months");a=(t-n)/(n-i)}else{i=e.clone().add(r+1,"months");a=(t-n)/(i-n)}return-(r+a)||0}f["a"].defaultFormat="YYYY-MM-DDTHH:mm:ssZ";f["a"].defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function He(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function We(e){if(!this.isValid()){return null}var t=e!==true;var r=t?this.clone().utc():this;if(r.year()<0||r.year()>9999){return Object(X["c"])(r,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ")}if(Object(Ae["a"])(Date.prototype.toISOString)){if(t){return this.toDate().toISOString()}else{return new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Object(X["c"])(r,"Z"))}}return Object(X["c"])(r,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Ye(){if(!this.isValid()){return"moment.invalid(/* "+this._i+" */)"}var e="moment";var t="";if(!this.isLocal()){e=this.utcOffset()===0?"moment.utc":"moment.parseZone";t="Z"}var r="["+e+'("]';var n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY";var i="-MM-DD[T]HH:mm:ss.SSS";var a=t+'[")]';return this.format(r+n+i+a)}function Ve(e){if(!e){e=this.isUtc()?f["a"].defaultFormatUtc:f["a"].defaultFormat}var t=Object(X["c"])(this,e);return this.localeData().postformat(t)}function qe(e,t){if(this.isValid()&&(Object(m["c"])(e)&&e.isValid()||Object(h["a"])(e).isValid())){return we({to:this,from:e}).locale(this.locale()).humanize(!t)}else{return this.localeData().invalidDate()}}function ze(e){return this.from(Object(h["a"])(),e)}function Be(e,t){if(this.isValid()&&(Object(m["c"])(e)&&e.isValid()||Object(h["a"])(e).isValid())){return we({from:this,to:e}).locale(this.locale()).humanize(!t)}else{return this.localeData().invalidDate()}}function Ke(e){return this.to(Object(h["a"])(),e)}function Xe(e){var t;if(e===undefined){return this._locale._abbr}else{t=Object(L["b"])(e);if(t!=null){this._locale=t}return this}}var Ze=Object(_["a"])("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){if(e===undefined){return this.localeData()}else{return this.locale(e)}});function Qe(){return this._locale}function Je(e){e=Object(M["c"])(e);switch(e){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(e==="week"){this.weekday(0)}if(e==="isoWeek"){this.isoWeekday(1)}if(e==="quarter"){this.month(Math.floor(this.month()/3)*3)}return this}function et(e){e=Object(M["c"])(e);if(e===undefined||e==="millisecond"){return this}if(e==="date"){e="day"}return this.startOf(e).add(1,e==="isoWeek"?"week":e).subtract(1,"ms")}function tt(){return this._d.valueOf()-(this._offset||0)*6e4}function rt(){return Math.floor(this.valueOf()/1e3)}function nt(){return new Date(this.valueOf())}function it(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function at(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function ot(){return this.isValid()?this.toISOString():null}var st=r(153);var lt=r(44);function ut(){return Object(g["b"])(this)}function ct(){return Object(st["a"])({},Object(lt["a"])(this))}function ft(){return Object(lt["a"])(this).overflow}function ht(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}var dt=r(128);var pt=r(75);var vt=r(148);var gt=r(157);Object(X["a"])(0,["gg",2],0,function(){return this.weekYear()%100});Object(X["a"])(0,["GG",2],0,function(){return this.isoWeekYear()%100});function mt(e,t){Object(X["a"])(0,[e,e.length],0,t)}mt("gggg","weekYear");mt("ggggg","weekYear");mt("GGGG","isoWeekYear");mt("GGGGG","isoWeekYear");Object(M["a"])("weekYear","gg");Object(M["a"])("isoWeekYear","GG");Object(pt["a"])("weekYear",1);Object(pt["a"])("isoWeekYear",1);Object(Z["a"])("G",Z["p"]);Object(Z["a"])("g",Z["p"]);Object(Z["a"])("GG",Z["d"],Z["h"]);Object(Z["a"])("gg",Z["d"],Z["h"]);Object(Z["a"])("GGGG",Z["f"],Z["k"]);Object(Z["a"])("gggg",Z["f"],Z["k"]);Object(Z["a"])("GGGGG",Z["g"],Z["m"]);Object(Z["a"])("ggggg",Z["g"],Z["m"]);Object(Q["c"])(["gggg","ggggg","GGGG","GGGGG"],function(e,t,r,n){t[n.substr(0,2)]=Object(N["a"])(e)});Object(Q["c"])(["gg","GG"],function(e,t,r,n){t[n]=f["a"].parseTwoDigitYear(e)});function _t(e){return St.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function yt(e){return St.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function bt(){return Object(vt["c"])(this.year(),1,4)}function wt(){var e=this.localeData()._week;return Object(vt["c"])(this.year(),e.dow,e.doy)}function St(e,t,r,n,i){var a;if(e==null){return Object(vt["b"])(this,n,i).year}else{a=Object(vt["c"])(e,n,i);if(t>a){t=a}return Ct.call(this,e,t,r,n,i)}}function Ct(e,t,r,n,i){var a=Object(vt["a"])(e,t,r,n,i),o=Object(gt["b"])(a.year,0,a.dayOfYear);this.year(o.getUTCFullYear());this.month(o.getUTCMonth());this.date(o.getUTCDate());return this}Object(X["a"])("Q",0,"Qo","quarter");Object(M["a"])("quarter","Q");Object(pt["a"])("quarter",7);Object(Z["a"])("Q",Z["c"]);Object(Q["a"])("Q",function(e,t){t[B["e"]]=(Object(N["a"])(e)-1)*3});function Ot(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}var xt=r(192);Object(X["a"])("D",["DD",2],"Do","date");Object(M["a"])("date","D");Object(pt["a"])("date",9);Object(Z["a"])("D",Z["d"]);Object(Z["a"])("DD",Z["d"],Z["h"]);Object(Z["a"])("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});Object(Q["a"])(["D","DD"],B["a"]);Object(Q["a"])("Do",function(e,t){t[B["a"]]=Object(N["a"])(e.match(Z["d"])[0])});var Tt=Object(T["b"])("Date",true);var Et=r(115);Object(X["a"])("DDD",["DDDD",3],"DDDo","dayOfYear");Object(M["a"])("dayOfYear","DDD");Object(pt["a"])("dayOfYear",4);Object(Z["a"])("DDD",Z["e"]);Object(Z["a"])("DDDD",Z["i"]);Object(Q["a"])(["DDD","DDDD"],function(e,t,r){r._dayOfYear=Object(N["a"])(e)});function Mt(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}var At=r(210);Object(X["a"])("m",["mm",2],0,"minute");Object(M["a"])("minute","m");Object(pt["a"])("minute",14);Object(Z["a"])("m",Z["d"]);Object(Z["a"])("mm",Z["d"],Z["h"]);Object(Q["a"])(["m","mm"],B["d"]);var kt=Object(T["b"])("Minutes",false);Object(X["a"])("s",["ss",2],0,"second");Object(M["a"])("second","s");Object(pt["a"])("second",15);Object(Z["a"])("s",Z["d"]);Object(Z["a"])("ss",Z["d"],Z["h"]);Object(Q["a"])(["s","ss"],B["f"]);var jt=Object(T["b"])("Seconds",false);Object(X["a"])("S",0,0,function(){return~~(this.millisecond()/100)});Object(X["a"])(0,["SS",2],0,function(){return~~(this.millisecond()/10)});Object(X["a"])(0,["SSS",3],0,"millisecond");Object(X["a"])(0,["SSSS",4],0,function(){return this.millisecond()*10});Object(X["a"])(0,["SSSSS",5],0,function(){return this.millisecond()*100});Object(X["a"])(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});Object(X["a"])(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});Object(X["a"])(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});Object(X["a"])(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Object(M["a"])("millisecond","ms");Object(pt["a"])("millisecond",16);Object(Z["a"])("S",Z["e"],Z["c"]);Object(Z["a"])("SS",Z["e"],Z["h"]);Object(Z["a"])("SSS",Z["e"],Z["i"]);var It;for(It="SSSS";It.length<=9;It+="S"){Object(Z["a"])(It,Z["r"])}function Dt(e,t){t[B["c"]]=Object(N["a"])(("0."+e)*1e3)}for(It="S";It.length<=9;It+="S"){Object(Q["a"])(It,Dt)}var Pt=Object(T["b"])("Milliseconds",false);Object(X["a"])("z",0,0,"zoneAbbr");Object(X["a"])("zz",0,0,"zoneName");function Rt(){return this._isUTC?"UTC":""}function Lt(){return this._isUTC?"Coordinated Universal Time":""}var Nt=m["a"].prototype;Nt.add=Ee;Nt.calendar=je;Nt.clone=Ie;Nt.diff=Ge;Nt.endOf=et;Nt.format=Ve;Nt.from=qe;Nt.fromNow=ze;Nt.to=Be;Nt.toNow=Ke;Nt.get=T["d"];Nt.invalidAt=ft;Nt.isAfter=De;Nt.isBefore=Pe;Nt.isBetween=Re;Nt.isSame=Le;Nt.isSameOrAfter=Ne;Nt.isSameOrBefore=$e;Nt.isValid=ut;Nt.lang=Ze;Nt.locale=Xe;Nt.localeData=Qe;Nt.max=w;Nt.min=b;Nt.parsingFlags=ct;Nt.set=T["e"];Nt.startOf=Je;Nt.subtract=Me;Nt.toArray=it;Nt.toObject=at;Nt.toDate=nt;Nt.toISOString=We;Nt.inspect=Ye;Nt.toJSON=ot;Nt.toString=He;Nt.unix=rt;Nt.valueOf=tt;Nt.creationData=ht;Nt.year=dt["c"];Nt.isLeapYear=dt["b"];Nt.weekYear=_t;Nt.isoWeekYear=yt;Nt.quarter=Nt.quarters=Ot;Nt.month=E["e"];Nt.daysInMonth=E["d"];Nt.week=Nt.weeks=xt["c"];Nt.isoWeek=Nt.isoWeeks=xt["b"];Nt.weeksInYear=wt;Nt.isoWeeksInYear=bt;Nt.date=Tt;Nt.day=Nt.days=Et["d"];Nt.weekday=Et["f"];Nt.isoWeekday=Et["e"];Nt.dayOfYear=Mt;Nt.hour=Nt.hours=At["b"];Nt.minute=Nt.minutes=kt;Nt.second=Nt.seconds=jt;Nt.millisecond=Nt.milliseconds=Pt;Nt.utcOffset=le;Nt.utc=ce;Nt.local=fe;Nt.parseZone=he;Nt.hasAlignedHourOffset=de;Nt.isDST=pe;Nt.isLocal=ge;Nt.isUtcOffset=me;Nt.isUtc=_e;Nt.isUTC=_e;Nt.zoneAbbr=Rt;Nt.zoneName=Lt;Nt.dates=Object(_["a"])("dates accessor is deprecated. Use date instead.",Tt);Nt.months=Object(_["a"])("months accessor is deprecated. Use month instead",E["e"]);Nt.years=Object(_["a"])("years accessor is deprecated. Use year instead",dt["c"]);Nt.zone=Object(_["a"])("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",ue);Nt.isDSTShifted=Object(_["a"])("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",ve);var $t=Nt;function Ft(e){return Object(h["a"])(e*1e3)}function Gt(){return h["a"].apply(null,arguments).parseZone()}var Ut=r(286);var Ht=r(320);var Wt=r(321);var Yt=r(322);var Vt=r(287);function qt(e){return e}var zt=r(288);var Bt=r(285);var Kt=Ut["a"].prototype;Kt.calendar=Ht["a"];Kt.longDateFormat=Wt["b"];Kt.invalidDate=Yt["b"];Kt.ordinal=Vt["c"];Kt.preparse=qt;Kt.postformat=qt;Kt.relativeTime=zt["c"];Kt.pastFuture=zt["b"];Kt.set=Bt["b"];Kt.months=E["f"];Kt.monthsShort=E["h"];Kt.monthsParse=E["g"];Kt.monthsRegex=E["i"];Kt.monthsShortRegex=E["j"];Kt.week=xt["f"];Kt.firstDayOfYear=xt["e"];Kt.firstDayOfWeek=xt["d"];Kt.weekdays=Et["g"];Kt.weekdaysMin=Et["h"];Kt.weekdaysShort=Et["j"];Kt.weekdaysParse=Et["i"];Kt.weekdaysRegex=Et["l"];Kt.weekdaysShortRegex=Et["m"];Kt.weekdaysMinRegex=Et["k"];Kt.isPM=At["c"];Kt.meridiem=At["d"];function Xt(e,t,r,n){var i=Object(L["b"])();var a=Object(p["a"])().set(n,t);return i[r](a,e)}function Zt(e,t,r){if(Object(V["a"])(e)){t=e;e=undefined}e=e||"";if(t!=null){return Xt(e,t,r,"month")}var n;var i=[];for(n=0;n<12;n++){i[n]=Xt(e,n,r,"month")}return i}function Qt(e,t,r,n){if(typeof e==="boolean"){if(Object(V["a"])(t)){r=t;t=undefined}t=t||""}else{t=e;r=t;e=false;if(Object(V["a"])(t)){r=t;t=undefined}t=t||""}var i=Object(L["b"])(),a=e?i._week.dow:0;if(r!=null){return Xt(t,(r+a)%7,n,"day")}var o;var s=[];for(o=0;o<7;o++){s[o]=Xt(t,(o+a)%7,n,"day")}return s}function Jt(e,t){return Zt(e,t,"months")}function er(e,t){return Zt(e,t,"monthsShort")}function tr(e,t,r){return Qt(e,t,r,"weekdays")}function rr(e,t,r){return Qt(e,t,r,"weekdaysShort")}function nr(e,t,r){return Qt(e,t,r,"weekdaysMin")}Object(L["c"])("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function e(t){var r=t%10,n=Object(N["a"])(t%100/10)===1?"th":r===1?"st":r===2?"nd":r===3?"rd":"th";return t+n}});f["a"].lang=Object(_["a"])("moment.lang is deprecated. Use moment.locale instead.",L["c"]);f["a"].langData=Object(_["a"])("moment.langData is deprecated. Use moment.localeData instead.",L["b"]);var ir=Math.abs;function ar(){var e=this._data;this._milliseconds=ir(this._milliseconds);this._days=ir(this._days);this._months=ir(this._months);e.milliseconds=ir(e.milliseconds);e.seconds=ir(e.seconds);e.minutes=ir(e.minutes);e.hours=ir(e.hours);e.months=ir(e.months);e.years=ir(e.years);return this}function or(e,t,r,n){var i=we(t,r);e._milliseconds+=n*i._milliseconds;e._days+=n*i._days;e._months+=n*i._months;return e._bubble()}function sr(e,t){return or(this,e,t,1)}function lr(e,t){return or(this,e,t,-1)}function ur(e){if(e<0){return Math.floor(e)}else{return Math.ceil(e)}}function cr(){var e=this._milliseconds;var t=this._days;var r=this._months;var n=this._data;var i,a,o,s,l;if(!(e>=0&&t>=0&&r>=0||e<=0&&t<=0&&r<=0)){e+=ur(hr(r)+t)*864e5;t=0;r=0}n.milliseconds=e%1e3;i=Object(Fe["a"])(e/1e3);n.seconds=i%60;a=Object(Fe["a"])(i/60);n.minutes=a%60;o=Object(Fe["a"])(a/60);n.hours=o%24;t+=Object(Fe["a"])(o/24);l=Object(Fe["a"])(fr(t));r+=l;t-=ur(hr(l));s=Object(Fe["a"])(r/12);r%=12;n.days=t;n.months=r;n.years=s;return this}function fr(e){return e*4800/146097}function hr(e){return e*146097/4800}function dr(e){if(!this.isValid()){return NaN}var t;var r;var n=this._milliseconds;e=Object(M["c"])(e);if(e==="month"||e==="year"){t=this._days+n/864e5;r=this._months+fr(t);return e==="month"?r:r/12}else{t=this._days+Math.round(hr(this._months));switch(e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return t*24+n/36e5;case"minute":return t*1440+n/6e4;case"second":return t*86400+n/1e3;case"millisecond":return Math.floor(t*864e5)+n;default:throw new Error("Unknown unit "+e)}}}function pr(){if(!this.isValid()){return NaN}return this._milliseconds+this._days*864e5+this._months%12*2592e6+Object(N["a"])(this._months/12)*31536e6}function vr(e){return function(){return this.as(e)}}var gr=vr("ms");var mr=vr("s");var _r=vr("m");var yr=vr("h");var br=vr("d");var wr=vr("w");var Sr=vr("M");var Cr=vr("y");function Or(){return we(this)}function xr(e){e=Object(M["c"])(e);return this.isValid()?this[e+"s"]():NaN}function Tr(e){return function(){return this.isValid()?this._data[e]:NaN}}var Er=Tr("milliseconds");var Mr=Tr("seconds");var Ar=Tr("minutes");var kr=Tr("hours");var jr=Tr("days");var Ir=Tr("months");var Dr=Tr("years");function Pr(){return Object(Fe["a"])(this.days()/7)}var Rr=Math.round;var Lr={ss:44,s:45,m:45,h:22,d:26,M:11};function Nr(e,t,r,n,i){return i.relativeTime(t||1,!!r,e,n)}function $r(e,t,r){var n=we(e).abs();var i=Rr(n.as("s"));var a=Rr(n.as("m"));var o=Rr(n.as("h"));var s=Rr(n.as("d"));var l=Rr(n.as("M"));var u=Rr(n.as("y"));var c=i<=Lr.ss&&["s",i]||i<Lr.s&&["ss",i]||a<=1&&["m"]||a<Lr.m&&["mm",a]||o<=1&&["h"]||o<Lr.h&&["hh",o]||s<=1&&["d"]||s<Lr.d&&["dd",s]||l<=1&&["M"]||l<Lr.M&&["MM",l]||u<=1&&["y"]||["yy",u];c[2]=t;c[3]=+e>0;c[4]=r;return Nr.apply(null,c)}function Fr(e){if(e===undefined){return Rr}if(typeof e==="function"){Rr=e;return true}return false}function Gr(e,t){if(Lr[e]===undefined){return false}if(t===undefined){return Lr[e]}Lr[e]=t;if(e==="s"){Lr.ss=t-1}return true}function Ur(e){if(!this.isValid()){return this.localeData().invalidDate()}var t=this.localeData();var r=$r(this,!e,t);if(e){r=t.pastFuture(+this,r)}return t.postformat(r)}var Hr=Math.abs;function Wr(e){return(e>0)-(e<0)||+e}function Yr(){if(!this.isValid()){return this.localeData().invalidDate()}var e=Hr(this._milliseconds)/1e3;var t=Hr(this._days);var r=Hr(this._months);var n,i,a;n=Object(Fe["a"])(e/60);i=Object(Fe["a"])(n/60);e%=60;n%=60;a=Object(Fe["a"])(r/12);r%=12;var o=a;var s=r;var l=t;var u=i;var c=n;var f=e?e.toFixed(3).replace(/\.?0+$/,""):"";var h=this.asSeconds();if(!h){return"P0D"}var d=h<0?"-":"";var p=Wr(this._months)!==Wr(h)?"-":"";var v=Wr(this._days)!==Wr(h)?"-":"";var g=Wr(this._milliseconds)!==Wr(h)?"-":"";return d+"P"+(o?p+o+"Y":"")+(s?p+s+"M":"")+(l?v+l+"D":"")+(u||c||f?"T":"")+(u?g+u+"H":"")+(c?g+c+"M":"")+(f?g+f+"S":"")}var Vr=W.prototype;Vr.isValid=U;Vr.abs=ar;Vr.add=sr;Vr.subtract=lr;Vr.as=dr;Vr.asMilliseconds=gr;Vr.asSeconds=mr;Vr.asMinutes=_r;Vr.asHours=yr;Vr.asDays=br;Vr.asWeeks=wr;Vr.asMonths=Sr;Vr.asYears=Cr;Vr.valueOf=pr;Vr._bubble=cr;Vr.clone=Or;Vr.get=xr;Vr.milliseconds=Er;Vr.seconds=Mr;Vr.minutes=Ar;Vr.hours=kr;Vr.days=jr;Vr.weeks=Pr;Vr.months=Ir;Vr.years=Dr;Vr.humanize=Ur;Vr.toISOString=Yr;Vr.toString=Yr;Vr.toJSON=Yr;Vr.locale=Xe;Vr.localeData=Qe;Vr.toIsoString=Object(_["a"])("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Yr);Vr.lang=Ze;Object(X["a"])("X",0,0,"unix");Object(X["a"])("x",0,0,"valueOf");Object(Z["a"])("x",Z["p"]);Object(Z["a"])("X",Z["q"]);Object(Q["a"])("X",function(e,t,r){r._d=new Date(parseFloat(e,10)*1e3)});Object(Q["a"])("x",function(e,t,r){r._d=new Date(Object(N["a"])(e))});f["a"].version="2.22.2";Object(f["b"])(h["a"]);f["a"].fn=$t;f["a"].min=C;f["a"].max=O;f["a"].now=x;f["a"].utc=p["a"];f["a"].unix=Ft;f["a"].months=Jt;f["a"].isDate=ee["a"];f["a"].locale=L["c"];f["a"].invalid=g["a"];f["a"].duration=we;f["a"].isMoment=m["c"];f["a"].weekdays=tr;f["a"].parseZone=Gt;f["a"].localeData=L["b"];f["a"].isDuration=Y;f["a"].monthsShort=er;f["a"].weekdaysMin=nr;f["a"].defineLocale=L["a"];f["a"].updateLocale=L["e"];f["a"].locales=L["d"];f["a"].weekdaysShort=rr;f["a"].normalizeUnits=M["c"];f["a"].relativeTimeRounding=Fr;f["a"].relativeTimeThreshold=Gr;f["a"].calendarFormat=ke;f["a"].prototype=$t;f["a"].HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"};var qr=f["a"];var zr=function(){e.$inject=["gettextCatalog","ngeoFeatureHelper","ngeoWMSTime"];function e(e,t,r){this.gettextCatalog_=e;this.ngeoFeatureHelper_=t;this.ngeoWMSTime_=r}var t=e.prototype;t.createRulesFromAttributes=function e(t,r){var n=[];for(var i=t,a=Array.isArray(i),o=0,i=a?i:i[Symbol.iterator]();;){var s;if(a){if(o>=i.length)break;s=i[o++]}else{o=i.next();if(o.done)break;s=o.value}var l=s;n.push(this.createRuleFromAttribute(l,r))}return n};t.createRuleFromAttribute=function e(t,r){var n;var i=r===true;var a=this.gettextCatalog_.getString(t.name);switch(t.type){case o["a"].DATE:case o["a"].DATETIME:if(i){n=new j({name:a,operator:k["a"].TemporalOperatorType.EQUALS,operators:[k["a"].TemporalOperatorType.EQUALS,k["a"].TemporalOperatorType.BEGINS,k["a"].TemporalOperatorType.ENDS],propertyName:t.name,type:t.type})}else{n=new j({name:a,operator:k["a"].TemporalOperatorType.DURING,propertyName:t.name,type:t.type})}break;case o["a"].GEOMETRY:n=new I["a"]({name:a,operator:k["a"].SpatialOperatorType.WITHIN,operators:[k["a"].SpatialOperatorType.CONTAINS,k["a"].SpatialOperatorType.INTERSECTS,k["a"].SpatialOperatorType.WITHIN],propertyName:t.name,type:t.type});break;case o["a"].NUMBER:if(i){n=new k["a"]({name:a,operator:k["a"].OperatorType.EQUAL_TO,operators:[k["a"].OperatorType.EQUAL_TO,k["a"].OperatorType.GREATER_THAN,k["a"].OperatorType.GREATER_THAN_OR_EQUAL_TO,k["a"].OperatorType.LESSER_THAN,k["a"].OperatorType.LESSER_THAN_OR_EQUAL_TO,k["a"].OperatorType.NOT_EQUAL_TO],propertyName:t.name,type:o["a"].NUMBER})}else{n=new k["a"]({name:a,operator:k["a"].OperatorType.BETWEEN,propertyName:t.name,type:o["a"].NUMBER})}break;case o["a"].SELECT:n=new D["a"]({choices:A["a"].assert(t.choices),name:a,propertyName:t.name});break;default:if(i){n=new d({name:a,operator:k["a"].OperatorType.LIKE,operators:[k["a"].OperatorType.LIKE,k["a"].OperatorType.EQUAL_TO,k["a"].OperatorType.NOT_EQUAL_TO],propertyName:t.name})}else{n=new d({name:a,operator:k["a"].OperatorType.LIKE,propertyName:t.name})}break}return n};t.createRules=function e(t){var r=[];for(var n=t,i=Array.isArray(n),a=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(a>=n.length)break;o=n[a++]}else{a=n.next();if(a.done)break;o=a.value}var s=o;r.push(this.createRule(s))}return r};t.createRule=function e(t){var r;switch(t.type){case o["a"].DATE:case o["a"].DATETIME:r=new j(t);break;case o["a"].GEOMETRY:r=new I["a"](t);break;case o["a"].SELECT:var n=t;A["a"].assert(n.choices);r=new D["a"](n);break;default:r=new d(t);break}return r};t.cloneRule=function e(t){var r;var n=t.getExpression();if(n===null){n=undefined}var i=t.isCustom;var a=t.lowerBoundary!==null?t.lowerBoundary:undefined;var o=t.name;var s=t.operator!==null?t.operator:undefined;var l=t.operators?t.operators.slice(0):undefined;var u=t.propertyName;var c=t.type!==null?t.type:undefined;var f=t.upperBoundary!==null?t.upperBoundary:undefined;var h={expression:n,isCustom:i,lowerBoundary:a,name:o,operator:s,operators:l,propertyName:u,type:c,upperBoundary:f};if(t instanceof j){r=new j(h)}else if(t instanceof I["a"]){r=new I["a"](h);r.feature.setProperties(this.ngeoFeatureHelper_.getNonSpatialProperties(t.feature))}else if(t instanceof D["a"]){h.choices=t.choices.slice(0);r=new D["a"](h)}else if(t instanceof d){r=new d(h)}else{r=new k["a"](h)}return r};t.extendRule=function e(t,r){if(r.getExpression()!==t.getExpression()){r.setExpression(t.getExpression())}if(r.lowerBoundary!==t.lowerBoundary){r.lowerBoundary=t.lowerBoundary}if(r.operator!==t.operator){r.operator=t.operator}if(r.upperBoundary!==t.upperBoundary){r.upperBoundary=t.upperBoundary}if(t instanceof I["a"]&&r instanceof I["a"]){this.ngeoFeatureHelper_.clearNonSpatialProperties(r.feature);r.feature.setProperties(this.ngeoFeatureHelper_.getNonSpatialProperties(t.feature))}};t.serializeRules=function e(t){var r=this;return t.map(function(e){var t=r.serializeRule(e);return t})};t.serializeRule=function e(t){var r={name:t.name,propertyName:t.propertyName,type:t.type};if(t.expression!==null){r.expression=t.expression}if(t.lowerBoundary!==null){r.lowerBoundary=t.lowerBoundary}if(t.operator!==null){r.operator=t.operator}if(t.operators!==null){r.operators=t.operators.slice(0)}if(t.upperBoundary!==null){r.upperBoundary=t.upperBoundary}if(t instanceof I["a"]){r.featureProperties=this.ngeoFeatureHelper_.getNonSpatialProperties(t.feature)}if(t instanceof D["a"]){r.choices=t.choices}return r};t.createFilter=function e(t){var r=t.dataSource;var n=null;if(t.filter){n=t.filter}else{var i=t.filterRules||r.filterRules;var a=[];if(i&&i.length){for(var o=i,s=Array.isArray(o),l=0,o=s?o:o[Symbol.iterator]();;){var u;if(s){if(l>=o.length)break;u=o[l++]}else{l=o.next();if(l.done)break;u=l.value}var c=u;var f=this.createFilterFromRule_(c,r,t.srsName);if(f){a.push(f)}}}var h=r.filterCondition;if(a.length===1){n=a[0]}else if(a.length>=2){if(h===v["a"].AND){n=P["and"].apply(null,a)}else if(h===v["a"].OR||h===v["a"].NOT){n=P["or"].apply(null,a)}}if(n&&h===v["a"].NOT){n=P["not"](n)}}if(t.incTime){var d=this.createTimeFilterFromDataSource_(r);if(d){if(n){n=P["and"].apply(null,[n,d])}else{n=d}}}if(t.incDimensions){var p=this.createDimensionsFilterFromDataSource_(r);if(p){if(n){n=P["and"].apply(null,[n,p])}else{n=p}}}return n};t.createFilterString=function e(t){var r=null;var n=this.createFilter(t);if(n){var i=Object(c["b"])(n);var a=new XMLSerializer;r=a.serializeToString(i)}return r};t.createFilterFromRule_=function e(t,r,n){var i=null;var a=t.value;if(!a){return null}var o=a.expression;var s=a.lowerBoundary;var l=a.operator;var u=a.propertyName;var c=a.upperBoundary;var f=k["a"].OperatorType;var h=k["a"].SpatialOperatorType;var d=k["a"].TemporalOperatorType;var p=[h.CONTAINS,h.INTERSECTS,h.WITHIN];var v=[f.GREATER_THAN,f.GREATER_THAN_OR_EQUAL_TO,f.LESSER_THAN,f.LESSER_THAN_OR_EQUAL_TO];if(t instanceof j){var g;var m;if(l===d.DURING){g=qr(s).format("YYYY-MM-DD");m=qr(c).format("YYYY-MM-DD")}else if(l===d.EQUALS){g=qr(o).format("YYYY-MM-DD HH:mm:ss");m=qr(o).add(1,"days").subtract(1,"seconds").format("YYYY-MM-DD HH:mm:ss")}else if(l===d.BEGINS){g=qr(o).format("YYYY-MM-DD");m=qr(o).add(30,"years").format("YYYY-MM-DD")}else if(l===d.ENDS){g="1970-01-01";m=qr(o).format("YYYY-MM-DD")}if(g&&m){i=P["during"](u,g,m)}}else if(t instanceof D["a"]){var _=t.selectedChoices;if(_.length===1){i=P["equalTo"](u,_[0])}else if(_.length>=2){var y=[];for(var b=_,w=Array.isArray(b),S=0,b=w?b:b[Symbol.iterator]();;){var C;if(w){if(S>=b.length)break;C=b[S++]}else{S=b.next();if(S.done)break;C=S.value}var O=C;y.push(P["equalTo"](u,O))}i=P["or"].apply(null,y)}}else if(R["f"](p,l)){var x=r.geometryName;A["a"].assertInstanceof(t,I["a"]);var T=A["a"].assert(t.geometry);if(l===h.CONTAINS){i=P["contains"](x,T,n)}else if(l===h.INTERSECTS){i=P["intersects"](x,T,n)}else if(l===h.WITHIN){i=P["within"](x,T,n)}}else if(R["f"](v,l)){var E=A["a"].assertNumber(o);if(l===f.GREATER_THAN){i=P["greaterThan"](u,E)}else if(l===f.GREATER_THAN_OR_EQUAL_TO){i=P["greaterThanOrEqualTo"](u,E)}else if(l===f.LESSER_THAN){i=P["lessThan"](u,E)}else if(l===f.LESSER_THAN_OR_EQUAL_TO){i=P["lessThanOrEqualTo"](u,E)}}else if(l===f.BETWEEN){i=P["between"](u,s,c)}else if(l===f.EQUAL_TO){i=P["equalTo"](u,o)}else if(l===f.LIKE){var M=String(o).replace(/!/g,"!!").replace(/\./g,"!.").replace(/\*/g,"!*");i=P["like"](u,"*"+M+"*","*",".","!",false)}else if(l===f.NOT_EQUAL_TO){i=P["notEqualTo"](u,o)}return i};t.createDimensionsFilterFromDataSource_=function e(t){var r=t.dimensionsFiltersConfig;var n=t.dimensions;var i=[];for(var a in r){var o=r[a].value;if(o===null){if(n[a]!==undefined&&n[a]!==null){o=n[a]}}if(o!==null){i.push(P["equalTo"](r[a].field,o,true))}}if(i.length===1){return i[0]}else if(i.length>=2){return P["and"].apply(null,i)}return null};t.createTimeFilterFromDataSource_=function e(t){var r=null;var n=t.timeRangeValue;var i=t.timeProperty;var a=t.timeAttributeName;if(n&&i&&a){if(n.end!==undefined){var o=this.ngeoWMSTime_.formatWMSTimeParam(i,n).split("/");r=P["during"](a,o[0],o[1])}else{var s=i.resolution||"seconds";var l=this.ngeoWMSTime_.formatWMSTimeParam(i,n);var u;switch(s){case"year":u=qr(l).add(1,"years").subtract(1,"seconds");break;case"month":u=qr(l).add(1,"months").subtract(1,"seconds");break;case"day":u=qr(l).add(1,"days").subtract(1,"seconds");break;default:}if(u){var c=qr(l).format("YYYY-MM-DD HH:mm:ss");var f=u.format("YYYY-MM-DD HH:mm:ss");r=P["during"](a,c,f)}}}return r};return e}();zr.module=angular.module("ngeoRuleHelper",[n["a"].module.name,i["a"].module.name]);zr.module.service("ngeoRuleHelper",zr);var Br=t["a"]=zr},function(e,t,r){"use strict";var a=r(3);var n=r(7);var i=r(82);var l=r(133);var o=function(i){function t(e,t,r){i.call(this);if(r!==undefined&&t===undefined){this.setFlatCoordinates(r,e)}else{var n=t?t:0;this.setCenterAndRadius(e,n,r)}}if(i)t.__proto__=i;t.prototype=Object.create(i&&i.prototype);t.prototype.constructor=t;t.prototype.clone=function e(){return new t(this.flatCoordinates.slice(),undefined,this.layout)};t.prototype.closestPointXY=function e(t,r,n,i){var a=this.flatCoordinates;var o=t-a[0];var s=r-a[1];var l=o*o+s*s;if(l<i){if(l===0){for(var u=0;u<this.stride;++u){n[u]=a[u]}}else{var c=this.getRadius()/Math.sqrt(l);n[0]=a[0]+c*o;n[1]=a[1]+c*s;for(var f=2;f<this.stride;++f){n[f]=a[f]}}n.length=this.stride;return l}else{return i}};t.prototype.containsXY=function e(t,r){var n=this.flatCoordinates;var i=t-n[0];var a=r-n[1];return i*i+a*a<=this.getRadiusSquared_()};t.prototype.getCenter=function e(){return this.flatCoordinates.slice(0,this.stride)};t.prototype.computeExtent=function e(t){var r=this.flatCoordinates;var n=r[this.stride]-r[0];return Object(a["k"])(r[0]-n,r[1]-n,r[0]+n,r[1]+n,t)};t.prototype.getRadius=function e(){return Math.sqrt(this.getRadiusSquared_())};t.prototype.getRadiusSquared_=function e(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0];var r=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+r*r};t.prototype.getType=function e(){return n["a"].CIRCLE};t.prototype.intersectsExtent=function e(t){var r=this.getExtent();if(Object(a["F"])(t,r)){var n=this.getCenter();if(t[0]<=n[0]&&t[2]>=n[0]){return true}if(t[1]<=n[1]&&t[3]>=n[1]){return true}return Object(a["t"])(t,this.intersectsCoordinate,this)}return false};t.prototype.setCenter=function e(t){var r=this.stride;var n=this.flatCoordinates[r]-this.flatCoordinates[0];var i=t.slice();i[r]=i[0]+n;for(var a=1;a<r;++a){i[r+a]=t[a]}this.setFlatCoordinates(this.layout,i);this.changed()};t.prototype.setCenterAndRadius=function e(t,r,n){this.setLayout(n,t,0);if(!this.flatCoordinates){this.flatCoordinates=[]}var i=this.flatCoordinates;var a=Object(l["a"])(i,0,t,this.stride);i[a++]=i[0]+r;for(var o=1,s=this.stride;o<s;++o){i[a++]=i[o]}i.length=a;this.changed()};t.prototype.getCoordinates=function e(){return null};t.prototype.setCoordinates=function e(t,r){};t.prototype.setRadius=function e(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t;this.changed()};return t}(i["a"]);o.prototype.transform;t["a"]=o},function(e,t,r){"use strict";r.d(t,"a",function(){return n});function n(e){return typeof e==="number"||Object.prototype.toString.call(e)==="[object Number]"}},function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"b",function(){return l});r.d(t,"c",function(){return u});r.d(t,"d",function(){return i});var o=r(3);function n(t,r,n,i,e){var a=Object(o["t"])(e,function(e){return!l(t,r,n,i,e[0],e[1])});return!a}function l(e,t,r,n,i,a){var o=0;var s=e[r-n];var l=e[r-n+1];for(;t<r;t+=n){var u=e[t];var c=e[t+1];if(l<=a){if(c>a&&(u-s)*(a-l)-(i-s)*(c-l)>0){o++}}else if(c<=a&&(u-s)*(a-l)-(i-s)*(c-l)<0){o--}s=u;l=c}return o!==0}function u(e,t,r,n,i,a){if(r.length===0){return false}if(!l(e,t,r[0],n,i,a)){return false}for(var o=1,s=r.length;o<s;++o){if(l(e,r[o-1],r[o],n,i,a)){return false}}return true}function i(e,t,r,n,i,a){if(r.length===0){return false}for(var o=0,s=r.length;o<s;++o){var l=r[o];if(u(e,t,l,n,i,a)){return true}t=l[l.length-1]}return false}},function(e,t,r){"use strict";t["a"]={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"}},function(e,t,r){"use strict";var a=r(202);var A=r(8);var k=r(3);var u=r(9);var j=r(10);var n=r(267);var I={KVP:"KVP",REST:"REST"};var D=r(304);var c=r(127);r.d(t,"b",function(){return s});var i=function(i){function e(e){var t=e.requestEncoding!==undefined?e.requestEncoding:I.KVP;var r=e.tileGrid;var n=e.urls;if(n===undefined&&e.url!==undefined){n=Object(a["c"])(e.url)}i.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:a["d"],urls:n,wrapX:e.wrapX!==undefined?e.wrapX:false,transition:e.transition});this.version_=e.version!==undefined?e.version:"1.0.0";this.format_=e.format!==undefined?e.format:"image/jpeg";this.dimensions_=e.dimensions!==undefined?e.dimensions:{};this.layer_=e.layer;this.matrixSet_=e.matrixSet;this.style_=e.style;this.requestEncoding_=t;this.setKey(this.getKeyForDimensions_());if(n&&n.length>0){this.tileUrlFunction=Object(a["b"])(n.map(l.bind(this)))}}if(i)e.__proto__=i;e.prototype=Object.create(i&&i.prototype);e.prototype.constructor=e;e.prototype.setUrls=function e(t){this.urls=t;var r=t.join("\n");this.setTileUrlFunction(Object(a["b"])(t.map(l.bind(this))),r)};e.prototype.getDimensions=function e(){return this.dimensions_};e.prototype.getFormat=function e(){return this.format_};e.prototype.getLayer=function e(){return this.layer_};e.prototype.getMatrixSet=function e(){return this.matrixSet_};e.prototype.getRequestEncoding=function e(){return this.requestEncoding_};e.prototype.getStyle=function e(){return this.style_};e.prototype.getVersion=function e(){return this.version_};e.prototype.getKeyForDimensions_=function e(){var t=0;var r=[];for(var n in this.dimensions_){r[t++]=n+"-"+this.dimensions_[n]}return r.join("/")};e.prototype.updateDimensions=function e(t){Object(u["a"])(this.dimensions_,t);this.setKey(this.getKeyForDimensions_())};return e}(n["a"]);var o=t["a"]=i;function s(e,s){var t=e["Contents"]["Layer"];var r=Object(A["d"])(t,function(e,t,r){return e["Identifier"]==s["layer"]});if(r===null){return null}var l=e["Contents"]["TileMatrixSet"];var n;if(r["TileMatrixSetLink"].length>1){if("projection"in s){n=Object(A["e"])(r["TileMatrixSetLink"],function(t,e,r){var n=Object(A["d"])(l,function(e){return e["Identifier"]==t["TileMatrixSet"]});var i=n["SupportedCRS"];var a=Object(j["g"])(i.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Object(j["g"])(i);var o=Object(j["g"])(s["projection"]);if(a&&o){return Object(j["e"])(a,o)}else{return i==s["projection"]}})}else{n=Object(A["e"])(r["TileMatrixSetLink"],function(e,t,r){return e["TileMatrixSet"]==s["matrixSet"]})}}else{n=0}if(n<0){n=0}var i=r["TileMatrixSetLink"][n]["TileMatrixSet"];var a=r["TileMatrixSetLink"][n]["TileMatrixSetLimits"];var o=r["Format"][0];if("format"in s){o=s["format"]}n=Object(A["e"])(r["Style"],function(e,t,r){if("style"in s){return e["Title"]==s["style"]}else{return e["isDefault"]}});if(n<0){n=0}var u=r["Style"][n]["Identifier"];var c={};if("Dimension"in r){r["Dimension"].forEach(function(e,t,r){var n=e["Identifier"];var i=e["Default"];if(i===undefined){i=e["Value"][0]}c[n]=i})}var f=e["Contents"]["TileMatrixSet"];var h=Object(A["d"])(f,function(e,t,r){return e["Identifier"]==i});var d;var p=h["SupportedCRS"];if(p){d=Object(j["g"])(p.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Object(j["g"])(p)}if("projection"in s){var v=Object(j["g"])(s["projection"]);if(v){if(!d||Object(j["e"])(v,d)){d=v}}}var g=r["WGS84BoundingBox"];var m,_;if(g!==undefined){var y=Object(j["g"])("EPSG:4326").getExtent();_=g[0]==y[0]&&g[2]==y[2];m=Object(j["n"])(g,"EPSG:4326",d);var b=d.getExtent();if(b){if(!Object(k["g"])(b,m)){m=undefined}}}var w=Object(D["a"])(h,m,a);var S=[];var C=s["requestEncoding"];C=C!==undefined?C:"";if("OperationsMetadata"in e&&"GetTile"in e["OperationsMetadata"]){var O=e["OperationsMetadata"]["GetTile"]["DCP"]["HTTP"]["Get"];for(var x=0,T=O.length;x<T;++x){if(O[x]["Constraint"]){var E=Object(A["d"])(O[x]["Constraint"],function(e){return e["name"]=="GetEncoding"});var M=E["AllowedValues"]["Value"];if(C===""){C=M[0]}if(C===I.KVP){if(Object(A["f"])(M,I.KVP)){S.push(O[x]["href"])}}else{break}}else if(O[x]["href"]){C=I.KVP;S.push(O[x]["href"])}}}if(S.length===0){C=I.REST;r["ResourceURL"].forEach(function(e){if(e["resourceType"]==="tile"){o=e["format"];S.push(e["template"])}})}return{urls:S,layer:s["layer"],matrixSet:i,format:o,projection:d,requestEncoding:C,tileGrid:w,style:u,dimensions:c,wrapX:_,crossOrigin:s["crossOrigin"]}}function l(a){var o=this.requestEncoding_;var r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};if(o==I.KVP){Object(u["a"])(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_})}a=o==I.KVP?Object(c["a"])(a,r):a.replace(/\{(\w+?)\}/g,function(e,t){return t.toLowerCase()in r?r[t.toLowerCase()]:e});var s=this.tileGrid;var l=this.dimensions_;return function(e,t,r){if(!e){return undefined}else{var n={TileMatrix:s.getMatrixId(e[0]),TileCol:e[1],TileRow:-e[2]-1};Object(u["a"])(n,l);var i=a;if(o==I.KVP){i=Object(c["a"])(i,n)}else{i=i.replace(/\{(\w+?)\}/g,function(e,t){return n[t]})}return i}}}},function(e,t,r){"use strict";r.d(t,"a",function(){return n});function n(e,t,r){var n=""+Math.abs(e),i=t-n.length,a=e>=0;return(a?r?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+n}},function(e,t,r){"use strict";var n=r(326);var i=function(a){function e(e,t,r,n,i){a.call(this,e,t,r.originalEvent,n,i);this.pointerEvent=r}if(a)e.__proto__=a;e.prototype=Object.create(a&&a.prototype);e.prototype.constructor=e;return e}(n["a"]);t["a"]=i},function(e,t,r){"use strict";var g=r(227);var p=r(25);var m=r(3);var _=r(9);var v=r(15);var y=r(10);var b=r(190);var w=r(102);var n=r(267);var S=r(194);var C=r(123);var a=r(139);var O=r(127);var i=function(i){function e(e){var t=e||{};var r=t.params||{};var n="TRANSPARENT"in r?r["TRANSPARENT"]:true;i.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,opaque:!n,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,tileUrlFunction:o,url:t.url,urls:t.urls,wrapX:t.wrapX!==undefined?t.wrapX:true,transition:t.transition});this.gutter_=t.gutter!==undefined?t.gutter:0;this.params_=r;this.v13_=true;this.serverType_=t.serverType;this.hidpi_=t.hidpi!==undefined?t.hidpi:true;this.tmpExtent_=Object(m["j"])();this.updateV13_();this.setKey(this.getKeyForParams_())}if(i)e.__proto__=i;e.prototype=Object.create(i&&i.prototype);e.prototype.constructor=e;e.prototype.getGetFeatureInfoUrl=function e(t,r,n,i){var a=Object(y["g"])(n);var o=this.getProjection();var s=this.getTileGrid();if(!s){s=this.getTileGridForProjection(a)}var l=s.getTileCoordForCoordAndResolution(t,r);if(s.getResolutions().length<=l[0]){return undefined}var u=s.getResolution(l[0]);var c=s.getTileCoordExtent(l,this.tmpExtent_);var f=Object(w["d"])(s.getTileSize(l[0]),this.tmpSize);var h=this.gutter_;if(h!==0){f=Object(w["a"])(f,h,this.tmpSize);c=Object(m["c"])(c,u*h,c)}if(o&&o!==a){u=Object(b["a"])(o,a,t,u);c=Object(y["n"])(c,a,o);t=Object(y["m"])(t,a,o)}var d={SERVICE:"WMS",VERSION:g["a"],REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:true,QUERY_LAYERS:this.params_["LAYERS"]};Object(_["a"])(d,this.params_,i);var p=Math.floor((t[0]-c[0])/u);var v=Math.floor((c[3]-t[1])/u);d[this.v13_?"I":"X"]=p;d[this.v13_?"J":"Y"]=v;return this.getRequestUrl_(l,f,c,1,o||a,d)};e.prototype.getGutter=function e(){return this.gutter_};e.prototype.getParams=function e(){return this.params_};e.prototype.getRequestUrl_=function e(t,r,n,i,a,o){var s=this.urls;if(!s){return undefined}o["WIDTH"]=r[0];o["HEIGHT"]=r[1];o[this.v13_?"CRS":"SRS"]=a.getCode();if(!("STYLES"in this.params_)){o["STYLES"]=""}if(i!=1){switch(this.serverType_){case S["a"].GEOSERVER:var l=90*i+.5|0;if("FORMAT_OPTIONS"in o){o["FORMAT_OPTIONS"]+=";dpi:"+l}else{o["FORMAT_OPTIONS"]="dpi:"+l}break;case S["a"].MAPSERVER:o["MAP_RESOLUTION"]=90*i;break;case S["a"].CARMENTA_SERVER:case S["a"].QGIS:o["DPI"]=90*i;break;default:Object(p["a"])(false,52);break}}var u=a.getAxisOrientation();var c=n;if(this.v13_&&u.substr(0,2)=="ne"){var f;f=n[0];c[0]=n[1];c[1]=f;f=n[2];c[2]=n[3];c[3]=f}o["BBOX"]=c.join(",");var h;if(s.length==1){h=s[0]}else{var d=Object(v["d"])(Object(C["e"])(t),s.length);h=s[d]}return Object(O["a"])(h,o)};e.prototype.getTilePixelRatio=function e(t){return!this.hidpi_||this.serverType_===undefined?1:t};e.prototype.getKeyForParams_=function e(){var t=0;var r=[];for(var n in this.params_){r[t++]=n+"-"+this.params_[n]}return r.join("/")};e.prototype.updateParams=function e(t){Object(_["a"])(this.params_,t);this.updateV13_();this.setKey(this.getKeyForParams_())};e.prototype.updateV13_=function e(){var t=this.params_["VERSION"]||g["a"];this.v13_=Object(a["a"])(t,"1.3")>=0};return e}(n["a"]);function o(e,t,r){var n=this.getTileGrid();if(!n){n=this.getTileGridForProjection(r)}if(n.getResolutions().length<=e[0]){return undefined}if(t!=1&&(!this.hidpi_||this.serverType_===undefined)){t=1}var i=n.getResolution(e[0]);var a=n.getTileCoordExtent(e,this.tmpExtent_);var o=Object(w["d"])(n.getTileSize(e[0]),this.tmpSize);var s=this.gutter_;if(s!==0){o=Object(w["a"])(o,s,this.tmpSize);a=Object(m["c"])(a,i*s,a)}if(t!=1){o=Object(w["c"])(o,t,this.tmpSize)}var l={SERVICE:"WMS",VERSION:g["a"],REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:true};Object(_["a"])(l,this.params_);return this.getRequestUrl_(e,o,a,t,r,l)}t["a"]=i},function(e,t,r){"use strict";var p=r(1);var v=r(317);var g=r(42);var n=r(5);var i=r(152);var a=function e(){i["a"].call(this)};n["d"](a,i["a"]);a.prototype.read=function(e){return i["a"].prototype.read.call(this,e)};a.prototype.readFromDocument=function(e){p["a"].assert(e.nodeType==Node.DOCUMENT_NODE,"doc.nodeType should be DOCUMENT");for(var t=e.firstChild;t;t=t.nextSibling){if(t.nodeType==Node.ELEMENT_NODE){return this.readFromNode(t)}}return null};a.prototype.readFromNode=function(e){p["a"].assert(e.nodeType==Node.ELEMENT_NODE,"node.nodeType should be ELEMENT");p["a"].assert(e.localName=="schema","localName should be schema");var t=e.getElementsByTagName("element");if(!t.length){t=e.getElementsByTagName("xsd:element")}var r=[];var n;for(var i=0,a=t.length;i<a;i++){n=this.readFromElementNode_(t[i]);if(n){r.push(n)}}return r};a.prototype.readFromElementNode_=function(e){var t=e.getAttribute("name");p["a"].assertString(t,"name should be defined in element node.");var r=e.getAttribute("alias");var n=e.getAttribute("nillable");var i=!(n===true||n==="true");var a={name:t,alias:r,required:i};var o=e.getAttribute("type");if(o){if(!v["a"].setGeometryType(a,o)){this.setAttributeByXsdType_(a,o)}}else{var s=e.getElementsByTagName("enumeration");if(!s.length){s=e.getElementsByTagName("xsd:enumeration")}if(s.length){a.type=g["a"].SELECT;var l=[];for(var u=0,c=s.length;u<c;u++){l.push(s[u].getAttribute("value"))}a.choices=l}else{var f=e.getElementsByTagName("restriction");if(!f.length){f=e.getElementsByTagName("xsd:restriction")}if(f.length&&f[0]){var h=f[0];this.setAttributeByXsdType_(a,h.getAttribute("base"));var d=e.getElementsByTagName("maxLength");if(!d.length){d=e.getElementsByTagName("xsd:maxLength")}if(d.length&&d[0]){a.maxLength=Number(d[0].getAttribute("value"))}}}}if(!a.type){return null}p["a"].assert(a.type);return a};a.prototype.setAttributeByXsdType_=function(e,t){if(t==="xsd:boolean"){e.type=g["a"].BOOLEAN}else if(t==="xsd:date"){e.type=g["a"].DATE}else if(t==="xsd:dateTime"){e.type=g["a"].DATETIME}else if(t==="xsd:time"){e.type=g["a"].TIME}else if(t==="xsd:decimal"||t==="xsd:double"){e.type=g["a"].NUMBER;e.numType=a.NumberType.FLOAT}else if(t==="xsd:integer"){e.type=g["a"].NUMBER;e.numType=a.NumberType.INTEGER}else if(t==="xsd:string"){e.type=g["a"].TEXT}};a.getGeometryAttribute=function(e){var t=null;for(var r=0,n=e.length;r<n;r++){if(e[r].type===g["a"].GEOMETRY){t=e[r];break}}return t};a.NumberType={FLOAT:"float",INTEGER:"integer"};t["a"]=a},function(e,t,r){"use strict";var n=r(74);var i=r(22);var a=r(211);var o=function e(t,r,n,i,a){this.$rootScope_=t;this.gmfThemes_=r;this.modeFlush=n;this.gmfTreeManager_=i;this.ngeoStateManager_=a;this.themeName_=""};o.$inject=["$rootScope","gmfThemes","gmfTreeManagerModeFlush","gmfTreeManager","ngeoStateManager"];o.$inject=["$rootScope","gmfThemes","gmfTreeManagerModeFlush","gmfTreeManager","ngeoStateManager"];o.prototype.addTheme=function(e,t){if(this.modeFlush){this.ngeoStateManager_.updateState({theme:e.name});this.setThemeName(e.name);this.gmfTreeManager_.setFirstLevelGroups(e.children)}else{this.gmfTreeManager_.addFirstLevelGroups(e.children,false,t)}};o.prototype.getThemeName=function(){return this.themeName_};o.prototype.isLoading=function(){return!this.gmfThemes_.loaded};o.prototype.setThemeName=function(e,t){this.themeName_=e;if(!t){this.$rootScope_.$emit(o.EventType.THEME_NAME_SET,e)}};o.prototype.removeAll=function(){this.gmfTreeManager_.removeAll()};o.EventType={THEME_NAME_SET:"gmf-thememanager-theme_name_set"};o.module=angular.module("gmfThemeManager",[n["a"].module.name,i["a"].module.name,a["a"].module.name]);o.module.value("gmfTreeManagerModeFlush",true);o.module.service("gmfThemeManager",o);t["a"]=o},function(e,t,r){"use strict";var n=r(2);var i=r(12);var l=r(3);var a=r(150);var o=r(7);var h=r(9);var s=function(t){function f(e){t.call(this);this.geometries_=e?e:null;this.listenGeometriesChange_()}if(t)f.__proto__=t;f.prototype=Object.create(t&&t.prototype);f.prototype.constructor=f;f.prototype.unlistenGeometriesChange_=function e(){if(!this.geometries_){return}for(var t=0,r=this.geometries_.length;t<r;++t){Object(n["c"])(this.geometries_[t],i["a"].CHANGE,this.changed,this)}};f.prototype.listenGeometriesChange_=function e(){if(!this.geometries_){return}for(var t=0,r=this.geometries_.length;t<r;++t){Object(n["a"])(this.geometries_[t],i["a"].CHANGE,this.changed,this)}};f.prototype.clone=function e(){var t=new f(null);t.setGeometries(this.geometries_);return t};f.prototype.closestPointXY=function e(t,r,n,i){if(i<Object(l["e"])(this.getExtent(),t,r)){return i}var a=this.geometries_;for(var o=0,s=a.length;o<s;++o){i=a[o].closestPointXY(t,r,n,i)}return i};f.prototype.containsXY=function e(t,r){var n=this.geometries_;for(var i=0,a=n.length;i<a;++i){if(n[i].containsXY(t,r)){return true}}return false};f.prototype.computeExtent=function e(t){Object(l["l"])(t);var r=this.geometries_;for(var n=0,i=r.length;n<i;++n){Object(l["q"])(t,r[n].getExtent())}return t};f.prototype.getGeometries=function e(){return u(this.geometries_)};f.prototype.getGeometriesArray=function e(){return this.geometries_};f.prototype.getSimplifiedGeometry=function e(t){if(this.simplifiedGeometryRevision!=this.getRevision()){Object(h["b"])(this.simplifiedGeometryCache);this.simplifiedGeometryMaxMinSquaredTolerance=0;this.simplifiedGeometryRevision=this.getRevision()}if(t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance){return this}var r=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(r)){return this.simplifiedGeometryCache[r]}else{var n=[];var i=this.geometries_;var a=false;for(var o=0,s=i.length;o<s;++o){var l=i[o];var u=l.getSimplifiedGeometry(t);n.push(u);if(u!==l){a=true}}if(a){var c=new f(null);c.setGeometriesArray(n);this.simplifiedGeometryCache[r]=c;return c}else{this.simplifiedGeometryMaxMinSquaredTolerance=t;return this}}};f.prototype.getType=function e(){return o["a"].GEOMETRY_COLLECTION};f.prototype.intersectsExtent=function e(t){var r=this.geometries_;for(var n=0,i=r.length;n<i;++n){if(r[n].intersectsExtent(t)){return true}}return false};f.prototype.isEmpty=function e(){return this.geometries_.length===0};f.prototype.rotate=function e(t,r){var n=this.geometries_;for(var i=0,a=n.length;i<a;++i){n[i].rotate(t,r)}this.changed()};f.prototype.scale=function e(t,r,n){var i=n;if(!i){i=Object(l["x"])(this.getExtent())}var a=this.geometries_;for(var o=0,s=a.length;o<s;++o){a[o].scale(t,r,i)}this.changed()};f.prototype.setGeometries=function e(t){this.setGeometriesArray(u(t))};f.prototype.setGeometriesArray=function e(t){this.unlistenGeometriesChange_();this.geometries_=t;this.listenGeometriesChange_();this.changed()};f.prototype.applyTransform=function e(t){var r=this.geometries_;for(var n=0,i=r.length;n<i;++n){r[n].applyTransform(t)}this.changed()};f.prototype.translate=function e(t,r){var n=this.geometries_;for(var i=0,a=n.length;i<a;++i){n[i].translate(t,r)}this.changed()};f.prototype.disposeInternal=function e(){this.unlistenGeometriesChange_();t.prototype.disposeInternal.call(this)};return f}(a["a"]);function u(e){var t=[];for(var r=0,n=e.length;r<n;++r){t.push(e[r].clone())}return t}t["a"]=s},function(e,t,r){"use strict";var n={AND:"&&",NOT:"!",OR:"||"};t["a"]=n},function(e,t,r){"use strict";var n=r(184);var i=r(158);var a=r(14);var o=function e(t,r,n){this.q_=t;this.gmfEditFeature_=r;this.ngeoLocation_=n;this.getFeatureDefered_=null};o.$inject=["$q","gmfEditFeature","ngeoLocation"];o.$inject=["$q","gmfEditFeature","ngeoLocation"];o.prototype.getFeature=function(){if(!this.getFeatureDefered_){this.getFeatureDefered_=this.q_.defer();var e=this.ngeoLocation_.getParam(o.Param.GEOM_TYPE);var t=this.ngeoLocation_.getParam(o.Param.ID);var r=this.ngeoLocation_.getParam(o.Param.LAYER);var n=this.ngeoLocation_.getParam(o.Param.PROPERTY);var i=this.ngeoLocation_.getParam(o.Param.THEME);if(e&&t&&r&&n&&i){this.gmfEditFeature_.getFeaturesWithComparisonFilters([r],[{operator:"eq",property:n,value:t}]).then(this.handleGetFeatures_.bind(this,n,t))}else{this.getFeatureDefered_.resolve(null)}}return this.getFeatureDefered_.promise};o.prototype.getGeomType=function(){return this.ngeoLocation_.getParam(o.Param.GEOM_TYPE)};o.prototype.getLayerNodeId=function(){return this.ngeoLocation_.getParamAsInt(o.Param.LAYER)};o.prototype.handleGetFeatures_=function(e,t,r){var n;if(r.length){n=r[0]}else{var i={};i[e]=t;i["geometry"]=null;n=new a["a"](i)}this.getFeatureDefered_.resolve(n)};o.Param={GEOM_TYPE:"objectediting_geomtype",ID:"objectediting_id",LAYER:"objectediting_layer",PROPERTY:"objectediting_property",THEME:"objectediting_theme"};o.module=angular.module("gmfObjectEditingManager",[n["a"].module.name,i["a"].module.name]);o.module.service("gmfObjectEditingManager",o);t["a"]=o},function(e,t,r){"use strict";r.d(t,"b",function(){return n});r.d(t,"a",function(){return i});r.d(t,"c",function(){return l});var a=r(9);var o={};function n(){o={}}function i(e,t,r){var n=e.getCode();var i=t.getCode();if(!(n in o)){o[n]={}}o[n][i]=r}function s(e,t){var r=e.getCode();var n=t.getCode();var i=o[r][n];delete o[r][n];if(Object(a["d"])(o[r])){delete o[r]}return i}function l(e,t){var r;if(e in o&&t in o[e]){r=o[e][t]}return r}},function(e,t,r){"use strict";var n=r(27);var i=r.n(n);var a=r(200);var w=r.n(a);var S=r(60);function C(){C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};return C.apply(this,arguments)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function O(e,t,r){if(t)o(e.prototype,t);if(r)o(e,r);return e}var s=function(f){var r="dropdown";var t="4.1.3";var h="bs.dropdown";var n="."+h;var e=".data-api";var i=f.fn[r];var s=27;var l=32;var d=9;var u=38;var p=40;var v=3;var g=new RegExp(u+"|"+p+"|"+s);var m={HIDE:"hide"+n,HIDDEN:"hidden"+n,SHOW:"show"+n,SHOWN:"shown"+n,CLICK:"click"+n,CLICK_DATA_API:"click"+n+e,KEYDOWN_DATA_API:"keydown"+n+e,KEYUP_DATA_API:"keyup"+n+e};var _={DISABLED:"disabled",SHOW:"show",DROPUP:"dropup",DROPRIGHT:"dropright",DROPLEFT:"dropleft",MENURIGHT:"dropdown-menu-right",MENULEFT:"dropdown-menu-left",POSITION_STATIC:"position-static"};var y={DATA_TOGGLE:'[data-toggle="dropdown"]',FORM_CHILD:".dropdown form",MENU:".dropdown-menu",NAVBAR_NAV:".navbar-nav",VISIBLE_ITEMS:".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)"};var a={TOP:"top-start",TOPEND:"top-end",BOTTOM:"bottom-start",BOTTOMEND:"bottom-end",RIGHT:"right-start",RIGHTEND:"right-end",LEFT:"left-start",LEFTEND:"left-end"};var o={offset:0,flip:true,boundary:"scrollParent",reference:"toggle",display:"dynamic"};var b={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string"};var c=function(){function c(e,t){this._element=e;this._popper=null;this._config=this._getConfig(t);this._menu=this._getMenuElement();this._inNavbar=this._detectNavbar();this._addEventListeners()}var e=c.prototype;e.toggle=function e(){if(this._element.disabled||f(this._element).hasClass(_.DISABLED)){return}var t=c._getParentFromElement(this._element);var r=f(this._menu).hasClass(_.SHOW);c._clearMenus();if(r){return}var n={relatedTarget:this._element};var i=f.Event(m.SHOW,n);f(t).trigger(i);if(i.isDefaultPrevented()){return}if(!this._inNavbar){if(typeof w.a==="undefined"){throw new TypeError("Bootstrap dropdown require Popper.js (https://popper.js.org)")}var a=this._element;if(this._config.reference==="parent"){a=t}else if(S["a"].isElement(this._config.reference)){a=this._config.reference;if(typeof this._config.reference.jquery!=="undefined"){a=this._config.reference[0]}}if(this._config.boundary!=="scrollParent"){f(t).addClass(_.POSITION_STATIC)}this._popper=new w.a(a,this._menu,this._getPopperConfig())}if("ontouchstart"in document.documentElement&&f(t).closest(y.NAVBAR_NAV).length===0){f(document.body).children().on("mouseover",null,f.noop)}this._element.focus();this._element.setAttribute("aria-expanded",true);f(this._menu).toggleClass(_.SHOW);f(t).toggleClass(_.SHOW).trigger(f.Event(m.SHOWN,n))};e.dispose=function e(){f.removeData(this._element,h);f(this._element).off(n);this._element=null;this._menu=null;if(this._popper!==null){this._popper.destroy();this._popper=null}};e.update=function e(){this._inNavbar=this._detectNavbar();if(this._popper!==null){this._popper.scheduleUpdate()}};e._addEventListeners=function e(){var t=this;f(this._element).on(m.CLICK,function(e){e.preventDefault();e.stopPropagation();t.toggle()})};e._getConfig=function e(t){t=C({},this.constructor.Default,f(this._element).data(),t);S["a"].typeCheckConfig(r,t,this.constructor.DefaultType);return t};e._getMenuElement=function e(){if(!this._menu){var t=c._getParentFromElement(this._element);if(t){this._menu=t.querySelector(y.MENU)}}return this._menu};e._getPlacement=function e(){var t=f(this._element.parentNode);var r=a.BOTTOM;if(t.hasClass(_.DROPUP)){r=a.TOP;if(f(this._menu).hasClass(_.MENURIGHT)){r=a.TOPEND}}else if(t.hasClass(_.DROPRIGHT)){r=a.RIGHT}else if(t.hasClass(_.DROPLEFT)){r=a.LEFT}else if(f(this._menu).hasClass(_.MENURIGHT)){r=a.BOTTOMEND}return r};e._detectNavbar=function e(){return f(this._element).closest(".navbar").length>0};e._getPopperConfig=function e(){var t=this;var r={};if(typeof this._config.offset==="function"){r.fn=function(e){e.offsets=C({},e.offsets,t._config.offset(e.offsets)||{});return e}}else{r.offset=this._config.offset}var n={placement:this._getPlacement(),modifiers:{offset:r,flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};if(this._config.display==="static"){n.modifiers.applyStyle={enabled:false}}return n};c._jQueryInterface=function e(r){return this.each(function(){var e=f(this).data(h);var t=typeof r==="object"?r:null;if(!e){e=new c(this,t);f(this).data(h,e)}if(typeof r==="string"){if(typeof e[r]==="undefined"){throw new TypeError('No method named "'+r+'"')}e[r]()}})};c._clearMenus=function e(t){if(t&&(t.which===v||t.type==="keyup"&&t.which!==d)){return}var r=[].slice.call(document.querySelectorAll(y.DATA_TOGGLE));for(var n=0,i=r.length;n<i;n++){var a=c._getParentFromElement(r[n]);var o=f(r[n]).data(h);var s={relatedTarget:r[n]};if(t&&t.type==="click"){s.clickEvent=t}if(!o){continue}var l=o._menu;if(!f(a).hasClass(_.SHOW)){continue}if(t&&(t.type==="click"&&/input|textarea/i.test(t.target.tagName)||t.type==="keyup"&&t.which===d)&&f.contains(a,t.target)){continue}var u=f.Event(m.HIDE,s);f(a).trigger(u);if(u.isDefaultPrevented()){continue}if("ontouchstart"in document.documentElement){f(document.body).children().off("mouseover",null,f.noop)}r[n].setAttribute("aria-expanded","false");f(l).removeClass(_.SHOW);f(a).removeClass(_.SHOW).trigger(f.Event(m.HIDDEN,s))}};c._getParentFromElement=function e(t){var r;var n=S["a"].getSelectorFromElement(t);if(n){r=document.querySelector(n)}return r||t.parentNode};c._dataApiKeydownHandler=function e(t){if(/input|textarea/i.test(t.target.tagName)?t.which===l||t.which!==s&&(t.which!==p&&t.which!==u||f(t.target).closest(y.MENU).length):!g.test(t.which)){return}t.preventDefault();t.stopPropagation();if(this.disabled||f(this).hasClass(_.DISABLED)){return}var r=c._getParentFromElement(this);var n=f(r).hasClass(_.SHOW);if(!n&&(t.which!==s||t.which!==l)||n&&(t.which===s||t.which===l)){if(t.which===s){var i=r.querySelector(y.DATA_TOGGLE);f(i).trigger("focus")}f(this).trigger("click");return}var a=[].slice.call(r.querySelectorAll(y.VISIBLE_ITEMS));if(a.length===0){return}var o=a.indexOf(t.target);if(t.which===u&&o>0){o--}if(t.which===p&&o<a.length-1){o++}if(o<0){o=0}a[o].focus()};O(c,null,[{key:"VERSION",get:function e(){return t}},{key:"Default",get:function e(){return o}},{key:"DefaultType",get:function e(){return b}}]);return c}();f(document).on(m.KEYDOWN_DATA_API,y.DATA_TOGGLE,c._dataApiKeydownHandler).on(m.KEYDOWN_DATA_API,y.MENU,c._dataApiKeydownHandler).on(m.CLICK_DATA_API+" "+m.KEYUP_DATA_API,c._clearMenus).on(m.CLICK_DATA_API,y.DATA_TOGGLE,function(e){e.preventDefault();e.stopPropagation();c._jQueryInterface.call(f(this),"toggle")}).on(m.CLICK_DATA_API,y.FORM_CHILD,function(e){e.stopPropagation()});f.fn[r]=c._jQueryInterface;f.fn[r].Constructor=c;f.fn[r].noConflict=function(){f.fn[r]=i;return c._jQueryInterface};return c}(i.a,w.a);var l=s},function(e,t,r){"use strict";var n=r(79);var i=function e(t){this.code_=t.code;this.units_=t.units;this.extent_=t.extent!==undefined?t.extent:null;this.worldExtent_=t.worldExtent!==undefined?t.worldExtent:null;this.axisOrientation_=t.axisOrientation!==undefined?t.axisOrientation:"enu";this.global_=t.global!==undefined?t.global:false;this.canWrapX_=!!(this.global_&&this.extent_);this.getPointResolutionFunc_=t.getPointResolution;this.defaultTileGrid_=null;this.metersPerUnit_=t.metersPerUnit};i.prototype.canWrapX=function e(){return this.canWrapX_};i.prototype.getCode=function e(){return this.code_};i.prototype.getExtent=function e(){return this.extent_};i.prototype.getUnits=function e(){return this.units_};i.prototype.getMetersPerUnit=function e(){return this.metersPerUnit_||n["a"][this.units_]};i.prototype.getWorldExtent=function e(){return this.worldExtent_};i.prototype.getAxisOrientation=function e(){return this.axisOrientation_};i.prototype.isGlobal=function e(){return this.global_};i.prototype.setGlobal=function e(t){this.global_=t;this.canWrapX_=!!(t&&this.extent_)};i.prototype.getDefaultTileGrid=function e(){return this.defaultTileGrid_};i.prototype.setDefaultTileGrid=function e(t){this.defaultTileGrid_=t};i.prototype.setExtent=function e(t){this.extent_=t;this.canWrapX_=!!(this.global_&&t)};i.prototype.setWorldExtent=function e(t){this.worldExtent_=t};i.prototype.setGetPointResolution=function e(t){this.getPointResolutionFunc_=t};i.prototype.getPointResolutionFunc=function e(){return this.getPointResolutionFunc_};t["a"]=i},function(e,n,i){"use strict";(function(l){var u=i(78);var e=i(113);function t(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}var r=function(o){s.$inject=["$http","$injector","$rootScope","authenticationBaseUrl","gmfUser"];t(s,o);function s(e,t,r,n,i){var a;a=o.call(this)||this;a.$http_=e;a.$rootScope_=r;a.baseUrl_=n.replace(/\/$/,"");a.user_=i;a.noReloadRole_=t.has("gmfAuthenticationNoReloadRole")?t.get("gmfAuthenticationNoReloadRole"):null;a.load_();return a}var e=s.prototype;e.load_=function e(){var t=this.baseUrl_+"/"+s.RouteSuffix.IS_LOGGED_IN;this.$http_.get(t,{withCredentials:true}).then(this.handleLogin_.bind(this,true))};e.changePassword=function e(t,r,n){var i=this;var a=this.baseUrl_+"/"+s.RouteSuffix.CHANGE_PASSWORD;return this.$http_.post(a,l.param({oldPassword:t,newPassword:r,confirmNewPassword:n}),{headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:true}).then(function(e){i.user_.is_password_changed=true;i.$rootScope_.$digest()}.bind(this))};e.login=function e(t,r){var n=this.baseUrl_+"/"+s.RouteSuffix.LOGIN;return this.$http_.post(n,l.param({login:t,password:r}),{headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:true}).then(this.handleLogin_.bind(this,false))};e.logout=function e(){var t=this;var r=this.user_["role_name"]===this.noReloadRole_;var n=this.baseUrl_+"/"+s.RouteSuffix.LOGOUT;return this.$http_.get(n,{withCredentials:true}).then(function(){t.resetUser_(r)})};e.resetPassword=function e(t){var r=this.baseUrl_+"/"+s.RouteSuffix.RESET_PASSWORD;var n=function(e){var t=e.data;return t}.bind(this);return this.$http_.post(r,l.param({login:t}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(n)};e.getFunctionalities=function e(){return this.user_.functionalities};e.getRoleId=function e(){return this.user_.role_id};e.handleLogin_=function e(t,r){var n=r.data;this.setUser_(n,!t);if(t){var i=new u["a"]("ready",{user:this.user_});this.dispatchEvent(i)}return r};e.setUser_=function e(t,r){for(var n in this.user_){this.user_[n]=null}for(var i in t){this.user_[i]=t[i]}if(r&&t.username!==undefined){var a=new u["a"]("login",{user:this.user_});this.dispatchEvent(a)}};e.resetUser_=function e(t){t=t||false;for(var r in this.user_){this.user_[r]=null}var n=new u["a"]("logout",{user:this.user_});this.dispatchEvent(n);if(!t){this.load_()}};return s}(e["a"]);r.RouteSuffix={CHANGE_PASSWORD:"loginchange",IS_LOGGED_IN:"loginuser",LOGIN:"login",LOGOUT:"logout",RESET_PASSWORD:"loginresetpassword"};r.module=angular.module("gmfAuthenticationService",[]);r.module.service("gmfAuthenticationService",r);r.module.value("gmfUser",{functionalities:null,is_password_changed:null,role_id:null,role_name:null,username:null});n["a"]=r}).call(this,i(27))},function(e,t,r){"use strict";var n=r(5);var a=r(8);var i=r(81);var o=r(166);var s=r(0);var l=function(e){function t(){e.call(this);this.xmlSerializer_=new XMLSerializer}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getType=function e(){return o["a"].XML};t.prototype.readFeature=function e(t,r){if(!t){return null}else if(typeof t==="string"){var n=Object(s["r"])(t);return this.readFeatureFromDocument(n,r)}else if(Object(s["g"])(t)){return this.readFeatureFromDocument(t,r)}else{return this.readFeatureFromNode(t,r)}};t.prototype.readFeatureFromDocument=function e(t,r){var n=this.readFeaturesFromDocument(t,r);if(n.length>0){return n[0]}else{return null}};t.prototype.readFeatureFromNode=function e(t,r){return null};t.prototype.readFeatures=function e(t,r){if(!t){return[]}else if(typeof t==="string"){var n=Object(s["r"])(t);return this.readFeaturesFromDocument(n,r)}else if(Object(s["g"])(t)){return this.readFeaturesFromDocument(t,r)}else{return this.readFeaturesFromNode(t,r)}};t.prototype.readFeaturesFromDocument=function e(t,r){var n=[];for(var i=t.firstChild;i;i=i.nextSibling){if(i.nodeType==Node.ELEMENT_NODE){Object(a["c"])(n,this.readFeaturesFromNode(i,r))}}return n};t.prototype.readFeaturesFromNode=function e(t,r){return Object(n["b"])()};t.prototype.readGeometry=function e(t,r){if(!t){return null}else if(typeof t==="string"){var n=Object(s["r"])(t);return this.readGeometryFromDocument(n,r)}else if(Object(s["g"])(t)){return this.readGeometryFromDocument(t,r)}else{return this.readGeometryFromNode(t,r)}};t.prototype.readGeometryFromDocument=function e(t,r){return null};t.prototype.readGeometryFromNode=function e(t,r){return null};t.prototype.readProjection=function e(t){if(!t){return null}else if(typeof t==="string"){var r=Object(s["r"])(t);return this.readProjectionFromDocument(r)}else if(Object(s["g"])(t)){return this.readProjectionFromDocument(t)}else{return this.readProjectionFromNode(t)}};t.prototype.readProjectionFromDocument=function e(t){return this.dataProjection};t.prototype.readProjectionFromNode=function e(t){return this.dataProjection};t.prototype.writeFeature=function e(t,r){var n=this.writeFeatureNode(t,r);return this.xmlSerializer_.serializeToString(n)};t.prototype.writeFeatureNode=function e(t,r){return null};t.prototype.writeFeatures=function e(t,r){var n=this.writeFeaturesNode(t,r);return this.xmlSerializer_.serializeToString(n)};t.prototype.writeFeaturesNode=function e(t,r){return null};t.prototype.writeGeometry=function e(t,r){var n=this.writeGeometryNode(t,r);return this.xmlSerializer_.serializeToString(n)};t.prototype.writeGeometryNode=function e(t,r){return null};return t}(i["a"]);t["a"]=l},function(e,t,r){"use strict";var n=r(11);var i={};i.getDefaultDrawStyleFunction=function(){var r=Object(n["b"])();return function(e,t){return r[e.getGeometry().getType()]}};i.getDefaultModifyStyleFunction=function(){var r=Object(n["b"])();return function(e,t){return r["Point"]}};t["a"]=i},function(e,t,r){"use strict";var z=r(289);var n=r(323);var u=r(154);var i=r(74);var B=r(22);var K=r(1);var a=r(132);var X=r(51);var o=r(162);var s=r(252);var l=r(91);var c=r(119);var Z=r(5);var f=r(2);var M=r(28);var h=r(9);var A=r(101);var k=r(114);var j=r(170);var d=function(){e.$inject=["$q","$rootScope","$timeout","gmfThemes","gmfTreeManager","ngeoBackgroundLayerMgr","ngeoDataSources","ngeoLayerHelper","ngeoRuleHelper","ngeoWMSTime","gmfWFSAliases"];function e(e,t,r,n,i,a,o,s,l,u,c){this.q_=e;this.rootScope_=t;this.timeout_=r;this.gmfThemes_=n;this.gmfTreeManager_=i;this.ngeoBackgroundLayerMgr_=a;this.ngeoDataSources_=o;this.dataSources_=o.collection;this.ngeoLayerHelper_=s;this.ngeoRuleHelper_=l;this.ngeoWMSTime_=u;this.gmfWFSAliases_=c;this.dataSourcesCache_={};this.dimensions_;this.dimensionsWatcherUnregister=null;this.treeCtrlCache_={};this.treeCtrlsUnregister_=null;f["a"](this.ngeoBackgroundLayerMgr_,"change",this.handleNgeoBackgroundLayerChange_,this);f["a"](this.gmfThemes_,"change",this.handleThemesChange_,this)}var t=e.prototype;t.setDatasourceMap=function e(t){this.ngeoDataSources_.map=t};t.setDimensions=function e(t){var r=this;if(this.dimensionsWatcherUnregister){this.dimensionsWatcherUnregister()}this.dimensions_=t;this.dimensionsWatcherUnregister=this.rootScope_.$watch(function(){return r.dimensions_},this.handleDimensionsChange_.bind(this),true);this.handleDimensionsChange_()};t.handleDimensionsChange_=function e(){var t=[];var r=[];var n=this.dataSources_.getArray();for(var i=n,a=Array.isArray(i),o=0,i=a?i:i[Symbol.iterator]();;){var s;if(a){if(o>=i.length)break;s=i[o++]}else{o=i.next();if(o.done)break;s=o.value}var l=s;if(l.dimensionsFiltersConfig){for(var u in l.dimensionsFiltersConfig){if(l.dimensionsFiltersConfig[u].value===null){var c=this.getDataSourceLayer_(l);if(c==undefined){return}var f=Z["c"](c);if(r.indexOf(f)==-1){t.push(c);r.push(f)}}}}}t.forEach(this.updateLayerFilter_.bind(this))};t.handleThemesChange_=function e(){var h=this;this.clearDataSources_();if(this.treeCtrlsUnregister_){this.treeCtrlsUnregister_()}this.clearTreeCtrlCache_();this.gmfThemes_.getOgcServersObject().then(function(f){var e=h.gmfThemes_.getThemesObject().then(function(e){for(var t=e,r=Array.isArray(t),n=0,t=r?t:t[Symbol.iterator]();;){var i;if(r){if(n>=t.length)break;i=t[n++]}else{n=t.next();if(n.done)break;i=n.value}var a=i;for(var o=a.children,s=Array.isArray(o),l=0,o=s?o:o[Symbol.iterator]();;){var u;if(s){if(l>=o.length)break;u=o[l++]}else{l=o.next();if(l.done)break;u=l.value}var c=u;K["a"].assert(c);h.createDataSource_(c,c,f)}}});var t=h.gmfThemes_.getBackgroundLayersObject().then(function(e){for(var t=e,r=Array.isArray(t),n=0,t=r?t:t[Symbol.iterator]();;){var i;if(r){if(n>=t.length)break;i=t[n++]}else{n=t.next();if(n.done)break;i=n.value}var a=i;h.createDataSource_(null,a,f)}});h.q_.all([e,t]).then(function(){h.treeCtrlsUnregister_=h.rootScope_.$watchCollection(function(){if(h.gmfTreeManager_.rootCtrl){return h.gmfTreeManager_.rootCtrl.children}},h.handleTreeManagerRootChildrenChange_.bind(h))})})};t.handleTreeManagerRootChildrenChange_=function e(f){var h=this;this.timeout_(function(){if(!f){return}var e=[];var t=function e(t,r){var n=r.node;var i=n.children;if(!i){t.push(r)}};for(var r=0,n=f.length;r<n;r++){f[r].traverseDepthFirst(t.bind(h,e))}for(var i=0,a=e.length;i<a;i++){var o=e[i];var s=h.getTreeCtrlCacheItem_(o);if(!s){h.addTreeCtrlToCache_(o)}}var l=h.treeCtrlCache_;for(var u in h.treeCtrlCache_){var c=l[u];if(!e.includes(c.treeCtrl)){h.removeTreeCtrlCacheItem_(c)}}})};t.clearDataSources_=function e(){var t=this.dataSources_.getArray();for(var r=t.length-1,n=0;r>=n;r--){if(this.dataSourcesCache_[t[r].id]){this.dataSources_.remove(t[r])}}h["b"](this.dataSourcesCache_)};t.createDataSource_=function e(t,r,n){var i=r.children;if(i){for(var a=i,o=Array.isArray(a),s=0,a=o?a:a[Symbol.iterator]();;){var l;if(o){if(s>=a.length)break;l=a[s++]}else{s=a.next();if(s.done)break;l=s.value}var u=l;K["a"].assert(u);this.createDataSource_(t,u,n)}return}var c=r;var f=Z["c"](c);if(this.dataSourcesCache_[f]){return}var h=c.metadata;var d=c.type;var p;var v;var g;var m;var _;var y;var b;var w;if(d===B["a"].NodeType.WMTS){var S=c;_=S.layer;y=S.url;p=h.maxResolution;v=h.minResolution;var C=h.queryLayers||h.wmsLayers;if(C){g=C.split(",").map(function(e){return{maxResolution:p,minResolution:v,name:e,queryable:true}})}if(h.ogcServer&&n[h.ogcServer]){m=n[h.ogcServer]}b=S.imageType}else if(d===B["a"].NodeType.WMS){var O=c;p=O.maxResolutionHint;v=O.minResolutionHint;g=O.childLayers.map(function(e){return{maxResolution:e.maxResolutionHint,minResolution:e.minResolutionHint,name:e.name,queryable:e.queryable}});var x=!t||t.mixed?O.ogcServer:t.ogcServer;K["a"].assert(x);m=n[x];b=m.imageType;if(O.time){w=O.time}else if(t&&t.time){w=t.time}}var T=m?m.type:undefined;var E=m?m.namespace:undefined;var M=m?m.isSingleTile:undefined;var A=m&&m.wfsSupport?m.urlWfs:undefined;var k=m?m.url:undefined;var j=X["a"].WFSOutputFormat.GML3;if(T===X["a"].ServerType.QGISSERVER){j=X["a"].WFSOutputFormat.GML2}var I=!!h.snappingConfig;var D=h.snappingConfig?h.snappingConfig.tolerance:undefined;var P=h.snappingConfig?h.snappingConfig.edge:undefined;var R=h.snappingConfig?h.snappingConfig.vertex:undefined;var L=this.dimensions_;var N=r.dimensions||t.dimensions;var $=r.dimensionsFilters;var F;var G;if(w){var U=this.ngeoWMSTime_.getOptions(w)["values"];if(Array.isArray(U)){F=U[0];G=U[1]}else{F=U}}var H=h.copyable;var W=h.identifierAttributeField;var Y=c.name;var V=h.timeAttribute;var q=h.isChecked===true;this.dataSourcesCache_[f]=new z["a"]({copyable:H,dimensions:L,dimensionsConfig:N,dimensionsFiltersConfig:$,gmfLayer:c,id:f,identifierAttribute:W,maxResolution:p,minResolution:v,name:Y,ogcImageType:b,ogcLayers:g,ogcServerType:T,wfsFeatureNS:E,ogcType:d,snappable:I,snappingTolerance:D,snappingToEdges:P,snappingToVertice:R,timeAttributeName:V,timeLowerValue:F,timeProperty:w,timeUpperValue:G,visible:q,wfsOutputFormat:j,wfsUrl:A,wmsIsSingleTile:M,wmsUrl:k,wmtsLayer:_,wmtsUrl:y})};t.addTreeCtrlToCache_=function e(t){var r=Z["c"](t.node);var n=this.dataSourcesCache_[r];K["a"].assert(n,"DataSource should be set");t.setDataSource(n);var i=this.rootScope_.$watch(function(){return t.getState()},this.handleTreeCtrlStateChange_.bind(this,t));var a=this.rootScope_.$watch(function(){var e=n.filterRules!==null;var t=n.visible;return e&&t},this.handleDataSourceFilterRulesChange_.bind(this,n));var o;var s;var l;if(n.timeProperty&&n.ogcType===X["a"].Type.WMS){o=this.rootScope_.$watch(function(){return n.timeLowerValue},this.handleDataSourceTimeValueChange_.bind(this,n));if(n.timeProperty.mode==="range"){s=this.rootScope_.$watch(function(){return n.timeUpperValue},this.handleDataSourceTimeValueChange_.bind(this,n))}l=K["a"].assertInstanceof(u["a"].getLayer(t),A["a"])}this.treeCtrlCache_[r]={filterRulesWatcherUnregister:a,stateWatcherUnregister:i,timeLowerValueWatcherUnregister:o,timeUpperValueWatcherUnregister:s,treeCtrl:t,wmsLayer:l};this.dataSources_.push(n);this.gmfWFSAliases_.describe(n)};t.removeTreeCtrlCacheItem_=function e(t){var r=t.treeCtrl.getDataSource();K["a"].assert(r,"DataSource should be set");this.dataSources_.remove(r);t.treeCtrl.setDataSource(null);t.filterRulesWatcherUnregister();t.stateWatcherUnregister();if(t.timeLowerValueWatcherUnregister){t.timeLowerValueWatcherUnregister()}if(t.timeUpperValueWatcherUnregister){t.timeUpperValueWatcherUnregister()}delete this.treeCtrlCache_[Z["c"](t.treeCtrl.node)]};t.clearTreeCtrlCache_=function e(){for(var t in this.treeCtrlCache_){this.removeTreeCtrlCacheItem_(this.treeCtrlCache_[t])}};t.handleTreeCtrlStateChange_=function e(t,r){var n=t.getDataSource();K["a"].assert(n,"DataSource should be set");var i=r==="on";n.visible=i;var a=this.getDataSourceLayer_(n);if(a==undefined){return}this.updateLayerFilter_(a)};t.getTreeCtrlCacheItem_=function e(t){return this.treeCtrlCache_[Z["c"](t.node)]||null};t.getDataSourceLayer_=function e(t){t=t;var r=Z["c"](t.gmfLayer);var n=this.treeCtrlCache_[r];if(n==undefined){return}var i=n.treeCtrl;return u["a"].getLayer(i)};t.updateLayerFilter_=function e(t){var r;K["a"].assert(t instanceof A["a"]||t instanceof M["a"]);var n=t.getSource();if(!(n instanceof k["a"]||n instanceof j["a"])){return}var i=n.getParams();var a=i["LAYERS"];var o=a.split(",");K["a"].assert(o.length>=1);var s="FILTER";var l=[];var u=false;for(var c=o,f=Array.isArray(c),h=0,c=f?c:c[Symbol.iterator]();;){var d;if(f){if(h>=c.length)break;d=c[h++]}else{h=c.next();if(h.done)break;d=h.value}var p=d;var v="()";var g=this.dataSources_.getArray();for(var m=g,_=Array.isArray(m),y=0,m=_?m:m[Symbol.iterator]();;){var b;if(_){if(y>=m.length)break;b=m[y++]}else{y=m.next();if(y.done)break;b=y.value}var w=b;var S=this.getDataSourceLayer_(w);if(S==undefined){continue}if(Z["c"](S)==Z["c"](t)&&p===w.name){var C=Z["c"](w.gmfLayer);var O=this.treeCtrlCache_[C];K["a"].assert(O);var x=O.treeCtrl;var T=x.map.getView().getProjection().getCode();var E=w.visible?this.ngeoRuleHelper_.createFilterString({dataSource:w,projCode:T,incDimensions:true}):null;if(E){v="("+E+")";u=true}}}l.push(v)}n.updateParams((r={},r[s]=u?l.join(""):null,r))};t.handleDataSourceFilterRulesChange_=function e(t){if(t.filtrable!==true||t.ogcType!==X["a"].Type.WMS){return}var r=this.getDataSourceLayer_(t);if(r===undefined){return}this.updateLayerFilter_(r)};t.handleDataSourceTimeValueChange_=function e(t){var r=Z["c"](t.gmfLayer);var n=this.treeCtrlCache_[r];K["a"].assert(n);var i=K["a"].assert(n.wmsLayer);var a=K["a"].assertInstanceof(i.getSource(),k["a"]);var o=K["a"].assert(t.timeProperty);var s;var l=t.timeRangeValue;if(l){s=this.ngeoWMSTime_.formatWMSTimeParam(o,l)}var u=a.getParams();var c=u["TIME"];if(c===s){return}this.ngeoLayerHelper_.updateWMSLayerState(i,a.getParams()["LAYERS"],s)};t.handleNgeoBackgroundLayerChange_=function e(t){var r=t.detail.previous;var n=t.detail.current;var i=this.dataSourcesCache_;if(r){var a=r.get("querySourceIds");if(Array.isArray(a)){for(var o=a,s=Array.isArray(o),l=0,o=s?o:o[Symbol.iterator]();;){var u;if(s){if(l>=o.length)break;u=o[l++]}else{l=o.next();if(l.done)break;u=l.value}var c=u;var f=i[c];if(f){f.visible=false;this.dataSources_.remove(f)}}}}if(n){var h=n.get("querySourceIds");if(Array.isArray(h)){for(var d=h,p=Array.isArray(d),v=0,d=p?d:d[Symbol.iterator]();;){var g;if(p){if(v>=d.length)break;g=d[v++]}else{v=d.next();if(v.done)break;g=v.value}var m=g;var _=i[m];if(_){_.visible=true;this.dataSources_.push(_)}}}}};return e}();d.module=angular.module("gmfDataSourcesManager",[n["a"].module.name,u["a"].module.name,i["a"].module.name,B["a"].module.name,o["a"].module.name,a["a"].module.name,s["a"].module.name,l["a"].module.name,c["a"].module.name]);d.module.service("gmfDataSourcesManager",d);t["a"]=d},function(e,t,r){"use strict";var u=r(1);var n=r(258);var c=r(13);var f=r(19);var i=r(120);var a=r(100);var o=r(62);var h=r(14);var s=function e(t,r,n,i,a){var o=this;this.active;if(this.active===undefined){this.active=false}this.features;this.map;this.showMeasure;this.gettextCatalog_=n;n.getString("Point");n.getString("LineString");n.getString("Polygon");n.getString("Circle");n.getString("Rectangle");n.getString("Text");this.featureHelper_=i;this.ngeoFeatures_=a;this.interactions_=[];this.drawPoint;this.measureLength;this.measureArea;this.measureAzimut;this.drawRectangle;this.drawText;t.$watch(function(){return o.active},function(e){if(e===false){o.interactions_.forEach(function(e){e.setActive(false)})}})};s.$inject=["$scope","$sce","gettextCatalog","ngeoFeatureHelper","ngeoFeatures"];s.$inject=["$scope","$sce","gettextCatalog","ngeoFeatureHelper","ngeoFeatures"];s.prototype.registerInteraction=function(e){this.interactions_.push(e);e.setActive(false);a["a"].interaction(e);this.map.addInteraction(e)};s.prototype.handleActiveChange=function(e){this.active=this.interactions_.some(function(e){return e.getActive()},this)};s.prototype.handleDrawEnd=function(e,t){var r;if(t.feature){r=t.feature}else{r=t.detail.feature}u["a"].assert(r);var n=r.get("azimut");var i=this.features||this.ngeoFeatures_;var a=new h["a"](r.getGeometry());var o=c["a"];switch(e){case f["a"].CIRCLE:a.set(o.IS_CIRCLE,true);if(n!==undefined){a.set(o.AZIMUT,n)}break;case f["a"].TEXT:a.set(o.IS_TEXT,true);break;case f["a"].RECTANGLE:a.set(o.IS_RECTANGLE,true);break;default:break}var s=this.gettextCatalog_.getString(e);a.set(o.NAME,s+" "+(i.getLength()+1));var l=e!==f["a"].TEXT?"#DB4436":"#000000";a.set(o.COLOR,l);a.set(o.ANGLE,0);a.set(o.OPACITY,.2);a.set(o.SHOW_MEASURE,this.showMeasure?true:false);a.set(o.SHOW_LABEL,false);a.set(o.SIZE,10);a.set(o.STROKE,2);this.featureHelper_.setStyle(a);i.push(a)};s.module=angular.module("ngeoDrawfeatureController",[n["a"].name,i["a"].name,o["a"].module.name]);s.module.controller("ngeoDrawfeatureController",s);t["a"]=s},function(e,t,r){"use strict";var i=r(137);var c=r(127);var n=function e(t,r){this.http_=t;this.baseUrl_=r};n.$inject=["$http","gmfLayersUrl"];n.$inject=["$http","gmfLayersUrl"];n.prototype.getFeaturesInExtent=function(e,t){var r=c["a"](this.baseUrl_+"/"+e.join(","),{bbox:t.join(",")});return this.http_.get(r).then(this.handleGetFeatures_.bind(this))};n.prototype.getFeaturesWithComparisonFilters=function(e,t){var r=[];var n={};for(var i=t,a=Array.isArray(i),o=0,i=a?i:i[Symbol.iterator]();;){var s;if(a){if(o>=i.length)break;s=i[o++]}else{o=i.next();if(o.done)break;s=o.value}var l=s;n[l.property+"__"+l.operator]=l.value;r.push(l.property)}n["queryable"]=r.join(",");var u=c["a"](this.baseUrl_+"/"+e.join(","),n);return this.http_.get(u).then(this.handleGetFeatures_.bind(this))};n.prototype.handleGetFeatures_=function(e){return(new i["a"]).readFeatures(e.data)};n.prototype.insertFeatures=function(e,t){var r=this.baseUrl_+"/"+e;var n=(new i["a"]).writeFeatures(t);return this.http_.post(r,n,{headers:{"Content-Type":"application/json"},withCredentials:true})};n.prototype.updateFeature=function(e,t){var r=this.baseUrl_+"/"+e.toString()+"/"+t.getId();var n=(new i["a"]).writeFeature(t);return this.http_.put(r,n,{headers:{"Content-Type":"application/json"},withCredentials:true})};n.prototype.deleteFeature=function(e,t){var r=this.baseUrl_+"/"+e.toString()+"/"+t.getId();return this.http_.delete(r,{headers:{"Content-Type":"application/json"},withCredentials:true})};n.module=angular.module("gmfEditFeature",[]);n.module.service("gmfEditFeature",n);t["a"]=n},function(e,r,t){(function(e,t){true?t(r):undefined})(this,function(e){"use strict";var S=Math.PI,d=2*S,C=1e-6,p=d-C;function t(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function r(){return new t}t.prototype=r.prototype={constructor:t,moveTo:function e(t,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+r)},closePath:function e(){if(this._x1!==null){this._x1=this._x0,this._y1=this._y0;this._+="Z"}},lineTo:function e(t,r){this._+="L"+(this._x1=+t)+","+(this._y1=+r)},quadraticCurveTo:function e(t,r,n,i){this._+="Q"+ +t+","+ +r+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function e(t,r,n,i,a,o){this._+="C"+ +t+","+ +r+","+ +n+","+ +i+","+(this._x1=+a)+","+(this._y1=+o)},arcTo:function e(t,r,n,i,a){t=+t,r=+r,n=+n,i=+i,a=+a;var o=this._x1,s=this._y1,l=n-t,u=i-r,c=o-t,f=s-r,h=c*c+f*f;if(a<0)throw new Error("negative radius: "+a);if(this._x1===null){this._+="M"+(this._x1=t)+","+(this._y1=r)}else if(!(h>C));else if(!(Math.abs(f*l-u*c)>C)||!a){this._+="L"+(this._x1=t)+","+(this._y1=r)}else{var d=n-o,p=i-s,v=l*l+u*u,g=d*d+p*p,m=Math.sqrt(v),_=Math.sqrt(h),y=a*Math.tan((S-Math.acos((v+h-g)/(2*m*_)))/2),b=y/_,w=y/m;if(Math.abs(b-1)>C){this._+="L"+(t+b*c)+","+(r+b*f)}this._+="A"+a+","+a+",0,0,"+ +(f*d>c*p)+","+(this._x1=t+w*l)+","+(this._y1=r+w*u)}},arc:function e(t,r,n,i,a,o){t=+t,r=+r,n=+n;var s=n*Math.cos(i),l=n*Math.sin(i),u=t+s,c=r+l,f=1^o,h=o?i-a:a-i;if(n<0)throw new Error("negative radius: "+n);if(this._x1===null){this._+="M"+u+","+c}else if(Math.abs(this._x1-u)>C||Math.abs(this._y1-c)>C){this._+="L"+u+","+c}if(!n)return;if(h<0)h=h%d+d;if(h>p){this._+="A"+n+","+n+",0,1,"+f+","+(t-s)+","+(r-l)+"A"+n+","+n+",0,1,"+f+","+(this._x1=u)+","+(this._y1=c)}else if(h>C){this._+="A"+n+","+n+",0,"+ +(h>=S)+","+f+","+(this._x1=t+n*Math.cos(a))+","+(this._y1=r+n*Math.sin(a))}},rect:function e(t,r,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+r)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function e(){return this._}};e.path=r;Object.defineProperty(e,"__esModule",{value:true})})},function(e,t,r){"use strict";var n=r(144);var d=r(2);var i=angular.module("ngeoMapQuery",[n["a"].module.name]);i.directive_=function(f,h){return{restrict:"A",scope:false,link:function e(t,r,n){var a=t.$eval(n["ngeoMapQueryMap"]);var i=null;var o=null;var s=function e(t){var r=t.coordinate;f.issue({coordinate:r,map:a})};var l=function e(t){if(!t.dragging){var r=a.getEventPixel(t.originalEvent);var n=function e(t){var r=t.get("visible");var n=t.get("querySourceIds");return r&&!!n};var i=a.forEachLayerAtPixel(r,function(){return true},undefined,n);a.getTargetElement().style.cursor=i?"pointer":""}};var u=function e(){i=d["a"](a,"singleclick",s);var t=h.has("ngeoQueryOptions")?h.get("ngeoQueryOptions"):{};if(t.cursorHover){o=d["a"](a,"pointermove",l)}};var c=function e(){if(i!==null){d["e"](i);i=null}if(o!==null){d["e"](o);o=null}if(t.$eval(n["ngeoMapQueryAutoclear"])!==false){f.clear()}};t.$watch(n["ngeoMapQueryActive"],function(e,t){if(e){u()}else{c()}})}}};i.directive_.$inject=["ngeoMapQuerent","$injector"];i.directive("ngeoMapQuery",i.directive_);t["a"]=i},function(e,t,r){"use strict";var n=r(144);var l=r(248);var u=r(58);var i=angular.module("ngeoBboxQuery",[n["a"].module.name]);i.directive_=function(s){return{restrict:"A",scope:false,link:function e(n,t,i){var a=n.$eval(i["ngeoBboxQueryMap"]);var o=new l["a"]({condition:u["h"]});var r=function e(t){var r=o.getGeometry().getExtent();s.issue({limit:n.$eval(i["ngeoBboxQueryLimit"]),extent:r,map:a})};o.on("boxend",r);n.$watch(i["ngeoBboxQueryActive"],function(e,t){if(e){a.addInteraction(o)}else{a.removeInteraction(o);if(n.$eval(i["ngeoBboxQueryAutoclear"])!==false){s.clear()}}})}}};i.directive_.$inject=["ngeoMapQuerent"];i.directive("ngeoBboxQuery",i.directive_);t["a"]=i},function(e,t,r){"use strict";var n=r(59);var c=r(1);var i=r(91);var a=r(305);var o=r(132);var s=r(198);var u=r(23);var l=r(64);var f=r(65);function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function d(e,t,r){if(t)h(e.prototype,t);if(r)h(e,r);return e}function p(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}var v=function(r){p(e,r);function e(e){var t;t=r.call(this,e)||this;t.featuresCollection_=e.features||new u["a"];t.source_=new f["a"]({features:t.featuresCollection_,wrapX:false});t.layer_=new l["a"]({source:t.source_});return t}d(e,[{key:"features",get:function e(){return this.featuresCollection_.getArray()}},{key:"featuresCollection",get:function e(){return this.featuresCollection_}},{key:"layer",get:function e(){return this.layer_}},{key:"extent",get:function e(){return this.source_.getExtent()}}]);return e}(s["a"]);var g=v;var m=r(233);function _(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}var y=function(n){_(e,n);function e(e){var t;t=n.call(this,e)||this;var r=e.injector;t.rootScope_=r.get("$rootScope");t.unregister_={};return t}var t=e.prototype;t.addDataSource=function e(t){n.prototype.addDataSource.call(this,t);c["a"].assertInstanceof(t,g);this.registerDataSource_(t)};t.registerDataSource_=function e(t){this.unregister_[t.id]=this.rootScope_.$watch(function(){return t.visible},this.handleDataSourceVisibleChange_.bind(this,t))};t.handleDataSourceVisibleChange_=function e(t,r,n){if(r!==undefined){t.layer.setVisible(r)}};t.removeDataSource=function e(t){n.prototype.removeDataSource.call(this,t);c["a"].assertInstanceof(t,g);this.unregisterDataSource_(t)};t.unregisterDataSource_=function e(t){this.unregister_[t.id]();delete this.unregister_[t.id]};return e}(m["a"]);var b=y;var w=r(51);function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function C(e,t,r){if(t)S(e.prototype,t);if(r)S(e,r);return e}function O(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}var x=function(r){O(e,r);function e(e){var t;t=r.call(this,e)||this;t.url_=e.url;return t}C(e,[{key:"url",get:function e(){return this.url_}}]);return e}(m["a"]);var T=x;var E=r(8);function M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function A(e,t,r){if(t)M(e.prototype,t);if(r)M(e,r);return e}function k(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}var j=function(o){k(e,o);function e(e,t){var r;r=o.call(this,e)||this;var n=e.injector;r.layer_;r.ngeoLayerHelper_=t;r.rootScope_=n.get("$rootScope");r.wmsDataSourceUnregister_={};r.init_();return r}var t=e.prototype;t.init_=function e(){c["a"].assert(this.dataSources.length,"At least one data source is required.");for(var t=this.dataSources,r=Array.isArray(t),n=0,t=r?t:t[Symbol.iterator]();;){var i;if(r){if(n>=t.length)break;i=t[n++]}else{n=t.next();if(n.done)break;i=n.value}var a=i;c["a"].assertInstanceof(a,w["a"]);this.registerDataSource_(a)}};t.destroy=function e(){for(var t=this.dataSources,r=Array.isArray(t),n=0,t=r?t:t[Symbol.iterator]();;){var i;if(r){if(n>=t.length)break;i=t[n++]}else{n=t.next();if(n.done)break;i=n.value}var a=i;c["a"].assertInstanceof(a,w["a"]);this.unregisterDataSource_(a)}o.prototype.destroy.call(this)};t.addDataSource=function e(t){o.prototype.addDataSource.call(this,t);c["a"].assertInstanceof(t,w["a"]);this.registerDataSource_(t)};t.registerDataSource_=function e(t){var r=t.id;this.wmsDataSourceUnregister_[r]=this.rootScope_.$watch(function(){return t.visible},this.handleDataSourceVisibleChange_.bind(this));if(!this.layer_){this.layer_=this.ngeoLayerHelper_.createBasicWMSLayerFromDataSource(t)}else{this.layer_.get("querySourceIds").push(r);this.updateLayer_()}};t.handleDataSourceVisibleChange_=function e(t,r){if(t!==undefined&&t!==r){this.updateLayer_()}};t.updateLayer_=function e(){var t=this.layer;var r=[];for(var n=this.dataSources,i=Array.isArray(n),a=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(a>=n.length)break;o=n[a++]}else{a=n.next();if(a.done)break;o=a.value}var s=o;c["a"].assertInstanceof(s,w["a"]);if(s.visible){r=r.concat(s.getOGCLayerNames())}}this.ngeoLayerHelper_.updateWMSLayerState(t,r.join(","))};t.removeDataSource=function e(t){o.prototype.removeDataSource.call(this,t);c["a"].assertInstanceof(t,w["a"]);this.unregisterDataSource_(t)};t.unregisterDataSource_=function e(t){var r=t.id;var n=this.layer;var i=this.wmsDataSourceUnregister_[r];i();delete this.wmsDataSourceUnregister_[r];E["j"](this.dataSources,t);var a=this.ngeoLayerHelper_.getQuerySourceIds(n);if(a){E["j"](a,r)}if(this.dataSources.length){this.updateLayer_()}};A(e,[{key:"layer",get:function e(){return this.layer_}}]);return e}(T);var I=j;var D=r(5);var P=r(3);var R=r(2);var L=r(314);var N=r(312);function $(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function F(e,t,r){if(t)$(e.prototype,t);if(r)$(e,r);return e}var G=function(){v.$inject=["gettextCatalog","$injector","$q","$rootScope","ngeoDataSources","ngeoFile","ngeoLayerHelper"];function v(e,t,r,n,i,a,o){this.injector_=t;this.q_=r;this.rootScope_=n;this.dataSources_=i.collection;this.ngeoFile_=a;this.ngeoLayerHelper_=o;this.extDataSources_={};this.files_={};this.map_=null;this.fileGroup_=new b({dataSources:[],injector:this.injector_,title:e.getString("Local files")});this.wmsGroupsCollection_=new u["a"];this.wmtsGroupsCollection_=new u["a"];this.wmtsCache_={};R["a"](this.dataSources_,"remove",this.handleDataSourcesRemove_,this)}var e=v.prototype;e.addWMSGroup_=function e(t){this.wmsGroupsCollection.push(t)};e.removeWMSGroup_=function e(t){this.wmsGroupsCollection.remove(t)};e.getWMSGroup=function e(t){var r=null;for(var n=this.wmsGroups,i=Array.isArray(n),a=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(a>=n.length)break;o=n[a++]}else{a=n.next();if(a.done)break;o=a.value}var s=o;if(s.url===t){r=s;break}}return r};e.addWMTSGroup_=function e(t){this.wmtsGroupsCollection.push(t)};e.removeWMTSGroup_=function e(t){this.wmtsGroupsCollection.remove(t)};e.getWMTSGroup=function e(t){var r=null;for(var n=this.wmtsGroups,i=Array.isArray(n),a=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(a>=n.length)break;o=n[a++]}else{a=n.next();if(a.done)break;o=a.value}var s=o;if(s.url===t){r=s;break}}return r};e.isExternalDataSource=function e(t){return!!this.extDataSources_[t.id]};e.addLayer_=function e(t){this.layerGroup.getLayers().push(t)};e.removeLayer_=function e(t){this.layerGroup.getLayers().remove(t)};e.createAndAddDataSourceFromWMSCapability=function e(t,r,n){var i=v.getId(t);var a=r["Service"];var o;if(this.extDataSources_[i]){o=this.extDataSources_[i]}else{var s=r["Capability"]["Request"];var l=s["GetMap"]["Format"];var u="image/png";var c=l.includes(u)?u:l[0];var f=s["GetFeatureInfo"]["Format"];var h=f.includes(w["a"].WMSInfoFormat.GML)?w["a"].WMSInfoFormat.GML:undefined;var d=t["queryable"]===true&&h!==undefined;o=new w["a"]({id:i,name:t["Title"],ogcImageType:c,ogcLayers:[{name:t["Name"],queryable:d}],ogcType:w["a"].Type.WMS,visible:true,wmsInfoFormat:h,wmsUrl:n});this.extDataSources_[i]=o}var p=this.getWMSGroup(n);if(p){if(!p.dataSources.includes(o)){p.addDataSource(o);this.dataSources_.push(o)}}else{p=new I({dataSources:[o],injector:this.injector_,title:a["Title"],url:n},this.ngeoLayerHelper_);this.addLayer_(p.layer);this.addWMSGroup_(p);this.dataSources_.push(o)}};e.createAndAddDataSourceFromWMTSCapability=function e(t,r,n){var i=v.getId(t);if(this.wmtsCache_[i]){return}var a;if(this.extDataSources_[i]){a=this.extDataSources_[i]}else{var o=c["a"].assertString(t["Title"]);var s=c["a"].assertString(t["Identifier"]);a=new w["a"]({id:i,name:o,ogcType:w["a"].Type.WMTS,visible:true,wmtsLayer:s,wmtsUrl:n});this.extDataSources_[i]=a}var l=this.getWMTSGroup(n);if(!l){l=new T({dataSources:[],title:r["ServiceIdentification"]["Title"],url:n});this.addWMTSGroup_(l)}l.addDataSource(a);var u=this.ngeoLayerHelper_.createWMTSLayerFromCapabilititesObj(r,t);this.addLayer_(u);this.dataSources_.push(a);this.wmtsCache_[i]={layerObj:u,unregister:this.rootScope_.$watch(function(){return a.visible},this.handleWMTSDataSourceVisibleChange_.bind(this,u))}};e.createAndAddDataSourceFromFile=function e(t,n){var i=this;this.getFileDataSource_(t).then(function(e){var t=true;var r=i.fileGroup_;if(Object(P["H"])(e.extent)){t=false}else{if(r.dataSources.includes(e)){return}i.addLayer_(e.layer);r.addDataSource(e);i.map_.getView().fit(e.extent);i.dataSources_.push(e)}if(n){n(t)}},function(e){console.error("Failed to load file: "+t.name);if(n){n(false)}})};e.getFileDataSource_=function e(a){var o=this;var s=this.q_.defer();if(this.files_[a.name]){s.resolve(this.files_[a.name])}else{var l=this.ngeoFile_;l.read(a).then(function(e){var t;var r={featureProjection:o.map_.getView().getProjection()};if(l.isKml(e)){t=new N["a"]({extractStyles:false}).readFeatures(e,r)}else if(l.isGpx(e)){t=(new L["a"]).readFeatures(e,r)}if(t){var n=v.getId(a);var i=new g({features:new u["a"](t),id:n,name:a.name,visible:true});o.files_[a.name]=i;o.extDataSources_[n]=i;s.resolve(i)}else{s.reject()}})}return s.promise};e.handleWMTSDataSourceVisibleChange_=function e(t,r,n){if(r!==undefined&&r!==n){t.setVisible(r)}};e.handleDataSourcesRemove_=function e(t){var r=t.element;if(this.extDataSources_[r.id]===r){if(r instanceof g){this.removeFileDataSource_(r)}else if(r instanceof w["a"]){this.removeOGCDataSource_(r)}}};e.removeFileDataSource_=function e(t){this.removeLayer_(t.layer);this.fileGroup_.removeDataSource(t)};e.removeOGCDataSource_=function e(t){if(t.ogcType===w["a"].Type.WMS){var r=t.wmsUrl;c["a"].assert(r);var n=this.getWMSGroup(r);if(n&&n.dataSources.includes(t)){n.removeDataSource(t);if(!n.dataSources.length){this.removeLayer_(n.layer);n.destroy();this.removeWMSGroup_(n)}}}else if(t.ogcType===w["a"].Type.WMTS){var i=t.wmtsUrl;c["a"].assert(i);var a=this.getWMTSGroup(i);if(a&&a.dataSources.includes(t)){a.removeDataSource(t);var o=t.id;this.removeLayer_(this.wmtsCache_[o].layerObj);this.wmtsCache_[o].unregister();delete this.wmtsCache_[o];if(!a.dataSources.length){a.destroy();this.removeWMTSGroup_(a)}}}};F(v,[{key:"fileGroup",get:function e(){return this.fileGroup_}},{key:"wmsGroups",get:function e(){return this.wmsGroupsCollection_.getArray()}},{key:"wmsGroupsCollection",get:function e(){return this.wmsGroupsCollection_}},{key:"wmtsGroups",get:function e(){return this.wmtsGroupsCollection_.getArray()}},{key:"wmtsGroupsCollection",get:function e(){return this.wmtsGroupsCollection_}},{key:"layerGroup",get:function e(){var t=this.map_;c["a"].assert(t);return this.ngeoLayerHelper_.getGroupFromMap(t,n["a"].EXTERNALLAYERGROUP_NAME)}},{key:"map",set:function e(t){this.map_=t}}]);return v}();G.getId=function(e){return D["c"](e)+1e6};G.module=angular.module("gmfExternalDataSourcesManager",[i["a"].module.name,a["a"].module.name,o["a"].module.name]);G.module.service("gmfExternalDataSourcesManager",G);var U=t["a"]=G},function(e,t,r){"use strict";var n=r(179);var i=r(84);var a=r(206);var o=r(218);var s=angular.module("gmfAuthentication",[n["a"].module.name,a["a"].module.name,o["a"].name]);s.gmfAuthenticationTemplateUrl_=function(e,t){var r=t["gmfAuthenticationTemplateurl"];return r!==undefined?r:"gmf/authentication"};s.run(["$templateCache",function(e){e.put("gmf/authentication",r(428))}]);l.$inject=["$element","$attrs","gmfAuthenticationTemplateUrl"];function l(e,t,r){return r(e,t)}s.component_={bindings:{allowPasswordReset:"<?gmfAuthenticationAllowPasswordReset",allowPasswordChange:"<?gmfAuthenticationAllowPasswordChange",passwordValidator:"<?gmfAuthenticationPasswordValidator",forcePasswordChange:"<?gmfAuthenticationForcePasswordChange",infoMessage:"=?gmfAuthenticationInfoMessage"},controller:"GmfAuthenticationController",templateUrl:l};s.value("gmfAuthenticationTemplateUrl",s.gmfAuthenticationTemplateUrl_);s.component("gmfAuthentication",s.component_);s.AuthenticationController_=function(){e.$inject=["$element","gettextCatalog","gmfAuthenticationService","gmfUser","ngeoNotification"];function e(e,t,r,n,i){this.$element_=e;this.gmfUser=n;this.gettextCatalog=t;this.gmfAuthenticationService_=r;this.notification_=i;this.allowPasswordReset;this.allowPasswordChange;this.passwordValidator=null;this.forcePasswordChange;this.infoMessage=null;this.changingPassword=false;this.changePasswordModalShown=false;this.resetPasswordModalShown=false;this.error=false;this.loginVal="";this.pwdVal="";this.oldPwdVal="";this.newPwdVal="";this.newPwdConfVal=""}var t=e.prototype;t.$onInit=function e(){this.allowPasswordReset=this.allowPasswordReset!==false;this.allowPasswordChange=this.allowPasswordChange!==false;this.forcePasswordChange=this.forcePasswordChange===true;if(this.forcePasswordChange){this.changingPassword=true}};t.changePassword=function e(){var t=this;var r=this.gettextCatalog;var n=this.oldPwdVal;var i=this.newPwdVal;var a=this.newPwdConfVal;var o=[];if(n===""){o.push(r.getString("The old password is required."))}if(i===""){o.push(r.getString("The new password is required."))}if(a===""){o.push(r.getString("The password confirmation is required."))}if(o.length){this.setError_(o)}else{if(n===i){o.push(r.getString("The old and new passwords are the same."))}if(i!==a){o.push(r.getString("The passwords don't match."))}if(this.passwordValidator){if(!this.passwordValidator.isPasswordValid(n)){o.push(r.getString(this.passwordValidator.notValidMessage))}}if(o.length){this.setError_(o)}else{var s=r.getString("Incorrect old password.");this.gmfAuthenticationService_.changePassword(n,i,a).then(function(){t.changePasswordModalShown=true;t.changePasswordReset()},this.setError_.bind(this,s))}}};t.login=function e(){var t=this.gettextCatalog;var r=[];if(this.loginVal===""){r.push(t.getString("The username is required."))}if(this.pwdVal===""){r.push(t.getString("The password is required."))}if(r.length){this.setError_(r)}else{var n=t.getString("Incorrect credentials or disabled account.");this.gmfAuthenticationService_.login(this.loginVal,this.pwdVal).then(this.resetError_.bind(this),this.setError_.bind(this,n))}};t.logout=function e(){var t=this.gettextCatalog;var r=t.getString("Could not log out.");this.gmfAuthenticationService_.logout().then(this.resetError_.bind(this),this.setError_.bind(this,r))};t.resetPassword=function e(){var t=this.gettextCatalog;if(!this.loginVal){this.setError_(t.getString("Please, input a login..."));return}var r=t.getString("An error occurred while resetting the password.");var n=function(e){this.resetPasswordModalShown=true;this.resetError_()}.bind(this);this.gmfAuthenticationService_.resetPassword(this.loginVal).then(n,this.setError_.bind(this,r))};t.changePasswordReset=function e(){this.resetError_();this.changingPassword=false;this.oldPwdVal="";this.newPwdVal="";this.newPwdConfVal=""};t.userMustChangeItsPassword=function e(){return this.gmfUser.is_password_changed===false&&this.forcePasswordChange};t.setError_=function e(t){if(this.error){this.resetError_()}this.error=true;var r=this.$element_.find(".gmf-authentication-error");if(!Array.isArray(t)){t=[t]}t.forEach(function(e){this.notification_.notify({msg:e,target:r,type:i["a"].Type.ERROR})},this)};t.resetError_=function e(){this.notification_.clear();this.error=false};return e}();s.controller("GmfAuthenticationController",s.AuthenticationController_);var u=s;var c=angular.module("gmfAuthenticationModule",[u.name,n["a"].module.name]);var f=t["a"]=c},function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"b",function(){return i});var f=r(53);var h=r(3);var D=r(15);var c=r(10);function n(e,t,r,n){var i=Object(c["m"])(r,t,e);var a=Object(c["h"])(t,n,r);var o=t.getMetersPerUnit();if(o!==undefined){a*=o}var s=e.getMetersPerUnit();if(s!==undefined){a/=s}var l=e.getExtent();if(!l||Object(h["f"])(l,i)){var u=Object(c["h"])(e,a,i)/a;if(isFinite(u)&&u>0){a/=u}}return a}function P(e,t,r,n){var i=r-e;var a=n-t;var o=Math.sqrt(i*i+a*a);return[Math.round(r+i/o),Math.round(n+a/o)]}function i(e,t,T,E,r,M,n,i,a,s,o){var A=Object(f["a"])(Math.round(T*e),Math.round(T*t));if(a.length===0){return A.canvas}A.scale(T,T);var k=Object(h["j"])();a.forEach(function(e,t,r){Object(h["q"])(k,e.extent)});var l=Object(h["E"])(k);var u=Object(h["A"])(k);var j=Object(f["a"])(Math.round(T*l/E),Math.round(T*u/E));var c=T/E;a.forEach(function(e,t,r){var n=e.extent[0]-k[0];var i=-(e.extent[3]-k[3]);var a=Object(h["E"])(e.extent);var o=Object(h["A"])(e.extent);j.drawImage(e.image,s,s,e.image.width-2*s,e.image.height-2*s,n*c,i*c,a*c,o*c)});var I=Object(h["C"])(n);i.getTriangles().forEach(function(e,t,r){var n=e.source;var i=e.target;var a=n[0][0],o=n[0][1];var s=n[1][0],l=n[1][1];var u=n[2][0],c=n[2][1];var f=(i[0][0]-I[0])/M;var h=-(i[0][1]-I[1])/M;var d=(i[1][0]-I[0])/M;var p=-(i[1][1]-I[1])/M;var v=(i[2][0]-I[0])/M;var g=-(i[2][1]-I[1])/M;var m=a;var _=o;a=0;o=0;s-=m;l-=_;u-=m;c-=_;var y=[[s,l,0,0,d-f],[u,c,0,0,v-f],[0,0,s,l,p-h],[0,0,u,c,g-h]];var b=Object(D["e"])(y);if(!b){return}A.save();A.beginPath();var w=(f+d+v)/3;var S=(h+p+g)/3;var C=P(w,S,f,h);var O=P(w,S,d,p);var x=P(w,S,v,g);A.moveTo(O[0],O[1]);A.lineTo(C[0],C[1]);A.lineTo(x[0],x[1]);A.clip();A.transform(b[0],b[2],b[1],b[3],f,h);A.translate(k[0]-m,k[3]-_);A.scale(E/T,-E/T);A.drawImage(j.canvas,0,0);A.restore()});if(o){A.save();A.strokeStyle="black";A.lineWidth=1;i.getTriangles().forEach(function(e,t,r){var n=e.target;var i=(n[0][0]-I[0])/M;var a=-(n[0][1]-I[1])/M;var o=(n[1][0]-I[0])/M;var s=-(n[1][1]-I[1])/M;var l=(n[2][0]-I[0])/M;var u=-(n[2][1]-I[1])/M;A.beginPath();A.moveTo(o,s);A.lineTo(i,a);A.lineTo(l,u);A.closePath();A.stroke()});A.restore()}return A.canvas}},function(e,t,r){"use strict";t["a"]={PROPERTYCHANGE:"propertychange"}},function(e,t,r){"use strict";r.d(t,"f",function(){return f});r.d(t,"a",function(){return h});r.d(t,"d",function(){return d});r.d(t,"e",function(){return p});r.d(t,"c",function(){return v});r.d(t,"b",function(){return g});var n=r(24);var i=r(40);var a=r(75);var o=r(6);var s=r(48);var l=r(37);var u=r(63);var c=r(148);Object(n["a"])("w",["ww",2],"wo","week");Object(n["a"])("W",["WW",2],"Wo","isoWeek");Object(i["a"])("week","w");Object(i["a"])("isoWeek","W");Object(a["a"])("week",5);Object(a["a"])("isoWeek",5);Object(o["a"])("w",o["d"]);Object(o["a"])("ww",o["d"],o["h"]);Object(o["a"])("W",o["d"]);Object(o["a"])("WW",o["d"],o["h"]);Object(s["c"])(["w","ww","W","WW"],function(e,t,r,n){t[n.substr(0,1)]=Object(l["a"])(e)});function f(e){return Object(c["b"])(e,this._week.dow,this._week.doy).week}var h={dow:0,doy:6};function d(){return this._week.dow}function p(){return this._week.doy}function v(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function g(e){var t=Object(c["b"])(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}},function(e,t,r){"use strict";r.d(t,"c",function(){return i});r.d(t,"d",function(){return a});r.d(t,"a",function(){return o});r.d(t,"b",function(){return s});var n=r(15);function i(e,t){if(e!==undefined){return 0}else{return undefined}}function a(e,t){if(e!==undefined){return e+t}else{return undefined}}function o(e){var r=2*Math.PI/e;return function(e,t){if(e!==undefined){e=Math.floor((e+t)/r+.5)*r;return e}else{return undefined}}}function s(e){var r=e||Object(n["i"])(5);return function(e,t){if(e!==undefined){if(Math.abs(e+t)<=r){return 0}else{return e+t}}else{return undefined}}}},function(e,t,r){"use strict";t["a"]={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"}},function(e,t,r){"use strict";var l=r(8);var i=r(3);var s=r(81);var n=r(69);var m=r(4);var u=r(33);var a=r(35);var o=r(83);var c=r(86);var f=r(31);var p=r(9);var _=r(10);var y=r(0);var h=n["a"]+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/"+"1.0.0/gmlsf.xsd";var d={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};var v=function(r){function e(e){var t=e?e:{};r.call(this,t);this.surface_=t.surface!==undefined?t.surface:false;this.curve_=t.curve!==undefined?t.curve:false;this.multiCurve_=t.multiCurve!==undefined?t.multiCurve:true;this.multiSurface_=t.multiSurface!==undefined?t.multiSurface:true;this.schemaLocation=t.schemaLocation?t.schemaLocation:h;this.hasZ=t.hasZ!==undefined?t.hasZ:false}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;e.prototype.readMultiCurve_=function e(t,r){var n=Object(y["t"])([],this.MULTICURVE_PARSERS_,t,r,this);if(n){var i=new o["a"](n);return i}else{return undefined}};e.prototype.readMultiSurface_=function e(t,r){var n=Object(y["t"])([],this.MULTISURFACE_PARSERS_,t,r,this);if(n){return new c["a"](n)}};e.prototype.curveMemberParser_=function e(t,r){Object(y["s"])(this.CURVEMEMBER_PARSERS_,t,r,this)};e.prototype.surfaceMemberParser_=function e(t,r){Object(y["s"])(this.SURFACEMEMBER_PARSERS_,t,r,this)};e.prototype.readPatch_=function e(t,r){return Object(y["t"])([null],this.PATCHES_PARSERS_,t,r,this)};e.prototype.readSegment_=function e(t,r){return Object(y["t"])([null],this.SEGMENTS_PARSERS_,t,r,this)};e.prototype.readPolygonPatch_=function e(t,r){return Object(y["t"])([null],this.FLAT_LINEAR_RINGS_PARSERS,t,r,this)};e.prototype.readLineStringSegment_=function e(t,r){return Object(y["t"])([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,r,this)};e.prototype.interiorParser_=function e(t,r){var n=Object(y["t"])(undefined,this.RING_PARSERS,t,r,this);if(n){var i=r[r.length-1];i.push(n)}};e.prototype.exteriorParser_=function e(t,r){var n=Object(y["t"])(undefined,this.RING_PARSERS,t,r,this);if(n){var i=r[r.length-1];i[0]=n}};e.prototype.readSurface_=function e(t,r){var n=Object(y["t"])([null],this.SURFACE_PARSERS_,t,r,this);if(n&&n[0]){var i=n[0];var a=[i.length];var o,s;for(o=1,s=n.length;o<s;++o){Object(l["c"])(i,n[o]);a.push(i.length)}return new f["a"](i,u["a"].XYZ,a)}else{return undefined}};e.prototype.readCurve_=function e(t,r){var n=Object(y["t"])([null],this.CURVE_PARSERS_,t,r,this);if(n){var i=new a["a"](n,u["a"].XYZ);return i}else{return undefined}};e.prototype.readEnvelope_=function e(t,r){var n=Object(y["t"])([null],this.ENVELOPE_PARSERS_,t,r,this);return Object(i["k"])(n[1][0],n[1][1],n[2][0],n[2][1])};e.prototype.readFlatPos_=function e(t,r){var n=Object(y["e"])(t,false);var i=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/;var a=[];var o;while(o=i.exec(n)){a.push(parseFloat(o[1]));n=n.substr(o[0].length)}if(n!==""){return undefined}var s=r[0];var l=s["srsName"];var u="enu";if(l){var c=Object(_["g"])(l);u=c.getAxisOrientation()}if(u==="neu"){var f,h;for(f=0,h=a.length;f<h;f+=3){var d=a[f];var p=a[f+1];a[f]=p;a[f+1]=d}}var v=a.length;if(v==2){a.push(0)}if(v===0){return undefined}return a};e.prototype.readFlatPosList_=function e(t,r){var n=Object(y["e"])(t,false).replace(/^\s*|\s*$/g,"");var i=r[0];var a=i["srsName"];var o=i["srsDimension"];var s="enu";if(a){var l=Object(_["g"])(a);s=l.getAxisOrientation()}var u=n.split(/\s+/);var c=2;if(t.getAttribute("srsDimension")){c=Object(m["g"])(t.getAttribute("srsDimension"))}else if(t.getAttribute("dimension")){c=Object(m["g"])(t.getAttribute("dimension"))}else if(t.parentNode.getAttribute("srsDimension")){c=Object(m["g"])(t.parentNode.getAttribute("srsDimension"))}else if(o){c=Object(m["g"])(o)}var f,h,d;var p=[];for(var v=0,g=u.length;v<g;v+=c){f=parseFloat(u[v]);h=parseFloat(u[v+1]);d=c===3?parseFloat(u[v+2]):0;if(s.substr(0,2)==="en"){p.push(f,h,d)}else{p.push(h,f,d)}}return p};e.prototype.writePos_=function e(t,r,n){var i=n[n.length-1];var a=i["hasZ"];var o=a?"3":"2";t.setAttribute("srsDimension",o);var s=i["srsName"];var l="enu";if(s){l=Object(_["g"])(s).getAxisOrientation()}var u=r.getCoordinates();var c;if(l.substr(0,2)==="en"){c=u[0]+" "+u[1]}else{c=u[1]+" "+u[0]}if(a){var f=u[2]||0;c+=" "+f}Object(m["n"])(t,c)};e.prototype.getCoords_=function e(t,r,n){var i="enu";if(r){i=Object(_["g"])(r).getAxisOrientation()}var a=i.substr(0,2)==="en"?t[0]+" "+t[1]:t[1]+" "+t[0];if(n){var o=t[2]||0;a+=" "+o}return a};e.prototype.writePosList_=function e(t,r,n){var i=n[n.length-1];var a=i["hasZ"];var o=a?"3":"2";t.setAttribute("srsDimension",o);var s=i["srsName"];var l=r.getCoordinates();var u=l.length;var c=new Array(u);var f;for(var h=0;h<u;++h){f=l[h];c[h]=this.getCoords_(f,s,a)}Object(m["n"])(t,c.join(" "))};e.prototype.writePoint_=function e(t,r,n){var i=n[n.length-1];var a=i["srsName"];if(a){t.setAttribute("srsName",a)}var o=Object(y["d"])(t.namespaceURI,"pos");t.appendChild(o);this.writePos_(o,r,n)};e.prototype.writeEnvelope=function e(t,r,n){var i=n[n.length-1];var a=i["srsName"];if(a){t.setAttribute("srsName",a)}var o=["lowerCorner","upperCorner"];var s=[r[0]+" "+r[1],r[2]+" "+r[3]];Object(y["u"])({node:t},this.ENVELOPE_SERIALIZERS_,y["b"],s,n,o,this)};e.prototype.writeLinearRing_=function e(t,r,n){var i=n[n.length-1];var a=i["srsName"];if(a){t.setAttribute("srsName",a)}var o=Object(y["d"])(t.namespaceURI,"posList");t.appendChild(o);this.writePosList_(o,r,n)};e.prototype.RING_NODE_FACTORY_=function e(t,r,n){var i=r[r.length-1];var a=i.node;var o=i["exteriorWritten"];if(o===undefined){i["exteriorWritten"]=true}return Object(y["d"])(a.namespaceURI,o!==undefined?"interior":"exterior")};e.prototype.writeSurfaceOrPolygon_=function e(t,r,n){var i=n[n.length-1];var a=i["hasZ"];var o=i["srsName"];if(t.nodeName!=="PolygonPatch"&&o){t.setAttribute("srsName",o)}if(t.nodeName==="Polygon"||t.nodeName==="PolygonPatch"){var s=r.getLinearRings();Object(y["u"])({node:t,hasZ:a,srsName:o},this.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,s,n,undefined,this)}else if(t.nodeName==="Surface"){var l=Object(y["d"])(t.namespaceURI,"patches");t.appendChild(l);this.writeSurfacePatches_(l,r,n)}};e.prototype.writeCurveOrLineString_=function e(t,r,n){var i=n[n.length-1];var a=i["srsName"];if(t.nodeName!=="LineStringSegment"&&a){t.setAttribute("srsName",a)}if(t.nodeName==="LineString"||t.nodeName==="LineStringSegment"){var o=Object(y["d"])(t.namespaceURI,"posList");t.appendChild(o);this.writePosList_(o,r,n)}else if(t.nodeName==="Curve"){var s=Object(y["d"])(t.namespaceURI,"segments");t.appendChild(s);this.writeCurveSegments_(s,r,n)}};e.prototype.writeMultiSurfaceOrPolygon_=function e(t,r,n){var i=n[n.length-1];var a=i["hasZ"];var o=i["srsName"];var s=i["surface"];if(o){t.setAttribute("srsName",o)}var l=r.getPolygons();Object(y["u"])({node:t,hasZ:a,srsName:o,surface:s},this.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,n,undefined,this)};e.prototype.writeMultiPoint_=function e(t,r,n){var i=n[n.length-1];var a=i["srsName"];var o=i["hasZ"];if(a){t.setAttribute("srsName",a)}var s=r.getPoints();Object(y["u"])({node:t,hasZ:o,srsName:a},this.POINTMEMBER_SERIALIZERS_,Object(y["p"])("pointMember"),s,n,undefined,this)};e.prototype.writeMultiCurveOrLineString_=function e(t,r,n){var i=n[n.length-1];var a=i["hasZ"];var o=i["srsName"];var s=i["curve"];if(o){t.setAttribute("srsName",o)}var l=r.getLineStrings();Object(y["u"])({node:t,hasZ:a,srsName:o,curve:s},this.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,n,undefined,this)};e.prototype.writeRing_=function e(t,r,n){var i=Object(y["d"])(t.namespaceURI,"LinearRing");t.appendChild(i);this.writeLinearRing_(i,r,n)};e.prototype.writeSurfaceOrPolygonMember_=function e(t,r,n){var i=this.GEOMETRY_NODE_FACTORY_(r,n);if(i){t.appendChild(i);this.writeSurfaceOrPolygon_(i,r,n)}};e.prototype.writePointMember_=function e(t,r,n){var i=Object(y["d"])(t.namespaceURI,"Point");t.appendChild(i);this.writePoint_(i,r,n)};e.prototype.writeLineStringOrCurveMember_=function e(t,r,n){var i=this.GEOMETRY_NODE_FACTORY_(r,n);if(i){t.appendChild(i);this.writeCurveOrLineString_(i,r,n)}};e.prototype.writeSurfacePatches_=function e(t,r,n){var i=Object(y["d"])(t.namespaceURI,"PolygonPatch");t.appendChild(i);this.writeSurfaceOrPolygon_(i,r,n)};e.prototype.writeCurveSegments_=function e(t,r,n){var i=Object(y["d"])(t.namespaceURI,"LineStringSegment");t.appendChild(i);this.writeCurveOrLineString_(i,r,n)};e.prototype.writeGeometryElement=function e(t,r,n){var i=n[n.length-1];var a=Object(p["a"])({},i);a["node"]=t;var o;if(Array.isArray(r)){if(i.dataProjection){o=Object(_["n"])(r,i.featureProjection,i.dataProjection)}else{o=r}}else{o=Object(s["b"])(r,true,i)}Object(y["u"])(a,this.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[o],n,undefined,this)};e.prototype.writeFeatureElement=function e(t,r,n){var i=r.getId();if(i){t.setAttribute("fid",i)}var a=n[n.length-1];var o=a["featureNS"];var s=r.getGeometryName();if(!a.serializers){a.serializers={};a.serializers[o]={}}var l=r.getProperties();var u=[];var c=[];for(var f in l){var h=l[f];if(h!==null){u.push(f);c.push(h);if(f==s||typeof h.getSimplifiedGeometry==="function"){if(!(f in a.serializers[o])){a.serializers[o][f]=Object(y["k"])(this.writeGeometryElement,this)}}else{if(!(f in a.serializers[o])){a.serializers[o][f]=Object(y["k"])(m["n"])}}}}var d=Object(p["a"])({},a);d.node=t;Object(y["u"])(d,a.serializers,Object(y["p"])(undefined,o),c,n,u)};e.prototype.writeFeatureMembers_=function e(t,r,n){var i=n[n.length-1];var a=i["featureType"];var o=i["featureNS"];var s={};s[o]={};s[o][a]=Object(y["k"])(this.writeFeatureElement,this);var l=Object(p["a"])({},i);l.node=t;Object(y["u"])(l,s,Object(y["p"])(a,o),r,n)};e.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function e(t,r,n){var i=r[r.length-1].node;return Object(y["d"])(this.namespace,d[i.nodeName])};e.prototype.GEOMETRY_NODE_FACTORY_=function e(t,r,n){var i=r[r.length-1];var a=i["multiSurface"];var o=i["surface"];var s=i["curve"];var l=i["multiCurve"];var u;if(!Array.isArray(t)){u=t.getType();if(u==="MultiPolygon"&&a===true){u="MultiSurface"}else if(u==="Polygon"&&o===true){u="Surface"}else if(u==="LineString"&&s===true){u="Curve"}else if(u==="MultiLineString"&&l===true){u="MultiCurve"}}else{u="Envelope"}return Object(y["d"])(this.namespace,u)};e.prototype.writeGeometryNode=function e(t,r){r=this.adaptOptions(r);var n=Object(y["d"])(this.namespace,"geom");var i={node:n,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};if(r){Object(p["a"])(i,r)}this.writeGeometryElement(n,t,[i]);return n};e.prototype.writeFeaturesNode=function e(t,r){r=this.adaptOptions(r);var n=Object(y["d"])(this.namespace,"featureMembers");n.setAttributeNS(y["c"],"xsi:schemaLocation",this.schemaLocation);var i={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};if(r){Object(p["a"])(i,r)}this.writeFeatureMembers_(n,t,[i]);return n};return e}(n["b"]);v.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:Object(y["n"])(v.prototype.readFlatPos_),posList:Object(y["n"])(v.prototype.readFlatPosList_)}};v.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:v.prototype.interiorParser_,exterior:v.prototype.exteriorParser_}};v.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Object(y["n"])(n["b"].prototype.readPoint),MultiPoint:Object(y["n"])(n["b"].prototype.readMultiPoint),LineString:Object(y["n"])(n["b"].prototype.readLineString),MultiLineString:Object(y["n"])(n["b"].prototype.readMultiLineString),LinearRing:Object(y["n"])(n["b"].prototype.readLinearRing),Polygon:Object(y["n"])(n["b"].prototype.readPolygon),MultiPolygon:Object(y["n"])(n["b"].prototype.readMultiPolygon),Surface:Object(y["n"])(v.prototype.readSurface_),MultiSurface:Object(y["n"])(v.prototype.readMultiSurface_),Curve:Object(y["n"])(v.prototype.readCurve_),MultiCurve:Object(y["n"])(v.prototype.readMultiCurve_),Envelope:Object(y["n"])(v.prototype.readEnvelope_)}};v.prototype.MULTICURVE_PARSERS_={"http://www.opengis.net/gml":{curveMember:Object(y["i"])(v.prototype.curveMemberParser_),curveMembers:Object(y["i"])(v.prototype.curveMemberParser_)}};v.prototype.MULTISURFACE_PARSERS_={"http://www.opengis.net/gml":{surfaceMember:Object(y["i"])(v.prototype.surfaceMemberParser_),surfaceMembers:Object(y["i"])(v.prototype.surfaceMemberParser_)}};v.prototype.CURVEMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:Object(y["i"])(n["b"].prototype.readLineString),Curve:Object(y["i"])(v.prototype.readCurve_)}};v.prototype.SURFACEMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:Object(y["i"])(n["b"].prototype.readPolygon),Surface:Object(y["i"])(v.prototype.readSurface_)}};v.prototype.SURFACE_PARSERS_={"http://www.opengis.net/gml":{patches:Object(y["n"])(v.prototype.readPatch_)}};v.prototype.CURVE_PARSERS_={"http://www.opengis.net/gml":{segments:Object(y["n"])(v.prototype.readSegment_)}};v.prototype.ENVELOPE_PARSERS_={"http://www.opengis.net/gml":{lowerCorner:Object(y["i"])(v.prototype.readFlatPosList_),upperCorner:Object(y["i"])(v.prototype.readFlatPosList_)}};v.prototype.PATCHES_PARSERS_={"http://www.opengis.net/gml":{PolygonPatch:Object(y["n"])(v.prototype.readPolygonPatch_)}};v.prototype.SEGMENTS_PARSERS_={"http://www.opengis.net/gml":{LineStringSegment:Object(y["n"])(v.prototype.readLineStringSegment_)}};v.prototype.writeFeatures;v.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml":{exterior:Object(y["k"])(v.prototype.writeRing_),interior:Object(y["k"])(v.prototype.writeRing_)}};v.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:Object(y["k"])(m["n"]),upperCorner:Object(y["k"])(m["n"])}};v.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:Object(y["k"])(v.prototype.writeSurfaceOrPolygonMember_),polygonMember:Object(y["k"])(v.prototype.writeSurfaceOrPolygonMember_)}};v.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:Object(y["k"])(v.prototype.writePointMember_)}};v.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:Object(y["k"])(v.prototype.writeLineStringOrCurveMember_),curveMember:Object(y["k"])(v.prototype.writeLineStringOrCurveMember_)}};v.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:Object(y["k"])(v.prototype.writeCurveOrLineString_),MultiCurve:Object(y["k"])(v.prototype.writeMultiCurveOrLineString_),Point:Object(y["k"])(v.prototype.writePoint_),MultiPoint:Object(y["k"])(v.prototype.writeMultiPoint_),LineString:Object(y["k"])(v.prototype.writeCurveOrLineString_),MultiLineString:Object(y["k"])(v.prototype.writeMultiCurveOrLineString_),LinearRing:Object(y["k"])(v.prototype.writeLinearRing_),Polygon:Object(y["k"])(v.prototype.writeSurfaceOrPolygon_),MultiPolygon:Object(y["k"])(v.prototype.writeMultiSurfaceOrPolygon_),Surface:Object(y["k"])(v.prototype.writeSurfaceOrPolygon_),MultiSurface:Object(y["k"])(v.prototype.writeMultiSurfaceOrPolygon_),Envelope:Object(y["k"])(v.prototype.writeEnvelope)}};t["a"]=v},function(e,U,H){"use strict";(function(i){var e=H(184);var t=H(261);var r=H(213);var a=H(154);var d=H(1);var p=H(271);var n=H(393);var o=H.n(n);var s=H(380);var l=H.n(s);var u=H(262);var c=H(263);var f=H(76);var h=H(171);var v=H(19);var g=H(259);var m=H(260);var _=H(91);var y=H(237);var b=H(218);var w=H(120);var S=H(100);var C=H(159);var O=H(62);var x=H(61);var T=H(92);var E=H(5);var M=H(8);var A=H(23);var k=H(2);var j=H(3);var I=H(14);var D=H(137);var P=H(205);var R=H(101);var L=H(28);var N=H(30);var $=H(11);var F=H(138);var G=angular.module("GmfEditingFeatureComponent",[e["a"].module.name,t["a"].module.name,r["a"].module.name,u["a"].name,c["a"].name,_["a"].module.name,b["a"].name,w["a"].name,C["a"].module.name,O["a"].module.name,T["a"].module.name]);G.run(["$templateCache",function(e){e.put("gmf/editing/editFeatureComponent",H(443))}]);G.component_=function(){return{controller:"GmfEditfeatureController as efCtrl",scope:{dirty:"=gmfEditfeatureDirty",editableTreeCtrl:"=gmfEditfeatureEditabletreectrl",map:"<gmfEditfeatureMap",state:"=gmfEditfeatureState",tolerance:"<?gmfEditfeatureTolerance",vectorLayer:"<gmfEditfeatureVector"},bindToController:true,templateUrl:"gmf/editing/editFeatureComponent"}};G.directive("gmfEditfeature",G.component_);G.Controller_=function(e,t,r,n,i,a,o,s,l,u,c,f){var h=this;this.dirty;this.editableTreeCtrl;this.map;this.state;this.tolerance;this.vectorLayer;this.element_=e;this.q_=t;this.scope_=r;this.timeout_=n;this.gettextCatalog_=i;this.gmfEditFeature_=a;this.gmfSnapping_=o;this.gmfXSDAttributes_=s;this.ngeoEventHelper_=l;this.ngeoFeatureHelper_=u;this.ngeoLayerHelper_=c;this.ngeoToolActivateMgr_=f;this.editableNode_;this.editableWMSLayer_;this.confirmDeferred_=null;this.unsavedModificationsModalShown=false;this.pending=false;this.active=true;this.createActive=false;this.createToolActivate=new x["a"](this,"createActive");this.mapSelectActive=true;this.mapSelectToolActivate=new x["a"](this,"mapSelectActive");this.feature=null;this.scope_.$watch(function(){return h.feature},this.handleFeatureChange_.bind(this));this.featureId=undefined;this.features;this.interactions_=new A["a"];this.modify_;this.modifyToolActivate;this.menu_=new y["a"]({actions:[{cls:"fas fa-arrows-alt",label:i.getString("Move"),name:"move"},{cls:"fas fa-undo fa-flip-horizontal",label:i.getString("Rotate"),name:"rotate"}]});this.menuVertex_=new y["a"]({actions:[{cls:"fa fa-trash",label:i.getString("Delete vertex"),name:"delete"}]});this.translate_;this.rotate_;this.rotateToolActivate;this.translateToolActivate;this.listenerKeys_=[];this.attributes=null;this.geomType;this.showServerError=false;this.serverErrorMessage=null;this.serverErrorType=null;this.vertexInfo_=null};G.Controller_.$inject=["$element","$q","$scope","$timeout","gettextCatalog","gmfEditFeature","gmfSnapping","gmfXSDAttributes","ngeoEventHelper","ngeoFeatureHelper","ngeoLayerHelper","ngeoToolActivateMgr"];G.Controller_.prototype.$onInit=function(){var n=this;var e=this.gettextCatalog_.getCurrentLanguage();i.datetimepicker.setLocale(e);i.datetimepicker.setDateFormatter(new p["a"]);this.dirty=this.dirty===true;this.editableNode_=this.editableTreeCtrl.node;this.features=this.vectorLayer.getSource().getFeaturesCollection();this.tolerance=this.tolerance!==undefined?this.tolerance:10;var t=a["a"].getLayer(this.editableTreeCtrl);d["a"].assert(t instanceof R["a"]||t instanceof L["a"]);this.editableWMSLayer_=t;this.modify_=new P["a"]({deleteCondition:f["a"].deleteCondition,features:this.features,style:this.ngeoFeatureHelper_.getVertexStyle(false)});this.interactions_.push(this.modify_);this.rotate_=new g["a"]({features:this.features,style:new $["c"]({text:new F["a"]({text:"",font:"normal 18px FontAwesome",fill:new N["a"]({color:"#7a7a7a"})})})});this.interactions_.push(this.rotate_);this.translate_=new m["a"]({features:this.features,style:new $["c"]({text:new F["a"]({text:"",font:"normal 18px FontAwesome",fill:new N["a"]({color:"#7a7a7a"})})})});this.interactions_.push(this.translate_);this.initializeInteractions_();this.modifyToolActivate=new x["a"](this.modify_,"active");this.rotateToolActivate=new x["a"](this.rotate_,"active");this.translateToolActivate=new x["a"](this.translate_,"active");this.map.addOverlay(this.menu_);this.map.addOverlay(this.menuVertex_);this.scope_.$watch(function(){return n.createActive},function(e,t){if(e){n.gmfSnapping_.ensureSnapInteractionsOnTop()}});this.scope_.$on("$destroy",this.handleDestroy_.bind(this));var r=E["c"](this);this.ngeoEventHelper_.addListenerKey(r,k["a"](this.features,"add",this.handleFeatureAdd_,this));this.scope_.$watch(function(){return n.mapSelectActive},this.handleMapSelectActiveChange_.bind(this));this.scope_.$watch(function(){return n.state},function(e,t){var r=G.State;if(e===r.STOP_EDITING_PENDING){n.confirmCancel().then(function(){n.state=r.STOP_EDITING_EXECUTE})}else if(e===r.DEACTIVATE_PENDING){n.confirmCancel().then(function(){n.state=r.DEACTIVATE_EXECUTE})}});this.scope_.$watch(function(){return n.unsavedModificationsModalShown},function(e,t){if(t&&!e){n.state=G.State.IDLE}});this.gmfXSDAttributes_.getAttributes(this.editableNode_.id).then(this.setAttributes_.bind(this));this.toggle_(true)};G.Controller_.prototype.save=function(){var t=this;d["a"].assert(this.attributes);var e=this.feature.clone();e.setId(this.feature.getId());var r=this.featureId;this.pending=true;var n=new p["a"];for(var i=this.attributes,a=Array.isArray(i),o=0,i=a?i:i[Symbol.iterator]();;){var s;if(a){if(o>=i.length)break;s=i[o++]}else{o=i.next();if(o.done)break;s=o.value}var l=s;if(l.format){if(this.feature.get(l.name)){var u=this.feature.get(l.name);d["a"].assertString(u);var c=n.parseDate(u,l.format);var f="Y-m-d\\TH:i:s";if(l.type==="date"){f="Y-m-d"}else if(l.type==="time"){f="H:i:s"}else if(l.type==="datetime"){c.setMinutes(c.getMinutes()+c.getTimezoneOffset())}e.set(l.name,n.formatDate(c,f))}else{e.set(l.name,null)}}}var h=r?this.gmfEditFeature_.updateFeature(this.editableNode_.id,e):this.gmfEditFeature_.insertFeatures(this.editableNode_.id,[e]);h.then(function(e){t.dirty=false;t.pending=false;t.handleEditFeature_(e);t.gmfSnapping_.refresh()},function(e){t.showServerError=true;t.pending=false;t.serverErrorType="error type : "+e.data["error_type"];t.serverErrorMessage="error message : "+e.data["message"]})};G.Controller_.prototype.cancel=function(){this.dirty=false;this.feature=null;this.features.clear();this.menu_.close();this.menuVertex_.close();this.unsavedModificationsModalShown=false};G.Controller_.prototype.confirmCancel=function(){var e=this;return this.checkForModifications_().then(function(){e.cancel()})};G.Controller_.prototype.checkForModifications_=function(e){this.confirmDeferred_=this.q_.defer();if(this.feature&&this.dirty){this.unsavedModificationsModalShown=true;if(e){this.scope_.$apply()}}else{this.confirmDeferred_.resolve()}return this.confirmDeferred_.promise};G.Controller_.prototype.continueWithoutSaving=function(){this.cancel();this.confirmDeferred_.resolve()};G.Controller_.prototype.delete=function(){var t=this;var e=this.gettextCatalog_.getString("Do you really want to delete the selected feature?");if(confirm(e)){this.pending=true;this.gmfEditFeature_.deleteFeature(this.editableNode_.id,this.feature).then(function(e){t.dirty=false;t.pending=false;t.ngeoLayerHelper_.refreshWMSLayer(t.editableWMSLayer_);t.cancel()},function(e){t.showServerError=true;t.pending=false;t.serverErrorType="error type : "+e.data["error_type"];t.serverErrorMessage="error message : "+e.data["message"]})}};G.Controller_.prototype.submit=function(){var e=this;this.timeout_(function(){e.element_.find('input[type="submit"]').click()},0)};G.Controller_.prototype.handleEditFeature_=function(e){var t=(new D["a"]).readFeatures(e.data);if(t.length){this.feature.setId(t[0].getId());this.ngeoLayerHelper_.refreshWMSLayer(this.editableWMSLayer_)}if(this.confirmDeferred_){this.confirmDeferred_.resolve()}};G.Controller_.prototype.setAttributes_=function(e){this.attributes=e;for(var t=e,r=Array.isArray(t),n=0,t=r?t:t[Symbol.iterator]();;){var i;if(r){if(n>=t.length)break;i=t[n++]}else{n=t.next();if(n.done)break;i=n.value}var a=i;if(a.type=="date"){a.format="Y-m-d";a.mask="9999-19-39"}else if(a.type=="time"){a.format="H:i";a.mask="29:59"}else if(a.type=="datetime"){a.format="Y-m-d H:i";a.mask="9999-19-39 29:59"}}var o=h["a"].getGeometryAttribute(this.attributes);if(o&&o.geomType){this.geomType=o.geomType}};G.Controller_.prototype.handleFeatureAdd_=function(c){var f=this;this.feature=null;this.timeout_(function(){d["a"].assert(f.attributes);var e=c.element;d["a"].assertInstanceof(e,I["a"]);var t=new p["a"];for(var r=f.attributes,n=Array.isArray(r),i=0,r=n?r:r[Symbol.iterator]();;){var a;if(n){if(i>=r.length)break;a=r[i++]}else{i=r.next();if(i.done)break;a=i.value}var o=a;if(o.format){if(e.get(o.name)){var s=void 0;if(o.type==="datetime"){s=new Date(e.get(o.name));s.setMinutes(s.getMinutes()-s.getTimezoneOffset())}else{var l="";if(o.type==="date"){l="Y-m-d"}else if(o.type==="time"){l="H:i:s"}var u=e.get(o.name);d["a"].assertString(u);s=t.parseDate(u,l)}e.set(o.name,t.formatDate(s,o.format))}else{e.set(o.name,null)}}}f.feature=e;f.createActive=false;if(!e.getId()){f.dirty=true}f.scope_.$apply()},0)};G.Controller_.prototype.toggle_=function(e){var t=this.listenerKeys_;var r=["create-",E["c"](this)].join("-");var n=["other-",E["c"](this)].join("-");var i=this.ngeoToolActivateMgr_;if(e){t.push(k["a"](this.menu_,"actionclick",this.handleMenuActionClick_,this));t.push(k["a"](this.menuVertex_,"actionclick",this.handleMenuVertexActionClick_,this));t.push(k["a"](this.translate_,"translateend",this.handleTranslateEnd_,this));t.push(k["a"](this.rotate_,"rotateend",this.handleRotateEnd_,this));i.registerTool(r,this.createToolActivate,false);i.registerTool(r,this.mapSelectToolActivate,true);i.registerTool(n,this.createToolActivate,false);i.registerTool(n,this.modifyToolActivate,true);i.registerTool(n,this.translateToolActivate,false);i.registerTool(n,this.rotateToolActivate,false)}else{t.forEach(k["e"]);t.length=0;i.unregisterTool(r,this.createToolActivate);i.unregisterTool(r,this.mapSelectToolActivate);i.unregisterTool(n,this.createToolActivate);i.unregisterTool(n,this.modifyToolActivate);i.unregisterTool(n,this.translateToolActivate);i.unregisterTool(n,this.rotateToolActivate);this.createActive=false;this.cancel()}this.modify_.setActive(e);this.mapSelectActive=e;this.editableTreeCtrl.properties["editing"]=e};G.Controller_.prototype.handleMapSelectActiveChange_=function(e){var t=this.map.getViewport();d["a"].assertElement(t);if(e){k["a"](this.map,"click",this.handleMapClick_,this);k["a"](t,"contextmenu",this.handleMapContextMenu_,this)}else{k["c"](this.map,"click",this.handleMapClick_,this);k["c"](t,"contextmenu",this.handleMapContextMenu_,this)}};G.Controller_.prototype.handleMapClick_=function(e){var a=this;var o=e.coordinate;var t=e.pixel;var r=this.map.forEachFeatureAtPixel(t,function(e){var t=false;if(M["f"](a.features.getArray(),e)){t=e}return t},{hitTolerance:5});if(r){return}this.checkForModifications_(true).then(function(){var e=a.map;var t=e.getView();var r=t.getResolution();var n=r*a.tolerance;var i=j["c"]([o[0],o[1],o[0],o[1]],n);a.gmfEditFeature_.getFeaturesInExtent([a.editableNode_.id],i).then(a.handleGetFeatures_.bind(a));a.cancel();a.pending=true})};G.Controller_.prototype.handleMapContextMenu_=function(e){var r=this;var t=this.map.getEventPixel(e);var n=this.map.getCoordinateFromPixel(t);var i=this.map.forEachFeatureAtPixel(t,function(e){var t=false;if(M["f"](r.features.getArray(),e)){t=e}return t},{hitTolerance:7});i=i?i:null;this.menu_.close();this.menuVertex_.close();this.vertexInfo_=null;if(i){var a=this.ngeoFeatureHelper_.getVertexInfoAtCoordinate(i,n,this.map.getView().getResolution());if(a){this.vertexInfo_=a;this.menuVertex_.open(n)}else{var o=this.ngeoFeatureHelper_.getType(i);if(o===v["a"].POLYGON||o===v["a"].MULTI_POLYGON||o===v["a"].LINE_STRING||o===v["a"].MULTI_LINE_STRING){this.menu_.open(n)}}e.preventDefault();e.stopPropagation()}};G.Controller_.prototype.handleGetFeatures_=function(t){var r=this;this.pending=false;this.timeout_(function(){if(t.length){var e=t[0];r.feature=e;r.features.push(e)}},0)};G.Controller_.prototype.initializeInteractions_=function(){this.interactions_.forEach(function(e){e.setActive(false);S["a"].interaction(e)})};G.Controller_.prototype.registerInteractions_=function(){var t=this;this.interactions_.forEach(function(e){t.map.addInteraction(e)})};G.Controller_.prototype.unregisterInteractions_=function(){var t=this;this.interactions_.forEach(function(e){t.map.removeInteraction(e)})};G.Controller_.prototype.handleFeatureChange_=function(e,t){var r=this;var n;if(t){k["c"](t,"propertychange",this.handleFeaturePropertyChange_,this);n=t.getGeometry();d["a"].assert(n);k["c"](n,"change",this.handleFeatureGeometryChange_,this);this.unregisterInteractions_()}if(e){this.featureId=e.getId();k["a"](e,"propertychange",this.handleFeaturePropertyChange_,this);n=e.getGeometry();d["a"].assert(n);k["a"](n,"change",this.handleFeatureGeometryChange_,this);this.registerInteractions_();this.gmfSnapping_.ensureSnapInteractionsOnTop();if(this.featureId){this.timeout_(function(){r.dirty=false;r.scope_.$apply()},0)}}else{this.featureId=undefined}};G.Controller_.prototype.handleFeaturePropertyChange_=function(){this.dirty=true};G.Controller_.prototype.handleFeatureGeometryChange_=function(){this.dirty=true;this.scope_.$apply()};G.Controller_.prototype.handleMenuActionClick_=function(e){var t=e.detail.action;switch(t){case"move":this.translate_.setActive(true);this.scope_.$apply();break;case"rotate":this.rotate_.setActive(true);this.scope_.$apply();break;default:break}};G.Controller_.prototype.handleMenuVertexActionClick_=function(e){var t=e.detail.action;switch(t){case"delete":var r=d["a"].assert(this.feature);var n=d["a"].assert(this.vertexInfo_);this.ngeoFeatureHelper_.removeVertex(r,n);this.scope_.$apply();break;default:break}};G.Controller_.prototype.handleTranslateEnd_=function(e){this.translate_.setActive(false);this.scope_.$apply()};G.Controller_.prototype.handleRotateEnd_=function(e){this.rotate_.setActive(false);this.scope_.$apply()};G.Controller_.prototype.handleDestroy_=function(){this.features.clear();this.handleFeatureChange_(null,this.feature);this.feature=null;var e=E["c"](this);this.ngeoEventHelper_.clearListenerKey(e);this.toggle_(false);this.handleMapSelectActiveChange_(false);this.unregisterInteractions_()};G.controller("GmfEditfeatureController",G.Controller_);G.State={IDLE:"idle",DEACTIVATE_EXECUTE:"deactivate_execute",DEACTIVATE_PENDING:"deactivate_pending",STOP_EDITING_EXECUTE:"stop_editing_execute",STOP_EDITING_PENDING:"stop_editing_pending"};U["a"]=G}).call(this,H(27))},function(e,t,r){"use strict";var n=r(5);var i=r(50);var a=r(98);var o=r(15);var s=r(9);var l=function(r){function e(e){r.call(this);var t=Object(s["a"])({},e);t[a["a"].OPACITY]=e.opacity!==undefined?e.opacity:1;t[a["a"].VISIBLE]=e.visible!==undefined?e.visible:true;t[a["a"].Z_INDEX]=e.zIndex;t[a["a"].MAX_RESOLUTION]=e.maxResolution!==undefined?e.maxResolution:Infinity;t[a["a"].MIN_RESOLUTION]=e.minResolution!==undefined?e.minResolution:0;this.setProperties(t);this.state_=null;this.type}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;e.prototype.getType=function e(){return this.type};e.prototype.getLayerState=function e(){var t=this.state_||{layer:this,managed:true};t.opacity=Object(o["a"])(this.getOpacity(),0,1);t.sourceState=this.getSourceState();t.visible=this.getVisible();t.extent=this.getExtent();t.zIndex=this.getZIndex()||0;t.maxResolution=this.getMaxResolution();t.minResolution=Math.max(this.getMinResolution(),0);this.state_=t;return t};e.prototype.getLayersArray=function e(t){return Object(n["b"])()};e.prototype.getLayerStatesArray=function e(t){return Object(n["b"])()};e.prototype.getExtent=function e(){return this.get(a["a"].EXTENT)};e.prototype.getMaxResolution=function e(){return this.get(a["a"].MAX_RESOLUTION)};e.prototype.getMinResolution=function e(){return this.get(a["a"].MIN_RESOLUTION)};e.prototype.getOpacity=function e(){return this.get(a["a"].OPACITY)};e.prototype.getSourceState=function e(){return Object(n["b"])()};e.prototype.getVisible=function e(){return this.get(a["a"].VISIBLE)};e.prototype.getZIndex=function e(){return this.get(a["a"].Z_INDEX)};e.prototype.setExtent=function e(t){this.set(a["a"].EXTENT,t)};e.prototype.setMaxResolution=function e(t){this.set(a["a"].MAX_RESOLUTION,t)};e.prototype.setMinResolution=function e(t){this.set(a["a"].MIN_RESOLUTION,t)};e.prototype.setOpacity=function e(t){this.set(a["a"].OPACITY,t)};e.prototype.setVisible=function e(t){this.set(a["a"].VISIBLE,t)};e.prototype.setZIndex=function e(t){this.set(a["a"].Z_INDEX,t)};return e}(i["a"]);t["a"]=l},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function i(e,t,r){if(t)n(e.prototype,t);if(r)n(e,r);return e}var a=function(){function e(e){this.inRange_=e.inRange!==false;this.visible_=e.visible===true;this.attributes=e.attributes||null;this.id_=e.id;this.identifierAttribute_=e.identifierAttribute;this.maxResolution_=e.maxResolution;this.minResolution_=e.minResolution;this.name_=e.name}var t=e.prototype;t.getAttributes=function e(){return this.attributes};t.setAttributes=function e(t){this.attributes=t};i(e,[{key:"inRange",get:function e(){return this.inRange_},set:function e(t){this.inRange_=t}},{key:"visible",get:function e(){return this.visible_},set:function e(t){this.visible_=t}},{key:"id",get:function e(){return this.id_}},{key:"identifierAttribute",get:function e(){return this.identifierAttribute_}},{key:"maxResolution",get:function e(){return this.maxResolution_}},{key:"minResolution",get:function e(){return this.minResolution_}},{key:"name",get:function e(){return this.name_}},{key:"queryable",get:function e(){return false}},{key:"supportsDynamicInRange",get:function e(){return this.maxResolution!==null||this.minResolution!==null}}]);return e}();t["a"]=a},function(e,t,r){"use strict";var u=r(5);var n=r(255);var i=r.n(n);var a=r(3);var o=r(9);var s=function e(t){this.rbush_=i()(t,undefined);this.items_={}};s.prototype.insert=function e(t,r){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:r};this.rbush_.insert(n);this.items_[Object(u["c"])(r)]=n};s.prototype.load=function e(t,r){var n=new Array(r.length);for(var i=0,a=r.length;i<a;i++){var o=t[i];var s=r[i];var l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:s};n[i]=l;this.items_[Object(u["c"])(s)]=l}this.rbush_.load(n)};s.prototype.remove=function e(t){var r=Object(u["c"])(t);var n=this.items_[r];delete this.items_[r];return this.rbush_.remove(n)!==null};s.prototype.update=function e(t,r){var n=this.items_[Object(u["c"])(r)];var i=[n.minX,n.minY,n.maxX,n.maxY];if(!Object(a["p"])(i,t)){this.remove(r);this.insert(t,r)}};s.prototype.getAll=function e(){var t=this.rbush_.all();return t.map(function(e){return e.value})};s.prototype.getInExtent=function e(t){var r={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};var n=this.rbush_.search(r);return n.map(function(e){return e.value})};s.prototype.forEach=function e(t,r){return this.forEach_(this.getAll(),t,r)};s.prototype.forEachInExtent=function e(t,r,n){return this.forEach_(this.getInExtent(t),r,n)};s.prototype.forEach_=function e(t,r,n){var i;for(var a=0,o=t.length;a<o;a++){i=r.call(n,t[a]);if(i){return i}}return i};s.prototype.isEmpty=function e(){return Object(o["d"])(this.items_)};s.prototype.clear=function e(){this.rbush_.clear();this.items_={}};s.prototype.getExtent=function e(t){var r=this.rbush_.toJSON();return Object(a["k"])(r.minX,r.minY,r.maxX,r.maxY,t)};s.prototype.concat=function e(t){this.rbush_.load(t.rbush_.all());for(var r in t.items_){this.items_[r]=t.items_[r]}};t["a"]=s},function(r,e,t){(function(xe){
/**!
 * @fileOverview Kickass library to create and place poppers near their reference elements.
 * @version 1.14.4
 * @license
 * Copyright (c) 2016 Federico Zivolo and contributors
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
(function(e,t){true?r.exports=t():undefined})(this,function(){"use strict";var e=typeof window!=="undefined"&&typeof document!=="undefined";var t=["Edge","Trident","Firefox"];var r=0;for(var n=0;n<t.length;n+=1){if(e&&navigator.userAgent.indexOf(t[n])>=0){r=1;break}}function i(e){var t=false;return function(){if(t){return}t=true;window.Promise.resolve().then(function(){t=false;e()})}}function a(e){var t=false;return function(){if(!t){t=true;setTimeout(function(){t=false;e()},r)}}}var o=e&&window.Promise;var s=o?i:a;function l(e){var t={};return e&&t.toString.call(e)==="[object Function]"}function b(e,t){if(e.nodeType!==1){return[]}var r=getComputedStyle(e,null);return t?r[t]:r}function d(e){if(e.nodeName==="HTML"){return e}return e.parentNode||e.host}function p(e){if(!e){return document.body}switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var t=b(e),r=t.overflow,n=t.overflowX,i=t.overflowY;if(/(auto|scroll|overlay)/.test(r+i+n)){return e}return p(d(e))}var u=e&&!!(window.MSInputMethodContext&&document.documentMode);var c=e&&/MSIE 10/.test(navigator.userAgent);function v(e){if(e===11){return u}if(e===10){return c}return u||c}function y(e){if(!e){return document.documentElement}var t=v(10)?document.body:null;var r=e.offsetParent;while(r===t&&e.nextElementSibling){r=(e=e.nextElementSibling).offsetParent}var n=r&&r.nodeName;if(!n||n==="BODY"||n==="HTML"){return e?e.ownerDocument.documentElement:document.documentElement}if(["TD","TABLE"].indexOf(r.nodeName)!==-1&&b(r,"position")==="static"){return y(r)}return r}function f(e){var t=e.nodeName;if(t==="BODY"){return false}return t==="HTML"||y(e.firstElementChild)===e}function h(e){if(e.parentNode!==null){return h(e.parentNode)}return e}function g(e,t){if(!e||!e.nodeType||!t||!t.nodeType){return document.documentElement}var r=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING;var n=r?e:t;var i=r?t:e;var a=document.createRange();a.setStart(n,0);a.setEnd(i,0);var o=a.commonAncestorContainer;if(e!==o&&t!==o||n.contains(i)){if(f(o)){return o}return y(o)}var s=h(e);if(s.host){return g(s.host,t)}else{return g(e,h(t).host)}}function m(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"top";var r=t==="top"?"scrollTop":"scrollLeft";var n=e.nodeName;if(n==="BODY"||n==="HTML"){var i=e.ownerDocument.documentElement;var a=e.ownerDocument.scrollingElement||i;return a[r]}return e[r]}function _(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var n=m(t,"top");var i=m(t,"left");var a=r?-1:1;e.top+=n*a;e.bottom+=n*a;e.left+=i*a;e.right+=i*a;return e}function w(e,t){var r=t==="x"?"Left":"Top";var n=r==="Left"?"Right":"Bottom";return parseFloat(e["border"+r+"Width"],10)+parseFloat(e["border"+n+"Width"],10)}function S(e,t,r,n){return Math.max(t["offset"+e],t["scroll"+e],r["client"+e],r["offset"+e],r["scroll"+e],v(10)?parseInt(r["offset"+e])+parseInt(n["margin"+(e==="Height"?"Top":"Left")])+parseInt(n["margin"+(e==="Height"?"Bottom":"Right")]):0)}function C(e){var t=e.body;var r=e.documentElement;var n=v(10)&&getComputedStyle(r);return{height:S("Height",t,r,n),width:S("Width",t,r,n)}}var O=function e(t,r){if(!(t instanceof r)){throw new TypeError("Cannot call a class as a function")}};var x=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(e,t,r){if(t)n(e.prototype,t);if(r)n(e,r);return e}}();var T=function e(t,r,n){if(r in t){Object.defineProperty(t,r,{value:n,enumerable:true,configurable:true,writable:true})}else{t[r]=n}return t};var E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};function M(e){return E({},e,{right:e.left+e.width,bottom:e.top+e.height})}function A(e){var t={};try{if(v(10)){t=e.getBoundingClientRect();var r=m(e,"top");var n=m(e,"left");t.top+=r;t.left+=n;t.bottom+=r;t.right+=n}else{t=e.getBoundingClientRect()}}catch(e){}var i={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top};var a=e.nodeName==="HTML"?C(e.ownerDocument):{};var o=a.width||e.clientWidth||i.right-i.left;var s=a.height||e.clientHeight||i.bottom-i.top;var l=e.offsetWidth-o;var u=e.offsetHeight-s;if(l||u){var c=b(e);l-=w(c,"x");u-=w(c,"y");i.width-=l;i.height-=u}return M(i)}function k(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var n=v(10);var i=t.nodeName==="HTML";var a=A(e);var o=A(t);var s=p(e);var l=b(t);var u=parseFloat(l.borderTopWidth,10);var c=parseFloat(l.borderLeftWidth,10);if(r&&i){o.top=Math.max(o.top,0);o.left=Math.max(o.left,0)}var f=M({top:a.top-o.top-u,left:a.left-o.left-c,width:a.width,height:a.height});f.marginTop=0;f.marginLeft=0;if(!n&&i){var h=parseFloat(l.marginTop,10);var d=parseFloat(l.marginLeft,10);f.top-=u-h;f.bottom-=u-h;f.left-=c-d;f.right-=c-d;f.marginTop=h;f.marginLeft=d}if(n&&!r?t.contains(s):t===s&&s.nodeName!=="BODY"){f=_(f,t)}return f}function j(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var r=e.ownerDocument.documentElement;var n=k(e,r);var i=Math.max(r.clientWidth,window.innerWidth||0);var a=Math.max(r.clientHeight,window.innerHeight||0);var o=!t?m(r):0;var s=!t?m(r,"left"):0;var l={top:o-n.top+n.marginTop,left:s-n.left+n.marginLeft,width:i,height:a};return M(l)}function I(e){var t=e.nodeName;if(t==="BODY"||t==="HTML"){return false}if(b(e,"position")==="fixed"){return true}return I(d(e))}function D(e){if(!e||!e.parentElement||v()){return document.documentElement}var t=e.parentElement;while(t&&b(t,"transform")==="none"){t=t.parentElement}return t||document.documentElement}function P(e,t,r,n){var i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;var a={top:0,left:0};var o=i?D(e):g(e,t);if(n==="viewport"){a=j(o,i)}else{var s=void 0;if(n==="scrollParent"){s=p(d(t));if(s.nodeName==="BODY"){s=e.ownerDocument.documentElement}}else if(n==="window"){s=e.ownerDocument.documentElement}else{s=n}var l=k(s,o,i);if(s.nodeName==="HTML"&&!I(o)){var u=C(e.ownerDocument),c=u.height,f=u.width;a.top+=l.top-l.marginTop;a.bottom=c+l.top;a.left+=l.left-l.marginLeft;a.right=f+l.left}else{a=l}}r=r||0;var h=typeof r==="number";a.left+=h?r:r.left||0;a.top+=h?r:r.top||0;a.right-=h?r:r.right||0;a.bottom-=h?r:r.bottom||0;return a}function R(e){var t=e.width,r=e.height;return t*r}function L(e,t,n,r,i){var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;if(e.indexOf("auto")===-1){return e}var o=P(n,r,a,i);var s={top:{width:o.width,height:t.top-o.top},right:{width:o.right-t.right,height:o.height},bottom:{width:o.width,height:o.bottom-t.bottom},left:{width:t.left-o.left,height:o.height}};var l=Object.keys(s).map(function(e){return E({key:e},s[e],{area:R(s[e])})}).sort(function(e,t){return t.area-e.area});var u=l.filter(function(e){var t=e.width,r=e.height;return t>=n.clientWidth&&r>=n.clientHeight});var c=u.length>0?u[0].key:l[0].key;var f=e.split("-")[1];return c+(f?"-"+f:"")}function N(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var i=n?D(t):g(t,r);return k(r,i,n)}function $(e){var t=getComputedStyle(e);var r=parseFloat(t.marginTop)+parseFloat(t.marginBottom);var n=parseFloat(t.marginLeft)+parseFloat(t.marginRight);var i={width:e.offsetWidth+n,height:e.offsetHeight+r};return i}function F(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function G(e,t,r){r=r.split("-")[0];var n=$(e);var i={width:n.width,height:n.height};var a=["right","left"].indexOf(r)!==-1;var o=a?"top":"left";var s=a?"left":"top";var l=a?"height":"width";var u=!a?"height":"width";i[o]=t[o]+t[l]/2-n[l]/2;if(r===s){i[s]=t[s]-n[u]}else{i[s]=t[F(s)]}return i}function U(e,t){if(Array.prototype.find){return e.find(t)}return e.filter(t)[0]}function H(e,t,r){if(Array.prototype.findIndex){return e.findIndex(function(e){return e[t]===r})}var n=U(e,function(e){return e[t]===r});return e.indexOf(n)}function W(e,r,t){var n=t===undefined?e:e.slice(0,H(e,"name",t));n.forEach(function(e){if(e["function"]){console.warn("`modifier.function` is deprecated, use `modifier.fn`!")}var t=e["function"]||e.fn;if(e.enabled&&l(t)){r.offsets.popper=M(r.offsets.popper);r.offsets.reference=M(r.offsets.reference);r=t(r,e)}});return r}function Y(){if(this.state.isDestroyed){return}var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:false,offsets:{}};e.offsets.reference=N(this.state,this.popper,this.reference,this.options.positionFixed);e.placement=L(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding);e.originalPlacement=e.placement;e.positionFixed=this.options.positionFixed;e.offsets.popper=G(this.popper,e.offsets.reference,e.placement);e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute";e=W(this.modifiers,e);if(!this.state.isCreated){this.state.isCreated=true;this.options.onCreate(e)}else{this.options.onUpdate(e)}}function V(e,n){return e.some(function(e){var t=e.name,r=e.enabled;return r&&t===n})}function q(e){var t=[false,"ms","Webkit","Moz","O"];var r=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0;n<t.length;n++){var i=t[n];var a=i?""+i+r:e;if(typeof document.body.style[a]!=="undefined"){return a}}return null}function z(){this.state.isDestroyed=true;if(V(this.modifiers,"applyStyle")){this.popper.removeAttribute("x-placement");this.popper.style.position="";this.popper.style.top="";this.popper.style.left="";this.popper.style.right="";this.popper.style.bottom="";this.popper.style.willChange="";this.popper.style[q("transform")]=""}this.disableEventListeners();if(this.options.removeOnDestroy){this.popper.parentNode.removeChild(this.popper)}return this}function B(e){var t=e.ownerDocument;return t?t.defaultView:window}function K(e,t,r,n){var i=e.nodeName==="BODY";var a=i?e.ownerDocument.defaultView:e;a.addEventListener(t,r,{passive:true});if(!i){K(p(a.parentNode),t,r,n)}n.push(a)}function X(e,t,r,n){r.updateBound=n;B(e).addEventListener("resize",r.updateBound,{passive:true});var i=p(e);K(i,"scroll",r.updateBound,r.scrollParents);r.scrollElement=i;r.eventsEnabled=true;return r}function Z(){if(!this.state.eventsEnabled){this.state=X(this.reference,this.options,this.state,this.scheduleUpdate)}}function Q(e,t){B(e).removeEventListener("resize",t.updateBound);t.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.updateBound)});t.updateBound=null;t.scrollParents=[];t.scrollElement=null;t.eventsEnabled=false;return t}function J(){if(this.state.eventsEnabled){cancelAnimationFrame(this.scheduleUpdate);this.state=Q(this.reference,this.state)}}function ee(e){return e!==""&&!isNaN(parseFloat(e))&&isFinite(e)}function te(r,n){Object.keys(n).forEach(function(e){var t="";if(["width","height","top","right","bottom","left"].indexOf(e)!==-1&&ee(n[e])){t="px"}r.style[e]=n[e]+t})}function re(r,n){Object.keys(n).forEach(function(e){var t=n[e];if(t!==false){r.setAttribute(e,n[e])}else{r.removeAttribute(e)}})}function ne(e){te(e.instance.popper,e.styles);re(e.instance.popper,e.attributes);if(e.arrowElement&&Object.keys(e.arrowStyles).length){te(e.arrowElement,e.arrowStyles)}return e}function ie(e,t,r,n,i){var a=N(i,t,e,r.positionFixed);var o=L(r.placement,a,t,e,r.modifiers.flip.boundariesElement,r.modifiers.flip.padding);t.setAttribute("x-placement",o);te(t,{position:r.positionFixed?"fixed":"absolute"});return r}function ae(e,t){var r=t.x,n=t.y;var i=e.offsets.popper;var a=U(e.instance.modifiers,function(e){return e.name==="applyStyle"}).gpuAcceleration;if(a!==undefined){console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!")}var o=a!==undefined?a:t.gpuAcceleration;var s=y(e.instance.popper);var l=A(s);var u={position:i.position};var c={left:Math.floor(i.left),top:Math.round(i.top),bottom:Math.round(i.bottom),right:Math.floor(i.right)};var f=r==="bottom"?"top":"bottom";var h=n==="right"?"left":"right";var d=q("transform");var p=void 0,v=void 0;if(f==="bottom"){if(s.nodeName==="HTML"){v=-s.clientHeight+c.bottom}else{v=-l.height+c.bottom}}else{v=c.top}if(h==="right"){if(s.nodeName==="HTML"){p=-s.clientWidth+c.right}else{p=-l.width+c.right}}else{p=c.left}if(o&&d){u[d]="translate3d("+p+"px, "+v+"px, 0)";u[f]=0;u[h]=0;u.willChange="transform"}else{var g=f==="bottom"?-1:1;var m=h==="right"?-1:1;u[f]=v*g;u[h]=p*m;u.willChange=f+", "+h}var _={"x-placement":e.placement};e.attributes=E({},_,e.attributes);e.styles=E({},u,e.styles);e.arrowStyles=E({},e.offsets.arrow,e.arrowStyles);return e}function oe(e,r,t){var n=U(e,function(e){var t=e.name;return t===r});var i=!!n&&e.some(function(e){return e.name===t&&e.enabled&&e.order<n.order});if(!i){var a="`"+r+"`";var o="`"+t+"`";console.warn(o+" modifier is required by "+a+" modifier in order to work, be sure to include it before "+a+"!")}return i}function se(e,t){var r;if(!oe(e.instance.modifiers,"arrow","keepTogether")){return e}var n=t.element;if(typeof n==="string"){n=e.instance.popper.querySelector(n);if(!n){return e}}else{if(!e.instance.popper.contains(n)){console.warn("WARNING: `arrow.element` must be child of its popper element!");return e}}var i=e.placement.split("-")[0];var a=e.offsets,o=a.popper,s=a.reference;var l=["left","right"].indexOf(i)!==-1;var u=l?"height":"width";var c=l?"Top":"Left";var f=c.toLowerCase();var h=l?"left":"top";var d=l?"bottom":"right";var p=$(n)[u];if(s[d]-p<o[f]){e.offsets.popper[f]-=o[f]-(s[d]-p)}if(s[f]+p>o[d]){e.offsets.popper[f]+=s[f]+p-o[d]}e.offsets.popper=M(e.offsets.popper);var v=s[f]+s[u]/2-p/2;var g=b(e.instance.popper);var m=parseFloat(g["margin"+c],10);var _=parseFloat(g["border"+c+"Width"],10);var y=v-e.offsets.popper[f]-m-_;y=Math.max(Math.min(o[u]-p,y),0);e.arrowElement=n;e.offsets.arrow=(r={},T(r,f,Math.round(y)),T(r,h,""),r);return e}function le(e){if(e==="end"){return"start"}else if(e==="start"){return"end"}return e}var ue=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"];var ce=ue.slice(3);function fe(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var r=ce.indexOf(e);var n=ce.slice(r+1).concat(ce.slice(0,r));return t?n.reverse():n}var he={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"};function de(d,p){if(V(d.instance.modifiers,"inner")){return d}if(d.flipped&&d.placement===d.originalPlacement){return d}var v=P(d.instance.popper,d.instance.reference,p.padding,p.boundariesElement,d.positionFixed);var g=d.placement.split("-")[0];var m=F(g);var _=d.placement.split("-")[1]||"";var y=[];switch(p.behavior){case he.FLIP:y=[g,m];break;case he.CLOCKWISE:y=fe(g);break;case he.COUNTERCLOCKWISE:y=fe(g,true);break;default:y=p.behavior}y.forEach(function(e,t){if(g!==e||y.length===t+1){return d}g=d.placement.split("-")[0];m=F(g);var r=d.offsets.popper;var n=d.offsets.reference;var i=Math.floor;var a=g==="left"&&i(r.right)>i(n.left)||g==="right"&&i(r.left)<i(n.right)||g==="top"&&i(r.bottom)>i(n.top)||g==="bottom"&&i(r.top)<i(n.bottom);var o=i(r.left)<i(v.left);var s=i(r.right)>i(v.right);var l=i(r.top)<i(v.top);var u=i(r.bottom)>i(v.bottom);var c=g==="left"&&o||g==="right"&&s||g==="top"&&l||g==="bottom"&&u;var f=["top","bottom"].indexOf(g)!==-1;var h=!!p.flipVariations&&(f&&_==="start"&&o||f&&_==="end"&&s||!f&&_==="start"&&l||!f&&_==="end"&&u);if(a||c||h){d.flipped=true;if(a||c){g=y[t+1]}if(h){_=le(_)}d.placement=g+(_?"-"+_:"");d.offsets.popper=E({},d.offsets.popper,G(d.instance.popper,d.offsets.reference,d.placement));d=W(d.instance.modifiers,d,"flip")}});return d}function pe(e){var t=e.offsets,r=t.popper,n=t.reference;var i=e.placement.split("-")[0];var a=Math.floor;var o=["top","bottom"].indexOf(i)!==-1;var s=o?"right":"bottom";var l=o?"left":"top";var u=o?"width":"height";if(r[s]<a(n[l])){e.offsets.popper[l]=a(n[l])-r[u]}if(r[l]>a(n[s])){e.offsets.popper[l]=a(n[s])}return e}function ve(e,t,r,n){var i=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/);var a=+i[1];var o=i[2];if(!a){return e}if(o.indexOf("%")===0){var s=void 0;switch(o){case"%p":s=r;break;case"%":case"%r":default:s=n}var l=M(s);return l[t]/100*a}else if(o==="vh"||o==="vw"){var u=void 0;if(o==="vh"){u=Math.max(document.documentElement.clientHeight,window.innerHeight||0)}else{u=Math.max(document.documentElement.clientWidth,window.innerWidth||0)}return u/100*a}else{return a}}function ge(e,i,a,t){var o=[0,0];var s=["right","left"].indexOf(t)!==-1;var r=e.split(/(\+|\-)/).map(function(e){return e.trim()});var n=r.indexOf(U(r,function(e){return e.search(/,|\s/)!==-1}));if(r[n]&&r[n].indexOf(",")===-1){console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.")}var l=/\s*,\s*|\s+/;var u=n!==-1?[r.slice(0,n).concat([r[n].split(l)[0]]),[r[n].split(l)[1]].concat(r.slice(n+1))]:[r];u=u.map(function(e,t){var r=(t===1?!s:s)?"height":"width";var n=false;return e.reduce(function(e,t){if(e[e.length-1]===""&&["+","-"].indexOf(t)!==-1){e[e.length-1]=t;n=true;return e}else if(n){e[e.length-1]+=t;n=false;return e}else{return e.concat(t)}},[]).map(function(e){return ve(e,r,i,a)})});u.forEach(function(r,n){r.forEach(function(e,t){if(ee(e)){o[n]+=e*(r[t-1]==="-"?-1:1)}})});return o}function me(e,t){var r=t.offset;var n=e.placement,i=e.offsets,a=i.popper,o=i.reference;var s=n.split("-")[0];var l=void 0;if(ee(+r)){l=[+r,0]}else{l=ge(r,a,o,s)}if(s==="left"){a.top+=l[0];a.left-=l[1]}else if(s==="right"){a.top+=l[0];a.left+=l[1]}else if(s==="top"){a.left+=l[0];a.top-=l[1]}else if(s==="bottom"){a.left+=l[0];a.top+=l[1]}e.popper=a;return e}function _e(e,i){var t=i.boundariesElement||y(e.instance.popper);if(e.instance.reference===t){t=y(t)}var r=q("transform");var n=e.instance.popper.style;var a=n.top,o=n.left,s=n[r];n.top="";n.left="";n[r]="";var l=P(e.instance.popper,e.instance.reference,i.padding,t,e.positionFixed);n.top=a;n.left=o;n[r]=s;i.boundaries=l;var u=i.priority;var c=e.offsets.popper;var f={primary:function e(t){var r=c[t];if(c[t]<l[t]&&!i.escapeWithReference){r=Math.max(c[t],l[t])}return T({},t,r)},secondary:function e(t){var r=t==="right"?"left":"top";var n=c[r];if(c[t]>l[t]&&!i.escapeWithReference){n=Math.min(c[r],l[t]-(t==="right"?c.width:c.height))}return T({},r,n)}};u.forEach(function(e){var t=["left","top"].indexOf(e)!==-1?"primary":"secondary";c=E({},c,f[t](e))});e.offsets.popper=c;return e}function ye(e){var t=e.placement;var r=t.split("-")[0];var n=t.split("-")[1];if(n){var i=e.offsets,a=i.reference,o=i.popper;var s=["bottom","top"].indexOf(r)!==-1;var l=s?"left":"top";var u=s?"width":"height";var c={start:T({},l,a[l]),end:T({},l,a[l]+a[u]-o[u])};e.offsets.popper=E({},o,c[n])}return e}function be(e){if(!oe(e.instance.modifiers,"hide","preventOverflow")){return e}var t=e.offsets.reference;var r=U(e.instance.modifiers,function(e){return e.name==="preventOverflow"}).boundaries;if(t.bottom<r.top||t.left>r.right||t.top>r.bottom||t.right<r.left){if(e.hide===true){return e}e.hide=true;e.attributes["x-out-of-boundaries"]=""}else{if(e.hide===false){return e}e.hide=false;e.attributes["x-out-of-boundaries"]=false}return e}function we(e){var t=e.placement;var r=t.split("-")[0];var n=e.offsets,i=n.popper,a=n.reference;var o=["left","right"].indexOf(r)!==-1;var s=["top","left"].indexOf(r)===-1;i[o?"left":"top"]=a[r]-(s?i[o?"width":"height"]:0);e.placement=F(t);e.offsets.popper=M(i);return e}var Se={shift:{order:100,enabled:true,fn:ye},offset:{order:200,enabled:true,fn:me,offset:0},preventOverflow:{order:300,enabled:true,fn:_e,priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:true,fn:pe},arrow:{order:500,enabled:true,fn:se,element:"[x-arrow]"},flip:{order:600,enabled:true,fn:de,behavior:"flip",padding:5,boundariesElement:"viewport"},inner:{order:700,enabled:false,fn:we},hide:{order:800,enabled:true,fn:be},computeStyle:{order:850,enabled:true,fn:ae,gpuAcceleration:true,x:"bottom",y:"right"},applyStyle:{order:900,enabled:true,fn:ne,onLoad:ie,gpuAcceleration:undefined}};var Ce={placement:"bottom",positionFixed:false,eventsEnabled:true,removeOnDestroy:false,onCreate:function e(){},onUpdate:function e(){},modifiers:Se};var Oe=function(){function a(e,t){var r=this;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};O(this,a);this.scheduleUpdate=function(){return requestAnimationFrame(r.update)};this.update=s(this.update.bind(this));this.options=E({},a.Defaults,n);this.state={isDestroyed:false,isCreated:false,scrollParents:[]};this.reference=e&&e.jquery?e[0]:e;this.popper=t&&t.jquery?t[0]:t;this.options.modifiers={};Object.keys(E({},a.Defaults.modifiers,n.modifiers)).forEach(function(e){r.options.modifiers[e]=E({},a.Defaults.modifiers[e]||{},n.modifiers?n.modifiers[e]:{})});this.modifiers=Object.keys(this.options.modifiers).map(function(e){return E({name:e},r.options.modifiers[e])}).sort(function(e,t){return e.order-t.order});this.modifiers.forEach(function(e){if(e.enabled&&l(e.onLoad)){e.onLoad(r.reference,r.popper,r.options,e,r.state)}});this.update();var i=this.options.eventsEnabled;if(i){this.enableEventListeners()}this.state.eventsEnabled=i}x(a,[{key:"update",value:function e(){return Y.call(this)}},{key:"destroy",value:function e(){return z.call(this)}},{key:"enableEventListeners",value:function e(){return Z.call(this)}},{key:"disableEventListeners",value:function e(){return J.call(this)}}]);return a}();Oe.Utils=(typeof window!=="undefined"?window:xe).PopperUtils;Oe.placements=ue;Oe.Defaults=Ce;return Oe})}).call(this,t(274))},function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n="http://www.w3.org/1999/xlink";function i(e){return e.getAttributeNS(n,"href")}},function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"b",function(){return l});r.d(t,"d",function(){return i});r.d(t,"c",function(){return c});var u=r(25);var o=r(15);var s=r(123);function a(r,i){var a=/\{z\}/g;var o=/\{x\}/g;var s=/\{y\}/g;var l=/\{-y\}/g;return function(n,e,t){if(!n){return undefined}else{return r.replace(a,n[0].toString()).replace(o,n[1].toString()).replace(s,function(){var e=-n[2]-1;return e.toString()}).replace(l,function(){var e=n[0];var t=i.getFullTileRange(e);Object(u["a"])(t,55);var r=t.getHeight()+n[2];return r.toString()})}}}function n(e,t){var r=e.length;var n=new Array(r);for(var i=0;i<r;++i){n[i]=a(e[i],t)}return l(n)}function l(a){if(a.length===1){return a[0]}return function(e,t,r){if(!e){return undefined}else{var n=Object(s["e"])(e);var i=Object(o["d"])(n,a.length);return a[i](e,t,r)}}}function i(e,t,r){return undefined}function c(e){var t=[];var r=/\{([a-z])-([a-z])\}/.exec(e);if(r){var n=r[1].charCodeAt(0);var i=r[2].charCodeAt(0);var a;for(a=n;a<=i;++a){t.push(e.replace(r[0],String.fromCharCode(a)))}return t}r=r=/\{(\d+)-(\d+)\}/.exec(e);if(r){var o=parseInt(r[2],10);for(var s=parseInt(r[1],10);s<=o;s++){t.push(e.replace(r[0],s.toString()))}return t}t.push(e);return t}},function(e,t,r){"use strict";var n=r(42);var i=r(52);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function o(e,t,r){if(t)a(e.prototype,t);if(r)a(e,r);return e}function s(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}var l=function(r){s(e,r);function e(e){var t;e.operator=i["a"].OperatorType.EQUAL_TO;e.type=n["a"].SELECT;t=r.call(this,e)||this;t.choices_=e.choices;return t}o(e,[{key:"choices",get:function e(){return this.choices_}},{key:"selectedChoices",get:function e(){var t;if(this.expression){var r=String(this.expression);t=r.split(",")}else{t=[]}return t}}]);return e}(i["a"]);t["a"]=l},function(e,r,t){(function(e,t){true?t(r):undefined})(this,function(t){"use strict";function s(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function l(e){return e=s(Math.abs(e)),e?e[1]:NaN}function r(s,l){return function(e,t){var r=e.length,n=[],i=0,a=s[0],o=0;while(r>0&&a>0){if(o+a+1>t)a=Math.max(1,t-o);n.push(e.substring(r-=a,r+a));if((o+=a+1)>t)break;a=s[i=(i+1)%s.length]}return n.reverse().join(l)}}function a(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}var n=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function x(e){return new i(e)}x.prototype=i.prototype;function i(e){if(!(t=n.exec(e)))throw new Error("invalid format: "+e);var t;this.fill=t[1]||" ";this.align=t[2]||">";this.sign=t[3]||"-";this.symbol=t[4]||"";this.zero=!!t[5];this.width=t[6]&&+t[6];this.comma=!!t[7];this.precision=t[8]&&+t[8].slice(1);this.trim=!!t[9];this.type=t[10]||""}i.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width==null?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision==null?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function T(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r){switch(e[r]){case".":n=i=r;break;case"0":if(n===0)n=r;i=r;break;default:if(n>0){if(!+e[r])break e;n=0}break}}return n>0?e.slice(0,n)+e.slice(i+1):e}var E;function e(e,t){var r=s(e,t);if(!r)return e+"";var n=r[0],i=r[1],a=i-(E=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=n.length;return a===o?n:a>o?n+new Array(a-o+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+s(e,Math.max(0,t+a-1))[0]}function o(e,t){var r=s(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}var M={"%":function e(t,r){return(t*100).toFixed(r)},b:function e(t){return Math.round(t).toString(2)},c:function e(t){return t+""},d:function e(t){return Math.round(t).toString(10)},e:function e(t,r){return t.toExponential(r)},f:function e(t,r){return t.toFixed(r)},g:function e(t,r){return t.toPrecision(r)},o:function e(t){return Math.round(t).toString(8)},p:function e(t,r){return o(t*100,r)},r:o,s:e,X:function e(t){return Math.round(t).toString(16).toUpperCase()},x:function e(t){return Math.round(t).toString(16)}};function u(e){return e}var A=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function c(e){var S=e.grouping&&e.thousands?r(e.grouping,e.thousands):u,n=e.currency,C=e.decimal,O=e.numerals?a(e.numerals):u,i=e.percent||"%";function o(e){e=x(e);var u=e.fill,c=e.align,f=e.sign,t=e.symbol,h=e.zero,d=e.width,p=e.comma,v=e.precision,g=e.trim,m=e.type;if(m==="n")p=true,m="g";else if(!M[m])v==null&&(v=12),g=true,m="g";if(h||u==="0"&&c==="=")h=true,u="0",c="=";var _=t==="$"?n[0]:t==="#"&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",y=t==="$"?n[1]:/[%p]/.test(m)?i:"";var b=M[m],w=/[defgprs%]/.test(m);v=v==null?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function r(e){var t=_,r=y,n,i,a;if(m==="c"){r=b(e)+r;e=""}else{e=+e;var o=e<0;e=b(Math.abs(e),v);if(g)e=T(e);if(o&&+e===0)o=false;t=(o?f==="("?f:"-":f==="-"||f==="("?"":f)+t;r=(m==="s"?A[8+E/3]:"")+r+(o&&f==="("?")":"");if(w){n=-1,i=e.length;while(++n<i){if(a=e.charCodeAt(n),48>a||a>57){r=(a===46?C+e.slice(n+1):e.slice(n))+r;e=e.slice(0,n);break}}}}if(p&&!h)e=S(e,Infinity);var s=t.length+e.length+r.length,l=s<d?new Array(d-s+1).join(u):"";if(p&&h)e=S(l+e,l.length?d-r.length:Infinity),l="";switch(c){case"<":e=t+e+r+l;break;case"=":e=t+l+e+r;break;case"^":e=l.slice(0,s=l.length>>1)+t+e+r+l.slice(s);break;default:e=l+t+e+r;break}return O(e)}r.toString=function(){return e+""};return r}function t(e,t){var r=o((e=x(e),e.type="f",e)),n=Math.max(-8,Math.min(8,Math.floor(l(t)/3)))*3,i=Math.pow(10,-n),a=A[8+n/3];return function(e){return r(i*e)+a}}return{format:o,formatPrefix:t}}var f;h({decimal:".",thousands:",",grouping:[3],currency:["$",""]});function h(e){f=c(e);t.format=f.format;t.formatPrefix=f.formatPrefix;return f}function d(e){return Math.max(0,-l(Math.abs(e)))}function p(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(l(t)/3)))*3-l(Math.abs(e)))}function v(e,t){e=Math.abs(e),t=Math.abs(t)-e;return Math.max(0,l(t)-l(e))+1}t.formatDefaultLocale=h;t.formatLocale=c;t.formatSpecifier=x;t.precisionFixed=d;t.precisionPrefix=p;t.precisionRound=v;Object.defineProperty(t,"__esModule",{value:true})})},function(e,t,r){"use strict";var w=r(5);var i=r(23);var a=r(87);var o=r(14);var s=r(46);var l=r(8);var S=r(39);var u=r(2);var n=r(71);var c=r(12);var f=r(58);var C=r(3);var O=r(7);var h=r(21);var d=r(54);var p=r(64);var v=r(65);var g=r(147);var m=r(199);var _=r(11);var y=0;var x=1;var b={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};var T=function(n){function e(e,t,r){n.call(this,e);this.features=t;this.mapBrowserEvent=r}if(n)e.__proto__=n;e.prototype=Object.create(n&&n.prototype);e.prototype.constructor=e;return e}(n["a"]);var E=function(n){function e(e){n.call(this,e);this.condition_=e.condition?e.condition:f["i"];this.defaultDeleteCondition_=function(e){return Object(f["a"])(e)&&Object(f["k"])(e)};this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_;this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:f["c"];this.vertexFeature_=null;this.vertexSegments_=null;this.lastPixel_=[0,0];this.ignoreNextSingleClick_=false;this.modified_=false;this.rBush_=new m["a"];this.pixelTolerance_=e.pixelTolerance!==undefined?e.pixelTolerance:10;this.snappedToVertex_=false;this.changingFeature_=false;this.dragSegments_=[];this.overlay_=new p["a"]({source:new v["a"]({useSpatialIndex:false,wrapX:!!e.wrapX}),style:e.style?e.style:j(),updateWhileAnimating:true,updateWhileInteracting:true});this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,Circle:this.writeCircleGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_};this.source_=null;var t;if(e.source){this.source_=e.source;t=new i["a"](this.source_.getFeatures());Object(u["a"])(this.source_,g["a"].ADDFEATURE,this.handleSourceAdd_,this);Object(u["a"])(this.source_,g["a"].REMOVEFEATURE,this.handleSourceRemove_,this)}else{t=e.features}if(!t){throw new Error("The modify interaction requires features or a source")}this.features_=t;this.features_.forEach(this.addFeature_.bind(this));Object(u["a"])(this.features_,a["a"].ADD,this.handleFeatureAdd_,this);Object(u["a"])(this.features_,a["a"].REMOVE,this.handleFeatureRemove_,this);this.lastPointerEvent_=null}if(n)e.__proto__=n;e.prototype=Object.create(n&&n.prototype);e.prototype.constructor=e;e.prototype.addFeature_=function e(t){var r=t.getGeometry();if(r&&r.getType()in this.SEGMENT_WRITERS_){this.SEGMENT_WRITERS_[r.getType()].call(this,t,r)}var n=this.getMap();if(n&&n.isRendered()&&this.getActive()){this.handlePointerAtPixel_(this.lastPixel_,n)}Object(u["a"])(t,c["a"].CHANGE,this.handleFeatureChange_,this)};e.prototype.willModifyFeatures_=function e(t){if(!this.modified_){this.modified_=true;this.dispatchEvent(new T(b.MODIFYSTART,this.features_,t))}};e.prototype.removeFeature_=function e(t){this.removeFeatureSegmentData_(t);if(this.vertexFeature_&&this.features_.getLength()===0){this.overlay_.getSource().removeFeature(this.vertexFeature_);this.vertexFeature_=null}Object(u["c"])(t,c["a"].CHANGE,this.handleFeatureChange_,this)};e.prototype.removeFeatureSegmentData_=function e(t){var r=this.rBush_;var n=[];r.forEach(function(e){if(t===e.feature){n.push(e)}});for(var i=n.length-1;i>=0;--i){r.remove(n[i])}};e.prototype.setActive=function e(t){if(this.vertexFeature_&&!t){this.overlay_.getSource().removeFeature(this.vertexFeature_);this.vertexFeature_=null}n.prototype.setActive.call(this,t)};e.prototype.setMap=function e(t){this.overlay_.setMap(t);n.prototype.setMap.call(this,t)};e.prototype.getOverlay=function e(){return this.overlay_};e.prototype.handleSourceAdd_=function e(t){if(t.feature){this.features_.push(t.feature)}};e.prototype.handleSourceRemove_=function e(t){if(t.feature){this.features_.remove(t.feature)}};e.prototype.handleFeatureAdd_=function e(t){this.addFeature_(t.element)};e.prototype.handleFeatureChange_=function e(t){if(!this.changingFeature_){var r=t.target;this.removeFeature_(r);this.addFeature_(r)}};e.prototype.handleFeatureRemove_=function e(t){var r=t.element;this.removeFeature_(r)};e.prototype.writePointGeometry_=function e(t,r){var n=r.getCoordinates();var i={feature:t,geometry:r,segment:[n,n]};this.rBush_.insert(r.getExtent(),i)};e.prototype.writeMultiPointGeometry_=function e(t,r){var n=r.getCoordinates();for(var i=0,a=n.length;i<a;++i){var o=n[i];var s={feature:t,geometry:r,depth:[i],index:i,segment:[o,o]};this.rBush_.insert(r.getExtent(),s)}};e.prototype.writeLineStringGeometry_=function e(t,r){var n=r.getCoordinates();for(var i=0,a=n.length-1;i<a;++i){var o=n.slice(i,i+2);var s={feature:t,geometry:r,index:i,segment:o};this.rBush_.insert(Object(C["b"])(o),s)}};e.prototype.writeMultiLineStringGeometry_=function e(t,r){var n=r.getCoordinates();for(var i=0,a=n.length;i<a;++i){var o=n[i];for(var s=0,l=o.length-1;s<l;++s){var u=o.slice(s,s+2);var c={feature:t,geometry:r,depth:[i],index:s,segment:u};this.rBush_.insert(Object(C["b"])(u),c)}}};e.prototype.writePolygonGeometry_=function e(t,r){var n=r.getCoordinates();for(var i=0,a=n.length;i<a;++i){var o=n[i];for(var s=0,l=o.length-1;s<l;++s){var u=o.slice(s,s+2);var c={feature:t,geometry:r,depth:[i],index:s,segment:u};this.rBush_.insert(Object(C["b"])(u),c)}}};e.prototype.writeMultiPolygonGeometry_=function e(t,r){var n=r.getCoordinates();for(var i=0,a=n.length;i<a;++i){var o=n[i];for(var s=0,l=o.length;s<l;++s){var u=o[s];for(var c=0,f=u.length-1;c<f;++c){var h=u.slice(c,c+2);var d={feature:t,geometry:r,depth:[s,i],index:c,segment:h};this.rBush_.insert(Object(C["b"])(h),d)}}}};e.prototype.writeCircleGeometry_=function e(t,r){var n=r.getCenter();var i={feature:t,geometry:r,index:y,segment:[n,n]};var a={feature:t,geometry:r,index:x,segment:[n,n]};var o=[i,a];i.featureSegments=a.featureSegments=o;this.rBush_.insert(Object(C["m"])(n),i);this.rBush_.insert(r.getExtent(),a)};e.prototype.writeGeometryCollectionGeometry_=function e(t,r){var n=r.getGeometriesArray();for(var i=0;i<n.length;++i){this.SEGMENT_WRITERS_[n[i].getType()].call(this,t,n[i])}};e.prototype.createOrUpdateVertexFeature_=function e(t){var r=this.vertexFeature_;if(!r){r=new o["a"](new h["a"](t));this.vertexFeature_=r;this.overlay_.getSource().addFeature(r)}else{var n=r.getGeometry();n.setCoordinates(t)}return r};e.prototype.handleEvent=function e(t){if(!t.pointerEvent){return true}this.lastPointerEvent_=t;var r;if(!t.map.getView().getInteracting()&&t.type==s["a"].POINTERMOVE&&!this.handlingDownUpSequence){this.handlePointerMove_(t)}if(this.vertexFeature_&&this.deleteCondition_(t)){if(t.type!=s["a"].SINGLECLICK||!this.ignoreNextSingleClick_){r=this.removePoint()}else{r=true}}if(t.type==s["a"].SINGLECLICK){this.ignoreNextSingleClick_=false}return n.prototype.handleEvent.call(this,t)&&!r};e.prototype.handleDragEvent=function e(t){this.ignoreNextSingleClick_=false;this.willModifyFeatures_(t);var r=t.coordinate;for(var n=0,i=this.dragSegments_.length;n<i;++n){var a=this.dragSegments_[n];var o=a[0];var s=o.depth;var l=o.geometry;var u=void 0;var c=o.segment;var f=a[1];while(r.length<l.getStride()){r.push(c[f][r.length])}switch(l.getType()){case O["a"].POINT:u=r;c[0]=c[1]=r;break;case O["a"].MULTI_POINT:u=l.getCoordinates();u[o.index]=r;c[0]=c[1]=r;break;case O["a"].LINE_STRING:u=l.getCoordinates();u[o.index+f]=r;c[f]=r;break;case O["a"].MULTI_LINE_STRING:u=l.getCoordinates();u[s[0]][o.index+f]=r;c[f]=r;break;case O["a"].POLYGON:u=l.getCoordinates();u[s[0]][o.index+f]=r;c[f]=r;break;case O["a"].MULTI_POLYGON:u=l.getCoordinates();u[s[1]][s[0]][o.index+f]=r;c[f]=r;break;case O["a"].CIRCLE:c[0]=c[1]=r;if(o.index===y){this.changingFeature_=true;l.setCenter(r);this.changingFeature_=false}else{this.changingFeature_=true;l.setRadius(Object(S["d"])(l.getCenter(),r));this.changingFeature_=false}break;default:}if(u){this.setGeometryCoordinates_(l,u)}}this.createOrUpdateVertexFeature_(r)};e.prototype.handleDownEvent=function e(t){if(!this.condition_(t)){return false}this.handlePointerAtPixel_(t.pixel,t.map);var r=t.map.getCoordinateFromPixel(t.pixel);this.dragSegments_.length=0;this.modified_=false;var n=this.vertexFeature_;if(n){var i=[];var a=n.getGeometry();var o=a.getCoordinates();var s=Object(C["b"])([o]);var l=this.rBush_.getInExtent(s);var u={};l.sort(M);for(var c=0,f=l.length;c<f;++c){var h=l[c];var d=h.segment;var p=Object(w["c"])(h.feature);var v=h.depth;if(v){p+="-"+v.join("-")}if(!u[p]){u[p]=new Array(2)}if(h.geometry.getType()===O["a"].CIRCLE&&h.index===x){var g=k(r,h);if(Object(S["e"])(g,o)&&!u[p][0]){this.dragSegments_.push([h,0]);u[p][0]=h}}else if(Object(S["e"])(d[0],o)&&!u[p][0]){this.dragSegments_.push([h,0]);u[p][0]=h}else if(Object(S["e"])(d[1],o)&&!u[p][1]){if((h.geometry.getType()===O["a"].LINE_STRING||h.geometry.getType()===O["a"].MULTI_LINE_STRING)&&u[p][0]&&u[p][0].index===0){continue}this.dragSegments_.push([h,1]);u[p][1]=h}else if(this.insertVertexCondition_(t)&&Object(w["c"])(d)in this.vertexSegments_&&!u[p][0]&&!u[p][1]){i.push([h,o])}}if(i.length){this.willModifyFeatures_(t)}for(var m=i.length-1;m>=0;--m){this.insertVertex_.apply(this,i[m])}}return!!this.vertexFeature_};e.prototype.handleUpEvent=function e(t){for(var r=this.dragSegments_.length-1;r>=0;--r){var n=this.dragSegments_[r][0];var i=n.geometry;if(i.getType()===O["a"].CIRCLE){var a=i.getCenter();var o=n.featureSegments[0];var s=n.featureSegments[1];o.segment[0]=o.segment[1]=a;s.segment[0]=s.segment[1]=a;this.rBush_.update(Object(C["m"])(a),o);this.rBush_.update(i.getExtent(),s)}else{this.rBush_.update(Object(C["b"])(n.segment),n)}}if(this.modified_){this.dispatchEvent(new T(b.MODIFYEND,this.features_,t));this.modified_=false}return false};e.prototype.handlePointerMove_=function e(t){this.lastPixel_=t.pixel;this.handlePointerAtPixel_(t.pixel,t.map)};e.prototype.handlePointerAtPixel_=function e(t,r){var n=r.getCoordinateFromPixel(t);var i=function e(t,r){return A(n,t)-A(n,r)};var a=Object(C["c"])(Object(C["m"])(n),r.getView().getResolution()*this.pixelTolerance_);var o=this.rBush_;var s=o.getInExtent(a);if(s.length>0){s.sort(i);var l=s[0];var u=l.segment;var c=k(n,l);var f=r.getPixelFromCoordinate(c);var h=Object(S["d"])(t,f);if(h<=this.pixelTolerance_){var d={};if(l.geometry.getType()===O["a"].CIRCLE&&l.index===x){this.snappedToVertex_=true;this.createOrUpdateVertexFeature_(c)}else{var p=r.getPixelFromCoordinate(u[0]);var v=r.getPixelFromCoordinate(u[1]);var g=Object(S["h"])(f,p);var m=Object(S["h"])(f,v);h=Math.sqrt(Math.min(g,m));this.snappedToVertex_=h<=this.pixelTolerance_;if(this.snappedToVertex_){c=g>m?u[1]:u[0]}this.createOrUpdateVertexFeature_(c);for(var _=1,y=s.length;_<y;++_){var b=s[_].segment;if(Object(S["e"])(u[0],b[0])&&Object(S["e"])(u[1],b[1])||Object(S["e"])(u[0],b[1])&&Object(S["e"])(u[1],b[0])){d[Object(w["c"])(b)]=true}else{break}}}d[Object(w["c"])(u)]=true;this.vertexSegments_=d;return}}if(this.vertexFeature_){this.overlay_.getSource().removeFeature(this.vertexFeature_);this.vertexFeature_=null}};e.prototype.insertVertex_=function e(t,r){var n=t.segment;var i=t.feature;var a=t.geometry;var o=t.depth;var s=t.index;var l;while(r.length<a.getStride()){r.push(0)}switch(a.getType()){case O["a"].MULTI_LINE_STRING:l=a.getCoordinates();l[o[0]].splice(s+1,0,r);break;case O["a"].POLYGON:l=a.getCoordinates();l[o[0]].splice(s+1,0,r);break;case O["a"].MULTI_POLYGON:l=a.getCoordinates();l[o[1]][o[0]].splice(s+1,0,r);break;case O["a"].LINE_STRING:l=a.getCoordinates();l.splice(s+1,0,r);break;default:return}this.setGeometryCoordinates_(a,l);var u=this.rBush_;u.remove(t);this.updateSegmentIndices_(a,s,o,1);var c={segment:[n[0],r],feature:i,geometry:a,depth:o,index:s};u.insert(Object(C["b"])(c.segment),c);this.dragSegments_.push([c,1]);var f={segment:[r,n[1]],feature:i,geometry:a,depth:o,index:s+1};u.insert(Object(C["b"])(f.segment),f);this.dragSegments_.push([f,0]);this.ignoreNextSingleClick_=true};e.prototype.removePoint=function e(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=s["a"].POINTERDRAG){var t=this.lastPointerEvent_;this.willModifyFeatures_(t);this.removeVertex_();this.dispatchEvent(new T(b.MODIFYEND,this.features_,t));this.modified_=false;return true}return false};e.prototype.removeVertex_=function e(){var t=this.dragSegments_;var r={};var n=false;var i,a,o,s,l,u,c;var f,h,d,p;for(l=t.length-1;l>=0;--l){o=t[l];d=o[0];p=Object(w["c"])(d.feature);if(d.depth){p+="-"+d.depth.join("-")}if(!(p in r)){r[p]={}}if(o[1]===0){r[p].right=d;r[p].index=d.index}else if(o[1]==1){r[p].left=d;r[p].index=d.index+1}}for(p in r){h=r[p].right;c=r[p].left;u=r[p].index;f=u-1;if(c!==undefined){d=c}else{d=h}if(f<0){f=0}s=d.geometry;a=s.getCoordinates();i=a;n=false;switch(s.getType()){case O["a"].MULTI_LINE_STRING:if(a[d.depth[0]].length>2){a[d.depth[0]].splice(u,1);n=true}break;case O["a"].LINE_STRING:if(a.length>2){a.splice(u,1);n=true}break;case O["a"].MULTI_POLYGON:i=i[d.depth[1]];case O["a"].POLYGON:i=i[d.depth[0]];if(i.length>4){if(u==i.length-1){u=0}i.splice(u,1);n=true;if(u===0){i.pop();i.push(i[0]);f=i.length-1}}break;default:}if(n){this.setGeometryCoordinates_(s,a);var v=[];if(c!==undefined){this.rBush_.remove(c);v.push(c.segment[0])}if(h!==undefined){this.rBush_.remove(h);v.push(h.segment[1])}if(c!==undefined&&h!==undefined){var g={depth:d.depth,feature:d.feature,geometry:d.geometry,index:f,segment:v};this.rBush_.insert(Object(C["b"])(g.segment),g)}this.updateSegmentIndices_(s,u,d.depth,-1);if(this.vertexFeature_){this.overlay_.getSource().removeFeature(this.vertexFeature_);this.vertexFeature_=null}t.length=0}}return n};e.prototype.setGeometryCoordinates_=function e(t,r){this.changingFeature_=true;t.setCoordinates(r);this.changingFeature_=false};e.prototype.updateSegmentIndices_=function e(t,r,n,i){this.rBush_.forEachInExtent(t.getExtent(),function(e){if(e.geometry===t&&(n===undefined||e.depth===undefined||Object(l["b"])(e.depth,n))&&e.index>r){e.index+=i}})};return e}(d["b"]);function M(e,t){return e.index-t.index}function A(e,t){var r=t.geometry;if(r.getType()===O["a"].CIRCLE){var n=r;if(t.index===x){var i=Object(S["h"])(n.getCenter(),e);var a=Math.sqrt(i)-n.getRadius();return a*a}}return Object(S["i"])(e,t.segment)}function k(e,t){var r=t.geometry;if(r.getType()===O["a"].CIRCLE&&t.index===x){return r.getClosestPoint(e)}return Object(S["c"])(e,t.segment)}function j(){var r=Object(_["b"])();return function(e,t){return r[O["a"].POINT]}}t["a"]=E},function(e,t,r){"use strict";var n=r(387);var u=r(1);var c=r(84);var f=r(5);var h=function e(t){c["a"].call(this);this.timeout_=t;var r=angular.element('<div class="ngeo-notification"></div>');angular.element(document.body).append(r);this.container_=r;this.cache_={}};h.$inject=["$timeout"];h.$inject=["$timeout"];f["d"](h,c["a"]);h.DEFAULT_DELAY_=7e3;h.prototype.notify=function(e){this.show(e)};h.prototype.clear=function(){for(var e in this.cache_){this.clearMessageByCacheItem_(this.cache_[parseInt(e,10)])}};h.prototype.showMessage=function(e){var t=this;var r=e.type;u["a"].assertString(r,"Type should be set.");var n=["alert","fade","show"];switch(r){case c["a"].Type.ERROR:n.push("alert-danger");break;case c["a"].Type.INFORMATION:n.push("alert-info");break;case c["a"].Type.SUCCESS:n.push("alert-success");break;case c["a"].Type.WARNING:n.push("alert-warning");break;default:break}var i=angular.element('<div class="'+n.join(" ")+'"></div>');var a;if(e.target){a=angular.element(e.target)}else{a=this.container_}a.append(i);i.html(e.msg).addClass("show");var o=e.delay!==undefined?e.delay:h.DEFAULT_DELAY_;var s={el:i};var l=f["c"](i);s.promise=this.timeout_(function(){i.alert("close");delete t.cache_[l]},o);this.cache_[l]=s};h.prototype.clearMessageByCacheItem_=function(e){var t=e.el;var r=e.promise;var n=f["c"](t);t.alert("close");this.timeout_.cancel(r);delete this.cache_[n]};h.CacheItem;h.module=angular.module("ngeoNotification",[]);h.module.service("ngeoNotification",h);t["a"]=h},function(e,t,r){"use strict";var n=function e(t,r){this.$http_=t;this.url_=r};n.$inject=["$http","gmfRasterUrl"];n.$inject=["$http","gmfRasterUrl"];n.prototype.getRaster=function(e,t){var r=t||{};r[n.Param.X]=e[0];r[n.Param.Y]=e[1];return this.$http_.get(this.url_,{params:r}).then(this.handleGetRaster_.bind(this))};n.prototype.handleGetRaster_=function(e){return e.data};n.Param={X:"lon",Y:"lat"};n.module=angular.module("gmfRaster",[]);n.module.service("gmfRaster",n);t["a"]=n},function(e,t,r){"use strict";r.d(t,"a",function(){return u});r.d(t,"b",function(){return n});r.d(t,"c",function(){return f});r.d(t,"d",function(){return i});var o=r(3);var s=r(165);var l=r(307);function u(e,t,r,n,i){var a=Object(o["s"])(Object(o["j"])(),e,t,r,n);if(!Object(o["F"])(i,a)){return false}if(Object(o["g"])(i,a)){return true}if(a[0]>=i[0]&&a[2]<=i[2]){return true}if(a[1]>=i[1]&&a[3]<=i[3]){return true}return Object(l["a"])(e,t,r,n,function(e,t){return Object(o["G"])(i,e,t)})}function n(e,t,r,n,i){for(var a=0,o=r.length;a<o;++a){if(u(e,t,r[a],n,i)){return true}t=r[a]}return false}function c(e,t,r,n,i){if(u(e,t,r,n,i)){return true}if(Object(s["b"])(e,t,r,n,i[0],i[1])){return true}if(Object(s["b"])(e,t,r,n,i[0],i[3])){return true}if(Object(s["b"])(e,t,r,n,i[2],i[1])){return true}if(Object(s["b"])(e,t,r,n,i[2],i[3])){return true}return false}function f(e,t,r,n,i){if(!c(e,t,r[0],n,i)){return false}if(r.length===1){return true}for(var a=1,o=r.length;a<o;++a){if(Object(s["a"])(e,r[a-1],r[a],n,i)){if(!u(e,r[a-1],r[a],n,i)){return false}}}return true}function i(e,t,r,n,i){for(var a=0,o=r.length;a<o;++a){var s=r[a];if(f(e,t,s,n,i)){return true}t=s[s.length-1]}return false}},function(e,t,r){"use strict";var a=r(76);var o=r(318);var n=r.n(o);var i=angular.module("ngeoDownload",[]);i.factory_=function(){function e(e,t,r){var n=r!==undefined&&!a["a"].isSafari()?r:"text/plain;charset=utf-8";var i=new Blob([e],{type:n});Object(o["saveAs"])(i,t)}return e};i.factory("ngeoDownload",i.factory_);t["a"]=i},function(e,t,r){"use strict";r.d(t,"c",function(){return m});r.d(t,"a",function(){return _});r.d(t,"d",function(){return y});r.d(t,"b",function(){return b});var n=r(99);var i=r(24);var a=r(40);var o=r(75);var s=r(6);var l=r(48);var u=r(17);var c=r(37);var f=r(168);var h=r(44);function d(){return this.hours()%12||12}function p(){return this.hours()||24}Object(i["a"])("H",["HH",2],0,"hour");Object(i["a"])("h",["hh",2],0,d);Object(i["a"])("k",["kk",2],0,p);Object(i["a"])("hmm",0,0,function(){return""+d.apply(this)+Object(f["a"])(this.minutes(),2)});Object(i["a"])("hmmss",0,0,function(){return""+d.apply(this)+Object(f["a"])(this.minutes(),2)+Object(f["a"])(this.seconds(),2)});Object(i["a"])("Hmm",0,0,function(){return""+this.hours()+Object(f["a"])(this.minutes(),2)});Object(i["a"])("Hmmss",0,0,function(){return""+this.hours()+Object(f["a"])(this.minutes(),2)+Object(f["a"])(this.seconds(),2)});function v(e,t){Object(i["a"])(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}v("a",true);v("A",false);Object(a["a"])("hour","h");Object(o["a"])("hour",13);function g(e,t){return t._meridiemParse}Object(s["a"])("a",g);Object(s["a"])("A",g);Object(s["a"])("H",s["d"]);Object(s["a"])("h",s["d"]);Object(s["a"])("k",s["d"]);Object(s["a"])("HH",s["d"],s["h"]);Object(s["a"])("hh",s["d"],s["h"]);Object(s["a"])("kk",s["d"],s["h"]);Object(s["a"])("hmm",s["j"]);Object(s["a"])("hmmss",s["l"]);Object(s["a"])("Hmm",s["j"]);Object(s["a"])("Hmmss",s["l"]);Object(l["a"])(["H","HH"],u["b"]);Object(l["a"])(["k","kk"],function(e,t,r){var n=Object(c["a"])(e);t[u["b"]]=n===24?0:n});Object(l["a"])(["a","A"],function(e,t,r){r._isPm=r._locale.isPM(e);r._meridiem=e});Object(l["a"])(["h","hh"],function(e,t,r){t[u["b"]]=Object(c["a"])(e);Object(h["a"])(r).bigHour=true});Object(l["a"])("hmm",function(e,t,r){var n=e.length-2;t[u["b"]]=Object(c["a"])(e.substr(0,n));t[u["d"]]=Object(c["a"])(e.substr(n));Object(h["a"])(r).bigHour=true});Object(l["a"])("hmmss",function(e,t,r){var n=e.length-4;var i=e.length-2;t[u["b"]]=Object(c["a"])(e.substr(0,n));t[u["d"]]=Object(c["a"])(e.substr(n,2));t[u["f"]]=Object(c["a"])(e.substr(i));Object(h["a"])(r).bigHour=true});Object(l["a"])("Hmm",function(e,t,r){var n=e.length-2;t[u["b"]]=Object(c["a"])(e.substr(0,n));t[u["d"]]=Object(c["a"])(e.substr(n))});Object(l["a"])("Hmmss",function(e,t,r){var n=e.length-4;var i=e.length-2;t[u["b"]]=Object(c["a"])(e.substr(0,n));t[u["d"]]=Object(c["a"])(e.substr(n,2));t[u["f"]]=Object(c["a"])(e.substr(i))});function m(e){return(e+"").toLowerCase().charAt(0)==="p"}var _=/[ap]\.?m?\.?/i;function y(e,t,r){if(e>11){return r?"pm":"PM"}else{return r?"am":"AM"}}var b=Object(n["b"])("Hours",true)},function(e,t,r){"use strict";var s=r(1);var n=r(158);var i=function e(t,r){var n=this;this.initialState={};this.ngeoLocation=t;this.usedKeyRegexp=r;this.useLocalStorage_;this.setUseLocalStorage(false);var i=t.getParamKeys().filter(function(e){return e!="debug"&&e!="no_redirect"});if(i.length===0){if(this.useLocalStorage_){var a=function e(r){s["a"].assert(r);n.usedKeyRegexp.some(function(e){if(r.match(e)){var t=window.localStorage[r];if(t!==undefined||t!==null){n.initialState[r]=t}else{n.initialState[r]=""}return true}})};for(var o in window.localStorage){a(o)}}}else{i.forEach(function(r){n.usedKeyRegexp.some(function(e){if(r.match(e)){var t=n.ngeoLocation.getParam(r);if(t!==undefined){n.initialState[r]=t;return true}}})})}};i.$inject=["ngeoLocation","ngeoUsedKeyRegexp"];i.$inject=["ngeoLocation","ngeoUsedKeyRegexp"];i.prototype.setUseLocalStorage=function(e){this.useLocalStorage_=e;if(this.useLocalStorage_){try{if("localStorage"in window){window.localStorage["test"]="";delete window.localStorage["test"]}else{this.useLocalStorage_=false}}catch(e){console.error(e);this.useLocalStorage_=false}}return this.useLocalStorage_};i.prototype.getInitialValue=function(e){return this.initialState[e]};i.prototype.getInitialStringValue=function(e){var t=this.initialState[e];if(t===undefined){return undefined}return t};i.prototype.getInitialNumberValue=function(e){var t=this.initialState[e];if(t===undefined){return undefined}return parseFloat(t)};i.prototype.getInitialBooleanValue=function(e){var t=this.initialState[e];if(t===undefined){return undefined}return t==="true"};i.prototype.updateState=function(e){this.ngeoLocation.updateParams(e);if(this.useLocalStorage_){for(var t in e){s["a"].assert(t);var r=e[t];s["a"].assert(r!==undefined);window.localStorage[t]=r}}};i.prototype.deleteParam=function(e){this.ngeoLocation.deleteParam(e);if(this.useLocalStorage_){delete window.localStorage[e]}};i.module=angular.module("ngeoStateManager",[n["a"].module.name]);i.module.service("ngeoStateManager",i);i.module.value("ngeoUsedKeyRegexp",[new RegExp(".*")]);t["a"]=i},function(e,t,r){"use strict";var n=function e(t,r){this.dispatcher=t;this.mapping_=r};n.prototype.getEvents=function e(){return Object.keys(this.mapping_)};n.prototype.getHandlerForEvent=function e(t){return this.mapping_[t]};t["a"]=n},function(e,t,r){"use strict";var n=r(171);var i=function e(t,r){this.http_=t;this.baseUrl_=r;this.promises_={}};i.$inject=["$http","gmfLayersUrl"];i.$inject=["$http","gmfLayersUrl"];i.prototype.getAttributes=function(e){if(!this.promises_[e]){var t=this.baseUrl_+"/"+e+"/md.xsd";this.promises_[e]=this.http_.get(t).then(this.handleGetAttributes_.bind(this))}return this.promises_[e]};i.prototype.handleGetAttributes_=function(e){return(new n["a"]).read(e.data)};i.module=angular.module("gmfXSDAttributes",[]);i.module.service("gmfXSDAttributes",i);t["a"]=i},function(e,x,T){"use strict";(function(i){var E=T(59);var e=T(179);var g=T(172);var l=T(22);var a=T(400);var t=T(258);var r=T(233);var M=T(51);var h=T(401);var m=T(409);var _=T(13);var n=T(160);var o=T(159);var s=T(338);var u=T(211);var c=T(125);var A=T(1);var f=T(5);var d=T(8);var y=T(2);var p=T(14);var v=T(85);var b=T(21);var w=T(29);var S=T(107);var C=T(11);var O=T(93);var k=function s(e,t,r,n,i,a,o,l,u,c){var f=this;this.q_=e;this.rootScope_=r;this.$timeout_=t;this.mapViewPropertyChangeEventKey_=null;this.ngeoDebounce_=i;this.ngeoEventHelper_=o;this.ngeoStateManager_=l;this.ngeoFeatures_=n.has("ngeoFeatures")?n.get("ngeoFeatures"):null;this.ngeoBackgroundLayerMgr_=n.has("ngeoBackgroundLayerMgr")?n.get("ngeoBackgroundLayerMgr"):null;var h=n.has("ngeoFeatureOverlayMgr")?n.get("ngeoFeatureOverlayMgr"):null;this.featureOverlay_=h?h.getFeatureOverlay():null;this.featureHelper_=n.has("ngeoFeatureHelper")?n.get("ngeoFeatureHelper"):null;this.ngeoQuerent_=n.has("ngeoQuerent")?n.get("ngeoQuerent"):null;var d=n.has("gmfPermalinkOptions")?n.get("gmfPermalinkOptions"):{};if(d.useLocalStorage===true){this.ngeoStateManager_.setUseLocalStorage(true)}this.crosshairEnabledByDefault_=!!d.crosshairEnabledByDefault;this.pointRecenterZoom_=d.pointRecenterZoom;this.gmfExternalDataSourcesManager_=n.has("gmfExternalDataSourcesManager")?n.get("gmfExternalDataSourcesManager"):null;this.gmfThemes_=n.has("gmfThemes")?n.get("gmfThemes"):null;this.gmfObjectEditingManager_=n.has("gmfObjectEditingManager")?n.get("gmfObjectEditingManager"):null;this.gmfThemeManager_=n.has("gmfThemeManager")?n.get("gmfThemeManager"):null;this.defaultTheme_=n.has("defaultTheme")?n.get("defaultTheme"):undefined;this.gmfTreeManager_=n.has("gmfTreeManager")?n.get("gmfTreeManager"):null;this.user_=c;this.ngeoLocation_=u;this.ngeoWfsPermalink_=n.has("ngeoWfsPermalink")?n.get("ngeoWfsPermalink"):null;this.gmfUser_=n.has("gmfUser")?n.get("gmfUser"):null;this.map_=null;this.ngeoAutoProjection_=n.has("ngeoAutoProjection")?n.get("ngeoAutoProjection"):null;this.sourceProjections_=null;if(d.projectionCodes!==undefined&&this.ngeoAutoProjection_){var p=this.ngeoAutoProjection_.getProjectionList(d.projectionCodes);if(p.length>0){this.sourceProjections_=p}}this.crosshairFeature_=null;this.crosshairStyle_;if(d.crosshairStyle!==undefined){this.crosshairStyle_=d.crosshairStyle}else{this.crosshairStyle_=[new C["c"]({image:new S["a"]({stroke:new w["a"]({color:"rgba(255, 255, 255, 0.8)",width:5}),points:4,radius:8,radius2:0,angle:0})}),new C["c"]({image:new S["a"]({stroke:new w["a"]({color:"rgba(255, 0, 0, 1)",width:2}),points:4,radius:8,radius2:0,angle:0})})]}this.mapTooltip_=null;this.featureHashFormat_=new m["a"]({setStyle:false,encodeStyles:false,propertiesType:{fillColor:_["a"].COLOR,fillOpacity:_["a"].OPACITY,fontColor:_["a"].COLOR,fontSize:_["a"].SIZE,isBox:_["a"].IS_RECTANGLE,isCircle:_["a"].IS_CIRCLE,isLabel:_["a"].IS_TEXT,name:_["a"].NAME,pointRadius:_["a"].SIZE,showLabel:_["a"].SHOW_LABEL,showMeasure:_["a"].SHOW_MEASURE,strokeColor:_["a"].COLOR,strokeWidth:_["a"].STROKE},defaultValues:{name:function e(t){return a.getString(t.getGeometry().getType())},fillOpacity:function e(){return.5},showLabel:function e(){return false},showMeasure:function e(){return false}}});if(this.ngeoBackgroundLayerMgr_){y["a"](this.ngeoBackgroundLayerMgr_,"change",this.handleBackgroundLayerManagerChange_,this)}this.rootScope_.$on("ngeo-layertree-state",function(e,t,r){var n={};if(r.node.mixed){var i=t.getState();A["a"].assert(i==="on"||i==="off");var a=i==="on";t.traverseDepthFirst(function(e){if(e.node.children===undefined){var t=s.ParamPrefix.TREE_ENABLE+e.node.name;n[t]=a}})}else{var o=[];r.traverseDepthFirst(function(e){if(e.node.children===undefined&&e.getState()==="on"){o.push(e.node.name)}});n[s.ParamPrefix.TREE_GROUP_LAYERS+r.node.name]=o.join(",")}f.ngeoStateManager_.updateState(n)});this.rootScope_.$on("ngeo-layertree-opacity",function(e,t){var r={};var n=t.layer.getOpacity();var i=(t.parent.node.mixed?s.ParamPrefix.TREE_OPACITY:s.ParamPrefix.TREE_GROUP_OPACITY)+t.node.name;r[i]=n;f.ngeoStateManager_.updateState(r)});var v=this.getFeatures();if(this.ngeoFeatures_){v.forEach(function(e){if(f.featureHelper_){f.featureHelper_.setStyle(e)}f.addNgeoFeature_(e)});this.ngeoFeatures_.extend(v);y["a"](this.ngeoFeatures_,"add",this.handleNgeoFeaturesAdd_,this);y["a"](this.ngeoFeatures_,"remove",this.handleNgeoFeaturesRemove_,this)}if(this.featureHelper_){this.rootScope_.$on("$localeChangeSuccess",function(){v.forEach(function(e){f.featureHelper_.setStyle(e)})})}if(this.gmfThemeManager_){this.rootScope_.$on(g["a"].EventType.THEME_NAME_SET,function(e,t){f.setThemeInUrl_(t)})}this.setExternalDataSourcesStatePromise_=null;if(this.ngeoQuerent_&&this.gmfExternalDataSourcesManager_){this.initExternalDataSources_().then(function(){y["a"](f.gmfExternalDataSourcesManager_.wmsGroupsCollection,"add",f.handleExternalDSGroupCollectionAdd_,f);y["a"](f.gmfExternalDataSourcesManager_.wmsGroupsCollection,"remove",f.handleExternalDSGroupCollectionRemove_,f);y["a"](f.gmfExternalDataSourcesManager_.wmtsGroupsCollection,"add",f.handleExternalDSGroupCollectionAdd_,f);y["a"](f.gmfExternalDataSourcesManager_.wmtsGroupsCollection,"remove",f.handleExternalDSGroupCollectionRemove_,f);for(var e=f.gmfExternalDataSourcesManager_.wmsGroups,t=Array.isArray(e),r=0,e=t?e:e[Symbol.iterator]();;){var n;if(t){if(r>=e.length)break;n=e[r++]}else{r=e.next();if(r.done)break;n=r.value}var i=n;f.registerExternalDSGroup_(i)}for(var a=f.gmfExternalDataSourcesManager_.wmtsGroups,o=Array.isArray(a),s=0,a=o?a:a[Symbol.iterator]();;){var l;if(o){if(s>=a.length)break;l=a[s++]}else{s=a.next();if(s.done)break;l=s.value}var u=l;f.registerExternalDSGroup_(u)}})}this.initLayers_()};k.$inject=["$q","$timeout","$rootScope","$injector","ngeoDebounce","gettextCatalog","ngeoEventHelper","ngeoStateManager","ngeoLocation","gmfUser"];k.$inject=["$q","$timeout","$rootScope","$injector","ngeoDebounce","gettextCatalog","ngeoEventHelper","ngeoStateManager","ngeoLocation","gmfUser"];k.prototype.getMapCenter=function(){var e=this.ngeoStateManager_.getInitialNumberValue(E["a"].PermalinkParam.MAP_X);var t=this.ngeoStateManager_.getInitialNumberValue(E["a"].PermalinkParam.MAP_Y);if(!isNaN(e)&&!isNaN(t)){var r=[e,t];if(this.sourceProjections_!==null&&this.ngeoAutoProjection_){var n=this.map_.getView().getProjection();var i=this.ngeoAutoProjection_.tryProjectionsWithInversion(r,n.getExtent(),n,this.sourceProjections_);if(i){return i}}return r}return null};k.prototype.getMapZoom=function(){var e=this.ngeoStateManager_.getInitialNumberValue(E["a"].PermalinkParam.MAP_Z);return isNaN(e)?undefined:e};k.prototype.getMapCrosshair=function(){var e=this.ngeoStateManager_.getInitialBooleanValue(E["a"].PermalinkParam.MAP_CROSSHAIR);return e===undefined?this.crosshairEnabledByDefault_:e};k.prototype.setMapCrosshair=function(e){var t;if(e){t=e}else{t=this.map_.getView().getCenter()}A["a"].assertArray(t);if(this.crosshairFeature_){this.featureOverlay_.removeFeature(this.crosshairFeature_)}this.crosshairFeature_=new p["a"](new b["a"](t));this.crosshairFeature_.setStyle(this.crosshairStyle_);this.featureOverlay_.addFeature(this.crosshairFeature_)};k.prototype.getMapTooltip=function(){return this.ngeoStateManager_.getInitialStringValue(E["a"].PermalinkParam.MAP_TOOLTIP)};k.prototype.setMapTooltip=function(e,t){var r;if(t){r=t}else{r=this.map_.getView().getCenter()}A["a"].assertArray(r);var n=i("<div/>",{class:"gmf-permalink-tooltip",text:e})[0];if(this.mapTooltip_!==null){this.map_.removeOverlay(this.mapTooltip_)}this.mapTooltip_=new a["a"]({element:n,position:r});this.map_.addOverlay(this.mapTooltip_)};k.prototype.getFeatures=function(){var e=this.ngeoStateManager_.getInitialStringValue(E["a"].PermalinkParam.FEATURES);if(e!==undefined&&e!==""){return A["a"].assert(this.featureHashFormat_.readFeatures(e))}return[]};k.prototype.setDimensions=function(e){var n=this;var t=this.ngeoLocation_.getParamKeysWithPrefix(k.ParamPrefix.DIMENSIONS);for(var r=0;r<t.length;r++){var i=t[r];var a=this.ngeoLocation_.getParam(i);A["a"].assert(a);e[i.slice(k.ParamPrefix.DIMENSIONS.length)]=a}this.rootScope_.$watchCollection(function(){return e},function(e){var t={};for(var r in e){t[k.ParamPrefix.DIMENSIONS+r]=e[r]}n.ngeoLocation_.updateParams(t)})};k.prototype.setMap=function(t){var r=this;if(t===this.map_){return}if(this.map_){this.unregisterMap_();this.map_=null}if(t){this.map_=t;if(this.gmfObjectEditingManager_){this.gmfObjectEditingManager_.getFeature().then(function(e){r.registerMap_(t,e)})}else{this.registerMap_(t,null)}}};k.prototype.registerMap_=function(e,t){var n=this;var i=e.getView();var r;var a=typeof t!=="undefined"&&t!==null?t.getGeometry():undefined;if(a){var o=e.getSize();A["a"].assert(o);var s;if(a instanceof b["a"]||a instanceof v["a"]){s=this.pointRecenterZoom_}i.fit(a.getExtent(),{size:o,maxZoom:s})}else{var l=this.ngeoStateManager_.getInitialBooleanValue(h["a"].Permalink3dParam.ENABLED);if(!l){r=this.getMapCenter();if(r){i.setCenter(r)}var u=this.getMapZoom();if(u!==undefined){i.setZoom(u)}}}this.mapViewPropertyChangeEventKey_=y["a"](i,"propertychange",this.ngeoDebounce_(function(){var e=i.getCenter();var t=i.getZoom();var r={};r[E["a"].PermalinkParam.MAP_X]=Math.round(e[0]);r[E["a"].PermalinkParam.MAP_Y]=Math.round(e[1]);r[E["a"].PermalinkParam.MAP_Z]=t;n.ngeoStateManager_.updateState(r)},300,true),this);if(this.getMapCrosshair()&&this.featureOverlay_){this.setMapCrosshair(r)}var c=this.getMapTooltip();if(c){this.setMapTooltip(c,r)}var f=this.getWfsPermalinkData_();if(f!==null&&this.ngeoWfsPermalink_){this.ngeoWfsPermalink_.issue(f,e)}};k.prototype.unregisterMap_=function(){A["a"].assert(this.mapViewPropertyChangeEventKey_,"Key should be thruthy");y["e"](this.mapViewPropertyChangeEventKey_);this.mapViewPropertyChangeEventKey_=null};k.prototype.getBackgroundLayer=function(e){var t=this.ngeoStateManager_.getInitialStringValue(E["a"].PermalinkParam.BG_LAYER);if(t!==undefined){for(var r=e,n=Array.isArray(r),i=0,r=n?r:r[Symbol.iterator]();;){var a;if(n){if(i>=r.length)break;a=r[i++]}else{i=r.next();if(i.done)break;a=i.value}var o=a;if(o.get("label")===t){return o}}}return null};k.prototype.handleBackgroundLayerManagerChange_=function(){if(!this.map_||!this.ngeoBackgroundLayerMgr_){return}var e=this.ngeoBackgroundLayerMgr_.get(this.map_);var t=e.get("label");A["a"].assertString(t);var r={};r[E["a"].PermalinkParam.BG_LAYER]=t;this.ngeoStateManager_.updateState(r)};k.prototype.refreshFirstLevelGroups=function(){if(!this.gmfTreeManager_){return}var e=this.gmfTreeManager_.rootCtrl.node.children;var t=e.map(function(e){return e.name});var r={};r[E["a"].PermalinkParam.TREE_GROUPS]=t.join(",");this.ngeoStateManager_.updateState(r)};k.prototype.themeInUrl_=function(e){var t=e.indexOf("theme");return t!=-1&&t==e.length-2};k.prototype.setThemeInUrl_=function(e){if(e){var t=this.ngeoLocation_.getPath().split("/");A["a"].assert(t.length>1);if(t[t.length-1]===""){t.splice(t.length-1)}if(this.themeInUrl_(t)){t[t.length-1]=e}else{t.push("theme",e)}this.ngeoLocation_.setPath(t.join("/"))}};k.prototype.defaultThemeName=function(){var e=this.ngeoLocation_.getPath().split("/");if(this.themeInUrl_(e)){return decodeURI(e[e.length-1])}var t=this.ngeoStateManager_.getInitialStringValue("theme");if(t){return t}var r=this.defaultThemeNameFromFunctionalities();if(r!==null){return r}if(this.defaultTheme_){return this.defaultTheme_}return null};k.prototype.defaultThemeNameFromFunctionalities=function(){if(!this.gmfUser_){return null}var e=this.gmfUser_.functionalities;if(e&&"default_theme"in e){var t=e.default_theme;if(t.length>0){return t[0]}}return null};k.prototype.initLayers_=function(){var a=this;var o=window.location.href;var s=false;if(!this.gmfThemes_){return}this.gmfThemes_.getThemesObject().then(function(r){var e=a.defaultThemeName();A["a"].assert(e!==null);if(a.gmfThemeManager_){a.gmfThemeManager_.setThemeName(a.gmfThemeManager_.modeFlush?e:"")}var n=[];var t;var i=a.ngeoLocation_.getParam(E["a"].PermalinkParam.TREE_GROUPS);if(i===undefined){A["a"].assertString(e);t=l["a"].findThemeByName(r,e);if(t){n=t.children}}else{i.split(",").forEach(function(e){var t=l["a"].findGroupByName(r,e);if(t){n.push(t)}else{s=true}})}if(a.gmfTreeManager_){a.gmfTreeManager_.setFirstLevelGroups(n)}a.$timeout_(function(){if(!a.gmfTreeManager_||!a.gmfTreeManager_.rootCtrl){return}a.gmfTreeManager_.rootCtrl.traverseDepthFirst(function(e){if(e.isRoot){return}var t=a.ngeoStateManager_.getInitialNumberValue((e.parent.node.mixed?k.ParamPrefix.TREE_OPACITY:k.ParamPrefix.TREE_GROUP_OPACITY)+e.node.name);if(t!==undefined&&e.layer){e.layer.setOpacity(t)}if(e.parent.node&&e.parent.node.mixed&&e.node.children==undefined){var r=a.ngeoStateManager_.getInitialBooleanValue(k.ParamPrefix.TREE_ENABLE+e.node.name);if(r!==undefined){e.setState(r?"on":"off",false)}}else if(!e.node.mixed&&e.depth==1){var n=a.ngeoStateManager_.getInitialStringValue(k.ParamPrefix.TREE_GROUP_LAYERS+e.node.name);if(n!==undefined){var i=n.split(",");e.traverseDepthFirst(function(e){if(e.node.children===undefined){var t=d["f"](i,e.node.name);if(t){i.splice(i.indexOf(e.node.name),1)}e.setState(t?"on":"off",false)}});if(i.length>0){s=true}}}});var e=a.gmfTreeManager_.rootCtrl.children;e.forEach(function(t){t.traverseDepthFirst(function(e){if(e.getState()!=="indeterminate"){a.rootScope_.$broadcast("ngeo-layertree-state",e,t);return c["a"].VisitorDecision.STOP}})});if(s&&a.user_.role_id===null){a.rootScope_.$broadcast("authenticationrequired",{url:o})}})})};k.prototype.handleNgeoFeaturesAdd_=function(e){var t=e.element;A["a"].assertInstanceof(t,p["a"]);this.addNgeoFeature_(t)};k.prototype.handleNgeoFeaturesRemove_=function(e){var t=e.element;A["a"].assertInstanceof(t,p["a"]);this.removeNgeoFeature_(t)};k.prototype.addNgeoFeature_=function(e){var t=f["c"](e);this.ngeoEventHelper_.addListenerKey(t,y["a"](e,"change",this.ngeoDebounce_(this.handleNgeoFeaturesChange_,250,true),this))};k.prototype.removeNgeoFeature_=function(e){var t=f["c"](e);this.ngeoEventHelper_.clearListenerKey(t);this.handleNgeoFeaturesChange_()};k.prototype.handleNgeoFeaturesChange_=function(){if(!this.ngeoFeatures_){return}var e=this.ngeoFeatures_.getArray();var t=this.featureHashFormat_.writeFeatures(e);var r={};r[E["a"].PermalinkParam.FEATURES]=t;this.ngeoStateManager_.updateState(r)};k.prototype.getWfsPermalinkData_=function(){var e=this.ngeoLocation_.getParam(E["a"].PermalinkParam.WFS_LAYER);if(!e){return null}var t=this.ngeoLocation_.getParamAsInt(E["a"].PermalinkParam.WFS_NGROUPS);var r=this.ngeoLocation_.getParamKeysWithPrefix(k.ParamPrefix.WFS);var n=[];var i;if(t===undefined){i=this.createFilterGroup_(k.ParamPrefix.WFS,r);if(i!==null){n.push(i)}}else{for(var a=0;a<t;a++){i=this.createFilterGroup_(k.ParamPrefix.WFS+a+"_",r);if(i!==null){n.push(i)}}}if(n.length==0){return null}var o=this.ngeoLocation_.getParam(E["a"].PermalinkParam.WFS_SHOW_FEATURES);var s=!(o==="0"||o==="false");return{wfsType:e,showFeatures:s,filterGroups:n}};k.prototype.createFilterGroup_=function(i,e){var a=this;var o=[];e.forEach(function(e){if(e==E["a"].PermalinkParam.WFS_LAYER||e==E["a"].PermalinkParam.WFS_SHOW_FEATURES||e==E["a"].PermalinkParam.WFS_NGROUPS||e.indexOf(i)!=0){return}var t=a.ngeoLocation_.getParam(e);if(!t){return}var r=t;if(t.indexOf(",")>-1){r=t.split(",")}var n={property:e.replace(i,""),condition:r};o.push(n)});return o.length>0?{filters:o}:null};k.prototype.initExternalDataSources_=function(){var l=this;var _=A["a"].assert(this.ngeoQuerent_);var y=A["a"].assert(this.gmfExternalDataSourcesManager_);var u=[];var e=this.ngeoStateManager_.getInitialValue(E["a"].PermalinkParam.EXTERNAL_DATASOURCES_NAMES);var t=this.ngeoStateManager_.getInitialValue(E["a"].PermalinkParam.EXTERNAL_DATASOURCES_URLS);if(e&&t){var c=e.split(k.ExtDSSeparator.LIST);var f=t.split(k.ExtDSSeparator.LIST);var r=function e(t,r){var n=c[t];if(!n){return"break"}var i=n.split(k.ExtDSSeparator.NAMES);var a=f[t];var o=M["a"].guessServiceTypeByUrl(a);var s=l.q_.defer();u.push(s.promise);if(o===M["a"].Type.WMS){_.wmsGetCapabilities(a).then(function(e){s.resolve({capabilities:e,groupLayerNames:i,serviceType:o,url:a})},function(){s.reject({groupLayerNames:i,serviceType:o,url:a})})}else if(o===M["a"].Type.WMTS){_.wmtsGetCapabilities(a).then(function(e){s.resolve({capabilities:e,groupLayerNames:i,serviceType:o,url:a})},function(){s.reject({groupLayerNames:i,serviceType:o,url:a})})}else{s.reject({groupLayerNames:i,serviceType:o,url:a})}};for(var n=0,i=f.length;n<i;n++){var a=r(n,i);if(a==="break")break}}return this.q_.all(u).then(function(e){for(var t=e,r=Array.isArray(t),n=0,t=r?t:t[Symbol.iterator]();;){var i;if(r){if(n>=t.length)break;i=t[n++]}else{n=t.next();if(n.done)break;i=n.value}var a=i;if(a.serviceType===M["a"].Type.WMS){for(var o=a.groupLayerNames,s=Array.isArray(o),l=0,o=s?o:o[Symbol.iterator]();;){var u;if(s){if(l>=o.length)break;u=o[l++]}else{l=o.next();if(l.done)break;u=l.value}var c=u;var f=_.wmsFindLayerCapability(a.capabilities["Capability"]["Layer"]["Layer"],c);if(f){y.createAndAddDataSourceFromWMSCapability(f,a.capabilities,a.url)}else{}}}else if(a.serviceType===M["a"].Type.WMTS){for(var h=a.groupLayerNames,d=Array.isArray(h),p=0,h=d?h:h[Symbol.iterator]();;){var v;if(d){if(p>=h.length)break;v=h[p++]}else{p=h.next();if(p.done)break;v=p.value}var g=v;var m=_.wmtsFindLayerCapability(a.capabilities["Contents"]["Layer"],g);if(m){y.createAndAddDataSourceFromWMTSCapability(m,a.capabilities,a.url)}else{}}}}},function(e){})};k.prototype.handleExternalDSGroupCollectionAdd_=function(e){var t=e.element;A["a"].assertInstanceof(t,r["a"]);this.registerExternalDSGroup_(t);this.setExternalDataSourcesState_()};k.prototype.registerExternalDSGroup_=function(e){y["a"](e.dataSourcesCollection,"add",this.setExternalDataSourcesState_,this);y["a"](e.dataSourcesCollection,"remove",this.setExternalDataSourcesState_,this)};k.prototype.containsLayerName=function(e,t){if(e instanceof O["a"]){for(var r=e.getLayers().getArray(),n=Array.isArray(r),i=0,r=n?r:r[Symbol.iterator]();;){var a;if(n){if(i>=r.length)break;a=r[i++]}else{i=r.next();if(i.done)break;a=i.value}var o=a;A["a"].assert(o);if(this.containsLayerName(o,t)){return true}}return false}else{return e.get("layerNodeName")==t}};k.prototype.handleExternalDSGroupCollectionRemove_=function(e){var t=e.element;A["a"].assertInstanceof(t,r["a"]);this.unregisterExternalDSGroup_(t);this.setExternalDataSourcesState_()};k.prototype.unregisterExternalDSGroup_=function(e){y["c"](e.dataSourcesCollection,"add",this.setExternalDataSourcesState_,this);y["c"](e.dataSourcesCollection,"remove",this.setExternalDataSourcesState_,this)};k.prototype.setExternalDataSourcesState_=function(){var T=this;if(this.setExternalDataSourcesStatePromise_){this.$timeout_.cancel(this.setExternalDataSourcesStatePromise_)}this.setExternalDataSourcesStatePromise_=this.$timeout_(function(){var e;var t=[];var r=[];for(var n=T.gmfExternalDataSourcesManager_.wmsGroups,i=Array.isArray(n),a=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(a>=n.length)break;o=n[a++]}else{a=n.next();if(a.done)break;o=a.value}var s=o;r.push(s.url);var l=[];for(var u=s.dataSources,c=Array.isArray(u),f=0,u=c?u:u[Symbol.iterator]();;){var h;if(c){if(f>=u.length)break;h=u[f++]}else{f=u.next();if(f.done)break;h=f.value}var d=h;A["a"].assertInstanceof(d,M["a"]);var p=d.getOGCLayerNames()[0];l.push(p)}t.push(l.join(k.ExtDSSeparator.NAMES))}for(var v=T.gmfExternalDataSourcesManager_.wmtsGroups,g=Array.isArray(v),m=0,v=g?v:v[Symbol.iterator]();;){var _;if(g){if(m>=v.length)break;_=v[m++]}else{m=v.next();if(m.done)break;_=m.value}var y=_;r.push(y.url);var b=[];for(var w=y.dataSources,S=Array.isArray(w),C=0,w=S?w:w[Symbol.iterator]();;){var O;if(S){if(C>=w.length)break;O=w[C++]}else{C=w.next();if(C.done)break;O=C.value}var x=O;A["a"].assert(x.wmtsLayer);b.push(x.wmtsLayer)}t.push(b.join(k.ExtDSSeparator.NAMES))}T.ngeoStateManager_.updateState((e={},e[E["a"].PermalinkParam.EXTERNAL_DATASOURCES_NAMES]=t.join(k.ExtDSSeparator.LIST),e[E["a"].PermalinkParam.EXTERNAL_DATASOURCES_URLS]=r.join(k.ExtDSSeparator.LIST),e));T.setExternalDataSourcesStatePromise_=null})};k.prototype.cleanParams=function(e){var l=this;var u=A["a"].assert(this.ngeoLocation_.getParamKeys());for(var t=u,r=Array.isArray(t),n=0,t=r?t:t[Symbol.iterator]();;){var i;if(r){if(n>=t.length)break;i=t[n++]}else{n=t.next();if(n.done)break;i=n.value}var a=i;if(a.startsWith(k.ParamPrefix.TREE_GROUP_LAYERS)){var o=a.substring(k.ParamPrefix.TREE_GROUP_LAYERS.length);for(var s=e,c=Array.isArray(s),f=0,s=c?s:s[Symbol.iterator]();;){var h;if(c){if(f>=s.length)break;h=s[f++]}else{f=s.next();if(f.done)break;h=f.value}var d=h;if(d.name==o){this.ngeoStateManager_.deleteParam(a);break}}}if(a.startsWith(k.ParamPrefix.TREE_GROUP_OPACITY)){var p=a.substring(k.ParamPrefix.TREE_GROUP_OPACITY.length);for(var v=e,g=Array.isArray(v),m=0,v=g?v:v[Symbol.iterator]();;){var _;if(g){if(m>=v.length)break;_=v[m++]}else{m=v.next();if(m.done)break;_=m.value}var y=_;if(y.name==p){this.ngeoStateManager_.deleteParam(a);break}}}}this.$timeout_(function(){if(!l.map_){return}var e=l.map_.getLayerGroup();A["a"].assert(e);for(var t=u,r=Array.isArray(t),n=0,t=r?t:t[Symbol.iterator]();;){var i;if(r){if(n>=t.length)break;i=t[n++]}else{n=t.next();if(n.done)break;i=n.value}var a=i;if(a.startsWith(k.ParamPrefix.TREE_ENABLE)){var o=a.substring(k.ParamPrefix.TREE_ENABLE.length);if(!l.containsLayerName(e,o)){l.ngeoStateManager_.deleteParam(a)}}if(a.startsWith(k.ParamPrefix.TREE_OPACITY)){var s=a.substring(k.ParamPrefix.TREE_OPACITY.length);if(!l.containsLayerName(e,s)){l.ngeoStateManager_.deleteParam(a)}}}})};k.module=angular.module("gmfPermalink",[e["a"].module.name,g["a"].module.name,l["a"].module.name,t["a"].name,c["a"].module.name,n["a"].name,o["a"].module.name,s["a"].name]);k.module.service("gmfPermalink",k);k.OpenLayersLayerProperties={OPACITY:"opacity"};k.ParamPrefix={DIMENSIONS:"dim_",TREE_ENABLE:"tree_enable_",TREE_GROUP_LAYERS:"tree_group_layers_",TREE_GROUP_OPACITY:"tree_group_opacity_",TREE_OPACITY:"tree_opacity_",WFS:"wfs_"};k.ExtDSSeparator={LIST:",",NAMES:";"};k.module.value("gmfPermalinkOptions",{});(function(){var e=[];for(var t in k.ParamPrefix){e.push(new RegExp(k.ParamPrefix[t]+".*"))}for(var r in E["a"].PermalinkParam){e.push(new RegExp(k.ParamPrefix[r]))}u["a"].module.value("ngeoUsedKeyRegexp",e)})();x["a"]=k}).call(this,T(27))},function(e,t,r){"use strict";var n=r(209);var i=function e(t,r){this.gettextCatalog_=r;this.encoding_=t.has("ngeoCsvEncoding")?t.get("ngeoCsvEncoding"):"utf-8";this.extension_=t.has("ngeoCsvExtension")?t.get("ngeoCsvExtension"):".csv";this.includeHeader_=t.has("ngeoCsvIncludeHeader")?t.get("ngeoCsvIncludeHeader"):true;this.quote_=t.has("ngeoCsvQuote")?t.get("ngeoCsvQuote"):'"';this.separator_=t.has("ngeoCsvSeparator")?t.get("ngeoCsvSeparator"):",";this.download_=t.get("ngeoDownload")};i.$inject=["$injector","gettextCatalog"];i.$inject=["$injector","gettextCatalog"];i.prototype.generateCsv=function(e,r){var n=this;if(e.length==0||r.length==0){return""}var t=r.map(function(e){return n.gettextCatalog_.getString(e.name)});var i=this.getRow_(t);var a=e.map(function(t){var e=r.map(function(e){return t[e.name]});return n.getRow_(e)});return this.includeHeader_?i+a.join(""):a.join("")};i.prototype.getRow_=function(e){var t=this;var r=new RegExp(this.quote_,"g");var n=this.quote_+this.quote_;var i=e.map(function(e){if(e!==undefined&&e!==null){e=""+e;return t.quote_+e.replace(r,n)+t.quote_}else{return""}});return i.join(this.separator_)+"\n"};i.prototype.startDownload=function(e,t,r){var n=this.generateCsv(e,t);this.download_(n,r,"text/csv;charset="+this.encoding_)};i.module=angular.module("ngeoCsvDownload",[n["a"].name]);i.module.service("ngeoCsvDownload",i);t["a"]=i},function(e,t,r){"use strict";var L=r(1);var v=r(51);var n=r(162);var i=r(119);var c=r(151);var a=r(5);var o=r(152);var h=r(0);var s=function e(){o["a"].call(this)};a["d"](s,o["a"]);s.prototype.read;s.prototype.readFromDocument=function(e){for(var t=e.firstChild;t;t=t.nextSibling){if(t.nodeType==Node.ELEMENT_NODE){return this.readFromNode(t)}}return null};s.prototype.readFromNode=function(e){var t={};t=h["t"](t,s.PARSERS_,e,[]);return t};s.readElement_=function(e,t){var r={};for(var n=0,i=e.attributes.length;n<i;n++){var a=e.attributes.item(n);r[a.name]=a.value}if(t.length===1){r["type"]=r["type"].split(":").pop()}return r};s.readComplexType_=function(e,t){var r=e.getAttribute("name");var n=h["t"]({name:r},s.COMPLEX_TYPE_PARSERS_,e,t);n["complexContent"]=n["complexContent"]["extension"]["sequence"]["element"];return n};s.readComplexContent_=function(e,t){return h["t"]({},s.COMPLEX_CONTENT_PARSERS_,e,t)};s.readExtension_=function(e,t){return h["t"]({},s.EXTENSION_PARSERS_,e,t)};s.readSequence_=function(e,t){return h["t"]({},s.SEQUENCE_PARSERS_,e,t)};s.NAMESPACE_URIS_=[null,"http://www.w3.org/2001/XMLSchema"];s.PARSERS_=L["a"].assert(h["q"](s.NAMESPACE_URIS_,{element:h["l"](s.readElement_),complexType:h["l"](s.readComplexType_)}));s.COMPLEX_TYPE_PARSERS_=L["a"].assert(h["q"](s.NAMESPACE_URIS_,{complexContent:h["m"](s.readComplexContent_)}));s.COMPLEX_CONTENT_PARSERS_=L["a"].assert(h["q"](s.NAMESPACE_URIS_,{extension:h["m"](s.readExtension_)}));s.EXTENSION_PARSERS_=L["a"].assert(h["q"](s.NAMESPACE_URIS_,{sequence:h["m"](s.readSequence_)}));s.SEQUENCE_PARSERS_=L["a"].assert(h["q"](s.NAMESPACE_URIS_,{element:h["l"](s.readElement_)}));var l=s;var u=r(201);var d=r(4);var f=[null,"http://www.opengis.net/wms"];var p=Object(h["q"])(f,{Service:Object(h["m"])($),Capability:Object(h["m"])(N)});var g=Object(h["q"])(f,{Request:Object(h["m"])(z),Exception:Object(h["m"])(H),Layer:Object(h["m"])(W)});var m=function(e){function t(){e.call(this);this.version=undefined}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.readFromDocument=function e(t){for(var r=t.firstChild;r;r=r.nextSibling){if(r.nodeType==Node.ELEMENT_NODE){return this.readFromNode(r)}}return null};t.prototype.readFromNode=function e(t){this.version=t.getAttribute("version").trim();var r=Object(h["t"])({version:this.version},p,t,[]);return r?r:null};return t}(o["a"]);var _=Object(h["q"])(f,{Name:Object(h["m"])(d["h"]),Title:Object(h["m"])(d["h"]),Abstract:Object(h["m"])(d["h"]),KeywordList:Object(h["m"])(te),OnlineResource:Object(h["m"])(u["a"]),ContactInformation:Object(h["m"])(F),Fees:Object(h["m"])(d["h"]),AccessConstraints:Object(h["m"])(d["h"]),LayerLimit:Object(h["m"])(d["f"]),MaxWidth:Object(h["m"])(d["f"]),MaxHeight:Object(h["m"])(d["f"])});var y=Object(h["q"])(f,{ContactPersonPrimary:Object(h["m"])(G),ContactPosition:Object(h["m"])(d["h"]),ContactAddress:Object(h["m"])(U),ContactVoiceTelephone:Object(h["m"])(d["h"]),ContactFacsimileTelephone:Object(h["m"])(d["h"]),ContactElectronicMailAddress:Object(h["m"])(d["h"])});var b=Object(h["q"])(f,{ContactPerson:Object(h["m"])(d["h"]),ContactOrganization:Object(h["m"])(d["h"])});var w=Object(h["q"])(f,{AddressType:Object(h["m"])(d["h"]),Address:Object(h["m"])(d["h"]),City:Object(h["m"])(d["h"]),StateOrProvince:Object(h["m"])(d["h"]),PostCode:Object(h["m"])(d["h"]),Country:Object(h["m"])(d["h"])});var S=Object(h["q"])(f,{Format:Object(h["i"])(d["h"])});var C=Object(h["q"])(f,{Name:Object(h["m"])(d["h"]),Title:Object(h["m"])(d["h"]),Abstract:Object(h["m"])(d["h"]),KeywordList:Object(h["m"])(te),CRS:Object(h["l"])(d["h"]),EX_GeographicBoundingBox:Object(h["m"])(R),BoundingBox:Object(h["l"])(P),Dimension:Object(h["l"])(V),Attribution:Object(h["m"])(D),AuthorityURL:Object(h["l"])(Q),Identifier:Object(h["l"])(d["h"]),MetadataURL:Object(h["l"])(J),DataURL:Object(h["l"])(q),FeatureListURL:Object(h["l"])(q),Style:Object(h["l"])(ee),MinScaleDenominator:Object(h["m"])(d["d"]),MaxScaleDenominator:Object(h["m"])(d["d"]),Layer:Object(h["l"])(Y)});var O=Object(h["q"])(f,{Title:Object(h["m"])(d["h"]),OnlineResource:Object(h["m"])(u["a"]),LogoURL:Object(h["m"])(Z)});var x=Object(h["q"])(f,{westBoundLongitude:Object(h["m"])(d["d"]),eastBoundLongitude:Object(h["m"])(d["d"]),southBoundLatitude:Object(h["m"])(d["d"]),northBoundLatitude:Object(h["m"])(d["d"])});var T=Object(h["q"])(f,{GetCapabilities:Object(h["m"])(X),GetMap:Object(h["m"])(X),GetFeatureInfo:Object(h["m"])(X)});var E=Object(h["q"])(f,{Format:Object(h["l"])(d["h"]),DCPType:Object(h["l"])(B)});var M=Object(h["q"])(f,{HTTP:Object(h["m"])(K)});var A=Object(h["q"])(f,{Get:Object(h["m"])(q),Post:Object(h["m"])(q)});var k=Object(h["q"])(f,{Name:Object(h["m"])(d["h"]),Title:Object(h["m"])(d["h"]),Abstract:Object(h["m"])(d["h"]),LegendURL:Object(h["l"])(Z),StyleSheetURL:Object(h["m"])(q),StyleURL:Object(h["m"])(q)});var j=Object(h["q"])(f,{Format:Object(h["m"])(d["h"]),OnlineResource:Object(h["m"])(u["a"])});var I=Object(h["q"])(f,{Keyword:Object(h["i"])(d["h"])});function D(e,t){return Object(h["t"])({},O,e,t)}function P(e,t){var r=[Object(d["e"])(e.getAttribute("minx")),Object(d["e"])(e.getAttribute("miny")),Object(d["e"])(e.getAttribute("maxx")),Object(d["e"])(e.getAttribute("maxy"))];var n=[Object(d["e"])(e.getAttribute("resx")),Object(d["e"])(e.getAttribute("resy"))];return{crs:e.getAttribute("CRS"),extent:r,res:n}}function R(e,t){var r=Object(h["t"])({},x,e,t);if(!r){return undefined}var n=r["westBoundLongitude"];var i=r["southBoundLatitude"];var a=r["eastBoundLongitude"];var o=r["northBoundLatitude"];if(n===undefined||i===undefined||a===undefined||o===undefined){return undefined}return[n,i,a,o]}function N(e,t){return Object(h["t"])({},g,e,t)}function $(e,t){return Object(h["t"])({},_,e,t)}function F(e,t){return Object(h["t"])({},y,e,t)}function G(e,t){return Object(h["t"])({},b,e,t)}function U(e,t){return Object(h["t"])({},w,e,t)}function H(e,t){return Object(h["t"])([],S,e,t)}function W(e,t){return Object(h["t"])({},C,e,t)}function Y(e,t){var r=t[t.length-1];var n=Object(h["t"])({},C,e,t);if(!n){return undefined}var i=Object(d["b"])(e.getAttribute("queryable"));if(i===undefined){i=r["queryable"]}n["queryable"]=i!==undefined?i:false;var a=Object(d["g"])(e.getAttribute("cascaded"));if(a===undefined){a=r["cascaded"]}n["cascaded"]=a;var o=Object(d["b"])(e.getAttribute("opaque"));if(o===undefined){o=r["opaque"]}n["opaque"]=o!==undefined?o:false;var s=Object(d["b"])(e.getAttribute("noSubsets"));if(s===undefined){s=r["noSubsets"]}n["noSubsets"]=s!==undefined?s:false;var l=Object(d["e"])(e.getAttribute("fixedWidth"));if(!l){l=r["fixedWidth"]}n["fixedWidth"]=l;var u=Object(d["e"])(e.getAttribute("fixedHeight"));if(!u){u=r["fixedHeight"]}n["fixedHeight"]=u;var c=["Style","CRS","AuthorityURL"];c.forEach(function(e){if(e in r){var t=n[e]||[];n[e]=t.concat(r[e])}});var f=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];f.forEach(function(e){if(!(e in n)){var t=r[e];n[e]=t}});return n}function V(e,t){var r={name:e.getAttribute("name"),units:e.getAttribute("units"),unitSymbol:e.getAttribute("unitSymbol"),default:e.getAttribute("default"),multipleValues:Object(d["b"])(e.getAttribute("multipleValues")),nearestValue:Object(d["b"])(e.getAttribute("nearestValue")),current:Object(d["b"])(e.getAttribute("current")),values:Object(d["h"])(e)};return r}function q(e,t){return Object(h["t"])({},j,e,t)}function z(e,t){return Object(h["t"])({},T,e,t)}function B(e,t){return Object(h["t"])({},M,e,t)}function K(e,t){return Object(h["t"])({},A,e,t)}function X(e,t){return Object(h["t"])({},E,e,t)}function Z(e,t){var r=q(e,t);if(r){var n=[Object(d["g"])(e.getAttribute("width")),Object(d["g"])(e.getAttribute("height"))];r["size"]=n;return r}return undefined}function Q(e,t){var r=q(e,t);if(r){r["name"]=e.getAttribute("name");return r}return undefined}function J(e,t){var r=q(e,t);if(r){r["type"]=e.getAttribute("type");return r}return undefined}function ee(e,t){return Object(h["t"])({},k,e,t)}function te(e,t){return Object(h["t"])([],I,e,t)}var re=m;var ne=r(376);var ie=r(9);var ae=r(127);var oe=r(3);var se=r(114);var le=function(){e.$inject=["$http","$q","ngeoRuleHelper","ngeoWMSTime"];function e(e,t,r,n){this.http_=e;this.q_=t;this.ngeoRuleHelper_=r;this.ngeoWMSTime_=n;this.requestCancelers_=[];this.wmsGetCapabilitiesPromises_={};this.wmtsGetCapabilitiesPromises_={}}var t=e.prototype;t.issue=function e(t){var r=[];var n=t.map;this.cancelStillRunningRequests_();var i;if(t.queryableDataSources){i=t.queryableDataSources}else{var a=t.dataSources;L["a"].assert(a,"DataSources should be set");i=this.getQueryableDataSources(a,n)}var o=this.getCombinableWFSDataSources_(i.wfs);r.push(this.issueCombinedWFS_(o,t));var s=t.coordinate;if(s){var l=this.getCombinableWMSDataSources_(i.wms);r.push(this.issueCombinedWMS_(l,t))}return this.q_.all(r).then(this.handleCombinedQueryResult_.bind(this))};t.getQueryableDataSources=function e(t,r){var n={wfs:[],wms:[]};var i=L["a"].assertNumber(r.getView().getResolution());for(var a=t,o=Array.isArray(a),s=0,a=o?a:a[Symbol.iterator]();;){var l;if(o){if(s>=a.length)break;l=a[s++]}else{s=a.next();if(s.done)break;l=s.value}var u=l;if(!this.isDataSourceQueryable_(u,i)){continue}if(u instanceof v["a"]){if(u.supportsWFS){n.wfs.push(u)}else{n.wms.push(u)}}}return n};t.wfsDescribeFeatureType=function e(t){L["a"].assert(t.supportsAttributes,"The data source must support WFS, have a single OGCLayer that\n      is queryable in order to issue WFS DescribeFeatureType requests");var r=t.getOGCLayerNames();var n=ae["a"](L["a"].assertString(t.wfsUrl),{REQUEST:"DescribeFeatureType",SERVICE:"WFS",VERSION:"2.0.0",TYPENAME:r});return this.http_.get(n).then(function(e){var t=new l;return t.read(e.data)})};t.wmsFindLayerCapability=function e(t,r){var n=null;for(var i=t,a=Array.isArray(i),o=0,i=a?i:i[Symbol.iterator]();;){var s;if(a){if(o>=i.length)break;s=i[o++]}else{o=i.next();if(o.done)break;s=o.value}var l=s;if(l["Name"]===r){n=l;break}else if(l["Layer"]){n=this.wmsFindLayerCapability(l["Layer"],r);if(n){break}}}return n};t.wmsGetCapabilities=function e(t,r){var n=r!==false;var i={REQUEST:"GetCapabilities",SERVICE:"WMS",VERSION:"1.3.0"};var a=ae["a"](t,i);var o;if(!n||!this.wmsGetCapabilitiesPromises_[t]){o=this.http_.get(a).then(function(e){var t=new re;return t.read(e.data)})}else if(n&&this.wmsGetCapabilitiesPromises_[t]){o=this.wmsGetCapabilitiesPromises_[t]}L["a"].assert(o);if(n&&!this.wmsGetCapabilitiesPromises_[t]){this.wmsGetCapabilitiesPromises_[t]=o}return o};t.wmtsFindLayerCapability=function e(t,r){var n=null;for(var i=t,a=Array.isArray(i),o=0,i=a?i:i[Symbol.iterator]();;){var s;if(a){if(o>=i.length)break;s=i[o++]}else{o=i.next();if(o.done)break;s=o.value}var l=s;if(l["Identifier"]===r){n=l;break}}return n};t.wmtsGetCapabilities=function e(t,r){var n=r!==false;var i;if(!n||!this.wmtsGetCapabilitiesPromises_[t]){i=this.http_.get(t).then(function(e){var t=new ne["a"];return t.read(e.data)})}else if(n&&this.wmtsGetCapabilitiesPromises_[t]){i=this.wmtsGetCapabilitiesPromises_[t]}L["a"].assert(i);if(n&&!this.wmtsGetCapabilitiesPromises_[t]){this.wmtsGetCapabilitiesPromises_[t]=i}return i};t.handleCombinedQueryResult_=function e(t){var r={};for(var n=t,i=Array.isArray(n),a=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(a>=n.length)break;o=n[a++]}else{a=n.next();if(a.done)break;o=a.value}var s=o;for(var l in s){var u=Number(l);r[u]=s[u]}}return r};t.handleQueryResult_=function e(t,r,n,i){var a={};for(var o=t,s=Array.isArray(o),l=0,o=s?o:o[Symbol.iterator]();;){var u;if(s){if(l>=o.length)break;u=o[l++]}else{l=o.next();if(l.done)break;u=l.value}var c=u;var f=void 0;var h=void 0;var d=void 0;if(typeof i==="number"){f=[];h=true;d=i}else{if(c instanceof v["a"]){f=this.readAndTypeFeatures_(c,i.data,n)}else{f=[]}}var p=c.id;this.setUniqueIds_(f,c.id);a[p]={features:f,limit:r,tooManyFeatures:h,totalFeatureCount:d}}return a};t.readAndTypeFeatures_=function e(r,n,i){var a=this;var o=[];var s;var t=this.getSetOlFormatTypes_(r,i).slice();t.forEach(function(t){a.getSetOlFormatTypes_(r,i,[t]);if(i){s=r.wfsFormat.readFeatures(n)}else{s=r.wmsFormat.readFeatures(n)}if(s.length>0){s.forEach(function(e){e.set("ngeo_feature_type_",t);o.push(e)})}});this.getSetOlFormatTypes_(r,i,t);return o};t.getSetOlFormatTypes_=function e(t,r,n){var i;if(r){if(n){t.wfsFormat.setFeatureType(n)}i=t.wfsFormat.getFeatureType()}else{if(n){t.wmsFormat.setLayers(n)}i=t.wmsFormat.getLayers()}if(!i){return[]}return Array.isArray(i)?i:[i]};t.issueCombinedWFS_=function e(t,S){var C=this;var O=[];var x=L["a"].assertNumber(S.limit);var r=S.map;var n=r.getView();var T=L["a"].assertNumber(n.getResolution());var i=n.getProjection();var E=i.getCode();var M=S.wfsCount===true;var A;var a=S.coordinate;if(a){var o=S.tolerancePx;L["a"].assert(o);var s=o*T;A=oe["c"](oe["m"](a),s)}else{A=S.extent}var k=new c["a"];var j=new XMLSerializer;var l=function e(){if(D){if(P>=I.length)return"break";R=I[P++]}else{P=I.next();if(P.done)return"break";R=P.value}var r=R;var a=void 0;var t=void 0;var n=[];var o=void 0;var s={};for(var i=r,l=Array.isArray(i),u=0,i=l?i:i[Symbol.iterator]();;){var c;if(l){if(u>=i.length)break;c=i[u++]}else{u=i.next();if(u.done)break;c=u.value}var f=c;if(!a){t=f.wfsFeatureNS;var h=f.wfsFeaturePrefix;var d=f.geometryName;var p=f.wfsOutputFormat;a={bbox:A,featureNS:t,featurePrefix:h,geometryName:d,outputFormat:p,srsName:E};o=f.wfsUrl;ie["a"](s,f.activeDimensions)}n=n.concat(f.getInRangeOGCLayerNames(T,true));var v=void 0;if(S.filter){v=C.ngeoRuleHelper_.createFilter({dataSource:f,filter:S.filter,incDimensions:true,incTime:true})}else if(f.filterRules&&f.filterRules.length||f.timeRangeValue||f.dimensionsFiltersConfig&&Object.keys(f.dimensionsFiltersConfig).length>0){L["a"].assert(r.length===1,"A data source having filterRules or timeRangeValue should issue\n            a single query, alone.");v=C.ngeoRuleHelper_.createFilter({dataSource:f,incDimensions:true,incTime:true,srsName:E})}if(v){a["filter"]=v}}L["a"].assert(a);a.featureTypes=n;L["a"].assert(o);var g=C.q_.defer();O.push(g.promise.then(C.handleQueryResult_.bind(C,r,x,true)));var m=void 0;if(M){var _=ie["a"]({resultType:"hits"},a);var y=k.writeGetFeature(_);var b=j.serializeToString(y);var w=C.registerCanceler_();m=C.http_.post(o,b,{params:s,headers:{"Content-Type":"text/xml; charset=UTF-8"},timeout:w.promise}).then(function(e){var t=r[0].wfsFormat.readFeatureCollectionMetadata(e.data);return t["numberOfFeatures"]}.bind(C))}else{m=C.q_.resolve()}m.then(function(e){if(e===undefined||e<x){var t=ie["a"]({maxFeatures:x},a);var r=k.writeGetFeature(t);var n=j.serializeToString(r);L["a"].assertString(o);var i=C.registerCanceler_();C.http_.post(o,n,{params:s,headers:{"Content-Type":"text/xml; charset=UTF-8"},timeout:i.promise}).then(function(e){g.resolve(e)})}else{g.resolve(e)}})};for(var I=t,D=Array.isArray(I),P=0,I=D?I:I[Symbol.iterator]();;){var R;var u=l();if(u==="break")break}return this.q_.all(O).then(this.handleCombinedQueryResult_.bind(this))};t.issueCombinedWMS_=function e(t,r){var n=[];var i=L["a"].assertNumber(r.limit);var a=r.map;var o=a.getView();var s=L["a"].assertNumber(o.getResolution());var l=o.getProjection();var u=l.getCode();var c=r.coordinate;L["a"].assert(c);for(var f=t,h=Array.isArray(f),d=0,f=h?f:f[Symbol.iterator]();;){var p;if(h){if(d>=f.length)break;p=f[d++]}else{d=f.next();if(d.done)break;p=d.value}var v=p;var g=void 0;var m=[];var _=void 0;var y=false;var b={};var w=null;var S=null;for(var C=v,O=Array.isArray(C),x=0,C=O?C:C[Symbol.iterator]();;){var T;if(O){if(x>=C.length)break;T=C[x++]}else{x=C.next();if(x.done)break;T=x.value}var E=T;if(!_){_=E.wmsInfoFormat;g=E.wmsUrl}m=m.concat(E.getInRangeOGCLayerNames(s,true));if(!y){ie["a"](b,E.activeDimensions);y=true}if(E.filterRules&&E.filterRules.length){L["a"].assert(v.length===1);S=E.getFiltrableOGCLayerName();w=this.ngeoRuleHelper_.createFilterString({dataSource:E,srsName:u})}if(E.timeRangeValue!==null&&E.timeProperty){L["a"].assert(v.length===1);b["TIME"]=this.ngeoWMSTime_.formatWMSTimeParam(E.timeProperty,E.timeRangeValue)}}b["LAYERS"]=m;b["QUERY_LAYERS"]=m;if(w&&S){var M=null;if(m.length===1){M=w}else{var A=[];for(var k=0,j=m.length;k<j;k++){if(m[k]===S){A.push("("+w+")")}else{A.push("()")}}M=A.join("")}b["FILTER"]=M}L["a"].assert(g);var I=new se["a"]({params:b,url:g});var D=L["a"].assertString(I.getGetFeatureInfoUrl(c,s,u,{FEATURE_COUNT:i,INFO_FORMAT:_}));var P=this.registerCanceler_();n.push(this.http_.get(D,{timeout:P.promise}).then(this.handleQueryResult_.bind(this,v,i,false)))}return this.q_.all(n).then(this.handleCombinedQueryResult_.bind(this))};t.getCombinableWFSDataSources_=function e(t){var r=[];var n=[];for(var i=t,a=Array.isArray(i),o=0,i=a?i:i[Symbol.iterator]();;){var s;if(a){if(o>=i.length)break;s=i[o++]}else{o=i.next();if(o.done)break;s=o.value}var l=s;if(l.combinableForWFS){var u=false;for(var c=0;c<r.length;c++){var f=r[c];if(l.combinableWithDataSourceForWFS(f[0])){f.push(l);u=true}}if(!u){r.push([l])}}else{n.push([l])}}return r.concat(n)};t.getCombinableWMSDataSources_=function e(t){var r=[];var n=[];for(var i=t,a=Array.isArray(i),o=0,i=a?i:i[Symbol.iterator]();;){var s;if(a){if(o>=i.length)break;s=i[o++]}else{o=i.next();if(o.done)break;s=o.value}var l=s;if(l.combinableForWMS){var u=false;for(var c=0;c<r.length;c++){var f=r[c];if(l.combinableWithDataSourceForWMS(f[0])){f.push(l);u=true}}if(!u){r.push([l])}}else{n.push([l])}}return r.concat(n)};t.isDataSourceQueryable_=function e(t,r){var n=t.visible&&t.inRange&&t.queryable;if(n&&t instanceof v["a"]){var i=t;n=i.isAnyOGCLayerInRange(r,true)}return n};t.setUniqueIds_=function e(t,r){t.forEach(function(e){if(e.getId()!==undefined){var t=r+"_"+e.getId();e.setId(t)}})};t.registerCanceler_=function e(){var t=this.q_.defer();this.requestCancelers_.push(t);return t};t.cancelStillRunningRequests_=function e(){for(var t=this.requestCancelers_,r=Array.isArray(t),n=0,t=r?t:t[Symbol.iterator]();;){var i;if(r){if(n>=t.length)break;i=t[n++]}else{n=t.next();if(n.done)break;i=n.value}var a=i;a.resolve()}this.requestCancelers_.length=0};return e}();le.CombinedDataSources;le.module=angular.module("ngeoQuerent",[n["a"].module.name,i["a"].module.name]);le.module.service("ngeoQuerent",le);var ue=t["a"]=le},function(e,t,r){"use strict";var n=r(55);var a=r(1);var i=r(118);var o=r(2);var s=r(12);var l=r(50);var u=r(161);var c=r(10);var f="projection";var h="coordinateFormat";var d=function(n){function e(e){var t=e?e:{};var r=document.createElement("div");r.className=t.className!==undefined?t.className:"ol-mouse-position";n.call(this,{element:r,render:t.render||p,target:t.target});Object(o["a"])(this,Object(l["b"])(f),this.handleProjectionChanged_,this);if(t.coordinateFormat){this.setCoordinateFormat(t.coordinateFormat)}if(t.projection){this.setProjection(t.projection)}this.undefinedHTML_=t.undefinedHTML!==undefined?t.undefinedHTML:"&#160;";this.renderOnMouseOut_=!!this.undefinedHTML_;this.renderedHTML_=r.innerHTML;this.mapProjection_=null;this.transform_=null;this.lastMouseMovePixel_=null}if(n)e.__proto__=n;e.prototype=Object.create(n&&n.prototype);e.prototype.constructor=e;e.prototype.handleProjectionChanged_=function e(){this.transform_=null};e.prototype.getCoordinateFormat=function e(){return this.get(h)};e.prototype.getProjection=function e(){return this.get(f)};e.prototype.handleMouseMove=function e(t){var r=this.getMap();this.lastMouseMovePixel_=r.getEventPixel(t);this.updateHTML_(this.lastMouseMovePixel_)};e.prototype.handleMouseOut=function e(t){this.updateHTML_(null);this.lastMouseMovePixel_=null};e.prototype.setMap=function e(t){n.prototype.setMap.call(this,t);if(t){var r=t.getViewport();this.listenerKeys.push(Object(o["a"])(r,s["a"].MOUSEMOVE,this.handleMouseMove,this),Object(o["a"])(r,s["a"].TOUCHSTART,this.handleMouseMove,this));if(this.renderOnMouseOut_){this.listenerKeys.push(Object(o["a"])(r,s["a"].MOUSEOUT,this.handleMouseOut,this),Object(o["a"])(r,s["a"].TOUCHEND,this.handleMouseOut,this))}}};e.prototype.setCoordinateFormat=function e(t){this.set(h,t)};e.prototype.setProjection=function e(t){this.set(f,Object(c["g"])(t))};e.prototype.updateHTML_=function e(t){var r=this.undefinedHTML_;if(t&&this.mapProjection_){if(!this.transform_){var n=this.getProjection();if(n){this.transform_=Object(c["j"])(this.mapProjection_,n)}else{this.transform_=c["k"]}}var i=this.getMap();var a=i.getCoordinateFromPixel(t);if(a){this.transform_(a,a);var o=this.getCoordinateFormat();if(o){r=o(a)}else{r=a.toString()}}}if(!this.renderedHTML_||r!==this.renderedHTML_){this.element.innerHTML=r;this.renderedHTML_=r}};return e}(u["a"]);function p(e){var t=e.frameState;if(!t){this.mapProjection_=null}else{if(this.mapProjection_!=t.viewState.projection){this.mapProjection_=t.viewState.projection;this.transform_=null}}}var v=d;var g=r(177);var m=angular.module("gmfMapMouseposition",[i["a"].name]);m.run(["$templateCache",function(e){e.put("gmf/map/mousepositionComponent",r(498))}]);m.value("gmfMapMousepositionTemplateUrl",function(e){var t=e["gmfMapMousepositionTemplateUrl"];return t!==undefined?t:"gmf/map/mousepositionComponent"});_.$inject=["$attrs","gmfMapMousepositionTemplateUrl"];function _(e,t){return t(e)}m.component_={controller:"gmfMousepositionController as ctrl",bindings:{map:"<gmfMousepositionMap",projections:"<gmfMousepositionProjections"},templateUrl:_};m.component("gmfMouseposition",m.component_);m.Controller_=function(e,t,r,n){this.map;this.projections;this.projection;this.$scope_=r;this.gettextCatalog_=n;this.$element_=e;this.$filter_=t;this.control_=null};m.Controller_.$inject=["$element","$filter","$scope","gettextCatalog"];m.Controller_.prototype.$onInit=function(){var e=this;this.$scope_.$on("gettextLanguageChanged",function(){e.initOlControl_()});this.initOlControl_()};m.Controller_.prototype.initOlControl_=function(){if(this.control_!==null){this.map.removeControl(this.control_)}var e=function e(t){var r=this.projection.filter.split(":");var n=this.$filter_(r.shift());a["a"].assertFunction(n);var i=r;i.unshift(t);return n.apply(this,i)};var t=this.gettextCatalog_;this.control_=new v({className:"gmf-mouseposition-control",coordinateFormat:e.bind(this),target:angular.element(".gmf-mouseposition-control-target",this.$element_)[0],undefinedHTML:t.getString("Coordinates")});this.setProjection(this.projections[0]);this.map.addControl(this.control_)};m.Controller_.prototype.setProjection=function(e){this.control_.setProjection(c["g"](e.code));this.projection=e};m.controller("gmfMousepositionController",m.Controller_);var y=m;var b=angular.module("gmfMapModule",[n["a"].name,y.name]);var w=t["a"]=b},function(e,t,r){"use strict";var n=r(425);var i=r(27);var a=r.n(i);var p=r(60);function v(){v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};return v.apply(this,arguments)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function g(e,t,r){if(t)o(e.prototype,t);if(r)o(e,r);return e}var s=function(s){var r="modal";var t="4.1.3";var o="bs.modal";var n="."+o;var e=".data-api";var i=s.fn[r];var a=27;var l={backdrop:true,keyboard:true,focus:true,show:true};var u={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"};var c={HIDE:"hide"+n,HIDDEN:"hidden"+n,SHOW:"show"+n,SHOWN:"shown"+n,FOCUSIN:"focusin"+n,RESIZE:"resize"+n,CLICK_DISMISS:"click.dismiss"+n,KEYDOWN_DISMISS:"keydown.dismiss"+n,MOUSEUP_DISMISS:"mouseup.dismiss"+n,MOUSEDOWN_DISMISS:"mousedown.dismiss"+n,CLICK_DATA_API:"click"+n+e};var f={SCROLLBAR_MEASURER:"modal-scrollbar-measure",BACKDROP:"modal-backdrop",OPEN:"modal-open",FADE:"fade",SHOW:"show"};var h={DIALOG:".modal-dialog",DATA_TOGGLE:'[data-toggle="modal"]',DATA_DISMISS:'[data-dismiss="modal"]',FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top"};var d=function(){function i(e,t){this._config=this._getConfig(t);this._element=e;this._dialog=e.querySelector(h.DIALOG);this._backdrop=null;this._isShown=false;this._isBodyOverflowing=false;this._ignoreBackdropClick=false;this._scrollbarWidth=0}var e=i.prototype;e.toggle=function e(t){return this._isShown?this.hide():this.show(t)};e.show=function e(t){var r=this;if(this._isTransitioning||this._isShown){return}if(s(this._element).hasClass(f.FADE)){this._isTransitioning=true}var n=s.Event(c.SHOW,{relatedTarget:t});s(this._element).trigger(n);if(this._isShown||n.isDefaultPrevented()){return}this._isShown=true;this._checkScrollbar();this._setScrollbar();this._adjustDialog();s(document.body).addClass(f.OPEN);this._setEscapeEvent();this._setResizeEvent();s(this._element).on(c.CLICK_DISMISS,h.DATA_DISMISS,function(e){return r.hide(e)});s(this._dialog).on(c.MOUSEDOWN_DISMISS,function(){s(r._element).one(c.MOUSEUP_DISMISS,function(e){if(s(e.target).is(r._element)){r._ignoreBackdropClick=true}})});this._showBackdrop(function(){return r._showElement(t)})};e.hide=function e(t){var r=this;if(t){t.preventDefault()}if(this._isTransitioning||!this._isShown){return}var n=s.Event(c.HIDE);s(this._element).trigger(n);if(!this._isShown||n.isDefaultPrevented()){return}this._isShown=false;var i=s(this._element).hasClass(f.FADE);if(i){this._isTransitioning=true}this._setEscapeEvent();this._setResizeEvent();s(document).off(c.FOCUSIN);s(this._element).removeClass(f.SHOW);s(this._element).off(c.CLICK_DISMISS);s(this._dialog).off(c.MOUSEDOWN_DISMISS);if(i){var a=p["a"].getTransitionDurationFromElement(this._element);s(this._element).one(p["a"].TRANSITION_END,function(e){return r._hideModal(e)}).emulateTransitionEnd(a)}else{this._hideModal()}};e.dispose=function e(){s.removeData(this._element,o);s(window,document,this._element,this._backdrop).off(n);this._config=null;this._element=null;this._dialog=null;this._backdrop=null;this._isShown=null;this._isBodyOverflowing=null;this._ignoreBackdropClick=null;this._scrollbarWidth=null};e.handleUpdate=function e(){this._adjustDialog()};e._getConfig=function e(t){t=v({},l,t);p["a"].typeCheckConfig(r,t,u);return t};e._showElement=function e(t){var r=this;var n=s(this._element).hasClass(f.FADE);if(!this._element.parentNode||this._element.parentNode.nodeType!==Node.ELEMENT_NODE){document.body.appendChild(this._element)}this._element.style.display="block";this._element.removeAttribute("aria-hidden");this._element.scrollTop=0;if(n){p["a"].reflow(this._element)}s(this._element).addClass(f.SHOW);if(this._config.focus){this._enforceFocus()}var i=s.Event(c.SHOWN,{relatedTarget:t});var a=function e(){if(r._config.focus){r._element.focus()}r._isTransitioning=false;s(r._element).trigger(i)};if(n){var o=p["a"].getTransitionDurationFromElement(this._element);s(this._dialog).one(p["a"].TRANSITION_END,a).emulateTransitionEnd(o)}else{a()}};e._enforceFocus=function e(){var t=this;s(document).off(c.FOCUSIN).on(c.FOCUSIN,function(e){if(document!==e.target&&t._element!==e.target&&s(t._element).has(e.target).length===0){t._element.focus()}})};e._setEscapeEvent=function e(){var t=this;if(this._isShown&&this._config.keyboard){s(this._element).on(c.KEYDOWN_DISMISS,function(e){if(e.which===a){e.preventDefault();t.hide()}})}else if(!this._isShown){s(this._element).off(c.KEYDOWN_DISMISS)}};e._setResizeEvent=function e(){var t=this;if(this._isShown){s(window).on(c.RESIZE,function(e){return t.handleUpdate(e)})}else{s(window).off(c.RESIZE)}};e._hideModal=function e(){var t=this;this._element.style.display="none";this._element.setAttribute("aria-hidden",true);this._isTransitioning=false;this._showBackdrop(function(){s(document.body).removeClass(f.OPEN);t._resetAdjustments();t._resetScrollbar();s(t._element).trigger(c.HIDDEN)})};e._removeBackdrop=function e(){if(this._backdrop){s(this._backdrop).remove();this._backdrop=null}};e._showBackdrop=function e(t){var r=this;var n=s(this._element).hasClass(f.FADE)?f.FADE:"";if(this._isShown&&this._config.backdrop){this._backdrop=document.createElement("div");this._backdrop.className=f.BACKDROP;if(n){this._backdrop.classList.add(n)}s(this._backdrop).appendTo(document.body);s(this._element).on(c.CLICK_DISMISS,function(e){if(r._ignoreBackdropClick){r._ignoreBackdropClick=false;return}if(e.target!==e.currentTarget){return}if(r._config.backdrop==="static"){r._element.focus()}else{r.hide()}});if(n){p["a"].reflow(this._backdrop)}s(this._backdrop).addClass(f.SHOW);if(!t){return}if(!n){t();return}var i=p["a"].getTransitionDurationFromElement(this._backdrop);s(this._backdrop).one(p["a"].TRANSITION_END,t).emulateTransitionEnd(i)}else if(!this._isShown&&this._backdrop){s(this._backdrop).removeClass(f.SHOW);var a=function e(){r._removeBackdrop();if(t){t()}};if(s(this._element).hasClass(f.FADE)){var o=p["a"].getTransitionDurationFromElement(this._backdrop);s(this._backdrop).one(p["a"].TRANSITION_END,a).emulateTransitionEnd(o)}else{a()}}else if(t){t()}};e._adjustDialog=function e(){var t=this._element.scrollHeight>document.documentElement.clientHeight;if(!this._isBodyOverflowing&&t){this._element.style.paddingLeft=this._scrollbarWidth+"px"}if(this._isBodyOverflowing&&!t){this._element.style.paddingRight=this._scrollbarWidth+"px"}};e._resetAdjustments=function e(){this._element.style.paddingLeft="";this._element.style.paddingRight=""};e._checkScrollbar=function e(){var t=document.body.getBoundingClientRect();this._isBodyOverflowing=t.left+t.right<window.innerWidth;this._scrollbarWidth=this._getScrollbarWidth()};e._setScrollbar=function e(){var i=this;if(this._isBodyOverflowing){var t=[].slice.call(document.querySelectorAll(h.FIXED_CONTENT));var r=[].slice.call(document.querySelectorAll(h.STICKY_CONTENT));s(t).each(function(e,t){var r=t.style.paddingRight;var n=s(t).css("padding-right");s(t).data("padding-right",r).css("padding-right",parseFloat(n)+i._scrollbarWidth+"px")});s(r).each(function(e,t){var r=t.style.marginRight;var n=s(t).css("margin-right");s(t).data("margin-right",r).css("margin-right",parseFloat(n)-i._scrollbarWidth+"px")});var n=document.body.style.paddingRight;var a=s(document.body).css("padding-right");s(document.body).data("padding-right",n).css("padding-right",parseFloat(a)+this._scrollbarWidth+"px")}};e._resetScrollbar=function e(){var t=[].slice.call(document.querySelectorAll(h.FIXED_CONTENT));s(t).each(function(e,t){var r=s(t).data("padding-right");s(t).removeData("padding-right");t.style.paddingRight=r?r:""});var r=[].slice.call(document.querySelectorAll(""+h.STICKY_CONTENT));s(r).each(function(e,t){var r=s(t).data("margin-right");if(typeof r!=="undefined"){s(t).css("margin-right",r).removeData("margin-right")}});var n=s(document.body).data("padding-right");s(document.body).removeData("padding-right");document.body.style.paddingRight=n?n:""};e._getScrollbarWidth=function e(){var t=document.createElement("div");t.className=f.SCROLLBAR_MEASURER;document.body.appendChild(t);var r=t.getBoundingClientRect().width-t.clientWidth;document.body.removeChild(t);return r};i._jQueryInterface=function e(r,n){return this.each(function(){var e=s(this).data(o);var t=v({},l,s(this).data(),typeof r==="object"&&r?r:{});if(!e){e=new i(this,t);s(this).data(o,e)}if(typeof r==="string"){if(typeof e[r]==="undefined"){throw new TypeError('No method named "'+r+'"')}e[r](n)}else if(t.show){e.show(n)}})};g(i,null,[{key:"VERSION",get:function e(){return t}},{key:"Default",get:function e(){return l}}]);return i}();s(document).on(c.CLICK_DATA_API,h.DATA_TOGGLE,function(e){var t=this;var r;var n=p["a"].getSelectorFromElement(this);if(n){r=document.querySelector(n)}var i=s(r).data(o)?"toggle":v({},s(r).data(),s(this).data());if(this.tagName==="A"||this.tagName==="AREA"){e.preventDefault()}var a=s(r).one(c.SHOW,function(e){if(e.isDefaultPrevented()){return}a.one(c.HIDDEN,function(){if(s(t).is(":visible")){t.focus()}})});d._jQueryInterface.call(s(r),i,this)});s.fn[r]=d._jQueryInterface;s.fn[r].Constructor=d;s.fn[r].noConflict=function(){s.fn[r]=i;return d._jQueryInterface};return d}(a.a);var l=s;var u=r(1);var c=angular.module("ngeoModal",[]);c.component_={template:'<div class="modal fade" tabindex="-1" role="dialog">\n    <div class="modal-dialog">\n      <div class="modal-content">\n        <ng-transclude></ng-transclude>\n      </div>\n    </div>\n  </div>',require:{ngModel:"ngModel"},transclude:true,controller:"ngeoModalController",bindings:{resizable:"<ngeoModalResizable",closable:"<ngeoModalClosable"}};c.component("ngeoModal",c.component_);c.Controller_=function(){e.$inject=["$scope","$element"];function e(e,t){this.$element_=t;this.$scope_=e;this.modal_;this.closable;this.resizable;this.ngModel}var t=e.prototype;t.$onInit=function e(){var r=this;this.closable=this.closable!==false;this.modal_=this.$element_.children();if(!this.closable){this.modal_.attr("data-keyboard",false);this.modal_.attr("data-backdrop","static")}this.resizable=!!this.resizable;var t=this.modal_.find(".modal-dialog");t.draggable();if(this.resizable){t.resizable()}this.ngModel.$render=function(){r.modal_.modal(r.ngModel.$viewValue?"show":"hide")};this.modal_.on("shown.bs.modal hidden.bs.modal",function(e){var t=e.type;u["a"].assert(t=="shown"||t=="hidden");r.ngModel.$setViewValue(t=="shown")})};t.$onDestroy=function e(){this.modal_.modal("hide");var t=this.modal_.find(".modal-dialog");t.draggable("destroy");if(this.resizable){t.resizable("destroy")}};return e}();c.controller("ngeoModalController",c.Controller_);var f=t["a"]=c},function(e,t,r){"use strict";var g=r(1);var n=r(198);var i=r(132);var s=r(317);var l=r(42);var u=r(171);var a=function(){function e(){}var t=e.prototype;t.read=function e(t){return t.map(this.readFromComplexTypeElement_)};t.readFromComplexTypeElement_=function e(t){var r=g["a"].assertString(t["name"]);var n="alias"in t?g["a"].assertString(t["alias"]):null;var i=t["minOccurs"]!="0";var a={name:r,alias:n,required:i};var o=g["a"].assertString(t["type"]);if(!s["a"].setGeometryType(a,o)){if(o==="gml:TimeInstantType"||o==="dateTime"){a.type=l["a"].DATETIME}else if(o==="date"){a.type=l["a"].DATE}else if(o==="time"){a.type=l["a"].TIME}else if(o==="decimal"||o==="double"){a.type=l["a"].NUMBER;a.numType=u["a"].NumberType.FLOAT}else if(o==="integer"||o==="long"){a.type=l["a"].NUMBER;a.numType=u["a"].NumberType.INTEGER}else if(o==="boolean"){a.type=l["a"].BOOLEAN}else{a.type=l["a"].TEXT}}return a};return e}();var m=a;var o=r(216);var c=r(2);function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function h(e,t,r){if(t)f(e.prototype,t);if(r)f(e,r);return e}var d=function(){e.$inject=["$q","ngeoDataSources","ngeoQuerent"];function e(e,t,r){this.q_=e;this.collection_=t.collection;this.ngeoQuerent_=r;this.cache_={};c["a"](this.collection_,"add",this.handleDataSourcesAdd_,this);c["a"](this.collection_,"remove",this.handleDataSourcesRemove_,this)}var t=e.prototype;t.getDataSource=function e(t){return this.cache_[t]||null};t.getDataSourceAttributes=function e(p){var v=this.q_.defer();if(p.attributes){v.resolve(p.attributes)}else{this.ngeoQuerent_.wfsDescribeFeatureType(p).then(function(e){var t=p.getOGCLayerNames()[0];g["a"].assertString(t,"The data source should have only one ogcLayer.");for(var r=e.element,n=Array.isArray(r),i=0,r=n?r:r[Symbol.iterator]();;){var a;if(n){if(i>=r.length)break;a=r[i++]}else{i=r.next();if(i.done)break;a=i.value}var o=a;if(o.name===t){for(var s=e.complexType,l=Array.isArray(s),u=0,s=l?s:s[Symbol.iterator]();;){var c;if(l){if(u>=s.length)break;c=s[u++]}else{u=s.next();if(u.done)break;c=u.value}var f=c;if(f.name==o.type){var h=f.complexContent;var d=(new m).read(h);p.setAttributes(d);v.resolve(d);break}}}}})}return v.promise};t.handleDataSourcesAdd_=function e(t){var r=g["a"].assertInstanceof(t.element,n["a"]);this.cache_[r.id]=r};t.handleDataSourcesRemove_=function e(t){var r=g["a"].assertInstanceof(t.element,n["a"]);delete this.cache_[r.id]};h(e,[{key:"collection",get:function e(){return this.collection_}}]);return e}();d.module=angular.module("ngeoDataSourcesHelper",[i["a"].module.name,o["a"].module.name]);d.module.service("ngeoDataSourcesHelper",d);var p=t["a"]=d},function(e,t,r){"use strict";r.d(t,"b",function(){return a});r.d(t,"a",function(){return y});r.d(t,"c",function(){return n});var c=r(15);var p=r(7);
/**
 * @license
 * Latitude/longitude spherical geodesy formulae taken from
 * http://www.movable-type.co.uk/scripts/latlong.html
 * Licensed under CC-BY-3.0.
 */var v=6371008.8;function a(e,t,r){var n=r||v;var i=Object(c["i"])(e[1]);var a=Object(c["i"])(t[1]);var o=(a-i)/2;var s=Object(c["i"])(t[0]-e[0])/2;var l=Math.sin(o)*Math.sin(o)+Math.sin(s)*Math.sin(s)*Math.cos(i)*Math.cos(a);return 2*n*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}function g(e,t){var r=0;for(var n=0,i=e.length;n<i-1;++n){r+=a(e[n],e[n+1],t)}return r}function m(e,t){var r=t||{};var n=r.radius||v;var i=r.projection||"EPSG:3857";var a=e.getType();if(a!==p["a"].GEOMETRY_COLLECTION){e=e.clone().transform(i,"EPSG:4326")}var o=0;var s,l,u,c,f,h;switch(a){case p["a"].POINT:case p["a"].MULTI_POINT:{break}case p["a"].LINE_STRING:case p["a"].LINEAR_RING:{s=e.getCoordinates();o=g(s,n);break}case p["a"].MULTI_LINE_STRING:case p["a"].POLYGON:{s=e.getCoordinates();for(u=0,c=s.length;u<c;++u){o+=g(s[u],n)}break}case p["a"].MULTI_POLYGON:{s=e.getCoordinates();for(u=0,c=s.length;u<c;++u){l=s[u];for(f=0,h=l.length;f<h;++f){o+=g(l[f],n)}}break}case p["a"].GEOMETRY_COLLECTION:{var d=e.getGeometries();for(u=0,c=d.length;u<c;++u){o+=m(d[u],t)}break}default:{throw new Error("Unsupported geometry type: "+a)}}return o}function _(e,t){var r=0;var n=e.length;var i=e[n-1][0];var a=e[n-1][1];for(var o=0;o<n;o++){var s=e[o][0];var l=e[o][1];r+=Object(c["i"])(s-i)*(2+Math.sin(Object(c["i"])(a))+Math.sin(Object(c["i"])(l)));i=s;a=l}return r*t*t/2}function y(e,t){var r=t||{};var n=r.radius||v;var i=r.projection||"EPSG:3857";var a=e.getType();if(a!==p["a"].GEOMETRY_COLLECTION){e=e.clone().transform(i,"EPSG:4326")}var o=0;var s,l,u,c,f,h;switch(a){case p["a"].POINT:case p["a"].MULTI_POINT:case p["a"].LINE_STRING:case p["a"].MULTI_LINE_STRING:case p["a"].LINEAR_RING:{break}case p["a"].POLYGON:{s=e.getCoordinates();o=Math.abs(_(s[0],n));for(u=1,c=s.length;u<c;++u){o-=Math.abs(_(s[u],n))}break}case p["a"].MULTI_POLYGON:{s=e.getCoordinates();for(u=0,c=s.length;u<c;++u){l=s[u];o+=Math.abs(_(l[0],n));for(f=1,h=l.length;f<h;++f){o-=Math.abs(_(l[f],n))}}break}case p["a"].GEOMETRY_COLLECTION:{var d=e.getGeometries();for(u=0,c=d.length;u<c;++u){o+=y(d[u],t)}break}default:{throw new Error("Unsupported geometry type: "+a)}}return o}function n(e,t,r,n){var i=n||v;var a=Object(c["i"])(e[1]);var o=Object(c["i"])(e[0]);var s=t/i;var l=Math.asin(Math.sin(a)*Math.cos(s)+Math.cos(a)*Math.sin(s)*Math.cos(r));var u=o+Math.atan2(Math.sin(r)*Math.sin(s)*Math.cos(a),Math.cos(s)-Math.sin(a)*Math.sin(l));return[Object(c["h"])(u),Object(c["h"])(l)]}},function(e,t,r){"use strict";r.d(t,"c",function(){return a});r.d(t,"d",function(){return l});r.d(t,"a",function(){return c});r.d(t,"b",function(){return g});var f=r(232);var h=r(102);var d=r(3);var o=r(242);var i=r(10);var n=r(79);var s=r(281);function a(e){var t=e.getDefaultTileGrid();if(!t){t=v(e);e.setDefaultTileGrid(t)}return t}function l(e,t,r){var n=t[0];var i=e.getTileCoordCenter(t);var a=g(r);if(!Object(d["f"])(a,i)){var o=Object(d["E"])(a);var s=Math.ceil((a[0]-i[0])/o);i[0]+=o*s;return e.getTileCoordForCoordAndZ(i,n)}else{return t}}function u(e,t,r,n){var i=n!==undefined?n:o["a"].TOP_LEFT;var a=p(e,t,r);return new s["a"]({extent:e,origin:Object(d["y"])(e,i),resolutions:a,tileSize:r})}function c(e){var t=e||{};var r=t.extent||Object(i["g"])("EPSG:3857").getExtent();var n={extent:r,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:p(r,t.maxZoom,t.tileSize)};return new s["a"](n)}function p(e,t,r){var n=t!==undefined?t:f["a"];var i=Object(d["A"])(e);var a=Object(d["E"])(e);var o=Object(h["d"])(r!==undefined?r:f["b"]);var s=Math.max(a/o[0],i/o[1]);var l=n+1;var u=new Array(l);for(var c=0;c<l;++c){u[c]=s/Math.pow(2,c)}return u}function v(e,t,r,n){var i=g(e);return u(i,t,r,n)}function g(e){e=Object(i["g"])(e);var t=e.getExtent();if(!t){var r=180*n["a"][n["b"].DEGREES]/e.getMetersPerUnit();t=Object(d["k"])(-r,-r,r,r)}return t}},function(e,t,r){"use strict";t["a"]={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"}},function(e,t,r){"use strict";var n=function e(){};n.prototype.createDate=function(e,t){if(t===void 0){t=null}return e!==null?new Date(e):t};n.prototype.getTime=function(e,t){if(t===void 0){t=null}return e?e.getTime():t};n.prototype.getOptions=function(e){var t=this.createDate(e.minValue);var r=this.createDate(e.maxValue);var n=this.createDate(e.minDefValue,t);var i=this.createDate(e.maxDefValue,r);var a=e.mode==="range"?[this.getTime(n),this.getTime(i)]:this.getTime(n);return{minDate:this.getTime(t),maxDate:this.getTime(r),values:a}};n.prototype.getUTCDate=function(e){return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())};n.module=angular.module("ngeoTime",[]);n.module.service("ngeoTime",n);t["a"]=n},function(e,t,r){"use strict";r.d(t,"a",function(){return i});r.d(t,"b",function(){return a});r.d(t,"d",function(){return d});var n=r(212);var i=1;var a="mouse";var c=25;function o(e){if(!this.isEventSimulatedFromTouch_(e)){if(i.toString()in this.pointerMap){this.cancel(e)}var t=d(e,this.dispatcher);this.pointerMap[i.toString()]=e;this.dispatcher.down(t,e)}}function s(e){if(!this.isEventSimulatedFromTouch_(e)){var t=d(e,this.dispatcher);this.dispatcher.move(t,e)}}function l(e){if(!this.isEventSimulatedFromTouch_(e)){var t=this.pointerMap[i.toString()];if(t&&t.button===e.button){var r=d(e,this.dispatcher);this.dispatcher.up(r,e);this.cleanupMouse()}}}function u(e){if(!this.isEventSimulatedFromTouch_(e)){var t=d(e,this.dispatcher);this.dispatcher.enterOver(t,e)}}function f(e){if(!this.isEventSimulatedFromTouch_(e)){var t=d(e,this.dispatcher);this.dispatcher.leaveOut(t,e)}}var h=function(r){function e(e){var t={mousedown:o,mousemove:s,mouseup:l,mouseover:u,mouseout:f};r.call(this,e,t);this.pointerMap=e.pointerMap;this.lastTouches=[]}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;e.prototype.isEventSimulatedFromTouch_=function e(t){var r=this.lastTouches;var n=t.clientX;var i=t.clientY;for(var a=0,o=r.length,s=void 0;a<o&&(s=r[a]);a++){var l=Math.abs(n-s[0]);var u=Math.abs(i-s[1]);if(l<=c&&u<=c){return true}}return false};e.prototype.cancel=function e(t){var r=d(t,this.dispatcher);this.dispatcher.cancel(r,t);this.cleanupMouse()};e.prototype.cleanupMouse=function e(){delete this.pointerMap[i.toString()]};return e}(n["a"]);function d(e,t){var r=t.cloneEvent(e,e);var n=r.preventDefault;r.preventDefault=function(){e.preventDefault();n()};r.pointerId=i;r.isPrimary=true;r.pointerType=a;return r}t["c"]=h},function(e,t,r){"use strict";var a=r(1);var o=r(103);var n=r(5);var s=r(35);var i=r(112);var l=function e(t,r,n){if(n===void 0){n={}}o["a"].call(this,n);if(n.continueMsg!==undefined){this.continueMsg=n.continueMsg}else{this.continueMsg=document.createElement("span");this.continueMsg.textContent=r.getString("Click to continue drawing the line.");var i=document.createElement("br");i.textContent=r.getString("Double-click or click last point to finish.");this.continueMsg.appendChild(i)}this.format=t};n["d"](l,o["a"]);l.prototype.createDrawInteraction=function(e,t){return new i["a"]({type:"LineString",source:t,style:e})};l.prototype.handleMeasure=function(e){var t=a["a"].assertInstanceof(this.sketchFeature.getGeometry(),s["a"]);var r=this.getMap().getView().getProjection();a["a"].assert(r);var n=o["a"].getFormattedLength(t,r,this.precision,this.format);var i=t.getLastCoordinate();e(n,i)};t["a"]=l},function(e,t,r){"use strict";var n=function(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees");e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees");e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");e.WGS84=e["EPSG:4326"];e["EPSG:3785"]=e["EPSG:3857"];e.GOOGLE=e["EPSG:3857"];e["EPSG:900913"]=e["EPSG:3857"];e["EPSG:102113"]=e["EPSG:3857"]};var d=1;var p=2;var s=4;var l=5;var k=484813681109536e-20;var A=Math.PI/2;var u=.16666666666666666;var c=.04722222222222222;var f=.022156084656084655;var j=1e-10;var h=.017453292519943295;var v=57.29577951308232;var g=Math.PI/4;var i=Math.PI*2;var _=3.14159265359;var m={};m.greenwich=0;m.lisbon=-9.131906111111;m.paris=2.337229166667;m.bogota=-74.080916666667;m.madrid=-3.687938888889;m.rome=12.452333333333;m.bern=7.439583333333;m.jakarta=106.807719444444;m.ferro=-17.666666666667;m.brussels=4.367975;m.stockholm=18.058277777778;m.athens=23.7163375;m.oslo=10.722916666667;var y={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var b=/[\s_\-\/\(\)]/g;function w(e,t){if(e[t]){return e[t]}var r=Object.keys(e);var n=t.toLowerCase().replace(b,"");var i=-1;var a,o;while(++i<r.length){a=r[i];o=a.toLowerCase().replace(b,"");if(o===n){return e[a]}}}var a=function(e){var n={};var t=e.split("+").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,t){var r=t.split("=");r.push(true);e[r[0].toLowerCase()]=r[1];return e},{});var r,i,a;var o={proj:"projName",datum:"datumCode",rf:function e(t){n.rf=parseFloat(t)},lat_0:function e(t){n.lat0=t*h},lat_1:function e(t){n.lat1=t*h},lat_2:function e(t){n.lat2=t*h},lat_ts:function e(t){n.lat_ts=t*h},lon_0:function e(t){n.long0=t*h},lon_1:function e(t){n.long1=t*h},lon_2:function e(t){n.long2=t*h},alpha:function e(t){n.alpha=parseFloat(t)*h},lonc:function e(t){n.longc=t*h},x_0:function e(t){n.x0=parseFloat(t)},y_0:function e(t){n.y0=parseFloat(t)},k_0:function e(t){n.k0=parseFloat(t)},k:function e(t){n.k0=parseFloat(t)},a:function e(t){n.a=parseFloat(t)},b:function e(t){n.b=parseFloat(t)},r_a:function e(){n.R_A=true},zone:function e(t){n.zone=parseInt(t,10)},south:function e(){n.utmSouth=true},towgs84:function e(t){n.datum_params=t.split(",").map(function(e){return parseFloat(e)})},to_meter:function e(t){n.to_meter=parseFloat(t)},units:function e(t){n.units=t;var r=w(y,t);if(r){n.to_meter=r.to_meter}},from_greenwich:function e(t){n.from_greenwich=t*h},pm:function e(t){var e=w(m,t);n.from_greenwich=(e?e:parseFloat(t))*h},nadgrids:function e(t){if(t==="@null"){n.datumCode="none"}else{n.nadgrids=t}},axis:function e(t){var r="ewnsud";if(t.length===3&&r.indexOf(t.substr(0,1))!==-1&&r.indexOf(t.substr(1,1))!==-1&&r.indexOf(t.substr(2,1))!==-1){n.axis=t}}};for(r in t){i=t[r];if(r in o){a=o[r];if(typeof a==="function"){a(i)}else{n[a]=i}}else{n[r]=i}}if(typeof n.datumCode==="string"&&n.datumCode!=="WGS84"){n.datumCode=n.datumCode.toLowerCase()}return n};var o=r(353);var S=r.n(o);function C(e){var t=this;if(arguments.length===2){var r=arguments[1];if(typeof r==="string"){if(r.charAt(0)==="+"){C[e]=a(arguments[1])}else{C[e]=S()(arguments[1])}}else{C[e]=r}}else if(arguments.length===1){if(Array.isArray(e)){return e.map(function(e){if(Array.isArray(e)){C.apply(t,e)}else{C(e)}})}else if(typeof e==="string"){if(e in C){return C[e]}}else if("EPSG"in e){C["EPSG:"+e.EPSG]=e}else if("ESRI"in e){C["ESRI:"+e.ESRI]=e}else if("IAU2000"in e){C["IAU2000:"+e.IAU2000]=e}else{console.log(e)}return}}n(C);var O=C;function x(e){return typeof e==="string"}function T(e){return e in O}var E=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function M(t){return E.some(function(e){return t.indexOf(e)>-1})}var I=["3857","900913","3785","102113"];function D(e){var t=w(e,"authority");if(!t){return}var r=w(t,"epsg");return r&&I.indexOf(r)>-1}function P(e){var t=w(e,"extension");if(!t){return}return w(t,"proj4")}function R(e){return e[0]==="+"}function L(e){if(x(e)){if(T(e)){return O[e]}if(M(e)){var t=S()(e);if(D(t)){return O["EPSG:3857"]}var r=P(t);if(r){return a(r)}return t}if(R(e)){return a(e)}}else{return e}}var N=L;var $=function(e,t){e=e||{};var r,n;if(!t){return e}for(n in t){r=t[n];if(r!==undefined){e[n]=r}}return e};var F=function(e,t,r){var n=e*t;return r/Math.sqrt(1-n*n)};var G=function(e){return e<0?-1:1};var U=function(e){return Math.abs(e)<=_?e:e-G(e)*i};var H=function(e,t,r){var n=e*r;var i=.5*e;n=Math.pow((1-n)/(1+n),i);return Math.tan(.5*(A-t))/n};var W=function(e,t){var r=.5*e;var n,i;var a=A-2*Math.atan(t);for(var o=0;o<=15;o++){n=e*Math.sin(a);i=A-2*Math.atan(t*Math.pow((1-n)/(1+n),r))-a;a+=i;if(Math.abs(i)<=1e-10){return a}}return-9999};function Y(){var e=this.b/this.a;this.es=1-e*e;if(!("x0"in this)){this.x0=0}if(!("y0"in this)){this.y0=0}this.e=Math.sqrt(this.es);if(this.lat_ts){if(this.sphere){this.k0=Math.cos(this.lat_ts)}else{this.k0=F(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))}}else{if(!this.k0){if(this.k){this.k0=this.k}else{this.k0=1}}}}function V(e){var t=e.x;var r=e.y;if(r*v>90&&r*v<-90&&t*v>180&&t*v<-180){return null}var n,i;if(Math.abs(Math.abs(r)-A)<=j){return null}else{if(this.sphere){n=this.x0+this.a*this.k0*U(t-this.long0);i=this.y0+this.a*this.k0*Math.log(Math.tan(g+.5*r))}else{var a=Math.sin(r);var o=H(this.e,r,a);n=this.x0+this.a*this.k0*U(t-this.long0);i=this.y0-this.a*this.k0*Math.log(o)}e.x=n;e.y=i;return e}}function q(e){var t=e.x-this.x0;var r=e.y-this.y0;var n,i;if(this.sphere){i=A-2*Math.atan(Math.exp(-r/(this.a*this.k0)))}else{var a=Math.exp(-r/(this.a*this.k0));i=W(this.e,a);if(i===-9999){return null}}n=U(this.long0+t/(this.a*this.k0));e.x=n;e.y=i;return e}var z=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];var B={init:Y,forward:V,inverse:q,names:z};function K(){}function X(e){return e}var Z=["longlat","identity"];var Q={init:K,forward:X,inverse:X,names:Z};var J=[B,Q];var ee={};var te=[];function re(e,t){var r=te.length;if(!e.names){console.log(t);return true}te[r]=e;e.names.forEach(function(e){ee[e.toLowerCase()]=r});return this}function ne(e){if(!e){return false}var t=e.toLowerCase();if(typeof ee[t]!=="undefined"&&te[ee[t]]){return te[ee[t]]}}function ie(){J.forEach(re)}var ae={start:ie,add:re,get:ne};var oe={};oe.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};oe.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};oe.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};oe.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};oe.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"};oe.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};oe.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};oe.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"};oe.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};oe.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};oe.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};oe.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"};oe.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};oe.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"};oe.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."};oe.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"};oe.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};oe.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};oe.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"};oe.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"};oe.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"};oe.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"};oe.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"};oe.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};oe.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};oe.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};oe.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};oe.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};oe.hough={a:6378270,rf:297,ellipseName:"Hough"};oe.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};oe.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};oe.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};oe.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};oe.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"};oe.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};oe.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};oe.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"};oe.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"};oe.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};oe.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};oe.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var se=oe.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};oe.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function le(e,t,r,n){var i=e*e;var a=t*t;var o=(i-a)/i;var s=0;if(n){e*=1-o*(u+o*(c+o*f));i=e*e;o=0}else{s=Math.sqrt(o)}var l=(i-a)/a;return{es:o,e:s,ep2:l}}function ue(e,t,r,n,i){if(!e){var a=w(oe,n);if(!a){a=se}e=a.a;t=a.b;r=a.rf}if(r&&!t){t=(1-1/r)*e}if(r===0||Math.abs(e-t)<j){i=true;t=e}return{a:e,b:t,rf:r,sphere:i}}var ce={};ce.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};ce.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};ce.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};ce.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};ce.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};ce.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};ce.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};ce.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"};ce.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};ce.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};ce.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};ce.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};ce.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};ce.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};ce.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};ce.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};ce.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function fe(e,t,r,n,i,a){var o={};if(e===undefined||e==="none"){o.datum_type=l}else{o.datum_type=s}if(t){o.datum_params=t.map(parseFloat);if(o.datum_params[0]!==0||o.datum_params[1]!==0||o.datum_params[2]!==0){o.datum_type=d}if(o.datum_params.length>3){if(o.datum_params[3]!==0||o.datum_params[4]!==0||o.datum_params[5]!==0||o.datum_params[6]!==0){o.datum_type=p;o.datum_params[3]*=k;o.datum_params[4]*=k;o.datum_params[5]*=k;o.datum_params[6]=o.datum_params[6]/1e6+1}}}o.a=r;o.b=n;o.es=i;o.ep2=a;return o}var he=fe;function de(e,t){if(!(this instanceof de)){return new de(e)}t=t||function(e){if(e){throw e}};var r=N(e);if(typeof r!=="object"){t(e);return}var n=de.projections.get(r.projName);if(!n){t(e);return}if(r.datumCode&&r.datumCode!=="none"){var i=w(ce,r.datumCode);if(i){r.datum_params=i.towgs84?i.towgs84.split(","):null;r.ellps=i.ellipse;r.datumName=i.datumName?i.datumName:r.datumCode}}r.k0=r.k0||1;r.axis=r.axis||"enu";r.ellps=r.ellps||"wgs84";var a=ue(r.a,r.b,r.rf,r.ellps,r.sphere);var o=le(a.a,a.b,a.rf,r.R_A);var s=r.datum||he(r.datumCode,r.datum_params,a.a,a.b,o.es,o.ep2);$(this,r);$(this,n);this.a=a.a;this.b=a.b;this.rf=a.rf;this.sphere=a.sphere;this.es=o.es;this.e=o.e;this.ep2=o.ep2;this.datum=s;this.init();t(null,this)}de.projections=ae;de.projections.start();var pe=de;function ve(e,t){if(e.datum_type!==t.datum_type){return false}else if(e.a!==t.a||Math.abs(e.es-t.es)>5e-11){return false}else if(e.datum_type===d){return e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]}else if(e.datum_type===p){return e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6]}else{return true}}function ge(e,t,r){var n=e.x;var i=e.y;var a=e.z?e.z:0;var o;var s;var l;var u;if(i<-A&&i>-1.001*A){i=-A}else if(i>A&&i<1.001*A){i=A}else if(i<-A){return{x:-Infinity,y:-Infinity,z:e.z}}else if(i>A){return{x:Infinity,y:Infinity,z:e.z}}if(n>Math.PI){n-=2*Math.PI}s=Math.sin(i);u=Math.cos(i);l=s*s;o=r/Math.sqrt(1-t*l);return{x:(o+a)*u*Math.cos(n),y:(o+a)*u*Math.sin(n),z:(o*(1-t)+a)*s}}function me(e,t,r,n){var i=1e-12;var a=i*i;var o=30;var s;var l;var u;var c;var f;var h;var d;var p;var v;var g;var m;var _;var y;var b=e.x;var w=e.y;var S=e.z?e.z:0;var C;var O;var x;s=Math.sqrt(b*b+w*w);l=Math.sqrt(b*b+w*w+S*S);if(s/r<i){C=0;if(l/r<i){O=A;x=-n;return{x:e.x,y:e.y,z:e.z}}}else{C=Math.atan2(w,b)}u=S/l;c=s/l;f=1/Math.sqrt(1-t*(2-t)*c*c);p=c*(1-t)*f;v=u*f;y=0;do{y++;d=r/Math.sqrt(1-t*v*v);x=s*p+S*v-d*(1-t*v*v);h=t*d/(d+x);f=1/Math.sqrt(1-h*(2-h)*c*c);g=c*(1-h)*f;m=u*f;_=m*p-g*v;p=g;v=m}while(_*_>a&&y<o);O=Math.atan(m/Math.abs(g));return{x:C,y:O,z:x}}function _e(e,t,r){if(t===d){return{x:e.x+r[0],y:e.y+r[1],z:e.z+r[2]}}else if(t===p){var n=r[0];var i=r[1];var a=r[2];var o=r[3];var s=r[4];var l=r[5];var u=r[6];return{x:u*(e.x-l*e.y+s*e.z)+n,y:u*(l*e.x+e.y-o*e.z)+i,z:u*(-s*e.x+o*e.y+e.z)+a}}}function ye(e,t,r){if(t===d){return{x:e.x-r[0],y:e.y-r[1],z:e.z-r[2]}}else if(t===p){var n=r[0];var i=r[1];var a=r[2];var o=r[3];var s=r[4];var l=r[5];var u=r[6];var c=(e.x-n)/u;var f=(e.y-i)/u;var h=(e.z-a)/u;return{x:c+l*f-s*h,y:-l*c+f+o*h,z:s*c-o*f+h}}}function be(e){return e===d||e===p}var we=function(e,t,r){if(ve(e,t)){return r}if(e.datum_type===l||t.datum_type===l){return r}if(e.es===t.es&&e.a===t.a&&!be(e.datum_type)&&!be(t.datum_type)){return r}r=ge(r,e.es,e.a);if(be(e.datum_type)){r=_e(r,e.datum_type,e.datum_params)}if(be(t.datum_type)){r=ye(r,t.datum_type,t.datum_params)}return me(r,t.es,t.a,t.b)};var Se=function(e,t,r){var n=r.x,i=r.y,a=r.z||0;var o,s,l;var u={};for(l=0;l<3;l++){if(t&&l===2&&r.z===undefined){continue}if(l===0){o=n;s="x"}else if(l===1){o=i;s="y"}else{o=a;s="z"}switch(e.axis[l]){case"e":u[s]=o;break;case"w":u[s]=-o;break;case"n":u[s]=o;break;case"s":u[s]=-o;break;case"u":if(r[s]!==undefined){u.z=o}break;case"d":if(r[s]!==undefined){u.z=-o}break;default:return null}}return u};var Ce=function(e){var t={x:e[0],y:e[1]};if(e.length>2){t.z=e[2]}if(e.length>3){t.m=e[3]}return t};var Oe=function(e){xe(e.x);xe(e.y)};function xe(e){if(typeof Number.isFinite==="function"){if(Number.isFinite(e)){return}throw new TypeError("coordinates must be finite numbers")}if(typeof e!=="number"||e!==e||!isFinite(e)){throw new TypeError("coordinates must be finite numbers")}}function Te(e,t){return(e.datum.datum_type===d||e.datum.datum_type===p)&&t.datumCode!=="WGS84"||(t.datum.datum_type===d||t.datum.datum_type===p)&&e.datumCode!=="WGS84"}function Ee(e,t,r){var n;if(Array.isArray(r)){r=Ce(r)}Oe(r);if(e.datum&&t.datum&&Te(e,t)){n=new pe("WGS84");r=Ee(e,n,r);e=n}if(e.axis!=="enu"){r=Se(e,false,r)}if(e.projName==="longlat"){r={x:r.x*h,y:r.y*h}}else{if(e.to_meter){r={x:r.x*e.to_meter,y:r.y*e.to_meter}}r=e.inverse(r)}if(e.from_greenwich){r.x+=e.from_greenwich}r=we(e.datum,t.datum,r);if(t.from_greenwich){r={x:r.x-t.from_greenwich,y:r.y}}if(t.projName==="longlat"){r={x:r.x*v,y:r.y*v}}else{r=t.forward(r);if(t.to_meter){r={x:r.x/t.to_meter,y:r.y/t.to_meter}}}if(t.axis!=="enu"){return Se(t,true,r)}return r}var Me=pe("WGS84");function Ae(e,t,r){var n,i,a;if(Array.isArray(r)){n=Ee(e,t,r);if(r.length===3){return[n.x,n.y,n.z]}else{return[n.x,n.y]}}else{i=Ee(e,t,r);a=Object.keys(r);if(a.length===2){return i}a.forEach(function(e){if(e==="x"||e==="y"){return}i[e]=r[e]});return i}}function ke(e){if(e instanceof pe){return e}if(e.oProj){return e.oProj}return pe(e)}function je(r,n,e){r=ke(r);var t=false;var i;if(typeof n==="undefined"){n=r;r=Me;t=true}else if(typeof n.x!=="undefined"||Array.isArray(n)){e=n;n=r;r=Me;t=true}n=ke(n);if(e){return Ae(r,n,e)}else{i={forward:function e(t){return Ae(r,n,t)},inverse:function e(t){return Ae(n,r,t)}};if(t){i.oProj=n}return i}}var Ie=je;var De=r(292);var Pe=r.n(De);function Re(e,t,r){if(!(this instanceof Re)){return new Re(e,t,r)}if(Array.isArray(e)){this.x=e[0];this.y=e[1];this.z=e[2]||0}else if(typeof e==="object"){this.x=e.x;this.y=e.y;this.z=e.z||0}else if(typeof e==="string"&&typeof t==="undefined"){var n=e.split(",");this.x=parseFloat(n[0],10);this.y=parseFloat(n[1],10);this.z=parseFloat(n[2],10)||0}else{this.x=e;this.y=t;this.z=r||0}console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Re.fromMGRS=function(e){return new Re(Object(De["toPoint"])(e))};Re.prototype.toMGRS=function(e){return Object(De["forward"])([this.x,this.y],e)};var Le=Re;var Ne=r(395);var $e=1;var Fe=.25;var Ge=.046875;var Ue=.01953125;var He=.01068115234375;var We=.75;var Ye=.46875;var Ve=.013020833333333334;var qe=.007120768229166667;var ze=.3645833333333333;var Be=.005696614583333333;var Ke=.3076171875;var Xe=function(e){var t=[];t[0]=$e-e*(Fe+e*(Ge+e*(Ue+e*He)));t[1]=e*(We-e*(Ge+e*(Ue+e*He)));var r=e*e;t[2]=r*(Ye-e*(Ve+e*qe));r*=e;t[3]=r*(ze-e*Be);t[4]=r*e*Ke;return t};var Ze=function(e,t,r,n){r*=t;t*=t;return n[0]*e-r*(n[1]+t*(n[2]+t*(n[3]+t*n[4])))};var Qe=20;var Je=function(e,t,r){var n=1/(1-t);var i=e;for(var a=Qe;a;--a){var o=Math.sin(i);var s=1-t*o*o;s=(Ze(i,o,Math.cos(i),r)-e)*(s*Math.sqrt(s))*n;i-=s;if(Math.abs(s)<j){return i}}return i};function et(){this.x0=this.x0!==undefined?this.x0:0;this.y0=this.y0!==undefined?this.y0:0;this.long0=this.long0!==undefined?this.long0:0;this.lat0=this.lat0!==undefined?this.lat0:0;if(this.es){this.en=Xe(this.es);this.ml0=Ze(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en)}}function tt(e){var t=e.x;var r=e.y;var n=U(t-this.long0);var i;var a,o;var s=Math.sin(r);var l=Math.cos(r);if(!this.es){var u=l*Math.sin(n);if(Math.abs(Math.abs(u)-1)<j){return 93}else{a=.5*this.a*this.k0*Math.log((1+u)/(1-u))+this.x0;o=l*Math.cos(n)/Math.sqrt(1-Math.pow(u,2));u=Math.abs(o);if(u>=1){if(u-1>j){return 93}else{o=0}}else{o=Math.acos(o)}if(r<0){o=-o}o=this.a*this.k0*(o-this.lat0)+this.y0}}else{var c=l*n;var f=Math.pow(c,2);var h=this.ep2*Math.pow(l,2);var d=Math.pow(h,2);var p=Math.abs(l)>j?Math.tan(r):0;var v=Math.pow(p,2);var g=Math.pow(v,2);i=1-this.es*Math.pow(s,2);c=c/Math.sqrt(i);var m=Ze(r,s,l,this.en);a=this.a*(this.k0*c*(1+f/6*(1-v+h+f/20*(5-18*v+g+14*h-58*v*h+f/42*(61+179*g-g*v-479*v)))))+this.x0;o=this.a*(this.k0*(m-this.ml0+s*n*c/2*(1+f/12*(5-v+9*h+4*d+f/30*(61+g-58*v+270*h-330*v*h+f/56*(1385+543*g-g*v-3111*v))))))+this.y0}e.x=a;e.y=o;return e}function rt(e){var t,r;var n,i;var a=(e.x-this.x0)*(1/this.a);var o=(e.y-this.y0)*(1/this.a);if(!this.es){var s=Math.exp(a/this.k0);var l=.5*(s-1/s);var u=this.lat0+o/this.k0;var c=Math.cos(u);t=Math.sqrt((1-Math.pow(c,2))/(1+Math.pow(l,2)));n=Math.asin(t);if(o<0){n=-n}if(l===0&&c===0){i=0}else{i=U(Math.atan2(l,c)+this.long0)}}else{t=this.ml0+o/this.k0;r=Je(t,this.es,this.en);if(Math.abs(r)<A){var f=Math.sin(r);var h=Math.cos(r);var d=Math.abs(h)>j?Math.tan(r):0;var p=this.ep2*Math.pow(h,2);var v=Math.pow(p,2);var g=Math.pow(d,2);var m=Math.pow(g,2);t=1-this.es*Math.pow(f,2);var _=a*Math.sqrt(t)/this.k0;var y=Math.pow(_,2);t=t*d;n=r-t*y/(1-this.es)*.5*(1-y/12*(5+3*g-9*p*g+p-4*v-y/30*(61+90*g-252*p*g+45*m+46*p-y/56*(1385+3633*g+4095*m+1574*m*g))));i=U(this.long0+_*(1-y/6*(1+2*g+p-y/20*(5+28*g+24*m+8*p*g+6*p-y/42*(61+662*g+1320*m+720*m*g))))/h)}else{n=A*G(o);i=0}}e.x=i;e.y=n;return e}var nt=["Transverse_Mercator","Transverse Mercator","tmerc"];var it={init:et,forward:tt,inverse:rt,names:nt};var at=function(e){var t=Math.exp(e);t=(t-1/t)/2;return t};var ot=function(e,t){e=Math.abs(e);t=Math.abs(t);var r=Math.max(e,t);var n=Math.min(e,t)/(r?r:1);return r*Math.sqrt(1+Math.pow(n,2))};var st=function(e){var t=1+e;var r=t-1;return r===0?e:e*Math.log(t)/r};var lt=function(e){var t=Math.abs(e);t=st(t*(1+t/(ot(1,t)+1)));return e<0?-t:t};var ut=function(e,t){var r=2*Math.cos(2*t);var n=e.length-1;var i=e[n];var a=0;var o;while(--n>=0){o=-a+r*i+e[n];a=i;i=o}return t+o*Math.sin(2*t)};var ct=function(e,t){var r=2*Math.cos(t);var n=e.length-1;var i=e[n];var a=0;var o;while(--n>=0){o=-a+r*i+e[n];a=i;i=o}return Math.sin(t)*o};var ft=function(e){var t=Math.exp(e);t=(t+1/t)/2;return t};var ht=function(e,t,r){var n=Math.sin(t);var i=Math.cos(t);var a=at(r);var o=ft(r);var s=2*i*o;var l=-2*n*a;var u=e.length-1;var c=e[u];var f=0;var h=0;var d=0;var p;var v;while(--u>=0){p=h;v=f;h=c;f=d;c=-p+s*h-l*f+e[u];d=-v+l*h+s*f}s=n*o;l=i*a;return[s*c-l*d,s*d+l*c]};function dt(){if(this.es===undefined||this.es<=0){throw new Error("incorrect elliptical usage")}this.x0=this.x0!==undefined?this.x0:0;this.y0=this.y0!==undefined?this.y0:0;this.long0=this.long0!==undefined?this.long0:0;this.lat0=this.lat0!==undefined?this.lat0:0;this.cgb=[];this.cbg=[];this.utg=[];this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es));var t=e/(2-e);var r=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675))))));this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725))))));r=r*t;this.cgb[1]=r*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945)))));this.cbg[1]=r*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945)))));r=r*t;this.cgb[2]=r*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835))));this.cbg[2]=r*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835))));r=r*t;this.cgb[3]=r*(4279/630+t*(-332/35+t*(-399572/14175)));this.cbg[3]=r*(1237/630+t*(-12/5+t*(-24832/14175)));r=r*t;this.cgb[4]=r*(4174/315+t*(-144838/6237));this.cbg[4]=r*(-734/315+t*(109598/31185));r=r*t;this.cgb[5]=r*(601676/22275);this.cbg[5]=r*(444337/155925);r=Math.pow(t,2);this.Qn=this.k0/(1+t)*(1+r*(1/4+r*(1/64+r/256)));this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800))))));this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800))))));this.utg[1]=r*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720)))));this.gtu[1]=r*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360)))));r=r*t;this.utg[2]=r*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720))));this.gtu[2]=r*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440))));r=r*t;this.utg[3]=r*(-4397/161280+t*(11/504+t*(830251/7257600)));this.gtu[3]=r*(49561/161280+t*(-179/168+t*(6601661/7257600)));r=r*t;this.utg[4]=r*(-4583/161280+t*(108847/3991680));this.gtu[4]=r*(34729/80640+t*(-3418889/1995840));r=r*t;this.utg[5]=r*(-20648693/638668800);this.gtu[5]=r*(212378941/319334400);var n=ut(this.cbg,this.lat0);this.Zb=-this.Qn*(n+ct(this.gtu,2*n))}function pt(e){var t=U(e.x-this.long0);var r=e.y;r=ut(this.cbg,r);var n=Math.sin(r);var i=Math.cos(r);var a=Math.sin(t);var o=Math.cos(t);r=Math.atan2(n,o*i);t=Math.atan2(a*i,ot(n,i*o));t=lt(Math.tan(t));var s=ht(this.gtu,2*r,2*t);r=r+s[0];t=t+s[1];var l;var u;if(Math.abs(t)<=2.623395162778){l=this.a*(this.Qn*t)+this.x0;u=this.a*(this.Qn*r+this.Zb)+this.y0}else{l=Infinity;u=Infinity}e.x=l;e.y=u;return e}function vt(e){var t=(e.x-this.x0)*(1/this.a);var r=(e.y-this.y0)*(1/this.a);r=(r-this.Zb)/this.Qn;t=t/this.Qn;var n;var i;if(Math.abs(t)<=2.623395162778){var a=ht(this.utg,2*r,2*t);r=r+a[0];t=t+a[1];t=Math.atan(at(t));var o=Math.sin(r);var s=Math.cos(r);var l=Math.sin(t);var u=Math.cos(t);r=Math.atan2(o*u,ot(l,u*s));t=Math.atan2(l,u*s);n=U(t+this.long0);i=ut(this.cgb,r)}else{n=Infinity;i=Infinity}e.x=n;e.y=i;return e}var gt=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"];var mt={init:dt,forward:pt,inverse:vt,names:gt};var _t=function(e,t){if(e===undefined){e=Math.floor((U(t)+Math.PI)*30/Math.PI)+1;if(e<0){return 0}else if(e>60){return 60}}return e};var yt="etmerc";function bt(){var e=_t(this.zone,this.long0);if(e===undefined){throw new Error("unknown utm zone")}this.lat0=0;this.long0=(6*Math.abs(e)-183)*h;this.x0=5e5;this.y0=this.utmSouth?1e7:0;this.k0=.9996;mt.init.apply(this);this.forward=mt.forward;this.inverse=mt.inverse}var wt=["Universal Transverse Mercator System","utm"];var St={init:bt,names:wt,dependsOn:yt};var Ct=function(e,t){return Math.pow((1-e)/(1+e),t)};var Ot=20;function xt(){var e=Math.sin(this.lat0);var t=Math.cos(this.lat0);t*=t;this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e);this.C=Math.sqrt(1+this.es*t*t/(1-this.es));this.phic0=Math.asin(e/this.C);this.ratexp=.5*this.C*this.e;this.K=Math.tan(.5*this.phic0+g)/(Math.pow(Math.tan(.5*this.lat0+g),this.C)*Ct(this.e*e,this.ratexp))}function Tt(e){var t=e.x;var r=e.y;e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+g),this.C)*Ct(this.e*Math.sin(r),this.ratexp))-A;e.x=this.C*t;return e}function Et(e){var t=1e-14;var r=e.x/this.C;var n=e.y;var i=Math.pow(Math.tan(.5*n+g)/this.K,1/this.C);for(var a=Ot;a>0;--a){n=2*Math.atan(i*Ct(this.e*Math.sin(e.y),-.5*this.e))-A;if(Math.abs(n-e.y)<t){break}e.y=n}if(!a){return null}e.x=r;e.y=n;return e}var Mt=["gauss"];var At={init:xt,forward:Tt,inverse:Et,names:Mt};function kt(){At.init.apply(this);if(!this.rc){return}this.sinc0=Math.sin(this.phic0);this.cosc0=Math.cos(this.phic0);this.R2=2*this.rc;if(!this.title){this.title="Oblique Stereographic Alternative"}}function jt(e){var t,r,n,i;e.x=U(e.x-this.long0);At.forward.apply(this,[e]);t=Math.sin(e.y);r=Math.cos(e.y);n=Math.cos(e.x);i=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*r*n);e.x=i*r*Math.sin(e.x);e.y=i*(this.cosc0*t-this.sinc0*r*n);e.x=this.a*e.x+this.x0;e.y=this.a*e.y+this.y0;return e}function It(e){var t,r,n,i,a;e.x=(e.x-this.x0)/this.a;e.y=(e.y-this.y0)/this.a;e.x/=this.k0;e.y/=this.k0;if(a=Math.sqrt(e.x*e.x+e.y*e.y)){var o=2*Math.atan2(a,this.R2);t=Math.sin(o);r=Math.cos(o);i=Math.asin(r*this.sinc0+e.y*t*this.cosc0/a);n=Math.atan2(e.x*t,a*this.cosc0*r-e.y*this.sinc0*t)}else{i=this.phic0;n=0}e.x=n;e.y=i;At.inverse.apply(this,[e]);e.x=U(e.x+this.long0);return e}var Dt=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];var Pt={init:kt,forward:jt,inverse:It,names:Dt};function Rt(e,t,r){t*=r;return Math.tan(.5*(A+e))*Math.pow((1-t)/(1+t),.5*r)}function Lt(){this.coslat0=Math.cos(this.lat0);this.sinlat0=Math.sin(this.lat0);if(this.sphere){if(this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=j){this.k0=.5*(1+G(this.lat0)*Math.sin(this.lat_ts))}}else{if(Math.abs(this.coslat0)<=j){if(this.lat0>0){this.con=1}else{this.con=-1}}this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e));if(this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=j){this.k0=.5*this.cons*F(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/H(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))}this.ms1=F(this.e,this.sinlat0,this.coslat0);this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-A;this.cosX0=Math.cos(this.X0);this.sinX0=Math.sin(this.X0)}}function Nt(e){var t=e.x;var r=e.y;var n=Math.sin(r);var i=Math.cos(r);var a,o,s,l,u,c;var f=U(t-this.long0);if(Math.abs(Math.abs(t-this.long0)-Math.PI)<=j&&Math.abs(r+this.lat0)<=j){e.x=NaN;e.y=NaN;return e}if(this.sphere){a=2*this.k0/(1+this.sinlat0*n+this.coslat0*i*Math.cos(f));e.x=this.a*a*i*Math.sin(f)+this.x0;e.y=this.a*a*(this.coslat0*n-this.sinlat0*i*Math.cos(f))+this.y0;return e}else{o=2*Math.atan(this.ssfn_(r,n,this.e))-A;l=Math.cos(o);s=Math.sin(o);if(Math.abs(this.coslat0)<=j){u=H(this.e,r*this.con,this.con*n);c=2*this.a*this.k0*u/this.cons;e.x=this.x0+c*Math.sin(t-this.long0);e.y=this.y0-this.con*c*Math.cos(t-this.long0);return e}else if(Math.abs(this.sinlat0)<j){a=2*this.a*this.k0/(1+l*Math.cos(f));e.y=a*s}else{a=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*s+this.cosX0*l*Math.cos(f)));e.y=a*(this.cosX0*s-this.sinX0*l*Math.cos(f))+this.y0}e.x=a*l*Math.sin(f)+this.x0}return e}function $t(e){e.x-=this.x0;e.y-=this.y0;var t,r,n,i,a;var o=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var s=2*Math.atan(o/(2*this.a*this.k0));t=this.long0;r=this.lat0;if(o<=j){e.x=t;e.y=r;return e}r=Math.asin(Math.cos(s)*this.sinlat0+e.y*Math.sin(s)*this.coslat0/o);if(Math.abs(this.coslat0)<j){if(this.lat0>0){t=U(this.long0+Math.atan2(e.x,-1*e.y))}else{t=U(this.long0+Math.atan2(e.x,e.y))}}else{t=U(this.long0+Math.atan2(e.x*Math.sin(s),o*this.coslat0*Math.cos(s)-e.y*this.sinlat0*Math.sin(s)))}e.x=t;e.y=r;return e}else{if(Math.abs(this.coslat0)<=j){if(o<=j){r=this.lat0;t=this.long0;e.x=t;e.y=r;return e}e.x*=this.con;e.y*=this.con;n=o*this.cons/(2*this.a*this.k0);r=this.con*W(this.e,n);t=this.con*U(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else{i=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1));t=this.long0;if(o<=j){a=this.X0}else{a=Math.asin(Math.cos(i)*this.sinX0+e.y*Math.sin(i)*this.cosX0/o);t=U(this.long0+Math.atan2(e.x*Math.sin(i),o*this.cosX0*Math.cos(i)-e.y*this.sinX0*Math.sin(i)))}r=-1*W(this.e,Math.tan(.5*(A+a)))}}e.x=t;e.y=r;return e}var Ft=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"];var Gt={init:Lt,forward:Nt,inverse:$t,names:Ft,ssfn_:Rt};var Ut=r(354);function Ht(){this.no_off=this.no_off||false;this.no_rot=this.no_rot||false;if(isNaN(this.k0)){this.k0=1}var e=Math.sin(this.lat0);var t=Math.cos(this.lat0);var r=this.e*e;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(t,4));this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-r*r);var n=H(this.e,this.lat0,e);var i=this.bl/t*Math.sqrt((1-this.es)/(1-r*r));if(i*i<1){i=1}var a;var o;if(!isNaN(this.longc)){if(this.lat0>=0){a=i+Math.sqrt(i*i-1)}else{a=i-Math.sqrt(i*i-1)}this.el=a*Math.pow(n,this.bl);o=.5*(a-1/a);this.gamma0=Math.asin(Math.sin(this.alpha)/i);this.long0=this.longc-Math.asin(o*Math.tan(this.gamma0))/this.bl}else{var s=H(this.e,this.lat1,Math.sin(this.lat1));var l=H(this.e,this.lat2,Math.sin(this.lat2));if(this.lat0>=0){this.el=(i+Math.sqrt(i*i-1))*Math.pow(n,this.bl)}else{this.el=(i-Math.sqrt(i*i-1))*Math.pow(n,this.bl)}var u=Math.pow(s,this.bl);var c=Math.pow(l,this.bl);a=this.el/u;o=.5*(a-1/a);var f=(this.el*this.el-c*u)/(this.el*this.el+c*u);var h=(c-u)/(c+u);var d=U(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(f*Math.tan(.5*this.bl*d)/h)/this.bl;this.long0=U(this.long0);var p=U(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*p)/o);this.alpha=Math.asin(i*Math.sin(this.gamma0))}if(this.no_off){this.uc=0}else{if(this.lat0>=0){this.uc=this.al/this.bl*Math.atan2(Math.sqrt(i*i-1),Math.cos(this.alpha))}else{this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(i*i-1),Math.cos(this.alpha))}}}function Wt(e){var t=e.x;var r=e.y;var n=U(t-this.long0);var i,a;var o;if(Math.abs(Math.abs(r)-A)<=j){if(r>0){o=-1}else{o=1}a=this.al/this.bl*Math.log(Math.tan(g+o*this.gamma0*.5));i=-1*o*A*this.al/this.bl}else{var s=H(this.e,r,Math.sin(r));var l=this.el/Math.pow(s,this.bl);var u=.5*(l-1/l);var c=.5*(l+1/l);var f=Math.sin(this.bl*n);var h=(u*Math.sin(this.gamma0)-f*Math.cos(this.gamma0))/c;if(Math.abs(Math.abs(h)-1)<=j){a=Number.POSITIVE_INFINITY}else{a=.5*this.al*Math.log((1-h)/(1+h))/this.bl}if(Math.abs(Math.cos(this.bl*n))<=j){i=this.al*this.bl*n}else{i=this.al*Math.atan2(u*Math.cos(this.gamma0)+f*Math.sin(this.gamma0),Math.cos(this.bl*n))/this.bl}}if(this.no_rot){e.x=this.x0+i;e.y=this.y0+a}else{i-=this.uc;e.x=this.x0+a*Math.cos(this.alpha)+i*Math.sin(this.alpha);e.y=this.y0+i*Math.cos(this.alpha)-a*Math.sin(this.alpha)}return e}function Yt(e){var t,r;if(this.no_rot){r=e.y-this.y0;t=e.x-this.x0}else{r=(e.x-this.x0)*Math.cos(this.alpha)-(e.y-this.y0)*Math.sin(this.alpha);t=(e.y-this.y0)*Math.cos(this.alpha)+(e.x-this.x0)*Math.sin(this.alpha);t+=this.uc}var n=Math.exp(-1*this.bl*r/this.al);var i=.5*(n-1/n);var a=.5*(n+1/n);var o=Math.sin(this.bl*t/this.al);var s=(o*Math.cos(this.gamma0)+i*Math.sin(this.gamma0))/a;var l=Math.pow(this.el/Math.sqrt((1+s)/(1-s)),1/this.bl);if(Math.abs(s-1)<j){e.x=this.long0;e.y=A}else if(Math.abs(s+1)<j){e.x=this.long0;e.y=-1*A}else{e.y=W(this.e,l);e.x=U(this.long0-Math.atan2(i*Math.cos(this.gamma0)-o*Math.sin(this.gamma0),Math.cos(this.bl*t/this.al))/this.bl)}return e}var Vt=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"];var qt={init:Ht,forward:Wt,inverse:Yt,names:Vt};function zt(){if(!this.lat2){this.lat2=this.lat1}if(!this.k0){this.k0=1}this.x0=this.x0||0;this.y0=this.y0||0;if(Math.abs(this.lat1+this.lat2)<j){return}var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1);var r=Math.cos(this.lat1);var n=F(this.e,t,r);var i=H(this.e,this.lat1,t);var a=Math.sin(this.lat2);var o=Math.cos(this.lat2);var s=F(this.e,a,o);var l=H(this.e,this.lat2,a);var u=H(this.e,this.lat0,Math.sin(this.lat0));if(Math.abs(this.lat1-this.lat2)>j){this.ns=Math.log(n/s)/Math.log(i/l)}else{this.ns=t}if(isNaN(this.ns)){this.ns=t}this.f0=n/(this.ns*Math.pow(i,this.ns));this.rh=this.a*this.f0*Math.pow(u,this.ns);if(!this.title){this.title="Lambert Conformal Conic"}}function Bt(e){var t=e.x;var r=e.y;if(Math.abs(2*Math.abs(r)-Math.PI)<=j){r=G(r)*(A-2*j)}var n=Math.abs(Math.abs(r)-A);var i,a;if(n>j){i=H(this.e,r,Math.sin(r));a=this.a*this.f0*Math.pow(i,this.ns)}else{n=r*this.ns;if(n<=0){return null}a=0}var o=this.ns*U(t-this.long0);e.x=this.k0*(a*Math.sin(o))+this.x0;e.y=this.k0*(this.rh-a*Math.cos(o))+this.y0;return e}function Kt(e){var t,r,n;var i,a;var o=(e.x-this.x0)/this.k0;var s=this.rh-(e.y-this.y0)/this.k0;if(this.ns>0){t=Math.sqrt(o*o+s*s);r=1}else{t=-Math.sqrt(o*o+s*s);r=-1}var l=0;if(t!==0){l=Math.atan2(r*o,r*s)}if(t!==0||this.ns>0){r=1/this.ns;n=Math.pow(t/(this.a*this.f0),r);i=W(this.e,n);if(i===-9999){return null}}else{i=-A}a=U(l/this.ns+this.long0);e.x=a;e.y=i;return e}var Xt=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"];var Zt={init:zt,forward:Bt,inverse:Kt,names:Xt};function Qt(){this.a=6377397.155;this.es=.006674372230614;this.e=Math.sqrt(this.es);if(!this.lat0){this.lat0=.863937979737193}if(!this.long0){this.long0=.7417649320975901-.308341501185665}if(!this.k0){this.k0=.9999}this.s45=.785398163397448;this.s90=2*this.s45;this.fi0=this.lat0;this.e2=this.es;this.e=Math.sqrt(this.e2);this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2));this.uq=1.04216856380474;this.u0=Math.asin(Math.sin(this.fi0)/this.alfa);this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2);this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g;this.k1=this.k0;this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2));this.s0=1.37008346281555;this.n=Math.sin(this.s0);this.ro0=this.k1*this.n0/Math.tan(this.s0);this.ad=this.s90-this.uq}function Jt(e){var t,r,n,i,a,o,s;var l=e.x;var u=e.y;var c=U(l-this.long0);t=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2);r=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/t)-this.s45);n=-c*this.alfa;i=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(n));a=Math.asin(Math.cos(r)*Math.sin(n)/Math.cos(i));o=this.n*a;s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n);e.y=s*Math.cos(o)/1;e.x=s*Math.sin(o)/1;if(!this.czech){e.y*=-1;e.x*=-1}return e}function er(e){var t,r,n,i,a,o,s;var l;var u=e.x;e.x=e.y;e.y=u;if(!this.czech){e.y*=-1;e.x*=-1}o=Math.sqrt(e.x*e.x+e.y*e.y);a=Math.atan2(e.y,e.x);i=a/Math.sin(this.s0);n=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45);t=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(i));r=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(t));e.x=this.long0-r/this.alfa;s=t;l=0;var c=0;do{e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45);if(Math.abs(s-e.y)<1e-10){l=1}s=e.y;c+=1}while(l===0&&c<15);if(c>=15){return null}return e}var tr=["Krovak","krovak"];var rr={init:Qt,forward:Jt,inverse:er,names:tr};var nr=function(e,t,r,n,i){return e*i-t*Math.sin(2*i)+r*Math.sin(4*i)-n*Math.sin(6*i)};var ir=function(e){return 1-.25*e*(1+e/16*(3+1.25*e))};var ar=function(e){return.375*e*(1+.25*e*(1+.46875*e))};var or=function(e){return.05859375*e*e*(1+.75*e)};var sr=function(e){return e*e*e*(35/3072)};var lr=function(e,t,r){var n=t*r;return e/Math.sqrt(1-n*n)};var ur=function(e){return Math.abs(e)<A?e:e-G(e)*Math.PI};var cr=function(e,t,r,n,i){var a;var o;a=e/t;for(var s=0;s<15;s++){o=(e-(t*a-r*Math.sin(2*a)+n*Math.sin(4*a)-i*Math.sin(6*a)))/(t-2*r*Math.cos(2*a)+4*n*Math.cos(4*a)-6*i*Math.cos(6*a));a+=o;if(Math.abs(o)<=1e-10){return a}}return NaN};function fr(){if(!this.sphere){this.e0=ir(this.es);this.e1=ar(this.es);this.e2=or(this.es);this.e3=sr(this.es);this.ml0=this.a*nr(this.e0,this.e1,this.e2,this.e3,this.lat0)}}function hr(e){var t,r;var n=e.x;var i=e.y;n=U(n-this.long0);if(this.sphere){t=this.a*Math.asin(Math.cos(i)*Math.sin(n));r=this.a*(Math.atan2(Math.tan(i),Math.cos(n))-this.lat0)}else{var a=Math.sin(i);var o=Math.cos(i);var s=lr(this.a,this.e,a);var l=Math.tan(i)*Math.tan(i);var u=n*Math.cos(i);var c=u*u;var f=this.es*o*o/(1-this.es);var h=this.a*nr(this.e0,this.e1,this.e2,this.e3,i);t=s*u*(1-c*l*(1/6-(8-l+8*f)*c/120));r=h-this.ml0+s*a/o*c*(.5+(5-l+6*f)*c/24)}e.x=t+this.x0;e.y=r+this.y0;return e}function dr(e){e.x-=this.x0;e.y-=this.y0;var t=e.x/this.a;var r=e.y/this.a;var n,i;if(this.sphere){var a=r+this.lat0;n=Math.asin(Math.sin(a)*Math.cos(t));i=Math.atan2(Math.tan(t),Math.cos(a))}else{var o=this.ml0/this.a+r;var s=cr(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-A)<=j){e.x=this.long0;e.y=A;if(r<0){e.y*=-1}return e}var l=lr(this.a,this.e,Math.sin(s));var u=l*l*l/this.a/this.a*(1-this.es);var c=Math.pow(Math.tan(s),2);var f=t*this.a/l;var h=f*f;n=s-l*Math.tan(s)/u*f*f*(.5-(1+3*c)*f*f/24);i=f*(1-h*(c/3+(1+3*c)*c*h/15))/Math.cos(s)}e.x=U(i+this.long0);e.y=ur(n);return e}var pr=["Cassini","Cassini_Soldner","cass"];var vr={init:fr,forward:hr,inverse:dr,names:pr};var gr=function(e,t){var r;if(e>1e-7){r=e*t;return(1-e*e)*(t/(1-r*r)-.5/e*Math.log((1-r)/(1+r)))}else{return 2*t}};var mr=1;var _r=2;var yr=3;var br=4;function wr(){var e=Math.abs(this.lat0);if(Math.abs(e-A)<j){this.mode=this.lat0<0?this.S_POLE:this.N_POLE}else if(Math.abs(e)<j){this.mode=this.EQUIT}else{this.mode=this.OBLIQ}if(this.es>0){var t;this.qp=gr(this.e,1);this.mmf=.5/(1-this.es);this.apa=kr(this.es);switch(this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp);this.dd=1/this.rq;this.xmf=1;this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp);t=Math.sin(this.lat0);this.sinb1=gr(this.e,t)/this.qp;this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1);this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1);this.ymf=(this.xmf=this.rq)/this.dd;this.xmf*=this.dd;break}}else{if(this.mode===this.OBLIQ){this.sinph0=Math.sin(this.lat0);this.cosph0=Math.cos(this.lat0)}}}function Sr(e){var t,r,n,i,a,o,s,l,u,c;var f=e.x;var h=e.y;f=U(f-this.long0);if(this.sphere){a=Math.sin(h);c=Math.cos(h);n=Math.cos(f);if(this.mode===this.OBLIQ||this.mode===this.EQUIT){r=this.mode===this.EQUIT?1+c*n:1+this.sinph0*a+this.cosph0*c*n;if(r<=j){return null}r=Math.sqrt(2/r);t=r*c*Math.sin(f);r*=this.mode===this.EQUIT?a:this.cosph0*a-this.sinph0*c*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE){n=-n}if(Math.abs(h+this.phi0)<j){return null}r=g-h*.5;r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r));t=r*Math.sin(f);r*=n}}else{s=0;l=0;u=0;n=Math.cos(f);i=Math.sin(f);a=Math.sin(h);o=gr(this.e,a);if(this.mode===this.OBLIQ||this.mode===this.EQUIT){s=o/this.qp;l=Math.sqrt(1-s*s)}switch(this.mode){case this.OBLIQ:u=1+this.sinb1*s+this.cosb1*l*n;break;case this.EQUIT:u=1+l*n;break;case this.N_POLE:u=A+h;o=this.qp-o;break;case this.S_POLE:u=h-A;o=this.qp+o;break}if(Math.abs(u)<j){return null}switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u);if(this.mode===this.OBLIQ){r=this.ymf*u*(this.cosb1*s-this.sinb1*l*n)}else{r=(u=Math.sqrt(2/(1+l*n)))*s*this.ymf}t=this.xmf*u*l*i;break;case this.N_POLE:case this.S_POLE:if(o>=0){t=(u=Math.sqrt(o))*i;r=n*(this.mode===this.S_POLE?u:-u)}else{t=r=0}break}}e.x=this.a*t+this.x0;e.y=this.a*r+this.y0;return e}function Cr(e){e.x-=this.x0;e.y-=this.y0;var t=e.x/this.a;var r=e.y/this.a;var n,i,a,o,s,l,u;if(this.sphere){var c=0,f,h=0;f=Math.sqrt(t*t+r*r);i=f*.5;if(i>1){return null}i=2*Math.asin(i);if(this.mode===this.OBLIQ||this.mode===this.EQUIT){h=Math.sin(i);c=Math.cos(i)}switch(this.mode){case this.EQUIT:i=Math.abs(f)<=j?0:Math.asin(r*h/f);t*=h;r=c*f;break;case this.OBLIQ:i=Math.abs(f)<=j?this.phi0:Math.asin(c*this.sinph0+r*h*this.cosph0/f);t*=h*this.cosph0;r=(c-Math.sin(i)*this.sinph0)*f;break;case this.N_POLE:r=-r;i=A-i;break;case this.S_POLE:i-=A;break}n=r===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,r)}else{u=0;if(this.mode===this.OBLIQ||this.mode===this.EQUIT){t/=this.dd;r*=this.dd;l=Math.sqrt(t*t+r*r);if(l<j){e.x=0;e.y=this.phi0;return e}o=2*Math.asin(.5*l/this.rq);a=Math.cos(o);t*=o=Math.sin(o);if(this.mode===this.OBLIQ){u=a*this.sinb1+r*o*this.cosb1/l;s=this.qp*u;r=l*this.cosb1*a-r*this.sinb1*o}else{u=r*o/l;s=this.qp*u;r=l*a}}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE){r=-r}s=t*t+r*r;if(!s){e.x=0;e.y=this.phi0;return e}u=1-s/this.qp;if(this.mode===this.S_POLE){u=-u}}n=Math.atan2(t,r);i=jr(Math.asin(u),this.apa)}e.x=U(this.long0+n);e.y=i;return e}var Or=.3333333333333333;var xr=.17222222222222222;var Tr=.10257936507936508;var Er=.06388888888888888;var Mr=.0664021164021164;var Ar=.016415012942191543;function kr(e){var t;var r=[];r[0]=e*Or;t=e*e;r[0]+=t*xr;r[1]=t*Er;t*=e;r[0]+=t*Tr;r[1]+=t*Mr;r[2]=t*Ar;return r}function jr(e,t){var r=e+e;return e+t[0]*Math.sin(r)+t[1]*Math.sin(r+r)+t[2]*Math.sin(r+r+r)}var Ir=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];var Dr={init:wr,forward:Sr,inverse:Cr,names:Ir,S_POLE:mr,N_POLE:_r,EQUIT:yr,OBLIQ:br};var Pr=function(e){if(Math.abs(e)>1){e=e>1?1:-1}return Math.asin(e)};function Rr(){if(Math.abs(this.lat1+this.lat2)<j){return}this.temp=this.b/this.a;this.es=1-Math.pow(this.temp,2);this.e3=Math.sqrt(this.es);this.sin_po=Math.sin(this.lat1);this.cos_po=Math.cos(this.lat1);this.t1=this.sin_po;this.con=this.sin_po;this.ms1=F(this.e3,this.sin_po,this.cos_po);this.qs1=gr(this.e3,this.sin_po,this.cos_po);this.sin_po=Math.sin(this.lat2);this.cos_po=Math.cos(this.lat2);this.t2=this.sin_po;this.ms2=F(this.e3,this.sin_po,this.cos_po);this.qs2=gr(this.e3,this.sin_po,this.cos_po);this.sin_po=Math.sin(this.lat0);this.cos_po=Math.cos(this.lat0);this.t3=this.sin_po;this.qs0=gr(this.e3,this.sin_po,this.cos_po);if(Math.abs(this.lat1-this.lat2)>j){this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1)}else{this.ns0=this.con}this.c=this.ms1*this.ms1+this.ns0*this.qs1;this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0}function Lr(e){var t=e.x;var r=e.y;this.sin_phi=Math.sin(r);this.cos_phi=Math.cos(r);var n=gr(this.e3,this.sin_phi,this.cos_phi);var i=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0;var a=this.ns0*U(t-this.long0);var o=i*Math.sin(a)+this.x0;var s=this.rh-i*Math.cos(a)+this.y0;e.x=o;e.y=s;return e}function Nr(e){var t,r,n,i,a,o;e.x-=this.x0;e.y=this.rh-e.y+this.y0;if(this.ns0>=0){t=Math.sqrt(e.x*e.x+e.y*e.y);n=1}else{t=-Math.sqrt(e.x*e.x+e.y*e.y);n=-1}i=0;if(t!==0){i=Math.atan2(n*e.x,n*e.y)}n=t*this.ns0/this.a;if(this.sphere){o=Math.asin((this.c-n*n)/(2*this.ns0))}else{r=(this.c-n*n)/this.ns0;o=this.phi1z(this.e3,r)}a=U(i/this.ns0+this.long0);e.x=a;e.y=o;return e}function $r(e,t){var r,n,i,a,o;var s=Pr(.5*t);if(e<j){return s}var l=e*e;for(var u=1;u<=25;u++){r=Math.sin(s);n=Math.cos(s);i=e*r;a=1-i*i;o=.5*a*a/n*(t/(1-l)-r/a+.5/e*Math.log((1-i)/(1+i)));s=s+o;if(Math.abs(o)<=1e-7){return s}}return null}var Fr=["Albers_Conic_Equal_Area","Albers","aea"];var Gr={init:Rr,forward:Lr,inverse:Nr,names:Fr,phi1z:$r};function Ur(){this.sin_p14=Math.sin(this.lat0);this.cos_p14=Math.cos(this.lat0);this.infinity_dist=1e3*this.a;this.rc=1}function Hr(e){var t,r;var n;var i;var a;var o;var s,l;var u=e.x;var c=e.y;n=U(u-this.long0);t=Math.sin(c);r=Math.cos(c);i=Math.cos(n);o=this.sin_p14*t+this.cos_p14*r*i;a=1;if(o>0||Math.abs(o)<=j){s=this.x0+this.a*a*r*Math.sin(n)/o;l=this.y0+this.a*a*(this.cos_p14*t-this.sin_p14*r*i)/o}else{s=this.x0+this.infinity_dist*r*Math.sin(n);l=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*r*i)}e.x=s;e.y=l;return e}function Wr(e){var t;var r,n;var i;var a,o;e.x=(e.x-this.x0)/this.a;e.y=(e.y-this.y0)/this.a;e.x/=this.k0;e.y/=this.k0;if(t=Math.sqrt(e.x*e.x+e.y*e.y)){i=Math.atan2(t,this.rc);r=Math.sin(i);n=Math.cos(i);o=Pr(n*this.sin_p14+e.y*r*this.cos_p14/t);a=Math.atan2(e.x*r,t*this.cos_p14*n-e.y*this.sin_p14*r);a=U(this.long0+a)}else{o=this.phic0;a=0}e.x=a;e.y=o;return e}var Yr=["gnom"];var Vr={init:Ur,forward:Hr,inverse:Wr,names:Yr};var qr=function(e,t){var r=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-r)<1e-6){if(t<0){return-1*A}else{return A}}var n=Math.asin(.5*t);var i;var a;var o;var s;for(var l=0;l<30;l++){a=Math.sin(n);o=Math.cos(n);s=e*a;i=Math.pow(1-s*s,2)/(2*o)*(t/(1-e*e)-a/(1-s*s)+.5/e*Math.log((1-s)/(1+s)));n+=i;if(Math.abs(i)<=1e-10){return n}}return NaN};function zr(){if(!this.sphere){this.k0=F(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))}}function Br(e){var t=e.x;var r=e.y;var n,i;var a=U(t-this.long0);if(this.sphere){n=this.x0+this.a*a*Math.cos(this.lat_ts);i=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts)}else{var o=gr(this.e,Math.sin(r));n=this.x0+this.a*this.k0*a;i=this.y0+this.a*o*.5/this.k0}e.x=n;e.y=i;return e}function Kr(e){e.x-=this.x0;e.y-=this.y0;var t,r;if(this.sphere){t=U(this.long0+e.x/this.a/Math.cos(this.lat_ts));r=Math.asin(e.y/this.a*Math.cos(this.lat_ts))}else{r=qr(this.e,2*e.y*this.k0/this.a);t=U(this.long0+e.x/(this.a*this.k0))}e.x=t;e.y=r;return e}var Xr=["cea"];var Zr={init:zr,forward:Br,inverse:Kr,names:Xr};function Qr(){this.x0=this.x0||0;this.y0=this.y0||0;this.lat0=this.lat0||0;this.long0=this.long0||0;this.lat_ts=this.lat_ts||0;this.title=this.title||"Equidistant Cylindrical (Plate Carre)";this.rc=Math.cos(this.lat_ts)}function Jr(e){var t=e.x;var r=e.y;var n=U(t-this.long0);var i=ur(r-this.lat0);e.x=this.x0+this.a*n*this.rc;e.y=this.y0+this.a*i;return e}function en(e){var t=e.x;var r=e.y;e.x=U(this.long0+(t-this.x0)/(this.a*this.rc));e.y=ur(this.lat0+(r-this.y0)/this.a);return e}var tn=["Equirectangular","Equidistant_Cylindrical","eqc"];var rn={init:Qr,forward:Jr,inverse:en,names:tn};var nn=20;function an(){this.temp=this.b/this.a;this.es=1-Math.pow(this.temp,2);this.e=Math.sqrt(this.es);this.e0=ir(this.es);this.e1=ar(this.es);this.e2=or(this.es);this.e3=sr(this.es);this.ml0=this.a*nr(this.e0,this.e1,this.e2,this.e3,this.lat0)}function on(e){var t=e.x;var r=e.y;var n,i,a;var o=U(t-this.long0);a=o*Math.sin(r);if(this.sphere){if(Math.abs(r)<=j){n=this.a*o;i=-1*this.a*this.lat0}else{n=this.a*Math.sin(a)/Math.tan(r);i=this.a*(ur(r-this.lat0)+(1-Math.cos(a))/Math.tan(r))}}else{if(Math.abs(r)<=j){n=this.a*o;i=-1*this.ml0}else{var s=lr(this.a,this.e,Math.sin(r))/Math.tan(r);n=s*Math.sin(a);i=this.a*nr(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+s*(1-Math.cos(a))}}e.x=n+this.x0;e.y=i+this.y0;return e}function sn(e){var t,r,n,i,a;var o,s;var l,u;n=e.x-this.x0;i=e.y-this.y0;if(this.sphere){if(Math.abs(i+this.a*this.lat0)<=j){t=U(n/this.a+this.long0);r=0}else{o=this.lat0+i/this.a;s=n*n/this.a/this.a+o*o;l=o;var c;for(a=nn;a;--a){c=Math.tan(l);u=-1*(o*(l*c+1)-l-.5*(l*l+s)*c)/((l-o)/c-1);l+=u;if(Math.abs(u)<=j){r=l;break}}t=U(this.long0+Math.asin(n*Math.tan(l)/this.a)/Math.sin(r))}}else{if(Math.abs(i+this.ml0)<=j){r=0;t=U(this.long0+n/this.a)}else{o=(this.ml0+i)/this.a;s=n*n/this.a/this.a+o*o;l=o;var f,h,d,p;var v;for(a=nn;a;--a){v=this.e*Math.sin(l);f=Math.sqrt(1-v*v)*Math.tan(l);h=this.a*nr(this.e0,this.e1,this.e2,this.e3,l);d=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l);p=h/this.a;u=(o*(f*p+1)-p-.5*f*(p*p+s))/(this.es*Math.sin(2*l)*(p*p+s-2*o*p)/(4*f)+(o-p)*(f*d-2/Math.sin(2*l))-d);l-=u;if(Math.abs(u)<=j){r=l;break}}f=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r);t=U(this.long0+Math.asin(n*f/this.a)/Math.sin(r))}}e.x=t;e.y=r;return e}var ln=["Polyconic","poly"];var un={init:an,forward:on,inverse:sn,names:ln};var cn=1;function fn(){this.A=[];this.A[1]=.6399175073;this.A[2]=-.1358797613;this.A[3]=.063294409;this.A[4]=-.02526853;this.A[5]=.0117879;this.A[6]=-.0055161;this.A[7]=.0026906;this.A[8]=-.001333;this.A[9]=67e-5;this.A[10]=-34e-5;this.B_re=[];this.B_im=[];this.B_re[1]=.7557853228;this.B_im[1]=0;this.B_re[2]=.249204646;this.B_im[2]=.003371507;this.B_re[3]=-.001541739;this.B_im[3]=.04105856;this.B_re[4]=-.10162907;this.B_im[4]=.01727609;this.B_re[5]=-.26623489;this.B_im[5]=-.36249218;this.B_re[6]=-.6870983;this.B_im[6]=-1.1651967;this.C_re=[];this.C_im=[];this.C_re[1]=1.3231270439;this.C_im[1]=0;this.C_re[2]=-.577245789;this.C_im[2]=-.007809598;this.C_re[3]=.508307513;this.C_im[3]=-.112208952;this.C_re[4]=-.15094762;this.C_im[4]=.18200602;this.C_re[5]=1.01418179;this.C_im[5]=1.64497696;this.C_re[6]=1.9660549;this.C_im[6]=2.5127645;this.D=[];this.D[1]=1.5627014243;this.D[2]=.5185406398;this.D[3]=-.03333098;this.D[4]=-.1052906;this.D[5]=-.0368594;this.D[6]=.007317;this.D[7]=.0122;this.D[8]=.00394;this.D[9]=-.0013}function hn(e){var t;var r=e.x;var n=e.y;var i=n-this.lat0;var a=r-this.long0;var o=i/k*1e-5;var s=a;var l=1;var u=0;for(t=1;t<=10;t++){l=l*o;u=u+this.A[t]*l}var c=u;var f=s;var h=1;var d=0;var p;var v;var g=0;var m=0;for(t=1;t<=6;t++){p=h*c-d*f;v=d*c+h*f;h=p;d=v;g=g+this.B_re[t]*h-this.B_im[t]*d;m=m+this.B_im[t]*h+this.B_re[t]*d}e.x=m*this.a+this.x0;e.y=g*this.a+this.y0;return e}function dn(e){var t;var r=e.x;var n=e.y;var i=r-this.x0;var a=n-this.y0;var o=a/this.a;var s=i/this.a;var l=1;var u=0;var c;var f;var h=0;var d=0;for(t=1;t<=6;t++){c=l*o-u*s;f=u*o+l*s;l=c;u=f;h=h+this.C_re[t]*l-this.C_im[t]*u;d=d+this.C_im[t]*l+this.C_re[t]*u}for(var p=0;p<this.iterations;p++){var v=h;var g=d;var m;var _;var y=o;var b=s;for(t=2;t<=6;t++){m=v*h-g*d;_=g*h+v*d;v=m;g=_;y=y+(t-1)*(this.B_re[t]*v-this.B_im[t]*g);b=b+(t-1)*(this.B_im[t]*v+this.B_re[t]*g)}v=1;g=0;var w=this.B_re[1];var S=this.B_im[1];for(t=2;t<=6;t++){m=v*h-g*d;_=g*h+v*d;v=m;g=_;w=w+t*(this.B_re[t]*v-this.B_im[t]*g);S=S+t*(this.B_im[t]*v+this.B_re[t]*g)}var C=w*w+S*S;h=(y*w+b*S)/C;d=(b*w-y*S)/C}var O=h;var x=d;var T=1;var E=0;for(t=1;t<=9;t++){T=T*O;E=E+this.D[t]*T}var M=this.lat0+E*k*1e5;var A=this.long0+x;e.x=A;e.y=M;return e}var pn=["New_Zealand_Map_Grid","nzmg"];var vn={init:fn,forward:hn,inverse:dn,names:pn};function gn(){}function mn(e){var t=e.x;var r=e.y;var n=U(t-this.long0);var i=this.x0+this.a*n;var a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;e.x=i;e.y=a;return e}function _n(e){e.x-=this.x0;e.y-=this.y0;var t=U(this.long0+e.x/this.a);var r=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);e.x=t;e.y=r;return e}var yn=["Miller_Cylindrical","mill"];var bn={init:gn,forward:mn,inverse:_n,names:yn};var wn=20;function Sn(){if(!this.sphere){this.en=Xe(this.es)}else{this.n=1;this.m=0;this.es=0;this.C_y=Math.sqrt((this.m+1)/this.n);this.C_x=this.C_y/(this.m+1)}}function Cn(e){var t,r;var n=e.x;var i=e.y;n=U(n-this.long0);if(this.sphere){if(!this.m){i=this.n!==1?Math.asin(this.n*Math.sin(i)):i}else{var a=this.n*Math.sin(i);for(var o=wn;o;--o){var s=(this.m*i+Math.sin(i)-a)/(this.m+Math.cos(i));i-=s;if(Math.abs(s)<j){break}}}t=this.a*this.C_x*n*(this.m+Math.cos(i));r=this.a*this.C_y*i}else{var l=Math.sin(i);var u=Math.cos(i);r=this.a*Ze(i,l,u,this.en);t=this.a*n*u/Math.sqrt(1-this.es*l*l)}e.x=t;e.y=r;return e}function On(e){var t,r,n,i;e.x-=this.x0;n=e.x/this.a;e.y-=this.y0;t=e.y/this.a;if(this.sphere){t/=this.C_y;n=n/(this.C_x*(this.m+Math.cos(t)));if(this.m){t=Pr((this.m*t+Math.sin(t))/this.n)}else if(this.n!==1){t=Pr(Math.sin(t)/this.n)}n=U(n+this.long0);t=ur(t)}else{t=Je(e.y/this.a,this.es,this.en);i=Math.abs(t);if(i<A){i=Math.sin(t);r=this.long0+e.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(t));n=U(r)}else if(i-j<A){n=this.long0}}e.x=n;e.y=t;return e}var xn=["Sinusoidal","sinu"];var Tn={init:Sn,forward:Cn,inverse:On,names:xn};function En(){}function Mn(e){var t=e.x;var r=e.y;var n=U(t-this.long0);var i=r;var a=Math.PI*Math.sin(r);while(true){var o=-(i+Math.sin(i)-a)/(1+Math.cos(i));i+=o;if(Math.abs(o)<j){break}}i/=2;if(Math.PI/2-Math.abs(r)<j){n=0}var s=.900316316158*this.a*n*Math.cos(i)+this.x0;var l=1.4142135623731*this.a*Math.sin(i)+this.y0;e.x=s;e.y=l;return e}function An(e){var t;var r;e.x-=this.x0;e.y-=this.y0;r=e.y/(1.4142135623731*this.a);if(Math.abs(r)>.999999999999){r=.999999999999}t=Math.asin(r);var n=U(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));if(n<-Math.PI){n=-Math.PI}if(n>Math.PI){n=Math.PI}r=(2*t+Math.sin(2*t))/Math.PI;if(Math.abs(r)>1){r=1}var i=Math.asin(r);e.x=n;e.y=i;return e}var kn=["Mollweide","moll"];var jn={init:En,forward:Mn,inverse:An,names:kn};function In(){if(Math.abs(this.lat1+this.lat2)<j){return}this.lat2=this.lat2||this.lat1;this.temp=this.b/this.a;this.es=1-Math.pow(this.temp,2);this.e=Math.sqrt(this.es);this.e0=ir(this.es);this.e1=ar(this.es);this.e2=or(this.es);this.e3=sr(this.es);this.sinphi=Math.sin(this.lat1);this.cosphi=Math.cos(this.lat1);this.ms1=F(this.e,this.sinphi,this.cosphi);this.ml1=nr(this.e0,this.e1,this.e2,this.e3,this.lat1);if(Math.abs(this.lat1-this.lat2)<j){this.ns=this.sinphi}else{this.sinphi=Math.sin(this.lat2);this.cosphi=Math.cos(this.lat2);this.ms2=F(this.e,this.sinphi,this.cosphi);this.ml2=nr(this.e0,this.e1,this.e2,this.e3,this.lat2);this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)}this.g=this.ml1+this.ms1/this.ns;this.ml0=nr(this.e0,this.e1,this.e2,this.e3,this.lat0);this.rh=this.a*(this.g-this.ml0)}function Dn(e){var t=e.x;var r=e.y;var n;if(this.sphere){n=this.a*(this.g-r)}else{var i=nr(this.e0,this.e1,this.e2,this.e3,r);n=this.a*(this.g-i)}var a=this.ns*U(t-this.long0);var o=this.x0+n*Math.sin(a);var s=this.y0+this.rh-n*Math.cos(a);e.x=o;e.y=s;return e}function Pn(e){e.x-=this.x0;e.y=this.rh-e.y+this.y0;var t,r,n,i;if(this.ns>=0){r=Math.sqrt(e.x*e.x+e.y*e.y);t=1}else{r=-Math.sqrt(e.x*e.x+e.y*e.y);t=-1}var a=0;if(r!==0){a=Math.atan2(t*e.x,t*e.y)}if(this.sphere){i=U(this.long0+a/this.ns);n=ur(this.g-r/this.a);e.x=i;e.y=n;return e}else{var o=this.g-r/this.a;n=cr(o,this.e0,this.e1,this.e2,this.e3);i=U(this.long0+a/this.ns);e.x=i;e.y=n;return e}}var Rn=["Equidistant_Conic","eqdc"];var Ln={init:In,forward:Dn,inverse:Pn,names:Rn};function Nn(){this.R=this.a}function $n(e){var t=e.x;var r=e.y;var n=U(t-this.long0);var i,a;if(Math.abs(r)<=j){i=this.x0+this.R*n;a=this.y0}var o=Pr(2*Math.abs(r/Math.PI));if(Math.abs(n)<=j||Math.abs(Math.abs(r)-A)<=j){i=this.x0;if(r>=0){a=this.y0+Math.PI*this.R*Math.tan(.5*o)}else{a=this.y0+Math.PI*this.R*-Math.tan(.5*o)}}var s=.5*Math.abs(Math.PI/n-n/Math.PI);var l=s*s;var u=Math.sin(o);var c=Math.cos(o);var f=c/(u+c-1);var h=f*f;var d=f*(2/u-1);var p=d*d;var v=Math.PI*this.R*(s*(f-p)+Math.sqrt(l*(f-p)*(f-p)-(p+l)*(h-p)))/(p+l);if(n<0){v=-v}i=this.x0+v;var g=l+f;v=Math.PI*this.R*(d*g-s*Math.sqrt((p+l)*(l+1)-g*g))/(p+l);if(r>=0){a=this.y0+v}else{a=this.y0-v}e.x=i;e.y=a;return e}function Fn(e){var t,r;var n,i,a,o,s,l;var u;var c;var f;var h;var d;e.x-=this.x0;e.y-=this.y0;f=Math.PI*this.R;n=e.x/f;i=e.y/f;a=n*n+i*i;o=-Math.abs(i)*(1+a);s=o-2*i*i+n*n;l=-2*o+1+2*i*i+a*a;d=i*i/l+(2*s*s*s/l/l/l-9*o*s/l/l)/27;u=(o-s*s/3/l)/l;c=2*Math.sqrt(-u/3);f=3*d/u/c;if(Math.abs(f)>1){if(f>=0){f=1}else{f=-1}}h=Math.acos(f)/3;if(e.y>=0){r=(-c*Math.cos(h+Math.PI/3)-s/3/l)*Math.PI}else{r=-(-c*Math.cos(h+Math.PI/3)-s/3/l)*Math.PI}if(Math.abs(n)<j){t=this.long0}else{t=U(this.long0+Math.PI*(a-1+Math.sqrt(1+2*(n*n-i*i)+a*a))/2/n)}e.x=t;e.y=r;return e}var Gn=["Van_der_Grinten_I","VanDerGrinten","vandg"];var Un={init:Nn,forward:$n,inverse:Fn,names:Gn};function Hn(){this.sin_p12=Math.sin(this.lat0);this.cos_p12=Math.cos(this.lat0)}function Wn(e){var t=e.x;var r=e.y;var n=Math.sin(e.y);var i=Math.cos(e.y);var a=U(t-this.long0);var o,s,l,u,c,f,h,d,p,v,g,m,_,y,b,w,S,C,O,x,T,E,M;if(this.sphere){if(Math.abs(this.sin_p12-1)<=j){e.x=this.x0+this.a*(A-r)*Math.sin(a);e.y=this.y0-this.a*(A-r)*Math.cos(a);return e}else if(Math.abs(this.sin_p12+1)<=j){e.x=this.x0+this.a*(A+r)*Math.sin(a);e.y=this.y0+this.a*(A+r)*Math.cos(a);return e}else{C=this.sin_p12*n+this.cos_p12*i*Math.cos(a);w=Math.acos(C);S=w/Math.sin(w);e.x=this.x0+this.a*S*i*Math.sin(a);e.y=this.y0+this.a*S*(this.cos_p12*n-this.sin_p12*i*Math.cos(a));return e}}else{o=ir(this.es);s=ar(this.es);l=or(this.es);u=sr(this.es);if(Math.abs(this.sin_p12-1)<=j){c=this.a*nr(o,s,l,u,A);f=this.a*nr(o,s,l,u,r);e.x=this.x0+(c-f)*Math.sin(a);e.y=this.y0-(c-f)*Math.cos(a);return e}else if(Math.abs(this.sin_p12+1)<=j){c=this.a*nr(o,s,l,u,A);f=this.a*nr(o,s,l,u,r);e.x=this.x0+(c+f)*Math.sin(a);e.y=this.y0+(c+f)*Math.cos(a);return e}else{h=n/i;d=lr(this.a,this.e,this.sin_p12);p=lr(this.a,this.e,n);v=Math.atan((1-this.es)*h+this.es*d*this.sin_p12/(p*i));g=Math.atan2(Math.sin(a),this.cos_p12*Math.tan(v)-this.sin_p12*Math.cos(a));if(g===0){O=Math.asin(this.cos_p12*Math.sin(v)-this.sin_p12*Math.cos(v))}else if(Math.abs(Math.abs(g)-Math.PI)<=j){O=-Math.asin(this.cos_p12*Math.sin(v)-this.sin_p12*Math.cos(v))}else{O=Math.asin(Math.sin(a)*Math.cos(v)/Math.sin(g))}m=this.e*this.sin_p12/Math.sqrt(1-this.es);_=this.e*this.cos_p12*Math.cos(g)/Math.sqrt(1-this.es);y=m*_;b=_*_;x=O*O;T=x*O;E=T*O;M=E*O;w=d*O*(1-x*b*(1-b)/6+T/8*y*(1-2*b)+E/120*(b*(4-7*b)-3*m*m*(1-7*b))-M/48*y);e.x=this.x0+w*Math.sin(g);e.y=this.y0+w*Math.cos(g);return e}}}function Yn(e){e.x-=this.x0;e.y-=this.y0;var t,r,n,i,a,o,s,l,u,c,f,h,d,p,v,g,m,_,y,b,w,S,C;if(this.sphere){t=Math.sqrt(e.x*e.x+e.y*e.y);if(t>2*A*this.a){return}r=t/this.a;n=Math.sin(r);i=Math.cos(r);a=this.long0;if(Math.abs(t)<=j){o=this.lat0}else{o=Pr(i*this.sin_p12+e.y*n*this.cos_p12/t);s=Math.abs(this.lat0)-A;if(Math.abs(s)<=j){if(this.lat0>=0){a=U(this.long0+Math.atan2(e.x,-e.y))}else{a=U(this.long0-Math.atan2(-e.x,e.y))}}else{a=U(this.long0+Math.atan2(e.x*n,t*this.cos_p12*i-e.y*this.sin_p12*n))}}e.x=a;e.y=o;return e}else{l=ir(this.es);u=ar(this.es);c=or(this.es);f=sr(this.es);if(Math.abs(this.sin_p12-1)<=j){h=this.a*nr(l,u,c,f,A);t=Math.sqrt(e.x*e.x+e.y*e.y);d=h-t;o=cr(d/this.a,l,u,c,f);a=U(this.long0+Math.atan2(e.x,-1*e.y));e.x=a;e.y=o;return e}else if(Math.abs(this.sin_p12+1)<=j){h=this.a*nr(l,u,c,f,A);t=Math.sqrt(e.x*e.x+e.y*e.y);d=t-h;o=cr(d/this.a,l,u,c,f);a=U(this.long0+Math.atan2(e.x,e.y));e.x=a;e.y=o;return e}else{t=Math.sqrt(e.x*e.x+e.y*e.y);g=Math.atan2(e.x,e.y);p=lr(this.a,this.e,this.sin_p12);m=Math.cos(g);_=this.e*this.cos_p12*m;y=-_*_/(1-this.es);b=3*this.es*(1-y)*this.sin_p12*this.cos_p12*m/(1-this.es);w=t/p;S=w-y*(1+y)*Math.pow(w,3)/6-b*(1+3*y)*Math.pow(w,4)/24;C=1-y*S*S/2-w*S*S*S/6;v=Math.asin(this.sin_p12*Math.cos(S)+this.cos_p12*Math.sin(S)*m);a=U(this.long0+Math.asin(Math.sin(g)*Math.sin(S)/Math.cos(v)));o=Math.atan((1-this.es*C*this.sin_p12/Math.sin(v))*Math.tan(v)/(1-this.es));e.x=a;e.y=o;return e}}}var Vn=["Azimuthal_Equidistant","aeqd"];var qn={init:Hn,forward:Wn,inverse:Yn,names:Vn};function zn(){this.sin_p14=Math.sin(this.lat0);this.cos_p14=Math.cos(this.lat0)}function Bn(e){var t,r;var n;var i;var a;var o,s,l;var u=e.x;var c=e.y;n=U(u-this.long0);t=Math.sin(c);r=Math.cos(c);i=Math.cos(n);o=this.sin_p14*t+this.cos_p14*r*i;a=1;if(o>0||Math.abs(o)<=j){s=this.a*a*r*Math.sin(n);l=this.y0+this.a*a*(this.cos_p14*t-this.sin_p14*r*i)}e.x=s;e.y=l;return e}function Kn(e){var t;var r;var n,i;var a;var o,s;e.x-=this.x0;e.y-=this.y0;t=Math.sqrt(e.x*e.x+e.y*e.y);r=Pr(t/this.a);n=Math.sin(r);i=Math.cos(r);o=this.long0;if(Math.abs(t)<=j){s=this.lat0;e.x=o;e.y=s;return e}s=Pr(i*this.sin_p14+e.y*n*this.cos_p14/t);a=Math.abs(this.lat0)-A;if(Math.abs(a)<=j){if(this.lat0>=0){o=U(this.long0+Math.atan2(e.x,-e.y))}else{o=U(this.long0-Math.atan2(-e.x,e.y))}e.x=o;e.y=s;return e}o=U(this.long0+Math.atan2(e.x*n,t*this.cos_p14*i-e.y*this.sin_p14*n));e.x=o;e.y=s;return e}var Xn=["ortho"];var Zn={init:zn,forward:Bn,inverse:Kn,names:Xn};var Qn={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6};var Jn={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function ei(){this.x0=this.x0||0;this.y0=this.y0||0;this.lat0=this.lat0||0;this.long0=this.long0||0;this.lat_ts=this.lat_ts||0;this.title=this.title||"Quadrilateralized Spherical Cube";if(this.lat0>=A-g/2){this.face=Qn.TOP}else if(this.lat0<=-(A-g/2)){this.face=Qn.BOTTOM}else if(Math.abs(this.long0)<=g){this.face=Qn.FRONT}else if(Math.abs(this.long0)<=A+g){this.face=this.long0>0?Qn.RIGHT:Qn.LEFT}else{this.face=Qn.BACK}if(this.es!==0){this.one_minus_f=1-(this.a-this.b)/this.a;this.one_minus_f_squared=this.one_minus_f*this.one_minus_f}}function ti(e){var t={x:0,y:0};var r,n;var i,a;var o,s;var l={value:0};e.x-=this.long0;if(this.es!==0){r=Math.atan(this.one_minus_f_squared*Math.tan(e.y))}else{r=e.y}n=e.x;if(this.face===Qn.TOP){a=A-r;if(n>=g&&n<=A+g){l.value=Jn.AREA_0;i=n-A}else if(n>A+g||n<=-(A+g)){l.value=Jn.AREA_1;i=n>0?n-_:n+_}else if(n>-(A+g)&&n<=-g){l.value=Jn.AREA_2;i=n+A}else{l.value=Jn.AREA_3;i=n}}else if(this.face===Qn.BOTTOM){a=A+r;if(n>=g&&n<=A+g){l.value=Jn.AREA_0;i=-n+A}else if(n<g&&n>=-g){l.value=Jn.AREA_1;i=-n}else if(n<-g&&n>=-(A+g)){l.value=Jn.AREA_2;i=-n-A}else{l.value=Jn.AREA_3;i=n>0?-n+_:-n-_}}else{var u,c,f;var h,d;var p,v;if(this.face===Qn.RIGHT){n=ii(n,+A)}else if(this.face===Qn.BACK){n=ii(n,+_)}else if(this.face===Qn.LEFT){n=ii(n,-A)}h=Math.sin(r);d=Math.cos(r);p=Math.sin(n);v=Math.cos(n);u=d*v;c=d*p;f=h;if(this.face===Qn.FRONT){a=Math.acos(u);i=ni(a,f,c,l)}else if(this.face===Qn.RIGHT){a=Math.acos(c);i=ni(a,f,-u,l)}else if(this.face===Qn.BACK){a=Math.acos(-u);i=ni(a,f,-c,l)}else if(this.face===Qn.LEFT){a=Math.acos(-c);i=ni(a,f,u,l)}else{a=i=0;l.value=Jn.AREA_0}}s=Math.atan(12/_*(i+Math.acos(Math.sin(i)*Math.cos(g))-A));o=Math.sqrt((1-Math.cos(a))/(Math.cos(s)*Math.cos(s))/(1-Math.cos(Math.atan(1/Math.cos(i)))));if(l.value===Jn.AREA_1){s+=A}else if(l.value===Jn.AREA_2){s+=_}else if(l.value===Jn.AREA_3){s+=1.5*_}t.x=o*Math.cos(s);t.y=o*Math.sin(s);t.x=t.x*this.a+this.x0;t.y=t.y*this.a+this.y0;e.x=t.x;e.y=t.y;return e}function ri(e){var t={lam:0,phi:0};var r,n,i,a;var o,s,l,u;var c;var f={value:0};e.x=(e.x-this.x0)/this.a;e.y=(e.y-this.y0)/this.a;n=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y));r=Math.atan2(e.y,e.x);if(e.x>=0&&e.x>=Math.abs(e.y)){f.value=Jn.AREA_0}else if(e.y>=0&&e.y>=Math.abs(e.x)){f.value=Jn.AREA_1;r-=A}else if(e.x<0&&-e.x>=Math.abs(e.y)){f.value=Jn.AREA_2;r=r<0?r+_:r-_}else{f.value=Jn.AREA_3;r+=A}c=_/12*Math.tan(r);o=Math.sin(c)/(Math.cos(c)-1/Math.sqrt(2));s=Math.atan(o);i=Math.cos(r);a=Math.tan(n);l=1-i*i*a*a*(1-Math.cos(Math.atan(1/Math.cos(s))));if(l<-1){l=-1}else if(l>+1){l=+1}if(this.face===Qn.TOP){u=Math.acos(l);t.phi=A-u;if(f.value===Jn.AREA_0){t.lam=s+A}else if(f.value===Jn.AREA_1){t.lam=s<0?s+_:s-_}else if(f.value===Jn.AREA_2){t.lam=s-A}else{t.lam=s}}else if(this.face===Qn.BOTTOM){u=Math.acos(l);t.phi=u-A;if(f.value===Jn.AREA_0){t.lam=-s+A}else if(f.value===Jn.AREA_1){t.lam=-s}else if(f.value===Jn.AREA_2){t.lam=-s-A}else{t.lam=s<0?-s-_:-s+_}}else{var h,d,p;h=l;c=h*h;if(c>=1){p=0}else{p=Math.sqrt(1-c)*Math.sin(s)}c+=p*p;if(c>=1){d=0}else{d=Math.sqrt(1-c)}if(f.value===Jn.AREA_1){c=d;d=-p;p=c}else if(f.value===Jn.AREA_2){d=-d;p=-p}else if(f.value===Jn.AREA_3){c=d;d=p;p=-c}if(this.face===Qn.RIGHT){c=h;h=-d;d=c}else if(this.face===Qn.BACK){h=-h;d=-d}else if(this.face===Qn.LEFT){c=h;h=d;d=-c}t.phi=Math.acos(-p)-A;t.lam=Math.atan2(d,h);if(this.face===Qn.RIGHT){t.lam=ii(t.lam,-A)}else if(this.face===Qn.BACK){t.lam=ii(t.lam,-_)}else if(this.face===Qn.LEFT){t.lam=ii(t.lam,+A)}}if(this.es!==0){var v;var g,m;v=t.phi<0?1:0;g=Math.tan(t.phi);m=this.b/Math.sqrt(g*g+this.one_minus_f_squared);t.phi=Math.atan(Math.sqrt(this.a*this.a-m*m)/(this.one_minus_f*m));if(v){t.phi=-t.phi}}t.lam+=this.long0;e.x=t.lam;e.y=t.phi;return e}function ni(e,t,r,n){var i;if(e<j){n.value=Jn.AREA_0;i=0}else{i=Math.atan2(t,r);if(Math.abs(i)<=g){n.value=Jn.AREA_0}else if(i>g&&i<=A+g){n.value=Jn.AREA_1;i-=A}else if(i>A+g||i<=-(A+g)){n.value=Jn.AREA_2;i=i>=0?i-_:i+_}else{n.value=Jn.AREA_3;i+=A}}return i}function ii(e,t){var r=e+t;if(r<-_){r+=i}else if(r>+_){r-=i}return r}var ai=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];var oi={init:ei,forward:ti,inverse:ri,names:ai};var si=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]];var li=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]];var ui=.8487;var ci=1.3523;var fi=v/5;var hi=1/fi;var di=18;var pi=function e(t,r){return t[0]+r*(t[1]+r*(t[2]+r*t[3]))};var vi=function e(t,r){return t[1]+r*(2*t[2]+r*3*t[3])};function gi(e,t,r,n){var i=t;for(;n;--n){var a=e(i);i-=a;if(Math.abs(a)<r){break}}return i}function mi(){this.x0=this.x0||0;this.y0=this.y0||0;this.long0=this.long0||0;this.es=0;this.title=this.title||"Robinson"}function _i(e){var t=U(e.x-this.long0);var r=Math.abs(e.y);var n=Math.floor(r*fi);if(n<0){n=0}else if(n>=di){n=di-1}r=v*(r-hi*n);var i={x:pi(si[n],r)*t,y:pi(li[n],r)};if(e.y<0){i.y=-i.y}i.x=i.x*this.a*ui+this.x0;i.y=i.y*this.a*ci+this.y0;return i}function yi(e){var t={x:(e.x-this.x0)/(this.a*ui),y:Math.abs(e.y-this.y0)/(this.a*ci)};if(t.y>=1){t.x/=si[di][0];t.y=e.y<0?-A:A}else{var r=Math.floor(t.y*di);if(r<0){r=0}else if(r>=di){r=di-1}for(;;){if(li[r][0]>t.y){--r}else if(li[r+1][0]<=t.y){++r}else{break}}var n=li[r];var i=5*(t.y-n[0])/(li[r+1][0]-n[0]);i=gi(function(e){return(pi(n,e)-t.y)/vi(n,e)},i,j,100);t.x/=pi(si[r],i);t.y=(5*r+i)*h;if(e.y<0){t.y=-t.y}}t.x=U(t.x+this.long0);return t}var bi=["Robinson","robin"];var wi={init:mi,forward:_i,inverse:yi,names:bi};var Si=function(e){e.Proj.projections.add(it);e.Proj.projections.add(mt);e.Proj.projections.add(St);e.Proj.projections.add(Pt);e.Proj.projections.add(Gt);e.Proj.projections.add(Ut["a"]);e.Proj.projections.add(qt);e.Proj.projections.add(Zt);e.Proj.projections.add(rr);e.Proj.projections.add(vr);e.Proj.projections.add(Dr);e.Proj.projections.add(Gr);e.Proj.projections.add(Vr);e.Proj.projections.add(Zr);e.Proj.projections.add(rn);e.Proj.projections.add(un);e.Proj.projections.add(vn);e.Proj.projections.add(bn);e.Proj.projections.add(Tn);e.Proj.projections.add(jn);e.Proj.projections.add(Ln);e.Proj.projections.add(Un);e.Proj.projections.add(qn);e.Proj.projections.add(Zn);e.Proj.projections.add(oi);e.Proj.projections.add(wi)};Ie.defaultDatum="WGS84";Ie.Proj=pe;Ie.WGS84=new Ie.Proj("WGS84");Ie.Point=Le;Ie.toPoint=Ce;Ie.defs=O;Ie.transform=Ee;Ie.mgrs=Pe.a;Ie.version=Ne["a"];Si(Ie);var Ci=t["a"]=Ie},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n="1.3.0"},function(e,t,r){"use strict";var b=r(67);var w=r(15);var S=function e(){this.extentHalfHorizontalDistance_;this.extentHalfVerticalDistance_};S.INCHES_PER_METER_=39.37;S.DOTS_PER_INCH_=72;S.prototype.createPrintMaskPostcompose=function(g,m,_){var y=this;return function(e){var t=e.context;var r=e.frameState;var n=r.viewState.resolution;var i=r.size[0]*r.pixelRatio;var a=r.size[1]*r.pixelRatio;var o=[i/2,a/2];var s=g();var l=s[1]*b["b"];var u=s[0]*b["b"];var c=m(r);var f=S.DOTS_PER_INCH_;var h=S.INCHES_PER_METER_;var d=u/f/h*c/n/2;y.extentHalfHorizontalDistance_=s[0]/f/h*c/2;var p=l/f/h*c/n/2;y.extentHalfVerticalDistance_=s[1]/f/h*c/2;t.beginPath();t.moveTo(0,0);t.lineTo(i,0);t.lineTo(i,a);t.lineTo(0,a);t.lineTo(0,0);t.closePath();if(!_){y.drawPrintZone_(t,o,d,p)}else{var v=w["i"](_());y.drawPrintZoneWithRotation_(t,o,d,p,v)}t.fillStyle="rgba(0, 5, 25, 0.5)";t.fill()}};S.prototype.drawPrintZone_=function(e,t,r,n){var i=t[0]-r;var a=t[1]-n;var o=t[0]+r;var s=t[1]+n;e.moveTo(i,a);e.lineTo(i,s);e.lineTo(o,s);e.lineTo(o,a);e.lineTo(i,a);e.closePath()};S.prototype.drawPrintZoneWithRotation_=function(e,t,r,n,i){var a=Math.sqrt(Math.pow(r,2)+Math.pow(n,2));var o=Math.atan(n/r)-i;var s=Math.atan(r/n)-i;var l=t[0]-Math.cos(o)*a;var u=t[1]+Math.sin(o)*a;var c=t[0]+Math.sin(s)*a;var f=t[1]+Math.cos(s)*a;var h=t[0]+Math.cos(o)*a;var d=t[1]-Math.sin(o)*a;var p=t[0]-Math.sin(s)*a;var v=t[1]-Math.cos(s)*a;e.moveTo(l,u);e.lineTo(c,f);e.lineTo(h,d);e.lineTo(p,v);e.lineTo(l,u);e.closePath()};S.prototype.getOptimalScale=function(e,t,r,n){var i=e[0]*t;var a=e[1]*t;var o=i*S.INCHES_PER_METER_*S.DOTS_PER_INCH_/r[0];var s=a*S.INCHES_PER_METER_*S.DOTS_PER_INCH_/r[1];var l=Math.min(o,s);var u=-1;for(var c=0,f=n.length;c<f;++c){if(l>n[c]){u=n[c]}}return u};S.prototype.getOptimalResolution=function(e,t,r){var n=S.DOTS_PER_INCH_*S.INCHES_PER_METER_;var i=t[0]*r/(n*e[0]);var a=t[1]*r/(n*e[1]);var o=Math.max(i,a);return o};S.prototype.getBottomLeftCorner=function(e){return[e[0]-this.extentHalfHorizontalDistance_,e[1]-this.extentHalfVerticalDistance_]};S.prototype.getBottomRightCorner=function(e){return[e[0]+this.extentHalfHorizontalDistance_,e[1]-this.extentHalfVerticalDistance_]};S.prototype.getUpLeftCorner=function(e){return[e[0]-this.extentHalfHorizontalDistance_,e[1]+this.extentHalfVerticalDistance_]};S.prototype.getUpRightCorner=function(e){return[e[0]+this.extentHalfHorizontalDistance_,e[1]+this.extentHalfVerticalDistance_]};S.module=angular.module("ngeoPrintUtils",[]);S.module.service("ngeoPrintUtils",S);t["a"]=S},function(e,t,r){"use strict";var n=r(5);var i=function e(t,r){this.data=t;this.columnDefs=r;this.selectedRows={}};i.getRowUid=function(e){return""+n["c"](e)};i.prototype.isRowSelected=function(e){return!!this.selectedRows[i.getRowUid(e)]};i.prototype.getSelectedCount=function(){return Object.keys(this.selectedRows).length};i.prototype.getSelectedRows=function(){var t=this;return this.data.filter(function(e){return t.isRowSelected(e)})};i.prototype.selectRow=function(e){var t=i.getRowUid(e);this.selectedRows[t]=e};i.prototype.toggleRow=function(e){var t=i.getRowUid(e);var r=this.isRowSelected(e);if(r){delete this.selectedRows[t]}else{this.selectedRows[t]=e}};i.prototype.selectAll=function(){var t=this;this.data.forEach(function(e){t.selectRow(e)})};i.prototype.unselectAll=function(){for(var e in this.selectedRows){delete this.selectedRows[e]}};i.prototype.invertSelection=function(){var t=this;this.data.forEach(function(e){t.toggleRow(e)})};i.module=angular.module("ngeoGridConfig",[]);t["a"]=i},function(e,t,r){"use strict";function f(e,t,r,n){while(t<r-n){for(var i=0;i<n;++i){var a=e[t+i];e[t+i]=e[r-n+i];e[r-n+i]=a}t+=n;r-=n}}r.d(t,"a",function(){return s});r.d(t,"b",function(){return n});r.d(t,"c",function(){return l});r.d(t,"d",function(){return i});function h(e,t,r,n){var i=0;var a=e[r-n];var o=e[r-n+1];for(;t<r;t+=n){var s=e[t];var l=e[t+1];i+=(s-a)*(l+o);a=s;o=l}return i>0}function s(e,t,r,n,i){var a=i!==undefined?i:false;for(var o=0,s=r.length;o<s;++o){var l=r[o];var u=h(e,t,l,n);if(o===0){if(a&&u||!a&&!u){return false}}else{if(a&&!u||!a&&u){return false}}t=l}return true}function n(e,t,r,n,i){for(var a=0,o=r.length;a<o;++a){if(!s(e,t,r[a],n,i)){return false}}return true}function l(e,t,r,n,i){var a=i!==undefined?i:false;for(var o=0,s=r.length;o<s;++o){var l=r[o];var u=h(e,t,l,n);var c=o===0?a&&u||!a&&!u:a&&!u||!a&&u;if(c){f(e,t,l,n)}t=l}return t}function i(e,t,r,n,i){for(var a=0,o=r.length;a<o;++a){t=l(e,t,r[a],n,i)}return t}},function(e,t,r){"use strict";var o=r(2);var n=r(113);var i=r(12);var a=function(e){function t(){e.call(this);this.revision_=0}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.changed=function e(){++this.revision_;this.dispatchEvent(i["a"].CHANGE)};t.prototype.getRevision=function e(){return this.revision_};t.prototype.on=function e(t,r){if(Array.isArray(t)){var n=t.length;var i=new Array(n);for(var a=0;a<n;++a){i[a]=Object(o["a"])(this,t[a],r)}return i}else{return Object(o["a"])(this,t,r)}};t.prototype.once=function e(t,r){if(Array.isArray(t)){var n=t.length;var i=new Array(n);for(var a=0;a<n;++a){i[a]=Object(o["b"])(this,t[a],r)}return i}else{return Object(o["b"])(this,t,r)}};t.prototype.un=function e(t,r){if(Array.isArray(t)){for(var n=0,i=t.length;n<i;++n){Object(o["c"])(this,t[n],r)}return}else{Object(o["c"])(this,t,r)}};return t}(n["a"]);function s(e){if(Array.isArray(e)){for(var t=0,r=e.length;t<r;++t){Object(o["e"])(e[t])}}else{Object(o["e"])(e)}}t["a"]=a},function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"b",function(){return i});var n=42;var i=256},function(e,t,r){"use strict";var u=r(1);var n=r(23);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function a(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}var o=function(){function l(e){this.dataSourcesCollection_=new n["a"](e.dataSources);this.title_=e.title}var e=l.prototype;e.destroy=function e(){this.dataSourcesCollection_.clear()};e.getDataSourceState=function e(t){return t.visible?l.VisibilityState.ON:l.VisibilityState.OFF};e.addDataSource=function e(t){this.dataSourcesCollection_.push(t)};e.removeDataSource=function e(t){this.dataSourcesCollection_.remove(t)};e.toggleVisibilityState=function e(){var t=this.visibilityState!==l.VisibilityState.ON;for(var r=this.dataSources,n=Array.isArray(r),i=0,r=n?r:r[Symbol.iterator]();;){var a;if(n){if(i>=r.length)break;a=r[i++]}else{i=r.next();if(i.done)break;a=i.value}var o=a;if(o.visible!==t){o.visible=t}}};a(l,[{key:"dataSources",get:function e(){return this.dataSourcesCollection_.getArray()}},{key:"dataSourcesCollection",get:function e(){return this.dataSourcesCollection_}},{key:"title",get:function e(){return this.title_}},{key:"visibilityState",get:function e(){var t;for(var r=this.dataSources,n=Array.isArray(r),i=0,r=n?r:r[Symbol.iterator]();;){var a;if(n){if(i>=r.length)break;a=r[i++]}else{i=r.next();if(i.done)break;a=i.value}var o=a;if(t===undefined){t=this.getDataSourceState(o)}else{var s=this.getDataSourceState(o);if(s!==t){t=l.VisibilityState.INDETERMINATE}}if(t===l.VisibilityState.INDETERMINATE){break}}u["a"].assertString(t);return t}}]);return l}();o.VisibilityState={INDETERMINATE:"indeterminate",OFF:"off",ON:"on"};t["a"]=o},function(e,t,r){"use strict";var i=r(3);var s=r(81);var n=r(69);var p=r(4);var v=r(9);var g=r(10);var m=r(0);var a=n["a"]+" http://schemas.opengis.net/gml/2.1.2/feature.xsd";var o={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};var l=function(r){function e(e){var t=e?e:{};r.call(this,t);this.FEATURE_COLLECTION_PARSERS[n["a"]]["featureMember"]=Object(m["i"])(this.readFeaturesInternal);this.schemaLocation=t.schemaLocation?t.schemaLocation:a}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;e.prototype.readFlatCoordinates_=function e(t,r){var n=Object(m["e"])(t,false).replace(/^\s*|\s*$/g,"");var i=r[0];var a=i["srsName"];var o="enu";if(a){var s=Object(g["g"])(a);if(s){o=s.getAxisOrientation()}}var l=n.trim().split(/\s+/);var u=[];for(var c=0,f=l.length;c<f;c++){var h=l[c].split(/,+/);var d=parseFloat(h[0]);var p=parseFloat(h[1]);var v=h.length===3?parseFloat(h[2]):0;if(o.substr(0,2)==="en"){u.push(d,p,v)}else{u.push(p,d,v)}}return u};e.prototype.readBox_=function e(t,r){var n=Object(m["t"])([null],this.BOX_PARSERS_,t,r,this);return Object(i["k"])(n[1][0],n[1][1],n[1][3],n[1][4])};e.prototype.innerBoundaryIsParser_=function e(t,r){var n=Object(m["t"])(undefined,this.RING_PARSERS,t,r,this);if(n){var i=r[r.length-1];i.push(n)}};e.prototype.outerBoundaryIsParser_=function e(t,r){var n=Object(m["t"])(undefined,this.RING_PARSERS,t,r,this);if(n){var i=r[r.length-1];i[0]=n}};e.prototype.GEOMETRY_NODE_FACTORY_=function e(t,r,n){var i=r[r.length-1];var a=i["multiSurface"];var o=i["surface"];var s=i["multiCurve"];var l;if(!Array.isArray(t)){l=t.getType();if(l==="MultiPolygon"&&a===true){l="MultiSurface"}else if(l==="Polygon"&&o===true){l="Surface"}else if(l==="MultiLineString"&&s===true){l="MultiCurve"}}else{l="Envelope"}return Object(m["d"])("http://www.opengis.net/gml",l)};e.prototype.writeFeatureElement=function e(t,r,n){var i=r.getId();if(i){t.setAttribute("fid",i)}var a=n[n.length-1];var o=a["featureNS"];var s=r.getGeometryName();if(!a.serializers){a.serializers={};a.serializers[o]={}}var l=r.getProperties();var u=[];var c=[];for(var f in l){var h=l[f];if(h!==null){u.push(f);c.push(h);if(f==s||typeof h.getSimplifiedGeometry==="function"){if(!(f in a.serializers[o])){a.serializers[o][f]=Object(m["k"])(this.writeGeometryElement,this)}}else{if(!(f in a.serializers[o])){a.serializers[o][f]=Object(m["k"])(p["n"])}}}}var d=Object(v["a"])({},a);d.node=t;Object(m["u"])(d,a.serializers,Object(m["p"])(undefined,o),c,n,u)};e.prototype.writeCurveOrLineString_=function e(t,r,n){var i=n[n.length-1];var a=i["srsName"];if(t.nodeName!=="LineStringSegment"&&a){t.setAttribute("srsName",a)}if(t.nodeName==="LineString"||t.nodeName==="LineStringSegment"){var o=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(o);this.writeCoordinates_(o,r,n)}else if(t.nodeName==="Curve"){var s=Object(m["d"])(t.namespaceURI,"segments");t.appendChild(s);this.writeCurveSegments_(s,r,n)}};e.prototype.writeLineStringOrCurveMember_=function e(t,r,n){var i=this.GEOMETRY_NODE_FACTORY_(r,n);if(i){t.appendChild(i);this.writeCurveOrLineString_(i,r,n)}};e.prototype.writeMultiCurveOrLineString_=function e(t,r,n){var i=n[n.length-1];var a=i["hasZ"];var o=i["srsName"];var s=i["curve"];if(o){t.setAttribute("srsName",o)}var l=r.getLineStrings();Object(m["u"])({node:t,hasZ:a,srsName:o,curve:s},this.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,n,undefined,this)};e.prototype.writeGeometryElement=function e(t,r,n){var i=n[n.length-1];var a=Object(v["a"])({},i);a["node"]=t;var o;if(Array.isArray(r)){if(i.dataProjection){o=Object(g["n"])(r,i.featureProjection,i.dataProjection)}else{o=r}}else{o=Object(s["b"])(r,true,i)}Object(m["u"])(a,this.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[o],n,undefined,this)};e.prototype.createCoordinatesNode_=function e(t){var r=Object(m["d"])(t,"coordinates");r.setAttribute("decimal",".");r.setAttribute("cs",",");r.setAttribute("ts"," ");return r};e.prototype.writeCoordinates_=function e(t,r,n){var i=n[n.length-1];var a=i["hasZ"];var o=i["srsName"];var s=r.getCoordinates();var l=s.length;var u=new Array(l);for(var c=0;c<l;++c){var f=s[c];u[c]=this.getCoords_(f,o,a)}Object(p["n"])(t,u.join(" "))};e.prototype.writeCurveSegments_=function e(t,r,n){var i=Object(m["d"])(t.namespaceURI,"LineStringSegment");t.appendChild(i);this.writeCurveOrLineString_(i,r,n)};e.prototype.writeSurfaceOrPolygon_=function e(t,r,n){var i=n[n.length-1];var a=i["hasZ"];var o=i["srsName"];if(t.nodeName!=="PolygonPatch"&&o){t.setAttribute("srsName",o)}if(t.nodeName==="Polygon"||t.nodeName==="PolygonPatch"){var s=r.getLinearRings();Object(m["u"])({node:t,hasZ:a,srsName:o},this.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,s,n,undefined,this)}else if(t.nodeName==="Surface"){var l=Object(m["d"])(t.namespaceURI,"patches");t.appendChild(l);this.writeSurfacePatches_(l,r,n)}};e.prototype.RING_NODE_FACTORY_=function e(t,r,n){var i=r[r.length-1];var a=i.node;var o=i["exteriorWritten"];if(o===undefined){i["exteriorWritten"]=true}return Object(m["d"])(a.namespaceURI,o!==undefined?"innerBoundaryIs":"outerBoundaryIs")};e.prototype.writeSurfacePatches_=function e(t,r,n){var i=Object(m["d"])(t.namespaceURI,"PolygonPatch");t.appendChild(i);this.writeSurfaceOrPolygon_(i,r,n)};e.prototype.writeRing_=function e(t,r,n){var i=Object(m["d"])(t.namespaceURI,"LinearRing");t.appendChild(i);this.writeLinearRing_(i,r,n)};e.prototype.getCoords_=function e(t,r,n){var i="enu";if(r){i=Object(g["g"])(r).getAxisOrientation()}var a=i.substr(0,2)==="en"?t[0]+","+t[1]:t[1]+","+t[0];if(n){var o=t[2]||0;a+=","+o}return a};e.prototype.writePoint_=function e(t,r,n){var i=n[n.length-1];var a=i["hasZ"];var o=i["srsName"];if(o){t.setAttribute("srsName",o)}var s=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(s);var l=r.getCoordinates();var u=this.getCoords_(l,o,a);Object(p["n"])(s,u)};e.prototype.writeMultiPoint_=function e(t,r,n){var i=n[n.length-1];var a=i["hasZ"];var o=i["srsName"];if(o){t.setAttribute("srsName",o)}var s=r.getPoints();Object(m["u"])({node:t,hasZ:a,srsName:o},this.POINTMEMBER_SERIALIZERS_,Object(m["p"])("pointMember"),s,n,undefined,this)};e.prototype.writePointMember_=function e(t,r,n){var i=Object(m["d"])(t.namespaceURI,"Point");t.appendChild(i);this.writePoint_(i,r,n)};e.prototype.writeLinearRing_=function e(t,r,n){var i=n[n.length-1];var a=i["srsName"];if(a){t.setAttribute("srsName",a)}var o=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(o);this.writeCoordinates_(o,r,n)};e.prototype.writeMultiSurfaceOrPolygon_=function e(t,r,n){var i=n[n.length-1];var a=i["hasZ"];var o=i["srsName"];var s=i["surface"];if(o){t.setAttribute("srsName",o)}var l=r.getPolygons();Object(m["u"])({node:t,hasZ:a,srsName:o,surface:s},this.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,n,undefined,this)};e.prototype.writeSurfaceOrPolygonMember_=function e(t,r,n){var i=this.GEOMETRY_NODE_FACTORY_(r,n);if(i){t.appendChild(i);this.writeSurfaceOrPolygon_(i,r,n)}};e.prototype.writeEnvelope=function e(t,r,n){var i=n[n.length-1];var a=i["srsName"];if(a){t.setAttribute("srsName",a)}var o=["lowerCorner","upperCorner"];var s=[r[0]+" "+r[1],r[2]+" "+r[3]];Object(m["u"])({node:t},this.ENVELOPE_SERIALIZERS_,m["b"],s,n,o,this)};e.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function e(t,r,n){var i=r[r.length-1].node;return Object(m["d"])("http://www.opengis.net/gml",o[i.nodeName])};return e}(n["b"]);l.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:Object(m["n"])(l.prototype.readFlatCoordinates_)}};l.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:l.prototype.innerBoundaryIsParser_,outerBoundaryIs:l.prototype.outerBoundaryIsParser_}};l.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:Object(m["i"])(l.prototype.readFlatCoordinates_)}};l.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Object(m["n"])(n["b"].prototype.readPoint),MultiPoint:Object(m["n"])(n["b"].prototype.readMultiPoint),LineString:Object(m["n"])(n["b"].prototype.readLineString),MultiLineString:Object(m["n"])(n["b"].prototype.readMultiLineString),LinearRing:Object(m["n"])(n["b"].prototype.readLinearRing),Polygon:Object(m["n"])(n["b"].prototype.readPolygon),MultiPolygon:Object(m["n"])(n["b"].prototype.readMultiPolygon),Box:Object(m["n"])(l.prototype.readBox_)}};l.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:Object(m["k"])(l.prototype.writeCurveOrLineString_),MultiCurve:Object(m["k"])(l.prototype.writeMultiCurveOrLineString_),Point:Object(m["k"])(l.prototype.writePoint_),MultiPoint:Object(m["k"])(l.prototype.writeMultiPoint_),LineString:Object(m["k"])(l.prototype.writeCurveOrLineString_),MultiLineString:Object(m["k"])(l.prototype.writeMultiCurveOrLineString_),LinearRing:Object(m["k"])(l.prototype.writeLinearRing_),Polygon:Object(m["k"])(l.prototype.writeSurfaceOrPolygon_),MultiPolygon:Object(m["k"])(l.prototype.writeMultiSurfaceOrPolygon_),Surface:Object(m["k"])(l.prototype.writeSurfaceOrPolygon_),MultiSurface:Object(m["k"])(l.prototype.writeMultiSurfaceOrPolygon_),Envelope:Object(m["k"])(l.prototype.writeEnvelope)}};l.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:Object(m["k"])(l.prototype.writeLineStringOrCurveMember_),curveMember:Object(m["k"])(l.prototype.writeLineStringOrCurveMember_)}};l.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml":{outerBoundaryIs:Object(m["k"])(l.prototype.writeRing_),innerBoundaryIs:Object(m["k"])(l.prototype.writeRing_)}};l.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:Object(m["k"])(l.prototype.writePointMember_)}};l.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:Object(m["k"])(l.prototype.writeSurfaceOrPolygonMember_),polygonMember:Object(m["k"])(l.prototype.writeSurfaceOrPolygonMember_)}};l.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:Object(m["k"])(p["n"]),upperCorner:Object(m["k"])(p["n"])}};t["a"]=l},function(e,t,r){"use strict";t["a"]={ACTIVE:"active"}},function(e,t,r){"use strict";r.d(t,"a",function(){return n});function n(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}},function(e,a,o){"use strict";(function(l){var n=o(1);var r=o(78);var e=o(5);var i=o(2);var u=o(129);var c=o(141);var t=function e(t,r){var n=this;var i=r!==undefined?r:{};i.positioning=c["a"].TOP_LEFT;this.listenerKeys_=[];this.clickOutListenerKey_=null;var a=l("<div/>",{class:"panel panel-default"});this.autoClose_=t.autoClose!==undefined?t.autoClose:true;if(t.title){var o=l("<div>",{class:"panel-heading"}).appendTo(a);l("<span>",{text:t.title}).appendTo(o)}var s=l("<div>",{class:"list-group"}).appendTo(a);this.actions_=[];t.actions.forEach(function(e){n.actions_.push(l("<button>",{class:"list-group-item btn","data-name":e.name,text:[" ",e.label!==undefined?e.label:e.name].join("")}).appendTo(s).prepend(l("<span>",{class:e.cls!==undefined?e.cls:""})))});i.element=a[0];u["a"].call(this,i)};e["d"](t,u["a"]);t.prototype.setMap=function(e){var r=this;var t=this.getMap();if(t){this.listenerKeys_.forEach(i["e"]);this.listenerKeys_.length=0}u["a"].prototype.setMap.call(this,e);if(e){this.actions_.forEach(function(e){var t=e.data();r.listenerKeys_.push(i["a"](e[0],"click",r.handleActionClick_.bind(r,t.name)))});this.listenerKeys_.push(i["a"](e,"pointermove",this.handleMapPointerMove_,this))}};t.prototype.open=function(e){this.setPosition(e);if(this.autoClose_){this.clickOutListenerKey_=i["a"](document.documentElement,"mousedown",this.handleClickOut_,this)}};t.prototype.close=function(){this.setPosition(undefined);if(this.clickOutListenerKey_!==null){i["e"](this.clickOutListenerKey_)}};t.prototype.handleActionClick_=function(e,t){this.dispatchEvent(new r["a"]("actionclick",{action:e}));if(this.autoClose_){this.close()}t.stopPropagation()};t.prototype.handleClickOut_=function(e){var t=this.getElement();if(t&&l(e.target).closest(t).length===0){this.close()}};t.prototype.handleMapPointerMove_=function(e){var t=e.originalEvent.target;n["a"].assertInstanceof(t,Element);var r=this.getElement();n["a"].assertInstanceof(r,Element);if(r.contains(t)){e.coordinate=[Infinity,Infinity];e.pixel=[Infinity,Infinity]}};a["a"]=t}).call(this,o(27))},function(e,t,r){"use strict";var o=r(23);var a=r(50);var s=r(2);var n=r(71);var l=r(41);var u=r(8);var i=r(54);var c=r(235);var f={TRANSLATESTART:"translatestart",TRANSLATING:"translating",TRANSLATEEND:"translateend"};var h=function(n){function e(e,t,r){n.call(this,e);this.features=t;this.coordinate=r}if(n)e.__proto__=n;e.prototype=Object.create(n&&n.prototype);e.prototype.constructor=e;return e}(n["a"]);var d=function(i){function e(e){var t=e?e:{};i.call(this,t);this.lastCoordinate_=null;this.features_=t.features!==undefined?t.features:null;var r;if(t.layers){if(typeof t.layers==="function"){r=t.layers}else{var n=t.layers;r=function e(t){return Object(u["f"])(n,t)}}}else{r=l["b"]}this.layerFilter_=r;this.hitTolerance_=t.hitTolerance?t.hitTolerance:0;this.lastFeature_=null;Object(s["a"])(this,Object(a["b"])(c["a"].ACTIVE),this.handleActiveChanged_,this)}if(i)e.__proto__=i;e.prototype=Object.create(i&&i.prototype);e.prototype.constructor=e;e.prototype.handleDownEvent=function e(t){this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map);if(!this.lastCoordinate_&&this.lastFeature_){this.lastCoordinate_=t.coordinate;this.handleMoveEvent(t);var r=this.features_||new o["a"]([this.lastFeature_]);this.dispatchEvent(new h(f.TRANSLATESTART,r,t.coordinate));return true}return false};e.prototype.handleUpEvent=function e(t){if(this.lastCoordinate_){this.lastCoordinate_=null;this.handleMoveEvent(t);var r=this.features_||new o["a"]([this.lastFeature_]);this.dispatchEvent(new h(f.TRANSLATEEND,r,t.coordinate));return true}return false};e.prototype.handleDragEvent=function e(t){if(this.lastCoordinate_){var r=t.coordinate;var n=r[0]-this.lastCoordinate_[0];var i=r[1]-this.lastCoordinate_[1];var a=this.features_||new o["a"]([this.lastFeature_]);a.forEach(function(e){var t=e.getGeometry();t.translate(n,i);e.setGeometry(t)});this.lastCoordinate_=r;this.dispatchEvent(new h(f.TRANSLATING,a,r))}};e.prototype.handleMoveEvent=function e(t){var r=t.map.getViewport();if(this.featuresAtPixel_(t.pixel,t.map)){r.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing");r.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")}else{r.classList.remove("ol-grab","ol-grabbing")}};e.prototype.featuresAtPixel_=function e(t,r){return r.forEachFeatureAtPixel(t,function(e){if(!this.features_||Object(u["f"])(this.features_.getArray(),e)){return e}}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})};e.prototype.getHitTolerance=function e(){return this.hitTolerance_};e.prototype.setHitTolerance=function e(t){this.hitTolerance_=t};e.prototype.setMap=function e(t){var r=this.getMap();i.prototype.setMap.call(this,t);this.updateState_(r)};e.prototype.handleActiveChanged_=function e(){this.updateState_(null)};e.prototype.updateState_=function e(t){var r=this.getMap();var n=this.getActive();if(!r||!n){r=r||t;if(r){var i=r.getViewport();i.classList.remove("ol-grab","ol-grabbing")}}};return e}(i["b"]);t["a"]=d},function(e,t,r){"use strict";var n=r(2);var i=function e(t,r){this.manager_=t;this.features_=null;this.index_=r};i.prototype.addFeature=function(e){this.manager_.addFeature(e,this.index_)};i.prototype.removeFeature=function(e){this.manager_.removeFeature(e,this.index_)};i.prototype.clear=function(){this.manager_.clear(this.index_)};i.prototype.setFeatures=function(e){var t=this;if(this.features_!==null){this.features_.clear();n["c"](this.features_,"add",this.handleFeatureAdd_,this);n["c"](this.features_,"remove",this.handleFeatureRemove_,this)}if(e!==null){e.forEach(function(e){t.addFeature(e)});n["a"](e,"add",this.handleFeatureAdd_,this);n["a"](e,"remove",this.handleFeatureRemove_,this)}this.features_=e};i.prototype.setStyle=function(e){this.manager_.setStyle(e,this.index_)};i.prototype.handleFeatureAdd_=function(e){var t=e.element;this.addFeature(t)};i.prototype.handleFeatureRemove_=function(e){var t=e.element;this.removeFeature(t)};i.module=angular.module("ngeoFeatureOverlay",[]);t["a"]=i},function(e,t,r){"use strict";var u=r(1);var n=r(181);var o=r(78);var i=r(5);var s=r(14);var a=r(2);var l=r(41);var c=r(163);var f=r(173);var h=r(35);var d=r(21);var p=r(54);var v=r(64);var g=r(65);var m=function e(t){p["b"].call(this,{handleDownEvent:e.handleDownEvent_,handleEvent:e.handleEvent_,handleUpEvent:e.handleUpEvent_});this.downPx_=null;this.source_=t.source!==undefined?t.source:null;this.started_=false;this.sketchFeature_=null;this.sketchPoint_=null;this.squaredClickTolerance_=4;this.sketchLayer_=new v["a"]({source:new g["a"]({useSpatialIndex:false,wrapX:false}),style:t.style||n["a"].getDefaultDrawStyleFunction()});a["a"](this,"change:active",this.updateState_,this)};i["d"](m,p["b"]);m.handleDownEvent_=function(e){this.downPx_=e.pixel;return true};m.handleUpEvent_=function(e){var t=this.downPx_;var r=e.pixel;var n=t[0]-r[0];var i=t[1]-r[1];var a=n*n+i*i;var o=true;if(a<=this.squaredClickTolerance_){this.handlePointerMove_(e);if(!this.started_){this.startDrawing_(e)}else{this.finishDrawing_()}o=false}return o};m.handleEvent_=function(e){var t=true;if(e.type==="pointermove"){t=this.handlePointerMove_(e)}else if(e.type==="dblclick"){t=false}return p["b"].prototype.handleEvent.call(this,e)&&t};m.prototype.handlePointerMove_=function(e){if(this.started_){this.modifyDrawing_(e)}else{this.createOrUpdateSketchPoint_(e)}return true};m.prototype.createOrUpdateSketchPoint_=function(e){var t=e.coordinate.slice();if(this.sketchPoint_===null){this.sketchPoint_=new s["a"](new d["a"](t));this.updateSketchFeatures_()}else{var r=this.sketchPoint_.getGeometry();u["a"].assertInstanceof(r,d["a"]);r.setCoordinates(t)}};m.prototype.updateSketchFeatures_=function(){var e=[];if(this.sketchFeature_!==null){e.push(this.sketchFeature_)}if(this.sketchPoint_!==null){e.push(this.sketchPoint_)}var t=this.sketchLayer_.getSource();t.clear(true);t.addFeatures(e)};m.prototype.startDrawing_=function(e){var t=e.coordinate;this.started_=true;var r=new h["a"]([t.slice(),t.slice()]);var n=new c["a"](t,0);var i=new f["a"]([r,n]);u["a"].assert(i!==undefined);this.sketchFeature_=new s["a"];this.sketchFeature_.setGeometry(i);this.updateSketchFeatures_();var a=new o["a"]("drawstart",{feature:this.sketchFeature_});this.dispatchEvent(a)};m.prototype.modifyDrawing_=function(e){var t=e.coordinate;var r=u["a"].assertInstanceof(this.sketchFeature_.getGeometry(),f["a"]);var n=r.getGeometriesArray();var i=n[0];u["a"].assertInstanceof(i,h["a"]);var a=i.getCoordinates();var o=this.sketchPoint_.getGeometry();u["a"].assertInstanceof(o,d["a"]);o.setCoordinates(t);var s=a[a.length-1];s[0]=t[0];s[1]=t[1];u["a"].assertInstanceof(i,h["a"]);i.setCoordinates(a);var l=u["a"].assertInstanceof(n[1],c["a"]);l.setRadius(i.getLength());this.updateSketchFeatures_()};m.prototype.abortDrawing_=function(){this.started_=false;var e=this.sketchFeature_;if(e!==null){this.sketchFeature_=null;this.sketchPoint_=null;this.sketchLayer_.getSource().clear(true)}return e};m.prototype.shouldStopEvent=l["a"];m.prototype.updateState_=function(){var e=this.getMap();var t=this.getActive();if(e===null||!t){this.abortDrawing_()}this.sketchLayer_.setMap(t?e:null)};m.prototype.finishDrawing_=function(){var e=this.abortDrawing_();u["a"].assert(e!==null);if(this.source_!==null){this.source_.addFeature(e)}var t=new o["a"]("drawend",{feature:this.sketchFeature_});this.dispatchEvent(t)};m.prototype.setMap=function(e){p["b"].prototype.setMap.call(this,e);this.updateState_()};var _=m;var y=r(103);var b=r(178);var w=function e(t,r,n){if(n===void 0){n={}}y["a"].call(this,n);this.continueMsg;if(n.continueMsg!==undefined){this.continueMsg=n.continueMsg}else{this.continueMsg=document.createElement("span");this.continueMsg.textContent="Click to finish."}this.numberFormat=u["a"].assert(r);this.unitPrefixFormat=u["a"].assert(t)};i["d"](w,y["a"]);w.prototype.createDrawInteraction=function(e,t){return new _({source:t,style:e})};w.prototype.handleMeasure=function(e){var t=u["a"].assertInstanceof(this.sketchFeature.getGeometry(),f["a"]);var r=u["a"].assertInstanceof(t.getGeometries()[0],h["a"]);var n=w.getFormattedAzimutRadius(r,u["a"].assertInstanceof(this.getMap().getView().getProjection(),b["a"]),this.decimals,this.precision,this.unitPrefixFormat,this.numberFormat);e(n,r.getLastCoordinate())};w.getFormattedAzimutRadius=function(e,t,r,n,i,a){var o=w.getFormattedAzimut(e,r,a);o+=", "+y["a"].getFormattedLength(e,t,n,i);return o};w.getFormattedAzimut=function(e,t,r){var n=w.getAzimut(e);return r(n,t)+"°"};w.getAzimut=function(e){var t=e.getCoordinates();var r=t[1][0]-t[0][0];var n=t[1][1]-t[0][1];var i=Math.acos(n/Math.sqrt(r*r+n*n));var a=r>0?1:-1;return a*i*180/Math.PI%360};var S=t["a"]=w},function(e,t,r){"use strict";var n=r(1);var i=r(392);var a=angular.module("ngeoPopup",["ngSanitize"]);a.value("ngeoPopupTemplateUrl",function(e,t){var r=t["ngeoPopupTemplateurl"];return r!==undefined?r:"ngeo/message/popupcomponent"});a.run(["$templateCache",function(e){e.put("ngeo/message/popupcomponent",r(436))}]);a.directive_=function(e){return{restrict:"A",templateUrl:e,link:function e(t,r,n){r.addClass("popover");t.close=function(e){if(e){e.stopPropagation();e.preventDefault()}r.addClass("hidden")};t.$watch("open",function(e,t){r.css("display",e?"block":"none")})}}};a.directive_.$inject=["ngeoPopupTemplateUrl"];a.directive("ngeoPopup",a.directive_);var o=a;var s=function e(t,r,n,i){var a=this;this.scope=r.$new(true);this.scope.$watch(function(){return a.scope["open"]},function(e){if(!e&&a.autoDestroy_){a.timeout_(function(){a.destroy()})}});this.sce_=n;this.timeout_=i;this.element_=angular.element("<div ngeo-popup></div>");this.autoDestroy_=false;t(this.element_)(this.scope);angular.element(document.body).append(this.element_)};s.prototype.getOpen=function(){return this.scope["open"]};s.prototype.setOpen=function(e){this.scope["open"]=e};s.prototype.destroy=function(){this.scope.$destroy();this.element_.remove()};s.prototype.setTitle=function(e){var t=this.sce_.trustAsHtml(e);this.scope["title"]=t};s.prototype.setContent=function(e,t){this.scope["content"]=t?this.sce_.trustAsHtml(e):e};s.prototype.setUrl=function(e){var t=this.sce_.trustAsHtml('<iframe src="'+e+'" width="100%" height="100%"></iframe>');this.setContent(t)};s.prototype.setWidth=function(e){this.element_.width(e)};s.prototype.setHeight=function(e){this.element_.height(e)};s.prototype.setSize=function(e,t){this.setWidth(e);this.setHeight(t)};s.prototype.setAutoDestroy=function(e){this.autoDestroy_=e};s.prototype.addClass=function(e){this.element_.addClass(e)};s.prototype.open=function(e){if(e.url){this.setUrl(e.url)}else if(e.content){this.setContent(e.content)}else{n["a"].fail('ngeo.message.Popup options requirest "url" or "content".')}if(e.autoDestroy!==undefined){this.setAutoDestroy(e.autoDestroy)}if(e.cls!==undefined){this.addClass(e.cls)}if(e.height!==undefined){this.setHeight(e.height)}if(e.title!==undefined){this.setTitle(e.title)}if(e.width!==undefined){this.setWidth(e.width)}this.setOpen(true)};s.Factory=function(e,t,r,n){return function(){return new s(e,t,r,n)}};s.Factory.$inject=["$compile","$rootScope","$sce","$timeout"];s.module=angular.module("ngeoCreatePopup",[o.name]);s.module.factory("ngeoCreatePopup",s.Factory);var l=t["a"]=s},function(e,t,r){"use strict";t["a"]={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"}},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=function e(t,r,n,i){this.minX=t;this.maxX=r;this.minY=n;this.maxY=i};a.prototype.contains=function e(t){return this.containsXY(t[1],t[2])};a.prototype.containsTileRange=function e(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY};a.prototype.containsXY=function e(t,r){return this.minX<=t&&t<=this.maxX&&this.minY<=r&&r<=this.maxY};a.prototype.equals=function e(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY};a.prototype.extend=function e(t){if(t.minX<this.minX){this.minX=t.minX}if(t.maxX>this.maxX){this.maxX=t.maxX}if(t.minY<this.minY){this.minY=t.minY}if(t.maxY>this.maxY){this.maxY=t.maxY}};a.prototype.getHeight=function e(){return this.maxY-this.minY+1};a.prototype.getSize=function e(){return[this.getWidth(),this.getHeight()]};a.prototype.getWidth=function e(){return this.maxX-this.minX+1};a.prototype.intersects=function e(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY};function n(e,t,r,n,i){if(i!==undefined){i.minX=e;i.maxX=t;i.minY=r;i.maxY=n;return i}else{return new a(e,t,r,n)}}t["b"]=a},function(e,t,r){"use strict";r.d(t,"a",function(){return n});function n(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}},function(e,r,t){(function(e,t){true?t(r):undefined})(this,function(e){"use strict";var r=0,n=0,i=0,a=1e3,o,s,l=0,u=0,c=0,f=typeof performance==="object"&&performance.now?performance:Date,h=typeof window==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function d(){return u||(h(t),u=f.now()+c)}function t(){u=0}function p(){this._call=this._time=this._next=null}p.prototype=v.prototype={constructor:p,restart:function e(t,r,n){if(typeof t!=="function")throw new TypeError("callback is not a function");n=(n==null?d():+n)+(r==null?0:+r);if(!this._next&&s!==this){if(s)s._next=this;else o=this;s=this}this._call=t;this._time=n;b()},stop:function e(){if(this._call){this._call=null;this._time=Infinity;b()}}};function v(e,t,r){var n=new p;n.restart(e,t,r);return n}function g(){d();++r;var e=o,t;while(e){if((t=u-e._time)>=0)e._call.call(null,t);e=e._next}--r}function m(){u=(l=f.now())+c;r=n=0;try{g()}finally{r=0;y();u=0}}function _(){var e=f.now(),t=e-l;if(t>a)c-=t,l=e}function y(){var e,t=o,r,n=Infinity;while(t){if(t._call){if(n>t._time)n=t._time;e=t,t=t._next}else{r=t._next,t._next=null;t=e?e._next=r:o=r}}s=e;b(n)}function b(e){if(r)return;if(n)n=clearTimeout(n);var t=e-u;if(t>24){if(e<Infinity)n=setTimeout(m,e-f.now()-c);if(i)i=clearInterval(i)}else{if(!i)l=f.now(),i=setInterval(_,a);r=1,h(m)}}function w(t,r,e){var n=new p;r=r==null?0:+r;n.restart(function(e){n.stop();t(e+r)},r,e);return n}function S(r,n,i){var a=new p,o=n;if(n==null)return a.restart(r,n,i),a;n=+n,i=i==null?d():+i;a.restart(function e(t){t+=o;a.restart(e,o+=n,i);r(t)},n,i);return a}e.now=d;e.timer=v;e.timerFlush=g;e.timeout=w;e.interval=S;Object.defineProperty(e,"__esModule",{value:true})})},function(e,t,r){"use strict";var n=r(347);var i=r(263);var a=r(375);var o=r(19);var s=r(120);var l=r(61);var u=r(92);var c=r(5);var f=angular.module("gmfObjecteditingToolsComponent",[n["a"].name,i["a"].name,a["a"].name,s["a"].name,u["a"].module.name]);f.run(["$templateCache",function(e){e.put("gmf/objectediting/toolsComponent",r(499))}]);f.value("gmfObjectEditingToolsOptions",{});f.directive_=function(){return{controller:"GmfObjecteditingtoolsController as oetCtrl",scope:{active:"=gmfObjecteditingtoolsActive",copyFromActive:"=gmfObjecteditingtoolsCopyfromactive",deleteFromActive:"=gmfObjecteditingtoolsDeletefromactive",feature:"<gmfObjecteditingtoolsFeature",geomType:"<gmfObjecteditingtoolsGeomtype",map:"<gmfObjecteditingtoolsMap",process:"=gmfObjecteditingtoolsProcess",queryableLayerInfo:"=gmfObjecteditingtoolsQueryablelayerinfo",requiresLayer:"=gmfObjecteditingtoolsRequireslayer",sketchFeatures:"<gmfObjecteditingtoolsSketchfeatures"},bindToController:true,templateUrl:"gmf/objectediting/toolsComponent"}};f.directive("gmfObjecteditingtools",f.directive_);f.Controller_=function(e,t,r){this.active;this.copyFromActive;this.deleteFromActive;this.feature;this.geomType;this.map;this.queryableLayerInfo;this.process;this.requiresLayer;this.sketchFeatures;this.scope_=t;this.ngeoToolActivateMgr_=r;this.geomTypePolygon=o["a"].POLYGON;this.toolActiveNames_=[];this.drawActive=false;this.registerTool_("drawActive",f.ProcessType.ADD);this.eraseActive=false;this.registerTool_("eraseActive",f.ProcessType.DELETE);this.drawTriangleActive=false;this.triangleAngle=Math.PI/180*90;var n=e.get("gmfObjectEditingToolsOptions");this.triangleRadius=n.regularPolygonRadius!==undefined?n.regularPolygonRadius:100;this.registerTool_("drawTriangleActive",f.ProcessType.ADD);this.registerTool_("copyFromActive",f.ProcessType.ADD,true);this.registerTool_("deleteFromActive",f.ProcessType.DELETE,true);t.$on("$destroy",this.handleDestroy_.bind(this))};f.Controller_.$inject=["$injector","$scope","ngeoToolActivateMgr"];f.Controller_.prototype.registerTool_=function(e,t,r){var n=this;var i=r===true;this.scope_.$watch(function(){return n[e]},this.handleToolActiveChange_.bind(this,t,i));var a=f.Controller_.NAMESPACE_+"-"+c["c"](this);var o=new l["a"](this,e);this.ngeoToolActivateMgr_.registerTool(a,o,false);this.toolActiveNames_.push(e)};f.Controller_.prototype.handleToolActiveChange_=function(e,t,r){if(r){this.process=e;this.requiresLayer=t}var n=false;for(var i=0,a=this.toolActiveNames_.length;i<a;i++){n=n||this[this.toolActiveNames_[i]];if(n){break}}this.active=n;if(!this.active){this.requiresLayer=false}};f.Controller_.prototype.handleDestroy_=function(){};f.controller("GmfObjecteditingtoolsController",f.Controller_);f.Controller_.NAMESPACE_="oet";f.ProcessType={ADD:"add",DELETE:"delete"};t["a"]=f},function(t,r,n){var i,a,o;(function(e){if(true){!(a=[n(27),n(117)],i=e,o=typeof i==="function"?i.apply(r,a):i,o!==undefined&&(t.exports=o))}else{}})(function(c){var n=0;var s=Array.prototype.slice;c.cleanData=function(i){return function(e){var t,r,n;for(n=0;(r=e[n])!=null;n++){try{t=c._data(r,"events");if(t&&t.remove){c(r).triggerHandler("remove")}}catch(e){}}i(e)}}(c.cleanData);c.widget=function(e,r,t){var n,i,a;var o={};var s=e.split(".")[0];e=e.split(".")[1];var l=s+"-"+e;if(!t){t=r;r=c.Widget}if(c.isArray(t)){t=c.extend.apply(null,[{}].concat(t))}c.expr[":"][l.toLowerCase()]=function(e){return!!c.data(e,l)};c[s]=c[s]||{};n=c[s][e];i=c[s][e]=function(e,t){if(!this._createWidget){return new i(e,t)}if(arguments.length){this._createWidget(e,t)}};c.extend(i,n,{version:t.version,_proto:c.extend({},t),_childConstructors:[]});a=new r;a.options=c.widget.extend({},a.options);c.each(t,function(t,a){if(!c.isFunction(a)){o[t]=a;return}o[t]=function(){function n(){return r.prototype[t].apply(this,arguments)}function i(e){return r.prototype[t].apply(this,e)}return function(){var e=this._super;var t=this._superApply;var r;this._super=n;this._superApply=i;r=a.apply(this,arguments);this._super=e;this._superApply=t;return r}}()});i.prototype=c.widget.extend(a,{widgetEventPrefix:n?a.widgetEventPrefix||e:e},o,{constructor:i,namespace:s,widgetName:e,widgetFullName:l});if(n){c.each(n._childConstructors,function(e,t){var r=t.prototype;c.widget(r.namespace+"."+r.widgetName,i,t._proto)});delete n._childConstructors}else{r._childConstructors.push(i)}c.widget.bridge(e,i);return i};c.widget.extend=function(e){var t=s.call(arguments,1);var r=0;var n=t.length;var i;var a;for(;r<n;r++){for(i in t[r]){a=t[r][i];if(t[r].hasOwnProperty(i)&&a!==undefined){if(c.isPlainObject(a)){e[i]=c.isPlainObject(e[i])?c.widget.extend({},e[i],a):c.widget.extend({},a)}else{e[i]=a}}}}return e};c.widget.bridge=function(a,t){var o=t.prototype.widgetFullName||a;c.fn[a]=function(r){var e=typeof r==="string";var n=s.call(arguments,1);var i=this;if(e){if(!this.length&&r==="instance"){i=undefined}else{this.each(function(){var e;var t=c.data(this,o);if(r==="instance"){i=t;return false}if(!t){return c.error("cannot call methods on "+a+" prior to initialization; "+"attempted to call method '"+r+"'")}if(!c.isFunction(t[r])||r.charAt(0)==="_"){return c.error("no such method '"+r+"' for "+a+" widget instance")}e=t[r].apply(t,n);if(e!==t&&e!==undefined){i=e&&e.jquery?i.pushStack(e.get()):e;return false}})}}else{if(n.length){r=c.widget.extend.apply(null,[r].concat(n))}this.each(function(){var e=c.data(this,o);if(e){e.option(r||{});if(e._init){e._init()}}else{c.data(this,o,new t(r,this))}})}return i}};c.Widget=function(){};c.Widget._childConstructors=[];c.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:false,create:null},_createWidget:function e(t,r){r=c(r||this.defaultElement||this)[0];this.element=c(r);this.uuid=n++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=c();this.hoverable=c();this.focusable=c();this.classesElementLookup={};if(r!==this){c.data(r,this.widgetFullName,this);this._on(true,this.element,{remove:function e(t){if(t.target===r){this.destroy()}}});this.document=c(r.style?r.ownerDocument:r.document||r);this.window=c(this.document[0].defaultView||this.document[0].parentWindow)}this.options=c.widget.extend({},this.options,this._getCreateOptions(),t);this._create();if(this.options.disabled){this._setOptionDisabled(this.options.disabled)}this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:function e(){return{}},_getCreateEventData:c.noop,_create:c.noop,_init:c.noop,destroy:function e(){var r=this;this._destroy();c.each(this.classesElementLookup,function(e,t){r._removeClass(t,e)});this.element.off(this.eventNamespace).removeData(this.widgetFullName);this.widget().off(this.eventNamespace).removeAttr("aria-disabled");this.bindings.off(this.eventNamespace)},_destroy:c.noop,widget:function e(){return this.element},option:function e(t,r){var n=t;var i;var a;var o;if(arguments.length===0){return c.widget.extend({},this.options)}if(typeof t==="string"){n={};i=t.split(".");t=i.shift();if(i.length){a=n[t]=c.widget.extend({},this.options[t]);for(o=0;o<i.length-1;o++){a[i[o]]=a[i[o]]||{};a=a[i[o]]}t=i.pop();if(arguments.length===1){return a[t]===undefined?null:a[t]}a[t]=r}else{if(arguments.length===1){return this.options[t]===undefined?null:this.options[t]}n[t]=r}}this._setOptions(n);return this},_setOptions:function e(t){var r;for(r in t){this._setOption(r,t[r])}return this},_setOption:function e(t,r){if(t==="classes"){this._setOptionClasses(r)}this.options[t]=r;if(t==="disabled"){this._setOptionDisabled(r)}return this},_setOptionClasses:function e(t){var r,n,i;for(r in t){i=this.classesElementLookup[r];if(t[r]===this.options.classes[r]||!i||!i.length){continue}n=c(i.get());this._removeClass(i,r);n.addClass(this._classes({element:n,keys:r,classes:t,add:true}))}},_setOptionDisabled:function e(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t);if(t){this._removeClass(this.hoverable,null,"ui-state-hover");this._removeClass(this.focusable,null,"ui-state-focus")}},enable:function e(){return this._setOptions({disabled:false})},disable:function e(){return this._setOptions({disabled:true})},_classes:function e(i){var a=[];var o=this;i=c.extend({element:this.element,classes:this.options.classes||{}},i);function t(e,t){var r,n;for(n=0;n<e.length;n++){r=o.classesElementLookup[e[n]]||c();if(i.add){r=c(c.unique(r.get().concat(i.element.get())))}else{r=c(r.not(i.element).get())}o.classesElementLookup[e[n]]=r;a.push(e[n]);if(t&&i.classes[e[n]]){a.push(i.classes[e[n]])}}}this._on(i.element,{remove:"_untrackClassesElement"});if(i.keys){t(i.keys.match(/\S+/g)||[],true)}if(i.extra){t(i.extra.match(/\S+/g)||[])}return a.join(" ")},_untrackClassesElement:function e(r){var n=this;c.each(n.classesElementLookup,function(e,t){if(c.inArray(r.target,t)!==-1){n.classesElementLookup[e]=c(t.not(r.target).get())}})},_removeClass:function e(t,r,n){return this._toggleClass(t,r,n,false)},_addClass:function e(t,r,n){return this._toggleClass(t,r,n,true)},_toggleClass:function e(t,r,n,i){i=typeof i==="boolean"?i:n;var a=typeof t==="string"||t===null,o={extra:a?r:n,keys:a?t:r,element:a?this.element:t,add:i};o.element.toggleClass(this._classes(o),i);return this},_on:function e(o,s,t){var l;var u=this;if(typeof o!=="boolean"){t=s;s=o;o=false}if(!t){t=s;s=this.element;l=this.widget()}else{s=l=c(s);this.bindings=this.bindings.add(s)}c.each(t,function(e,t){function r(){if(!o&&(u.options.disabled===true||c(this).hasClass("ui-state-disabled"))){return}return(typeof t==="string"?u[t]:t).apply(u,arguments)}if(typeof t!=="string"){r.guid=t.guid=t.guid||r.guid||c.guid++}var n=e.match(/^([\w:-]*)\s*(.*)$/);var i=n[1]+u.eventNamespace;var a=n[2];if(a){l.on(i,a,r)}else{s.on(i,r)}})},_off:function e(t,r){r=(r||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;t.off(r).off(r);this.bindings=c(this.bindings.not(t).get());this.focusable=c(this.focusable.not(t).get());this.hoverable=c(this.hoverable.not(t).get())},_delay:function e(t,r){function n(){return(typeof t==="string"?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,r||0)},_hoverable:function e(t){this.hoverable=this.hoverable.add(t);this._on(t,{mouseenter:function e(t){this._addClass(c(t.currentTarget),null,"ui-state-hover")},mouseleave:function e(t){this._removeClass(c(t.currentTarget),null,"ui-state-hover")}})},_focusable:function e(t){this.focusable=this.focusable.add(t);this._on(t,{focusin:function e(t){this._addClass(c(t.currentTarget),null,"ui-state-focus")},focusout:function e(t){this._removeClass(c(t.currentTarget),null,"ui-state-focus")}})},_trigger:function e(t,r,n){var i,a;var o=this.options[t];n=n||{};r=c.Event(r);r.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase();r.target=this.element[0];a=r.originalEvent;if(a){for(i in a){if(!(i in r)){r[i]=a[i]}}}this.element.trigger(r,n);return!(c.isFunction(o)&&o.apply(this.element[0],[r].concat(n))===false||r.isDefaultPrevented())}};c.each({show:"fadeIn",hide:"fadeOut"},function(a,o){c.Widget.prototype["_"+a]=function(t,e,r){if(typeof e==="string"){e={effect:e}}var n;var i=!e?a:e===true||typeof e==="number"?o:e.effect||o;e=e||{};if(typeof e==="number"){e={duration:e}}n=!c.isEmptyObject(e);e.complete=r;if(e.delay){t.delay(e.delay)}if(n&&c.effects&&c.effects.effect[i]){t[a](e)}else if(i!==a&&t[i]){t[i](e.duration,e.easing,r)}else{t.queue(function(e){c(this)[a]();if(r){r.call(t[0])}e()})}}});return c.widget})},function(e,t,r){"use strict";var n=r(71);var i=r(58);var a=r(41);var o=r(54);var s=r(249);var l=r(31);var u=function(t){function e(e){t.call(this);this.geometry_=null;this.element_=document.createElement("div");this.element_.style.position="absolute";this.element_.className="ol-box "+e;this.map_=null;this.startPixel_=null;this.endPixel_=null}if(t)e.__proto__=t;e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;e.prototype.disposeInternal=function e(){this.setMap(null)};e.prototype.render_=function e(){var t=this.startPixel_;var r=this.endPixel_;var n="px";var i=this.element_.style;i.left=Math.min(t[0],r[0])+n;i.top=Math.min(t[1],r[1])+n;i.width=Math.abs(r[0]-t[0])+n;i.height=Math.abs(r[1]-t[1])+n};e.prototype.setMap=function e(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var r=this.element_.style;r.left=r.top=r.width=r.height="inherit"}this.map_=t;if(this.map_){this.map_.getOverlayContainer().appendChild(this.element_)}};e.prototype.setPixels=function e(t,r){this.startPixel_=t;this.endPixel_=r;this.createOrUpdateGeometry();this.render_()};e.prototype.createOrUpdateGeometry=function e(){var t=this.startPixel_;var r=this.endPixel_;var n=[t,[t[0],r[1]],r,[r[0],t[1]]];var i=n.map(this.map_.getCoordinateFromPixel,this.map_);i[4]=i[0].slice();if(!this.geometry_){this.geometry_=new l["a"]([i])}else{this.geometry_.setCoordinates([i])}};e.prototype.getGeometry=function e(){return this.geometry_};return e}(s["a"]);var c=u;var f={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend"};var h=function(n){function e(e,t,r){n.call(this,e);this.coordinate=t;this.mapBrowserEvent=r}if(n)e.__proto__=n;e.prototype=Object.create(n&&n.prototype);e.prototype.constructor=e;return e}(n["a"]);var d=function(r){function e(e){r.call(this);var t=e?e:{};this.box_=new c(t.className||"ol-dragbox");this.minArea_=t.minArea!==undefined?t.minArea:64;this.onBoxEnd_=t.onBoxEnd?t.onBoxEnd:a["c"];this.startPixel_=null;this.condition_=t.condition?t.condition:i["c"];this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;e.prototype.defaultBoxEndCondition=function e(t,r,n){var i=n[0]-r[0];var a=n[1]-r[1];return i*i+a*a>=this.minArea_};e.prototype.getGeometry=function e(){return this.box_.getGeometry()};e.prototype.handleDragEvent=function e(t){if(!Object(i["f"])(t)){return}this.box_.setPixels(this.startPixel_,t.pixel);this.dispatchEvent(new h(f.BOXDRAG,t.coordinate,t))};e.prototype.handleUpEvent=function e(t){if(!Object(i["f"])(t)){return true}this.box_.setMap(null);if(this.boxEndCondition_(t,this.startPixel_,t.pixel)){this.onBoxEnd_(t);this.dispatchEvent(new h(f.BOXEND,t.coordinate,t))}return false};e.prototype.handleDownEvent=function e(t){if(!Object(i["f"])(t)){return false}if(Object(i["e"])(t)&&this.condition_(t)){this.startPixel_=t.pixel;this.box_.setMap(t.map);this.box_.setPixels(this.startPixel_,this.startPixel_);this.dispatchEvent(new h(f.BOXSTART,t.coordinate,t));return true}else{return false}};return e}(o["b"]);var p=t["a"]=d},function(e,t,r){"use strict";var n=function e(){this.disposed_=false};n.prototype.dispose=function e(){if(!this.disposed_){this.disposed_=true;this.disposeInternal()}};n.prototype.disposeInternal=function e(){};t["a"]=n},function(e,t,r){"use strict";var n=r(5);var i=r(113);var a=r(12);var o=function(i){function e(e,t,r,n){i.call(this);this.extent=e;this.pixelRatio_=r;this.resolution=t;this.state=n}if(i)e.__proto__=i;e.prototype=Object.create(i&&i.prototype);e.prototype.constructor=e;e.prototype.changed=function e(){this.dispatchEvent(a["a"].CHANGE)};e.prototype.getExtent=function e(){return this.extent};e.prototype.getImage=function e(){return Object(n["b"])()};e.prototype.getPixelRatio=function e(){return this.pixelRatio_};e.prototype.getResolution=function e(){return this.resolution};e.prototype.getState=function e(){return this.state};e.prototype.load=function e(){Object(n["b"])()};return e}(i["a"]);t["a"]=o},function(e,t,r){"use strict";var n=r(5);var i=r(50);var a=r(10);var o=r(155);var s=function(t){function e(e){t.call(this);this.projection_=Object(a["g"])(e.projection);this.attributions_=l(e.attributions);this.attributionsCollapsible_=e.attributionsCollapsible!==undefined?e.attributionsCollapsible:true;this.loading=false;this.state_=e.state!==undefined?e.state:o["a"].READY;this.wrapX_=e.wrapX!==undefined?e.wrapX:false}if(t)e.__proto__=t;e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;e.prototype.getAttributions=function e(){return this.attributions_};e.prototype.getAttributionsCollapsible=function e(){return this.attributionsCollapsible_};e.prototype.getProjection=function e(){return this.projection_};e.prototype.getResolutions=function e(){return Object(n["b"])()};e.prototype.getState=function e(){return this.state_};e.prototype.getWrapX=function e(){return this.wrapX_};e.prototype.refresh=function e(){this.changed()};e.prototype.setAttributions=function e(t){this.attributions_=l(t);this.changed()};e.prototype.setState=function e(t){this.state_=t;this.changed()};return e}(i["a"]);function l(t){if(!t){return null}if(Array.isArray(t)){return function(e){return t}}if(typeof t==="function"){return t}return function(e){return[t]}}t["a"]=s},function(e,t,r){"use strict";var s=r(1);var l=r(78);var u=r(5);var n=r(231);var i=r(93);var c=r(88);var f=r(114);var h=r(170);var d=r(167);var a=r(91);var p=function e(t){n["a"].call(this);this.mapUids_={};this.ngeoLayerHelper_=t};p.$inject=["ngeoLayerHelper"];p.$inject=["ngeoLayerHelper"];u["d"](p,n["a"]);p.prototype.get=function(e){var t=u["c"](e).toString();return t in this.mapUids_?this.ngeoLayerHelper_.getGroupFromMap(e,p.BACKGROUNDLAYERGROUP_NAME).getLayers().item(0):null};p.prototype.set=function(e,t){var r=-200;var n=u["c"](e).toString();var i=this.get(e);if(t!==null){t.setZIndex(r);this.ngeoLayerHelper_.setZIndexToFirstLevelChildren(t,r)}var a=this.ngeoLayerHelper_.getGroupFromMap(e,p.BACKGROUNDLAYERGROUP_NAME);if(i!==null){s["a"].assert(n in this.mapUids_);if(t!==null){a.getLayers().setAt(0,t)}else{a.getLayers().removeAt(0);delete this.mapUids_[n]}}else if(t!==null){a.getLayers().insertAt(0,t);this.mapUids_[n]=true}var o=new l["a"]("change",{current:t,previous:i});this.dispatchEvent(o);return i};p.prototype.getOpacityBgLayer=function(e){var t=u["c"](e).toString();return t in this.mapUids_?this.ngeoLayerHelper_.getGroupFromMap(e,p.BACKGROUNDLAYERGROUP_NAME).getLayers().item(1):null};p.prototype.setOpacityBgLayer=function(e,t){var r=-100;t.setOpacity(0);t.setVisible(true);t.setZIndex(r);this.ngeoLayerHelper_.setZIndexToFirstLevelChildren(t,r);var n=this.ngeoLayerHelper_.getGroupFromMap(e,p.BACKGROUNDLAYERGROUP_NAME);var i=n.getLayers().getArray().indexOf(t);if(i===-1){n.getLayers().push(t)}};p.prototype.updateDimensions=function(e,o){var t=this.get(e);if(t){var r=[t];if(t instanceof i["a"]){r=t.getLayers().getArray()}r.forEach(function(e){s["a"].assertInstanceof(e,c["a"]);if(e){var t=false;var r={};for(var n in e.get("dimensions")){var i=o[n];if(i!==undefined){r[n]=i;t=true}}if(t){var a=e.getSource();if(a instanceof d["a"]){a.updateDimensions(r);a.refresh()}else if(a instanceof h["a"]||a instanceof f["a"]){a.updateParams(r);a.refresh()}}}})}};p.module=angular.module("ngeoBackgroundLayerMgr",[a["a"].module.name]);p.module.service("ngeoBackgroundLayerMgr",p);p.BACKGROUNDLAYERGROUP_NAME="background";t["a"]=p},function(e,t,r){"use strict";var n={};n.module=angular.module("gmfDataSourceBeingFiltered",[]);n.module.value("gmfDataSourceBeingFiltered",{dataSource:null});t["a"]=n},function(e,t,r){"use strict";r.d(t,"a",function(){return l});r.d(t,"b",function(){return u});r.d(t,"c",function(){return n});function l(e,t,r,n){var i=0;var a=e[r-n];var o=e[r-n+1];for(;t<r;t+=n){var s=e[t];var l=e[t+1];i+=o*s-a*l;a=s;o=l}return i/2}function u(e,t,r,n){var i=0;for(var a=0,o=r.length;a<o;++a){var s=r[a];i+=l(e,t,s,n);t=s}return i}function n(e,t,r,n){var i=0;for(var a=0,o=r.length;a<o;++a){var s=r[a];i+=u(e,t,s,n);t=s[s.length-1]}return i}},function(e,t,r){"use strict";e.exports=n;e.exports.default=n;var s=r(431);function n(e,t){if(!(this instanceof n))return new n(e,t);this._maxEntries=Math.max(4,e||9);this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4));if(t){this._initFormat(t)}this.clear()}n.prototype={all:function e(){return this._all(this.data,[])},search:function e(t){var r=this.data,n=[],i=this.toBBox;if(!c(t,r))return n;var a=[],o,s,l,u;while(r){for(o=0,s=r.children.length;o<s;o++){l=r.children[o];u=r.leaf?i(l):l;if(c(t,u)){if(r.leaf)n.push(l);else if(y(t,u))this._all(l,n);else a.push(l)}}r=a.pop()}return n},collides:function e(t){var r=this.data,n=this.toBBox;if(!c(t,r))return false;var i=[],a,o,s,l;while(r){for(a=0,o=r.children.length;a<o;a++){s=r.children[a];l=r.leaf?n(s):s;if(c(t,l)){if(r.leaf||y(t,l))return true;i.push(s)}}r=i.pop()}return false},load:function e(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(var r=0,n=t.length;r<n;r++){this.insert(t[r])}return this}var i=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length){this.data=i}else if(this.data.height===i.height){this._splitRoot(this.data,i)}else{if(this.data.height<i.height){var a=this.data;this.data=i;i=a}this._insert(i,this.data.height-i.height-1,true)}return this},insert:function e(t){if(t)this._insert(t,this.data.height-1);return this},clear:function e(){this.data=b([]);return this},remove:function e(t,r){if(!t)return this;var n=this.data,i=this.toBBox(t),a=[],o=[],s,l,u,c;while(n||a.length){if(!n){n=a.pop();l=a[a.length-1];s=o.pop();c=true}if(n.leaf){u=f(t,n.children,r);if(u!==-1){n.children.splice(u,1);a.push(n);this._condense(a);return this}}if(!c&&!n.leaf&&y(n,i)){a.push(n);o.push(s);s=0;l=n;n=n.children[0]}else if(l){s++;n=l.children[s];c=false}else n=null}return this},toBBox:function e(t){return t},compareMinX:l,compareMinY:u,toJSON:function e(){return this.data},fromJSON:function e(t){this.data=t;return this},_all:function e(t,r){var n=[];while(t){if(t.leaf)r.push.apply(r,t.children);else n.push.apply(n,t.children);t=n.pop()}return r},_build:function e(t,r,n,i){var a=n-r+1,o=this._maxEntries,s;if(a<=o){s=b(t.slice(r,n+1));p(s,this.toBBox);return s}if(!i){i=Math.ceil(Math.log(a)/Math.log(o));o=Math.ceil(a/Math.pow(o,i-1))}s=b([]);s.leaf=false;s.height=i;var l=Math.ceil(a/o),u=l*Math.ceil(Math.sqrt(o)),c,f,h,d;w(t,r,n,u,this.compareMinX);for(c=r;c<=n;c+=u){h=Math.min(c+u-1,n);w(t,c,h,l,this.compareMinY);for(f=c;f<=h;f+=l){d=Math.min(f+l-1,h);s.children.push(this._build(t,f,d,i-1))}}p(s,this.toBBox);return s},_chooseSubtree:function e(t,r,n,i){var a,o,s,l,u,c,f,h;while(true){i.push(r);if(r.leaf||i.length-1===n)break;f=h=Infinity;for(a=0,o=r.children.length;a<o;a++){s=r.children[a];u=v(s);c=m(t,s)-u;if(c<h){h=c;f=u<f?u:f;l=s}else if(c===h){if(u<f){f=u;l=s}}}r=l||r.children[0]}return r},_insert:function e(t,r,n){var i=this.toBBox,a=n?t:i(t),o=[];var s=this._chooseSubtree(a,this.data,r,o);s.children.push(t);d(s,a);while(r>=0){if(o[r].children.length>this._maxEntries){this._split(o,r);r--}else break}this._adjustParentBBoxes(a,o,r)},_split:function e(t,r){var n=t[r],i=n.children.length,a=this._minEntries;this._chooseSplitAxis(n,a,i);var o=this._chooseSplitIndex(n,a,i);var s=b(n.children.splice(o,n.children.length-o));s.height=n.height;s.leaf=n.leaf;p(n,this.toBBox);p(s,this.toBBox);if(r)t[r-1].children.push(s);else this._splitRoot(n,s)},_splitRoot:function e(t,r){this.data=b([t,r]);this.data.height=t.height+1;this.data.leaf=false;p(this.data,this.toBBox)},_chooseSplitIndex:function e(t,r,n){var i,a,o,s,l,u,c,f;u=c=Infinity;for(i=r;i<=n-r;i++){a=h(t,0,i,this.toBBox);o=h(t,i,n,this.toBBox);s=_(a,o);l=v(a)+v(o);if(s<u){u=s;f=i;c=l<c?l:c}else if(s===u){if(l<c){c=l;f=i}}}return f},_chooseSplitAxis:function e(t,r,n){var i=t.leaf?this.compareMinX:l,a=t.leaf?this.compareMinY:u,o=this._allDistMargin(t,r,n,i),s=this._allDistMargin(t,r,n,a);if(o<s)t.children.sort(i)},_allDistMargin:function e(t,r,n,i){t.children.sort(i);var a=this.toBBox,o=h(t,0,r,a),s=h(t,n-r,n,a),l=g(o)+g(s),u,c;for(u=r;u<n-r;u++){c=t.children[u];d(o,t.leaf?a(c):c);l+=g(o)}for(u=n-r-1;u>=r;u--){c=t.children[u];d(s,t.leaf?a(c):c);l+=g(s)}return l},_adjustParentBBoxes:function e(t,r,n){for(var i=n;i>=0;i--){d(r[i],t)}},_condense:function e(t){for(var r=t.length-1,n;r>=0;r--){if(t[r].children.length===0){if(r>0){n=t[r-1].children;n.splice(n.indexOf(t[r]),1)}else this.clear()}else p(t[r],this.toBBox)}},_initFormat:function e(t){var r=["return a"," - b",";"];this.compareMinX=new Function("a","b",r.join(t[0]));this.compareMinY=new Function("a","b",r.join(t[1]));this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};function f(e,t,r){if(!r)return t.indexOf(e);for(var n=0;n<t.length;n++){if(r(e,t[n]))return n}return-1}function p(e,t){h(e,0,e.children.length,t,e)}function h(e,t,r,n,i){if(!i)i=b(null);i.minX=Infinity;i.minY=Infinity;i.maxX=-Infinity;i.maxY=-Infinity;for(var a=t,o;a<r;a++){o=e.children[a];d(i,e.leaf?n(o):o)}return i}function d(e,t){e.minX=Math.min(e.minX,t.minX);e.minY=Math.min(e.minY,t.minY);e.maxX=Math.max(e.maxX,t.maxX);e.maxY=Math.max(e.maxY,t.maxY);return e}function l(e,t){return e.minX-t.minX}function u(e,t){return e.minY-t.minY}function v(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function g(e){return e.maxX-e.minX+(e.maxY-e.minY)}function m(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function _(e,t){var r=Math.max(e.minX,t.minX),n=Math.max(e.minY,t.minY),i=Math.min(e.maxX,t.maxX),a=Math.min(e.maxY,t.maxY);return Math.max(0,i-r)*Math.max(0,a-n)}function y(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function c(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function b(e){return{children:e,height:1,leaf:true,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function w(e,t,r,n,i){var a=[t,r],o;while(a.length){r=a.pop();t=a.pop();if(r-t<=n)continue;o=t+Math.ceil((r-t)/n/2)*n;s(e,o,t,r,i);a.push(t,o,o,r)}}},function(e,t,r){"use strict";var i=r(1);var n=r(5);var a=r(2);var o=r(13);var s=r(324);var l=r(62);var u=angular.module("gmfDrawingFeatureStyle",[s["a"].name,l["a"].module.name]);u.run(["$templateCache",function(e){e.put("gmf/drawing/featureStyleComponent",r(438))}]);u.directive_=function(){return{controller:"GmfFeaturestyleController as fsCtrl",scope:{feature:"=gmfFeaturestyleFeature"},bindToController:true,templateUrl:"gmf/drawing/featureStyleComponent"}};u.directive("gmfFeaturestyle",u.directive_);u.Controller_=function(e,t){var r=this;this.uid=n["c"](this);this.feature;this.scope_=e;this.featureHelper_=t;this.color=undefined;this.label=undefined;this.measure=undefined;e.$watch(function(){return r.color},this.handleColorSet_.bind(this));this.featureListenerKeys_=[];this.type;e.$watch(function(){return r.feature},this.handleFeatureSet_.bind(this))};u.Controller_.$inject=["$scope","ngeoFeatureHelper"];u.Controller_.prototype.handleFeatureSet_=function(t,e){var r=this.featureListenerKeys_;if(e){r.forEach(a["e"]);r.length=0;this.type=undefined;this.color=undefined;this.measure=undefined;this.label=undefined}if(t){[o["a"].ANGLE,o["a"].COLOR,o["a"].NAME,o["a"].SHOW_LABEL,o["a"].OPACITY,o["a"].SHOW_MEASURE,o["a"].SIZE,o["a"].STROKE].forEach(function(e){r.push(a["a"](t,"change:"+e,this.handleFeatureChange_,this))},this);var n=t.getGeometry();i["a"].assert(n,"Geometry should be thruthy");r.push(a["a"](n,"change",this.handleGeometryChange_,this));this.type=this.featureHelper_.getType(t);this.color=this.featureHelper_.getColorProperty(t);this.measure=this.featureHelper_.getMeasure(t)}};u.Controller_.prototype.handleColorSet_=function(e){if(this.feature&&e){var t=this.feature.get(o["a"].COLOR);if(t!==e){this.feature.set(o["a"].COLOR,e)}}};u.Controller_.prototype.getSetAngle=function(e){return i["a"].assertNumber(this.getSetProperty_(o["a"].ANGLE,e))};u.Controller_.prototype.getSetName=function(e){return i["a"].assertString(this.getSetProperty_(o["a"].NAME,e))};u.Controller_.prototype.getSetShowLabel=function(e){return i["a"].assertBoolean(this.getSetProperty_(o["a"].SHOW_LABEL,e))};u.Controller_.prototype.getSetOpacity=function(e){return i["a"].assertNumber(this.getSetProperty_(o["a"].OPACITY,e))};u.Controller_.prototype.getSetShowMeasure=function(e){return i["a"].assertBoolean(this.getSetProperty_(o["a"].SHOW_MEASURE,e))};u.Controller_.prototype.getSetSize=function(e){return i["a"].assertNumber(this.getSetProperty_(o["a"].SIZE,e))};u.Controller_.prototype.getSetStroke=function(e){return i["a"].assertNumber(this.getSetProperty_(o["a"].STROKE,e))};u.Controller_.prototype.getSetProperty_=function(e,t){if(t!==undefined){this.feature.set(e,t)}return this.feature.get(e)};u.Controller_.prototype.handleFeatureChange_=function(){var e=this.feature;if(!e){return}this.featureHelper_.setStyle(e,true)};u.Controller_.prototype.handleGeometryChange_=function(){i["a"].assert(this.feature);this.measure=this.featureHelper_.getMeasure(this.feature);var e=this.featureHelper_.getShowMeasureProperty(this.feature);if(e){this.handleFeatureChange_()}this.scope_.$apply()};u.controller("GmfFeaturestyleController",u.Controller_);t["a"]=u},function(e,t,r){"use strict";var n=r(183);var i=r(325);var a=r(327);var o=r(328);var s=r(329);var l=r(330);var u=r(331);var c=angular.module("ngeoDrawfeature",[n["a"].module.name,i["a"].name,a["a"].name,o["a"].name,s["a"].name,l["a"].name,u["a"].name]);c.directive_=function(){return{controller:"ngeoDrawfeatureController as dfCtrl",scope:true,bindToController:{active:"=ngeoDrawfeatureActive",features:"=?ngeoDrawfeatureFeatures",map:"=ngeoDrawfeatureMap",showMeasure:"=?ngeoDrawfeatureShowmeasure"}}};c.directive("ngeoDrawfeature",c.directive_);t["a"]=c},function(e,t,r){"use strict";var n=r(23);var i=angular.module("ngeoFeatures",[]);i.value("ngeoFeatures",new n["a"]);t["a"]=i},function(e,t,r){"use strict";var a=r(1);var n=r(181);var i=r(78);var o=r(5);var s=r(3);var l=r(14);var u=r(2);var c=r(54);var f=r(150);var h=r(21);var d=r(35);var p=r(31);var v=r(64);var g=r(65);var m=function e(t){a["a"].assert(t.features);this.listenerKeys_=[];this.modified_=false;this.keyPressListenerKey_=null;this.changingFeature_=false;this.pixelTolerance_=t.pixelTolerance!==undefined?t.pixelTolerance:10;this.features_=t.features;this.feature_=null;this.coordinate_=null;this.centerCoordinate_=null;this.overlay_=new v["a"]({source:new g["a"]({useSpatialIndex:false,wrapX:!!t.wrapX}),style:t.style||n["a"].getDefaultModifyStyleFunction(),updateWhileAnimating:true,updateWhileInteracting:true});this.centerFeatures_={};c["b"].call(this,{handleDownEvent:this.handleDown_,handleDragEvent:this.handleDrag_,handleUpEvent:this.handleUp_})};o["d"](m,c["b"]);m.prototype.setActive=function(e){var t=this;if(this.keyPressListenerKey_){u["e"](this.keyPressListenerKey_);this.keyPressListenerKey_=null}c["b"].prototype.setActive.call(this,e);if(e){this.keyPressListenerKey_=u["a"](document,"keyup",this.handleKeyUp_,this);this.features_.forEach(function(e){return t.addFeature_(e)});this.listenerKeys_.push(u["a"](this.features_,"add",this.handleFeatureAdd_,this),u["a"](this.features_,"remove",this.handleFeatureRemove_,this))}else{this.listenerKeys_.forEach(u["e"]);this.listenerKeys_.length=0;this.features_.forEach(function(e){return t.removeFeature_(e)})}};m.prototype.addFeature_=function(e){var t=e.getGeometry();a["a"].assertInstanceof(t,f["a"]);e.set("angle",0);var r=o["c"](e);var n=new h["a"](this.getCenterCoordinate_(t));var i=new l["a"](n);this.centerFeatures_[r]=i;this.overlay_.getSource().addFeature(i)};m.prototype.willModifyFeatures_=function(e){if(!this.modified_){this.modified_=true;var t=new i["a"]("modifystart",{features:this.features_});this.dispatchEvent(t)}};m.prototype.removeFeature_=function(e){this.feature_=null;if(e){var t=o["c"](e);if(this.centerFeatures_[t]){this.overlay_.getSource().removeFeature(this.centerFeatures_[t]);delete this.centerFeatures_[t]}}};m.prototype.setMap=function(e){this.overlay_.setMap(e);c["b"].prototype.setMap.call(this,e)};m.prototype.handleFeatureAdd_=function(e){var t=e.element;a["a"].assertInstanceof(t,l["a"],"feature should be an ol.Feature");this.addFeature_(t)};m.prototype.handleFeatureRemove_=function(e){var t=e.element;this.removeFeature_(t)};m.prototype.handleDown_=function(e){var t=e.map;var r=t.forEachFeatureAtPixel(e.pixel,function(e,t){return e},undefined);if(r){var n=false;this.features_.forEach(function(e){if(o["c"](e)==o["c"](r)){n=true}});if(!n){r=null}}if(r){this.coordinate_=e.coordinate;this.feature_=r;var i=this.feature_.getGeometry();if(i!==undefined){this.centerCoordinate_=this.getCenterCoordinate_(i)}return true}return false};m.prototype.getCenterCoordinate_=function(e){var t;if(e instanceof d["a"]){t=e.getFlatMidpoint()}else if(e instanceof p["a"]){t=e.getFlatInteriorPoint()}else{var r=e.getExtent();t=s["x"](r)}return t};m.prototype.handleDrag_=function(e){this.willModifyFeatures_(e);var t=this.feature_.getGeometry();var r=this.coordinate_[0];var n=this.coordinate_[1];var i=this.centerCoordinate_[0];var a=this.centerCoordinate_[1];var o=r-i;var s=n-a;var l=e.coordinate[0]-i;var u=e.coordinate[1]-a;this.coordinate_[0]=e.coordinate[0];this.coordinate_[1]=e.coordinate[1];var c=Math.atan2(u,l);var f=Math.atan2(s,o);var h=f-c;t.rotate(-h,[i,a])};m.prototype.handleUp_=function(e){if(this.modified_){var t=new i["a"]("rotateend",{feature:this.feature_});this.dispatchEvent(t);this.modified_=false;this.setActive(false)}return false};m.prototype.handleKeyUp_=function(e){if(e.keyCode===27){this.setActive(false)}};t["a"]=m},function(e,t,r){"use strict";var a=r(1);var o=r(5);var i=r(3);var s=r(14);var l=r(2);var u=r(150);var c=r(35);var f=r(21);var h=r(31);var n=r(238);var d=r(64);var p=r(65);var v=function e(t){this.listenerKeys_=[];this.featureListenerKeys_={};this.keyPressListenerKey_=null;this.myFeatures_=t.features!==undefined?t.features:null;this.vectorSource_=new p["a"]({useSpatialIndex:false});this.vectorLayer_=new d["a"]({source:this.vectorSource_,style:t.style,updateWhileAnimating:true,updateWhileInteracting:true});this.centerFeatures_={};n["a"].call(this,t)};o["d"](v,n["a"]);v.prototype.setActive=function(e){if(this.keyPressListenerKey_){l["e"](this.keyPressListenerKey_);this.keyPressListenerKey_=null}n["a"].prototype.setActive.call(this,e);if(e){this.keyPressListenerKey_=l["a"](document,"keyup",this.handleKeyUp_,this)}this.setState_()};v.prototype.setMap=function(e){var t=this.getMap();if(t){this.vectorLayer_.setMap(null)}n["a"].prototype.setMap.call(this,e);if(e){this.vectorLayer_.setMap(e)}this.setState_()};v.prototype.setState_=function(){var t=this;var e=this.getMap();var r=this.getActive();var n=this.myFeatures_;var i=this.listenerKeys_;if(e&&r&&n){n.forEach(function(e){return t.addFeature_(e)});i.push(l["a"](n,"add",this.handleFeaturesAdd_,this),l["a"](n,"remove",this.handleFeaturesRemove_,this))}else{if(e){var a=e.getTargetElement();a.style.cursor="default"}i.forEach(l["e"]);i.length=0;n.forEach(function(e){return t.removeFeature_(e)})}};v.prototype.handleFeaturesAdd_=function(e){var t=e.element;a["a"].assertInstanceof(t,s["a"],"feature should be an ol.Feature");this.addFeature_(t)};v.prototype.handleFeaturesRemove_=function(e){var t=e.element;this.removeFeature_(t)};v.prototype.addFeature_=function(e){var t=o["c"](e);var r=e.getGeometry();a["a"].assertInstanceof(r,u["a"]);this.featureListenerKeys_[t]=l["a"](r,"change",this.handleGeometryChange_.bind(this,e),this);var n=this.getGeometryCenterPoint_(r);var i=new s["a"](n);this.centerFeatures_[t]=i;this.vectorSource_.addFeature(i)};v.prototype.removeFeature_=function(e){var t=o["c"](e);if(this.featureListenerKeys_[t]){l["e"](this.featureListenerKeys_[t]);delete this.featureListenerKeys_[t];this.vectorSource_.removeFeature(this.centerFeatures_[t]);delete this.centerFeatures_[t]}};v.prototype.handleGeometryChange_=function(e,t){var r=t.target;a["a"].assertInstanceof(r,u["a"]);var n=this.getGeometryCenterPoint_(r);var i=o["c"](e);this.centerFeatures_[i].setGeometry(n)};v.prototype.getGeometryCenterPoint_=function(e){var t;var r;if(e instanceof h["a"]){r=e.getInteriorPoint()}else if(e instanceof c["a"]){t=e.getCoordinateAt(.5)}else{var n=e.getExtent();t=i["x"](n)}if(!r&&t){r=new f["a"](t)}a["a"].assert(r,"Point should be thruthy");return r};v.prototype.handleKeyUp_=function(e){if(e.keyCode===27){this.setActive(false)}};t["a"]=v},function(e,t,r){"use strict";var n=r(74);var l=r(22);var d=r(1);var s=r(125);var u=r(5);var i=r(2);var c=r(23);var p=r(151);var a=r(299);var o=function e(t,r,n,i,a,o){this.http_=t;this.q_=r;this.rootScope_=n;this.timeout_=i;this.gmfThemes_=a;this.gmfTreeManager_=o;this.cache_={};this.listenerKeys_=[];this.map_=null;this.mapViewChangePromise_=null;this.ogcServers_=null};o.$inject=["$http","$q","$rootScope","$timeout","gmfThemes","gmfTreeManager"];o.$inject=["$http","$q","$rootScope","$timeout","gmfThemes","gmfTreeManager"];o.prototype.ensureSnapInteractionsOnTop=function(){var e=this.map_;d["a"].assert(e);var t;for(var r in this.cache_){t=this.cache_[+r];if(t.active){d["a"].assert(t.interaction);e.removeInteraction(t.interaction);e.addInteraction(t.interaction)}}};o.prototype.setMap=function(e){var t=this;var r=this.listenerKeys_;if(this.map_){this.treeCtrlsUnregister_();this.unregisterAllTreeCtrl_();r.forEach(i["e"]);r.length=0}this.map_=e;if(e){this.treeCtrlsUnregister_=this.rootScope_.$watchCollection(function(){if(t.gmfTreeManager_.rootCtrl){return t.gmfTreeManager_.rootCtrl.children}},function(e){t.timeout_(function(){if(e){t.unregisterAllTreeCtrl_();t.gmfTreeManager_.rootCtrl.traverseDepthFirst(t.registerTreeCtrl_.bind(t))}},0)});r.push(i["a"](this.gmfThemes_,"change",this.handleThemesChange_,this),i["a"](e,"moveend",this.handleMapMoveEnd_,this))}};o.prototype.handleThemesChange_=function(){var t=this;this.ogcServers_=null;this.gmfThemes_.getOgcServersObject().then(function(e){t.ogcServers_=e})};o.prototype.registerTreeCtrl_=function(e){var t=e.node;if(t.children){return}t=e.node;var r=l["a"].getSnappingConfig(t);if(r){var n=this.getWFSConfig_(e);if(n){var i=u["c"](e);var a=this.rootScope_.$watch(function(){return e.getState()},this.handleTreeCtrlStateChange_.bind(this,e));var o=this.getOGCServer_(e);this.cache_[i]={active:false,featureNS:o.wfsFeatureNS,featurePrefix:"feature",features:new c["a"],geometryName:o.geometryName,interaction:null,maxFeatures:50,requestDeferred:null,snappingConfig:r,treeCtrl:e,wfsConfig:n,stateWatcherUnregister:a};this.handleTreeCtrlStateChange_(e,e.getState())}}};o.prototype.unregisterAllTreeCtrl_=function(){for(var e in this.cache_){var t=this.cache_[+e];if(t){t.stateWatcherUnregister();this.deactivateItem_(t);delete this.cache_[+e]}}};o.prototype.getOGCServer_=function(e){var t=e.node;if(t.type!==l["a"].NodeType.WMS){return null}var r=t;var n;var i=e.parent.node;if(i.mixed){n=r.ogcServer}else{var a=s["a"].getFirstParentTree(e);var o=a.node;n=o.ogcServer}if(!n){return null}return this.ogcServers_[n]};o.prototype.getWFSConfig_=function(e){if(this.ogcServers_===null){return null}var t=e.node;if(t.type!==l["a"].NodeType.WMS){return null}var r=t;var n=[];for(var i=0,a=r.childLayers.length;i<a;i++){if(r.childLayers[i].queryable){n.push(r.childLayers[i].name)}}if(!n.length){return null}var o=this.getOGCServer_(e);if(!o||!o.wfsSupport){return null}var s=o.urlWfs;d["a"].assert(s,"urlWfs should be defined.");return{featureTypes:n.join(","),url:s}};o.prototype.handleTreeCtrlStateChange_=function(e,t){var r=u["c"](e);var n=this.cache_[r];if(t==="on"){this.activateItem_(n)}else{this.deactivateItem_(n)}};o.prototype.activateItem_=function(e){if(e.active){return}var t=this.map_;d["a"].assert(t);var r=new a["a"]({edge:e.snappingConfig.edge,features:e.features,pixelTolerance:e.snappingConfig.tolerance,vertex:e.snappingConfig.vertex});t.addInteraction(r);e.interaction=r;e.active=true;this.loadItemFeatures_(e)};o.prototype.deactivateItem_=function(e){if(!e.active){return}var t=this.map_;d["a"].assert(t);var r=e.interaction;t.removeInteraction(r);e.interaction=null;e.features.clear();if(e.requestDeferred){e.requestDeferred.resolve();e.requestDeferred=null}e.active=false};o.prototype.loadAllItems_=function(){this.mapViewChangePromise_=null;var e;for(var t in this.cache_){e=this.cache_[+t];if(e.active){this.loadItemFeatures_(e)}}};o.prototype.refresh=function(){this.loadAllItems_()};o.prototype.loadItemFeatures_=function(r){if(r.requestDeferred){r.requestDeferred.resolve()}var e=this.map_;d["a"].assert(e);var t=e.getView();var n=e.getSize();d["a"].assert(n);var i=t.calculateExtent(n);var a=t.getProjection().getCode();var o=r.wfsConfig.featureTypes.split(",");var s={srsName:a,featureNS:r.featureNS,featurePrefix:r.featurePrefix,featureTypes:o,outputFormat:"GML3",bbox:i,geometryName:r.geometryName,maxFeatures:r.maxFeatures};var l=new p["a"];var u=new XMLSerializer;var c=l.writeGetFeature(s);var f=u.serializeToString(c);var h=r.wfsConfig.url;r.requestDeferred=this.q_.defer();this.http_.post(h,f,{timeout:r.requestDeferred.promise}).then(function(e){r.requestDeferred=null;r.features.clear();var t=(new p["a"]).readFeatures(e.data);if(t){r.features.extend(t)}})};o.prototype.handleMapMoveEnd_=function(){if(this.mapViewChangePromise_){this.timeout_.cancel(this.mapViewChangePromise_)}this.mapViewChangePromise_=this.timeout_(this.loadAllItems_.bind(this),400)};o.Cache;o.CacheItem;o.WFSConfig;o.module=angular.module("gmfSnapping",[n["a"].module.name,l["a"].module.name,s["a"].module.name]);o.module.service("gmfSnapping",o);t["a"]=o},function(e,t,r){"use strict";var n=r(5);var i=r(2);var a=r(159);var o=r(399);var s=angular.module("ngeoAttributes",[o["a"].name,a["a"].module.name]);s.run(["$templateCache",function(e){e.put("ngeo/editing/attributescomponent",r(442))}]);s.value("ngeoAttributesTemplateUrl",function(e){var t=e["ngeoAttributesTemplateUrl"];return t!==undefined?t:"ngeo/editing/attributescomponent"});l.$inject=["$attrs","ngeoAttributesTemplateUrl"];function l(e,t){return t(e)}s.component_={controller:"ngeoAttributesController as attrCtrl",bindings:{attributes:"=ngeoAttributesAttributes",disabled:"<ngeoAttributesDisabled",feature:"=ngeoAttributesFeature"},require:{form:"^"},templateUrl:l};s.component("ngeoAttributes",s.component_);s.Controller_=function(e,t){this.attributes;this.disabled=false;this.feature;this.properties;this.scope_=e;this.ngeoEventHelper_=t;this.updating_=false};s.Controller_.$inject=["$scope","ngeoEventHelper"];s.Controller_.prototype.$onInit=function(){this.properties=this.feature.getProperties();var e=n["c"](this);this.ngeoEventHelper_.addListenerKey(e,i["a"](this.feature,"propertychange",this.handleFeaturePropertyChange_,this))};s.Controller_.prototype.handleInputChange=function(e){this.updating_=true;var t=this.properties[e];this.feature.set(e,t);this.updating_=false};s.Controller_.prototype.$onDestroy=function(){var e=n["c"](this);this.ngeoEventHelper_.clearListenerKey(e)};s.Controller_.prototype.handleFeaturePropertyChange_=function(e){if(this.updating_){return}this.properties[e.key]=e.target.get(e.key);this.scope_.$apply()};s.controller("ngeoAttributesController",s.Controller_);t["a"]=s},function(e,t,r){"use strict";var s=r(1);var n=r(118);var l=r(19);var u=r(290);var c=r(225);var i=r(159);var a=r(76);var f=r(5);var o=r(23);var h=r(2);var d=r(14);var p=r(112);var v=r(11);var g=angular.module("ngeoCreatefeature",[i["a"].module.name,n["a"].name]);g.directive_=function(){return{controller:"ngeoCreatefeatureController",bindToController:true,scope:{active:"=ngeoCreatefeatureActive",features:"=ngeoCreatefeatureFeatures",geomType:"=ngeoCreatefeatureGeomType",map:"=ngeoCreatefeatureMap"}}};g.directive("ngeoCreatefeature",g.directive_);g.Controller_=function(e,t,r,n,i,a){var o=this;this.active;this.features;this.geomType;this.map;this.gettextCatalog_=e;this.compile_=t;this.filter_=r;this.scope_=n;this.timeout_=i;this.ngeoEventHelper_=a;this.interaction_;n.$watch(function(){return o.active},function(e){o.interaction_.setActive(e)})};g.Controller_.$inject=["gettextCatalog","$compile","$filter","$scope","$timeout","ngeoEventHelper"];g.Controller_.prototype.$onInit=function(){this.active=this.active===true;var e=this.gettextCatalog_;var t;if(this.geomType===l["a"].POINT||this.geomType===l["a"].MULTI_POINT){t=new p["a"]({type:"Point"})}else if(this.geomType===l["a"].LINE_STRING||this.geomType===l["a"].MULTI_LINE_STRING){var r=e.getString("Click to start drawing length");var n=e.getString("Click to continue drawing<br/>"+"Double-click or click last point to finish");t=new c["a"](this.filter_("ngeoUnitPrefix"),e,{style:new v["c"],startMsg:this.compile_("<div translate>"+r+"</div>")(this.scope_)[0],continueMsg:this.compile_("<div translate>"+n+"</div>")(this.scope_)[0]})}else if(this.geomType===l["a"].POLYGON||this.geomType===l["a"].MULTI_POLYGON){var i=e.getString("Click to start drawing area");var a=e.getString("Click to continue drawing<br/>"+"Double-click or click starting point to finish");t=new u["a"](this.filter_("ngeoUnitPrefix"),e,{style:new v["c"],startMsg:this.compile_("<div translate>"+i+"</div>")(this.scope_)[0],continueMsg:this.compile_("<div translate>"+a+"</div>")(this.scope_)[0]})}s["a"].assert(t);t.setActive(this.active);this.interaction_=t;this.map.addInteraction(t);var o=f["c"](this);if(t instanceof p["a"]){this.ngeoEventHelper_.addListenerKey(o,h["a"](t,"drawend",this.handleDrawEnd_,this))}else if(t instanceof c["a"]||t instanceof u["a"]){this.ngeoEventHelper_.addListenerKey(o,h["a"](t,"measureend",this.handleDrawEnd_,this))}};g.Controller_.prototype.handleDrawEnd_=function(e){var t;if(e.feature){t=e.feature}else{t=e.detail.feature}s["a"].assert(t);var r=t.getGeometry();var n=r.getType();if(this.geomType.indexOf("Multi")!=n.indexOf("Multi")){r=a["a"].toMulti(r)}var i=new d["a"](r);if(this.features instanceof o["a"]){this.features.push(i)}else{this.features.addFeature(i)}};g.Controller_.prototype.$onDestroy=function(){var t=this;this.timeout_(function(){var e=f["c"](t);t.ngeoEventHelper_.clearListenerKey(e);t.interaction_.setActive(false);t.map.removeInteraction(t.interaction_)},0)};g.controller("ngeoCreatefeatureController",g.Controller_);t["a"]=g},function(e,v,g){"use strict";(function(s){var t=g(1);var e=g(223);var r=g(445);var n=g.n(r);var i=g(446);var a=g(467);var o=g.n(a);var l=g(468);var u=g.n(l);var c=g(469);var f=g.n(c);var h=g(470);var d=g.n(h);var p=angular.module("ngeoDatePicker",[e["a"].module.name,"ui.date"]);p.value("ngeoDatePickerTemplateUrl",function(e,t){var r=t["ngeoDatePickerTemplateUrl"];return r!==undefined?r:"ngeo/misc/datepickerComponent"});p.run(["$templateCache",function(e){e.put("ngeo/misc/datepickerComponent",g(471))}]);p.component_=function(e,o){return{scope:{onDateSelected:"&",time:"="},bindToController:true,controller:"ngeoDatePickerController as datepickerCtrl",restrict:"AE",templateUrl:e,link:function e(t,r,n,i){i.init();var a=i.gettextCatalog_.getCurrentLanguage();s["datepicker"]["setDefaults"](s["datepicker"]["regional"][a]);i.sdateOptions=angular.extend({},i.sdateOptions,{minDate:i.initialMinDate,maxDate:i.initialMaxDate,onClose:function e(t){if(t){s(r[0]).find('input[name="edate"]').datepicker("option","minDate",t)}}});i.edateOptions=angular.extend({},i.edateOptions,{minDate:i.initialMinDate,maxDate:i.initialMaxDate,onClose:function e(t){if(t){s(r[0]).find('input[name="sdate"]').datepicker("option","maxDate",t)}}});angular.element("body").on("hidden.bs.popover",function(){var e=angular.element("#ui-datepicker-div");if(e&&e.css("display")==="block"){s(r[0]).find('input[name$="date"]').datepicker("hide")}});o(function(){angular.element("#ui-datepicker-div").on("mousedown",function(e){e.stopPropagation()})})}}};p.component_.$inject=["ngeoDatePickerTemplateUrl","$timeout"];p.directive("ngeoDatePicker",p.component_);p.Controller_=function(e,t,r,n){var i=this;this.ngeoTime_=r;this.time;this.gettextCatalog_=n;this.isModeRange;this.onDateSelected;this.initialMinDate;this.initialMaxDate;this.edateOptions={changeMonth:true,changeYear:true};this.sdateOptions={changeMonth:true,changeYear:true};this.sdate;this.edate;e.$watchGroup(["datepickerCtrl.sdate","datepickerCtrl.edate"],function(e,t){var r=e[0];var n=e[1];if(angular.isDate(r)&&(!i.isModeRange||angular.isDate(n))){i.onDateSelected({time:{start:i.ngeoTime_.getTime(r),end:i.ngeoTime_.getTime(n)}})}})};p.Controller_.$inject=["$scope","$injector","ngeoTime","gettextCatalog"];p.Controller_.prototype.init=function(){var e=this.ngeoTime_.getOptions(this.time);this.initialMinDate=this.ngeoTime_.createDate(e.minDate);this.initialMaxDate=this.ngeoTime_.createDate(e.maxDate);this.isModeRange=this.time.mode==="range";if(this.isModeRange){t["a"].assertArray(e.values);this.sdate=this.ngeoTime_.createDate(e.values[0]);this.edate=this.ngeoTime_.createDate(e.values[1])}else{t["a"].assertNumber(e.values);this.sdate=this.ngeoTime_.createDate(e.values)}};p.controller("ngeoDatePickerController",p.Controller_);v["a"]=p}).call(this,g(27))},function(e,t,r){"use strict";var d=r(22);var p=r(51);var v=r(311);var g=r(114);var s=function e(t,r,n){this.http_=t;this.q_=r;this.gmfThemes_=n;this.getQueryableLayerNodesDefered_=null};s.$inject=["$http","$q","gmfThemes"];s.$inject=["$http","$q","gmfThemes"];s.prototype.getQueryableLayersInfo=function(){var o=this;if(!this.getQueryableLayerNodesDefered_){this.getQueryableLayerNodesDefered_=this.q_.defer();this.gmfThemes_.getOgcServersObject().then(function(a){o.gmfThemes_.getThemesObject().then(function(e){if(!e){return}var t=s.getQueryableLayersInfoFromThemes(e,a);var r=[];for(var n=0,i=t.length;n<i;n++){if(t[n].layerNode.metadata.copyable){r.push(t[n])}}o.getQueryableLayerNodesDefered_.resolve(r)})})}return this.getQueryableLayerNodesDefered_.promise};s.getQueryableLayersInfoFromThemes=function(e,t){var r=[];var n;var i;var a;var o;for(var s=0,l=e.length;s<l;s++){n=e[s];for(var u=0,c=n.children.length;u<c;u++){i=n.children[u];if(!i.ogcServer){continue}a=[];d["a"].getFlatNodes(i,a);for(var f=0,h=a.length;f<h;f++){o=a[f];if(o.children&&o.children.length){continue}if(o.childLayers&&o.childLayers[0]&&o.childLayers[0].queryable){r.push({layerNode:o,ogcServer:t[i.ogcServer]})}}}}return r};s.prototype.getFeatureInfo=function(e,t,r){var n=r.getView();var i=n.getProjection().getCode();var a=n.getResolution();var o=p["a"].WMSInfoFormat.GML;var s=e.layerNode;var l=s.layers.split(",");var u=e.ogcServer;var c=new v["a"]({layers:l});var f=new g["a"]({url:u.url,params:{layers:l}});var h=f.getGetFeatureInfoUrl(t,a,i,{INFO_FORMAT:o,FEATURE_COUNT:1,QUERY_LAYERS:l});return this.http_.get(h).then(function(e){var t=c.readFeatures(e.data);return t&&t[0]?t[0]:null})};s.module=angular.module("gmfObjectEditingQuery",[d["a"].module.name]);s.module.service("gmfObjectEditingQuery",s);t["a"]=s},function(e,t,r){"use strict";var o=r(140);var s=r(244);function l(e){if(Object.getOwnPropertyNames){return Object.getOwnPropertyNames(e).length===0}else{var t;for(t in e){if(e.hasOwnProperty(t)){return false}}return true}}var n=r(96);var i=r(164);var a=r(236);function u(e,t){var r=[],n;for(n=0;n<e.length;++n){r.push(t(e[n],n))}return r}var c=r(149);var f=r(89);var h=r(111);var d=r(18);var p=r(95);var v=r(17);var g=r(44);function m(e){var t;var r=e._a;if(r&&Object(g["a"])(e).overflow===-2){t=r[v["e"]]<0||r[v["e"]]>11?v["e"]:r[v["a"]]<1||r[v["a"]]>Object(p["a"])(r[v["i"]],r[v["e"]])?v["a"]:r[v["b"]]<0||r[v["b"]]>24||r[v["b"]]===24&&(r[v["d"]]!==0||r[v["f"]]!==0||r[v["c"]]!==0)?v["b"]:r[v["d"]]<0||r[v["d"]]>59?v["d"]:r[v["f"]]<0||r[v["f"]]>59?v["f"]:r[v["c"]]<0||r[v["c"]]>999?v["c"]:-1;if(Object(g["a"])(e)._overflowDayOfYear&&(t<v["i"]||t>v["a"])){t=v["a"]}if(Object(g["a"])(e)._overflowWeeks&&t===-1){t=v["g"]}if(Object(g["a"])(e)._overflowWeekday&&t===-1){t=v["h"]}Object(g["a"])(e).overflow=t}return e}var _=r(157);var y=r(128);var b=r(148);var w=r(63);function S(e,t,r){if(e!=null){return e}if(t!=null){return t}return r}function C(e){var t=new Date(d["a"].now());if(e._useUTC){return[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]}return[t.getFullYear(),t.getMonth(),t.getDate()]}function O(e){var t,r,n=[],i,a,o;if(e._d){return}i=C(e);if(e._w&&e._a[v["a"]]==null&&e._a[v["e"]]==null){x(e)}if(e._dayOfYear!=null){o=S(e._a[v["i"]],i[v["i"]]);if(e._dayOfYear>Object(y["a"])(o)||e._dayOfYear===0){Object(g["a"])(e)._overflowDayOfYear=true}r=Object(_["b"])(o,0,e._dayOfYear);e._a[v["e"]]=r.getUTCMonth();e._a[v["a"]]=r.getUTCDate()}for(t=0;t<3&&e._a[t]==null;++t){e._a[t]=n[t]=i[t]}for(;t<7;t++){e._a[t]=n[t]=e._a[t]==null?t===2?1:0:e._a[t]}if(e._a[v["b"]]===24&&e._a[v["d"]]===0&&e._a[v["f"]]===0&&e._a[v["c"]]===0){e._nextDay=true;e._a[v["b"]]=0}e._d=(e._useUTC?_["b"]:_["a"]).apply(null,n);a=e._useUTC?e._d.getUTCDay():e._d.getDay();if(e._tzm!=null){e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm)}if(e._nextDay){e._a[v["b"]]=24}if(e._w&&typeof e._w.d!=="undefined"&&e._w.d!==a){Object(g["a"])(e).weekdayMismatch=true}}function x(e){var t,r,n,i,a,o,s,l;t=e._w;if(t.GG!=null||t.W!=null||t.E!=null){a=1;o=4;r=S(t.GG,e._a[v["i"]],Object(b["b"])(Object(w["a"])(),1,4).year);n=S(t.W,1);i=S(t.E,1);if(i<1||i>7){l=true}}else{a=e._locale._week.dow;o=e._locale._week.doy;var u=Object(b["b"])(Object(w["a"])(),a,o);r=S(t.gg,e._a[v["i"]],u.year);n=S(t.w,u.week);if(t.d!=null){i=t.d;if(i<0||i>6){l=true}}else if(t.e!=null){i=t.e+a;if(t.e<0||t.e>6){l=true}}else{i=a}}if(n<1||n>Object(b["c"])(r,a,o)){Object(g["a"])(e)._overflowWeeks=true}else if(l!=null){Object(g["a"])(e)._overflowWeekday=true}else{s=Object(b["a"])(r,n,i,a,o);e._a[v["i"]]=s.year;e._dayOfYear=s.dayOfYear}}var T=r(94);var E=r(115);var M=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var A=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var k=/Z|[+-]\d\d(?::?\d\d)?/;var j=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,false],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,false],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,false],["YYYYDDD",/\d{7}/]];var I=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]];var D=/^\/?Date\((\-?\d+)/i;function P(e){var t,r,n=e._i,i=M.exec(n)||A.exec(n),a,o,s,l;if(i){Object(g["a"])(e).iso=true;for(t=0,r=j.length;t<r;t++){if(j[t][1].exec(i[1])){o=j[t][0];a=j[t][2]!==false;break}}if(o==null){e._isValid=false;return}if(i[3]){for(t=0,r=I.length;t<r;t++){if(I[t][1].exec(i[3])){s=(i[2]||" ")+I[t][0];break}}if(s==null){e._isValid=false;return}}if(!a&&s!=null){e._isValid=false;return}if(i[4]){if(k.exec(i[4])){l="Z"}else{e._isValid=false;return}}e._f=o+(s||"")+(l||"");z(e)}else{e._isValid=false}}var R=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function L(e,t,r,n,i,a){var o=[N(e),p["c"].indexOf(t),parseInt(r,10),parseInt(n,10),parseInt(i,10)];if(a){o.push(parseInt(a,10))}return o}function N(e){var t=parseInt(e,10);if(t<=49){return 2e3+t}else if(t<=999){return 1900+t}return t}function $(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function F(e,t,r){if(e){var n=E["c"].indexOf(e),i=new Date(t[0],t[1],t[2]).getDay();if(n!==i){Object(g["a"])(r).weekdayMismatch=true;r._isValid=false;return false}}return true}var G={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function U(e,t,r){if(e){return G[e]}else if(t){return 0}else{var n=parseInt(r,10);var i=n%100,a=(n-i)/100;return a*60+i}}function H(e){var t=R.exec($(e._i));if(t){var r=L(t[4],t[3],t[2],t[5],t[6],t[7]);if(!F(t[1],r,e)){return}e._a=r;e._tzm=U(t[8],t[9],t[10]);e._d=_["b"].apply(null,e._a);e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm);Object(g["a"])(e).rfc2822=true}else{e._isValid=false}}function W(e){var t=D.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}P(e);if(e._isValid===false){delete e._isValid}else{return}H(e);if(e._isValid===false){delete e._isValid}else{return}d["a"].createFromInputFallback(e)}d["a"].createFromInputFallback=Object(T["a"])("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), "+"which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are "+"discouraged and will be removed in an upcoming major release. Please refer to "+"http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});var Y=r(6);var V=r(48);var q=r(24);d["a"].ISO_8601=function(){};d["a"].RFC_2822=function(){};function z(e){if(e._f===d["a"].ISO_8601){P(e);return}if(e._f===d["a"].RFC_2822){H(e);return}e._a=[];Object(g["a"])(e).empty=true;var t=""+e._i,r,n,i,a,o,s=t.length,l=0;i=Object(q["b"])(e._f,e._locale).match(q["e"])||[];for(r=0;r<i.length;r++){a=i[r];n=(t.match(Object(Y["b"])(a,e))||[])[0];if(n){o=t.substr(0,t.indexOf(n));if(o.length>0){Object(g["a"])(e).unusedInput.push(o)}t=t.slice(t.indexOf(n)+n.length);l+=n.length}if(q["d"][a]){if(n){Object(g["a"])(e).empty=false}else{Object(g["a"])(e).unusedTokens.push(a)}Object(V["b"])(a,n,e)}else if(e._strict&&!n){Object(g["a"])(e).unusedTokens.push(a)}}Object(g["a"])(e).charsLeftOver=s-l;if(t.length>0){Object(g["a"])(e).unusedInput.push(t)}if(e._a[v["b"]]<=12&&Object(g["a"])(e).bigHour===true&&e._a[v["b"]]>0){Object(g["a"])(e).bigHour=undefined}Object(g["a"])(e).parsedDateParts=e._a.slice(0);Object(g["a"])(e).meridiem=e._meridiem;e._a[v["b"]]=B(e._locale,e._a[v["b"]],e._meridiem);O(e);m(e)}function B(e,t,r){var n;if(r==null){return t}if(e.meridiemHour!=null){return e.meridiemHour(t,r)}else if(e.isPM!=null){n=e.isPM(r);if(n&&t<12){t+=12}if(!n&&t===12){t=0}return t}else{return t}}var K=r(153);function X(e){var t,r,n,i,a;if(e._f.length===0){Object(g["a"])(e).invalidFormat=true;e._d=new Date(NaN);return}for(i=0;i<e._f.length;i++){a=0;t=Object(f["b"])({},e);if(e._useUTC!=null){t._useUTC=e._useUTC}t._f=e._f[i];z(t);if(!Object(c["b"])(t)){continue}a+=Object(g["a"])(t).charsLeftOver;a+=Object(g["a"])(t).unusedTokens.length*10;Object(g["a"])(t).score=a;if(n==null||a<n){n=a;r=t}}Object(K["a"])(e,r||t)}var Z=r(40);function Q(e){if(e._d){return}var t=Object(Z["b"])(e._i);e._a=u([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)});O(e)}r.d(t,"b",function(){return ee});r.d(t,"a",function(){return re});function J(e){var t=new f["a"](m(ee(e)));if(t._nextDay){t.add(1,"d");t._nextDay=undefined}return t}function ee(e){var t=e._i,r=e._f;e._locale=e._locale||Object(h["b"])(e._l);if(t===null||r===undefined&&t===""){return Object(c["a"])({nullInput:true})}if(typeof t==="string"){e._i=t=e._locale.preparse(t)}if(Object(f["c"])(t)){return new f["a"](m(t))}else if(Object(a["a"])(t)){e._d=t}else if(Object(o["a"])(r)){X(e)}else if(r){z(e)}else{te(e)}if(!Object(c["b"])(e)){e._d=null}return e}function te(e){var t=e._i;if(Object(n["a"])(t)){e._d=new Date(d["a"].now())}else if(Object(a["a"])(t)){e._d=new Date(t.valueOf())}else if(typeof t==="string"){W(e)}else if(Object(o["a"])(t)){e._a=u(t.slice(0),function(e){return parseInt(e,10)});O(e)}else if(Object(s["a"])(t)){Q(e)}else if(Object(i["a"])(t)){e._d=new Date(t)}else{d["a"].createFromInputFallback(e)}}function re(e,t,r,n,i){var a={};if(r===true||r===false){n=r;r=undefined}if(Object(s["a"])(e)&&l(e)||Object(o["a"])(e)&&e.length===0){e=undefined}a._isAMomentObject=true;a._useUTC=a._isUTC=i;a._l=r;a._i=e;a._f=t;a._strict=n;return J(a)}},function(e,t,r){"use strict";var T=r(126);var s=r(5);var E=r(26);var a=r(108);var n=r(113);var f=r(12);var i=function(i){function e(e,t,r){i.call(this);var n=r?r:{};this.tileCoord=e;this.state=t;this.interimTile=null;this.key="";this.transition_=n.transition===undefined?250:n.transition;this.transitionStarts_={}}if(i)e.__proto__=i;e.prototype=Object.create(i&&i.prototype);e.prototype.constructor=e;e.prototype.changed=function e(){this.dispatchEvent(f["a"].CHANGE)};e.prototype.getKey=function e(){return this.key+"/"+this.tileCoord};e.prototype.getInterimTile=function e(){if(!this.interimTile){return this}var t=this.interimTile;do{if(t.getState()==E["a"].LOADED){return t}t=t.interimTile}while(t);return this};e.prototype.refreshInterimChain=function e(){if(!this.interimTile){return}var t=this.interimTile;var r=this;do{if(t.getState()==E["a"].LOADED){t.interimTile=null;break}else if(t.getState()==E["a"].LOADING){r=t}else if(t.getState()==E["a"].IDLE){r.interimTile=t.interimTile}else{r=t}t=r.interimTile}while(t)};e.prototype.getTileCoord=function e(){return this.tileCoord};e.prototype.getState=function e(){return this.state};e.prototype.setState=function e(t){this.state=t;this.changed()};e.prototype.load=function e(){};e.prototype.getAlpha=function e(t,r){if(!this.transition_){return 1}var n=this.transitionStarts_[t];if(!n){n=r;this.transitionStarts_[t]=n}else if(n===-1){return 1}var i=r-n+1e3/60;if(i>=this.transition_){return 1}return Object(a["a"])(i/this.transition_)};e.prototype.inTransition=function e(t){if(!this.transition_){return false}return this.transitionStarts_[t]!==-1};e.prototype.endTransition=function e(t){if(this.transition_){this.transitionStarts_[t]=-1}};return e}(n["a"]);var o=i;var l=r(53);var h=r(2);var u=function(o){function e(e,t,r,n,i,a){o.call(this,e,t,a);this.crossOrigin_=n;this.src_=r;this.image_=new Image;if(n!==null){this.image_.crossOrigin=n}this.imageListenerKeys_=null;this.tileLoadFunction_=i}if(o)e.__proto__=o;e.prototype=Object.create(o&&o.prototype);e.prototype.constructor=e;e.prototype.disposeInternal=function e(){if(this.state==E["a"].LOADING){this.unlistenImage_();this.image_=c()}if(this.interimTile){this.interimTile.dispose()}this.state=E["a"].ABORT;this.changed();o.prototype.disposeInternal.call(this)};e.prototype.getImage=function e(){return this.image_};e.prototype.getKey=function e(){return this.src_};e.prototype.handleImageError_=function e(){this.state=E["a"].ERROR;this.unlistenImage_();this.image_=c();this.changed()};e.prototype.handleImageLoad_=function e(){var t=this.image_;if(t.naturalWidth&&t.naturalHeight){this.state=E["a"].LOADED}else{this.state=E["a"].EMPTY}this.unlistenImage_();this.changed()};e.prototype.load=function e(){if(this.state==E["a"].ERROR){this.state=E["a"].IDLE;this.image_=new Image;if(this.crossOrigin_!==null){this.image_.crossOrigin=this.crossOrigin_}}if(this.state==E["a"].IDLE){this.state=E["a"].LOADING;this.changed();this.imageListenerKeys_=[Object(h["b"])(this.image_,f["a"].ERROR,this.handleImageError_,this),Object(h["b"])(this.image_,f["a"].LOAD,this.handleImageLoad_,this)];this.tileLoadFunction_(this,this.src_)}};e.prototype.unlistenImage_=function e(){this.imageListenerKeys_.forEach(h["e"]);this.imageListenerKeys_=null};return e}(o);function c(){var e=Object(l["a"])(1,1);e.fillStyle="rgba(0,0,0,0)";e.fillRect(0,0,1,1);return e.canvas}var d=u;var p=r(302);var g=r(10);var M=r(3);var A=r(15);var k=r(190);var j=r(301);var v=function(x){function e(e,t,r,n,i,a,o,s,l,u,c){x.call(this,i,E["a"].IDLE);this.renderEdges_=c!==undefined?c:false;this.pixelRatio_=o;this.gutter_=s;this.canvas_=null;this.sourceTileGrid_=t;this.targetTileGrid_=n;this.wrappedTileCoord_=a?a:i;this.sourceTiles_=[];this.sourcesListenerKeys_=null;this.sourceZ_=0;var f=n.getTileCoordExtent(this.wrappedTileCoord_);var h=this.targetTileGrid_.getExtent();var d=this.sourceTileGrid_.getExtent();var p=h?Object(M["B"])(f,h):f;if(Object(M["u"])(p)===0){this.state=E["a"].EMPTY;return}var v=e.getExtent();if(v){if(!d){d=v}else{d=Object(M["B"])(d,v)}}var g=n.getResolution(this.wrappedTileCoord_[0]);var m=Object(M["x"])(p);var _=Object(k["a"])(e,r,m,g);if(!isFinite(_)||_<=0){this.state=E["a"].EMPTY;return}var y=u!==undefined?u:T["b"];this.triangulation_=new j["a"](e,r,p,d,_*y);if(this.triangulation_.getTriangles().length===0){this.state=E["a"].EMPTY;return}this.sourceZ_=t.getZForResolution(_);var b=this.triangulation_.calculateSourceExtent();if(d){if(e.canWrapX()){b[1]=Object(A["a"])(b[1],d[1],d[3]);b[3]=Object(A["a"])(b[3],d[1],d[3])}else{b=Object(M["B"])(b,d)}}if(!Object(M["u"])(b)){this.state=E["a"].EMPTY}else{var w=t.getTileRangeForExtentAndZ(b,this.sourceZ_);for(var S=w.minX;S<=w.maxX;S++){for(var C=w.minY;C<=w.maxY;C++){var O=l(this.sourceZ_,S,C,o);if(O){this.sourceTiles_.push(O)}}}if(this.sourceTiles_.length===0){this.state=E["a"].EMPTY}}}if(x)e.__proto__=x;e.prototype=Object.create(x&&x.prototype);e.prototype.constructor=e;e.prototype.disposeInternal=function e(){if(this.state==E["a"].LOADING){this.unlistenSources_()}x.prototype.disposeInternal.call(this)};e.prototype.getImage=function e(){return this.canvas_};e.prototype.reproject_=function e(){var n=[];this.sourceTiles_.forEach(function(e,t,r){if(e&&e.getState()==E["a"].LOADED){n.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}}.bind(this));this.sourceTiles_.length=0;if(n.length===0){this.state=E["a"].ERROR}else{var t=this.wrappedTileCoord_[0];var r=this.targetTileGrid_.getTileSize(t);var i=typeof r==="number"?r:r[0];var a=typeof r==="number"?r:r[1];var o=this.targetTileGrid_.getResolution(t);var s=this.sourceTileGrid_.getResolution(this.sourceZ_);var l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Object(k["b"])(i,a,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,n,this.gutter_,this.renderEdges_);this.state=E["a"].LOADED}this.changed()};e.prototype.load=function e(){if(this.state==E["a"].IDLE){this.state=E["a"].LOADING;this.changed();var a=0;this.sourcesListenerKeys_=[];this.sourceTiles_.forEach(function(r,e,t){var n=r.getState();if(n==E["a"].IDLE||n==E["a"].LOADING){a++;var i=Object(h["a"])(r,f["a"].CHANGE,function(e){var t=r.getState();if(t==E["a"].LOADED||t==E["a"].ERROR||t==E["a"].EMPTY){Object(h["e"])(i);a--;if(a===0){this.unlistenSources_();this.reproject_()}}},this);this.sourcesListenerKeys_.push(i)}}.bind(this));this.sourceTiles_.forEach(function(e,t,r){var n=e.getState();if(n==E["a"].IDLE){e.load()}});if(a===0){setTimeout(this.reproject_.bind(this),0)}}};e.prototype.unlistenSources_=function e(){this.sourcesListenerKeys_.forEach(h["e"]);this.sourcesListenerKeys_=null};return e}(o);var m=v;var _=r(202);var y=r(282);var b={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};var w=r(123);var S=function(t){function e(e){t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible});this.generateTileUrlFunction_=!e.tileUrlFunction;this.tileLoadFunction=e.tileLoadFunction;this.tileUrlFunction=e.tileUrlFunction?e.tileUrlFunction.bind(this):_["d"];this.urls=null;if(e.urls){this.setUrls(e.urls)}else if(e.url){this.setUrl(e.url)}if(e.tileUrlFunction){this.setTileUrlFunction(e.tileUrlFunction,this.key_)}this.tileLoadingKeys_={}}if(t)e.__proto__=t;e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;e.prototype.getTileLoadFunction=function e(){return this.tileLoadFunction};e.prototype.getTileUrlFunction=function e(){return this.tileUrlFunction};e.prototype.getUrls=function e(){return this.urls};e.prototype.handleTileChange=function e(t){var r=t.target;var n=Object(s["c"])(r);var i=r.getState();var a;if(i==E["a"].LOADING){this.tileLoadingKeys_[n]=true;a=b.TILELOADSTART}else if(n in this.tileLoadingKeys_){delete this.tileLoadingKeys_[n];a=i==E["a"].ERROR?b.TILELOADERROR:i==E["a"].LOADED||i==E["a"].ABORT?b.TILELOADEND:undefined}if(a!=undefined){this.dispatchEvent(new y["a"](a,r))}};e.prototype.setTileLoadFunction=function e(t){this.tileCache.clear();this.tileLoadFunction=t;this.changed()};e.prototype.setTileUrlFunction=function e(t,r){this.tileUrlFunction=t;this.tileCache.pruneExceptNewestZ();if(typeof r!=="undefined"){this.setKey(r)}else{this.changed()}};e.prototype.setUrl=function e(t){var r=this.urls=Object(_["c"])(t);this.setUrls(r)};e.prototype.setUrls=function e(t){this.urls=t;var r=t.join("\n");if(this.generateTileUrlFunction_){this.setTileUrlFunction(Object(_["a"])(t,this.tileGrid),r)}else{this.setKey(r)}};e.prototype.useTile=function e(t,r,n){var i=Object(w["d"])(t,r,n);if(this.tileCache.containsKey(i)){this.tileCache.get(i)}};return e}(y["b"]);var C=S;var O=r(221);var x=function(o){function e(e){o.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:I,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible});this.crossOrigin=e.crossOrigin!==undefined?e.crossOrigin:null;this.tileClass=e.tileClass!==undefined?e.tileClass:d;this.tileCacheForProjection={};this.tileGridForProjection={};this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold;this.renderReprojectionEdges_=false}if(o)e.__proto__=o;e.prototype=Object.create(o&&o.prototype);e.prototype.constructor=e;e.prototype.canExpireCache=function e(){if(!T["a"]){return o.prototype.canExpireCache.call(this)}if(this.tileCache.canExpireCache()){return true}else{for(var t in this.tileCacheForProjection){if(this.tileCacheForProjection[t].canExpireCache()){return true}}}return false};e.prototype.expireCache=function e(t,r){if(!T["a"]){o.prototype.expireCache.call(this,t,r);return}var n=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==n?r:{});for(var i in this.tileCacheForProjection){var a=this.tileCacheForProjection[i];a.expireCache(a==n?r:{})}};e.prototype.getGutterForProjection=function e(t){if(T["a"]&&this.getProjection()&&t&&!Object(g["e"])(this.getProjection(),t)){return 0}else{return this.getGutter()}};e.prototype.getGutter=function e(){return 0};e.prototype.getOpaque=function e(t){if(T["a"]&&this.getProjection()&&t&&!Object(g["e"])(this.getProjection(),t)){return false}else{return o.prototype.getOpaque.call(this,t)}};e.prototype.getTileGridForProjection=function e(t){if(!T["a"]){return o.prototype.getTileGridForProjection.call(this,t)}var r=this.getProjection();if(this.tileGrid&&(!r||Object(g["e"])(r,t))){return this.tileGrid}else{var n=Object(s["c"])(t);if(!(n in this.tileGridForProjection)){this.tileGridForProjection[n]=Object(O["c"])(t)}return this.tileGridForProjection[n]}};e.prototype.getTileCacheForProjection=function e(t){if(!T["a"]){return o.prototype.getTileCacheForProjection.call(this,t)}var r=this.getProjection();if(!r||Object(g["e"])(r,t)){return this.tileCache}else{var n=Object(s["c"])(t);if(!(n in this.tileCacheForProjection)){this.tileCacheForProjection[n]=new p["a"](this.tileCache.highWaterMark)}return this.tileCacheForProjection[n]}};e.prototype.createTile_=function e(t,r,n,i,a,o){var s=[t,r,n];var l=this.getTileCoordForTileUrlFunction(s,a);var u=l?this.tileUrlFunction(l,i,a):undefined;var c=new this.tileClass(s,u!==undefined?E["a"].IDLE:E["a"].EMPTY,u!==undefined?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);c.key=o;Object(h["a"])(c,f["a"].CHANGE,this.handleTileChange,this);return c};e.prototype.getTile=function e(t,r,n,i,a){var o=this.getProjection();if(!T["a"]||!o||!a||Object(g["e"])(o,a)){return this.getTileInternal(t,r,n,i,o||a)}else{var s=this.getTileCacheForProjection(a);var l=[t,r,n];var u;var c=Object(w["c"])(l);if(s.containsKey(c)){u=s.get(c)}var f=this.getKey();if(u&&u.key==f){return u}else{var h=this.getTileGridForProjection(o);var d=this.getTileGridForProjection(a);var p=this.getTileCoordForTileUrlFunction(l,a);var v=new m(o,h,a,d,l,p,this.getTilePixelRatio(i),this.getGutter(),function(e,t,r,n){return this.getTileInternal(e,t,r,n,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);v.key=f;if(u){v.interimTile=u;v.refreshInterimChain();s.replace(c,v)}else{s.set(c,v)}return v}}};e.prototype.getTileInternal=function e(t,r,n,i,a){var o=null;var s=Object(w["d"])(t,r,n);var l=this.getKey();if(!this.tileCache.containsKey(s)){o=this.createTile_(t,r,n,i,a,l);this.tileCache.set(s,o)}else{o=this.tileCache.get(s);if(o.key!=l){var u=o;o=this.createTile_(t,r,n,i,a,l);if(u.getState()==E["a"].IDLE){o.interimTile=u.interimTile}else{o.interimTile=u}o.refreshInterimChain();this.tileCache.replace(s,o)}}return o};e.prototype.setRenderReprojectionEdges=function e(t){if(!T["a"]||this.renderReprojectionEdges_==t){return}this.renderReprojectionEdges_=t;for(var r in this.tileCacheForProjection){this.tileCacheForProjection[r].clear()}this.changed()};e.prototype.setTileGridForProjection=function e(t,r){if(T["a"]){var n=Object(g["g"])(t);if(n){var i=Object(s["c"])(n);if(!(i in this.tileGridForProjection)){this.tileGridForProjection[i]=r}}}};return e}(C);function I(e,t){e.getImage().src=t}var D=t["a"]=x},function(e,t,r){"use strict";var i=r(5);var a=r(2);var n=r(197);var o=r(93);var s=r(59);var d=r(1);var l=r(91);var p=r(84);var u=r(387);var c=r(241);var f=r(297);var h=function e(t,r,n){this.sce_=t;this.gettextCatalog_=r;this.createPopup_=n;p["a"].call(this);var i=angular.element('<div class="ngeo-disclaimer"></div>');angular.element(document.body).append(i);this.container_=i;this.messages_={}};h.$inject=["$sce","gettextCatalog","ngeoCreatePopup"];h.$inject=["$sce","gettextCatalog","ngeoCreatePopup"];i["d"](h,p["a"]);h.prototype.alert=function(e){this.show(e)};h.prototype.close=function(e){var t=this.getMessageObjects(e);t.forEach(this.closeMessage_,this)};h.prototype.showMessage=function(r){var n=this;var e=this.gettextCatalog_;var t=r.type;d["a"].assertString(t,"Type should be set.");var i=this.getMessageUid_(r);if(this.messages_[i]!==undefined){return}var a=r.popup===true;if(a){var o=this.createPopup_();var s=this.sce_.trustAsHtml(r.msg);o.open({autoDestroy:true,content:s,title:"&nbsp;"});o.scope.$watch("open",function(e,t){if(!e){n.closeMessage_(r)}});this.messages_[i]=o}else{var l=["alert","fade","alert-dismissible","show"];switch(t){case p["a"].Type.ERROR:l.push("alert-danger");break;case p["a"].Type.INFORMATION:l.push("alert-info");break;case p["a"].Type.SUCCESS:l.push("alert-success");break;case p["a"].Type.WARNING:l.push("alert-warning");break;default:break}var u=angular.element('<div role="alert" class="'+l.join(" ")+'"></div>');var c=angular.element('<button type="button" class="close" data-dismiss="alert" aria-label="'+e.getString("Close")+'"><span aria-hidden="true" class="fa fa-times"></span></button>');var f=angular.element("<span />").html(r.msg);u.append(c).append(f);var h;if(r.target){h=angular.element(r.target)}else{h=this.container_}h.append(u);u.addClass("show");u.on("closed.bs.alert",function(){n.closeMessage_(r)});this.messages_[i]=u}};h.prototype.getMessageUid_=function(e){return e.msg+"-"+e.type};h.prototype.closeMessage_=function(e){var t=this.getMessageUid_(e);var r=this.messages_[t];if(r===undefined){return}if(r instanceof c["a"]){if(r.getOpen()){r.setOpen(false)}}else{if(r.hasClass("show")){r.alert("close")}}delete this.messages_[t]};h.module=angular.module("ngeoDisclaimer",[c["a"].module.name]);h.module.service("ngeoDisclaimer",h);var v=h;var g=r(159);var m=r(392);var _=angular.module("gmfDisclaimer",["ngSanitize",l["a"].module.name,v.module.name,g["a"].module.name]);_.Controller_=function(e,t,r,n,i,a,o,s,l){this.map;this.external;this.popup;this.visibility=false;this.msg;this.msgs_=[];this.sce_=r;this.timeout_=n;this.gettextCatalog_=i;this.element_=e;this.createPopup_=a;this.disclaimer_=o;this.eventHelper_=s;this.ngeoLayerHelper_=l;this.dataLayerGroup_=null};_.Controller_.$inject=["$element","$scope","$sce","$timeout","gettextCatalog","ngeoCreatePopup","ngeoDisclaimer","ngeoEventHelper","ngeoLayerHelper"];_.Controller_.prototype.$onInit=function(){this.dataLayerGroup_=this.ngeoLayerHelper_.getGroupFromMap(this.map,s["a"].DATALAYERGROUP_NAME);this.registerLayer_(this.dataLayerGroup_)};_.Controller_.prototype.handleLayersAdd_=function(t){var r=this;this.timeout_(function(){var e=t.element;d["a"].assertInstanceof(e,n["a"]);r.registerLayer_(e)})};_.Controller_.prototype.handleLayersRemove_=function(e){var t=e.element;d["a"].assertInstanceof(t,n["a"]);this.unregisterLayer_(t)};_.Controller_.prototype.registerLayer_=function(e){var t=this;var r=i["c"](e);if(e instanceof o["a"]){this.eventHelper_.addListenerKey(r,a["a"](e.getLayers(),"add",this.handleLayersAdd_,this));this.eventHelper_.addListenerKey(r,a["a"](e.getLayers(),"remove",this.handleLayersRemove_,this));e.getLayers().forEach(function(e){t.registerLayer_(e)})}else{var n=e.get("disclaimers");if(n&&Array.isArray(n)){n.forEach(function(e){t.showDisclaimerMessage_(e)})}}};_.Controller_.prototype.unregisterLayer_=function(e){var t=this;var r=i["c"](e);if(e instanceof o["a"]){this.eventHelper_.clearListenerKey(r);e.getLayers().forEach(function(e){return t.unregisterLayer_(e)})}else{var n=e.get("disclaimers");if(n&&Array.isArray(n)){n.forEach(function(e){t.closeDisclaimerMessage_(e)})}}};_.Controller_.prototype.$onDestroy=function(){this.unregisterLayer_(this.dataLayerGroup_)};_.Controller_.prototype.showDisclaimerMessage_=function(e){e=this.gettextCatalog_.getString(e);if(this.external){if(this.msgs_.indexOf(e)<0){this.msgs_.push(e)}this.msg=""+this.sce_.trustAsHtml(this.msgs_.join("<br />"));this.visibility=true}else{this.disclaimer_.alert({popup:this.popup,msg:e,target:this.element_,type:p["a"].Type.WARNING})}};_.Controller_.prototype.closeDisclaimerMessage_=function(e){e=this.gettextCatalog_.getString(e);if(this.external){this.visibility=false;this.msgs_.length=0;this.msg=""}else{this.disclaimer_.close({popup:this.popup,msg:e,target:this.element_,type:p["a"].Type.WARNING})}};_.component_={controller:_.Controller_,bindings:{popup:"<?gmfDisclaimerPopup",map:"=gmfDisclaimerMap",external:"<?gmfDisclaimerExternal",visibility:"=?gmfDisclaimerExternalVisibility",msg:"=?gmfDisclaimerExternalMsg"}};_.component("gmfDisclaimer",_.component_);var y=_;var b=angular.module("gmfDisclaimerModule",[y.name]);var w=t["a"]=b},function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"b",function(){return f});r.d(t,"c",function(){return i});var b=r(8);var w=r(15);function n(e,t,r,n,i,a){var o=NaN;var s=NaN;var l=(r-t)/n;if(l===1){o=e[t];s=e[t+1]}else if(l==2){o=(1-i)*e[t]+i*e[t+n];s=(1-i)*e[t+1]+i*e[t+n+1]}else if(l!==0){var u=e[t];var c=e[t+1];var f=0;var h=[0];for(var d=t+n;d<r;d+=n){var p=e[d];var v=e[d+1];f+=Math.sqrt((p-u)*(p-u)+(v-c)*(v-c));h.push(f);u=p;c=v}var g=i*f;var m=Object(b["a"])(h,g);if(m<0){var _=(g-h[-m-2])/(h[-m-1]-h[-m-2]);var y=t+(-m-2)*n;o=Object(w["c"])(e[y],e[y+n],_);s=Object(w["c"])(e[y+1],e[y+n+1],_)}else{o=e[t+m*n];s=e[t+m*n+1]}}if(a){a[0]=o;a[1]=s;return a}else{return[o,s]}}function f(e,t,r,n,i,a){if(r==t){return null}var o;if(i<e[t+n-1]){if(a){o=e.slice(t,t+n);o[n-1]=i;return o}else{return null}}else if(e[r-1]<i){if(a){o=e.slice(r-n,r);o[n-1]=i;return o}else{return null}}if(i==e[t+n-1]){return e.slice(t,t+n)}var s=t/n;var l=r/n;while(s<l){var u=s+l>>1;if(i<e[(u+1)*n-1]){l=u}else{s=u+1}}var c=e[s*n-1];if(i==c){return e.slice((s-1)*n,(s-1)*n+n)}var f=e[(s+1)*n-1];var h=(i-c)/(f-c);o=[];for(var d=0;d<n-1;++d){o.push(Object(w["c"])(e[(s-1)*n+d],e[s*n+d],h))}o.push(i);return o}function i(e,t,r,n,i,a,o){if(o){return f(e,t,r[r.length-1],n,i,a)}var s;if(i<e[n-1]){if(a){s=e.slice(0,n);s[n-1]=i;return s}else{return null}}if(e[e.length-1]<i){if(a){s=e.slice(e.length-n);s[n-1]=i;return s}else{return null}}for(var l=0,u=r.length;l<u;++l){var c=r[l];if(t==c){continue}if(i<e[t+n-1]){return null}else if(i<=e[c-1]){return f(e,t,c,n,i,false)}t=c}return null}},function(e,t,r){"use strict";var n=r(71);var i=function(n){function e(e,t,r){n.call(this,e);this.map=t;this.frameState=r!==undefined?r:null}if(n)e.__proto__=n;e.prototype=Object.create(n&&n.prototype);e.prototype.constructor=e;return e}(n["a"]);t["a"]=i},function(e,t,r){"use strict";r.d(t,"a",function(){return o});var l=1e3*60*60*24;var u=3600;function _(e,t){return typeof e==="string"&&typeof t==="string"&&e.toLowerCase()===t.toLowerCase()}function c(e,t,r){var n=e.toString();r=r||"0";return n.length<t?c(r+n,t):n}function i(e){e=e||{};for(var t=1;t<arguments.length;t++){var r=arguments[t];if(!r){continue}for(var n in r){if(r.hasOwnProperty(n)){if(typeof r[n]==="object"){i(e[n],r[n])}else{e[n]=r[n]}}}}return e}function a(e,t){for(var r=0;r<t.length;r++){if(t[r].toLowerCase()===e.toLowerCase()){return r}}return-1}var n={dateSettings:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridiem:["AM","PM"],ordinal:function e(t){var r=t%10,n={1:"st",2:"nd",3:"rd"};return Math.floor(t%100/10)===1||!n[r]?"th":n[r]}},separators:/[ \-+/.T:@]/g,validParts:/[dDjlNSwzWFmMntLoYyaABgGhHisueTIOPZcrU]/g,intParts:/[djwNzmnyYhHgGis]/g,tzParts:/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,tzClip:/[^-+\dA-Z]/g};var o=function(){function e(e){var t=this,r=i(n,e);t.dateSettings=r.dateSettings;t.separators=r.separators;t.validParts=r.validParts;t.intParts=r.intParts;t.tzParts=r.tzParts;t.tzClip=r.tzClip}var t=e.prototype;t.getMonth=function e(t){var r=this;var n=a(t,r.dateSettings.monthsShort)+1;if(n===0){n=a(t,r.dateSettings.months)+1}return n};t.parseDate=function e(t,r){var n=this,i=n.dateSettings,a={date:null,year:null,month:null,day:null,hour:0,min:0,sec:0};var o=false,s=false,l;if(!t){return null}if(t instanceof Date){return t}if(r==="U"){l=parseInt(t);return l?new Date(l*1e3):t}switch(typeof t){case"number":return new Date(t);case"string":break;default:return null}var u=r.match(n.validParts);if(!u||u.length===0){throw new Error("Invalid date format definition.")}var c=t.replace(n.separators,"\0").split("\0");for(l=0;l<c.length;l++){var f=c[l];var h=parseInt(f);switch(u[l]){case"y":case"Y":if(h){var d=f.length;a.year=d===2?parseInt((h<70?"20":"19")+f):h}else{return null}o=true;break;case"m":case"n":case"M":case"F":if(isNaN(h)){var p=n.getMonth(f);if(p>0){a.month=p}else{return null}}else{if(h>=1&&h<=12){a.month=h}else{return null}}o=true;break;case"d":case"j":if(h>=1&&h<=31){a.day=h}else{return null}o=true;break;case"g":case"h":var v=u.indexOf("a")>-1?u.indexOf("a"):u.indexOf("A")>-1?u.indexOf("A"):-1;var g=c[v];if(v!==-1){var m=_(g,i.meridiem[0])?0:_(g,i.meridiem[1])?12:-1;if(h>=1&&h<=12&&m!==-1){a.hour=h%12===0?m:h+m}else{if(h>=0&&h<=23){a.hour=h}}}else{if(h>=0&&h<=23){a.hour=h}else{return null}}s=true;break;case"G":case"H":if(h>=0&&h<=23){a.hour=h}else{return null}s=true;break;case"i":if(h>=0&&h<=59){a.min=h}else{return null}s=true;break;case"s":if(h>=0&&h<=59){a.sec=h}else{return null}s=true;break}}if(o===true&&a.year&&a.month&&a.day){a.date=new Date(a.year,a.month-1,a.day,a.hour,a.min,a.sec,0)}else{if(s!==true){return null}a.date=new Date(0,0,0,a.hour,a.min,a.sec,0)}return a.date};t.guessDate=function e(t,r){if(typeof t!=="string"){return t}var n=this,i=t.replace(n.separators,"\0").split("\0"),a=/^[djmn]/g,o=r.match(n.validParts),s=new Date;if(!a.test(o[0])){return t}for(var l=0;l<i.length;l++){var u=2;var c=i[l];var f=parseInt(c.substr(0,2));if(isNaN(f)){return null}switch(l){case 0:if(o[0]==="m"||o[0]==="n"){s.setMonth(f-1)}else{s.setDate(f)}break;case 1:if(o[0]==="m"||o[0]==="n"){s.setDate(f)}else{s.setMonth(f-1)}break;case 2:var h=s.getFullYear();var d=c.length;u=d<4?d:4;h=parseInt(d<4?h.toString().substr(0,4-d)+c:c.substr(0,4));if(!h){return null}s.setFullYear(h);break;case 3:s.setHours(f);break;case 4:s.setMinutes(f);break;case 5:s.setSeconds(f);break}var p=c.substr(u);if(p.length>0){i.splice(l+1,0,p)}}return s};t.parseFormat=function e(t,i){var a=null;var r=this,n=r.dateSettings,o=/\\?(.?)/gi,s=function e(t,r){return a[t]?a[t]():r};a={d:function e(){return c(a.j(),2)},D:function e(){return n.daysShort[a.w()]},j:function e(){return i.getDate()},l:function e(){return n.days[a.w()]},N:function e(){return a.w()||7},w:function e(){return i.getDay()},z:function e(){var t=new Date(a.Y(),a.n()-1,a.j()),r=new Date(a.Y(),0,1);return Math.round((t-r)/l)},W:function e(){var t=new Date(a.Y(),a.n()-1,a.j()-a.N()+3),r=new Date(t.getFullYear(),0,4);return c(1+Math.round((t-r)/l/7),2)},F:function e(){return n.months[i.getMonth()]},m:function e(){return c(a.n(),2)},M:function e(){return n.monthsShort[i.getMonth()]},n:function e(){return i.getMonth()+1},t:function e(){return new Date(a.Y(),a.n(),0).getDate()},L:function e(){var t=a.Y();return t%4===0&&t%100!==0||t%400===0?1:0},o:function e(){var t=a.n(),r=a.W(),n=a.Y();return n+(t===12&&r<9?1:t===1&&r>9?-1:0)},Y:function e(){return i.getFullYear()},y:function e(){return a.Y().toString().slice(-2)},a:function e(){return a.A().toLowerCase()},A:function e(){var t=a.G()<12?0:1;return n.meridiem[t]},B:function e(){var t=i.getUTCHours()*u,r=i.getUTCMinutes()*60,n=i.getUTCSeconds();return c(Math.floor((t+r+n+u)/86.4)%1e3,3)},g:function e(){return a.G()%12||12},G:function e(){return i.getHours()},h:function e(){return c(a.g(),2)},H:function e(){return c(a.G(),2)},i:function e(){return c(i.getMinutes(),2)},s:function e(){return c(i.getSeconds(),2)},u:function e(){return c(i.getMilliseconds()*1e3,6)},e:function e(){var t=/\((.*)\)/.exec(String(i))[1];return t||"Coordinated Universal Time"},I:function e(){var t=new Date(a.Y(),0),r=Date.UTC(a.Y(),0),n=new Date(a.Y(),6),i=Date.UTC(a.Y(),6);return t-r!==n-i?1:0},O:function e(){var t=i.getTimezoneOffset(),r=Math.abs(t);return(t>0?"-":"+")+c(Math.floor(r/60)*100+r%60,4)},P:function e(){var t=a.O();return t.substr(0,3)+":"+t.substr(3,2)},T:function e(){var t=(String(i).match(r.tzParts)||[""]).pop().replace(r.tzClip,"");return t||"UTC"},Z:function e(){return-i.getTimezoneOffset()*60},c:function e(){return"Y-m-d\\TH:i:sP".replace(o,s)},r:function e(){return"D, d M Y H:i:s O".replace(o,s)},U:function e(){return i.getTime()/1e3||0}};return s(t,t)};t.formatDate=function e(t,r){var n=this,i="\\";if(typeof t==="string"){t=n.parseDate(t,r);if(!t){return null}}if(t instanceof Date){var a="";var o=r.length;for(var s=0;s<o;s++){var l=r.charAt(s);if(l==="S"||l===i){continue}if(s>0&&r.charAt(s-1)===i){a+=l;continue}var u=n.parseFormat(l,t);if(s!==o-1&&n.intParts.test(l)&&r.charAt(s+1)==="S"){var c=parseInt(u)||0;u+=n.dateSettings.ordinal(c)}a+=u}return a}return""};return e}()},function(e,r,t){"use strict";(function(t){var e=function e(t,r){this.$http_=t;this.gmfShortenerCreateUrl_=r};e.$inject=["$http","gmfShortenerCreateUrl"];e.$inject=["$http","gmfShortenerCreateUrl"];e.prototype.getShortUrl=function(e){var t={url:e};if(!this.gmfShortenerCreateUrl_){return{data:{short_url:e},status:200}}return this.postShortUrl_(t)};e.prototype.sendShortUrl=function(e,t,r){var n={url:e,email:t};if(r){n["message"]=r}return this.postShortUrl_(n)};e.prototype.postShortUrl_=function(e){return this.$http_.post(this.gmfShortenerCreateUrl_,t.param(e),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})};e.URL_MAX_LEN=2083;e.URL_PATH_MAX_LEN=2048;e.module=angular.module("gmfShareService",[]);e.module.service("gmfShareService",e);r["a"]=e}).call(this,t(27))},function(e,t,r){"use strict";var n=Array.prototype.slice;var T=function(e){return e};var E=1,M=2,A=3,k=4,j=1e-6;function i(e){return"translate("+(e+.5)+",0)"}function a(e){return"translate(0,"+(e+.5)+")"}function I(t){return function(e){return+t(e)}}function D(t){var r=Math.max(0,t.bandwidth()-1)/2;if(t.round())r=Math.round(r);return function(e){return+t(e)+r}}function P(){return!this.__axis}function o(v,g){var m=[],_=null,y=null,b=6,w=6,S=3,C=v===E||v===k?-1:1,O=v===k||v===M?"x":"y",x=v===E||v===A?i:a;function t(e){var t=_==null?g.ticks?g.ticks.apply(g,m):g.domain():_,r=y==null?g.tickFormat?g.tickFormat.apply(g,m):T:y,n=Math.max(b,0)+S,i=g.range(),a=+i[0]+.5,o=+i[i.length-1]+.5,s=(g.bandwidth?D:I)(g.copy()),l=e.selection?e.selection():e,u=l.selectAll(".domain").data([null]),c=l.selectAll(".tick").data(t,g).order(),f=c.exit(),h=c.enter().append("g").attr("class","tick"),d=c.select("line"),p=c.select("text");u=u.merge(u.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor"));c=c.merge(h);d=d.merge(h.append("line").attr("stroke","currentColor").attr(O+"2",C*b));p=p.merge(h.append("text").attr("fill","currentColor").attr(O,C*n).attr("dy",v===E?"0em":v===A?"0.71em":"0.32em"));if(e!==l){u=u.transition(e);c=c.transition(e);d=d.transition(e);p=p.transition(e);f=f.transition(e).attr("opacity",j).attr("transform",function(e){return isFinite(e=s(e))?x(e):this.getAttribute("transform")});h.attr("opacity",j).attr("transform",function(e){var t=this.parentNode.__axis;return x(t&&isFinite(t=t(e))?t:s(e))})}f.remove();u.attr("d",v===k||v==M?"M"+C*w+","+a+"H0.5V"+o+"H"+C*w:"M"+a+","+C*w+"V0.5H"+o+"V"+C*w);c.attr("opacity",1).attr("transform",function(e){return x(s(e))});d.attr(O+"2",C*b);p.attr(O,C*n).text(r);l.filter(P).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",v===M?"start":v===k?"end":"middle");l.each(function(){this.__axis=s})}t.scale=function(e){return arguments.length?(g=e,t):g};t.ticks=function(){return m=n.call(arguments),t};t.tickArguments=function(e){return arguments.length?(m=e==null?[]:n.call(e),t):m.slice()};t.tickValues=function(e){return arguments.length?(_=e==null?null:n.call(e),t):_&&_.slice()};t.tickFormat=function(e){return arguments.length?(y=e,t):y};t.tickSize=function(e){return arguments.length?(b=w=+e,t):b};t.tickSizeInner=function(e){return arguments.length?(b=+e,t):b};t.tickSizeOuter=function(e){return arguments.length?(w=+e,t):w};t.tickPadding=function(e){return arguments.length?(S=+e,t):S};return t}function s(e){return o(E,e)}function l(e){return o(M,e)}function u(e){return o(A,e)}function c(e){return o(k,e)}r.d(t,"a",function(){return u});r.d(t,"b",function(){return c})},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(1,eval)("this")}catch(e){if(typeof window==="object")r=window}e.exports=r},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" height="1em" width="1em"><path d="M7.948 10.25c-1.26.009-2.349-1.23-2.184-2.48.11-1.153 1.218-2.124 2.387-2.013 1.064.06 2.022.956 2.09 2.028.1.975-.492 1.973-1.42 2.31a2.211 2.211 0 0 1-.873.155zm.047-1.357c.606.03 1.103-.703.827-1.248-.215-.499-.934-.709-1.357-.343-.393.3-.47.941-.11 1.295.16.18.395.295.64.296z"></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" height="1em" width="1em"><path d="M6.626.267C5.366.26 4.27 1.498 4.436 2.75c.109 1.153 1.216 2.129 2.384 2.017 1.064-.06 2.031-.96 2.1-2.031.1-.975-.497-1.977-1.424-2.313a2.198 2.198 0 0 0-.87-.155zm.046 1.364c.605-.03 1.095.7.819 1.244-.215.498-.93.71-1.353.344-.392-.3-.473-.94-.112-1.293.16-.18.4-.294.645-.295zM3.916 8.397c-1.256-.007-2.353 1.225-2.19 2.475.104 1.16 1.223 2.142 2.397 2.023 1.062-.066 2.019-.962 2.087-2.036.093-.932-.446-1.892-1.312-2.259a2.192 2.192 0 0 0-.983-.203zm.048 1.363c.612-.028 1.104.716.807 1.266-.228.493-.94.682-1.355.313-.377-.3-.457-.923-.106-1.276a.889.889 0 0 1 .654-.303zm8.05 1.467c-1.25-.023-2.353 1.178-2.224 2.422.075 1.165 1.179 2.174 2.358 2.078 1.07-.043 2.05-.936 2.13-2.016.103-.936-.434-1.905-1.301-2.278-.301-.14-.631-.214-.963-.207zm.008 1.364c.615-.037 1.115.708.821 1.26-.217.478-.906.684-1.322.344-.424-.297-.5-.976-.113-1.332a.879.879 0 0 1 .615-.272zm-6.81-2.163c-.143.417-.282.832-.434 1.245 1.92.67 3.84 1.333 5.755 2.011.153-.432.296-.863.455-1.293-1.92-.67-3.841-1.335-5.759-2.011l-.017.048zm.426-6.874C4.973 5.436 4.313 7.32 3.642 9.2c.432.15.863.302 1.292.458.668-1.899 1.336-3.798 2.012-5.694-.432-.15-.862-.301-1.29-.458l-.018.047z"></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" height="1em" width="1em"><path d="M5.045-.029c-1.26-.008-2.35 1.23-2.184 2.48.06.632.43 1.202.936 1.576-.479 1.358-.968 2.714-1.45 4.072-1.257-.008-2.363 1.23-2.2 2.48.105 1.16 1.228 2.13 2.402 2.012a2.295 2.295 0 0 0 1.45-.67c1.273.53 2.553 1.056 3.823 1.59a1.992 1.992 0 0 0 0 .438c.074 1.165 1.176 2.17 2.355 2.074 1.07-.042 2.057-.932 2.138-2.012a2.295 2.295 0 0 0-.453-1.607c.435-.593.873-1.186 1.31-1.778.186.04.369.047.562.031 1.067-.047 2.04-.935 2.122-2.012.11-.964-.464-1.959-1.373-2.31a2.202 2.202 0 0 0-.343-.108 444.27 444.27 0 0 1-.125-1.857c.743-.313 1.326-1.036 1.388-1.856.11-.964-.463-1.958-1.372-2.309a2.196 2.196 0 0 0-.92-.172c-.08 0-.158-.008-.235 0-.841.098-1.565.75-1.84 1.545-1.26-.004-2.53-.009-3.791-.016C7.045.918 6.564.361 5.919.127a2.211 2.211 0 0 0-.874-.156zm.047 1.357c.605-.03 1.103.704.827 1.248-.215.499-.934.71-1.358.343-.392-.299-.47-.94-.109-1.294a.874.874 0 0 1 .64-.297zm8.08.063c.62-.026 1.099.719.796 1.263-.232.498-.967.692-1.373.297-.361-.308-.431-.939-.078-1.28a.899.899 0 0 1 .656-.28zM7.246 2.919c1.257.005 2.517.024 3.775.032a2.333 2.333 0 0 0 1.622 1.513c.043.624.084 1.248.125 1.872-.877.376-1.511 1.322-1.388 2.293.042.482.267.94.592 1.295-.416.567-.826 1.136-1.248 1.7a2.045 2.045 0 0 0-.67-.109v.016c-.632-.012-1.235.287-1.654.748-1.26-.525-2.517-1.063-3.775-1.59.005-.043.013-.083.015-.126a2.274 2.274 0 0 0-.967-2.074c.472-1.342.944-2.685 1.42-4.025.052 0 .104.005.156 0 .898-.05 1.72-.7 1.997-1.545zm6.38 4.602c.62-.025 1.098.72.796 1.264-.233.497-.967.691-1.373.296-.362-.308-.432-.938-.078-1.279a.899.899 0 0 1 .655-.28zM2.393 9.456c.612-.028 1.109.729.811 1.28-.228.493-.942.68-1.357.311-.377-.3-.46-.926-.11-1.28a.9.9 0 0 1 .656-.311zm7.66 3.432c.615-.037 1.12.711.826 1.263-.217.48-.91.684-1.326.344-.423-.297-.495-.986-.109-1.342a.857.857 0 0 1 .609-.265z"></svg>'},function(t,r,n){var i,a,o;(function(e){if(true){!(a=[n(27),n(117),n(381)],i=e,o=typeof i==="function"?i.apply(r,a):i,o!==undefined&&(t.exports=o))}else{}})(function(O){O.extend(O.ui,{datepicker:{version:"1.12.1"}});var s;function u(e){var t,r;while(e.length&&e[0]!==document){t=e.css("position");if(t==="absolute"||t==="relative"||t==="fixed"){r=parseInt(e.css("zIndex"),10);if(!isNaN(r)&&r!==0){return r}}e=e.parent()}return 0}function e(){this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};O.extend(this._defaults,this.regional[""]);this.regional.en=O.extend(true,{},this.regional[""]);this.regional["en-US"]=O.extend(true,{},this.regional.en);this.dpDiv=i(O("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}O.extend(e.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function e(){return this.dpDiv},setDefaults:function e(t){h(this._defaults,t||{});return this},_attachDatepicker:function e(t,r){var n,i,a;n=t.nodeName.toLowerCase();i=n==="div"||n==="span";if(!t.id){this.uuid+=1;t.id="dp"+this.uuid}a=this._newInst(O(t),i);a.settings=O.extend({},r||{});if(n==="input"){this._connectDatepicker(t,a)}else if(i){this._inlineDatepicker(t,a)}},_newInst:function e(t,r){var n=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:n,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:r,dpDiv:!r?this.dpDiv:i(O("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}},_connectDatepicker:function e(t,r){var n=O(t);r.append=O([]);r.trigger=O([]);if(n.hasClass(this.markerClassName)){return}this._attachments(n,r);n.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp);this._autoSize(r);O.data(t,"datepicker",r);if(r.settings.disabled){this._disableDatepicker(t)}},_attachments:function e(t,r){var n,i,a,o=this._get(r,"appendText"),s=this._get(r,"isRTL");if(r.append){r.append.remove()}if(o){r.append=O("<span class='"+this._appendClass+"'>"+o+"</span>");t[s?"before":"after"](r.append)}t.off("focus",this._showDatepicker);if(r.trigger){r.trigger.remove()}n=this._get(r,"showOn");if(n==="focus"||n==="both"){t.on("focus",this._showDatepicker)}if(n==="button"||n==="both"){i=this._get(r,"buttonText");a=this._get(r,"buttonImage");r.trigger=O(this._get(r,"buttonImageOnly")?O("<img/>").addClass(this._triggerClass).attr({src:a,alt:i,title:i}):O("<button type='button'></button>").addClass(this._triggerClass).html(!a?i:O("<img/>").attr({src:a,alt:i,title:i})));t[s?"before":"after"](r.trigger);r.trigger.on("click",function(){if(O.datepicker._datepickerShowing&&O.datepicker._lastInput===t[0]){O.datepicker._hideDatepicker()}else if(O.datepicker._datepickerShowing&&O.datepicker._lastInput!==t[0]){O.datepicker._hideDatepicker();O.datepicker._showDatepicker(t[0])}else{O.datepicker._showDatepicker(t[0])}return false})}},_autoSize:function e(t){if(this._get(t,"autoSize")&&!t.inline){var r,n,i,a,o=new Date(2009,12-1,20),s=this._get(t,"dateFormat");if(s.match(/[DM]/)){r=function e(t){n=0;i=0;for(a=0;a<t.length;a++){if(t[a].length>n){n=t[a].length;i=a}}return i};o.setMonth(r(this._get(t,s.match(/MM/)?"monthNames":"monthNamesShort")));o.setDate(r(this._get(t,s.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())}t.input.attr("size",this._formatDate(t,o).length)}},_inlineDatepicker:function e(t,r){var n=O(t);if(n.hasClass(this.markerClassName)){return}n.addClass(this.markerClassName).append(r.dpDiv);O.data(t,"datepicker",r);this._setDate(r,this._getDefaultDate(r),true);this._updateDatepicker(r);this._updateAlternate(r);if(r.settings.disabled){this._disableDatepicker(t)}r.dpDiv.css("display","block")},_dialogDatepicker:function e(t,r,n,i,a){var o,s,l,u,c,f=this._dialogInst;if(!f){this.uuid+=1;o="dp"+this.uuid;this._dialogInput=O("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>");this._dialogInput.on("keydown",this._doKeyDown);O("body").append(this._dialogInput);f=this._dialogInst=this._newInst(this._dialogInput,false);f.settings={};O.data(this._dialogInput[0],"datepicker",f)}h(f.settings,i||{});r=r&&r.constructor===Date?this._formatDate(f,r):r;this._dialogInput.val(r);this._pos=a?a.length?a:[a.pageX,a.pageY]:null;if(!this._pos){s=document.documentElement.clientWidth;l=document.documentElement.clientHeight;u=document.documentElement.scrollLeft||document.body.scrollLeft;c=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[s/2-100+u,l/2-150+c]}this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");f.settings.onSelect=n;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if(O.blockUI){O.blockUI(this.dpDiv)}O.data(this._dialogInput[0],"datepicker",f);return this},_destroyDatepicker:function e(t){var r,n=O(t),i=O.data(t,"datepicker");if(!n.hasClass(this.markerClassName)){return}r=t.nodeName.toLowerCase();O.removeData(t,"datepicker");if(r==="input"){i.append.remove();i.trigger.remove();n.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)}else if(r==="div"||r==="span"){n.removeClass(this.markerClassName).empty()}if(s===i){s=null}},_enableDatepicker:function e(t){var r,n,i=O(t),a=O.data(t,"datepicker");if(!i.hasClass(this.markerClassName)){return}r=t.nodeName.toLowerCase();if(r==="input"){t.disabled=false;a.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else if(r==="div"||r==="span"){n=i.children("."+this._inlineClass);n.children().removeClass("ui-state-disabled");n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",false)}this._disabledInputs=O.map(this._disabledInputs,function(e){return e===t?null:e})},_disableDatepicker:function e(t){var r,n,i=O(t),a=O.data(t,"datepicker");if(!i.hasClass(this.markerClassName)){return}r=t.nodeName.toLowerCase();if(r==="input"){t.disabled=true;a.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else if(r==="div"||r==="span"){n=i.children("."+this._inlineClass);n.children().addClass("ui-state-disabled");n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",true)}this._disabledInputs=O.map(this._disabledInputs,function(e){return e===t?null:e});this._disabledInputs[this._disabledInputs.length]=t},_isDisabledDatepicker:function e(t){if(!t){return false}for(var r=0;r<this._disabledInputs.length;r++){if(this._disabledInputs[r]===t){return true}}return false},_getInst:function e(t){try{return O.data(t,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function e(t,r,n){var i,a,o,s,l=this._getInst(t);if(arguments.length===2&&typeof r==="string"){return r==="defaults"?O.extend({},O.datepicker._defaults):l?r==="all"?O.extend({},l.settings):this._get(l,r):null}i=r||{};if(typeof r==="string"){i={};i[r]=n}if(l){if(this._curInst===l){this._hideDatepicker()}a=this._getDateDatepicker(t,true);o=this._getMinMaxDate(l,"min");s=this._getMinMaxDate(l,"max");h(l.settings,i);if(o!==null&&i.dateFormat!==undefined&&i.minDate===undefined){l.settings.minDate=this._formatDate(l,o)}if(s!==null&&i.dateFormat!==undefined&&i.maxDate===undefined){l.settings.maxDate=this._formatDate(l,s)}if("disabled"in i){if(i.disabled){this._disableDatepicker(t)}else{this._enableDatepicker(t)}}this._attachments(O(t),l);this._autoSize(l);this._setDate(l,a);this._updateAlternate(l);this._updateDatepicker(l)}},_changeDatepicker:function e(t,r,n){this._optionDatepicker(t,r,n)},_refreshDatepicker:function e(t){var r=this._getInst(t);if(r){this._updateDatepicker(r)}},_setDateDatepicker:function e(t,r){var n=this._getInst(t);if(n){this._setDate(n,r);this._updateDatepicker(n);this._updateAlternate(n)}},_getDateDatepicker:function e(t,r){var n=this._getInst(t);if(n&&!n.inline){this._setDateFromField(n,r)}return n?this._getDate(n):null},_doKeyDown:function e(t){var r,n,i,a=O.datepicker._getInst(t.target),o=true,s=a.dpDiv.is(".ui-datepicker-rtl");a._keyEvent=true;if(O.datepicker._datepickerShowing){switch(t.keyCode){case 9:O.datepicker._hideDatepicker();o=false;break;case 13:i=O("td."+O.datepicker._dayOverClass+":not(."+O.datepicker._currentClass+")",a.dpDiv);if(i[0]){O.datepicker._selectDay(t.target,a.selectedMonth,a.selectedYear,i[0])}r=O.datepicker._get(a,"onSelect");if(r){n=O.datepicker._formatDate(a);r.apply(a.input?a.input[0]:null,[n,a])}else{O.datepicker._hideDatepicker()}return false;case 27:O.datepicker._hideDatepicker();break;case 33:O.datepicker._adjustDate(t.target,t.ctrlKey?-O.datepicker._get(a,"stepBigMonths"):-O.datepicker._get(a,"stepMonths"),"M");break;case 34:O.datepicker._adjustDate(t.target,t.ctrlKey?+O.datepicker._get(a,"stepBigMonths"):+O.datepicker._get(a,"stepMonths"),"M");break;case 35:if(t.ctrlKey||t.metaKey){O.datepicker._clearDate(t.target)}o=t.ctrlKey||t.metaKey;break;case 36:if(t.ctrlKey||t.metaKey){O.datepicker._gotoToday(t.target)}o=t.ctrlKey||t.metaKey;break;case 37:if(t.ctrlKey||t.metaKey){O.datepicker._adjustDate(t.target,s?+1:-1,"D")}o=t.ctrlKey||t.metaKey;if(t.originalEvent.altKey){O.datepicker._adjustDate(t.target,t.ctrlKey?-O.datepicker._get(a,"stepBigMonths"):-O.datepicker._get(a,"stepMonths"),"M")}break;case 38:if(t.ctrlKey||t.metaKey){O.datepicker._adjustDate(t.target,-7,"D")}o=t.ctrlKey||t.metaKey;break;case 39:if(t.ctrlKey||t.metaKey){O.datepicker._adjustDate(t.target,s?-1:+1,"D")}o=t.ctrlKey||t.metaKey;if(t.originalEvent.altKey){O.datepicker._adjustDate(t.target,t.ctrlKey?+O.datepicker._get(a,"stepBigMonths"):+O.datepicker._get(a,"stepMonths"),"M")}break;case 40:if(t.ctrlKey||t.metaKey){O.datepicker._adjustDate(t.target,+7,"D")}o=t.ctrlKey||t.metaKey;break;default:o=false}}else if(t.keyCode===36&&t.ctrlKey){O.datepicker._showDatepicker(this)}else{o=false}if(o){t.preventDefault();t.stopPropagation()}},_doKeyPress:function e(t){var r,n,i=O.datepicker._getInst(t.target);if(O.datepicker._get(i,"constrainInput")){r=O.datepicker._possibleChars(O.datepicker._get(i,"dateFormat"));n=String.fromCharCode(t.charCode==null?t.keyCode:t.charCode);return t.ctrlKey||t.metaKey||n<" "||!r||r.indexOf(n)>-1}},_doKeyUp:function e(t){var r,n=O.datepicker._getInst(t.target);if(n.input.val()!==n.lastVal){try{r=O.datepicker.parseDate(O.datepicker._get(n,"dateFormat"),n.input?n.input.val():null,O.datepicker._getFormatConfig(n));if(r){O.datepicker._setDateFromField(n);O.datepicker._updateAlternate(n);O.datepicker._updateDatepicker(n)}}catch(e){}}return true},_showDatepicker:function e(t){t=t.target||t;if(t.nodeName.toLowerCase()!=="input"){t=O("input",t.parentNode)[0]}if(O.datepicker._isDisabledDatepicker(t)||O.datepicker._lastInput===t){return}var r,n,i,a,o,s,l;r=O.datepicker._getInst(t);if(O.datepicker._curInst&&O.datepicker._curInst!==r){O.datepicker._curInst.dpDiv.stop(true,true);if(r&&O.datepicker._datepickerShowing){O.datepicker._hideDatepicker(O.datepicker._curInst.input[0])}}n=O.datepicker._get(r,"beforeShow");i=n?n.apply(t,[t,r]):{};if(i===false){return}h(r.settings,i);r.lastVal=null;O.datepicker._lastInput=t;O.datepicker._setDateFromField(r);if(O.datepicker._inDialog){t.value=""}if(!O.datepicker._pos){O.datepicker._pos=O.datepicker._findPos(t);O.datepicker._pos[1]+=t.offsetHeight}a=false;O(t).parents().each(function(){a|=O(this).css("position")==="fixed";return!a});o={left:O.datepicker._pos[0],top:O.datepicker._pos[1]};O.datepicker._pos=null;r.dpDiv.empty();r.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});O.datepicker._updateDatepicker(r);o=O.datepicker._checkOffset(r,o,a);r.dpDiv.css({position:O.datepicker._inDialog&&O.blockUI?"static":a?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"});if(!r.inline){s=O.datepicker._get(r,"showAnim");l=O.datepicker._get(r,"duration");r.dpDiv.css("z-index",u(O(t))+1);O.datepicker._datepickerShowing=true;if(O.effects&&O.effects.effect[s]){r.dpDiv.show(s,O.datepicker._get(r,"showOptions"),l)}else{r.dpDiv[s||"show"](s?l:null)}if(O.datepicker._shouldFocusInput(r)){r.input.trigger("focus")}O.datepicker._curInst=r}},_updateDatepicker:function e(t){this.maxRows=4;s=t;t.dpDiv.empty().append(this._generateHTML(t));this._attachHandlers(t);var r,n=this._getNumberOfMonths(t),i=n[1],a=17,o=t.dpDiv.find("."+this._dayOverClass+" a");if(o.length>0){l.apply(o.get(0))}t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");if(i>1){t.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",a*i+"em")}t.dpDiv[(n[0]!==1||n[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi");t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(t===O.datepicker._curInst&&O.datepicker._datepickerShowing&&O.datepicker._shouldFocusInput(t)){t.input.trigger("focus")}if(t.yearshtml){r=t.yearshtml;setTimeout(function(){if(r===t.yearshtml&&t.yearshtml){t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml)}r=t.yearshtml=null},0)}},_shouldFocusInput:function e(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function e(t,r,n){var i=t.dpDiv.outerWidth(),a=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,s=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:O(document).scrollLeft()),u=document.documentElement.clientHeight+(n?0:O(document).scrollTop());r.left-=this._get(t,"isRTL")?i-o:0;r.left-=n&&r.left===t.input.offset().left?O(document).scrollLeft():0;r.top-=n&&r.top===t.input.offset().top+s?O(document).scrollTop():0;r.left-=Math.min(r.left,r.left+i>l&&l>i?Math.abs(r.left+i-l):0);r.top-=Math.min(r.top,r.top+a>u&&u>a?Math.abs(a+s):0);return r},_findPos:function e(t){var r,n=this._getInst(t),i=this._get(n,"isRTL");while(t&&(t.type==="hidden"||t.nodeType!==1||O.expr.filters.hidden(t))){t=t[i?"previousSibling":"nextSibling"]}r=O(t).offset();return[r.left,r.top]},_hideDatepicker:function e(t){var r,n,i,a,o=this._curInst;if(!o||t&&o!==O.data(t,"datepicker")){return}if(this._datepickerShowing){r=this._get(o,"showAnim");n=this._get(o,"duration");i=function e(){O.datepicker._tidyDialog(o)};if(O.effects&&(O.effects.effect[r]||O.effects[r])){o.dpDiv.hide(r,O.datepicker._get(o,"showOptions"),n,i)}else{o.dpDiv[r==="slideDown"?"slideUp":r==="fadeIn"?"fadeOut":"hide"](r?n:null,i)}if(!r){i()}this._datepickerShowing=false;a=this._get(o,"onClose");if(a){a.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o])}this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(O.blockUI){O.unblockUI();O("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function e(t){t.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function e(t){if(!O.datepicker._curInst){return}var r=O(t.target),n=O.datepicker._getInst(r[0]);if(r[0].id!==O.datepicker._mainDivId&&r.parents("#"+O.datepicker._mainDivId).length===0&&!r.hasClass(O.datepicker.markerClassName)&&!r.closest("."+O.datepicker._triggerClass).length&&O.datepicker._datepickerShowing&&!(O.datepicker._inDialog&&O.blockUI)||r.hasClass(O.datepicker.markerClassName)&&O.datepicker._curInst!==n){O.datepicker._hideDatepicker()}},_adjustDate:function e(t,r,n){var i=O(t),a=this._getInst(i[0]);if(this._isDisabledDatepicker(i[0])){return}this._adjustInstDate(a,r+(n==="M"?this._get(a,"showCurrentAtPos"):0),n);this._updateDatepicker(a)},_gotoToday:function e(t){var r,n=O(t),i=this._getInst(n[0]);if(this._get(i,"gotoCurrent")&&i.currentDay){i.selectedDay=i.currentDay;i.drawMonth=i.selectedMonth=i.currentMonth;i.drawYear=i.selectedYear=i.currentYear}else{r=new Date;i.selectedDay=r.getDate();i.drawMonth=i.selectedMonth=r.getMonth();i.drawYear=i.selectedYear=r.getFullYear()}this._notifyChange(i);this._adjustDate(n)},_selectMonthYear:function e(t,r,n){var i=O(t),a=this._getInst(i[0]);a["selected"+(n==="M"?"Month":"Year")]=a["draw"+(n==="M"?"Month":"Year")]=parseInt(r.options[r.selectedIndex].value,10);this._notifyChange(a);this._adjustDate(i)},_selectDay:function e(t,r,n,i){var a,o=O(t);if(O(i).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])){return}a=this._getInst(o[0]);a.selectedDay=a.currentDay=O("a",i).html();a.selectedMonth=a.currentMonth=r;a.selectedYear=a.currentYear=n;this._selectDate(t,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear))},_clearDate:function e(t){var r=O(t);this._selectDate(r,"")},_selectDate:function e(t,r){var n,i=O(t),a=this._getInst(i[0]);r=r!=null?r:this._formatDate(a);if(a.input){a.input.val(r)}this._updateAlternate(a);n=this._get(a,"onSelect");if(n){n.apply(a.input?a.input[0]:null,[r,a])}else if(a.input){a.input.trigger("change")}if(a.inline){this._updateDatepicker(a)}else{this._hideDatepicker();this._lastInput=a.input[0];if(typeof a.input[0]!=="object"){a.input.trigger("focus")}this._lastInput=null}},_updateAlternate:function e(t){var r,n,i,a=this._get(t,"altField");if(a){r=this._get(t,"altFormat")||this._get(t,"dateFormat");n=this._getDate(t);i=this.formatDate(r,n,this._getFormatConfig(t));O(a).val(i)}},noWeekends:function e(t){var r=t.getDay();return[r>0&&r<6,""]},iso8601Week:function e(t){var r,n=new Date(t.getTime());n.setDate(n.getDate()+4-(n.getDay()||7));r=n.getTime();n.setMonth(0);n.setDate(1);return Math.floor(Math.round((r-n)/864e5)/7)+1},parseDate:function e(n,s,t){if(n==null||s==null){throw"Invalid arguments"}s=typeof s==="object"?s.toString():s+"";if(s===""){return null}var i,r,a,l=0,o=(t?t.shortYearCutoff:null)||this._defaults.shortYearCutoff,u=typeof o!=="string"?o:(new Date).getFullYear()%100+parseInt(o,10),c=(t?t.dayNamesShort:null)||this._defaults.dayNamesShort,f=(t?t.dayNames:null)||this._defaults.dayNames,h=(t?t.monthNamesShort:null)||this._defaults.monthNamesShort,d=(t?t.monthNames:null)||this._defaults.monthNames,p=-1,v=-1,g=-1,m=-1,_=false,y,b=function e(t){var r=i+1<n.length&&n.charAt(i+1)===t;if(r){i++}return r},w=function e(t){var r=b(t),n=t==="@"?14:t==="!"?20:t==="y"&&r?4:t==="o"?3:2,i=t==="y"?n:1,a=new RegExp("^\\d{"+i+","+n+"}"),o=s.substring(l).match(a);if(!o){throw"Missing number at position "+l}l+=o[0].length;return parseInt(o[0],10)},S=function e(t,r,n){var i=-1,a=O.map(b(t)?n:r,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});O.each(a,function(e,t){var r=t[1];if(s.substr(l,r.length).toLowerCase()===r.toLowerCase()){i=t[0];l+=r.length;return false}});if(i!==-1){return i+1}else{throw"Unknown name at position "+l}},C=function e(){if(s.charAt(l)!==n.charAt(i)){throw"Unexpected literal at position "+l}l++};for(i=0;i<n.length;i++){if(_){if(n.charAt(i)==="'"&&!b("'")){_=false}else{C()}}else{switch(n.charAt(i)){case"d":g=w("d");break;case"D":S("D",c,f);break;case"o":m=w("o");break;case"m":v=w("m");break;case"M":v=S("M",h,d);break;case"y":p=w("y");break;case"@":y=new Date(w("@"));p=y.getFullYear();v=y.getMonth()+1;g=y.getDate();break;case"!":y=new Date((w("!")-this._ticksTo1970)/1e4);p=y.getFullYear();v=y.getMonth()+1;g=y.getDate();break;case"'":if(b("'")){C()}else{_=true}break;default:C()}}}if(l<s.length){a=s.substr(l);if(!/^\s+/.test(a)){throw"Extra/unparsed characters found in date: "+a}}if(p===-1){p=(new Date).getFullYear()}else if(p<100){p+=(new Date).getFullYear()-(new Date).getFullYear()%100+(p<=u?0:-100)}if(m>-1){v=1;g=m;do{r=this._getDaysInMonth(p,v-1);if(g<=r){break}v++;g-=r}while(true)}y=this._daylightSavingAdjust(new Date(p,v-1,g));if(y.getFullYear()!==p||y.getMonth()+1!==v||y.getDate()!==g){throw"Invalid date"}return y},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*1e7,formatDate:function e(n,t,r){if(!t){return""}var i,a=(r?r.dayNamesShort:null)||this._defaults.dayNamesShort,o=(r?r.dayNames:null)||this._defaults.dayNames,s=(r?r.monthNamesShort:null)||this._defaults.monthNamesShort,l=(r?r.monthNames:null)||this._defaults.monthNames,u=function e(t){var r=i+1<n.length&&n.charAt(i+1)===t;if(r){i++}return r},c=function e(t,r,n){var i=""+r;if(u(t)){while(i.length<n){i="0"+i}}return i},f=function e(t,r,n,i){return u(t)?i[r]:n[r]},h="",d=false;if(t){for(i=0;i<n.length;i++){if(d){if(n.charAt(i)==="'"&&!u("'")){d=false}else{h+=n.charAt(i)}}else{switch(n.charAt(i)){case"d":h+=c("d",t.getDate(),2);break;case"D":h+=f("D",t.getDay(),a,o);break;case"o":h+=c("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":h+=c("m",t.getMonth()+1,2);break;case"M":h+=f("M",t.getMonth(),s,l);break;case"y":h+=u("y")?t.getFullYear():(t.getFullYear()%100<10?"0":"")+t.getFullYear()%100;break;case"@":h+=t.getTime();break;case"!":h+=t.getTime()*1e4+this._ticksTo1970;break;case"'":if(u("'")){h+="'"}else{d=true}break;default:h+=n.charAt(i)}}}}return h},_possibleChars:function e(n){var i,t="",r=false,a=function e(t){var r=i+1<n.length&&n.charAt(i+1)===t;if(r){i++}return r};for(i=0;i<n.length;i++){if(r){if(n.charAt(i)==="'"&&!a("'")){r=false}else{t+=n.charAt(i)}}else{switch(n.charAt(i)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":if(a("'")){t+="'"}else{r=true}break;default:t+=n.charAt(i)}}}return t},_get:function e(t,r){return t.settings[r]!==undefined?t.settings[r]:this._defaults[r]},_setDateFromField:function e(t,r){if(t.input.val()===t.lastVal){return}var n=this._get(t,"dateFormat"),i=t.lastVal=t.input?t.input.val():null,a=this._getDefaultDate(t),o=a,s=this._getFormatConfig(t);try{o=this.parseDate(n,i,s)||a}catch(e){i=r?"":i}t.selectedDay=o.getDate();t.drawMonth=t.selectedMonth=o.getMonth();t.drawYear=t.selectedYear=o.getFullYear();t.currentDay=i?o.getDate():0;t.currentMonth=i?o.getMonth():0;t.currentYear=i?o.getFullYear():0;this._adjustInstDate(t)},_getDefaultDate:function e(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function e(l,t,r){var n=function e(t){var r=new Date;r.setDate(r.getDate()+t);return r},i=function e(t){try{return O.datepicker.parseDate(O.datepicker._get(l,"dateFormat"),t,O.datepicker._getFormatConfig(l))}catch(e){}var r=(t.toLowerCase().match(/^c/)?O.datepicker._getDate(l):null)||new Date,n=r.getFullYear(),i=r.getMonth(),a=r.getDate(),o=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,s=o.exec(t);while(s){switch(s[2]||"d"){case"d":case"D":a+=parseInt(s[1],10);break;case"w":case"W":a+=parseInt(s[1],10)*7;break;case"m":case"M":i+=parseInt(s[1],10);a=Math.min(a,O.datepicker._getDaysInMonth(n,i));break;case"y":case"Y":n+=parseInt(s[1],10);a=Math.min(a,O.datepicker._getDaysInMonth(n,i));break}s=o.exec(t)}return new Date(n,i,a)},a=t==null||t===""?r:typeof t==="string"?i(t):typeof t==="number"?isNaN(t)?r:n(t):new Date(t.getTime());a=a&&a.toString()==="Invalid Date"?r:a;if(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0)}return this._daylightSavingAdjust(a)},_daylightSavingAdjust:function e(t){if(!t){return null}t.setHours(t.getHours()>12?t.getHours()+2:0);return t},_setDate:function e(t,r,n){var i=!r,a=t.selectedMonth,o=t.selectedYear,s=this._restrictMinMax(t,this._determineDate(t,r,new Date));t.selectedDay=t.currentDay=s.getDate();t.drawMonth=t.selectedMonth=t.currentMonth=s.getMonth();t.drawYear=t.selectedYear=t.currentYear=s.getFullYear();if((a!==t.selectedMonth||o!==t.selectedYear)&&!n){this._notifyChange(t)}this._adjustInstDate(t);if(t.input){t.input.val(i?"":this._formatDate(t))}},_getDate:function e(t){var r=!t.currentYear||t.input&&t.input.val()===""?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return r},_attachHandlers:function e(t){var r=this._get(t,"stepMonths"),n="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var e={prev:function e(){O.datepicker._adjustDate(n,-r,"M")},next:function e(){O.datepicker._adjustDate(n,+r,"M")},hide:function e(){O.datepicker._hideDatepicker()},today:function e(){O.datepicker._gotoToday(n)},selectDay:function e(){O.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return false},selectMonth:function e(){O.datepicker._selectMonthYear(n,this,"M");return false},selectYear:function e(){O.datepicker._selectMonthYear(n,this,"Y");return false}};O(this).on(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function e(t){var r,n,i,a,o,s,l,u,c,f,h,d,p,v,g,m,_,y,b,w,S,C,O,x,T,E,M,A,k,j,I,D,P,R,L,N,$,F,G,U=new Date,H=this._daylightSavingAdjust(new Date(U.getFullYear(),U.getMonth(),U.getDate())),W=this._get(t,"isRTL"),Y=this._get(t,"showButtonPanel"),V=this._get(t,"hideIfNoPrevNext"),q=this._get(t,"navigationAsDateFormat"),z=this._getNumberOfMonths(t),B=this._get(t,"showCurrentAtPos"),K=this._get(t,"stepMonths"),X=z[0]!==1||z[1]!==1,Z=this._daylightSavingAdjust(!t.currentDay?new Date(9999,9,9):new Date(t.currentYear,t.currentMonth,t.currentDay)),Q=this._getMinMaxDate(t,"min"),J=this._getMinMaxDate(t,"max"),ee=t.drawMonth-B,te=t.drawYear;if(ee<0){ee+=12;te--}if(J){r=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-z[0]*z[1]+1,J.getDate()));r=Q&&r<Q?Q:r;while(this._daylightSavingAdjust(new Date(te,ee,1))>r){ee--;if(ee<0){ee=11;te--}}}t.drawMonth=ee;t.drawYear=te;n=this._get(t,"prevText");n=!q?n:this.formatDate(n,this._daylightSavingAdjust(new Date(te,ee-K,1)),this._getFormatConfig(t));i=this._canAdjustMonth(t,-1,te,ee)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click'"+" title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"e":"w")+"'>"+n+"</span></a>":V?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"e":"w")+"'>"+n+"</span></a>";a=this._get(t,"nextText");a=!q?a:this.formatDate(a,this._daylightSavingAdjust(new Date(te,ee+K,1)),this._getFormatConfig(t));o=this._canAdjustMonth(t,+1,te,ee)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click'"+" title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"w":"e")+"'>"+a+"</span></a>":V?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"w":"e")+"'>"+a+"</span></a>";s=this._get(t,"currentText");l=this._get(t,"gotoCurrent")&&t.currentDay?Z:H;s=!q?s:this.formatDate(s,l,this._getFormatConfig(t));u=!t.inline?"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>":"";c=Y?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(W?u:"")+(this._isInRange(t,l)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'"+">"+s+"</button>":"")+(W?"":u)+"</div>":"";f=parseInt(this._get(t,"firstDay"),10);f=isNaN(f)?0:f;h=this._get(t,"showWeek");d=this._get(t,"dayNames");p=this._get(t,"dayNamesMin");v=this._get(t,"monthNames");g=this._get(t,"monthNamesShort");m=this._get(t,"beforeShowDay");_=this._get(t,"showOtherMonths");y=this._get(t,"selectOtherMonths");b=this._getDefaultDate(t);w="";for(C=0;C<z[0];C++){O="";this.maxRows=4;for(x=0;x<z[1];x++){T=this._daylightSavingAdjust(new Date(te,ee,t.selectedDay));E=" ui-corner-all";M="";if(X){M+="<div class='ui-datepicker-group";if(z[1]>1){switch(x){case 0:M+=" ui-datepicker-group-first";E=" ui-corner-"+(W?"right":"left");break;case z[1]-1:M+=" ui-datepicker-group-last";E=" ui-corner-"+(W?"left":"right");break;default:M+=" ui-datepicker-group-middle";E="";break}}M+="'>"}M+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+E+"'>"+(/all|left/.test(E)&&C===0?W?o:i:"")+(/all|right/.test(E)&&C===0?W?i:o:"")+this._generateMonthYearHeader(t,ee,te,Q,J,C>0||x>0,v,g)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>";A=h?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"";for(S=0;S<7;S++){k=(S+f)%7;A+="<th scope='col'"+((S+f+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+d[k]+"'>"+p[k]+"</span></th>"}M+=A+"</tr></thead><tbody>";j=this._getDaysInMonth(te,ee);if(te===t.selectedYear&&ee===t.selectedMonth){t.selectedDay=Math.min(t.selectedDay,j)}I=(this._getFirstDayOfMonth(te,ee)-f+7)%7;D=Math.ceil((I+j)/7);P=X?this.maxRows>D?this.maxRows:D:D;this.maxRows=P;R=this._daylightSavingAdjust(new Date(te,ee,1-I));for(L=0;L<P;L++){M+="<tr>";N=!h?"":"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(R)+"</td>";for(S=0;S<7;S++){$=m?m.apply(t.input?t.input[0]:null,[R]):[true,""];F=R.getMonth()!==ee;G=F&&!y||!$[0]||Q&&R<Q||J&&R>J;N+="<td class='"+((S+f+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(R.getTime()===T.getTime()&&ee===t.selectedMonth&&t._keyEvent||b.getTime()===R.getTime()&&b.getTime()===T.getTime()?" "+this._dayOverClass:"")+(G?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!_?"":" "+$[1]+(R.getTime()===Z.getTime()?" "+this._currentClass:"")+(R.getTime()===H.getTime()?" ui-datepicker-today":""))+"'"+((!F||_)&&$[2]?" title='"+$[2].replace(/'/g,"&#39;")+"'":"")+(G?"":" data-handler='selectDay' data-event='click' data-month='"+R.getMonth()+"' data-year='"+R.getFullYear()+"'")+">"+(F&&!_?"&#xa0;":G?"<span class='ui-state-default'>"+R.getDate()+"</span>":"<a class='ui-state-default"+(R.getTime()===H.getTime()?" ui-state-highlight":"")+(R.getTime()===Z.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+R.getDate()+"</a>")+"</td>";R.setDate(R.getDate()+1);R=this._daylightSavingAdjust(R)}M+=N+"</tr>"}ee++;if(ee>11){ee=0;te++}M+="</tbody></table>"+(X?"</div>"+(z[0]>0&&x===z[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"");O+=M}w+=O}w+=c;t._keyEvent=false;return w},_generateMonthYearHeader:function e(t,r,n,i,a,o,s,l){var u,c,f,h,d,p,v,g,m=this._get(t,"changeMonth"),_=this._get(t,"changeYear"),y=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",w="";if(o||!m){w+="<span class='ui-datepicker-month'>"+s[r]+"</span>"}else{u=i&&i.getFullYear()===n;c=a&&a.getFullYear()===n;w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(f=0;f<12;f++){if((!u||f>=i.getMonth())&&(!c||f<=a.getMonth())){w+="<option value='"+f+"'"+(f===r?" selected='selected'":"")+">"+l[f]+"</option>"}}w+="</select>"}if(!y){b+=w+(o||!(m&&_)?"&#xa0;":"")}if(!t.yearshtml){t.yearshtml="";if(o||!_){b+="<span class='ui-datepicker-year'>"+n+"</span>"}else{h=this._get(t,"yearRange").split(":");d=(new Date).getFullYear();p=function e(t){var r=t.match(/c[+\-].*/)?n+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10);return isNaN(r)?d:r};v=p(h[0]);g=Math.max(v,p(h[1]||""));v=i?Math.max(v,i.getFullYear()):v;g=a?Math.min(g,a.getFullYear()):g;t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";for(;v<=g;v++){t.yearshtml+="<option value='"+v+"'"+(v===n?" selected='selected'":"")+">"+v+"</option>"}t.yearshtml+="</select>";b+=t.yearshtml;t.yearshtml=null}}b+=this._get(t,"yearSuffix");if(y){b+=(o||!(m&&_)?"&#xa0;":"")+w}b+="</div>";return b},_adjustInstDate:function e(t,r,n){var i=t.selectedYear+(n==="Y"?r:0),a=t.selectedMonth+(n==="M"?r:0),o=Math.min(t.selectedDay,this._getDaysInMonth(i,a))+(n==="D"?r:0),s=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(i,a,o)));t.selectedDay=s.getDate();t.drawMonth=t.selectedMonth=s.getMonth();t.drawYear=t.selectedYear=s.getFullYear();if(n==="M"||n==="Y"){this._notifyChange(t)}},_restrictMinMax:function e(t,r){var n=this._getMinMaxDate(t,"min"),i=this._getMinMaxDate(t,"max"),a=n&&r<n?n:r;return i&&a>i?i:a},_notifyChange:function e(t){var r=this._get(t,"onChangeMonthYear");if(r){r.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])}},_getNumberOfMonths:function e(t){var r=this._get(t,"numberOfMonths");return r==null?[1,1]:typeof r==="number"?[1,r]:r},_getMinMaxDate:function e(t,r){return this._determineDate(t,this._get(t,r+"Date"),null)},_getDaysInMonth:function e(t,r){return 32-this._daylightSavingAdjust(new Date(t,r,32)).getDate()},_getFirstDayOfMonth:function e(t,r){return new Date(t,r,1).getDay()},_canAdjustMonth:function e(t,r,n,i){var a=this._getNumberOfMonths(t),o=this._daylightSavingAdjust(new Date(n,i+(r<0?r:a[0]*a[1]),1));if(r<0){o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth()))}return this._isInRange(t,o)},_isInRange:function e(t,r){var n,i,a=this._getMinMaxDate(t,"min"),o=this._getMinMaxDate(t,"max"),s=null,l=null,u=this._get(t,"yearRange");if(u){n=u.split(":");i=(new Date).getFullYear();s=parseInt(n[0],10);l=parseInt(n[1],10);if(n[0].match(/[+\-].*/)){s+=i}if(n[1].match(/[+\-].*/)){l+=i}}return(!a||r.getTime()>=a.getTime())&&(!o||r.getTime()<=o.getTime())&&(!s||r.getFullYear()>=s)&&(!l||r.getFullYear()<=l)},_getFormatConfig:function e(t){var r=this._get(t,"shortYearCutoff");r=typeof r!=="string"?r:(new Date).getFullYear()%100+parseInt(r,10);return{shortYearCutoff:r,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function e(t,r,n,i){if(!r){t.currentDay=t.selectedDay;t.currentMonth=t.selectedMonth;t.currentYear=t.selectedYear}var a=r?typeof r==="object"?r:this._daylightSavingAdjust(new Date(i,n,r)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),a,this._getFormatConfig(t))}});function i(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.on("mouseout",t,function(){O(this).removeClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){O(this).removeClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!==-1){O(this).removeClass("ui-datepicker-next-hover")}}).on("mouseover",t,l)}function l(){if(!O.datepicker._isDisabledDatepicker(s.inline?s.dpDiv.parent()[0]:s.input[0])){O(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");O(this).addClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){O(this).addClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!==-1){O(this).addClass("ui-datepicker-next-hover")}}}function h(e,t){O.extend(e,t);for(var r in t){if(t[r]==null){e[r]=t[r]}}return e}O.fn.datepicker=function(e){if(!this.length){return this}if(!O.datepicker.initialized){O(document).on("mousedown",O.datepicker._checkExternalClick);O.datepicker.initialized=true}if(O("#"+O.datepicker._mainDivId).length===0){O("body").append(O.datepicker.dpDiv)}var t=Array.prototype.slice.call(arguments,1);if(typeof e==="string"&&(e==="isDisabled"||e==="getDate"||e==="widget")){return O.datepicker["_"+e+"Datepicker"].apply(O.datepicker,[this[0]].concat(t))}if(e==="option"&&arguments.length===2&&typeof arguments[1]==="string"){return O.datepicker["_"+e+"Datepicker"].apply(O.datepicker,[this[0]].concat(t))}return this.each(function(){typeof e==="string"?O.datepicker["_"+e+"Datepicker"].apply(O.datepicker,[this].concat(t)):O.datepicker._attachDatepicker(this,e)})};O.datepicker=new e;O.datepicker.initialized=false;O.datepicker.uuid=(new Date).getTime();O.datepicker.version="1.12.1";return O.datepicker})},function(t,r,n){var i,a,o;(function(e){if(true){!(a=[n(27),n(381),n(546),n(547),n(117),n(247)],i=e,o=typeof i==="function"?i.apply(r,a):i,o!==undefined&&(t.exports=o))}else{}})(function(c){c.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function e(){var t=c(this).attr("title")||"";return c("<a>").text(t).html()},hide:true,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:true,track:false,close:null,open:null},_addDescribedBy:function e(t,r){var n=(t.attr("aria-describedby")||"").split(/\s+/);n.push(r);t.data("ui-tooltip-id",r).attr("aria-describedby",c.trim(n.join(" ")))},_removeDescribedBy:function e(t){var r=t.data("ui-tooltip-id"),n=(t.attr("aria-describedby")||"").split(/\s+/),i=c.inArray(r,n);if(i!==-1){n.splice(i,1)}t.removeData("ui-tooltip-id");n=c.trim(n.join(" "));if(n){t.attr("aria-describedby",n)}else{t.removeAttr("aria-describedby")}},_create:function e(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};this.liveRegion=c("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body);this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible");this.disabledTitles=c([])},_setOption:function e(t,r){var n=this;this._super(t,r);if(t==="content"){c.each(this.tooltips,function(e,t){n._updateContent(t.element)})}},_setOptionDisabled:function e(t){this[t?"_disable":"_enable"]()},_disable:function e(){var n=this;c.each(this.tooltips,function(e,t){var r=c.Event("blur");r.target=r.currentTarget=t.element[0];n.close(r,true)});this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var e=c(this);if(e.is("[title]")){return e.data("ui-tooltip-title",e.attr("title")).removeAttr("title")}}))},_enable:function e(){this.disabledTitles.each(function(){var e=c(this);if(e.data("ui-tooltip-title")){e.attr("title",e.data("ui-tooltip-title"))}});this.disabledTitles=c([])},open:function e(t){var r=this,n=c(t?t.target:this.element).closest(this.options.items);if(!n.length||n.data("ui-tooltip-id")){return}if(n.attr("title")){n.data("ui-tooltip-title",n.attr("title"))}n.data("ui-tooltip-open",true);if(t&&t.type==="mouseover"){n.parents().each(function(){var e=c(this),t;if(e.data("ui-tooltip-open")){t=c.Event("blur");t.target=t.currentTarget=this;r.close(t,true)}if(e.attr("title")){e.uniqueId();r.parents[this.id]={element:this,title:e.attr("title")};e.attr("title","")}})}this._registerCloseHandlers(t,n);this._updateContent(n,t)},_updateContent:function e(t,r){var n,i=this.options.content,a=this,o=r?r.type:null;if(typeof i==="string"||i.nodeType||i.jquery){return this._open(r,t,i)}n=i.call(t[0],function(e){a._delay(function(){if(!t.data("ui-tooltip-open")){return}if(r){r.type=o}this._open(r,t,e)})});if(n){this._open(r,t,n)}},_open:function e(t,r,n){var i,a,o,s,l=c.extend({},this.options.position);if(!n){return}i=this._find(r);if(i){i.tooltip.find(".ui-tooltip-content").html(n);return}if(r.is("[title]")){if(t&&t.type==="mouseover"){r.attr("title","")}else{r.removeAttr("title")}}i=this._tooltip(r);a=i.tooltip;this._addDescribedBy(r,a.attr("id"));a.find(".ui-tooltip-content").html(n);this.liveRegion.children().hide();s=c("<div>").html(a.find(".ui-tooltip-content").html());s.removeAttr("name").find("[name]").removeAttr("name");s.removeAttr("id").find("[id]").removeAttr("id");s.appendTo(this.liveRegion);function u(e){l.of=e;if(a.is(":hidden")){return}a.position(l)}if(this.options.track&&t&&/^mouse/.test(t.type)){this._on(this.document,{mousemove:u});u(t)}else{a.position(c.extend({of:r},this.options.position))}a.hide();this._show(a,this.options.show);if(this.options.track&&this.options.show&&this.options.show.delay){o=this.delayedShow=setInterval(function(){if(a.is(":visible")){u(l.of);clearInterval(o)}},c.fx.interval)}this._trigger("open",t,{tooltip:a})},_registerCloseHandlers:function e(t,n){var r={keyup:function e(t){if(t.keyCode===c.ui.keyCode.ESCAPE){var r=c.Event(t);r.currentTarget=n[0];this.close(r,true)}}};if(n[0]!==this.element[0]){r.remove=function(){this._removeTooltip(this._find(n).tooltip)}}if(!t||t.type==="mouseover"){r.mouseleave="close"}if(!t||t.type==="focusin"){r.focusout="close"}this._on(true,n,r)},close:function e(t){var r,n=this,i=c(t?t.currentTarget:this.element),a=this._find(i);if(!a){i.removeData("ui-tooltip-open");return}r=a.tooltip;if(a.closing){return}clearInterval(this.delayedShow);if(i.data("ui-tooltip-title")&&!i.attr("title")){i.attr("title",i.data("ui-tooltip-title"))}this._removeDescribedBy(i);a.hiding=true;r.stop(true);this._hide(r,this.options.hide,function(){n._removeTooltip(c(this))});i.removeData("ui-tooltip-open");this._off(i,"mouseleave focusout keyup");if(i[0]!==this.element[0]){this._off(i,"remove")}this._off(this.document,"mousemove");if(t&&t.type==="mouseleave"){c.each(this.parents,function(e,t){c(t.element).attr("title",t.title);delete n.parents[e]})}a.closing=true;this._trigger("close",t,{tooltip:r});if(!a.hiding){a.closing=false}},_tooltip:function e(t){var r=c("<div>").attr("role","tooltip"),n=c("<div>").appendTo(r),i=r.uniqueId().attr("id");this._addClass(n,"ui-tooltip-content");this._addClass(r,"ui-tooltip","ui-widget ui-widget-content");r.appendTo(this._appendTo(t));return this.tooltips[i]={element:t,tooltip:r}},_find:function e(t){var r=t.data("ui-tooltip-id");return r?this.tooltips[r]:null},_removeTooltip:function e(t){t.remove();delete this.tooltips[t.attr("id")]},_appendTo:function e(t){var r=t.closest(".ui-front, dialog");if(!r.length){r=this.document[0].body}return r},_destroy:function e(){var i=this;c.each(this.tooltips,function(e,t){var r=c.Event("blur"),n=t.element;r.target=r.currentTarget=n[0];i.close(r,true);c("#"+e).remove();if(n.data("ui-tooltip-title")){if(!n.attr("title")){n.attr("title",n.data("ui-tooltip-title"))}n.removeData("ui-tooltip-title")}});this.liveRegion.remove()}});if(c.uiBackCompat!==false){c.widget("ui.tooltip",c.ui.tooltip,{options:{tooltipClass:null},_tooltip:function e(){var t=this._superApply(arguments);if(this.options.tooltipClass){t.tooltip.addClass(this.options.tooltipClass)}return t}})}return c.ui.tooltip})},function(e,r,t){(function(e,t){true?t(r):undefined})(this,function(e){"use strict";var a={value:function e(){}};function t(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r)throw new Error("illegal type: "+n);r[n]=[]}return new i(r)}function i(e){this._=e}function l(e,n){return e.trim().split(/^|\s+/).map(function(e){var t="",r=e.indexOf(".");if(r>=0)t=e.slice(r+1),e=e.slice(0,r);if(e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})}i.prototype=t.prototype={constructor:i,on:function e(t,r){var n=this._,i=l(t+"",n),a,o=-1,s=i.length;if(arguments.length<2){while(++o<s){if((a=(t=i[o]).type)&&(a=u(n[a],t.name)))return a}return}if(r!=null&&typeof r!=="function")throw new Error("invalid callback: "+r);while(++o<s){if(a=(t=i[o]).type)n[a]=c(n[a],t.name,r);else if(r==null)for(a in n){n[a]=c(n[a],t.name,null)}}return this},copy:function e(){var e={},t=this._;for(var r in t){e[r]=t[r].slice()}return new i(e)},call:function e(t,r){if((a=arguments.length-2)>0)for(var n=new Array(a),i=0,a,o;i<a;++i){n[i]=arguments[i+2]}if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,a=o.length;i<a;++i){o[i].value.apply(r,n)}},apply:function e(t,r,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],a=0,o=i.length;a<o;++a){i[a].value.apply(r,n)}}};function u(e,t){for(var r=0,n=e.length,i;r<n;++r){if((i=e[r]).name===t){return i.value}}}function c(e,t,r){for(var n=0,i=e.length;n<i;++n){if(e[n].name===t){e[n]=a,e=e.slice(0,n).concat(e.slice(n+1));break}}if(r!=null)e.push({name:t,value:r});return e}e.dispatch=t;Object.defineProperty(e,"__esModule",{value:true})})},function(e,t,r){"use strict";var o=r(232);var s=r(25);var f=r(243);var l=r(8);var h=r(3);var i=r(15);var g=r(102);var m=r(123);var u=[0,0,0];var n=function e(t){this.minZoom=t.minZoom!==undefined?t.minZoom:0;this.resolutions_=t.resolutions;Object(s["a"])(Object(l["g"])(this.resolutions_,function(e,t){return t-e},true),17);var r;if(!t.origins){for(var n=0,i=this.resolutions_.length-1;n<i;++n){if(!r){r=this.resolutions_[n]/this.resolutions_[n+1]}else{if(this.resolutions_[n]/this.resolutions_[n+1]!==r){r=undefined;break}}}}this.zoomFactor_=r;this.maxZoom=this.resolutions_.length-1;this.origin_=t.origin!==undefined?t.origin:null;this.origins_=null;if(t.origins!==undefined){this.origins_=t.origins;Object(s["a"])(this.origins_.length==this.resolutions_.length,20)}var a=t.extent;if(a!==undefined&&!this.origin_&&!this.origins_){this.origin_=Object(h["C"])(a)}Object(s["a"])(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18);this.tileSizes_=null;if(t.tileSizes!==undefined){this.tileSizes_=t.tileSizes;Object(s["a"])(this.tileSizes_.length==this.resolutions_.length,19)}this.tileSize_=t.tileSize!==undefined?t.tileSize:!this.tileSizes_?o["b"]:null;Object(s["a"])(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22);this.extent_=a!==undefined?a:null;this.fullTileRanges_=null;this.tmpSize_=[0,0];if(t.sizes!==undefined){this.fullTileRanges_=t.sizes.map(function(e,t){var r=new f["b"](Math.min(0,e[0]),Math.max(e[0]-1,-1),Math.min(0,e[1]),Math.max(e[1]-1,-1));return r},this)}else if(a){this.calculateTileRanges_(a)}};n.prototype.forEachTileCoord=function e(t,r,n){var i=this.getTileRangeForExtentAndZ(t,r);for(var a=i.minX,o=i.maxX;a<=o;++a){for(var s=i.minY,l=i.maxY;s<=l;++s){n([r,a,s])}}};n.prototype.forEachTileCoordParentTileRange=function e(t,r,n,i,a){var o,s,l;var u=null;var c=t[0]-1;if(this.zoomFactor_===2){s=t[1];l=t[2]}else{u=this.getTileCoordExtent(t,a)}while(c>=this.minZoom){if(this.zoomFactor_===2){s=Math.floor(s/2);l=Math.floor(l/2);o=Object(f["a"])(s,s,l,l,i)}else{o=this.getTileRangeForExtentAndZ(u,c,i)}if(r.call(n,c,o)){return true}--c}return false};n.prototype.getExtent=function e(){return this.extent_};n.prototype.getMaxZoom=function e(){return this.maxZoom};n.prototype.getMinZoom=function e(){return this.minZoom};n.prototype.getOrigin=function e(t){if(this.origin_){return this.origin_}else{return this.origins_[t]}};n.prototype.getResolution=function e(t){return this.resolutions_[t]};n.prototype.getResolutions=function e(){return this.resolutions_};n.prototype.getTileCoordChildTileRange=function e(t,r,n){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){var i=t[1]*2;var a=t[2]*2;return Object(f["a"])(i,i+1,a,a+1,r)}var o=this.getTileCoordExtent(t,n);return this.getTileRangeForExtentAndZ(o,t[0]+1,r)}return null};n.prototype.getTileRangeExtent=function e(t,r,n){var i=this.getOrigin(t);var a=this.getResolution(t);var o=Object(g["d"])(this.getTileSize(t),this.tmpSize_);var s=i[0]+r.minX*o[0]*a;var l=i[0]+(r.maxX+1)*o[0]*a;var u=i[1]+r.minY*o[1]*a;var c=i[1]+(r.maxY+1)*o[1]*a;return Object(h["k"])(s,u,l,c,n)};n.prototype.getTileRangeForExtentAndZ=function e(t,r,n){var i=u;this.getTileCoordForXYAndZ_(t[0],t[1],r,false,i);var a=i[1];var o=i[2];this.getTileCoordForXYAndZ_(t[2],t[3],r,true,i);return Object(f["a"])(a,i[1],o,i[2],n)};n.prototype.getTileCoordCenter=function e(t){var r=this.getOrigin(t[0]);var n=this.getResolution(t[0]);var i=Object(g["d"])(this.getTileSize(t[0]),this.tmpSize_);return[r[0]+(t[1]+.5)*i[0]*n,r[1]+(t[2]+.5)*i[1]*n]};n.prototype.getTileCoordExtent=function e(t,r){var n=this.getOrigin(t[0]);var i=this.getResolution(t[0]);var a=Object(g["d"])(this.getTileSize(t[0]),this.tmpSize_);var o=n[0]+t[1]*a[0]*i;var s=n[1]+t[2]*a[1]*i;var l=o+a[0]*i;var u=s+a[1]*i;return Object(h["k"])(o,s,l,u,r)};n.prototype.getTileCoordForCoordAndResolution=function e(t,r,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],r,false,n)};n.prototype.getTileCoordForXYAndResolution_=function e(t,r,n,i,a){var o=this.getZForResolution(n);var s=n/this.getResolution(o);var l=this.getOrigin(o);var u=Object(g["d"])(this.getTileSize(o),this.tmpSize_);var c=i?.5:0;var f=i?0:.5;var h=Math.floor((t-l[0])/n+c);var d=Math.floor((r-l[1])/n+f);var p=s*h/u[0];var v=s*d/u[1];if(i){p=Math.ceil(p)-1;v=Math.ceil(v)-1}else{p=Math.floor(p);v=Math.floor(v)}return Object(m["a"])(o,p,v,a)};n.prototype.getTileCoordForXYAndZ_=function e(t,r,n,i,a){var o=this.getOrigin(n);var s=this.getResolution(n);var l=Object(g["d"])(this.getTileSize(n),this.tmpSize_);var u=i?.5:0;var c=i?0:.5;var f=Math.floor((t-o[0])/s+u);var h=Math.floor((r-o[1])/s+c);var d=f/l[0];var p=h/l[1];if(i){d=Math.ceil(d)-1;p=Math.ceil(p)-1}else{d=Math.floor(d);p=Math.floor(p)}return Object(m["a"])(n,d,p,a)};n.prototype.getTileCoordForCoordAndZ=function e(t,r,n){return this.getTileCoordForXYAndZ_(t[0],t[1],r,false,n)};n.prototype.getTileCoordResolution=function e(t){return this.resolutions_[t[0]]};n.prototype.getTileSize=function e(t){if(this.tileSize_){return this.tileSize_}else{return this.tileSizes_[t]}};n.prototype.getFullTileRange=function e(t){if(!this.fullTileRanges_){return null}else{return this.fullTileRanges_[t]}};n.prototype.getZForResolution=function e(t,r){var n=Object(l["h"])(this.resolutions_,t,r||0);return Object(i["a"])(n,this.minZoom,this.maxZoom)};n.prototype.calculateTileRanges_=function e(t){var r=this.resolutions_.length;var n=new Array(r);for(var i=this.minZoom;i<r;++i){n[i]=this.getTileRangeForExtentAndZ(t,i)}this.fullTileRanges_=n};t["a"]=n},function(e,t,r){"use strict";r.d(t,"a",function(){return f});var o=r(5);var n=r(302);var h=r(26);var i=r(71);var a=r(10);var s=r(102);var l=r(251);var d=r(123);var u=r(221);var c=function(t){function e(e){t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX});this.opaque_=e.opaque!==undefined?e.opaque:false;this.tilePixelRatio_=e.tilePixelRatio!==undefined?e.tilePixelRatio:1;this.tileGrid=e.tileGrid!==undefined?e.tileGrid:null;this.tileCache=new n["a"](e.cacheSize);this.tmpSize=[0,0];this.key_=e.key||"";this.tileOptions={transition:e.transition}}if(t)e.__proto__=t;e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;e.prototype.canExpireCache=function e(){return this.tileCache.canExpireCache()};e.prototype.expireCache=function e(t,r){var n=this.getTileCacheForProjection(t);if(n){n.expireCache(r)}};e.prototype.forEachLoadedTile=function e(t,r,n,i){var a=this.getTileCacheForProjection(t);if(!a){return false}var o=true;var s,l,u;for(var c=n.minX;c<=n.maxX;++c){for(var f=n.minY;f<=n.maxY;++f){l=Object(d["d"])(r,c,f);u=false;if(a.containsKey(l)){s=a.get(l);u=s.getState()===h["a"].LOADED;if(u){u=i(s)!==false}}if(!u){o=false}}}return o};e.prototype.getGutterForProjection=function e(t){return 0};e.prototype.getKey=function e(){return this.key_};e.prototype.setKey=function e(t){if(this.key_!==t){this.key_=t;this.changed()}};e.prototype.getOpaque=function e(t){return this.opaque_};e.prototype.getResolutions=function e(){return this.tileGrid.getResolutions()};e.prototype.getTile=function e(t,r,n,i,a){return Object(o["b"])()};e.prototype.getTileGrid=function e(){return this.tileGrid};e.prototype.getTileGridForProjection=function e(t){if(!this.tileGrid){return Object(u["c"])(t)}else{return this.tileGrid}};e.prototype.getTileCacheForProjection=function e(t){var r=this.getProjection();if(r&&!Object(a["e"])(r,t)){return null}else{return this.tileCache}};e.prototype.getTilePixelRatio=function e(t){return this.tilePixelRatio_};e.prototype.getTilePixelSize=function e(t,r,n){var i=this.getTileGridForProjection(n);var a=this.getTilePixelRatio(r);var o=Object(s["d"])(i.getTileSize(t),this.tmpSize);if(a==1){return o}else{return Object(s["c"])(o,a,this.tmpSize)}};e.prototype.getTileCoordForTileUrlFunction=function e(t,r){var n=r!==undefined?r:this.getProjection();var i=this.getTileGridForProjection(n);if(this.getWrapX()&&n.isGlobal()){t=Object(u["d"])(i,t,n)}return Object(d["f"])(t,i)?t:null};e.prototype.refresh=function e(){this.tileCache.clear();this.changed()};e.prototype.useTile=function e(t,r,n,i){};return e}(l["a"]);var f=function(r){function e(e,t){r.call(this,e);this.tile=t}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;return e}(i["a"]);t["b"]=c},function(e,t,r){"use strict";var a=r(3);var i=r(33);var o=r(7);var n=r(82);var s=r(254);var l=r(142);var u=r(133);var c=r(135);var f=r(156);var h=function(r){function n(e,t){r.call(this);this.maxDelta_=-1;this.maxDeltaRevision_=-1;if(t!==undefined&&!Array.isArray(e[0])){this.setFlatCoordinates(t,e)}else{this.setCoordinates(e,t)}}if(r)n.__proto__=r;n.prototype=Object.create(r&&r.prototype);n.prototype.constructor=n;n.prototype.clone=function e(){return new n(this.flatCoordinates.slice(),this.layout)};n.prototype.closestPointXY=function e(t,r,n,i){if(i<Object(a["e"])(this.getExtent(),t,r)){return i}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(Object(l["e"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return Object(l["d"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,true,t,r,n,i)};n.prototype.getArea=function e(){return Object(s["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};n.prototype.getCoordinates=function e(){return Object(c["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};n.prototype.getSimplifiedGeometryInternal=function e(t){var r=[];r.length=Object(f["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r,0);return new n(r,i["a"].XY)};n.prototype.getType=function e(){return o["a"].LINEAR_RING};n.prototype.intersectsExtent=function e(t){return false};n.prototype.setCoordinates=function e(t,r){this.setLayout(r,t,1);if(!this.flatCoordinates){this.flatCoordinates=[]}this.flatCoordinates.length=Object(u["b"])(this.flatCoordinates,0,t,this.stride);this.changed()};return n}(n["a"]);t["a"]=h},function(e,t,r){"use strict";r.d(t,"a",function(){return s});var i=r(77);var n=function e(){this.cache_={};this.cacheSize_=0;this.maxCacheSize_=32};n.prototype.clear=function e(){this.cache_={};this.cacheSize_=0};n.prototype.expire=function e(){if(this.cacheSize_>this.maxCacheSize_){var t=0;for(var r in this.cache_){var n=this.cache_[r];if((t++&3)===0&&!n.hasListener()){delete this.cache_[r];--this.cacheSize_}}}};n.prototype.get=function e(t,r,n){var i=o(t,r,n);return i in this.cache_?this.cache_[i]:null};n.prototype.set=function e(t,r,n,i){var a=o(t,r,n);this.cache_[a]=i;++this.cacheSize_};n.prototype.setSize=function e(t){this.maxCacheSize_=t;this.expire()};function o(e,t,r){var n=r?Object(i["b"])(r):"null";return t+":"+e+":"+n}var a=n;var s=new n},function(e,t,r){"use strict";r.d(t,"b",function(){return s});r.d(t,"a",function(){return l});var n=r(122);var i=r(153);var a=r(244);var o=r(68);function s(e){var t,r;for(r in e){t=e[r];if(Object(n["a"])(t)){this[r]=t}else{this["_"+r]=t}}this._config=e;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function l(e,t){var r=Object(i["a"])({},e),n;for(n in t){if(Object(o["a"])(t,n)){if(Object(a["a"])(e[n])&&Object(a["a"])(t[n])){r[n]={};Object(i["a"])(r[n],e[n]);Object(i["a"])(r[n],t[n])}else if(t[n]!=null){r[n]=t[n]}else{delete r[n]}}}for(n in e){if(Object(o["a"])(e,n)&&!Object(o["a"])(t,n)&&Object(a["a"])(e[n])){r[n]=Object(i["a"])({},r[n])}}return r}},function(e,t,r){"use strict";r.d(t,"a",function(){return n});function n(e){if(e!=null){this.set(e)}}},function(e,t,r){"use strict";r.d(t,"b",function(){return n});r.d(t,"a",function(){return i});r.d(t,"c",function(){return a});var n="%d";var i=/\d{1,2}/;function a(e){return this._ordinal.replace("%d",e)}},function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"c",function(){return i});r.d(t,"b",function(){return o});var a=r(122);var n={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function i(e,t,r,n){var i=this._relativeTime[r];return Object(a["a"])(i)?i(e,t,r,n):i.replace(/%d/i,e)}function o(e,t){var r=this._relativeTime[e>0?"future":"past"];return Object(a["a"])(r)?r(t):r.replace(/%s/i,t)}},function(e,t,r){"use strict";var n=r(51);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function a(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}function o(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}var s=function(r){o(e,r);function e(e){var t;t=r.call(this,e)||this;t.gmfLayer_=e.gmfLayer;return t}a(e,[{key:"gmfLayer",get:function e(){return this.gmfLayer_}}]);return e}(n["a"]);t["a"]=s},function(e,t,r){"use strict";var o=r(1);var s=r(103);var n=r(5);var l=r(31);var i=r(112);var a=function e(t,r,n){if(n===void 0){n={}}s["a"].call(this,n);this.continueMsg;if(n.continueMsg!==undefined){this.continueMsg=n.continueMsg}else{this.continueMsg=document.createElement("span");this.continueMsg.textContent=r.getString("Click to continue drawing the polygon.");var i=document.createElement("br");i.textContent=r.getString("Double-click or click starting point to finish.");this.continueMsg.appendChild(i)}this.format=t};n["d"](a,s["a"]);a.prototype.createDrawInteraction=function(e,t){return new i["a"]({type:"Polygon",source:t,style:e})};a.prototype.handleMeasure=function(e){var t=o["a"].assertInstanceof(this.sketchFeature.getGeometry(),l["a"]);var r=this.getMap().getView().getProjection();o["a"].assert(r);var n=s["a"].getFormattedArea(t,r,this.precision,this.format);var i=t.getCoordinates()[0].length;var a=null;if(i>3){a=t.getInteriorPoint().getCoordinates()}e(n,a)};t["a"]=a},function(e,t,r){"use strict";var n=r(27);var i=r.n(n);var a=r(200);var m=r.n(a);var _=r(60);function y(){y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};return y.apply(this,arguments)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function b(e,t,r){if(t)o(e.prototype,t);if(r)o(e,r);return e}var s=function(f){var r="tooltip";var t="4.1.3";var i="bs.tooltip";var a="."+i;var e=f.fn[r];var o="bs-tooltip";var s=new RegExp("(^|\\s)"+o+"\\S+","g");var l={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)"};var u={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"};var c={animation:true,template:'<div class="tooltip" role="tooltip">'+'<div class="arrow"></div>'+'<div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:false,selector:false,placement:"top",offset:0,container:false,fallbackPlacement:"flip",boundary:"scrollParent"};var h={SHOW:"show",OUT:"out"};var d={HIDE:"hide"+a,HIDDEN:"hidden"+a,SHOW:"show"+a,SHOWN:"shown"+a,INSERTED:"inserted"+a,CLICK:"click"+a,FOCUSIN:"focusin"+a,FOCUSOUT:"focusout"+a,MOUSEENTER:"mouseenter"+a,MOUSELEAVE:"mouseleave"+a};var p={FADE:"fade",SHOW:"show"};var v={TOOLTIP:".tooltip",TOOLTIP_INNER:".tooltip-inner",ARROW:".arrow"};var g={HOVER:"hover",FOCUS:"focus",CLICK:"click",MANUAL:"manual"};var n=function(){function n(e,t){if(typeof m.a==="undefined"){throw new TypeError("Bootstrap tooltips require Popper.js (https://popper.js.org)")}this._isEnabled=true;this._timeout=0;this._hoverState="";this._activeTrigger={};this._popper=null;this.element=e;this.config=this._getConfig(t);this.tip=null;this._setListeners()}var e=n.prototype;e.enable=function e(){this._isEnabled=true};e.disable=function e(){this._isEnabled=false};e.toggleEnabled=function e(){this._isEnabled=!this._isEnabled};e.toggle=function e(t){if(!this._isEnabled){return}if(t){var r=this.constructor.DATA_KEY;var n=f(t.currentTarget).data(r);if(!n){n=new this.constructor(t.currentTarget,this._getDelegateConfig());f(t.currentTarget).data(r,n)}n._activeTrigger.click=!n._activeTrigger.click;if(n._isWithActiveTrigger()){n._enter(null,n)}else{n._leave(null,n)}}else{if(f(this.getTipElement()).hasClass(p.SHOW)){this._leave(null,this);return}this._enter(null,this)}};e.dispose=function e(){clearTimeout(this._timeout);f.removeData(this.element,this.constructor.DATA_KEY);f(this.element).off(this.constructor.EVENT_KEY);f(this.element).closest(".modal").off("hide.bs.modal");if(this.tip){f(this.tip).remove()}this._isEnabled=null;this._timeout=null;this._hoverState=null;this._activeTrigger=null;if(this._popper!==null){this._popper.destroy()}this._popper=null;this.element=null;this.config=null;this.tip=null};e.show=function e(){var r=this;if(f(this.element).css("display")==="none"){throw new Error("Please use show on visible elements")}var t=f.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){f(this.element).trigger(t);var n=f.contains(this.element.ownerDocument.documentElement,this.element);if(t.isDefaultPrevented()||!n){return}var i=this.getTipElement();var a=_["a"].getUID(this.constructor.NAME);i.setAttribute("id",a);this.element.setAttribute("aria-describedby",a);this.setContent();if(this.config.animation){f(i).addClass(p.FADE)}var o=typeof this.config.placement==="function"?this.config.placement.call(this,i,this.element):this.config.placement;var s=this._getAttachment(o);this.addAttachmentClass(s);var l=this.config.container===false?document.body:f(document).find(this.config.container);f(i).data(this.constructor.DATA_KEY,this);if(!f.contains(this.element.ownerDocument.documentElement,this.tip)){f(i).appendTo(l)}f(this.element).trigger(this.constructor.Event.INSERTED);this._popper=new m.a(this.element,i,{placement:s,modifiers:{offset:{offset:this.config.offset},flip:{behavior:this.config.fallbackPlacement},arrow:{element:v.ARROW},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function e(t){if(t.originalPlacement!==t.placement){r._handlePopperPlacementChange(t)}},onUpdate:function e(t){r._handlePopperPlacementChange(t)}});f(i).addClass(p.SHOW);if("ontouchstart"in document.documentElement){f(document.body).children().on("mouseover",null,f.noop)}var u=function e(){if(r.config.animation){r._fixTransition()}var t=r._hoverState;r._hoverState=null;f(r.element).trigger(r.constructor.Event.SHOWN);if(t===h.OUT){r._leave(null,r)}};if(f(this.tip).hasClass(p.FADE)){var c=_["a"].getTransitionDurationFromElement(this.tip);f(this.tip).one(_["a"].TRANSITION_END,u).emulateTransitionEnd(c)}else{u()}}};e.hide=function e(t){var r=this;var n=this.getTipElement();var i=f.Event(this.constructor.Event.HIDE);var a=function e(){if(r._hoverState!==h.SHOW&&n.parentNode){n.parentNode.removeChild(n)}r._cleanTipClass();r.element.removeAttribute("aria-describedby");f(r.element).trigger(r.constructor.Event.HIDDEN);if(r._popper!==null){r._popper.destroy()}if(t){t()}};f(this.element).trigger(i);if(i.isDefaultPrevented()){return}f(n).removeClass(p.SHOW);if("ontouchstart"in document.documentElement){f(document.body).children().off("mouseover",null,f.noop)}this._activeTrigger[g.CLICK]=false;this._activeTrigger[g.FOCUS]=false;this._activeTrigger[g.HOVER]=false;if(f(this.tip).hasClass(p.FADE)){var o=_["a"].getTransitionDurationFromElement(n);f(n).one(_["a"].TRANSITION_END,a).emulateTransitionEnd(o)}else{a()}this._hoverState=""};e.update=function e(){if(this._popper!==null){this._popper.scheduleUpdate()}};e.isWithContent=function e(){return Boolean(this.getTitle())};e.addAttachmentClass=function e(t){f(this.getTipElement()).addClass(o+"-"+t)};e.getTipElement=function e(){this.tip=this.tip||f(this.config.template)[0];return this.tip};e.setContent=function e(){var t=this.getTipElement();this.setElementContent(f(t.querySelectorAll(v.TOOLTIP_INNER)),this.getTitle());f(t).removeClass(p.FADE+" "+p.SHOW)};e.setElementContent=function e(t,r){var n=this.config.html;if(typeof r==="object"&&(r.nodeType||r.jquery)){if(n){if(!f(r).parent().is(t)){t.empty().append(r)}}else{t.text(f(r).text())}}else{t[n?"html":"text"](r)}};e.getTitle=function e(){var t=this.element.getAttribute("data-original-title");if(!t){t=typeof this.config.title==="function"?this.config.title.call(this.element):this.config.title}return t};e._getAttachment=function e(t){return u[t.toUpperCase()]};e._setListeners=function e(){var n=this;var t=this.config.trigger.split(" ");t.forEach(function(e){if(e==="click"){f(n.element).on(n.constructor.Event.CLICK,n.config.selector,function(e){return n.toggle(e)})}else if(e!==g.MANUAL){var t=e===g.HOVER?n.constructor.Event.MOUSEENTER:n.constructor.Event.FOCUSIN;var r=e===g.HOVER?n.constructor.Event.MOUSELEAVE:n.constructor.Event.FOCUSOUT;f(n.element).on(t,n.config.selector,function(e){return n._enter(e)}).on(r,n.config.selector,function(e){return n._leave(e)})}f(n.element).closest(".modal").on("hide.bs.modal",function(){return n.hide()})});if(this.config.selector){this.config=y({},this.config,{trigger:"manual",selector:""})}else{this._fixTitle()}};e._fixTitle=function e(){var t=typeof this.element.getAttribute("data-original-title");if(this.element.getAttribute("title")||t!=="string"){this.element.setAttribute("data-original-title",this.element.getAttribute("title")||"");this.element.setAttribute("title","")}};e._enter=function e(t,r){var n=this.constructor.DATA_KEY;r=r||f(t.currentTarget).data(n);if(!r){r=new this.constructor(t.currentTarget,this._getDelegateConfig());f(t.currentTarget).data(n,r)}if(t){r._activeTrigger[t.type==="focusin"?g.FOCUS:g.HOVER]=true}if(f(r.getTipElement()).hasClass(p.SHOW)||r._hoverState===h.SHOW){r._hoverState=h.SHOW;return}clearTimeout(r._timeout);r._hoverState=h.SHOW;if(!r.config.delay||!r.config.delay.show){r.show();return}r._timeout=setTimeout(function(){if(r._hoverState===h.SHOW){r.show()}},r.config.delay.show)};e._leave=function e(t,r){var n=this.constructor.DATA_KEY;r=r||f(t.currentTarget).data(n);if(!r){r=new this.constructor(t.currentTarget,this._getDelegateConfig());f(t.currentTarget).data(n,r)}if(t){r._activeTrigger[t.type==="focusout"?g.FOCUS:g.HOVER]=false}if(r._isWithActiveTrigger()){return}clearTimeout(r._timeout);r._hoverState=h.OUT;if(!r.config.delay||!r.config.delay.hide){r.hide();return}r._timeout=setTimeout(function(){if(r._hoverState===h.OUT){r.hide()}},r.config.delay.hide)};e._isWithActiveTrigger=function e(){for(var t in this._activeTrigger){if(this._activeTrigger[t]){return true}}return false};e._getConfig=function e(t){t=y({},this.constructor.Default,f(this.element).data(),typeof t==="object"&&t?t:{});if(typeof t.delay==="number"){t.delay={show:t.delay,hide:t.delay}}if(typeof t.title==="number"){t.title=t.title.toString()}if(typeof t.content==="number"){t.content=t.content.toString()}_["a"].typeCheckConfig(r,t,this.constructor.DefaultType);return t};e._getDelegateConfig=function e(){var t={};if(this.config){for(var r in this.config){if(this.constructor.Default[r]!==this.config[r]){t[r]=this.config[r]}}}return t};e._cleanTipClass=function e(){var t=f(this.getTipElement());var r=t.attr("class").match(s);if(r!==null&&r.length){t.removeClass(r.join(""))}};e._handlePopperPlacementChange=function e(t){var r=t.instance;this.tip=r.popper;this._cleanTipClass();this.addAttachmentClass(this._getAttachment(t.placement))};e._fixTransition=function e(){var t=this.getTipElement();var r=this.config.animation;if(t.getAttribute("x-placement")!==null){return}f(t).removeClass(p.FADE);this.config.animation=false;this.hide();this.show();this.config.animation=r};n._jQueryInterface=function e(r){return this.each(function(){var e=f(this).data(i);var t=typeof r==="object"&&r;if(!e&&/dispose|hide/.test(r)){return}if(!e){e=new n(this,t);f(this).data(i,e)}if(typeof r==="string"){if(typeof e[r]==="undefined"){throw new TypeError('No method named "'+r+'"')}e[r]()}})};b(n,null,[{key:"VERSION",get:function e(){return t}},{key:"Default",get:function e(){return c}},{key:"NAME",get:function e(){return r}},{key:"DATA_KEY",get:function e(){return i}},{key:"Event",get:function e(){return d}},{key:"EVENT_KEY",get:function e(){return a}},{key:"DefaultType",get:function e(){return l}}]);return n}();f.fn[r]=n._jQueryInterface;f.fn[r].Constructor=n;f.fn[r].noConflict=function(){f.fn[r]=e;return n._jQueryInterface};return n}(i.a,m.a);t["a"]=s},function(e,r,t){(function(e,t){true?t(r):undefined})(this,function(e){"use strict";var r=6;var c="AJSAJS";var f="AFAFAF";var h=65;var d=73;var p=79;var v=86;var g=90;var t={forward:n,inverse:i,toPoint:a};function n(e,t){t=t||5;return s(o({lat:e[1],lon:e[0]}),t)}function i(e){var t=T(m(e.toUpperCase()));if(t.lat&&t.lon){return[t.lon,t.lat,t.lon,t.lat]}return[t.left,t.bottom,t.right,t.top]}function a(e){var t=T(m(e.toUpperCase()));if(t.lat&&t.lon){return[t.lon,t.lat]}return[(t.left+t.right)/2,(t.top+t.bottom)/2]}function y(e){return e*(Math.PI/180)}function x(e){return 180*(e/Math.PI)}function o(e){var t=e.lat;var r=e.lon;var n=6378137;var i=.00669438;var a=.9996;var o;var s;var l,u,c,f,h;var d=y(t);var p=y(r);var v;var g;g=Math.floor((r+180)/6)+1;if(r===180){g=60}if(t>=56&&t<64&&r>=3&&r<12){g=32}if(t>=72&&t<84){if(r>=0&&r<9){g=31}else if(r>=9&&r<21){g=33}else if(r>=21&&r<33){g=35}else if(r>=33&&r<42){g=37}}o=(g-1)*6-180+3;v=y(o);s=i/(1-i);l=n/Math.sqrt(1-i*Math.sin(d)*Math.sin(d));u=Math.tan(d)*Math.tan(d);c=s*Math.cos(d)*Math.cos(d);f=Math.cos(d)*(p-v);h=n*((1-i/4-3*i*i/64-5*i*i*i/256)*d-(3*i/8+3*i*i/32+45*i*i*i/1024)*Math.sin(2*d)+(15*i*i/256+45*i*i*i/1024)*Math.sin(4*d)-35*i*i*i/3072*Math.sin(6*d));var m=a*l*(f+(1-u+c)*f*f*f/6+(5-18*u+u*u+72*c-58*s)*f*f*f*f*f/120)+5e5;var _=a*(h+l*Math.tan(d)*(f*f/2+(5-u+9*c+4*c*c)*f*f*f*f/24+(61-58*u+u*u+600*c-330*s)*f*f*f*f*f*f/720));if(t<0){_+=1e7}return{northing:Math.round(_),easting:Math.round(m),zoneNumber:g,zoneLetter:b(t)}}function T(e){var t=e.northing;var r=e.easting;var n=e.zoneLetter;var i=e.zoneNumber;if(i<0||i>60){return null}var a=.9996;var o=6378137;var s=.00669438;var l;var u=(1-Math.sqrt(1-s))/(1+Math.sqrt(1-s));var c,f,h,d,p,v;var g;var m,_;var y=r-5e5;var b=t;if(n<"N"){b-=1e7}g=(i-1)*6-180+3;l=s/(1-s);v=b/a;m=v/(o*(1-s/4-3*s*s/64-5*s*s*s/256));_=m+(3*u/2-27*u*u*u/32)*Math.sin(2*m)+(21*u*u/16-55*u*u*u*u/32)*Math.sin(4*m)+151*u*u*u/96*Math.sin(6*m);c=o/Math.sqrt(1-s*Math.sin(_)*Math.sin(_));f=Math.tan(_)*Math.tan(_);h=l*Math.cos(_)*Math.cos(_);d=o*(1-s)/Math.pow(1-s*Math.sin(_)*Math.sin(_),1.5);p=y/(c*a);var w=_-c*Math.tan(_)/d*(p*p/2-(5+3*f+10*h-4*h*h-9*l)*p*p*p*p/24+(61+90*f+298*h+45*f*f-252*l-3*h*h)*p*p*p*p*p*p/720);w=x(w);var S=(p-(1+2*f+h)*p*p*p/6+(5-2*h+28*f-3*h*h+8*l+24*f*f)*p*p*p*p*p/120)/Math.cos(_);S=g+x(S);var C;if(e.accuracy){var O=T({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});C={top:O.lat,right:O.lon,bottom:w,left:S}}else{C={lat:w,lon:S}}return C}function b(e){var t="Z";if(84>=e&&e>=72){t="X"}else if(72>e&&e>=64){t="W"}else if(64>e&&e>=56){t="V"}else if(56>e&&e>=48){t="U"}else if(48>e&&e>=40){t="T"}else if(40>e&&e>=32){t="S"}else if(32>e&&e>=24){t="R"}else if(24>e&&e>=16){t="Q"}else if(16>e&&e>=8){t="P"}else if(8>e&&e>=0){t="N"}else if(0>e&&e>=-8){t="M"}else if(-8>e&&e>=-16){t="L"}else if(-16>e&&e>=-24){t="K"}else if(-24>e&&e>=-32){t="J"}else if(-32>e&&e>=-40){t="H"}else if(-40>e&&e>=-48){t="G"}else if(-48>e&&e>=-56){t="F"}else if(-56>e&&e>=-64){t="E"}else if(-64>e&&e>=-72){t="D"}else if(-72>e&&e>=-80){t="C"}return t}function s(e,t){var r="00000"+e.easting,n="00000"+e.northing;return e.zoneNumber+e.zoneLetter+l(e.easting,e.northing,e.zoneNumber)+r.substr(r.length-5,t)+n.substr(n.length-5,t)}function l(e,t,r){var n=w(r);var i=Math.floor(e/1e5);var a=Math.floor(t/1e5)%20;return u(i,a,n)}function w(e){var t=e%r;if(t===0){t=r}return t}function u(e,t,r){var n=r-1;var i=c.charCodeAt(n);var a=f.charCodeAt(n);var o=i+e-1;var s=a+t;var l=false;if(o>g){o=o-g+h-1;l=true}if(o===d||i<d&&o>d||(o>d||i<d)&&l){o++}if(o===p||i<p&&o>p||(o>p||i<p)&&l){o++;if(o===d){o++}}if(o>g){o=o-g+h-1}if(s>v){s=s-v+h-1;l=true}else{l=false}if(s===d||a<d&&s>d||(s>d||a<d)&&l){s++}if(s===p||a<p&&s>p||(s>p||a<p)&&l){s++;if(s===d){s++}}if(s>v){s=s-v+h-1}var u=String.fromCharCode(o)+String.fromCharCode(s);return u}function m(e){if(e&&e.length===0){throw"MGRSPoint coverting from nothing"}var t=e.length;var r=null;var n="";var i;var a=0;while(!/[A-Z]/.test(i=e.charAt(a))){if(a>=2){throw"MGRSPoint bad conversion from: "+e}n+=i;a++}var o=parseInt(n,10);if(a===0||a+3>t){throw"MGRSPoint bad conversion from: "+e}var s=e.charAt(a++);if(s<="A"||s==="B"||s==="Y"||s>="Z"||s==="I"||s==="O"){throw"MGRSPoint zone letter "+s+" not handled: "+e}r=e.substring(a,a+=2);var l=w(o);var u=S(r.charAt(0),l);var c=C(r.charAt(1),l);while(c<O(s)){c+=2e6}var f=t-a;if(f%2!==0){throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+e}var h=f/2;var d=0;var p=0;var v,g,m,_,y;if(h>0){v=1e5/Math.pow(10,h);g=e.substring(a,a+h);d=parseFloat(g)*v;m=e.substring(a+h);p=parseFloat(m)*v}_=d+u;y=p+c;return{easting:_,northing:y,zoneLetter:s,zoneNumber:o,accuracy:v}}function S(e,t){var r=c.charCodeAt(t-1);var n=1e5;var i=false;while(r!==e.charCodeAt(0)){r++;if(r===d){r++}if(r===p){r++}if(r>g){if(i){throw"Bad character: "+e}r=h;i=true}n+=1e5}return n}function C(e,t){if(e>"V"){throw"MGRSPoint given invalid Northing "+e}var r=f.charCodeAt(t-1);var n=0;var i=false;while(r!==e.charCodeAt(0)){r++;if(r===d){r++}if(r===p){r++}if(r>v){if(i){throw"Bad character: "+e}r=h;i=true}n+=1e5}return n}function O(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0){return t}else{throw"Invalid zone letter: "+e}}e["default"]=t;e.forward=n;e.inverse=i;e.toPoint=a;Object.defineProperty(e,"__esModule",{value:true})})},function(e,t,r){"use strict";var m=r(20);var n=r(280);var d=r(245);var s=Object(n["dispatch"])("start","end","interrupt");var l=[];var u=0;var p=1;var v=2;var g=3;var _=4;var y=5;var b=6;var w=function(e,t,r,n,i,a){var o=e.__transition;if(!o)e.__transition={};else if(r in o)return;h(e,r,{name:t,index:n,group:i,on:s,tween:l,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:u})};function c(e,t){var r=S(e,t);if(r.state>u)throw new Error("too late; already scheduled");return r}function f(e,t){var r=S(e,t);if(r.state>v)throw new Error("too late; already started");return r}function S(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function h(a,o,s){var l=a.__transition,u;l[o]=s;s.timer=Object(d["timer"])(e,0,s.time);function e(e){s.state=p;s.timer.restart(c,s.delay,s.time);if(s.delay<=e)c(e-s.delay)}function c(e){var t,r,n,i;if(s.state!==p)return h();for(t in l){i=l[t];if(i.name!==s.name)continue;if(i.state===g)return Object(d["timeout"])(c);if(i.state===_){i.state=b;i.timer.stop();i.on.call("interrupt",a,a.__data__,i.index,i.group);delete l[t]}else if(+t<o){i.state=b;i.timer.stop();delete l[t]}}Object(d["timeout"])(function(){if(s.state===g){s.state=_;s.timer.restart(f,s.delay,s.time);f(e)}});s.state=v;s.on.call("start",a,a.__data__,s.index,s.group);if(s.state!==v)return;s.state=g;u=new Array(n=s.tween.length);for(t=0,r=-1;t<n;++t){if(i=s.tween[t].value.call(a,a.__data__,s.index,s.group)){u[++r]=i}}u.length=r+1}function f(e){var t=e<s.duration?s.ease.call(null,e/s.duration):(s.timer.restart(h),s.state=y,1),r=-1,n=u.length;while(++r<n){u[r].call(null,t)}if(s.state===y){s.on.call("end",a,a.__data__,s.index,s.group);h()}}function h(){s.state=b;s.timer.stop();delete l[o];for(var e in l){return}delete a.__transition}}var i=function(e,t){var r=e.__transition,n,i,a=true,o;if(!r)return;t=t==null?null:t+"";for(o in r){if((n=r[o]).name!==t){a=false;continue}i=n.state>v&&n.state<y;n.state=b;n.timer.stop();if(i)n.on.call("interrupt",e,e.__data__,n.index,n.group);delete r[o]}if(a)delete e.__transition};var a=function(e){return this.each(function(){i(this,e)})};var o=r(124);function C(i,a){var o,s;return function(){var e=f(this,i),t=e.tween;if(t!==o){s=o=t;for(var r=0,n=s.length;r<n;++r){if(s[r].name===a){s=s.slice();s.splice(r,1);break}}}e.tween=s}}function O(a,o,s){var l,u;if(typeof s!=="function")throw new Error;return function(){var e=f(this,a),t=e.tween;if(t!==l){u=(l=t).slice();for(var r={name:o,value:s},n=0,i=u.length;n<i;++n){if(u[n].name===o){u[n]=r;break}}if(n===i)u.push(r)}e.tween=u}}var x=function(e,t){var r=this._id;e+="";if(arguments.length<2){var n=S(this.node(),r).tween;for(var i=0,a=n.length,o;i<a;++i){if((o=n[i]).name===e){return o.value}}return null}return this.each((t==null?C:O)(r,e,t))};function T(e,t,r){var n=e._id;e.each(function(){var e=f(this,n);(e.value||(e.value={}))[t]=r.apply(this,arguments)});return function(e){return S(e,n).value[t]}}var E=r(342);var M=function(e,t){var r;return(typeof t==="number"?o["interpolateNumber"]:t instanceof E["color"]?o["interpolateRgb"]:(r=Object(E["color"])(t))?(t=r,o["interpolateRgb"]):o["interpolateString"])(e,t)};function A(e){return function(){this.removeAttribute(e)}}function k(e){return function(){this.removeAttributeNS(e.space,e.local)}}function j(t,r,n){var i,a;return function(){var e=this.getAttribute(t);return e===n?null:e===i?a:a=r(i=e,n)}}function I(t,r,n){var i,a;return function(){var e=this.getAttributeNS(t.space,t.local);return e===n?null:e===i?a:a=r(i=e,n)}}function D(r,n,i){var a,o,s;return function(){var e,t=i(this);if(t==null)return void this.removeAttribute(r);e=this.getAttribute(r);return e===t?null:e===a&&t===o?s:s=n(a=e,o=t)}}function P(r,n,i){var a,o,s;return function(){var e,t=i(this);if(t==null)return void this.removeAttributeNS(r.space,r.local);e=this.getAttributeNS(r.space,r.local);return e===t?null:e===a&&t===o?s:s=n(a=e,o=t)}}var R=function(e,t){var r=Object(m["namespace"])(e),n=r==="transform"?o["interpolateTransformSvg"]:M;return this.attrTween(e,typeof t==="function"?(r.local?P:D)(r,n,T(this,"attr."+e,t)):t==null?(r.local?k:A)(r):(r.local?I:j)(r,n,t+""))};function L(n,e){function t(){var t=this,r=e.apply(t,arguments);return r&&function(e){t.setAttributeNS(n.space,n.local,r(e))}}t._value=e;return t}function N(n,e){function t(){var t=this,r=e.apply(t,arguments);return r&&function(e){t.setAttribute(n,r(e))}}t._value=e;return t}var $=function(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!=="function")throw new Error;var n=Object(m["namespace"])(e);return this.tween(r,(n.local?L:N)(n,t))};function F(e,t){return function(){c(this,e).delay=+t.apply(this,arguments)}}function G(e,t){return t=+t,function(){c(this,e).delay=t}}var U=function(e){var t=this._id;return arguments.length?this.each((typeof e==="function"?F:G)(t,e)):S(this.node(),t).delay};function H(e,t){return function(){f(this,e).duration=+t.apply(this,arguments)}}function W(e,t){return t=+t,function(){f(this,e).duration=t}}var Y=function(e){var t=this._id;return arguments.length?this.each((typeof e==="function"?H:W)(t,e)):S(this.node(),t).duration};function V(e,t){if(typeof t!=="function")throw new Error;return function(){f(this,e).ease=t}}var q=function(e){var t=this._id;return arguments.length?this.each(V(t,e)):S(this.node(),t).ease};var z=function(e){if(typeof e!=="function")e=Object(m["matcher"])(e);for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i){for(var a=t[i],o=a.length,s=n[i]=[],l,u=0;u<o;++u){if((l=a[u])&&e.call(l,l.__data__,u,a)){s.push(l)}}}return new ge(n,this._parents,this._name,this._id)};var B=function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,i=r.length,a=Math.min(n,i),o=new Array(n),s=0;s<a;++s){for(var l=t[s],u=r[s],c=l.length,f=o[s]=new Array(c),h,d=0;d<c;++d){if(h=l[d]||u[d]){f[d]=h}}}for(;s<n;++s){o[s]=t[s]}return new ge(o,this._parents,this._name,this._id)};function K(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");if(t>=0)e=e.slice(0,t);return!e||e==="start"})}function X(r,n,i){var a,o,s=K(n)?c:f;return function(){var e=s(this,r),t=e.on;if(t!==a)(o=(a=t).copy()).on(n,i);e.on=o}}var Z=function(e,t){var r=this._id;return arguments.length<2?S(this.node(),r).on.on(e):this.each(X(r,e,t))};function Q(r){return function(){var e=this.parentNode;for(var t in this.__transition){if(+t!==r)return}if(e)e.removeChild(this)}}var J=function(){return this.on("end.remove",Q(this._id))};var ee=function(e){var t=this._name,r=this._id;if(typeof e!=="function")e=Object(m["selector"])(e);for(var n=this._groups,i=n.length,a=new Array(i),o=0;o<i;++o){for(var s=n[o],l=s.length,u=a[o]=new Array(l),c,f,h=0;h<l;++h){if((c=s[h])&&(f=e.call(c,c.__data__,h,s))){if("__data__"in c)f.__data__=c.__data__;u[h]=f;w(u[h],t,r,h,u,S(c,r))}}}return new ge(a,this._parents,t,r)};var te=function(e){var t=this._name,r=this._id;if(typeof e!=="function")e=Object(m["selectorAll"])(e);for(var n=this._groups,i=n.length,a=[],o=[],s=0;s<i;++s){for(var l=n[s],u=l.length,c,f=0;f<u;++f){if(c=l[f]){for(var h=e.call(c,c.__data__,f,l),d,p=S(c,r),v=0,g=h.length;v<g;++v){if(d=h[v]){w(d,t,r,v,h,p)}}a.push(h);o.push(c)}}}return new ge(a,o,t,r)};var re=m["selection"].prototype.constructor;var ne=function(){return new re(this._groups,this._parents)};function ie(r,n){var i,a,o;return function(){var e=Object(m["style"])(this,r),t=(this.style.removeProperty(r),Object(m["style"])(this,r));return e===t?null:e===i&&t===a?o:o=n(i=e,a=t)}}function ae(e){return function(){this.style.removeProperty(e)}}function oe(t,r,n){var i,a;return function(){var e=Object(m["style"])(this,t);return e===n?null:e===i?a:a=r(i=e,n)}}function se(r,n,i){var a,o,s;return function(){var e=Object(m["style"])(this,r),t=i(this);if(t==null)t=(this.style.removeProperty(r),Object(m["style"])(this,r));return e===t?null:e===a&&t===o?s:s=n(a=e,o=t)}}var le=function(e,t,r){var n=(e+="")==="transform"?o["interpolateTransformCss"]:M;return t==null?this.styleTween(e,ie(e,n)).on("end.style."+e,ae(e)):this.styleTween(e,typeof t==="function"?se(e,n,T(this,"style."+e,t)):oe(e,n,t+""),r)};function ue(n,e,i){function t(){var t=this,r=e.apply(t,arguments);return r&&function(e){t.style.setProperty(n,r(e),i)}}t._value=e;return t}var ce=function(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!=="function")throw new Error;return this.tween(n,ue(e,t,r==null?"":r))};function fe(e){return function(){this.textContent=e}}function he(t){return function(){var e=t(this);this.textContent=e==null?"":e}}var de=function(e){return this.tween("text",typeof e==="function"?he(T(this,"text",e)):fe(e==null?"":e+""))};var pe=function(){var e=this._name,t=this._id,r=_e();for(var n=this._groups,i=n.length,a=0;a<i;++a){for(var o=n[a],s=o.length,l,u=0;u<s;++u){if(l=o[u]){var c=S(l,t);w(l,e,r,u,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}}}return new ge(n,this._parents,e,r)};var ve=0;function ge(e,t,r,n){this._groups=e;this._parents=t;this._name=r;this._id=n}function me(e){return Object(m["selection"])().transition(e)}function _e(){return++ve}var ye=m["selection"].prototype;ge.prototype=me.prototype={constructor:ge,select:ee,selectAll:te,filter:z,merge:B,selection:ne,transition:pe,call:ye.call,nodes:ye.nodes,node:ye.node,size:ye.size,empty:ye.empty,each:ye.each,on:Z,attr:R,attrTween:$,style:le,styleTween:ce,text:de,remove:J,tween:x,delay:U,duration:Y,ease:q};var be=r(403);var we={time:null,delay:0,duration:250,ease:be["easeCubicInOut"]};function Se(e,t){var r;while(!(r=e.__transition)||!(r=r[t])){if(!(e=e.parentNode)){return we.time=Object(d["now"])(),we}}return r}var Ce=function(e){var t,r;if(e instanceof ge){t=e._id,e=e._name}else{t=_e(),(r=we).time=Object(d["now"])(),e=e==null?null:e+""}for(var n=this._groups,i=n.length,a=0;a<i;++a){for(var o=n[a],s=o.length,l,u=0;u<s;++u){if(l=o[u]){w(l,e,t,u,o,r||Se(l,t))}}}return new ge(n,this._parents,e,t)};m["selection"].prototype.interrupt=a;m["selection"].prototype.transition=Ce;var Oe=[null];var xe=function(e,t){var r=e.__transition,n,i;if(r){t=t==null?null:t+"";for(i in r){if((n=r[i]).state>p&&n.name===t){return new ge([[e]],Oe,t,+i)}}}return null};r.d(t,"a",function(){return i})},function(e,t,r){"use strict";var f=r(5);var h=r(38);var d=r(25);var p=r(77);var n=r(2);var i=r(12);var v=r(131);var a=r(53);var o=r(113);var s=r(284);var l=function(o){function e(e,t,r,n,i,a){o.call(this);this.hitDetectionImage_=null;this.image_=!e?new Image:e;if(n!==null){this.image_.crossOrigin=n}this.canvas_=a?document.createElement("canvas"):null;this.color_=a;this.imageListenerKeys_=null;this.imageState_=i;this.size_=r;this.src_=t;this.tainted_}if(o)e.__proto__=o;e.prototype=Object.create(o&&o.prototype);e.prototype.constructor=e;e.prototype.isTainted_=function e(){if(this.tainted_===undefined&&this.imageState_===h["a"].LOADED){this.tainted_=false;var t=Object(a["a"])(1,1);try{t.drawImage(this.image_,0,0);t.getImageData(0,0,1,1)}catch(e){this.tainted_=true}}return this.tainted_===true};e.prototype.dispatchChangeEvent_=function e(){this.dispatchEvent(i["a"].CHANGE)};e.prototype.handleImageError_=function e(){this.imageState_=h["a"].ERROR;this.unlistenImage_();this.dispatchChangeEvent_()};e.prototype.handleImageLoad_=function e(){this.imageState_=h["a"].LOADED;if(this.size_){this.image_.width=this.size_[0];this.image_.height=this.size_[1]}this.size_=[this.image_.width,this.image_.height];this.unlistenImage_();this.replaceColor_();this.dispatchChangeEvent_()};e.prototype.getImage=function e(t){return this.canvas_?this.canvas_:this.image_};e.prototype.getImageState=function e(){return this.imageState_};e.prototype.getHitDetectionImage=function e(t){if(!this.hitDetectionImage_){if(this.isTainted_()){var r=this.size_[0];var n=this.size_[1];var i=Object(a["a"])(r,n);i.fillRect(0,0,r,n);this.hitDetectionImage_=i.canvas}else{this.hitDetectionImage_=this.image_}}return this.hitDetectionImage_};e.prototype.getSize=function e(){return this.size_};e.prototype.getSrc=function e(){return this.src_};e.prototype.load=function e(){if(this.imageState_==h["a"].IDLE){this.imageState_=h["a"].LOADING;this.imageListenerKeys_=[Object(n["b"])(this.image_,i["a"].ERROR,this.handleImageError_,this),Object(n["b"])(this.image_,i["a"].LOAD,this.handleImageLoad_,this)];try{this.image_.src=this.src_}catch(e){this.handleImageError_()}}};e.prototype.replaceColor_=function e(){if(!this.color_||this.isTainted_()){return}this.canvas_.width=this.image_.width;this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");t.drawImage(this.image_,0,0);var r=t.getImageData(0,0,this.image_.width,this.image_.height);var n=r.data;var i=this.color_[0]/255;var a=this.color_[1]/255;var o=this.color_[2]/255;for(var s=0,l=n.length;s<l;s+=4){n[s]*=i;n[s+1]*=a;n[s+2]*=o}t.putImageData(r,0,0)};e.prototype.unlistenImage_=function e(){this.imageListenerKeys_.forEach(n["e"]);this.imageListenerKeys_=null};return e}(o["a"]);function g(e,t,r,n,i,a){var o=s["a"].get(t,n,a);if(!o){o=new l(e,t,r,n,i,a);s["a"].set(t,n,a,o)}return o}var u=l;var m=r(104);var c=r(309);var _=function(c){function t(e){var t=e||{};var r=t.opacity!==undefined?t.opacity:1;var n=t.rotation!==undefined?t.rotation:0;var i=t.scale!==undefined?t.scale:1;var a=t.rotateWithView!==undefined?t.rotateWithView:false;c.call(this,{opacity:r,rotation:n,scale:i,rotateWithView:a});this.anchor_=t.anchor!==undefined?t.anchor:[.5,.5];this.normalizedAnchor_=null;this.anchorOrigin_=t.anchorOrigin!==undefined?t.anchorOrigin:m["a"].TOP_LEFT;this.anchorXUnits_=t.anchorXUnits!==undefined?t.anchorXUnits:v["a"].FRACTION;this.anchorYUnits_=t.anchorYUnits!==undefined?t.anchorYUnits:v["a"].FRACTION;this.crossOrigin_=t.crossOrigin!==undefined?t.crossOrigin:null;var o=t.img!==undefined?t.img:null;var s=t.imgSize!==undefined?t.imgSize:null;var l=t.src;Object(d["a"])(!(l!==undefined&&o),4);Object(d["a"])(!o||o&&s,5);if((l===undefined||l.length===0)&&o){l=o.src||Object(f["c"])(o)}Object(d["a"])(l!==undefined&&l.length>0,6);var u=t.src!==undefined?h["a"].IDLE:h["a"].LOADED;this.color_=t.color!==undefined?Object(p["a"])(t.color):null;this.iconImage_=g(o,l,s,this.crossOrigin_,u,this.color_);this.offset_=t.offset!==undefined?t.offset:[0,0];this.offsetOrigin_=t.offsetOrigin!==undefined?t.offsetOrigin:m["a"].TOP_LEFT;this.origin_=null;this.size_=t.size!==undefined?t.size:null}if(c)t.__proto__=c;t.prototype=Object.create(c&&c.prototype);t.prototype.constructor=t;t.prototype.clone=function e(){return new t({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||undefined,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:this.size_!==null?this.size_.slice():undefined,opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})};t.prototype.getAnchor=function e(){if(this.normalizedAnchor_){return this.normalizedAnchor_}var t=this.anchor_;var r=this.getSize();if(this.anchorXUnits_==v["a"].FRACTION||this.anchorYUnits_==v["a"].FRACTION){if(!r){return null}t=this.anchor_.slice();if(this.anchorXUnits_==v["a"].FRACTION){t[0]*=r[0]}if(this.anchorYUnits_==v["a"].FRACTION){t[1]*=r[1]}}if(this.anchorOrigin_!=m["a"].TOP_LEFT){if(!r){return null}if(t===this.anchor_){t=this.anchor_.slice()}if(this.anchorOrigin_==m["a"].TOP_RIGHT||this.anchorOrigin_==m["a"].BOTTOM_RIGHT){t[0]=-t[0]+r[0]}if(this.anchorOrigin_==m["a"].BOTTOM_LEFT||this.anchorOrigin_==m["a"].BOTTOM_RIGHT){t[1]=-t[1]+r[1]}}this.normalizedAnchor_=t;return this.normalizedAnchor_};t.prototype.setAnchor=function e(t){this.anchor_=t;this.normalizedAnchor_=null};t.prototype.getColor=function e(){return this.color_};t.prototype.getImage=function e(t){return this.iconImage_.getImage(t)};t.prototype.getImageSize=function e(){return this.iconImage_.getSize()};t.prototype.getHitDetectionImageSize=function e(){return this.getImageSize()};t.prototype.getImageState=function e(){return this.iconImage_.getImageState()};t.prototype.getHitDetectionImage=function e(t){return this.iconImage_.getHitDetectionImage(t)};t.prototype.getOrigin=function e(){if(this.origin_){return this.origin_}var t=this.offset_;if(this.offsetOrigin_!=m["a"].TOP_LEFT){var r=this.getSize();var n=this.iconImage_.getSize();if(!r||!n){return null}t=t.slice();if(this.offsetOrigin_==m["a"].TOP_RIGHT||this.offsetOrigin_==m["a"].BOTTOM_RIGHT){t[0]=n[0]-r[0]-t[0]}if(this.offsetOrigin_==m["a"].BOTTOM_LEFT||this.offsetOrigin_==m["a"].BOTTOM_RIGHT){t[1]=n[1]-r[1]-t[1]}}this.origin_=t;return this.origin_};t.prototype.getSrc=function e(){return this.iconImage_.getSrc()};t.prototype.getSize=function e(){return!this.size_?this.iconImage_.getSize():this.size_};t.prototype.listenImageChange=function e(t,r){return Object(n["a"])(this.iconImage_,i["a"].CHANGE,t,r)};t.prototype.load=function e(){this.iconImage_.load()};t.prototype.unlistenImageChange=function e(t,r){Object(n["c"])(this.iconImage_,i["a"].CHANGE,t,r)};return t}(c["a"]);var y=t["a"]=_},function(e,t,r){"use strict";var a=r(5);var _=r(126);var y=r(38);var n=r(8);var i=r(71);var b=r(3);var o=r(10);var s=r(250);var l=r(2);var u=r(12);var w=r(190);var S=r(301);var c=function(m){function e(e,t,r,n,i,a){var o=e.getExtent();var s=t.getExtent();var l=s?Object(b["B"])(r,s):r;var u=Object(b["x"])(l);var c=Object(w["a"])(e,t,u,n);var f=_["b"];var h=new S["a"](e,t,l,o,c*f);var d=h.calculateSourceExtent();var p=a(d,c,i);var v=y["a"].LOADED;if(p){v=y["a"].IDLE}var g=p?p.getPixelRatio():1;m.call(this,r,n,g,v);this.targetProj_=t;this.maxSourceExtent_=o;this.triangulation_=h;this.targetResolution_=n;this.targetExtent_=r;this.sourceImage_=p;this.sourcePixelRatio_=g;this.canvas_=null;this.sourceListenerKey_=null}if(m)e.__proto__=m;e.prototype=Object.create(m&&m.prototype);e.prototype.constructor=e;e.prototype.disposeInternal=function e(){if(this.state==y["a"].LOADING){this.unlistenSource_()}m.prototype.disposeInternal.call(this)};e.prototype.getImage=function e(){return this.canvas_};e.prototype.getProjection=function e(){return this.targetProj_};e.prototype.reproject_=function e(){var t=this.sourceImage_.getState();if(t==y["a"].LOADED){var r=Object(b["E"])(this.targetExtent_)/this.targetResolution_;var n=Object(b["A"])(this.targetExtent_)/this.targetResolution_;this.canvas_=Object(w["b"])(r,n,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0)}this.state=t;this.changed()};e.prototype.load=function e(){if(this.state==y["a"].IDLE){this.state=y["a"].LOADING;this.changed();var t=this.sourceImage_.getState();if(t==y["a"].LOADED||t==y["a"].ERROR){this.reproject_()}else{this.sourceListenerKey_=Object(l["a"])(this.sourceImage_,u["a"].CHANGE,function(e){var t=this.sourceImage_.getState();if(t==y["a"].LOADED||t==y["a"].ERROR){this.unlistenSource_();this.reproject_()}},this);this.sourceImage_.load()}}};e.prototype.unlistenSource_=function e(){Object(l["e"])(this.sourceListenerKey_);this.sourceListenerKey_=null};return e}(s["a"]);var f=c;var h=r(251);r.d(t,"b",function(){return g});var d={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};var p=function(r){function e(e,t){r.call(this,e);this.image=t}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;return e}(i["a"]);var v=function(t){function e(e){t.call(this,{attributions:e.attributions,projection:e.projection,state:e.state});this.resolutions_=e.resolutions!==undefined?e.resolutions:null;this.reprojectedImage_=null;this.reprojectedRevision_=0}if(t)e.__proto__=t;e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;e.prototype.getResolutions=function e(){return this.resolutions_};e.prototype.findNearestResolution=function e(t){if(this.resolutions_){var r=Object(n["h"])(this.resolutions_,t,0);t=this.resolutions_[r]}return t};e.prototype.getImage=function e(t,r,n,i){var a=this.getProjection();if(!_["a"]||!a||!i||Object(o["e"])(a,i)){if(a){i=a}return this.getImageInternal(t,r,n,i)}else{if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Object(o["e"])(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==r&&Object(b["p"])(this.reprojectedImage_.getExtent(),t)){return this.reprojectedImage_}this.reprojectedImage_.dispose();this.reprojectedImage_=null}this.reprojectedImage_=new f(a,i,t,r,n,function(e,t,r){return this.getImageInternal(e,t,r,a)}.bind(this));this.reprojectedRevision_=this.getRevision();return this.reprojectedImage_}};e.prototype.getImageInternal=function e(t,r,n,i){return Object(a["b"])()};e.prototype.handleImageChange=function e(t){var r=t.target;switch(r.getState()){case y["a"].LOADING:this.loading=true;this.dispatchEvent(new p(d.IMAGELOADSTART,r));break;case y["a"].LOADED:this.loading=false;this.dispatchEvent(new p(d.IMAGELOADEND,r));break;case y["a"].ERROR:this.loading=false;this.dispatchEvent(new p(d.IMAGELOADERROR,r));break;default:}};return e}(h["a"]);function g(e,t){e.getImage().src=t}var m=t["a"]=v},function(t,r,n){var i,a,o;(function(e){if(true){!(a=[n(27),n(388),n(117),n(247)],i=e,o=typeof i==="function"?i.apply(r,a):i,o!==undefined&&(t.exports=o))}else{}})(function(a){var o=false;a(document).on("mouseup",function(){o=false});return a.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function e(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(e){if(true===a.data(e.target,t.widgetName+".preventClickEvent")){a.removeData(e.target,t.widgetName+".preventClickEvent");e.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function e(){this.element.off("."+this.widgetName);if(this._mouseMoveDelegate){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)}},_mouseDown:function e(t){if(o){return}this._mouseMoved=false;this._mouseStarted&&this._mouseUp(t);this._mouseDownEvent=t;var r=this,n=t.which===1,i=typeof this.options.cancel==="string"&&t.target.nodeName?a(t.target).closest(this.options.cancel).length:false;if(!n||i||!this._mouseCapture(t)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==false;if(!this._mouseStarted){t.preventDefault();return true}}if(true===a.data(t.target,this.widgetName+".preventClickEvent")){a.removeData(t.target,this.widgetName+".preventClickEvent")}this._mouseMoveDelegate=function(e){return r._mouseMove(e)};this._mouseUpDelegate=function(e){return r._mouseUp(e)};this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate);t.preventDefault();o=true;return true},_mouseMove:function e(t){if(this._mouseMoved){if(a.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button){return this._mouseUp(t)}else if(!t.which){if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey){this.ignoreMissingWhich=true}else if(!this.ignoreMissingWhich){return this._mouseUp(t)}}}if(t.which||t.button){this._mouseMoved=true}if(this._mouseStarted){this._mouseDrag(t);return t.preventDefault()}if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==false;this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)}return!this._mouseStarted},_mouseUp:function e(t){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(t.target===this._mouseDownEvent.target){a.data(t.target,this.widgetName+".preventClickEvent",true)}this._mouseStop(t)}if(this._mouseDelayTimer){clearTimeout(this._mouseDelayTimer);delete this._mouseDelayTimer}this.ignoreMissingWhich=false;o=false;t.preventDefault()},_mouseDistanceMet:function e(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function e(){return this.mouseDelayMet},_mouseStart:function e(){},_mouseDrag:function e(){},_mouseStop:function e(){},_mouseCapture:function e(){return true}})})},function(e,t){},function(e,t,r){"use strict";var n=r(27);var i=r.n(n);var g=r(60);function u(){u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};return u.apply(this,arguments)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function m(e,t,r){if(t)a(e.prototype,t);if(r)a(e,r);return e}var o=function(f){var r="collapse";var t="4.1.3";var h="bs.collapse";var e="."+h;var n=".data-api";var i=f.fn[r];var a={toggle:true,parent:""};var o={toggle:"boolean",parent:"(string|element)"};var d={SHOW:"show"+e,SHOWN:"shown"+e,HIDE:"hide"+e,HIDDEN:"hidden"+e,CLICK_DATA_API:"click"+e+n};var p={SHOW:"show",COLLAPSE:"collapse",COLLAPSING:"collapsing",COLLAPSED:"collapsed"};var s={WIDTH:"width",HEIGHT:"height"};var v={ACTIVES:".show, .collapsing",DATA_TOGGLE:'[data-toggle="collapse"]'};var l=function(){function c(t,e){this._isTransitioning=false;this._element=t;this._config=this._getConfig(e);this._triggerArray=f.makeArray(document.querySelectorAll('[data-toggle="collapse"][href="#'+t.id+'"],'+('[data-toggle="collapse"][data-target="#'+t.id+'"]')));var r=[].slice.call(document.querySelectorAll(v.DATA_TOGGLE));for(var n=0,i=r.length;n<i;n++){var a=r[n];var o=g["a"].getSelectorFromElement(a);var s=[].slice.call(document.querySelectorAll(o)).filter(function(e){return e===t});if(o!==null&&s.length>0){this._selector=o;this._triggerArray.push(a)}}this._parent=this._config.parent?this._getParent():null;if(!this._config.parent){this._addAriaAndCollapsedClass(this._element,this._triggerArray)}if(this._config.toggle){this.toggle()}}var e=c.prototype;e.toggle=function e(){if(f(this._element).hasClass(p.SHOW)){this.hide()}else{this.show()}};e.show=function e(){var t=this;if(this._isTransitioning||f(this._element).hasClass(p.SHOW)){return}var r;var n;if(this._parent){r=[].slice.call(this._parent.querySelectorAll(v.ACTIVES)).filter(function(e){return e.getAttribute("data-parent")===t._config.parent});if(r.length===0){r=null}}if(r){n=f(r).not(this._selector).data(h);if(n&&n._isTransitioning){return}}var i=f.Event(d.SHOW);f(this._element).trigger(i);if(i.isDefaultPrevented()){return}if(r){c._jQueryInterface.call(f(r).not(this._selector),"hide");if(!n){f(r).data(h,null)}}var a=this._getDimension();f(this._element).removeClass(p.COLLAPSE).addClass(p.COLLAPSING);this._element.style[a]=0;if(this._triggerArray.length){f(this._triggerArray).removeClass(p.COLLAPSED).attr("aria-expanded",true)}this.setTransitioning(true);var o=function e(){f(t._element).removeClass(p.COLLAPSING).addClass(p.COLLAPSE).addClass(p.SHOW);t._element.style[a]="";t.setTransitioning(false);f(t._element).trigger(d.SHOWN)};var s=a[0].toUpperCase()+a.slice(1);var l="scroll"+s;var u=g["a"].getTransitionDurationFromElement(this._element);f(this._element).one(g["a"].TRANSITION_END,o).emulateTransitionEnd(u);this._element.style[a]=this._element[l]+"px"};e.hide=function e(){var t=this;if(this._isTransitioning||!f(this._element).hasClass(p.SHOW)){return}var r=f.Event(d.HIDE);f(this._element).trigger(r);if(r.isDefaultPrevented()){return}var n=this._getDimension();this._element.style[n]=this._element.getBoundingClientRect()[n]+"px";g["a"].reflow(this._element);f(this._element).addClass(p.COLLAPSING).removeClass(p.COLLAPSE).removeClass(p.SHOW);var i=this._triggerArray.length;if(i>0){for(var a=0;a<i;a++){var o=this._triggerArray[a];var s=g["a"].getSelectorFromElement(o);if(s!==null){var l=f([].slice.call(document.querySelectorAll(s)));if(!l.hasClass(p.SHOW)){f(o).addClass(p.COLLAPSED).attr("aria-expanded",false)}}}}this.setTransitioning(true);var u=function e(){t.setTransitioning(false);f(t._element).removeClass(p.COLLAPSING).addClass(p.COLLAPSE).trigger(d.HIDDEN)};this._element.style[n]="";var c=g["a"].getTransitionDurationFromElement(this._element);f(this._element).one(g["a"].TRANSITION_END,u).emulateTransitionEnd(c)};e.setTransitioning=function e(t){this._isTransitioning=t};e.dispose=function e(){f.removeData(this._element,h);this._config=null;this._parent=null;this._element=null;this._triggerArray=null;this._isTransitioning=null};e._getConfig=function e(t){t=u({},a,t);t.toggle=Boolean(t.toggle);g["a"].typeCheckConfig(r,t,o);return t};e._getDimension=function e(){var t=f(this._element).hasClass(s.WIDTH);return t?s.WIDTH:s.HEIGHT};e._getParent=function e(){var r=this;var t=null;if(g["a"].isElement(this._config.parent)){t=this._config.parent;if(typeof this._config.parent.jquery!=="undefined"){t=this._config.parent[0]}}else{t=document.querySelector(this._config.parent)}var n='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]';var i=[].slice.call(t.querySelectorAll(n));f(i).each(function(e,t){r._addAriaAndCollapsedClass(c._getTargetFromElement(t),[t])});return t};e._addAriaAndCollapsedClass=function e(t,r){if(t){var n=f(t).hasClass(p.SHOW);if(r.length){f(r).toggleClass(p.COLLAPSED,!n).attr("aria-expanded",n)}}};c._getTargetFromElement=function e(t){var r=g["a"].getSelectorFromElement(t);return r?document.querySelector(r):null};c._jQueryInterface=function e(n){return this.each(function(){var e=f(this);var t=e.data(h);var r=u({},a,e.data(),typeof n==="object"&&n?n:{});if(!t&&r.toggle&&/show|hide/.test(n)){r.toggle=false}if(!t){t=new c(this,r);e.data(h,t)}if(typeof n==="string"){if(typeof t[n]==="undefined"){throw new TypeError('No method named "'+n+'"')}t[n]()}})};m(c,null,[{key:"VERSION",get:function e(){return t}},{key:"Default",get:function e(){return a}}]);return c}();f(document).on(d.CLICK_DATA_API,v.DATA_TOGGLE,function(e){if(e.currentTarget.tagName==="A"){e.preventDefault()}var n=f(this);var t=g["a"].getSelectorFromElement(this);var r=[].slice.call(document.querySelectorAll(t));f(r).each(function(){var e=f(this);var t=e.data(h);var r=t?"toggle":n.data();l._jQueryInterface.call(e,r)})});f.fn[r]=l._jQueryInterface;f.fn[r].Constructor=l;f.fn[r].noConflict=function(){f.fn[r]=i;return l._jQueryInterface};return l}(i.a);var s=o},function(e,t,r){"use strict";var u=r(5);var o=r(87);var y=r(39);var c=r(2);var s=r(12);var b=r(3);var n=r(41);var w=r(7);var f=r(31);var i=r(54);var l=r(9);var h=r(147);var d=r(199);function p(e){if(e.feature){return e.feature}else if(e.element){return e.element}}var a=function(a){function e(e){var t=e?e:{};var r=t;if(!r.handleDownEvent){r.handleDownEvent=n["b"]}if(!r.stopDown){r.stopDown=n["a"]}a.call(this,r);this.source_=t.source?t.source:null;this.vertex_=t.vertex!==undefined?t.vertex:true;this.edge_=t.edge!==undefined?t.edge:true;this.features_=t.features?t.features:null;this.featuresListenerKeys_=[];this.featureChangeListenerKeys_={};this.indexedFeaturesExtents_={};this.pendingFeatures_={};this.pixelCoordinate_=null;this.pixelTolerance_=t.pixelTolerance!==undefined?t.pixelTolerance:10;this.sortByDistance_=v.bind(this);this.rBush_=new d["a"];this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_,Circle:this.writeCircleGeometry_}}if(a)e.__proto__=a;e.prototype=Object.create(a&&a.prototype);e.prototype.constructor=e;e.prototype.addFeature=function e(t,r){var n=r!==undefined?r:true;var i=Object(u["c"])(t);var a=t.getGeometry();if(a){var o=this.SEGMENT_WRITERS_[a.getType()];if(o){this.indexedFeaturesExtents_[i]=a.getExtent(Object(b["j"])());o.call(this,t,a)}}if(n){this.featureChangeListenerKeys_[i]=Object(c["a"])(t,s["a"].CHANGE,this.handleFeatureChange_,this)}};e.prototype.forEachFeatureAdd_=function e(t){this.addFeature(t)};e.prototype.forEachFeatureRemove_=function e(t){this.removeFeature(t)};e.prototype.getFeatures_=function e(){var t;if(this.features_){t=this.features_}else if(this.source_){t=this.source_.getFeatures()}return t};e.prototype.handleEvent=function e(t){var r=this.snapTo(t.pixel,t.coordinate,t.map);if(r.snapped){t.coordinate=r.vertex.slice(0,2);t.pixel=r.vertexPixel}return a.prototype.handleEvent.call(this,t)};e.prototype.handleFeatureAdd_=function e(t){var r=p(t);this.addFeature(r)};e.prototype.handleFeatureRemove_=function e(t){var r=p(t);this.removeFeature(r)};e.prototype.handleFeatureChange_=function e(t){var r=t.target;if(this.handlingDownUpSequence){var n=Object(u["c"])(r);if(!(n in this.pendingFeatures_)){this.pendingFeatures_[n]=r}}else{this.updateFeature_(r)}};e.prototype.handleUpEvent=function e(t){var r=Object(l["c"])(this.pendingFeatures_);if(r.length){r.forEach(this.updateFeature_.bind(this));this.pendingFeatures_={}}return false};e.prototype.removeFeature=function e(t,r){var n=r!==undefined?r:true;var i=Object(u["c"])(t);var a=this.indexedFeaturesExtents_[i];if(a){var o=this.rBush_;var s=[];o.forEachInExtent(a,function(e){if(t===e.feature){s.push(e)}});for(var l=s.length-1;l>=0;--l){o.remove(s[l])}}if(n){Object(c["e"])(this.featureChangeListenerKeys_[i]);delete this.featureChangeListenerKeys_[i]}};e.prototype.setMap=function e(t){var r=this.getMap();var n=this.featuresListenerKeys_;var i=this.getFeatures_();if(r){n.forEach(c["e"]);n.length=0;i.forEach(this.forEachFeatureRemove_.bind(this))}a.prototype.setMap.call(this,t);if(t){if(this.features_){n.push(Object(c["a"])(this.features_,o["a"].ADD,this.handleFeatureAdd_,this),Object(c["a"])(this.features_,o["a"].REMOVE,this.handleFeatureRemove_,this))}else if(this.source_){n.push(Object(c["a"])(this.source_,h["a"].ADDFEATURE,this.handleFeatureAdd_,this),Object(c["a"])(this.source_,h["a"].REMOVEFEATURE,this.handleFeatureRemove_,this))}i.forEach(this.forEachFeatureAdd_.bind(this))}};e.prototype.snapTo=function e(t,r,n){var i=n.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]);var a=n.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_]);var o=Object(b["b"])([i,a]);var s=this.rBush_.getInExtent(o);if(this.vertex_&&!this.edge_){s=s.filter(function(e){return e.feature.getGeometry().getType()!==w["a"].CIRCLE})}var l=false;var u=false;var c=null;var f=null;var h,d,p,v,g;if(s.length>0){this.pixelCoordinate_=r;s.sort(this.sortByDistance_);var m=s[0].segment;var _=s[0].feature.getGeometry().getType()===w["a"].CIRCLE;if(this.vertex_&&!this.edge_){d=n.getPixelFromCoordinate(m[0]);p=n.getPixelFromCoordinate(m[1]);v=Object(y["h"])(t,d);g=Object(y["h"])(t,p);h=Math.sqrt(Math.min(v,g));l=h<=this.pixelTolerance_;if(l){u=true;c=v>g?m[1]:m[0];f=n.getPixelFromCoordinate(c)}}else if(this.edge_){if(_){c=Object(y["b"])(r,s[0].feature.getGeometry())}else{c=Object(y["c"])(r,m)}f=n.getPixelFromCoordinate(c);if(Object(y["d"])(t,f)<=this.pixelTolerance_){u=true;if(this.vertex_&&!_){d=n.getPixelFromCoordinate(m[0]);p=n.getPixelFromCoordinate(m[1]);v=Object(y["h"])(f,d);g=Object(y["h"])(f,p);h=Math.sqrt(Math.min(v,g));l=h<=this.pixelTolerance_;if(l){c=v>g?m[1]:m[0];f=n.getPixelFromCoordinate(c)}}}}if(u){f=[Math.round(f[0]),Math.round(f[1])]}}return{snapped:u,vertex:c,vertexPixel:f}};e.prototype.updateFeature_=function e(t){this.removeFeature(t,false);this.addFeature(t,false)};e.prototype.writeCircleGeometry_=function e(t,r){var n=Object(f["b"])(r);var i=n.getCoordinates()[0];for(var a=0,o=i.length-1;a<o;++a){var s=i.slice(a,a+2);var l={feature:t,segment:s};this.rBush_.insert(Object(b["b"])(s),l)}};e.prototype.writeGeometryCollectionGeometry_=function e(t,r){var n=r.getGeometriesArray();for(var i=0;i<n.length;++i){var a=this.SEGMENT_WRITERS_[n[i].getType()];if(a){a.call(this,t,n[i])}}};e.prototype.writeLineStringGeometry_=function e(t,r){var n=r.getCoordinates();for(var i=0,a=n.length-1;i<a;++i){var o=n.slice(i,i+2);var s={feature:t,segment:o};this.rBush_.insert(Object(b["b"])(o),s)}};e.prototype.writeMultiLineStringGeometry_=function e(t,r){var n=r.getCoordinates();for(var i=0,a=n.length;i<a;++i){var o=n[i];for(var s=0,l=o.length-1;s<l;++s){var u=o.slice(s,s+2);var c={feature:t,segment:u};this.rBush_.insert(Object(b["b"])(u),c)}}};e.prototype.writeMultiPointGeometry_=function e(t,r){var n=r.getCoordinates();for(var i=0,a=n.length;i<a;++i){var o=n[i];var s={feature:t,segment:[o,o]};this.rBush_.insert(r.getExtent(),s)}};e.prototype.writeMultiPolygonGeometry_=function e(t,r){var n=r.getCoordinates();for(var i=0,a=n.length;i<a;++i){var o=n[i];for(var s=0,l=o.length;s<l;++s){var u=o[s];for(var c=0,f=u.length-1;c<f;++c){var h=u.slice(c,c+2);var d={feature:t,segment:h};this.rBush_.insert(Object(b["b"])(h),d)}}}};e.prototype.writePointGeometry_=function e(t,r){var n=r.getCoordinates();var i={feature:t,segment:[n,n]};this.rBush_.insert(r.getExtent(),i)};e.prototype.writePolygonGeometry_=function e(t,r){var n=r.getCoordinates();for(var i=0,a=n.length;i<a;++i){var o=n[i];for(var s=0,l=o.length-1;s<l;++s){var u=o.slice(s,s+2);var c={feature:t,segment:u};this.rBush_.insert(Object(b["b"])(u),c)}}};return e}(i["b"]);function v(e,t){var r=Object(y["i"])(this.pixelCoordinate_,e.segment);var n=Object(y["i"])(this.pixelCoordinate_,t.segment);return r-n}t["a"]=a},function(e,t,r){"use strict";var i=r(5);var n=function(n){function e(e){var t=i["a"]==="latest"?i["a"]:"v"+i["a"].split("-")[0];var r="Assertion failed. See https://openlayers.org/en/"+t+"/doc/errors/#"+e+" for details.";n.call(this,r);this.code=e;this.name="AssertionError";this.message=r}if(n)e.__proto__=n;e.prototype=Object.create(n&&n.prototype);e.prototype.constructor=e;return e}(Error);t["a"]=n},function(e,t,r){"use strict";var j=r(3);var I=r(15);var m=r(10);var _=10;var D=.25;var n=function e(t,r,n,i,a){this.sourceProj_=t;this.targetProj_=r;var o={};var s=Object(m["i"])(this.targetProj_,this.sourceProj_);this.transformInv_=function(e){var t=e[0]+"/"+e[1];if(!o[t]){o[t]=s(e)}return o[t]};this.maxSourceExtent_=i;this.errorThresholdSquared_=a*a;this.triangles_=[];this.wrapsXInSource_=false;this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&Object(j["E"])(i)==Object(j["E"])(this.sourceProj_.getExtent());this.sourceWorldWidth_=this.sourceProj_.getExtent()?Object(j["E"])(this.sourceProj_.getExtent()):null;this.targetWorldWidth_=this.targetProj_.getExtent()?Object(j["E"])(this.targetProj_.getExtent()):null;var l=Object(j["C"])(n);var u=Object(j["D"])(n);var c=Object(j["w"])(n);var f=Object(j["v"])(n);var h=this.transformInv_(l);var d=this.transformInv_(u);var p=this.transformInv_(c);var v=this.transformInv_(f);this.addQuad_(l,u,c,f,h,d,p,v,_);if(this.wrapsXInSource_){var g=Infinity;this.triangles_.forEach(function(e,t,r){g=Math.min(g,e.source[0][0],e.source[1][0],e.source[2][0])});this.triangles_.forEach(function(e){if(Math.max(e.source[0][0],e.source[1][0],e.source[2][0])-g>this.sourceWorldWidth_/2){var t=[[e.source[0][0],e.source[0][1]],[e.source[1][0],e.source[1][1]],[e.source[2][0],e.source[2][1]]];if(t[0][0]-g>this.sourceWorldWidth_/2){t[0][0]-=this.sourceWorldWidth_}if(t[1][0]-g>this.sourceWorldWidth_/2){t[1][0]-=this.sourceWorldWidth_}if(t[2][0]-g>this.sourceWorldWidth_/2){t[2][0]-=this.sourceWorldWidth_}var r=Math.min(t[0][0],t[1][0],t[2][0]);var n=Math.max(t[0][0],t[1][0],t[2][0]);if(n-r<this.sourceWorldWidth_/2){e.source=t}}}.bind(this))}o={}};n.prototype.addTriangle_=function e(t,r,n,i,a,o){this.triangles_.push({source:[i,a,o],target:[t,r,n]})};n.prototype.addQuad_=function e(t,r,n,i,a,o,s,l,u){var c=Object(j["b"])([a,o,s,l]);var f=this.sourceWorldWidth_?Object(j["E"])(c)/this.sourceWorldWidth_:null;var h=this.sourceWorldWidth_;var d=this.sourceProj_.canWrapX()&&f>.5&&f<1;var p=false;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var v=Object(j["b"])([t,r,n,i]);var g=Object(j["E"])(v)/this.targetWorldWidth_;p=g>D||p}if(!d&&this.sourceProj_.isGlobal()&&f){p=f>D||p}}if(!p&&this.maxSourceExtent_){if(!Object(j["F"])(c,this.maxSourceExtent_)){return}}if(!p){if(!isFinite(a[0])||!isFinite(a[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(s[0])||!isFinite(s[1])||!isFinite(l[0])||!isFinite(l[1])){if(u>0){p=true}else{return}}}if(u>0){if(!p){var m=[(t[0]+n[0])/2,(t[1]+n[1])/2];var _=this.transformInv_(m);var y;if(d){var b=(Object(I["d"])(a[0],h)+Object(I["d"])(s[0],h))/2;y=b-Object(I["d"])(_[0],h)}else{y=(a[0]+s[0])/2-_[0]}var w=(a[1]+s[1])/2-_[1];var S=y*y+w*w;p=S>this.errorThresholdSquared_}if(p){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){var C=[(r[0]+n[0])/2,(r[1]+n[1])/2];var O=this.transformInv_(C);var x=[(i[0]+t[0])/2,(i[1]+t[1])/2];var T=this.transformInv_(x);this.addQuad_(t,r,C,x,a,o,O,T,u-1);this.addQuad_(x,C,n,i,T,O,s,l,u-1)}else{var E=[(t[0]+r[0])/2,(t[1]+r[1])/2];var M=this.transformInv_(E);var A=[(n[0]+i[0])/2,(n[1]+i[1])/2];var k=this.transformInv_(A);this.addQuad_(t,E,A,i,a,M,k,l,u-1);this.addQuad_(E,r,n,A,M,o,s,k,u-1)}return}}if(d){if(!this.canWrapXInSource_){return}this.wrapsXInSource_=true}this.addTriangle_(t,n,i,a,s,l);this.addTriangle_(t,r,n,a,o,s)};n.prototype.calculateSourceExtent=function e(){var i=Object(j["j"])();this.triangles_.forEach(function(e,t,r){var n=e.source;Object(j["r"])(i,n[0]);Object(j["r"])(i,n[1]);Object(j["r"])(i,n[2])});return i};n.prototype.getTriangles=function e(){return this.triangles_};t["a"]=n},function(e,t,r){"use strict";var n=r(303);var i=r(123);var a=function(t){function e(e){t.call(this,e)}if(t)e.__proto__=t;e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;e.prototype.expireCache=function e(t){while(this.canExpireCache()){var r=this.peekLast();var n=r.tileCoord[0].toString();if(n in t&&t[n].contains(r.tileCoord)){break}else{this.pop().dispose()}}};e.prototype.pruneExceptNewestZ=function e(){if(this.getCount()===0){return}var t=this.peekFirstKey();var r=Object(i["b"])(t);var n=r[0];this.forEach(function(e){if(e.tileCoord[0]!==n){this.remove(Object(i["c"])(e.tileCoord));e.dispose()}},this)};return e}(n["a"]);t["a"]=a},function(e,t,r){"use strict";var i=r(25);var n=r(113);var a=r(12);var o=function(t){function e(e){t.call(this);this.highWaterMark=e!==undefined?e:2048;this.count_=0;this.entries_={};this.oldest_=null;this.newest_=null}if(t)e.__proto__=t;e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;e.prototype.canExpireCache=function e(){return this.getCount()>this.highWaterMark};e.prototype.clear=function e(){this.count_=0;this.entries_={};this.oldest_=null;this.newest_=null;this.dispatchEvent(a["a"].CLEAR)};e.prototype.containsKey=function e(t){return this.entries_.hasOwnProperty(t)};e.prototype.forEach=function e(t,r){var n=this.oldest_;while(n){t.call(r,n.value_,n.key_,this);n=n.newer}};e.prototype.get=function e(t){var r=this.entries_[t];Object(i["a"])(r!==undefined,15);if(r===this.newest_){return r.value_}else if(r===this.oldest_){this.oldest_=this.oldest_.newer;this.oldest_.older=null}else{r.newer.older=r.older;r.older.newer=r.newer}r.newer=null;r.older=this.newest_;this.newest_.newer=r;this.newest_=r;return r.value_};e.prototype.remove=function e(t){var r=this.entries_[t];Object(i["a"])(r!==undefined,15);if(r===this.newest_){this.newest_=r.older;if(this.newest_){this.newest_.newer=null}}else if(r===this.oldest_){this.oldest_=r.newer;if(this.oldest_){this.oldest_.older=null}}else{r.newer.older=r.older;r.older.newer=r.newer}delete this.entries_[t];--this.count_;return r.value_};e.prototype.getCount=function e(){return this.count_};e.prototype.getKeys=function e(){var t=new Array(this.count_);var r=0;var n;for(n=this.newest_;n;n=n.older){t[r++]=n.key_}return t};e.prototype.getValues=function e(){var t=new Array(this.count_);var r=0;var n;for(n=this.newest_;n;n=n.older){t[r++]=n.value_}return t};e.prototype.peekLast=function e(){return this.oldest_.value_};e.prototype.peekLastKey=function e(){return this.oldest_.key_};e.prototype.peekFirstKey=function e(){return this.newest_.key_};e.prototype.pop=function e(){var t=this.oldest_;delete this.entries_[t.key_];if(t.newer){t.newer.older=null}this.oldest_=t.newer;if(!this.oldest_){this.newest_=null}--this.count_;return t.value_};e.prototype.replace=function e(t,r){this.get(t);this.entries_[t].value_=r};e.prototype.set=function e(t,r){Object(i["a"])(!(t in this.entries_),16);var n={key_:t,newer:null,older:this.newest_,value_:r};if(!this.newest_){this.oldest_=n}else{this.newest_.newer=n}this.newest_=n;this.entries_[t]=n;++this.count_};e.prototype.setSize=function e(t){this.highWaterMark=t};e.prototype.prune=function e(){while(this.canExpireCache()){this.pop()}};return e}(n["a"]);t["a"]=o},function(e,t,r){"use strict";r.d(t,"a",function(){return i});var b=r(8);var w=r(10);var n=r(281);var S=function(t){function e(e){t.call(this,{extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes});this.matrixIds_=e.matrixIds}if(t)e.__proto__=t;e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;e.prototype.getMatrixId=function e(t){return this.matrixIds_[t]};e.prototype.getMatrixIds=function e(){return this.matrixIds_};return e}(n["a"]);t["b"]=S;function i(a,e,t){var o=[];var s=[];var l=[];var u=[];var c=[];var f=t!==undefined?t:[];var r="SupportedCRS";var h="TileMatrix";var d="Identifier";var p="ScaleDenominator";var v="TopLeftCorner";var g="TileWidth";var m="TileHeight";var n=a[r];var i=Object(w["g"])(n.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Object(w["g"])(n);var _=i.getMetersPerUnit();var y=i.getAxisOrientation().substr(0,2)=="ne";a[h].sort(function(e,t){return t[p]-e[p]});a[h].forEach(function(t){var e;if(f.length>0){e=Object(b["d"])(f,function(e){if(t[d]==e[h]){return true}if(t[d].indexOf(":")===-1){return a[d]+":"+t[d]===e[h]}return false})}else{e=true}if(e){s.push(t[d]);var r=t[p]*28e-5/_;var n=t[g];var i=t[m];if(y){l.push([t[v][1],t[v][0]])}else{l.push(t[v])}o.push(r);u.push(n==i?n:[n,i]);c.push([t["MatrixWidth"],-t["MatrixHeight"]])}});return new S({extent:e,origins:l,resolutions:o,matrixIds:s,tileSizes:u,sizes:c})}},function(e,t,r){"use strict";var n=function e(n,i,a){var t,o;this.isValidFileSize=function(e){return!(e>2e7)};this.isWmsGetCap=function(e){return/<(WMT_MS_Capabilities|WMS_Capabilities)/.test(e)};this.isWmtsGetCap=function(e){return/<Capabilities/.test(e)};this.isKml=function(e){return/<kml/.test(e)&&/<\/kml>/.test(e)};this.isGpx=function(e){return/<gpx/.test(e)&&/<\/gpx>/.test(e)};this.read=function(e){var r=n.defer();if(t&&t.readyState===FileReader.LOADING){t.abort()}t=new FileReader;t.onload=function(e){r.resolve(e.target.result)};t.onerror=function(e){var t=e.target.error;console.error("Reading file failed: ",t);r.reject({message:t.code==20?a("Operation canceled"):a("Read failed"),reason:t.message})};t.onprogress=function(e){r.notify(e)};t.readAsText(e);return r.promise};this.load=function(e,t){if(o){o.resolve()}o=t||n.defer();var r=n.defer();i.get(e,{timeout:o.promise}).then(function(e){r.resolve(e.data)},function(e){console.error("Uploading file failed: ",e);r.reject({message:a("Upload failed"),reason:e})});return r.promise}};n.$inject=["$q","$http","gettext"];n.$inject=["$q","$http","gettext"];n.module=angular.module("ngeoFile",[]);n.module.service("ngeoFile",n);t["a"]=n},function(e,t,r){"use strict";r.d(t,"a",function(){return u});r.d(t,"b",function(){return n});var S=r(8);var C=r(165);function u(e,t,r,n,i,a,o){var s,l,u,c,f,h,d;var p=i[a+1];var v=[];for(var g=0,m=r.length;g<m;++g){var _=r[g];c=e[_-n];h=e[_-n+1];for(s=t;s<_;s+=n){f=e[s];d=e[s+1];if(p<=h&&d<=p||h<=p&&p<=d){u=(p-h)/(d-h)*(f-c)+c;v.push(u)}c=f;h=d}}var y=NaN;var b=-Infinity;v.sort(S["i"]);c=v[0];for(s=1,l=v.length;s<l;++s){f=v[s];var w=Math.abs(f-c);if(w>b){u=(c+f)/2;if(Object(C["c"])(e,t,r,n,u,p)){y=u;b=w}}c=f}if(isNaN(y)){y=i[a]}if(o){o.push(y,p,b);return o}else{return[y,p,b]}}function n(e,t,r,n,i){var a=[];for(var o=0,s=r.length;o<s;++o){var l=r[o];a=u(e,t,l,n,i,2*o,a);t=l[l.length-1]}return a}},function(e,t,r){"use strict";r.d(t,"a",function(){return n});function n(e,t,r,n,i,a){var o=[e[t],e[t+1]];var s=[];var l;for(;t+n<r;t+=n){s[0]=e[t+n];s[1]=e[t+n+1];l=i.call(a,o,s);if(l){return l}o[0]=s[0];o[1]=s[1]}return false}},function(e,t,r){"use strict";t["a"]={IMAGE:"image",VECTOR:"vector"}},function(e,t,r){"use strict";var n=r(5);var i=function e(t){this.opacity_=t.opacity;this.rotateWithView_=t.rotateWithView;this.rotation_=t.rotation;this.scale_=t.scale};i.prototype.clone=function e(){return new i({opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})};i.prototype.getOpacity=function e(){return this.opacity_};i.prototype.getRotateWithView=function e(){return this.rotateWithView_};i.prototype.getRotation=function e(){return this.rotation_};i.prototype.getScale=function e(){return this.scale_};i.prototype.getSnapToPixel=function e(){return false};i.prototype.getAnchor=function e(){return Object(n["b"])()};i.prototype.getImage=function e(t){return Object(n["b"])()};i.prototype.getHitDetectionImage=function e(t){return Object(n["b"])()};i.prototype.getImageState=function e(){return Object(n["b"])()};i.prototype.getImageSize=function e(){return Object(n["b"])()};i.prototype.getHitDetectionImageSize=function e(){return Object(n["b"])()};i.prototype.getOrigin=function e(){return Object(n["b"])()};i.prototype.getSize=function e(){return Object(n["b"])()};i.prototype.setOpacity=function e(t){this.opacity_=t};i.prototype.setRotateWithView=function e(t){this.rotateWithView_=t};i.prototype.setRotation=function e(t){this.rotation_=t};i.prototype.setScale=function e(t){this.scale_=t};i.prototype.setSnapToPixel=function e(t){};i.prototype.listenImageChange=function e(t,r){return Object(n["b"])()};i.prototype.load=function e(){Object(n["b"])()};i.prototype.unlistenImageChange=function e(t,r){Object(n["b"])()};t["a"]=i},function(e,t,r){"use strict";r.d(t,"a",function(){return s});function s(e,t,r,n){var i=e[t];var a=e[t+1];var o=0;for(var s=t+n;s<r;s+=n){var l=e[s];var u=e[s+1];o+=Math.sqrt((l-i)*(l-i)+(u-a)*(u-a));i=l;a=u}return o}function n(e,t,r,n){var i=s(e,t,r,n);var a=e[r-n]-e[t];var o=e[r-n+1]-e[t+1];i+=Math.sqrt(a*a+o*o);return i}},function(e,t,r){"use strict";var m=r(8);var n=r(234);var i=r(180);var a=r(9);var _=r(0);var y="_feature";var b="_layer";var o=function(r){function e(e){r.call(this);var t=e?e:{};this.featureNS_="http://mapserver.gis.umn.edu/mapserver";this.gmlFormat_=new n["a"];this.layers_=t.layers?t.layers:null}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;e.prototype.getLayers=function e(){return this.layers_};e.prototype.setLayers=function e(t){this.layers_=t};e.prototype.readFeatures_=function e(t,r){t.setAttribute("namespaceURI",this.featureNS_);var n=t.localName;var i=[];if(t.childNodes.length===0){return i}if(n=="msGMLOutput"){for(var a=0,o=t.childNodes.length;a<o;a++){var s=t.childNodes[a];if(s.nodeType!==Node.ELEMENT_NODE){continue}var l=s;var u=r[0];var c=b;var f=l.localName.replace(c,"");if(this.layers_&&!Object(m["f"])(this.layers_,f)){continue}var h=f+y;u["featureType"]=h;u["featureNS"]=this.featureNS_;var d={};d[h]=Object(_["i"])(this.gmlFormat_.readFeatureElement,this.gmlFormat_);var p=Object(_["q"])([u["featureNS"],null],d);l.setAttribute("namespaceURI",this.featureNS_);var v=Object(_["t"])([],p,l,r,this.gmlFormat_);if(v){Object(m["c"])(i,v)}}}if(n=="FeatureCollection"){var g=Object(_["t"])([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,[{}],this.gmlFormat_);if(g){i=g}}return i};e.prototype.readFeaturesFromNode=function e(t,r){var n={};if(r){Object(a["a"])(n,this.getReadOptions(t,r))}return this.readFeatures_(t,[n])};return e}(i["a"]);t["a"]=o},function(e,t,r){"use strict";var f=r(14);var p=r(8);var v=r(25);var s=r(77);var _=r(81);var n=r(180);var h=r(4);var g=r(173);var d=r(33);var m=r(7);var l=r(35);var y=r(83);var b=r(85);var w=r(86);var a=r(21);var u=r(31);var C=r(15);var i=r(10);var c=r(30);var O=r(294);var x=r(131);var T=r(104);var o=r(29);var S=r(11);var E=r(138);var M=r(0);var A=["http://www.google.com/kml/ext/2.2"];var k=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"];var j="http://www.opengis.net/kml/2.2 "+"https://developers.google.com/kml/schema/kml22gx.xsd";var I={fraction:x["a"].FRACTION,pixels:x["a"].PIXELS,insetPixels:x["a"].PIXELS};var D=Object(M["q"])(k,{ExtendedData:Ze,Region:Qe,MultiGeometry:Object(M["m"])(Ue,"geometry"),LineString:Object(M["m"])($e,"geometry"),LinearRing:Object(M["m"])(Fe,"geometry"),Point:Object(M["m"])(He,"geometry"),Polygon:Object(M["m"])(Ye,"geometry"),Style:Object(M["m"])(qe),StyleMap:tt,address:Object(M["m"])(h["h"]),description:Object(M["m"])(h["h"]),name:Object(M["m"])(h["h"]),open:Object(M["m"])(h["a"]),phoneNumber:Object(M["m"])(h["h"]),styleUrl:Object(M["m"])(de),visibility:Object(M["m"])(h["a"])},Object(M["q"])(A,{MultiTrack:Object(M["m"])(ke,"geometry"),Track:Object(M["m"])(Ie,"geometry")}));var P=Object(M["q"])(k,{ExtendedData:Ze,Region:Qe,Link:dt,address:Object(M["m"])(h["h"]),description:Object(M["m"])(h["h"]),name:Object(M["m"])(h["h"]),open:Object(M["m"])(h["a"]),phoneNumber:Object(M["m"])(h["h"]),visibility:Object(M["m"])(h["a"])});var R=Object(M["q"])(k,{href:Object(M["m"])(de)});var L=Object(M["q"])(k,{LatLonAltBox:ot,Lod:lt});var N=Object(M["q"])(k,["Document","Placemark"]);var $=Object(M["q"])(k,{Document:Object(M["k"])(Ct),Placemark:Object(M["k"])(Qt)});var F;var G=null;function U(){return G}var H;var W;var Y;var V;var q;var z;var B=null;function K(){return B}var X;var Z=null;function Q(){return Z}var J;var ee=null;function te(){return ee}var re=null;function ne(){return re}var ie=null;function ae(){return ie}function oe(){F=[255,255,255,1];G=new c["a"]({color:F});H=[20,2];W=x["a"].PIXELS;Y=x["a"].PIXELS;V=[64,64];q="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png";z=.5;B=new O["a"]({anchor:H,anchorOrigin:T["a"].BOTTOM_LEFT,anchorXUnits:W,anchorYUnits:Y,crossOrigin:"anonymous",rotation:0,scale:z,size:V,src:q});X="NO_IMAGE";Z=new o["a"]({color:F,width:1});J=new o["a"]({color:[51,51,51,1],width:2});ee=new E["a"]({font:"bold 16px Helvetica",fill:G,stroke:J,scale:.8});re=new S["c"]({fill:G,image:B,text:ee,stroke:Z,zIndex:0});ie=[re]}var se=function(r){function e(e){r.call(this);var t=e?e:{};if(!ie){oe()}this.dataProjection=Object(i["g"])("EPSG:4326");this.defaultStyle_=t.defaultStyle?t.defaultStyle:ie;this.extractStyles_=t.extractStyles!==undefined?t.extractStyles:true;this.writeStyles_=t.writeStyles!==undefined?t.writeStyles:true;this.sharedStyles_={};this.showPointNames_=t.showPointNames!==undefined?t.showPointNames:true}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;e.prototype.readDocumentOrFolder_=function e(t,r){var n=Object(M["q"])(k,{Document:Object(M["h"])(this.readDocumentOrFolder_,this),Folder:Object(M["h"])(this.readDocumentOrFolder_,this),Placemark:Object(M["i"])(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)});var i=Object(M["t"])([],n,t,r,this);if(i){return i}else{return undefined}};e.prototype.readPlacemark_=function e(t,r){var n=Object(M["t"])({geometry:null},D,t,r);if(!n){return undefined}var i=new f["a"];var a=t.getAttribute("id");if(a!==null){i.setId(a)}var o=r[0];var s=n["geometry"];if(s){Object(_["b"])(s,false,o)}i.setGeometry(s);delete n["geometry"];if(this.extractStyles_){var l=n["Style"];var u=n["styleUrl"];var c=ue(l,u,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);i.setStyle(c)}delete n["Style"];i.setProperties(n);return i};e.prototype.readSharedStyle_=function e(t,r){var n=t.getAttribute("id");if(n!==null){var i=qe(t,r);if(i){var a;var o=t.baseURI;if(!o||o=="about:blank"){o=window.location.href}if(o){var s=new URL("#"+n,o);a=s.href}else{a="#"+n}this.sharedStyles_[a]=i}}};e.prototype.readSharedStyleMap_=function e(t,r){var n=t.getAttribute("id");if(n===null){return}var i=me(t,r);if(!i){return}var a;var o=t.baseURI;if(!o||o=="about:blank"){o=window.location.href}if(o){var s=new URL("#"+n,o);a=s.href}else{a="#"+n}this.sharedStyles_[a]=i};e.prototype.readFeatureFromNode=function e(t,r){if(!Object(p["f"])(k,t.namespaceURI)){return null}var n=this.readPlacemark_(t,[this.getReadOptions(t,r)]);if(n){return n}else{return null}};e.prototype.readFeaturesFromNode=function e(t,r){if(!Object(p["f"])(k,t.namespaceURI)){return[]}var n;var i=t.localName;if(i=="Document"||i=="Folder"){n=this.readDocumentOrFolder_(t,[this.getReadOptions(t,r)]);if(n){return n}else{return[]}}else if(i=="Placemark"){var a=this.readPlacemark_(t,[this.getReadOptions(t,r)]);if(a){return[a]}else{return[]}}else if(i=="kml"){n=[];for(var o=t.firstElementChild;o;o=o.nextElementSibling){var s=this.readFeaturesFromNode(o,r);if(s){Object(p["c"])(n,s)}}return n}else{return[]}};e.prototype.readName=function e(t){if(!t){return undefined}else if(typeof t==="string"){var r=Object(M["r"])(t);return this.readNameFromDocument(r)}else if(Object(M["g"])(t)){return this.readNameFromDocument(t)}else{return this.readNameFromNode(t)}};e.prototype.readNameFromDocument=function e(t){for(var r=t.firstChild;r;r=r.nextSibling){if(r.nodeType==Node.ELEMENT_NODE){var n=this.readNameFromNode(r);if(n){return n}}}return undefined};e.prototype.readNameFromNode=function e(t){for(var r=t.firstElementChild;r;r=r.nextElementSibling){if(Object(p["f"])(k,r.namespaceURI)&&r.localName=="name"){return Object(h["h"])(r)}}for(var n=t.firstElementChild;n;n=n.nextElementSibling){var i=n.localName;if(Object(p["f"])(k,n.namespaceURI)&&(i=="Document"||i=="Folder"||i=="Placemark"||i=="kml")){var a=this.readNameFromNode(n);if(a){return a}}}return undefined};e.prototype.readNetworkLinks=function e(t){var r=[];if(typeof t==="string"){var n=Object(M["r"])(t);Object(p["c"])(r,this.readNetworkLinksFromDocument(n))}else if(Object(M["g"])(t)){Object(p["c"])(r,this.readNetworkLinksFromDocument(t))}else{Object(p["c"])(r,this.readNetworkLinksFromNode(t))}return r};e.prototype.readNetworkLinksFromDocument=function e(t){var r=[];for(var n=t.firstChild;n;n=n.nextSibling){if(n.nodeType==Node.ELEMENT_NODE){Object(p["c"])(r,this.readNetworkLinksFromNode(n))}}return r};e.prototype.readNetworkLinksFromNode=function e(t){var r=[];for(var n=t.firstElementChild;n;n=n.nextElementSibling){if(Object(p["f"])(k,n.namespaceURI)&&n.localName=="NetworkLink"){var i=Object(M["t"])({},P,n,[]);r.push(i)}}for(var a=t.firstElementChild;a;a=a.nextElementSibling){var o=a.localName;if(Object(p["f"])(k,a.namespaceURI)&&(o=="Document"||o=="Folder"||o=="kml")){Object(p["c"])(r,this.readNetworkLinksFromNode(a))}}return r};e.prototype.readRegion=function e(t){var r=[];if(typeof t==="string"){var n=Object(M["r"])(t);Object(p["c"])(r,this.readRegionFromDocument(n))}else if(Object(M["g"])(t)){Object(p["c"])(r,this.readRegionFromDocument(t))}else{Object(p["c"])(r,this.readRegionFromNode(t))}return r};e.prototype.readRegionFromDocument=function e(t){var r=[];for(var n=t.firstChild;n;n=n.nextSibling){if(n.nodeType==Node.ELEMENT_NODE){Object(p["c"])(r,this.readRegionFromNode(n))}}return r};e.prototype.readRegionFromNode=function e(t){var r=[];for(var n=t.firstElementChild;n;n=n.nextElementSibling){if(Object(p["f"])(k,n.namespaceURI)&&n.localName=="Region"){var i=Object(M["t"])({},L,n,[]);r.push(i)}}for(var a=t.firstElementChild;a;a=a.nextElementSibling){var o=a.localName;if(Object(p["f"])(k,a.namespaceURI)&&(o=="Document"||o=="Folder"||o=="kml")){Object(p["c"])(r,this.readRegionFromNode(a))}}return r};e.prototype.writeFeaturesNode=function e(t,r){r=this.adaptOptions(r);var n=Object(M["d"])(k[4],"kml");var i="http://www.w3.org/2000/xmlns/";n.setAttributeNS(i,"xmlns:gx",A[0]);n.setAttributeNS(i,"xmlns:xsi",M["c"]);n.setAttributeNS(M["c"],"xsi:schemaLocation",j);var a={node:n};var o={};if(t.length>1){o["Document"]=t}else if(t.length==1){o["Placemark"]=t[0]}var s=N[n.namespaceURI];var l=Object(M["o"])(o,s);Object(M["u"])(a,$,M["b"],l,[r],s,this);return n};return e}(n["a"]);function le(e,t){var r=null;var n=[0,0];var i="start";if(e.getImage()){var a=e.getImage().getImageSize();if(a===null){a=V}if(a.length==2){var o=e.getImage().getScale();n[0]=o*a[0]/2;n[1]=-o*a[1]/2;i="left"}}if(e.getText()!==null){var s=e.getText();r=s.clone();r.setFont(s.getFont()||ee.getFont());r.setScale(s.getScale()||ee.getScale());r.setFill(s.getFill()||ee.getFill());r.setStroke(s.getStroke()||J)}else{r=ee.clone()}r.setText(t);r.setOffsetX(n[0]);r.setOffsetY(n[1]);r.setTextAlign(i);var l=new S["c"]({text:r});return l}function ue(s,l,u,c,f){return function(e,t){var r=f;var n;var i="";if(r){var a=e.getGeometry();if(a){r=a.getType()===m["a"].POINT}}if(r){i=e.get("name");r=r&&!!i}if(s){if(r){n=le(s[0],i);return s.concat(n)}return s}if(l){var o=ce(l,u,c);if(r){n=le(o[0],i);return o.concat(n)}return o}if(r){n=le(u[0],i);return u.concat(n)}return u}}function ce(e,t,r){if(Array.isArray(e)){return e}else if(typeof e==="string"){if(!(e in r)&&"#"+e in r){e="#"+e}return ce(r[e],t,r)}else{return t}}function fe(e){var t=Object(M["e"])(e,false);var r=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(t);if(r){var n=r[1];return[parseInt(n.substr(6,2),16),parseInt(n.substr(4,2),16),parseInt(n.substr(2,2),16),parseInt(n.substr(0,2),16)/255]}else{return undefined}}function he(e){var t=Object(M["e"])(e,false);var r=[];var n=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i;var i;while(i=n.exec(t)){var a=parseFloat(i[1]);var o=parseFloat(i[2]);var s=i[3]?parseFloat(i[3]):0;r.push(a,o,s);t=t.substr(i[0].length)}if(t!==""){return undefined}return r}function de(e){var t=Object(M["e"])(e,false).trim();var r=e.baseURI;if(!r||r=="about:blank"){r=window.location.href}if(r){var n=new URL(t,r);return n.href}else{return t}}function pe(e){var t=e.getAttribute("xunits");var r=e.getAttribute("yunits");var n;if(t!=="insetPixels"){if(r!=="insetPixels"){n=T["a"].BOTTOM_LEFT}else{n=T["a"].TOP_LEFT}}else{if(r!=="insetPixels"){n=T["a"].BOTTOM_RIGHT}else{n=T["a"].TOP_RIGHT}}return{x:parseFloat(e.getAttribute("x")),xunits:I[t],y:parseFloat(e.getAttribute("y")),yunits:I[r],origin:n}}function ve(e){return Object(h["d"])(e)}var ge=Object(M["q"])(k,{Pair:et});function me(e,t){return Object(M["t"])(undefined,ge,e,t)}var _e=Object(M["q"])(k,{Icon:Object(M["m"])(Pe),heading:Object(M["m"])(h["d"]),hotSpot:Object(M["m"])(pe),scale:Object(M["m"])(ve)});function ye(e,t){var r=Object(M["t"])({},_e,e,t);if(!r){return}var n=t[t.length-1];var i="Icon"in r?r["Icon"]:{};var a=!("Icon"in r)||Object.keys(i).length>0;var o;var s=i["href"];if(s){o=s}else if(a){o=q}var l,u,c;var f=T["a"].BOTTOM_LEFT;var h=r["hotSpot"];if(h){l=[h.x,h.y];u=h.xunits;c=h.yunits;f=h.origin}else if(o===q){l=H;u=W;c=Y}else if(/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(o)){l=[.5,0];u=x["a"].FRACTION;c=x["a"].FRACTION}var d;var p=i["x"];var v=i["y"];if(p!==undefined&&v!==undefined){d=[p,v]}var g;var m=i["w"];var _=i["h"];if(m!==undefined&&_!==undefined){g=[m,_]}var y;var b=r["heading"];if(b!==undefined){y=Object(C["i"])(b)}var w=r["scale"];if(a){if(o==q){g=V;if(w===undefined){w=z}}var S=new O["a"]({anchor:l,anchorOrigin:f,anchorXUnits:u,anchorYUnits:c,crossOrigin:"anonymous",offset:d,offsetOrigin:T["a"].BOTTOM_LEFT,rotation:y,scale:w,size:g,src:o});n["imageStyle"]=S}else{n["imageStyle"]=X}}var be=Object(M["q"])(k,{color:Object(M["m"])(fe),scale:Object(M["m"])(ve)});function we(e,t){var r=Object(M["t"])({},be,e,t);if(!r){return}var n=t[t.length-1];var i=new E["a"]({fill:new c["a"]({color:"color"in r?r["color"]:F}),scale:r["scale"]});n["textStyle"]=i}var Se=Object(M["q"])(k,{color:Object(M["m"])(fe),width:Object(M["m"])(h["d"])});function Ce(e,t){var r=Object(M["t"])({},Se,e,t);if(!r){return}var n=t[t.length-1];var i=new o["a"]({color:"color"in r?r["color"]:F,width:"width"in r?r["width"]:1});n["strokeStyle"]=i}var Oe=Object(M["q"])(k,{color:Object(M["m"])(fe),fill:Object(M["m"])(h["a"]),outline:Object(M["m"])(h["a"])});function xe(e,t){var r=Object(M["t"])({},Oe,e,t);if(!r){return}var n=t[t.length-1];var i=new c["a"]({color:"color"in r?r["color"]:F});n["fillStyle"]=i;var a=r["fill"];if(a!==undefined){n["fill"]=a}var o=r["outline"];if(o!==undefined){n["outline"]=o}}var Te=Object(M["q"])(k,{coordinates:Object(M["n"])(he)});function Ee(e,t){return Object(M["t"])(null,Te,e,t)}function Me(e,t){var r=t[t.length-1];var n=r.flatCoordinates;var i=Object(M["e"])(e,false);var a=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i;var o=a.exec(i);if(o){var s=parseFloat(o[1]);var l=parseFloat(o[2]);var u=parseFloat(o[3]);n.push(s,l,u,0)}else{n.push(0,0,0,0)}}var Ae=Object(M["q"])(A,{Track:Object(M["i"])(Ie)});function ke(e,t){var r=Object(M["t"])([],Ae,e,t);if(!r){return undefined}return new y["a"](r)}var je=Object(M["q"])(k,{when:pt},Object(M["q"])(A,{coord:Me}));function Ie(e,t){var r=Object(M["t"])({flatCoordinates:[],whens:[]},je,e,t);if(!r){return undefined}var n=r.flatCoordinates;var i=r.whens;for(var a=0,o=Math.min(n.length,i.length);a<o;++a){n[4*a+3]=i[a]}return new l["a"](n,d["a"].XYZM)}var De=Object(M["q"])(k,{href:Object(M["m"])(de)},Object(M["q"])(A,{x:Object(M["m"])(h["d"]),y:Object(M["m"])(h["d"]),w:Object(M["m"])(h["d"]),h:Object(M["m"])(h["d"])}));function Pe(e,t){var r=Object(M["t"])({},De,e,t);if(r){return r}else{return null}}var Re=Object(M["q"])(k,{coordinates:Object(M["n"])(he)});function Le(e,t){return Object(M["t"])(null,Re,e,t)}var Ne=Object(M["q"])(k,{extrude:Object(M["m"])(h["a"]),tessellate:Object(M["m"])(h["a"]),altitudeMode:Object(M["m"])(h["h"])});function $e(e,t){var r=Object(M["t"])({},Ne,e,t);var n=Le(e,t);if(n){var i=new l["a"](n,d["a"].XYZ);i.setProperties(r);return i}else{return undefined}}function Fe(e,t){var r=Object(M["t"])({},Ne,e,t);var n=Le(e,t);if(n){var i=new u["a"](n,d["a"].XYZ,[n.length]);i.setProperties(r);return i}else{return undefined}}var Ge=Object(M["q"])(k,{LineString:Object(M["i"])($e),LinearRing:Object(M["i"])(Fe),MultiGeometry:Object(M["i"])(Ue),Point:Object(M["i"])(He),Polygon:Object(M["i"])(Ye)});function Ue(e,t){var r=Object(M["t"])([],Ge,e,t);if(!r){return null}if(r.length===0){return new g["a"](r)}var n;var i=true;var a=r[0].getType();var o;for(var s=1,l=r.length;s<l;++s){o=r[s];if(o.getType()!=a){i=false;break}}if(i){var u;var c;if(a==m["a"].POINT){var f=r[0];u=f.getLayout();c=f.getFlatCoordinates();for(var h=1,d=r.length;h<d;++h){o=r[h];Object(p["c"])(c,o.getFlatCoordinates())}n=new b["a"](c,u);ze(n,r)}else if(a==m["a"].LINE_STRING){n=new y["a"](r);ze(n,r)}else if(a==m["a"].POLYGON){n=new w["a"](r);ze(n,r)}else if(a==m["a"].GEOMETRY_COLLECTION){n=new g["a"](r)}else{Object(v["a"])(false,37)}}else{n=new g["a"](r)}return n}function He(e,t){var r=Object(M["t"])({},Ne,e,t);var n=Le(e,t);if(n){var i=new a["a"](n,d["a"].XYZ);i.setProperties(r);return i}else{return undefined}}var We=Object(M["q"])(k,{innerBoundaryIs:ct,outerBoundaryIs:ht});function Ye(e,t){var r=Object(M["t"])({},Ne,e,t);var n=Object(M["t"])([null],We,e,t);if(n&&n[0]){var i=n[0];var a=[i.length];for(var o=1,s=n.length;o<s;++o){Object(p["c"])(i,n[o]);a.push(i.length)}var l=new u["a"](i,d["a"].XYZ,a);l.setProperties(r);return l}else{return undefined}}var Ve=Object(M["q"])(k,{IconStyle:ye,LabelStyle:we,LineStyle:Ce,PolyStyle:xe});function qe(e,t){var r=Object(M["t"])({},Ve,e,t);if(!r){return null}var n="fillStyle"in r?r["fillStyle"]:G;var i=r["fill"];if(i!==undefined&&!i){n=null}var a;if("imageStyle"in r){if(r["imageStyle"]!=X){a=r["imageStyle"]}}else{a=B}var o="textStyle"in r?r["textStyle"]:ee;var s="strokeStyle"in r?r["strokeStyle"]:Z;var l=r["outline"];if(l!==undefined&&!l){s=null}return[new S["c"]({fill:n,image:a,stroke:s,text:o,zIndex:undefined})]}function ze(e,t){var r=t.length;var n=new Array(t.length);var i=new Array(t.length);var a=new Array(t.length);var o,s,l;o=s=l=false;for(var u=0;u<r;++u){var c=t[u];n[u]=c.get("extrude");i[u]=c.get("tessellate");a[u]=c.get("altitudeMode");o=o||n[u]!==undefined;s=s||i[u]!==undefined;l=l||a[u]}if(o){e.set("extrude",n)}if(s){e.set("tessellate",i)}if(l){e.set("altitudeMode",a)}}var Be=Object(M["q"])(k,{displayName:Object(M["m"])(h["h"]),value:Object(M["m"])(h["h"])});function Ke(e,t){var r=e.getAttribute("name");Object(M["s"])(Be,e,t);var n=t[t.length-1];if(r!==null){n[r]=n.value}else if(n.displayName!==null){n[n.displayName]=n.value}delete n["value"]}var Xe=Object(M["q"])(k,{Data:Ke,SchemaData:nt});function Ze(e,t){Object(M["s"])(Xe,e,t)}function Qe(e,t){Object(M["s"])(L,e,t)}var Je=Object(M["q"])(k,{Style:Object(M["m"])(qe),key:Object(M["m"])(h["h"]),styleUrl:Object(M["m"])(de)});function et(e,t){var r=Object(M["t"])({},Je,e,t);if(!r){return}var n=r["key"];if(n&&n=="normal"){var i=r["styleUrl"];if(i){t[t.length-1]=i}var a=r["Style"];if(a){t[t.length-1]=a}}}function tt(e,t){var r=me(e,t);if(!r){return}var n=t[t.length-1];if(Array.isArray(r)){n["Style"]=r}else if(typeof r==="string"){n["styleUrl"]=r}else{Object(v["a"])(false,38)}}var rt=Object(M["q"])(k,{SimpleData:it});function nt(e,t){Object(M["s"])(rt,e,t)}function it(e,t){var r=e.getAttribute("name");if(r!==null){var n=Object(h["h"])(e);var i=t[t.length-1];i[r]=n}}var at=Object(M["q"])(k,{altitudeMode:Object(M["m"])(h["h"]),minAltitude:Object(M["m"])(h["d"]),maxAltitude:Object(M["m"])(h["d"]),north:Object(M["m"])(h["d"]),south:Object(M["m"])(h["d"]),east:Object(M["m"])(h["d"]),west:Object(M["m"])(h["d"])});function ot(e,t){var r=Object(M["t"])({},at,e,t);if(!r){return}var n=t[t.length-1];var i=[parseFloat(r["west"]),parseFloat(r["south"]),parseFloat(r["east"]),parseFloat(r["north"])];n["extent"]=i;n["altitudeMode"]=r["altitudeMode"];n["minAltitude"]=parseFloat(r["minAltitude"]);n["maxAltitude"]=parseFloat(r["maxAltitude"])}var st=Object(M["q"])(k,{minLodPixels:Object(M["m"])(h["d"]),maxLodPixels:Object(M["m"])(h["d"]),minFadeExtent:Object(M["m"])(h["d"]),maxFadeExtent:Object(M["m"])(h["d"])});function lt(e,t){var r=Object(M["t"])({},st,e,t);if(!r){return}var n=t[t.length-1];n["minLodPixels"]=parseFloat(r["minLodPixels"]);n["maxLodPixels"]=parseFloat(r["maxLodPixels"]);n["minFadeExtent"]=parseFloat(r["minFadeExtent"]);n["maxFadeExtent"]=parseFloat(r["maxFadeExtent"])}var ut=Object(M["q"])(k,{LinearRing:Object(M["n"])(Ee)});function ct(e,t){var r=Object(M["t"])(undefined,ut,e,t);if(r){var n=t[t.length-1];n.push(r)}}var ft=Object(M["q"])(k,{LinearRing:Object(M["n"])(Ee)});function ht(e,t){var r=Object(M["t"])(undefined,ft,e,t);if(r){var n=t[t.length-1];n[0]=r}}function dt(e,t){Object(M["s"])(R,e,t)}function pt(e,t){var r=t[t.length-1];var n=r.whens;var i=Object(M["e"])(e,false);var a=Date.parse(i);n.push(isNaN(a)?0:a)}function vt(e,t){var r=Object(s["a"])(t);var n=r.length==4?r[3]:1;var i=[n*255,r[2],r[1],r[0]];for(var a=0;a<4;++a){var o=Math.floor(i[a]).toString(16);i[a]=o.length==1?"0"+o:o}Object(h["n"])(e,i.join(""))}function gt(e,t,r){var n=r[r.length-1];var i=n["layout"];var a=n["stride"];var o;if(i==d["a"].XY||i==d["a"].XYM){o=2}else if(i==d["a"].XYZ||i==d["a"].XYZM){o=3}else{Object(v["a"])(false,34)}var s=t.length;var l="";if(s>0){l+=t[0];for(var u=1;u<o;++u){l+=","+t[u]}for(var c=a;c<s;c+=a){l+=" "+t[c];for(var f=1;f<o;++f){l+=","+t[c+f]}}}Object(h["n"])(e,l)}var mt=Object(M["q"])(k,{Data:Object(M["k"])(_t),value:Object(M["k"])(bt),displayName:Object(M["k"])(yt)});function _t(e,t,r){e.setAttribute("name",t.name);var n={node:e};var i=t.value;if(typeof i=="object"){if(i!==null&&i.displayName){Object(M["u"])(n,mt,M["b"],[i.displayName],r,["displayName"])}if(i!==null&&i.value){Object(M["u"])(n,mt,M["b"],[i.value],r,["value"])}}else{Object(M["u"])(n,mt,M["b"],[i],r,["value"])}}function yt(e,t){Object(h["j"])(e,t)}function bt(e,t){Object(h["n"])(e,t)}var wt=Object(M["q"])(k,{Placemark:Object(M["k"])(Qt)});var St=function e(t,r,n){var i=r[r.length-1].node;return Object(M["d"])(i.namespaceURI,"Placemark")};function Ct(e,t,r){var n={node:e};Object(M["u"])(n,wt,St,t,r,undefined,this)}var Ot=Object(M["p"])("Data");function xt(e,t,r){var n={node:e};var i=t.names;var a=t.values;var o=i.length;for(var s=0;s<o;s++){Object(M["u"])(n,mt,Ot,[{name:i[s],value:a[s]}],r)}}var Tt=Object(M["q"])(k,["href"],Object(M["q"])(A,["x","y","w","h"]));var Et=Object(M["q"])(k,{href:Object(M["k"])(h["n"])},Object(M["q"])(A,{x:Object(M["k"])(h["l"]),y:Object(M["k"])(h["l"]),w:Object(M["k"])(h["l"]),h:Object(M["k"])(h["l"])}));var Mt=function e(t,r,n){return Object(M["d"])(A[0],"gx:"+n)};function At(e,t,r){var n={node:e};var i=r[r.length-1].node;var a=Tt[i.namespaceURI];var o=Object(M["o"])(t,a);Object(M["u"])(n,Et,M["b"],o,r,a);a=Tt[A[0]];o=Object(M["o"])(t,a);Object(M["u"])(n,Et,Mt,o,r,a)}var kt=Object(M["q"])(k,["scale","heading","Icon","hotSpot"]);var jt=Object(M["q"])(k,{Icon:Object(M["k"])(At),heading:Object(M["k"])(h["l"]),hotSpot:Object(M["k"])(dr),scale:Object(M["k"])(ur)});function It(e,t,r){var n={node:e};var i={};var a=t.getSrc();var o=t.getSize();var s=t.getImageSize();var l={href:a};if(o){l["w"]=o[0];l["h"]=o[1];var u=t.getAnchor();var c=t.getOrigin();if(c&&s&&c[0]!==0&&c[1]!==o[1]){l["x"]=c[0];l["y"]=s[1]-(c[1]+o[1])}if(u&&(u[0]!==o[0]/2||u[1]!==o[1]/2)){var f={x:u[0],xunits:x["a"].PIXELS,y:o[1]-u[1],yunits:x["a"].PIXELS};i["hotSpot"]=f}}i["Icon"]=l;var h=t.getScale();if(h!==1){i["scale"]=h}var d=t.getRotation();if(d!==0){i["heading"]=d}var p=r[r.length-1].node;var v=kt[p.namespaceURI];var g=Object(M["o"])(i,v);Object(M["u"])(n,jt,M["b"],g,r,v)}var Dt=Object(M["q"])(k,["color","scale"]);var Pt=Object(M["q"])(k,{color:Object(M["k"])(vt),scale:Object(M["k"])(ur)});function Rt(e,t,r){var n={node:e};var i={};var a=t.getFill();if(a){i["color"]=a.getColor()}var o=t.getScale();if(o&&o!==1){i["scale"]=o}var s=r[r.length-1].node;var l=Dt[s.namespaceURI];var u=Object(M["o"])(i,l);Object(M["u"])(n,Pt,M["b"],u,r,l)}var Lt=Object(M["q"])(k,["color","width"]);var Nt=Object(M["q"])(k,{color:Object(M["k"])(vt),width:Object(M["k"])(h["l"])});function $t(e,t,r){var n={node:e};var i={color:t.getColor(),width:t.getWidth()};var a=r[r.length-1].node;var o=Lt[a.namespaceURI];var s=Object(M["o"])(i,o);Object(M["u"])(n,Nt,M["b"],s,r,o)}var Ft={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"};var Gt=function e(t,r,n){if(t){var i=r[r.length-1].node;return Object(M["d"])(i.namespaceURI,Ft[t.getType()])}};var Ut=Object(M["p"])("Point");var Ht=Object(M["p"])("LineString");var Wt=Object(M["p"])("LinearRing");var Yt=Object(M["p"])("Polygon");var Vt=Object(M["q"])(k,{LineString:Object(M["k"])(tr),Point:Object(M["k"])(tr),Polygon:Object(M["k"])(ar),GeometryCollection:Object(M["k"])(qt)});function qt(e,t,r){var n={node:e};var i=t.getType();var a;var o;if(i==m["a"].GEOMETRY_COLLECTION){a=t.getGeometries();o=Gt}else if(i==m["a"].MULTI_POINT){a=t.getPoints();o=Ut}else if(i==m["a"].MULTI_LINE_STRING){a=t.getLineStrings();o=Ht}else if(i==m["a"].MULTI_POLYGON){a=t.getPolygons();o=Yt}else{Object(v["a"])(false,39)}Object(M["u"])(n,Vt,o,a,r)}var zt=Object(M["q"])(k,{LinearRing:Object(M["k"])(tr)});function Bt(e,t,r){var n={node:e};Object(M["u"])(n,zt,Wt,[t],r)}var Kt=Object(M["q"])(k,{ExtendedData:Object(M["k"])(xt),MultiGeometry:Object(M["k"])(qt),LineString:Object(M["k"])(tr),LinearRing:Object(M["k"])(tr),Point:Object(M["k"])(tr),Polygon:Object(M["k"])(ar),Style:Object(M["k"])(hr),address:Object(M["k"])(h["n"]),description:Object(M["k"])(h["n"]),name:Object(M["k"])(h["n"]),open:Object(M["k"])(h["i"]),phoneNumber:Object(M["k"])(h["n"]),styleUrl:Object(M["k"])(h["n"]),visibility:Object(M["k"])(h["i"])});var Xt=Object(M["q"])(k,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]);var Zt=Object(M["p"])("ExtendedData");function Qt(e,t,r){var n={node:e};if(t.getId()){e.setAttribute("id",t.getId())}var i=t.getProperties();var a={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};a[t.getGeometryName()]=1;var o=Object.keys(i||{}).sort().filter(function(e){return!a[e]});if(o.length>0){var s=Object(M["o"])(i,o);var l={names:o,values:s};Object(M["u"])(n,Kt,Zt,[l],r)}var u=t.getStyleFunction();if(u){var c=u(t,0);if(c){var f=Array.isArray(c)?c[0]:c;if(this.writeStyles_){i["Style"]=f}var h=f.getText();if(h){i["name"]=h.getText()}}}var d=r[r.length-1].node;var p=Xt[d.namespaceURI];var v=Object(M["o"])(i,p);Object(M["u"])(n,Kt,M["b"],v,r,p);var g=r[0];var m=t.getGeometry();if(m){m=Object(_["b"])(m,true,g)}Object(M["u"])(n,Kt,Gt,[m],r)}var Jt=Object(M["q"])(k,["extrude","tessellate","altitudeMode","coordinates"]);var er=Object(M["q"])(k,{extrude:Object(M["k"])(h["i"]),tessellate:Object(M["k"])(h["i"]),altitudeMode:Object(M["k"])(h["n"]),coordinates:Object(M["k"])(gt)});function tr(e,t,r){var n=t.getFlatCoordinates();var i={node:e};i["layout"]=t.getLayout();i["stride"]=t.getStride();var a=t.getProperties();a.coordinates=n;var o=r[r.length-1].node;var s=Jt[o.namespaceURI];var l=Object(M["o"])(a,s);Object(M["u"])(i,er,M["b"],l,r,s)}var rr=Object(M["q"])(k,{outerBoundaryIs:Object(M["k"])(Bt),innerBoundaryIs:Object(M["k"])(Bt)});var nr=Object(M["p"])("innerBoundaryIs");var ir=Object(M["p"])("outerBoundaryIs");function ar(e,t,r){var n=t.getLinearRings();var i=n.shift();var a={node:e};Object(M["u"])(a,rr,nr,n,r);Object(M["u"])(a,rr,ir,[i],r)}var or=Object(M["q"])(k,{color:Object(M["k"])(vt)});var sr=Object(M["p"])("color");function lr(e,t,r){var n={node:e};Object(M["u"])(n,or,sr,[t.getColor()],r)}function ur(e,t){Object(h["l"])(e,Math.round(t*1e6)/1e6)}var cr=Object(M["q"])(k,["IconStyle","LabelStyle","LineStyle","PolyStyle"]);var fr=Object(M["q"])(k,{IconStyle:Object(M["k"])(It),LabelStyle:Object(M["k"])(Rt),LineStyle:Object(M["k"])($t),PolyStyle:Object(M["k"])(lr)});function hr(e,t,r){var n={node:e};var i={};var a=t.getFill();var o=t.getStroke();var s=t.getImage();var l=t.getText();if(s&&typeof s.getSrc==="function"){i["IconStyle"]=s}if(l){i["LabelStyle"]=l}if(o){i["LineStyle"]=o}if(a){i["PolyStyle"]=a}var u=r[r.length-1].node;var c=cr[u.namespaceURI];var f=Object(M["o"])(i,c);Object(M["u"])(n,fr,M["b"],f,r,c)}function dr(e,t){e.setAttribute("x",String(t.x));e.setAttribute("y",String(t.y));e.setAttribute("xunits",t.xunits);e.setAttribute("yunits",t.yunits)}t["a"]=se},function(e,t,r){"use strict";t["a"]={POINT:"point",LINE:"line"}},function(e,t,r){"use strict";var c=r(14);var a=r(8);var f=r(81);var n=r(180);var i=r(4);var h=r(33);var d=r(7);var u=r(35);var p=r(83);var v=r(21);var o=r(10);var g=r(0);var s=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"];var l="http://www.topografix.com/GPX/1/1 "+"http://www.topografix.com/GPX/1/1/gpx.xsd";var m={rte:B,trk:K,wpt:X};var _=Object(g["q"])(s,{rte:Object(g["i"])(B),trk:Object(g["i"])(K),wpt:Object(g["i"])(X)});var y=Object(g["q"])(s,{text:Object(g["m"])(i["h"],"linkText"),type:Object(g["m"])(i["h"],"linkType")});var b=Object(g["q"])(s,{rte:Object(g["k"])(J),trk:Object(g["k"])(ee),wpt:Object(g["k"])(re)});var w=function(r){function e(e){r.call(this);var t=e?e:{};this.dataProjection=Object(o["g"])("EPSG:4326");this.readExtensions_=t.readExtensions}if(r)e.__proto__=r;e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;e.prototype.handleReadExtensions_=function e(t){if(!t){t=[]}for(var r=0,n=t.length;r<n;++r){var i=t[r];if(this.readExtensions_){var a=i.get("extensionsNode_")||null;this.readExtensions_(i,a)}i.set("extensionsNode_",undefined)}};e.prototype.readFeatureFromNode=function e(t,r){if(!Object(a["f"])(s,t.namespaceURI)){return null}var n=m[t.localName];if(!n){return null}var i=n(t,[this.getReadOptions(t,r)]);if(!i){return null}this.handleReadExtensions_([i]);return i};e.prototype.readFeaturesFromNode=function e(t,r){if(!Object(a["f"])(s,t.namespaceURI)){return[]}if(t.localName=="gpx"){var n=Object(g["t"])([],_,t,[this.getReadOptions(t,r)]);if(n){this.handleReadExtensions_(n);return n}else{return[]}}return[]};e.prototype.writeFeaturesNode=function e(t,r){r=this.adaptOptions(r);var n=Object(g["d"])("http://www.topografix.com/GPX/1/1","gpx");var i="http://www.w3.org/2000/xmlns/";n.setAttributeNS(i,"xmlns:xsi",g["c"]);n.setAttributeNS(g["c"],"xsi:schemaLocation",l);n.setAttribute("version","1.1");n.setAttribute("creator","OpenLayers");Object(g["u"])({node:n},b,G,t,[r]);return n};return e}(n["a"]);var S=Object(g["q"])(s,{name:Object(g["m"])(i["h"]),cmt:Object(g["m"])(i["h"]),desc:Object(g["m"])(i["h"]),src:Object(g["m"])(i["h"]),link:W,number:Object(g["m"])(i["f"]),extensions:Y,type:Object(g["m"])(i["h"]),rtept:V});var C=Object(g["q"])(s,{ele:Object(g["m"])(i["d"]),time:Object(g["m"])(i["c"])});var O=Object(g["q"])(s,{name:Object(g["m"])(i["h"]),cmt:Object(g["m"])(i["h"]),desc:Object(g["m"])(i["h"]),src:Object(g["m"])(i["h"]),link:W,number:Object(g["m"])(i["f"]),type:Object(g["m"])(i["h"]),extensions:Y,trkseg:z});var x=Object(g["q"])(s,{trkpt:q});var T=Object(g["q"])(s,{ele:Object(g["m"])(i["d"]),time:Object(g["m"])(i["c"])});var E=Object(g["q"])(s,{ele:Object(g["m"])(i["d"]),time:Object(g["m"])(i["c"]),magvar:Object(g["m"])(i["d"]),geoidheight:Object(g["m"])(i["d"]),name:Object(g["m"])(i["h"]),cmt:Object(g["m"])(i["h"]),desc:Object(g["m"])(i["h"]),src:Object(g["m"])(i["h"]),link:W,sym:Object(g["m"])(i["h"]),type:Object(g["m"])(i["h"]),fix:Object(g["m"])(i["h"]),sat:Object(g["m"])(i["f"]),hdop:Object(g["m"])(i["d"]),vdop:Object(g["m"])(i["d"]),pdop:Object(g["m"])(i["d"]),ageofdgpsdata:Object(g["m"])(i["d"]),dgpsid:Object(g["m"])(i["f"]),extensions:Y});var M=["text","type"];var A=Object(g["q"])(s,{text:Object(g["k"])(i["n"]),type:Object(g["k"])(i["n"])});var k=Object(g["q"])(s,["name","cmt","desc","src","link","number","type","rtept"]);var j=Object(g["q"])(s,{name:Object(g["k"])(i["n"]),cmt:Object(g["k"])(i["n"]),desc:Object(g["k"])(i["n"]),src:Object(g["k"])(i["n"]),link:Object(g["k"])(Z),number:Object(g["k"])(i["m"]),type:Object(g["k"])(i["n"]),rtept:Object(g["j"])(Object(g["k"])(Q))});var I=Object(g["q"])(s,["ele","time"]);var D=Object(g["q"])(s,["name","cmt","desc","src","link","number","type","trkseg"]);var P=Object(g["q"])(s,{name:Object(g["k"])(i["n"]),cmt:Object(g["k"])(i["n"]),desc:Object(g["k"])(i["n"]),src:Object(g["k"])(i["n"]),link:Object(g["k"])(Z),number:Object(g["k"])(i["m"]),type:Object(g["k"])(i["n"]),trkseg:Object(g["j"])(Object(g["k"])(te))});var R=Object(g["p"])("trkpt");var L=Object(g["q"])(s,{trkpt:Object(g["k"])(Q)});var N=Object(g["q"])(s,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]);var $=Object(g["q"])(s,{ele:Object(g["k"])(i["l"]),time:Object(g["k"])(i["k"]),magvar:Object(g["k"])(i["l"]),geoidheight:Object(g["k"])(i["l"]),name:Object(g["k"])(i["n"]),cmt:Object(g["k"])(i["n"]),desc:Object(g["k"])(i["n"]),src:Object(g["k"])(i["n"]),link:Object(g["k"])(Z),sym:Object(g["k"])(i["n"]),type:Object(g["k"])(i["n"]),fix:Object(g["k"])(i["n"]),sat:Object(g["k"])(i["m"]),hdop:Object(g["k"])(i["l"]),vdop:Object(g["k"])(i["l"]),pdop:Object(g["k"])(i["l"]),ageofdgpsdata:Object(g["k"])(i["l"]),dgpsid:Object(g["k"])(i["m"])});var F={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function G(e,t,r){var n=e.getGeometry();if(n){var i=F[n.getType()];if(i){var a=t[t.length-1].node;return Object(g["d"])(a.namespaceURI,i)}}}function U(e,t,r,n){e.push(parseFloat(r.getAttribute("lon")),parseFloat(r.getAttribute("lat")));if("ele"in n){e.push(n["ele"]);delete n["ele"];t.hasZ=true}else{e.push(0)}if("time"in n){e.push(n["time"]);delete n["time"];t.hasM=true}else{e.push(0)}return e}function H(e,t,r){var n=h["a"].XY;var i=2;if(e.hasZ&&e.hasM){n=h["a"].XYZM;i=4}else if(e.hasZ){n=h["a"].XYZ;i=3}else if(e.hasM){n=h["a"].XYM;i=3}if(i!==4){for(var a=0,o=t.length/4;a<o;a++){t[a*i]=t[a*4];t[a*i+1]=t[a*4+1];if(e.hasZ){t[a*i+2]=t[a*4+2]}if(e.hasM){t[a*i+2]=t[a*4+3]}}t.length=t.length/4*i;if(r){for(var s=0,l=r.length;s<l;s++){r[s]=r[s]/4*i}}}return n}function W(e,t){var r=t[t.length-1];var n=e.getAttribute("href");if(n!==null){r["link"]=n}Object(g["s"])(y,e,t)}function Y(e,t){var r=t[t.length-1];r["extensionsNode_"]=e}function V(e,t){var r=Object(g["t"])({},C,e,t);if(r){var n=t[t.length-1];var i=n["flatCoordinates"];var a=n["layoutOptions"];U(i,a,e,r)}}function q(e,t){var r=Object(g["t"])({},T,e,t);if(r){var n=t[t.length-1];var i=n["flatCoordinates"];var a=n["layoutOptions"];U(i,a,e,r)}}function z(e,t){var r=t[t.length-1];Object(g["s"])(x,e,t);var n=r["flatCoordinates"];var i=r["ends"];i.push(n.length)}function B(e,t){var r=t[0];var n=Object(g["t"])({flatCoordinates:[],layoutOptions:{}},S,e,t);if(!n){return undefined}var i=n["flatCoordinates"];delete n["flatCoordinates"];var a=n["layoutOptions"];delete n["layoutOptions"];var o=H(a,i);var s=new u["a"](i,o);Object(f["b"])(s,false,r);var l=new c["a"](s);l.setProperties(n);return l}function K(e,t){var r=t[0];var n=Object(g["t"])({flatCoordinates:[],ends:[],layoutOptions:{}},O,e,t);if(!n){return undefined}var i=n["flatCoordinates"];delete n["flatCoordinates"];var a=n["ends"];delete n["ends"];var o=n["layoutOptions"];delete n["layoutOptions"];var s=H(o,i,a);var l=new p["a"](i,s,a);Object(f["b"])(l,false,r);var u=new c["a"](l);u.setProperties(n);return u}function X(e,t){var r=t[0];var n=Object(g["t"])({},E,e,t);if(!n){return undefined}var i={};var a=U([],i,e,n);var o=H(i,a);var s=new v["a"](a,o);Object(f["b"])(s,false,r);var l=new c["a"](s);l.setProperties(n);return l}function Z(e,t,r){e.setAttribute("href",t);var n=r[r.length-1];var i=n["properties"];var a=[i["linkText"],i["linkType"]];Object(g["u"])({node:e},A,g["b"],a,r,M)}function Q(e,t,r){var n=r[r.length-1];var i=n.node;var a=i.namespaceURI;var o=n["properties"];e.setAttributeNS(null,"lat",String(t[1]));e.setAttributeNS(null,"lon",String(t[0]));var s=n["geometryLayout"];switch(s){case h["a"].XYZM:if(t[3]!==0){o["time"]=t[3]}case h["a"].XYZ:if(t[2]!==0){o["ele"]=t[2]}break;case h["a"].XYM:if(t[2]!==0){o["time"]=t[2]}break;default:}var l=e.nodeName=="rtept"?I[a]:N[a];var u=Object(g["o"])(o,l);Object(g["u"])({node:e,properties:o},$,g["b"],u,r,l)}function J(e,t,r){var n=r[0];var i=t.getProperties();var a={node:e};a["properties"]=i;var o=t.getGeometry();if(o.getType()==d["a"].LINE_STRING){var s=Object(f["b"])(o,true,n);a["geometryLayout"]=s.getLayout();i["rtept"]=s.getCoordinates()}var l=r[r.length-1].node;var u=k[l.namespaceURI];var c=Object(g["o"])(i,u);Object(g["u"])(a,j,g["b"],c,r,u)}function ee(e,t,r){var n=r[0];var i=t.getProperties();var a={node:e};a["properties"]=i;var o=t.getGeometry();if(o.getType()==d["a"].MULTI_LINE_STRING){var s=Object(f["b"])(o,true,n);i["trkseg"]=s.getLineStrings()}var l=r[r.length-1].node;var u=D[l.namespaceURI];var c=Object(g["o"])(i,u);Object(g["u"])(a,P,g["b"],c,r,u)}function te(e,t,r){var n={node:e};n["geometryLayout"]=t.getLayout();n["properties"]={};Object(g["u"])(n,L,R,t.getCoordinates(),r)}function re(e,t,r){var n=r[0];var i=r[r.length-1];i["properties"]=t.getProperties();var a=t.getGeometry();if(a.getType()==d["a"].POINT){var o=Object(f["b"])(a,true,n);i["geometryLayout"]=o.getLayout();Q(e,o.getCoordinates(),r)}}t["a"]=w},function(e,t,r){"use strict";var n=r(316);var i=r(219);var d=r(42);var p=r(8);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function o(e,t,r){if(t)a(e.prototype,t);if(r)a(e,r);return e}var s=function(){e.$inject=["$q","gmfEnumerateAttribute","ngeoDataSourcesHelper"];function e(e,t,r){this.q_=e;this.gmfEnumerateAttribute_=t;this.ngeoDataSourcesHelper_=r;this.collection_;this.cache_}var t=e.prototype;t.getDataSource=function e(t){return this.ngeoDataSourcesHelper_.getDataSource(t)};t.prepareFiltrableDataSource=function e(c){var f=this;var h=this.q_.defer();this.ngeoDataSourcesHelper_.getDataSourceAttributes(c).then(function(e){var t=c.gmfLayer.metadata||{};var n=t.enumeratedAttributes;if(n&&n.length){var i=[];var r=function e(){if(o){if(s>=a.length)return"break";l=a[s++]}else{s=a.next();if(s.done)return"break";l=s.value}var r=l;if(p["f"](n,r.name)&&r.type!==d["a"].SELECT&&(!r.choices||!r.choices.length)){i.push(f.gmfEnumerateAttribute_.getAttributeValues(c,r.name).then(function(e){var t=e.map(function(e){return e.value});r.type=d["a"].SELECT;r.choices=t}))}};for(var a=e,o=Array.isArray(a),s=0,a=o?a:a[Symbol.iterator]();;){var l;var u=r();if(u==="break")break}return f.q_.all(i).then(h.resolve(c))}else{h.resolve(c)}});return h.promise};o(e,[{key:"collection",get:function e(){return this.ngeoDataSourcesHelper_.collection}}]);return e}();s.module=angular.module("gmfDataSourcesHelper",[i["a"].module.name,n["a"].module.name]);s.module.service("gmfDataSourcesHelper",s);t["a"]=s},function(e,t,r){"use strict";var n=function(){e.$inject=["$http","gmfLayersUrl"];function e(e,t){this.http_=e;this.baseUrl_=t;this.promises_={}}var t=e.prototype;t.getAttributeValues=function e(t,r){var n=t.id+"_"+r;var i=t.name;if(!this.promises_[n]){var a=this.baseUrl_+"/"+i+"/values/"+r;this.promises_[n]=this.http_.get(a).then(this.handleGetAttributeValues_.bind(this))}return this.promises_[n]};t.handleGetAttributeValues_=function e(t){var r=t.data;return r.items};return e}();n.module=angular.module("gmfEnumerateAttribute",[]);n.module.service("gmfEnumerateAttribute",n);t["a"]=n},function(e,t,r){"use strict";var n=r(42);var i={};i.setGeometryType=function(e,t){var r=/gml:((Multi)?(Point|Line|Polygon|Curve|Surface|Geometry)).*/;if(r.exec(t)){e.type=n["a"].GEOMETRY;if(/^gml:Point/.exec(t)){e.geomType="Point"}else if(/^gml:LineString|^gml:Curve/.exec(t)){e.geomType="LineString"}else if(/^gml:Polygon|^gml:Surface/.exec(t)){e.geomType="Polygon"}else if(/^gml:MultiPoint/.exec(t)){e.geomType="MultiPoint"}else if(/^gml:MultiLineString|^gml:MultiCurve/.exec(t)){e.geomType="MultiLineString"}else if(/^gml:MultiPolygon|^gml:MultiSurface/.exec(t)){e.geomType="MultiPolygon"}}return!!e.type&&!!e.geomType};t["a"]=i},function(e,t,r){var n;var i=i||function(c){"use strict";if(typeof c==="undefined"||typeof navigator!=="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent)){return}var e=c.document,f=function e(){return c.URL||c.webkitURL||c},h=e.createElementNS("http://www.w3.org/1999/xhtml","a"),d="download"in h,p=function e(t){var r=new MouseEvent("click");t.dispatchEvent(r)},v=/constructor/i.test(c.HTMLElement)||c.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent),o=function e(t){(c.setImmediate||c.setTimeout)(function(){throw t},0)},m="application/octet-stream",n=1e3*40,_=function e(t){var r=function e(){if(typeof t==="string"){f().revokeObjectURL(t)}else{t.remove()}};setTimeout(r,n)},y=function e(t,r,n){r=[].concat(r);var i=r.length;while(i--){var a=t["on"+r[i]];if(typeof a==="function"){try{a.call(t,n||t)}catch(e){o(e)}}}},b=function e(t){if(/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)){return new Blob([String.fromCharCode(65279),t],{type:t.type})}return t},i=function e(n,t,r){if(!r){n=b(n)}var i=this,a=n.type,o=a===m,s,l=function e(){y(i,"writestart progress write writeend".split(" "))},u=function e(){if((g||o&&v)&&c.FileReader){var r=new FileReader;r.onloadend=function(){var e=g?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");var t=c.open(e,"_blank");if(!t)c.location.href=e;e=undefined;i.readyState=i.DONE;l()};r.readAsDataURL(n);i.readyState=i.INIT;return}if(!s){s=f().createObjectURL(n)}if(o){c.location.href=s}else{var t=c.open(s,"_blank");if(!t){c.location.href=s}}i.readyState=i.DONE;l();_(s)};i.readyState=i.INIT;if(d){s=f().createObjectURL(n);setTimeout(function(){h.href=s;h.download=t;p(h);l();_(s);i.readyState=i.DONE});return}u()},t=i.prototype,r=function e(t,r,n){return new i(t,r||t.name||"download",n)};if(typeof navigator!=="undefined"&&navigator.msSaveOrOpenBlob){return function(e,t,r){t=t||e.name||"download";if(!r){e=b(e)}return navigator.msSaveOrOpenBlob(e,t)}}t.abort=function(){};t.readyState=t.INIT=0;t.WRITING=1;t.DONE=2;t.error=t.onwritestart=t.onprogress=t.onwrite=t.onabort=t.onerror=t.onwriteend=null;return r}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this.content);if(true&&e.exports){e.exports.saveAs=i}else if(true&&r(432)!==null&&r(433)!==null){!(n=function(){return i}.call(t,r,t,e),n!==undefined&&(e.exports=n))}},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var s=r(37);function n(e,t,r){var n=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),a=0,o;for(o=0;o<n;o++){if(r&&e[o]!==t[o]||!r&&Object(s["a"])(e[o])!==Object(s["a"])(t[o])){a++}}return a+i}},function(e,t,r){"use strict";r.d(t,"b",function(){return n});r.d(t,"a",function(){return a});var i=r(122);var n={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function a(e,t,r){var n=this._calendar[e]||this._calendar["sameElse"];return Object(i["a"])(n)?n.call(t,r):n}},function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"b",function(){return i});var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function i(e){var t=this._longDateFormat[e],r=this._longDateFormat[e.toUpperCase()];if(t||!r){return t}this._longDateFormat[e]=r.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)});return this._longDateFormat[e]}},function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"b",function(){return i});var n="Invalid date";function i(){return this._invalidDate}},function(e,t,r){"use strict";var n=r(219);var i=function(){e.$inject=["ngeoDataSourcesHelper"];function e(e){this.ngeoDataSourcesHelper_=e}var t=e.prototype;t.describe=function e(t){if(t.ogcServerType==="qgisserver"&&t.wfsUrl_&&t.getOGCLayerNames().length==1&&!t.attributes){this.ngeoDataSourcesHelper_.getDataSourceAttributes(t)}};return e}();i.module=angular.module("gmfDatasourceWFSAliases",[n["a"].module.name]);i.module.service("gmfWFSAliases",i);t["a"]=i},function(e,t,r){"use strict";var n=angular.module("ngeoColorpicker",[]);n.value("ngeoColorpickerTemplateUrl",function(e,t){var r=t["ngeoColorpickerTemplateurl"];return r!==undefined?r:"ngeo/misc/colorpickerComponent"});n.run(["$templateCache",function(e){e.put("ngeo/misc/colorpickerComponent",r(437))}]);n.component_=function(e){return{restrict:"A",scope:{colors:"<?ngeoColorpicker",color:"=?ngeoColorpickerColor"},controller:"NgeoColorpickerController as ctrl",bindToController:true,templateUrl:e}};n.component_.$inject=["ngeoColorpickerTemplateUrl"];n.directive("ngeoColorpicker",n.component_);n.DEFAULT_COLORS=[["#F4EB37","#CDDC39","#62AF44","#009D57","#0BA9CC","#4186F0","#3F5BA9","#7C3592","#A61B4A","#DB4436","#F8971B","#F4B400","#795046"],["#F9F7A6","#E6EEA3","#B7DBAB","#7CCFA9","#93D7E8","#9FC3FF","#A7B5D7","#C6A4CF","#D698AD","#EE9C96","#FAD199","#FFDD5E","#B29189"],["#ffffff","#CCCCCC","#777","#000000"]];n.Controller_=function(e,t,r){this.colors=this.colors||n.DEFAULT_COLORS;this.color};n.Controller_.$inject=["$scope","$element","$attrs"];n.Controller_.prototype.setColor=function(e){this.color=e};n.controller("NgeoColorpickerController",n.Controller_);t["a"]=n},function(e,t,r){"use strict";var o=r(19);var s=r(2);var l=r(112);var n=angular.module("ngeoDrawpoint",[]);n.directive_=function(){return{restrict:"A",require:"^^ngeoDrawfeature",link:function e(t,r,n,i){var a=new l["a"]({type:"Point"});i.registerInteraction(a);i.drawPoint=a;s["a"](a,"drawend",i.handleDrawEnd.bind(i,o["a"].POINT),i);s["a"](a,"change:active",i.handleActiveChange,i)}}};n.directive("ngeoDrawpoint",n.directive_);t["a"]=n},function(e,t,r){"use strict";var n=r(270);var i=function(a){function e(e,t,r,n,i){a.call(this,e,t,i);this.originalEvent=r;this.pixel=t.getEventPixel(r);this.coordinate=t.getCoordinateFromPixel(this.pixel);this.dragging=n!==undefined?n:false}if(a)e.__proto__=a;e.prototype=Object.create(a&&a.prototype);e.prototype.constructor=e;e.prototype.preventDefault=function e(){a.prototype.preventDefault.call(this);this.originalEvent.preventDefault()};e.prototype.stopPropagation=function e(){a.prototype.stopPropagation.call(this);this.originalEvent.stopPropagation()};return e}(n["a"]);t["a"]=i},function(e,t,r){"use strict";var o=r(19);var s=r(2);var l=r(112);var u=r(31);var n=angular.module("ngeoDrawrectangle",[]);n.directive_=function(){return{restrict:"A",require:"^^ngeoDrawfeature",link:function e(t,r,n,i){var a=new l["a"]({type:"LineString",geometryFunction:function e(t,r){if(!r){r=new u["a"]([])}var n=t[0];var i=t[1];r.setCoordinates([[n,[n[0],i[1]],i,[i[0],n[1]],n]]);return r},maxPoints:2});i.registerInteraction(a);i.drawRectangle=a;s["a"](a,"drawend",i.handleDrawEnd.bind(i,o["a"].RECTANGLE),i);s["a"](a,"change:active",i.handleActiveChange,i)}}};n.directive("ngeoDrawrectangle",n.directive_);t["a"]=n},function(e,t,r){"use strict";var o=r(19);var s=r(2);var l=r(112);var n=angular.module("ngeoDrawtext",[]);n.directive_=function(){return{restrict:"A",require:"^^ngeoDrawfeature",link:function e(t,r,n,i){var a=new l["a"]({type:"Point"});i.registerInteraction(a);i.drawText=a;s["a"](a,"drawend",i.handleDrawEnd.bind(i,o["a"].TEXT),i);s["a"](a,"change:active",i.handleActiveChange,i)}}};n.directive("ngeoDrawtext",n.directive_);t["a"]=n},function(e,t,r){"use strict";var n=r(183);var h=r(19);var d=r(290);var p=r(2);var v=r(11);var i=angular.module("ngeoMeasurearea",[n["a"].module.name]);i.directive_=function(l,u,c,f){return{restrict:"A",require:"^^ngeoDrawfeature",link:function e(t,r,n,i){var a=u.getString("Click to start drawing polygon");var o=u.getString("Click to continue drawing<br>"+"Double-click or click starting point to finish");var s=new d["a"](c("ngeoUnitPrefix"),u,{style:new v["c"],startMsg:l("<div translate>"+a+"</div>")(t)[0],continueMsg:l("<div translate>"+o+"</div>")(t)[0],precision:f.has("ngeoMeasurePrecision")?f.get("ngeoMeasurePrecision"):undefined});i.registerInteraction(s);i.measureArea=s;p["a"](s,"measureend",i.handleDrawEnd.bind(i,h["a"].POLYGON),i);p["a"](s,"change:active",i.handleActiveChange,i)}}};i.directive_.$inject=["$compile","gettextCatalog","$filter","$injector"];i.directive("ngeoMeasurearea",i.directive_);t["a"]=i},function(e,t,r){"use strict";var n=r(183);var i=r(118);var h=r(19);var d=r(240);var p=r(2);var v=r(14);var g=r(31);var m=r(11);var a=angular.module("ngeoMeasureazimut",[n["a"].module.name,i["a"].name]);a.directive_=function(l,u,c,f){return{restrict:"A",require:"^^ngeoDrawfeature",link:function e(t,r,n,a){var i=u.getString("Click to start drawing circle");var o=u.getString("Click to finish");var s=new d["a"](c("ngeoUnitPrefix"),c("number"),{style:new m["c"],startMsg:l("<div translate>"+i+"</div>")(t)[0],continueMsg:l("<div translate>"+o+"</div>")(t)[0],precision:f.has("ngeoMeasurePrecision")?f.get("ngeoMeasurePrecision"):undefined,decimals:f.has("ngeoMeasureDecimals")?f.get("ngeoMeasureDecimals"):undefined});a.registerInteraction(s);a.measureAzimut=s;p["a"](s,"measureend",function(e){var t=e.detail.feature.getGeometry();var r=t.getGeometries()[1];var n=Object(g["b"])(r,64);e.detail.feature=new v["a"](n);var i=d["a"].getAzimut(t.getGeometries()[0]);e.detail.feature.set("azimut",i);a.handleDrawEnd(h["a"].CIRCLE,e)},a);p["a"](s,"change:active",a.handleActiveChange,a)}}};a.directive_.$inject=["$compile","gettextCatalog","$filter","$injector"];a.directive("ngeoMeasureazimut",a.directive_);t["a"]=a},function(e,t,r){"use strict";var n=r(183);var i=r(118);var h=r(19);var d=r(225);var p=r(2);var v=r(11);var a=angular.module("ngeoMeasurelength",[n["a"].module.name,i["a"].name]);a.directive_=function(l,u,c,f){return{restrict:"A",require:"^^ngeoDrawfeature",link:function e(t,r,n,i){var a=u.getString("Click to start drawing line");var o=u.getString("Click to continue drawing<br>"+"Double-click or click last point to finish");var s=new d["a"](c("ngeoUnitPrefix"),u,{style:new v["c"],startMsg:l("<div translate>"+a+"</div>")(t)[0],continueMsg:l("<div translate>"+o+"</div>")(t)[0],precision:f.has("ngeoMeasurePrecision")?f.get("ngeoMeasurePrecision"):undefined});i.registerInteraction(s);i.measureLength=s;p["a"](s,"measureend",i.handleDrawEnd.bind(i,h["a"].LINE_STRING),i);p["a"](s,"change:active",i.handleActiveChange,i)}}};a.directive_.$inject=["$compile","gettextCatalog","$filter","$injector"];a.directive("ngeoMeasurelength",a.directive_);t["a"]=a},function(e,t,r){"use strict";var o=r(1);var s=r(196);var n=r(74);var i=r(22);var a=angular.module("GmfEditingFeatureSelectorComponent",[s["a"].name,n["a"].module.name,i["a"].module.name]);a.run(["$templateCache",function(e){e.put("gmf/editing/editFeatureSelectorComponent",r(444))}]);a.component_=function(){return{controller:"GmfEditfeatureselectorController as efsCtrl",scope:{active:"=gmfEditfeatureselectorActive",map:"<gmfEditfeatureselectorMap",tolerance:"<?gmfEditfeatureselectorTolerance",vectorLayer:"<gmfEditfeatureselectorVector"},bindToController:true,templateUrl:"gmf/editing/editFeatureSelectorComponent"}};a.directive("gmfEditfeatureselector",a.component_);a.Controller_=function(e,t,r,n){var i=this;this.active=this.active===true;e.$watch(function(){return i.active},this.handleActiveChange_.bind(this));this.map;this.tolerance;this.vectorLayer;this.scope_=e;this.$timeout_=t;this.gmfThemes_=r;this.gmfTreeManager_=n;var a=function e(r){var n=this;this.$timeout_(function(){if(r){var t=n.editableTreeCtrls;t.length=0;n.gmfTreeManager_.rootCtrl.traverseDepthFirst(function(e){if(e.node.editable){o["a"].assert(e.children.length===0);t.push(e)}})}},0)};this.treeCtrlsWatcherUnregister_=e.$watchCollection(function(){if(n.rootCtrl){return n.rootCtrl.children}},a.bind(this));this.dirty=false;this.editableTreeCtrls=[];this.selectedEditableTreeCtrl=null;e.$watch(function(){return i.selectedEditableTreeCtrl},function(e,t){i.dirty=false;i.state=s["a"].State.IDLE});this.state=s["a"].State.IDLE;e.$watch(function(){return i.state},function(e,t){if(e===s["a"].State.STOP_EDITING_EXECUTE||e===s["a"].State.DEACTIVATE_EXECUTE){i.selectedEditableTreeCtrl=null}if(e===s["a"].State.DEACTIVATE_EXECUTE){i.active=false}});e.$on("$destroy",this.handleDestroy_.bind(this))};a.Controller_.$inject=["$scope","$timeout","gmfThemes","gmfTreeManager"];a.Controller_.prototype.stopEditing=function(){this.state=s["a"].State.STOP_EDITING_PENDING};a.Controller_.prototype.handleActiveChange_=function(e){var t=this;if(!e){if(!this.dirty){this.stopEditing()}else{this.$timeout_(function(){t.active=true;t.stopEditing()})}}};a.Controller_.prototype.handleDestroy_=function(){this.treeCtrlsWatcherUnregister_()};a.controller("GmfEditfeatureselectorController",a.Controller_);t["a"]=a},function(e,t,r){"use strict";var p=r(1);var n=r(144);var a=r(174);var i=r(334);var o=r(162);var v=r(42);var s=r(109);var l=r(239);var u=r(5);var c=r(8);var f=r(297);var h=r.n(f);var d=angular.module("ngeoFilter",[o["a"].module.name,i["a"].name,l["a"].module.name,n["a"].module.name]);d.run(["$templateCache",function(e){e.put("ngeo/filter",r(473))}]);d.value("ngeoFilterTemplateUrl",function(e){var t=e["ngeoFilterTemplateUrl"];return t!==undefined?t:"ngeo/filter"});g.$inject=["$attrs","ngeoFilterTemplateUrl"];function g(e,t){return t(e)}d.component("ngeoFilter",{bindings:{aRuleIsActive:"=",customRules:"<",datasource:"<",directedRules:"<",featureOverlay:"<",map:"<",toolGroup:"<"},controller:"ngeoFilterController",templateUrl:g});d.FilterController_=function(){e.$inject=["gettextCatalog","$scope","$timeout","ngeoMapQuerent","ngeoRuleHelper"];function e(e,t,r,n,i){this.aRuleIsActive;this.customRules;this.datasource;this.directedRules;this.featureOverlay;this.map;this.toolGroup;this.gettextCatalog_=e;this.scope_=t;this.timeout_=r;this.ngeoMapQuerent_=n;this.ngeoRuleHelper_=i;this.conditions=[{text:e.getString("All"),value:a["a"].AND},{text:e.getString("At least one"),value:a["a"].OR},{text:e.getString("None"),value:a["a"].NOT}];this.geometryAttributes=[];this.otherAttributes=[];this.ruleUnlisteners_={}}var t=e.prototype;t.$onInit=function e(){var t=this;this.scope_.$watch(function(){return t.aRuleIsActive},this.handleARuleIsActiveChange_.bind(this));var r=p["a"].assert(this.datasource.attributes);for(var n=r,i=Array.isArray(n),a=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(a>=n.length)break;o=n[a++]}else{a=n.next();if(a.done)break;o=a.value}var s=o;if(s.type===v["a"].GEOMETRY){this.geometryAttributes.push(s)}else{this.otherAttributes.push(s)}}var l=[].concat(this.customRules,this.directedRules);for(var u=l,c=Array.isArray(u),f=0,u=c?u:u[Symbol.iterator]();;){var h;if(c){if(f>=u.length)break;h=u[f++]}else{f=u.next();if(f.done)break;h=f.value}var d=h;this.registerRule_(d)}this.apply()};t.$onDestroy=function e(){if(this.datasource.filterRules!==null){this.datasource.filterRules=null}this.featureOverlay.clear()};t.hasARule=function e(){return[].concat(this.customRules,this.directedRules).length>0};t.apply=function e(){var t=this;this.datasource.filterRules=null;this.timeout_(function(){var e=t.getRulesWithValue_();if(e.length){t.datasource.filterRules=e;t.ngeoMapQuerent_.clear()}})};t.getData=function e(){var t=this.getRulesWithValue_();if(!t.length){return}var r=this.datasource;var n=1e3;var i=this.map;var a=i.getView().getProjection().getCode();var o=this.ngeoRuleHelper_.createFilter({dataSource:r,filterRules:t,srsName:a});p["a"].assert(o);this.ngeoMapQuerent_.issue({dataSources:[r],filter:o,limit:n,map:i})};t.getRulesWithValue_=function e(){var t=[];var r=[].concat(this.customRules,this.directedRules);for(var n=r,i=Array.isArray(n),a=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(a>=n.length)break;o=n[a++]}else{a=n.next();if(a.done)break;o=a.value}var s=o;if(s.value){t.push(s)}}return t};t.createAndAddCustomRule=function e(t){var r=this.ngeoRuleHelper_.createRuleFromAttribute(t,true);this.registerRule_(r);this.customRules.push(r);this.timeout_(function(){r.active=true},1)};t.setCondition=function e(t){if(this.datasource.filterCondition!==t.value){this.datasource.filterCondition=t.value}};t.removeCustomRule=function e(t){var r=this;t.active=false;this.timeout_(function(){c["j"](r.customRules,t);r.unregisterRule_(t);t.destroy()})};t.registerRule_=function e(t){var r=u["c"](t);this.ruleUnlisteners_[r]=this.scope_.$watch(function(){return t.active},this.handleRuleActiveChange_.bind(this));if(t instanceof s["a"]){this.featureOverlay.addFeature(t.feature)}};t.unregisterRule_=function e(t){var r=u["c"](t);var n=this.ruleUnlisteners_[r];p["a"].assert(n);n();delete this.ruleUnlisteners_[r];if(t instanceof s["a"]){this.featureOverlay.removeFeature(t.feature)}};t.handleRuleActiveChange_=function e(){var t=false;var r=[].concat(this.customRules,this.directedRules);for(var n=r,i=Array.isArray(n),a=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(a>=n.length)break;o=n[a++]}else{a=n.next();if(a.done)break;o=a.value}var s=o;if(s.active){t=true;break}}this.aRuleIsActive=t};t.handleARuleIsActiveChange_=function e(){if(this.aRuleIsActive){return}var t=[].concat(this.customRules,this.directedRules);for(var r=t,n=Array.isArray(r),i=0,r=n?r:r[Symbol.iterator]();;){var a;if(n){if(i>=r.length)break;a=r[i++]}else{i=r.next();if(i.done)break;a=i.value}var o=a;if(o.active){o.active=false;break}}};return e}();d.controller("ngeoFilterController",d.FilterController_);t["a"]=d},function(e,t,r){"use strict";var u=r(1);var c=r(237);var n=r(257);var i=r(162);var o=r(42);var f=r(19);var h=r(366);var d=r(259);var p=r(260);var a=r(239);var s=r(264);var l=r(100);var v=r(62);var g=r(61);var m=r(92);var _=r(52);var y=r(109);var b=r(203);var w=r(5);var S=r(14);var C=r(23);var O=r(2);var x=r(8);var T=r(11);var E=r(138);var M=r(30);var A=r(150);var k=r(297);var j=r.n(k);var I=angular.module("ngeoRule",[n["a"].name,i["a"].module.name,a["a"].module.name,s["a"].name,v["a"].module.name,m["a"].module.name]);I.run(["$templateCache",function(e){e.put("ngeo/filter/rulecomponent",r(472))}]);I.value("ngeoRuleTemplateUrl",function(e){var t=e["ngeoRuleTemplateUrl"];return t!==undefined?t:"ngeo/filter/rulecomponent"});D.$inject=["$attrs","ngeoRuleTemplateUrl"];function D(e,t){return t(e)}I.RuleController_=function(){e.$inject=["gettextCatalog","$scope","$timeout","ngeoFeatureHelper","ngeoRuleHelper","ngeoToolActivateMgr"];function e(e,t,r,n,i,a){var o,s;this.featureOverlay;this.map;this.rule;this.toolGroup;this.gettextCatalog_=e;this.scope_=t;this.timeout_=r;this.ngeoFeatureHelper_=n;this.ngeoRuleHelper_=i;this.ngeoToolActivateMgr_=a;this.clone;var l=_["a"].OperatorType;var u=_["a"].SpatialOperatorType;var c=_["a"].TemporalOperatorType;this.operators=(o={},o[l.EQUAL_TO]=e.getString("Is equal to"),o[l.GREATER_THAN]=e.getString("Is greater than"),o[l.GREATER_THAN_OR_EQUAL_TO]=e.getString("Is greater than or equal to"),o[l.LESSER_THAN]=e.getString("Is lesser than"),o[l.LESSER_THAN_OR_EQUAL_TO]=e.getString("Is lesser than or equal to"),o[l.NOT_EQUAL_TO]=e.getString("Is not equal to"),o[l.LIKE]=e.getString("Contains"),o[u.CONTAINS]=e.getString("Contains"),o[u.INTERSECTS]=e.getString("Intersects"),o[u.WITHIN]=e.getString("Is inside of"),o[c.BEGINS]=e.getString("Begins at"),o[c.DURING]=e.getString("During"),o[c.ENDS]=e.getString("Ends at"),o[c.EQUALS]=e.getString("Is equal to"),o);this.operatorsShortFormat=(s={},s[l.EQUAL_TO]="=",s[l.GREATER_THAN]=">",s[l.GREATER_THAN_OR_EQUAL_TO]=">=",s[l.LESSER_THAN]="<",s[l.LESSER_THAN_OR_EQUAL_TO]="<=",s[l.NOT_EQUAL_TO]="!=",s[l.LIKE]="~",s[c.BEGINS]=">=",s[c.ENDS]="<=",s[c.EQUALS]="=",s);this.timeRangeMode={widget:"datepicker",maxValue:null,minValue:null,maxDefValue:this.createDate_(),minDefValue:this.createWeekAgoDate_(),mode:"range",interval:[0,1,0,0]};this.timeValueMode={widget:"datepicker",maxValue:null,minValue:null,maxDefValue:this.createDate_(),minDefValue:this.createDate_(),mode:"value",interval:[0,1,0,0]};this.toolActivate_;this.unlisteners_=[];this.drawActive=false;this.drawToolActivate=new g["a"](this,"drawActive");this.drawnFeatures=new C["a"];this.menu_=null;this.selectedFeatures=new C["a"];this.interactions_=new C["a"];this.modify_=new h["a"]({features:this.selectedFeatures,style:n.getVertexStyle(false)});this.interactions_.push(this.modify_);this.rotate_=new d["a"]({features:this.selectedFeatures,style:new T["c"]({text:new E["a"]({text:"",font:"normal 18px FontAwesome",fill:new M["a"]({color:"#7a7a7a"})})})});this.interactions_.push(this.rotate_);this.translate_=new p["a"]({features:this.selectedFeatures,style:new T["c"]({text:new E["a"]({text:"",font:"normal 18px FontAwesome",fill:new M["a"]({color:"#7a7a7a"})})})});this.interactions_.push(this.translate_);this.listenerKeys_=[];this.initializeInteractions_();this.modifyToolActivate=new g["a"](this.modify_,"active");this.rotateToolActivate=new g["a"](this.rotate_,"active");this.translateToolActivate=new g["a"](this.translate_,"active");this.geomType=null}var t=e.prototype;t.$onInit=function e(){var a=this;this.clone=this.ngeoRuleHelper_.cloneRule(this.rule);this.toolActivate_=new g["a"](this.rule,"active");this.ngeoToolActivateMgr_.registerTool(this.toolGroup,this.toolActivate_);this.scope_.$watch(function(){return a.rule.active},this.handleActiveChange_.bind(this));if(this.clone.type===o["a"].DATE||this.clone.type===o["a"].DATETIME){this.unlisteners_.push(this.scope_.$watch(function(){return a.clone.getExpression()},function(e){a.timeValueMode.minValue=e}));this.unlisteners_.push(this.scope_.$watch(function(){return a.clone.lowerBoundary},function(e){a.timeRangeMode.minValue=e}));this.unlisteners_.push(this.scope_.$watch(function(){return a.clone.upperBoundary},function(e){a.timeRangeMode.maxValue=e}))}else if(this.clone.type===o["a"].GEOMETRY){this.unlisteners_.push(this.scope_.$watch(function(){return a.clone.operator},function(e){if(e&&e===_["a"].SpatialOperatorType.CONTAINS){var t=u["a"].assertInstanceof(a.clone,y["a"]);var r=t.feature.getGeometry();if(r){var n=a.ngeoFeatureHelper_.getType(t.feature);var i=[f["a"].CIRCLE,f["a"].POLYGON,f["a"].RECTANGLE];if(!x["f"](i,n)){a.clone.setExpression(null)}}}}));this.unlisteners_.push(this.scope_.$watch(function(){return a.clone.expression},function(e){if(e){var t=u["a"].assertInstanceof(a.clone,y["a"]);a.geomType=a.ngeoFeatureHelper_.getType(t.feature)}else{a.geomType=null}}));this.unlisteners_.push(this.scope_.$watch(function(){var e=a.clone.getExpression()!==null;var t=a.rule.active===true;var r=a.modify_.getActive()||a.rotate_.getActive()||a.translate_.getActive();return e&&t&&r},function(e){if(e){var t=u["a"].assertInstanceof(a.clone,y["a"]);a.selectedFeatures.push(t.feature)}else{a.selectedFeatures.clear()}}))}};t.$onDestroy=function e(){if(this.rule.active){this.rule.active=false;this.handleActiveChange_(false,true)}this.ngeoToolActivateMgr_.unregisterTool(this.toolGroup,this.toolActivate_);for(var t=0,r=this.unlisteners_.length;t<r;t++){this.unlisteners_[t]()}this.unlisteners_.length=0;this.clone.destroy()};t.toggle=function e(){if(this.rule.active){this.cancel()}else{this.rule.active=true}};t.apply=function e(){this.ngeoRuleHelper_.extendRule(this.clone,this.rule);this.rule.active=false};t.cancel=function e(){this.ngeoRuleHelper_.extendRule(this.rule,this.clone);this.rule.active=false};t.reset=function e(){this.clone.reset();this.rule.reset()};t.toggleChoiceSelection=function e(t){var r=u["a"].assertInstanceof(this.clone,b["a"]);var n=r.getExpression()?r.getExpression().split(","):[];var i=n.indexOf(t);if(i>-1){n.splice(i,1)}else{n.push(t)}r.setExpression(n.length?n.join(","):null)};t.onDateSelected=function e(t){this.clone.setExpression(t["start"])};t.onDateRangeSelected=function e(t){this.clone.lowerBoundary=t["start"];this.clone.upperBoundary=t["end"]};t.createDate_=function e(t){var r=new Date;if(t!==undefined){var n=r.getTime()-t;r.setTime(n)}return r.toISOString()};t.createWeekAgoDate_=function e(){return this.createDate_(1e3*60*60*24*7)};t.timeToDate=function e(t){var r=new Date(t);return r.toLocaleDateString()};t.handleActiveChange_=function e(t,r){if(!(this.rule instanceof y["a"])||!(this.clone instanceof y["a"])||t===r){return}var n=this.listenerKeys_;var i=["ngeo-rule-",w["c"](this)].join("-");var a=this.ngeoToolActivateMgr_;var o=this.rule.feature;var s=this.clone.feature;var l=this.map.getViewport();u["a"].assertElement(l);if(t){n.push(O["a"](this.drawnFeatures,"add",this.handleFeaturesAdd_,this));n.push(O["a"](l,"contextmenu",this.handleMapContextMenu_,this));n.push(O["a"](this.translate_,"translateend",this.handleTranslateEnd_,this));n.push(O["a"](this.rotate_,"rotateend",this.handleRotateEnd_,this));this.featureOverlay.removeFeature(o);this.featureOverlay.addFeature(s);this.registerInteractions_();a.registerTool(i,this.drawToolActivate,false);a.registerTool(i,this.modifyToolActivate,true);a.registerTool(i,this.rotateToolActivate,false);a.registerTool(i,this.translateToolActivate,false);this.modify_.setActive(true);if(s.getGeometry()){this.ngeoFeatureHelper_.setStyle(s,true)}}else{s.setStyle(null);n.forEach(O["e"]);n.length=0;this.drawActive=false;a.unregisterTool(i,this.drawToolActivate);a.unregisterTool(i,this.modifyToolActivate);a.unregisterTool(i,this.rotateToolActivate);a.unregisterTool(i,this.translateToolActivate);this.modify_.setActive(false);this.unregisterInteractions_();if(this.selectedFeatures.getLength()){this.featureOverlay.removeFeature(s)}this.featureOverlay.addFeature(o);this.selectedFeatures.clear()}};t.initializeInteractions_=function e(){this.interactions_.forEach(function(e){e.setActive(false);l["a"].interaction(e)})};t.registerInteractions_=function e(){var t=this;this.interactions_.forEach(function(e){t.map.addInteraction(e)})};t.unregisterInteractions_=function e(){var t=this;this.interactions_.forEach(function(e){t.map.removeInteraction(e)})};t.handleFeaturesAdd_=function e(a){var o=this;this.timeout_(function(){var e=u["a"].assertInstanceof(o.clone,y["a"]);var t=e.feature;var r=u["a"].assertInstanceof(a.element,S["a"]);var n=u["a"].assertInstanceof(r.getGeometry(),A["a"]);e.geometry=n;o.drawActive=false;var i=o.ngeoFeatureHelper_.getNonSpatialProperties(r);o.ngeoFeatureHelper_.clearNonSpatialProperties(t);t.setProperties(i);o.ngeoFeatureHelper_.setStyle(t,true);o.scope_.$apply()})};t.getRuleGeometryType=function e(){var t=u["a"].assertInstanceof(this.rule,y["a"]);return this.ngeoFeatureHelper_.getType(t.feature)};t.handleMapContextMenu_=function e(t){var r=this;this.removeMenu_();var n=this.map.getEventPixel(t);var i=this.map.getCoordinateFromPixel(n);var a=this.map.forEachFeatureAtPixel(n,function(e){var t=false;if(x["f"](r.selectedFeatures.getArray(),e)){t=e}return t});a=a?a:null;var o=[];if(a){var s=this.ngeoFeatureHelper_.getType(a);var l=this.gettextCatalog_;if(s==f["a"].CIRCLE||s==f["a"].LINE_STRING||s==f["a"].POLYGON||s==f["a"].RECTANGLE){o.push({cls:"fas fa-arrows-alt",label:l.getString("Move"),name:"move"})}if(s==f["a"].LINE_STRING||s==f["a"].POLYGON||s==f["a"].RECTANGLE){o.push({cls:"fas fa-undo fa-flip-horizontal",label:l.getString("Rotate"),name:"rotate"})}}if(o.length){this.menu_=new c["a"]({actions:o});O["a"](this.menu_,"actionclick",this.handleMenuActionClick_,this);this.map.addOverlay(this.menu_);this.menu_.open(i);t.preventDefault();t.stopPropagation();this.scope_.$apply()}};t.removeMenu_=function e(){if(this.menu_){O["c"](this.menu_,"actionclick",this.handleMenuActionClick_,this);this.map.removeOverlay(this.menu_);this.menu_=null}};t.handleMenuActionClick_=function e(t){var r=t.detail.action;switch(r){case"move":this.translate_.setActive(true);this.scope_.$apply();break;case"rotate":this.rotate_.setActive(true);this.scope_.$apply();break;default:console.log("FIXME - support: "+r);break}};t.handleRotateEnd_=function e(t){this.rotate_.setActive(false);this.scope_.$apply()};t.handleTranslateEnd_=function e(t){this.translate_.setActive(false);this.scope_.$apply()};return e}();I.component("ngeoRule",{bindings:{featureOverlay:"<",map:"<",rule:"<",toolGroup:"<"},controller:I.RuleController_,templateUrl:D});t["a"]=I},function(e,t,r){"use strict";var n=r(188);var i=r(336);var a=r(337);var c=r(1);var o=r(216);var s=r(51);function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function u(e,t,r){if(t)l(e.prototype,t);if(r)l(e,r);return e}var f=angular.module("gmfImportdatasource",[n["a"].module.name,i["a"].name,a["a"].name,o["a"].module.name]);f.run(["$templateCache",function(e){e.put("gmf/import/importdatasourceComponent",r(477))}]);f.value("gmfImportdatasourceTemplateUrl",function(e){var t=e["gmfImportdatasourceTemplateUrl"];return t!==undefined?t:"gmf/import/importdatasourceComponent"});h.$inject=["$attrs","gmfImportdatasourceTemplateUrl"];function h(e,t){return t(e)}f.Controller_=function(){e.$inject=["$element","$filter","$injector","$scope","$timeout","gmfExternalDataSourcesManager","ngeoQuerent"];function e(e,t,r,n,i,a,o){var s=this;this.map;this.element_=e;this.scope_=n;this.timeout_=i;this.gmfExternalDataSourcesManager_=a;this.ngeoQuerent_=o;this.file;this.url;this.fileInput_=e.find("input[type=file]");this.hasError=false;this.hasErrorPromise_=null;this.mode=f.Controller_.Mode.ONLINE;this.modes=[f.Controller_.Mode.LOCAL,f.Controller_.Mode.ONLINE];this.pending=false;this.unitPrefixFormat_=t("ngeoUnitPrefix");this.wmsCapabilities=null;this.wmtsCapabilities=null;this.serversEngine_;var l=r.has("gmfExternalOGCServers")?r.get("gmfExternalOGCServers"):undefined;if(l){var u=l.map(function(e){return e["url"]});this.serversEngine_=new Bloodhound({datumTokenizer:function e(t){c["a"].assertString(t);var r=Bloodhound.tokenizers.whitespace(t);c["a"].assert(r);var n=[];for(var i=r,a=Array.isArray(i),o=0,i=a?i:i[Symbol.iterator]();;){var s;if(a){if(o>=i.length)break;s=i[o++]}else{o=i.next();if(o.done)break;s=o.value}var l=s;var u=0;while(u+1<l.length){n.push(l.substr(u,l.length));u++}}return n},queryTokenizer:Bloodhound.tokenizers.whitespace,identify:false,local:u})}this.fileInput_.on("change",function(){s.file=s.fileInput_[0].files&&s.fileInput_[0].files[0]?s.fileInput_[0].files[0]:undefined;s.scope_.$apply()})}var t=e.prototype;t.$onInit=function e(){var n=this;this.gmfExternalDataSourcesManager_.map=this.map;if(this.serversEngine_){this.timeout_(function(){c["a"].assert(n.serversEngine_);var e=n.element_.find("input[name=url]");var r=n.element_.find("button.gmf-importdatasource-connect-btn");e.typeahead({hint:true,highlight:true,minLength:1},{name:"url",source:n.serversEngine_.ttAdapter()}).bind("typeahead:select",function(e,t){n.timeout_(function(){n.url=t;n.scope_.$apply();r.focus()})})})}};t.browse=function e(){this.hasError=false;this.element_.find("input[type=file][name=file]").click()};t.connect=function e(){var t=this;var r=c["a"].assertString(this.url);var n=s["a"].guessServiceTypeByUrl(r);this.startWorking_();if(n===s["a"].Type.WMS){this.ngeoQuerent_.wmsGetCapabilities(r).then(function(e){t.wmsCapabilities=e;t.stopWorking_()},function(){t.stopWorking_(true)})}else if(n===s["a"].Type.WMTS){this.ngeoQuerent_.wmtsGetCapabilities(r).then(function(e){t.wmtsCapabilities=e;t.stopWorking_()},function(){t.stopWorking_(true)})}else{this.timeout_(function(){t.stopWorking_(true)})}};t.load=function e(){var t=this;var r=c["a"].assert(this.file);this.gmfExternalDataSourcesManager_.createAndAddDataSourceFromFile(r,function(e){if(!e){t.hasError=true}})};t.startWorking_=function e(){this.pending=true;this.hasError=false;this.wmsCapabilities=null;this.wmtsCapabilities=null};t.stopWorking_=function e(t){var r=this;if(t===void 0){t=false}this.pending=false;if(t){this.hasError=true;if(this.hasErrorPromise_){this.timeout_.cancel(this.hasErrorPromise_)}this.hasErrorPromise_=this.timeout_(function(){r.hasError=false;r.hasErrorPromise_=null},3e3)}};u(e,[{key:"fileNameAndSize",get:function e(){var t="";var r=this.file;if(r!==undefined){var n=this.unitPrefixFormat_(r.size,"o");t=r.name+", "+n}return t}}]);return e}();f.Controller_.Mode={LOCAL:"Local",ONLINE:"Online"};f.component("gmfImportdatasource",{bindings:{map:"<"},controller:f.Controller_,templateUrl:h});t["a"]=f},function(e,t,r){"use strict";var n=r(188);var i=r(241);var a=r(5);var o=r(298);var s=angular.module("gmfWmscapabilitylayertreenode",[n["a"].module.name,i["a"].module.name]);s.run(["$templateCache",function(e){e.put("gmf/import/wmsCapabilityLayertreeComponent",r(475))}]);s.value("gmfWmscapabilitylayertreenodeTemplateUrl",function(e){var t=e["gmfWmscapabilitylayertreenodeTemplateUrl"];return t!==undefined?t:"gmf/import/wmsCapabilityLayertreeComponent"});l.$inject=["$attrs","gmfWmscapabilitylayertreenodeTemplateUrl"];function l(e,t){return t(e)}s.Controller_=function(){e.$inject=["gmfExternalDataSourcesManager"];function e(e){this.capabilities;this.layer;this.url;this.gmfExternalDataSourcesManager_=e}var t=e.prototype;t.createAndAddDataSource=function e(t){this.gmfExternalDataSourcesManager_.createAndAddDataSourceFromWMSCapability(t,this.capabilities,this.url)};t.getUid=function e(t){return a["c"](t)};return e}();s.component("gmfWmscapabilitylayertreenode",{bindings:{capabilities:"<",layer:"<",url:"<"},controller:s.Controller_,templateUrl:l});t["a"]=s},function(e,t,r){"use strict";var n=r(188);var i=r(241);var a=r(5);var o=angular.module("gmfWmtscapabilitylayertree",[n["a"].module.name,i["a"].module.name]);o.run(["$templateCache",function(e){e.put("ngeo/import/wmtsCapabilityLayertreeComponent",r(476))}]);o.value("gmfWmtscapabilitylayertreTemplateUrl",function(e){var t=e["gmfWmtscapabilitylayertreTemplateUrl"];return t!==undefined?t:"ngeo/import/wmtsCapabilityLayertreeComponent"});s.$inject=["$attrs","gmfWmtscapabilitylayertreTemplateUrl"];function s(e,t){return t(e)}o.Controller_=function(){e.$inject=["gmfExternalDataSourcesManager"];function e(e){this.capabilities;this.layers;this.url;this.gmfExternalDataSourcesManager_=e}var t=e.prototype;t.createAndAddDataSource=function e(t){var r=this.gmfExternalDataSourcesManager_;r.createAndAddDataSourceFromWMTSCapability(t,this.capabilities,this.url)};t.getUid=function e(t){return a["c"](t)};return e}();o.component("gmfWmtscapabilitylayertree",{bindings:{capabilities:"<",layers:"<",url:"<"},controller:o.Controller_,templateUrl:s});t["a"]=o},function(e,t,r){"use strict";var n=r(158);var i=r(211);var a=angular.module("ngeoStatemanagerModule",[n["a"].module.name,i["a"].module.name]);t["a"]=a},function(e,t,r){"use strict";var n=r(132);var i=r(5);var a=angular.module("gmfLayertreeDatasourceGroupTreeComponent",[n["a"].module.name]);a.run(["$templateCache",function(e){e.put("gmf/layertree/datasourceGroupTreeComponent",r(479))}]);a.value("gmfLayertreeDatasourceGroupTreeTemplateUrl",function(e){var t=e["gmfLayertreeDatasourceGroupTreeTemplateUrl"];return t!==undefined?t:"gmf/layertree/datasourceGroupTreeComponent"});o.$inject=["$attrs","gmfLayertreeDatasourceGroupTreeTemplateUrl"];function o(e,t){return t(e)}a.Controller_=function(){e.$inject=["$scope","ngeoDataSources"];function e(e,t){this.group;this.scope_=e;this.dataSources_=t.collection}var t=e.prototype;t.getGroupUid=function e(){return"datasourcegrouptree-"+i["c"](this.group)};t.toggle=function e(){this.group.toggleVisibilityState()};t.toggleDataSource=function e(t){t.visible=!t.visible};t.remove=function e(){for(var t=this.group.dataSources.length-1,r=0;t>=r;t--){this.dataSources_.remove(this.group.dataSources[t])}};t.removeDataSource=function e(t){this.dataSources_.remove(t)};return e}();a.component("gmfDatasourcegrouptree",{bindings:{group:"<"},controller:a.Controller_,templateUrl:o});t["a"]=a},function(e,t,r){"use strict";var n=r(125);var i=r(298);var a=angular.module("ngeoLayertree",[n["a"].module.name]);a.value("ngeoLayertreeTemplateUrl",function(e,t){var r=t["ngeoLayertreeTemplateurl"];return r!==undefined?r:"ngeo/layertree"});a.run(["$templateCache",function(e){e.put("ngeo/layertree",r(480))}]);a.directive_=function(e){return{restrict:"A",scope:true,templateUrl:e,controller:n["a"]}};a.directive_.$inject=["ngeoLayertreeTemplateUrl"];a.directive("ngeoLayertree",a.directive_);t["a"]=a},function(e,t,r){"use strict";var n=r(119);var i=r(485);var a=r.n(i);var o=r(486);var s=r.n(o);var l=r(488);var u=r.n(l);var c=angular.module("gmfLayertreeTimeSliderComponent",[n["a"].module.name,"ui.slider"]);c.run(["$templateCache",function(e){e.put("gmf/layertree/timesliderComponent",r(489))}]);c.directive_=function(e,t){return{scope:{onDateSelected:"&gmfTimeSliderOnDateSelected",time:"=gmfTimeSliderTime"},bindToController:true,controller:"gmfTimeSliderController as sliderCtrl",restrict:"AE",templateUrl:"gmf/layertree/timesliderComponent",link:{pre:function e(a,t,r,o){o.init();o.sliderOptions["stop"]=n;o.sliderOptions["slide"]=i;function n(e,t){o.onDateSelected({time:i(e,t)});a.$apply()}function i(e,t){var r,n,i;if(t.values){r=new Date(o.getClosestValue_(t.values[0]));n=new Date(o.getClosestValue_(t.values[1]));o.dates=[r,n];i={start:r.getTime(),end:n.getTime()}}else{r=new Date(o.getClosestValue_(t.value));o.dates=r;i={start:r.getTime()}}a.$apply();return i}}}}};c.directive_.$inject=["$timeout","$filter"];c.directive("gmfTimeSlider",c.directive_);c.Controller_=function(e,t){this.ngeoWMSTime_=t;this.onDateSelected;this.time;this.isModeRange;this.minValue;this.maxValue;this.timeValueList;this.sliderOptions;this.dates};c.Controller_.$inject=["$scope","ngeoWMSTime"];c.Controller_.prototype.init=function(){this.timeValueList=this.getTimeValueList_();var e=this.ngeoWMSTime_.getOptions(this.time);this.isModeRange=this.time.mode==="range";this.minValue=e.minDate;this.maxValue=e.maxDate;this.dates=this.isModeRange?[e.values[0],e.values[1]]:e.values;this.sliderOptions={range:this.isModeRange,min:this.minValue,max:this.maxValue}};c.Controller_.prototype.getTimeValueList_=function(){var e=this.time;var t=null;var r=new Date(this.minValue);var n=new Date(this.maxValue);if(e.values){t=[];e.values.forEach(function(e){t.push(new Date(e).getTime())})}else{var i=1024;var a=new Date(r.getTime());a.setFullYear(r.getFullYear()+i*e.interval[0]);a.setMonth(r.getMonth()+i*e.interval[1],r.getDate()+i*e.interval[2]);a.setSeconds(r.getSeconds()+i*e.interval[3]);if(a>n){t=[];for(var o=0;;o++){var s=new Date(r.getTime());s.setFullYear(r.getFullYear()+o*e.interval[0]);s.setMonth(r.getMonth()+o*e.interval[1],r.getDate()+o*e.interval[2]);s.setSeconds(r.getSeconds()+o*e.interval[3]);if(s<=n){t.push(s.getTime())}else{break}}}}return t};c.Controller_.prototype.getClosestValue_=function(e){if(e<=this.minValue){return this.minValue}if(e>=this.maxValue){return this.maxValue}if(this.timeValueList){var t;var r=0;var n=this.timeValueList.length-1;while(n-r>1){t=Math.floor((r+n)/2);if(this.timeValueList[t]>=e){n=t}else{r=t}}var i=Math.abs(this.timeValueList[r]-e);var a=Math.abs(this.timeValueList[n]-e);return this.timeValueList[i<a?r:n]}else{var o=new Date(e);var s=new Date(this.minValue);var l=new Date(this.minValue);var u=new Date(this.maxValue);var c=Math.abs(o-l);for(var f=1;;f++){var h=new Date(s.getTime());h.setFullYear(s.getFullYear()+f*this.time.interval[0]);h.setMonth(s.getMonth()+f*this.time.interval[1],s.getDate()+f*this.time.interval[2]);h.setSeconds(s.getSeconds()+f*this.time.interval[3]);if(h>u){break}var d=Math.abs(o-h);if(d<=c){l=h;c=d}else{break}}return l.getTime()}};c.Controller_.prototype.getLocalizedDate=function(e){return this.ngeoWMSTime_.formatTimeValue(e,this.time.resolution)};c.controller("gmfTimeSliderController",c.Controller_);t["a"]=c},function(e,r,t){(function(e,t){true?t(r):undefined})(this,function(e){"use strict";function t(e,t,r){e.prototype=t.prototype=r;r.constructor=e}function r(e,t){var r=Object.create(e.prototype);for(var n in t){r[n]=t[n]}return r}function u(){}var n=.7;var i=1/n;var a="\\s*([+-]?\\d+)\\s*",o="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",l=/^#([0-9a-f]{3})$/,c=/^#([0-9a-f]{6})$/,f=new RegExp("^rgb\\("+[a,a,a]+"\\)$"),h=new RegExp("^rgb\\("+[s,s,s]+"\\)$"),d=new RegExp("^rgba\\("+[a,a,a,o]+"\\)$"),p=new RegExp("^rgba\\("+[s,s,s,o]+"\\)$"),v=new RegExp("^hsl\\("+[o,s,s]+"\\)$"),g=new RegExp("^hsla\\("+[o,s,s,o]+"\\)$");var m={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};t(u,_,{displayable:function e(){return this.rgb().displayable()},hex:function e(){return this.rgb().hex()},toString:function e(){return this.rgb()+""}});function _(e){var t;e=(e+"").trim().toLowerCase();return(t=l.exec(e))?(t=parseInt(t[1],16),new C(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1)):(t=c.exec(e))?y(parseInt(t[1],16)):(t=f.exec(e))?new C(t[1],t[2],t[3],1):(t=h.exec(e))?new C(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=d.exec(e))?b(t[1],t[2],t[3],t[4]):(t=p.exec(e))?b(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=v.exec(e))?x(t[1],t[2]/100,t[3]/100,1):(t=g.exec(e))?x(t[1],t[2]/100,t[3]/100,t[4]):m.hasOwnProperty(e)?y(m[e]):e==="transparent"?new C(NaN,NaN,NaN,0):null}function y(e){return new C(e>>16&255,e>>8&255,e&255,1)}function b(e,t,r,n){if(n<=0)e=t=r=NaN;return new C(e,t,r,n)}function w(e){if(!(e instanceof u))e=_(e);if(!e)return new C;e=e.rgb();return new C(e.r,e.g,e.b,e.opacity)}function S(e,t,r,n){return arguments.length===1?w(e):new C(e,t,r,n==null?1:n)}function C(e,t,r,n){this.r=+e;this.g=+t;this.b=+r;this.opacity=+n}t(C,S,r(u,{brighter:function e(t){t=t==null?i:Math.pow(i,t);return new C(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function e(t){t=t==null?n:Math.pow(n,t);return new C(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function e(){return this},displayable:function e(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function e(){return"#"+O(this.r)+O(this.g)+O(this.b)},toString:function e(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}}));function O(e){e=Math.max(0,Math.min(255,Math.round(e)||0));return(e<16?"0":"")+e.toString(16)}function x(e,t,r,n){if(n<=0)e=t=r=NaN;else if(r<=0||r>=1)e=t=NaN;else if(t<=0)e=NaN;return new M(e,t,r,n)}function T(e){if(e instanceof M)return new M(e.h,e.s,e.l,e.opacity);if(!(e instanceof u))e=_(e);if(!e)return new M;if(e instanceof M)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),a=Math.max(t,r,n),o=NaN,s=a-i,l=(a+i)/2;if(s){if(t===a)o=(r-n)/s+(r<n)*6;else if(r===a)o=(n-t)/s+2;else o=(t-r)/s+4;s/=l<.5?a+i:2-a-i;o*=60}else{s=l>0&&l<1?0:o}return new M(o,s,l,e.opacity)}function E(e,t,r,n){return arguments.length===1?T(e):new M(e,t,r,n==null?1:n)}function M(e,t,r,n){this.h=+e;this.s=+t;this.l=+r;this.opacity=+n}t(M,E,r(u,{brighter:function e(t){t=t==null?i:Math.pow(i,t);return new M(this.h,this.s,this.l*t,this.opacity)},darker:function e(t){t=t==null?n:Math.pow(n,t);return new M(this.h,this.s,this.l*t,this.opacity)},rgb:function e(){var t=this.h%360+(this.h<0)*360,r=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*r,a=2*n-i;return new C(A(t>=240?t-240:t+120,a,i),A(t,a,i),A(t<120?t+240:t-120,a,i),this.opacity)},displayable:function e(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));function A(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}var k=Math.PI/180;var j=180/Math.PI;var I=18,D=.96422,P=1,R=.82521,L=4/29,N=6/29,$=3*N*N,F=N*N*N;function G(e){if(e instanceof W)return new W(e.l,e.a,e.b,e.opacity);if(e instanceof Z){if(isNaN(e.h))return new W(e.l,0,0,e.opacity);var t=e.h*k;return new W(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}if(!(e instanceof C))e=w(e);var r=z(e.r),n=z(e.g),i=z(e.b),a=Y((.2225045*r+.7168786*n+.0606169*i)/P),o,s;if(r===n&&n===i)o=s=a;else{o=Y((.4360747*r+.3850649*n+.1430804*i)/D);s=Y((.0139322*r+.0971045*n+.7141733*i)/R)}return new W(116*a-16,500*(o-a),200*(a-s),e.opacity)}function U(e,t){return new W(e,0,0,t==null?1:t)}function H(e,t,r,n){return arguments.length===1?G(e):new W(e,t,r,n==null?1:n)}function W(e,t,r,n){this.l=+e;this.a=+t;this.b=+r;this.opacity=+n}t(W,H,r(u,{brighter:function e(t){return new W(this.l+I*(t==null?1:t),this.a,this.b,this.opacity)},darker:function e(t){return new W(this.l-I*(t==null?1:t),this.a,this.b,this.opacity)},rgb:function e(){var t=(this.l+16)/116,r=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;r=D*V(r);t=P*V(t);n=R*V(n);return new C(q(3.1338561*r-1.6168667*t-.4906146*n),q(-.9787684*r+1.9161415*t+.033454*n),q(.0719453*r-.2289914*t+1.4052427*n),this.opacity)}}));function Y(e){return e>F?Math.pow(e,1/3):e/$+L}function V(e){return e>N?e*e*e:$*(e-L)}function q(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function z(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function B(e){if(e instanceof Z)return new Z(e.h,e.c,e.l,e.opacity);if(!(e instanceof W))e=G(e);if(e.a===0&&e.b===0)return new Z(NaN,0,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*j;return new Z(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function K(e,t,r,n){return arguments.length===1?B(e):new Z(r,t,e,n==null?1:n)}function X(e,t,r,n){return arguments.length===1?B(e):new Z(e,t,r,n==null?1:n)}function Z(e,t,r,n){this.h=+e;this.c=+t;this.l=+r;this.opacity=+n}t(Z,X,r(u,{brighter:function e(t){return new Z(this.h,this.c,this.l+I*(t==null?1:t),this.opacity)},darker:function e(t){return new Z(this.h,this.c,this.l-I*(t==null?1:t),this.opacity)},rgb:function e(){return G(this).rgb()}}));var Q=-.14861,J=+1.78277,ee=-.29227,te=-.90649,re=+1.97294,ne=re*te,ie=re*J,ae=J*ee-te*Q;function oe(e){if(e instanceof le)return new le(e.h,e.s,e.l,e.opacity);if(!(e instanceof C))e=w(e);var t=e.r/255,r=e.g/255,n=e.b/255,i=(ae*n+ne*t-ie*r)/(ae+ne-ie),a=n-i,o=(re*(r-i)-ee*a)/te,s=Math.sqrt(o*o+a*a)/(re*i*(1-i)),l=s?Math.atan2(o,a)*j-120:NaN;return new le(l<0?l+360:l,s,i,e.opacity)}function se(e,t,r,n){return arguments.length===1?oe(e):new le(e,t,r,n==null?1:n)}function le(e,t,r,n){this.h=+e;this.s=+t;this.l=+r;this.opacity=+n}t(le,se,r(u,{brighter:function e(t){t=t==null?i:Math.pow(i,t);return new le(this.h,this.s,this.l*t,this.opacity)},darker:function e(t){t=t==null?n:Math.pow(n,t);return new le(this.h,this.s,this.l*t,this.opacity)},rgb:function e(){var t=isNaN(this.h)?0:(this.h+120)*k,r=+this.l,n=isNaN(this.s)?0:this.s*r*(1-r),i=Math.cos(t),a=Math.sin(t);return new C(255*(r+n*(Q*i+J*a)),255*(r+n*(ee*i+te*a)),255*(r+n*(re*i)),this.opacity)}}));e.color=_;e.rgb=S;e.hsl=E;e.lab=H;e.hcl=X;e.lch=K;e.gray=U;e.cubehelix=se;Object.defineProperty(e,"__esModule",{value:true})})},function(e,r,n){(function(e,t){true?t(r,n(116)):undefined})(this,function(t,W){"use strict";function Y(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);t.setFullYear(e.y);return t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function V(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));t.setUTCFullYear(e.y);return t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function q(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function r(e){var n=e.dateTime,i=e.date,a=e.time,t=e.periods,r=e.days,o=e.shortDays,s=e.months,l=e.shortMonths;var u=B(t),c=K(t),f=B(r),h=K(r),d=B(o),p=K(o),v=B(s),g=K(s),m=B(l),_=K(l);var y={a:D,A:P,b:R,B:L,c:null,d:ve,e:ve,f:be,H:ge,I:me,j:_e,L:ye,m:we,M:Se,p:N,Q:Xe,s:Ze,S:Ce,u:Oe,U:xe,V:Te,w:Ee,W:Me,x:null,X:null,y:Ae,Y:ke,Z:je,"%":Ke};var b={a:$,A:F,b:G,B:U,c:null,d:Ie,e:Ie,f:Ne,H:De,I:Pe,j:Re,L:Le,m:$e,M:Fe,p:H,Q:Xe,s:Ze,S:Ge,u:Ue,U:He,V:We,w:Ye,W:Ve,x:null,X:null,y:qe,Y:ze,Z:Be,"%":Ke};var w={a:T,A:E,b:M,B:A,c:k,d:ae,e:ae,f:fe,H:se,I:se,j:oe,L:ce,m:ie,M:le,p:x,Q:de,s:pe,S:ue,u:Z,U:Q,V:J,w:X,W:ee,x:j,X:I,y:re,Y:te,Z:ne,"%":he};y.x=S(i,y);y.X=S(a,y);y.c=S(n,y);b.x=S(i,b);b.X=S(a,b);b.c=S(n,b);function S(l,u){return function(e){var t=[],r=-1,n=0,i=l.length,a,o,s;if(!(e instanceof Date))e=new Date(+e);while(++r<i){if(l.charCodeAt(r)===37){t.push(l.slice(n,r));if((o=z[a=l.charAt(++r)])!=null)a=l.charAt(++r);else o=a==="e"?" ":"0";if(s=u[a])a=s(e,o);t.push(a);n=r+1}}t.push(l.slice(n,r));return t.join("")}}function C(a,o){return function(e){var t=q(1900),r=O(t,a,e+="",0),n,i;if(r!=e.length)return null;if("Q"in t)return new Date(t.Q);if("p"in t)t.H=t.H%12+t.p*12;if("V"in t){if(t.V<1||t.V>53)return null;if(!("w"in t))t.w=1;if("Z"in t){n=V(q(t.y)),i=n.getUTCDay();n=i>4||i===0?W.utcMonday.ceil(n):W.utcMonday(n);n=W.utcDay.offset(n,(t.V-1)*7);t.y=n.getUTCFullYear();t.m=n.getUTCMonth();t.d=n.getUTCDate()+(t.w+6)%7}else{n=o(q(t.y)),i=n.getDay();n=i>4||i===0?W.timeMonday.ceil(n):W.timeMonday(n);n=W.timeDay.offset(n,(t.V-1)*7);t.y=n.getFullYear();t.m=n.getMonth();t.d=n.getDate()+(t.w+6)%7}}else if("W"in t||"U"in t){if(!("w"in t))t.w="u"in t?t.u%7:"W"in t?1:0;i="Z"in t?V(q(t.y)).getUTCDay():o(q(t.y)).getDay();t.m=0;t.d="W"in t?(t.w+6)%7+t.W*7-(i+5)%7:t.w+t.U*7-(i+6)%7}if("Z"in t){t.H+=t.Z/100|0;t.M+=t.Z%100;return V(t)}return o(t)}}function O(e,t,r,n){var i=0,a=t.length,o=r.length,s,l;while(i<a){if(n>=o)return-1;s=t.charCodeAt(i++);if(s===37){s=t.charAt(i++);l=w[s in z?t.charAt(i++):s];if(!l||(n=l(e,r,n))<0)return-1}else if(s!=r.charCodeAt(n++)){return-1}}return n}function x(e,t,r){var n=u.exec(t.slice(r));return n?(e.p=c[n[0].toLowerCase()],r+n[0].length):-1}function T(e,t,r){var n=d.exec(t.slice(r));return n?(e.w=p[n[0].toLowerCase()],r+n[0].length):-1}function E(e,t,r){var n=f.exec(t.slice(r));return n?(e.w=h[n[0].toLowerCase()],r+n[0].length):-1}function M(e,t,r){var n=m.exec(t.slice(r));return n?(e.m=_[n[0].toLowerCase()],r+n[0].length):-1}function A(e,t,r){var n=v.exec(t.slice(r));return n?(e.m=g[n[0].toLowerCase()],r+n[0].length):-1}function k(e,t,r){return O(e,n,t,r)}function j(e,t,r){return O(e,i,t,r)}function I(e,t,r){return O(e,a,t,r)}function D(e){return o[e.getDay()]}function P(e){return r[e.getDay()]}function R(e){return l[e.getMonth()]}function L(e){return s[e.getMonth()]}function N(e){return t[+(e.getHours()>=12)]}function $(e){return o[e.getUTCDay()]}function F(e){return r[e.getUTCDay()]}function G(e){return l[e.getUTCMonth()]}function U(e){return s[e.getUTCMonth()]}function H(e){return t[+(e.getUTCHours()>=12)]}return{format:function e(t){var r=S(t+="",y);r.toString=function(){return t};return r},parse:function e(t){var r=C(t+="",Y);r.toString=function(){return t};return r},utcFormat:function e(t){var r=S(t+="",b);r.toString=function(){return t};return r},utcParse:function e(t){var r=C(t,V);r.toString=function(){return t};return r}}}var z={"-":"",_:" ",0:"0"},i=/^\s*\d+/,a=/^%/,n=/[\\^$*+?|[\]().{}]/g;function o(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(t)+i:i)}function s(e){return e.replace(n,"\\$&")}function B(e){return new RegExp("^(?:"+e.map(s).join("|")+")","i")}function K(e){var t={},r=-1,n=e.length;while(++r<n){t[e[r].toLowerCase()]=r}return t}function X(e,t,r){var n=i.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function Z(e,t,r){var n=i.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function Q(e,t,r){var n=i.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function J(e,t,r){var n=i.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function ee(e,t,r){var n=i.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function te(e,t,r){var n=i.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function re(e,t,r){var n=i.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function ne(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function ie(e,t,r){var n=i.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function ae(e,t,r){var n=i.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function oe(e,t,r){var n=i.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function se(e,t,r){var n=i.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function le(e,t,r){var n=i.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function ue(e,t,r){var n=i.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function ce(e,t,r){var n=i.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function fe(e,t,r){var n=i.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function he(e,t,r){var n=a.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function de(e,t,r){var n=i.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function pe(e,t,r){var n=i.exec(t.slice(r));return n?(e.Q=+n[0]*1e3,r+n[0].length):-1}function ve(e,t){return o(e.getDate(),t,2)}function ge(e,t){return o(e.getHours(),t,2)}function me(e,t){return o(e.getHours()%12||12,t,2)}function _e(e,t){return o(1+W.timeDay.count(W.timeYear(e),e),t,3)}function ye(e,t){return o(e.getMilliseconds(),t,3)}function be(e,t){return ye(e,t)+"000"}function we(e,t){return o(e.getMonth()+1,t,2)}function Se(e,t){return o(e.getMinutes(),t,2)}function Ce(e,t){return o(e.getSeconds(),t,2)}function Oe(e){var t=e.getDay();return t===0?7:t}function xe(e,t){return o(W.timeSunday.count(W.timeYear(e),e),t,2)}function Te(e,t){var r=e.getDay();e=r>=4||r===0?W.timeThursday(e):W.timeThursday.ceil(e);return o(W.timeThursday.count(W.timeYear(e),e)+(W.timeYear(e).getDay()===4),t,2)}function Ee(e){return e.getDay()}function Me(e,t){return o(W.timeMonday.count(W.timeYear(e),e),t,2)}function Ae(e,t){return o(e.getFullYear()%100,t,2)}function ke(e,t){return o(e.getFullYear()%1e4,t,4)}function je(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+o(t/60|0,"0",2)+o(t%60,"0",2)}function Ie(e,t){return o(e.getUTCDate(),t,2)}function De(e,t){return o(e.getUTCHours(),t,2)}function Pe(e,t){return o(e.getUTCHours()%12||12,t,2)}function Re(e,t){return o(1+W.utcDay.count(W.utcYear(e),e),t,3)}function Le(e,t){return o(e.getUTCMilliseconds(),t,3)}function Ne(e,t){return Le(e,t)+"000"}function $e(e,t){return o(e.getUTCMonth()+1,t,2)}function Fe(e,t){return o(e.getUTCMinutes(),t,2)}function Ge(e,t){return o(e.getUTCSeconds(),t,2)}function Ue(e){var t=e.getUTCDay();return t===0?7:t}function He(e,t){return o(W.utcSunday.count(W.utcYear(e),e),t,2)}function We(e,t){var r=e.getUTCDay();e=r>=4||r===0?W.utcThursday(e):W.utcThursday.ceil(e);return o(W.utcThursday.count(W.utcYear(e),e)+(W.utcYear(e).getUTCDay()===4),t,2)}function Ye(e){return e.getUTCDay()}function Ve(e,t){return o(W.utcMonday.count(W.utcYear(e),e),t,2)}function qe(e,t){return o(e.getUTCFullYear()%100,t,2)}function ze(e,t){return o(e.getUTCFullYear()%1e4,t,4)}function Be(){return"+0000"}function Ke(){return"%"}function Xe(e){return+e}function Ze(e){return Math.floor(+e/1e3)}var l;e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function e(e){l=r(e);t.timeFormat=l.format;t.timeParse=l.parse;t.utcFormat=l.utcFormat;t.utcParse=l.utcParse;return l}var u="%Y-%m-%dT%H:%M:%S.%LZ";function c(e){return e.toISOString()}var f=Date.prototype.toISOString?c:t.utcFormat(u);function h(e){var t=new Date(e);return isNaN(t)?null:t}var d=+new Date("2000-01-01T00:00:00.000Z")?h:t.utcParse(u);t.timeFormatDefaultLocale=e;t.timeFormatLocale=r;t.isoFormat=f;t.isoParse=d;Object.defineProperty(t,"__esModule",{value:true})})},function(e,t,r){"use strict";var l=r(1);var u=r(23);var c=r(112);var n=r(34);var f=r(11);var h=r(29);var i=r(105);var d=r(100);var a=angular.module("gmfDrawProfileLine",[i["a"].module.name]);a.directive_=function(){return{scope:true,controller:"GmfDrawprofilelineController as ctrl",restrict:"A",bindToController:{getMapFn:"&gmfDrawprofilelineMap",line:"=gmfDrawprofilelineLine",active:"=gmfDrawprofilelineActive",getStyleFn:"&?gmfDrawprofilelineStyle"}}};a.directive("gmfDrawprofileline",a.directive_);a.Controller_=function(e,t,r,n){var i=this;this.line;this.map_=null;this.active;this.features_=new u["a"];var a=n.getFeatureOverlay();a.setFeatures(this.features_);var o;var s=this["getStyleFn"];if(s){o=s();l["a"].assertInstanceof(o,f["c"])}else{o=new f["c"]({stroke:new h["a"]({color:"#ffcc33",width:2})})}a.setStyle(o);this.interaction=new c["a"]({type:"LineString",features:this.features_});d["a"].interaction(this.interaction);this.interaction.on("change:active",function(){if(i.interaction.getActive()){i.clear_()}});this.interaction.on("drawend",function(e){i.line=e.feature.getGeometry();r(function(){i.interaction.setActive(false)},0)});e.$watch(function(){return i.line},function(e,t){if(e===null){i.clear_()}});e.$watch(function(){return i.active},function(e){if(e===false){i.clear_()}i.interaction.setActive(i.active)})};a.Controller_.$inject=["$scope","$element","$timeout","ngeoFeatureOverlayMgr"];a.Controller_.prototype.$onInit=function(){var e=this["getMapFn"]();l["a"].assertInstanceof(e,n["a"]);this.map_=e;this.map_.addInteraction(this.interaction)};a.Controller_.prototype.clear_=function(){this.features_.clear();this.line=null};a.controller("GmfDrawprofilelineController",a.Controller_);t["a"]=a},function(e,t,r){"use strict";var n=r(214);var i=r(272);var a=r(346);var o=r(495);var s=r.n(o);var l=angular.module("gmfPermalinkModule",[n["a"].module.name,i["a"].module.name,a["a"].name]);t["a"]=l},function(e,t,r){"use strict";var a=r(272);var n=r(158);var o=r(5);var i=angular.module("gmfPermalinkShareComponent",[a["a"].module.name,n["a"].module.name]);i.run(["$templateCache",function(e){e.put("gmf/permalink/shareComponent",r(494))}]);i.value("gmfPermalinkShareTemplateUrl",function(e){var t=e["gmfPermalinkShareTemplateUrl"];return t!==undefined?t:"gmf/permalink/shareComponent"});s.$inject=["$attrs","gmfPermalinkShareTemplateUrl"];function s(e,t){return t(e)}i.component_={bindings:{enableEmail:"<gmfShareEmail"},controller:"GmfShareController",templateUrl:s};i.component("gmfShare",i.component_);var l=function(){e.$inject=["$scope","ngeoLocation","gmfShareService","$q","$attrs"];function e(e,t,r,n,i){this.uid=o["c"](this);this.$scope_=e;this.gmfShareService_=r;this.$q_=n;this.ngeoLocation_=t;this.enableEmail;this.shortLink;this.email;this.message;this.permalink_=this.ngeoLocation_.getUriString();this.showLengthWarning=this.permalink_.length>a["a"].URL_MAX_LEN||t.getPath()>a["a"].URL_PATH_MAX_LEN;this.successfullySent=false;this.errorOnsend=false;this.errorOnGetShortUrl=false;this.getShortUrl()}var t=e.prototype;t.getShortUrl=function e(){var t=this;this.$q_.when(this.gmfShareService_.getShortUrl(this.permalink_)).then(function(e){t.shortLink=e.data.short_url;t.errorOnGetShortUrl=false},function(e){t.shortLink=t.permalink;t.errorOnGetShortUrl=true})};t.sendShortUrl=function e(){var t=this;if(this.$scope_["gmfShareForm"].$valid){this.$q_.when(this.gmfShareService_.sendShortUrl(this.permalink_,this.email,this.message)).then(function(e){t.successfullySent=true},function(e){t.errorOnsend=true})}};return e}();i.controller("GmfShareController",l);t["a"]=i},function(e,t,r){"use strict";var n=r(265);var i=r(2);var a=angular.module("gmfObjecteditingGetWMSFeatureComponent",[n["a"].module.name]);a.directive_=function(){return{controller:"gmfObjecteditinggetwmsfeatureController",scope:{active:"=gmfObjecteditinggetwmsfeatureActive",features:"<gmfObjecteditinggetwmsfeatureFeatures",layerInfo:"=gmfObjecteditinggetwmsfeatureLayerinfo",map:"<gmfObjecteditinggetwmsfeatureMap"},bindToController:true}};a.directive("gmfObjecteditinggetwmsfeature",a.directive_);a.Controller_=function(e,t){var r=this;this.active;e.$watch(function(){return r.active},this.handleActiveChange_.bind(this));this.features;this.layerInfo;this.map;this.gmfObjectEditingQuery_=t};a.Controller_.$inject=["$scope","gmfObjectEditingQuery"];a.Controller_.prototype.handleActiveChange_=function(e){if(e){i["a"](this.map,"click",this.handleMapClick_,this)}else{i["c"](this.map,"click",this.handleMapClick_,this)}};a.Controller_.prototype.handleMapClick_=function(e){var t=this;this.gmfObjectEditingQuery_.getFeatureInfo(this.layerInfo,e.coordinate,this.map).then(function(e){if(e){t.features.push(e)}})};a.controller("gmfObjecteditinggetwmsfeatureController",a.Controller_);t["a"]=a},function(e,d,p){"use strict";(function(y){var n=p(59);var e=p(179);var a=p(22);var x=p(1);var t=p(91);var r=p(105);var o=p(62);var i=p(372);var T=p(228);var s=p(144);var l=p(8);var u=p(2);var E=p(101);var h=p(28);var M=p(93);var A=p(34);var m=p(15);var c=p(177);var k=angular.module("gmfPrintComponent",[e["a"].module.name,a["a"].module.name,t["a"].module.name,r["a"].module.name,o["a"].module.name,i["a"].module.name,T["a"].module.name,s["a"].module.name]);k.value("gmfPrintTemplateUrl",function(e,t){var r=t["gmfPrintTemplateurl"];return r!==undefined?r:"gmf/print"});k.run(["$templateCache",function(e){e.put("gmf/print",p(501))}]);k.PrintStateEnum={NOT_IN_USE:"notInUse",PRINTING:"printing",ERROR_ON_REPORT:"errorOnReport",CAPABILITIES_NOT_LOADED:"capabilitiesNotLoaded",ERROR_ON_GETCAPABILITIES:"errorOnGetCapabilities"};k.value("gmfPrintState",{state:k.PrintStateEnum.CAPABILITIES_NOT_LOADED});f.$inject=["$element","$attrs","gmfPrintTemplateUrl"];function f(e,t,r){return r(e,t)}k.component_={bindings:{map:"<gmfPrintMap",active:"=gmfPrintActive",rotateMask:"<?gmfPrintRotatemask",fieldValues:"<?gmfPrintFieldvalues",hiddenAttributeNames:"<?gmfPrintHiddenattributes",attributesOut:"=?gmfPrintAttributesOut"},controller:"GmfPrintController",templateUrl:f,transclude:true};k.component("gmfPrint",k.component_);k.optionsLegendType;k.optionsType;k.Controller_=function(){e.$inject=["$element","$rootScope","$scope","$timeout","$q","$injector","gettextCatalog","ngeoLayerHelper","ngeoFeatureOverlayMgr","ngeoPrintUtils","ngeoCreatePrint","gmfPrintUrl","gmfAuthenticationService","ngeoQueryResult","$filter","gmfPrintState","gmfThemes"];function e(e,t,r,n,i,a,o,s,l,u,c,f,h,d,p,v,g){var m=this;this.gmfPrintState_=v;this.translate_=p("translate");this.map;this.active;this.rotateMask=false;this.fieldValues={};this.attributesOut;this.$rootScope_=t;this.$scope_=r;this.$timeout_=n;this.$q_=i;this.gettextCatalog_=o;this.ngeoLayerHelper_=s;this.featureOverlayLayer_=l.getLayer();this.ngeoPrintUtils_=u;this.ngeoPrint_=c(f);this.ngeoQueryResult_=d;this.gmfAuthenticationService_=h;this.gmfThemes_=g;this.cacheVersion_="0";if(a.has("cacheVersion")){this.cacheVersion_=a.get("cacheVersion")}this.scaleInput=false;this.gmfLegendOptions_={useBbox:true,label:{},params:{}};if(a.has("gmfPrintOptions")){var _=a.get("gmfPrintOptions");if(_.scaleInput){this.scaleInput=_.scaleInput}if(_.legend){Object.assign(this.gmfLegendOptions_,_.legend)}}this.requestCanceler_=null;this.statusTimeoutPromise_=null;this.onDragPreviousMousePosition_=null;this.rotationTimeoutPromise_=null;this.postComposeListenerKey_;this.pointerDragListenerKey_;this.mapViewResolutionChangeKey_;this.curRef_="";this.formats_=[];this.layouts_=[];this.layout_={};this.paperSize_=[];this.layoutInfo={};this.rotation=0;this.hiddenAttributeNames;this.scaleManuallySelected_=false;this.rotationInput_=e.find(".gmf-print-rotation-input");this.rotationInput_.on("input",function(e){var t=y(e.target).val();if(t!==""){m.setRotation(t)}});this.rotationInput_.on("change",function(e){var t=y(e.target).val();if(t!==""){m.setRotation(t)}});this.postcomposeListener_;this.capabilities_;this.ogcServers_;this.currentThemes_}var t=e.prototype;t.$onInit=function e(){var r=this;this.$scope_.$watch(function(){return r.gmfAuthenticationService_.getRoleId()},function(){r.gmfPrintState_.state=k.PrintStateEnum.CAPABILITIES_NOT_LOADED;r.capabilities_=null});this.$scope_.$watch(function(){return r.active},function(e){r.togglePrintPanel_(e)});this.$rootScope_.$on("gmfStartPrint",function(e,t){r.print(""+t)});this.$rootScope_.$on("gmfCancelPrint",function(){r.cancel()});this.gmfThemes_.getOgcServersObject().then(function(e){r.ogcServers_=e});this.gmfThemes_.getThemesObject().then(function(e){r.currentThemes_=e});var t=function e(){return r.paperSize_};var n;if(this.rotateMask){n=function e(){return r.rotation}}this.postcomposeListener_=this.ngeoPrintUtils_.createPrintMaskPostcompose(t,this.getScaleFn.bind(this),n)};t.getScaleFn=function e(t){x["a"].assert(this.layoutInfo.scales);x["a"].assert(this.layoutInfo.scale!==undefined);if(!this.scaleManuallySelected_&&(this.layoutInfo.scale===-1||l["f"](this.layoutInfo.scales,this.layoutInfo.scale))){var r=t.size;var n=t.viewState.resolution;this.layoutInfo.scale=this.getOptimalScale_(r,n)}return this.layoutInfo.scale};t.togglePrintPanel_=function e(t){var r=this;if(t){if(!this.capabilities_){this.getCapabilities_()}this.capabilities_.then(function(e){if(!r.active){return}r.gmfPrintState_.state=k.PrintStateEnum.NOT_IN_USE;r.parseCapabilities_(e);r.postComposeListenerKey_=u["a"](r.map,"postcompose",r.postcomposeListener_);r.pointerDragListenerKey_=u["a"](r.map,"pointerdrag",r.onPointerDrag_,r);r.mapViewResolutionChangeKey_=u["a"](r.map.getView(),"change:resolution",function(){r.scaleManuallySelected_=false});r.map.render()},function(e){r.gmfPrintState_.state=k.PrintStateEnum.ERROR_ON_GETCAPABILITIES;r.capabilities_=null})}else{u["e"](this.postComposeListenerKey_);u["e"](this.pointerDragListenerKey_);u["e"](this.mapViewResolutionChangeKey_);this.setRotation(0);this.map.render()}};t.getCapabilities_=function e(t){this.capabilities_=this.ngeoPrint_.getCapabilities({withCredentials:true,params:t?{role:t,cache_version:this.cacheVersion_}:{cache_version:this.cacheVersion_}})};t.parseCapabilities_=function e(t){var r=this;var n=t["data"];this.formats_=n["formats"]||[];this.layouts_=n["layouts"];this.layout_=n["layouts"][0];this.layoutInfo.layouts=[];this.layouts_.forEach(function(e){r.layoutInfo.layouts.push(e.name)});this.updateFields_()};t.updateFields_=function e(){var t=this;this.layoutInfo.layout=this.layout_.name;var r=this.isAttributeInCurrentLayout_("map");x["a"].assertObject(r);var n=r["clientInfo"];x["a"].assertObject(n);this.paperSize_=[n["width"],n["height"]];this.updateCustomFields_();var i=this.isAttributeInCurrentLayout_("legend");if(this.layoutInfo.legend===undefined){this.layoutInfo.legend=!!(i!==undefined?i:this.fieldValues["legend"])}this.layoutInfo.scales=n["scales"]||[];this.layoutInfo.dpis=n["dpiSuggestions"]||[];var a=this.map.getSize();var o=this.map.getView().getResolution();this.layoutInfo.scale=this.getOptimalScale_(a,o);this.layoutInfo.dpi=this.layoutInfo.dpi&&this.layoutInfo.dpis.indexOf(this.layoutInfo.dpi)>0?this.layoutInfo.dpi:this.layoutInfo.dpis[0];this.layoutInfo.formats={};this.formats_.forEach(function(e){t.layoutInfo.formats[e]=true});this.attributesOut=this.layoutInfo["simpleAttributes"];this.map.render()};t.updateCustomFields_=function e(){var r=this;var n,i,a,o;if(!this.layoutInfo.simpleAttributes){this.layoutInfo.simpleAttributes=[]}var t=this.layoutInfo.simpleAttributes;var s=t.splice(0,t.length);this.layout_.attributes.forEach(function(e){if(!e["clientParams"]){n=""+e.name;var t=e.default;a=t!==undefined&&t!==""?t:r.fieldValues[n];i=""+e.type;switch(i){case"String":o=n==="comments"?"textarea":"text";break;case"Boolean":o="checkbox";break;case"Number":o="number";a=parseFloat(a);a=isNaN(a)?0:a;break;default:o=i}s.forEach(function(e){if(e.name===n&&e.type===o){return a=e.value}});r.layoutInfo.simpleAttributes.push({name:n,type:o,value:a})}})};t.isAttributeInCurrentLayout_=function e(t){var r=null;this.layout_.attributes.forEach(function(e){if(e.name===t){return r=e}});return r};t.setRotation=function e(t){this.rotation=m["a"](t,-180,180);this.rotationInput_.val(this.rotation.toString());if(this.rotateMask){this.map.render()}else{this.map.getView().setRotation(m["i"](this.rotation))}};t.onPointerDrag_=function e(t){var r=this;var n=t.originalEvent;var i=this.map.getView().getCenter();if(this.active&&n.altKey&&n.shiftKey&&i){var a=this.map.getPixelFromCoordinate(i);var o=t.pixel;if(this.rotationTimeoutPromise_===null){this.onDragPreviousMousePosition_=null}else{this.$timeout_.cancel(this.rotationTimeoutPromise_);var s=this.onDragPreviousMousePosition_[0]-a[0];var l=this.onDragPreviousMousePosition_[1]-a[1];var u=o[0]-a[0];var c=o[1]-a[1];var f=Math.sqrt(Math.pow(s,2)+Math.pow(l,2));var h=Math.sqrt(Math.pow(u,2)+Math.pow(c,2));var d=s*c-l*u>0?1:-1;var p=(s*u+l*c)/(f*h);p=p<=1?d*Math.acos(p):0;var v=h/200;var g=Math.round(m["h"](p)*v);this.setRotation(this.rotation+g);this.$scope_.$digest()}this.rotationTimeoutPromise_=this.$timeout_(function(){r.rotationTimeoutPromise_=null},500);this.onDragPreviousMousePosition_=o}};t.print=function e(t){if(this.gmfPrintState_.state===k.PrintStateEnum.PRINTING){return}this.requestCanceler_=this.$q_.defer();this.gmfPrintState_.state=k.PrintStateEnum.PRINTING;var r=this.map.getSize();var n=this.map.getView().getResolution()||0;var i=this.layoutInfo.scale||this.getOptimalScale_(r,n);var a=this.getDataSource_();var o={datasource:a};if(this.layoutInfo.simpleAttributes){this.layoutInfo.simpleAttributes.forEach(function(e){o[e.name]=e.value})}if(this.layoutInfo.legend){var s=this.map.getView().getCenter();var l=this.paperSize_[0]*i/2/T["a"].INCHES_PER_METER_/T["a"].DOTS_PER_INCH_;var u=this.paperSize_[1]*i/2/T["a"].INCHES_PER_METER_/T["a"].DOTS_PER_INCH_;var c=[s[0]-l,s[1]-u,s[0]+l,s[1]+u];var f=this.getLegend_(i,this.layoutInfo.dpi,c);if(f!==null){o["legend"]=f}}x["a"].assertNumber(this.layoutInfo.dpi);x["a"].assertString(this.layoutInfo.layout);var h=new A["a"]({});h.setView(this.map.getView());var d=this.ngeoLayerHelper_.getFlatLayers(this.map.getLayerGroup());var p=[];var v=true;for(var g=0,m=d.length;g<m;g++){var _=d[g];var y=_.get("metadata");if(y){var b=y.ogcServer;var w=y.printLayers||y.layers;if(b&&w){var S=this.ogcServers_[b];if(S){_=this.ngeoLayerHelper_.createBasicWMSLayer(S.url,w,S.imageType,S.type)}else{console.error("Missing ogcServer:",b)}}}if(_ instanceof E["a"]&&_.get("printNativeAngle")===false){v=false}p.push(_)}h.setLayerGroup(new M["a"]({layers:p,printNativeAngle:v}));var C=this.ngeoPrint_.createSpec(h,i,this.layoutInfo.dpi,this.layoutInfo.layout,t,o);var O=[];this.ngeoPrint_.encodeLayer(O,this.featureOverlayLayer_,n);if(O.length>0){C.attributes.map.layers.unshift(O[0])}this.ngeoPrint_.createReport(C,{timeout:this.requestCanceler_.promise}).then(this.handleCreateReportSuccess_.bind(this),this.handleCreateReportError_.bind(this));h.setTarget(null)};t.cancel=function e(){if(this.requestCanceler_!==null){this.requestCanceler_.resolve()}if(this.statusTimeoutPromise_!==null){this.$timeout_.cancel(this.statusTimeoutPromise_)}if(this.curRef_.length>0){this.ngeoPrint_.cancel(this.curRef_)}this.resetPrintStates_()};t.resetPrintStates_=function e(t){this.gmfPrintState_.state=t||k.PrintStateEnum.NOT_IN_USE;this.curRef_=""};t.getDataSource_=function e(){var t,n,i;var r=[];var a=this.ngeoQueryResult_.sources;a.forEach(function(e){n=[];i=[];e.features.forEach(function(e,t){x["a"].assert(e);var r=o["a"].getFilteredFeatureValues(e);if(t===0){i=Object.keys(r).map(function e(t){return this.translate_(t)},this)}n.push(Object.keys(r).map(function(e){return r[e]}))},this);if(i.length){t={title:this.translate_(e.label),table:{columns:i,data:n}};r.push(t)}},this);return r};t.getOptimalScale_=function e(t,r){var n=this.layoutInfo.scales.slice();if(t!==undefined&&r!==undefined){return this.ngeoPrintUtils_.getOptimalScale(t,r,this.paperSize_,n.reverse())}return this.layoutInfo.scales[0]};t.handleCreateReportSuccess_=function e(t){var r=t.data;var n=r.ref;x["a"].assert(n.length>0);this.curRef_=n;this.getStatus_(n)};t.getStatus_=function e(t){this.requestCanceler_=this.$q_.defer();this.ngeoPrint_.getStatus(t,{timeout:this.requestCanceler_.promise}).then(this.handleGetStatusSuccess_.bind(this,t),this.handleCreateReportError_.bind(this))};t.handleGetStatusSuccess_=function e(t,r){var n=this;var i=r.data;var a=i.done;if(a){if(i.status!="error"){window.location.href=this.ngeoPrint_.getReportUrl(t);this.resetPrintStates_()}else{console.error(i.error);this.handleCreateReportError_()}}else{this.statusTimeoutPromise_=this.$timeout_(function(){n.getStatus_(t)},1e3,false)}};t.handleCreateReportError_=function e(){this.resetPrintStates_(k.PrintStateEnum.ERROR_ON_REPORT)};t.getLegend_=function e(o,s,l){var u=this;var c={classes:[]};var f=this.gettextCatalog_;var t=this.ngeoLayerHelper_.getGroupFromMap(this.map,n["a"].DATALAYERGROUP_NAME);var r=this.ngeoLayerHelper_.getFlatLayers(t);r.reverse().forEach(function(r){var n=[];if(r.getVisible()&&r.getSource()){if(r instanceof h["a"]){var e=""+r.get("layerNodeName");var t=u.getMetadataLegendImage_(e);if(!t){t=u.ngeoLayerHelper_.getWMTSLegendURL(r)}if(t){n.push({name:f.getString(e),icons:[t]})}}else{var i=r.getSource();var a=i.getParams()["LAYERS"].split(",");a.forEach(function(e){var t=u.getMetadataLegendImage_(e);if(!t){t=u.ngeoLayerHelper_.getWMSLegendURL(i.getUrl(),e,o,undefined,undefined,undefined,i.serverType_,s,u.gmfLegendOptions_.useBbox?l:undefined,u.map.getView().getProjection().getCode(),u.gmfLegendOptions_.params[r.getSource().serverType_])}if(t&&e.length!==0){n.push(Object.assign({name:u.gmfLegendOptions_.label[r.getSource().serverType_]===false?"":f.getString(e),icons:[t]},r.getSource().serverType_==="qgis"?{dpi:s}:{}))}})}}if(n.length>0){c["classes"].push({classes:n})}});return c["classes"].length>0?c:null};t.getMetadataLegendImage_=function e(t){var r=a["a"].findGroupByLayerNodeName(this.currentThemes_,t);var n;if(r&&r.children){n=a["a"].findObjectByName(r.children,t)}var i;if(n&&n.metadata){i=n.metadata.legendImage}return i};t.setLayout=function e(t){var r;this.layouts_.forEach(function(e){if(e.name===t){r=e;return true}});this.layout_=r;this.updateFields_()};t.getSetScale=function e(t){if(t!==undefined){var r=this.map.getSize()||[0,0];this.layoutInfo.scale=t;var n=this.ngeoPrintUtils_.getOptimalResolution(r,this.paperSize_,t);var i=this.map.getView().constrainResolution(n,0,1);this.map.getView().setResolution(i);this.map.render();this.scaleManuallySelected_=true}return this.layoutInfo.scale};t.setDpi=function e(t){this.layoutInfo.dpi=t};t.isState=function e(t){return this.gmfPrintState_.state===k.PrintStateEnum[t]};return e}();k.controller("GmfPrintController",k.Controller_);d["a"]=k}).call(this,p(27))},function(e,t,r){"use strict";var n=r(405);var i=r(350);var a=r(512);var o=r.n(a);var s=angular.module("gmfSearchModule",[n["a"].name,i["a"].module.name]);t["a"]=s},function(e,t,r){"use strict";var a=r(76);var n=function e(t,r){this.$http_=r;this.url_=t.get("fulltextsearchUrl");var n=this.url_.split("?");this.baseUrl_=n[0];var i=n.length==2?"?"+n[1]:"";this.defaultParams_=a["a"].decodeQueryString(i)};n.$inject=["$injector","$http"];n.$inject=["$injector","$http"];n.prototype.search=function(e,t){var r=this;var n=Object.assign({},this.defaultParams_,t);n["query"]=e;var i=this.baseUrl_+"?"+a["a"].encodeQueryString(n);return new Promise(function(t,e){r.$http_.get(i).then(function(e){return t(e["data"])}).catch(e)})};n.module=angular.module("gmfSearchFulltextSearch",[]);n.module.service("gmfSearchFulltextSearch",n);t["a"]=n},function(e,t,r){"use strict";var a=r(10);var o=r(3);var n=function e(){};n.prototype.stringToCoordinates=function(e){var t=e.match(/([\d\.']+)[\s,]+([\d\.']+)/);if(t){var r=parseFloat(t[1].replace("'",""));var n=parseFloat(t[2].replace("'",""));if(!isNaN(r)&&!isNaN(n)){return[r,n]}}return null};n.prototype.getProjectionList=function(e){var t,r;var n=[];e.forEach(function(e){t=e.toUpperCase();if(t.substr(0,5)!="EPSG:"){t="EPSG:"+t}r=a["g"](t);if(r!==null){n.push(r)}else{console.error("The projection "+t+" is not defined in ol.proj.")}});return n};n.prototype.tryProjections=function(t,r,n,e){var i;if(e===undefined){e=[n]}e.some(function(e){try{i=a["m"](t,e,n);if(o["f"](r,i)){return true}}catch(e){}i=null});return i};n.prototype.tryProjectionsWithInversion=function(e,t,r,n){var i=this.tryProjections(e,t,r,n);if(i===null){i=this.tryProjections(e.reverse(),t,r,n)}return i};n.module=angular.module("ngeoAutoProjection",[]);n.module.service("ngeoAutoProjection",n);t["a"]=n},function(e,t,r){"use strict";var n=r(226);var i=r(354);n["a"].Proj.projections.add(i["a"]);var a="somerc";t["a"]=a},function(e,t,r){"use strict";var n=1;var i=2;var a=3;var o=4;var s=5;var l=-1;var u=/\s/;var c=/[A-Za-z]/;var f=/[A-Za-z84]/;var h=/[,\]]/;var d=/[\d\.E\-\+]/;function p(e){if(typeof e!=="string"){throw new Error("not a string")}this.text=e.trim();this.level=0;this.place=0;this.root=null;this.stack=[];this.currentObject=null;this.state=n}p.prototype.readCharicter=function(){var e=this.text[this.place++];if(this.state!==o){while(u.test(e)){if(this.place>=this.text.length){return}e=this.text[this.place++]}}switch(this.state){case n:return this.neutral(e);case i:return this.keyword(e);case o:return this.quoted(e);case s:return this.afterquote(e);case a:return this.number(e);case l:return}};p.prototype.afterquote=function(e){if(e==='"'){this.word+='"';this.state=o;return}if(h.test(e)){this.word=this.word.trim();this.afterItem(e);return}throw new Error("havn't handled \""+e+'" in afterquote yet, index '+this.place)};p.prototype.afterItem=function(e){if(e===","){if(this.word!==null){this.currentObject.push(this.word)}this.word=null;this.state=n;return}if(e==="]"){this.level--;if(this.word!==null){this.currentObject.push(this.word);this.word=null}this.state=n;this.currentObject=this.stack.pop();if(!this.currentObject){this.state=l}return}};p.prototype.number=function(e){if(d.test(e)){this.word+=e;return}if(h.test(e)){this.word=parseFloat(this.word);this.afterItem(e);return}throw new Error("havn't handled \""+e+'" in number yet, index '+this.place)};p.prototype.quoted=function(e){if(e==='"'){this.state=s;return}this.word+=e;return};p.prototype.keyword=function(e){if(f.test(e)){this.word+=e;return}if(e==="["){var t=[];t.push(this.word);this.level++;if(this.root===null){this.root=t}else{this.currentObject.push(t)}this.stack.push(this.currentObject);this.currentObject=t;this.state=n;return}if(h.test(e)){this.afterItem(e);return}throw new Error("havn't handled \""+e+'" in keyword yet, index '+this.place)};p.prototype.neutral=function(e){if(c.test(e)){this.word=e;this.state=i;return}if(e==='"'){this.word="";this.state=o;return}if(d.test(e)){this.word=e;this.state=a;return}if(h.test(e)){this.afterItem(e);return}throw new Error("havn't handled \""+e+'" in neutral yet, index '+this.place)};p.prototype.output=function(){while(this.place<this.text.length){this.readCharicter()}if(this.state===l){return this.root}throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function v(e){var t=new p(e);return t.output()}function g(e,t,r){if(Array.isArray(t)){r.unshift(t);t=null}var n=t?{}:e;var i=r.reduce(function(e,t){m(t,e);return e},n);if(t){e[t]=i}}function m(e,t){if(!Array.isArray(e)){t[e]=true;return}var r=e.shift();if(r==="PARAMETER"){r=e.shift()}if(e.length===1){if(Array.isArray(e[0])){t[r]={};m(e[0],t[r]);return}t[r]=e[0];return}if(!e.length){t[r]=true;return}if(r==="TOWGS84"){t[r]=e;return}if(!Array.isArray(r)){t[r]={}}var n;switch(r){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[r]={name:e[0].toLowerCase(),convert:e[1]};if(e.length===3){m(e[2],t[r])}return;case"SPHEROID":case"ELLIPSOID":t[r]={name:e[0],a:e[1],rf:e[2]};if(e.length===4){m(e[3],t[r])}return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":e[0]=["name",e[0]];g(t,r,e);return;default:n=-1;while(++n<e.length){if(!Array.isArray(e[n])){return m(e,t[r])}}return g(t,r,e)}}var _=.017453292519943295;function y(e,t){var r=t[0];var n=t[1];if(!(r in e)&&n in e){e[r]=e[n];if(t.length===3){e[r]=t[2](e[r])}}}function b(e){return e*_}function w(r){if(r.type==="GEOGCS"){r.projName="longlat"}else if(r.type==="LOCAL_CS"){r.projName="identity";r.local=true}else{if(typeof r.PROJECTION==="object"){r.projName=Object.keys(r.PROJECTION)[0]}else{r.projName=r.PROJECTION}}if(r.UNIT){r.units=r.UNIT.name.toLowerCase();if(r.units==="metre"){r.units="meter"}if(r.UNIT.convert){if(r.type==="GEOGCS"){if(r.DATUM&&r.DATUM.SPHEROID){r.to_meter=r.UNIT.convert*r.DATUM.SPHEROID.a}}else{r.to_meter=r.UNIT.convert}}}var e=r.GEOGCS;if(r.type==="GEOGCS"){e=r}if(e){if(e.DATUM){r.datumCode=e.DATUM.name.toLowerCase()}else{r.datumCode=e.name.toLowerCase()}if(r.datumCode.slice(0,2)==="d_"){r.datumCode=r.datumCode.slice(2)}if(r.datumCode==="new_zealand_geodetic_datum_1949"||r.datumCode==="new_zealand_1949"){r.datumCode="nzgd49"}if(r.datumCode==="wgs_1984"){if(r.PROJECTION==="Mercator_Auxiliary_Sphere"){r.sphere=true}r.datumCode="wgs84"}if(r.datumCode.slice(-6)==="_ferro"){r.datumCode=r.datumCode.slice(0,-6)}if(r.datumCode.slice(-8)==="_jakarta"){r.datumCode=r.datumCode.slice(0,-8)}if(~r.datumCode.indexOf("belge")){r.datumCode="rnb72"}if(e.DATUM&&e.DATUM.SPHEROID){r.ellps=e.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk");if(r.ellps.toLowerCase().slice(0,13)==="international"){r.ellps="intl"}r.a=e.DATUM.SPHEROID.a;r.rf=parseFloat(e.DATUM.SPHEROID.rf,10)}if(e.DATUM&&e.DATUM.TOWGS84){r.datum_params=e.DATUM.TOWGS84}if(~r.datumCode.indexOf("osgb_1936")){r.datumCode="osgb36"}if(~r.datumCode.indexOf("osni_1952")){r.datumCode="osni52"}if(~r.datumCode.indexOf("tm65")||~r.datumCode.indexOf("geodetic_datum_of_1965")){r.datumCode="ire65"}if(r.datumCode==="ch1903+"){r.datumCode="ch1903"}if(~r.datumCode.indexOf("israel")){r.datumCode="isr93"}}if(r.b&&!isFinite(r.b)){r.b=r.a}function t(e){var t=r.to_meter||1;return e*t}var n=function e(t){return y(r,t)};var i=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",b],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",b],["x0","false_easting",t],["y0","false_northing",t],["long0","central_meridian",b],["lat0","latitude_of_origin",b],["lat0","standard_parallel_1",b],["lat1","standard_parallel_1",b],["lat2","standard_parallel_2",b],["azimuth","Azimuth"],["alpha","azimuth",b],["srsCode","name"]];i.forEach(n);if(!r.long0&&r.longc&&(r.projName==="Albers_Conic_Equal_Area"||r.projName==="Lambert_Azimuthal_Equal_Area")){r.long0=r.longc}if(!r.lat_ts&&r.lat1&&(r.projName==="Stereographic_South_Pole"||r.projName==="Polar Stereographic (variant B)")){r.lat0=b(r.lat1>0?90:-90);r.lat_ts=r.lat1}}var S=function e(t){var r=v(t);var n=r.shift();var i=r.shift();r.unshift(["name",i]);r.unshift(["type",n]);var a={};m(r,a);w(a);return a};e.exports=S},function(e,t,r){"use strict";function n(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e);var r=this.a;var n=this.rf;var i=1/n;var a=2*i-Math.pow(i,2);var o=this.e=Math.sqrt(a);this.R=this.k0*r*Math.sqrt(1-a)/(1-a*Math.pow(t,2));this.alpha=Math.sqrt(1+a/(1-a)*Math.pow(Math.cos(e),4));this.b0=Math.asin(t/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2));var l=Math.log(Math.tan(Math.PI/4+e/2));var u=Math.log((1+o*t)/(1-o*t));this.K=s-this.alpha*l+this.alpha*o/2*u}function i(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2));var r=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y)));var n=-this.alpha*(t+r)+this.K;var i=2*(Math.atan(Math.exp(n))-Math.PI/4);var a=this.alpha*(e.x-this.lambda0);var o=Math.atan(Math.sin(a)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(a)));var s=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(a));e.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0;e.x=this.R*o+this.x0;return e}function a(e){var t=e.x-this.x0;var r=e.y-this.y0;var n=t/this.R;var i=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4);var a=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(n));var o=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(i)));var s=this.lambda0+o/this.alpha;var l=0;var u=a;var c=-1e3;var f=0;while(Math.abs(u-c)>1e-7){if(++f>20){return}l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+a/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2));c=u;u=2*Math.atan(Math.exp(l))-Math.PI/2}e.x=s;e.y=u;return e}var o=["somerc"];t["a"]={init:n,forward:i,inverse:a,names:o}},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var h=r(10);var d=r(176);var p=r(178);function n(e){var t=Object.keys(e.defs);var r=t.length;var n,i;for(n=0;n<r;++n){var a=t[n];if(!Object(h["g"])(a)){var o=e.defs(a);Object(h["c"])(new p["a"]({code:a,axisOrientation:o.axis,metersPerUnit:o.to_meter,units:o.units}))}}for(n=0;n<r;++n){var s=t[n];var l=Object(h["g"])(s);for(i=0;i<r;++i){var u=t[i];var c=Object(h["g"])(u);if(!Object(d["c"])(s,u)){if(e.defs[s]===e.defs[u]){Object(h["b"])([l,c])}else{var f=e(s,u);Object(h["a"])(l,c,f.forward,f.inverse)}}}}}},function(e,t,r){"use strict";var n=r(357);var i=angular.module("ngeoGridModule",[n["a"].name]);t["a"]=i},function(e,t,r){"use strict";var g=r(1);var n=r(118);var m=r(229);var i=r(67);var a=r(515);var o=r.n(a);var s=r(516);var l=r.n(s);var u=r(297);var c=r.n(u);var f=angular.module("ngeoGrid",[m["a"].module.name,n["a"].name,"floatThead"]);f.run(["$templateCache",function(e){e.put("ngeo/grid",r(517))}]);f.value("ngeoGridTemplateUrl",function(e){var t=e["ngeoGridTemplateurl"];return t!==undefined?t:"ngeo/grid"});h.$inject=["$attrs","ngeoGridTemplateUrl"];function h(e,t){return t(e)}f.component_={controller:"ngeoGridController as ctrl",bindings:{configuration:"=ngeoGridConfiguration"},templateUrl:h};f.component("ngeoGrid",f.component_);f.Controller_=function(e){this.scope_=e;this.configuration;this.selectedRows;this.sortedBy;this.sortAscending=true;this.floatTheadConfig={scrollContainer:function e(t){return t.closest(".ngeo-grid-table-container")}}};f.Controller_.$inject=["$scope"];f.Controller_.prototype.$onInit=function(){this.selectedRows=this.configuration.selectedRows};f.Controller_.prototype.sort=function(r){this.sortAscending=this.sortedBy===r?!this.sortAscending:true;this.sortedBy=r;var n=this.sortAscending?1:-1;this.configuration.data.sort(function(e,t){if(!e[r]){return 1}if(!t[r]){return-1}return e[r]>t[r]?n:-n})};f.Controller_.prototype.clickRow=function(e,t){var r=this.isShiftKeyOnly_(t);var n=this.isPlatformModifierKeyOnly_(t);this.clickRow_(e,r,n)};f.Controller_.prototype.clickRow_=function(e,t,r){if(t&&!r){this.selectRange_(e)}else if(!t&&r){this.configuration.toggleRow(e)}else{var n=this.configuration.isRowSelected(e);this.configuration.unselectAll();if(!n){this.configuration.selectRow(e)}}};f.Controller_.prototype.selectRange_=function(e){var t=m["a"].getRowUid(e);var r=this.configuration.data;if(this.configuration.isRowSelected(e)){return}var n=undefined;var i=[];for(var a=0;a<r.length;a++){var o=r[a];var s=m["a"].getRowUid(o);if(t===s){n=a}else if(this.configuration.isRowSelected(o)){i.push(a)}}g["a"].assert(n!==undefined);if(i.length==0){this.configuration.selectRow(e)}var l=Infinity;var u=i[0];for(var c=0;c<i.length;c++){var f=i[c];var h=Math.abs(f-n);if(l>h){l=h;u=f}}var d=n<u?n:u;var p=n>u?n:u;for(var v=d;v<=p;v++){this.configuration.selectRow(r[v])}};f.Controller_.prototype.preventTextSelection=function(e){var t=this.isShiftKeyOnly_(e);var r=this.isPlatformModifierKeyOnly_(e);if(t||r){e.preventDefault()}};f.Controller_.prototype.isPlatformModifierKeyOnly_=function(e){return!e.altKey&&(i["d"]?e.metaKey:e.ctrlKey)&&!e.shiftKey};f.Controller_.prototype.isShiftKeyOnly_=function(e){return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey};f.controller("ngeoGridController",f.Controller_);t["a"]=f},function(e,t,r){"use strict";var n=r(340);var i=angular.module("ngeoLayertreeModule",[n["a"].name]);t["a"]=i},function(e,t,r){"use strict";var o=r(1);var n=r(3);var i=r(70);var a=r(151);var s=function e(t,r,n){var i=this;var a=n;this.url_=a.url;this.maxFeatures_=a.maxFeatures!==undefined?a.maxFeatures:50;this.wfsTypes_={};o["a"].assertArray(a.wfsTypes,"wfsTypes is not correctly set");a.wfsTypes.forEach(function(e){i.wfsTypes_[e.featureType]=e});this.defaultFeatureNS_=a.defaultFeatureNS;this.defaultFeaturePrefix_=a.defaultFeaturePrefix;this.pointRecenterZoom_=a.pointRecenterZoom;this.$http_=t;this.result_=r};s.$inject=["$http","ngeoQueryResult","ngeoWfsPermalinkOptions"];s.$inject=["$http","ngeoQueryResult","ngeoWfsPermalinkOptions"];s.prototype.clear=function(){this.clearResult_()};s.prototype.issue=function(e,t){o["a"].assert(this.url_,"url is not set. to use the wfs permalink service, "+"set the value `ngeoWfsPermalinkOptions`");this.clearResult_();var r=e.wfsType;if(!this.wfsTypes_.hasOwnProperty(r)){return}var n=this.wfsTypes_[r];var i=this.createFilters_(e.filterGroups);if(i===null){return}this.issueRequest_(n,i,t,e.showFeatures)};s.prototype.issueRequest_=function(o,e,s,l){var u=this;var c=new a["a"];var t=c.writeGetFeature({srsName:s.getView().getProjection().getCode(),featureNS:o.featureNS!==undefined?o.featureNS:this.defaultFeatureNS_,featurePrefix:o.featurePrefix!==undefined?o.featurePrefix:this.defaultFeaturePrefix_,featureTypes:[o.featureType],outputFormat:"GML3",filter:e,maxFeatures:this.maxFeatures_});var r=(new XMLSerializer).serializeToString(t);var n={headers:{"Content-Type":"text/xml; charset=UTF-8"}};this.$http_.post(this.url_,r,n).then(function(e){var t=c.readFeatures(e.data);if(t.length==0){return}var r=s.getSize();if(r!==undefined){var n=u.pointRecenterZoom_;var i=[10,10,10,10];s.getView().fit(u.getExtent_(t),{size:r,maxZoom:n,padding:i})}if(l){var a={features:t,id:o.featureType,identifierAttributeField:o.label,label:o.featureType,pending:false};u.result_.sources.push(a);u.result_.total=t.length}})};s.prototype.getExtent_=function(e){return e.reduce(function(e,t){return n["q"](e,t.getGeometry().getExtent())},n["j"]())};s.prototype.createFilters_=function(e){if(e.length==0){return null}var n=i;var t=function e(t){var r=t.filters.map(function(t){var e=t.condition;if(Array.isArray(e)){return s.or_(e.map(function(e){return n.equalTo(t.property,e)}))}else{return n.equalTo(t.property,t.condition)}});return s.and_(r)};return s.or_(e.map(t))};s.and_=function(e){return s.joinFilters_(e,i["and"])};s.or_=function(e){return s.joinFilters_(e,i["or"])};s.joinFilters_=function(e,r){return e.reduce(function(e,t){if(e===null){return t}else{o["a"].assert(t!==null);return r(e,t)}},null)};s.prototype.clearResult_=function(){this.result_.total=0;this.result_.sources.forEach(function(e){e.features.length=0})};s.module=angular.module("ngeoWfsPermalink",[]);s.module.value("ngeoWfsPermalinkOptions",{url:"",wfsTypes:[],defaultFeatureNS:"",defaultFeaturePrefix:""});s.module.service("ngeoWfsPermalink",s);t["a"]=s},function(e,t,r){"use strict";var n=r(10);var i=r(355);var a=r(352);var o=r(226);var s=["+proj="+a["a"],"+lat_0=46.95240555555556","+lon_0=7.439583333333333","+k_0=1","+x_0=2600000","+y_0=1200000","+ellps=bessel","+towgs84=674.374,15.056,405.346,0,0,0,0","+units=m","+no_defs"].join(" ");var l=[242e4,103e4,29e5,135e4];o["a"].defs("EPSG:2056",s);i["a"](o["a"]);n["g"]("EPSG:2056").setExtent(l);var u="EPSG:2056";t["a"]=u},function(e,t,r){"use strict";var n=r(184);var i=r(154);var a=r(74);var o={};o.toXY=function(e,t){if(t===0){if(e.length>2){e=[e[0],e[1]]}}else{for(var r=0,n=e.length;r<n;r++){e[r]=o.toXY(e[r],t-1)}}return e};var s=o;var l=r(35);var u=r(83);var c=r(85);var f=r(86);var h=r(21);var d=r(31);var p=r(82);var v={};v.isEmpty=function(e){var t=true;if(e&&e instanceof p["a"]){t=e.getFlatCoordinates().length===0}return t};v.toXY=function(e){if(e instanceof h["a"]){e.setCoordinates(s.toXY(e.getCoordinates(),0))}else if(e instanceof c["a"]||e instanceof l["a"]){e.setCoordinates(s.toXY(e.getCoordinates(),1))}else if(e instanceof u["a"]||e instanceof d["a"]){e.setCoordinates(s.toXY(e.getCoordinates(),2))}else if(e instanceof f["a"]){e.setCoordinates(s.toXY(e.getCoordinates(),3))}else{throw"gmf.objectediting.geom.toXY - unsupported geometry type"}};var g=v;var m=r(265);var _=r(246);var y=r(1);var b=r(91);var w=r(100);var S=r(62);var C=r(61);var O=r(92);var x=r(76);var T=r(5);var E=r(23);var M=r(2);var A=r(137);var k=r(101);var j=r(28);var I=r(205);var D=r(66);var P=r(30);var R=r(29);var L=r(11);var N=function(e,t){return e.interfaces_&&e.interfaces_.indexOf(t)>-1};function $(){}function F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function G(e,t,r){if(t)F(e.prototype,t);if(r)F(e,r);return e}var U=function(){function t(){t.constructor_.apply(this,arguments)}var e=t.prototype;e.setOrdinate=function e(t,r,n){};e.size=function e(){};e.getOrdinate=function e(t,r){};e.getCoordinate=function e(){if(arguments.length===1){var t=arguments[0]}else if(arguments.length===2){var r=arguments[0],n=arguments[1]}};e.getCoordinateCopy=function e(t){};e.getDimension=function e(){};e.getX=function e(t){};e.expandEnvelope=function e(t){};e.copy=function e(){};e.getY=function e(t){};e.toCoordinateArray=function e(){};e.getClass=function e(){return t};G(t,[{key:"interfaces_",get:function e(){return[$]}}]);return t}();U.constructor_=function(){};U.X=0;U.Y=1;U.Z=2;U.M=3;function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function W(e,t,r){if(t)H(e.prototype,t);if(r)H(e,r);return e}var Y=function(){function t(){t.constructor_.apply(this,arguments)}var e=t.prototype;e.create=function e(){if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0]}else if(N(arguments[0],U)){var r=arguments[0]}}else if(arguments.length===2){var n=arguments[0],i=arguments[1]}};e.getClass=function e(){return t};W(t,[{key:"interfaces_",get:function e(){return[]}}]);return t}();Y.constructor_=function(){};function V(e){this.message=e}function q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function z(e,t,r){if(t)q(e.prototype,t);if(r)q(e,r);return e}var B=function(){function t(){t.constructor_.apply(this,arguments)}var e=t.prototype;e.filter=function e(t){};e.getClass=function e(){return t};z(t,[{key:"interfaces_",get:function e(){return[]}}]);return t}();B.constructor_=function(){};function K(){}function X(){}function Z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function Q(e,t,r){if(t)Z(e.prototype,t);if(r)Z(e,r);return e}var J=function(){function t(){t.constructor_.apply(this,arguments)}t.equalsWithTolerance=function e(t,r,n){return Math.abs(t-r)<=n};var e=t.prototype;e.getClass=function e(){return t};Q(t,[{key:"interfaces_",get:function e(){return[]}}]);return t}();J.constructor_=function(){};function ee(e,t){this.low=t|0;this.high=e|0}ee.toBinaryString=function(e){var t="";for(var r=2147483648;r>0;r>>>=1){t+=(e.high&r)===r?"1":"0"}for(var r=2147483648;r>0;r>>>=1){t+=(e.low&r)===r?"1":"0"}return t};function te(){}te.isNaN=function(e){return Number.isNaN(e)};te.isInfinite=function(e){return!Number.isFinite(e)};te.MAX_VALUE=Number.MAX_VALUE;if(typeof Float64Array=="function"&&typeof Int32Array=="function"){(function(){var n=2146435072;var i=1048575;var a=new Float64Array(1);var o=new Int32Array(a.buffer);te.doubleToLongBits=function(e){a[0]=e;var t=o[0]|0;var r=o[1]|0;if((r&n)===n&&(r&i)!==0&&t!==0){t=0|0;r=2146959360|0}return new ee(r,t)};te.longBitsToDouble=function(e){o[0]=e.low;o[1]=e.high;return a[0]}})()}else{(function(){var c=1023;var f=Math.log2;var h=Math.floor;var d=Math.pow;var p=function(){for(var e=53;e>0;e--){var t=d(2,e)-1;if(h(f(t))+1===e){return t}}return 0}();te.doubleToLongBits=function(e){var t,r,n,i,a;var o,s,l,u;if(e<0||1/e===Number.NEGATIVE_INFINITY){o=1<<31;e=-e}else{o=0}if(e===0){u=0|0;l=o;return new ee(l,u)}if(e===Infinity){u=0|0;l=o|2146435072;return new ee(l,u)}if(e!==e){u=0|0;l=2146959360;return new ee(l,u)}i=0;u=0|0;t=h(e);if(t>1){if(t<=p){i=h(f(t));if(i<=20){u=0|0;l=t<<20-i&1048575}else{n=i-20;r=d(2,n);u=t%r<<32-n;l=t/r&1048575}}else{n=t;u=0|0;while(true){r=n/2;n=h(r);if(n===0){break}i++;u>>>=1;u|=(l&1)<<31;l>>>=1;if(r!==n){l|=524288}}}}s=i+c;a=t===0;t=e-t;if(i<52&&t!==0){n=0;while(true){r=t*2;if(r>=1){t=r-1;if(!a){n<<=1;n|=1;i++}else{s--;a=false}}else{t=r;if(!a){n<<=1;i++}else if(--s===0){i++;a=false}}if(i===20){l|=n;n=0}else if(i===52){u|=n;break}if(r===1){if(i<20){l|=n<<20-i}else if(i<52){u|=n<<52-i}break}}}l|=s<<20;l|=o;return new ee(l,u)};te.longBitsToDouble=function(e){var t,r,n,i;var a=e.high;var o=e.low;r=a&1<<31?-1:1;n=((a&2146435072)>>20)-c;i=0;t=1<<19;for(var s=1;s<=20;s++){if(a&t){i+=d(2,-s)}t>>>=1}t=1<<31;for(var s=21;s<=52;s++){if(o&t){i+=d(2,-s)}t>>>=1}if(n===-c){if(i===0){return r*0}n=-1022}else if(n===c+1){if(i===0){return r/0}return NaN}else{i+=1}return r*i*d(2,n)}})()}function re(){}function ne(e){this.name="RuntimeException";this.message=e;this.stack=(new Error).stack;Error.call(this,e)}ne.prototype=Object.create(Error.prototype);ne.prototype.constructor=Error;function ie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function ae(e,t,r){if(t)ie(e.prototype,t);if(r)ie(e,r);return e}function oe(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}function se(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}var le=function(t){oe(r,t);function r(){var e;e=t.call(this)||this;r.constructor_.apply(se(se(e)),arguments);return e}var e=r.prototype;e.getClass=function e(){return r};ae(r,[{key:"interfaces_",get:function e(){return[]}}]);return r}(ne);le.constructor_=function(){if(arguments.length===0){ne.constructor_.call(this)}else if(arguments.length===1){var e=arguments[0];ne.constructor_.call(this,e)}};function ue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function ce(e,t,r){if(t)ue(e.prototype,t);if(r)ue(e,r);return e}var fe=function(){function o(){o.constructor_.apply(this,arguments)}o.shouldNeverReachHere=function e(){if(arguments.length===0){o.shouldNeverReachHere(null)}else if(arguments.length===1){var t=arguments[0];throw new le("Should never reach here"+(t!==null?": "+t:""))}};o.isTrue=function e(){if(arguments.length===1){var t=arguments[0];o.isTrue(t,null)}else if(arguments.length===2){var r=arguments[0],n=arguments[1];if(!r){if(n===null){throw new le}else{throw new le(n)}}}};o.equals=function e(){if(arguments.length===2){var t=arguments[0],r=arguments[1];o.equals(t,r,null)}else if(arguments.length===3){var n=arguments[0],i=arguments[1],a=arguments[2];if(!i.equals(n)){throw new le("Expected "+n+" but encountered "+i+(a!==null?": "+a:""))}}};var e=o.prototype;e.getClass=function e(){return o};ce(o,[{key:"interfaces_",get:function e(){return[]}}]);return o}();fe.constructor_=function(){};function he(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function de(e,t,r){if(t)he(e.prototype,t);if(r)he(e,r);return e}var pe=function(){function n(){n.constructor_.apply(this,arguments)}n.hashCode=function e(){if(arguments.length===1&&typeof arguments[0]==="number"){var t=arguments[0];var r=te.doubleToLongBits(t);return Math.trunc(r^r>>>32)}};var e=n.prototype;e.setOrdinate=function e(t,r){switch(t){case n.X:this.x=r;break;case n.Y:this.y=r;break;case n.Z:this.z=r;break;default:throw new V("Invalid ordinate index: "+t)}};e.equals2D=function e(){if(arguments.length===1){var t=arguments[0];if(this.x!==t.x){return false}if(this.y!==t.y){return false}return true}else if(arguments.length===2){var r=arguments[0],n=arguments[1];if(!J.equalsWithTolerance(this.x,r.x,n)){return false}if(!J.equalsWithTolerance(this.y,r.y,n)){return false}return true}};e.getOrdinate=function e(t){switch(t){case n.X:return this.x;case n.Y:return this.y;case n.Z:return this.z}throw new V("Invalid ordinate index: "+t)};e.equals3D=function e(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||te.isNaN(this.z)&&te.isNaN(t.z))};e.equals=function e(t){if(!(t instanceof n)){return false}return this.equals2D(t)};e.equalInZ=function e(t,r){return J.equalsWithTolerance(this.z,t.z,r)};e.compareTo=function e(t){var r=t;if(this.x<r.x)return-1;if(this.x>r.x)return 1;if(this.y<r.y)return-1;if(this.y>r.y)return 1;return 0};e.clone=function e(){try{var t=null;return t}catch(e){if(e instanceof CloneNotSupportedException){fe.shouldNeverReachHere("this shouldn't happen because this class is Cloneable");return null}else throw e}finally{}};e.copy=function e(){return new n(this)};e.toString=function e(){return"("+this.x+", "+this.y+", "+this.z+")"};e.distance3D=function e(t){var r=this.x-t.x;var n=this.y-t.y;var i=this.z-t.z;return Math.sqrt(r*r+n*n+i*i)};e.distance=function e(t){var r=this.x-t.x;var n=this.y-t.y;return Math.sqrt(r*r+n*n)};e.hashCode=function e(){var t=17;t=37*t+n.hashCode(this.x);t=37*t+n.hashCode(this.y);return t};e.setCoordinate=function e(t){this.x=t.x;this.y=t.y;this.z=t.z};e.getClass=function e(){return n};de(n,[{key:"interfaces_",get:function e(){return[K,$,X]}}]);return n}();var ve=function(){function l(){l.constructor_.apply(this,arguments)}l.compare=function e(t,r){if(t<r)return-1;if(t>r)return 1;if(te.isNaN(t)){if(te.isNaN(r))return 0;return-1}if(te.isNaN(r))return 1;return 0};var e=l.prototype;e.compare=function e(t,r){var n=t;var i=r;var a=l.compare(n.x,i.x);if(a!==0)return a;var o=l.compare(n.y,i.y);if(o!==0)return o;if(this._dimensionsToTest<=2)return 0;var s=l.compare(n.z,i.z);return s};e.getClass=function e(){return l};de(l,[{key:"interfaces_",get:function e(){return[re]}}]);return l}();ve.constructor_=function(){this._dimensionsToTest=2;if(arguments.length===0){ve.constructor_.call(this,2)}else if(arguments.length===1){var e=arguments[0];if(e!==2&&e!==3)throw new V("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};pe.DimensionalComparator=ve;pe.constructor_=function(){this.x=null;this.y=null;this.z=null;if(arguments.length===0){pe.constructor_.call(this,0,0)}else if(arguments.length===1){var e=arguments[0];pe.constructor_.call(this,e.x,e.y,e.z)}else if(arguments.length===2){var t=arguments[0],r=arguments[1];pe.constructor_.call(this,t,r,pe.NULL_ORDINATE)}else if(arguments.length===3){var n=arguments[0],i=arguments[1],a=arguments[2];this.x=n;this.y=i;this.z=a}};pe.serialVersionUID=0x5cbf2c235c7e5800;pe.NULL_ORDINATE=te.NaN;pe.X=0;pe.Y=1;pe.Z=2;function ge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function me(e,t,r){if(t)ge(e.prototype,t);if(r)ge(e,r);return e}var _e=function(){function f(){f.constructor_.apply(this,arguments)}f.intersects=function e(){if(arguments.length===3){var t=arguments[0],r=arguments[1],n=arguments[2];if(n.x>=(t.x<r.x?t.x:r.x)&&n.x<=(t.x>r.x?t.x:r.x)&&n.y>=(t.y<r.y?t.y:r.y)&&n.y<=(t.y>r.y?t.y:r.y)){return true}return false}else if(arguments.length===4){var i=arguments[0],a=arguments[1],o=arguments[2],s=arguments[3];var l=Math.min(o.x,s.x);var u=Math.max(o.x,s.x);var c=Math.min(i.x,a.x);var f=Math.max(i.x,a.x);if(c>u)return false;if(f<l)return false;l=Math.min(o.y,s.y);u=Math.max(o.y,s.y);c=Math.min(i.y,a.y);f=Math.max(i.y,a.y);if(c>u)return false;if(f<l)return false;return true}};var e=f.prototype;e.getArea=function e(){return this.getWidth()*this.getHeight()};e.equals=function e(t){if(!(t instanceof f)){return false}var r=t;if(this.isNull()){return r.isNull()}return this._maxx===r.getMaxX()&&this._maxy===r.getMaxY()&&this._minx===r.getMinX()&&this._miny===r.getMinY()};e.intersection=function e(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new f;var r=this._minx>t._minx?this._minx:t._minx;var n=this._miny>t._miny?this._miny:t._miny;var i=this._maxx<t._maxx?this._maxx:t._maxx;var a=this._maxy<t._maxy?this._maxy:t._maxy;return new f(r,i,n,a)};e.isNull=function e(){return this._maxx<this._minx};e.getMaxX=function e(){return this._maxx};e.covers=function e(){if(arguments.length===1){if(arguments[0]instanceof pe){var t=arguments[0];return this.covers(t.x,t.y)}else if(arguments[0]instanceof f){var r=arguments[0];if(this.isNull()||r.isNull()){return false}return r.getMinX()>=this._minx&&r.getMaxX()<=this._maxx&&r.getMinY()>=this._miny&&r.getMaxY()<=this._maxy}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];if(this.isNull())return false;return n>=this._minx&&n<=this._maxx&&i>=this._miny&&i<=this._maxy}};e.intersects=function e(){if(arguments.length===1){if(arguments[0]instanceof f){var t=arguments[0];if(this.isNull()||t.isNull()){return false}return!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}else if(arguments[0]instanceof pe){var r=arguments[0];return this.intersects(r.x,r.y)}}else if(arguments.length===2){if(arguments[0]instanceof pe&&arguments[1]instanceof pe){var n=arguments[0],i=arguments[1];if(this.isNull()){return false}var a=n.x<i.x?n.x:i.x;if(a>this._maxx)return false;var o=n.x>i.x?n.x:i.x;if(o<this._minx)return false;var s=n.y<i.y?n.y:i.y;if(s>this._maxy)return false;var l=n.y>i.y?n.y:i.y;if(l<this._miny)return false;return true}else if(typeof arguments[0]==="number"&&typeof arguments[1]==="number"){var u=arguments[0],c=arguments[1];if(this.isNull())return false;return!(u>this._maxx||u<this._minx||c>this._maxy||c<this._miny)}}};e.getMinY=function e(){return this._miny};e.getMinX=function e(){return this._minx};e.expandToInclude=function e(){if(arguments.length===1){if(arguments[0]instanceof pe){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof f){var r=arguments[0];if(r.isNull()){return null}if(this.isNull()){this._minx=r.getMinX();this._maxx=r.getMaxX();this._miny=r.getMinY();this._maxy=r.getMaxY()}else{if(r._minx<this._minx){this._minx=r._minx}if(r._maxx>this._maxx){this._maxx=r._maxx}if(r._miny<this._miny){this._miny=r._miny}if(r._maxy>this._maxy){this._maxy=r._maxy}}}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];if(this.isNull()){this._minx=n;this._maxx=n;this._miny=i;this._maxy=i}else{if(n<this._minx){this._minx=n}if(n>this._maxx){this._maxx=n}if(i<this._miny){this._miny=i}if(i>this._maxy){this._maxy=i}}}};e.minExtent=function e(){if(this.isNull())return 0;var t=this.getWidth();var r=this.getHeight();if(t<r)return t;return r};e.getWidth=function e(){if(this.isNull()){return 0}return this._maxx-this._minx};e.compareTo=function e(t){var r=t;if(this.isNull()){if(r.isNull())return 0;return-1}else{if(r.isNull())return 1}if(this._minx<r._minx)return-1;if(this._minx>r._minx)return 1;if(this._miny<r._miny)return-1;if(this._miny>r._miny)return 1;if(this._maxx<r._maxx)return-1;if(this._maxx>r._maxx)return 1;if(this._maxy<r._maxy)return-1;if(this._maxy>r._maxy)return 1;return 0};e.translate=function e(t,r){if(this.isNull()){return null}this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+r,this.getMaxY()+r)};e.toString=function e(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"};e.setToNull=function e(){this._minx=0;this._maxx=-1;this._miny=0;this._maxy=-1};e.getHeight=function e(){if(this.isNull()){return 0}return this._maxy-this._miny};e.maxExtent=function e(){if(this.isNull())return 0;var t=this.getWidth();var r=this.getHeight();if(t>r)return t;return r};e.expandBy=function e(){if(arguments.length===1){var t=arguments[0];this.expandBy(t,t)}else if(arguments.length===2){var r=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=r;this._maxx+=r;this._miny-=n;this._maxy+=n;if(this._minx>this._maxx||this._miny>this._maxy)this.setToNull()}};e.contains=function e(){if(arguments.length===1){if(arguments[0]instanceof f){var t=arguments[0];return this.covers(t)}else if(arguments[0]instanceof pe){var r=arguments[0];return this.covers(r)}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];return this.covers(n,i)}};e.centre=function e(){if(this.isNull())return null;return new pe((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)};e.init=function e(){if(arguments.length===0){this.setToNull()}else if(arguments.length===1){if(arguments[0]instanceof pe){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof f){var r=arguments[0];this._minx=r._minx;this._maxx=r._maxx;this._miny=r._miny;this._maxy=r._maxy}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(arguments.length===4){var a=arguments[0],o=arguments[1],s=arguments[2],l=arguments[3];if(a<o){this._minx=a;this._maxx=o}else{this._minx=o;this._maxx=a}if(s<l){this._miny=s;this._maxy=l}else{this._miny=l;this._maxy=s}}};e.getMaxY=function e(){return this._maxy};e.distance=function e(t){if(this.intersects(t))return 0;var r=0;if(this._maxx<t._minx)r=t._minx-this._maxx;else if(this._minx>t._maxx)r=this._minx-t._maxx;var n=0;if(this._maxy<t._miny)n=t._miny-this._maxy;else if(this._miny>t._maxy)n=this._miny-t._maxy;if(r===0)return n;if(n===0)return r;return Math.sqrt(r*r+n*n)};e.hashCode=function e(){var t=17;t=37*t+pe.hashCode(this._minx);t=37*t+pe.hashCode(this._maxx);t=37*t+pe.hashCode(this._miny);t=37*t+pe.hashCode(this._maxy);return t};e.getClass=function e(){return f};me(f,[{key:"interfaces_",get:function e(){return[K,X]}}]);return f}();_e.constructor_=function(){this._minx=null;this._maxx=null;this._miny=null;this._maxy=null;if(arguments.length===0){this.init()}else if(arguments.length===1){if(arguments[0]instanceof pe){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof _e){var t=arguments[0];this.init(t)}}else if(arguments.length===2){var r=arguments[0],n=arguments[1];this.init(r.x,n.x,r.y,n.y)}else if(arguments.length===4){var i=arguments[0],a=arguments[1],o=arguments[2],s=arguments[3];this.init(i,a,o,s)}};_e.serialVersionUID=0x51845cd552189800;function ye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function be(e,t,r){if(t)ye(e.prototype,t);if(r)ye(e,r);return e}var we=function(){function i(){i.constructor_.apply(this,arguments)}var e=i.prototype;e.isGeometryCollection=function e(){return this.getTypeCode()===i.TYPECODE_GEOMETRYCOLLECTION};e.getFactory=function e(){return this._factory};e.getGeometryN=function e(t){return this};e.getArea=function e(){return 0};e.isRectangle=function e(){return false};e.equals=function e(){if(arguments[0]instanceof i){var t=arguments[0];if(t===null)return false;return this.equalsTopo(t)}else if(arguments[0]instanceof Object){var r=arguments[0];if(!(r instanceof i))return false;var n=r;return this.equalsExact(n)}};e.equalsExact=function e(t){return this===t||this.equalsExact(t,0)};e.geometryChanged=function e(){this.apply(i.geometryChangedFilter)};e.geometryChangedAction=function e(){this._envelope=null};e.equalsNorm=function e(t){if(t===null)return false;return this.norm().equalsExact(t.norm())};e.getLength=function e(){return 0};e.getNumGeometries=function e(){return 1};e.compareTo=function e(){if(arguments.length===1){var t=arguments[0];var r=t;if(this.getTypeCode()!==r.getTypeCode()){return this.getTypeCode()-r.getTypeCode()}if(this.isEmpty()&&r.isEmpty()){return 0}if(this.isEmpty()){return-1}if(r.isEmpty()){return 1}return this.compareToSameClass(t)}else if(arguments.length===2){var n=arguments[0],i=arguments[1];var r=n;if(this.getTypeCode()!==r.getTypeCode()){return this.getTypeCode()-r.getTypeCode()}if(this.isEmpty()&&r.isEmpty()){return 0}if(this.isEmpty()){return-1}if(r.isEmpty()){return 1}return this.compareToSameClass(n,i)}};e.getUserData=function e(){return this._userData};e.getSRID=function e(){return this._SRID};e.getEnvelope=function e(){return this.getFactory().toGeometry(this.getEnvelopeInternal())};e.checkNotGeometryCollection=function e(t){if(t.getTypeCode()===i.TYPECODE_GEOMETRYCOLLECTION){throw new V("This method does not support GeometryCollection arguments")}};e.equal=function e(t,r,n){if(n===0){return t.equals(r)}return t.distance(r)<=n};e.norm=function e(){var t=this.copy();t.normalize();return t};e.getPrecisionModel=function e(){return this._factory.getPrecisionModel()};e.getEnvelopeInternal=function e(){if(this._envelope===null){this._envelope=this.computeEnvelopeInternal()}return new _e(this._envelope)};e.setSRID=function e(t){this._SRID=t};e.setUserData=function e(t){this._userData=t};e.compare=function e(t,r){var n=t.iterator();var i=r.iterator();while(n.hasNext()&&i.hasNext()){var a=n.next();var o=i.next();var s=a.compareTo(o);if(s!==0){return s}}if(n.hasNext()){return 1}if(i.hasNext()){return-1}return 0};e.hashCode=function e(){return this.getEnvelopeInternal().hashCode()};e.isGeometryCollectionOrDerived=function e(){if(this.getTypeCode()===i.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===i.TYPECODE_MULTIPOINT||this.getTypeCode()===i.TYPECODE_MULTILINESTRING||this.getTypeCode()===i.TYPECODE_MULTIPOLYGON){return true}return false};e.getClass=function e(){return i};i.hasNonEmptyElements=function e(t){for(var r=0;r<t.length;r++){if(!t[r].isEmpty()){return true}}return false};i.hasNullElements=function e(t){for(var r=0;r<t.length;r++){if(t[r]===null){return true}}return false};be(i,[{key:"interfaces_",get:function e(){return[$,K,X]}}]);return i}();we.constructor_=function(e){if(!e)return;this._envelope=null;this._userData=null;this._factory=e;this._SRID=e.getSRID()};we.serialVersionUID=0x799ea46522854c00;we.TYPECODE_POINT=0;we.TYPECODE_MULTIPOINT=1;we.TYPECODE_LINESTRING=2;we.TYPECODE_LINEARRING=3;we.TYPECODE_MULTILINESTRING=4;we.TYPECODE_POLYGON=5;we.TYPECODE_MULTIPOLYGON=6;we.TYPECODE_GEOMETRYCOLLECTION=7;we.TYPENAME_POINT="Point";we.TYPENAME_MULTIPOINT="MultiPoint";we.TYPENAME_LINESTRING="LineString";we.TYPENAME_LINEARRING="LinearRing";we.TYPENAME_MULTILINESTRING="MultiLineString";we.TYPENAME_POLYGON="Polygon";we.TYPENAME_MULTIPOLYGON="MultiPolygon";we.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection";we.geometryChangedFilter={get interfaces_(){return[B]},filter:function e(t){t.geometryChangedAction()}};function Se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function Ce(e,t,r){if(t)Se(e.prototype,t);if(r)Se(e,r);return e}var Oe=function(){function t(){t.constructor_.apply(this,arguments)}var e=t.prototype;e.filter=function e(t){};e.getClass=function e(){return t};Ce(t,[{key:"interfaces_",get:function e(){return[]}}]);return t}();Oe.constructor_=function(){};function xe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function Te(e,t,r){if(t)xe(e.prototype,t);if(r)xe(e,r);return e}var Ee=function(){function t(){t.constructor_.apply(this,arguments)}var e=t.prototype;e.isInBoundary=function e(t){};e.getClass=function e(){return t};Te(t,[{key:"interfaces_",get:function e(){return[]}}]);return t}();var Me=function(){function t(){t.constructor_.apply(this,arguments)}var e=t.prototype;e.isInBoundary=function e(t){return t%2===1};e.getClass=function e(){return t};Te(t,[{key:"interfaces_",get:function e(){return[Ee]}}]);return t}();Me.constructor_=function(){};var Ae=function(){function t(){t.constructor_.apply(this,arguments)}var e=t.prototype;e.isInBoundary=function e(t){return t>0};e.getClass=function e(){return t};Te(t,[{key:"interfaces_",get:function e(){return[Ee]}}]);return t}();Ae.constructor_=function(){};var ke=function(){function t(){t.constructor_.apply(this,arguments)}var e=t.prototype;e.isInBoundary=function e(t){return t>1};e.getClass=function e(){return t};Te(t,[{key:"interfaces_",get:function e(){return[Ee]}}]);return t}();ke.constructor_=function(){};var je=function(){function t(){t.constructor_.apply(this,arguments)}var e=t.prototype;e.isInBoundary=function e(t){return t===1};e.getClass=function e(){return t};Te(t,[{key:"interfaces_",get:function e(){return[Ee]}}]);return t}();je.constructor_=function(){};Ee.Mod2BoundaryNodeRule=Me;Ee.EndPointBoundaryNodeRule=Ae;Ee.MultiValentEndPointBoundaryNodeRule=ke;Ee.MonoValentEndPointBoundaryNodeRule=je;Ee.constructor_=function(){};Ee.MOD2_BOUNDARY_RULE=new Me;Ee.ENDPOINT_BOUNDARY_RULE=new Ae;Ee.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new ke;Ee.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new je;Ee.OGC_SFS_BOUNDARY_RULE=Ee.MOD2_BOUNDARY_RULE;function Ie(){}Ie.prototype.hasNext=function(){};Ie.prototype.next=function(){};Ie.prototype.remove=function(){};function De(){}De.prototype.add=function(){};De.prototype.addAll=function(){};De.prototype.isEmpty=function(){};De.prototype.iterator=function(){};De.prototype.size=function(){};De.prototype.toArray=function(){};De.prototype.remove=function(){};function Pe(e){this.message=e||""}Pe.prototype=new Error;Pe.prototype.name="IndexOutOfBoundsException";function Re(){}Re.prototype=Object.create(De.prototype);Re.prototype.constructor=Re;Re.prototype.get=function(){};Re.prototype.set=function(){};Re.prototype.isEmpty=function(){};function Le(e){this.message=e||""}Le.prototype=new Error;Le.prototype.name="NoSuchElementException";function Ne(e){this.message=e||""}Ne.prototype=new Error;Ne.prototype.name="OperationNotSupported";function $e(){this.array_=[];if(arguments[0]instanceof De){this.addAll(arguments[0])}}$e.prototype=Object.create(Re.prototype);$e.prototype.constructor=$e;$e.prototype.ensureCapacity=function(){};$e.prototype.interfaces_=[Re,De];$e.prototype.add=function(e){if(arguments.length===1){this.array_.push(e)}else{this.array_.splice(arguments[0],0,arguments[1])}return true};$e.prototype.clear=function(){this.array_=[]};$e.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();){this.add(t.next())}return true};$e.prototype.set=function(e,t){var r=this.array_[e];this.array_[e]=t;return r};$e.prototype.iterator=function(){return new Fe(this)};$e.prototype.get=function(e){if(e<0||e>=this.size()){throw new Pe}return this.array_[e]};$e.prototype.isEmpty=function(){return this.array_.length===0};$e.prototype.size=function(){return this.array_.length};$e.prototype.toArray=function(){var e=[];for(var t=0,r=this.array_.length;t<r;t++){e.push(this.array_[t])}return e};$e.prototype.remove=function(e){var t=false;for(var r=0,n=this.array_.length;r<n;r++){if(this.array_[r]===e){this.array_.splice(r,1);t=true;break}}return t};$e.prototype.removeAll=function(e){for(var t=e.iterator();t.hasNext();){this.remove(t.next())}return true};var Fe=function e(t){this.arrayList_=t;this.position_=0};Fe.prototype.next=function(){if(this.position_===this.arrayList_.size()){throw new Le}return this.arrayList_.get(this.position_++)};Fe.prototype.hasNext=function(){if(this.position_<this.arrayList_.size()){return true}else{return false}};Fe.prototype.set=function(e){return this.arrayList_.set(this.position_-1,e)};Fe.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))};function Ge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function Ue(e,t,r){if(t)Ge(e.prototype,t);if(r)Ge(e,r);return e}function He(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}function We(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}var Ye=function(O){He(t,O);function t(){var e;e=O.call(this)||this;t.constructor_.apply(We(We(e)),arguments);return e}var e=t.prototype;e.getCoordinate=function e(t){return this.get(t)};e.addAll=function e(){if(arguments.length===2&&typeof arguments[1]==="boolean"&&N(arguments[0],De)){var t=arguments[0],r=arguments[1];var n=false;for(var i=t.iterator();i.hasNext();){this.add(i.next(),r);n=true}return n}else return O.prototype.addAll.apply(this,arguments)};e.clone=function e(){var e=O.prototype.clone.call(this);for(var t=0;t<this.size();t++){e.add(t,this.get(t).clone())}return e};e.toCoordinateArray=function e(){return this.toArray(t.coordArrayType)};e.add=function e(){if(arguments.length===1){var t=arguments[0];O.prototype.add.call(this,t)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]==="boolean"){var r=arguments[0],n=arguments[1];this.add(r,n,true);return true}else if(arguments[0]instanceof pe&&typeof arguments[1]==="boolean"){var i=arguments[0],a=arguments[1];if(!a){if(this.size()>=1){var o=this.get(this.size()-1);if(o.equals2D(i))return null}}O.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&typeof arguments[1]==="boolean"){var s=arguments[0],l=arguments[1];this.add(s,l);return true}}else if(arguments.length===3){if(typeof arguments[2]==="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]==="boolean"){var u=arguments[0],c=arguments[1],f=arguments[2];if(f){for(var h=0;h<u.length;h++){this.add(u[h],c)}}else{for(var h=u.length-1;h>=0;h--){this.add(u[h],c)}}return true}else if(typeof arguments[2]==="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof pe){var d=arguments[0],p=arguments[1],v=arguments[2];if(!v){var g=this.size();if(g>0){if(d>0){var m=this.get(d-1);if(m.equals2D(p))return null}if(d<g){var _=this.get(d);if(_.equals2D(p))return null}}}O.prototype.add.call(this,d,p)}}else if(arguments.length===4){var y=arguments[0],b=arguments[1],w=arguments[2],S=arguments[3];var C=1;if(w>S)C=-1;for(var h=w;h!==S;h+=C){this.add(y[h],b)}return true}};e.closeRing=function e(){if(this.size()>0)this.add(new pe(this.get(0)),false)};e.getClass=function e(){return t};Ue(t,[{key:"interfaces_",get:function e(){return[]}}]);return t}($e);Ye.constructor_=function(){if(arguments.length===0){}else if(arguments.length===1){var e=arguments[0];this.ensureCapacity(e.length);this.add(e,true)}else if(arguments.length===2){var t=arguments[0],r=arguments[1];this.ensureCapacity(t.length);this.add(t,r)}};Ye.coordArrayType=new Array(0).fill(null);function Ve(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function qe(e,t,r){if(t)Ve(e.prototype,t);if(r)Ve(e,r);return e}var ze=function(){function n(){n.constructor_.apply(this,arguments)}n.log10=function e(t){var r=Math.log(t);if(te.isInfinite(r))return r;if(te.isNaN(r))return r;return r/n.LOG_10};n.min=function e(t,r,n,i){var e=t;if(r<e)e=r;if(n<e)e=n;if(i<e)e=i;return e};n.clamp=function e(){if(typeof arguments[2]==="number"&&typeof arguments[0]==="number"&&typeof arguments[1]==="number"){var t=arguments[0],r=arguments[1],n=arguments[2];if(t<r)return r;if(t>n)return n;return t}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],a=arguments[1],o=arguments[2];if(i<a)return a;if(i>o)return o;return i}};n.wrap=function e(t,r){if(t<0){return r- -t%r}return t%r};n.max=function e(){if(arguments.length===3){var t=arguments[0],r=arguments[1],n=arguments[2];var e=t;if(r>e)e=r;if(n>e)e=n;return e}else if(arguments.length===4){var i=arguments[0],a=arguments[1],o=arguments[2],s=arguments[3];var e=i;if(a>e)e=a;if(o>e)e=o;if(s>e)e=s;return e}};n.average=function e(t,r){return(t+r)/2};var e=n.prototype;e.getClass=function e(){return n};qe(n,[{key:"interfaces_",get:function e(){return[]}}]);return n}();ze.constructor_=function(){};ze.LOG_10=Math.log(10);function Be(){}Be.arraycopy=function(e,t,r,n,i){var a=0;for(var o=t;o<t+i;o++){r[n+a]=e[o];a++}};Be.getProperty=function(e){return{"line.separator":"\n"}[e]};function Ke(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function Xe(e,t,r){if(t)Ke(e.prototype,t);if(r)Ke(e,r);return e}var Ze=function(){function a(){a.constructor_.apply(this,arguments)}a.isRing=function e(t){if(t.length<4)return false;if(!t[0].equals2D(t[t.length-1]))return false;return true};a.ptNotInList=function e(t,r){for(var n=0;n<t.length;n++){var i=t[n];if(a.indexOf(i,r)<0)return i}return null};a.scroll=function e(t,r){var n=a.indexOf(r,t);if(n<0)return null;var i=new Array(t.length).fill(null);Be.arraycopy(t,n,i,0,t.length-n);Be.arraycopy(t,0,i,t.length-n,n);Be.arraycopy(i,0,t,0,t.length)};a.equals=function e(){if(arguments.length===2){var t=arguments[0],r=arguments[1];if(t===r)return true;if(t===null||r===null)return false;if(t.length!==r.length)return false;for(var n=0;n<t.length;n++){if(!t[n].equals(r[n]))return false}return true}else if(arguments.length===3){var i=arguments[0],a=arguments[1],o=arguments[2];if(i===a)return true;if(i===null||a===null)return false;if(i.length!==a.length)return false;for(var n=0;n<i.length;n++){if(o.compare(i[n],a[n])!==0)return false}return true}};a.intersection=function e(t,r){var n=new Ye;for(var i=0;i<t.length;i++){if(r.intersects(t[i]))n.add(t[i],true)}return n.toCoordinateArray()};a.hasRepeatedPoints=function e(t){for(var r=1;r<t.length;r++){if(t[r-1].equals(t[r])){return true}}return false};a.removeRepeatedPoints=function e(t){if(!a.hasRepeatedPoints(t))return t;var r=new Ye(t,false);return r.toCoordinateArray()};a.reverse=function e(t){var r=t.length-1;var n=Math.trunc(r/2);for(var i=0;i<=n;i++){var a=t[i];t[i]=t[r-i];t[r-i]=a}};a.removeNull=function e(t){var r=0;for(var n=0;n<t.length;n++){if(t[n]!==null)r++}var i=new Array(r).fill(null);if(r===0)return i;var a=0;for(var n=0;n<t.length;n++){if(t[n]!==null)i[a++]=t[n]}return i};a.copyDeep=function e(){if(arguments.length===1){var t=arguments[0];var r=new Array(t.length).fill(null);for(var n=0;n<t.length;n++){r[n]=new pe(t[n])}return r}else if(arguments.length===5){var i=arguments[0],a=arguments[1],o=arguments[2],s=arguments[3],l=arguments[4];for(var n=0;n<l;n++){o[s+n]=new pe(i[a+n])}}};a.isEqualReversed=function e(t,r){for(var n=0;n<t.length;n++){var i=t[n];var a=r[t.length-n-1];if(i.compareTo(a)!==0)return false}return true};a.envelope=function e(t){var r=new _e;for(var n=0;n<t.length;n++){r.expandToInclude(t[n])}return r};a.toCoordinateArray=function e(t){return t.toArray(a.coordArrayType)};a.atLeastNCoordinatesOrNothing=function e(t,r){return r.length>=t?r:[]};a.indexOf=function e(t,r){for(var n=0;n<r.length;n++){if(t.equals(r[n])){return n}}return-1};a.increasingDirection=function e(t){for(var r=0;r<Math.trunc(t.length/2);r++){var n=t.length-1-r;var i=t[r].compareTo(t[n]);if(i!==0)return i}return 1};a.compare=function e(t,r){var n=0;while(n<t.length&&n<r.length){var e=t[n].compareTo(r[n]);if(e!==0)return e;n++}if(n<r.length)return-1;if(n<t.length)return 1;return 0};a.minCoordinate=function e(t){var r=null;for(var n=0;n<t.length;n++){if(r===null||r.compareTo(t[n])>0){r=t[n]}}return r};a.extract=function e(t,r,n){r=ze.clamp(r,0,t.length);n=ze.clamp(n,-1,t.length);var i=n-r+1;if(n<0)i=0;if(r>=t.length)i=0;if(n<r)i=0;var a=new Array(i).fill(null);if(i===0)return a;var o=0;for(var s=r;s<=n;s++){a[o++]=t[s]}return a};var e=a.prototype;e.getClass=function e(){return a};Xe(a,[{key:"interfaces_",get:function e(){return[]}}]);return a}();var Qe=function(){function t(){t.constructor_.apply(this,arguments)}var e=t.prototype;e.compare=function e(t,r){var n=t;var i=r;return Ze.compare(n,i)};e.getClass=function e(){return t};Xe(t,[{key:"interfaces_",get:function e(){return[re]}}]);return t}();Qe.constructor_=function(){};var Je=function(){function t(){t.constructor_.apply(this,arguments)}var e=t.prototype;e.compare=function e(t,r){var n=t;var i=r;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(n.length===0)return 0;var a=Ze.compare(n,i);var o=Ze.isEqualReversed(n,i);if(o)return 0;return a};e.OLDcompare=function e(t,r){var n=t;var i=r;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(n.length===0)return 0;var a=Ze.increasingDirection(n);var o=Ze.increasingDirection(i);var s=a>0?0:n.length-1;var l=o>0?0:n.length-1;for(var u=0;u<n.length;u++){var c=n[s].compareTo(i[l]);if(c!==0)return c;s+=a;l+=o}return 0};e.getClass=function e(){return t};Xe(t,[{key:"interfaces_",get:function e(){return[re]}}]);return t}();Je.constructor_=function(){};Ze.ForwardComparator=Qe;Ze.BidirectionalComparator=Je;Ze.constructor_=function(){};Ze.coordArrayType=new Array(0).fill(null);function et(){}et.prototype.get=function(){};et.prototype.put=function(){};et.prototype.size=function(){};et.prototype.values=function(){};et.prototype.entrySet=function(){};function tt(){}tt.prototype=new et;function rt(){}rt.prototype=new De;rt.prototype.contains=function(){};function nt(){this.array_=[];if(arguments[0]instanceof De){this.addAll(arguments[0])}}nt.prototype=new rt;nt.prototype.contains=function(e){for(var t=0,r=this.array_.length;t<r;t++){var n=this.array_[t];if(n===e){return true}}return false};nt.prototype.add=function(e){if(this.contains(e)){return false}this.array_.push(e);return true};nt.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();){this.add(t.next())}return true};nt.prototype.remove=function(e){throw new javascript.util.OperationNotSupported};nt.prototype.size=function(){return this.array_.length};nt.prototype.isEmpty=function(){return this.array_.length===0};nt.prototype.toArray=function(){var e=[];for(var t=0,r=this.array_.length;t<r;t++){e.push(this.array_[t])}return e};nt.prototype.iterator=function(){return new it(this)};var it=function e(t){this.hashSet_=t;this.position_=0};it.prototype.next=function(){if(this.position_===this.hashSet_.size()){throw new Le}return this.hashSet_.array_[this.position_++]};it.prototype.hasNext=function(){if(this.position_<this.hashSet_.size()){return true}else{return false}};it.prototype.remove=function(){throw new Ne};var at=0;var ot=1;function st(e){return e==null?at:e.color}function lt(e){return e==null?null:e.parent}function ut(e,t){if(e!==null)e.color=t}function ct(e){return e==null?null:e.left}function ft(e){return e==null?null:e.right}function ht(){this.root_=null;this.size_=0}ht.prototype=new tt;ht.prototype.get=function(e){var t=this.root_;while(t!==null){var r=e["compareTo"](t.key);if(r<0){t=t.left}else if(r>0){t=t.right}else{return t.value}}return null};ht.prototype.put=function(e,t){if(this.root_===null){this.root_={key:e,value:t,left:null,right:null,parent:null,color:at,getValue:function e(){return this.value},getKey:function e(){return this.key}};this.size_=1;return null}var r=this.root_,n,i;do{n=r;i=e["compareTo"](r.key);if(i<0){r=r.left}else if(i>0){r=r.right}else{var a=r.value;r.value=t;return a}}while(r!==null);var o={key:e,left:null,right:null,value:t,parent:n,color:at,getValue:function e(){return this.value},getKey:function e(){return this.key}};if(i<0){n.left=o}else{n.right=o}this.fixAfterInsertion(o);this.size_++;return null};ht.prototype.fixAfterInsertion=function(e){e.color=ot;while(e!=null&&e!=this.root_&&e.parent.color==ot){if(lt(e)==ct(lt(lt(e)))){var t=ft(lt(lt(e)));if(st(t)==ot){ut(lt(e),at);ut(t,at);ut(lt(lt(e)),ot);e=lt(lt(e))}else{if(e==ft(lt(e))){e=lt(e);this.rotateLeft(e)}ut(lt(e),at);ut(lt(lt(e)),ot);this.rotateRight(lt(lt(e)))}}else{var t=ct(lt(lt(e)));if(st(t)==ot){ut(lt(e),at);ut(t,at);ut(lt(lt(e)),ot);e=lt(lt(e))}else{if(e==ct(lt(e))){e=lt(e);this.rotateRight(e)}ut(lt(e),at);ut(lt(lt(e)),ot);this.rotateLeft(lt(lt(e)))}}}this.root_.color=at};ht.prototype.values=function(){var e=new $e;var t=this.getFirstEntry();if(t!==null){e.add(t.value);while((t=ht.successor(t))!==null){e.add(t.value)}}return e};ht.prototype.entrySet=function(){var e=new nt;var t=this.getFirstEntry();if(t!==null){e.add(t);while((t=ht.successor(t))!==null){e.add(t)}}return e};ht.prototype.rotateLeft=function(e){if(e!=null){var t=e.right;e.right=t.left;if(t.left!=null)t.left.parent=e;t.parent=e.parent;if(e.parent==null)this.root_=t;else if(e.parent.left==e)e.parent.left=t;else e.parent.right=t;t.left=e;e.parent=t}};ht.prototype.rotateRight=function(e){if(e!=null){var t=e.left;e.left=t.right;if(t.right!=null)t.right.parent=e;t.parent=e.parent;if(e.parent==null)this.root_=t;else if(e.parent.right==e)e.parent.right=t;else e.parent.left=t;t.right=e;e.parent=t}};ht.prototype.getFirstEntry=function(){var e=this.root_;if(e!=null){while(e.left!=null){e=e.left}}return e};ht.successor=function(e){if(e===null)return null;else if(e.right!==null){var t=e.right;while(t.left!==null){t=t.left}return t}else{var t=e.parent;var r=e;while(t!==null&&r===t.right){r=t;t=t.parent}return t}};ht.prototype.size=function(){return this.size_};ht.prototype.containsKey=function(e){var t=this.root_;while(t!==null){var r=e["compareTo"](t.key);if(r<0){t=t.left}else if(r>0){t=t.right}else{return true}}return false};function dt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function pt(e,t,r){if(t)dt(e.prototype,t);if(r)dt(e,r);return e}var vt=function(){function t(){t.constructor_.apply(this,arguments)}var e=t.prototype;e.getClass=function e(){return t};pt(t,[{key:"interfaces_",get:function e(){return[]}}]);return t}();vt.constructor_=function(){};function gt(){}gt.prototype=new rt;function mt(){this.array_=[];if(arguments[0]instanceof De){this.addAll(arguments[0])}}mt.prototype=new gt;mt.prototype.contains=function(e){for(var t=0,r=this.array_.length;t<r;t++){var n=this.array_[t];if(n["compareTo"](e)===0){return true}}return false};mt.prototype.add=function(e){if(this.contains(e)){return false}for(var t=0,r=this.array_.length;t<r;t++){var n=this.array_[t];if(n["compareTo"](e)===1){this.array_.splice(t,0,e);return true}}this.array_.push(e);return true};mt.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();){this.add(t.next())}return true};mt.prototype.remove=function(e){throw new Ne};mt.prototype.size=function(){return this.array_.length};mt.prototype.isEmpty=function(){return this.array_.length===0};mt.prototype.toArray=function(){var e=[];for(var t=0,r=this.array_.length;t<r;t++){e.push(this.array_[t])}return e};mt.prototype.iterator=function(){return new _t(this)};var _t=function e(t){this.treeSet_=t;this.position_=0};_t.prototype.next=function(){if(this.position_===this.treeSet_.size()){throw new Le}return this.treeSet_.array_[this.position_++]};_t.prototype.hasNext=function(){if(this.position_<this.treeSet_.size()){return true}else{return false}};_t.prototype.remove=function(){throw new Ne};function yt(){}yt.sort=function(){var e=arguments[0],t,r,n,i;if(arguments.length===1){i=function e(t,r){return t.compareTo(r)};e.sort(i);return}else if(arguments.length===2){n=arguments[1];i=function e(t,r){return n["compare"](t,r)};e.sort(i)}else if(arguments.length===3){r=e.slice(arguments[1],arguments[2]);r.sort();var a=e.slice(0,arguments[1]).concat(r,e.slice(arguments[2],e.length));e.splice(0,e.length);for(t=0;t<a.length;t++){e.push(a[t])}return}else if(arguments.length===4){r=e.slice(arguments[1],arguments[2]);n=arguments[3];i=function e(t,r){return n["compare"](t,r)};r.sort(i);a=e.slice(0,arguments[1]).concat(r,e.slice(arguments[2],e.length));e.splice(0,e.length);for(t=0;t<a.length;t++){e.push(a[t])}return}};yt.asList=function(e){var t=new $e;for(var r=0,n=e.length;r<n;r++){t.add(e[r])}return t};function bt(){}bt.isWhitespace=function(e){return e<=32&&e>=0||e==127};bt.toUpperCase=function(e){return e.toUpperCase()};function wt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function St(e,t,r){if(t)wt(e.prototype,t);if(r)wt(e,r);return e}var Ct=function(){function r(){r.constructor_.apply(this,arguments)}r.toDimensionSymbol=function e(t){switch(t){case r.FALSE:return r.SYM_FALSE;case r.TRUE:return r.SYM_TRUE;case r.DONTCARE:return r.SYM_DONTCARE;case r.P:return r.SYM_P;case r.L:return r.SYM_L;case r.A:return r.SYM_A}throw new V("Unknown dimension value: "+t)};r.toDimensionValue=function e(t){switch(bt.toUpperCase(t)){case r.SYM_FALSE:return r.FALSE;case r.SYM_TRUE:return r.TRUE;case r.SYM_DONTCARE:return r.DONTCARE;case r.SYM_P:return r.P;case r.SYM_L:return r.L;case r.SYM_A:return r.A}throw new V("Unknown dimension symbol: "+t)};var e=r.prototype;e.getClass=function e(){return r};St(r,[{key:"interfaces_",get:function e(){return[]}}]);return r}();Ct.constructor_=function(){};Ct.P=0;Ct.L=1;Ct.A=2;Ct.FALSE=-1;Ct.TRUE=-2;Ct.DONTCARE=-3;Ct.SYM_FALSE="F";Ct.SYM_TRUE="T";Ct.SYM_DONTCARE="*";Ct.SYM_P="0";Ct.SYM_L="1";Ct.SYM_A="2";function Ot(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function xt(e,t,r){if(t)Ot(e.prototype,t);if(r)Ot(e,r);return e}var Tt=function(){function t(){t.constructor_.apply(this,arguments)}var e=t.prototype;e.filter=function e(t){};e.getClass=function e(){return t};xt(t,[{key:"interfaces_",get:function e(){return[]}}]);return t}();Tt.constructor_=function(){};function Et(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function Mt(e,t,r){if(t)Et(e.prototype,t);if(r)Et(e,r);return e}var At=function(){function t(){t.constructor_.apply(this,arguments)}var e=t.prototype;e.filter=function e(t,r){};e.isDone=function e(){};e.isGeometryChanged=function e(){};e.getClass=function e(){return t};Mt(t,[{key:"interfaces_",get:function e(){return[]}}]);return t}();At.constructor_=function(){};function kt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function jt(e,t,r){if(t)kt(e.prototype,t);if(r)kt(e,r);return e}function It(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}function Dt(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}var Pt=function(a){It(n,a);function n(){var e;e=a.call(this)||this;n.constructor_.apply(Dt(Dt(e)),arguments);return e}var e=n.prototype;e.computeEnvelopeInternal=function e(){var t=new _e;for(var r=0;r<this._geometries.length;r++){t.expandToInclude(this._geometries[r].getEnvelopeInternal())}return t};e.getGeometryN=function e(t){return this._geometries[t]};e.getCoordinates=function e(){var t=new Array(this.getNumPoints()).fill(null);var r=-1;for(var n=0;n<this._geometries.length;n++){var i=this._geometries[n].getCoordinates();for(var a=0;a<i.length;a++){r++;t[r]=i[a]}}return t};e.getArea=function e(){var t=0;for(var r=0;r<this._geometries.length;r++){t+=this._geometries[r].getArea()}return t};e.equalsExact=function e(){if(arguments.length===2&&typeof arguments[1]==="number"&&arguments[0]instanceof we){var t=arguments[0],r=arguments[1];if(!this.isEquivalentClass(t)){return false}var n=t;if(this._geometries.length!==n._geometries.length){return false}for(var i=0;i<this._geometries.length;i++){if(!this._geometries[i].equalsExact(n._geometries[i],r)){return false}}return true}else return a.prototype.equalsExact.apply(this,arguments)};e.normalize=function e(){for(var t=0;t<this._geometries.length;t++){this._geometries[t].normalize()}yt.sort(this._geometries)};e.getCoordinate=function e(){if(this.isEmpty())return null;return this._geometries[0].getCoordinate()};e.getBoundaryDimension=function e(){var t=Ct.FALSE;for(var r=0;r<this._geometries.length;r++){t=Math.max(t,this._geometries[r].getBoundaryDimension())}return t};e.getTypeCode=function e(){return we.TYPECODE_GEOMETRYCOLLECTION};e.getDimension=function e(){var t=Ct.FALSE;for(var r=0;r<this._geometries.length;r++){t=Math.max(t,this._geometries[r].getDimension())}return t};e.getLength=function e(){var t=0;for(var r=0;r<this._geometries.length;r++){t+=this._geometries[r].getLength()}return t};e.getNumPoints=function e(){var t=0;for(var r=0;r<this._geometries.length;r++){t+=this._geometries[r].getNumPoints()}return t};e.getNumGeometries=function e(){return this._geometries.length};e.reverse=function e(){var t=this._geometries.length;var r=new Array(t).fill(null);for(var n=0;n<this._geometries.length;n++){r[n]=this._geometries[n].reverse()}return this.getFactory().createGeometryCollection(r)};e.compareToSameClass=function e(){if(arguments.length===1){var t=arguments[0];var r=new mt(yt.asList(this._geometries));var n=new mt(yt.asList(t._geometries));return this.compare(r,n)}else if(arguments.length===2){var i=arguments[0],a=arguments[1];var o=i;var s=this.getNumGeometries();var l=o.getNumGeometries();var u=0;while(u<s&&u<l){var c=this.getGeometryN(u);var f=o.getGeometryN(u);var h=c.compareToSameClass(f,a);if(h!==0)return h;u++}if(u<s)return 1;if(u<l)return-1;return 0}};e.apply=function e(){if(N(arguments[0],Oe)){var t=arguments[0];for(var r=0;r<this._geometries.length;r++){this._geometries[r].apply(t)}}else if(N(arguments[0],At)){var n=arguments[0];if(this._geometries.length===0)return null;for(var r=0;r<this._geometries.length;r++){this._geometries[r].apply(n);if(n.isDone()){break}}if(n.isGeometryChanged())this.geometryChanged()}else if(N(arguments[0],Tt)){var i=arguments[0];i.filter(this);for(var r=0;r<this._geometries.length;r++){this._geometries[r].apply(i)}}else if(N(arguments[0],B)){var a=arguments[0];a.filter(this);for(var r=0;r<this._geometries.length;r++){this._geometries[r].apply(a)}}};e.getBoundary=function e(){this.checkNotGeometryCollection(this);fe.shouldNeverReachHere();return null};e.getGeometryType=function e(){return we.TYPENAME_GEOMETRYCOLLECTION};e.copy=function e(){var t=new Array(this._geometries.length).fill(null);for(var r=0;r<t.length;r++){t[r]=this._geometries[r].copy()}return new n(t,this._factory)};e.isEmpty=function e(){for(var t=0;t<this._geometries.length;t++){if(!this._geometries[t].isEmpty()){return false}}return true};e.getClass=function e(){return n};jt(n,[{key:"interfaces_",get:function e(){return[]}}]);return n}(we);Pt.constructor_=function(){this._geometries=null;if(arguments.length===0){}else if(arguments.length===2){var e=arguments[0],t=arguments[1];we.constructor_.call(this,t);if(e===null){e=[]}if(we.hasNullElements(e)){throw new V("geometries must not contain null elements")}this._geometries=e}};Pt.serialVersionUID=-0x4f07bcb1f857d800;function Rt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function Lt(e,t,r){if(t)Rt(e.prototype,t);if(r)Rt(e,r);return e}function Nt(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}function $t(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}var Ft=function(n){Nt(i,n);function i(){var e;e=n.call(this)||this;i.constructor_.apply($t($t(e)),arguments);return e}var e=i.prototype;e.equalsExact=function e(){if(arguments.length===2&&typeof arguments[1]==="number"&&arguments[0]instanceof we){var t=arguments[0],r=arguments[1];if(!this.isEquivalentClass(t)){return false}return n.prototype.equalsExact.call(this,t,r)}else return n.prototype.equalsExact.apply(this,arguments)};e.getBoundaryDimension=function e(){if(this.isClosed()){return Ct.FALSE}return 0};e.isClosed=function e(){if(this.isEmpty()){return false}for(var t=0;t<this._geometries.length;t++){if(!this._geometries[t].isClosed()){return false}}return true};e.getTypeCode=function e(){return we.TYPECODE_MULTILINESTRING};e.getDimension=function e(){return 1};e.reverse=function e(){var t=this._geometries.length;var r=new Array(t).fill(null);for(var n=0;n<this._geometries.length;n++){r[t-1-n]=this._geometries[n].reverse()}return this.getFactory().createMultiLineString(r)};e.getBoundary=function e(){return new Ht(this).getBoundary()};e.getGeometryType=function e(){return we.TYPENAME_MULTILINESTRING};e.copy=function e(){var t=new Array(this._geometries.length).fill(null);for(var r=0;r<t.length;r++){t[r]=this._geometries[r].copy()}return new i(t,this._factory)};e.getClass=function e(){return i};Lt(i,[{key:"interfaces_",get:function e(){return[vt]}}]);return i}(Pt);Ft.constructor_=function(){var e=arguments[0],t=arguments[1];Pt.constructor_.call(this,e,t)};Ft.serialVersionUID=0x7155d2ab4afa8000;function Gt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function Ut(e,t,r){if(t)Gt(e.prototype,t);if(r)Gt(e,r);return e}var Ht=function(){function a(){a.constructor_.apply(this,arguments)}a.getBoundary=function e(){if(arguments.length===1){var t=arguments[0];var r=new a(t);return r.getBoundary()}else if(arguments.length===2){var n=arguments[0],i=arguments[1];var r=new a(n,i);return r.getBoundary()}};var e=a.prototype;e.boundaryMultiLineString=function e(t){if(this._geom.isEmpty()){return this.getEmptyMultiPoint()}var r=this.computeBoundaryCoordinates(t);if(r.length===1){return this._geomFact.createPoint(r[0])}return this._geomFact.createMultiPointFromCoords(r)};e.getBoundary=function e(){if(this._geom instanceof cr)return this.boundaryLineString(this._geom);if(this._geom instanceof Ft)return this.boundaryMultiLineString(this._geom);return this._geom.getBoundary()};e.boundaryLineString=function e(t){if(this._geom.isEmpty()){return this.getEmptyMultiPoint()}if(t.isClosed()){var r=this._bnRule.isInBoundary(2);if(r){return t.getStartPoint()}else{return this._geomFact.createMultiPoint()}}return this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])};e.getEmptyMultiPoint=function e(){return this._geomFact.createMultiPoint()};e.computeBoundaryCoordinates=function e(t){var r=new $e;this._endpointMap=new ht;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);if(i.getNumPoints()===0)continue;this.addEndpoint(i.getCoordinateN(0));this.addEndpoint(i.getCoordinateN(i.getNumPoints()-1))}for(var a=this._endpointMap.entrySet().iterator();a.hasNext();){var o=a.next();var s=o.getValue();var l=s.count;if(this._bnRule.isInBoundary(l)){r.add(o.getKey())}}return Ze.toCoordinateArray(r)};e.addEndpoint=function e(t){var r=this._endpointMap.get(t);if(r===null){r=new Wt;this._endpointMap.put(t,r)}r.count++};e.getClass=function e(){return a};Ut(a,[{key:"interfaces_",get:function e(){return[]}}]);return a}();Ht.constructor_=function(){this._geom=null;this._geomFact=null;this._bnRule=null;this._endpointMap=null;if(arguments.length===1){var e=arguments[0];Ht.constructor_.call(this,e,Ee.MOD2_BOUNDARY_RULE)}else if(arguments.length===2){var t=arguments[0],r=arguments[1];this._geom=t;this._geomFact=t.getFactory();this._bnRule=r}};var Wt=function(){function t(){t.constructor_.apply(this,arguments)}var e=t.prototype;e.getClass=function e(){return t};Ut(t,[{key:"interfaces_",get:function e(){return[]}}]);return t}();Wt.constructor_=function(){this.count=null};function Yt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function Vt(e,t,r){if(t)Yt(e.prototype,t);if(r)Yt(e,r);return e}var qt=function(){function t(){t.constructor_.apply(this,arguments)}t.ofLine=function e(t){var r=t.size();if(r<=1)return 0;var n=0;var i=new pe;t.getCoordinate(0,i);var a=i.x;var o=i.y;for(var s=1;s<r;s++){t.getCoordinate(s,i);var l=i.x;var u=i.y;var c=l-a;var f=u-o;n+=Math.sqrt(c*c+f*f);a=l;o=u}return n};var e=t.prototype;e.getClass=function e(){return t};Vt(t,[{key:"interfaces_",get:function e(){return[]}}]);return t}();qt.constructor_=function(){};function zt(){}function Bt(){}function Kt(){}function Xt(){}function Zt(){}function Qt(){}function Jt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function er(e,t,r){if(t)Jt(e.prototype,t);if(r)Jt(e,r);return e}var tr=function(){function c(){c.constructor_.apply(this,arguments)}c.chars=function e(t,r){var n=new Array(r).fill(null);for(var i=0;i<r;i++){n[i]=t}return new String(n)};c.getStackTrace=function e(){if(arguments.length===1){var t=arguments[0];var r=new Xt;var n=new zt(r);t.printStackTrace(n);return r.toString()}else if(arguments.length===2){var i=arguments[0],a=arguments[1];var o="";var s=new Bt(c.getStackTrace(i));var l=new Qt(s);for(var u=0;u<a;u++){try{o+=l.readLine()+c.NEWLINE}catch(e){if(e instanceof Zt){fe.shouldNeverReachHere()}else throw e}finally{}}return o}};c.split=function e(t,r){var n=r.length;var i=new $e;var a=""+t;var o=a.indexOf(r);while(o>=0){var s=a.substring(0,o);i.add(s);a=a.substring(o+n);o=a.indexOf(r)}if(a.length>0)i.add(a);var l=new Array(i.size()).fill(null);for(var u=0;u<l.length;u++){l[u]=i.get(u)}return l};c.toString=function e(){if(arguments.length===1&&typeof arguments[0]==="number"){var t=arguments[0];return c.SIMPLE_ORDINATE_FORMAT.format(t)}};c.spaces=function e(t){return c.chars(" ",t)};var e=c.prototype;e.getClass=function e(){return c};er(c,[{key:"interfaces_",get:function e(){return[]}}]);return c}();tr.constructor_=function(){};tr.NEWLINE=Be.getProperty("line.separator");tr.SIMPLE_ORDINATE_FORMAT=new Kt("0.#");function rr(e){this.str=e}rr.prototype.append=function(e){this.str+=e};rr.prototype.setCharAt=function(e,t){this.str=this.str.substr(0,e)+t+this.str.substr(e+1)};rr.prototype.toString=function(e){return this.str};function nr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function ir(e,t,r){if(t)nr(e.prototype,t);if(r)nr(e,r);return e}var ar=function(){function s(){s.constructor_.apply(this,arguments)}s.copyCoord=function e(t,r,n,i){var a=Math.min(t.getDimension(),n.getDimension());for(var o=0;o<a;o++){n.setOrdinate(i,o,t.getOrdinate(r,o))}};s.isRing=function e(t){var r=t.size();if(r===0)return true;if(r<=3)return false;return t.getOrdinate(0,U.X)===t.getOrdinate(r-1,U.X)&&t.getOrdinate(0,U.Y)===t.getOrdinate(r-1,U.Y)};s.isEqual=function e(t,r){var n=t.size();var i=r.size();if(n!==i)return false;var a=Math.min(t.getDimension(),r.getDimension());for(var o=0;o<n;o++){for(var s=0;s<a;s++){var l=t.getOrdinate(o,s);var u=r.getOrdinate(o,s);if(t.getOrdinate(o,s)===r.getOrdinate(o,s))continue;if(te.isNaN(l)&&te.isNaN(u))continue;return false}}return true};s.extend=function e(t,r,n){var i=t.create(n,r.getDimension());var a=r.size();s.copy(r,0,i,0,a);if(a>0){for(var o=a;o<n;o++){s.copy(r,a-1,i,o,1)}}return i};s.reverse=function e(t){var r=t.size()-1;var n=Math.trunc(r/2);for(var i=0;i<=n;i++){s.swap(t,i,r-i)}};s.swap=function e(t,r,n){if(r===n)return null;for(var i=0;i<t.getDimension();i++){var a=t.getOrdinate(r,i);t.setOrdinate(r,i,t.getOrdinate(n,i));t.setOrdinate(n,i,a)}};s.copy=function e(t,r,n,i,a){for(var o=0;o<a;o++){s.copyCoord(t,r+o,n,i+o)}};s.toString=function e(){if(arguments.length===1&&N(arguments[0],U)){var t=arguments[0];var r=t.size();if(r===0)return"()";var n=t.getDimension();var i=new rr;i.append("(");for(var a=0;a<r;a++){if(a>0)i.append(" ");for(var o=0;o<n;o++){if(o>0)i.append(",");i.append(tr.toString(t.getOrdinate(a,o)))}}i.append(")");return i.toString()}};s.ensureValidRing=function e(t,r){var n=r.size();if(n===0)return r;if(n<=3)return s.createClosedRing(t,r,4);var i=r.getOrdinate(0,U.X)===r.getOrdinate(n-1,U.X)&&r.getOrdinate(0,U.Y)===r.getOrdinate(n-1,U.Y);if(i)return r;return s.createClosedRing(t,r,n+1)};s.createClosedRing=function e(t,r,n){var i=t.create(n,r.getDimension());var a=r.size();s.copy(r,0,i,0,a);for(var o=a;o<n;o++){s.copy(r,0,i,o,1)}return i};var e=s.prototype;e.getClass=function e(){return s};ir(s,[{key:"interfaces_",get:function e(){return[]}}]);return s}();ar.constructor_=function(){};function or(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function sr(e,t,r){if(t)or(e.prototype,t);if(r)or(e,r);return e}function lr(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}function ur(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}var cr=function(a){lr(r,a);function r(){var e;e=a.call(this)||this;r.constructor_.apply(ur(ur(e)),arguments);return e}var e=r.prototype;e.computeEnvelopeInternal=function e(){if(this.isEmpty()){return new _e}return this._points.expandEnvelope(new _e)};e.isRing=function e(){return this.isClosed()&&this.isSimple()};e.getCoordinates=function e(){return this._points.toCoordinateArray()};e.equalsExact=function e(){if(arguments.length===2&&typeof arguments[1]==="number"&&arguments[0]instanceof we){var t=arguments[0],r=arguments[1];if(!this.isEquivalentClass(t)){return false}var n=t;if(this._points.size()!==n._points.size()){return false}for(var i=0;i<this._points.size();i++){if(!this.equal(this._points.getCoordinate(i),n._points.getCoordinate(i),r)){return false}}return true}else return a.prototype.equalsExact.apply(this,arguments)};e.normalize=function e(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var r=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(r))){if(this._points.getCoordinate(t).compareTo(this._points.getCoordinate(r))>0){var n=this._points.copy();ar.reverse(n);this._points=n}return null}}};e.getCoordinate=function e(){if(this.isEmpty())return null;return this._points.getCoordinate(0)};e.getBoundaryDimension=function e(){if(this.isClosed()){return Ct.FALSE}return 0};e.isClosed=function e(){if(this.isEmpty()){return false}return this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))};e.getEndPoint=function e(){if(this.isEmpty()){return null}return this.getPointN(this.getNumPoints()-1)};e.getTypeCode=function e(){return we.TYPECODE_LINESTRING};e.getDimension=function e(){return 1};e.getLength=function e(){return qt.ofLine(this._points)};e.getNumPoints=function e(){return this._points.size()};e.reverse=function e(){var t=this._points.copy();ar.reverse(t);var r=this.getFactory().createLineString(t);return r};e.compareToSameClass=function e(){if(arguments.length===1){var t=arguments[0];var r=t;var n=0;var i=0;while(n<this._points.size()&&i<r._points.size()){var a=this._points.getCoordinate(n).compareTo(r._points.getCoordinate(i));if(a!==0){return a}n++;i++}if(n<this._points.size()){return 1}if(i<r._points.size()){return-1}return 0}else if(arguments.length===2){var o=arguments[0],s=arguments[1];var r=o;return s.compare(this._points,r._points)}};e.apply=function e(){if(N(arguments[0],Oe)){var t=arguments[0];for(var r=0;r<this._points.size();r++){t.filter(this._points.getCoordinate(r))}}else if(N(arguments[0],At)){var n=arguments[0];if(this._points.size()===0)return null;for(var r=0;r<this._points.size();r++){n.filter(this._points,r);if(n.isDone())break}if(n.isGeometryChanged())this.geometryChanged()}else if(N(arguments[0],Tt)){var i=arguments[0];i.filter(this)}else if(N(arguments[0],B)){var a=arguments[0];a.filter(this)}};e.getBoundary=function e(){return new Ht(this).getBoundary()};e.isEquivalentClass=function e(t){return t instanceof r};e.getCoordinateN=function e(t){return this._points.getCoordinate(t)};e.getGeometryType=function e(){return we.TYPENAME_LINESTRING};e.copy=function e(){return new r(this._points.copy(),this._factory)};e.getCoordinateSequence=function e(){return this._points};e.isEmpty=function e(){return this._points.size()===0};e.init=function e(t){if(t===null){t=this.getFactory().getCoordinateSequenceFactory().create([])}if(t.size()===1){throw new V("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)")}this._points=t};e.isCoordinate=function e(t){for(var r=0;r<this._points.size();r++){if(this._points.getCoordinate(r).equals(t)){return true}}return false};e.getStartPoint=function e(){if(this.isEmpty()){return null}return this.getPointN(0)};e.getPointN=function e(t){return this.getFactory().createPoint(this._points.getCoordinate(t))};e.getClass=function e(){return r};sr(r,[{key:"interfaces_",get:function e(){return[vt]}}]);return r}(we);cr.constructor_=function(){this._points=null;if(arguments.length===0){}else if(arguments.length===2){var e=arguments[0],t=arguments[1];we.constructor_.call(this,t);this.init(e)}};cr.serialVersionUID=0x2b2b51ba435c8e00;function fr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function hr(e,t,r){if(t)fr(e.prototype,t);if(r)fr(e,r);return e}var dr=function(){function t(){t.constructor_.apply(this,arguments)}var e=t.prototype;e.getClass=function e(){return t};hr(t,[{key:"interfaces_",get:function e(){return[]}}]);return t}();dr.constructor_=function(){};function pr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function vr(e,t,r){if(t)pr(e.prototype,t);if(r)pr(e,r);return e}function gr(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}function mr(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}var _r=function(n){gr(t,n);function t(){var e;e=n.call(this)||this;t.constructor_.apply(mr(mr(e)),arguments);return e}var e=t.prototype;e.computeEnvelopeInternal=function e(){if(this.isEmpty()){return new _e}var t=new _e;t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0));return t};e.getCoordinates=function e(){return this.isEmpty()?[]:[this.getCoordinate()]};e.equalsExact=function e(){if(arguments.length===2&&typeof arguments[1]==="number"&&arguments[0]instanceof we){var t=arguments[0],r=arguments[1];if(!this.isEquivalentClass(t)){return false}if(this.isEmpty()&&t.isEmpty()){return true}if(this.isEmpty()!==t.isEmpty()){return false}return this.equal(t.getCoordinate(),this.getCoordinate(),r)}else return n.prototype.equalsExact.apply(this,arguments)};e.normalize=function e(){};e.getCoordinate=function e(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null};e.getBoundaryDimension=function e(){return Ct.FALSE};e.getTypeCode=function e(){return we.TYPECODE_POINT};e.getDimension=function e(){return 0};e.getNumPoints=function e(){return this.isEmpty()?0:1};e.reverse=function e(){return this.copy()};e.getX=function e(){if(this.getCoordinate()===null){throw new IllegalStateException("getX called on empty Point")}return this.getCoordinate().x};e.compareToSameClass=function e(){if(arguments.length===1){var t=arguments[0];var r=t;return this.getCoordinate().compareTo(r.getCoordinate())}else if(arguments.length===2){var n=arguments[0],i=arguments[1];var r=n;return i.compare(this._coordinates,r._coordinates)}};e.apply=function e(){if(N(arguments[0],Oe)){var t=arguments[0];if(this.isEmpty()){return null}t.filter(this.getCoordinate())}else if(N(arguments[0],At)){var r=arguments[0];if(this.isEmpty())return null;r.filter(this._coordinates,0);if(r.isGeometryChanged())this.geometryChanged()}else if(N(arguments[0],Tt)){var n=arguments[0];n.filter(this)}else if(N(arguments[0],B)){var i=arguments[0];i.filter(this)}};e.getBoundary=function e(){return this.getFactory().createGeometryCollection()};e.getGeometryType=function e(){return we.TYPENAME_POINT};e.copy=function e(){return new t(this._coordinates.copy(),this._factory)};e.getCoordinateSequence=function e(){return this._coordinates};e.getY=function e(){if(this.getCoordinate()===null){throw new IllegalStateException("getY called on empty Point")}return this.getCoordinate().y};e.isEmpty=function e(){return this._coordinates.size()===0};e.init=function e(t){if(t===null){t=this.getFactory().getCoordinateSequenceFactory().create([])}fe.isTrue(t.size()<=1);this._coordinates=t};e.isSimple=function e(){return true};e.getClass=function e(){return t};vr(t,[{key:"interfaces_",get:function e(){return[dr]}}]);return t}(we);_r.constructor_=function(){this._coordinates=null;var e=arguments[0],t=arguments[1];we.constructor_.call(this,t);this.init(e)};_r.serialVersionUID=0x44077bad161cbc00;function yr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function br(e,t,r){if(t)yr(e.prototype,t);if(r)yr(e,r);return e}var wr=function(){function n(){n.constructor_.apply(this,arguments)}n.ofRing=function e(){if(arguments[0]instanceof Array){var t=arguments[0];return Math.abs(n.ofRingSigned(t))}else if(N(arguments[0],U)){var r=arguments[0];return Math.abs(n.ofRingSigned(r))}};n.ofRingSigned=function e(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;var r=0;var n=t[0].x;for(var i=1;i<t.length-1;i++){var a=t[i].x-n;var o=t[i+1].y;var s=t[i-1].y;r+=a*(s-o)}return r/2}else if(N(arguments[0],U)){var l=arguments[0];var u=l.size();if(u<3)return 0;var c=new pe;var f=new pe;var h=new pe;l.getCoordinate(0,f);l.getCoordinate(1,h);var n=f.x;h.x-=n;var r=0;for(var i=1;i<u-1;i++){c.y=f.y;f.x=h.x;f.y=h.y;l.getCoordinate(i+1,h);h.x-=n;r+=f.x*(c.y-h.y)}return r/2}};var e=n.prototype;e.getClass=function e(){return n};br(n,[{key:"interfaces_",get:function e(){return[]}}]);return n}();wr.constructor_=function(){};function Sr(e){this.str=e}Sr.prototype.append=function(e){this.str+=e};Sr.prototype.setCharAt=function(e,t){this.str=this.str.substr(0,e)+t+this.str.substr(e+1)};Sr.prototype.toString=function(e){return this.str};function Cr(e){this.value=e}Cr.prototype.intValue=function(){return this.value};Cr.prototype.compareTo=function(e){if(this.value<e)return-1;if(this.value>e)return 1;return 0};Cr.isNaN=function(e){return Number.isNaN(e)};function Or(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function xr(e,t,r){if(t)Or(e.prototype,t);if(r)Or(e,r);return e}var Tr=function(){function g(){g.constructor_.apply(this,arguments)}g.sqr=function e(t){return g.valueOf(t).selfMultiply(t)};g.valueOf=function e(){if(typeof arguments[0]==="string"){var t=arguments[0];return g.parse(t)}else if(typeof arguments[0]==="number"){var r=arguments[0];return new g(r)}};g.sqrt=function e(t){return g.valueOf(t).sqrt()};g.parse=function e(t){var r=0;var n=t.length;while(bt.isWhitespace(t.charAt(r))){r++}var i=false;if(r<n){var a=t.charAt(r);if(a==="-"||a==="+"){r++;if(a==="-")i=true}}var o=new g;var s=0;var l=0;var u=0;while(true){if(r>=n)break;var c=t.charAt(r);r++;if(bt.isDigit(c)){var f=c-"0";o.selfMultiply(g.TEN);o.selfAdd(f);s++;continue}if(c==="."){l=s;continue}if(c==="e"||c==="E"){var h=t.substring(r);try{u=Cr.parseInt(h)}catch(e){if(e instanceof NumberFormatException){throw new NumberFormatException("Invalid exponent "+h+" in string "+t)}else throw e}finally{}break}throw new NumberFormatException("Unexpected character '"+c+"' at position "+r+" in string "+t)}var d=o;var p=s-l-u;if(p===0){d=o}else if(p>0){var v=g.TEN.pow(p);d=o.divide(v)}else if(p<0){var v=g.TEN.pow(-p);d=o.multiply(v)}if(i){return d.negate()}return d};g.createNaN=function e(){return new g(te.NaN,te.NaN)};g.copy=function e(t){return new g(t)};g.magnitude=function e(t){var r=Math.abs(t);var n=Math.log(r)/Math.log(10);var i=Math.trunc(Math.floor(n));var a=Math.pow(10,i);if(a*10<=r)i+=1;return i};g.stringOfChar=function e(t,r){var n=new Sr;for(var i=0;i<r;i++){n.append(t)}return n.toString()};var e=g.prototype;e.le=function e(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<=t._lo};e.extractSignificantDigits=function e(t,r){var n=this.abs();var i=g.magnitude(n._hi);var a=g.TEN.pow(i);n=n.divide(a);if(n.gt(g.TEN)){n=n.divide(g.TEN);i+=1}else if(n.lt(g.ONE)){n=n.multiply(g.TEN);i-=1}var o=i+1;var s=new Sr;var l=g.MAX_PRINT_DIGITS-1;for(var u=0;u<=l;u++){if(t&&u===o){s.append(".")}var c=Math.trunc(n._hi);if(c<0||c>9){}if(c<0){break}var f=false;var h=0;if(c>9){f=true;h="9"}else{h="0"+c}s.append(h);n=n.subtract(g.valueOf(c)).multiply(g.TEN);if(f)n.selfAdd(g.TEN);var d=true;var p=g.magnitude(n._hi);if(p<0&&Math.abs(p)>=l-u)d=false;if(!d)break}r[0]=i;return s.toString()};e.sqr=function e(){return this.multiply(this)};e.doubleValue=function e(){return this._hi+this._lo};e.subtract=function e(){if(arguments[0]instanceof g){var t=arguments[0];return this.add(t.negate())}else if(typeof arguments[0]==="number"){var r=arguments[0];return this.add(-r)}};e.equals=function e(){if(arguments.length===1&&arguments[0]instanceof g){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}};e.isZero=function e(){return this._hi===0&&this._lo===0};e.selfSubtract=function e(){if(arguments[0]instanceof g){var t=arguments[0];if(this.isNaN())return this;return this.selfAdd(-t._hi,-t._lo)}else if(typeof arguments[0]==="number"){var r=arguments[0];if(this.isNaN())return this;return this.selfAdd(-r,0)}};e.getSpecialNumberString=function e(){if(this.isZero())return"0.0";if(this.isNaN())return"NaN ";return null};e.min=function e(t){if(this.le(t)){return this}else{return t}};e.selfDivide=function e(){if(arguments.length===1){if(arguments[0]instanceof g){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}else if(typeof arguments[0]==="number"){var r=arguments[0];return this.selfDivide(r,0)}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];var a=null,o=null,s=null,l=null,u=null,c=null,f=null,h=null;u=this._hi/n;c=g.SPLIT*u;a=c-u;h=g.SPLIT*n;a=c-a;o=u-a;s=h-n;f=u*n;s=h-s;l=n-s;h=a*s-f+a*l+o*s+o*l;c=(this._hi-f-h+this._lo-u*i)/n;h=u+c;this._hi=h;this._lo=u-h+c;return this}};e.dump=function e(){return"DD<"+this._hi+", "+this._lo+">"};e.divide=function e(){if(arguments[0]instanceof g){var t=arguments[0];var r=null,n=null,i=null,a=null,o=null,s=null,l=null,u=null;o=this._hi/t._hi;s=g.SPLIT*o;r=s-o;u=g.SPLIT*t._hi;r=s-r;n=o-r;i=u-t._hi;l=o*t._hi;i=u-i;a=t._hi-i;u=r*i-l+r*a+n*i+n*a;s=(this._hi-l-u+this._lo-o*t._lo)/t._hi;u=o+s;var c=u;var f=o-u+s;return new g(c,f)}else if(typeof arguments[0]==="number"){var h=arguments[0];if(te.isNaN(h))return g.createNaN();return g.copy(this).selfDivide(h,0)}};e.ge=function e(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>=t._lo};e.pow=function e(t){if(t===0)return g.valueOf(1);var r=new g(this);var n=g.valueOf(1);var i=Math.abs(t);if(i>1){while(i>0){if(i%2===1){n.selfMultiply(r)}i/=2;if(i>0)r=r.sqr()}}else{n=r}if(t<0)return n.reciprocal();return n};e.ceil=function e(){if(this.isNaN())return g.NaN;var t=Math.ceil(this._hi);var r=0;if(t===this._hi){r=Math.ceil(this._lo)}return new g(t,r)};e.compareTo=function e(t){var r=t;if(this._hi<r._hi)return-1;if(this._hi>r._hi)return 1;if(this._lo<r._lo)return-1;if(this._lo>r._lo)return 1;return 0};e.rint=function e(){if(this.isNaN())return this;var t=this.add(.5);return t.floor()};e.setValue=function e(){if(arguments[0]instanceof g){var t=arguments[0];this.init(t);return this}else if(typeof arguments[0]==="number"){var r=arguments[0];this.init(r);return this}};e.max=function e(t){if(this.ge(t)){return this}else{return t}};e.sqrt=function e(){if(this.isZero())return g.valueOf(0);if(this.isNegative()){return g.NaN}var t=1/Math.sqrt(this._hi);var r=this._hi*t;var n=g.valueOf(r);var i=this.subtract(n.sqr());var a=i._hi*(t*.5);return n.add(a)};e.selfAdd=function e(){if(arguments.length===1){if(arguments[0]instanceof g){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}else if(typeof arguments[0]==="number"){var r=arguments[0];var n=null,i=null,a=null,o=null,s=null,l=null;a=this._hi+r;s=a-this._hi;o=a-s;o=r-s+(this._hi-o);l=o+this._lo;n=a+l;i=l+(a-n);this._hi=n+i;this._lo=i+(n-this._hi);return this}}else if(arguments.length===2){var u=arguments[0],c=arguments[1];var n=null,i=null,f=null,h=null,a=null,o=null,s=null,l=null;a=this._hi+u;f=this._lo+c;s=a-this._hi;l=f-this._lo;o=a-s;h=f-l;o=u-s+(this._hi-o);h=c-l+(this._lo-h);s=o+f;n=a+s;i=s+(a-n);s=h+i;var d=n+s;var p=s+(n-d);this._hi=d;this._lo=p;return this}};e.selfMultiply=function e(){if(arguments.length===1){if(arguments[0]instanceof g){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}else if(typeof arguments[0]==="number"){var r=arguments[0];return this.selfMultiply(r,0)}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];var a=null,o=null,s=null,l=null,u=null,c=null;u=g.SPLIT*this._hi;a=u-this._hi;c=g.SPLIT*n;a=u-a;o=this._hi-a;s=c-n;u=this._hi*n;s=c-s;l=n-s;c=a*s-u+a*l+o*s+o*l+(this._hi*i+this._lo*n);var f=u+c;a=u-f;var h=c+a;this._hi=f;this._lo=h;return this}};e.selfSqr=function e(){return this.selfMultiply(this)};e.floor=function e(){if(this.isNaN())return g.NaN;var t=Math.floor(this._hi);var r=0;if(t===this._hi){r=Math.floor(this._lo)}return new g(t,r)};e.negate=function e(){if(this.isNaN())return this;return new g(-this._hi,-this._lo)};e.clone=function e(){try{return null}catch(e){if(e instanceof CloneNotSupportedException){return null}else throw e}finally{}};e.multiply=function e(){if(arguments[0]instanceof g){var t=arguments[0];if(t.isNaN())return g.createNaN();return g.copy(this).selfMultiply(t)}else if(typeof arguments[0]==="number"){var r=arguments[0];if(te.isNaN(r))return g.createNaN();return g.copy(this).selfMultiply(r,0)}};e.isNaN=function e(){return te.isNaN(this._hi)};e.intValue=function e(){return Math.trunc(this._hi)};e.toString=function e(){var t=g.magnitude(this._hi);if(t>=-3&&t<=20)return this.toStandardNotation();return this.toSciNotation()};e.toStandardNotation=function e(){var t=this.getSpecialNumberString();if(t!==null)return t;var r=new Array(1).fill(null);var n=this.extractSignificantDigits(true,r);var i=r[0]+1;var a=n;if(n.charAt(0)==="."){a="0"+n}else if(i<0){a="0."+g.stringOfChar("0",-i)+n}else if(n.indexOf(".")===-1){var o=i-n.length;var s=g.stringOfChar("0",o);a=n+s+".0"}if(this.isNegative())return"-"+a;return a};e.reciprocal=function e(){var t=null,r=null,n=null,i=null,a=null,o=null,s=null,l=null;a=1/this._hi;o=g.SPLIT*a;t=o-a;l=g.SPLIT*this._hi;t=o-t;r=a-t;n=l-this._hi;s=a*this._hi;n=l-n;i=this._hi-n;l=t*n-s+t*i+r*n+r*i;o=(1-s-l-a*this._lo)/this._hi;var u=a+o;var c=a-u+o;return new g(u,c)};e.toSciNotation=function e(){if(this.isZero())return g.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(t!==null)return t;var r=new Array(1).fill(null);var n=this.extractSignificantDigits(false,r);var i=g.SCI_NOT_EXPONENT_CHAR+r[0];if(n.charAt(0)==="0"){throw new IllegalStateException("Found leading zero: "+n)}var a="";if(n.length>1)a=n.substring(1);var o=n.charAt(0)+"."+a;if(this.isNegative())return"-"+o+i;return o+i};e.abs=function e(){if(this.isNaN())return g.NaN;if(this.isNegative())return this.negate();return new g(this)};e.isPositive=function e(){return this._hi>0||this._hi===0&&this._lo>0};e.lt=function e(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<t._lo};e.add=function e(){if(arguments[0]instanceof g){var t=arguments[0];return g.copy(this).selfAdd(t)}else if(typeof arguments[0]==="number"){var r=arguments[0];return g.copy(this).selfAdd(r)}};e.init=function e(){if(arguments.length===1){if(typeof arguments[0]==="number"){var t=arguments[0];this._hi=t;this._lo=0}else if(arguments[0]instanceof g){var r=arguments[0];this._hi=r._hi;this._lo=r._lo}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this._hi=n;this._lo=i}};e.gt=function e(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>t._lo};e.isNegative=function e(){return this._hi<0||this._hi===0&&this._lo<0};e.trunc=function e(){if(this.isNaN())return g.NaN;if(this.isPositive())return this.floor();else return this.ceil()};e.signum=function e(){if(this._hi>0)return 1;if(this._hi<0)return-1;if(this._lo>0)return 1;if(this._lo<0)return-1;return 0};e.getClass=function e(){return g};xr(g,[{key:"interfaces_",get:function e(){return[X,K,$]}}]);return g}();Tr.constructor_=function(){this._hi=0;this._lo=0;if(arguments.length===0){this.init(0)}else if(arguments.length===1){if(typeof arguments[0]==="number"){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof Tr){var t=arguments[0];this.init(t)}else if(typeof arguments[0]==="string"){var r=arguments[0];Tr.constructor_.call(this,Tr.parse(r))}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this.init(n,i)}};Tr.PI=new Tr(3.141592653589793,12246467991473532e-32);Tr.TWO_PI=new Tr(6.283185307179586,24492935982947064e-32);Tr.PI_2=new Tr(1.5707963267948966,6123233995736766e-32);Tr.E=new Tr(2.718281828459045,14456468917292502e-32);Tr.NaN=new Tr(te.NaN,te.NaN);Tr.EPS=123259516440783e-46;Tr.SPLIT=134217729;Tr.MAX_PRINT_DIGITS=32;Tr.TEN=Tr.valueOf(10);Tr.ONE=Tr.valueOf(1);Tr.SCI_NOT_EXPONENT_CHAR="E";Tr.SCI_NOT_ZERO="0.0E0";function Er(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function Mr(e,t,r){if(t)Er(e.prototype,t);if(r)Er(e,r);return e}var Ar=function(){function u(){u.constructor_.apply(this,arguments)}u.orientationIndex=function e(t,r,n){var i=u.orientationIndexFilter(t,r,n);if(i<=1)return i;var a=Tr.valueOf(r.x).selfAdd(-t.x);var o=Tr.valueOf(r.y).selfAdd(-t.y);var s=Tr.valueOf(n.x).selfAdd(-r.x);var l=Tr.valueOf(n.y).selfAdd(-r.y);return a.selfMultiply(l).selfSubtract(o.selfMultiply(s)).signum()};u.signOfDet2x2=function e(){if(arguments[0]instanceof Tr){var t=arguments[0],r=arguments[1],n=arguments[2],i=arguments[3];var a=t.multiply(i).selfSubtract(r.multiply(n));return a.signum()}else if(typeof arguments[0]==="number"){var o=arguments[0],s=arguments[1],l=arguments[2],u=arguments[3];var c=Tr.valueOf(o);var f=Tr.valueOf(s);var h=Tr.valueOf(l);var d=Tr.valueOf(u);var a=c.multiply(d).selfSubtract(f.multiply(h));return a.signum()}};u.intersection=function e(t,r,n,i){var a=Tr.valueOf(i.y).selfSubtract(n.y).selfMultiply(Tr.valueOf(r.x).selfSubtract(t.x));var o=Tr.valueOf(i.x).selfSubtract(n.x).selfMultiply(Tr.valueOf(r.y).selfSubtract(t.y));var s=a.subtract(o);var l=Tr.valueOf(i.x).selfSubtract(n.x).selfMultiply(Tr.valueOf(t.y).selfSubtract(n.y));var u=Tr.valueOf(i.y).selfSubtract(n.y).selfMultiply(Tr.valueOf(t.x).selfSubtract(n.x));var c=l.subtract(u);var f=c.selfDivide(s).doubleValue();var h=Tr.valueOf(t.x).selfAdd(Tr.valueOf(r.x).selfSubtract(t.x).selfMultiply(f)).doubleValue();var d=Tr.valueOf(r.x).selfSubtract(t.x).selfMultiply(Tr.valueOf(t.y).selfSubtract(n.y));var p=Tr.valueOf(r.y).selfSubtract(t.y).selfMultiply(Tr.valueOf(t.x).selfSubtract(n.x));var v=d.subtract(p);var g=v.selfDivide(s).doubleValue();var m=Tr.valueOf(n.y).selfAdd(Tr.valueOf(i.y).selfSubtract(n.y).selfMultiply(g)).doubleValue();return new pe(h,m)};u.orientationIndexFilter=function e(t,r,n){var i=null;var a=(t.x-n.x)*(r.y-n.y);var o=(t.y-n.y)*(r.x-n.x);var s=a-o;if(a>0){if(o<=0){return u.signum(s)}else{i=a+o}}else if(a<0){if(o>=0){return u.signum(s)}else{i=-a-o}}else{return u.signum(s)}var l=u.DP_SAFE_EPSILON*i;if(s>=l||-s>=l){return u.signum(s)}return 2};u.signum=function e(t){if(t>0)return 1;if(t<0)return-1;return 0};var e=u.prototype;e.getClass=function e(){return u};Mr(u,[{key:"interfaces_",get:function e(){return[]}}]);return u}();Ar.constructor_=function(){};Ar.DP_SAFE_EPSILON=1e-15;function kr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function jr(e,t,r){if(t)kr(e.prototype,t);if(r)kr(e,r);return e}var Ir=function(){function h(){h.constructor_.apply(this,arguments)}h.index=function e(t,r,n){return Ar.orientationIndex(t,r,n)};h.isCCW=function e(t){var r=t.length-1;if(r<3)throw new V("Ring has fewer than 4 points, so orientation cannot be determined");var n=t[0];var i=0;for(var a=1;a<=r;a++){var o=t[a];if(o.y>n.y){n=o;i=a}}var s=i;do{s=s-1;if(s<0)s=r}while(t[s].equals2D(n)&&s!==i);var l=i;do{l=(l+1)%r}while(t[l].equals2D(n)&&l!==i);var u=t[s];var c=t[l];if(u.equals2D(n)||c.equals2D(n)||u.equals2D(c))return false;var f=h.index(u,n,c);var e=null;if(f===0){e=u.x>c.x}else{e=f>0}return e};var e=h.prototype;e.getClass=function e(){return h};jr(h,[{key:"interfaces_",get:function e(){return[]}}]);return h}();Ir.constructor_=function(){};Ir.CLOCKWISE=-1;Ir.RIGHT=Ir.CLOCKWISE;Ir.COUNTERCLOCKWISE=1;Ir.LEFT=Ir.COUNTERCLOCKWISE;Ir.COLLINEAR=0;Ir.STRAIGHT=Ir.COLLINEAR;function Dr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function Pr(e,t,r){if(t)Dr(e.prototype,t);if(r)Dr(e,r);return e}var Rr=function(){function t(){t.constructor_.apply(this,arguments)}var e=t.prototype;e.getClass=function e(){return t};Pr(t,[{key:"interfaces_",get:function e(){return[]}}]);return t}();Rr.constructor_=function(){};function Lr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function Nr(e,t,r){if(t)Lr(e.prototype,t);if(r)Lr(e,r);return e}function $r(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}function Fr(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}var Gr=function(s){$r(i,s);function i(){var e;e=s.call(this)||this;i.constructor_.apply(Fr(Fr(e)),arguments);return e}var e=i.prototype;e.computeEnvelopeInternal=function e(){return this._shell.getEnvelopeInternal()};e.getCoordinates=function e(){if(this.isEmpty()){return[]}var t=new Array(this.getNumPoints()).fill(null);var r=-1;var n=this._shell.getCoordinates();for(var i=0;i<n.length;i++){r++;t[r]=n[i]}for(var a=0;a<this._holes.length;a++){var o=this._holes[a].getCoordinates();for(var s=0;s<o.length;s++){r++;t[r]=o[s]}}return t};e.getArea=function e(){var t=0;t+=wr.ofRing(this._shell.getCoordinateSequence());for(var r=0;r<this._holes.length;r++){t-=wr.ofRing(this._holes[r].getCoordinateSequence())}return t};e.isRectangle=function e(){if(this.getNumInteriorRing()!==0)return false;if(this._shell===null)return false;if(this._shell.getNumPoints()!==5)return false;var t=this._shell.getCoordinateSequence();var r=this.getEnvelopeInternal();for(var n=0;n<5;n++){var i=t.getX(n);if(!(i===r.getMinX()||i===r.getMaxX()))return false;var a=t.getY(n);if(!(a===r.getMinY()||a===r.getMaxY()))return false}var o=t.getX(0);var s=t.getY(0);for(var n=1;n<=4;n++){var i=t.getX(n);var a=t.getY(n);var l=i!==o;var u=a!==s;if(l===u)return false;o=i;s=a}return true};e.equalsExact=function e(){if(arguments.length===2&&typeof arguments[1]==="number"&&arguments[0]instanceof we){var t=arguments[0],r=arguments[1];if(!this.isEquivalentClass(t)){return false}var n=t;var i=this._shell;var a=n._shell;if(!i.equalsExact(a,r)){return false}if(this._holes.length!==n._holes.length){return false}for(var o=0;o<this._holes.length;o++){if(!this._holes[o].equalsExact(n._holes[o],r)){return false}}return true}else return s.prototype.equalsExact.apply(this,arguments)};e.normalize=function e(){if(arguments.length===0){this.normalize(this._shell,true);for(var t=0;t<this._holes.length;t++){this.normalize(this._holes[t],false)}yt.sort(this._holes)}else if(arguments.length===2){var r=arguments[0],n=arguments[1];if(r.isEmpty()){return null}var i=new Array(r.getCoordinates().length-1).fill(null);Be.arraycopy(r.getCoordinates(),0,i,0,i.length);var a=Ze.minCoordinate(r.getCoordinates());Ze.scroll(i,a);Be.arraycopy(i,0,r.getCoordinates(),0,i.length);r.getCoordinates()[i.length]=i[0];if(Ir.isCCW(r.getCoordinates())===n){Ze.reverse(r.getCoordinates())}}};e.getCoordinate=function e(){return this._shell.getCoordinate()};e.getNumInteriorRing=function e(){return this._holes.length};e.getBoundaryDimension=function e(){return 1};e.getTypeCode=function e(){return we.TYPECODE_POLYGON};e.getDimension=function e(){return 2};e.getLength=function e(){var t=0;t+=this._shell.getLength();for(var r=0;r<this._holes.length;r++){t+=this._holes[r].getLength()}return t};e.getNumPoints=function e(){var t=this._shell.getNumPoints();for(var r=0;r<this._holes.length;r++){t+=this._holes[r].getNumPoints()}return t};e.reverse=function e(){var t=this.copy();t._shell=this._shell.copy().reverse();t._holes=new Array(this._holes.length).fill(null);for(var r=0;r<this._holes.length;r++){t._holes[r]=this._holes[r].copy().reverse()}return t};e.convexHull=function e(){return this.getExteriorRing().convexHull()};e.compareToSameClass=function e(){if(arguments.length===1){var t=arguments[0];var r=this._shell;var n=t._shell;return r.compareToSameClass(n)}else if(arguments.length===2){var i=arguments[0],a=arguments[1];var o=i;var r=this._shell;var n=o._shell;var s=r.compareToSameClass(n,a);if(s!==0)return s;var l=this.getNumInteriorRing();var u=o.getNumInteriorRing();var c=0;while(c<l&&c<u){var f=this.getInteriorRingN(c);var h=o.getInteriorRingN(c);var d=f.compareToSameClass(h,a);if(d!==0)return d;c++}if(c<l)return 1;if(c<u)return-1;return 0}};e.apply=function e(){if(N(arguments[0],Oe)){var t=arguments[0];this._shell.apply(t);for(var r=0;r<this._holes.length;r++){this._holes[r].apply(t)}}else if(N(arguments[0],At)){var n=arguments[0];this._shell.apply(n);if(!n.isDone()){for(var r=0;r<this._holes.length;r++){this._holes[r].apply(n);if(n.isDone())break}}if(n.isGeometryChanged())this.geometryChanged()}else if(N(arguments[0],Tt)){var i=arguments[0];i.filter(this)}else if(N(arguments[0],B)){var a=arguments[0];a.filter(this);this._shell.apply(a);for(var r=0;r<this._holes.length;r++){this._holes[r].apply(a)}}};e.getBoundary=function e(){if(this.isEmpty()){return this.getFactory().createMultiLineString()}var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var r=0;r<this._holes.length;r++){t[r+1]=this._holes[r]}if(t.length<=1)return this.getFactory().createLinearRing(t[0].getCoordinateSequence());return this.getFactory().createMultiLineString(t)};e.getGeometryType=function e(){return we.TYPENAME_POLYGON};e.copy=function e(){var t=this._shell.copy();var r=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++){r[n]=this._holes[n].copy()}return new i(t,r,this._factory)};e.getExteriorRing=function e(){return this._shell};e.isEmpty=function e(){return this._shell.isEmpty()};e.getInteriorRingN=function e(t){return this._holes[t]};e.getClass=function e(){return i};Nr(i,[{key:"interfaces_",get:function e(){return[Rr]}}]);return i}(we);Gr.constructor_=function(){this._shell=null;this._holes=null;var e=arguments[0],t=arguments[1],r=arguments[2];we.constructor_.call(this,r);if(e===null){e=this.getFactory().createLinearRing()}if(t===null){t=[]}if(we.hasNullElements(t)){throw new V("holes must not contain null elements")}if(e.isEmpty()&&we.hasNonEmptyElements(t)){throw new V("shell is empty but holes are not")}this._shell=e;this._holes=t};Gr.serialVersionUID=-0x307ffefd8dc97200;function Ur(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function Hr(e,t,r){if(t)Ur(e.prototype,t);if(r)Ur(e,r);return e}function Wr(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}function Yr(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}var Vr=function(n){Wr(i,n);function i(){var e;e=n.call(this)||this;i.constructor_.apply(Yr(Yr(e)),arguments);return e}var e=i.prototype;e.isValid=function e(){return true};e.equalsExact=function e(){if(arguments.length===2&&typeof arguments[1]==="number"&&arguments[0]instanceof we){var t=arguments[0],r=arguments[1];if(!this.isEquivalentClass(t)){return false}return n.prototype.equalsExact.call(this,t,r)}else return n.prototype.equalsExact.apply(this,arguments)};e.getCoordinate=function e(){if(arguments.length===1&&Number.isInteger(arguments[0])){var t=arguments[0];return this._geometries[t].getCoordinate()}else return n.prototype.getCoordinate.apply(this,arguments)};e.getBoundaryDimension=function e(){return Ct.FALSE};e.getTypeCode=function e(){return we.TYPECODE_MULTIPOINT};e.getDimension=function e(){return 0};e.getBoundary=function e(){return this.getFactory().createGeometryCollection()};e.getGeometryType=function e(){return we.TYPENAME_MULTIPOINT};e.copy=function e(){var t=new Array(this._geometries.length).fill(null);for(var r=0;r<t.length;r++){t[r]=this._geometries[r].copy()}return new i(t,this._factory)};e.getClass=function e(){return i};Hr(i,[{key:"interfaces_",get:function e(){return[dr]}}]);return i}(Pt);Vr.constructor_=function(){var e=arguments[0],t=arguments[1];Pt.constructor_.call(this,e,t)};Vr.serialVersionUID=-0x6fb1ed4162e0fc00;function qr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function zr(e,t,r){if(t)qr(e.prototype,t);if(r)qr(e,r);return e}function Br(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}function Kr(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}var Xr=function(t){Br(r,t);function r(){var e;e=t.call(this)||this;r.constructor_.apply(Kr(Kr(e)),arguments);return e}var e=r.prototype;e.getBoundaryDimension=function e(){return Ct.FALSE};e.isClosed=function e(){if(this.isEmpty()){return true}return t.prototype.isClosed.call(this)};e.getTypeCode=function e(){return we.TYPECODE_LINEARRING};e.reverse=function e(){var t=this._points.copy();ar.reverse(t);var r=this.getFactory().createLinearRing(t);return r};e.validateConstruction=function e(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this)){throw new V("Points of LinearRing do not form a closed linestring")}if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<r.MINIMUM_VALID_SIZE){throw new V("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}};e.getGeometryType=function e(){return we.TYPENAME_LINEARRING};e.copy=function e(){return new r(this._points.copy(),this._factory)};e.getClass=function e(){return r};zr(r,[{key:"interfaces_",get:function e(){return[]}}]);return r}(cr);Xr.constructor_=function(){if(arguments[0]instanceof Array&&arguments[1]instanceof Hn){var e=arguments[0],t=arguments[1];Xr.constructor_.call(this,t.getCoordinateSequenceFactory().create(e),t)}else if(N(arguments[0],U)&&arguments[1]instanceof Hn){var r=arguments[0],n=arguments[1];cr.constructor_.call(this,r,n);this.validateConstruction()}};Xr.MINIMUM_VALID_SIZE=4;Xr.serialVersionUID=-0x3b229e262367a600;function Zr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function Qr(e,t,r){if(t)Zr(e.prototype,t);if(r)Zr(e,r);return e}function Jr(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}function en(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}var tn=function(n){Jr(i,n);function i(){var e;e=n.call(this)||this;i.constructor_.apply(en(en(e)),arguments);return e}var e=i.prototype;e.equalsExact=function e(){if(arguments.length===2&&typeof arguments[1]==="number"&&arguments[0]instanceof we){var t=arguments[0],r=arguments[1];if(!this.isEquivalentClass(t)){return false}return n.prototype.equalsExact.call(this,t,r)}else return n.prototype.equalsExact.apply(this,arguments)};e.getBoundaryDimension=function e(){return 1};e.getTypeCode=function e(){return we.TYPECODE_MULTIPOLYGON};e.getDimension=function e(){return 2};e.reverse=function e(){var t=this._geometries.length;var r=new Array(t).fill(null);for(var n=0;n<this._geometries.length;n++){r[n]=this._geometries[n].reverse()}return this.getFactory().createMultiPolygon(r)};e.getBoundary=function e(){if(this.isEmpty()){return this.getFactory().createMultiLineString()}var t=new $e;for(var r=0;r<this._geometries.length;r++){var n=this._geometries[r];var i=n.getBoundary();for(var a=0;a<i.getNumGeometries();a++){t.add(i.getGeometryN(a))}}var o=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(o))};e.getGeometryType=function e(){return we.TYPENAME_MULTIPOLYGON};e.copy=function e(){var t=new Array(this._geometries.length).fill(null);for(var r=0;r<t.length;r++){t[r]=this._geometries[r].copy()}return new i(t,this._factory)};e.getClass=function e(){return i};Qr(i,[{key:"interfaces_",get:function e(){return[Rr]}}]);return i}(Pt);tn.constructor_=function(){var e=arguments[0],t=arguments[1];Pt.constructor_.call(this,e,t)};tn.serialVersionUID=-0x7a5aa1369171980;function rn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function nn(e,t,r){if(t)rn(e.prototype,t);if(r)rn(e,r);return e}var an=function(){function t(){t.constructor_.apply(this,arguments)}var e=t.prototype;e.setCopyUserData=function e(t){this._isUserDataCopied=t};e.edit=function e(t,r){if(t===null)return null;var n=this.editInternal(t,r);if(this._isUserDataCopied){n.setUserData(t.getUserData())}return n};e.editInternal=function e(t,r){if(this._factory===null)this._factory=t.getFactory();if(t instanceof Pt){return this.editGeometryCollection(t,r)}if(t instanceof Gr){return this.editPolygon(t,r)}if(t instanceof _r){return r.edit(t,this._factory)}if(t instanceof cr){return r.edit(t,this._factory)}fe.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName());return null};e.editGeometryCollection=function e(t,r){var n=r.edit(t,this._factory);var i=new $e;for(var a=0;a<n.getNumGeometries();a++){var o=this.edit(n.getGeometryN(a),r);if(o===null||o.isEmpty()){continue}i.add(o)}if(n.getClass()===Vr){return this._factory.createMultiPoint(i.toArray([]))}if(n.getClass()===Ft){return this._factory.createMultiLineString(i.toArray([]))}if(n.getClass()===tn){return this._factory.createMultiPolygon(i.toArray([]))}return this._factory.createGeometryCollection(i.toArray([]))};e.editPolygon=function e(t,r){var n=r.edit(t,this._factory);if(n===null)n=this._factory.createPolygon();if(n.isEmpty()){return n}var i=this.edit(n.getExteriorRing(),r);if(i===null||i.isEmpty()){return this._factory.createPolygon()}var a=new $e;for(var o=0;o<n.getNumInteriorRing();o++){var s=this.edit(n.getInteriorRingN(o),r);if(s===null||s.isEmpty()){continue}a.add(s)}return this._factory.createPolygon(i,a.toArray([]))};e.getClass=function e(){return t};nn(t,[{key:"interfaces_",get:function e(){return[]}}]);return t}();function on(){}an.GeometryEditorOperation=on;var sn=function(){function t(){t.constructor_.apply(this,arguments)}var e=t.prototype;e.edit=function e(t,r){return t};e.getClass=function e(){return t};nn(t,[{key:"interfaces_",get:function e(){return[on]}}]);return t}();sn.constructor_=function(){};var ln=function(){function t(){t.constructor_.apply(this,arguments)}var e=t.prototype;e.edit=function e(t,r){var n=this.edit(t.getCoordinates(),t);if(t instanceof Xr){if(n===null)return r.createLinearRing();else return r.createLinearRing(n)}if(t instanceof cr){if(n===null)return r.createLineString();else return r.createLineString(n)}if(t instanceof _r){if(n===null||n.length===0)return r.createPoint();else return r.createPoint(n[0])}return t};e.getClass=function e(){return t};nn(t,[{key:"interfaces_",get:function e(){return[on]}}]);return t}();ln.constructor_=function(){};var un=function(){function t(){t.constructor_.apply(this,arguments)}var e=t.prototype;e.edit=function e(t,r){if(t instanceof Xr){return r.createLinearRing(this.edit(t.getCoordinateSequence(),t))}if(t instanceof cr){return r.createLineString(this.edit(t.getCoordinateSequence(),t))}if(t instanceof _r){return r.createPoint(this.edit(t.getCoordinateSequence(),t))}return t};e.getClass=function e(){return t};nn(t,[{key:"interfaces_",get:function e(){return[on]}}]);return t}();un.constructor_=function(){};an.NoOpGeometryOperation=sn;an.CoordinateOperation=ln;an.CoordinateSequenceOperation=un;an.constructor_=function(){this._factory=null;this._isUserDataCopied=false;if(arguments.length===0){}else if(arguments.length===1){var e=arguments[0];this._factory=e}};function cn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function fn(e,t,r){if(t)cn(e.prototype,t);if(r)cn(e,r);return e}var hn=function(){function n(){n.constructor_.apply(this,arguments)}var e=n.prototype;e.setOrdinate=function e(t,r,n){switch(r){case U.X:this._coordinates[t].x=n;break;case U.Y:this._coordinates[t].y=n;break;case U.Z:this._coordinates[t].z=n;break;default:throw new V("invalid ordinateIndex")}};e.size=function e(){return this._coordinates.length};e.getOrdinate=function e(t,r){switch(r){case U.X:return this._coordinates[t].x;case U.Y:return this._coordinates[t].y;case U.Z:return this._coordinates[t].z}return te.NaN};e.getCoordinate=function e(){if(arguments.length===1){var t=arguments[0];return this._coordinates[t]}else if(arguments.length===2){var r=arguments[0],n=arguments[1];n.x=this._coordinates[r].x;n.y=this._coordinates[r].y;n.z=this._coordinates[r].z}};e.getCoordinateCopy=function e(t){return new pe(this._coordinates[t])};e.getDimension=function e(){return this._dimension};e.getX=function e(t){return this._coordinates[t].x};e.expandEnvelope=function e(t){for(var r=0;r<this._coordinates.length;r++){t.expandToInclude(this._coordinates[r])}return t};e.copy=function e(){var t=new Array(this.size()).fill(null);for(var r=0;r<this._coordinates.length;r++){t[r]=this._coordinates[r].copy()}return new n(t,this._dimension)};e.toString=function e(){if(this._coordinates.length>0){var t=new rr(17*this._coordinates.length);t.append("(");t.append(this._coordinates[0]);for(var r=1;r<this._coordinates.length;r++){t.append(", ");t.append(this._coordinates[r])}t.append(")");return t.toString()}else{return"()"}};e.getY=function e(t){return this._coordinates[t].y};e.toCoordinateArray=function e(){return this._coordinates};e.getClass=function e(){return n};fn(n,[{key:"interfaces_",get:function e(){return[U,X]}}]);return n}();hn.constructor_=function(){this._dimension=3;this._coordinates=null;if(arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];hn.constructor_.call(this,e,3)}else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var r=0;r<t;r++){this._coordinates[r]=new pe}}else if(N(arguments[0],U)){var n=arguments[0];if(n===null){this._coordinates=new Array(0).fill(null);return null}this._dimension=n.getDimension();this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++){this._coordinates[r]=n.getCoordinateCopy(r)}}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],a=arguments[1];this._coordinates=i;this._dimension=a;if(i===null)this._coordinates=new Array(0).fill(null)}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var o=arguments[0],s=arguments[1];this._coordinates=new Array(o).fill(null);this._dimension=s;for(var r=0;r<o;r++){this._coordinates[r]=new pe}}}};hn.serialVersionUID=-0xcb44a778db18e00;function dn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function pn(e,t,r){if(t)dn(e.prototype,t);if(r)dn(e,r);return e}var vn=function(){function t(){t.constructor_.apply(this,arguments)}t.instance=function e(){return t.instanceObject};var e=t.prototype;e.readResolve=function e(){return t.instance()};e.create=function e(){if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return new hn(t)}else if(N(arguments[0],U)){var r=arguments[0];return new hn(r)}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];if(i>3)i=3;if(i<2)return new hn(n);return new hn(n,i)}};e.getClass=function e(){return t};pn(t,[{key:"interfaces_",get:function e(){return[Y,X]}}]);return t}();vn.constructor_=function(){};vn.serialVersionUID=-0x38e49fa6cf6f2e00;vn.instanceObject=new vn;var gn;var mn=Object.defineProperty;function _n(e,t){return e===t||e!==e&&t!==t}var yn=bn({delete:Sn,has:xn,get:Cn,set:Tn,keys:Mn,values:An,entries:kn,forEach:Dn,clear:En});function bn(e,t){function r(e){if(!this||this.constructor!==r)return new r(e);this._keys=[];this._values=[];this._itp=[];this.objectOnly=t;if(e)wn.call(this,e)}if(!t){mn(e,"size",{get:In})}e.constructor=r;r.prototype=e;return r}function wn(e){if(this.add)e.forEach(this.add,this);else e.forEach(function(e){this.set(e[0],e[1])},this)}function Sn(e){if(this.has(e)){this._keys.splice(gn,1);this._values.splice(gn,1);this._itp.forEach(function(e){if(gn<e[0])e[0]--})}return gn>-1}function Cn(e){return this.has(e)?this._values[gn]:undefined}function On(e,t){if(this.objectOnly&&t!==Object(t))throw new TypeError("Invalid value used as weak collection key");if(t!==t||t===0)for(gn=e.length;gn--&&!_n(e[gn],t);){}else gn=e.indexOf(t);return gn>-1}function xn(e){return On.call(this,this._keys,e)}function Tn(e,t){this.has(e)?this._values[gn]=t:this._values[this._keys.push(e)-1]=t;return this}function En(){(this._keys||0).length=this._values.length=0}function Mn(){return jn(this._itp,this._keys)}function An(){return jn(this._itp,this._values)}function kn(){return jn(this._itp,this._keys,this._values)}function jn(n,i,a){var o=[0];var s=false;n.push(o);return{next:function e(){var t;var r=o[0];if(!s&&r<i.length){t=a?[i[r],a[r]]:i[r];o[0]++}else{s=true;n.splice(n.indexOf(o),1)}return{done:s,value:t}}}}function In(){return this._values.length}function Dn(e,t){var r=this.entries();for(;;){var n=r.next();if(n.done)break;e.call(t,n.value[1],n.value[0],this)}}var Pn=typeof Map==="undefined"||!Map.prototype.values?yn:Map;function Rn(){this.map_=new Pn}Rn.prototype=new et;Rn.prototype.get=function(e){return this.map_.get(e)||null};Rn.prototype.put=function(e,t){this.map_.set(e,t);return t};Rn.prototype.values=function(){var e=new $e;var t=this.map_.values();var r=t.next();while(!r.done){e.add(r.value);r=t.next()}return e};Rn.prototype.entrySet=function(){var t=new nt;this.map_.entries().forEach(function(e){return t.add(e)});return t};Rn.prototype.size=function(){return this.map_.size()};function Ln(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function Nn(e,t,r){if(t)Ln(e.prototype,t);if(r)Ln(e,r);return e}var $n=function(){function i(){i.constructor_.apply(this,arguments)}i.mostPrecise=function e(t,r){if(t.compareTo(r)>=0)return t;return r};var e=i.prototype;e.equals=function e(t){if(!(t instanceof i)){return false}var r=t;return this._modelType===r._modelType&&this._scale===r._scale};e.compareTo=function e(t){var r=t;var n=this.getMaximumSignificantDigits();var i=r.getMaximumSignificantDigits();return new Cr(n).compareTo(new Cr(i))};e.getScale=function e(){return this._scale};e.isFloating=function e(){return this._modelType===i.FLOATING||this._modelType===i.FLOATING_SINGLE};e.getType=function e(){return this._modelType};e.toString=function e(){var t="UNKNOWN";if(this._modelType===i.FLOATING){t="Floating"}else if(this._modelType===i.FLOATING_SINGLE){t="Floating-Single"}else if(this._modelType===i.FIXED){t="Fixed (Scale="+this.getScale()+")"}return t};e.makePrecise=function e(){if(typeof arguments[0]==="number"){var t=arguments[0];if(te.isNaN(t))return t;if(this._modelType===i.FLOATING_SINGLE){var r=t;return r}if(this._modelType===i.FIXED){return Math.round(t*this._scale)/this._scale}return t}else if(arguments[0]instanceof pe){var n=arguments[0];if(this._modelType===i.FLOATING)return null;n.x=this.makePrecise(n.x);n.y=this.makePrecise(n.y)}};e.getMaximumSignificantDigits=function e(){var t=16;if(this._modelType===i.FLOATING){t=16}else if(this._modelType===i.FLOATING_SINGLE){t=6}else if(this._modelType===i.FIXED){t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))}return t};e.setScale=function e(t){this._scale=Math.abs(t)};e.getClass=function e(){return i};Nn(i,[{key:"interfaces_",get:function e(){return[X,K]}}]);return i}();var Fn=function(){function t(){t.constructor_.apply(this,arguments)}var e=t.prototype;e.readResolve=function e(){return t.nameToTypeMap.get(this._name)};e.toString=function e(){return this._name};e.getClass=function e(){return t};Nn(t,[{key:"interfaces_",get:function e(){return[X]}}]);return t}();Fn.constructor_=function(){this._name=null;var e=arguments[0];this._name=e;Fn.nameToTypeMap.put(e,this)};Fn.serialVersionUID=-552860263173159e4;Fn.nameToTypeMap=new Rn;$n.Type=Fn;$n.constructor_=function(){this._modelType=null;this._scale=null;if(arguments.length===0){this._modelType=$n.FLOATING}else if(arguments.length===1){if(arguments[0]instanceof Fn){var e=arguments[0];this._modelType=e;if(e===$n.FIXED){this.setScale(1)}}else if(typeof arguments[0]==="number"){var t=arguments[0];this._modelType=$n.FIXED;this.setScale(t)}else if(arguments[0]instanceof $n){var r=arguments[0];this._modelType=r._modelType;this._scale=r._scale}}};$n.serialVersionUID=0x6bee6404e9a25c00;$n.FIXED=new Fn("FIXED");$n.FLOATING=new Fn("FLOATING");$n.FLOATING_SINGLE=new Fn("FLOATING SINGLE");$n.maximumPreciseValue=9007199254740992;function Gn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function Un(e,t,r){if(t)Gn(e.prototype,t);if(r)Gn(e,r);return e}var Hn=function(){function c(){c.constructor_.apply(this,arguments)}c.toMultiPolygonArray=function e(t){var r=new Array(t.size()).fill(null);return t.toArray(r)};c.toGeometryArray=function e(t){if(t===null)return null;var r=new Array(t.size()).fill(null);return t.toArray(r)};c.getDefaultCoordinateSequenceFactory=function e(){return vn.instance()};c.toMultiLineStringArray=function e(t){var r=new Array(t.size()).fill(null);return t.toArray(r)};c.toLineStringArray=function e(t){var r=new Array(t.size()).fill(null);return t.toArray(r)};c.toMultiPointArray=function e(t){var r=new Array(t.size()).fill(null);return t.toArray(r)};c.toLinearRingArray=function e(t){var r=new Array(t.size()).fill(null);return t.toArray(r)};c.toPointArray=function e(t){var r=new Array(t.size()).fill(null);return t.toArray(r)};c.toPolygonArray=function e(t){var r=new Array(t.size()).fill(null);return t.toArray(r)};c.createPointFromInternalCoord=function e(t,r){r.getPrecisionModel().makePrecise(t);return r.getFactory().createPoint(t)};var e=c.prototype;e.toGeometry=function e(t){if(t.isNull()){return this.createPoint()}if(t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()){return this.createPoint(new pe(t.getMinX(),t.getMinY()))}if(t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()){return this.createLineString([new pe(t.getMinX(),t.getMinY()),new pe(t.getMaxX(),t.getMaxY())])}return this.createPolygon(this.createLinearRing([new pe(t.getMinX(),t.getMinY()),new pe(t.getMinX(),t.getMaxY()),new pe(t.getMaxX(),t.getMaxY()),new pe(t.getMaxX(),t.getMinY()),new pe(t.getMinX(),t.getMinY())]),null)};e.createLineString=function e(){if(arguments.length===0){return this.createLineString(this.getCoordinateSequenceFactory().create([]))}else if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(t!==null?this.getCoordinateSequenceFactory().create(t):null)}else if(N(arguments[0],U)){var r=arguments[0];return new cr(r,this)}}};e.createMultiLineString=function e(){if(arguments.length===0){return new Ft(null,this)}else if(arguments.length===1){var t=arguments[0];return new Ft(t,this)}};e.buildGeometry=function e(t){var r=null;var n=false;var i=false;for(var a=t.iterator();a.hasNext();){var o=a.next();var s=o.getClass();if(r===null){r=s}if(s!==r){n=true}if(o instanceof Pt)i=true}if(r===null){return this.createGeometryCollection()}if(n||i){return this.createGeometryCollection(c.toGeometryArray(t))}var l=t.iterator().next();var u=t.size()>1;if(u){if(l instanceof Gr){return this.createMultiPolygon(c.toPolygonArray(t))}else if(l instanceof cr){return this.createMultiLineString(c.toLineStringArray(t))}else if(l instanceof _r){return this.createMultiPoint(c.toPointArray(t))}fe.shouldNeverReachHere("Unhandled class: "+l.getClass().getName())}return l};e.createMultiPointFromCoords=function e(t){return this.createMultiPoint(t!==null?this.getCoordinateSequenceFactory().create(t):null)};e.createPoint=function e(){if(arguments.length===0){return this.createPoint(this.getCoordinateSequenceFactory().create([]))}else if(arguments.length===1){if(arguments[0]instanceof pe){var t=arguments[0];return this.createPoint(t!==null?this.getCoordinateSequenceFactory().create([t]):null)}else if(N(arguments[0],U)){var r=arguments[0];return new _r(r,this)}}};e.getCoordinateSequenceFactory=function e(){return this._coordinateSequenceFactory};e.createPolygon=function e(){if(arguments.length===0){return this.createPolygon(null,null)}else if(arguments.length===1){if(N(arguments[0],U)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}else if(arguments[0]instanceof Array){var r=arguments[0];return this.createPolygon(this.createLinearRing(r))}else if(arguments[0]instanceof Xr){var n=arguments[0];return this.createPolygon(n,null)}}else if(arguments.length===2){var i=arguments[0],a=arguments[1];return new Gr(i,a,this)}};e.getSRID=function e(){return this._SRID};e.createGeometryCollection=function e(){if(arguments.length===0){return new Pt(null,this)}else if(arguments.length===1){var t=arguments[0];return new Pt(t,this)}};e.createGeometry=function e(t){var r=new an(this);return r.edit(t,new(function(){function e(){}var t=e.prototype;t.edit=function e(){if(arguments.length===2&&arguments[1]instanceof we&&N(arguments[0],U)){var t=arguments[0],r=arguments[1];return this._coordinateSequenceFactory.create(t)}};return e}()))};e.getPrecisionModel=function e(){return this._precisionModel};e.createLinearRing=function e(){if(arguments.length===0){return this.createLinearRing(this.getCoordinateSequenceFactory().create([]))}else if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(t!==null?this.getCoordinateSequenceFactory().create(t):null)}else if(N(arguments[0],U)){var r=arguments[0];return new Xr(r,this)}}};e.createMultiPolygon=function e(){if(arguments.length===0){return new tn(null,this)}else if(arguments.length===1){var t=arguments[0];return new tn(t,this)}};e.createMultiPoint=function e(){if(arguments.length===0){return new Vr(null,this)}else if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return new Vr(t,this)}else if(N(arguments[0],U)){var r=arguments[0];if(r===null){return this.createMultiPoint(new Array(0).fill(null))}var n=new Array(r.size()).fill(null);for(var i=0;i<r.size();i++){var a=this.getCoordinateSequenceFactory().create(1,r.getDimension());ar.copy(r,i,a,0,1);n[i]=this.createPoint(a)}return this.createMultiPoint(n)}}};e.getClass=function e(){return c};Un(c,[{key:"interfaces_",get:function e(){return[X]}}]);return c}();Hn.constructor_=function(){this._precisionModel=null;this._coordinateSequenceFactory=null;this._SRID=null;if(arguments.length===0){Hn.constructor_.call(this,new $n,0)}else if(arguments.length===1){if(N(arguments[0],Y)){var e=arguments[0];Hn.constructor_.call(this,new $n,0,e)}else if(arguments[0]instanceof $n){var t=arguments[0];Hn.constructor_.call(this,t,0,Hn.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){var r=arguments[0],n=arguments[1];Hn.constructor_.call(this,r,n,Hn.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){var i=arguments[0],a=arguments[1],o=arguments[2];this._precisionModel=i;this._coordinateSequenceFactory=o;this._SRID=a}};Hn.serialVersionUID=-0x5ea75f2051eeb400;var Wn=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];var Yn=function(){function e(e){this.geometryFactory=e||new Hn}var t=e.prototype;t.read=function e(t){var r;if(typeof t==="string")r=JSON.parse(t);else r=t;var n=r.type;if(!Vn[n])throw new Error("Unknown GeoJSON type: "+r.type);if(Wn.indexOf(n)!==-1)return Vn[n].call(this,r.coordinates);else if(n==="GeometryCollection")return Vn[n].call(this,r.geometries);return Vn[n].call(this,r)};t.write=function e(t){var r=t.getGeometryType();if(!qn[r])throw new Error("Geometry is not supported");return qn[r].call(this,t)};return e}();var Vn={Feature:function e(t){var r={};for(var n in t){r[n]=t[n]}if(t.geometry){var i=t.geometry.type;if(!Vn[i])throw new Error("Unknown GeoJSON type: "+t.type);r.geometry=this.read(t.geometry)}if(t.bbox)r.bbox=Vn.bbox.call(this,t.bbox);return r},FeatureCollection:function e(t){var r={};if(t.features){r.features=[];for(var n=0;n<t.features.length;++n){r.features.push(this.read(t.features[n]))}}if(t.bbox)r.bbox=this.parse.bbox.call(this,t.bbox);return r},coordinates:function e(t){var e=[];for(var r=0;r<t.length;++r){var n=t[r];e.push(new pe(n[0],n[1]))}return e},bbox:function e(t){return this.geometryFactory.createLinearRing([new pe(t[0],t[1]),new pe(t[2],t[1]),new pe(t[2],t[3]),new pe(t[0],t[3]),new pe(t[0],t[1])])},Point:function e(t){var r=new pe(t[0],t[1]);return this.geometryFactory.createPoint(r)},MultiPoint:function e(t){var r=[];for(var n=0;n<t.length;++n){r.push(Vn.Point.call(this,t[n]))}return this.geometryFactory.createMultiPoint(r)},LineString:function e(t){var r=Vn.coordinates.call(this,t);return this.geometryFactory.createLineString(r)},MultiLineString:function e(t){var r=[];for(var n=0;n<t.length;++n){r.push(Vn.LineString.call(this,t[n]))}return this.geometryFactory.createMultiLineString(r)},Polygon:function e(t){var r=Vn.coordinates.call(this,t[0]);var n=this.geometryFactory.createLinearRing(r);var i=[];for(var a=1;a<t.length;++a){var o=t[a];var s=Vn.coordinates.call(this,o);var l=this.geometryFactory.createLinearRing(s);i.push(l)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function e(t){var r=[];for(var n=0;n<t.length;++n){var i=t[n];r.push(Vn.Polygon.call(this,i))}return this.geometryFactory.createMultiPolygon(r)},GeometryCollection:function e(t){var r=[];for(var n=0;n<t.length;++n){var i=t[n];r.push(this.read(i))}return this.geometryFactory.createGeometryCollection(r)}};var qn={coordinate:function e(t){return[t.x,t.y]},Point:function e(t){var r=qn.coordinate.call(this,t.getCoordinate());return{type:"Point",coordinates:r}},MultiPoint:function e(t){var r=[];for(var n=0;n<t._geometries.length;++n){var i=t._geometries[n];var a=qn.Point.call(this,i);r.push(a.coordinates)}return{type:"MultiPoint",coordinates:r}},LineString:function e(t){var r=[];var n=t.getCoordinates();for(var i=0;i<n.length;++i){var a=n[i];r.push(qn.coordinate.call(this,a))}return{type:"LineString",coordinates:r}},MultiLineString:function e(t){var r=[];for(var n=0;n<t._geometries.length;++n){var i=t._geometries[n];var a=qn.LineString.call(this,i);r.push(a.coordinates)}return{type:"MultiLineString",coordinates:r}},Polygon:function e(t){var r=[];var n=qn.LineString.call(this,t._shell);r.push(n.coordinates);for(var i=0;i<t._holes.length;++i){var a=t._holes[i];var o=qn.LineString.call(this,a);r.push(o.coordinates)}return{type:"Polygon",coordinates:r}},MultiPolygon:function e(t){var r=[];for(var n=0;n<t._geometries.length;++n){var i=t._geometries[n];var a=qn.Polygon.call(this,i);r.push(a.coordinates)}return{type:"MultiPolygon",coordinates:r}},GeometryCollection:function e(t){var r=[];for(var n=0;n<t._geometries.length;++n){var i=t._geometries[n];var a=i.getGeometryType();r.push(qn[a].call(this,i))}return{type:"GeometryCollection",geometries:r}}};var zn=function(){function e(e){this.parser=new Yn(e||new Hn)}var t=e.prototype;t.read=function e(t){var r=this.parser.read(t);return r};return e}();var Bn=function(){function e(){this.parser=new Yn(this.geometryFactory)}var t=e.prototype;t.write=function e(t){return this.parser.write(t)};return e}();var Kn={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};var Xn=function(){function e(e){this.geometryFactory=e||new Hn;this.precisionModel=this.geometryFactory.getPrecisionModel()}var t=e.prototype;t.read=function e(t){var r,n,i;t=t.replace(/[\n\r]/g," ");var a=Kn.typeStr.exec(t);if(t.search("EMPTY")!==-1){a=Kn.emptyTypeStr.exec(t);a[2]=undefined}if(a){n=a[1].toLowerCase();i=a[2];if(Qn[n]){r=Qn[n].call(this,i)}}if(r===undefined)throw new Error("Could not parse WKT "+t);return r};t.write=function e(t){return this.extractGeometry(t)};t.extractGeometry=function e(t){var r=t.getGeometryType().toLowerCase();if(!Zn[r]){return null}var n=r.toUpperCase();var i;if(t.isEmpty()){i=n+" EMPTY"}else{i=n+"("+Zn[r].call(this,t)+")"}return i};return e}();var Zn={coordinate:function e(t){return t.x+" "+t.y},point:function e(t){return Zn.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function e(t){var r=[];for(var n=0,i=t._geometries.length;n<i;++n){r.push("("+Zn.point.call(this,t._geometries[n])+")")}return r.join(",")},linestring:function e(t){var r=[];for(var n=0,i=t._points._coordinates.length;n<i;++n){r.push(Zn.coordinate.call(this,t._points._coordinates[n]))}return r.join(",")},linearring:function e(t){var r=[];for(var n=0,i=t._points._coordinates.length;n<i;++n){r.push(Zn.coordinate.call(this,t._points._coordinates[n]))}return r.join(",")},multilinestring:function e(t){var r=[];for(var n=0,i=t._geometries.length;n<i;++n){r.push("("+Zn.linestring.call(this,t._geometries[n])+")")}return r.join(",")},polygon:function e(t){var r=[];r.push("("+Zn.linestring.call(this,t._shell)+")");for(var n=0,i=t._holes.length;n<i;++n){r.push("("+Zn.linestring.call(this,t._holes[n])+")")}return r.join(",")},multipolygon:function e(t){var r=[];for(var n=0,i=t._geometries.length;n<i;++n){r.push("("+Zn.polygon.call(this,t._geometries[n])+")")}return r.join(",")},geometrycollection:function e(t){var r=[];for(var n=0,i=t._geometries.length;n<i;++n){r.push(this.extractGeometry(t._geometries[n]))}return r.join(",")}};var Qn={coord:function e(t){var r=t.trim().split(Kn.spaces);var e=new pe(Number.parseFloat(r[0]),Number.parseFloat(r[1]));this.precisionModel.makePrecise(e);return e},point:function e(t){if(t===undefined)return this.geometryFactory.createPoint();return this.geometryFactory.createPoint(Qn.coord.call(this,t))},multipoint:function e(t){if(t===undefined)return this.geometryFactory.createMultiPoint();var r;var n=t.trim().split(",");var i=[];for(var a=0,o=n.length;a<o;++a){r=n[a].replace(Kn.trimParens,"$1");i.push(Qn.point.call(this,r))}return this.geometryFactory.createMultiPoint(i)},linestring:function e(t){if(t===undefined){return this.geometryFactory.createLineString()}var r=t.trim().split(",");var n=[];var i;for(var a=0,o=r.length;a<o;++a){n.push(Qn.coord.call(this,r[a]))}return this.geometryFactory.createLineString(n)},linearring:function e(t){if(t===undefined){return this.geometryFactory.createLinearRing()}var r=t.trim().split(",");var n=[];var i;for(var a=0,o=r.length;a<o;++a){n.push(Qn.coord.call(this,r[a]))}return this.geometryFactory.createLinearRing(n)},multilinestring:function e(t){if(t===undefined){return this.geometryFactory.createMultiLineString()}var r;var n=t.trim().split(Kn.parenComma);var i=[];for(var a=0,o=n.length;a<o;++a){r=n[a].replace(Kn.trimParens,"$1");i.push(Qn.linestring.call(this,r))}return this.geometryFactory.createMultiLineString(i)},polygon:function e(t){if(t===undefined){return this.geometryFactory.createPolygon()}var r,n,i;var a=t.trim().split(Kn.parenComma);var o;var s=[];for(var l=0,u=a.length;l<u;++l){r=a[l].replace(Kn.trimParens,"$1");n=Qn.linestring.call(this,r);i=this.geometryFactory.createLinearRing(n._points);if(l===0){o=i}else{s.push(i)}}return this.geometryFactory.createPolygon(o,s)},multipolygon:function e(t){if(t===undefined){return this.geometryFactory.createMultiPolygon()}var r;var n=t.trim().split(Kn.doubleParenComma);var i=[];for(var a=0,o=n.length;a<o;++a){r=n[a].replace(Kn.trimParens,"$1");i.push(Qn.polygon.call(this,r))}return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function e(t){if(t===undefined){return this.geometryFactory.createGeometryCollection()}t=t.replace(/,\s*([A-Za-z])/g,"|$1");var r=t.trim().split("|");var n=[];for(var i=0,a=r.length;i<a;++i){n.push(this.read(r[i]))}return this.geometryFactory.createGeometryCollection(n)}};var Jn=function(){function e(e){this.parser=new Xn(e||new Hn)}var t=e.prototype;t.read=function e(t){var r=this.parser.read(t);return r};return e}();var ei=function(){function e(e){this.parser=new Xn(e)}var t=e.prototype;t.write=function e(t){return this.parser.write(t)};e.toLineString=function e(t,r){if(arguments.length!==2){throw new Error("Not implemented")}return"LINESTRING ( "+t.x+" "+t.y+", "+r.x+" "+r.y+" )"};return e}();function ti(e){return[e.x,e.y]}var ri=function(){function e(e,t){this.geometryFactory=e||new Hn;this.ol=t||typeof ol!=="undefined"&&ol}var t=e.prototype;t.inject=function e(t,r,n,i,a,o,s,l){this.ol={geom:{Point:t,LineString:r,LinearRing:n,Polygon:i,MultiPoint:a,MultiLineString:o,MultiPolygon:s,GeometryCollection:l}}};t.read=function e(t){var r=this.ol;if(t instanceof r.geom.Point){return this.convertFromPoint(t)}else if(t instanceof r.geom.LineString){return this.convertFromLineString(t)}else if(t instanceof r.geom.LinearRing){return this.convertFromLinearRing(t)}else if(t instanceof r.geom.Polygon){return this.convertFromPolygon(t)}else if(t instanceof r.geom.MultiPoint){return this.convertFromMultiPoint(t)}else if(t instanceof r.geom.MultiLineString){return this.convertFromMultiLineString(t)}else if(t instanceof r.geom.MultiPolygon){return this.convertFromMultiPolygon(t)}else if(t instanceof r.geom.GeometryCollection){return this.convertFromCollection(t)}};t.convertFromPoint=function e(t){var r=t.getCoordinates();return this.geometryFactory.createPoint(new pe(r[0],r[1]))};t.convertFromLineString=function e(t){return this.geometryFactory.createLineString(t.getCoordinates().map(function(e){return new pe(e[0],e[1])}))};t.convertFromLinearRing=function e(t){return this.geometryFactory.createLinearRing(t.getCoordinates().map(function(e){return new pe(e[0],e[1])}))};t.convertFromPolygon=function e(t){var r=t.getLinearRings();var n=null;var i=[];for(var a=0;a<r.length;a++){var o=this.convertFromLinearRing(r[a]);if(a===0){n=o}else{i.push(o)}}return this.geometryFactory.createPolygon(n,i)};t.convertFromMultiPoint=function e(t){var r=t.getPoints().map(function(e){return this.convertFromPoint(e)},this);return this.geometryFactory.createMultiPoint(r)};t.convertFromMultiLineString=function e(t){var r=t.getLineStrings().map(function(e){return this.convertFromLineString(e)},this);return this.geometryFactory.createMultiLineString(r)};t.convertFromMultiPolygon=function e(t){var r=t.getPolygons().map(function(e){return this.convertFromPolygon(e)},this);return this.geometryFactory.createMultiPolygon(r)};t.convertFromCollection=function e(t){var r=t.getGeometries().map(function(e){return this.read(e)},this);return this.geometryFactory.createGeometryCollection(r)};t.write=function e(t){if(t.getGeometryType()==="Point"){return this.convertToPoint(t.getCoordinate())}else if(t.getGeometryType()==="LineString"){return this.convertToLineString(t)}else if(t.getGeometryType()==="LinearRing"){return this.convertToLinearRing(t)}else if(t.getGeometryType()==="Polygon"){return this.convertToPolygon(t)}else if(t.getGeometryType()==="MultiPoint"){return this.convertToMultiPoint(t)}else if(t.getGeometryType()==="MultiLineString"){return this.convertToMultiLineString(t)}else if(t.getGeometryType()==="MultiPolygon"){return this.convertToMultiPolygon(t)}else if(t.getGeometryType()==="GeometryCollection"){return this.convertToCollection(t)}};t.convertToPoint=function e(t){return new this.ol.geom.Point([t.x,t.y])};t.convertToLineString=function e(t){var r=t._points._coordinates.map(ti);return new this.ol.geom.LineString(r)};t.convertToLinearRing=function e(t){var r=t._points._coordinates.map(ti);return new this.ol.geom.LinearRing(r)};t.convertToPolygon=function e(t){var r=[t._shell._points._coordinates.map(ti)];for(var n=0;n<t._holes.length;n++){r.push(t._holes[n]._points._coordinates.map(ti))}return new this.ol.geom.Polygon(r)};t.convertToMultiPoint=function e(t){return new this.ol.geom.MultiPoint(t.getCoordinates().map(ti))};t.convertToMultiLineString=function e(t){var r=[];for(var n=0;n<t._geometries.length;n++){r.push(this.convertToLineString(t._geometries[n]).getCoordinates())}return new this.ol.geom.MultiLineString(r)};t.convertToMultiPolygon=function e(t){var r=[];for(var n=0;n<t._geometries.length;n++){r.push(this.convertToPolygon(t._geometries[n]).getCoordinates())}return new this.ol.geom.MultiPolygon(r)};t.convertToCollection=function e(t){var r=[];for(var n=0;n<t._geometries.length;n++){var i=t._geometries[n];r.push(this.write(i))}return new this.ol.geom.GeometryCollection(r)};return e}();var ni={io:{OL3Parser:ri}};var ii=angular.module("gmfObjectEditingComponent",[n["a"].module.name,i["a"].module.name,a["a"].module.name,m["a"].module.name,_["a"].name,b["a"].module.name,S["a"].module.name,O["a"].module.name]);ii.run(["$templateCache",function(e){e.put("gmf/objectediting",r(500))}]);ii.value("gmfObjecteditingTemplateUrl",function(e,t){var r=t["gmfObjecteditingTemplateurl"];return r!==undefined?r:"gmf/objectediting"});ai.$inject=["$element","$attrs","gmfObjecteditingTemplateUrl"];function ai(e,t,r){return r(e,t)}ii.component_={controller:"GmfObjecteditingController as oeCtrl",bindings:{active:"=gmfObjecteditingActive",feature:"<gmfObjecteditingFeature",geomType:"<gmfObjecteditingGeomtype",layerNodeId:"<gmfObjecteditingLayernodeid",map:"<gmfObjecteditingMap",sketchFeatures:"<gmfObjecteditingSketchfeatures"},templateUrl:ai};ii.component("gmfObjectediting",ii.component_);ii.Controller=function(e,t,r,n,i,a,o,s,l){this.active;this.feature;this.geomType;this.layerNodeId;this.map;this.sketchFeatures;this.scope_=e;this.timeout_=t;this.gettextCatalog_=r;this.gmfEditFeature_=n;this.gmfObjectEditingQuery_=i;this.queryableLayersInfo;this.selectedQueryableLayerInfo;this.queryableLayerListShown=false;this.copyFromActive=false;this.deleteFromActive=false;this.featureHasGeom;this.ngeoLayerHelper_=s;this.gmfTreeManager_=a;this.ngeoFeatureHelper_=o;this.ngeoToolActivateMgr_=l;this.skipGeometryChange_=false;this.process=_["a"].ProcessType.ADD;this.editableWMSLayer_=null;this.jstsOL3Parser_=new ni.io.OL3Parser;this.state_;this.geometryChanges_=[];this.defaultStyles_={};this.defaultStylesWoVertice_={};this.dirtyStyles_={};this.dirtyStylesWoVertice_={};this.pending=false;this.dirty=false;this.listenerKeys_=[];this.features_=new E["a"];this.interactions_=new E["a"];this.modify_=new I["a"]({deleteCondition:x["a"].deleteCondition,features:this.features_,style:o.getVertexStyle(false)});this.interactions_.push(this.modify_);this.modifyToolActivate_=new C["a"](this.modify_,"active");this.toolsActive=false;this.toolsToolActivate_=new C["a"](this,"toolsActive")};ii.Controller.$inject=["$scope","$timeout","gettextCatalog","gmfEditFeature","gmfObjectEditingQuery","gmfTreeManager","ngeoFeatureHelper","ngeoLayerHelper","ngeoToolActivateMgr"];ii.Controller.prototype.$onInit=function(){var r=this;this.gmfObjectEditingQuery_.getQueryableLayersInfo().then(this.handleGetQueryableLayersInfo_.bind(this));this.scope_.$watchCollection(function(){if(r.gmfTreeManager_.rootCtrl){return r.gmfTreeManager_.rootCtrl.children}},function(e){r.timeout_(function(){if(e){r.unregisterAllTreeCtrl_();r.gmfTreeManager_.rootCtrl.traverseDepthFirst(r.registerTreeCtrl_.bind(r))}})});var e=this.feature.getGeometry();this.state_=e?ii.Controller.State.UPDATE:ii.Controller.State.INSERT;this.scope_.$watchCollection(function(){return r.geometryChanges_},function(e,t){if(e.length){if(e.length===1){r.dirty=false}else{r.dirty=true}}});var t=[39,155,145];var n=[153,51,51];this.initializeStyles_(this.defaultStyles_,t);this.initializeStyles_(this.defaultStylesWoVertice_,t,false);this.initializeStyles_(this.dirtyStyles_,n);this.initializeStyles_(this.dirtyStylesWoVertice_,n,false);this.scope_.$watch(function(){return r.dirty},this.setFeatureStyle_.bind(this));this.features_.push(this.feature);this.featureHasGeom=!g.isEmpty(e);this.initializeInteractions_();this.registerInteractions_();this.toggle_(true);this.resetGeometryChanges_();this.scope_.$on("$destroy",this.handleDestroy_.bind(this))};ii.Controller.prototype.delete=function(){var e=this.gettextCatalog_;var t=e.getString("Do you really want to delete the feature?");if(confirm(t)){this.dirty=false;this.pending=true;this.gmfEditFeature_.deleteFeature(this.layerNodeId,this.feature).then(this.handleDeleteFeature_.bind(this))}};ii.Controller.prototype.save=function(){this.pending=true;var e=this.feature.clone();e.setId(this.feature.getId());var t=e.getGeometry();if(t){g.toXY(t)}if(this.state_===ii.Controller.State.INSERT){this.gmfEditFeature_.insertFeatures(this.layerNodeId,[e]).then(this.handleEditFeature_.bind(this))}else if(this.state_===ii.Controller.State.UPDATE){this.gmfEditFeature_.updateFeature(this.layerNodeId,e).then(this.handleEditFeature_.bind(this))}};ii.Controller.prototype.undo=function(){if(this.geometryChanges_.length<=1){return}this.skipGeometryChange_=true;this.geometryChanges_.pop();var e=ii.Controller.cloneGeometry_(this.geometryChanges_[this.geometryChanges_.length-1]);this.feature.setGeometry(e);this.skipGeometryChange_=false};ii.Controller.prototype.isStateInsert=function(){return this.state_===ii.Controller.State.INSERT};ii.Controller.prototype.handleDeleteFeature_=function(e){this.feature.setGeometry(null);this.resetGeometryChanges_();this.state_=ii.Controller.State.INSERT;this.pending=false;this.refreshWMSLayer_()};ii.Controller.prototype.handleEditFeature_=function(e){var t=(new A["a"]).readFeatures(e.data);if(t.length){this.feature.setId(t[0].getId())}this.resetGeometryChanges_();if(this.feature.getGeometry()){this.state_=ii.Controller.State.UPDATE}else{this.state_=ii.Controller.State.INSERT}this.pending=false;this.refreshWMSLayer_()};ii.Controller.prototype.initializeInteractions_=function(){this.interactions_.forEach(function(e){e.setActive(false);w["a"].interaction(e)})};ii.Controller.prototype.registerInteractions_=function(){var t=this;this.interactions_.forEach(function(e){t.map.addInteraction(e)})};ii.Controller.prototype.unregisterInteractions_=function(){var t=this;this.interactions_.forEach(function(e){t.map.removeInteraction(e)})};ii.Controller.prototype.toggle_=function(e){var t=this.listenerKeys_;var r=ii.Controller.NAMESPACE_+"-"+T["c"](this);var n=this.ngeoToolActivateMgr_;if(e){t.push(M["a"](this.feature,"change:"+this.feature.getGeometryName(),this.handleFeatureGeometryChange_,this));t.push(M["a"](this.modify_,"change:active",this.setFeatureStyle_,this));t.push(M["a"](this.modify_,"modifyend",this.handleModifyInteractionModifyEnd_,this));t.push(M["a"](window,"beforeunload",this.handleWindowBeforeUnload_,this));t.push(M["a"](this.sketchFeatures,"add",this.handleSketchFeaturesAdd_,this));n.registerTool(r,this.modifyToolActivate_,true);n.registerTool(r,this.toolsToolActivate_,false)}else{this.undoAllChanges_();t.forEach(M["e"]);t.length=0;n.unregisterTool(r,this.modifyToolActivate_);n.unregisterTool(r,this.toolsToolActivate_)}this.modify_.setActive(e)};ii.Controller.prototype.undoAllChanges_=function(){var e=ii.Controller.cloneGeometry_(this.geometryChanges_[0]);this.feature.setGeometry(e);this.resetGeometryChanges_();this.dirty=false;this.setFeatureStyle_()};ii.Controller.prototype.resetGeometryChanges_=function(){if(this.geometryChanges_.length>1){this.geometryChanges_.length=0}if(this.geometryChanges_.length===0){var e=this.feature.getGeometry();var t=ii.Controller.cloneGeometry_(e);this.geometryChanges_.push(t)}};ii.Controller.prototype.handleModifyInteractionModifyEnd_=function(e){var t=this.feature.getGeometry();if(t instanceof f["a"]){var r=this.jstsOL3Parser_.read(t);var n=r.buffer(0);t=x["a"].toMulti(this.jstsOL3Parser_.write(n));this.skipGeometryChange_=true;this.feature.setGeometry(t.clone());this.skipGeometryChange_=false}var i=ii.Controller.cloneGeometry_(t);y["a"].assert(i);this.geometryChanges_.push(i);this.scope_.$apply()};ii.Controller.prototype.initializeStyles_=function(e,t,r){var n=r!==false;var i=t.slice();i.push(.3);var a=new D["a"]({radius:8,stroke:new R["a"]({color:t,width:1}),fill:new P["a"]({color:i})});e["Point"]=new L["c"]({image:a});e["MultiPoint"]=new L["c"]({image:a});e["LineString"]=[new L["c"]({stroke:new R["a"]({color:t,width:3})})];if(n){e["LineString"].push(this.ngeoFeatureHelper_.getVertexStyle(true))}e["MultiLineString"]=[new L["c"]({stroke:new R["a"]({color:t,width:3})})];if(n){e["MultiLineString"].push(this.ngeoFeatureHelper_.getVertexStyle(true))}e["Polygon"]=[new L["c"]({stroke:new R["a"]({color:t,width:2}),fill:new P["a"]({color:i})})];if(n){e["Polygon"].push(this.ngeoFeatureHelper_.getVertexStyle(true))}e["MultiPolygon"]=[new L["c"]({stroke:new R["a"]({color:t,width:2}),fill:new P["a"]({color:i})})];if(n){e["MultiPolygon"].push(this.ngeoFeatureHelper_.getVertexStyle(true))}};ii.Controller.prototype.setFeatureStyle_=function(){var e=this.feature.getGeometry();if(e){var t=e.getType();var r=this.modify_.getActive();var n;if(this.dirty){if(r){n=this.dirtyStyles_[t]}else{n=this.dirtyStylesWoVertice_[t]}}else{if(r){n=this.defaultStyles_[t]}else{n=this.defaultStylesWoVertice_[t]}}this.feature.setStyle(n)}};ii.Controller.prototype.registerTreeCtrl_=function(e){var t=e.node;if(t.children&&t.children.length){return}if(t.id===this.layerNodeId){var r=i["a"].getLayer(e);y["a"].assert(r instanceof k["a"]||r instanceof j["a"]);this.editableWMSLayer_=r}};ii.Controller.prototype.unregisterAllTreeCtrl_=function(){this.editableWMSLayer_=null};ii.Controller.prototype.refreshWMSLayer_=function(){if(this.editableWMSLayer_){this.ngeoLayerHelper_.refreshWMSLayer(this.editableWMSLayer_)}};ii.Controller.prototype.handleWindowBeforeUnload_=function(e){var t=this.gettextCatalog_;if(this.dirty){var r=t.getString("There are unsaved changes.");(e||window.event).returnValue=r;return r}return undefined};ii.Controller.prototype.handleSketchFeaturesAdd_=function(e){var t=e.element;var r=t.getGeometry();var n=this.feature.getGeometry();if(n){var i=this.jstsOL3Parser_.read(n);var a=this.jstsOL3Parser_.read(r);var o;if(this.process===_["a"].ProcessType.ADD){o=i.union(a)}else{if(i.intersects(a)){o=i.difference(a)}}if(o){var s=this.jstsOL3Parser_.write(o);var l=x["a"].toMulti(s);this.feature.setGeometry(l.clone())}}else if(this.process===_["a"].ProcessType.ADD){this.feature.setGeometry(x["a"].toMulti(r.clone()))}this.sketchFeatures.clear()};ii.Controller.prototype.handleFeatureGeometryChange_=function(){var e=this;var t=this.feature.getGeometry();this.timeout_(function(){e.featureHasGeom=!g.isEmpty(t)});if(this.skipGeometryChange_){return}if(t){this.timeout_(function(){e.geometryChanges_.push(t.clone())})}};ii.Controller.prototype.handleGetQueryableLayersInfo_=function(e){this.queryableLayersInfo=e;if(this.queryableLayersInfo.length){this.selectedQueryableLayerInfo=this.queryableLayersInfo[0]}};ii.Controller.prototype.handleDestroy_=function(){this.features_.clear();this.toggle_(false);this.unregisterInteractions_()};ii.Controller.cloneGeometry_=function(e){var t=null;if(e){t=e.clone()}return t};ii.Controller.NAMESPACE_="oe";ii.Controller.State={INSERT:"insert",UPDATE:"update"};ii.controller("GmfObjecteditingController",ii.Controller);var oi=t["a"]=ii},function(e,t,r){"use strict";var f=r(1);var h=r(2);var L=r(9);var n=r(160);var i=r(293);var a=r(80);var o=r(273);var s=r(363);var l=r(20);var q=r(185);var b=function(t){return function e(){return t}};var z=Math.abs;var B=Math.atan2;var K=Math.cos;var I=Math.max;var X=Math.min;var Z=Math.sin;var Q=Math.sqrt;var J=1e-12;var ee=Math.PI;var te=ee/2;var re=2*ee;function ne(e){return e>1?0:e<-1?ee:Math.acos(e)}function ie(e){return e>=1?te:e<=-1?-te:Math.asin(e)}function u(e){return e.innerRadius}function c(e){return e.outerRadius}function d(e){return e.startAngle}function p(e){return e.endAngle}function v(e){return e&&e.padAngle}function ae(e,t,r,n,i,a,o,s){var l=r-e,u=n-t,c=o-i,f=s-a,h=(c*(t-a)-f*(e-i))/(f*l-c*u);return[e+h*l,t+h*u]}function oe(e,t,r,n,i,a,o){var s=e-r,l=t-n,u=(o?a:-a)/Q(s*s+l*l),c=u*l,f=-u*s,h=e+c,d=t+f,p=r+c,v=n+f,g=(h+p)/2,m=(d+v)/2,_=p-h,y=v-d,b=_*_+y*y,w=i-a,S=h*v-p*d,C=(y<0?-1:1)*Q(I(0,w*w*b-S*S)),O=(S*y-_*C)/b,x=(-S*_-y*C)/b,T=(S*y+_*C)/b,E=(-S*_+y*C)/b,M=O-g,A=x-m,k=T-g,j=E-m;if(M*M+A*A>k*k+j*j)O=T,x=E;return{cx:O,cy:x,x01:-c,y01:-f,x11:O*(i/w-1),y11:x*(i/w-1)}}var g=function(){var $=u,F=c,G=b(0),U=null,H=d,W=p,Y=v,V=null;function t(){var e,t,r=+$.apply(this,arguments),n=+F.apply(this,arguments),i=H.apply(this,arguments)-te,a=W.apply(this,arguments)-te,o=z(a-i),s=a>i;if(!V)V=e=Object(q["path"])();if(n<r)t=n,n=r,r=t;if(!(n>J))V.moveTo(0,0);else if(o>re-J){V.moveTo(n*K(i),n*Z(i));V.arc(0,0,n,i,a,!s);if(r>J){V.moveTo(r*K(a),r*Z(a));V.arc(0,0,r,a,i,s)}}else{var l=i,u=a,c=i,f=a,h=o,d=o,p=Y.apply(this,arguments)/2,v=p>J&&(U?+U.apply(this,arguments):Q(r*r+n*n)),g=X(z(n-r)/2,+G.apply(this,arguments)),m=g,_=g,y,b;if(v>J){var w=ie(v/r*Z(p)),S=ie(v/n*Z(p));if((h-=w*2)>J)w*=s?1:-1,c+=w,f-=w;else h=0,c=f=(i+a)/2;if((d-=S*2)>J)S*=s?1:-1,l+=S,u-=S;else d=0,l=u=(i+a)/2}var C=n*K(l),O=n*Z(l),x=r*K(f),T=r*Z(f);if(g>J){var E=n*K(u),M=n*Z(u),A=r*K(c),k=r*Z(c);if(o<ee){var j=h>J?ae(C,O,A,k,E,M,x,T):[x,T],I=C-j[0],D=O-j[1],P=E-j[0],R=M-j[1],L=1/Z(ne((I*P+D*R)/(Q(I*I+D*D)*Q(P*P+R*R)))/2),N=Q(j[0]*j[0]+j[1]*j[1]);m=X(g,(r-N)/(L-1));_=X(g,(n-N)/(L+1))}}if(!(d>J))V.moveTo(C,O);else if(_>J){y=oe(A,k,C,O,n,_,s);b=oe(E,M,x,T,n,_,s);V.moveTo(y.cx+y.x01,y.cy+y.y01);if(_<g)V.arc(y.cx,y.cy,_,B(y.y01,y.x01),B(b.y01,b.x01),!s);else{V.arc(y.cx,y.cy,_,B(y.y01,y.x01),B(y.y11,y.x11),!s);V.arc(0,0,n,B(y.cy+y.y11,y.cx+y.x11),B(b.cy+b.y11,b.cx+b.x11),!s);V.arc(b.cx,b.cy,_,B(b.y11,b.x11),B(b.y01,b.x01),!s)}}else V.moveTo(C,O),V.arc(0,0,n,l,u,!s);if(!(r>J)||!(h>J))V.lineTo(x,T);else if(m>J){y=oe(x,T,E,M,r,-m,s);b=oe(C,O,A,k,r,-m,s);V.lineTo(y.cx+y.x01,y.cy+y.y01);if(m<g)V.arc(y.cx,y.cy,m,B(y.y01,y.x01),B(b.y01,b.x01),!s);else{V.arc(y.cx,y.cy,m,B(y.y01,y.x01),B(y.y11,y.x11),!s);V.arc(0,0,r,B(y.cy+y.y11,y.cx+y.x11),B(b.cy+b.y11,b.cx+b.x11),s);V.arc(b.cx,b.cy,m,B(b.y11,b.x11),B(b.y01,b.x01),!s)}}else V.arc(0,0,r,f,c,s)}V.closePath();if(e)return V=null,e+""||null}t.centroid=function(){var e=(+$.apply(this,arguments)+ +F.apply(this,arguments))/2,t=(+H.apply(this,arguments)+ +W.apply(this,arguments))/2-ee/2;return[K(t)*e,Z(t)*e]};t.innerRadius=function(e){return arguments.length?($=typeof e==="function"?e:b(+e),t):$};t.outerRadius=function(e){return arguments.length?(F=typeof e==="function"?e:b(+e),t):F};t.cornerRadius=function(e){return arguments.length?(G=typeof e==="function"?e:b(+e),t):G};t.padRadius=function(e){return arguments.length?(U=e==null?null:typeof e==="function"?e:b(+e),t):U};t.startAngle=function(e){return arguments.length?(H=typeof e==="function"?e:b(+e),t):H};t.endAngle=function(e){return arguments.length?(W=typeof e==="function"?e:b(+e),t):W};t.padAngle=function(e){return arguments.length?(Y=typeof e==="function"?e:b(+e),t):Y};t.context=function(e){return arguments.length?(V=e==null?null:e,t):V};return t};function m(e){this._context=e}m.prototype={areaStart:function e(){this._line=0},areaEnd:function e(){this._line=NaN},lineStart:function e(){this._point=0},lineEnd:function e(){if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function e(t,r){t=+t,r=+r;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:this._context.lineTo(t,r);break}}};var _=function(e){return new m(e)};function y(e){return e[0]}function w(e){return e[1]}var S=function(){var o=y,s=w,l=b(true),u=null,c=_,f=null;function t(e){var t,r=e.length,n,i=false,a;if(u==null)f=c(a=Object(q["path"])());for(t=0;t<=r;++t){if(!(t<r&&l(n=e[t],t,e))===i){if(i=!i)f.lineStart();else f.lineEnd()}if(i)f.point(+o(n,t,e),+s(n,t,e))}if(a)return f=null,a+""||null}t.x=function(e){return arguments.length?(o=typeof e==="function"?e:b(+e),t):o};t.y=function(e){return arguments.length?(s=typeof e==="function"?e:b(+e),t):s};t.defined=function(e){return arguments.length?(l=typeof e==="function"?e:b(!!e),t):l};t.curve=function(e){return arguments.length?(c=e,u!=null&&(f=c(u)),t):c};t.context=function(e){return arguments.length?(e==null?u=f=null:f=c(u=e),t):u};return t};var C=function(){var c=y,f=null,h=b(0),d=w,p=b(true),v=null,g=_,m=null;function t(e){var t,r,n,i=e.length,a,o=false,s,l=new Array(i),u=new Array(i);if(v==null)m=g(s=Object(q["path"])());for(t=0;t<=i;++t){if(!(t<i&&p(a=e[t],t,e))===o){if(o=!o){r=t;m.areaStart();m.lineStart()}else{m.lineEnd();m.lineStart();for(n=t-1;n>=r;--n){m.point(l[n],u[n])}m.lineEnd();m.areaEnd()}}if(o){l[t]=+c(a,t,e),u[t]=+h(a,t,e);m.point(f?+f(a,t,e):l[t],d?+d(a,t,e):u[t])}}if(s)return m=null,s+""||null}function e(){return S().defined(p).curve(g).context(v)}t.x=function(e){return arguments.length?(c=typeof e==="function"?e:b(+e),f=null,t):c};t.x0=function(e){return arguments.length?(c=typeof e==="function"?e:b(+e),t):c};t.x1=function(e){return arguments.length?(f=e==null?null:typeof e==="function"?e:b(+e),t):f};t.y=function(e){return arguments.length?(h=typeof e==="function"?e:b(+e),d=null,t):h};t.y0=function(e){return arguments.length?(h=typeof e==="function"?e:b(+e),t):h};t.y1=function(e){return arguments.length?(d=e==null?null:typeof e==="function"?e:b(+e),t):d};t.lineX0=t.lineY0=function(){return e().x(c).y(h)};t.lineY1=function(){return e().x(c).y(d)};t.lineX1=function(){return e().x(f).y(h)};t.defined=function(e){return arguments.length?(p=typeof e==="function"?e:b(!!e),t):p};t.curve=function(e){return arguments.length?(g=e,v!=null&&(m=g(v)),t):g};t.context=function(e){return arguments.length?(e==null?v=m=null:m=g(v=e),t):v};return t};var O=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN};var x=function(e){return e};var T=function(){var p=x,v=O,g=null,m=b(0),_=b(re),y=b(0);function t(r){var e,t=r.length,n,i,a=0,o=new Array(t),s=new Array(t),l=+m.apply(this,arguments),u=Math.min(re,Math.max(-re,_.apply(this,arguments)-l)),c,f=Math.min(Math.abs(u)/t,y.apply(this,arguments)),h=f*(u<0?-1:1),d;for(e=0;e<t;++e){if((d=s[o[e]=e]=+p(r[e],e,r))>0){a+=d}}if(v!=null)o.sort(function(e,t){return v(s[e],s[t])});else if(g!=null)o.sort(function(e,t){return g(r[e],r[t])});for(e=0,i=a?(u-t*h)/a:0;e<t;++e,l=c){n=o[e],d=s[n],c=l+(d>0?d*i:0)+h,s[n]={data:r[n],index:e,value:d,startAngle:l,endAngle:c,padAngle:f}}return s}t.value=function(e){return arguments.length?(p=typeof e==="function"?e:b(+e),t):p};t.sortValues=function(e){return arguments.length?(v=e,g=null,t):v};t.sort=function(e){return arguments.length?(g=e,v=null,t):g};t.startAngle=function(e){return arguments.length?(m=typeof e==="function"?e:b(+e),t):m};t.endAngle=function(e){return arguments.length?(_=typeof e==="function"?e:b(+e),t):_};t.padAngle=function(e){return arguments.length?(y=typeof e==="function"?e:b(+e),t):y};return t};var E=A(_);function M(e){this._curve=e}M.prototype={areaStart:function e(){this._curve.areaStart()},areaEnd:function e(){this._curve.areaEnd()},lineStart:function e(){this._curve.lineStart()},lineEnd:function e(){this._curve.lineEnd()},point:function e(t,r){this._curve.point(r*Math.sin(t),r*-Math.cos(t))}};function A(t){function e(e){return new M(t(e))}e._curve=t;return e}function k(e){var t=e.curve;e.angle=e.x,delete e.x;e.radius=e.y,delete e.y;e.curve=function(e){return arguments.length?t(A(e)):t()._curve};return e}var j=function(){return k(S().curve(E))};var D=function(){var e=C().curve(E),t=e.curve,r=e.lineX0,n=e.lineX1,i=e.lineY0,a=e.lineY1;e.angle=e.x,delete e.x;e.startAngle=e.x0,delete e.x0;e.endAngle=e.x1,delete e.x1;e.radius=e.y,delete e.y;e.innerRadius=e.y0,delete e.y0;e.outerRadius=e.y1,delete e.y1;e.lineStartAngle=function(){return k(r())},delete e.lineX0;e.lineEndAngle=function(){return k(n())},delete e.lineX1;e.lineInnerRadius=function(){return k(i())},delete e.lineY0;e.lineOuterRadius=function(){return k(a())},delete e.lineY1;e.curve=function(e){return arguments.length?t(A(e)):t()._curve};return e};var P=function(e,t){return[(t=+t)*Math.cos(e-=Math.PI/2),t*Math.sin(e)]};var R=Array.prototype.slice;function N(e){return e.source}function $(e){return e.target}function F(i){var a=N,o=$,s=y,l=w,u=null;function t(){var e,t=R.call(arguments),r=a.apply(this,t),n=o.apply(this,t);if(!u)u=e=Object(q["path"])();i(u,+s.apply(this,(t[0]=r,t)),+l.apply(this,t),+s.apply(this,(t[0]=n,t)),+l.apply(this,t));if(e)return u=null,e+""||null}t.source=function(e){return arguments.length?(a=e,t):a};t.target=function(e){return arguments.length?(o=e,t):o};t.x=function(e){return arguments.length?(s=typeof e==="function"?e:b(+e),t):s};t.y=function(e){return arguments.length?(l=typeof e==="function"?e:b(+e),t):l};t.context=function(e){return arguments.length?(u=e==null?null:e,t):u};return t}function G(e,t,r,n,i){e.moveTo(t,r);e.bezierCurveTo(t=(t+n)/2,r,t,i,n,i)}function U(e,t,r,n,i){e.moveTo(t,r);e.bezierCurveTo(t,r=(r+i)/2,n,r,n,i)}function H(e,t,r,n,i){var a=P(t,r),o=P(t,r=(r+i)/2),s=P(n,r),l=P(n,i);e.moveTo(a[0],a[1]);e.bezierCurveTo(o[0],o[1],s[0],s[1],l[0],l[1])}function W(){return F(G)}function Y(){return F(U)}function V(){var e=F(H);e.angle=e.x,delete e.x;e.radius=e.y,delete e.y;return e}var se={draw:function e(t,r){var n=Math.sqrt(r/ee);t.moveTo(n,0);t.arc(0,0,n,0,re)}};var le={draw:function e(t,r){var n=Math.sqrt(r/5)/2;t.moveTo(-3*n,-n);t.lineTo(-n,-n);t.lineTo(-n,-3*n);t.lineTo(n,-3*n);t.lineTo(n,-n);t.lineTo(3*n,-n);t.lineTo(3*n,n);t.lineTo(n,n);t.lineTo(n,3*n);t.lineTo(-n,3*n);t.lineTo(-n,n);t.lineTo(-3*n,n);t.closePath()}};var ue=Math.sqrt(1/3),ce=ue*2;var fe={draw:function e(t,r){var n=Math.sqrt(r/ce),i=n*ue;t.moveTo(0,-n);t.lineTo(i,0);t.lineTo(0,n);t.lineTo(-i,0);t.closePath()}};var he=.8908130915292852,de=Math.sin(ee/10)/Math.sin(7*ee/10),pe=Math.sin(re/10)*de,ve=-Math.cos(re/10)*de;var ge={draw:function e(t,r){var n=Math.sqrt(r*he),i=pe*n,a=ve*n;t.moveTo(0,-n);t.lineTo(i,a);for(var o=1;o<5;++o){var s=re*o/5,l=Math.cos(s),u=Math.sin(s);t.lineTo(u*n,-l*n);t.lineTo(l*i-u*a,u*i+l*a)}t.closePath()}};var me={draw:function e(t,r){var n=Math.sqrt(r),i=-n/2;t.rect(i,i,n,n)}};var _e=Math.sqrt(3);var ye={draw:function e(t,r){var n=-Math.sqrt(r/(_e*3));t.moveTo(0,n*2);t.lineTo(-_e*n,-n);t.lineTo(_e*n,-n);t.closePath()}};var be=-.5,we=Math.sqrt(3)/2,Se=1/Math.sqrt(12),Ce=(Se/2+1)*3;var Oe={draw:function e(t,r){var n=Math.sqrt(r/Ce),i=n/2,a=n*Se,o=i,s=n*Se+n,l=-o,u=s;t.moveTo(i,a);t.lineTo(o,s);t.lineTo(l,u);t.lineTo(be*i-we*a,we*i+be*a);t.lineTo(be*o-we*s,we*o+be*s);t.lineTo(be*l-we*u,we*l+be*u);t.lineTo(be*i+we*a,be*a-we*i);t.lineTo(be*o+we*s,be*s-we*o);t.lineTo(be*l+we*u,be*u-we*l);t.closePath()}};var xe=[se,le,fe,me,ge,ye,Oe];var Te=function(){var t=b(se),r=b(64),n=null;function i(){var e;if(!n)n=e=Object(q["path"])();t.apply(this,arguments).draw(n,+r.apply(this,arguments));if(e)return n=null,e+""||null}i.type=function(e){return arguments.length?(t=typeof e==="function"?e:b(e),i):t};i.size=function(e){return arguments.length?(r=typeof e==="function"?e:b(+e),i):r};i.context=function(e){return arguments.length?(n=e==null?null:e,i):n};return i};var Ee=function(){};function Me(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Ae(e){this._context=e}Ae.prototype={areaStart:function e(){this._line=0},areaEnd:function e(){this._line=NaN},lineStart:function e(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function e(){switch(this._point){case 3:Me(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function e(t,r){t=+t,r=+r;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3;this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Me(this,t,r);break}this._x0=this._x1,this._x1=t;this._y0=this._y1,this._y1=r}};var ke=function(e){return new Ae(e)};function je(e){this._context=e}je.prototype={areaStart:Ee,areaEnd:Ee,lineStart:function e(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN;this._point=0},lineEnd:function e(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2);this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3);this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3);this._context.closePath();break}case 3:{this.point(this._x2,this._y2);this.point(this._x3,this._y3);this.point(this._x4,this._y4);break}}},point:function e(t,r){t=+t,r=+r;switch(this._point){case 0:this._point=1;this._x2=t,this._y2=r;break;case 1:this._point=2;this._x3=t,this._y3=r;break;case 2:this._point=3;this._x4=t,this._y4=r;this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+r)/6);break;default:Me(this,t,r);break}this._x0=this._x1,this._x1=t;this._y0=this._y1,this._y1=r}};var Ie=function(e){return new je(e)};function De(e){this._context=e}De.prototype={areaStart:function e(){this._line=0},areaEnd:function e(){this._line=NaN},lineStart:function e(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function e(){if(this._line||this._line!==0&&this._point===3)this._context.closePath();this._line=1-this._line},point:function e(t,r){t=+t,r=+r;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+r)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Me(this,t,r);break}this._x0=this._x1,this._x1=t;this._y0=this._y1,this._y1=r}};var Pe=function(e){return new De(e)};function Re(e,t){this._basis=new Ae(e);this._beta=t}Re.prototype={lineStart:function e(){this._x=[];this._y=[];this._basis.lineStart()},lineEnd:function e(){var t=this._x,r=this._y,n=t.length-1;if(n>0){var i=t[0],a=r[0],o=t[n]-i,s=r[n]-a,l=-1,u;while(++l<=n){u=l/n;this._basis.point(this._beta*t[l]+(1-this._beta)*(i+u*o),this._beta*r[l]+(1-this._beta)*(a+u*s))}}this._x=this._y=null;this._basis.lineEnd()},point:function e(t,r){this._x.push(+t);this._y.push(+r)}};var Le=function t(r){function e(e){return r===1?new Ae(e):new Re(e,r)}e.beta=function(e){return t(+e)};return e}(.85);function Ne(e,t,r){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-r),e._x2,e._y2)}function $e(e,t){this._context=e;this._k=(1-t)/6}$e.prototype={areaStart:function e(){this._line=0},areaEnd:function e(){this._line=NaN},lineStart:function e(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function e(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ne(this,this._x1,this._y1);break}if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function e(t,r){t=+t,r=+r;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;this._x1=t,this._y1=r;break;case 2:this._point=3;default:Ne(this,t,r);break}this._x0=this._x1,this._x1=this._x2,this._x2=t;this._y0=this._y1,this._y1=this._y2,this._y2=r}};var Fe=function t(r){function e(e){return new $e(e,r)}e.tension=function(e){return t(+e)};return e}(0);function Ge(e,t){this._context=e;this._k=(1-t)/6}Ge.prototype={areaStart:Ee,areaEnd:Ee,lineStart:function e(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._point=0},lineEnd:function e(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3);this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3);this._context.closePath();break}case 3:{this.point(this._x3,this._y3);this.point(this._x4,this._y4);this.point(this._x5,this._y5);break}}},point:function e(t,r){t=+t,r=+r;switch(this._point){case 0:this._point=1;this._x3=t,this._y3=r;break;case 1:this._point=2;this._context.moveTo(this._x4=t,this._y4=r);break;case 2:this._point=3;this._x5=t,this._y5=r;break;default:Ne(this,t,r);break}this._x0=this._x1,this._x1=this._x2,this._x2=t;this._y0=this._y1,this._y1=this._y2,this._y2=r}};var Ue=function t(r){function e(e){return new Ge(e,r)}e.tension=function(e){return t(+e)};return e}(0);function He(e,t){this._context=e;this._k=(1-t)/6}He.prototype={areaStart:function e(){this._line=0},areaEnd:function e(){this._line=NaN},lineStart:function e(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function e(){if(this._line||this._line!==0&&this._point===3)this._context.closePath();this._line=1-this._line},point:function e(t,r){t=+t,r=+r;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ne(this,t,r);break}this._x0=this._x1,this._x1=this._x2,this._x2=t;this._y0=this._y1,this._y1=this._y2,this._y2=r}};var We=function t(r){function e(e){return new He(e,r)}e.tension=function(e){return t(+e)};return e}(0);function Ye(e,t,r){var n=e._x1,i=e._y1,a=e._x2,o=e._y2;if(e._l01_a>J){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);n=(n*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/l;i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>J){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*u+e._x1*e._l23_2a-t*e._l12_2a)/c;o=(o*u+e._y1*e._l23_2a-r*e._l12_2a)/c}e._context.bezierCurveTo(n,i,a,o,e._x2,e._y2)}function Ve(e,t){this._context=e;this._alpha=t}Ve.prototype={areaStart:function e(){this._line=0},areaEnd:function e(){this._line=NaN},lineStart:function e(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function e(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function e(t,r){t=+t,r=+r;if(this._point){var n=this._x2-t,i=this._y2-r;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3;default:Ye(this,t,r);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a;this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a;this._x0=this._x1,this._x1=this._x2,this._x2=t;this._y0=this._y1,this._y1=this._y2,this._y2=r}};var qe=function t(r){function e(e){return r?new Ve(e,r):new $e(e,0)}e.alpha=function(e){return t(+e)};return e}(.5);function ze(e,t){this._context=e;this._alpha=t}ze.prototype={areaStart:Ee,areaEnd:Ee,lineStart:function e(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function e(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3);this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3);this._context.closePath();break}case 3:{this.point(this._x3,this._y3);this.point(this._x4,this._y4);this.point(this._x5,this._y5);break}}},point:function e(t,r){t=+t,r=+r;if(this._point){var n=this._x2-t,i=this._y2-r;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;this._x3=t,this._y3=r;break;case 1:this._point=2;this._context.moveTo(this._x4=t,this._y4=r);break;case 2:this._point=3;this._x5=t,this._y5=r;break;default:Ye(this,t,r);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a;this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a;this._x0=this._x1,this._x1=this._x2,this._x2=t;this._y0=this._y1,this._y1=this._y2,this._y2=r}};var Be=function t(r){function e(e){return r?new ze(e,r):new Ge(e,0)}e.alpha=function(e){return t(+e)};return e}(.5);function Ke(e,t){this._context=e;this._alpha=t}Ke.prototype={areaStart:function e(){this._line=0},areaEnd:function e(){this._line=NaN},lineStart:function e(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function e(){if(this._line||this._line!==0&&this._point===3)this._context.closePath();this._line=1-this._line},point:function e(t,r){t=+t,r=+r;if(this._point){var n=this._x2-t,i=this._y2-r;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ye(this,t,r);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a;this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a;this._x0=this._x1,this._x1=this._x2,this._x2=t;this._y0=this._y1,this._y1=this._y2,this._y2=r}};var Xe=function t(r){function e(e){return r?new Ke(e,r):new He(e,0)}e.alpha=function(e){return t(+e)};return e}(.5);function Ze(e){this._context=e}Ze.prototype={areaStart:Ee,areaEnd:Ee,lineStart:function e(){this._point=0},lineEnd:function e(){if(this._point)this._context.closePath()},point:function e(t,r){t=+t,r=+r;if(this._point)this._context.lineTo(t,r);else this._point=1,this._context.moveTo(t,r)}};var Qe=function(e){return new Ze(e)};function Je(e){return e<0?-1:1}function et(e,t,r){var n=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(n||i<0&&-0),o=(r-e._y1)/(i||n<0&&-0),s=(a*i+o*n)/(n+i);return(Je(a)+Je(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function tt(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function rt(e,t,r){var n=e._x0,i=e._y0,a=e._x1,o=e._y1,s=(a-n)/3;e._context.bezierCurveTo(n+s,i+s*t,a-s,o-s*r,a,o)}function nt(e){this._context=e}nt.prototype={areaStart:function e(){this._line=0},areaEnd:function e(){this._line=NaN},lineStart:function e(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN;this._point=0},lineEnd:function e(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:rt(this,this._t0,tt(this,this._t0));break}if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function e(t,r){var n=NaN;t=+t,r=+r;if(t===this._x1&&r===this._y1)return;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3;rt(this,tt(this,n=et(this,t,r)),n);break;default:rt(this,this._t0,n=et(this,t,r));break}this._x0=this._x1,this._x1=t;this._y0=this._y1,this._y1=r;this._t0=n}};function it(e){this._context=new at(e)}(it.prototype=Object.create(nt.prototype)).point=function(e,t){nt.prototype.point.call(this,t,e)};function at(e){this._context=e}at.prototype={moveTo:function e(t,r){this._context.moveTo(r,t)},closePath:function e(){this._context.closePath()},lineTo:function e(t,r){this._context.lineTo(r,t)},bezierCurveTo:function e(t,r,n,i,a,o){this._context.bezierCurveTo(r,t,i,n,o,a)}};function ot(e){return new nt(e)}function st(e){return new it(e)}function lt(e){this._context=e}lt.prototype={areaStart:function e(){this._line=0},areaEnd:function e(){this._line=NaN},lineStart:function e(){this._x=[];this._y=[]},lineEnd:function e(){var t=this._x,r=this._y,n=t.length;if(n){this._line?this._context.lineTo(t[0],r[0]):this._context.moveTo(t[0],r[0]);if(n===2){this._context.lineTo(t[1],r[1])}else{var i=ut(t),a=ut(r);for(var o=0,s=1;s<n;++o,++s){this._context.bezierCurveTo(i[0][o],a[0][o],i[1][o],a[1][o],t[s],r[s])}}}if(this._line||this._line!==0&&n===1)this._context.closePath();this._line=1-this._line;this._x=this._y=null},point:function e(t,r){this._x.push(+t);this._y.push(+r)}};function ut(e){var t,r=e.length-1,n,i=new Array(r),a=new Array(r),o=new Array(r);i[0]=0,a[0]=2,o[0]=e[0]+2*e[1];for(t=1;t<r-1;++t){i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1]}i[r-1]=2,a[r-1]=7,o[r-1]=8*e[r-1]+e[r];for(t=1;t<r;++t){n=i[t]/a[t-1],a[t]-=n,o[t]-=n*o[t-1]}i[r-1]=o[r-1]/a[r-1];for(t=r-2;t>=0;--t){i[t]=(o[t]-i[t+1])/a[t]}a[r-1]=(e[r]+i[r-1])/2;for(t=0;t<r-1;++t){a[t]=2*e[t+1]-i[t+1]}return[i,a]}var ct=function(e){return new lt(e)};function ft(e,t){this._context=e;this._t=t}ft.prototype={areaStart:function e(){this._line=0},areaEnd:function e(){this._line=NaN},lineStart:function e(){this._x=this._y=NaN;this._point=0},lineEnd:function e(){if(0<this._t&&this._t<1&&this._point===2)this._context.lineTo(this._x,this._y);if(this._line||this._line!==0&&this._point===1)this._context.closePath();if(this._line>=0)this._t=1-this._t,this._line=1-this._line},point:function e(t,r){t=+t,r=+r;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:{if(this._t<=0){this._context.lineTo(this._x,r);this._context.lineTo(t,r)}else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y);this._context.lineTo(n,r)}break}}this._x=t,this._y=r}};var ht=function(e){return new ft(e,.5)};function dt(e){return new ft(e,0)}function pt(e){return new ft(e,1)}var vt=function(e,t){if(!((o=e.length)>1))return;for(var r=1,n,i,a=e[t[0]],o,s=a.length;r<o;++r){i=a,a=e[t[r]];for(n=0;n<s;++n){a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}}};var gt=function(e){var t=e.length,r=new Array(t);while(--t>=0){r[t]=t}return r};function mt(e,t){return e[t]}var _t=function(){var f=b([]),h=gt,d=vt,p=mt;function t(e){var t=f.apply(this,arguments),r,n=e.length,i=t.length,a=new Array(i),o;for(r=0;r<i;++r){for(var s=t[r],l=a[r]=new Array(n),u=0,c;u<n;++u){l[u]=c=[0,+p(e[u],s,u,e)];c.data=e[u]}l.key=s}for(r=0,o=h(a);r<i;++r){a[o[r]].index=r}d(a,o);return a}t.keys=function(e){return arguments.length?(f=typeof e==="function"?e:b(R.call(e)),t):f};t.value=function(e){return arguments.length?(p=typeof e==="function"?e:b(+e),t):p};t.order=function(e){return arguments.length?(h=e==null?gt:typeof e==="function"?e:b(R.call(e)),t):h};t.offset=function(e){return arguments.length?(d=e==null?vt:e,t):d};return t};var yt=function(e,t){if(!((n=e.length)>0))return;for(var r,n,i=0,a=e[0].length,o;i<a;++i){for(o=r=0;r<n;++r){o+=e[r][i][1]||0}if(o)for(r=0;r<n;++r){e[r][i][1]/=o}}vt(e,t)};var bt=function(e,t){if(!((l=e.length)>1))return;for(var r,n=0,i,a,o,s,l,u=e[t[0]].length;n<u;++n){for(o=s=0,r=0;r<l;++r){if((a=(i=e[t[r]][n])[1]-i[0])>=0){i[0]=o,i[1]=o+=a}else if(a<0){i[1]=s,i[0]=s+=a}else{i[0]=o}}}};var wt=function(e,t){if(!((i=e.length)>0))return;for(var r=0,n=e[t[0]],i,a=n.length;r<a;++r){for(var o=0,s=0;o<i;++o){s+=e[o][r][1]||0}n[r][1]+=n[r][0]=-s/2}vt(e,t)};var St=function(e,t){if(!((o=e.length)>0)||!((a=(i=e[t[0]]).length)>0))return;for(var r=0,n=1,i,a,o;n<a;++n){for(var s=0,l=0,u=0;s<o;++s){var c=e[t[s]],f=c[n][1]||0,h=c[n-1][1]||0,d=(f-h)/2;for(var p=0;p<s;++p){var v=e[t[p]],g=v[n][1]||0,m=v[n-1][1]||0;d+=g-m}l+=f,u+=d*f}i[n-1][1]+=i[n-1][0]=r;if(l)r-=u/l}i[n-1][1]+=i[n-1][0]=r;vt(e,t)};var Ct=function(e){var r=e.map(Ot);return gt(e).sort(function(e,t){return r[e]-r[t]})};function Ot(e){var t=0,r=-1,n=e.length,i;while(++r<n){if(i=+e[r][1])t+=i}return t}var xt=function(e){return Ct(e).reverse()};var Tt=function(e){var t=e.length,r,n,i=e.map(Ot),a=gt(e).sort(function(e,t){return i[t]-i[e]}),o=0,s=0,l=[],u=[];for(r=0;r<t;++r){n=a[r];if(o<s){o+=i[n];l.push(n)}else{s+=i[n];u.push(n)}}return u.reverse().concat(l)};var Et=function(e){return gt(e).reverse()};var Mt={bisector:a["c"],extent:a["d"],axisBottom:o["a"],axisLeft:o["b"],scaleLinear:s["a"],mouse:l["mouse"],select:l["select"],selectAll:l["selectAll"],area:C,line:S};var At=function e(t){var v=t.light!==undefined?t.light:false;var g=v?{top:0,right:0,bottom:0,left:0}:{top:10,right:20,bottom:30,left:40};var d=t.hoverCallback!==undefined?t.hoverCallback:function(){};var r=t.outCallback!==undefined?t.outCallback:function(){};var m=t.distanceExtractor;var _=t.linesConfiguration;var y=Object.keys(_).length;var p=Mt.bisector(function(e){return m(e)}).left;var a=t.poiExtractor;var b=t.styleDefs;var l=t.poiLabelAngle!==undefined?t.poiLabelAngle:-60;var n=t.i18n||{};var w=n.xAxis||"Distance";var S=n.yAxis||"Elevation";var C={xhover:function e(t,r){return parseFloat(t.toPrecision(3))+" "+r},yhover:function e(t,r){return t!==null?Math.round(t)+" m":""},xtick:function e(t,r){return t},ytick:function e(t,r){return t}};if(t.formatter!==undefined){L["a"](C,t.formatter)}var O=t.lightXAxis!==undefined?t.lightXAxis:false;var x;var T;var E;var M=t.scaleModifier;var A;var k;var j;var I;var D;var P;var i=function p(e){e.each(function(n){Mt.select(this).selectAll("svg").remove();if(n===undefined){return}j=Math.max(this.clientWidth-g.right-g.left,0);T=Mt.scaleLinear().range([0,j]);k=Math.max(this.clientHeight-g.top-g.bottom,0);E=Mt.scaleLinear().range([k,0]);var e=Mt.axisBottom(T);var t=Mt.axisLeft(E);var r;if(y===1){r=Mt.area().x(function(e){return T(m(e))}).y0(k).y1(function(e){var t=Object.keys(_)[0];return E(_[t].zExtractor(e))})}x=Mt.select(this).selectAll("svg").data([n]);var i=x.enter().append("svg");x=Mt.select(this).selectAll("svg").data([n]);if(b!==undefined){i.append("defs").append("style").attr("type","text/css").text(b)}var a=i.append("g");R();a.style("font","11px Arial");if(y===1){a.append("path").attr("class","area").style("fill","rgba(222, 222, 222, 0.5)")}a.insert("g",":first-child").attr("class","grid-y");if(!v){a.append("g").attr("class","x axis").attr("transform","translate(0,"+k+")");a.append("text").attr("class","x label").attr("text-anchor","end").attr("x",j-4).attr("y",k-4);a.append("g").attr("class","y axis");a.append("text").attr("class","y label").attr("text-anchor","end").attr("y",6).attr("dy",".75em").attr("transform","rotate(-90)").style("fill","grey").text(S+" [m]");a.append("g").attr("class","metas").attr("transform","translate("+(j+3)+", 0)")}a.append("g").attr("class","pois");var o=a.append("g").attr("class","x grid-hover");o.append("svg:line").attr("stroke-dasharray","5,5");o.append("text");a.append("rect").attr("class","overlay").attr("width",j).attr("height",k).style("fill","none").style("pointer-events","all");x.attr("width",j+g.left+g.right).attr("height",k+g.top+g.bottom);A=x.select("g").attr("transform","translate("+g.left+","+g.top+")");P=Mt.extent(n,function(e){return m(e)});T.domain(P);var s=function(){var e=[];var t,r;for(r in _){t=Mt.extent(n,function(e){return _[r].zExtractor(e)});e=e.concat(t)}return[Math.min.apply(null,e),Math.max.apply(null,e)]}();E.domain(s);if(M!==undefined){M(T,E,j,k)}else{var l=(s[1]-s[0])*.1;E.domain([s[0]-l,s[1]+l])}if(y===1){A.select(".area").transition().attr("d",r)}var u,c,f;for(c in _){a.append("path").attr("class","line "+c).style("stroke",_[c].color||"#F00").style("fill","none");f=a.append("g").attr("class","y grid-hover "+c);f.append("svg:line").attr("stroke-dasharray","5,5");f.append("text");u=Mt.line().x(function(e){return T(m(e))}).y(function(e){return E(_[c].zExtractor(e))}).defined(function(e){return _[c].zExtractor(e)!==null});A.select(".line."+c).transition().attr("d",u)}if(P[1]>2e3){I=1e3;D="km"}else{I=1;D="m"}if(!v){e.tickFormat(function(e){return C.xtick(e/I,D)});if(O){e.tickValues([0,T.domain()[1]])}t.tickFormat(function(e){return C.ytick(e,"m")});A.select(".x.axis").transition().call(e);A.select(".x.label").text(w+" ["+D+"]").style("fill","grey").style("shape-rendering","crispEdges");if(k/15<10){t.ticks(k/15)}A.select(".y.axis").transition().call(t)}A.select(".grid-y").transition().call(t.tickSize(-j,0).tickFormat("")).selectAll(".tick line").style("stroke","#ccc").style("opacity",.7);A.selectAll(".axis").selectAll("path, line").style("fill","none").style("stroke","#000").style("shape-rendering","crispEdges");A.select(".grid-y").select("path").style("stroke","none");A.selectAll(".grid-hover line").style("stroke","#222").style("opacity",.8);A.select(".overlay").on("mouseout",d).on("mousemove",h);function h(){var e=Mt.mouse(this)[0];var t=T.invert(e);p.highlight(t)}function d(){p.clearHighlight()}})};i.clearHighlight=function(){A.selectAll(".grid-hover").style("display","none");r.call(null)};i.highlight=function(e){var t=x.datum();var r=p(t,e);if(r>=t.length){return}var n=t[r];var i=m(n);var a;var o=[];var s={};var l;for(l in _){a=_[l].zExtractor(n);o.push(a);s[l]=a;A.select(".y.grid-hover."+l).style("display","inline").select("line").attr("x1",T(0)).attr("y1",E(a)).attr("x2",j).attr("y2",E(a))}A.select(".x.grid-hover").style("display","inline").select("line").attr("x1",T(i)).attr("y1",k).attr("x2",T(i)).attr("y2",E(Math.max.apply(null,o)));var u=i>P[1]/2;var c=T(i);c+=u?-10:10;A.select(".x.grid-hover text").text(C.xhover(i/I,D)).style("text-anchor",u?"end":"start").attr("transform","translate("+c+","+(k-10)+")");var f="m";if(y===1){var h=o[0]===null?"no value":C.yhover(o[0],"m");A.select(".y.grid-hover text").text(h).style("text-anchor",u?"end":"start").attr("transform","translate("+c+","+(E(o[0])-10)+")")}d.call(null,n,i/I,D,s,f)};i.showPois=function(e){e=e!==undefined?e:[];f["a"].assert(e.length===0||a!==undefined);var o=a;var t=x.select("g");var s=x.datum();var r=t.select(".pois");var n=r.selectAll(".poi").data(e,function(e){var t=p(s,Math.round(o.dist(e)*10)/10,1);var r=s[t];if(r){var n;var i=[];for(n in _){i.push(_[n].zExtractor(r))}var a=Math.max.apply(null,i);o.z(e,a)}return o.id(e)});var i=n.enter().append("g").attr("class","poi");i.append("text").attr("x",v?0:9).attr("dy",".35em").attr("text-anchor",v?"middle":"start");i.append("line").style("shape-rendering","crispEdges");i.style("opacity",0).transition().duration(1e3).delay(100).style("opacity",1);i.selectAll("text").attr("transform",function(e){if(v){return["translate("+T(o.dist(e))+","+(E(o.z(e))-10)+")"]}else{return["translate("+T(o.dist(e))+","+(E(o.z(e))-20)+") rotate("+l+")"]}}).text(function(e){return o.sort(e)+(v?"":" - "+o.title(e))});i.selectAll("line").style("stroke","grey").attr("x1",function(e){return T(o.dist(e))}).attr("y1",function(e){return E(E.domain()[0])}).attr("x2",function(e){return T(o.dist(e))}).attr("y2",function(e){return E(o.z(e))});i.exit().remove()};function R(){i.showPois([])}return i};var kt=At;var jt={select:l["select"]};var It=angular.module("ngeoProfile",[n["a"].name]);It.directive_=function(c){return{restrict:"A",link:function e(i,t,r){var n=r["ngeoProfileOptions"];f["a"].assert(n!==undefined);var a=jt.select(t[0]);var o,s,l;i.$watchCollection(n,function(e){var t=L["a"]({},e);if(t!==undefined){if(t.hoverCallback!==undefined){var r=t.hoverCallback;t.hoverCallback=function(){r.apply(void 0,arguments);i.$applyAsync()}}if(t.outCallback!==undefined){var n=t.outCallback;t.outCallback=function(){n();i.$applyAsync()}}o=kt(t);u()}});i.$watch(r["ngeoProfile"],function(e,t){s=e;u()});i.$watch(r["ngeoProfilePois"],function(e,t){l=e;u()});i.$watch(r["ngeoProfileHighlight"],function(e,t){if(e===undefined){return}if(e>0){o.highlight(e)}else{o.clearHighlight()}});h["a"](window,"resize",c(u,50,true));function u(){if(o!==undefined){a.datum(s).call(o);if(s!==undefined){o.showPois(l)}}}}}};It.directive_.$inject=["ngeoDebounce"];It.directive("ngeoProfile",It.directive_);var Dt=t["a"]=It},function(e,t,r){"use strict";var O=r(80);var l=r(384);var n=Array.prototype;var x=n.map;var f=n.slice;var u={name:"implicit"};function p(n){var a=Object(l["map"])(),o=[],i=u;n=n==null?[]:f.call(n);function s(e){var t=e+"",r=a.get(t);if(!r){if(i!==u)return i;a.set(t,r=o.push(e))}return n[(r-1)%n.length]}s.domain=function(e){if(!arguments.length)return o.slice();o=[],a=Object(l["map"])();var t=-1,r=e.length,n,i;while(++t<r){if(!a.has(i=(n=e[t])+""))a.set(i,o.push(n))}return s};s.range=function(e){return arguments.length?(n=f.call(e),s):n.slice()};s.unknown=function(e){return arguments.length?(i=e,s):i};s.copy=function(){return p().domain(o).range(n).unknown(i)};return s}function i(){var e=p().unknown(undefined),a=e.domain,o=e.range,s=[0,1],l,u,c=false,f=0,h=0,d=.5;delete e.unknown;function t(){var e=a().length,t=s[1]<s[0],r=s[t-0],n=s[1-t];l=(n-r)/Math.max(1,e-f+h*2);if(c)l=Math.floor(l);r+=(n-r-l*(e-f))*d;u=l*(1-f);if(c)r=Math.round(r),u=Math.round(u);var i=Object(O["f"])(e).map(function(e){return r+l*e});return o(t?i.reverse():i)}e.domain=function(e){return arguments.length?(a(e),t()):a()};e.range=function(e){return arguments.length?(s=[+e[0],+e[1]],t()):s.slice()};e.rangeRound=function(e){return s=[+e[0],+e[1]],c=true,t()};e.bandwidth=function(){return u};e.step=function(){return l};e.round=function(e){return arguments.length?(c=!!e,t()):c};e.padding=function(e){return arguments.length?(f=h=Math.max(0,Math.min(1,e)),t()):f};e.paddingInner=function(e){return arguments.length?(f=Math.max(0,Math.min(1,e)),t()):f};e.paddingOuter=function(e){return arguments.length?(h=Math.max(0,Math.min(1,e)),t()):h};e.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),t()):d};e.copy=function(){return i().domain(a()).range(s).round(c).paddingInner(f).paddingOuter(h).align(d)};return t()}function a(e){var t=e.copy;e.padding=e.paddingOuter;delete e.paddingInner;delete e.paddingOuter;e.copy=function(){return a(t())};return e}function o(){return a(i().paddingInner(1))}var T=r(124);var s=function(e){return function(){return e}};var h=function(e){return+e};var d=[0,1];function E(t,r){return(r-=t=+t)?function(e){return(e-t)/r}:s(r)}function v(e){return function(t,r){var n=e(t=+t,r=+r);return function(e){return e<=t?0:e>=r?1:n(e)}}}function g(e){return function(t,r){var n=e(t=+t,r=+r);return function(e){return e<=0?t:e>=1?r:n(e)}}}function m(e,t,r,n){var i=e[0],a=e[1],o=t[0],s=t[1];if(a<i)i=r(a,i),o=n(s,o);else i=r(i,a),o=n(o,s);return function(e){return o(i(e))}}function _(r,e,t,n){var i=Math.min(r.length,e.length)-1,a=new Array(i),o=new Array(i),s=-1;if(r[i]<r[0]){r=r.slice().reverse();e=e.slice().reverse()}while(++s<i){a[s]=t(r[s],r[s+1]);o[s]=n(e[s],e[s+1])}return function(e){var t=Object(O["b"])(r,e,1,i)-1;return o[t](a[t](e))}}function M(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function A(t,r){var n=d,i=d,a=T["interpolate"],o=false,s,l,u;function c(){s=Math.min(n.length,i.length)>2?_:m;l=u=null;return e}function e(e){return(l||(l=s(n,i,o?v(t):t,a)))(+e)}e.invert=function(e){return(u||(u=s(i,n,E,o?g(r):r)))(+e)};e.domain=function(e){return arguments.length?(n=x.call(e,h),c()):n.slice()};e.range=function(e){return arguments.length?(i=f.call(e),c()):i.slice()};e.rangeRound=function(e){return i=f.call(e),a=T["interpolateRound"],c()};e.clamp=function(e){return arguments.length?(o=!!e,c()):o};e.interpolate=function(e){return arguments.length?(a=e,c()):a};return c()}var c=r(204);var y=function(e,t,r){var n=e[0],i=e[e.length-1],a=Object(O["h"])(n,i,t==null?10:t),o;r=Object(c["formatSpecifier"])(r==null?",f":r);switch(r.type){case"s":{var s=Math.max(Math.abs(n),Math.abs(i));if(r.precision==null&&!isNaN(o=Object(c["precisionPrefix"])(a,s)))r.precision=o;return Object(c["formatPrefix"])(r,s)}case"":case"e":case"g":case"p":case"r":{if(r.precision==null&&!isNaN(o=Object(c["precisionRound"])(a,Math.max(Math.abs(n),Math.abs(i)))))r.precision=o-(r.type==="e");break}case"f":case"%":{if(r.precision==null&&!isNaN(o=Object(c["precisionFixed"])(a)))r.precision=o-(r.type==="%")*2;break}}return Object(c["format"])(r)};function b(s){var l=s.domain;s.ticks=function(e){var t=l();return Object(O["i"])(t[0],t[t.length-1],e==null?10:e)};s.tickFormat=function(e,t){return y(l(),e,t)};s.nice=function(e){if(e==null)e=10;var t=l(),r=0,n=t.length-1,i=t[r],a=t[n],o;if(a<i){o=i,i=a,a=o;o=r,r=n,n=o}o=Object(O["g"])(i,a,e);if(o>0){i=Math.floor(i/o)*o;a=Math.ceil(a/o)*o;o=Object(O["g"])(i,a,e)}else if(o<0){i=Math.ceil(i*o)/o;a=Math.floor(a*o)/o;o=Object(O["g"])(i,a,e)}if(o>0){t[r]=Math.floor(i/o)*o;t[n]=Math.ceil(a/o)*o;l(t)}else if(o<0){t[r]=Math.ceil(i*o)/o;t[n]=Math.floor(a*o)/o;l(t)}return s};return s}function w(){var e=A(E,T["interpolateNumber"]);e.copy=function(){return M(e,w())};return b(e)}function S(){var t=[0,1];function r(e){return+e}r.invert=r;r.domain=r.range=function(e){return arguments.length?(t=x.call(e,h),r):t.slice()};r.copy=function(){return S().domain(t)};return b(r)}var k=function(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],a=e[n],o;if(a<i){o=r,r=n,n=o;o=i,i=a,a=o}e[r]=t.floor(i);e[n]=t.ceil(a);return e};function C(t,r){return(r=Math.log(r/t))?function(e){return Math.log(e/t)/r}:s(r)}function j(t,r){return t<0?function(e){return-Math.pow(-r,e)*Math.pow(-t,1-e)}:function(e){return Math.pow(r,e)*Math.pow(t,1-e)}}function I(e){return isFinite(e)?+("1e"+e):e<0?0:e}function D(t){return t===10?I:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function P(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function R(t){return function(e){return-t(-e)}}function L(){var t=A(C,j).domain([1,10]),h=t.domain,d=10,p=P(10),v=D(10);function r(){p=P(d),v=D(d);if(h()[0]<0)p=R(p),v=R(v);return t}t.base=function(e){return arguments.length?(d=+e,r()):d};t.domain=function(e){return arguments.length?(h(e),r()):h()};t.ticks=function(e){var t=h(),r=t[0],n=t[t.length-1],i;if(i=n<r)a=r,r=n,n=a;var a=p(r),o=p(n),s,l,u,c=e==null?10:+e,f=[];if(!(d%1)&&o-a<c){a=Math.round(a)-1,o=Math.round(o)+1;if(r>0)for(;a<o;++a){for(l=1,s=v(a);l<d;++l){u=s*l;if(u<r)continue;if(u>n)break;f.push(u)}}else for(;a<o;++a){for(l=d-1,s=v(a);l>=1;--l){u=s*l;if(u<r)continue;if(u>n)break;f.push(u)}}}else{f=Object(O["i"])(a,o,Math.min(o-a,c)).map(v)}return i?f.reverse():f};t.tickFormat=function(e,r){if(r==null)r=d===10?".0e":",";if(typeof r!=="function")r=Object(c["format"])(r);if(e===Infinity)return r;if(e==null)e=10;var n=Math.max(1,d*e/t.ticks().length);return function(e){var t=e/v(Math.round(p(e)));if(t*d<d-.5)t*=d;return t<=n?r(e):""}};t.nice=function(){return h(k(h(),{floor:function e(t){return v(Math.floor(p(t)))},ceil:function e(t){return v(Math.ceil(p(t)))}}))};t.copy=function(){return M(t,L().base(d))};return t}function N(e,t){return e<0?-Math.pow(-e,t):Math.pow(e,t)}function $(){var n=1,e=A(r,i),t=e.domain;function r(t,r){return(r=N(r,n)-(t=N(t,n)))?function(e){return(N(e,n)-t)/r}:s(r)}function i(t,r){r=N(r,n)-(t=N(t,n));return function(e){return N(t+r*e,1/n)}}e.exponent=function(e){return arguments.length?(n=+e,t(t())):n};e.copy=function(){return M(e,$().exponent(n))};return b(e)}function F(){return $().exponent(.5)}function G(){var i=[],r=[],n=[];function a(){var e=0,t=Math.max(1,r.length);n=new Array(t-1);while(++e<t){n[e-1]=Object(O["e"])(i,e/t)}return o}function o(e){if(!isNaN(e=+e))return r[Object(O["b"])(n,e)]}o.invertExtent=function(e){var t=r.indexOf(e);return t<0?[NaN,NaN]:[t>0?n[t-1]:i[0],t<n.length?n[t]:i[i.length-1]]};o.domain=function(e){if(!arguments.length)return i.slice();i=[];for(var t=0,r=e.length,n;t<r;++t){if(n=e[t],n!=null&&!isNaN(n=+n))i.push(n)}i.sort(O["a"]);return a()};o.range=function(e){return arguments.length?(r=f.call(e),a()):r.slice()};o.quantiles=function(){return n.slice()};o.copy=function(){return G().domain(i).range(r)};return o}function U(){var r=0,n=1,i=1,a=[.5],o=[0,1];function t(e){if(e<=e)return o[Object(O["b"])(a,e,0,i)]}function s(){var e=-1;a=new Array(i);while(++e<i){a[e]=((e+1)*n-(e-i)*r)/(i+1)}return t}t.domain=function(e){return arguments.length?(r=+e[0],n=+e[1],s()):[r,n]};t.range=function(e){return arguments.length?(i=(o=f.call(e)).length-1,s()):o.slice()};t.invertExtent=function(e){var t=o.indexOf(e);return t<0?[NaN,NaN]:t<1?[r,a[0]]:t>=i?[a[i-1],n]:[a[t-1],a[t]]};t.copy=function(){return U().domain([r,n]).range(o)};return b(t)}function H(){var r=[.5],n=[0,1],t=1;function i(e){if(e<=e)return n[Object(O["b"])(r,e,0,t)]}i.domain=function(e){return arguments.length?(r=f.call(e),t=Math.min(r.length,n.length-1),i):r.slice()};i.range=function(e){return arguments.length?(n=f.call(e),t=Math.min(r.length,n.length-1),i):n.slice()};i.invertExtent=function(e){var t=n.indexOf(e);return[r[t-1],r[t]]};i.copy=function(){return H().domain(r).range(n)};return i}var W=r(116);var Y=r(343);var V=1e3,q=V*60,z=q*60,B=z*24,K=B*7,X=B*30,Z=B*365;function Q(e){return new Date(e)}function J(e){return e instanceof Date?+e:+new Date(+e)}function ee(o,t,r,n,i,a,s,l,u){var c=A(E,T["interpolateNumber"]),f=c.invert,h=c.domain;var d=u(".%L"),p=u(":%S"),v=u("%I:%M"),g=u("%I %p"),m=u("%a %d"),_=u("%b %d"),y=u("%B"),b=u("%Y");var w=[[s,1,V],[s,5,5*V],[s,15,15*V],[s,30,30*V],[a,1,q],[a,5,5*q],[a,15,15*q],[a,30,30*q],[i,1,z],[i,3,3*z],[i,6,6*z],[i,12,12*z],[n,1,B],[n,2,2*B],[r,1,K],[t,1,X],[t,3,3*X],[o,1,Z]];function S(e){return(s(e)<e?d:a(e)<e?p:i(e)<e?v:n(e)<e?g:t(e)<e?r(e)<e?m:_:o(e)<e?y:b)(e)}function C(e,t,r,n){if(e==null)e=10;if(typeof e==="number"){var i=Math.abs(r-t)/e,a=Object(O["c"])(function(e){return e[2]}).right(w,i);if(a===w.length){n=Object(O["h"])(t/Z,r/Z,e);e=o}else if(a){a=w[i/w[a-1][2]<w[a][2]/i?a-1:a];n=a[1];e=a[0]}else{n=Math.max(Object(O["h"])(t,r,e),1);e=l}}return n==null?e:e.every(n)}c.invert=function(e){return new Date(f(e))};c.domain=function(e){return arguments.length?h(x.call(e,J)):h().map(Q)};c.ticks=function(e,t){var r=h(),n=r[0],i=r[r.length-1],a=i<n,o;if(a)o=n,n=i,i=o;o=C(e,n,i,t);o=o?o.range(n,i+1):[];return a?o.reverse():o};c.tickFormat=function(e,t){return t==null?S:u(t)};c.nice=function(e,t){var r=h();return(e=C(e,r[0],r[r.length-1],t))?h(k(r,e)):c};c.copy=function(){return M(c,ee(o,t,r,n,i,a,s,l,u))};return c}var te=function(){return ee(W["timeYear"],W["timeMonth"],W["timeWeek"],W["timeDay"],W["timeHour"],W["timeMinute"],W["timeSecond"],W["timeMillisecond"],Y["timeFormat"]).domain([new Date(2e3,0,1),new Date(2e3,0,2)])};var re=function(){return ee(W["utcYear"],W["utcMonth"],W["utcWeek"],W["utcDay"],W["utcHour"],W["utcMinute"],W["utcSecond"],W["utcMillisecond"],Y["utcFormat"]).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])};function ne(r){var n=0,t=1,i=1,a=false;function o(e){var t=(e-n)*i;return r(a?Math.max(0,Math.min(1,t)):t)}o.domain=function(e){return arguments.length?(n=+e[0],t=+e[1],i=n===t?0:1/(t-n),o):[n,t]};o.clamp=function(e){return arguments.length?(a=!!e,o):a};o.interpolator=function(e){return arguments.length?(r=e,o):r};o.copy=function(){return ne(r).domain([n,t]).clamp(a)};return b(o)}function ie(r){var t=0,n=.5,i=1,a=1,o=1,s=false;function l(e){var t=.5+((e=+e)-n)*(e<n?a:o);return r(s?Math.max(0,Math.min(1,t)):t)}l.domain=function(e){return arguments.length?(t=+e[0],n=+e[1],i=+e[2],a=t===n?0:.5/(n-t),o=n===i?0:.5/(i-n),l):[t,n,i]};l.clamp=function(e){return arguments.length?(s=!!e,l):s};l.interpolator=function(e){return arguments.length?(r=e,l):r};l.copy=function(){return ie(r).domain([t,n,i]).clamp(s)};return b(l)}r.d(t,"a",function(){return w})},function(e,t,r){"use strict";var n=angular.module("gmfLidarprofile",[]);n.value("gmfLidarprofileTemplateUrl",function(e,t){var r=t["gmfLidarprofileTemplateUrl"];return r!==undefined?r:"gmf/lidarprofile"});n.run(["$templateCache",function(e){e.put("gmf/lidarprofile",r(491))}]);i.$inject=["$element","$attrs","gmfLidarprofileTemplateUrl"];function i(e,t,r){return r(e,t)}n.component_={controller:"GmfLidarprofileController",bindings:{active:"=gmfLidarprofileActive",line:"=gmfLidarprofileLine"},templateUrl:i};n.component("gmfLidarprofile",n.component_);n.Controller_=function(){e.$inject=["$scope"];function e(e){var r=this;this.line;this.active=false;e.$watch(function(){return r.line},function(e,t){if(t!==e){r.active=!!r.line}})}return e}();n.controller("GmfLidarprofileController",n.Controller_);var a=n;var o=function(){e.$inject=["$http","pytreeLidarprofileJsonUrl"];function e(e,t){this.$http_=e;this.pytreeLidarprofileJsonUrl=t;this.loaded=false;this.clientConfig={autoWidth:true,margin:{left:40,top:10,right:200,bottom:40},pointAttributes:{},pointSum:0,tolerance:5};this.serverConfig=null}var t=e.prototype;t.initProfileConfig=function e(){var i=this;return this.$http_.get(this.pytreeLidarprofileJsonUrl+"/profile/config").then(function(e){i.serverConfig={classification_colors:e.data["classification_colors"]||null,debug:!!e.data["debug"],default_attribute:e.data["default_attribute"]||"",default_color:e.data["default_color"]||"",default_point_attribute:e.data["default_point_attribute"]||"",default_point_cloud:e.data["default_point_cloud"]||"",initialLOD:e.data["initialLOD"]||0,max_levels:e.data["max_levels"]||null,max_point_number:e.data["max_point_number"]||5e4,minLOD:e.data["minLOD"]||0,point_attributes:e.data["point_attributes"]||null,point_size:e.data["point_size"]||0,width:e.data["width"]||0};var t=[];for(var r in i.serverConfig.point_attributes){if(i.serverConfig.point_attributes[r].visible==1){t.push(i.serverConfig.point_attributes[r])}}var n=i.serverConfig.point_attributes[i.serverConfig.default_point_attribute];i.clientConfig.pointAttributes={availableOptions:t,selectedOption:n}})};return e}();o.module=angular.module("gmfLidarprofileConfig",[]);o.module.service("gmfLidarprofileConfig",o);var s=o;var k=r(20);var v={mouse:k["mouse"],select:k["select"]};var l=function(){function e(e){this.manager_=e;this.pStart_={};this.pEnd_={}}var t=e.prototype;t.clearMeasure=function e(){this.pStart_={};this.pEnd_={};var t=v.select("#gmf-lidarprofile-container svg.lidar-svg");t.selectAll("#text_m").remove();t.selectAll("#start_m").remove();t.selectAll("#end_m").remove();t.selectAll("#line_m").remove();t.on("click",null);t.style("cursor","default")};t.setMeasureActive=function e(){var t=v.select("#gmf-lidarprofile-container svg.lidar-svg");t.style("cursor","pointer");t.on("click",this.measureHeigt.bind(this))};t.measureHeigt=function e(){var t=v.select("#gmf-lidarprofile-container svg.lidar-svg");var r=v.mouse(t.node());var n=v.mouse(v.select("#gmf-lidarprofile-container .lidar-canvas").node());var i=this.manager_.config.clientConfig.margin;var a=r[0];var o=r[1];var s=2;var l=this.manager_.plot.updateScaleX;var u=this.manager_.plot.updateScaleY;var c=3;var f=this.manager_.utils.getClosestPoint(this.manager_.profilePoints,n[0],n[1],s,this.manager_.plot.updateScaleX,this.manager_.plot.updateScaleY,this.manager_.config.serverConfig.classification_colors);if(!this.pStart_.set){if(f!==undefined){this.pStart_.distance=f.distance;this.pStart_.altitude=f.altitude;this.pStart_.cx=l(f.distance)+i.left;this.pStart_.cy=u(f.altitude)+i.top}else{this.pStart_.distance=l["invert"](a);this.pStart_.altitude=u["invert"](o);this.pStart_.cx=a;this.pStart_.cy=o}this.pStart_.set=true;t.append("circle").attr("id","start_m").attr("cx",this.pStart_.cx).attr("cy",this.pStart_.cy).attr("r",c).style("fill","red")}else if(!this.pEnd_.set){if(f!==undefined){this.pEnd_.distance=f.distance;this.pEnd_.altitude=f.altitude;this.pEnd_.cx=l(f.distance)+i.left;this.pEnd_.cy=u(f.altitude)+i.top}else{this.pEnd_.distance=l["invert"](a);this.pEnd_.altitude=u["invert"](o);this.pEnd_.cx=a;this.pEnd_.cy=o}this.pEnd_.set=true;t.append("circle").attr("id","end_m").attr("cx",this.pEnd_.cx).attr("cy",this.pEnd_.cy).attr("r",c).style("fill","red");t.append("line").attr("id","line_m").attr("x1",this.pStart_.cx).attr("y1",this.pStart_.cy).attr("x2",this.pEnd_.cx).attr("y2",this.pEnd_.cy).attr("stroke-width",2).attr("stroke","red")}if(this.pStart_.set&&this.pEnd_.set){var h=this.pEnd_.altitude-this.pStart_.altitude;var d=this.pEnd_.distance-this.pStart_.distance;var p=Math.round(10*Math.sqrt(Math.pow(h,2)+Math.pow(d,2)))/10;if(!isNaN(p)){t.append("text").attr("id","text_m").attr("x",10+(this.pStart_.cx+this.pEnd_.cx)/2).attr("y",(this.pStart_.cy+this.pEnd_.cy)/2).text(p+" m").attr("font-family","sans-serif").attr("font-size","14px").style("font-weight","bold").attr("fill","red")}this.pEnd_.set=false;this.pStart_.set=false}};return e}();var u=l;var S=r(14);var C=r(21);var m=r(66);var O=r(30);var x=r(11);var c=r(273);var f=r(363);var j=r(280);var I=r(385);var D=r(124);var P=r(293);var R=function(e){return function(){return e}};function L(e,t,r){this.target=e;this.type=t;this.transform=r}function N(e,t,r){this.k=e;this.x=t;this.y=r}N.prototype={constructor:N,scale:function e(t){return t===1?this:new N(this.k*t,this.x,this.y)},translate:function e(t,r){return t===0&r===0?this:new N(this.k,this.x+this.k*t,this.y+this.k*r)},apply:function e(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function e(t){return t*this.k+this.x},applyY:function e(t){return t*this.k+this.y},invert:function e(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function e(t){return(t-this.x)/this.k},invertY:function e(t){return(t-this.y)/this.k},rescaleX:function e(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function e(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function e(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var $=new N(1,0,0);h.prototype=N.prototype;function h(e){return e.__zoom||$}function F(){k["event"].stopImmediatePropagation()}var G=function(){k["event"].preventDefault();k["event"].stopImmediatePropagation()};function U(){return!k["event"].button}function H(){var e=this,t,r;if(e instanceof SVGElement){e=e.ownerSVGElement||e;t=e.width.baseVal.value;r=e.height.baseVal.value}else{t=e.clientWidth;r=e.clientHeight}return[[0,0],[t,r]]}function W(){return this.__zoom||$}function Y(){return-k["event"].deltaY*(k["event"].deltaMode?120:1)/500}function V(){return"ontouchstart"in this}function q(e,t,r){var n=e.invertX(t[0][0])-r[0][0],i=e.invertX(t[1][0])-r[1][0],a=e.invertY(t[0][1])-r[0][1],o=e.invertY(t[1][1])-r[1][1];return e.translate(i>n?(n+i)/2:Math.min(0,n)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}var d=function(){var s=U,f=H,d=q,a=Y,t=V,o=[0,Infinity],p=[[-Infinity,-Infinity],[Infinity,Infinity]],l=250,h=D["interpolateZoom"],u=[],r=Object(j["dispatch"])("start","zoom","end"),v,c,g=500,m=150,_=0;function y(e){e.property("__zoom",W).on("wheel.zoom",n).on("mousedown.zoom",i).on("dblclick.zoom",T).filter(t).on("touchstart.zoom",E).on("touchmove.zoom",M).on("touchend.zoom touchcancel.zoom",A).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(e,t){var r=e.selection?e.selection():e;r.property("__zoom",W);if(e!==r){C(e,t)}else{r.interrupt().each(function(){O(this,arguments).start().zoom(null,typeof t==="function"?t.apply(this,arguments):t).end()})}};y.scaleBy=function(e,r){y.scaleTo(e,function(){var e=this.__zoom.k,t=typeof r==="function"?r.apply(this,arguments):r;return e*t})};y.scaleTo=function(e,a){y.transform(e,function(){var e=f.apply(this,arguments),t=this.__zoom,r=S(e),n=t.invert(r),i=typeof a==="function"?a.apply(this,arguments):a;return d(w(b(t,i),r,n),e,p)})};y.translateBy=function(e,t,r){y.transform(e,function(){return d(this.__zoom.translate(typeof t==="function"?t.apply(this,arguments):t,typeof r==="function"?r.apply(this,arguments):r),f.apply(this,arguments),p)})};y.translateTo=function(e,n,i){y.transform(e,function(){var e=f.apply(this,arguments),t=this.__zoom,r=S(e);return d($.translate(r[0],r[1]).scale(t.k).translate(typeof n==="function"?-n.apply(this,arguments):-n,typeof i==="function"?-i.apply(this,arguments):-i),e,p)})};function b(e,t){t=Math.max(o[0],Math.min(o[1],t));return t===e.k?e:new N(t,e.x,e.y)}function w(e,t,r){var n=t[0]-r[0]*e.k,i=t[1]-r[1]*e.k;return n===e.x&&i===e.y?e:new N(e.k,n,i)}function S(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function C(e,u,c){e.on("start.zoom",function(){O(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){O(this,arguments).end()}).tween("zoom",function(){var e=this,t=arguments,n=O(e,t),r=f.apply(e,t),i=c||S(r),a=Math.max(r[1][0]-r[0][0],r[1][1]-r[0][1]),o=e.__zoom,s=typeof u==="function"?u.apply(e,t):u,l=h(o.invert(i).concat(a/o.k),s.invert(i).concat(a/s.k));return function(e){if(e===1)e=s;else{var t=l(e),r=a/t[2];e=new N(r,i[0]-t[0]*r,i[1]-t[1]*r)}n.zoom(null,e)}})}function O(e,t){for(var r=0,n=u.length,i;r<n;++r){if((i=u[r]).that===e){return i}}return new x(e,t)}function x(e,t){this.that=e;this.args=t;this.index=-1;this.active=0;this.extent=f.apply(e,t)}x.prototype={start:function e(){if(++this.active===1){this.index=u.push(this)-1;this.emit("start")}return this},zoom:function e(t,r){if(this.mouse&&t!=="mouse")this.mouse[1]=r.invert(this.mouse[0]);if(this.touch0&&t!=="touch")this.touch0[1]=r.invert(this.touch0[0]);if(this.touch1&&t!=="touch")this.touch1[1]=r.invert(this.touch1[0]);this.that.__zoom=r;this.emit("zoom");return this},end:function e(){if(--this.active===0){u.splice(this.index,1);this.index=-1;this.emit("end")}return this},emit:function e(t){Object(k["customEvent"])(new L(y,t,this.that.__zoom),r.apply,r,[t,this.that,this.args])}};function n(){if(!s.apply(this,arguments))return;var e=O(this,arguments),t=this.__zoom,r=Math.max(o[0],Math.min(o[1],t.k*Math.pow(2,a.apply(this,arguments)))),n=Object(k["mouse"])(this);if(e.wheel){if(e.mouse[0][0]!==n[0]||e.mouse[0][1]!==n[1]){e.mouse[1]=t.invert(e.mouse[0]=n)}clearTimeout(e.wheel)}else if(t.k===r)return;else{e.mouse=[n,t.invert(n)];Object(P["a"])(this);e.start()}G();e.wheel=setTimeout(i,m);e.zoom("mouse",d(w(b(t,r),e.mouse[0],e.mouse[1]),e.extent,p));function i(){e.wheel=null;e.end()}}function i(){if(c||!s.apply(this,arguments))return;var r=O(this,arguments),e=Object(k["select"])(k["event"].view).on("mousemove.zoom",a,true).on("mouseup.zoom",o,true),t=Object(k["mouse"])(this),n=k["event"].clientX,i=k["event"].clientY;Object(I["dragDisable"])(k["event"].view);F();r.mouse=[t,this.__zoom.invert(t)];Object(P["a"])(this);r.start();function a(){G();if(!r.moved){var e=k["event"].clientX-n,t=k["event"].clientY-i;r.moved=e*e+t*t>_}r.zoom("mouse",d(w(r.that.__zoom,r.mouse[0]=Object(k["mouse"])(r.that),r.mouse[1]),r.extent,p))}function o(){e.on("mousemove.zoom mouseup.zoom",null);Object(I["dragEnable"])(k["event"].view,r.moved);G();r.end()}}function T(){if(!s.apply(this,arguments))return;var e=this.__zoom,t=Object(k["mouse"])(this),r=e.invert(t),n=e.k*(k["event"].shiftKey?.5:2),i=d(w(b(e,n),t,r),f.apply(this,arguments),p);G();if(l>0)Object(k["select"])(this).transition().duration(l).call(C,i,t);else Object(k["select"])(this).call(y.transform,i)}function E(){if(!s.apply(this,arguments))return;var e=O(this,arguments),t=k["event"].changedTouches,r,n=t.length,i,a,o;F();for(i=0;i<n;++i){a=t[i],o=Object(k["touch"])(this,t,a.identifier);o=[o,this.__zoom.invert(o),a.identifier];if(!e.touch0)e.touch0=o,r=true;else if(!e.touch1)e.touch1=o}if(v){v=clearTimeout(v);if(!e.touch1){e.end();o=Object(k["select"])(this).on("dblclick.zoom");if(o)o.apply(this,arguments);return}}if(r){v=setTimeout(function(){v=null},g);Object(P["a"])(this);e.start()}}function M(){var e=O(this,arguments),t=k["event"].changedTouches,r=t.length,n,i,a,o;G();if(v)v=clearTimeout(v);for(n=0;n<r;++n){i=t[n],a=Object(k["touch"])(this,t,i.identifier);if(e.touch0&&e.touch0[2]===i.identifier)e.touch0[0]=a;else if(e.touch1&&e.touch1[2]===i.identifier)e.touch1[0]=a}i=e.that.__zoom;if(e.touch1){var s=e.touch0[0],l=e.touch0[1],u=e.touch1[0],c=e.touch1[1],f=(f=u[0]-s[0])*f+(f=u[1]-s[1])*f,h=(h=c[0]-l[0])*h+(h=c[1]-l[1])*h;i=b(i,Math.sqrt(f/h));a=[(s[0]+u[0])/2,(s[1]+u[1])/2];o=[(l[0]+c[0])/2,(l[1]+c[1])/2]}else if(e.touch0)a=e.touch0[0],o=e.touch0[1];else return;e.zoom("touch",d(w(i,a,o),e.extent,p))}function A(){var e=O(this,arguments),t=k["event"].changedTouches,r=t.length,n,i;F();if(c)clearTimeout(c);c=setTimeout(function(){c=null},g);for(n=0;n<r;++n){i=t[n];if(e.touch0&&e.touch0[2]===i.identifier)delete e.touch0;else if(e.touch1&&e.touch1[2]===i.identifier)delete e.touch1}if(e.touch1&&!e.touch0)e.touch0=e.touch1,delete e.touch1;if(e.touch0)e.touch0[1]=this.__zoom.invert(e.touch0[0]);else e.end()}y.wheelDelta=function(e){return arguments.length?(a=typeof e==="function"?e:R(+e),y):a};y.filter=function(e){return arguments.length?(s=typeof e==="function"?e:R(!!e),y):s};y.touchable=function(e){return arguments.length?(t=typeof e==="function"?e:R(!!e),y):t};y.extent=function(e){return arguments.length?(f=typeof e==="function"?e:R([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),y):f};y.scaleExtent=function(e){return arguments.length?(o[0]=+e[0],o[1]=+e[1],y):[o[0],o[1]]};y.translateExtent=function(e){return arguments.length?(p[0][0]=+e[0][0],p[1][0]=+e[1][0],p[0][1]=+e[0][1],p[1][1]=+e[1][1],y):[[p[0][0],p[0][1]],[p[1][0],p[1][1]]]};y.constrain=function(e){return arguments.length?(d=e,y):d};y.duration=function(e){return arguments.length?(l=+e,y):l};y.interpolate=function(e){return arguments.length?(h=e,y):h};y.on=function(){var e=r.on.apply(r,arguments);return e===r?y:e};y.clickDistance=function(e){return arguments.length?(_=(e=+e)*e,y):Math.sqrt(_)};return y};var T={axisBottom:c["a"],axisLeft:c["b"],mouse:k["mouse"],scaleLinear:f["a"],select:k["select"],zoom:d};var p=function(){function e(e){this.manager_=e;this.scaleX;this.updateScaleX;this.scaleY;this.updateScaleY;this.material;this.width_;this.height_;this.previousDomainX=[];this.moved_=false}var t=e.prototype;t.drawPoints=function e(t){var r=-1;var n=t.distance.length;var i,a;var o=T.select("#gmf-lidarprofile-container .lidar-canvas").node().getContext("2d");var s=this.manager_.config.serverConfig;while(++r<n){var l=t.distance[r];var u=t.altitude[r];var c=t.color_packed[r];var f=t.intensity[r];var h=t.classification[r];if(s.classification_colors[h]&&s.classification_colors[h].visible){i=this.updateScaleX(l);a=this.updateScaleY(u);o.beginPath();o.moveTo(i,a);if(this.material=="COLOR_PACKED"){o.fillStyle="RGB("+c[0]+", "+c[1]+", "+c[2]+")"}else if(this.material=="INTENSITY"){o.fillStyle="RGB("+f+", "+f+", "+f+")"}else if(this.material=="CLASSIFICATION"){o.fillStyle="RGB("+s.classification_colors[h].color+")"}else{o.fillStyle=s.default_color}o.arc(i,a,s.point_size,0,2*Math.PI,false);o.fill()}}};t.setupPlot=function e(t,r){var n=this;var i=T.select("#gmf-lidarprofile-container .lidar-canvas");var a=i.node();var o=a.getContext("2d");o.clearRect(0,0,a.getBoundingClientRect().width,a.getBoundingClientRect().height);var s=this.manager_.config.clientConfig.margin;var l=T.select("#gmf-lidarprofile-container").node();var u=l.getBoundingClientRect().width;var c=l.getBoundingClientRect().height;this.width_=u-(s.left+s.right);this.height_=c-(s.top+s.bottom);this.material=this.manager_.config.serverConfig.default_attribute;i.attr("height",this.height_).attr("width",this.width_).style("background-color","black").style("z-index",0).style("position","absolute").style("margin-left",s.left.toString()+"px").style("margin-top",s.top.toString()+"px");var f=t[1]-t[0];var h=r[1]-r[0];var d=f/h;var p=this.width_;var v=this.height_;var g=p/v;var m;if(d<g){var _=g/d;var y=f*_;this.scaleX=T.scaleLinear();this.scaleX["domain"]([0,y]);this.scaleX["range"]([0,this.width_]);this.scaleY=T.scaleLinear();this.scaleY["domain"](r);this.scaleY["range"]([this.height_,0])}else{m=d/g;var b=h*m;var w=(r[1]+r[0])/2;this.scaleX=T.scaleLinear();this.scaleX["domain"](t);this.scaleX["range"]([0,this.width_]);this.scaleY=T.scaleLinear();this.scaleY["domain"]([w-b/2,w+b/2]);this.scaleY["range"]([this.height_,0])}var S=T.zoom().scaleExtent([-10,100]).translateExtent([[0,0],[this.width_,this.height_]]).extent([[0,0],[this.width_,this.height_]]).on("zoom",this.zoomed.bind(this));S.on("end",this.zoomEnd.bind(this));this.previousDomainX=this.scaleX["domain"]();this.updateScaleX=this.scaleX;this.updateScaleY=this.scaleY;var C=T.select("#gmf-lidarprofile-container svg.lidar-svg");C.call(S).on("dblclick.zoom",null);C.selectAll("*").remove();C.attr("width",this.width_+s.left).attr("height",this.height_+s.top+s.bottom);C.on("mousemove",function(){n.pointHighlight.bind(n)()});var O=T.axisBottom(this.scaleX);var x=T.axisLeft(this.scaleY).tickSize(-this.width_);C.select(".y.axis").selectAll("g.tick line").style("stroke","#b7cff7");C.append("g").attr("class","y axis").call(x);C.append("g").attr("class","x axis").call(O);C.select(".y.axis").attr("transform","translate("+s.left+", "+s.top+")");C.select(".x.axis").attr("transform","translate("+s.left+", "+(this.height_+s.top)+")");C.select(".y.axis").selectAll("g.tick line").style("opacity","0.5").style("stroke","#b7cff7")};t.zoomEnd=function e(){if(k["event"].sourceEvent&&this.moved_===false){return}this.moved_=false;var t=T.select("#gmf-lidarprofile-container .lidar-canvas").node().getContext("2d");t.clearRect(0,0,this.width_,this.height_);this.manager_.updateData()};t.zoomed=function e(){if(k["event"].sourceEvent&&k["event"].sourceEvent.type==="mousemove"){this.moved_=true;if(k["event"].sourceEvent.movementX==0&&k["event"].sourceEvent.movementY==0){return}}this.manager_.measure.clearMeasure();var t=k["event"].transform;var r=T.select("#gmf-lidarprofile-container svg.lidar-svg");var n=T.axisBottom(this.scaleX);var i=T.axisLeft(this.scaleY).tickSize(-this.width_);var a=t.rescaleX(this.scaleX);var o=t.rescaleY(this.scaleY);r.select(".x.axis").call(n.scale(a));r.select(".y.axis").call(i.scale(o));var s=T.select("#gmf-lidarprofile-container .lidar-canvas").node().getContext("2d");s.clearRect(0,0,this.width_,this.height_);r.select(".y.axis").selectAll("g.tick line").style("opacity","0.5").style("stroke","#b7cff7");this.updateScaleX=a;this.updateScaleY=o};t.pointHighlight=function e(){var t=T.select("#gmf-lidarprofile-container svg.lidar-svg");var r=T.select("#gmf-lidarprofile-container .lidar-info");var n=this.manager_.config.serverConfig.point_size;var i=this.manager_.config.clientConfig.margin;var a=this.manager_.config.clientConfig.tolerance||0;var o=T.mouse(T.select("#gmf-lidarprofile-container .lidar-canvas").node());var s=this.manager_.config.serverConfig.classification_colors;var l,u;var c=this.manager_.utils.getClosestPoint(this.manager_.profilePoints,o[0],o[1],a,this.updateScaleX,this.updateScaleY,s);if(c!=undefined){l=this.updateScaleX(c.distance)+i.left;u=this.updateScaleY(c.altitude)+i.top;t.selectAll("#highlightCircle").remove();t.append("circle").attr("id","highlightCircle").attr("cx",l).attr("cy",u).attr("r",n+1).style("fill","orange");var f=c.classification||-1;var h=s[f]||{};var d=this.getInfoHTML(c,h,1);r.html(d);this.manager_.cartoHighlight.setElement(null);var p=document.createElement("div");p.className+="tooltip gmf-tooltip-measure";p.innerHTML=d;this.manager_.cartoHighlight.setElement(p);this.manager_.cartoHighlight.setPosition([c.coords[0],c.coords[1]]);this.manager_.lidarPointHighlight.getSource().clear();var v=new C["a"]([c.coords[0],c.coords[1]]);var g=new S["a"](v);if(typeof h.color!==undefined){g.setStyle(new x["c"]({image:new m["a"]({fill:new O["a"]({color:"rgba("+h.color+", 1)"}),radius:3})}))}this.manager_.lidarPointHighlight.getSource().addFeature(g)}else{this.manager_.lidarPointHighlight.getSource().clear();t.select("#highlightCircle").remove();r.html("");this.manager_.cartoHighlight.setPosition(undefined)}};t.getInfoHTML=function e(t,r,n){var i=this.manager_.gettextCatalog;var a=[];var o=this.manager_.$filter("number");var s=t.distance;var l=t.altitude;var u=i.getString(r.name);var c=t.intensity;if(s!==undefined){var f=i.getString("Distance: ");a.push(""+(f+o(s,n)))}if(l!==undefined){var h=i.getString("Altitude: ");a.push(""+(h+o(l,n)))}if(u.length>0){var d=i.getString("Classification: ");a.push(""+(d+u))}if(c!==undefined){var p=i.getString("Intensity: ");a.push(""+(p+o(c,0)))}return a.join("</br>")};t.changeStyle=function e(t){this.material=t;var r=T.select("#gmf-lidarprofile-container .lidar-canvas").node();var n=r.getContext("2d");n.clearRect(0,0,r.width,r.height);this.drawPoints(this.manager_.profilePoints)};t.setClassActive=function e(t,r){this.manager_.config.serverConfig.classification_colors=t;this.changeStyle(r)};return e}();var g=p;var E=r(35);var M=r(107);var A=r(29);var _=r(318);var y={select:k["select"]};var b=function(){function e(){}var t=e.prototype;t.clipLineByMeasure=function e(t,r,n,i,a){var o=new E["a"]([]);var s=0;var l=0;var u=n.getLength();var c=i/u;var f=a/u;var h=n.getCoordinates().length-1;var d=0;n.forEachSegment(function(e,t){d+=1;var r=new E["a"]([e,t]);l+=r.getLength();if(i==s){o.appendCoordinate(e)}else if(i>s&&i<l){o.appendCoordinate(n.getCoordinateAt(c))}if(s>i&&s<a){o.appendCoordinate(e)}if(a==l){o.appendCoordinate(t)}else if(a>s&&a<l){o.appendCoordinate(n.getCoordinateAt(f))}else if(a>s&&a>l&&d===h){o.appendCoordinate(n.getCoordinateAt(f))}s+=r.getLength()});var p=new S["a"]({geometry:o});var v=new x["c"]({stroke:new A["a"]({color:"rgba(255,0,0,1)",width:2,lineCap:"square"})});var g=0;var m=0;h=o.getCoordinates().length-1;var _=1;o.forEachSegment(function(e,t){if(_==1){var r=t[0]-e[0];var n=t[1]-e[1];g=Math.atan2(r,n)}if(_==h){var i=t[0]-e[0];var a=t[1]-e[1];m=Math.atan2(i,a)}_+=1});var y=[v];var b=o.getLastCoordinate();var w=o.getFirstCoordinate();y.push(new x["c"]({geometry:new C["a"](w),image:new M["a"]({fill:new O["a"]({color:"rgba(255, 0, 0, 1)"}),stroke:new A["a"]({color:"rgba(255,0,0,1)",width:1,lineCap:"square"}),points:3,radius:5,rotation:g,angle:Math.PI/3})}),new x["c"]({geometry:new C["a"](b),image:new M["a"]({fill:new O["a"]({color:"rgba(255, 0, 0, 1)"}),stroke:new A["a"]({color:"rgba(255,0,0,1)",width:1,lineCap:"square"}),points:3,radius:5,rotation:m,angle:4*Math.PI/3})}));return{clippedLine:o.getCoordinates(),distanceOffset:i,bufferGeom:p,bufferStyle:y}};t.getNiceLOD=function e(t,r){var n=0;var i=0;for(var a in r){var o=parseInt(a,10);if(t<o&&r[o].max>n){n=r[o].max;i=r[o].width}}return{maxLOD:n,width:i}};t.downloadProfileAsImageFile=function e(t){var r=y.select("#gmf-lidarprofile-container svg.lidar-svg");var n=parseInt(r.attr("width"),10);var i=parseInt(r.attr("height"),10);var a=t.margin;var o=document.createElement("canvas");o.style.display="none";o.width=n;o.height=i;var s=o.getContext("2d");s.fillStyle="white";s.fillRect(0,0,n,i);var l=y.select("#gmf-lidarprofile-container .lidar-canvas").node();s.drawImage(l,a.left,a.top,n-(a.left+a.right),i-(a.top+a.bottom));var u=new Image;var c=new XMLSerializer;var f=c.serializeToString(r.node());var h="lidare_profile_for_export_uid";u.id=h;u.src="data:image/svg+xml;base64, "+btoa(f);u.style.setProperty("display","none");var d=document.getElementsByTagName("body")[0];u.onload=function(){s.drawImage(u,0,0,n,i);d.removeChild(document.getElementById(h));o.toBlob(function(e){Object(_["saveAs"])(e,"LIDAR_profile.png")})};d.appendChild(u)};t.getFlatPointsByDistance=function e(t){var r=[];for(var n=0;n<t.distance.length;n++){var i={distance:t.distance[n],altitude:t.altitude[n],color_packed:t.color_packed[n],intensity:t.intensity[n],classification:t.classification[n],coords:t.coords[n]};r.push(i)}r.sort(function(e,t){return e.distance-t.distance});return r};t.getCSVData=function e(t){return t.map(function(e){var t={};for(var r in e){var n=e[r];if(r=="altitude"){t[r]=n.toFixed(4)}else if(r=="color_packed"||r=="coords"){t[r]=n.join(" ")}else{t[r]=n}}return t})};t.arrayMax=function e(t){return t.reduce(function(e,t){return Math.max(e,t)})};t.arrayMin=function e(t){var r=Infinity;for(var n=0;n<t.length;n++){if(t[n]<r){r=t[n]}}return r};t.getPytreeLinestring=function e(t){var r=t.getCoordinates();var n="";for(var i=0;i<r.length;i++){var a=r[i][0];var o=r[i][1];n+="{"+Math.round(100*a)/100+", "+Math.round(100*o)/100+"},"}return n.substr(0,n.length-1)};t.getClosestPoint=function e(t,r,n,i,a,o,s){var l=t;var u=i;var c=[];var f=[];for(var h=0;h<l.distance.length;h++){if(a(l.distance[h])<r+u&&a(l.distance[h])>r-u&&o(l.altitude[h])<n+u&&o(l.altitude[h])>n-u){var d=Math.sqrt(Math.pow(a(l.distance[h])-r,2)+Math.pow(o(l.altitude[h])-n,2));var p=s[l.classification[h]];if(p&&p.visible==1){f.push({distance:l.distance[h],altitude:l.altitude[h],classification:l.classification[h],color_packed:l.color_packed[h],intensity:l.intensity[h],coords:l.coords[h]});c.push(d)}}}var v;if(f.length>0){var g=Math.min(c);var m=c.indexOf(g);if(m!=-1){v=f[m]}else{v=f[0]}}return v};return e}();var w=b;var z=r(160);var B=r(64);var K=r(129);var X=r(65);var Z={select:k["select"]};var Q=function(){e.$inject=["$http","$filter","gettextCatalog","ngeoDebounce"];function e(e,t,r,n){this.$http=e;this.$filter=t;this.gettextCatalog=r;this.ngeoDebounce_=n;this.promise=null;this.plot=null;this.measure=null;this.config=null;this.map_=null;this.cartoHighlight=new K["a"]({offset:[0,-15],positioning:"bottom-center"});this.lidarPointHighlight=new B["a"]({source:new X["a"]({}),style:new x["c"]({image:new m["a"]({fill:new O["a"]({color:"rgba(0, 0, 255, 1)"}),radius:3})})});this.lidarBuffer=new B["a"]({source:new X["a"]({})});this.profilePoints=this.getEmptyProfilePoints_();this.isPlotSetup_=false;this.line_;this.utils=new w}var t=e.prototype;t.init=function e(t,r){this.config=t;this.plot=new g(this);this.measure=new u(this);this.setMap(r)};t.clearBuffer=function e(){if(this.lidarBuffer){this.lidarBuffer.getSource().clear()}};t.setLine=function e(t){this.line_=t};t.setMap=function e(t){this.map_=t;this.cartoHighlight.setMap(t);this.lidarPointHighlight.setMap(t);this.lidarBuffer.setMap(t)};t.getEmptyProfilePoints_=function e(){return{distance:[],altitude:[],color_packed:[],intensity:[],classification:[],coords:[]}};t.getProfileByLOD=function e(t,r,n,i){var a=this.gettextCatalog;this.profilePoints=this.getEmptyProfilePoints_();if(n){this.isPlotSetup_=false}Z.select("#gmf-lidarprofile-container .lidar-error").style("visibility","hidden");var o=this.utils.getPytreeLinestring(this.line_);var s;var l=this.config.serverConfig.max_levels;if(r==0){s=this.utils.getNiceLOD(this.line_.getLength(),l)}else{var u=this.plot.updateScaleX["domain"]();o="";for(var c=0;c<t.length;c++){o+="{"+t[c][0]+","+t[c][1]+"},"}o=o.substr(0,o.length-1);s=this.utils.getNiceLOD(u[1]-u[0],l)}var f=false;Z.select("#gmf-lidarprofile-container .lod-info").html("");this.config.clientConfig.pointSum=0;var h=0;if(this.config.clientConfig.autoWidth){h=s.width}else{h=this.config.serverConfig.width}var d=a.getString("Profile width: ");Z.select("#gmf-lidarprofile-container .width-info").html(d+" "+h+"m");for(var p=0;p<s.maxLOD;p++){if(p==0){this.queryPytree_(i,this.config.serverConfig.initialLOD,p,o,r,f,h,n);p+=this.config.serverConfig.initialLOD-1}else if(p<s.maxLOD-1){this.queryPytree_(i+p,i+p+1,p,o,r,f,h,false)}else{f=true;this.queryPytree_(i+p,i+p+1,p,o,r,f,h,false)}}};t.queryPytree_=function e(i,a,o,t,s,l,r,u){var c=this;var f=this.gettextCatalog;var h=Z.select("#gmf-lidarprofile-container .lod-info");if(this.config.serverConfig.debug){var n=h.html();var d=f.getString("Loading LOD: ");n+=d+" "+i+"-"+a+"...<br>";h.html(n)}var p=this.config.serverConfig.default_point_cloud;var v=this.config.pytreeLidarprofileJsonUrl+"/profile/get?minLOD="+i+"\n      &maxLOD="+a+"&width="+r+"&coordinates="+t+"&pointCloud="+p+"&attributes=";this.$http.get(v,{headers:{"Content-Type":"text/plain; charset=x-user-defined"},responseType:"arraybuffer"}).then(function(e){if(c.config.serverConfig.debug){var t=h.html();var r=f.getString("LOD: ");var n=f.getString("loaded");t+=r+" "+i+"-"+a+" "+n+"<br>";h.html(t)}c.processBuffer_(e.data,o,s,l,u)},function(e){console.error(e)})};t.processBuffer_=function e(t,r,n,i,a){var o=Z.select("#gmf-lidarprofile-container .lidar-error");var s=new Int32Array(t,0,4);var l=s[0];var u=new Uint8Array(t,4,l);var c="";for(var f=0;f<u.length;f++){c+=String.fromCharCode(u[f])}try{JSON.parse(c)}catch(e){if(!this.isPlotSetup_){var h=Z.select("#gmf-lidarprofile-container .lidar-canvas");var d=h.node();var p=d.getContext("2d");p.clearRect(0,0,d.getBoundingClientRect().width,d.getBoundingClientRect().height);h.selectAll("*").remove();var v=this.getHTMLError_();o.style("visibility","visible");o.html(v)}return}o.style("visibility","hidden");var g=JSON.parse(c);this.config.clientConfig.pointSum+=g["points"];if(this.config.clientConfig.pointSum>this.config.serverConfig.max_point_number){console.warn("Number of points is higher than Pytree configuration max value !")}var m=g["pointAttributes"];var _=[];for(var y=0;y<m.length;y++){if(this.config.serverConfig.point_attributes[m[y]]!=undefined){_.push(this.config.serverConfig.point_attributes[m[y]])}}var b=g["scale"];if(g["points"]<3){return}var w=this.getEmptyProfilePoints_();var S=g["bytesPerPoint"];var C=t.slice(4+l);for(var O=0;O<g["points"];O++){var x=S*O;var T=new DataView(C,x,S);var E=0;for(var M=0;M<_.length;M++){if(_[M]["value"]=="POSITION_PROJECTED_PROFILE"){var A=T.getUint32(E,true);var k=A*b;w.distance.push(Math.round(100*(n+k))/100);this.profilePoints.distance.push(Math.round(100*(n+k))/100)}else if(_[M]["value"]=="CLASSIFICATION"){var j=T.getUint8(E);w.classification.push(j);this.profilePoints.classification.push(j)}else if(_[M]["value"]=="INTENSITY"){var I=T.getUint8(E);w.intensity.push(I);this.profilePoints.intensity.push(I)}else if(_[M]["value"]=="COLOR_PACKED"){var D=T.getUint8(E);var P=T.getUint8(E+1);var R=T.getUint8(E+2);w.color_packed.push([D,P,R]);this.profilePoints.color_packed.push([D,P,R])}else if(_[M]["value"]=="POSITION_CARTESIAN"){var L=T.getInt32(E,true)*b+g["boundingBox"]["lx"];var N=T.getInt32(E+4,true)*b+g["boundingBox"]["ly"];var $=T.getInt32(E+8,true)*b+g["boundingBox"]["lz"];w.coords.push([L,N]);w.altitude.push($);this.profilePoints.altitude.push($);this.profilePoints.coords.push([L,N])}E=E+_[M]["bytes"]}}var F=[0,this.line_.getLength()];var G=[this.utils.arrayMin(w.altitude),this.utils.arrayMax(w.altitude)];if(r==0&&a||!this.isPlotSetup_){this.plot.setupPlot(F,G);this.isPlotSetup_=true}this.plot.drawPoints(w)};t.getHTMLError_=function e(){var t=this.gettextCatalog;var r=t.getString("Lidar profile service error");var n=t.getString("It might be offline");var i=t.getString("Or did you attempt to draw a profile outside data extent?");var a=t.getString("Or did you attempt to draw such a small profile that no point was returned?");return'\n      <div class="lidarprofile-error">\n      <p class="bold">'+r+"</p>\n      <p>"+n+"</p>\n      <p>"+i+"</p>\n      <p>"+a+"</p>\n    "};t.updateData=function e(){this.ngeoDebounce_(this.updateData_.bind(this),200,true)()};t.updateData_=function e(){var t=this.plot.updateScaleX["domain"]();var r=this.map_?this.map_.getView().getResolution():0;r=r||0;var n=this.utils.clipLineByMeasure(this.config,r,this.line_,t[0],t[1]);this.lidarBuffer.getSource().clear();this.lidarBuffer.getSource().addFeature(n.bufferGeom);this.lidarBuffer.setStyle(n.bufferStyle);var i=t[1]-t[0];var a=this.utils.getNiceLOD(i,this.config.serverConfig.max_levels);var o=.2;if(Math.abs(t[0]-this.plot.previousDomainX[0])<o&&Math.abs(t[1]-this.plot.previousDomainX[1])<o){this.plot.drawPoints(this.profilePoints)}else{if(a.maxLOD<=this.config.serverConfig.initialLOD){this.plot.drawPoints(this.profilePoints)}else{this.getProfileByLOD(n.clippedLine,n.distanceOffset,false,0)}}this.plot.previousDomainX=t};return e}();Q.module=angular.module("gmfLidarprofileManager",[z["a"].name]);Q.module.service("gmfLidarprofileManager",Q);var J=Q;var ee=r(344);var te=r(120);var re=r(215);var ne=r(61);var ie=r(92);var ae=angular.module("gmfLidarprofilePanel",[s.module.name,J.module.name,ee["a"].name,te["a"].name,re["a"].module.name,ie["a"].module.name]);ae.value("gmfLidarprofilePanelTemplateUrl",function(e,t){var r=t["gmfLidarprofilePanelTemplateUrl"];return r!==undefined?r:"gmf/lidarprofilePanel"});ae.run(["$templateCache",function(e){e.put("gmf/lidarprofilePanel",r(492))}]);oe.$inject=["$element","$attrs","gmfLidarprofilePanelTemplateUrl"];function oe(e,t,r){return r(e,t)}ae.component_={controller:"gmfLidarprofilePanelController",bindings:{active:"=gmfLidarprofilePanelActive",map:"<gmfLidarprofilePanelMap",line:"=gmfLidarprofilePanelLine"},templateUrl:oe};ae.component("gmfLidarprofilePanel",ae.component_);ae.Controller_=function(){e.$inject=["$scope","gmfLidarprofileManager","gmfLidarprofileConfig","ngeoToolActivateMgr","ngeoCsvDownload"];function e(e,t,r,n,i){var a=this;this.ready=false;this.profileConfig_=r;this.profile=t;this.active=false;this.map=null;this.line;this.measureActive=false;this.ngeoCsvDownload_=i;this.ngeoToolActivateMgr_=n;this.tool=new ne["a"](this,"active");this.ngeoToolActivateMgr_.registerTool("mapTools",this.tool,false);e.$watch(function(){return a.active},function(e,t){if(t!==e){a.updateEventsListening_(e)}});e.$watch(function(){return a.line},function(e,t){if(t!==e){a.update_()}})}var t=e.prototype;t.$onInit=function e(){this.profile.init(this.profileConfig_,this.map)};t.initConfigAndActivateTool_=function e(){var t=this;this.profileConfig_.initProfileConfig().then(function(e){t.ready=true;t.ngeoToolActivateMgr_.activateTool(t.tool)})};t.updateEventsListening_=function e(t){if(t===true){if(!this.ready){this.initConfigAndActivateTool_()}else{this.ngeoToolActivateMgr_.activateTool(this.tool)}}else{this.clearAll();this.ngeoToolActivateMgr_.deactivateTool(this.tool)}};t.update_=function e(){this.profile.clearBuffer();if(this.line){this.profile.setLine(this.line);this.profile.getProfileByLOD([],0,true,this.profileConfig_.serverConfig.minLOD)}else{this.clearAll()}};t.clearAll=function e(){this.line=null;this.profile.setLine(null);this.profile.cartoHighlight.setPosition(undefined);this.clearMeasure();this.resetPlot()};t.setMeasureActive=function e(){this.measureActive=true;this.profile.measure.clearMeasure();this.profile.measure.setMeasureActive()};t.clearMeasure=function e(){this.measureActive=false;this.profile.measure.clearMeasure()};t.resetPlot=function e(){this.profile.clearBuffer();if(this.line){this.profile.getProfileByLOD([],0,true,0)}};t.getAvailablePointAttributes=function e(){return this.profileConfig_.clientConfig.pointAttributes.availableOptions};t.getSetSelectedPointAttribute=function e(t){if(t!==undefined){this.profileConfig_.clientConfig.pointAttributes.selectedOption=t;this.profile.plot.changeStyle(t.value)}return this.profileConfig_.clientConfig.pointAttributes.selectedOption};t.getClassification=function e(){return this.profileConfig_.serverConfig.classification_colors};t.setClassification=function e(t,r){this.profileConfig_.serverConfig.classification_colors[r].visible=t.visible;if(this.line){this.profile.plot.setClassActive(this.profileConfig_.serverConfig.classification_colors,this.profileConfig_.serverConfig.default_attribute)}};t.csvExport=function e(){if(this.line){var t=this.profile.utils.getFlatPointsByDistance(this.profile.profilePoints)||{};var r=this.profile.utils.getCSVData(t);var n=Object.keys(t[0]);n=n.map(function(e){return{name:e}});this.ngeoCsvDownload_.startDownload(r,n,"LIDAR_profile.csv")}};t.pngExport=function e(){if(this.line){this.profile.utils.downloadProfileAsImageFile(this.profileConfig_.clientConfig)}};return e}();ae.controller("gmfLidarprofilePanelController",ae.Controller_);var se=ae;var le=r(493);var ue=angular.module("gmfLidarprofileModule",[a.name,se.name,s.module.name,J.module.name]);var ce=t["a"]=ue},function(e,t,r){"use strict";var n=function h(){return{restrict:"A",link:function e(n,i,t){var r=t["ngeoSearch"];var a=n.$eval(r);var o=t["ngeoSearchDatasets"];var s=n.$eval(o);var l=s.slice();l.unshift(a);i.typeahead.apply(i,l);var u=t["ngeoSearchListeners"];var c=n.$eval(u);var f=h.adaptListeners_(c);i.on("typeahead:open",function(){n.$apply(function(){f.open()})});i.on("typeahead:close",function(){n.$apply(function(){f.close()})});i.on("typeahead:cursorchange",function(e,t,r){n.$apply(function(){f.cursorchange(e,t,r)})});i.on("typeahead:select",function(e,t,r){n.$apply(function(){f.select(e,t,r)})});i.on("typeahead:autocomplete",function(e,t,r){n.$apply(function(){f.autocomplete(e,t,r)})});i.on("typeahead:asyncreceive",function(t,e,r){n.$apply(function(){var e=i.data("tt-typeahead")["menu"]["_allDatasetsEmpty"]();f.datasetsempty(t,r,e)})})}}};n.adaptListeners_=function(e){var t;if(e===undefined){t={open:function e(){},close:function e(){},cursorchange:function e(){},datasetsempty:function e(){},select:function e(){},autocomplete:function e(){}}}else{t={open:e.open!==undefined?e.open:function(){},close:e.close!==undefined?e.close:function(){},cursorchange:e.cursorchange!==undefined?e.cursorchange:function(){},datasetsempty:e.datasetsempty!==undefined?e.datasetsempty:function(){},select:e.select!==undefined?e.select:function(){},autocomplete:e.autocomplete!==undefined?e.autocomplete:function(){}}}return t};n.module=angular.module("ngeoSearchDirective",[]);n.module.directive("ngeoSearch",n);var i=n;var f=r(137);var h=r(9);var a=r(394);var o=function e(t,n,i,a,r,o){var s=new f["a"];var l={remote:{url:t,prepare:function e(t,r){r.url=r.url.replace("%QUERY",t);return r},transform:function e(t){var r=t;if(n!==undefined){r={type:"FeatureCollection",features:r.features.filter(n)}}return s.readFeatures(r,{featureProjection:i,dataProjection:a})}},datumTokenizer:function e(){},queryTokenizer:Bloodhound.tokenizers.whitespace};var u=h["a"]({},r||{});var c=h["a"]({},o||{});if(u.remote){h["a"](c,u.remote);delete u.remote}h["a"](l,u);h["a"](l.remote,c);return new Bloodhound(l)};o.module=angular.module("ngeoSearchCreategeojsonbloodhound",[]);o.module.value("ngeoSearchCreateGeoJSONBloodhound",o);o.Function;var s=o;var d=r(10);var p=r(56);var v=r(21);var g=r(14);var l=function e(t){var n=t||{};var o=d["g"](p["a"]);var s=n.targetProjection;var l=function e(t){var r=/BOX\((.*?) (.*?),(.*?) (.*?)\)/g;var n=r.exec(t);if(n!==null){return[parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3]),parseFloat(n[4])]}else{return null}};var u=function e(t){return t.replace(/<\/?[ib]>/g,"")};var c=function e(t){var r=/<b>(.*?)<\/b>/g;var n=r.exec(t);if(n!==null){return n[1]}else{return t}};var r={remote:{url:"https://api3.geo.admin.ch/rest/services/api/SearchServer?type=locations&searchText=%QUERY",prepare:function e(t,r){r.url=r.url.replace("%QUERY",t);if(n.limit!==undefined){r.url+="&limit="+n.limit}if(n.origins!==undefined){r.url+="&origins="+n.origins}return n.prepare!==undefined?n.prepare(t,r):r},transform:function e(t){var r=t.results.map(function(e){var t=e.attrs;var r=new v["a"]([t.y,t.x]);var n=l(t.geom_st_box2d);if(s!==undefined){r.transform(o,s);if(n!==null){n=d["n"](n,o,s)}}t["geometry"]=r;t["bbox"]=n;var i=t.label;t["label_no_html"]=u(i);t["label_simple"]=c(i);var a=new g["a"](t);a.setId(t.featureId);return a});return r}},datumTokenizer:function e(){},queryTokenizer:Bloodhound.tokenizers.whitespace};var i=h["a"]({},n.options||{});var a=h["a"]({},n.remoteOptions||{});if(i.remote){h["a"](a,i.remote);delete i.remote}h["a"](r,i);h["a"](r.remote,a);return new Bloodhound(r)};l.module=angular.module("ngeoCreateLocationSearchBloodhound",[]);l.module.value("ngeoCreateLocationSearchBloodhound",l);l.Function;var u=l;var c=angular.module("ngeoSearchModule",[i.module.name,s.module.name,u.module.name]);var m=t["a"]=c},function(e,t,r){"use strict";var m=r(1);var n=r(76);var l=r(13);var i=r(78);var a=r(181);var u=r(240);var S=r(5);var _=r(14);var o=r(169);var C=r(39);var s=r(2);var O=r(3);var c=r(163);var f=r(35);var y=r(21);var g=r(31);var h=r(54);var d=r(64);var p=r(65);var v=r(199);var b=function e(t){var r=this;m["a"].assert(t.features);h["b"].call(this,{handleDownEvent:e.handleDownEvent_,handleDragEvent:e.handleDragEvent_,handleEvent:e.handleEvent,handleUpEvent:e.handleUpEvent_});this.vertexFeature_=null;this.lastPixel_=[0,0];this.modified_=false;this.rBush_=new v["a"];this.pixelTolerance_=t.pixelTolerance!==undefined?t.pixelTolerance:10;this.snappedToVertex_=false;this.changingFeature_=false;this.dragSegments_=null;this.overlay_=new d["a"]({source:new p["a"]({useSpatialIndex:false,wrapX:!!t.wrapX}),style:t.style||a["a"].getDefaultModifyStyleFunction(),updateWhileAnimating:true,updateWhileInteracting:true});this.features_=t.features;this.features_.forEach(function(e){return r.addFeature_(e)});s["a"](this.features_,"add",this.handleFeatureAdd_,this);s["a"](this.features_,"remove",this.handleFeatureRemove_,this)};S["d"](b,h["b"]);b.prototype.addFeature_=function(e){if(e.getGeometry().getType()==="Polygon"&&!!e.get(l["a"].IS_CIRCLE)){var t=e.getGeometry();this.writeCircleGeometry_(e,t);var r=this.getMap();if(r){this.handlePointerAtPixel_(this.lastPixel_,r)}}};b.prototype.willModifyFeatures_=function(e){if(!this.modified_){this.modified_=true;var t=new i["a"]("modifystart",{features:this.features_});this.dispatchEvent(t)}};b.prototype.removeFeature_=function(e){this.removeFeatureSegmentData_(e);if(this.vertexFeature_&&this.features_.getLength()===0){this.overlay_.getSource().removeFeature(this.vertexFeature_);this.vertexFeature_=null}};b.prototype.removeFeatureSegmentData_=function(t){var e=this.rBush_;var r=[];e.forEach(function(e){if(t===e.feature){r.push(e)}});for(var n=r.length-1;n>=0;--n){e.remove(r[n])}};b.prototype.setMap=function(e){this.overlay_.setMap(e);h["b"].prototype.setMap.call(this,e)};b.prototype.handleFeatureAdd_=function(e){var t=e.element;m["a"].assertInstanceof(t,_["a"],"feature should be an ol.Feature");this.addFeature_(t)};b.prototype.handleFeatureRemove_=function(e){var t=e.element;this.removeFeature_(t)};b.prototype.writeCircleGeometry_=function(e,t){var r=t.getCoordinates();var n,i,a,o,s,l,u;for(o=0,s=r.length;o<s;++o){n=r[o];for(i=0,a=n.length-1;i<a;++i){l=n.slice(i,i+2);u={feature:e,geometry:t,depth:[o],index:i,segment:l};this.rBush_.insert(O["b"](l),u)}}};b.prototype.createOrUpdateVertexFeature_=function(e){var t=this.vertexFeature_;if(!t){t=new _["a"](new y["a"](e));this.vertexFeature_=t;this.overlay_.getSource().addFeature(t)}else{var r=t.getGeometry();r.setCoordinates(e)}return t};b.compareIndexes_=function(e,t){return e.index-t.index};b.handleDownEvent_=function(e){this.handlePointerAtPixel_(e.pixel,e.map);this.dragSegments_=[];this.modified_=false;var t=this.vertexFeature_;if(t){var r=t.getGeometry();var n=r.getCoordinates();var i=O["b"]([n]);var a=this.rBush_.getInExtent(i);var o={};a.sort(b.compareIndexes_);for(var s=0,l=a.length;s<l;++s){var u=a[s];var c=u.segment;var f=S["c"](u.feature);var h=u.depth;if(h){f+="-"+h.join("-")}if(!o[f]){o[f]=new Array(2)}if(C["e"](c[0],n)&&!o[f][0]){this.dragSegments_.push([u,0]);o[f][0]=u}else if(C["e"](c[1],n)&&!o[f][1]){this.dragSegments_.push([u,1]);o[f][1]=u}}}return!!this.vertexFeature_};b.handleDragEvent_=function(e){this.willModifyFeatures_(e);var t=e.coordinate;var r=this.dragSegments_[0][0].geometry;var n=O["x"](r.getExtent());var i=new f["a"]([n,t]);var a=new c["a"](n,i.getLength());var o=Object(g["b"])(a,64).getCoordinates();this.setGeometryCoordinates_(r,o);var s=u["a"].getAzimut(i);this.features_.getArray()[0].set(l["a"].AZIMUT,s);this.createOrUpdateVertexFeature_(t)};b.handleUpEvent_=function(e){this.rBush_.clear();this.writeCircleGeometry_(this.dragSegments_[0][0].feature,this.dragSegments_[0][0].geometry);if(this.modified_){var t=new i["a"]("modifyend",{features:this.features_});this.dispatchEvent(t);this.modified_=false}return false};b.handleEvent=function(e){if(!(e instanceof o["a"])){return true}var t;if(!e.map.getView().getInteracting()&&e.type=="pointermove"&&!this.handlingDownUpSequence){this.handlePointerMove_(e)}return h["b"].prototype.handleEvent.call(this,e)&&!t};b.prototype.handlePointerMove_=function(e){this.lastPixel_=e.pixel;this.handlePointerAtPixel_(e.pixel,e.map)};b.prototype.handlePointerAtPixel_=function(e,t){var n=t.getCoordinateFromPixel(e);var r=function e(t,r){return C["i"](n,t.segment)-C["i"](n,r.segment)};var i=t.getCoordinateFromPixel([e[0]-this.pixelTolerance_,e[1]+this.pixelTolerance_]);var a=t.getCoordinateFromPixel([e[0]+this.pixelTolerance_,e[1]-this.pixelTolerance_]);var o=O["b"]([i,a]);var s=this.rBush_;var l=s.getInExtent(o);if(l.length>0){l.sort(r);var u=l[0];var c=u.segment;var f=C["c"](n,c);var h=t.getPixelFromCoordinate(f);if(Math.sqrt(C["h"](e,h))<=this.pixelTolerance_){var d=t.getPixelFromCoordinate(c[0]);var p=t.getPixelFromCoordinate(c[1]);var v=C["h"](h,d);var g=C["h"](h,p);var m=Math.sqrt(Math.min(v,g));this.snappedToVertex_=m<=this.pixelTolerance_;if(this.snappedToVertex_){f=v>g?c[1]:c[0];this.createOrUpdateVertexFeature_(f);var _={};_[S["c"](c)]=true;var y;for(var b=1,w=l.length;b<w;++b){y=l[b].segment;if(C["e"](c[0],y[0])&&C["e"](c[1],y[1])||C["e"](c[0],y[1])&&C["e"](c[1],y[0])){_[S["c"](y)]=true}else{break}}return}}}if(this.vertexFeature_){this.overlay_.getSource().removeFeature(this.vertexFeature_);this.vertexFeature_=null}};b.prototype.setGeometryCoordinates_=function(e,t){this.changingFeature_=true;e.setCoordinates(t);this.changingFeature_=false};var w=b;var x=function e(t){var r=this;m["a"].assert(t.features);h["b"].call(this,{handleDownEvent:this.handleDown_,handleDragEvent:this.handleDrag_,handleUpEvent:this.handleUp_});this.modified_=false;this.vectorPoints_=new d["a"]({source:new p["a"]({wrapX:!!t.wrapX}),visible:this.getActive(),style:t.style||a["a"].getDefaultModifyStyleFunction(),updateWhileAnimating:true,updateWhileInteracting:true});this.features_=t.features;this.feature_=null;this.cache_={};this.params_=null;s["a"](this.features_,"add",this.handleFeatureAdd_,this);s["a"](this.features_,"remove",this.handleFeatureRemove_,this);this.features_.forEach(function(e){r.addFeature_(e)})};S["d"](x,h["b"]);x.prototype.setActive=function(e){h["b"].prototype.setActive.call(this,e);if(this.vectorPoints_){this.vectorPoints_.setVisible(e)}};x.prototype.addFeature_=function(t){var e=t.getGeometry();if(e instanceof g["a"]){var r=S["c"](t);var n=this.cache_[r];if(n){return}var i=this.vectorPoints_.getSource();var a=e.getCoordinates()[0];while(a.length>4){if(a[0][0]<a[1][0]&&a[0][1]<=a[1][1]){a.pop()}else{a.shift()}}var o=[];var s;var l;a.forEach(function(e){s=new y["a"](e);l=new _["a"]({corner:true,geometry:s,siblingX:null,siblingY:null,boxFeature:t});o.push(l)},this);n={corners:o};this.cache_[r]=n;var u;var c;o.forEach(function(e,t){u=o[t-1];if(!u){u=o[o.length-1]}c=o[t+1];if(!c){c=o[0]}if(t%2===0){e.set("siblingX",c);e.set("siblingY",u)}else{e.set("siblingX",u);e.set("siblingY",c)}},this);i.addFeatures(o)}};x.prototype.willModifyFeatures_=function(e){if(!this.modified_){this.modified_=true;var t=new i["a"]("modifystart",{features:this.features_});this.dispatchEvent(t);this.params_=this.initializeParams_()}};x.prototype.initializeParams_=function(){var e=this.feature_;var t=e.get("siblingX");m["a"].assertInstanceof(t,_["a"]);var r=t.get("siblingY");m["a"].assertInstanceof(r,_["a"]);var n=r.getGeometry();m["a"].assertInstanceof(n,y["a"]);var i=n.getCoordinates();var a=this.getMap().getPixelFromCoordinate(i);var o=r.get("siblingX");m["a"].assertInstanceof(o,_["a"]);var s=o.getGeometry();m["a"].assertInstanceof(s,y["a"]);var l=s.getCoordinates();var u=this.getMap().getPixelFromCoordinate(l);var c=[u[0]-a[0],u[1]-a[1]];var f=Math.sqrt(c[0]*c[0]+c[1]*c[1]);c[0]/=f;c[1]/=f;var h=t.getGeometry();m["a"].assertInstanceof(h,y["a"]);var d=h.getCoordinates();var p=this.getMap().getPixelFromCoordinate(d);var v=[p[0]-a[0],p[1]-a[1]];var g=Math.sqrt(v[0]*v[0]+v[1]*v[1]);v[0]/=g;v[1]/=g;if(isNaN(c[0])&&isNaN(v[0])){c=[0,1];v=[1,0]}else if(isNaN(c[0])){c=[v[1],-v[0]]}else if(isNaN(v[0])){v=[c[1],-c[0]]}return{originCoordinate:i,originPixel:a,siblingXPoint:s,siblingYPoint:h,vectorX:c,vectorY:v}};x.prototype.removeFeature_=function(e){var t=S["c"](e);var r=this.cache_[t];var n=r.corners;for(var i=0;i<n.length;i++){this.vectorPoints_.getSource().removeFeature(n[i])}this.feature_=null;n.length=0;delete this.cache_[t]};x.prototype.setMap=function(e){this.vectorPoints_.setMap(e);h["b"].prototype.setMap.call(this,e)};x.prototype.handleFeatureAdd_=function(e){var t=e.element;m["a"].assertInstanceof(t,_["a"],"feature should be an ol.Feature");this.addFeature_(t)};x.prototype.handleFeatureRemove_=function(e){var t=e.element;this.removeFeature_(t)};x.prototype.handleDown_=function(e){var t=e.map;var r=t.forEachFeatureAtPixel(e.pixel,function(e){return e.get("siblingX")&&e.get("siblingY")?e:undefined});if(r){this.feature_=r;return true}return false};x.prototype.handleDrag_=function(e){this.willModifyFeatures_(e);var t=this.feature_;var r=t.getGeometry();if(r instanceof y["a"]){r.setCoordinates(e.coordinate);var n=e.pixel;var i=this.params_.originPixel;var a=this.params_.siblingXPoint;var o=this.params_.siblingYPoint;var s=this.params_.vectorX;var l=this.params_.vectorY;var u=this.params_.originCoordinate;var c=this.calculateNewPixel_(i,n,s);var f=this.getMap().getCoordinateFromPixel(c);a.setCoordinates(f);var h=this.calculateNewPixel_(i,n,l);var d=this.getMap().getCoordinateFromPixel(h);o.setCoordinates(d);var p=t.get("boxFeature");var v=p.getGeometry();m["a"].assertInstanceof(v,g["a"]);v.setCoordinates([[e.coordinate,f,u,d,e.coordinate]])}};x.prototype.calculateNewPixel_=function(e,t,r){var n=[t[0]-e[0],t[1]-e[1]];var i=n[0]*r[0]+n[1]*r[1];var a=[r[0]*i,r[1]*i];return[a[0]+e[0],a[1]+e[1]]};x.prototype.handleUp_=function(e){if(this.modified_){var t=new i["a"]("modifyend",{features:this.features_});this.dispatchEvent(t);this.params_=null;this.modified_=false}return false};x.CacheItem;x.ModifyParams;var T=x;var E=r(41);var M=r(47);var A=r(23);var k=r(205);var j=function e(t){m["a"].assert(t.features);this.features_=t.features;this.listenerKeys_=[];this.interactions_=[];this.otherFeatures_=new A["a"];this.interactions_.push(new k["a"]({deleteCondition:n["a"].deleteCondition,features:this.otherFeatures_,pixelTolerance:t.pixelTolerance,style:t.style,wrapX:t.wrapX}));this.circleFeatures_=new A["a"];this.interactions_.push(new w({features:this.circleFeatures_,pixelTolerance:t.pixelTolerance,style:t.style,wrapX:t.wrapX}));this.rectangleFeatures_=new A["a"];this.interactions_.push(new T({features:this.rectangleFeatures_,pixelTolerance:t.pixelTolerance,style:t.style,wrapX:t.wrapX}));M["a"].call(this,{handleEvent:E["b"]})};S["d"](j,M["a"]);j.prototype.setActive=function(e){M["a"].prototype.setActive.call(this,e);this.setState_()};j.prototype.setMap=function(t){var e=this.interactions_;var r=this.getMap();if(r){e.forEach(function(e){r.removeInteraction(e)})}M["a"].prototype.setMap.call(this,t);if(t){e.forEach(function(e){t.addInteraction(e)})}this.setState_()};j.prototype.setState_=function(){var t=this;var r=this.getMap();var n=this.getActive();var e=this.interactions_;var i=this.listenerKeys_;e.forEach(function(e){e.setActive(n&&!!r)});if(n&&r){this.features_.forEach(function(e){return t.addFeature_(e)});i.push(s["a"](this.features_,"add",this.handleFeaturesAdd_,this),s["a"](this.features_,"remove",this.handleFeaturesRemove_,this))}else{i.forEach(s["e"]);i.length=0;this.features_.forEach(function(e){return t.removeFeature_(e)})}};j.prototype.handleFeaturesAdd_=function(e){var t=e.element;m["a"].assertInstanceof(t,_["a"],"feature should be an ol.Feature");this.addFeature_(t)};j.prototype.handleFeaturesRemove_=function(e){var t=e.element;this.removeFeature_(t)};j.prototype.addFeature_=function(e){var t=this.getFeatureCollection_(e);t.push(e)};j.prototype.removeFeature_=function(e){var t=this.getFeatureCollection_(e);t.remove(e)};j.prototype.getFeatureCollection_=function(e){var t;var r=e.get(l["a"].IS_CIRCLE);var n=e.get(l["a"].IS_RECTANGLE);if(r===true||r==="true"){t=this.circleFeatures_}else if(n===true||n==="true"){t=this.rectangleFeatures_}else{t=this.otherFeatures_}return t};var I=t["a"]=j},function(e,t,r){"use strict";var n=r(179);var i=r(253);var a=r(315);var o=r(289);var f=r(1);var h=r(8);function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function l(e,t,r){if(t)s(e.prototype,t);if(r)s(e,r);return e}var u=function(){e.$inject=["$rootScope"];function e(e){var t=this;this.rootScope_=e;this.currentDataSourceId_=null;this.currentDataSourceItems_=[];this.localStorageKey_="gmf_savedfilters";this.useLocalStorage_=true;try{if("localStorage"in window){window.localStorage["test"]="";delete window.localStorage["test"]}else{this.useLocalStorage_=false}}catch(e){console.error(e);this.useLocalStorage_=false}this.items_=[];this.rootScope_.$watchCollection(function(){return t.items},function(){t.rePopulateCurrentDataSourceItems_()});if(this.useLocalStorage_){this.loadItemsFromLocalStorage_()}}var t=e.prototype;t.loadItemsFromLocalStorage_=function e(){if(window.localStorage[this.localStorageKey_]){var t=JSON.parse(window.localStorage[this.localStorageKey_]);f["a"].assertArray(t);this.items_=t}};t.indexOfItem=function e(t,r){var n;var i=-1;for(var a=0,o=this.items_.length;a<o;a++){n=this.items[a];if(n.dataSourceId===r&&n.name===t){i=a;break}}return i};t.save=function e(t){var r=this.indexOfItem(t.name,t.dataSourceId);if(r!==-1){this.items[r]=t}else{this.items.push(t)}if(this.useLocalStorage_){this.saveItemsInLocalStorage_()}};t.remove=function e(t){var r=h["j"](this.items,t);if(r&&this.useLocalStorage_){this.saveItemsInLocalStorage_()}};t.saveItemsInLocalStorage_=function e(){window.localStorage[this.localStorageKey_]=JSON.stringify(this.items)};t.rePopulateCurrentDataSourceItems_=function e(){this.currentDataSourceItems_.length=0;if(this.currentDataSourceId_!==null){for(var t=this.items,r=Array.isArray(t),n=0,t=r?t:t[Symbol.iterator]();;){var i;if(r){if(n>=t.length)break;i=t[n++]}else{n=t.next();if(n.done)break;i=n.value}var a=i;if(a.dataSourceId===this.currentDataSourceId_){this.currentDataSourceItems_.push(a)}}}};l(e,[{key:"currentDataSourceItems",get:function e(){return this.currentDataSourceItems_}},{key:"currentDataSourceId",set:function e(t){this.currentDataSourceId_=t;this.rePopulateCurrentDataSourceItems_()}},{key:"items",get:function e(){return this.items_}}]);return e}();u.module=angular.module("gmfSavedFilters",[]);u.module.service("gmfSavedFilters",u);u.Item=function(){};u.Item.prototype.condition;u.Item.prototype.customRules;u.Item.prototype.dataSourceId;u.Item.prototype.directedRules;u.Item.prototype.name;var c=u;var d=r(218);var p=r(206);var v=r(84);var g=r(162);var m=r(333);var _=r(2);var y=r(105);var b=r(177);var w=angular.module("gmfFilterselector",[n["a"].module.name,i["a"].module.name,a["a"].module.name,y["a"].module.name,p["a"].module.name,d["a"].name,g["a"].module.name,m["a"].name,c.module.name]);w.run(["$templateCache",function(e){e.put("gmf/filters/filterselectorcomponent",r(474))}]);w.value("gmfFilterselectorTemplateUrl",function(e){var t=e["gmfFilterselectorTemplateUrl"];return t!==undefined?t:"gmf/filters/filterselectorcomponent"});S.$inject=["$attrs","gmfFilterselectorTemplateUrl"];function S(e,t){return t(e)}w.Controller_=function(){e.$inject=["$scope","$timeout","gettextCatalog","gmfDataSourceBeingFiltered","gmfDataSourcesHelper","gmfSavedFilters","gmfUser","ngeoNotification","ngeoFeatureOverlayMgr","ngeoRuleHelper"];function e(e,t,r,n,i,a,o,s,l,u){var c=this;this.active;e.$watch(function(){return c.active},this.handleActiveChange_.bind(this));this.map;this.toolGroup;this.timeout_=t;this.gettextCatalog_=r;this.gmfDataSourceBeingFiltered=n;e.$watch(function(){return c.gmfDataSourceBeingFiltered.dataSource},this.handleSelectedDataSourceChange_.bind(this));this.gmfDataSourcesHelper_=i;this.gmfSavedFilters=a;e.$watchCollection(function(){return c.gmfSavedFilters.currentDataSourceItems},function(){if(c.gmfSavedFilters.currentDataSourceItems.length===0&&c.saveFilterManageModalShown){c.saveFilterManageModalShown=false}});this.gmfUser_=o;e.$watch(function(){return c.gmfUser_.functionalities},this.handleGmfUserFunctionalitiesChange_.bind(this));this.ngeoNotification_=s;this.featureOverlay=f["a"].assert(l.getFeatureOverlay());this.ngeoRuleHelper_=u;this.aRuleIsActive=false;this.customRules=null;this.directedRules=null;this.filtrableDataSources=[];this.filtrableLayerNodeNames_=null;this.gmfDataSources_=i.collection;this.listenerKeys_=[];this.readyDataSource=null;this.ruleCache_={};this.saveFilterSaveModalShown=false;e.$watch(function(){return c.saveFilterSaveModalShown},function(){c.saveFilterName=""});this.saveFilterName="";this.saveFilterManageModalShown=false;this.enableDataSourceRegistration_=false;e.$watch(function(){return c.enableDataSourceRegistration_},this.handleEnableDataSourceRegistrationChange_.bind(this));this.defaultFiltrableDataSourceName_;this.toggleDataSourceRegistration_()}var t=e.prototype;t.handleGmfUserFunctionalitiesChange_=function e(){var t=this.gmfUser_.functionalities;if(t&&t["filterable_layers"]){this.filtrableLayerNodeNames_=t["filterable_layers"]}else{this.filtrableLayerNodeNames_=null}if(t&&t["preset_layer_filter"]&&t["preset_layer_filter"][0]){this.defaultFiltrableDataSourceName_=t["preset_layer_filter"][0]}else{this.defaultFiltrableDataSourceName_=undefined}this.toggleDataSourceRegistration_()};t.toggleDataSourceRegistration_=function e(){var t=!!this.filtrableLayerNodeNames_;if(this.enableDataSourceRegistration_!==t){this.enableDataSourceRegistration_=t}};t.handleActiveChange_=function e(t){var r=this;if(!t){this.aRuleIsActive=false;this.timeout_(function(){r.gmfDataSourceBeingFiltered.dataSource=null})}};t.handleEnableDataSourceRegistrationChange_=function e(t){var r=this.listenerKeys_;if(t){r.push(_["a"](this.gmfDataSources_,"add",this.handleDataSourcesAdd_,this),_["a"](this.gmfDataSources_,"remove",this.handleDataSourcesRemove_,this));this.gmfDataSources_.forEach(this.registerDataSource_,this)}else{r.forEach(_["e"]);r.length=0;this.filtrableDataSources.length=0}};t.handleDataSourcesAdd_=function e(t){var r=t.element;if(r instanceof o["a"]){this.registerDataSource_(r)}};t.handleDataSourcesRemove_=function e(t){var r=t.element;if(r instanceof o["a"]){this.unregisterDataSource_(r)}};t.registerDataSource_=function e(t){if(t.filtrable===null){t.filtrable=this.isDataSourceFiltrable_(t)}if(t.filtrable){this.filtrableDataSources.push(t);if(this.defaultFiltrableDataSourceName_!==undefined&&t.name===this.defaultFiltrableDataSourceName_){this.gmfDataSourceBeingFiltered.dataSource=t}}};t.unregisterDataSource_=function e(t){if(t.filtrable){h["j"](this.filtrableDataSources,t);if(this.gmfDataSourceBeingFiltered.dataSource===t){this.gmfDataSourceBeingFiltered.dataSource=null}}};t.isDataSourceFiltrable_=function e(t,r){var n=true;var i=this.gettextCatalog_;var a=r!==false;var o=f["a"].assert(this.filtrableLayerNodeNames_);var s=[];if(h["f"](o,t.name)){if(!t.supportsWFS){s.push(i.getString("The data source doesn't support WFS, which is required "+"to fetch the attributes to build the filter rules."))}if(!t.ogcLayers||!t.ogcLayers.length){s.push(i.getString("The data source must have only 1 ogcLayer defined."))}else if(!t.ogcLayers[0].queryable){s.push(i.getString("The ogcLayer within the data source must be queryable."))}n=!s.length;if(a&&!n){var l=i.getString("The following data source is marked as being filtrable,\n          but is missing some requirements: ");var u=t.name+" ("+t.id+").";var c=i.getString("Please, contact your administrator about this.\n          Here are the reasons: ");s.unshift(l+" "+u+" "+c);console.warn(s.join(" "));this.ngeoNotification_.notify({msg:s.join(" "),type:v["a"].Type.WARNING})}}else{n=false}return n};t.handleSelectedDataSourceChange_=function e(t){var u=this;this.aRuleIsActive=false;this.customRules=null;this.directedRules=null;this.readyDataSource=null;this.gmfSavedFilters.currentDataSourceId=null;if(!t){return}if(!this.active){this.active=true}this.gmfDataSourcesHelper_.prepareFiltrableDataSource(t).then(function(e){var t=u.getRuleCacheItem_(e);if(!t){t={customRules:[],directedRules:[]};u.setRuleCacheItem_(e,t);if(e.gmfLayer.metadata&&e.gmfLayer.metadata.directedFilterAttributes&&e.gmfLayer.metadata.directedFilterAttributes.length){var r=e.gmfLayer.metadata.directedFilterAttributes;var n=f["a"].assert(e.attributes);for(var i=n,a=Array.isArray(i),o=0,i=a?i:i[Symbol.iterator]();;){var s;if(a){if(o>=i.length)break;s=i[o++]}else{o=i.next();if(o.done)break;s=o.value}var l=s;if(h["f"](r,l.name)){t.directedRules.push(u.ngeoRuleHelper_.createRuleFromAttribute(l))}}}}u.customRules=t.customRules;u.directedRules=t.directedRules;u.readyDataSource=e;u.gmfSavedFilters.currentDataSourceId=e.id})};t.getRuleCacheItem_=function e(t){return this.ruleCache_[t.id]||null};t.setRuleCacheItem_=function e(t,r){this.ruleCache_[t.id]=r};t.saveFilterShowModal=function e(){this.saveFilterSaveModalShown=true};t.saveFilterSave=function e(){var t=this.saveFilterName;var r=f["a"].assert(this.readyDataSource);var n=r.id;var i=this.gmfSavedFilters.indexOfItem(t,n)!==-1;var a=r.filterCondition;var o=this.gettextCatalog_.getString("A filter with the same name already exists.\n      Do you want to overwrite it?");if(!i||confirm(o)){var s=this.customRules?this.ngeoRuleHelper_.serializeRules(this.customRules):[];var l=this.directedRules?this.ngeoRuleHelper_.serializeRules(this.directedRules):[];var u={condition:a,customRules:s,dataSourceId:n,directedRules:l,name:t};this.gmfSavedFilters.save(u);this.saveFilterSaveModalShown=false}};t.saveFilterLoadItem=function e(t){var r=this;var n=f["a"].assert(this.readyDataSource);this.customRules=null;this.directedRules=null;var i=this.ngeoRuleHelper_.createRules(t.customRules);var a=this.ngeoRuleHelper_.createRules(t.directedRules);this.timeout_(function(){r.customRules=i;r.directedRules=a;n.filterCondition=t.condition;var e=f["a"].assert(r.getRuleCacheItem_(n));e.customRules=i;e.directedRules=a})};t.saveFilterManage=function e(){this.saveFilterManageModalShown=true};t.saveFilterRemoveItem=function e(t){this.gmfSavedFilters.remove(t)};return e}();w.Controller_.RuleCache;w.Controller_.RuleCacheItem;w.component("gmfFilterselector",{bindings:{active:"=",map:"<",toolGroup:"<"},controller:w.Controller_,templateUrl:S});var C=w;var O=angular.module("gmfFiltersModule",[C.name,c.module.name]);var x=t["a"]=O},function(e,t,r){"use strict";var n=r(207);var i=r(1);var a=r(129);var o=r(10);var s=r(2);var l=r(9);var u=angular.module("gmfContextualdata",[n["a"].module.name]);u.directive_=function(){return{restrict:"A",scope:false,controller:"GmfContextualdataController as cdCtrl",bindToController:{map:"<gmfContextualdataMap",projections:"<gmfContextualdataProjections",callback:"<gmfContextualdataCallback"},link:function e(t,r,n,i){i.init()}}};u.directive("gmfContextualdata",u.directive_);u.Controller_=function(e,t,r,n){this.map;this.projections;this.callback;this.overlay_;this.$compile_=e;this.timeout_=t;this.$scope_=r;this.gmfRaster_=n;angular.element("body").on("mousedown",this.hidePopover.bind(this))};u.Controller_.$inject=["$compile","$timeout","$scope","gmfRaster"];u.Controller_.prototype.init=function(){this.preparePopover_();var e=this.map.getTargetElement();i["a"].assertElement(e);s["a"](e,"contextmenu",this.handleMapContextMenu_,this)};u.Controller_.prototype.handleMapContextMenu_=function(r){var n=this;this.$scope_.$apply(function(){var e=n.map.getEventPixel(r);var t=n.map.getCoordinateFromPixel(e);n.setContent_(t);r.preventDefault();n.hidePopover();n.showPopover();n.timeout_(function(){n.overlay_.setPosition(t)})})};u.Controller_.prototype.setContent_=function(r){var n=this.$scope_.$new(true);this.$compile_(this.content_)(n);var i=this.map.getView().getProjection().getCode();this.projections.forEach(function(e){var t=o["m"](r,i,"EPSG:"+e);n["coord_"+e]=t;n["coord_"+e+"_eastern"]=t[0];n["coord_"+e+"_northern"]=t[1]});var e=function(e){l["a"](n,e);if(this.callback){l["a"](n,this.callback.call(this,r,e))}}.bind(this);var t=function e(t){console.error("Error on getting the raster.")};this.gmfRaster_.getRaster(r).then(e,t)};u.Controller_.prototype.preparePopover_=function(){var e=document.createElement("DIV");e.classList.add("popover");e.classList.add("bottom");e.classList.add("gmf-contextualdata");angular.element(e).css("position","relative");var t=document.createElement("DIV");t.classList.add("arrow");e.appendChild(t);this.content_=document.createElement("DIV");this.content_.setAttribute("gmf-contextualdatacontent","");this.content_.classList.add("popover-content");e.appendChild(this.content_);this.overlay_=new a["a"]({element:e,stopEvent:true,autoPan:true,autoPanAnimation:{duration:250},positioning:"top-center"});this.map.addOverlay(this.overlay_)};u.Controller_.prototype.showPopover=function(){var e=this.overlay_.getElement();angular.element(e).css("display","block")};u.Controller_.prototype.hidePopover=function(){var e=this.overlay_.getElement();angular.element(e).css("display","none")};u.controller("GmfContextualdataController",u.Controller_);u.contentDirective_=function(e){return{restrict:"A",scope:true,templateUrl:e}};u.contentDirective_.$inject=["gmfContextualdatacontentTemplateUrl"];u.directive("gmfContextualdatacontent",u.contentDirective_);var c=u;var f=r(430);var h=angular.module("gmfContextualdataModule",[c.name]);var d=t["a"]=h},function(e,t,r){"use strict";var n=r(207);var u=r(1);var i=r(160);var a=r(2);var o=r(177);var s=angular.module("gmfRasterComponent",[n["a"].module.name,i["a"].name]);s.run(["$templateCache",function(e){e.put("gmf/raster/widgetComponent",r(505))}]);s.value("gmfElevationwidgetTemplateUrl",function(e){var t=e["gmfElevationwidgetTemplateUrl"];return t!==undefined?t:"gmf/raster/widgetComponent"});l.$inject=["$attrs","gmfElevationwidgetTemplateUrl"];function l(e,t){return t(e)}s.component_=function(){return{restrict:"A",controller:"GmfElevationController as ctrl",bindToController:true,scope:{active:"<gmfElevationActive",elevation:"=gmfElevationElevation",layersconfig:"=gmfElevationLayersconfig",loading:"=?gmfElevationLoading",layer:"<gmfElevationLayer",map:"=gmfElevationMap"},link:function e(t,r,n){var i=t["ctrl"];t.$watch(function(){return i.active},function(e){this.toggleActive_(e)}.bind(i));t.$watch(function(){return i.layer},function(e){this.layer=e;this.elevation=null}.bind(i))}}};s.directive("gmfElevation",s.component_);s.Controller_=function(e,t,r,n,i){this.filter_=t;this.ngeoDebounce_=r;this.gmfRaster_=n;this.gettextCatalog=i;this.layersConfig;this.active;this.elevation;this.layer;this.map;this.listenerKeys_=[];this.scope_=e;this.inViewport_=false;this.loading=false};s.Controller_.$inject=["$scope","$filter","ngeoDebounce","gmfRaster","gettextCatalog"];s.Controller_.prototype.toggleActive_=function(e){var t=this;this.elevation=undefined;if(e){u["a"].assert(this.listenerKeys_.length===0);this.listenerKeys_.push(a["a"](this.map,"pointermove",function(e){var t=this;this.scope_.$apply(function(){t.inViewport_=true;t.elevation=undefined;t.loading=false})},this));this.listenerKeys_.push(a["a"](this.map,"pointermove",this.ngeoDebounce_(this.pointerStop_.bind(this),500,true)));this.listenerKeys_.push(a["a"](this.map.getViewport(),"mouseout",function(){t.scope_.$apply(function(){t.elevation=undefined;t.inViewport_=false;t.loading=false})}))}else{this.elevation=undefined;this.listenerKeys_.forEach(a["e"]);this.listenerKeys_.length=0}};s.Controller_.prototype.pointerStop_=function(e){if(this.inViewport_){this.loading=true;var t={layers:this.layer};this.gmfRaster_.getRaster(e.coordinate,t).then(this.getRasterSuccess_.bind(this),this.getRasterError_.bind(this))}};s.Controller_.prototype.getRasterSuccess_=function(e){u["a"].assert(this.layer,"A layer should be selected");var t=e[this.layer];if(t!==undefined&&t!==null){var r=this.layersconfig[this.layer]||{};var n=r.filter||"number";var i=r.args||[];var a=r.hasOwnProperty("postfix")?r.postfix:"m";var o=a.length>0?r.hasOwnProperty("separator")?r.separator:" ":"";var s=Array.prototype.concat([t],i);this.elevation=this.filter_(n).apply(void 0,s)+o+a}else{var l=this.gettextCatalog;this.elevation=l.getString("No value")}this.loading=false};s.Controller_.prototype.getRasterError_=function(){console.error("Error on getting the raster.");this.elevation=undefined;this.loading=false};s.controller("GmfElevationController",s.Controller_);s.widgetComponent_={controller:"gmfElevationwidgetController as ctrl",bindings:{map:"<gmfElevationwidgetMap",layers:"<gmfElevationwidgetLayers",layersconfig:"=gmfElevationwidgetLayersconfig",active:"<gmfElevationwidgetActive"},templateUrl:l};s.component("gmfElevationwidget",s.widgetComponent_);s.WidgetController_=function(){this.map;this.layers;this.layersconfig;this.active;this.selectedElevationLayer};s.WidgetController_.prototype.$onInit=function(){this.selectedElevationLayer=this.layers[0]};s.controller("gmfElevationwidgetController",s.WidgetController_);s.LayerConfig;var c=s;var f=angular.module("gmfRasterModule",[c.name,n["a"].module.name]);var h=t["a"]=f},function(e,t,r){"use strict";var n=r(172);var i=r(22);var a=r(2);var o=r(177);var s=angular.module("gmfThemeSelectorComponent",[n["a"].module.name,i["a"].module.name]);s.run(["$templateCache",function(e){e.put("gmf/theme/selectorComponent",r(513))}]);s.value("gmfThemeSelectorTemplateUrl",function(e){var t=e["gmfThemeSelectorTemplateUrl"];return t!==undefined?t:"gmf/theme/selectorComponent"});l.$inject=["$attrs","gmfThemeSelectorTemplateUrl"];function l(e,t){return t(e)}s.component_={bindings:{filter:"<gmfThemeselectorFilter"},controller:"gmfThemeselectorController",templateUrl:l};s.component("gmfThemeselector",s.component_);s.Controller_=function(e,t,r){this.gmfThemeManager=t;this.gmfThemes_=r;this.themes;this.filter;this.listenerKeys_=[];this.listenerKeys_.push(a["a"](this.gmfThemes_,"change",this.setThemes_,this));e.$on("$destroy",this.handleDestroy_.bind(this))};s.Controller_.$inject=["$scope","gmfThemeManager","gmfThemes"];s.Controller_.prototype.setThemes_=function(){var t=this;this.gmfThemes_.getThemesObject().then(function(e){t.themes=t.filter?e.filter(t.filter):e})};s.Controller_.prototype.setTheme=function(e,t){if(e){this.gmfThemeManager.addTheme(e,t)}};s.Controller_.prototype.handleDestroy_=function(){this.listenerKeys_.forEach(a["e"]);this.listenerKeys_.length=0};s.controller("gmfThemeselectorController",s.Controller_);var u=s;var c=angular.module("gmfThemeModule",[u.name,n["a"].module.name,i["a"].module.name]);var f=t["a"]=c},function(e,t,r){"use strict";var s=r(1);var n=r(2);var u=r(14);var i=r(129);var o=r(35);var l=r(21);var c=r(9);var f=r(66);var h=r(30);var d=r(11);var a=r(215);var p=r(105);var v=r(362);var g=r(177);var m=angular.module("gmfProfile",[a["a"].module.name,p["a"].module.name,v["a"].name]);m.value("gmfProfileTemplateUrl",function(e,t){var r=t["gmfProfileTemplateurl"];return r!==undefined?r:"gmf/profile"});m.run(["$templateCache",function(e){e.put("gmf/profile",r(503))}]);_.$inject=["$element","$attrs","gmfProfileTemplateUrl"];function _(e,t,r){return r(e,t)}m.component_={controller:"GmfProfileController as ctrl",bindings:{active:"=gmfProfileActive",line:"=gmfProfileLine",getMapFn:"&?gmfProfileMap",getLinesConfigurationFn:"&gmfProfileLinesconfiguration",getHoverPointStyleFn:"&?gmfProfileHoverpointstyle",getNbPointsFn:"&?gmfProfileNumberofpoints",getOptionsFn:"&?gmfProfileOptions"},templateUrl:_};m.component("gmfProfile",m.component_);m.Controller_=function(e,t,r,n,i,a,o,s){var l=this;this.$scope_=e;this.$http_=t;this.$element_=r;this.$filter_=n;this.gettextCatalog_=i;this.pointHoverOverlay_=a.getFeatureOverlay();this.gmfProfileJsonUrl_=o;this.ngeoCsvDownload_=s;this.map_=null;this.linesConfiguration_=null;this.layersNames_=[];this.nbPoints_=100;this.line;this.profileData=[];this.currentPoint={coordinate:undefined,distance:undefined,elevations:{},xUnits:undefined,yUnits:undefined};this.profileHighlight=-1;this.measureTooltip_=null;this.measureTooltipElement_=null;this.snappedPoint_=new u["a"];this.pointHoverOverlay_.addFeature(this.snappedPoint_);this.profileLabels_={xAxis:i.getString("Distance"),yAxis:i.getString("Elevation")};this.profileOptions=null;this.active=false;this.pointerMoveKey_;this.isErrored=false;e.$watch(function(){return l.active},function(e,t){if(t!==e){l.updateEventsListening_()}});e.$watch(function(){return l.line},function(e,t){if(t!==e){l.update_()}});this.updateEventsListening_()};m.Controller_.$inject=["$scope","$http","$element","$filter","gettextCatalog","ngeoFeatureOverlayMgr","gmfProfileJsonUrl","ngeoCsvDownload"];m.Controller_.prototype.$onInit=function(){this.map_=this["getMapFn"]?this["getMapFn"]():null;this.nbPoints_=this["getNbPointsFn"]?this["getNbPointsFn"]():100;var e;var t=this["getHoverPointStyleFn"];if(t){e=t();s["a"].assertInstanceof(e,d["c"])}else{e=new d["c"]({image:new f["a"]({fill:new h["a"]({color:"#ffffff"}),radius:3})})}this.pointHoverOverlay_.setStyle(e);var r=this["getLinesConfigurationFn"]();s["a"].assertInstanceof(r,Object);this.linesConfiguration_=r;for(var n in this.linesConfiguration_){this.layersNames_.push(n);var i=this.linesConfiguration_[n];if(!i.zExtractor){this.linesConfiguration_[n].zExtractor=this.getZFactory_(n)}}this.profileOptions={linesConfiguration:this.linesConfiguration_,distanceExtractor:this.getDist_,hoverCallback:this.hoverCallback_.bind(this),outCallback:this.outCallback_.bind(this),i18n:this.profileLabels_};var a=this["getOptionsFn"];if(a){var o=a();s["a"].assertObject(o);c["a"](this.profileOptions,o)}};m.Controller_.prototype.update_=function(){this.isErrored=false;if(this.line){this.getJsonProfile_()}else{this.profileData=[]}this.active=!!this.line};m.Controller_.prototype.updateEventsListening_=function(){if(this.active&&this.map_!==null){this.pointerMoveKey_=n["a"](this.map_,"pointermove",this.onPointerMove_.bind(this))}else{n["e"](this.pointerMoveKey_)}};m.Controller_.prototype.onPointerMove_=function(e){if(e.dragging||!this.line){return}var t=this.map_.getEventCoordinate(e.originalEvent);var r=this.line.getClosestPoint(t);var n=new o["a"]([r,t]);var i=n.getLength()/this.map_.getView().getResolution();if(i<16){this.profileHighlight=this.getDistanceOnALine_(r,this.line)}else{this.profileHighlight=-1}this.$scope_.$apply()};m.Controller_.prototype.getDistanceOnALine_=function(r,e){var n;var i=0;var a=[r[0]-.5,r[1]-.5,r[0]+.5,r[1]+.5];this.line.forEachSegment(function(e,t){n=new o["a"]([e,t]);if(n.intersectsExtent(a)){n.setCoordinates([e,r]);return i+=n.getLength()}else{i+=n.getLength()}});return i};m.Controller_.prototype.hoverCallback_=function(e,t,r,n,i){var a;var o=[e.x,e.y];for(a in n){this.currentPoint.elevations[a]=n[a]}this.currentPoint.distance=t;this.currentPoint.xUnits=r;this.currentPoint.yUnits=i;this.currentPoint.coordinate=o;var s=new l["a"](o);this.createMeasureTooltip_();this.measureTooltipElement_.innerHTML=this.getTooltipHTML_();this.measureTooltip_.setPosition(o);this.snappedPoint_.setGeometry(s)};m.Controller_.prototype.outCallback_=function(){this.currentPoint.coordinate=undefined;this.currentPoint.distance=undefined;this.currentPoint.elevations={};this.currentPoint.xUnits=undefined;this.currentPoint.yUnits=undefined;this.removeMeasureTooltip_();this.snappedPoint_.setGeometry(null)};m.Controller_.prototype.getTooltipHTML_=function(){var e=this.gettextCatalog_;var t="&nbsp;: ";var r,n;var i=[];var a=this.$filter_("number");var o=this.currentPoint.xUnits==="m"?0:2;var s=a(this.currentPoint.distance,o);i.push(this.profileLabels_.xAxis+" "+t+" "+s+"&nbsp;"+this.currentPoint.xUnits);for(r in this.currentPoint.elevations){n=e.getString(r);var l=this.currentPoint.elevations[r];var u=l===null?e.getString("no value"):a(l,0)+"&nbsp;"+this.currentPoint.yUnits;i.push(n+" "+t+" "+u)}return i.join("</br>")};m.Controller_.prototype.createMeasureTooltip_=function(){this.removeMeasureTooltip_();this.measureTooltipElement_=document.createElement("div");this.measureTooltipElement_.className+="tooltip ngeo-tooltip-measure";this.measureTooltip_=new i["a"]({element:this.measureTooltipElement_,offset:[0,-15],positioning:"bottom-center"});this.map_.addOverlay(this.measureTooltip_)};m.Controller_.prototype.removeMeasureTooltip_=function(){if(this.measureTooltipElement_!==null){this.measureTooltipElement_.parentNode.removeChild(this.measureTooltipElement_);this.measureTooltipElement_=null;this.map_.removeOverlay(this.measureTooltip_)}};m.Controller_.prototype.getStyle=function(e){var t=this.linesConfiguration_[e];if(!t){return{}}return{color:t.color||"#F00"}};m.Controller_.prototype.getLayersNames=function(){return this.layersNames_.slice(0)};m.Controller_.prototype.getZFactory_=function(r){var e=function e(t){if("values"in t&&r in t["values"]&&t["values"][r]){return parseFloat(t["values"][r])}return null};return e};m.Controller_.prototype.getDist_=function(e){if("dist"in e){return e["dist"]}return 0};m.Controller_.prototype.getJsonProfile_=function(){var e={type:"LineString",coordinates:this.line.getCoordinates()};var t={layers:this.layersNames_.join(","),geom:JSON.stringify(e),nbPoints:this.nbPoints_};this.$http_({url:this.gmfProfileJsonUrl_,method:"POST",params:t,paramSerializer:"$httpParamSerializerJQLike",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(this.getProfileDataSuccess_.bind(this),this.getProfileDataError_.bind(this))};m.Controller_.prototype.getProfileDataSuccess_=function(e){var t=e.data["profile"];if(t instanceof Array){this.profileData=t}};m.Controller_.prototype.getProfileDataError_=function(e){this.isErrored=true;console.error("Can not get JSON profile.")};m.Controller_.prototype.downloadCsv=function(){if(this.profileData.length===0){return}var e=[];var n=false;var t=this.profileData[0];if("dist"in t){e.push({name:"distance"});n=true}var i=[];for(var r in t["values"]){e.push({name:r});i.push(r)}e.push({name:"x"});e.push({name:"y"});var a=this.profileData.map(function(t){var r={};if(n){r["distance"]=t["dist"]}i.forEach(function(e){r[e]=t["values"][e]});r["x"]=t["x"];r["y"]=t["y"];return r});this.ngeoCsvDownload_.startDownload(a,e,"profile.csv")};m.controller("GmfProfileController",m.Controller_);var y=m;var b=r(344);var w=r(504);var S=angular.module("gmfProfileModule",[y.name,b["a"].name]);var C=t["a"]=S},function(e,t,r){"use strict";var T=r(1);var _=r(76);var E=r(5);var n=r(137);var M=r(65);var g=r(107);var m=r(15);var y=r(294);var b=r(66);var w=r(77);var h=function e(){this.geojsonFormat=new n["a"]};h.PrintStyleType={LINE_STRING:"LineString",POINT:"Point",POLYGON:"Polygon"};h.PrintStyleTypes_={LineString:h.PrintStyleType.LINE_STRING,Point:h.PrintStyleType.POINT,Polygon:h.PrintStyleType.POLYGON,MultiLineString:h.PrintStyleType.LINE_STRING,MultiPoint:h.PrintStyleType.POINT,MultiPolygon:h.PrintStyleType.POLYGON};h.prototype.encodeVectorLayer=function(e,t,r){var n=t.getSource();T["a"].assertInstanceof(n,M["a"]);var i=n.getFeatures();var a=[];var o={version:2};for(var s=0,l=i.length;s<l;++s){var u=i[s];var c=null;var f=u.getStyleFunction()||t.getStyleFunction();if(f!==undefined){c=f.call(t,u,r)}var h=this.geojsonFormat.writeFeatureObject(u);var d=c!==null&&!Array.isArray(c)?[c]:c;T["a"].assert(Array.isArray(d));if(d!==null&&d.length>0){var p=false;for(var v=0,g=d.length;v<g;++v){var m=d[v];var _=m.getGeometry();var y=void 0;if(!_){y=h;_=u.getGeometry();if(!_){continue}if(!p){a.push(y);p=true}}else{var b=u.clone();b.setGeometry(_);y=this.geojsonFormat.writeFeatureObject(b);_=b.getGeometry();b=null;a.push(y)}var w=_.getType();if(y.properties===null){y.properties={}}var S="_ngeo_style_"+v;var C=E["c"](m).toString()+"-"+w;this.encodeVectorStyle(o,w,m,C,S);y.properties[S]=C}}}if(a.length>0){var O={type:"FeatureCollection",features:a};var x={geoJson:O,opacity:t.getOpacity(),style:o,type:"geojson"};e.push(x)}};h.prototype.encodeVectorStyle=function(e,t,r,n,i){if(!(t in h.PrintStyleTypes_)){return}var a=h.PrintStyleTypes_[t];var o="["+i+" = '"+n+"']";if(o in e){return}var s={symbolizers:[]};e[o]=s;var l=r.getFill();var u=r.getImage();var c=r.getStroke();var f=r.getText();if(a===h.PrintStyleType.POLYGON){if(l!==null){this.encodeVectorStylePolygon(s.symbolizers,l,c)}}else if(a===h.PrintStyleType.LINE_STRING){if(c!==null){this.encodeVectorStyleLine(s.symbolizers,c)}}else if(a===h.PrintStyleType.POINT){if(u!==null){this.encodeVectorStylePoint(s.symbolizers,u)}}if(f!==null){this.encodeTextStyle(s.symbolizers,f)}};h.prototype.encodeVectorStyleFill=function(e,t){var r=t.getColor();if(r!==null){T["a"].assert(typeof r==="string"||Array.isArray(r));r=w["a"](r);T["a"].assert(Array.isArray(r),"only supporting fill colors");e.fillColor=_["a"].rgbArrayToHex(r);e.fillOpacity=r[3]}};h.prototype.encodeVectorStyleLine=function(e,t){var r={type:"line"};this.encodeVectorStyleStroke(r,t);e.push(r)};h.prototype.encodeVectorStylePoint=function(e,t){var r;if(t instanceof b["a"]){r={type:"point"};r.pointRadius=t.getRadius();var n=t.getFill();if(n!==null){this.encodeVectorStyleFill(r,n)}var i=t.getStroke();if(i!==null){this.encodeVectorStyleStroke(r,i)}}else if(t instanceof y["a"]){var a=t.getSrc();if(a!==undefined){r={type:"point",externalGraphic:a};var o=t.getOpacity();if(o!==null){r.graphicOpacity=o}var s=t.getSize();if(s!==null){var l=t.getScale();if(isNaN(l)){l=1}r.graphicWidth=s[0]*l;r.graphicHeight=s[1]*l}var u=t.getRotation();if(isNaN(u)){u=0}r.rotation=m["h"](u)}}else if(t instanceof g["a"]){var c=t.getPoints();if(c!==null){r={type:"point"};if(c===4){r.graphicName="square"}else if(c===3){r.graphicName="triangle"}else if(c===5){r.graphicName="star"}else if(c===8){r.graphicName="cross"}var f=t.getSize();if(f!==null){r.graphicWidth=f[0];r.graphicHeight=f[1]}var h=t.getRotation();if(!isNaN(h)&&h!==0){r.rotation=m["h"](h)}var d=t.getOpacity();if(d!==null){r.graphicOpacity=d}var p=t.getStroke();if(p!==null){this.encodeVectorStyleStroke(r,p)}var v=t.getFill();if(v!==null){this.encodeVectorStyleFill(r,v)}}}if(r!==undefined){e.push(r)}};h.prototype.encodeVectorStylePolygon=function(e,t,r){var n={type:"polygon"};this.encodeVectorStyleFill(n,t);if(r!==null){this.encodeVectorStyleStroke(n,r)}e.push(n)};h.prototype.encodeVectorStyleStroke=function(e,t){var r=t.getColor();if(r!==null){T["a"].assert(typeof r==="string"||Array.isArray(r));var n=w["a"](r);T["a"].assert(Array.isArray(n),"only supporting stroke colors");e.strokeColor=_["a"].rgbArrayToHex(n);e.strokeOpacity=n[3]}var i=t.getLineDash();if(i!==null){e.strokeDashstyle=i.join(" ")}var a=t.getWidth();if(a!==undefined){e.strokeWidth=a}var o=t.getLineCap();if(o){e.strokeLinecap=t.getLineCap()}};h.prototype.encodeTextStyle=function(e,t){var r={type:"Text"};var n=t.getText();if(n!==undefined){r.label=n;var i="c";var a="m";var o=t.getTextAlign();if(o==="left"||o==="start"){i="l"}else if(o==="right"||o==="end"){i="r"}var s=t.getTextBaseline();if(s==="bottom"){a="l"}else if(s==="top"){a="t"}r.labelAlign=""+i+a;var l=t.getRotation();if(l!==undefined){r.labelRotation=(l*180/Math.PI).toString();r.labelAlign="cm"}var u=t.getFont();if(u!==undefined){var c=u.split(" ");if(c.length>=3){r.fontWeight=c[0];r.fontSize=c[1];r.fontFamily=c.splice(2).join(" ")}}var f=t.getStroke();if(f!==null){var h=f.getColor();T["a"].assert(typeof h==="string"||Array.isArray(h));var d=w["a"](h);T["a"].assert(Array.isArray(d),"only supporting stroke colors");r.haloColor=_["a"].rgbArrayToHex(d);r.haloOpacity=d[3];var p=f.getWidth();if(p!==undefined){r.haloRadius=p/2}}var v=t.getFill();if(v!==null){var g=v.getColor();T["a"].assert(typeof g==="string"||Array.isArray(g));var m=w["a"](g);T["a"].assert(Array.isArray(m),"only supporting fill colors");r.fontColor=_["a"].rgbArrayToHex(m)}if(r.labelAlign!==undefined){r.labelXOffset=t.getOffsetX();r.labelYOffset=-t.getOffsetY()}e.push(r)}};var a=h;var i=r(91);var f=r(8);var c=r(9);var o=r(101);var d=r(28);var s=r(64);var p=r(102);var l=r(114);var u=r(170);var v=r(167);var S=r(304);var C=function e(t,r,n,i){this.url_=t;this.$http_=r;this.gettextCatalog_=n;this.ngeoLayerHelper_=i;this.vectorEncoder_=new a;this.printNativeAngle_=true};C.$inject=["url","$http","gettextCatalog","ngeoLayerHelper"];C.prototype.cancel=function(e,t){var r=t!==undefined?t:{};var n=this.url_+"/cancel/"+e;return this.$http_["delete"](n,r)};C.prototype.createSpec=function(e,t,r,n,i,a){var o={dpi:r,rotation:a["rotation"]};this.encodeMap_(e,t,o);var s={map:o};c["a"](s,a);var l=this.gettextCatalog_.currentLanguage;var u={attributes:s,format:i,lang:l,layout:n};return u};C.prototype.encodeMap_=function(e,t,r){var n=this;var i=e.getView();var a=i.getCenter();var o=i.getProjection();var s=i.getResolution();var l=r.rotation||m["h"](i.getRotation());T["a"].assert(a!==undefined);T["a"].assert(o!==undefined);r.center=a;r.projection=o.getCode();r.rotation=l;r.scale=t;r.layers=[];var u=e.getLayerGroup();T["a"].assert(u);this.printNativeAngle_=!(u.get("printNativeAngle")===false);var c=this.ngeoLayerHelper_.getFlatLayers(u);f["l"](c,function(e,t){return e.getZIndex()-t.getZIndex()});c=c.slice().reverse();c.forEach(function(e){if(e.getVisible()){T["a"].assert(s!==undefined);n.encodeLayer(r.layers,e,s)}})};C.prototype.encodeLayer=function(e,t,r){if(t instanceof o["a"]){this.encodeImageLayer_(e,t)}else if(t instanceof d["a"]){this.encodeTileLayer_(e,t)}else if(t instanceof s["a"]){this.vectorEncoder_.encodeVectorLayer(e,t,r)}};C.prototype.encodeImageLayer_=function(e,t){T["a"].assertInstanceof(t,o["a"]);var r=t.getSource();if(r instanceof l["a"]){this.encodeImageWmsLayer_(e,t)}};C.prototype.encodeImageWmsLayer_=function(e,t){var r=t.getSource();T["a"].assertInstanceof(t,o["a"]);T["a"].assertInstanceof(r,l["a"]);var n=r.getUrl();if(n!==undefined){this.encodeWmsLayer_(e,t,n,r.getParams())}};C.prototype.encodeWmsLayer_=function(e,t,r,n){if(r.startsWith("//")){r=window.location.protocol+r}var i=new URL(r);var a={TRANSPARENT:true};if(i.searchParams){for(var o=i.searchParams,s=Array.isArray(o),l=0,o=s?o:o[Symbol.iterator]();;){var u;if(s){if(l>=o.length)break;u=o[l++]}else{l=o.next();if(l.done)break;u=l.value}var c=u;a[c[0]]=c[1]}}for(var f in n){var h=n[f];if(h!==null&&h!==undefined){a[f]=h}}delete a["LAYERS"];delete a["FORMAT"];delete a["SERVERTYPE"];delete a["VERSION"];var d={baseURL:C.getAbsoluteUrl_(i.origin+i.pathname),imageFormat:"FORMAT"in n?n["FORMAT"]:"image/png",layers:n["LAYERS"].split(","),customParams:a,serverType:n["SERVERTYPE"],type:"wms",opacity:this.getOpacityOrInherited_(t),version:n["VERSION"],useNativeAngle:this.printNativeAngle_};e.push(d)};C.getAbsoluteUrl_=function(e){var t=document.createElement("a");t.href=encodeURI(e);return decodeURI(t.href)};C.prototype.encodeTileLayer_=function(e,t){T["a"].assertInstanceof(t,d["a"]);var r=t.getSource();if(r instanceof v["a"]){this.encodeTileWmtsLayer_(e,t)}else if(r instanceof u["a"]){this.encodeTileWmsLayer_(e,t)}};C.prototype.encodeTileWmtsLayer_=function(e,t){T["a"].assertInstanceof(t,d["a"]);var r=t.getSource();T["a"].assertInstanceof(r,v["a"]);var n=r.getProjection();var i=r.getTileGrid();T["a"].assertInstanceof(i,S["b"]);var a=i.getMatrixIds();var o=[];for(var s=0,l=a.length;s<l;++s){var u=i.getFullTileRange(s);o.push({identifier:a[s],scaleDenominator:i.getResolution(s)*n.getMetersPerUnit()/28e-5,tileSize:p["d"](i.getTileSize(s)),topLeftCorner:i.getOrigin(s),matrixSize:[u.maxX-u.minX,u.maxY-u.minY]})}var c=r.getDimensions();var f=Object.keys(c);var h={baseURL:this.getWmtsUrl_(r),dimensions:f,dimensionParams:c,imageFormat:r.getFormat(),layer:r.getLayer(),matrices:o,matrixSet:r.getMatrixSet(),opacity:this.getOpacityOrInherited_(t),requestEncoding:r.getRequestEncoding(),style:r.getStyle(),type:"WMTS",version:r.getVersion()};e.push(h)};C.prototype.encodeTileWmsLayer_=function(e,t){var r=t.getSource();T["a"].assertInstanceof(t,d["a"]);T["a"].assertInstanceof(r,u["a"]);this.encodeWmsLayer_(e,t,r.getUrls()[0],r.getParams())};C.prototype.getWmtsUrl_=function(e){var t=e.getUrls();T["a"].assert(t.length>0);return C.getAbsoluteUrl_(t[0])};C.prototype.getOpacityOrInherited_=function(e){if(e.get("inheritedOpacity")!==undefined){return e.get("inheritedOpacity")}return e.getOpacity()};C.prototype.createReport=function(e,t){var r=e.format||"pdf";var n=this.url_+"/report."+r;var i={headers:{"Content-Type":"application/json; charset=UTF-8"}};c["a"](i,t!==undefined?t:{});return this.$http_.post(n,e,i)};C.prototype.getStatus=function(e,t){var r=t!==undefined?t:{};var n=this.url_+"/status/"+e+".json";return this.$http_.get(n,r)};C.prototype.getReportUrl=function(e){return this.url_+"/report/"+e};C.prototype.getCapabilities=function(e){var t=e!==undefined?e:{withCredentials:true};var r=this.url_+"/capabilities.json";return this.$http_.get(r,t)};C.createPrintServiceFactory=function(t,r,n){return function(e){return new C(e,t,r,n)}};C.createPrintServiceFactory.$inject=["$http","gettextCatalog","ngeoLayerHelper"];C.module=angular.module("ngeoPrint",[i["a"].module.name]);C.module.service("ngeoPrintService",C);C.module.factory("ngeoCreatePrint",C.createPrintServiceFactory);var O=t["a"]=C},function(e,t,r){"use strict";var n=r(256);var i=r(1);var u=r(19);var c=r(237);var a=r(398);var o=r(120);var s=r(257);var l=r(13);var f=r(366);var h=r(259);var d=r(260);var p=r(100);var v=r(62);var g=r(61);var m=r(92);var _=r(5);var y=r(8);var b=r(2);var w=r(23);var S=r(30);var C=r(11);var O=r(138);var x=r(177);var T=angular.module("GmfDrawFeatureComponent",[n["a"].name,a["a"].name,o["a"].name,s["a"].name,v["a"].module.name,m["a"].module.name]);T.run(["$templateCache",function(e){e.put("gmf/drawing/drawFeatureComponent",r(439))}]);T.component_=function(){return{controller:"GmfDrawfeatureController as efCtrl",scope:{active:"=gmfDrawfeatureActive",map:"<gmfDrawfeatureMap",showMeasure:"=?gmfDrawfeatureShowmeasure"},bindToController:true,templateUrl:"gmf/drawing/drawFeatureComponent"}};T.directive("gmfDrawfeature",T.component_);T.Controller_=function(e,t,r,n,i,a){var o=this;this.map;this.active;if(this.active===undefined){this.active=false}this.drawActive=false;this.drawToolActivate=new g["a"](this,"drawActive");this.mapSelectActive=true;this.longPressTimeout_=null;this.mapSelectToolActivate=new g["a"](this,"mapSelectActive");this.scope_=e;this.timeout_=t;this.featureHelper_=n;this.features=i;this.ngeoToolActivateMgr_=a;this.selectedFeature=null;this.selectedFeatures=new w["a"];this.interactions_=new w["a"];this.modify_=new f["a"]({features:this.selectedFeatures,style:n.getVertexStyle(false)});this.interactions_.push(this.modify_);this.menu_=null;this.menuListenerKey_=null;this.modifyToolActivate=new g["a"](this.modify_,"active");this.translate_=new d["a"]({features:this.selectedFeatures,style:new C["c"]({text:new O["a"]({text:"",font:"normal 18px FontAwesome",fill:new S["a"]({color:"#7a7a7a"})})})});this.interactions_.push(this.translate_);this.rotate_=new h["a"]({features:this.selectedFeatures,style:new C["c"]({text:new O["a"]({text:"",font:"normal 18px FontAwesome",fill:new S["a"]({color:"#7a7a7a"})})})});this.interactions_.push(this.rotate_);this.initializeInteractions_();this.rotateToolActivate=new g["a"](this.rotate_,"active");this.translateToolActivate=new g["a"](this.translate_,"active");this.listenerKeys_=[];this.listSelectionInProgress_=false;e.$watch(function(){return o.active},this.handleActiveChange_.bind(this));e.$watch(function(){return o.drawActive},function(e){if(e){o.selectedFeature=null}});e.$watch(function(){return o.selectedFeature},function(e,t){o.selectedFeatures.clear();if(t){o.featureHelper_.setStyle(t);o.unregisterInteractions_()}if(e){o.featureHelper_.setStyle(e,true);o.selectedFeatures.push(e);o.registerInteractions_();if(o.listSelectionInProgress_){o.featureHelper_.fitMapToFeature(e,o.map);o.listSelectionInProgress_=false}}else{o.closeMenu_()}});e.$watch(function(){return o.mapSelectActive},this.handleMapSelectActiveChange_.bind(this));this.nameProperty=l["a"].NAME;this.gettextCatalog_=r};T.Controller_.$inject=["$scope","$timeout","gettextCatalog","ngeoFeatureHelper","ngeoFeatures","ngeoToolActivateMgr"];T.Controller_.prototype.closeMenu_=function(){if(this.menu_){this.map.removeOverlay(this.menu_);this.menu_=null;b["e"](this.menuListenerKey_)}};T.Controller_.prototype.initializeInteractions_=function(){this.interactions_.forEach(function(e){e.setActive(false);p["a"].interaction(e)})};T.Controller_.prototype.registerInteractions_=function(){var t=this;this.interactions_.forEach(function(e){t.map.addInteraction(e)})};T.Controller_.prototype.unregisterInteractions_=function(){var t=this;this.interactions_.forEach(function(e){t.map.removeInteraction(e)})};T.Controller_.prototype.handleActiveChange_=function(e){var t=this.listenerKeys_;var r=["draw-",_["c"](this)].join("-");var n=["other-",_["c"](this)].join("-");var i=this.ngeoToolActivateMgr_;if(e){t.push(b["a"](this.features,"add",this.handleFeaturesAdd_,this),b["a"](this.features,"remove",this.handleFeaturesRemove_,this));t.push(b["a"](this.translate_,"translateend",this.handleTranslateEnd_,this));t.push(b["a"](this.rotate_,"rotateend",this.handleRotateEnd_,this));i.registerTool(r,this.drawToolActivate,false);i.registerTool(r,this.mapSelectToolActivate,true);i.registerTool(n,this.drawToolActivate,false);i.registerTool(n,this.modifyToolActivate,true);i.registerTool(n,this.translateToolActivate,false);i.registerTool(n,this.rotateToolActivate,false);this.mapSelectActive=true;this.modify_.setActive(true)}else{t.forEach(b["e"]);t.length=0;i.unregisterTool(r,this.drawToolActivate);i.unregisterTool(r,this.mapSelectToolActivate);i.unregisterTool(n,this.drawToolActivate);i.unregisterTool(n,this.modifyToolActivate);i.unregisterTool(n,this.translateToolActivate);i.unregisterTool(n,this.rotateToolActivate);this.drawActive=false;this.modify_.setActive(false);this.mapSelectActive=false;this.selectedFeature=null;this.closeMenu_()}};T.Controller_.prototype.selectFeatureFromList=function(e){this.listSelectionInProgress_=true;this.selectedFeature=e;this.drawActive=false};T.Controller_.prototype.getFeaturesArray=function(){return this.features.getArray()};T.Controller_.prototype.clearFeatures=function(){var e=this.gettextCatalog_;var t=e.getString("Do you really want to delete all the features?");if(confirm(t)){this.features.clear()}};T.Controller_.prototype.removeFeature=function(e){var t=this.gettextCatalog_;var r=t.getString("Do you really want to delete the selected feature?");if(confirm(r)){this.features.remove(e)}};T.Controller_.prototype.handleFeaturesAdd_=function(e){var t=this;this.timeout_(function(){t.selectedFeature=e.element;t.drawActive=false;t.scope_.$apply()})};T.Controller_.prototype.handleFeaturesRemove_=function(e){this.selectedFeature=null};T.Controller_.prototype.handleMapSelectActiveChange_=function(e){var t=this.map.getViewport();i["a"].assertElement(t);if(e){b["a"](this.map,"click",this.handleMapClick_,this);b["a"](t,"contextmenu",this.handleMapContextMenu_,this);b["a"](t,"touchstart",this.handleMapTouchStart_,this);b["a"](t,"touchmove",this.handleMapTouchEnd_,this);b["a"](t,"touchend",this.handleMapTouchEnd_,this)}else{b["c"](this.map,"click",this.handleMapClick_,this);b["c"](t,"contextmenu",this.handleMapContextMenu_,this);b["c"](t,"touchstart",this.handleMapTouchStart_,this);b["c"](t,"touchmove",this.handleMapTouchEnd_,this);b["c"](t,"touchend",this.handleMapTouchEnd_,this)}};T.Controller_.prototype.handleMapClick_=function(e){var r=this;var t=e.pixel;var n=this.map.forEachFeatureAtPixel(t,function(e){var t=false;if(y["f"](r.features.getArray(),e)){t=e}return t},{hitTolerance:5});n=n?n:null;if(n===this.selectedFeature){return}this.selectedFeature=n;this.scope_.$apply()};T.Controller_.prototype.handleMapTouchStart_=function(e){var t=this;this.longPressTimeout_=setTimeout(function(){t.handleMapContextMenu_(e)},500)};T.Controller_.prototype.handleMapTouchEnd_=function(e){clearTimeout(this.longPressTimeout_)};T.Controller_.prototype.handleMapContextMenu_=function(e){var r=this;var t=this.gettextCatalog_;var n=this.map.getEventPixel(e);var i=this.map.getCoordinateFromPixel(n);var a=this.map.forEachFeatureAtPixel(n,function(e){var t=false;if(y["f"](r.features.getArray(),e)){t=e}return t},{hitTolerance:7});a=a?a:null;if(a){this.closeMenu_();var o=[];var s=this.featureHelper_.getVertexInfoAtCoordinate(a,i,this.map.getView().getResolution());if(!s){var l=this.featureHelper_.getType(a);if(l==u["a"].CIRCLE||l==u["a"].LINE_STRING||l==u["a"].POLYGON||l==u["a"].RECTANGLE){o=o.concat([{cls:"fas fa-arrows-alt",label:t.getString("Move"),name:"move"},{cls:"fas fa-undo fa-flip-horizontal",label:t.getString("Rotate"),name:"rotate"}])}}o=o.concat([{cls:"fa fa-trash",label:s?t.getString("Delete vertex"):t.getString("Delete"),name:"delete"}]);this.menu_=new c["a"]({actions:o});this.menuListenerKey_=b["a"](this.menu_,"actionclick",this.handleMenuActionClick_.bind(this,s),this);this.map.addOverlay(this.menu_);this.menu_.open(i);e.preventDefault();e.stopPropagation()}if(a===this.selectedFeature){return}this.modify_.setActive(true);this.selectedFeature=a;this.scope_.$apply()};T.Controller_.prototype.handleMenuActionClick_=function(e,t){var r=t.detail.action;switch(r){case"delete":i["a"].assert(this.selectedFeature,"Selected feature should be truthy");if(e){this.featureHelper_.removeVertex(this.selectedFeature,e)}else{this.removeFeature(this.selectedFeature)}this.scope_.$apply();break;case"move":this.translate_.setActive(true);this.scope_.$apply();break;case"rotate":this.rotate_.setActive(true);this.scope_.$apply();break;default:console.log("FIXME - support: "+r);break}};T.Controller_.prototype.handleTranslateEnd_=function(e){this.translate_.setActive(false);this.scope_.$apply()};T.Controller_.prototype.handleRotateEnd_=function(e){this.rotate_.setActive(false);this.scope_.$apply()};T.controller("GmfDrawfeatureController",T.Controller_);var E=T;var M=angular.module("gmfDrawingModule",[E.name,n["a"].name]);var A=t["a"]=M},function(e,t,r){"use strict";var n=r(22);var i=r(252);var a=r(2);var o=angular.module("gmfBackgroundlayerselector",[n["a"].module.name,i["a"].module.name]);o.value("gmfBackgroundlayerselectorTemplateUrl",function(e,t){var r=t["gmfBackgroundlayerselectorTemplateurl"];return r!==undefined?r:"gmf/backgroundlayerselector"});o.run(["$templateCache",function(e){e.put("gmf/backgroundlayerselector",r(429))}]);s.$inject=["$element","$attrs","gmfBackgroundlayerselectorTemplateUrl"];function s(e,t,r){return r(e,t)}o.component_={controller:"GmfBackgroundlayerselectorController as ctrl",bindings:{map:"=gmfBackgroundlayerselectorMap",opacityOptions:"=gmfBackgroundlayerOpacityOptions",select:"&?gmfBackgroundlayerselectorSelect"},templateUrl:s};o.component("gmfBackgroundlayerselector",o.component_);o.Controller_=function(e,t,r){var n=this;this.map;this.opacityOptions;this.select;this.bgLayer;this.bgLayers;this.opacityLayer;this.gmfThemes_=r;this.listenerKeys_=[];this.listenerKeys_.push(a["a"](r,"change",this.handleThemesChange_,this));this.backgroundLayerMgr_=t;this.listenerKeys_.push(a["a"](this.backgroundLayerMgr_,"change",function(e){n.bgLayer=e.detail.current}));e.$on("$destroy",this.handleDestroy_.bind(this))};o.Controller_.$inject=["$scope","ngeoBackgroundLayerMgr","gmfThemes"];o.Controller_.prototype.$onInit=function(){this.handleThemesChange_()};o.Controller_.prototype.handleThemesChange_=function(){var n=this;this.gmfThemes_.getBgLayers().then(function(e){n.bgLayers=e;if(n.opacityOptions!==undefined){var t=e.find(function(e){return e.get("label")===n.opacityOptions});if(t!==undefined){n.setOpacityBgLayer(t);n.opacityLayer=t;n.bgLayers=n.bgLayers.slice();var r=n.bgLayers.findIndex(function(e){return e===n.opacityLayer});n.bgLayers.splice(r,1);n.bgLayers.push(t)}}})};o.Controller_.prototype.getSetBgLayerOpacity=function(e){if(e){this.opacityLayer.setOpacity(e)}return this.opacityLayer.getOpacity()};o.Controller_.prototype.setLayer=function(e,t){this.bgLayer=e;this.backgroundLayerMgr_.set(this.map,e);if(!t&&this.select){this.select()}};o.Controller_.prototype.setOpacityBgLayer=function(e){this.backgroundLayerMgr_.setOpacityBgLayer(this.map,e)};o.Controller_.prototype.handleDestroy_=function(){this.listenerKeys_.forEach(a["e"]);this.listenerKeys_.length=0};o.controller("GmfBackgroundlayerselectorController",o.Controller_);var l=o;var u=angular.module("gmfBackgroundlayerselectorModule",[l.name]);var c=t["a"]=u},function(e,t,r){"use strict";var n=r(1);var i=r(78);var a=r(5);var o=r(2);var s=r(14);var l=r(41);var u=r(163);var c=r(31);var f=r(47);var h=function e(t){this.angle_=t.angle!==undefined?t.angle:0;this.radius_=t.radius;this.sides_=t.sides!==undefined?t.sides:3;this.listenerKeys_=[];f["a"].call(this,{handleEvent:l["b"]})};a["d"](h,f["a"]);h.prototype.setActive=function(e){f["a"].prototype.setActive.call(this,e);if(this.getMap()){if(e){this.enable_()}else{this.disable_()}}};h.prototype.setMap=function(e){var t=this.getActive();var r=this.getMap();if(r&&t){this.disable_()}f["a"].prototype.setMap.call(this,e);if(e&&t){this.enable_()}};h.prototype.enable_=function(){var e=this.getMap();n["a"].assert(e,"Map should be set.");this.listenerKeys_.push(o["a"](e,"click",this.handleMapClick_,this))};h.prototype.disable_=function(){var e=this.getMap();n["a"].assert(e,"Map should be set.");this.listenerKeys_.forEach(o["e"]);this.listenerKeys_.length=0};h.prototype.handleMapClick_=function(e){var t=e.coordinate;var r=c["a"].fromCircle(new u["a"](t),this.sides_);c["a"].makeRegular(r,t,this.radius_,this.angle_);var n=new i["a"]("drawend",{feature:new s["a"](r)});this.dispatchEvent(n)};var d=h;var p=angular.module("ngeoCreateregularpolygonfromclick",[]);p.directive_=function(){return{controller:"ngeoCreateregularpolygonfromclickController",bindToController:true,scope:{active:"=ngeoCreateregularpolygonfromclickActive",angle:"<?ngeoCreateregularpolygonfromclickAngle",features:"=ngeoCreateregularpolygonfromclickFeatures",map:"=ngeoCreateregularpolygonfromclickMap",radius:"<ngeoCreateregularpolygonfromclickRadius",sides:"<?ngeoCreateregularpolygonfromclickSides"}}};p.directive("ngeoCreateregularpolygonfromclick",p.directive_);p.Controller_=function(e){var t=this;this.active=false;e.$watch(function(){return t.active},function(e){t.interaction_.setActive(e)});this.angle;this.features;this.map;this.radius;this.sides;this.interaction_;this.interactionListenerKey_;e.$on("$destroy",this.handleDestroy_.bind(this))};p.Controller_.$inject=["$scope"];p.Controller_.prototype.$onInit=function(){this.interaction_=new d({angle:this.angle,radius:this.radius,sides:this.sides});this.interaction_.setActive(this.active);this.interactionListenerKey_=o["a"](this.interaction_,"drawend",this.handleDrawEnd_,this);this.map.addInteraction(this.interaction_)};p.Controller_.prototype.handleDrawEnd_=function(e){var t=new s["a"](e.feature.getGeometry());this.features.push(t)};p.Controller_.prototype.handleDestroy_=function(){o["e"](this.interactionListenerKey_);this.interaction_.setActive(false);this.map.removeInteraction(this.interaction_)};p.controller("ngeoCreateregularpolygonfromclickController",p.Controller_);var v=t["a"]=p},function(e,t,r){"use strict";var n=r(3);var i=r(201);var a=r(152);var o=r(4);var s=r(0);var l=[null,"http://www.opengis.net/ows/1.1"];var u=Object(s["q"])(l,{ServiceIdentification:Object(s["m"])(P),ServiceProvider:Object(s["m"])(L),OperationsMetadata:Object(s["m"])(I)});var c=function(e){function t(){e.call(this)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.readFromDocument=function e(t){for(var r=t.firstChild;r;r=r.nextSibling){if(r.nodeType==Node.ELEMENT_NODE){return this.readFromNode(r)}}return null};t.prototype.readFromNode=function e(t){var r=Object(s["t"])({},u,t,[]);return r?r:null};return t}(a["a"]);var f=Object(s["q"])(l,{DeliveryPoint:Object(s["m"])(o["h"]),City:Object(s["m"])(o["h"]),AdministrativeArea:Object(s["m"])(o["h"]),PostalCode:Object(s["m"])(o["h"]),Country:Object(s["m"])(o["h"]),ElectronicMailAddress:Object(s["m"])(o["h"])});var h=Object(s["q"])(l,{Value:Object(s["l"])(N)});var d=Object(s["q"])(l,{AllowedValues:Object(s["m"])(x)});var p=Object(s["q"])(l,{Phone:Object(s["m"])(D),Address:Object(s["m"])(O)});var v=Object(s["q"])(l,{HTTP:Object(s["m"])(k)});var g=Object(s["q"])(l,{Get:Object(s["l"])(A),Post:undefined});var m=Object(s["q"])(l,{DCP:Object(s["m"])(M)});var _=Object(s["q"])(l,{Operation:j});var y=Object(s["q"])(l,{Voice:Object(s["m"])(o["h"]),Facsimile:Object(s["m"])(o["h"])});var b=Object(s["q"])(l,{Constraint:Object(s["l"])(T)});var w=Object(s["q"])(l,{IndividualName:Object(s["m"])(o["h"]),PositionName:Object(s["m"])(o["h"]),ContactInfo:Object(s["m"])(E)});var S=Object(s["q"])(l,{Abstract:Object(s["m"])(o["h"]),AccessConstraints:Object(s["m"])(o["h"]),Fees:Object(s["m"])(o["h"]),Title:Object(s["m"])(o["h"]),ServiceTypeVersion:Object(s["m"])(o["h"]),ServiceType:Object(s["m"])(o["h"])});var C=Object(s["q"])(l,{ProviderName:Object(s["m"])(o["h"]),ProviderSite:Object(s["m"])(i["a"]),ServiceContact:Object(s["m"])(R)});function O(e,t){return Object(s["t"])({},f,e,t)}function x(e,t){return Object(s["t"])({},h,e,t)}function T(e,t){var r=e.getAttribute("name");if(!r){return undefined}return Object(s["t"])({name:r},d,e,t)}function E(e,t){return Object(s["t"])({},p,e,t)}function M(e,t){return Object(s["t"])({},v,e,t)}function A(e,t){var r=Object(i["a"])(e);if(!r){return undefined}return Object(s["t"])({href:r},b,e,t)}function k(e,t){return Object(s["t"])({},g,e,t)}function j(e,t){var r=e.getAttribute("name");var n=Object(s["t"])({},m,e,t);if(!n){return undefined}var i=t[t.length-1];i[r]=n}function I(e,t){return Object(s["t"])({},_,e,t)}function D(e,t){return Object(s["t"])({},y,e,t)}function P(e,t){return Object(s["t"])({},S,e,t)}function R(e,t){return Object(s["t"])({},w,e,t)}function L(e,t){return Object(s["t"])({},C,e,t)}function N(e,t){return Object(o["h"])(e)}var $=c;var F=[null,"http://www.opengis.net/wmts/1.0"];var G=[null,"http://www.opengis.net/ows/1.1"];var U=Object(s["q"])(F,{Contents:Object(s["m"])(J)});var H=function(e){function t(){e.call(this);this.owsParser_=new $}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.readFromDocument=function e(t){for(var r=t.firstChild;r;r=r.nextSibling){if(r.nodeType==Node.ELEMENT_NODE){return this.readFromNode(r)}}return null};t.prototype.readFromNode=function e(t){var r=t.getAttribute("version").trim();var n=this.owsParser_.readFromNode(t);if(!n){return null}n["version"]=r;n=Object(s["t"])(n,U,t,[]);return n?n:null};return t}(a["a"]);var W=Object(s["q"])(F,{Layer:Object(s["l"])(ee),TileMatrixSet:Object(s["l"])(te)});var Y=Object(s["q"])(F,{Style:Object(s["l"])(re),Format:Object(s["l"])(o["h"]),TileMatrixSetLink:Object(s["l"])(ne),Dimension:Object(s["l"])(ie),ResourceURL:Object(s["l"])(ae)},Object(s["q"])(G,{Title:Object(s["m"])(o["h"]),Abstract:Object(s["m"])(o["h"]),WGS84BoundingBox:Object(s["m"])(oe),Identifier:Object(s["m"])(o["h"])}));var V=Object(s["q"])(F,{LegendURL:Object(s["l"])(se)},Object(s["q"])(G,{Title:Object(s["m"])(o["h"]),Identifier:Object(s["m"])(o["h"])}));var q=Object(s["q"])(F,{TileMatrixSet:Object(s["m"])(o["h"]),TileMatrixSetLimits:Object(s["m"])(ce)});var z=Object(s["q"])(F,{TileMatrixLimits:Object(s["i"])(fe)});var B=Object(s["q"])(F,{TileMatrix:Object(s["m"])(o["h"]),MinTileRow:Object(s["m"])(o["f"]),MaxTileRow:Object(s["m"])(o["f"]),MinTileCol:Object(s["m"])(o["f"]),MaxTileCol:Object(s["m"])(o["f"])});var K=Object(s["q"])(F,{Default:Object(s["m"])(o["h"]),Value:Object(s["l"])(o["h"])},Object(s["q"])(G,{Identifier:Object(s["m"])(o["h"])}));var X=Object(s["q"])(G,{LowerCorner:Object(s["i"])(le),UpperCorner:Object(s["i"])(le)});var Z=Object(s["q"])(F,{WellKnownScaleSet:Object(s["m"])(o["h"]),TileMatrix:Object(s["l"])(ue)},Object(s["q"])(G,{SupportedCRS:Object(s["m"])(o["h"]),Identifier:Object(s["m"])(o["h"])}));var Q=Object(s["q"])(F,{TopLeftCorner:Object(s["m"])(le),ScaleDenominator:Object(s["m"])(o["d"]),TileWidth:Object(s["m"])(o["f"]),TileHeight:Object(s["m"])(o["f"]),MatrixWidth:Object(s["m"])(o["f"]),MatrixHeight:Object(s["m"])(o["f"])},Object(s["q"])(G,{Identifier:Object(s["m"])(o["h"])}));function J(e,t){return Object(s["t"])({},W,e,t)}function ee(e,t){return Object(s["t"])({},Y,e,t)}function te(e,t){return Object(s["t"])({},Z,e,t)}function re(e,t){var r=Object(s["t"])({},V,e,t);if(!r){return undefined}var n=e.getAttribute("isDefault")==="true";r["isDefault"]=n;return r}function ne(e,t){return Object(s["t"])({},q,e,t)}function ie(e,t){return Object(s["t"])({},K,e,t)}function ae(e,t){var r=e.getAttribute("format");var n=e.getAttribute("template");var i=e.getAttribute("resourceType");var a={};if(r){a["format"]=r}if(n){a["template"]=n}if(i){a["resourceType"]=i}return a}function oe(e,t){var r=Object(s["t"])([],X,e,t);if(r.length!=2){return undefined}return Object(n["b"])(r)}function se(e,t){var r={};r["format"]=e.getAttribute("format");r["href"]=Object(i["a"])(e);return r}function le(e,t){var r=Object(o["h"])(e).split(/\s+/);if(!r||r.length!=2){return undefined}var n=+r[0];var i=+r[1];if(isNaN(n)||isNaN(i)){return undefined}return[n,i]}function ue(e,t){return Object(s["t"])({},Q,e,t)}function ce(e,t){return Object(s["t"])([],z,e,t)}function fe(e,t){return Object(s["t"])({},B,e,t)}var he=t["a"]=H},function(e,t,r){"use strict";var o=r(1);var n=r(105);var i=r(62);var a=angular.module("ngeoMiscSwipe",[]);a.factory("$verticalSwipe",[function(){var c=10;var i={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup",cancel:"pointercancel"}};function f(e){var t=e.originalEvent||e;var r=t.touches&&t.touches.length?t.touches:[t];var n=t.changedTouches&&t.changedTouches[0]||r[0];return{x:n.clientX,y:n.clientY}}function h(e,r){var n=[];angular.forEach(e,function(e){var t=i[e][r];if(t){n.push(t)}});return n.join(" ")}return{bind:function e(t,r,n){var i,a;var o;var s;var l=false;n=n||["mouse","touch","pointer"];t.on(h(n,"start"),function(e){o=f(e);l=true;i=0;a=0;s=o;if(r["start"]){r["start"](o,e)}});var u=h(n,"cancel");if(u){t.on(u,function(e){l=false;if(r["cancel"]){r["cancel"](e)}})}t.on(h(n,"move"),function(e){if(!l){return}if(!o){return}var t=f(e);i+=Math.abs(t.x-s.x);a+=Math.abs(t.y-s.y);s=t;if(i<c&&a<c){return}if(i>a){l=false;if(r["cancel"]){r["cancel"](e)}return}else{e.preventDefault();if(r["move"]){r["move"](t,e)}}});t.on(h(n,"end"),function(e){if(!l){return}l=false;if(r["end"]){r["end"](f(e),e)}})}}}]);a.makeSwipeDirective_=function(d,p,v){a.directive(d,["$parse","$verticalSwipe",function(r,u){var c=75;var f=.3;var h=30;return function(n,i,e){var a=r(e[d]);var o,s;function l(e){if(!o){return false}var t=(e.y-o.y)*p;var r=Math.abs(e.x-o.x);return s&&r<c&&t>0&&t>h&&r/t<f}var t=["touch"];if(!angular.isDefined(e["ngeoSwipeDisableMouse"])){t.push("mouse")}u.bind(i,{start:function e(t,r){o=t;s=true},cancel:function e(t){s=false},end:function e(t,r){if(l(t)){n.$apply(function(){i.triggerHandler(v);a(n,{$event:r})})}}},t)}}])};a.makeSwipeDirective_("ngeoSwipeDown",1,"swipedown");a.makeSwipeDirective_("ngeoSwipeUp",-1,"swipeup");var s=a;var l=r(144);var u=r(23);var c=r(9);var f=r(66);var h=r(30);var d=r(29);var p=r(11);var v=r(536);var g=r(538);var m=r(540);var _=r(298);var y=r(177);var b=angular.module("gmfQueryWindowComponent",[n["a"].module.name,i["a"].module.name,s.name,l["a"].module.name,"ngAnimate","ngTouch"]);b.config(["$animateProvider",function(e){e.classNameFilter(/gmf-animatable/)}]);b.value("gmfDisplayquerywindowTemplateUrl",function(e,t){var r=t["gmfDisplayquerywindowTemplateurl"];return r!==undefined?r:"gmf/query/windowComponent"});b.run(["$templateCache",function(e){e.put("gmf/query/windowComponent",r(542))}]);w.$inject=["$element","$attrs","gmfDisplayquerywindowTemplateUrl"];function w(e,t,r){return r(e,t)}b.component_={controller:"GmfDisplayquerywindowController as ctrl",bindings:{draggableContainment:"<?gmfDisplayquerywindowDraggableContainment",featuresStyleFn:"&gmfDisplayquerywindowFeaturesstyle",selectedFeatureStyleFn:"&gmfDisplayquerywindowSelectedfeaturestyle",defaultCollapsedFn:"&?gmfDisplayquerywindowDefaultcollapsed",desktop:"=gmfDisplayquerywindowDesktop",showUnqueriedLayers:"=gmfDisplayquerywindowShowunqueriedlayers"},templateUrl:w};b.component("gmfDisplayquerywindow",b.component_);b.Controller_=function(e,t,r,n,i){var a=this;this.draggableContainment;this.desktop=false;this.collapsed=!this.desktop;this.showUnqueriedLayers_=false;this.sourcesFilter={queried:true};this.ngeoQueryResult={sources:[],total:0,pending:false};this.ngeoMapQuerent_=n;this.selectedSource=null;this.features_=new u["a"];this.ngeoFeatureOverlayMgr_=i;this.highlightFeatures_=new u["a"];this.source=null;this.feature=null;this.currentResult=-1;this.isNext=true;this.animate=0;this.open=false;this.element_=e;t.$watchCollection(function(){return r},function(e,t){a.updateQueryResult_(e);if(e.total>0){a.show()}else if(t!==e){a.close()}})};b.Controller_.$inject=["$element","$scope","ngeoQueryResult","ngeoMapQuerent","ngeoFeatureOverlayMgr"];b.Controller_.prototype.$onInit=function(){this.draggableContainment=this.draggableContainment||"document";this.desktop=this.desktop;this.collapsed=this["defaultCollapsedFn"]?this["defaultCollapsedFn"]()===true:!this.desktop;this.showUnqueriedLayers_=this["showUnqueriedLayers"]?this["showUnqueriedLayers"]===true:false;this.sourcesFilter=this.showUnqueriedLayers_?{}:{queried:true};var e=this.ngeoFeatureOverlayMgr_.getFeatureOverlay();e.setFeatures(this.features_);var t=this["featuresStyleFn"]();if(t!==undefined){o["a"].assertInstanceof(t,p["c"]);e.setStyle(t)}var r=this.ngeoFeatureOverlayMgr_.getFeatureOverlay();r.setFeatures(this.highlightFeatures_);var n=this["selectedFeatureStyleFn"]();if(n!==undefined){o["a"].assertInstanceof(n,p["c"])}else{var i=new h["a"]({color:[255,0,0,.6]});var a=new d["a"]({color:[255,0,0,1],width:2});n=new p["c"]({fill:i,image:new f["a"]({fill:i,radius:5,stroke:a}),stroke:a})}r.setStyle(n);if(this.desktop){this.element_.find(".gmf-displayquerywindow .windowcontainer").draggable({cancel:"input,textarea,button,select,option,tr",containment:this.draggableContainment});this.element_.find(".gmf-displayquerywindow .windowcontainer").resizable({minHeight:240,minWidth:240})}};b.Controller_.prototype.show=function(){this.clear();this.updateFeatures_()};b.Controller_.prototype.updateFeatures_=function(){this.setCurrentResult_(0,false);if(this.source!==null){this.collectFeatures_();this.highlightCurrentFeature_();this.open=true}};b.Controller_.prototype.setCurrentResult_=function(e,t){var r=false;if(e!==this.currentResult){var n,i,a;var o=this.feature;var s=this.ngeoQueryResult.sources;this.currentResult=e;for(n=0;n<s.length;n++){i=s[n];if(this.selectedSource!==null&&this.selectedSource!==i){continue}a=i.features;if(e>=a.length){e-=a.length}else{this.source=i;this.feature=i.features[e];r=true;break}}if(t){this.highlightCurrentFeature_(o)}}return r};b.Controller_.prototype.previous=function(){var e=this.currentResult-1;if(e<0){e=this.getResultLength()-1}var t=this.setCurrentResult_(e,true);if(t){this.animate_(false)}};b.Controller_.prototype.next=function(){var e=this.currentResult+1;var t=this.getResultLength()-1;if(e>t){e=0}var r=this.setCurrentResult_(e,true);if(r){this.animate_(true)}};b.Controller_.prototype.updateQueryResult_=function(e){this.ngeoQueryResult.total=0;this.ngeoQueryResult.sources.length=0;for(var t=0;t<e.sources.length;t++){var r=e.sources[t];r.features=r.features.filter(function(e){o["a"].assert(e);return!c["d"](i["a"].getFilteredFeatureValues(e))});this.ngeoQueryResult.sources.push(r);this.ngeoQueryResult.total+=r.features.length}};b.Controller_.prototype.getResultLength=function(){if(this.selectedSource===null){return this.ngeoQueryResult.total}else{return this.selectedSource.features.length}};b.Controller_.prototype.isFirst=function(){return this.currentResult==0};b.Controller_.prototype.isLast=function(){return this.currentResult==this.getResultLength()-1};b.Controller_.prototype.getFeatureValues=function(){if(!this.feature){return null}return i["a"].getFilteredFeatureValues(this.feature)};b.Controller_.prototype.animate_=function(e){this.isNext=e;this.animate++};b.Controller_.prototype.collectFeatures_=function(){var e=this.ngeoQueryResult.sources;this.features_.clear();for(var t=0;t<e.length;t++){var r=e[t];if(this.selectedSource!==null&&this.selectedSource!==r){continue}var n=r.features;for(var i=0;i<n.length;i++){this.features_.push(n[i])}}};b.Controller_.prototype.highlightCurrentFeature_=function(e){this.highlightFeatures_.clear();this.features_.remove(this.feature);this.highlightFeatures_.push(this.feature);if(e!==undefined){this.features_.push(e)}};b.Controller_.prototype.close=function(){this.open=false;this.clear();this.ngeoMapQuerent_.clear()};b.Controller_.prototype.clear=function(){this.feature=null;this.source=null;this.currentResult=-1;this.features_.clear();this.highlightFeatures_.clear();this.selectedSource=null};b.Controller_.prototype.setSelectedSource=function(e){if(e!==null&&e.features.length<=0){return}this.clear();this.selectedSource=e;this.updateFeatures_()};b.controller("GmfDisplayquerywindowController",b.Controller_);var S=t["a"]=b},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" height="1em" width="1em"><path d="M1.14 8c0-1.242.308-2.383.92-3.432a6.837 6.837 0 0 1 2.496-2.496 6.684 6.684 0 0 1 3.432-.92c1.242 0 2.383.308 3.432.92a6.837 6.837 0 0 1 2.496 2.496c.612 1.049.92 2.19.92 3.432a6.68 6.68 0 0 1-.577 2.746c.409.444.651 1.039.593 1.653-.06 1.064-.956 2.022-2.028 2.09a2.254 2.254 0 0 1-1.591-.467 6.682 6.682 0 0 1-3.245.826 6.684 6.684 0 0 1-3.432-.92 6.837 6.837 0 0 1-2.496-2.496A6.684 6.684 0 0 1 1.14 8zm1.138 0c0 .772.15 1.51.453 2.215a5.707 5.707 0 0 0 1.216 1.81 5.816 5.816 0 0 0 1.826 1.217 5.533 5.533 0 0 0 2.215.468c.773-.001 1.51-.166 2.215-.468.11-.048.222-.104.328-.156-.003-.007-.014-.01-.016-.016a2.211 2.211 0 0 1-.156-.874c-.008-1.26 1.23-2.349 2.48-2.184.145.014.285.05.422.094.004.001.01-.002.015 0 .274-.67.421-1.373.421-2.106 0-.773-.164-1.511-.468-2.215a5.801 5.801 0 0 0-1.216-1.825 5.711 5.711 0 0 0-1.81-1.217 5.553 5.553 0 0 0-2.215-.453 5.53 5.53 0 0 0-2.215.453A5.805 5.805 0 0 0 3.947 3.96a5.786 5.786 0 0 0-1.216 1.825A5.543 5.543 0 0 0 2.278 8zm9.438 4.243a.784.784 0 0 0 .11.421.97.97 0 0 0 .046.078.873.873 0 0 0 .203.203c.017.013.03.035.047.047.01.007.021.01.031.016a.779.779 0 0 0 .811.062c.37-.159.579-.595.515-.983v-.015a.751.751 0 0 0-.172-.36.792.792 0 0 0-.156-.155c-.02-.015-.04-.018-.062-.031a.931.931 0 0 0-.11-.063c-.04-.017-.081-.035-.124-.047-.026-.007-.051-.01-.078-.015a1.078 1.078 0 0 0-.218-.016c.004-.006.011-.01.015-.015a.8.8 0 0 0-.561.234.874.874 0 0 0-.297.64z"></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" height="1em" width="1em"><path d="M2.317 14.491a2.203 2.203 0 0 1-.874-.156C.257 13.91-.343 12.38.242 11.262a2.265 2.265 0 0 1 1.28-1.139l-.016-4.258c-.02-.008-.042-.008-.063-.016C.258 5.424-.343 3.894.243 2.776.74 1.731 2.115 1.194 3.174 1.7c.572.246 1.007.747 1.217 1.326L11.6 3.01c.028-.077.055-.16.093-.234.5-1.045 1.874-1.582 2.933-1.076.979.422 1.584 1.59 1.28 2.62a2.302 2.302 0 0 1-1.467 1.576l.016 4.228c.057.02.115.035.171.062.979.422 1.584 1.59 1.28 2.621-.24.95-1.151 1.688-2.137 1.685a2.203 2.203 0 0 1-.874-.156c-.625-.224-1.083-.757-1.295-1.373l-7.207.015c-.302.864-1.151 1.516-2.075 1.513zm-.14-1.357c.508.052 1.045-.42.982-.951-.03-.542-.63-.978-1.154-.78-.472.146-.764.713-.547 1.17.089.223.27.413.5.499a.79.79 0 0 0 .218.062zm11.45 0c.509.052 1.045-.42.982-.951-.03-.542-.63-.978-1.154-.78-.472.146-.764.713-.546 1.17.088.223.27.413.499.499a.79.79 0 0 0 .218.062zM4.39 11.527l7.192-.015c.03-.084.067-.17.109-.25.259-.542.747-.944 1.31-1.139V5.88c-.036-.012-.073-.017-.109-.031-.628-.225-1.085-.768-1.295-1.388H4.407a2.334 2.334 0 0 1-1.42 1.435l.015 4.227c.056.02.118.037.172.063.576.248 1.009.757 1.217 1.342zm-2.215-6.88c.51.052 1.046-.42.983-.95-.03-.543-.63-.979-1.154-.781-.472.146-.764.714-.547 1.17.089.224.27.414.5.5a.79.79 0 0 0 .218.062zm11.45 0c.51.052 1.046-.42.983-.95-.03-.543-.63-.979-1.154-.781-.472.146-.764.714-.546 1.17.088.224.27.414.499.5a.79.79 0 0 0 .218.062z"></svg>'},function(e,t){},function(t,r,n){var i,a,o;(function(e){if(true){!(a=[n(27),n(117)],i=e,o=typeof i==="function"?i.apply(r,a):i,o!==undefined&&(t.exports=o))}else{}})(function(e){return e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}})},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" height="1em" width="1em"><path d="M19.984 6.256L10 1.264.016 6.256 10 11.248l9.984-4.992zM10 2.921l6.67 3.335L10 9.591 3.33 6.256 10 2.921zM17.984 9l2 .999L10 14.992.016 10l2-1L10 12.992zm0 3.743l2 1L10 18.736.016 13.744l2-1L10 16.736z"></svg>'},function(e,t,r){"use strict";r.d(t,"a",function(){return h});var n=r(320);var i=r(321);var a=r(322);var o=r(287);var s=r(288);var l=r(95);var u=r(192);var c=r(115);var f=r(210);var h={calendar:n["b"],longDateFormat:i["a"],invalidDate:a["a"],ordinal:o["b"],dayOfMonthOrdinalParse:o["a"],relativeTime:s["a"],months:l["b"],monthsShort:l["c"],week:u["a"],weekdays:c["a"],weekdaysMin:c["b"],weekdaysShort:c["c"],meridiemParse:f["a"]}},function(e,r,t){(function(e,t){true?t(r):undefined})(this,function(e){"use strict";var n="$";function s(){}s.prototype=g.prototype={constructor:s,has:function e(t){return n+t in this},get:function e(t){return this[n+t]},set:function e(t,r){this[n+t]=r;return this},remove:function e(t){var r=n+t;return r in this&&delete this[r]},clear:function e(){for(var t in this){if(t[0]===n)delete this[t]}},keys:function e(){var e=[];for(var t in this){if(t[0]===n)e.push(t.slice(1))}return e},values:function e(){var e=[];for(var t in this){if(t[0]===n)e.push(this[t])}return e},entries:function e(){var e=[];for(var t in this){if(t[0]===n)e.push({key:t.slice(1),value:this[t]})}return e},size:function e(){var e=0;for(var t in this){if(t[0]===n)++e}return e},empty:function e(){for(var t in this){if(t[0]===n)return false}return true},each:function e(t){for(var r in this){if(r[0]===n)t(this[r],r.slice(1),this)}}};function g(e,t){var r=new s;if(e instanceof s)e.each(function(e,t){r.set(t,e)});else if(Array.isArray(e)){var n=-1,i=e.length,a;if(t==null)while(++n<i){r.set(n,e[n])}else while(++n<i){r.set(t(a=e[n],n,e),a)}}else if(e)for(var o in e){r.set(o,e[o])}return r}function t(){var h=[],a=[],d,p,r;function v(e,r,n,i){if(r>=h.length){if(d!=null)e.sort(d);return p!=null?p(e):e}var t=-1,a=e.length,o=h[r++],s,l,u=g(),c,f=n();while(++t<a){if(c=u.get(s=o(l=e[t])+"")){c.push(l)}else{u.set(s,[l])}}u.each(function(e,t){i(f,t,v(e,r,n,i))});return f}function o(e,r){if(++r>h.length)return e;var n,i=a[r-1];if(p!=null&&r>=h.length)n=e.entries();else n=[],e.each(function(e,t){n.push({key:t,values:o(e,r)})});return i!=null?n.sort(function(e,t){return i(e.key,t.key)}):n}return r={object:function e(t){return v(t,0,i,l)},map:function e(t){return v(t,0,u,c)},entries:function e(t){return o(v(t,0,u,c),0)},key:function e(t){h.push(t);return r},sortKeys:function e(t){a[h.length-1]=t;return r},sortValues:function e(t){d=t;return r},rollup:function e(t){p=t;return r}}}function i(){return{}}function l(e,t,r){e[t]=r}function u(){return g()}function c(e,t,r){e.set(t,r)}function a(){}var r=g.prototype;a.prototype=o.prototype={constructor:a,has:r.has,add:function e(t){t+="";this[n+t]=t;return this},remove:r.remove,clear:r.clear,values:r.keys,size:r.size,empty:r.empty,each:r.each};function o(e,t){var r=new a;if(e instanceof a)e.each(function(e){r.add(e)});else if(e){var n=-1,i=e.length;if(t==null)while(++n<i){r.add(e[n])}else while(++n<i){r.add(t(e[n],n,e))}}return r}function f(e){var t=[];for(var r in e){t.push(r)}return t}function h(e){var t=[];for(var r in e){t.push(e[r])}return t}function d(e){var t=[];for(var r in e){t.push({key:r,value:e[r]})}return t}e.nest=t;e.set=o;e.map=g;e.keys=f;e.values=h;e.entries=d;Object.defineProperty(e,"__esModule",{value:true})})},function(e,r,n){(function(e,t){true?t(r,n(20),n(280)):undefined})(this,function(e,w,S){"use strict";function C(){w.event.stopImmediatePropagation()}function O(){w.event.preventDefault();w.event.stopImmediatePropagation()}function x(e){var t=e.document.documentElement,r=w.select(e).on("dragstart.drag",O,true);if("onselectstart"in t){r.on("selectstart.drag",O,true)}else{t.__noselect=t.style.MozUserSelect;t.style.MozUserSelect="none"}}function T(e,t){var r=e.document.documentElement,n=w.select(e).on("dragstart.drag",null);if(t){n.on("click.drag",O,true);setTimeout(function(){n.on("click.drag",null)},0)}if("onselectstart"in r){n.on("selectstart.drag",null)}else{r.style.MozUserSelect=r.__noselect;delete r.__noselect}}function E(e){return function(){return e}}function M(e,t,r,n,i,a,o,s,l,u){this.target=e;this.type=t;this.subject=r;this.identifier=n;this.active=i;this.x=a;this.y=o;this.dx=s;this.dy=l;this._=u}M.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function A(){return!w.event.button}function k(){return this.parentNode}function j(e){return e==null?{x:w.event.x,y:w.event.y}:e}function I(){return"ontouchstart"in this}function t(){var a=A,o=k,t=j,r=I,p={},n=S.dispatch("start","drag","end"),v=0,i,s,l,u,c=0;function g(e){e.on("mousedown.drag",f).filter(r).on("touchstart.drag",m).on("touchmove.drag",_).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(){if(u||!a.apply(this,arguments))return;var e=b("mouse",o.apply(this,arguments),w.mouse,this,arguments);if(!e)return;w.select(w.event.view).on("mousemove.drag",h,true).on("mouseup.drag",d,true);x(w.event.view);C();l=false;i=w.event.clientX;s=w.event.clientY;e("start")}function h(){O();if(!l){var e=w.event.clientX-i,t=w.event.clientY-s;l=e*e+t*t>c}p.mouse("drag")}function d(){w.select(w.event.view).on("mousemove.drag mouseup.drag",null);T(w.event.view,l);O();p.mouse("end")}function m(){if(!a.apply(this,arguments))return;var e=w.event.changedTouches,t=o.apply(this,arguments),r=e.length,n,i;for(n=0;n<r;++n){if(i=b(e[n].identifier,t,w.touch,this,arguments)){C();i("start")}}}function _(){var e=w.event.changedTouches,t=e.length,r,n;for(r=0;r<t;++r){if(n=p[e[r].identifier]){O();n("drag")}}}function y(){var e=w.event.changedTouches,t=e.length,r,n;if(u)clearTimeout(u);u=setTimeout(function(){u=null},500);for(r=0;r<t;++r){if(n=p[e[r].identifier]){C();n("end")}}}function b(i,a,o,s,l){var u=o(a,i),c,f,h,d=n.copy();if(!w.customEvent(new M(g,"beforestart",c,i,v,u[0],u[1],0,0,d),function(){if((w.event.subject=c=t.apply(s,l))==null)return false;f=c.x-u[0]||0;h=c.y-u[1]||0;return true}))return;return function e(t){var r=u,n;switch(t){case"start":p[i]=e,n=v++;break;case"end":delete p[i],--v;case"drag":u=o(a,i),n=v;break}w.customEvent(new M(g,t,c,i,n,u[0]+f,u[1]+h,u[0]-r[0],u[1]-r[1],d),d.apply,d,[t,s,l])}}g.filter=function(e){return arguments.length?(a=typeof e==="function"?e:E(!!e),g):a};g.container=function(e){return arguments.length?(o=typeof e==="function"?e:E(e),g):o};g.subject=function(e){return arguments.length?(t=typeof e==="function"?e:E(e),g):t};g.touchable=function(e){return arguments.length?(r=typeof e==="function"?e:E(!!e),g):r};g.on=function(){var e=n.on.apply(n,arguments);return e===n?g:e};g.clickDistance=function(e){return arguments.length?(c=(e=+e)*e,g):Math.sqrt(c)};return g}e.drag=t;e.dragDisable=x;e.dragEnable=T;Object.defineProperty(e,"__esModule",{value:true})})},function(t,e,r){(function(e){t.exports=e["angular"]=r(418)}).call(this,r(274))},function(e,t,r){"use strict";var n=r(27);var i=r.n(n);var f=r(60);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function h(e,t,r){if(t)a(e.prototype,t);if(r)a(e,r);return e}var o=function(i){var e="alert";var t="4.1.3";var a="bs.alert";var r="."+a;var n=".data-api";var o=i.fn[e];var s={DISMISS:'[data-dismiss="alert"]'};var l={CLOSE:"close"+r,CLOSED:"closed"+r,CLICK_DATA_API:"click"+r+n};var u={ALERT:"alert",FADE:"fade",SHOW:"show"};var c=function(){function n(e){this._element=e}var e=n.prototype;e.close=function e(t){var r=this._element;if(t){r=this._getRootElement(t)}var n=this._triggerCloseEvent(r);if(n.isDefaultPrevented()){return}this._removeElement(r)};e.dispose=function e(){i.removeData(this._element,a);this._element=null};e._getRootElement=function e(t){var r=f["a"].getSelectorFromElement(t);var n=false;if(r){n=document.querySelector(r)}if(!n){n=i(t).closest("."+u.ALERT)[0]}return n};e._triggerCloseEvent=function e(t){var r=i.Event(l.CLOSE);i(t).trigger(r);return r};e._removeElement=function e(t){var r=this;i(t).removeClass(u.SHOW);if(!i(t).hasClass(u.FADE)){this._destroyElement(t);return}var n=f["a"].getTransitionDurationFromElement(t);i(t).one(f["a"].TRANSITION_END,function(e){return r._destroyElement(t,e)}).emulateTransitionEnd(n)};e._destroyElement=function e(t){i(t).detach().trigger(l.CLOSED).remove()};n._jQueryInterface=function e(r){return this.each(function(){var e=i(this);var t=e.data(a);if(!t){t=new n(this);e.data(a,t)}if(r==="close"){t[r](this)}})};n._handleDismiss=function e(t){return function(e){if(e){e.preventDefault()}t.close(this)}};h(n,null,[{key:"VERSION",get:function e(){return t}}]);return n}();i(document).on(l.CLICK_DATA_API,s.DISMISS,c._handleDismiss(new c));i.fn[e]=c._jQueryInterface;i.fn[e].Constructor=c;i.fn[e].noConflict=function(){i.fn[e]=o;return c._jQueryInterface};return c}(i.a);var s=o},function(t,r,n){var i,a,o;(function(e){if(true){!(a=[n(27),n(117)],i=e,o=typeof i==="function"?i.apply(r,a):i,o!==undefined&&(t.exports=o))}else{}})(function(e){return e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())})},function(t,r,n){var i,a,o;(function(e){if(true){!(a=[n(27),n(117)],i=e,o=typeof i==="function"?i.apply(r,a):i,o!==undefined&&(t.exports=o))}else{}})(function(n){return n.extend(n.expr[":"],{data:n.expr.createPseudo?n.expr.createPseudo(function(t){return function(e){return!!n.data(e,t)}}):function(e,t,r){return!!n.data(e,r[3])}})})},function(t,r,n){var i,a,o;(function(e){if(true){!(a=[n(27),n(117)],i=e,o=typeof i==="function"?i.apply(r,a):i,o!==undefined&&(t.exports=o))}else{}})(function(o){return o.ui.plugin={add:function e(t,r,n){var i,a=o.ui[t].prototype;for(i in n){a.plugins[i]=a.plugins[i]||[];a.plugins[i].push([r,n[i]])}},call:function e(t,r,n,i){var a,o=t.plugins[r];if(!o){return}if(!i&&(!t.element[0].parentNode||t.element[0].parentNode.nodeType===11)){return}for(a=0;a<o.length;a++){if(t.options[o[a][0]]){o[a][1].apply(t.element,n)}}}}})},function(t,r,n){var i,a,o;(function(e){if(true){!(a=[n(27),n(117)],i=e,o=typeof i==="function"?i.apply(r,a):i,o!==undefined&&(t.exports=o))}else{}})(function(a){return a.fn.scrollParent=function(e){var t=this.css("position"),r=t==="absolute",n=e?/(auto|scroll|hidden)/:/(auto|scroll)/,i=this.parents().filter(function(){var e=a(this);if(r&&e.css("position")==="static"){return false}return n.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return t==="fixed"||!i.length?a(this[0].ownerDocument||document):i}})},function(e,t,r){r(435);e.exports="ngSanitize"},function(t,r,n){var i,a,o;
/**
 * @preserve jQuery DateTimePicker
 * @homepage http://xdsoft.net/jqplugins/datetimepicker/
 * @author Chupurnov Valeriy (<chupurnov@gmail.com>)
 */var e=function e(ne){"use strict";var l={i18n:{ar:{months:["كانون الثاني","شباط","آذار","نيسان","مايو","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول"],dayOfWeekShort:["ن","ث","ع","خ","ج","س","ح"],dayOfWeek:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت","الأحد"]},ro:{months:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"],dayOfWeekShort:["Du","Lu","Ma","Mi","Jo","Vi","Sâ"],dayOfWeek:["Duminică","Luni","Marţi","Miercuri","Joi","Vineri","Sâmbătă"]},id:{months:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],dayOfWeekShort:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],dayOfWeek:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"]},is:{months:["Janúar","Febrúar","Mars","Apríl","Maí","Júní","Júlí","Ágúst","September","Október","Nóvember","Desember"],dayOfWeekShort:["Sun","Mán","Þrið","Mið","Fim","Fös","Lau"],dayOfWeek:["Sunnudagur","Mánudagur","Þriðjudagur","Miðvikudagur","Fimmtudagur","Föstudagur","Laugardagur"]},bg:{months:["Януари","Февруари","Март","Април","Май","Юни","Юли","Август","Септември","Октомври","Ноември","Декември"],dayOfWeekShort:["Нд","Пн","Вт","Ср","Чт","Пт","Сб"],dayOfWeek:["Неделя","Понеделник","Вторник","Сряда","Четвъртък","Петък","Събота"]},fa:{months:["فروردین","اردیبهشت","خرداد","تیر","مرداد","شهریور","مهر","آبان","آذر","دی","بهمن","اسفند"],dayOfWeekShort:["یکشنبه","دوشنبه","سه شنبه","چهارشنبه","پنجشنبه","جمعه","شنبه"],dayOfWeek:["یک‌شنبه","دوشنبه","سه‌شنبه","چهارشنبه","پنج‌شنبه","جمعه","شنبه","یک‌شنبه"]},ru:{months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayOfWeekShort:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],dayOfWeek:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"]},uk:{months:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],dayOfWeekShort:["Ндл","Пнд","Втр","Срд","Чтв","Птн","Сбт"],dayOfWeek:["Неділя","Понеділок","Вівторок","Середа","Четвер","П'ятниця","Субота"]},en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeekShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},el:{months:["Ιανουάριος","Φεβρουάριος","Μάρτιος","Απρίλιος","Μάιος","Ιούνιος","Ιούλιος","Αύγουστος","Σεπτέμβριος","Οκτώβριος","Νοέμβριος","Δεκέμβριος"],dayOfWeekShort:["Κυρ","Δευ","Τρι","Τετ","Πεμ","Παρ","Σαβ"],dayOfWeek:["Κυριακή","Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο"]},de:{months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],dayOfWeekShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayOfWeek:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},nl:{months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],dayOfWeekShort:["zo","ma","di","wo","do","vr","za"],dayOfWeek:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"]},tr:{months:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],dayOfWeekShort:["Paz","Pts","Sal","Çar","Per","Cum","Cts"],dayOfWeek:["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"]},fr:{months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],dayOfWeekShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],dayOfWeek:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},es:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dayOfWeekShort:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],dayOfWeek:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"]},th:{months:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],dayOfWeekShort:["อา.","จ.","อ.","พ.","พฤ.","ศ.","ส."],dayOfWeek:["อาทิตย์","จันทร์","อังคาร","พุธ","พฤหัส","ศุกร์","เสาร์","อาทิตย์"]},pl:{months:["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"],dayOfWeekShort:["nd","pn","wt","śr","cz","pt","sb"],dayOfWeek:["niedziela","poniedziałek","wtorek","środa","czwartek","piątek","sobota"]},pt:{months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeekShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],dayOfWeek:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"]},ch:{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeekShort:["日","一","二","三","四","五","六"]},se:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeekShort:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"]},km:{months:["មករា​","កុម្ភៈ","មិនា​","មេសា​","ឧសភា​","មិថុនា​","កក្កដា​","សីហា​","កញ្ញា​","តុលា​","វិច្ឆិកា","ធ្នូ​"],dayOfWeekShort:["អាទិ​","ច័ន្ទ​","អង្គារ​","ពុធ​","ព្រហ​​","សុក្រ​","សៅរ៍"],dayOfWeek:["អាទិត្យ​","ច័ន្ទ​","អង្គារ​","ពុធ​","ព្រហស្បតិ៍​","សុក្រ​","សៅរ៍"]},kr:{months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dayOfWeekShort:["일","월","화","수","목","금","토"],dayOfWeek:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"]},it:{months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],dayOfWeekShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],dayOfWeek:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"]},da:{months:["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"],dayOfWeekShort:["Søn","Man","Tir","Ons","Tor","Fre","Lør"],dayOfWeek:["søndag","mandag","tirsdag","onsdag","torsdag","fredag","lørdag"]},no:{months:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],dayOfWeekShort:["Søn","Man","Tir","Ons","Tor","Fre","Lør"],dayOfWeek:["Søndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag"]},ja:{months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeekShort:["日","月","火","水","木","金","土"],dayOfWeek:["日曜","月曜","火曜","水曜","木曜","金曜","土曜"]},vi:{months:["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"],dayOfWeekShort:["CN","T2","T3","T4","T5","T6","T7"],dayOfWeek:["Chủ nhật","Thứ hai","Thứ ba","Thứ tư","Thứ năm","Thứ sáu","Thứ bảy"]},sl:{months:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],dayOfWeekShort:["Ned","Pon","Tor","Sre","Čet","Pet","Sob"],dayOfWeek:["Nedelja","Ponedeljek","Torek","Sreda","Četrtek","Petek","Sobota"]},cs:{months:["Leden","Únor","Březen","Duben","Květen","Červen","Červenec","Srpen","Září","Říjen","Listopad","Prosinec"],dayOfWeekShort:["Ne","Po","Út","St","Čt","Pá","So"]},hu:{months:["Január","Február","Március","Április","Május","Június","Július","Augusztus","Szeptember","Október","November","December"],dayOfWeekShort:["Va","Hé","Ke","Sze","Cs","Pé","Szo"],dayOfWeek:["vasárnap","hétfő","kedd","szerda","csütörtök","péntek","szombat"]},az:{months:["Yanvar","Fevral","Mart","Aprel","May","Iyun","Iyul","Avqust","Sentyabr","Oktyabr","Noyabr","Dekabr"],dayOfWeekShort:["B","Be","Ça","Ç","Ca","C","Ş"],dayOfWeek:["Bazar","Bazar ertəsi","Çərşənbə axşamı","Çərşənbə","Cümə axşamı","Cümə","Şənbə"]},bs:{months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],dayOfWeekShort:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"],dayOfWeek:["Nedjelja","Ponedjeljak","Utorak","Srijeda","Četvrtak","Petak","Subota"]},ca:{months:["Gener","Febrer","Març","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"],dayOfWeekShort:["Dg","Dl","Dt","Dc","Dj","Dv","Ds"],dayOfWeek:["Diumenge","Dilluns","Dimarts","Dimecres","Dijous","Divendres","Dissabte"]},"en-GB":{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeekShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},et:{months:["Jaanuar","Veebruar","Märts","Aprill","Mai","Juuni","Juuli","August","September","Oktoober","November","Detsember"],dayOfWeekShort:["P","E","T","K","N","R","L"],dayOfWeek:["Pühapäev","Esmaspäev","Teisipäev","Kolmapäev","Neljapäev","Reede","Laupäev"]},eu:{months:["Urtarrila","Otsaila","Martxoa","Apirila","Maiatza","Ekaina","Uztaila","Abuztua","Iraila","Urria","Azaroa","Abendua"],dayOfWeekShort:["Ig.","Al.","Ar.","Az.","Og.","Or.","La."],dayOfWeek:["Igandea","Astelehena","Asteartea","Asteazkena","Osteguna","Ostirala","Larunbata"]},fi:{months:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kesäkuu","Heinäkuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],dayOfWeekShort:["Su","Ma","Ti","Ke","To","Pe","La"],dayOfWeek:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"]},gl:{months:["Xan","Feb","Maz","Abr","Mai","Xun","Xul","Ago","Set","Out","Nov","Dec"],dayOfWeekShort:["Dom","Lun","Mar","Mer","Xov","Ven","Sab"],dayOfWeek:["Domingo","Luns","Martes","Mércores","Xoves","Venres","Sábado"]},hr:{months:["Siječanj","Veljača","Ožujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],dayOfWeekShort:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"],dayOfWeek:["Nedjelja","Ponedjeljak","Utorak","Srijeda","Četvrtak","Petak","Subota"]},ko:{months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dayOfWeekShort:["일","월","화","수","목","금","토"],dayOfWeek:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"]},lt:{months:["Sausio","Vasario","Kovo","Balandžio","Gegužės","Birželio","Liepos","Rugpjūčio","Rugsėjo","Spalio","Lapkričio","Gruodžio"],dayOfWeekShort:["Sek","Pir","Ant","Tre","Ket","Pen","Šeš"],dayOfWeek:["Sekmadienis","Pirmadienis","Antradienis","Trečiadienis","Ketvirtadienis","Penktadienis","Šeštadienis"]},lv:{months:["Janvāris","Februāris","Marts","Aprīlis ","Maijs","Jūnijs","Jūlijs","Augusts","Septembris","Oktobris","Novembris","Decembris"],dayOfWeekShort:["Sv","Pr","Ot","Tr","Ct","Pk","St"],dayOfWeek:["Svētdiena","Pirmdiena","Otrdiena","Trešdiena","Ceturtdiena","Piektdiena","Sestdiena"]},mk:{months:["јануари","февруари","март","април","мај","јуни","јули","август","септември","октомври","ноември","декември"],dayOfWeekShort:["нед","пон","вто","сре","чет","пет","саб"],dayOfWeek:["Недела","Понеделник","Вторник","Среда","Четврток","Петок","Сабота"]},mn:{months:["1-р сар","2-р сар","3-р сар","4-р сар","5-р сар","6-р сар","7-р сар","8-р сар","9-р сар","10-р сар","11-р сар","12-р сар"],dayOfWeekShort:["Дав","Мяг","Лха","Пүр","Бсн","Бям","Ням"],dayOfWeek:["Даваа","Мягмар","Лхагва","Пүрэв","Баасан","Бямба","Ням"]},"pt-BR":{months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeekShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],dayOfWeek:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"]},sk:{months:["Január","Február","Marec","Apríl","Máj","Jún","Júl","August","September","Október","November","December"],dayOfWeekShort:["Ne","Po","Ut","St","Št","Pi","So"],dayOfWeek:["Nedeľa","Pondelok","Utorok","Streda","Štvrtok","Piatok","Sobota"]},sq:{months:["Janar","Shkurt","Mars","Prill","Maj","Qershor","Korrik","Gusht","Shtator","Tetor","Nëntor","Dhjetor"],dayOfWeekShort:["Die","Hën","Mar","Mër","Enj","Pre","Shtu"],dayOfWeek:["E Diel","E Hënë","E Martē","E Mërkurë","E Enjte","E Premte","E Shtunë"]},"sr-YU":{months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],dayOfWeekShort:["Ned","Pon","Uto","Sre","čet","Pet","Sub"],dayOfWeek:["Nedelja","Ponedeljak","Utorak","Sreda","Četvrtak","Petak","Subota"]},sr:{months:["јануар","фебруар","март","април","мај","јун","јул","август","септембар","октобар","новембар","децембар"],dayOfWeekShort:["нед","пон","уто","сре","чет","пет","суб"],dayOfWeek:["Недеља","Понедељак","Уторак","Среда","Четвртак","Петак","Субота"]},sv:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeekShort:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"],dayOfWeek:["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag"]},"zh-TW":{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeekShort:["日","一","二","三","四","五","六"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},zh:{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeekShort:["日","一","二","三","四","五","六"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},ug:{months:["1-ئاي","2-ئاي","3-ئاي","4-ئاي","5-ئاي","6-ئاي","7-ئاي","8-ئاي","9-ئاي","10-ئاي","11-ئاي","12-ئاي"],dayOfWeek:["يەكشەنبە","دۈشەنبە","سەيشەنبە","چارشەنبە","پەيشەنبە","جۈمە","شەنبە"]},he:{months:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],dayOfWeekShort:["א'","ב'","ג'","ד'","ה'","ו'","שבת"],dayOfWeek:["ראשון","שני","שלישי","רביעי","חמישי","שישי","שבת","ראשון"]},hy:{months:["Հունվար","Փետրվար","Մարտ","Ապրիլ","Մայիս","Հունիս","Հուլիս","Օգոստոս","Սեպտեմբեր","Հոկտեմբեր","Նոյեմբեր","Դեկտեմբեր"],dayOfWeekShort:["Կի","Երկ","Երք","Չոր","Հնգ","Ուրբ","Շբթ"],dayOfWeek:["Կիրակի","Երկուշաբթի","Երեքշաբթի","Չորեքշաբթի","Հինգշաբթի","Ուրբաթ","Շաբաթ"]},kg:{months:["Үчтүн айы","Бирдин айы","Жалган Куран","Чын Куран","Бугу","Кулжа","Теке","Баш Оона","Аяк Оона","Тогуздун айы","Жетинин айы","Бештин айы"],dayOfWeekShort:["Жек","Дүй","Шей","Шар","Бей","Жум","Ише"],dayOfWeek:["Жекшемб","Дүйшөмб","Шейшемб","Шаршемб","Бейшемби","Жума","Ишенб"]},rm:{months:["Schaner","Favrer","Mars","Avrigl","Matg","Zercladur","Fanadur","Avust","Settember","October","November","December"],dayOfWeekShort:["Du","Gli","Ma","Me","Gie","Ve","So"],dayOfWeek:["Dumengia","Glindesdi","Mardi","Mesemna","Gievgia","Venderdi","Sonda"]},ka:{months:["იანვარი","თებერვალი","მარტი","აპრილი","მაისი","ივნისი","ივლისი","აგვისტო","სექტემბერი","ოქტომბერი","ნოემბერი","დეკემბერი"],dayOfWeekShort:["კვ","ორშ","სამშ","ოთხ","ხუთ","პარ","შაბ"],dayOfWeek:["კვირა","ორშაბათი","სამშაბათი","ოთხშაბათი","ხუთშაბათი","პარასკევი","შაბათი"]}},ownerDocument:document,contentWindow:window,value:"",rtl:false,format:"Y/m/d H:i",formatTime:"H:i",formatDate:"Y/m/d",startDate:false,step:60,monthChangeSpinner:true,closeOnDateSelect:false,closeOnTimeSelect:true,closeOnWithoutClick:true,closeOnInputClick:true,openOnFocus:true,timepicker:true,datepicker:true,weeks:false,defaultTime:false,defaultDate:false,minDate:false,maxDate:false,minTime:false,maxTime:false,minDateTime:false,maxDateTime:false,allowTimes:[],opened:false,initTime:true,inline:false,theme:"",touchMovedThreshold:5,onSelectDate:function e(){},onSelectTime:function e(){},onChangeMonth:function e(){},onGetWeekOfYear:function e(){},onChangeYear:function e(){},onChangeDateTime:function e(){},onShow:function e(){},onClose:function e(){},onGenerate:function e(){},withoutCopyright:true,inverseButton:false,hours12:false,next:"xdsoft_next",prev:"xdsoft_prev",dayOfWeekStart:0,parentID:"body",timeHeightInTimePicker:25,timepickerScrollbar:true,todayButton:true,prevButton:true,nextButton:true,defaultSelect:true,scrollMonth:true,scrollTime:true,scrollInput:true,lazyInit:false,mask:false,validateOnBlur:true,allowBlank:true,yearStart:1950,yearEnd:2050,monthStart:0,monthEnd:11,style:"",id:"",fixed:false,roundTime:"round",className:"",weekends:[],highlightedDates:[],highlightedPeriods:[],allowDates:[],allowDateRe:null,disabledDates:[],disabledWeekDays:[],yearOffset:0,beforeShowDay:null,enterLikeTab:true,showApplyButton:false};var ie=null,i=null,n="en",ae="en";var a={meridiem:["AM","PM"]};var o=function e(){var t=l.i18n[ae],r={days:t.dayOfWeek,daysShort:t.dayOfWeekShort,months:t.months,monthsShort:ne.map(t.months,function(e){return e.substring(0,3)})};if(typeof DateFormatter==="function"){ie=i=new DateFormatter({dateSettings:ne.extend({},a,r)})}};var s={moment:{default_options:{format:"YYYY/MM/DD HH:mm",formatDate:"YYYY/MM/DD",formatTime:"HH:mm"},formatter:{parseDate:function e(t,r){if(u(r)){return i.parseDate(t,r)}var n=moment(t,r);return n.isValid()?n.toDate():false},formatDate:function e(t,r){if(u(r)){return i.formatDate(t,r)}return moment(t).format(r)},formatMask:function e(t){return t.replace(/Y{4}/g,"9999").replace(/Y{2}/g,"99").replace(/M{2}/g,"19").replace(/D{2}/g,"39").replace(/H{2}/g,"29").replace(/m{2}/g,"59").replace(/s{2}/g,"59")}}}};ne.datetimepicker={setLocale:function e(t){var r=l.i18n[t]?t:n;if(ae!==r){ae=r;o()}},setDateFormatter:function e(t){if(typeof t==="string"&&s.hasOwnProperty(t)){var r=s[t];ne.extend(l,r.default_options);ie=r.formatter}else{ie=t}}};var r={RFC_2822:"D, d M Y H:i:s O",ATOM:"Y-m-dTH:i:sP",ISO_8601:"Y-m-dTH:i:sO",RFC_822:"D, d M y H:i:s O",RFC_850:"l, d-M-y H:i:s T",RFC_1036:"D, d M y H:i:s O",RFC_1123:"D, d M Y H:i:s O",RSS:"D, d M Y H:i:s O",W3C:"Y-m-dTH:i:sP"};var u=function e(t){return Object.values(r).indexOf(t)===-1?false:true};ne.extend(ne.datetimepicker,r);o();if(!window.getComputedStyle){window.getComputedStyle=function(r){this.el=r;this.getPropertyValue=function(e){var t=/(-([a-z]))/g;if(e==="float"){e="styleFloat"}if(t.test(e)){e=e.replace(t,function(e,t,r){return r.toUpperCase()})}return r.currentStyle[e]||null};return this}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(e,t){var r,n;for(r=t||0,n=this.length;r<n;r+=1){if(this[r]===e){return r}}return-1}}Date.prototype.countDaysInMonth=function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate()};ne.fn.xdsoftScroller=function(g,m){return this.each(function(){var a=ne(this),n=function e(t){var r={x:0,y:0},n;if(t.type==="touchstart"||t.type==="touchmove"||t.type==="touchend"||t.type==="touchcancel"){n=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0];r.x=n.clientX;r.y=n.clientY}else if(t.type==="mousedown"||t.type==="mouseup"||t.type==="mousemove"||t.type==="mouseover"||t.type==="mouseout"||t.type==="mouseenter"||t.type==="mouseleave"){r.x=t.clientX;r.y=t.clientY}return r},o,s,l,u,c,f=100,r=false,i=0,h=0,d=0,t=false,p=0,v=function e(){};if(m==="hide"){a.find(".xdsoft_scrollbar").hide();return}if(!ne(this).hasClass("xdsoft_scroller_box")){o=a.children().eq(0);s=a[0].clientHeight;l=o[0].offsetHeight;u=ne('<div class="xdsoft_scrollbar"></div>');c=ne('<div class="xdsoft_scroller"></div>');u.append(c);a.addClass("xdsoft_scroller_box").append(u);v=function e(t){var r=n(t).y-i+p;if(r<0){r=0}if(r+c[0].offsetHeight>d){r=d-c[0].offsetHeight}a.trigger("scroll_element.xdsoft_scroller",[f?r/f:0])};c.on("touchstart.xdsoft_scroller mousedown.xdsoft_scroller",function(e){if(!s){a.trigger("resize_scroll.xdsoft_scroller",[m])}i=n(e).y;p=parseInt(c.css("margin-top"),10);d=u[0].offsetHeight;if(e.type==="mousedown"||e.type==="touchstart"){if(g.ownerDocument){ne(g.ownerDocument.body).addClass("xdsoft_noselect")}ne([g.ownerDocument.body,g.contentWindow]).on("touchend mouseup.xdsoft_scroller",function e(){ne([g.ownerDocument.body,g.contentWindow]).off("touchend mouseup.xdsoft_scroller",e).off("mousemove.xdsoft_scroller",v).removeClass("xdsoft_noselect")});ne(g.ownerDocument.body).on("mousemove.xdsoft_scroller",v)}else{t=true;e.stopPropagation();e.preventDefault()}}).on("touchmove",function(e){if(t){e.preventDefault();v(e)}}).on("touchend touchcancel",function(){t=false;p=0});a.on("scroll_element.xdsoft_scroller",function(e,t){if(!s){a.trigger("resize_scroll.xdsoft_scroller",[t,true])}t=t>1?1:t<0||isNaN(t)?0:t;c.css("margin-top",f*t);setTimeout(function(){o.css("marginTop",-parseInt((o[0].offsetHeight-s)*t,10))},10)}).on("resize_scroll.xdsoft_scroller",function(e,t,r){var n,i;s=a[0].clientHeight;l=o[0].offsetHeight;n=s/l;i=n*u[0].offsetHeight;if(n>1){c.hide()}else{c.show();c.css("height",parseInt(i>10?i:10,10));f=u[0].offsetHeight-c[0].offsetHeight;if(r!==true){a.trigger("scroll_element.xdsoft_scroller",[t||Math.abs(parseInt(o.css("marginTop"),10))/(l-s)])}}});a.on("mousewheel",function(e){var t=Math.abs(parseInt(o.css("marginTop"),10));t=t-e.deltaY*20;if(t<0){t=0}a.trigger("scroll_element.xdsoft_scroller",[t/(l-s)]);e.stopPropagation();return false});a.on("touchstart",function(e){r=n(e);h=Math.abs(parseInt(o.css("marginTop"),10))});a.on("touchmove",function(e){if(r){e.preventDefault();var t=n(e);a.trigger("scroll_element.xdsoft_scroller",[(h-(t.y-r.y))/(l-s)])}});a.on("touchend touchcancel",function(){r=false;h=0})}a.trigger("resize_scroll.xdsoft_scroller",[m])})};ne.fn.datetimepicker=function($,r){var n=this,T=48,E=57,M=96,A=105,F=17,G=46,U=13,H=27,W=8,Y=37,V=38,q=39,z=40,B=9,K=116,X=65,Z=67,Q=86,J=90,ee=89,te=false,re=ne.isPlainObject($)||!$?ne.extend(true,{},l,$):ne.extend(true,{},l),i=0,a,o,s=function e(t){t.on("open.xdsoft focusin.xdsoft mousedown.xdsoft touchstart",function e(){if(t.is(":disabled")||t.data("xdsoft_datetimepicker")){return}clearTimeout(i);i=setTimeout(function(){if(!t.data("xdsoft_datetimepicker")){a(t)}t.off("open.xdsoft focusin.xdsoft mousedown.xdsoft touchstart",e).trigger("open.xdsoft")},100)})};a=function e(k){var j=ne('<div class="xdsoft_datetimepicker xdsoft_noselect"></div>'),t=ne('<div class="xdsoft_copyright"><a target="_blank" href="http://xdsoft.net/jqplugins/datetimepicker/">xdsoft.net</a></div>'),v=ne('<div class="xdsoft_datepicker active"></div>'),I=ne('<div class="xdsoft_monthpicker"><button type="button" class="xdsoft_prev"></button><button type="button" class="xdsoft_today_button"></button>'+'<div class="xdsoft_label xdsoft_month"><span></span><i></i></div>'+'<div class="xdsoft_label xdsoft_year"><span></span><i></i></div>'+'<button type="button" class="xdsoft_next"></button></div>'),D=ne('<div class="xdsoft_calendar"></div>'),r=ne('<div class="xdsoft_timepicker active"><button type="button" class="xdsoft_prev"></button><div class="xdsoft_time_box"></div><button type="button" class="xdsoft_next"></button></div>'),u=r.find(".xdsoft_time_box").eq(0),P=ne('<div class="xdsoft_time_variant"></div>'),n=ne('<button type="button" class="xdsoft_save_selected blue-gradient-button">Save Selected</button>'),R=ne('<div class="xdsoft_select xdsoft_monthselect"><div></div></div>'),L=ne('<div class="xdsoft_select xdsoft_yearselect"><div></div></div>'),i=false,a,o,s,l,c,f=0,N,g;if(re.id){j.attr("id",re.id)}if(re.style){j.attr("style",re.style)}if(re.weeks){j.addClass("xdsoft_showweeks")}if(re.rtl){j.addClass("xdsoft_rtl")}j.addClass("xdsoft_"+re.theme);j.addClass(re.className);I.find(".xdsoft_month span").after(R);I.find(".xdsoft_year span").after(L);I.find(".xdsoft_month,.xdsoft_year").on("touchstart mousedown.xdsoft",function(e){var t=ne(this).find(".xdsoft_select").eq(0),r=0,n=0,i=t.is(":visible"),a,o;I.find(".xdsoft_select").hide();if(N.currentTime){r=N.currentTime[ne(this).hasClass("xdsoft_month")?"getMonth":"getFullYear"]()}t[i?"hide":"show"]();for(a=t.find("div.xdsoft_option"),o=0;o<a.length;o+=1){if(a.eq(o).data("value")===r){break}else{n+=a[0].offsetHeight}}t.xdsoftScroller(re,n/(t.children()[0].offsetHeight-t[0].clientHeight));e.stopPropagation();return false});var h=function e(t){var r=t.originalEvent;var n=r.touches?r.touches[0]:r;this.touchStartPosition=this.touchStartPosition||n;var i=Math.abs(this.touchStartPosition.clientX-n.clientX);var a=Math.abs(this.touchStartPosition.clientY-n.clientY);var o=Math.sqrt(i*i+a*a);if(o>re.touchMovedThreshold){this.touchMoved=true}};I.find(".xdsoft_select").xdsoftScroller(re).on("touchstart mousedown.xdsoft",function(e){var t=e.originalEvent;this.touchMoved=false;this.touchStartPosition=t.touches?t.touches[0]:t;e.stopPropagation();e.preventDefault()}).on("touchmove",".xdsoft_option",h).on("touchend mousedown.xdsoft",".xdsoft_option",function(){if(!this.touchMoved){if(N.currentTime===undefined||N.currentTime===null){N.currentTime=N.now()}var e=N.currentTime.getFullYear();if(N&&N.currentTime){N.currentTime[ne(this).parent().parent().hasClass("xdsoft_monthselect")?"setMonth":"setFullYear"](ne(this).data("value"))}ne(this).parent().parent().hide();j.trigger("xchange.xdsoft");if(re.onChangeMonth&&ne.isFunction(re.onChangeMonth)){re.onChangeMonth.call(j,N.currentTime,j.data("input"))}if(e!==N.currentTime.getFullYear()&&ne.isFunction(re.onChangeYear)){re.onChangeYear.call(j,N.currentTime,j.data("input"))}}});j.getValue=function(){return N.getCurrentTime()};j.setOptions=function(e){var c={};re=ne.extend(true,{},re,e);if(e.allowTimes&&ne.isArray(e.allowTimes)&&e.allowTimes.length){re.allowTimes=ne.extend(true,[],e.allowTimes)}if(e.weekends&&ne.isArray(e.weekends)&&e.weekends.length){re.weekends=ne.extend(true,[],e.weekends)}if(e.allowDates&&ne.isArray(e.allowDates)&&e.allowDates.length){re.allowDates=ne.extend(true,[],e.allowDates)}if(e.allowDateRe&&Object.prototype.toString.call(e.allowDateRe)==="[object String]"){re.allowDateRe=new RegExp(e.allowDateRe)}if(e.highlightedDates&&ne.isArray(e.highlightedDates)&&e.highlightedDates.length){ne.each(e.highlightedDates,function(e,t){var r=ne.map(t.split(","),ne.trim),n,i=new m(ie.parseDate(r[0],re.formatDate),r[1],r[2]),a=ie.formatDate(i.date,re.formatDate);if(c[a]!==undefined){n=c[a].desc;if(n&&n.length&&i.desc&&i.desc.length){c[a].desc=n+"\n"+i.desc}}else{c[a]=i}});re.highlightedDates=ne.extend(true,[],c)}if(e.highlightedPeriods&&ne.isArray(e.highlightedPeriods)&&e.highlightedPeriods.length){c=ne.extend(true,[],re.highlightedDates);ne.each(e.highlightedPeriods,function(e,t){var r,n,i,a,o,s,l;if(ne.isArray(t)){r=t[0];n=t[1];i=t[2];l=t[3]}else{var u=ne.map(t.split(","),ne.trim);r=ie.parseDate(u[0],re.formatDate);n=ie.parseDate(u[1],re.formatDate);i=u[2];l=u[3]}while(r<=n){a=new m(r,i,l);o=ie.formatDate(r,re.formatDate);r.setDate(r.getDate()+1);if(c[o]!==undefined){s=c[o].desc;if(s&&s.length&&a.desc&&a.desc.length){c[o].desc=s+"\n"+a.desc}}else{c[o]=a}}});re.highlightedDates=ne.extend(true,[],c)}if(e.disabledDates&&ne.isArray(e.disabledDates)&&e.disabledDates.length){re.disabledDates=ne.extend(true,[],e.disabledDates)}if(e.disabledWeekDays&&ne.isArray(e.disabledWeekDays)&&e.disabledWeekDays.length){re.disabledWeekDays=ne.extend(true,[],e.disabledWeekDays)}if((re.open||re.opened)&&!re.inline){k.trigger("open.xdsoft")}if(re.inline){i=true;j.addClass("xdsoft_inline");k.after(j).hide()}if(re.inverseButton){re.next="xdsoft_prev";re.prev="xdsoft_next"}if(re.datepicker){v.addClass("active")}else{v.removeClass("active")}if(re.timepicker){r.addClass("active")}else{r.removeClass("active")}if(re.value){N.setCurrentTime(re.value);if(k&&k.val){k.val(N.str)}}if(isNaN(re.dayOfWeekStart)){re.dayOfWeekStart=0}else{re.dayOfWeekStart=parseInt(re.dayOfWeekStart,10)%7}if(!re.timepickerScrollbar){u.xdsoftScroller(re,"hide")}if(re.minDate&&/^[\+\-](.*)$/.test(re.minDate)){re.minDate=ie.formatDate(N.strToDateTime(re.minDate),re.formatDate)}if(re.maxDate&&/^[\+\-](.*)$/.test(re.maxDate)){re.maxDate=ie.formatDate(N.strToDateTime(re.maxDate),re.formatDate)}if(re.minDateTime&&/^\+(.*)$/.test(re.minDateTime)){re.minDateTime=N.strToDateTime(re.minDateTime).dateFormat(re.formatDate)}if(re.maxDateTime&&/^\+(.*)$/.test(re.maxDateTime)){re.maxDateTime=N.strToDateTime(re.maxDateTime).dateFormat(re.formatDate)}n.toggle(re.showApplyButton);I.find(".xdsoft_today_button").css("visibility",!re.todayButton?"hidden":"visible");I.find("."+re.prev).css("visibility",!re.prevButton?"hidden":"visible");I.find("."+re.next).css("visibility",!re.nextButton?"hidden":"visible");p(re);if(re.validateOnBlur){k.off("blur.xdsoft").on("blur.xdsoft",function(){if(re.allowBlank&&(!ne.trim(ne(this).val()).length||typeof re.mask==="string"&&ne.trim(ne(this).val())===re.mask.replace(/[0-9]/g,"_"))){ne(this).val(null);j.data("xdsoft_datetime").empty()}else{var e=ie.parseDate(ne(this).val(),re.format);if(e){ne(this).val(ie.formatDate(e,re.format))}else{var t=+[ne(this).val()[0],ne(this).val()[1]].join(""),r=+[ne(this).val()[2],ne(this).val()[3]].join("");if(!re.datepicker&&re.timepicker&&t>=0&&t<24&&r>=0&&r<60){ne(this).val([t,r].map(function(e){return e>9?e:"0"+e}).join(":"))}else{ne(this).val(ie.formatDate(N.now(),re.format))}}j.data("xdsoft_datetime").setCurrentTime(ne(this).val())}j.trigger("changedatetime.xdsoft");j.trigger("close.xdsoft")})}re.dayOfWeekStartPrev=re.dayOfWeekStart===0?6:re.dayOfWeekStart-1;j.trigger("xchange.xdsoft").trigger("afterOpen.xdsoft")};j.data("options",re).on("touchstart mousedown.xdsoft",function(e){e.stopPropagation();e.preventDefault();L.hide();R.hide();return false});u.append(P);u.xdsoftScroller(re);j.on("afterOpen.xdsoft",function(){u.xdsoftScroller(re)});j.append(v).append(r);if(re.withoutCopyright!==true){j.append(t)}v.append(I).append(D).append(n);ne(re.parentID).append(j);a=function e(){var i=this;i.now=function(e){var t=new Date,r,n;if(!e&&re.defaultDate){r=i.strToDateTime(re.defaultDate);t.setFullYear(r.getFullYear());t.setMonth(r.getMonth());t.setDate(r.getDate())}t.setFullYear(t.getFullYear());if(!e&&re.defaultTime){n=i.strtotime(re.defaultTime);t.setHours(n.getHours());t.setMinutes(n.getMinutes());t.setSeconds(n.getSeconds());t.setMilliseconds(n.getMilliseconds())}return t};i.isValidDate=function(e){if(Object.prototype.toString.call(e)!=="[object Date]"){return false}return!isNaN(e.getTime())};i.setCurrentTime=function(e,t){if(typeof e==="string"){i.currentTime=i.strToDateTime(e)}else if(i.isValidDate(e)){i.currentTime=e}else if(!e&&!t&&re.allowBlank&&!re.inline){i.currentTime=null}else{i.currentTime=i.now()}j.trigger("xchange.xdsoft")};i.empty=function(){i.currentTime=null};i.getCurrentTime=function(){return i.currentTime};i.nextMonth=function(){if(i.currentTime===undefined||i.currentTime===null){i.currentTime=i.now()}var e=i.currentTime.getMonth()+1,t;if(e===12){i.currentTime.setFullYear(i.currentTime.getFullYear()+1);e=0}t=i.currentTime.getFullYear();i.currentTime.setDate(Math.min(new Date(i.currentTime.getFullYear(),e+1,0).getDate(),i.currentTime.getDate()));i.currentTime.setMonth(e);if(re.onChangeMonth&&ne.isFunction(re.onChangeMonth)){re.onChangeMonth.call(j,N.currentTime,j.data("input"))}if(t!==i.currentTime.getFullYear()&&ne.isFunction(re.onChangeYear)){re.onChangeYear.call(j,N.currentTime,j.data("input"))}j.trigger("xchange.xdsoft");return e};i.prevMonth=function(){if(i.currentTime===undefined||i.currentTime===null){i.currentTime=i.now()}var e=i.currentTime.getMonth()-1;if(e===-1){i.currentTime.setFullYear(i.currentTime.getFullYear()-1);e=11}i.currentTime.setDate(Math.min(new Date(i.currentTime.getFullYear(),e+1,0).getDate(),i.currentTime.getDate()));i.currentTime.setMonth(e);if(re.onChangeMonth&&ne.isFunction(re.onChangeMonth)){re.onChangeMonth.call(j,N.currentTime,j.data("input"))}j.trigger("xchange.xdsoft");return e};i.getWeekOfYear=function(e){if(re.onGetWeekOfYear&&ne.isFunction(re.onGetWeekOfYear)){var t=re.onGetWeekOfYear.call(j,e);if(typeof t!=="undefined"){return t}}var r=new Date(e.getFullYear(),0,1);if(r.getDay()!==4){r.setMonth(0,1+(4-r.getDay()+7)%7)}return Math.ceil(((e-r)/864e5+r.getDay()+1)/7)};i.strToDateTime=function(e){var t=[],r,n;if(e&&e instanceof Date&&i.isValidDate(e)){return e}t=/^([+-]{1})(.*)$/.exec(e);if(t){t[2]=ie.parseDate(t[2],re.formatDate)}if(t&&t[2]){r=t[2].getTime()-t[2].getTimezoneOffset()*6e4;n=new Date(i.now(true).getTime()+parseInt(t[1]+"1",10)*r)}else{n=e?ie.parseDate(e,re.format):i.now()}if(!i.isValidDate(n)){n=i.now()}return n};i.strToDate=function(e){if(e&&e instanceof Date&&i.isValidDate(e)){return e}var t=e?ie.parseDate(e,re.formatDate):i.now(true);if(!i.isValidDate(t)){t=i.now(true)}return t};i.strtotime=function(e){if(e&&e instanceof Date&&i.isValidDate(e)){return e}var t=e?ie.parseDate(e,re.formatTime):i.now(true);if(!i.isValidDate(t)){t=i.now(true)}return t};i.str=function(){var e=re.format;if(re.yearOffset){e=e.replace("Y",i.currentTime.getFullYear()+re.yearOffset);e=e.replace("y",String(i.currentTime.getFullYear()+re.yearOffset).substring(2,4))}return ie.formatDate(i.currentTime,e)};i.currentTime=this.now()};N=new a;n.on("touchend click",function(e){e.preventDefault();j.data("changed",true);N.setCurrentTime(d());k.val(N.str());j.trigger("close.xdsoft")});I.find(".xdsoft_today_button").on("touchend mousedown.xdsoft",function(){j.data("changed",true);N.setCurrentTime(0,true);j.trigger("afterOpen.xdsoft")}).on("dblclick.xdsoft",function(){var e=N.getCurrentTime(),t,r;e=new Date(e.getFullYear(),e.getMonth(),e.getDate());t=N.strToDate(re.minDate);t=new Date(t.getFullYear(),t.getMonth(),t.getDate());if(e<t){return}r=N.strToDate(re.maxDate);r=new Date(r.getFullYear(),r.getMonth(),r.getDate());if(e>r){return}k.val(N.str());k.trigger("change");j.trigger("close.xdsoft")});I.find(".xdsoft_prev,.xdsoft_next").on("touchend mousedown.xdsoft",function(){var r=ne(this),n=0,i=false;(function e(t){if(r.hasClass(re.next)){N.nextMonth()}else if(r.hasClass(re.prev)){N.prevMonth()}if(re.monthChangeSpinner){if(!i){n=setTimeout(e,t||100)}}})(500);ne([re.ownerDocument.body,re.contentWindow]).on("touchend mouseup.xdsoft",function e(){clearTimeout(n);i=true;ne([re.ownerDocument.body,re.contentWindow]).off("touchend mouseup.xdsoft",e)})});r.find(".xdsoft_prev,.xdsoft_next").on("touchend mousedown.xdsoft",function(){var a=ne(this),o=0,s=false,l=110;(function e(t){var r=u[0].clientHeight,n=P[0].offsetHeight,i=Math.abs(parseInt(P.css("marginTop"),10));if(a.hasClass(re.next)&&n-r-re.timeHeightInTimePicker>=i){P.css("marginTop","-"+(i+re.timeHeightInTimePicker)+"px")}else if(a.hasClass(re.prev)&&i-re.timeHeightInTimePicker>=0){P.css("marginTop","-"+(i-re.timeHeightInTimePicker)+"px")}u.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(P[0].style.marginTop,10)/(n-r))]);l=l>10?10:l-10;if(!s){o=setTimeout(e,t||l)}})(500);ne([re.ownerDocument.body,re.contentWindow]).on("touchend mouseup.xdsoft",function e(){clearTimeout(o);s=true;ne([re.ownerDocument.body,re.contentWindow]).off("touchend mouseup.xdsoft",e)})});o=0;j.on("xchange.xdsoft",function(e){clearTimeout(o);o=setTimeout(function(){if(N.currentTime===undefined||N.currentTime===null){N.currentTime=N.now()}var e="",t=new Date(N.currentTime.getFullYear(),N.currentTime.getMonth(),1,12,0,0),r=0,n,s=N.now(),i=false,a=false,o=false,l=false,u,c,f,h,d,p,v=[],g,m=true,_="",y,b,w;while(t.getDay()!==re.dayOfWeekStart){t.setDate(t.getDate()-1)}e+="<table><thead><tr>";if(re.weeks){e+="<th></th>"}for(n=0;n<7;n+=1){e+="<th>"+re.i18n[ae].dayOfWeekShort[(n+re.dayOfWeekStart)%7]+"</th>"}e+="</tr></thead>";e+="<tbody>";if(re.maxDate!==false){i=N.strToDate(re.maxDate);i=new Date(i.getFullYear(),i.getMonth(),i.getDate(),23,59,59,999)}if(re.minDate!==false){a=N.strToDate(re.minDate);a=new Date(a.getFullYear(),a.getMonth(),a.getDate())}if(re.minDateTime!==false){o=N.strToDate(re.minDateTime);o=new Date(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds())}if(re.maxDateTime!==false){l=N.strToDate(re.maxDateTime);l=new Date(l.getFullYear(),l.getMonth(),l.getDate(),l.getHours(),l.getMinutes(),l.getSeconds())}var S;if(l!==false){S=(l.getFullYear()*12+l.getMonth())*31+l.getDate()}while(r<N.currentTime.countDaysInMonth()||t.getDay()!==re.dayOfWeekStart||N.currentTime.getMonth()===t.getMonth()){v=[];r+=1;c=t.getDay();f=t.getDate();h=t.getFullYear();d=t.getMonth();p=N.getWeekOfYear(t);w="";v.push("xdsoft_date");if(re.beforeShowDay&&ne.isFunction(re.beforeShowDay.call)){g=re.beforeShowDay.call(j,t)}else{g=null}if(re.allowDateRe&&Object.prototype.toString.call(re.allowDateRe)==="[object RegExp]"){if(!re.allowDateRe.test(ie.formatDate(t,re.formatDate))){v.push("xdsoft_disabled")}}if(re.allowDates&&re.allowDates.length>0){if(re.allowDates.indexOf(ie.formatDate(t,re.formatDate))===-1){v.push("xdsoft_disabled")}}var C=(t.getFullYear()*12+t.getMonth())*31+t.getDate();if(i!==false&&t>i||o!==false&&t<o||a!==false&&t<a||l!==false&&C>S||g&&g[0]===false){v.push("xdsoft_disabled")}if(re.disabledDates.indexOf(ie.formatDate(t,re.formatDate))!==-1){v.push("xdsoft_disabled")}if(re.disabledWeekDays.indexOf(c)!==-1){v.push("xdsoft_disabled")}if(k.is("[disabled]")){v.push("xdsoft_disabled")}if(g&&g[1]!==""){v.push(g[1])}if(N.currentTime.getMonth()!==d){v.push("xdsoft_other_month")}if((re.defaultSelect||j.data("changed"))&&ie.formatDate(N.currentTime,re.formatDate)===ie.formatDate(t,re.formatDate)){v.push("xdsoft_current")}if(ie.formatDate(s,re.formatDate)===ie.formatDate(t,re.formatDate)){v.push("xdsoft_today")}if(t.getDay()===0||t.getDay()===6||re.weekends.indexOf(ie.formatDate(t,re.formatDate))!==-1){v.push("xdsoft_weekend")}if(re.highlightedDates[ie.formatDate(t,re.formatDate)]!==undefined){u=re.highlightedDates[ie.formatDate(t,re.formatDate)];v.push(u.style===undefined?"xdsoft_highlighted_default":u.style);w=u.desc===undefined?"":u.desc}if(re.beforeShowDay&&ne.isFunction(re.beforeShowDay)){v.push(re.beforeShowDay(t))}if(m){e+="<tr>";m=false;if(re.weeks){e+="<th>"+p+"</th>"}}e+='<td data-date="'+f+'" data-month="'+d+'" data-year="'+h+'"'+' class="xdsoft_date xdsoft_day_of_week'+t.getDay()+" "+v.join(" ")+'" title="'+w+'">'+"<div>"+f+"</div>"+"</td>";if(t.getDay()===re.dayOfWeekStartPrev){e+="</tr>";m=true}t.setDate(f+1)}e+="</tbody></table>";D.html(e);I.find(".xdsoft_label span").eq(0).text(re.i18n[ae].months[N.currentTime.getMonth()]);I.find(".xdsoft_label span").eq(1).text(N.currentTime.getFullYear()+re.yearOffset);_="";y="";d="";var O=0;if(re.minTime!==false){var x=N.strtotime(re.minTime);O=60*x.getHours()+x.getMinutes()}var T=24*60;if(re.maxTime!==false){var x=N.strtotime(re.maxTime);T=60*x.getHours()+x.getMinutes()}if(re.minDateTime!==false){var x=N.strToDateTime(re.minDateTime);var E=ie.formatDate(N.currentTime,re.formatDate)===ie.formatDate(x,re.formatDate);if(E){var d=60*x.getHours()+x.getMinutes();if(d>O)O=d}}if(re.maxDateTime!==false){var x=N.strToDateTime(re.maxDateTime);var M=ie.formatDate(N.currentTime,re.formatDate)===ie.formatDate(x,re.formatDate);if(M){var d=60*x.getHours()+x.getMinutes();if(d<T)T=d}}b=function e(t,r){var n=N.now(),i,a=re.allowTimes&&ne.isArray(re.allowTimes)&&re.allowTimes.length;n.setHours(t);t=parseInt(n.getHours(),10);n.setMinutes(r);r=parseInt(n.getMinutes(),10);v=[];var o=60*t+r;if(k.is("[disabled]")||o>=T||o<O){v.push("xdsoft_disabled")}i=new Date(N.currentTime);i.setHours(parseInt(N.currentTime.getHours(),10));if(!a){i.setMinutes(Math[re.roundTime](N.currentTime.getMinutes()/re.step)*re.step)}if((re.initTime||re.defaultSelect||j.data("changed"))&&i.getHours()===parseInt(t,10)&&(!a&&re.step>59||i.getMinutes()===parseInt(r,10))){if(re.defaultSelect||j.data("changed")){v.push("xdsoft_current")}else if(re.initTime){v.push("xdsoft_init_time")}}if(parseInt(s.getHours(),10)===parseInt(t,10)&&parseInt(s.getMinutes(),10)===parseInt(r,10)){v.push("xdsoft_today")}_+='<div class="xdsoft_time '+v.join(" ")+'" data-hour="'+t+'" data-minute="'+r+'">'+ie.formatDate(n,re.formatTime)+"</div>"};if(!re.allowTimes||!ne.isArray(re.allowTimes)||!re.allowTimes.length){for(r=0,n=0;r<(re.hours12?12:24);r+=1){for(n=0;n<60;n+=re.step){var A=r*60+n;if(A<O)continue;if(A>=T)continue;y=(r<10?"0":"")+r;d=(n<10?"0":"")+n;b(y,d)}}}else{for(r=0;r<re.allowTimes.length;r+=1){y=N.strtotime(re.allowTimes[r]).getHours();d=N.strtotime(re.allowTimes[r]).getMinutes();b(y,d)}}P.html(_);$="";for(r=parseInt(re.yearStart,10);r<=parseInt(re.yearEnd,10);r+=1){$+='<div class="xdsoft_option '+(N.currentTime.getFullYear()===r?"xdsoft_current":"")+'" data-value="'+r+'">'+(r+re.yearOffset)+"</div>"}L.children().eq(0).html($);for(r=parseInt(re.monthStart,10),$="";r<=parseInt(re.monthEnd,10);r+=1){$+='<div class="xdsoft_option '+(N.currentTime.getMonth()===r?"xdsoft_current":"")+'" data-value="'+r+'">'+re.i18n[ae].months[r]+"</div>"}R.children().eq(0).html($);ne(j).trigger("generate.xdsoft")},10);e.stopPropagation()}).on("afterOpen.xdsoft",function(){if(re.timepicker){var e,t,r,n;if(P.find(".xdsoft_current").length){e=".xdsoft_current"}else if(P.find(".xdsoft_init_time").length){e=".xdsoft_init_time"}if(e){t=u[0].clientHeight;r=P[0].offsetHeight;n=P.find(e).index()*re.timeHeightInTimePicker+1;if(r-t<n){n=r-t}u.trigger("scroll_element.xdsoft_scroller",[parseInt(n,10)/(r-t)])}else{u.trigger("scroll_element.xdsoft_scroller",[0])}}});s=0;D.on("touchend click.xdsoft","td",function(e){e.stopPropagation();s+=1;var t=ne(this),r=N.currentTime;if(r===undefined||r===null){N.currentTime=N.now();r=N.currentTime}if(t.hasClass("xdsoft_disabled")){return false}r.setDate(1);r.setFullYear(t.data("year"));r.setMonth(t.data("month"));r.setDate(t.data("date"));j.trigger("select.xdsoft",[r]);k.val(N.str());if(re.onSelectDate&&ne.isFunction(re.onSelectDate)){re.onSelectDate.call(j,N.currentTime,j.data("input"),e)}j.data("changed",true);j.trigger("xchange.xdsoft");j.trigger("changedatetime.xdsoft");if((s>1||re.closeOnDateSelect===true||re.closeOnDateSelect===false&&!re.timepicker)&&!re.inline){j.trigger("close.xdsoft")}setTimeout(function(){s=0},200)});P.on("touchstart","div",function(e){this.touchMoved=false}).on("touchmove","div",h).on("touchend click.xdsoft","div",function(e){if(!this.touchMoved){e.stopPropagation();var t=ne(this),r=N.currentTime;if(r===undefined||r===null){N.currentTime=N.now();r=N.currentTime}if(t.hasClass("xdsoft_disabled")){return false}r.setHours(t.data("hour"));r.setMinutes(t.data("minute"));j.trigger("select.xdsoft",[r]);j.data("input").val(N.str());if(re.onSelectTime&&ne.isFunction(re.onSelectTime)){re.onSelectTime.call(j,N.currentTime,j.data("input"),e)}j.data("changed",true);j.trigger("xchange.xdsoft");j.trigger("changedatetime.xdsoft");if(re.inline!==true&&re.closeOnTimeSelect===true){j.trigger("close.xdsoft")}}});v.on("mousewheel.xdsoft",function(e){if(!re.scrollMonth){return true}if(e.deltaY<0){N.nextMonth()}else{N.prevMonth()}return false});k.on("mousewheel.xdsoft",function(e){if(!re.scrollInput){return true}if(!re.datepicker&&re.timepicker){l=P.find(".xdsoft_current").length?P.find(".xdsoft_current").eq(0).index():0;if(l+e.deltaY>=0&&l+e.deltaY<P.children().length){l+=e.deltaY}if(P.children().eq(l).length){P.children().eq(l).trigger("mousedown")}return false}if(re.datepicker&&!re.timepicker){v.trigger(e,[e.deltaY,e.deltaX,e.deltaY]);if(k.val){k.val(N.str())}j.trigger("changedatetime.xdsoft");return false}});j.on("changedatetime.xdsoft",function(e){if(re.onChangeDateTime&&ne.isFunction(re.onChangeDateTime)){var t=j.data("input");re.onChangeDateTime.call(j,N.currentTime,t,e);delete re.value;t.trigger("change")}}).on("generate.xdsoft",function(){if(re.onGenerate&&ne.isFunction(re.onGenerate)){re.onGenerate.call(j,N.currentTime,j.data("input"))}if(i){j.trigger("afterOpen.xdsoft");i=false}}).on("click.xdsoft",function(e){e.stopPropagation()});l=0;g=function e(t,r){do{t=t.parentNode;if(!t||r(t)===false){break}}while(t.nodeName!=="HTML")};c=function e(){var t,r,n,i,a,o,s,l,u,c,f,h,d;l=j.data("input");t=l.offset();r=l[0];c="top";n=t.top+r.offsetHeight-1;i=t.left;a="absolute";u=ne(re.contentWindow).width();h=ne(re.contentWindow).height();d=ne(re.contentWindow).scrollTop();if(re.ownerDocument.documentElement.clientWidth-t.left<v.parent().outerWidth(true)){var p=v.parent().outerWidth(true)-r.offsetWidth;i=i-p}if(l.parent().css("direction")==="rtl"){i-=j.outerWidth()-l.outerWidth()}if(re.fixed){n-=d;i-=ne(re.contentWindow).scrollLeft();a="fixed"}else{s=false;g(r,function(e){if(e===null){return false}if(re.contentWindow.getComputedStyle(e).getPropertyValue("position")==="fixed"){s=true;return false}});if(s){a="fixed";if(n+j.outerHeight()>h+d){c="bottom";n=h+d-t.top}else{n-=d}}else{if(n+j[0].offsetHeight>h+d){n=t.top-j[0].offsetHeight+1}}if(n<0){n=0}if(i+r.offsetWidth>u){i=u-r.offsetWidth}}o=j[0];g(o,function(e){var t;t=re.contentWindow.getComputedStyle(e).getPropertyValue("position");if(t==="relative"&&u>=e.offsetWidth){i=i-(u-e.offsetWidth)/2;return false}});f={position:a,left:i,top:"",bottom:""};f[c]=n;j.css(f)};j.on("open.xdsoft",function(e){var t=true;if(re.onShow&&ne.isFunction(re.onShow)){t=re.onShow.call(j,N.currentTime,j.data("input"),e)}if(t!==false){j.show();c();ne(re.contentWindow).off("resize.xdsoft",c).on("resize.xdsoft",c);if(re.closeOnWithoutClick){ne([re.ownerDocument.body,re.contentWindow]).on("touchstart mousedown.xdsoft",function e(){j.trigger("close.xdsoft");ne([re.ownerDocument.body,re.contentWindow]).off("touchstart mousedown.xdsoft",e)})}}}).on("close.xdsoft",function(e){var t=true;I.find(".xdsoft_month,.xdsoft_year").find(".xdsoft_select").hide();if(re.onClose&&ne.isFunction(re.onClose)){t=re.onClose.call(j,N.currentTime,j.data("input"),e)}if(t!==false&&!re.opened&&!re.inline){j.hide()}e.stopPropagation()}).on("toggle.xdsoft",function(){if(j.is(":visible")){j.trigger("close.xdsoft")}else{j.trigger("open.xdsoft")}}).data("input",k);f=0;j.data("xdsoft_datetime",N);j.setOptions(re);function d(){var e=false,t;if(re.startDate){e=N.strToDate(re.startDate)}else{e=re.value||(k&&k.val&&k.val()?k.val():"");if(e){e=N.strToDateTime(e);if(re.yearOffset){e=new Date(e.getFullYear()-re.yearOffset,e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}}else if(re.defaultDate){e=N.strToDateTime(re.defaultDate);if(re.defaultTime){t=N.strtotime(re.defaultTime);e.setHours(t.getHours());e.setMinutes(t.getMinutes())}}}if(e&&N.isValidDate(e)){j.data("changed",true)}else{e=""}return e||0}function p(C){var O=function e(t,r){var n=t.replace(/([\[\]\/\{\}\(\)\-\.\+]{1})/g,"\\$1").replace(/_/g,"{digit+}").replace(/([0-9]{1})/g,"{digit$1}").replace(/\{digit([0-9]{1})\}/g,"[0-$1_]{1}").replace(/\{digit[\+]\}/g,"[0-9_]{1}");return new RegExp(n).test(r)},e=function e(t){try{if(C.ownerDocument.selection&&C.ownerDocument.selection.createRange){var r=C.ownerDocument.selection.createRange();return r.getBookmark().charCodeAt(2)-2}if(t.setSelectionRange){return t.selectionStart}}catch(e){return 0}},x=function e(t,r){t=typeof t==="string"||t instanceof String?C.ownerDocument.getElementById(t):t;if(!t){return false}if(t.createTextRange){var n=t.createTextRange();n.collapse(true);n.moveEnd("character",r);n.moveStart("character",r);n.select();return true}if(t.setSelectionRange){t.setSelectionRange(r,r);return true}return false};if(C.mask){k.off("keydown.xdsoft")}if(C.mask===true){if(ie.formatMask){C.mask=ie.formatMask(C.format)}else{C.mask=C.format.replace(/Y/g,"9999").replace(/F/g,"9999").replace(/m/g,"19").replace(/d/g,"39").replace(/H/g,"29").replace(/i/g,"59").replace(/s/g,"59")}}if(ne.type(C.mask)==="string"){if(!O(C.mask,k.val())){k.val(C.mask.replace(/[0-9]/g,"_"));x(k[0],0)}k.on("paste.xdsoft",function(e){var t=e.clipboardData||e.originalEvent.clipboardData||window.clipboardData,r=t.getData("text"),n=this.value,i=this.selectionStart;var a=n.substr(0,i);var o=n.substr(i+r.length);n=a+r+o;i+=r.length;if(O(C.mask,n)){this.value=n;x(this,i)}else if(ne.trim(n)===""){this.value=C.mask.replace(/[0-9]/g,"_")}else{k.trigger("error_input.xdsoft")}e.preventDefault();return false});k.on("keydown.xdsoft",function(e){var t=this.value,r=e.which,n=this.selectionStart,i=this.selectionEnd,a=n!==i,o;if(r>=T&&r<=E||r>=M&&r<=A||r===W||r===G){o=r===W||r===G?"_":String.fromCharCode(M<=r&&r<=A?r-T:r);if(r===W&&n&&!a){n-=1}while(true){var s=C.mask.substr(n,1);var l=n<C.mask.length;var u=n>0;var c=/[^0-9_]/;var f=c.test(s);var h=f&&l&&u;if(!h)break;n+=r===W&&!a?-1:1}if(a){var d=i-n;var p=C.mask.replace(/[0-9]/g,"_");var v=p.substr(n,d);var g=v.substr(1);var m=t.substr(0,n);var _=o+g;var y=t.substr(n+d);t=m+_+y}else{var b=t.substr(0,n);var w=o;var S=t.substr(n+1);t=b+w+S}if(ne.trim(t)===""){t=p}else{if(n===C.mask.length){e.preventDefault();return false}}n+=r===W?0:1;while(/[^0-9_]/.test(C.mask.substr(n,1))&&n<C.mask.length&&n>0){n+=r===W?0:1}if(O(C.mask,t)){this.value=t;x(this,n)}else if(ne.trim(t)===""){this.value=C.mask.replace(/[0-9]/g,"_")}else{k.trigger("error_input.xdsoft")}}else{if([X,Z,Q,J,ee].indexOf(r)!==-1&&te||[H,V,z,Y,q,K,F,B,U].indexOf(r)!==-1){return true}}e.preventDefault();return false})}}N.setCurrentTime(d());k.data("xdsoft_datetimepicker",j).on("open.xdsoft focusin.xdsoft mousedown.xdsoft touchstart",function(){if(k.is(":disabled")||k.data("xdsoft_datetimepicker").is(":visible")&&re.closeOnInputClick){return}if(!re.openOnFocus){return}clearTimeout(f);f=setTimeout(function(){if(k.is(":disabled")){return}i=true;N.setCurrentTime(d(),true);if(re.mask){p(re)}j.trigger("open.xdsoft")},100)}).on("keydown.xdsoft",function(e){var t,r=e.which;if([U].indexOf(r)!==-1&&re.enterLikeTab){t=ne("input:visible,textarea:visible,button:visible,a:visible");j.trigger("close.xdsoft");t.eq(t.index(this)+1).focus();return false}if([B].indexOf(r)!==-1){j.trigger("close.xdsoft");return true}}).on("blur.xdsoft",function(){j.trigger("close.xdsoft")})};o=function e(t){var r=t.data("xdsoft_datetimepicker");if(r){r.data("xdsoft_datetime",null);r.remove();t.data("xdsoft_datetimepicker",null).off(".xdsoft");ne(re.contentWindow).off("resize.xdsoft");ne([re.contentWindow,re.ownerDocument.body]).off("mousedown.xdsoft touchstart");if(t.unmousewheel){t.unmousewheel()}}};ne(re.ownerDocument).off("keydown.xdsoftctrl keyup.xdsoftctrl").on("keydown.xdsoftctrl",function(e){if(e.keyCode===F){te=true}}).on("keyup.xdsoftctrl",function(e){if(e.keyCode===F){te=false}});this.each(function(){var e=ne(this).data("xdsoft_datetimepicker"),t;if(e){if(ne.type($)==="string"){switch($){case"show":ne(this).select().focus();e.trigger("open.xdsoft");break;case"hide":e.trigger("close.xdsoft");break;case"toggle":e.trigger("toggle.xdsoft");break;case"destroy":o(ne(this));break;case"reset":this.value=this.defaultValue;if(!this.value||!e.data("xdsoft_datetime").isValidDate(ie.parseDate(this.value,re.format))){e.data("changed",false)}e.data("xdsoft_datetime").setCurrentTime(this.value);break;case"validate":t=e.data("input");t.trigger("blur.xdsoft");break;default:if(e[$]&&ne.isFunction(e[$])){n=e[$](r)}}}else{e.setOptions($)}return 0}if(ne.type($)!=="string"){if(!re.lazyInit||re.open||re.inline){a(ne(this))}else{s(ne(this))}}});return n};ne.fn.datetimepicker.defaults=l;function m(e,t,r){"use strict";this.date=e;this.desc=t;this.style=r}};(function(e){if(true){!(a=[n(27),n(441)],i=e,o=typeof i==="function"?i.apply(r,a):i,o!==undefined&&(t.exports=o))}else{}})(e)},function(t,e,r){(function(e){t.exports=e["Bloodhound"]=r(507)}).call(this,r(274))},function(e){e.exports={a:"2.5.0"}},function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<h3>Total: {{ $ctrl.result.total }}</h3>\n\n<ul class="nav nav-tabs"\n    role="tablist">\n  \x3c!-- sources are dynamically added in GMF after reading the themes, so\n       no one-time binding here --\x3e\n  <li ng-repeat="source in $ctrl.result.sources"\n      role="presentation"\n      ng-if="source.features.length">\n    <a href="#{{ ::source.id }}"\n       aria-controls="{{ ::source.id }}"\n       role="tab"\n       data-toggle="tab">\n      <span>{{ ::source.label }}</span>\n      <span>({{ ::source.features.length }})</span>\n    </a>\n  </li>\n</ul>\n\n<div class="tab-content">\n  \x3c!-- same thing here --\x3e\n  <div ng-repeat="source in $ctrl.result.sources"\n       role="tabpanel"\n       class="tab-pane"\n       ng-if="source.features.length"\n       id="{{ ::source.id }}">\n    <div ng-repeat="feature in ::source.features">\n      <h3>{{ ::feature.get(\'display_name\') }}</h3>\n      <div ng-repeat="(key, value) in ::feature.getProperties()"\n           ng-init="value = value !== undefined ? value : \'\'">\n        <span ng-if="::(key !== feature.getGeometryName() && key !== \'ngeo_feature_type_\')">\n          <span ng-bind="::key"></span>:\n          <span ng-bind="::value"></span>\n        </span>\n      </div>\n    </div>\n  </div>\n</div>\n'}return __p}},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var i=r(68);var n;if(Object.keys){n=Object.keys}else{n=function e(t){var r,n=[];for(r in t){if(Object(i["a"])(t,r)){n.push(r)}}return n}}},function(e,t,r){"use strict";(function(c){var f=r(62);var h=r(5);var a=r(21);var o=r(35);var e=angular.module("ngeoExportfeatures",[f["a"].module.name]);e.directive_=function(){return{controller:"ngeoExportfeaturesController as efCtrl",scope:true,bindToController:{features:"=ngeoExportfeaturesFeatures"}}};e.directive("ngeoExportfeatures",e.directive_);e.Controller_=function(e,t,r,n){var i=this;this.features;this.element_=e;var a=h["c"](this);var o=["ngeo-exportfeature",a].join("-");this.id_=o;this.featureHelper_=n;var s;if(t.has("ngeoExportFeatureFormats")){s=t.get("ngeoExportFeatureFormats")}else{s=[f["a"].FormatType.KML]}this.menu_=null;this.items_=[];if(s.length>1){e.attr("id",o);var l=c("<ul />",{class:"dropdown-menu","aria-labelledby":o}).appendTo(e.parent()[0]);this.menu_=l;var u;s.forEach(function(e){u=c("<li />").appendTo(l).append(c("<a />",{href:"#",text:e}).on(["click",o].join("."),i.handleMenuItemClick_.bind(i,e)));i.items_.push(u)})}this.formats_=s;e.on(["click",o].join("."),this.handleElementClick_.bind(this));r.$on("$destroy",this.handleDestroy_.bind(this))};e.Controller_.$inject=["$element","$injector","$scope","ngeoFeatureHelper"];e.Controller_.prototype.handleElementClick_=function(){var r=this;var e=this.features.getArray();if(this.formats_.length===1){this.featureHelper_.export(e,this.formats_[0])}else if(e.length===1){var t=e[0];var n=t.getGeometry();var i;this.formats_.forEach(function(e,t){i=r.items_[t];if(e===f["a"].FormatType.GPX){if(n instanceof a["a"]||n instanceof o["a"]){i.removeClass("disabled")}else{i.addClass("disabled")}}})}};e.Controller_.prototype.handleMenuItemClick_=function(e,t){if(!c(t.target.parentElement).hasClass("disabled")){var r=this.features.getArray();this.featureHelper_.export(r,e)}};e.Controller_.prototype.handleDestroy_=function(){var t=this.id_;this.element_.off(["click",t].join("."));if(this.menu_){this.menu_.remove();this.items_.forEach(function(e){e.off(["click",t].join("."))});this.items_.length=0;this.menu_=null}};e.controller("ngeoExportfeaturesController",e.Controller_);t["a"]=e}).call(this,r(27))},function(e,s,l){"use strict";(function(t){var r=l(271);var e=l(393);var n=l.n(e);var i=l(380);var a=l.n(i);var o=angular.module("ngeoDateTimePicker",["gettext"]);o.component_=function(){return{restrict:"A",controller:o.Controller_,bindToController:true,scope:{options:"<ngeoDatetimepickerOptions"}}};o.directive("ngeoDatetimepicker",o.component_);o.Controller_=function(e,t){this.element_=e;this.gettextCatalog_=t;this.options};o.Controller_.$inject=["$element","gettextCatalog"];o.Controller_.prototype.$onInit=function(){var e=this.gettextCatalog_.getCurrentLanguage();t.datetimepicker.setLocale(e);t.datetimepicker.setDateFormatter(new r["a"]);if(typeof this.options==="string"){this.options=angular.fromJson(this.options)}this.element_.datetimepicker(this.options)};o.controller("ngeoDateTimePickerController",o.Controller_);s["a"]=o}).call(this,l(27))},function(e,r,n){"use strict";(function(a){var e=n(5);var o=n(129);var t=function e(t){var r=t!==undefined?t:{};var n;if(r.element){n=r.element;delete r.element}else{n=a("<div />")[0]}this.closeEl_=a("<button>",{class:"close",html:"&times;"});this.contentEl_=a("<div/>").append(this.closeEl_).append(n);r.element=a("<div />")[0];o["a"].call(this,r)};e["d"](t,o["a"]);t.prototype.setMap=function(e){var t=this;var r=this.getElement();var n=this.getMap();if(n){a(r).popover("dispose")}o["a"].prototype.setMap.call(this,e);if(e){var i=this.contentEl_;window.setTimeout(function(){a(r).popover({content:i,html:true,placement:"top",template:['<div class="popover ngeo-popover" role="tooltip">','  <div class="arrow"></div>','  <h3 class="popover-header"></h3>','  <div class="popover-body"></div>',"</div>"].join("")}).popover("show")},0);this.closeEl_.one("click",function(){var e=t.getMap();if(e){e.removeOverlay(t)}})}};r["a"]=t}).call(this,n(27))},function(e,t,r){"use strict";var n={};n.Permalink3dParam={ENABLED:"3d_enabled",LON:"3d_lon",LAT:"3d_lat",ELEVATION:"3d_elevation",HEADING:"3d_heading",PITCH:"3d_pitch",PREFIX:"3d_"};t["a"]=n},function(e,t,r){"use strict";var l=r(1);var n=function e(n,i,a,t,o){var r=t.$watchCollection(function(){return n},function(){var e,t,r;if(a){for(e=n.length-1,r=0;e>=0;--e){if(o(n[e])){i[r++]=n[e]}}}else{for(e=0,t=n.length,r=0;e<t;++e){if(o(n[e])){i[r++]=n[e]}}}i.length=r});var s=t.$watchCollection(function(){return i},function(){var e,t,r;if(a){for(e=0,t=n.length,r=i.length-1;e<t;++e){if(o(n[e])){n[e]=i[r--]}}l["a"].assert(r==-1)}else{for(e=0,t=n.length,r=0;e<t;++e){if(o(n[e])){n[e]=i[r++]}}l["a"].assert(r==i.length)}});return function(){r();s()}};t["a"]=n},function(e,r,t){(function(e,t){true?t(r):undefined})(this,function(e){"use strict";function t(e){return+e}function r(e){return e*e}function n(e){return e*(2-e)}function i(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function a(e){return e*e*e}function o(e){return--e*e*e+1}function s(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var l=3;var u=function e(t){t=+t;function r(e){return Math.pow(e,t)}r.exponent=e;return r}(l);var c=function e(t){t=+t;function r(e){return 1-Math.pow(1-e,t)}r.exponent=e;return r}(l);var f=function e(t){t=+t;function r(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}r.exponent=e;return r}(l);var h=Math.PI,d=h/2;function p(e){return 1-Math.cos(e*d)}function v(e){return Math.sin(e*d)}function g(e){return(1-Math.cos(h*e))/2}function m(e){return Math.pow(2,10*e-10)}function _(e){return 1-Math.pow(2,-10*e)}function y(e){return((e*=2)<=1?Math.pow(2,10*e-10):2-Math.pow(2,10-10*e))/2}function b(e){return 1-Math.sqrt(1-e*e)}function w(e){return Math.sqrt(1- --e*e)}function S(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var C=4/11,O=6/11,x=8/11,T=3/4,E=9/11,M=10/11,A=15/16,k=21/22,j=63/64,I=1/C/C;function D(e){return 1-P(1-e)}function P(e){return(e=+e)<C?I*e*e:e<x?I*(e-=O)*e+T:e<M?I*(e-=E)*e+A:I*(e-=k)*e+j}function R(e){return((e*=2)<=1?1-P(1-e):P(e-1)+1)/2}var L=1.70158;var N=function e(t){t=+t;function r(e){return e*e*((t+1)*e-t)}r.overshoot=e;return r}(L);var $=function e(t){t=+t;function r(e){return--e*e*((t+1)*e+t)+1}r.overshoot=e;return r}(L);var F=function e(t){t=+t;function r(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}r.overshoot=e;return r}(L);var G=2*Math.PI,U=1,H=.3;var W=function t(r,n){var i=Math.asin(1/(r=Math.max(1,r)))*(n/=G);function e(e){return r*Math.pow(2,10*--e)*Math.sin((i-e)/n)}e.amplitude=function(e){return t(e,n*G)};e.period=function(e){return t(r,e)};return e}(U,H);var Y=function t(r,n){var i=Math.asin(1/(r=Math.max(1,r)))*(n/=G);function e(e){return 1-r*Math.pow(2,-10*(e=+e))*Math.sin((e+i)/n)}e.amplitude=function(e){return t(e,n*G)};e.period=function(e){return t(r,e)};return e}(U,H);var V=function t(r,n){var i=Math.asin(1/(r=Math.max(1,r)))*(n/=G);function e(e){return((e=e*2-1)<0?r*Math.pow(2,10*e)*Math.sin((i-e)/n):2-r*Math.pow(2,-10*e)*Math.sin((i+e)/n))/2}e.amplitude=function(e){return t(e,n*G)};e.period=function(e){return t(r,e)};return e}(U,H);e.easeLinear=t;e.easeQuad=i;e.easeQuadIn=r;e.easeQuadOut=n;e.easeQuadInOut=i;e.easeCubic=s;e.easeCubicIn=a;e.easeCubicOut=o;e.easeCubicInOut=s;e.easePoly=f;e.easePolyIn=u;e.easePolyOut=c;e.easePolyInOut=f;e.easeSin=g;e.easeSinIn=p;e.easeSinOut=v;e.easeSinInOut=g;e.easeExp=y;e.easeExpIn=m;e.easeExpOut=_;e.easeExpInOut=y;e.easeCircle=S;e.easeCircleIn=b;e.easeCircleOut=w;e.easeCircleInOut=S;e.easeBounce=P;e.easeBounceIn=D;e.easeBounceOut=P;e.easeBounceInOut=R;e.easeBack=F;e.easeBackIn=N;e.easeBackOut=$;e.easeBackInOut=F;e.easeElastic=Y;e.easeElasticIn=W;e.easeElasticOut=Y;e.easeElasticInOut=V;Object.defineProperty(e,"__esModule",{value:true})})},function(e,t,r){"use strict";(function(s){var e=angular.module("ngeoRecenter",[]);e.directive_=function(){return{restrict:"A",link:function e(i,t,r){var n=r["ngeoRecenterMap"];var a=i.$eval(n);function o(e){var t=e.attr("ngeo-extent");if(t!==undefined){var r=a.getSize();a.getView().fit(i.$eval(t),{size:r})}var n=e.attr("ngeo-zoom");if(n!==undefined){a.getView().setZoom(i.$eval(n))}}t.on("click","*",function(e){o(angular.element(s(this)))});t.on("change",function(e){var t=e.target.options[e.target.selectedIndex];o(angular.element(t))})}}};e.directive("ngeoRecenter",e.directive_);t["a"]=e}).call(this,r(27))},function(e,x,T){"use strict";(function(s){var a=T(59);var e=T(74);var t=T(350);var d=T(22);var h=T(1);var r=T(105);var n=T(351);var i=T(324);var o=T(406);var l=T(365);var u=T(14);var p=T(77);var c=T(21);var f=T(9);var v=T(137);var g=T(10);var m=T(66);var _=T(30);var y=T(107);var b=T(29);var w=T(11);var S=T(127);var C=angular.module("gmfSearch",[e["a"].module.name,t["a"].module.name,d["a"].module.name,n["a"].module.name,i["a"].name,l["a"].name,r["a"].module.name,o["a"].name]);C.gmfSearchTemplateUrl_=function(e,t){var r=t["gmfSearchTemplateurl"];return r!==undefined?r:"gmf/search"};C.run(["$templateCache",function(e){e.put("gmf/search",T(511))}]);O.$inject=["$element","$attrs","gmfSearchTemplateUrl"];function O(e,t,r){return r(e,t)}C.component_={bindings:{inputValue:"=?gmfSearchInputValue",placeholder:"@?gmfSearchPlaceholder",map:"<gmfSearchMap",datasources:"<gmfSearchDatasources",typeaheadOptions:"<?gmfSearchOptions",featuresStyles:"<?gmfSearchStyles",clearButton:"=?gmfSearchClearbutton",colorChooser:"<?gmfSearchColorchooser",coordinatesProjections:"<?gmfSearchCoordinatesprojections",additionalListeners:"<gmfSearchListeners",maxZoom:"<?gmfSearchMaxzoom",delay:"<?gmfSearchDelay",onInitCallback:"<?gmfSearchOnInit"},controller:"gmfSearchController",templateUrl:O};C.value("gmfSearchTemplateUrl",C.gmfSearchTemplateUrl_);C.component("gmfSearch",C.component_);C.SearchController_=function(){e.$inject=["$element","$scope","$compile","$timeout","$injector","gettextCatalog","ngeoAutoProjection","ngeoSearchCreateGeoJSONBloodhound","ngeoFeatureOverlayMgr","gmfThemes","gmfTreeManager","gmfSearchFulltextSearch"];function e(e,t,r,n,i,a,o,s,l,u,c,f){this.element_=e;this.scope_=t;this.compile_=r;this.timeout_=n;this.gettextCatalog_=a;this.gmfThemes_=u;this.gmfTreeManager_=c;this.fullTextSearch_=f;this.ngeoSearchCreateGeoJSONBloodhound_=s;this.ngeoFeatureOverlayMgr=l;this.ngeoLocation_;if(i.has("ngeoLocation")){this.ngeoLocation_=i.get("ngeoLocation")}this.ngeoAutoProjection_=o;this.map;this.styles_={};this.onInitCallback;this.clearButton;this.colorChooser;this.placeholder;this.delay;this.maxZoom=16;this.coordinatesProjections;this.featureOverlay_=l.getFeatureOverlay();this.datasources=[];this.typeaheadOptions;this.options={highlight:true};this.featuresStyles;this.datasets=[];this.inputValue="";this.color;this.displayColorPicker=false;this.listeners;this.additionalListeners}var t=e.prototype;t.$onInit=function e(){var t=this;var r=this.gettextCatalog_;this.clearButton=this.clearButton!==false;this.colorChooser=this.colorChooser===true;if(this.delay===undefined){this.delay=50}this.placeholder=this.placeholder!==undefined?this.placeholder:r.getString("Search…");var n=this.coordinatesProjections;if(n===undefined){n=[this.map.getView().getProjection()]}else{n=this.ngeoAutoProjection_.getProjectionList(n)}this.coordinatesProjections=n;if(!this.clearButton){this.element_.find("input").on("focus blur",function(){t.clear()})}if(this.onInitCallback){this.onInitCallback()}this.initStyles_();this.featureOverlay_.setStyle(this.getSearchStyle_.bind(this));if(this.typeaheadOptions){f["a"](this.options,this.typeaheadOptions)}this.initDatasets_();this.scope_.$watch(function(){return t.color},this.setStyleColor.bind(this));this.listeners=this.mergeListeners_(this.additionalListeners,{select:this.select_.bind(this),close:this.close_.bind(this),datasetsempty:this.datasetsempty_.bind(this)});if(this.ngeoLocation_){var i=this.ngeoLocation_.getParam("search");if(i){var a=1;if(this.ngeoLocation_.getParam("search-select-index")){a=parseInt(this.ngeoLocation_.getParam("search-select-index"),10)}var o;if(this.ngeoLocation_.getParam("search-maxzoom")){o=parseInt(this.ngeoLocation_.getParam("search-maxzoom"),10)}else if(this.ngeoLocation_.getParam("map_zoom")){o=parseInt(this.ngeoLocation_.getParam("map_zoom"),10)}this.fulltextsearch_(i,a,o)}}};t.mergeListeners_=function e(n,i){if(n===undefined){return i}return{open:n.open,close:n.close===undefined?i.close:function(){i.close();n.close()},cursorchange:n.cursorchange,datasetsempty:n.datasetsempty,select:n.select===undefined?i.select:function(e,t,r){i.select(e,t,r);n.select(e,t,r)},autocomplete:n.autocomplete}};t.initDatasets_=function e(){var o=this;var s=this.gettextCatalog_;var t=function e(t){var r=o.datasources[t];var n=r.groupValues!==undefined?r.groupValues:[];var i=r.groupActions?r.groupActions:[];var a=[];if(n.length===0){a.push({title:"",filter:o.filterLayername_()})}else{n.forEach(function(e){a.push({title:e,filter:this.filterLayername_(e)})},o)}i.forEach(function(e){a.push({title:s.getString(e["title"]),filter:this.filterAction_(e["action"])})},o);a.forEach(function(e){this.datasets.push(this.createDataset_({bloodhoundOptions:r.bloodhoundOptions,datasetTitle:e["title"],groupsKey:"layer_name",labelKey:r.labelKey,projection:r.projection,typeaheadDatasetOptions:r.typeaheadDatasetOptions,url:r.url},e["filter"]))},o)};for(var r=0;r<this.datasources.length;r++){t(r)}this.datasets.push({source:this.createSearchCoordinates_(this.map.getView()),name:"coordinates",display:"label",templates:{header:function e(){var e=s.getString("Recenter to");return'<div class="gmf-search-header" translate>'+e+"</div>"},suggestion:function e(t){var r=t["label"];var n='<p class="gmf-search-label">'+r+"</p>";n='<div class="gmf-search-datum">'+n+"</div>";return n}}})};t.createDataset_=function e(a,t){var r=this.gettextCatalog_;var o=this.scope_;var s=this.compile_;var n=this.createAndInitBloodhound_(a,t);var i={limit:Infinity,source:n.ttAdapter(),display:function e(t){var r=t;return r.get(a.labelKey)},templates:{header:function e(){if(a.datasetTitle===undefined){return""}else{var e=r.getString(a.datasetTitle);return'<div class="gmf-search-header">'+e+"</div>"}},suggestion:function e(t){var r=t;var n=o.$new(true);n["feature"]=r;var i='<p class="gmf-search-label" translate>'+r.get(a.labelKey)+"</p>";i+='<p class="gmf-search-group" translate>'+(r.get("layer_name")||a.datasetTitle)+"</p>";i='<div class="gmf-search-datum">'+i+"</div>";return s(i)(n)}}};if(a.typeaheadDatasetOptions){f["a"](i,a.typeaheadDatasetOptions)}return i};t.filterAction_=function e(r){return function(e){var t=e["properties"];if(t["actions"]){return!t["layer_name"]&&t["actions"].some(function(e){return e.action===r})}else{return false}}};t.filterLayername_=function e(r){return function(e){var t=e["properties"]["layer_name"];if(t===undefined){return false}if(r===undefined){return true}return t===r}};t.createAndInitBloodhound_=function e(t,r){var n=this.map.getView().getProjection().getCode();var i=this.getBloodhoudRemoteOptions_();var a=this.ngeoSearchCreateGeoJSONBloodhound_(t.url,r,g["g"](n),g["g"](t.projection),t.bloodhoundOptions,i);a.initialize();return a};t.getBloodhoudRemoteOptions_=function e(){var a=this.gettextCatalog_;return{rateLimitWait:this.delay,prepare:function e(t,r){var n=r.url;var i=a.currentLanguage;r.xhrFields={withCredentials:true};r.url=S["a"](n,{query:t,lang:i});return r}}};t.createSearchCoordinates_=function e(t){var a=t.getProjection();var o=a.getExtent();return function(e,t){var r=[];var n=this.ngeoAutoProjection_.stringToCoordinates(e);if(n===null){return}var i=this.ngeoAutoProjection_.tryProjectionsWithInversion(n,o,a,this.coordinatesProjections);if(i===null){return}r.push({label:n.join(" "),position:i,tt_source:"coordinates"});t(r)}.bind(this)};t.initStyles_=function e(){this.styles_[a["a"].COORDINATES_LAYER_NAME]=new w["c"]({image:new y["a"]({stroke:new b["a"]({color:[0,0,0,.7],width:2}),points:4,radius:8,radius2:0,angle:0})});var t=new _["a"]({color:[65,134,240,.5]});var r=new b["a"]({color:[65,134,240,1],width:2});this.styles_["default"]=new w["c"]({fill:t,image:new m["a"]({fill:t,radius:5,stroke:r}),stroke:r});var n=this.featuresStyles||{};f["a"](this.styles_,n)};t.getSearchStyle_=function e(t,r){h["a"].assert(t);var n=this.styles_[t.get("layer_name")]||this.styles_["default"];if(this.color){var i=p["a"](this.color);var a=i.slice();a[3]=1;var o=i.slice();o[3]=.5;var s=n.getStroke();if(s){s.setColor(a)}var l=n.getFill();if(l){l.setColor(o)}var u=n.getImage();if(u){u=u.clone();var c=u.getStroke();if(c){c.setColor(a)}var f=u.getFill();if(f){f.setColor(o)}n.setImage(u)}}return n};t.setStyleColor=function e(t){if(t){this.color=t;this.ngeoFeatureOverlayMgr.getLayer().changed()}};t.setTTDropdownVisibility_=function e(){if(this.clearButton){var t=this.element_.find(".twitter-typeahead .tt-menu");this.inputValue?t.show():t.hide()}};t.onClearButton=function e(){this.featureOverlay_.clear();this.clear()};t.clear=function e(){var t=this.element_.find(".twitter-typeahead");var r=t.children(".tt-menu");var n=t.children("input");this.inputValue="";s(n[1]).typeahead("val","");r.children(".tt-dataset").empty();this.setTTDropdownVisibility_();this.displayColorPicker=false};t.blur=function e(){var t=this.element_.find(".twitter-typeahead");var r=t.children("input");this.timeout_(function(){s(r[1]).blur()})};t.select_=function e(t,r,n){if(r["tt_source"]==="coordinates"){var i=new c["a"](r["position"]);this.featureOverlay_.clear();this.featureOverlay_.addFeature(new u["a"]({geometry:i,layer_name:a["a"].COORDINATES_LAYER_NAME}));this.map.getView().setCenter(r["position"]);this.leaveSearch_()}else{h["a"].assertInstanceof(r,u["a"]);this.selectFromGMF_(t,r,n)}};t.selectFromGMF_=function e(t,r,n){var u=this;var c=r.get("actions");var f=r.getGeometry();if(c){var i=function e(t,r){var n=c[t];var i=n["action"];var a=n["data"];if(i=="add_theme"){u.gmfThemes_.getThemesObject().then(function(e){var t=d["a"].findThemeByName(e,a);if(t){u.gmfTreeManager_.addFirstLevelGroups(t.children)}})}else if(i=="add_group"){u.gmfTreeManager_.addGroupByName(a,true)}else if(i=="add_layer"){var o=u.datasources[0].groupActions;var s;o.forEach(function(e){if(e["action"]==="add_layer"){return s=true}});if(s){var l=!!f;u.gmfTreeManager_.addGroupByLayerName(a,true,l)}}};for(var a=0,o=c.length;a<o;a++){i(a,o)}}var s=this.map.getSize();if(f&&s){var l=this.map.getView();this.featureOverlay_.clear();this.featureOverlay_.addFeature(r);this.displayColorPicker=true;var h=f.getType()==="GeometryCollection"?f.getExtent():f;l.fit(h,{size:s,maxZoom:this.maxZoom})}this.leaveSearch_()};t.leaveSearch_=function e(){if(!this.clearButton){this.clear()}this.blur()};t.close_=function e(t){if(!this.clearButton){this.setTTDropdownVisibility_()}};t.datasetsempty_=function e(t,r,n){var i=this.element_.find(".twitter-typeahead .tt-menu");var a=i.children(".gmf-search-no-results");if(a.length==0){var o=s('<div class="gmf-search-no-results" translate>No result found</div>');i.append(o)}if(n){a.show();i.addClass("gmf-search-no-results")}else{i.removeClass("gmf-search-no-results");a.hide()}};t.fulltextsearch_=function e(t,i,a){var o=this;if(i<1){i=1}this.fullTextSearch_.search(t,{limit:i}).then(function(e){if(e&&e.features[i-1]){var t=new v["a"];var r=t.readFeature(e.features[i-1]);o.featureOverlay_.addFeature(r);var n={};if(a!==undefined){n.maxZoom=a;n.size=o.map.getSize()}o.map.getView().fit(r.getGeometry().getExtent(),n);o.inputValue=r.get("label")}})};return e}();C.controller("gmfSearchController",C.SearchController_);x["a"]=C}).call(this,T(27))},function(e,n,i){"use strict";(function(a){var e=i(291);var t=i(506);var r=angular.module("ngeoPopover",[]);r.component_=function(){return{restrict:"A",scope:true,controller:"NgeoPopoverController as popoverCtrl",link:function e(t,r,n,i){i.anchorElm.on("inserted.bs.popover",function(){i.bodyElm.show();i.shown=true});i.anchorElm.popover({container:"body",html:true,content:i.bodyElm,boundary:"viewport",placement:n["ngeoPopoverPlacement"]||"right"});if(n["ngeoPopoverDismiss"]){a(n["ngeoPopoverDismiss"]).on("scroll",function(){i.dismissPopover()})}t.$on("$destroy",function(){i.anchorElm.popover("destroy");i.anchorElm.unbind("inserted.bs.popover");i.anchorElm.unbind("hidden.bs.popover")})}}};r.anchorComponent=function(){return{restrict:"A",require:"^^ngeoPopover",link:function e(t,r,n,i){i.anchorElm=r}}};r.contentComponent=function(){return{restrict:"A",require:"^^ngeoPopover",link:function e(t,r,n,i){i.bodyElm=r;r.hide()}}};r.PopoverController_=function(e){this.shown=false;this.anchorElm=undefined;this.bodyElm=undefined;function t(e){if(this.anchorElm[0]!==e.target&&this.bodyElm.parent()[0]!==e.target&this.bodyElm.parent().find(e.target).length===0&&this.shown){this.dismissPopover()}}angular.element("body").on("mousedown",t.bind(this));e.$on("$destroy",function(){angular.element("body").off("mousedown",t)})};r.PopoverController_.$inject=["$scope"];r.PopoverController_.prototype.dismissPopover=function(){this.shown=false;this.anchorElm.popover("hide")};r.controller("NgeoPopoverController",r.PopoverController_);r.directive("ngeoPopover",r.component_);r.directive("ngeoPopoverAnchor",r.anchorComponent);r.directive("ngeoPopoverContent",r.contentComponent);n["a"]=r}).call(this,i(27))},function(e,n,i){"use strict";(function(h){var e=i(518);var t=i.n(e);var d=i(1);var r=angular.module("ngeoSortable",[]);r.component_=function(f){return{restrict:"A",link:function e(i,a,t){var o=i.$eval(t["ngeoSortable"])||[];d["a"].assert(Array.isArray(o));i.$watchCollection(function(){return o},function(){o.length&&f(n,0)});var r=i.$eval(t["ngeoSortableOptions"]);var s=c(r);var l=i.$eval(t["ngeoSortableCallback"]);var u=i.$eval(t["ngeoSortableCallbackCtx"]);function n(){var e=a.children();for(var t=0;t<e.length;++t){angular.element(e[t]).data("idx",t)}var r=h(a);if(r.data("ui-sortable")){r.off("sortupdate");r.sortable("destroy")}var n={axis:"y",classes:{"ui-sortable-helper":s["draggerClassName"]}};if(s["handleClassName"]){n["handle"]="."+s["handleClassName"]}if(s["placeholderClassName"]){n["placeholder"]=s["placeholderClassName"];n["forcePlaceholderSize"]=true}r.sortable(n);r.on("sortupdate",function(e,t){var r=h(t.item[0]).data("idx");var n=t.item.index();h(t.item[0]).data("idx",n);i.$apply(function(){o.splice(n,0,o.splice(r,1)[0])});if(l instanceof Function){l.apply(u,[a,o])}})}function c(e){var t;var r="ngeo-sortable-handle";if(e===undefined){t={handleClassName:r}}else{if(e["handleClassName"]===undefined){e["handleClassName"]=r}t=e}return t}}}};r.component_.$inject=["$timeout"];r.directive("ngeoSortable",r.component_);n["a"]=r}).call(this,i(27))},function(e,t,r){"use strict";var i=r(50);var p=r(25);var n=r(161);var a=r(90);var o=r(2);var v=r(10);var g=r(79);var s="units";var m={DEGREES:"degrees",IMPERIAL:"imperial",NAUTICAL:"nautical",METRIC:"metric",US:"us"};var _=[1,2,5];var l=function(n){function e(e){var t=e?e:{};var r=t.className!==undefined?t.className:"ol-scale-line";n.call(this,{element:document.createElement("div"),render:t.render||u,target:t.target});this.innerElement_=document.createElement("div");this.innerElement_.className=r+"-inner";this.element.className=r+" "+a["e"];this.element.appendChild(this.innerElement_);this.viewState_=null;this.minWidth_=t.minWidth!==undefined?t.minWidth:64;this.renderedVisible_=false;this.renderedWidth_=undefined;this.renderedHTML_="";Object(o["a"])(this,Object(i["b"])(s),this.handleUnitsChanged_,this);this.setUnits(t.units||m.METRIC)}if(n)e.__proto__=n;e.prototype=Object.create(n&&n.prototype);e.prototype.constructor=e;e.prototype.getUnits=function e(){return this.get(s)};e.prototype.handleUnitsChanged_=function e(){this.updateElement_()};e.prototype.setUnits=function e(t){this.set(s,t)};e.prototype.updateElement_=function e(){var t=this.viewState_;if(!t){if(this.renderedVisible_){this.element.style.display="none";this.renderedVisible_=false}return}var r=t.center;var n=t.projection;var i=this.getUnits();var a=i==m.DEGREES?g["b"].DEGREES:g["b"].METERS;var o=Object(v["h"])(n,t.resolution,r,a);if(n.getUnits()!=g["b"].DEGREES&&n.getMetersPerUnit()&&a==g["b"].METERS){o*=n.getMetersPerUnit()}var s=this.minWidth_*o;var l="";if(i==m.DEGREES){var u=g["a"][g["b"].DEGREES];if(n.getUnits()==g["b"].DEGREES){s*=u}else{o/=u}if(s<u/60){l="″";o*=3600}else if(s<u){l="′";o*=60}else{l="°"}}else if(i==m.IMPERIAL){if(s<.9144){l="in";o/=.0254}else if(s<1609.344){l="ft";o/=.3048}else{l="mi";o/=1609.344}}else if(i==m.NAUTICAL){o/=1852;l="nm"}else if(i==m.METRIC){if(s<.001){l="μm";o*=1e6}else if(s<1){l="mm";o*=1e3}else if(s<1e3){l="m"}else{l="km";o/=1e3}}else if(i==m.US){if(s<.9144){l="in";o*=39.37}else if(s<1609.344){l="ft";o/=.30480061}else{l="mi";o/=1609.3472}}else{Object(p["a"])(false,33)}var c=3*Math.floor(Math.log(this.minWidth_*o)/Math.log(10));var f,h;while(true){f=_[(c%3+3)%3]*Math.pow(10,Math.floor(c/3));h=Math.round(f/o);if(isNaN(h)){this.element.style.display="none";this.renderedVisible_=false;return}else if(h>=this.minWidth_){break}++c}var d=f+" "+l;if(this.renderedHTML_!=d){this.innerElement_.innerHTML=d;this.renderedHTML_=d}if(this.renderedWidth_!=h){this.innerElement_.style.width=h+"px";this.renderedWidth_=h}if(!this.renderedVisible_){this.element.style.display="";this.renderedVisible_=true}};return e}(n["a"]);function u(e){var t=e.frameState;if(!t){this.viewState_=null}else{this.viewState_=t.viewState}this.updateElement_()}t["a"]=l},function(e,t,r){"use strict";var v=r(1);var l=r(13);var n={LINE_STRING:"LineString",POINT:"Point",POLYGON:"Polygon"};var c=n;var s=r(76);var i=r(5);var g=r(14);var u=r(77);var a=r(8);var o=r(81);var f=r(166);var h=function(e){function t(){e.call(this)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.getType=function e(){return f["a"].TEXT};t.prototype.readFeature=function e(t,r){return this.readFeatureFromText(d(t),this.adaptOptions(r))};t.prototype.readFeatureFromText=function e(t,r){return Object(i["b"])()};t.prototype.readFeatures=function e(t,r){return this.readFeaturesFromText(d(t),this.adaptOptions(r))};t.prototype.readFeaturesFromText=function e(t,r){return Object(i["b"])()};t.prototype.readGeometry=function e(t,r){return this.readGeometryFromText(d(t),this.adaptOptions(r))};t.prototype.readGeometryFromText=function e(t,r){return Object(i["b"])()};t.prototype.readProjection=function e(t){return this.readProjectionFromText(d(t))};t.prototype.readProjectionFromText=function e(t){return this.dataProjection};t.prototype.writeFeature=function e(t,r){return this.writeFeatureText(t,this.adaptOptions(r))};t.prototype.writeFeatureText=function e(t,r){return Object(i["b"])()};t.prototype.writeFeatures=function e(t,r){return this.writeFeaturesText(t,this.adaptOptions(r))};t.prototype.writeFeaturesText=function e(t,r){return Object(i["b"])()};t.prototype.writeGeometry=function e(t,r){return this.writeGeometryText(t,this.adaptOptions(r))};t.prototype.writeGeometryText=function e(t,r){return Object(i["b"])()};return t}(o["a"]);function d(e){if(typeof e==="string"){return e}else{return""}}var p=h;var m=r(33);var _=r(35);var y=r(83);var b=r(85);var w=r(86);var S=r(21);var C=r(31);var O=r(66);var x=r(30);var T=r(29);var E=r(11);var M=r(138);var A=function e(t){p.call(this);var r=t!==undefined?t:{};this.accuracy_=r.accuracy!==undefined?r.accuracy:e.ACCURACY_;this.encodeStyles_=r.encodeStyles!==undefined?r.encodeStyles:true;this.propertiesFunction_=r.properties!==undefined?r.properties:e.defaultPropertiesFunction_;this.setStyle_=r.setStyle!==undefined?r.setStyle:true;this.prevX_=0;this.prevY_=0;e.LegacyProperties_=r.propertiesType!==undefined&&r.propertiesType;this.defaultValues_=r.defaultValues!==undefined?r.defaultValues:{}};i["d"](A,p);A.StyleTypes_={LineString:c.LINE_STRING,Point:c.POINT,Polygon:c.POLYGON,MultiLineString:c.LINE_STRING,MultiPoint:c.POINT,MultiPolygon:c.POLYGON};A.LegacyProperties_={};A.prototype.readFeature;A.prototype.readFeatures;A.prototype.readGeometry;A.prototype.writeFeature;A.prototype.writeFeatures;A.prototype.writeGeometry;A.CHAR64_=".-_!*ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghjkmnpqrstuvwxyz";A.ACCURACY_=.1;A.defaultPropertiesFunction_=function(e){return e.getProperties()};A.encodeSignedNumber_=function(e){var t=e<<1;if(e<0){t=~t}return A.encodeNumber_(t)};A.encodeNumber_=function(e){var t="";while(e>=32){t+=A.CHAR64_.charAt(32|e&31);e>>=5}t+=A.CHAR64_.charAt(e);return t};A.encodeStyles_=function(e,t,r){var n=A.StyleTypes_[t];v["a"].assert(n!==undefined);for(var i=0;i<e.length;++i){var a=e[i];var o=a.getFill();var s=a.getImage();var l=a.getStroke();var u=a.getText();if(n==c.POLYGON){if(o!==null){A.encodeStylePolygon_(o,l,r)}}else if(n==c.LINE_STRING){if(l!==null){A.encodeStyleLine_(l,r)}}else if(n==c.POINT){if(s!==null){A.encodeStylePoint_(s,r)}}if(u!==null){A.encodeStyleText_(u,r)}}};A.encodeStyleLine_=function(e,t){A.encodeStyleStroke_(e,t)};A.encodeStylePoint_=function(e,t){if(e instanceof O["a"]){var r=e.getRadius();if(t.length>0){t.push("'")}t.push(encodeURIComponent("pointRadius*"+r));var n=e.getFill();if(n!==null){A.encodeStyleFill_(n,t)}var i=e.getStroke();if(i!==null){A.encodeStyleStroke_(i,t)}}};A.encodeStylePolygon_=function(e,t,r){A.encodeStyleFill_(e,r);if(t!==null){A.encodeStyleStroke_(t,r)}};A.encodeStyleFill_=function(e,t,r){var n=r!==undefined?r:"fillColor";var i=e.getColor();if(i!==null){v["a"].assert(Array.isArray(i),"only supporting fill colors");var a=u["a"](i);v["a"].assert(Array.isArray(a),"fill color must be an array");var o=s["a"].rgbArrayToHex(a);if(t.length>0){t.push("'")}t.push(encodeURIComponent(n+"*"+o))}};A.encodeStyleStroke_=function(e,t){var r=e.getColor();if(r!==null){v["a"].assert(Array.isArray(r));var n=u["a"](r);v["a"].assert(Array.isArray(n),"only supporting stroke colors");var i=s["a"].rgbArrayToHex(n);if(t.length>0){t.push("'")}t.push(encodeURIComponent("strokeColor*"+i))}var a=e.getWidth();if(a!==undefined){if(t.length>0){t.push("'")}t.push(encodeURIComponent("strokeWidth*"+a))}};A.encodeStyleText_=function(e,t){var r=e.getFont();if(r!==undefined){var n=r.split(" ");if(n.length>=3){if(t.length>0){t.push("'")}t.push(encodeURIComponent("fontSize*"+n[1]))}}var i=e.getFill();if(i!==null){A.encodeStyleFill_(i,t,"fontColor")}};A.readLineStringGeometry_=function(e){v["a"].assert(e.substring(0,2)==="l(");v["a"].assert(e[e.length-1]==")");e=e.substring(2,e.length-1);var t=this.decodeCoordinates_(e);return new _["a"](t,m["a"].XY)};A.readMultiLineStringGeometry_=function(e){v["a"].assert(e.substring(0,2)==="L(");v["a"].assert(e[e.length-1]==")");e=e.substring(2,e.length-1);var t=[];var r=[];var n=e.split("'");for(var i=0,a=n.length;i<a;++i){t=this.decodeCoordinates_(n[i],t);r[i]=t.length}return new y["a"](t,m["a"].XY,r)};A.readPointGeometry_=function(e){v["a"].assert(e.substring(0,2)==="p(");v["a"].assert(e[e.length-1]==")");e=e.substring(2,e.length-1);var t=this.decodeCoordinates_(e);v["a"].assert(t.length===2);return new S["a"](t,m["a"].XY)};A.readMultiPointGeometry_=function(e){v["a"].assert(e.substring(0,2)==="P(");v["a"].assert(e[e.length-1]==")");e=e.substring(2,e.length-1);var t=this.decodeCoordinates_(e);return new b["a"](t,m["a"].XY)};A.readPolygonGeometry_=function(e){v["a"].assert(e.substring(0,2)==="a(");v["a"].assert(e[e.length-1]==")");e=e.substring(2,e.length-1);var t=[];var r=[];var n=e.split("'");for(var i=0,a=n.length;i<a;++i){t=this.decodeCoordinates_(n[i],t);var o=t.length;if(i===0){t[o++]=t[0];t[o++]=t[1]}else{t[o++]=t[r[i-1]];t[o++]=t[r[i-1]+1]}r[i]=o}return new C["a"](t,m["a"].XY,r)};A.readMultiPolygonGeometry_=function(e){v["a"].assert(e.substring(0,2)==="A(");v["a"].assert(e[e.length-1]==")");e=e.substring(2,e.length-1);var t=[];var r=[];var n=e.split(")(");for(var i=0,a=n.length;i<a;++i){var o=n[i].split("'");var s=r[i]=[];for(var l=0,u=o.length;l<u;++l){t=this.decodeCoordinates_(o[l],t);var c=t.length;if(l===0){t[c++]=t[0];t[c++]=t[1]}else{t[c++]=t[s[l-1]];t[c++]=t[s[l-1]+1]}s[l]=c}}return new w["a"](t,m["a"].XY,r)};A.setStyleInFeature_=function(e,t){if(e==""){return}var r=A.getStyleProperties_(e,t);var n=r["fillColor"];var i=r["fontSize"];var a=r["fontColor"];var o=r["pointRadius"];var s=r["strokeColor"];var l=r["strokeWidth"];var u=null;if(n!==undefined){u=new x["a"]({color:n})}var c=null;if(s!==undefined&&l!==undefined){c=new T["a"]({color:s,width:l})}var f=null;if(o!==undefined){f=new O["a"]({radius:o,fill:u,stroke:c});u=c=null}var h=null;if(i!==undefined&&a!==undefined){h=new M["a"]({font:i+" sans-serif",fill:new x["a"]({color:a})})}var d=new E["c"]({fill:u,image:f,stroke:c,text:h});t.setStyle(d)};A.setStyleProperties_=function(e,t){var r=A.getStyleProperties_(e,t);var n=t.getGeometry();if(n instanceof S["a"]){if(r["isLabel"]||r[l["a"].IS_TEXT]){delete r["strokeColor"];delete r["fillColor"]}else{delete r["fontColor"];delete r["fontSize"]}}else{delete r["fontColor"];if(n instanceof _["a"]){delete r["fillColor"];delete r["fillOpacity"]}}if(r["fontSize"]){var i=parseFloat(r["fontSize"]);if(r["fontSize"].indexOf("px")!==-1){i=Math.round(i/1.333333)}r["fontSize"]=i}var a={};for(var o in r){var s=r[o];if(A.LegacyProperties_[o]){a[A.LegacyProperties_[o]]=s}else{a[o]=s}}t.setProperties(a)};A.castValue_=function(e,t){var r=[l["a"].ANGLE,l["a"].OPACITY,l["a"].SIZE,l["a"].STROKE,"pointRadius","strokeWidth"];var n=[l["a"].IS_CIRCLE,l["a"].IS_RECTANGLE,l["a"].IS_TEXT,l["a"].SHOW_MEASURE,l["a"].SHOW_LABEL,"isCircle","isRectangle","isLabel","showMeasure","showLabel"];if(a["f"](r,e)){return+t}else if(a["f"](n,e)){return t==="true"?true:false}else{return t}};A.getStyleProperties_=function(e,t){var r=e.split("'");var n={};for(var i=0;i<r.length;++i){var a=decodeURIComponent(r[i]);var o=a.split("*");v["a"].assert(o.length===2);var s=o[0];var l=o[1];n[s]=A.castValue_(s,l)}return n};A.writeLineStringGeometry_=function(e){v["a"].assertInstanceof(e,_["a"]);var t=e.getFlatCoordinates();var r=e.getStride();var n=t.length;return"l("+this.encodeCoordinates_(t,r,0,n)+")"};A.writeMultiLineStringGeometry_=function(e){v["a"].assertInstanceof(e,y["a"]);var t=e.getEnds();var r=t.length;var n=e.getFlatCoordinates();var i=e.getStride();var a=0;var o=["L("];for(var s=0;s<r;++s){var l=t[s];var u=this.encodeCoordinates_(n,i,a,l);if(s!==0){o.push("'")}o.push(u);a=l}o.push(")");return o.join("")};A.writePointGeometry_=function(e){v["a"].assertInstanceof(e,S["a"]);var t=e.getFlatCoordinates();var r=e.getStride();var n=t.length;return"p("+this.encodeCoordinates_(t,r,0,n)+")"};A.writeMultiPointGeometry_=function(e){v["a"].assertInstanceof(e,b["a"]);var t=e.getFlatCoordinates();var r=e.getStride();var n=t.length;return"P("+this.encodeCoordinates_(t,r,0,n)+")"};A.encodeRings_=function(e,t,r,n,i){var a=n.length;for(var o=0;o<a;++o){var s=n[o]-t;var l=this.encodeCoordinates_(e,t,r,s);if(o!==0){i.push("'")}i.push(l);r=n[o]}return r};A.writePolygonGeometry_=function(e){v["a"].assertInstanceof(e,C["a"]);var t=e.getFlatCoordinates();var r=e.getStride();var n=e.getEnds();var i=0;var a=["a("];A.encodeRings_.call(this,t,r,i,n,a);a.push(")");return a.join("")};A.writeMultiPolygonGeometry_=function(e){v["a"].assertInstanceof(e,w["a"]);var t=e.getFlatCoordinates();var r=e.getStride();var n=e.getEndss();var i=n.length;var a=0;var o=["A"];for(var s=0;s<i;++s){var l=n[s];o.push("(");a=A.encodeRings_.call(this,t,r,a,l,o);o.push(")")}return o.join("")};A.GEOMETRY_READERS_={P:A.readMultiPointGeometry_,L:A.readMultiLineStringGeometry_,A:A.readMultiPolygonGeometry_,l:A.readLineStringGeometry_,p:A.readPointGeometry_,a:A.readPolygonGeometry_};A.GEOMETRY_WRITERS_={MultiLineString:A.writeMultiLineStringGeometry_,MultiPoint:A.writeMultiPointGeometry_,MultiPolygon:A.writeMultiPolygonGeometry_,LineString:A.writeLineStringGeometry_,Point:A.writePointGeometry_,Polygon:A.writePolygonGeometry_};A.prototype.decodeCoordinates_=function(e,t){var r=e.length;var n=0;var i=t!==undefined?t:[];var a=i.length;while(n<r){var o=void 0;var s=0;var l=0;do{o=A.CHAR64_.indexOf(e.charAt(n++));l|=(o&31)<<s;s+=5}while(o>=32);var u=l&1?~(l>>1):l>>1;this.prevX_+=u;s=0;l=0;do{o=A.CHAR64_.indexOf(e.charAt(n++));l|=(o&31)<<s;s+=5}while(o>=32);var c=l&1?~(l>>1):l>>1;this.prevY_+=c;i[a++]=this.prevX_*this.accuracy_;i[a++]=this.prevY_*this.accuracy_}return i};A.prototype.encodeCoordinates_=function(e,t,r,n){var i="";for(var a=r;a<n;a+=t){var o=e[a];var s=e[a+1];o=Math.floor(o/this.accuracy_);s=Math.floor(s/this.accuracy_);var l=o-this.prevX_;var u=s-this.prevY_;this.prevX_=o;this.prevY_=s;i+=A.encodeSignedNumber_(l)+A.encodeSignedNumber_(u)}return i};A.prototype.readFeatureFromText=function(e,t){v["a"].assert(e.length>2);v["a"].assert(e[1]==="(");v["a"].assert(e[e.length-1]===")");var r=e.indexOf("~");var n=r>=0?e.substring(0,r)+")":e;var i=this.readGeometryFromText(n,t);var a=new g["a"](i);if(r>=0){var o=e.substring(r+1,e.length-1);r=o.indexOf("~");var s=r>=0?o.substring(0,r):o;if(s!=""){var l=s.split("'");for(var u=0;u<l.length;++u){var c=decodeURIComponent(l[u]);var f=c.split("*");v["a"].assert(f.length===2);var h=f[0];var d=f[1];if(!this.setStyle_&&A.LegacyProperties_[h]){h=A.LegacyProperties_[h]}a.set(h,A.castValue_(h,d))}}if(r>=0){var p=o.substring(r+1);if(this.setStyle_){A.setStyleInFeature_(p,a)}else{A.setStyleProperties_(p,a)}}}return a};A.prototype.readFeaturesFromText=function(e,t){var n=this;v["a"].assert(e[0]==="F");this.prevX_=0;this.prevY_=0;var r=[];e=e.substring(1);while(e.length>0){var i=e.indexOf(")");v["a"].assert(i>=0);var a=this.readFeatureFromText(e.substring(0,i+1),t);r.push(a);e=e.substring(i+1)}r.forEach(function(e){for(var t in n.defaultValues_){var r=A.LegacyProperties_[t];if(e.get(r)===undefined){e.set(r,n.defaultValues_[t].call(null,e))}}});return r};A.prototype.readGeometryFromText=function(e,t){var r=A.GEOMETRY_READERS_[e[0]];v["a"].assert(r!==undefined);return r.call(this,e)};A.prototype.writeFeatureText=function(e,t){var r=[];var n="";var i=e.getGeometry();if(i){n=this.writeGeometryText(i,t)}if(n.length>0){v["a"].assert(n[n.length-1]===")");n=n.substring(0,n.length-1);r.push(n)}var a=[];var o=this.propertiesFunction_(e);for(var s in o){var l=o[s];if(l!==undefined&&l!==null&&s!==e.getGeometryName()){if(a.length!==0){a.push("'")}var u=encodeURIComponent(s.replace(/[()'*]/g,"_")+"*"+l.toString().replace(/[()'*]/g,"_"));a.push(u)}}if(a.length>0){r.push("~");Array.prototype.push.apply(r,a)}if(this.encodeStyles_){var c=e.getStyleFunction();if(c!==undefined){var f=c.call(e,0);if(f!==null){var h=[];f=Array.isArray(f)?f:[f];A.encodeStyles_(f,i.getType(),h);if(h.length>0){r.push("~");Array.prototype.push.apply(r,h)}}}}r.push(")");return r.join("")};A.prototype.writeFeaturesText=function(e,t){this.prevX_=0;this.prevY_=0;var r=[];if(e.length>0){r.push("F");for(var n=0,i=e.length;n<i;++n){r.push(this.writeFeatureText(e[n],t))}}return r.join("")};A.prototype.writeGeometryText=function(e,t){var r=A.GEOMETRY_WRITERS_[e.getType()];v["a"].assert(r!==undefined);var n=o["b"](e,true,t);return r.call(this,n)};var k=t["a"]=A},,,,,,,,function(e,t){},function(e,t,r){r(419);e.exports=angular},function(e,t,r){(function(zs){
/**
 * @license AngularJS v1.7.5
 * (c) 2010-2018 Google, Inc. http://angularjs.org
 * License: MIT
 */
(function(_e){"use strict";var c={objectMaxDepth:5,urlErrorParamsEnabled:true};function t(e){if(ke(e)){if(j(e.objectMaxDepth)){c.objectMaxDepth=n(e.objectMaxDepth)?e.objectMaxDepth:NaN}if(j(e.urlErrorParamsEnabled)&&Le(e.urlErrorParamsEnabled)){c.urlErrorParamsEnabled=e.urlErrorParamsEnabled}}else{return c}}function n(e){return b(e)&&e>0}function L(o,s){s=s||Error;var l="https://errors.angularjs.org/1.7.5/";var e=l.replace(".","\\.")+"[\\s\\S]*";var u=new RegExp(e,"g");return function(){var e=arguments[0],t=arguments[1],r="["+(o?o+":":"")+e+"] ",n=He(arguments,2).map(function(e){return st(e,c.objectMaxDepth)}),i,a;r+=t.replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1);if(t<n.length){return n[t].replace(u,"")}return e});r+="\n"+l+(o?o+"/":"")+e;if(c.urlErrorParamsEnabled){for(a=0,i="?";a<n.length;a++,i="&"){r+=i+"p"+a+"="+encodeURIComponent(n[a])}}return new s(r)}}var a=/^\/(.+)\/([a-z]*)$/;var f="validity";var ye=Object.prototype.hasOwnProperty;var be=function(e){return je(e)?e.toLowerCase():e};var E=function(e){return je(e)?e.toUpperCase():e};var we,Se,r,o=[].slice,i=[].splice,e=[].push,Ce=Object.prototype.toString,h=Object.getPrototypeOf,d=L("ng"),S=_e.angular||(_e.angular={}),C,s=0;we=_e.document.documentMode;function N(e){if(e==null||T(e))return false;if(Ie(e)||je(e)||Se&&e instanceof Se)return true;var t="length"in Object(e)&&e.length;return b(t)&&(t>=0&&t-1 in e||typeof e.item==="function")}function Oe(e,t,r){var n,i;if(e){if(Pe(e)){for(n in e){if(n!=="prototype"&&n!=="length"&&n!=="name"&&e.hasOwnProperty(n)){t.call(r,e[n],n,e)}}}else if(Ie(e)||N(e)){var a=typeof e!=="object";for(n=0,i=e.length;n<i;n++){if(a||n in e){t.call(r,e[n],n,e)}}}else if(e.forEach&&e.forEach!==Oe){e.forEach(t,r,e)}else if(y(e)){for(n in e){t.call(r,e[n],n,e)}}else if(typeof e.hasOwnProperty==="function"){for(n in e){if(e.hasOwnProperty(n)){t.call(r,e[n],n,e)}}}else{for(n in e){if(ye.call(e,n)){t.call(r,e[n],n,e)}}}}return e}function l(e,t,r){var n=Object.keys(e).sort();for(var i=0;i<n.length;i++){t.call(r,e[n[i]],n[i])}return n}function O(r){return function(e,t){r(t,e)}}function p(){return++s}function v(e,t){if(t){e.$$hashKey=t}else{delete e.$$hashKey}}function g(e,t,r){var n=e.$$hashKey;for(var i=0,a=t.length;i<a;++i){var o=t[i];if(!ke(o)&&!Pe(o))continue;var s=Object.keys(o);for(var l=0,u=s.length;l<u;l++){var c=s[l];var f=o[c];if(r&&ke(f)){if(w(f)){e[c]=new Date(f.valueOf())}else if(x(f)){e[c]=new RegExp(f)}else if(f.nodeName){e[c]=f.cloneNode(true)}else if(U(f)){e[c]=f.clone()}else{if(!ke(e[c]))e[c]=Ie(f)?[]:{};g(e[c],[f],true)}}else{e[c]=f}}}v(e,n);return e}function xe(e){return g(e,o.call(arguments,1),false)}function u(e){return g(e,o.call(arguments,1),true)}function m(e){return parseInt(e,10)}var k=Number.isNaN||function e(t){return t!==t};function Te(e,t){return xe(Object.create(e),t)}function Ee(){}Ee.$inject=[];function Me(e){return e}Me.$inject=[];function A(t){return function e(){return t}}function _(e){return Pe(e.toString)&&e.toString!==Ce}function Ae(e){return typeof e==="undefined"}function j(e){return typeof e!=="undefined"}function ke(e){return e!==null&&typeof e==="object"}function y(e){return e!==null&&typeof e==="object"&&!h(e)}function je(e){return typeof e==="string"}function b(e){return typeof e==="number"}function w(e){return Ce.call(e)==="[object Date]"}function Ie(e){return Array.isArray(e)||e instanceof Array}function De(e){var t=Ce.call(e);switch(t){case"[object Error]":return true;case"[object Exception]":return true;case"[object DOMException]":return true;default:return e instanceof Error}}function Pe(e){return typeof e==="function"}function x(e){return Ce.call(e)==="[object RegExp]"}function T(e){return e&&e.window===e}function Re(e){return e&&e.$evalAsync&&e.$watch}function M(e){return Ce.call(e)==="[object File]"}function I(e){return Ce.call(e)==="[object FormData]"}function D(e){return Ce.call(e)==="[object Blob]"}function Le(e){return typeof e==="boolean"}function P(e){return e&&Pe(e.then)}var R=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/;function $(e){return e&&b(e.length)&&R.test(Ce.call(e))}function F(e){return Ce.call(e)==="[object ArrayBuffer]"}var Ne=function(e){return je(e)?e.trim():e};var G=function(e){return e.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function U(e){return!!(e&&(e.nodeName||e.prop&&e.attr&&e.find))}function V(e){var t={},r=e.split(","),n;for(n=0;n<r.length;n++){t[r[n]]=true}return t}function $e(e){return be(e.nodeName||e[0]&&e[0].nodeName)}function H(e,t){return Array.prototype.indexOf.call(e,t)!==-1}function Fe(e,t){var r=e.indexOf(t);if(r>=0){e.splice(r,1)}return r}function W(e,r,t){var a=[];var o=[];t=n(t)?t:NaN;if(r){if($(r)||F(r)){throw d("cpta","Can't copy! TypedArray destination cannot be mutated.")}if(e===r){throw d("cpi","Can't copy! Source and destination are identical.")}if(Ie(r)){r.length=0}else{Oe(r,function(e,t){if(t!=="$$hashKey"){delete r[t]}})}a.push(e);o.push(r);return s(e,r,t)}return l(e,t);function s(e,t,r){r--;if(r<0){return"..."}var n=t.$$hashKey;var i;if(Ie(e)){for(var a=0,o=e.length;a<o;a++){t.push(l(e[a],r))}}else if(y(e)){for(i in e){t[i]=l(e[i],r)}}else if(e&&typeof e.hasOwnProperty==="function"){for(i in e){if(e.hasOwnProperty(i)){t[i]=l(e[i],r)}}}else{for(i in e){if(ye.call(e,i)){t[i]=l(e[i],r)}}}v(t,n);return t}function l(e,t){if(!ke(e)){return e}var r=a.indexOf(e);if(r!==-1){return o[r]}if(T(e)||Re(e)){throw d("cpws","Can't copy! Making copies of Window or Scope instances is not supported.")}var n=false;var i=u(e);if(i===undefined){i=Ie(e)?[]:Object.create(h(e));n=true}a.push(e);o.push(i);return n?s(e,i,t):i}function u(e){switch(Ce.call(e)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new e.constructor(l(e.buffer),e.byteOffset,e.length);case"[object ArrayBuffer]":if(!e.slice){var t=new ArrayBuffer(e.byteLength);new Uint8Array(t).set(new Uint8Array(e));return t}return e.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new e.constructor(e.valueOf());case"[object RegExp]":var r=new RegExp(e.source,e.toString().match(/[^/]*$/)[0]);r.lastIndex=e.lastIndex;return r;case"[object Blob]":return new e.constructor([e],{type:e.type})}if(Pe(e.cloneNode)){return e.cloneNode(true)}}}function Ge(e,t){return e===t||e!==e&&t!==t}function Ue(e,t){if(e===t)return true;if(e===null||t===null)return false;if(e!==e&&t!==t)return true;var r=typeof e,n=typeof t,i,a,o;if(r===n&&r==="object"){if(Ie(e)){if(!Ie(t))return false;if((i=e.length)===t.length){for(a=0;a<i;a++){if(!Ue(e[a],t[a]))return false}return true}}else if(w(e)){if(!w(t))return false;return Ge(e.getTime(),t.getTime())}else if(x(e)){if(!x(t))return false;return e.toString()===t.toString()}else{if(Re(e)||Re(t)||T(e)||T(t)||Ie(t)||w(t)||x(t))return false;o=Xe();for(a in e){if(a.charAt(0)==="$"||Pe(e[a]))continue;if(!Ue(e[a],t[a]))return false;o[a]=true}for(a in t){if(!(a in o)&&a.charAt(0)!=="$"&&j(t[a])&&!Pe(t[a]))return false}return true}}return false}var Y=function(){if(!j(Y.rules)){var e=_e.document.querySelector("[ng-csp]")||_e.document.querySelector("[data-ng-csp]");if(e){var t=e.getAttribute("ng-csp")||e.getAttribute("data-ng-csp");Y.rules={noUnsafeEval:!t||t.indexOf("no-unsafe-eval")!==-1,noInlineStyle:!t||t.indexOf("no-inline-style")!==-1}}else{Y.rules={noUnsafeEval:r(),noInlineStyle:false}}}return Y.rules;function r(){try{new Function("");return false}catch(e){return true}}};var q=function(){if(j(q.name_))return q.name_;var e;var t,r=oe.length,n,i;for(t=0;t<r;++t){n=oe[t];e=_e.document.querySelector("["+n.replace(":","\\:")+"jq]");if(e){i=e.getAttribute(n+"jq");break}}return q.name_=i};function z(e,t,r){return e.concat(o.call(t,r))}function He(e,t){return o.call(e,t||0)}function We(e,t){var r=arguments.length>2?He(arguments,2):[];if(Pe(t)&&!(t instanceof RegExp)){return r.length?function(){return arguments.length?t.apply(e,z(r,arguments,0)):t.apply(e,r)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}else{return t}}function B(e,t){var r=t;if(typeof e==="string"&&e.charAt(0)==="$"&&e.charAt(1)==="$"){r=undefined}else if(T(t)){r="$WINDOW"}else if(t&&_e.document===t){r="$DOCUMENT"}else if(Re(t)){r="$SCOPE"}return r}function K(e,t){if(Ae(e))return undefined;if(!b(t)){t=t?2:null}return JSON.stringify(e,B,t)}function X(e){return je(e)?JSON.parse(e):e}var Z=/:/g;function Q(e,t){e=e.replace(Z,"");var r=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return k(r)?t:r}function J(e,t){e=new Date(e.getTime());e.setMinutes(e.getMinutes()+t);return e}function ee(e,t,r){r=r?-1:1;var n=e.getTimezoneOffset();var i=Q(t,n);return J(e,r*(i-n))}function Ye(e){e=Se(e).clone().empty();var t=Se("<div></div>").append(e).html();try{return e[0].nodeType===et?be(t):t.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(e,t){return"<"+be(t)})}catch(e){return be(t)}}function te(e){try{return decodeURIComponent(e)}catch(e){}}function re(e){var i={};Oe((e||"").split("&"),function(e){var t,r,n;if(e){r=e=e.replace(/\+/g,"%20");t=e.indexOf("=");if(t!==-1){r=e.substring(0,t);n=e.substring(t+1)}r=te(r);if(j(r)){n=j(n)?te(n):true;if(!ye.call(i,r)){i[r]=n}else if(Ie(i[r])){i[r].push(n)}else{i[r]=[i[r],n]}}}});return i}function ne(e){var r=[];Oe(e,function(e,t){if(Ie(e)){Oe(e,function(e){r.push(ae(t,true)+(e===true?"":"="+ae(e,true)))})}else{r.push(ae(t,true)+(e===true?"":"="+ae(e,true)))}});return r.length?r.join("&"):""}function ie(e){return ae(e,true).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function ae(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}var oe=["ng-","data-ng-","ng:","x-ng-"];function se(e,t){var r,n,i=oe.length;for(n=0;n<i;++n){r=oe[n]+t;if(je(r=e.getAttribute(r))){return r}}return null}function le(r){var e=r.currentScript;if(!e){return true}if(!(e instanceof _e.HTMLScriptElement||e instanceof _e.SVGScriptElement)){return false}var t=e.attributes;var n=[t.getNamedItem("src"),t.getNamedItem("href"),t.getNamedItem("xlink:href")];return n.every(function(e){if(!e){return true}if(!e.value){return false}var t=r.createElement("a");t.href=e.value;if(r.location.origin===t.origin){return true}switch(t.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return true;default:return false}})}var ue=le(_e.document);function ce(n,e){var i,a,t={};Oe(oe,function(e){var t=e+"app";if(!i&&n.hasAttribute&&n.hasAttribute(t)){i=n;a=n.getAttribute(t)}});Oe(oe,function(e){var t=e+"app";var r;if(!i&&(r=n.querySelector("["+t.replace(":","\\:")+"]"))){i=r;a=r.getAttribute(t)}});if(i){if(!ue){try{_e.console.error("AngularJS: disabling automatic bootstrap. <script> protocol indicates "+"an extension, document.location.href does not match.")}catch(e){}return}t.strictDi=se(i,"strict-di")!==null;e(i,a?[a]:[],t)}}function fe(r,n,i){if(!ke(i))i={};var e={strictDi:false};i=xe(e,i);var t=function(){r=Se(r);if(r.injector()){var e=r[0]===_e.document?"document":Ye(r);throw d("btstrpd","App already bootstrapped with this element '{0}'",e.replace(/</,"&lt;").replace(/>/,"&gt;"))}n=n||[];n.unshift(["$provide",function(e){e.value("$rootElement",r)}]);if(i.debugInfoEnabled){n.push(["$compileProvider",function(e){e.debugInfoEnabled(true)}])}n.unshift("ng");var t=Sr(n,i.strictDi);t.invoke(["$rootScope","$rootElement","$compile","$injector",function e(t,r,n,i){t.$apply(function(){r.data("$injector",i);n(r)(t)})}]);return t};var a=/^NG_ENABLE_DEBUG_INFO!/;var o=/^NG_DEFER_BOOTSTRAP!/;if(_e&&a.test(_e.name)){i.debugInfoEnabled=true;_e.name=_e.name.replace(a,"")}if(_e&&!o.test(_e.name)){return t()}_e.name=_e.name.replace(o,"");S.resumeBootstrap=function(e){Oe(e,function(e){n.push(e)});return t()};if(Pe(S.resumeDeferredBootstrap)){S.resumeDeferredBootstrap()}}function he(){_e.name="NG_ENABLE_DEBUG_INFO!"+_e.name;_e.location.reload()}function de(e){var t=S.element(e).injector();if(!t){throw d("test","no injector found for element argument to getTestability")}return t.get("$$testability")}var pe=/[A-Z]/g;function Ve(e,r){r=r||"_";return e.replace(pe,function(e,t){return(t?r:"")+e.toLowerCase()})}var ve=false;function ge(){var i;if(ve){return}var e=q();r=Ae(e)?zs:!e?undefined:_e[e];if(r&&r.fn.on){Se=r;xe(r.fn,{scope:Zt.scope,isolateScope:Zt.isolateScope,controller:Zt.controller,injector:Zt.injector,inheritedData:Zt.inheritedData})}else{Se=It}i=Se.cleanData;Se.cleanData=function(e){var t;for(var r=0,n;(n=e[r])!=null;r++){t=(Se._data(n)||{}).events;if(t&&t.$destroy){Se(n).triggerHandler("$destroy")}}i(e)};S.element=Se;ve=true}function qe(e,t,r){if(!e){throw d("areq","Argument '{0}' is {1}",t||"?",r||"required")}return e}function me(e,t,r){if(r&&Ie(e)){e=e[e.length-1]}qe(Pe(e),t,"not a function, got "+(e&&typeof e==="object"?e.constructor.name||"Object":typeof e));return e}function ze(e,t){if(e==="hasOwnProperty"){throw d("badname","hasOwnProperty is not a valid {0} name",t)}}function Be(e,t,r){if(!t)return e;var n=t.split(".");var i;var a=e;var o=n.length;for(var s=0;s<o;s++){i=n[s];if(e){e=(a=e)[i]}}if(!r&&Pe(e)){return We(a,e)}return e}function Ke(e){var t=e[0];var r=e[e.length-1];var n;for(var i=1;t!==r&&(t=t.nextSibling);i++){if(n||e[i]!==t){if(!n){n=Se(o.call(e,0,i))}n.push(t)}}return n||e}function Xe(){return Object.create(null)}function Ze(e){if(e==null){return""}switch(typeof e){case"string":break;case"number":e=""+e;break;default:if(_(e)&&!Ie(e)&&!w(e)){e=e.toString()}else{e=K(e)}}return e}var Qe=1;var Je=2;var et=3;var tt=8;var rt=9;var nt=11;function it(e){var f=L("$injector");var h=L("ng");function n(e,t,r){return e[t]||(e[t]=r())}var t=n(e,"angular",Object);t.$$minErr=t.$$minErr||L;return n(t,"module",function(){var r={};return function e(s,l,u){var c={};var t=function(e,t){if(e==="hasOwnProperty"){throw h("badname","hasOwnProperty is not a valid {0} name",t)}};t(s,"module");if(l&&r.hasOwnProperty(s)){r[s]=null}return n(r,s,function(){if(!l){throw f("nomod","Module '{0}' is not available! You either misspelled "+"the module name or forgot to load it. If registering a module ensure that you "+"specify the dependencies as the second argument.",s)}var a=[];var e=[];var t=[];var r=n("$injector","invoke","push",e);var o={_invokeQueue:a,_configBlocks:e,_runBlocks:t,info:function(e){if(j(e)){if(!ke(e))throw h("aobj","Argument '{0}' must be an object","value");c=e;return this}return c},requires:l,name:s,provider:i("$provide","provider"),factory:i("$provide","factory"),service:i("$provide","service"),value:n("$provide","value"),constant:n("$provide","constant","unshift"),decorator:i("$provide","decorator",e),animation:i("$animateProvider","register"),filter:i("$filterProvider","register"),controller:i("$controllerProvider","register"),directive:i("$compileProvider","directive"),component:i("$compileProvider","component"),config:r,run:function(e){t.push(e);return this}};if(u){r(u)}return o;function n(e,t,r,n){if(!n)n=a;return function(){n[r||"push"]([e,t,arguments]);return o}}function i(r,n,i){if(!i)i=a;return function(e,t){if(t&&Pe(t))t.$$moduleName=s;i.push([r,n,arguments]);return o}}})}})}function at(e,t){if(Ie(e)){t=t||[];for(var r=0,n=e.length;r<n;r++){t[r]=e[r]}}else if(ke(e)){t=t||{};for(var i in e){if(!(i.charAt(0)==="$"&&i.charAt(1)==="$")){t[i]=e[i]}}}return t||e}function ot(e,t){var r=[];if(n(t)){e=S.copy(e,null,t)}return JSON.stringify(e,function(e,t){t=B(e,t);if(ke(t)){if(r.indexOf(t)>=0)return"...";r.push(t)}return t})}function st(e,t){if(typeof e==="function"){return e.toString().replace(/ \{[\s\S]*$/,"")}else if(Ae(e)){return"undefined"}else if(typeof e!=="string"){return ot(e,t)}return e}var lt={full:"1.7.5",major:1,minor:7,dot:5,codeName:"anti-prettification"};function ut(e){xe(e,{errorHandlingConfig:t,bootstrap:fe,copy:W,extend:xe,merge:u,equals:Ue,element:Se,forEach:Oe,injector:Sr,noop:Ee,bind:We,toJson:K,fromJson:X,identity:Me,isUndefined:Ae,isDefined:j,isString:je,isFunction:Pe,isObject:ke,isNumber:b,isElement:U,isArray:Ie,version:lt,isDate:w,callbacks:{$$counter:0},getTestability:de,reloadWithDebugInfo:he,$$minErr:L,$$csp:Y,$$encodeUriSegment:ie,$$encodeUriQuery:ae,$$lowercase:be,$$stringify:Ze,$$uppercase:E});C=it(_e);C("ng",["ngLocale"],["$provide",function e(t){t.provider({$$sanitizeUri:Ri});t.provider("$compile",qr).directive({a:Ya,input:Ro,textarea:Ro,form:Qa,script:Ns,select:Us,option:Hs,ngBind:$o,ngBindHtml:Go,ngBindTemplate:Fo,ngClass:Wo,ngClassEven:Vo,ngClassOdd:Yo,ngCloak:qo,ngController:zo,ngForm:Ja,ngHide:ks,ngIf:Zo,ngInclude:Qo,ngInit:es,ngNonBindable:ys,ngPluralize:Cs,ngRef:xs,ngRepeat:Ts,ngShow:As,ngStyle:js,ngSwitch:Is,ngSwitchWhen:Ds,ngSwitchDefault:Ps,ngOptions:Ss,ngTransclude:Ls,ngModel:ds,ngList:ts,ngChange:Uo,pattern:Ys,ngPattern:Ys,required:Ws,ngRequired:Ws,minlength:qs,ngMinlength:qs,maxlength:Vs,ngMaxlength:Vs,ngValue:No,ngModelOptions:ms}).directive({ngInclude:Jo}).directive(Va).directive(Bo);t.provider({$anchorScroll:Cr,$animate:Dr,$animateCss:Lr,$$animateJs:jr,$$animateQueue:Ir,$$AnimateRunner:Rr,$$animateAsyncRun:Pr,$browser:Gr,$cacheFactory:Ur,$controller:an,$document:on,$$isDocumentHidden:sn,$exceptionHandler:ln,$filter:ca,$$forceReflow:un,$interpolate:kn,$interval:In,$$intervalFactory:Dn,$http:xn,$httpParamSerializer:mn,$httpParamSerializerJQLike:_n,$httpBackend:En,$xhrFactory:Tn,$jsonpCallbacks:Pn,$location:ti,$log:ri,$parse:Ti,$rootScope:Pi,$q:Ei,$$q:Mi,$sce:Wi,$sceDelegate:Hi,$sniffer:Yi,$$taskTrackerFactory:Vi,$templateCache:Hr,$templateRequest:Bi,$$testability:Ki,$timeout:Zi,$window:sa,$$rAF:Di,$$jqLite:or,$$Map:fr,$$cookieReader:ua})}]).info({angularVersion:"1.7.5"})}It.expando="ng339";var ct=It.cache={},ft=1;It._data=function(e){return this.cache[e[this.expando]]||{}};function ht(){return++ft}var dt=/-([a-z])/g;var pt=/^-ms-/;var vt={mouseleave:"mouseout",mouseenter:"mouseover"};var gt=L("jqLite");function mt(e){return yt(e.replace(pt,"ms-"))}function _t(e,t){return t.toUpperCase()}function yt(e){return e.replace(dt,_t)}var bt=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/;var wt=/<|&#?\w+;/;var St=/<([\w:-]+)/;var Ct=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi;var Ot={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ot.optgroup=Ot.option;Ot.tbody=Ot.tfoot=Ot.colgroup=Ot.caption=Ot.thead;Ot.th=Ot.td;function xt(e){return!wt.test(e)}function Tt(e){var t=e.nodeType;return t===Qe||!t||t===rt}function Et(e){for(var t in ct[e.ng339]){return true}return false}function Mt(e,t){var r,n,i,a=t.createDocumentFragment(),o=[],s;if(xt(e)){o.push(t.createTextNode(e))}else{r=a.appendChild(t.createElement("div"));n=(St.exec(e)||["",""])[1].toLowerCase();i=Ot[n]||Ot._default;r.innerHTML=i[1]+e.replace(Ct,"<$1></$2>")+i[2];s=i[0];while(s--){r=r.lastChild}o=z(o,r.childNodes);r=a.firstChild;r.textContent=""}a.textContent="";a.innerHTML="";Oe(o,function(e){a.appendChild(e)});return a}function At(e,t){t=t||_e.document;var r;if(r=bt.exec(e)){return[t.createElement(r[1])]}if(r=Mt(e,t)){return r.childNodes}return[]}function kt(e,t){var r=e.parentNode;if(r){r.replaceChild(t,e)}t.appendChild(e)}var jt=_e.Node.prototype.contains||function(e){return!!(this.compareDocumentPosition(e)&16)};function It(e){if(e instanceof It){return e}var t;if(je(e)){e=Ne(e);t=true}if(!(this instanceof It)){if(t&&e.charAt(0)!=="<"){throw gt("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element")}return new It(e)}if(t){Yt(this,At(e))}else if(Pe(e)){Xt(e)}else{Yt(this,e)}}function Dt(e){return e.cloneNode(true)}function Pt(e,t){if(!t&&Tt(e))Se.cleanData([e]);if(e.querySelectorAll){Se.cleanData(e.querySelectorAll("*"))}}function Rt(e){var t;for(t in e){return false}return true}function Lt(e){var t=e.ng339;var r=t&&ct[t];var n=r&&r.events;var i=r&&r.data;if((!i||Rt(i))&&(!n||Rt(n))){delete ct[t];e.ng339=undefined}}function Nt(r,e,n,t){if(j(t))throw gt("offargs","jqLite#off() does not support the `selector` argument");var i=Ft(r);var a=i&&i.events;var o=i&&i.handle;if(!o)return;if(!e){for(e in a){if(e!=="$destroy"){r.removeEventListener(e,o)}delete a[e]}}else{var s=function(e){var t=a[e];if(j(n)){Fe(t||[],n)}if(!(j(n)&&t&&t.length>0)){r.removeEventListener(e,o);delete a[e]}};Oe(e.split(" "),function(e){s(e);if(vt[e]){s(vt[e])}})}Lt(r)}function $t(e,t){var r=e.ng339;var n=r&&ct[r];if(n){if(t){delete n.data[t]}else{n.data={}}Lt(e)}}function Ft(e,t){var r=e.ng339,n=r&&ct[r];if(t&&!n){e.ng339=r=ht();n=ct[r]={events:{},data:{},handle:undefined}}return n}function Gt(e,t,r){if(Tt(e)){var n;var i=j(r);var a=!i&&t&&!ke(t);var o=!t;var s=Ft(e,!a);var l=s&&s.data;if(i){l[yt(t)]=r}else{if(o){return l}else{if(a){return l&&l[yt(t)]}else{for(n in t){l[yt(n)]=t[n]}}}}}}function Ut(e,t){if(!e.getAttribute)return false;return(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1}function Ht(e,t){if(t&&e.setAttribute){var r=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");var n=r;Oe(t.split(" "),function(e){e=Ne(e);n=n.replace(" "+e+" "," ")});if(n!==r){e.setAttribute("class",Ne(n))}}}function Wt(e,t){if(t&&e.setAttribute){var r=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");var n=r;Oe(t.split(" "),function(e){e=Ne(e);if(n.indexOf(" "+e+" ")===-1){n+=e+" "}});if(n!==r){e.setAttribute("class",Ne(n))}}}function Yt(e,t){if(t){if(t.nodeType){e[e.length++]=t}else{var r=t.length;if(typeof r==="number"&&t.window!==t){if(r){for(var n=0;n<r;n++){e[e.length++]=t[n]}}}else{e[e.length++]=t}}}}function Vt(e,t){return qt(e,"$"+(t||"ngController")+"Controller")}function qt(e,t,r){if(e.nodeType===rt){e=e.documentElement}var n=Ie(t)?t:[t];while(e){for(var i=0,a=n.length;i<a;i++){if(j(r=Se.data(e,n[i])))return r}e=e.parentNode||e.nodeType===nt&&e.host}}function zt(e){Pt(e,true);while(e.firstChild){e.removeChild(e.firstChild)}}function Bt(e,t){if(!t)Pt(e);var r=e.parentNode;if(r)r.removeChild(e)}function Kt(e,t){t=t||_e;if(t.document.readyState==="complete"){t.setTimeout(e)}else{Se(t).on("load",e)}}function Xt(e){function t(){_e.document.removeEventListener("DOMContentLoaded",t);_e.removeEventListener("load",t);e()}if(_e.document.readyState==="complete"){_e.setTimeout(e)}else{_e.document.addEventListener("DOMContentLoaded",t);_e.addEventListener("load",t)}}var Zt=It.prototype={ready:Xt,toString:function(){var t=[];Oe(this,function(e){t.push(""+e)});return"["+t.join(", ")+"]"},eq:function(e){return e>=0?Se(this[e]):Se(this[this.length+e])},length:0,push:e,sort:[].sort,splice:[].splice};var Qt={};Oe("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){Qt[be(e)]=e});var Jt={};Oe("input,select,option,textarea,button,form,details".split(","),function(e){Jt[e]=true});var er={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};function tr(e,t){var r=Qt[t.toLowerCase()];return r&&Jt[$e(e)]&&r}function rr(e){return er[e]}Oe({data:Gt,removeData:$t,hasData:Et,cleanData:function e(t){for(var r=0,n=t.length;r<n;r++){$t(t[r]);Nt(t[r])}}},function(e,t){It[t]=e});Oe({data:Gt,inheritedData:qt,scope:function(e){return Se.data(e,"$scope")||qt(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return Se.data(e,"$isolateScope")||Se.data(e,"$isolateScopeNoTemplate")},controller:Vt,injector:function(e){return qt(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:Ut,css:function(e,t,r){t=mt(t);if(j(r)){e.style[t]=r}else{return e.style[t]}},attr:function(e,t,r){var n;var i=e.nodeType;if(i===et||i===Je||i===tt||!e.getAttribute){return}var a=be(t);var o=Qt[a];if(j(r)){if(r===null||r===false&&o){e.removeAttribute(t)}else{e.setAttribute(t,o?a:r)}}else{n=e.getAttribute(t);if(o&&n!==null){n=a}return n===null?undefined:n}},prop:function(e,t,r){if(j(r)){e[t]=r}else{return e[t]}},text:function(){e.$dv="";return e;function e(e,t){if(Ae(t)){var r=e.nodeType;return r===Qe||r===et?e.textContent:""}e.textContent=t}}(),val:function(e,t){if(Ae(t)){if(e.multiple&&$e(e)==="select"){var r=[];Oe(e.options,function(e){if(e.selected){r.push(e.value||e.text)}});return r}return e.value}e.value=t},html:function(e,t){if(Ae(t)){return e.innerHTML}Pt(e,true);e.innerHTML=t},empty:zt},function(u,e){It.prototype[e]=function(e,t){var r,n;var i=this.length;if(u!==zt&&Ae(u.length===2&&(u!==Ut&&u!==Vt)?e:t)){if(ke(e)){for(r=0;r<i;r++){if(u===Gt){u(this[r],e)}else{for(n in e){u(this[r],n,e[n])}}}return this}else{var a=u.$dv;var o=Ae(a)?Math.min(i,1):i;for(var s=0;s<o;s++){var l=u(this[s],e,t);a=a?a+l:l}return a}}else{for(r=0;r<i;r++){u(this[r],e,t)}return this}}});function nr(s,l){var e=function(e,t){e.isDefaultPrevented=function(){return e.defaultPrevented};var r=l[t||e.type];var n=r?r.length:0;if(!n)return;if(Ae(e.immediatePropagationStopped)){var i=e.stopImmediatePropagation;e.stopImmediatePropagation=function(){e.immediatePropagationStopped=true;if(e.stopPropagation){e.stopPropagation()}if(i){i.call(e)}}}e.isImmediatePropagationStopped=function(){return e.immediatePropagationStopped===true};var a=r.specialHandlerWrapper||ir;if(n>1){r=at(r)}for(var o=0;o<n;o++){if(!e.isImmediatePropagationStopped()){a(s,e,r[o])}}};e.elem=s;return e}function ir(e,t,r){r.call(e,t)}function ar(e,t,r){var n=t.relatedTarget;if(!n||n!==e&&!jt.call(e,n)){r.call(e,t)}}Oe({removeData:$t,on:function e(i,t,a,r){if(j(r))throw gt("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(!Tt(i)){return}var n=Ft(i,true);var o=n.events;var s=n.handle;if(!s){s=n.handle=nr(i,o)}var l=t.indexOf(" ")>=0?t.split(" "):[t];var u=l.length;var c=function(e,t,r){var n=o[e];if(!n){n=o[e]=[];n.specialHandlerWrapper=t;if(e!=="$destroy"&&!r){i.addEventListener(e,s)}}n.push(a)};while(u--){t=l[u];if(vt[t]){c(vt[t],ar);c(t,undefined,true)}else{c(t)}}},off:Nt,one:function(t,r,n){t=Se(t);t.on(r,function e(){t.off(r,n);t.off(r,e)});t.on(r,n)},replaceWith:function(t,e){var r,n=t.parentNode;Pt(t);Oe(new It(e),function(e){if(r){n.insertBefore(e,r.nextSibling)}else{n.replaceChild(e,t)}r=e})},children:function(e){var t=[];Oe(e.childNodes,function(e){if(e.nodeType===Qe){t.push(e)}});return t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var r=e.nodeType;if(r!==Qe&&r!==nt)return;t=new It(t);for(var n=0,i=t.length;n<i;n++){var a=t[n];e.appendChild(a)}},prepend:function(t,e){if(t.nodeType===Qe){var r=t.firstChild;Oe(new It(e),function(e){t.insertBefore(e,r)})}},wrap:function(e,t){kt(e,Se(t).eq(0).clone()[0])},remove:Bt,detach:function(e){Bt(e,true)},after:function(e,t){var r=e,n=e.parentNode;if(n){t=new It(t);for(var i=0,a=t.length;i<a;i++){var o=t[i];n.insertBefore(o,r.nextSibling);r=o}}},addClass:Wt,removeClass:Ht,toggleClass:function(r,e,n){if(e){Oe(e.split(" "),function(e){var t=n;if(Ae(t)){t=!Ut(r,e)}(t?Wt:Ht)(r,e)})}},parent:function(e){var t=e.parentNode;return t&&t.nodeType!==nt?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){if(e.getElementsByTagName){return e.getElementsByTagName(t)}else{return[]}},clone:Dt,triggerHandler:function(t,e,r){var n,i,a;var o=e.type||e;var s=Ft(t);var l=s&&s.events;var u=l&&l[o];if(u){n={preventDefault:function(){this.defaultPrevented=true},isDefaultPrevented:function(){return this.defaultPrevented===true},stopImmediatePropagation:function(){this.immediatePropagationStopped=true},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===true},stopPropagation:Ee,type:o,target:t};if(e.type){n=xe(n,e)}i=at(u);a=r?[n].concat(r):[n];Oe(i,function(e){if(!n.isImmediatePropagationStopped()){e.apply(t,a)}})}}},function(o,e){It.prototype[e]=function(e,t,r){var n;for(var i=0,a=this.length;i<a;i++){if(Ae(n)){n=o(this[i],e,t,r);if(j(n)){n=Se(n)}}else{Yt(n,o(this[i],e,t,r))}}return j(n)?n:this}});It.prototype.bind=It.prototype.on;It.prototype.unbind=It.prototype.off;function or(){this.$get=function e(){return xe(It,{hasClass:function(e,t){if(e.attr)e=e[0];return Ut(e,t)},addClass:function(e,t){if(e.attr)e=e[0];return Wt(e,t)},removeClass:function(e,t){if(e.attr)e=e[0];return Ht(e,t)}})}}function sr(e,t){var r=e&&e.$$hashKey;if(r){if(typeof r==="function"){r=e.$$hashKey()}return r}var n=typeof e;if(n==="function"||n==="object"&&e!==null){r=e.$$hashKey=n+":"+(t||p)()}else{r=n+":"+e}return r}var lr=Object.create(null);function ur(){this._keys=[];this._values=[];this._lastKey=NaN;this._lastIndex=-1}ur.prototype={_idx:function(e){if(e!==this._lastKey){this._lastKey=e;this._lastIndex=this._keys.indexOf(e)}return this._lastIndex},_transformKey:function(e){return k(e)?lr:e},get:function(e){e=this._transformKey(e);var t=this._idx(e);if(t!==-1){return this._values[t]}},has:function(e){e=this._transformKey(e);var t=this._idx(e);return t!==-1},set:function(e,t){e=this._transformKey(e);var r=this._idx(e);if(r===-1){r=this._lastIndex=this._keys.length}this._keys[r]=e;this._values[r]=t},delete:function(e){e=this._transformKey(e);var t=this._idx(e);if(t===-1){return false}this._keys.splice(t,1);this._values.splice(t,1);this._lastKey=NaN;this._lastIndex=-1;return true}};var cr=ur;var fr=[function(){this.$get=[function(){return cr}]}];var hr=/^([^(]+?)=>/;var dr=/^[^(]*\(\s*([^)]*)\)/m;var pr=/,/;var vr=/^\s*(_?)(\S+?)\1\s*$/;var gr=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;var mr=L("$injector");function _r(e){return Function.prototype.toString.call(e)}function yr(e){var t=_r(e).replace(gr,""),r=t.match(hr)||t.match(dr);return r}function br(e){var t=yr(e);if(t){return"function("+(t[1]||"").replace(/[\s\r\n]+/," ")+")"}return"fn"}function wr(e,t,r){var n,i,a;if(typeof e==="function"){if(!(n=e.$inject)){n=[];if(e.length){if(t){if(!je(r)||!r){r=e.name||br(e)}throw mr("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",r)}i=yr(e);Oe(i[1].split(pr),function(e){e.replace(vr,function(e,t,r){n.push(r)})})}e.$inject=n}}else if(Ie(e)){a=e.length-1;me(e[a],"fn");n=e.slice(0,a)}else{me(e,"fn",true)}return n}function Sr(e,u){u=u===true;var i={},s="Provider",c=[],a=new cr,f={$provide:{provider:h(d),factory:h(v),service:h(g),value:h(m),constant:h(_),decorator:y}},o=f.$injector=w(f,function(e,t){if(S.isString(t)){c.push(t)}throw mr("unpr","Unknown provider: {0}",c.join(" <- "))}),r={},t=w(r,function(e,t){var r=o.get(e+s,t);return l.invoke(r.$get,r,undefined,e)}),l=t;f["$injector"+s]={$get:A(t)};l.modules=o.modules=Xe();var n=b(e);l=t.get("$injector");l.strictDi=u;Oe(n,function(e){if(e)l.invoke(e)});l.loadNewModules=function(e){Oe(b(e),function(e){if(e)l.invoke(e)})};return l;function h(r){return function(e,t){if(ke(e)){Oe(e,O(r))}else{return r(e,t)}}}function d(e,t){ze(e,"service");if(Pe(t)||Ie(t)){t=o.instantiate(t)}if(!t.$get){throw mr("pget","Provider '{0}' must define $get factory method.",e)}return f[e+s]=t}function p(r,n){return function e(){var t=l.invoke(n,this);if(Ae(t)){throw mr("undef","Provider '{0}' must return a value from $get factory method.",r)}return t}}function v(e,t,r){return d(e,{$get:r!==false?p(e,t):t})}function g(e,t){return v(e,["$injector",function(e){return e.instantiate(t)}])}function m(e,t){return v(e,A(t),false)}function _(e,t){ze(e,"constant");f[e]=t;r[e]=t}function y(e,t){var r=o.get(e+s),n=r.$get;r.$get=function(){var e=l.invoke(n,r);return l.invoke(t,null,{$delegate:e})}}function b(e){qe(Ae(e)||Ie(e),"modulesToLoad","not an array");var r=[],n;Oe(e,function(t){if(a.get(t))return;a.set(t,true);function e(e){var t,r;for(t=0,r=e.length;t<r;t++){var n=e[t],i=o.get(n[0]);i[n[1]].apply(i,n[2])}}try{if(je(t)){n=C(t);l.modules[t]=n;r=r.concat(b(n.requires)).concat(n._runBlocks);e(n._invokeQueue);e(n._configBlocks)}else if(Pe(t)){r.push(o.invoke(t))}else if(Ie(t)){r.push(o.invoke(t))}else{me(t,"module")}}catch(e){if(Ie(t)){t=t[t.length-1]}if(e.message&&e.stack&&e.stack.indexOf(e.message)===-1){e=e.message+"\n"+e.stack}throw mr("modulerr","Failed to instantiate module {0} due to:\n{1}",t,e.stack||e.message||e)}});return r}function w(r,n){function l(t,e){if(r.hasOwnProperty(t)){if(r[t]===i){throw mr("cdep","Circular dependency found: {0}",t+" <- "+c.join(" <- "))}return r[t]}else{try{c.unshift(t);r[t]=i;r[t]=n(t,e);return r[t]}catch(e){if(r[t]===i){delete r[t]}throw e}finally{c.shift()}}}function a(e,t,r){var n=[],i=Sr.$$annotate(e,u,r);for(var a=0,o=i.length;a<o;a++){var s=i[a];if(typeof s!=="string"){throw mr("itkn","Incorrect injection token! Expected service name as string, got {0}",s)}n.push(t&&t.hasOwnProperty(s)?t[s]:l(s,r))}return n}function o(e){if(we||typeof e!=="function"){return false}var t=e.$$ngIsClass;if(!Le(t)){t=e.$$ngIsClass=/^class\b/.test(_r(e))}return t}function e(e,t,r,n){if(typeof r==="string"){n=r;r=null}var i=a(e,r,n);if(Ie(e)){e=e[e.length-1]}if(!o(e)){return e.apply(t,i)}else{i.unshift(null);return new(Function.prototype.bind.apply(e,i))}}function t(e,t,r){var n=Ie(e)?e[e.length-1]:e;var i=a(e,t,r);i.unshift(null);return new(Function.prototype.bind.apply(n,i))}return{invoke:e,instantiate:t,get:l,annotate:Sr.$$annotate,has:function(e){return f.hasOwnProperty(e+s)||r.hasOwnProperty(e)}}}}Sr.$$annotate=wr;function Cr(){var e=true;this.disableAutoScrolling=function(){e=false};this.$get=["$window","$location","$rootScope",function(n,r,i){var a=n.document;function o(e){var t=null;Array.prototype.some.call(e,function(e){if($e(e)==="a"){t=e;return true}});return t}function s(){var e=u.yOffset;if(Pe(e)){e=e()}else if(U(e)){var t=e[0];var r=n.getComputedStyle(t);if(r.position!=="fixed"){e=0}else{e=t.getBoundingClientRect().bottom}}else if(!b(e)){e=0}return e}function l(e){if(e){e.scrollIntoView();var t=s();if(t){var r=e.getBoundingClientRect().top;n.scrollBy(0,r-t)}}else{n.scrollTo(0,0)}}function u(e){e=je(e)?e:b(e)?e.toString():r.hash();var t;if(!e)l(null);else if(t=a.getElementById(e))l(t);else if(t=o(a.getElementsByName(e)))l(t);else if(e==="top")l(null)}if(e){i.$watch(function e(){return r.hash()},function e(t,r){if(t===r&&t==="")return;Kt(function(){i.$evalAsync(u)})})}return u}]}var Or=L("$animate");var xr=1;var Tr="ng-animate";function Er(e,t){if(!e&&!t)return"";if(!e)return t;if(!t)return e;if(Ie(e))e=e.join(" ");if(Ie(t))t=t.join(" ");return e+" "+t}function Mr(e){for(var t=0;t<e.length;t++){var r=e[t];if(r.nodeType===xr){return r}}}function Ar(e){if(je(e)){e=e.split(" ")}var t=Xe();Oe(e,function(e){if(e.length){t[e]=true}});return t}function kr(e){return ke(e)?e:{}}var jr=function(){this.$get=Ee};var Ir=function(){var c=new cr;var f=[];this.$get=["$$AnimateRunner","$rootScope",function(a,o){return{enabled:Ee,on:Ee,off:Ee,pin:Ee,push:function(e,t,r,n){if(n){n()}r=r||{};if(r.from){e.css(r.from)}if(r.to){e.css(r.to)}if(r.addClass||r.removeClass){u(e,r.addClass,r.removeClass)}var i=new a;i.complete();return i}};function s(t,e,r){var n=false;if(e){e=je(e)?e.split(" "):Ie(e)?e:[];Oe(e,function(e){if(e){n=true;t[e]=r}})}return n}function l(){Oe(f,function(e){var t=c.get(e);if(t){var n=Ar(e.attr("class"));var i="";var a="";Oe(t,function(e,t){var r=!!n[t];if(e!==r){if(e){i+=(i.length?" ":"")+t}else{a+=(a.length?" ":"")+t}}});Oe(e,function(e){if(i){Wt(e,i)}if(a){Ht(e,a)}});c.delete(e)}});f.length=0}function u(e,t,r){var n=c.get(e)||{};var i=s(n,t,true);var a=s(n,r,false);if(i||a){c.set(e,n);f.push(e);if(f.length===1){o.$$postDigest(l)}}}}]};var Dr=["$provide",function(n){var i=this;var r=null;var t=null;this.$$registeredAnimations=Object.create(null);this.register=function(e,t){if(e&&e.charAt(0)!=="."){throw Or("notcsel","Expecting class selector starting with '.' got '{0}'.",e)}var r=e+"-animation";i.$$registeredAnimations[e.substr(1)]=r;n.factory(r,t)};this.customFilter=function(e){if(arguments.length===1){t=Pe(e)?e:null}return t};this.classNameFilter=function(e){if(arguments.length===1){r=e instanceof RegExp?e:null;if(r){var t=new RegExp("[(\\s|\\/)]"+Tr+"[(\\s|\\/)]");if(t.test(r.toString())){r=null;throw Or("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',Tr)}}}return r};this.$get=["$$animateQueue",function(a){function i(e,t,r){if(r){var n=Mr(r);if(n&&!n.parentNode&&!n.previousElementSibling){r=null}}if(r){r.after(e)}else{t.prepend(e)}}return{on:a.on,off:a.off,pin:a.pin,enabled:a.enabled,cancel:function(e){if(e.cancel){e.cancel()}},enter:function(e,t,r,n){t=t&&Se(t);r=r&&Se(r);t=t||r.parent();i(e,t,r);return a.push(e,"enter",kr(n))},move:function(e,t,r,n){t=t&&Se(t);r=r&&Se(r);t=t||r.parent();i(e,t,r);return a.push(e,"move",kr(n))},leave:function(e,t){return a.push(e,"leave",kr(t),function(){e.remove()})},addClass:function(e,t,r){r=kr(r);r.addClass=Er(r.addclass,t);return a.push(e,"addClass",r)},removeClass:function(e,t,r){r=kr(r);r.removeClass=Er(r.removeClass,t);return a.push(e,"removeClass",r)},setClass:function(e,t,r,n){n=kr(n);n.addClass=Er(n.addClass,t);n.removeClass=Er(n.removeClass,r);return a.push(e,"setClass",n)},animate:function(e,t,r,n,i){i=kr(i);i.from=i.from?xe(i.from,t):t;i.to=i.to?xe(i.to,r):r;n=n||"ng-inline-animate";i.tempClasses=Er(i.tempClasses,n);return a.push(e,"animate",i)}}}]}];var Pr=function(){this.$get=["$$rAF",function(t){var r=[];function n(e){r.push(e);if(r.length>1)return;t(function(){for(var e=0;e<r.length;e++){r[e]()}r=[]})}return function(){var t=false;n(function(){t=true});return function(e){if(t){e()}else{n(e)}}}}]};var Rr=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(t,e,n,i,a){var r=0;var o=1;var s=2;l.chain=function(e,t){var r=0;n();function n(){if(r===e.length){t(true);return}e[r](function(e){if(e===false){t(false);return}r++;n()})}};l.all=function(t,r){var n=0;var i=true;Oe(t,function(e){e.done(a)});function a(e){i=i&&e;if(++n===t.length){r(i)}}};function l(e){this.setHost(e);var t=n();var r=function(e){a(e,0,false)};this._doneCallbacks=[];this._tick=function(e){if(i()){r(e)}else{t(e)}};this._state=0}l.prototype={setHost:function(e){this.host=e||{}},done:function(e){if(this._state===s){e()}else{this._doneCallbacks.push(e)}},progress:Ee,getPromise:function(){if(!this.promise){var e=this;this.promise=t(function(t,r){e.done(function(e){if(e===false){r()}else{t()}})})}return this.promise},then:function(e,t){return this.getPromise().then(e,t)},catch:function(e){return this.getPromise()["catch"](e)},finally:function(e){return this.getPromise()["finally"](e)},pause:function(){if(this.host.pause){this.host.pause()}},resume:function(){if(this.host.resume){this.host.resume()}},end:function(){if(this.host.end){this.host.end()}this._resolve(true)},cancel:function(){if(this.host.cancel){this.host.cancel()}this._resolve(false)},complete:function(e){var t=this;if(t._state===r){t._state=o;t._tick(function(){t._resolve(e)})}},_resolve:function(t){if(this._state!==s){Oe(this._doneCallbacks,function(e){e(t)});this._doneCallbacks.length=0;this._state=s}}};return l}]};var Lr=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(s,e,l){return function(e,t){var r=t||{};if(!r.$$prepared){r=W(r)}if(r.cleanupStyles){r.from=r.to=null}if(r.from){e.css(r.from);r.from=null}var n,i=new l;return{start:a,end:a};function a(){s(function(){o();if(!n){i.complete()}n=true});return i}function o(){if(r.addClass){e.addClass(r.addClass);r.addClass=null}if(r.removeClass){e.removeClass(r.removeClass);r.removeClass=null}if(r.to){e.css(r.to);r.to=null}}}}]};function Nr(e){var t=e.indexOf("#");return t===-1?"":e.substr(t)}function $r(e){return e.replace(/#$/,"")}function Fr(a,e,t,o,r){var s=this,l=a.location,u=a.history,i=a.setTimeout,n=a.clearTimeout,c={},f=r(t);s.isMock=false;s.$$completeOutstandingRequest=f.completeTask;s.$$incOutstandingRequestCount=f.incTaskCount;s.notifyWhenNoOutstandingRequests=f.notifyWhenNoPendingTasks;var h,d,p=l.href,v=e.find("base"),g=null,m=!o.history?Ee:function e(){try{return u.state}catch(e){}};S();s.url=function(e,t,r){if(Ae(r)){r=null}if(l!==a.location)l=a.location;if(u!==a.history)u=a.history;if(e){var n=d===r;if(p===e&&(!o.history||n)){return s}var i=p&&qn(p)===qn(e);p=e;d=r;if(o.history&&(!i||!n)){u[t?"replaceState":"pushState"](r,"",e);S()}else{if(!i){g=e}if(t){l.replace(e)}else if(!i){l.href=e}else{l.hash=Nr(e)}if(l.href!==e){g=e}}if(g){g=e}return s}else{return $r(g||l.href)}};s.state=function(){return h};var _=[],y=false;function b(){g=null;C()}var w=null;function S(){h=m();h=Ae(h)?null:h;if(Ue(h,w)){h=w}w=h;d=h}function C(){var e=d;S();if(p===s.url()&&e===h){return}p=s.url();d=h;Oe(_,function(e){e(s.url(),h)})}s.onUrlChange=function(e){if(!y){if(o.history)Se(a).on("popstate",b);Se(a).on("hashchange",b);y=true}_.push(e);return e};s.$$applicationDestroyed=function(){Se(a).off("hashchange popstate",b)};s.$$checkUrlChange=C;s.baseHref=function(){var e=v.attr("href");return e?e.replace(/^(https?:)?\/\/[^/]*/,""):""};s.defer=function(e,t,r){var n;t=t||0;r=r||f.DEFAULT_TASK_TYPE;f.incTaskCount(r);n=i(function(){delete c[n];f.completeTask(e,r)},t);c[n]=r;return n};s.defer.cancel=function(e){if(c.hasOwnProperty(e)){var t=c[e];delete c[e];n(e);f.completeTask(Ee,t);return true}return false}}function Gr(){this.$get=["$window","$log","$sniffer","$document","$$taskTrackerFactory",function(e,t,r,n,i){return new Fr(e,n,t,r,i)}]}function Ur(){this.$get=function(){var f={};function e(e,t){if(e in f){throw L("$cacheFactory")("iid","CacheId '{0}' is already taken!",e)}var n=0,r=xe({},t,{id:e}),i=Xe(),a=t&&t.capacity||Number.MAX_VALUE,o=Xe(),s=null,l=null;return f[e]={put:function(e,t){if(Ae(t))return;if(a<Number.MAX_VALUE){var r=o[e]||(o[e]={key:e});u(r)}if(!(e in i))n++;i[e]=t;if(n>a){this.remove(l.key)}return t},get:function(e){if(a<Number.MAX_VALUE){var t=o[e];if(!t)return;u(t)}return i[e]},remove:function(e){if(a<Number.MAX_VALUE){var t=o[e];if(!t)return;if(t===s)s=t.p;if(t===l)l=t.n;c(t.n,t.p);delete o[e]}if(!(e in i))return;delete i[e];n--},removeAll:function(){i=Xe();n=0;o=Xe();s=l=null},destroy:function(){i=null;r=null;o=null;delete f[e]},info:function(){return xe({},r,{size:n})}};function u(e){if(e!==s){if(!l){l=e}else if(l===e){l=e.n}c(e.n,e.p);c(e,s);s=e;s.n=null}}function c(e,t){if(e!==t){if(e)e.p=t;if(t)t.n=e}}}e.info=function(){var r={};Oe(f,function(e,t){r[t]=e.info()});return r};e.get=function(e){return f[e]};return e}}function Hr(){this.$get=["$cacheFactory",function(e){return e("templates")}]}var Wr=L("$compile");function Yr(){}var Vr=new Yr;qr.$inject=["$provide","$$sanitizeUriProvider"];function qr(r,t){var b={},G="Directive",U=/^\s*directive:\s*([\w-]+)\s+(.*)$/,H=/(([\w-]+)(?::([^;]+))?;?)/,W=V("ngSrc,ngSrcset,src,srcset"),Y=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/;var ce=/^(on[a-z]+|formaction)$/;var s=Xe();function n(e,n,i){var a=/^([@&]|[=<](\*?))(\??)\s*([\w$]*)$/;var o=Xe();Oe(e,function(e,t){e=e.trim();if(e in s){o[t]=s[e];return}var r=e.match(a);if(!r){throw Wr("iscp","Invalid {3} for directive '{0}'."+" Definition: {... {1}: '{2}' ...}",n,t,e,i?"controller bindings definition":"isolate scope definition")}o[t]={mode:r[1][0],collection:r[2]==="*",optional:r[3]==="?",attrName:r[4]||t};if(r[4]){s[e]=o[t]}});return o}function fe(e,t){var r={isolateScope:null,bindToController:null};if(ke(e.scope)){if(e.bindToController===true){r.bindToController=n(e.scope,t,true);r.isolateScope={}}else{r.isolateScope=n(e.scope,t,false)}}if(ke(e.bindToController)){r.bindToController=n(e.bindToController,t,true)}if(r.bindToController&&!e.controller){throw Wr("noctrl","Cannot bind to controller without directive '{0}'s controller.",t)}return r}function i(e){var t=e.charAt(0);if(!t||t!==be(t)){throw Wr("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",e)}if(e!==e.trim()){throw Wr("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",e)}}function l(e){var i=e.require||e.controller&&e.name;if(!Ie(i)&&ke(i)){Oe(i,function(e,t){var r=e.match(Y);var n=e.substring(r[0].length);if(!n)i[t]=r[0]+t})}return i}function u(e,t){if(e&&!(je(e)&&/[EACM]/.test(e))){throw Wr("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",e,t)}return e||"EA"}this.directive=function e(o,t){qe(o,"name");ze(o,"directive");if(je(o)){i(o);qe(t,"directiveFactory");if(!b.hasOwnProperty(o)){b[o]=[];r.factory(o+G,["$injector","$exceptionHandler",function(n,i){var a=[];Oe(b[o],function(e,t){try{var r=n.invoke(e);if(Pe(r)){r={compile:A(r)}}else if(!r.compile&&r.link){r.compile=A(r.link)}r.priority=r.priority||0;r.index=t;r.name=r.name||o;r.require=l(r);r.restrict=u(r.restrict,o);r.$$moduleName=e.$$moduleName;a.push(r)}catch(e){i(e)}});return a}])}b[o].push(t)}else{Oe(o,O(e))}return this};this.component=function e(t,i){if(!je(t)){Oe(t,O(We(this,e)));return this}var a=i.controller||function(){};function r(n){function e(r){if(Pe(r)||Ie(r)){return function(e,t){return n.invoke(r,this,{$element:e,$attrs:t})}}else{return r}}var t=!i.template&&!i.templateUrl?"":i.template;var r={controller:a,controllerAs:nn(i.controller)||i.controllerAs||"$ctrl",template:e(t),templateUrl:e(i.templateUrl),transclude:i.transclude,scope:{},bindToController:i.bindings||{},restrict:"E",require:i.require};Oe(i,function(e,t){if(t.charAt(0)==="$")r[t]=e});return r}Oe(i,function(e,t){if(t.charAt(0)==="$"){r[t]=e;if(Pe(a))a[t]=e}});r.$inject=["$injector"];return this.directive(t,r)};this.aHrefSanitizationWhitelist=function(e){if(j(e)){t.aHrefSanitizationWhitelist(e);return this}else{return t.aHrefSanitizationWhitelist()}};this.imgSrcSanitizationWhitelist=function(e){if(j(e)){t.imgSrcSanitizationWhitelist(e);return this}else{return t.imgSrcSanitizationWhitelist()}};var he=true;this.debugInfoEnabled=function(e){if(j(e)){he=e;return this}return he};var de=false;this.strictComponentBindingsEnabled=function(e){if(j(e)){de=e;return this}return de};var pe=10;this.onChangesTtl=function(e){if(arguments.length){pe=e;return this}return pe};var ve=true;this.commentDirectivesEnabled=function(e){if(arguments.length){ve=e;return this}return ve};var ge=true;this.cssClassDirectivesEnabled=function(e){if(arguments.length){ge=e;return this}return ge};var me=Xe();this.addPropertySecurityContext=function(e,t,r){var n=e.toLowerCase()+"|"+t.toLowerCase();if(n in me&&me[n]!==r){throw Wr("ctxoverride","Property context '{0}.{1}' already set to '{2}', cannot override to '{3}'.",e,t,me[n],r)}me[n]=r;return this};(function e(){function t(t,e){Oe(e,function(e){me[e.toLowerCase()]=t})}t(Ni.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]);t(Ni.CSS,["*|style"]);t(Ni.URL,["area|href","area|ping","a|href","a|ping","blockquote|cite","body|background","del|cite","input|src","ins|cite","q|cite"]);t(Ni.MEDIA_URL,["audio|src","img|src","img|srcset","source|src","source|srcset","track|src","video|src","video|poster"]);t(Ni.RESOURCE_URL,["*|formAction","applet|code","applet|codebase","base|href","embed|src","frame|src","form|action","head|profile","html|manifest","iframe|src","link|href","media|src","object|codebase","object|data","script|src"])})();this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate",function(d,w,V,e,S,p,a,f,i){var c=/^\w/;var o=_e.document.createElement("div");var O=ve;var x=ge;var t=pe;var s;function l(){try{if(!--t){s=undefined;throw Wr("infchng","{0} $onChanges() iterations reached. Aborting!\n",pe)}a.$apply(function(){for(var e=0,t=s.length;e<t;++e){try{s[e]()}catch(e){V(e)}}s=undefined})}finally{t++}}function h(e,t){if(!e){return e}if(!je(e)){throw Wr("srcset",'Can\'t pass trusted values to `{0}`: "{1}"',t,e.toString())}var r="";var n=Ne(e);var i=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/;var a=/\s/.test(n)?i:/(,)/;var o=n.split(a);var s=Math.floor(o.length/2);for(var l=0;l<s;l++){var u=l*2;r+=f.getTrustedMediaUrl(Ne(o[u]));r+=" "+Ne(o[u+1])}var c=Ne(o[l*2]).split(/\s/);r+=f.getTrustedMediaUrl(Ne(c[0]));if(c.length===2){r+=" "+Ne(c[1])}return r}function q(e,t){if(t){var r=Object.keys(t);var n,i,a;for(n=0,i=r.length;n<i;n++){a=r[n];this[a]=t[a]}}else{this.$attr={}}this.$$element=e}q.prototype={$normalize:Xr,$addClass:function(e){if(e&&e.length>0){i.addClass(this.$$element,e)}},$removeClass:function(e){if(e&&e.length>0){i.removeClass(this.$$element,e)}},$updateClass:function(e,t){var r=Jr(e,t);if(r&&r.length){i.addClass(this.$$element,r)}var n=Jr(t,e);if(n&&n.length){i.removeClass(this.$$element,n)}},$set:function(e,t,r,n){var i=this.$$element[0],a=tr(i,e),o=rr(e),s=e,l;if(a){this.$$element.prop(e,t);n=a}else if(o){this[o]=t;s=o}this[e]=t;if(n){this.$attr[e]=n}else{n=this.$attr[e];if(!n){this.$attr[e]=n=Ve(e,"-")}}l=$e(this.$$element);if(l==="img"&&e==="srcset"){this[e]=t=h(t,"$set('srcset', value)")}if(r!==false){if(t===null||Ae(t)){this.$$element.removeAttr(n)}else{if(c.test(n)){this.$$element.attr(n,t)}else{v(this.$$element[0],n,t)}}}var u=this.$$observers;if(u){Oe(u[s],function(e){try{e(t)}catch(e){V(e)}})}},$observe:function(e,t){var r=this,n=r.$$observers||(r.$$observers=Xe()),i=n[e]||(n[e]=[]);i.push(t);a.$evalAsync(function(){if(!i.$$inter&&r.hasOwnProperty(e)&&!Ae(r[e])){t(r[e])}});return function(){Fe(i,t)}}};function v(e,t,r){o.innerHTML="<span "+t+">";var n=o.firstChild.attributes;var i=n[0];n.removeNamedItem(i.name);i.value=r;e.attributes.setNamedItem(i)}function M(e,t){try{e.addClass(t)}catch(e){}}var r=w.startSymbol(),n=w.endSymbol(),z=r==="{{"&&n==="}}"?Me:function e(t){return t.replace(/\{\{/g,r).replace(/}}/g,n)},T=/^ng(Attr|Prop|On)([A-Z].*)$/;var E=/^(.+)Start$/;B.$$addBindingInfo=he?function e(t,r){var n=t.data("$binding")||[];if(Ie(r)){n=n.concat(r)}else{n.push(r)}t.data("$binding",n)}:Ee;B.$$addBindingClass=he?function e(t){M(t,"ng-binding")}:Ee;B.$$addScopeInfo=he?function e(t,r,n,i){var a=n?i?"$isolateScopeNoTemplate":"$isolateScope":"$scope";t.data(a,r)}:Ee;B.$$addScopeClass=he?function e(t,r){M(t,r?"ng-isolate-scope":"ng-scope")}:Ee;B.$$createComment=function(e,t){var r="";if(he){r=" "+(e||"")+": ";if(t)r+=t+" "}return _e.document.createComment(r)};return B;function B(u,e,t,r,c){if(!(u instanceof Se)){u=Se(u)}var f=A(u,e,u,t,r,c);B.$$addScopeClass(u);var h=null;return function e(t,r,n){if(!u){throw Wr("multilink","This element has already been linked.")}qe(t,"scope");if(c&&c.needsNewScope){t=t.$parent.$new()}n=n||{};var i=n.parentBoundTranscludeFn,a=n.transcludeControllers,o=n.futureParentElement;if(i&&i.$$boundTransclude){i=i.$$boundTransclude}if(!h){h=g(o)}var s;if(h!=="html"){s=Se(ae(h,Se("<div></div>").append(u).html()))}else if(r){s=Zt.clone.call(u)}else{s=u}if(a){for(var l in a){s.data("$"+l+"Controller",a[l].instance)}}B.$$addScopeInfo(s,t);if(r)r(s,t);if(f)f(t,s,s,i);if(!r){u=f=null}return s}}function g(e){var t=e&&e[0];if(!t){return"html"}else{return $e(t)!=="foreignobject"&&Ce.call(t).match(/SVG/)?"svg":"html"}}function A(e,p,t,r,n,i){var v=[],a=Ie(e)||e instanceof Se,o,s,l,u,c,f,g;for(var h=0;h<e.length;h++){o=new q;if(we===11){m(e,h,a)}s=K(e[h],[],o,h===0?r:undefined,n);l=s.length?I(s,e[h],o,p,t,null,[],[],i):null;if(l&&l.scope){B.$$addScopeClass(o.$$element)}c=l&&l.terminal||!(u=e[h].childNodes)||!u.length?null:A(u,l?(l.transcludeOnThisElement||!l.templateOnThisElement)&&l.transclude:p);if(l||c){v.push(h,l,c);f=true;g=g||l}i=null}return f?d:null;function d(e,t,r,n){var i,a,o,s,l,u,c,f;var h;if(g){var d=t.length;h=new Array(d);for(l=0;l<v.length;l+=3){c=v[l];h[c]=t[c]}}else{h=t}for(l=0,u=v.length;l<u;){o=h[v[l++]];i=v[l++];a=v[l++];if(i){if(i.scope){s=e.$new();B.$$addScopeInfo(Se(o),s)}else{s=e}if(i.transcludeOnThisElement){f=k(e,i.transclude,n)}else if(!i.templateOnThisElement&&n){f=n}else if(!n&&p){f=k(e,p)}else{f=null}i(a,s,o,r,f)}else if(a){a(e,o.childNodes,undefined,n)}}}}function m(e,t,r){var n=e[t];var i=n.parentNode;var a;if(n.nodeType!==et){return}while(true){a=i?n.nextSibling:e[t+1];if(!a||a.nodeType!==et){break}n.nodeValue=n.nodeValue+a.nodeValue;if(a.parentNode){a.parentNode.removeChild(a)}if(r&&a===e[t+1]){e.splice(t+1,1)}}}function k(a,o,s){function e(e,t,r,n,i){if(!e){e=a.$new(false,i);e.$$transcluded=true}return o(e,t,{parentBoundTranscludeFn:s,transcludeControllers:r,futureParentElement:n})}var t=e.$$slots=Xe();for(var r in o.$$slots){if(o.$$slots[r]){t[r]=k(a,o.$$slots[r],s)}else{t[r]=null}}return e}function K(e,t,r,n,i){var a=e.nodeType,o=r.$attr,s,l,u;switch(a){case Qe:l=$e(e);D(t,Xr(l),"E",n,i);for(var c,f,h,d,p,v=e.attributes,g=0,m=v&&v.length;g<m;g++){var _=false;var y=false;var b=false,w=false,S=false;var C;c=v[g];f=c.name;d=c.value;h=Xr(f.toLowerCase());if(p=h.match(T)){b=p[1]==="Attr";w=p[1]==="Prop";S=p[1]==="On";f=f.replace(Br,"").toLowerCase().substr(4+p[1].length).replace(/_(.)/g,function(e,t){return t.toUpperCase()})}else if((C=h.match(E))&&P(C[1])){_=f;y=f.substr(0,f.length-5)+"end";f=f.substr(0,f.length-6)}if(w||S){r[h]=d;o[h]=c.name;if(w){N(e,t,h,f)}else{$(t,h,f)}}else{h=Xr(f.toLowerCase());o[h]=f;if(b||!r.hasOwnProperty(h)){r[h]=d;if(tr(e,h)){r[h]=true}}F(e,t,d,h,b);D(t,h,"A",n,i,_,y)}}if(l==="input"&&e.getAttribute("type")==="hidden"){e.setAttribute("autocomplete","off")}if(!x)break;u=e.className;if(ke(u)){u=u.animVal}if(je(u)&&u!==""){while(s=H.exec(u)){h=Xr(s[2]);if(D(t,h,"C",n,i)){r[h]=Ne(s[3])}u=u.substr(s.index+s[0].length)}}break;case et:L(t,e.nodeValue);break;case tt:if(!O)break;j(e,t,r,n,i);break}t.sort(R);return t}function j(e,t,r,n,i){try{var a=U.exec(e.nodeValue);if(a){var o=Xr(a[1]);if(D(t,o,"M",n,i)){r[o]=Ne(a[2])}}}catch(e){}}function X(e,t,r){var n=[];var i=0;if(t&&e.hasAttribute&&e.hasAttribute(t)){do{if(!e){throw Wr("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,r)}if(e.nodeType===Qe){if(e.hasAttribute(t))i++;if(e.hasAttribute(r))i--}n.push(e);e=e.nextSibling}while(i>0)}else{n.push(e)}return Se(n)}function Z(o,s,l){return function e(t,r,n,i,a){r=X(r[0],s,l);return o(t,r,n,i,a)}}function Q(e,t,r,n,i,a){var o;if(e){return B(t,r,n,i,a)}return function e(){if(!o){o=B(t,r,n,i,a);t=r=a=null}return o.apply(this,arguments)}}function I(e,w,S,t,r,n,C,O,i){i=i||{};var a=-Number.MAX_VALUE,x=i.newScopeDirective,T=i.controllerDirectives,E=i.newIsolateScopeDirective,M=i.templateDirective,o=i.nonTlbTranscludeDirective,s=false,l=false,A=i.hasElementTranscludeDirective,u=S.$$element=Se(w),c,f,h,d=n,p=t,v,g=false,m=false,_;for(var y=0,b=e.length;y<b;y++){c=e[y];var k=c.$$start;var j=c.$$end;if(k){u=X(w,k,j)}h=undefined;if(a>c.priority){break}_=c.scope;if(_){if(!c.templateUrl){if(ke(_)){ie("new/isolated scope",E||x,c,u);E=c}else{ie("new/isolated scope",E,c,u)}}x=x||c}f=c.name;if(!g&&(c.replace&&(c.templateUrl||c.template)||c.transclude&&!c.$$tlb)){var I;for(var D=y+1;I=e[D++];){if(I.transclude&&!I.$$tlb||I.replace&&(I.templateUrl||I.template)){m=true;break}}g=true}if(!c.templateUrl&&c.controller){T=T||Xe();ie("'"+f+"' controller",T[f],c,u);T[f]=c}_=c.transclude;if(_){s=true;if(!c.$$tlb){ie("transclusion",o,c,u);o=c}if(_==="element"){A=true;a=c.priority;h=u;u=S.$$element=Se(B.$$createComment(f,S[f]));w=u[0];oe(r,He(h),w);p=Q(m,h,t,a,d&&d.name,{nonTlbTranscludeDirective:o})}else{var P=Xe();if(!ke(_)){h=Se(Dt(w)).contents()}else{h=_e.document.createDocumentFragment();var R=Xe();var L=Xe();Oe(_,function(e,t){var r=e.charAt(0)==="?";e=r?e.substring(1):e;R[e]=t;P[t]=null;L[t]=r});Oe(u.contents(),function(e){var t=R[Xr($e(e))];if(t){L[t]=true;P[t]=P[t]||_e.document.createDocumentFragment();P[t].appendChild(e)}else{h.appendChild(e)}});Oe(L,function(e,t){if(!e){throw Wr("reqslot","Required transclusion slot `{0}` was not filled.",t)}});for(var N in P){if(P[N]){var $=Se(P[N].childNodes);P[N]=Q(m,$,t)}}h=Se(h.childNodes)}u.empty();p=Q(m,h,t,undefined,undefined,{needsNewScope:c.$$isolateScope||c.$$newScope});p.$$slots=P}}if(c.template){l=true;ie("template",M,c,u);M=c;_=Pe(c.template)?c.template(u,S):c.template;_=z(_);if(c.replace){d=c;if(xt(_)){h=[]}else{h=en(ae(c.templateNamespace,Ne(_)))}w=h[0];if(h.length!==1||w.nodeType!==Qe){throw Wr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",f,"")}oe(r,u,w);var F={$attr:{}};var G=K(w,[],F);var U=e.splice(y+1,e.length-(y+1));if(E||x){te(G,E,x)}e=e.concat(G).concat(U);re(S,F);b=e.length}else{u.html(_)}}if(c.templateUrl){l=true;ie("template",M,c,u);M=c;if(c.replace){d=c}Y=ne(e.splice(y,e.length-y),u,S,r,s&&p,C,O,{controllerDirectives:T,newScopeDirective:x!==c&&x,newIsolateScopeDirective:E,templateDirective:M,nonTlbTranscludeDirective:o});b=e.length}else if(c.compile){try{v=c.compile(u,S,p);var H=c.$$originalDirective||c;if(Pe(v)){W(null,We(H,v),k,j)}else if(v){W(We(H,v.pre),We(H,v.post),k,j)}}catch(e){V(e,Ye(u))}}if(c.terminal){Y.terminal=true;a=Math.max(a,c.priority)}}Y.scope=x&&x.scope===true;Y.transcludeOnThisElement=s;Y.templateOnThisElement=l;Y.transclude=p;i.hasElementTranscludeDirective=A;return Y;function W(e,t,r,n){if(e){if(r)e=Z(e,r,n);e.require=c.require;e.directiveName=f;if(E===c||c.$$isolateScope){e=se(e,{isolateScope:true})}C.push(e)}if(t){if(r)t=Z(t,r,n);t.require=c.require;t.directiveName=f;if(E===c||c.$$isolateScope){t=se(t,{isolateScope:true})}O.push(t)}}function Y(e,t,r,n,o){var i,a,s,l,u,c,f,h,d,p;if(w===r){d=S;h=S.$$element}else{h=Se(r);d=new q(h,S)}u=t;if(E){l=t.$new(true)}else if(x){u=t.$parent}if(o){f=b;f.$$boundTransclude=o;f.isSlotFilled=function(e){return!!o.$$slots[e]}}if(T){c=ee(h,d,f,T,l,t,E)}if(E){B.$$addScopeInfo(h,l,true,!(M&&(M===E||M===E.$$originalDirective)));B.$$addScopeClass(h,true);l.$$isolateBindings=E.$$isolateBindings;p=ue(t,d,l,l.$$isolateBindings,E);if(p.removeWatches){l.$on("$destroy",p.removeWatches)}}for(var v in c){var g=T[v];var m=c[v];var _=g.$$bindings.bindToController;m.instance=m();h.data("$"+g.name+"Controller",m.instance);m.bindingInfo=ue(u,d,m.instance,_,g)}Oe(T,function(e,t){var r=e.require;if(e.bindToController&&!Ie(r)&&ke(r)){xe(c[t].instance,J(t,r,h,c))}});Oe(c,function(e){var t=e.instance;if(Pe(t.$onChanges)){try{t.$onChanges(e.bindingInfo.initialChanges)}catch(e){V(e)}}if(Pe(t.$onInit)){try{t.$onInit()}catch(e){V(e)}}if(Pe(t.$doCheck)){u.$watch(function(){t.$doCheck()});t.$doCheck()}if(Pe(t.$onDestroy)){u.$on("$destroy",function e(){t.$onDestroy()})}});for(i=0,a=C.length;i<a;i++){s=C[i];le(s,s.isolateScope?l:t,h,d,s.require&&J(s.directiveName,s.require,h,c),f)}var y=t;if(E&&(E.template||E.templateUrl===null)){y=l}if(e){e(y,r.childNodes,undefined,o)}for(i=O.length-1;i>=0;i--){s=O[i];le(s,s.isolateScope?l:t,h,d,s.require&&J(s.directiveName,s.require,h,c),f)}Oe(c,function(e){var t=e.instance;if(Pe(t.$postLink)){t.$postLink()}});function b(e,t,r,n){var i;if(!Re(e)){n=r;r=t;t=e;e=undefined}if(A){i=c}if(!r){r=A?h.parent():h}if(n){var a=o.$$slots[n];if(a){return a(e,t,i,r,y)}else if(Ae(a)){throw Wr("noslot",'No parent directive that requires a transclusion with slot name "{0}". '+"Element: {1}",n,Ye(h))}}else{return o(e,t,i,r,y)}}}}function J(r,e,n,i){var a;if(je(e)){var t=e.match(Y);var o=e.substring(t[0].length);var s=t[1]||t[3];var l=t[2]==="?";if(s==="^^"){n=n.parent()}else{a=i&&i[o];a=a&&a.instance}if(!a){var u="$"+o+"Controller";if(s==="^^"&&n[0]&&n[0].nodeType===rt){a=null}else{a=s?n.inheritedData(u):n.data(u)}}if(!a&&!l){throw Wr("ctreq","Controller '{0}', required by directive '{1}', can't be found!",o,r)}}else if(Ie(e)){a=[];for(var c=0,f=e.length;c<f;c++){a[c]=J(r,e[c],n,i)}}else if(ke(e)){a={};Oe(e,function(e,t){a[t]=J(r,e,n,i)})}return a||null}function ee(e,t,r,n,i,a,o){var s=Xe();for(var l in n){var u=n[l];var c={$scope:u===o||u.$$isolateScope?i:a,$element:e,$attrs:t,$transclude:r};var f=u.controller;if(f==="@"){f=t[u.name]}var h=p(f,c,true,u.controllerAs);s[u.name]=h;e.data("$"+u.name+"Controller",h.instance)}return s}function te(e,t,r){for(var n=0,i=e.length;n<i;n++){e[n]=Te(e[n],{$$isolateScope:t,$$newScope:r})}}function D(e,t,r,n,i,a,o){if(t===i)return null;var s=null;if(b.hasOwnProperty(t)){for(var l,u=d.get(t+G),c=0,f=u.length;c<f;c++){l=u[c];if((Ae(n)||n>l.priority)&&l.restrict.indexOf(r)!==-1){if(a){l=Te(l,{$$start:a,$$end:o})}if(!l.$$bindings){var h=l.$$bindings=fe(l,l.name);if(ke(h.isolateScope)){l.$$isolateBindings=h.isolateScope}}e.push(l);s=l}}}return s}function P(e){if(b.hasOwnProperty(e)){for(var t,r=d.get(e+G),n=0,i=r.length;n<i;n++){t=r[n];if(t.multiElement){return true}}}return false}function re(r,n){var i=n.$attr,a=r.$attr;Oe(r,function(e,t){if(t.charAt(0)!=="$"){if(n[t]&&n[t]!==e){if(e.length){e+=(t==="style"?";":" ")+n[t]}else{e=n[t]}}r.$set(t,e,true,i[t])}});Oe(n,function(e,t){if(!r.hasOwnProperty(t)&&t.charAt(0)!=="$"){r[t]=e;if(t!=="class"&&t!=="style"){a[t]=i[t]}}})}function ne(h,d,p,v,g,m,_,y){var b=[],w,S,C=d[0],O=h.shift(),x=Te(O,{templateUrl:null,transclude:null,replace:null,$$originalDirective:O}),T=Pe(O.templateUrl)?O.templateUrl(d,p):O.templateUrl,E=O.templateNamespace;d.empty();e(T).then(function(e){var r,t,n,i;e=z(e);if(O.replace){if(xt(e)){n=[]}else{n=en(ae(E,Ne(e)))}r=n[0];if(n.length!==1||r.nodeType!==Qe){throw Wr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",O.name,T)}t={$attr:{}};oe(v,d,r);var a=K(r,[],t);if(ke(O.scope)){te(a,true)}h=a.concat(h);re(p,t)}else{r=C;d.html(e)}h.unshift(x);w=I(h,r,p,g,d,O,m,_,y);Oe(v,function(e,t){if(e===r){v[t]=d[0]}});S=A(d[0].childNodes,g);while(b.length){var o=b.shift(),s=b.shift(),l=b.shift(),u=b.shift(),c=d[0];if(o.$$destroyed)continue;if(s!==C){var f=s.className;if(!(y.hasElementTranscludeDirective&&O.replace)){c=Dt(r)}oe(l,Se(s),c);M(Se(c),f)}if(w.transcludeOnThisElement){i=k(o,w.transclude,u)}else{i=u}w(S,o,c,v,i)}b=null}).catch(function(e){if(De(e)){V(e)}});return function e(t,r,n,i,a){var o=a;if(r.$$destroyed)return;if(b){b.push(r,n,i,o)}else{if(w.transcludeOnThisElement){o=k(r,w.transclude,a)}w(S,r,n,i,o)}}}function R(e,t){var r=t.priority-e.priority;if(r!==0)return r;if(e.name!==t.name)return e.name<t.name?-1:1;return e.index-t.index}function ie(e,t,r,n){function i(e){return e?" (module: "+e+")":""}if(t){throw Wr("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",t.name,i(t.$$moduleName),r.name,i(r.$$moduleName),e,Ye(n))}}function L(e,t){var a=w(t,true);if(a){e.push({priority:0,compile:function e(t){var r=t.parent(),i=!!r.length;if(i)B.$$addBindingClass(r);return function e(t,r){var n=r.parent();if(!i)B.$$addBindingClass(n);B.$$addBindingInfo(n,a.expressions);t.$watch(a,function e(t){r[0].nodeValue=t})}}})}}function ae(e,t){e=be(e||"html");switch(e){case"svg":case"math":var r=_e.document.createElement("div");r.innerHTML="<"+e+">"+t+"</"+e+">";return r.childNodes[0].childNodes;default:return t}}function _(e,t){if(t==="srcdoc"){return f.HTML}if(t==="src"||t==="ngSrc"){if(["img","video","audio","source","track"].indexOf(e)===-1){return f.RESOURCE_URL}return f.MEDIA_URL}else if(t==="xlinkHref"){if(e==="image")return f.MEDIA_URL;if(e==="a")return f.URL;return f.RESOURCE_URL}else if(e==="form"&&t==="action"||e==="base"&&t==="href"||e==="link"&&t==="href"){return f.RESOURCE_URL}else if(e==="a"&&(t==="href"||t==="ngHref")){return f.URL}}function u(e,t){var r=t.toLowerCase();return me[e+"|"+r]||me["*|"+r]}function y(e){return h(f.valueOf(e),"ng-prop-srcset")}function N(e,t,n,o){if(ce.test(o)){throw Wr("nodomevents","Property bindings for HTML DOM event properties are disallowed")}var r=$e(e);var i=u(r,o);var s=Me;if(o==="srcset"&&(r==="img"||r==="source")){s=y}else if(i){s=f.getTrusted.bind(f,i)}t.push({priority:100,compile:function e(t,r){var i=S(r[n]);var a=S(r[n],function e(t){return f.valueOf(t)});return{pre:function e(t,r){function n(){var e=i(t);r.prop(o,s(e))}n();t.$watch(a,n)}}}})}function $(e,t,r){e.push(Xo(S,a,V,t,r,false))}function F(e,t,o,s,r){var n=$e(e);var l=_(n,s);var i=!r;var u=W[s]||r;var c=w(o,i,l,u);if(!c)return;if(s==="multiple"&&n==="select"){throw Wr("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",Ye(e))}if(ce.test(s)){throw Wr("nodomevents","Interpolations for HTML DOM event attributes are disallowed")}t.push({priority:100,compile:function(){return{pre:function e(t,r,n){var i=n.$$observers||(n.$$observers=Xe());var a=n[s];if(a!==o){c=a&&w(a,true,l,u);o=a}if(!c)return;n[s]=c(t);(i[s]||(i[s]=[])).$$inter=true;(n.$$observers&&n.$$observers[s].$$scope||t).$watch(c,function e(t,r){if(s==="class"&&t!==r){n.$updateClass(t,r)}else{n.$set(s,t)}})}}}})}function oe(e,t,r){var n=t[0],i=t.length,a=n.parentNode,o,s;if(e){for(o=0,s=e.length;o<s;o++){if(e[o]===n){e[o++]=r;for(var l=o,u=l+i-1,c=e.length;l<c;l++,u++){if(u<c){e[l]=e[u]}else{delete e[l]}}e.length-=i-1;if(e.context===n){e.context=r}break}}}if(a){a.replaceChild(r,n)}var f=_e.document.createDocumentFragment();for(o=0;o<i;o++){f.appendChild(t[o])}if(Se.hasData(n)){Se.data(r,Se.data(n));Se(n).off("$destroy")}Se.cleanData(f.querySelectorAll("*"));for(o=1;o<i;o++){delete t[o]}t[0]=r;t.length=1}function se(e,t){return xe(function(){return e.apply(null,arguments)},e,t)}function le(e,t,r,n,i,a){try{e(t,r,n,i,a)}catch(e){V(e,Ye(r))}}function C(e,t){if(de){throw Wr("missingattr","Attribute '{0}' of '{1}' is non-optional and must be set!",e,t)}}function ue(p,v,g,e,m){var _=[];var y={};var n;Oe(e,function e(t,n){var r=t.attrName,i=t.optional,a=t.mode,o,s,l,u,c;switch(a){case"@":if(!i&&!ye.call(v,r)){C(r,m.name);g[n]=v[r]=undefined}c=v.$observe(r,function(e){if(je(e)||Le(e)){var t=g[n];b(n,e,t);g[n]=e}});v.$$observers[r].$$scope=p;o=v[r];if(je(o)){g[n]=w(o)(p)}else if(Le(o)){g[n]=o}y[n]=new zr(Vr,g[n]);_.push(c);break;case"=":if(!ye.call(v,r)){if(i)break;C(r,m.name);v[r]=undefined}if(i&&!v[r])break;s=S(v[r]);if(s.literal){u=Ue}else{u=Ge}l=s.assign||function(){o=g[n]=s(p);throw Wr("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",v[r],r,m.name)};o=g[n]=s(p);var f=function e(t){if(!u(t,g[n])){if(!u(t,o)){g[n]=t}else{l(p,t=g[n])}}o=t;return o};f.$stateful=true;if(t.collection){c=p.$watchCollection(v[r],f)}else{c=p.$watch(S(v[r],f),null,s.literal)}_.push(c);break;case"<":if(!ye.call(v,r)){if(i)break;C(r,m.name);v[r]=undefined}if(i&&!v[r])break;s=S(v[r]);var h=s.literal;var d=g[n]=s(p);y[n]=new zr(Vr,g[n]);c=p[t.collection?"$watchCollection":"$watch"](s,function e(t,r){if(r===t){if(r===d||h&&Ue(r,d)){return}r=d}b(n,t,r);g[n]=t});_.push(c);break;case"&":if(!i&&!ye.call(v,r)){C(r,m.name)}s=v.hasOwnProperty(r)?S(v[r]):Ee;if(s===Ee&&i)break;g[n]=function(e){return s(p,e)};break}});function b(e,t,r){if(Pe(g.$onChanges)&&!Ge(t,r)){if(!s){p.$$postDigest(l);s=[]}if(!n){n={};s.push(i)}if(n[e]){r=n[e].previousValue}n[e]=new zr(r,t)}}function i(){g.$onChanges(n);n=undefined}return{initialChanges:y,removeWatches:_.length&&function e(){for(var t=0,r=_.length;t<r;++t){_[t]()}}}}}]}function zr(e,t){this.previousValue=e;this.currentValue=t}zr.prototype.isFirstChange=function(){return this.previousValue===Vr};var Br=/^((?:x|data)[:\-_])/i;var Kr=/[:\-_]+(.)/g;function Xr(e){return e.replace(Br,"").replace(Kr,function(e,t,r){return r?t.toUpperCase():t})}function Zr(e,t,r,n){}function Qr(e,t,r,n,i){}function Jr(e,t){var r="",n=e.split(/\s+/),i=t.split(/\s+/);e:for(var a=0;a<n.length;a++){var o=n[a];for(var s=0;s<i.length;s++){if(o===i[s])continue e}r+=(r.length>0?" ":"")+o}return r}function en(e){e=Se(e);var t=e.length;if(t<=1){return e}while(t--){var r=e[t];if(r.nodeType===tt||r.nodeType===et&&r.nodeValue.trim()===""){i.call(e,t,1)}}return e}var tn=L("$controller");var rn=/^(\S+)(\s+as\s+([\w$]+))?$/;function nn(e,t){if(t&&je(t))return t;if(je(e)){var r=rn.exec(e);if(r)return r[3]}}function an(){var h={};this.has=function(e){return h.hasOwnProperty(e)};this.register=function(e,t){ze(e,"controller");if(ke(e)){xe(h,e)}else{h[e]=t}};this.$get=["$injector",function(c){return function e(r,n,t,i){var a,o,s,l;t=t===true;if(i&&je(i)){l=i}if(je(r)){o=r.match(rn);if(!o){throw tn("ctrlfmt","Badly formed controller string '{0}'. "+"Must match `__name__ as __id__` or `__name__`.",r)}s=o[1];l=l||o[3];r=h.hasOwnProperty(s)?h[s]:Be(n.$scope,s,true);if(!r){throw tn("ctrlreg","The controller with the name '{0}' is not registered.",s)}me(r,s,true)}if(t){var u=(Ie(r)?r[r.length-1]:r).prototype;a=Object.create(u||null);if(l){f(n,l,a,s||r.name)}return xe(function e(){var t=c.invoke(r,a,n,s);if(t!==a&&(ke(t)||Pe(t))){a=t;if(l){f(n,l,a,s||r.name)}}return a},{instance:a,identifier:l})}a=c.instantiate(r,n,s);if(l){f(n,l,a,s||r.name)}return a};function f(e,t,r,n){if(!(e&&ke(e.$scope))){throw L("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",n,t)}e.$scope[t]=r}}]}function on(){this.$get=["$window",function(e){return Se(e.document)}]}function sn(){this.$get=["$document","$rootScope",function(e,t){var r=e[0];var n=r&&r.hidden;e.on("visibilitychange",i);t.$on("$destroy",function(){e.off("visibilitychange",i)});function i(){n=r.hidden}return function(){return n}}]}function ln(){this.$get=["$log",function(r){return function(e,t){r.error.apply(r,arguments)}}]}var un=function(){this.$get=["$document",function(t){return function(e){if(e){if(!e.nodeType&&e instanceof Se){e=e[0]}}else{e=t[0].body}return e.offsetWidth+1}}]};var cn="application/json";var fn={"Content-Type":cn+";charset=utf-8"};var hn=/^\[|^\{(?!\{)/;var dn={"[":/]$/,"{":/}$/};var pn=/^\)]\}',?\n/;var vn=L("$http");function gn(e){if(ke(e)){return w(e)?e.toISOString():K(e)}return e}function mn(){this.$get=function(){return function e(t){if(!t)return"";var r=[];l(t,function(e,t){if(e===null||Ae(e)||Pe(e))return;if(Ie(e)){Oe(e,function(e){r.push(ae(t)+"="+ae(gn(e)))})}else{r.push(ae(t)+"="+ae(gn(e)))}});return r.join("&")}}}function _n(){this.$get=function(){return function e(t){if(!t)return"";var i=[];a(t,"",true);return i.join("&");function a(e,r,n){if(Ie(e)){Oe(e,function(e,t){a(e,r+"["+(ke(e)?t:"")+"]")})}else if(ke(e)&&!w(e)){l(e,function(e,t){a(e,r+(n?"":"[")+t+(n?"":"]"))})}else{if(Pe(e)){e=e()}i.push(ae(r)+"="+(e==null?"":ae(gn(e))))}}}}}function yn(t,e){if(je(t)){var r=t.replace(pn,"").trim();if(r){var n=e("Content-Type");var i=n&&n.indexOf(cn)===0;if(i||bn(r)){try{t=X(r)}catch(e){if(!i){return t}throw vn("baddata",'Data must be a valid JSON object. Received: "{0}". '+'Parse error: "{1}"',t,e)}}}}return t}function bn(e){var t=e.match(hn);return t&&dn[t[0]].test(e)}function wn(e){var r=Xe(),t;function n(e,t){if(e){r[e]=r[e]?r[e]+", "+t:t}}if(je(e)){Oe(e.split("\n"),function(e){t=e.indexOf(":");n(be(Ne(e.substr(0,t))),Ne(e.substr(t+1)))})}else if(ke(e)){Oe(e,function(e,t){n(be(t),Ne(e))})}return r}function Sn(r){var n;return function(e){if(!n)n=wn(r);if(e){var t=n[be(e)];if(t===undefined){t=null}return t}return n}}function Cn(t,r,n,e){if(Pe(e)){return e(t,r,n)}Oe(e,function(e){t=e(t,r,n)});return t}function On(e){return 200<=e&&e<300}function xn(){var x=this.defaults={transformResponse:[yn],transformRequest:[function(e){return ke(e)&&!M(e)&&!D(e)&&!I(e)?K(e):e}],headers:{common:{Accept:"application/json, text/plain, */*"},post:at(fn),put:at(fn),patch:at(fn)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"};var T=false;this.useApplyAsync=function(e){if(j(e)){T=!!e;return this}return T};var n=this.interceptors=[];var i=this.xsrfWhitelistedOrigins=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(f,v,g,e,m,_,h,y){var b=e("$http");x.paramSerializer=je(x.paramSerializer)?h.get(x.paramSerializer):x.paramSerializer;var d=[];Oe(n,function(e){d.unshift(je(e)?h.get(e):h.invoke(e))});var w=ia(i);function S(e){if(!ke(e)){throw L("$http")("badreq","Http request configuration must be an object.  Received: {0}",e)}if(!je(y.valueOf(e.url))){throw L("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",e.url)}var r=xe({method:"get",transformRequest:x.transformRequest,transformResponse:x.transformResponse,paramSerializer:x.paramSerializer,jsonpCallbackParam:x.jsonpCallbackParam},e);r.headers=l(e);r.method=E(r.method);r.paramSerializer=je(r.paramSerializer)?h.get(r.paramSerializer):r.paramSerializer;f.$$incOutstandingRequestCount("$http");var t=[];var n=[];var i=_.resolve(r);Oe(d,function(e){if(e.request||e.requestError){t.unshift(e.request,e.requestError)}if(e.response||e.responseError){n.push(e.response,e.responseError)}});i=a(i,t);i=i.then(u);i=a(i,n);i=i.finally(o);return i;function a(e,t){for(var r=0,n=t.length;r<n;){var i=t[r++];var a=t[r++];e=e.then(i,a)}t.length=0;return e}function o(){f.$$completeOutstandingRequest(Ee,"$http")}function s(e,r){var n,i={};Oe(e,function(e,t){if(Pe(e)){n=e(r);if(n!=null){i[t]=n}}else{i[t]=e}});return i}function l(e){var t=x.headers,r=xe({},e.headers),n,i,a;t=xe({},t.common,t[be(e.method)]);e:for(n in t){i=be(n);for(a in r){if(be(a)===i){continue e}}r[n]=t[n]}return s(r,at(e))}function u(e){var r=e.headers;var t=Cn(e.data,Sn(r),undefined,e.transformRequest);if(Ae(t)){Oe(r,function(e,t){if(be(t)==="content-type"){delete r[t]}})}if(Ae(e.withCredentials)&&!Ae(x.withCredentials)){e.withCredentials=x.withCredentials}return p(e,t).then(c,c)}function c(e){var t=xe({},e);t.data=Cn(e.data,e.headers,e.status,r.transformResponse);return On(e.status)?t:_.reject(t)}}S.pendingRequests=[];t("get","delete","head","jsonp");r("post","put","patch");S.defaults=x;return S;function t(e){Oe(arguments,function(r){S[r]=function(e,t){return S(xe({},t||{},{method:r,url:e}))}})}function r(e){Oe(arguments,function(n){S[n]=function(e,t,r){return S(xe({},r||{},{method:n,url:e,data:t}))}})}function p(a,e){var o=_.defer(),t=o.promise,s,r,n=a.headers,i=be(a.method)==="jsonp",l=a.url;if(i){l=y.getTrustedResourceUrl(l)}else if(!je(l)){l=y.valueOf(l)}l=C(l,a.paramSerializer(a.params));if(i){l=O(l,a.jsonpCallbackParam)}S.pendingRequests.push(a);t.then(p,p);if((a.cache||x.cache)&&a.cache!==false&&(a.method==="GET"||a.method==="JSONP")){s=ke(a.cache)?a.cache:ke(x.cache)?x.cache:b}if(s){r=s.get(l);if(j(r)){if(P(r)){r.then(d,d)}else{if(Ie(r)){h(r[1],r[0],at(r[2]),r[3],r[4])}else{h(r,200,{},"OK","complete")}}}else{s.put(l,t)}}if(Ae(r)){var u=w(a.url)?g()[a.xsrfCookieName||x.xsrfCookieName]:undefined;if(u){n[a.xsrfHeaderName||x.xsrfHeaderName]=u}v(a.method,l,e,f,n,a.timeout,a.withCredentials,a.responseType,c(a.eventHandlers),c(a.uploadEventHandlers))}return t;function c(e){if(e){var t={};Oe(e,function(r,e){t[e]=function(e){if(T){m.$applyAsync(t)}else if(m.$$phase){t()}else{m.$apply(t)}function t(){r(e)}}});return t}}function f(e,t,r,n,i){if(s){if(On(e)){s.put(l,[e,t,wn(r),n,i])}else{s.remove(l)}}function a(){h(t,e,r,n,i)}if(T){m.$applyAsync(a)}else{a();if(!m.$$phase)m.$apply()}}function h(e,t,r,n,i){t=t>=-1?t:0;(On(t)?o.resolve:o.reject)({data:e,status:t,headers:Sn(r),config:a,statusText:n,xhrStatus:i})}function d(e){h(e.data,e.status,at(e.headers()),e.statusText,e.xhrStatus)}function p(){var e=S.pendingRequests.indexOf(a);if(e!==-1)S.pendingRequests.splice(e,1)}}function C(e,t){if(t.length>0){e+=(e.indexOf("?")===-1?"?":"&")+t}return e}function O(r,n){var e=r.split("?");if(e.length>2){throw vn("badjsonp",'Illegal use more than one "?", in url, "{1}"',r)}var t=re(e[1]);Oe(t,function(e,t){if(e==="JSON_CALLBACK"){throw vn("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',r)}if(t===n){throw vn("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',n,r)}});r+=(r.indexOf("?")===-1?"?":"&")+n+"=JSON_CALLBACK";return r}}]}function Tn(){this.$get=function(){return function e(){return new _e.XMLHttpRequest}}}function En(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(e,t,r,n){return Mn(e,n,e.defer,t,r[0])}]}function Mn(b,w,S,C,s){return function(e,i,t,a,r,n,o,s,l,u){i=i||b.url();if(be(e)==="jsonp"){var c=C.createCallback(i);var f=O(i,c,function(e,t){var r=e===200&&C.getResponse(c);y(a,e,r,"",t,"complete");C.removeCallback(c)})}else{var h=w(e,i);var d=false;h.open(e,i,true);Oe(r,function(e,t){if(j(e)){h.setRequestHeader(t,e)}});h.onload=function e(){var t=h.statusText||"";var r="response"in h?h.response:h.responseText;var n=h.status===1223?204:h.status;if(n===0){n=r?200:ta(i).protocol==="file"?404:0}y(a,n,r,h.getAllResponseHeaders(),t,"complete")};var p=function(){y(a,-1,null,null,"","error")};var v=function(){y(a,-1,null,null,"",d?"timeout":"abort")};var g=function(){y(a,-1,null,null,"","timeout")};h.onerror=p;h.ontimeout=g;h.onabort=v;Oe(l,function(e,t){h.addEventListener(t,e)});Oe(u,function(e,t){h.upload.addEventListener(t,e)});if(o){h.withCredentials=true}if(s){try{h.responseType=s}catch(e){if(s!=="json"){throw e}}}h.send(Ae(t)?null:t)}if(n>0){var m=S(function(){_("timeout")},n)}else if(P(n)){n.then(function(){_(j(n.$$timeoutId)?"timeout":"abort")})}function _(e){d=e==="timeout";if(f){f()}if(h){h.abort()}}function y(e,t,r,n,i,a){if(j(m)){S.cancel(m)}f=h=null;e(t,r,n,i,a)}};function O(e,n,i){e=e.replace("JSON_CALLBACK",n);var a=s.createElement("script"),o=null;a.type="text/javascript";a.src=e;a.async=true;o=function(e){a.removeEventListener("load",o);a.removeEventListener("error",o);s.body.removeChild(a);a=null;var t=-1;var r="unknown";if(e){if(e.type==="load"&&!C.wasCalled(n)){e={type:"error"}}r=e.type;t=e.type==="error"?404:200}if(i){i(t,r)}};a.addEventListener("load",o);a.addEventListener("error",o);s.body.appendChild(a);return o}}var An=S.$interpolateMinErr=L("$interpolate");An.throwNoconcat=function(e){throw An("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows "+"interpolations that concatenate multiple expressions when a trusted value is "+"required.  See http://docs.angularjs.org/api/ng.$sce",e)};An.interr=function(e,t){return An("interr","Can't interpolate: {0}\n{1}",e,t.toString())};function kn(){var E="{{";var M="}}";this.startSymbol=function(e){if(e){E=e;return this}return E};this.endSymbol=function(e){if(e){M=e;return this}return M};this.$get=["$parse","$exceptionHandler","$sce",function(b,w,S){var C=E.length,O=M.length,t=new RegExp(E.replace(/./g,e),"g"),r=new RegExp(M.replace(/./g,e),"g");function e(e){return"\\\\\\"+e}function x(e){return e.replace(t,E).replace(r,M)}function T(e,t,r,n){var i=e.$watch(function e(t){i();return n(t)},t,r);return i}function n(a,e,n,i){var o=n===S.URL||n===S.MEDIA_URL;if(!a.length||a.indexOf(E)===-1){if(e&&!o)return;var t=x(a);if(o){t=S.getTrusted(n,t)}var r=A(t);r.exp=a;r.expressions=[];r.$$watchDelegate=T;return r}i=!!i;var s,l,u=0,c=[],f,h=a.length,d,p=[],v=[],g;while(u<h){if((s=a.indexOf(E,u))!==-1&&(l=a.indexOf(M,s+C))!==-1){if(u!==s){p.push(x(a.substring(u,s)))}d=a.substring(s+C,l);c.push(d);u=l+O;v.push(p.length);p.push("")}else{if(u!==h){p.push(x(a.substring(u)))}break}}g=p.length===1&&v.length===1;var m=o&&g?undefined:y;f=c.map(function(e){return b(e,m)});if(!e||c.length){var _=function(e){for(var t=0,r=c.length;t<r;t++){if(i&&Ae(e[t]))return;p[v[t]]=e[t]}if(o){return S.getTrusted(n,g?p[0]:p.join(""))}else if(n&&p.length>1){An.throwNoconcat(a)}return p.join("")};return xe(function e(t){var r=0;var n=c.length;var i=new Array(n);try{for(;r<n;r++){i[r]=f[r](t)}return _(i)}catch(e){w(An.interr(a,e))}},{exp:a,expressions:c,$$watchDelegate:function(i,a){var o;return i.$watchGroup(f,function e(t,r){var n=_(t);a.call(this,n,t!==r?o:n,i);o=n})}})}function y(e){try{e=n&&!o?S.getTrusted(n,e):S.valueOf(e);return i&&!j(e)?e:Ze(e)}catch(e){w(An.interr(a,e))}}}n.startSymbol=function(){return E};n.endSymbol=function(){return M};return n}]}var jn=L("$interval");function In(){this.$get=["$$intervalFactory","$window",function(e,i){var a={};var t=function(e,t,r){var n=i.setInterval(e,t);a[n]=r;return n};var n=function(e){i.clearInterval(e);delete a[e]};var r=e(t,n);r.cancel=function(e){if(!e)return false;if(!e.hasOwnProperty("$$intervalId")){throw jn("badprom","`$interval.cancel()` called with a promise that was not generated by `$interval()`.")}if(!a.hasOwnProperty(e.$$intervalId))return false;var t=e.$$intervalId;var r=a[t];Ii(r.promise);r.reject("canceled");n(t);return true};return r}]}function Dn(){this.$get=["$browser","$q","$$q","$rootScope",function(v,g,m,_){return function e(d,p){return function e(t,r,n,i){var a=arguments.length>4,o=a?He(arguments,4):[],s=0,l=j(i)&&!i,u=(l?m:g).defer(),c=u.promise;n=j(n)?n:0;function f(){if(!a){t(s)}else{t.apply(null,o)}}function h(){if(l){v.defer(f)}else{_.$evalAsync(f)}u.notify(s++);if(n>0&&s>=n){u.resolve(s);p(c.$$intervalId)}if(!l)_.$apply()}c.$$intervalId=d(h,r,u,l);return c}}}]}var Pn=function(){this.$get=function(){var i=S.callbacks;var a={};function o(e){var t=function(e){t.data=e;t.called=true};t.id=e;return t}return{createCallback:function(e){var t="_"+(i.$$counter++).toString(36);var r="angular.callbacks."+t;var n=o(t);a[r]=i[t]=n;return r},wasCalled:function(e){return a[e].called},getResponse:function(e){return a[e].data},removeCallback:function(e){var t=a[e];delete i[t.id];delete a[e]}}}};var Rn=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,Ln={http:80,https:443,ftp:21};var Nn=L("$location");function $n(e){var t=e.split("/"),r=t.length;while(r--){t[r]=ie(t[r].replace(/%2F/g,"/"))}return t.join("/")}function Fn(e,t){var r=e.split("/"),n=r.length;while(n--){r[n]=decodeURIComponent(r[n]);if(t){r[n]=r[n].replace(/\//g,"%2F")}}return r.join("/")}function Gn(e,t,r){var n=ne(t),i=r?"#"+ie(r):"",a=$n(e);return a+(n?"?"+n:"")+i}function Un(e,t){var r=ta(e);t.$$protocol=r.protocol;t.$$host=r.hostname;t.$$port=m(r.port)||Ln[r.protocol]||null}var Hn=/^\s*[\\/]{2,}/;function Wn(e,t,r){if(Hn.test(e)){throw Nn("badpath",'Invalid url "{0}".',e)}var n=e.charAt(0)!=="/";if(n){e="/"+e}var i=ta(e);var a=n&&i.pathname.charAt(0)==="/"?i.pathname.substring(1):i.pathname;t.$$path=Fn(a,r);t.$$search=re(i.search);t.$$hash=decodeURIComponent(i.hash);if(t.$$path&&t.$$path.charAt(0)!=="/"){t.$$path="/"+t.$$path}}function Yn(e,t){return e.slice(0,t.length)===t}function Vn(e,t){if(Yn(t,e)){return t.substr(e.length)}}function qn(e){var t=e.indexOf("#");return t===-1?e:e.substr(0,t)}function zn(e){return e.substr(0,qn(e).lastIndexOf("/")+1)}function Bn(e){return e.substring(0,e.indexOf("/",e.indexOf("//")+2))}function Kn(a,o,s){this.$$html5=true;s=s||"";Un(a,this);this.$$parse=function(e){var t=Vn(o,e);if(!je(t)){throw Nn("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,o)}Wn(t,this,true);if(!this.$$path){this.$$path="/"}this.$$compose()};this.$$normalizeUrl=function(e){return o+e.substr(1)};this.$$parseLinkUrl=function(e,t){if(t&&t[0]==="#"){this.hash(t.slice(1));return true}var r,n;var i;if(j(r=Vn(a,e))){n=r;if(s&&j(r=Vn(s,r))){i=o+(Vn("/",r)||r)}else{i=a+n}}else if(j(r=Vn(o,e))){i=o+r}else if(o===e+"/"){i=o}if(i){this.$$parse(i)}return!!i}}function Xn(i,a,o){Un(i,this);this.$$parse=function(e){var t=Vn(i,e)||Vn(a,e);var r;if(!Ae(t)&&t.charAt(0)==="#"){r=Vn(o,t);if(Ae(r)){r=t}}else{if(this.$$html5){r=t}else{r="";if(Ae(t)){i=e;this.replace()}}}Wn(r,this,false);this.$$path=n(this.$$path,r,i);this.$$compose();function n(e,t,r){var n=/^\/[A-Z]:(\/.*)/;var i;if(Yn(t,r)){t=t.replace(r,"")}if(n.exec(t)){return e}i=n.exec(e);return i?i[1]:e}};this.$$normalizeUrl=function(e){return i+(e?o+e:"")};this.$$parseLinkUrl=function(e,t){if(qn(i)===qn(e)){this.$$parse(e);return true}return false}}function Zn(i,a,o){this.$$html5=true;Xn.apply(this,arguments);this.$$parseLinkUrl=function(e,t){if(t&&t[0]==="#"){this.hash(t.slice(1));return true}var r;var n;if(i===qn(e)){r=e}else if(n=Vn(a,e)){r=i+o+n}else if(a===e+"/"){r=a}if(r){this.$$parse(r)}return!!r};this.$$normalizeUrl=function(e){return i+o+e}}var Qn={$$absUrl:"",$$html5:false,$$replace:false,$$compose:function(){this.$$url=Gn(this.$$path,this.$$search,this.$$hash);this.$$absUrl=this.$$normalizeUrl(this.$$url);this.$$urlUpdatedByLocation=true},absUrl:Jn("$$absUrl"),url:function(e){if(Ae(e)){return this.$$url}var t=Rn.exec(e);if(t[1]||e==="")this.path(decodeURIComponent(t[1]));if(t[2]||t[1]||e==="")this.search(t[3]||"");this.hash(t[5]||"");return this},protocol:Jn("$$protocol"),host:Jn("$$host"),port:Jn("$$port"),path:ei("$$path",function(e){e=e!==null?e.toString():"";return e.charAt(0)==="/"?e:"/"+e}),search:function(r,e){switch(arguments.length){case 0:return this.$$search;case 1:if(je(r)||b(r)){r=r.toString();this.$$search=re(r)}else if(ke(r)){r=W(r,{});Oe(r,function(e,t){if(e==null)delete r[t]});this.$$search=r}else{throw Nn("isrcharg","The first argument of the `$location#search()` call must be a string or an object.")}break;default:if(Ae(e)||e===null){delete this.$$search[r]}else{this.$$search[r]=e}}this.$$compose();return this},hash:ei("$$hash",function(e){return e!==null?e.toString():""}),replace:function(){this.$$replace=true;return this}};Oe([Zn,Xn,Kn],function(t){t.prototype=Object.create(Qn);t.prototype.state=function(e){if(!arguments.length){return this.$$state}if(t!==Kn||!this.$$html5){throw Nn("nostate","History API state support is available only "+"in HTML5 mode and only in browsers supporting HTML5 History API")}this.$$state=Ae(e)?null:e;this.$$urlUpdatedByLocation=true;return this}});function Jn(e){return function(){return this[e]}}function ei(t,r){return function(e){if(Ae(e)){return this[t]}this[t]=r(e);this.$$compose();return this}}function ti(){var g="!",m={enabled:false,requireBase:true,rewriteLinks:true};this.hashPrefix=function(e){if(j(e)){g=e;return this}else{return g}};this.html5Mode=function(e){if(Le(e)){m.enabled=e;return this}else if(ke(e)){if(Le(e.enabled)){m.enabled=e.enabled}if(Le(e.requireBase)){m.requireBase=e.requireBase}if(Le(e.rewriteLinks)||je(e.rewriteLinks)){m.rewriteLinks=e.rewriteLinks}return this}else{return m}};this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(o,s,l,a,e){var u,t,r=s.baseHref(),n=s.url(),i;if(m.enabled){if(!r&&m.requireBase){throw Nn("nobase","$location in HTML5 mode requires a <base> tag to be present!")}i=Bn(n)+(r||"/");t=l.history?Kn:Zn}else{i=qn(n);t=Xn}var c=zn(i);u=new t(i,c,"#"+g);u.$$parseLinkUrl(n,n);u.$$state=s.state();var f=/^\s*(javascript|mailto):/i;function h(e,t){return e===t||ta(e).href===ta(t).href}function d(e,t,r){var n=u.url();var i=u.$$state;try{s.url(e,t,r);u.$$state=s.state()}catch(e){u.url(n);u.$$state=i;throw e}}a.on("click",function(e){var t=m.rewriteLinks;if(!t||e.ctrlKey||e.metaKey||e.shiftKey||e.which===2||e.button===2)return;var r=Se(e.target);while($e(r[0])!=="a"){if(r[0]===a[0]||!(r=r.parent())[0])return}if(je(t)&&Ae(r.attr(t)))return;var n=r.prop("href");var i=r.attr("href")||r.attr("xlink:href");if(ke(n)&&n.toString()==="[object SVGAnimatedString]"){n=ta(n.animVal).href}if(f.test(n))return;if(n&&!r.attr("target")&&!e.isDefaultPrevented()){if(u.$$parseLinkUrl(n,i)){e.preventDefault();if(u.absUrl()!==s.url()){o.$apply()}}}});if(u.absUrl()!==n){s.url(u.absUrl(),true)}var p=true;s.onUrlChange(function(n,i){if(!Yn(n,c)){e.location.href=n;return}o.$evalAsync(function(){var e=u.absUrl();var t=u.$$state;var r;u.$$parse(n);u.$$state=i;r=o.$broadcast("$locationChangeStart",n,e,i,t).defaultPrevented;if(u.absUrl()!==n)return;if(r){u.$$parse(e);u.$$state=t;d(e,false,t)}else{p=false;v(e,t)}});if(!o.$$phase)o.$digest()});o.$watch(function e(){if(p||u.$$urlUpdatedByLocation){u.$$urlUpdatedByLocation=false;var r=s.url();var t=u.absUrl();var n=s.state();var i=u.$$replace;var a=!h(r,t)||u.$$html5&&l.history&&n!==u.$$state;if(p||a){p=false;o.$evalAsync(function(){var e=u.absUrl();var t=o.$broadcast("$locationChangeStart",e,r,u.$$state,n).defaultPrevented;if(u.absUrl()!==e)return;if(t){u.$$parse(r);u.$$state=n}else{if(a){d(e,i,n===u.$$state?null:u.$$state)}v(r,n)}})}}u.$$replace=false});return u;function v(e,t){o.$broadcast("$locationChangeSuccess",u.absUrl(),e,u.$$state,t)}}]}function ri(){var a=true,o=this;this.debugEnabled=function(e){if(j(e)){a=e;return this}else{return a}};this.$get=["$window",function(t){var r=we||/\bEdge\//.test(t.navigator&&t.navigator.userAgent);return{log:n("log"),info:n("info"),warn:n("warn"),error:n("error"),debug:function(){var e=n("debug");return function(){if(a){e.apply(o,arguments)}}}()};function i(e){if(De(e)){if(e.stack&&r){e=e.message&&e.stack.indexOf(e.message)===-1?"Error: "+e.message+"\n"+e.stack:e.stack}else if(e.sourceURL){e=e.message+"\n"+e.sourceURL+":"+e.line}}return e}function n(e){var r=t.console||{},n=r[e]||r.log||Ee;return function(){var t=[];Oe(arguments,function(e){t.push(i(e))});return Function.prototype.apply.call(n,r,t)}}}]}var ni=L("$parse");var ii={}.constructor.prototype.valueOf;function ai(e){return e+""}var oi=Xe();Oe("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(e){oi[e]=true});var si={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'};var li=function e(t){this.options=t};li.prototype={constructor:li,lex:function(e){this.text=e;this.index=0;this.tokens=[];while(this.index<this.text.length){var t=this.text.charAt(this.index);if(t==='"'||t==="'"){this.readString(t)}else if(this.isNumber(t)||t==="."&&this.isNumber(this.peek())){this.readNumber()}else if(this.isIdentifierStart(this.peekMultichar())){this.readIdent()}else if(this.is(t,"(){}[].,;:?")){this.tokens.push({index:this.index,text:t});this.index++}else if(this.isWhitespace(t)){this.index++}else{var r=t+this.peek();var n=r+this.peek(2);var i=oi[t];var a=oi[r];var o=oi[n];if(i||a||o){var s=o?n:a?r:t;this.tokens.push({index:this.index,text:s,operator:true});this.index+=s.length}else{this.throwError("Unexpected next character ",this.index,this.index+1)}}}return this.tokens},is:function(e,t){return t.indexOf(e)!==-1},peek:function(e){var t=e||1;return this.index+t<this.text.length?this.text.charAt(this.index+t):false},isNumber:function(e){return"0"<=e&&e<="9"&&typeof e==="string"},isWhitespace:function(e){return e===" "||e==="\r"||e==="\t"||e==="\n"||e==="\v"||e===" "},isIdentifierStart:function(e){return this.options.isIdentifierStart?this.options.isIdentifierStart(e,this.codePointAt(e)):this.isValidIdentifierStart(e)},isValidIdentifierStart:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e||e==="$"},isIdentifierContinue:function(e){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(e,this.codePointAt(e)):this.isValidIdentifierContinue(e)},isValidIdentifierContinue:function(e,t){return this.isValidIdentifierStart(e,t)||this.isNumber(e)},codePointAt:function(e){if(e.length===1)return e.charCodeAt(0);return(e.charCodeAt(0)<<10)+e.charCodeAt(1)-56613888},peekMultichar:function(){var e=this.text.charAt(this.index);var t=this.peek();if(!t){return e}var r=e.charCodeAt(0);var n=t.charCodeAt(0);if(r>=55296&&r<=56319&&n>=56320&&n<=57343){return e+t}return e},isExpOperator:function(e){return e==="-"||e==="+"||this.isNumber(e)},throwError:function(e,t,r){r=r||this.index;var n=j(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,r)+"]":" "+r;throw ni("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,n,this.text)},readNumber:function(){var e="";var t=this.index;while(this.index<this.text.length){var r=be(this.text.charAt(this.index));if(r==="."||this.isNumber(r)){e+=r}else{var n=this.peek();if(r==="e"&&this.isExpOperator(n)){e+=r}else if(this.isExpOperator(r)&&n&&this.isNumber(n)&&e.charAt(e.length-1)==="e"){e+=r}else if(this.isExpOperator(r)&&(!n||!this.isNumber(n))&&e.charAt(e.length-1)==="e"){this.throwError("Invalid exponent")}else{break}}this.index++}this.tokens.push({index:t,text:e,constant:true,value:Number(e)})},readIdent:function(){var e=this.index;this.index+=this.peekMultichar().length;while(this.index<this.text.length){var t=this.peekMultichar();if(!this.isIdentifierContinue(t)){break}this.index+=t.length}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:true})},readString:function(e){var t=this.index;this.index++;var r="";var n=e;var i=false;while(this.index<this.text.length){var a=this.text.charAt(this.index);n+=a;if(i){if(a==="u"){var o=this.text.substring(this.index+1,this.index+5);if(!o.match(/[\da-f]{4}/i)){this.throwError("Invalid unicode escape [\\u"+o+"]")}this.index+=4;r+=String.fromCharCode(parseInt(o,16))}else{var s=si[a];r=r+(s||a)}i=false}else if(a==="\\"){i=true}else if(a===e){this.index++;this.tokens.push({index:t,text:n,constant:true,value:r});return}else{r+=a}this.index++}this.throwError("Unterminated quote",t)}};var ui=function e(t,r){this.lexer=t;this.options=r};ui.Program="Program";ui.ExpressionStatement="ExpressionStatement";ui.AssignmentExpression="AssignmentExpression";ui.ConditionalExpression="ConditionalExpression";ui.LogicalExpression="LogicalExpression";ui.BinaryExpression="BinaryExpression";ui.UnaryExpression="UnaryExpression";ui.CallExpression="CallExpression";ui.MemberExpression="MemberExpression";ui.Identifier="Identifier";ui.Literal="Literal";ui.ArrayExpression="ArrayExpression";ui.Property="Property";ui.ObjectExpression="ObjectExpression";ui.ThisExpression="ThisExpression";ui.LocalsExpression="LocalsExpression";ui.NGValueParameter="NGValueParameter";ui.prototype={ast:function(e){this.text=e;this.tokens=this.lexer.lex(e);var t=this.program();if(this.tokens.length!==0){this.throwError("is an unexpected token",this.tokens[0])}return t},program:function(){var e=[];while(true){if(this.tokens.length>0&&!this.peek("}",")",";","]"))e.push(this.expressionStatement());if(!this.expect(";")){return{type:ui.Program,body:e}}}},expressionStatement:function(){return{type:ui.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){var e=this.expression();while(this.expect("|")){e=this.filter(e)}return e},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary();if(this.expect("=")){if(!_i(e)){throw ni("lval","Trying to assign a value to a non l-value")}e={type:ui.AssignmentExpression,left:e,right:this.assignment(),operator:"="}}return e},ternary:function(){var e=this.logicalOR();var t;var r;if(this.expect("?")){t=this.expression();if(this.consume(":")){r=this.expression();return{type:ui.ConditionalExpression,test:e,alternate:t,consequent:r}}}return e},logicalOR:function(){var e=this.logicalAND();while(this.expect("||")){e={type:ui.LogicalExpression,operator:"||",left:e,right:this.logicalAND()}}return e},logicalAND:function(){var e=this.equality();while(this.expect("&&")){e={type:ui.LogicalExpression,operator:"&&",left:e,right:this.equality()}}return e},equality:function(){var e=this.relational();var t;while(t=this.expect("==","!=","===","!==")){e={type:ui.BinaryExpression,operator:t.text,left:e,right:this.relational()}}return e},relational:function(){var e=this.additive();var t;while(t=this.expect("<",">","<=",">=")){e={type:ui.BinaryExpression,operator:t.text,left:e,right:this.additive()}}return e},additive:function(){var e=this.multiplicative();var t;while(t=this.expect("+","-")){e={type:ui.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()}}return e},multiplicative:function(){var e=this.unary();var t;while(t=this.expect("*","/","%")){e={type:ui.BinaryExpression,operator:t.text,left:e,right:this.unary()}}return e},unary:function(){var e;if(e=this.expect("+","-","!")){return{type:ui.UnaryExpression,operator:e.text,prefix:true,argument:this.unary()}}else{return this.primary()}},primary:function(){var e;if(this.expect("(")){e=this.filterChain();this.consume(")")}else if(this.expect("[")){e=this.arrayDeclaration()}else if(this.expect("{")){e=this.object()}else if(this.selfReferential.hasOwnProperty(this.peek().text)){e=W(this.selfReferential[this.consume().text])}else if(this.options.literals.hasOwnProperty(this.peek().text)){e={type:ui.Literal,value:this.options.literals[this.consume().text]}}else if(this.peek().identifier){e=this.identifier()}else if(this.peek().constant){e=this.constant()}else{this.throwError("not a primary expression",this.peek())}var t;while(t=this.expect("(","[",".")){if(t.text==="("){e={type:ui.CallExpression,callee:e,arguments:this.parseArguments()};this.consume(")")}else if(t.text==="["){e={type:ui.MemberExpression,object:e,property:this.expression(),computed:true};this.consume("]")}else if(t.text==="."){e={type:ui.MemberExpression,object:e,property:this.identifier(),computed:false}}else{this.throwError("IMPOSSIBLE")}}return e},filter:function(e){var t=[e];var r={type:ui.CallExpression,callee:this.identifier(),arguments:t,filter:true};while(this.expect(":")){t.push(this.expression())}return r},parseArguments:function(){var e=[];if(this.peekToken().text!==")"){do{e.push(this.filterChain())}while(this.expect(","))}return e},identifier:function(){var e=this.consume();if(!e.identifier){this.throwError("is not a valid identifier",e)}return{type:ui.Identifier,name:e.text}},constant:function(){return{type:ui.Literal,value:this.consume().value}},arrayDeclaration:function(){var e=[];if(this.peekToken().text!=="]"){do{if(this.peek("]")){break}e.push(this.expression())}while(this.expect(","))}this.consume("]");return{type:ui.ArrayExpression,elements:e}},object:function(){var e=[],t;if(this.peekToken().text!=="}"){do{if(this.peek("}")){break}t={type:ui.Property,kind:"init"};if(this.peek().constant){t.key=this.constant();t.computed=false;this.consume(":");t.value=this.expression()}else if(this.peek().identifier){t.key=this.identifier();t.computed=false;if(this.peek(":")){this.consume(":");t.value=this.expression()}else{t.value=t.key}}else if(this.peek("[")){this.consume("[");t.key=this.expression();this.consume("]");t.computed=true;this.consume(":");t.value=this.expression()}else{this.throwError("invalid key",this.peek())}e.push(t)}while(this.expect(","))}this.consume("}");return{type:ui.ObjectExpression,properties:e}},throwError:function(e,t){throw ni("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},consume:function(e){if(this.tokens.length===0){throw ni("ueoe","Unexpected end of expression: {0}",this.text)}var t=this.expect(e);if(!t){this.throwError("is unexpected, expecting ["+e+"]",this.peek())}return t},peekToken:function(){if(this.tokens.length===0){throw ni("ueoe","Unexpected end of expression: {0}",this.text)}return this.tokens[0]},peek:function(e,t,r,n){return this.peekAhead(0,e,t,r,n)},peekAhead:function(e,t,r,n,i){if(this.tokens.length>e){var a=this.tokens[e];var o=a.text;if(o===t||o===r||o===n||o===i||!t&&!r&&!n&&!i){return a}}return false},expect:function(e,t,r,n){var i=this.peek(e,t,r,n);if(i){this.tokens.shift();return i}return false},selfReferential:{this:{type:ui.ThisExpression},$locals:{type:ui.LocalsExpression}}};function ci(e,t){return typeof e!=="undefined"?e:t}function fi(e,t){if(typeof e==="undefined")return t;if(typeof t==="undefined")return e;return e+t}function hi(e,t){var r=e(t);return!r.$stateful}var di=1;var pi=2;function vi(e,t){switch(e.type){case ui.MemberExpression:if(e.computed){return false}break;case ui.UnaryExpression:return di;case ui.BinaryExpression:return e.operator!=="+"?di:false;case ui.CallExpression:return false}return undefined===t?pi:t}function gi(e,t,r){var n;var i;var a;var o=e.isPure=vi(e,r);switch(e.type){case ui.Program:n=true;Oe(e.body,function(e){gi(e.expression,t,o);n=n&&e.expression.constant});e.constant=n;break;case ui.Literal:e.constant=true;e.toWatch=[];break;case ui.UnaryExpression:gi(e.argument,t,o);e.constant=e.argument.constant;e.toWatch=e.argument.toWatch;break;case ui.BinaryExpression:gi(e.left,t,o);gi(e.right,t,o);e.constant=e.left.constant&&e.right.constant;e.toWatch=e.left.toWatch.concat(e.right.toWatch);break;case ui.LogicalExpression:gi(e.left,t,o);gi(e.right,t,o);e.constant=e.left.constant&&e.right.constant;e.toWatch=e.constant?[]:[e];break;case ui.ConditionalExpression:gi(e.test,t,o);gi(e.alternate,t,o);gi(e.consequent,t,o);e.constant=e.test.constant&&e.alternate.constant&&e.consequent.constant;e.toWatch=e.constant?[]:[e];break;case ui.Identifier:e.constant=false;e.toWatch=[e];break;case ui.MemberExpression:gi(e.object,t,o);if(e.computed){gi(e.property,t,o)}e.constant=e.object.constant&&(!e.computed||e.property.constant);e.toWatch=e.constant?[]:[e];break;case ui.CallExpression:a=e.filter?hi(t,e.callee.name):false;n=a;i=[];Oe(e.arguments,function(e){gi(e,t,o);n=n&&e.constant;i.push.apply(i,e.toWatch)});e.constant=n;e.toWatch=a?i:[e];break;case ui.AssignmentExpression:gi(e.left,t,o);gi(e.right,t,o);e.constant=e.left.constant&&e.right.constant;e.toWatch=[e];break;case ui.ArrayExpression:n=true;i=[];Oe(e.elements,function(e){gi(e,t,o);n=n&&e.constant;i.push.apply(i,e.toWatch)});e.constant=n;e.toWatch=i;break;case ui.ObjectExpression:n=true;i=[];Oe(e.properties,function(e){gi(e.value,t,o);n=n&&e.value.constant;i.push.apply(i,e.value.toWatch);if(e.computed){gi(e.key,t,false);n=n&&e.key.constant;i.push.apply(i,e.key.toWatch)}});e.constant=n;e.toWatch=i;break;case ui.ThisExpression:e.constant=false;e.toWatch=[];break;case ui.LocalsExpression:e.constant=false;e.toWatch=[];break}}function mi(e){if(e.length!==1)return;var t=e[0].expression;var r=t.toWatch;if(r.length!==1)return r;return r[0]!==t?r:undefined}function _i(e){return e.type===ui.Identifier||e.type===ui.MemberExpression}function yi(e){if(e.body.length===1&&_i(e.body[0].expression)){return{type:ui.AssignmentExpression,left:e.body[0].expression,right:{type:ui.NGValueParameter},operator:"="}}}function bi(e){return e.body.length===0||e.body.length===1&&(e.body[0].expression.type===ui.Literal||e.body[0].expression.type===ui.ArrayExpression||e.body[0].expression.type===ui.ObjectExpression)}function wi(e){return e.constant}function Si(e){this.$filter=e}Si.prototype={compile:function(e){var i=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]};gi(e,i.$filter);var t="";var r;this.stage="assign";if(r=yi(e)){this.state.computing="assign";var n=this.nextId();this.recurse(r,n);this.return_(n);t="fn.assign="+this.generateFunction("assign","s,v,l")}var a=mi(e.body);i.stage="inputs";Oe(a,function(e,t){var r="fn"+t;i.state[r]={vars:[],body:[],own:{}};i.state.computing=r;var n=i.nextId();i.recurse(e,n);i.return_(n);i.state.inputs.push({name:r,isPure:e.isPure});e.watchId=t});this.state.computing="fn";this.stage="main";this.recurse(e);var o='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+t+this.watchFns()+"return fn;";var s=new Function("$filter","getStringValue","ifDefined","plus",o)(this.$filter,ai,ci,fi);this.state=this.stage=undefined;return s},USE:"use",STRICT:"strict",watchFns:function(){var t=[];var e=this.state.inputs;var r=this;Oe(e,function(e){t.push("var "+e.name+"="+r.generateFunction(e.name,"s"));if(e.isPure){t.push(e.name,".isPure="+JSON.stringify(e.isPure)+";")}});if(e.length){t.push("fn.inputs=["+e.map(function(e){return e.name}).join(",")+"];")}return t.join("")},generateFunction:function(e,t){return"function("+t+"){"+this.varsPrefix(e)+this.body(e)+"};"},filterPrefix:function(){var r=[];var n=this;Oe(this.state.filters,function(e,t){r.push(e+"=$filter("+n.escape(t)+")")});if(r.length)return"var "+r.join(",")+";";return""},varsPrefix:function(e){return this.state[e].vars.length?"var "+this.state[e].vars.join(",")+";":""},body:function(e){return this.state[e].body.join("")},recurse:function(r,t,e,n,i,a){var o,s,l=this,u,c,f;n=n||Ee;if(!a&&j(r.watchId)){t=t||this.nextId();this.if_("i",this.lazyAssign(t,this.computedMember("i",r.watchId)),this.lazyRecurse(r,t,e,n,i,true));return}switch(r.type){case ui.Program:Oe(r.body,function(e,t){l.recurse(e.expression,undefined,undefined,function(e){s=e});if(t!==r.body.length-1){l.current().body.push(s,";")}else{l.return_(s)}});break;case ui.Literal:c=this.escape(r.value);this.assign(t,c);n(t||c);break;case ui.UnaryExpression:this.recurse(r.argument,undefined,undefined,function(e){s=e});c=r.operator+"("+this.ifDefined(s,0)+")";this.assign(t,c);n(c);break;case ui.BinaryExpression:this.recurse(r.left,undefined,undefined,function(e){o=e});this.recurse(r.right,undefined,undefined,function(e){s=e});if(r.operator==="+"){c=this.plus(o,s)}else if(r.operator==="-"){c=this.ifDefined(o,0)+r.operator+this.ifDefined(s,0)}else{c="("+o+")"+r.operator+"("+s+")"}this.assign(t,c);n(c);break;case ui.LogicalExpression:t=t||this.nextId();l.recurse(r.left,t);l.if_(r.operator==="&&"?t:l.not(t),l.lazyRecurse(r.right,t));n(t);break;case ui.ConditionalExpression:t=t||this.nextId();l.recurse(r.test,t);l.if_(t,l.lazyRecurse(r.alternate,t),l.lazyRecurse(r.consequent,t));n(t);break;case ui.Identifier:t=t||this.nextId();if(e){e.context=l.stage==="inputs"?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",r.name)+"?l:s");e.computed=false;e.name=r.name}l.if_(l.stage==="inputs"||l.not(l.getHasOwnProperty("l",r.name)),function(){l.if_(l.stage==="inputs"||"s",function(){if(i&&i!==1){l.if_(l.isNull(l.nonComputedMember("s",r.name)),l.lazyAssign(l.nonComputedMember("s",r.name),"{}"))}l.assign(t,l.nonComputedMember("s",r.name))})},t&&l.lazyAssign(t,l.nonComputedMember("l",r.name)));n(t);break;case ui.MemberExpression:o=e&&(e.context=this.nextId())||this.nextId();t=t||this.nextId();l.recurse(r.object,o,undefined,function(){l.if_(l.notNull(o),function(){if(r.computed){s=l.nextId();l.recurse(r.property,s);l.getStringValue(s);if(i&&i!==1){l.if_(l.not(l.computedMember(o,s)),l.lazyAssign(l.computedMember(o,s),"{}"))}c=l.computedMember(o,s);l.assign(t,c);if(e){e.computed=true;e.name=s}}else{if(i&&i!==1){l.if_(l.isNull(l.nonComputedMember(o,r.property.name)),l.lazyAssign(l.nonComputedMember(o,r.property.name),"{}"))}c=l.nonComputedMember(o,r.property.name);l.assign(t,c);if(e){e.computed=false;e.name=r.property.name}}},function(){l.assign(t,"undefined")});n(t)},!!i);break;case ui.CallExpression:t=t||this.nextId();if(r.filter){s=l.filter(r.callee.name);u=[];Oe(r.arguments,function(e){var t=l.nextId();l.recurse(e,t);u.push(t)});c=s+"("+u.join(",")+")";l.assign(t,c);n(t)}else{s=l.nextId();o={};u=[];l.recurse(r.callee,s,o,function(){l.if_(l.notNull(s),function(){Oe(r.arguments,function(e){l.recurse(e,r.constant?undefined:l.nextId(),undefined,function(e){u.push(e)})});if(o.name){c=l.member(o.context,o.name,o.computed)+"("+u.join(",")+")"}else{c=s+"("+u.join(",")+")"}l.assign(t,c)},function(){l.assign(t,"undefined")});n(t)})}break;case ui.AssignmentExpression:s=this.nextId();o={};this.recurse(r.left,undefined,o,function(){l.if_(l.notNull(o.context),function(){l.recurse(r.right,s);c=l.member(o.context,o.name,o.computed)+r.operator+s;l.assign(t,c);n(t||c)})},1);break;case ui.ArrayExpression:u=[];Oe(r.elements,function(e){l.recurse(e,r.constant?undefined:l.nextId(),undefined,function(e){u.push(e)})});c="["+u.join(",")+"]";this.assign(t,c);n(t||c);break;case ui.ObjectExpression:u=[];f=false;Oe(r.properties,function(e){if(e.computed){f=true}});if(f){t=t||this.nextId();this.assign(t,"{}");Oe(r.properties,function(e){if(e.computed){o=l.nextId();l.recurse(e.key,o)}else{o=e.key.type===ui.Identifier?e.key.name:""+e.key.value}s=l.nextId();l.recurse(e.value,s);l.assign(l.member(t,o,e.computed),s)})}else{Oe(r.properties,function(t){l.recurse(t.value,r.constant?undefined:l.nextId(),undefined,function(e){u.push(l.escape(t.key.type===ui.Identifier?t.key.name:""+t.key.value)+":"+e)})});c="{"+u.join(",")+"}";this.assign(t,c)}n(t||c);break;case ui.ThisExpression:this.assign(t,"s");n(t||"s");break;case ui.LocalsExpression:this.assign(t,"l");n(t||"l");break;case ui.NGValueParameter:this.assign(t,"v");n(t||"v");break}},getHasOwnProperty:function(e,t){var r=e+"."+t;var n=this.current().own;if(!n.hasOwnProperty(r)){n[r]=this.nextId(false,e+"&&("+this.escape(t)+" in "+e+")")}return n[r]},assign:function(e,t){if(!e)return;this.current().body.push(e,"=",t,";");return e},filter:function(e){if(!this.state.filters.hasOwnProperty(e)){this.state.filters[e]=this.nextId(true)}return this.state.filters[e]},ifDefined:function(e,t){return"ifDefined("+e+","+this.escape(t)+")"},plus:function(e,t){return"plus("+e+","+t+")"},return_:function(e){this.current().body.push("return ",e,";")},if_:function(e,t,r){if(e===true){t()}else{var n=this.current().body;n.push("if(",e,"){");t();n.push("}");if(r){n.push("else{");r();n.push("}")}}},not:function(e){return"!("+e+")"},isNull:function(e){return e+"==null"},notNull:function(e){return e+"!=null"},nonComputedMember:function(e,t){var r=/^[$_a-zA-Z][$_a-zA-Z0-9]*$/;var n=/[^$_a-zA-Z0-9]/g;if(r.test(t)){return e+"."+t}else{return e+'["'+t.replace(n,this.stringEscapeFn)+'"]'}},computedMember:function(e,t){return e+"["+t+"]"},member:function(e,t,r){if(r)return this.computedMember(e,t);return this.nonComputedMember(e,t)},getStringValue:function(e){this.assign(e,"getStringValue("+e+")")},lazyRecurse:function(e,t,r,n,i,a){var o=this;return function(){o.recurse(e,t,r,n,i,a)}},lazyAssign:function(e,t){var r=this;return function(){r.assign(e,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)},escape:function(e){if(je(e))return"'"+e.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(b(e))return e.toString();if(e===true)return"true";if(e===false)return"false";if(e===null)return"null";if(typeof e==="undefined")return"undefined";throw ni("esc","IMPOSSIBLE")},nextId:function(e,t){var r="v"+this.state.nextId++;if(!e){this.current().vars.push(r+(t?"="+t:""))}return r},current:function(){return this.state[this.state.computing]}};function Ci(e){this.$filter=e}Ci.prototype={compile:function(e){var n=this;gi(e,n.$filter);var t;var i;if(t=yi(e)){i=this.recurse(t)}var r=mi(e.body);var a;if(r){a=[];Oe(r,function(e,t){var r=n.recurse(e);r.isPure=e.isPure;e.input=r;a.push(r);e.watchId=t})}var o=[];Oe(e.body,function(e){o.push(n.recurse(e.expression))});var s=e.body.length===0?Ee:e.body.length===1?o[0]:function(t,r){var n;Oe(o,function(e){n=e(t,r)});return n};if(i){s.assign=function(e,t,r){return i(e,r,t)}}if(a){s.inputs=a}return s},recurse:function(e,l,t){var o,u,r=this,c;if(e.input){return this.inputs(e.input,e.watchId)}switch(e.type){case ui.Literal:return this.value(e.value,l);case ui.UnaryExpression:u=this.recurse(e.argument);return this["unary"+e.operator](u,l);case ui.BinaryExpression:o=this.recurse(e.left);u=this.recurse(e.right);return this["binary"+e.operator](o,u,l);case ui.LogicalExpression:o=this.recurse(e.left);u=this.recurse(e.right);return this["binary"+e.operator](o,u,l);case ui.ConditionalExpression:return this["ternary?:"](this.recurse(e.test),this.recurse(e.alternate),this.recurse(e.consequent),l);case ui.Identifier:return r.identifier(e.name,l,t);case ui.MemberExpression:o=this.recurse(e.object,false,!!t);if(!e.computed){u=e.property.name}if(e.computed)u=this.recurse(e.property);return e.computed?this.computedMember(o,u,l,t):this.nonComputedMember(o,u,l,t);case ui.CallExpression:c=[];Oe(e.arguments,function(e){c.push(r.recurse(e))});if(e.filter)u=this.$filter(e.callee.name);if(!e.filter)u=this.recurse(e.callee,true);return e.filter?function(e,t,r,n){var i=[];for(var a=0;a<c.length;++a){i.push(c[a](e,t,r,n))}var o=u.apply(undefined,i,n);return l?{context:undefined,name:undefined,value:o}:o}:function(e,t,r,n){var i=u(e,t,r,n);var a;if(i.value!=null){var o=[];for(var s=0;s<c.length;++s){o.push(c[s](e,t,r,n))}a=i.value.apply(i.context,o)}return l?{value:a}:a};case ui.AssignmentExpression:o=this.recurse(e.left,true,1);u=this.recurse(e.right);return function(e,t,r,n){var i=o(e,t,r,n);var a=u(e,t,r,n);i.context[i.name]=a;return l?{value:a}:a};case ui.ArrayExpression:c=[];Oe(e.elements,function(e){c.push(r.recurse(e))});return function(e,t,r,n){var i=[];for(var a=0;a<c.length;++a){i.push(c[a](e,t,r,n))}return l?{value:i}:i};case ui.ObjectExpression:c=[];Oe(e.properties,function(e){if(e.computed){c.push({key:r.recurse(e.key),computed:true,value:r.recurse(e.value)})}else{c.push({key:e.key.type===ui.Identifier?e.key.name:""+e.key.value,computed:false,value:r.recurse(e.value)})}});return function(e,t,r,n){var i={};for(var a=0;a<c.length;++a){if(c[a].computed){i[c[a].key(e,t,r,n)]=c[a].value(e,t,r,n)}else{i[c[a].key]=c[a].value(e,t,r,n)}}return l?{value:i}:i};case ui.ThisExpression:return function(e){return l?{value:e}:e};case ui.LocalsExpression:return function(e,t){return l?{value:t}:t};case ui.NGValueParameter:return function(e,t,r){return l?{value:r}:r}}},"unary+":function(a,o){return function(e,t,r,n){var i=a(e,t,r,n);if(j(i)){i=+i}else{i=0}return o?{value:i}:i}},"unary-":function(a,o){return function(e,t,r,n){var i=a(e,t,r,n);if(j(i)){i=-i}else{i=-0}return o?{value:i}:i}},"unary!":function(a,o){return function(e,t,r,n){var i=!a(e,t,r,n);return o?{value:i}:i}},"binary+":function(s,l,u){return function(e,t,r,n){var i=s(e,t,r,n);var a=l(e,t,r,n);var o=fi(i,a);return u?{value:o}:o}},"binary-":function(s,l,u){return function(e,t,r,n){var i=s(e,t,r,n);var a=l(e,t,r,n);var o=(j(i)?i:0)-(j(a)?a:0);return u?{value:o}:o}},"binary*":function(a,o,s){return function(e,t,r,n){var i=a(e,t,r,n)*o(e,t,r,n);return s?{value:i}:i}},"binary/":function(a,o,s){return function(e,t,r,n){var i=a(e,t,r,n)/o(e,t,r,n);return s?{value:i}:i}},"binary%":function(a,o,s){return function(e,t,r,n){var i=a(e,t,r,n)%o(e,t,r,n);return s?{value:i}:i}},"binary===":function(a,o,s){return function(e,t,r,n){var i=a(e,t,r,n)===o(e,t,r,n);return s?{value:i}:i}},"binary!==":function(a,o,s){return function(e,t,r,n){var i=a(e,t,r,n)!==o(e,t,r,n);return s?{value:i}:i}},"binary==":function(a,o,s){return function(e,t,r,n){var i=a(e,t,r,n)==o(e,t,r,n);return s?{value:i}:i}},"binary!=":function(a,o,s){return function(e,t,r,n){var i=a(e,t,r,n)!=o(e,t,r,n);return s?{value:i}:i}},"binary<":function(a,o,s){return function(e,t,r,n){var i=a(e,t,r,n)<o(e,t,r,n);return s?{value:i}:i}},"binary>":function(a,o,s){return function(e,t,r,n){var i=a(e,t,r,n)>o(e,t,r,n);return s?{value:i}:i}},"binary<=":function(a,o,s){return function(e,t,r,n){var i=a(e,t,r,n)<=o(e,t,r,n);return s?{value:i}:i}},"binary>=":function(a,o,s){return function(e,t,r,n){var i=a(e,t,r,n)>=o(e,t,r,n);return s?{value:i}:i}},"binary&&":function(a,o,s){return function(e,t,r,n){var i=a(e,t,r,n)&&o(e,t,r,n);return s?{value:i}:i}},"binary||":function(a,o,s){return function(e,t,r,n){var i=a(e,t,r,n)||o(e,t,r,n);return s?{value:i}:i}},"ternary?:":function(a,o,s,l){return function(e,t,r,n){var i=a(e,t,r,n)?o(e,t,r,n):s(e,t,r,n);return l?{value:i}:i}},value:function(e,t){return function(){return t?{context:undefined,name:undefined,value:e}:e}},identifier:function(o,s,l){return function(e,t,r,n){var i=t&&o in t?t:e;if(l&&l!==1&&i&&i[o]==null){i[o]={}}var a=i?i[o]:undefined;if(s){return{context:i,name:o,value:a}}else{return a}}},computedMember:function(s,l,u,c){return function(e,t,r,n){var i=s(e,t,r,n);var a;var o;if(i!=null){a=l(e,t,r,n);a=ai(a);if(c&&c!==1){if(i&&!i[a]){i[a]={}}}o=i[a]}if(u){return{context:i,name:a,value:o}}else{return o}}},nonComputedMember:function(o,s,l,u){return function(e,t,r,n){var i=o(e,t,r,n);if(u&&u!==1){if(i&&i[s]==null){i[s]={}}}var a=i!=null?i[s]:undefined;if(l){return{context:i,name:s,value:a}}else{return a}}},inputs:function(i,a){return function(e,t,r,n){if(n)return n[a];return i(e,t,r)}}};function Oi(e,t,r){this.ast=new ui(e,r);this.astCompiler=r.csp?new Ci(t):new Si(t)}Oi.prototype={constructor:Oi,parse:function(e){var t=this.getAst(e);var r=this.astCompiler.compile(t.ast);r.literal=bi(t.ast);r.constant=wi(t.ast);r.oneTime=t.oneTime;return r},getAst:function(e){var t=false;e=e.trim();if(e.charAt(0)===":"&&e.charAt(1)===":"){t=true;e=e.substring(2)}return{ast:this.ast.ast(e),oneTime:t}}};function xi(e){return Pe(e.valueOf)?e.valueOf():ii.call(e)}function Ti(){var c=Xe();var f={true:true,false:false,null:null,undefined:undefined};var v,g;this.addLiteral=function(e,t){f[e]=t};this.setIdentifierFns=function(e,t){v=e;g=t;return this};this.$get=["$filter",function(o){var e=Y().noUnsafeEval;var s={csp:e,literals:W(f),isIdentifierStart:Pe(v)&&v,isIdentifierContinue:Pe(g)&&g};t.$$getAst=r;return t;function t(e,t){var r,n;switch(typeof e){case"string":e=e.trim();n=e;r=c[n];if(!r){var i=new li(s);var a=new Oi(i,o,s);r=a.parse(e);c[n]=p(r)}return l(r,t);case"function":return l(e,t);default:return l(Ee,t)}}function r(e){var t=new li(s);var r=new Oi(t,o,s);return r.getAst(e).ast}function h(e,t,r){if(e==null||t==null){return e===t}if(typeof e==="object"){e=xi(e);if(typeof e==="object"&&!r){return false}}return e===t||e!==e&&t!==t}function n(e,t,r,o,n){var s=o.inputs;var l;if(s.length===1){var i=h;s=s[0];return e.$watch(function e(t){var r=s(t);if(!h(r,i,s.isPure)){l=o(t,undefined,undefined,[r]);i=r&&xi(r)}return l},t,r,n)}var u=[];var c=[];for(var a=0,f=s.length;a<f;a++){u[a]=h;c[a]=null}return e.$watch(function e(t){var r=false;for(var n=0,i=s.length;n<i;n++){var a=s[n](t);if(r||(r=!h(a,u[n],s[n].isPure))){c[n]=a;u[n]=a&&xi(a)}}if(r){l=o(t,undefined,undefined,c)}return l},t,r,n)}function i(e,t,r,n,i){var a=n.literal?d:j;var o,s;var l=n.$$intercepted||n;var u=n.$$interceptor||Me;var c=n.inputs&&!l.inputs;h.literal=n.literal;h.constant=n.constant;h.inputs=n.inputs;p(h);o=e.$watch(h,t,r,i);return o;function f(){if(a(s)){o()}}function h(e,t,r,n){s=c&&n?n[0]:l(e,t,r,n);if(a(s)){e.$$postDigest(f)}return u(s)}}function d(e){var t=true;Oe(e,function(e){if(!j(e))t=false});return t}function a(e,t,r,n){var i=e.$watch(function e(t){i();return n(t)},t,r);return i}function p(e){if(e.constant){e.$$watchDelegate=a}else if(e.oneTime){e.$$watchDelegate=i}else if(e.inputs){e.$$watchDelegate=n}return e}function u(t,r){function e(e){return r(t(e))}e.$stateful=t.$stateful||r.$stateful;e.$$pure=t.$$pure&&r.$$pure;return e}function l(o,s){if(!s)return o;if(o.$$interceptor){s=u(o.$$interceptor,s);o=o.$$intercepted}var l=false;var e=function e(t,r,n,i){var a=l&&i?i[0]:o(t,r,n,i);return s(a)};e.$$intercepted=o;e.$$interceptor=s;e.literal=o.literal;e.oneTime=o.oneTime;e.constant=o.constant;if(!s.$stateful){l=!o.inputs;e.inputs=o.inputs?o.inputs:[o];if(!s.$$pure){e.inputs=e.inputs.map(function(r){if(r.isPure===pi){return function e(t){return r(t)}}return r})}}return p(e)}}]}function Ei(){var r=true;this.$get=["$rootScope","$exceptionHandler",function(t,e){return Ai(function(e){t.$evalAsync(e)},e,r)}];this.errorOnUnhandledRejections=function(e){if(j(e)){r=e;return this}else{return r}}}function Mi(){var r=true;this.$get=["$browser","$exceptionHandler",function(t,e){return Ai(function(e){t.defer(e)},e,r)}];this.errorOnUnhandledRejections=function(e){if(j(e)){r=e;return this}else{return r}}}function Ai(o,s,l){var i=L("$q",TypeError);var u=0;var r=[];function n(){return new e}function e(){var t=this.promise=new a;this.resolve=function(e){h(t,e)};this.reject=function(e){p(t,e)};this.notify=function(e){g(t,e)}}function a(){this.$$state={status:0}}xe(a.prototype,{then:function(e,t,r){if(Ae(e)&&Ae(t)&&Ae(r)){return this}var n=new a;this.$$state.pending=this.$$state.pending||[];this.$$state.pending.push([n,e,t,r]);if(this.$$state.status>0)f(this.$$state);return n},catch:function(e){return this.then(null,e)},finally:function(t,e){return this.then(function(e){return _(e,b,t)},function(e){return _(e,m,t)},e)}});function t(e){var t,r,n;n=e.pending;e.processScheduled=false;e.pending=undefined;try{for(var i=0,a=n.length;i<a;++i){ji(e);r=n[i][0];t=n[i][e.status];try{if(Pe(t)){h(r,t(e.value))}else if(e.status===1){h(r,e.value)}else{p(r,e.value)}}catch(e){p(r,e);if(e&&e.$$passToExceptionHandler===true){s(e)}}}}finally{--u;if(l&&u===0){o(c)}}}function c(){while(!u&&r.length){var e=r.shift();if(!ki(e)){ji(e);var t="Possibly unhandled rejection: "+st(e.value);if(De(e.value)){s(e.value,t)}else{s(t)}}}}function f(e){if(l&&!e.pending&&e.status===2&&!ki(e)){if(u===0&&r.length===0){o(c)}r.push(e)}if(e.processScheduled||!e.pending)return;e.processScheduled=true;++u;o(function(){t(e)})}function h(e,t){if(e.$$state.status)return;if(t===e){v(e,i("qcycle","Expected promise to be resolved with value other than itself '{0}'",t))}else{d(e,t)}}function d(t,e){var r;var n=false;try{if(ke(e)||Pe(e))r=e.then;if(Pe(r)){t.$$state.status=-1;r.call(e,i,a,o)}else{t.$$state.value=e;t.$$state.status=1;f(t.$$state)}}catch(e){a(e)}function i(e){if(n)return;n=true;d(t,e)}function a(e){if(n)return;n=true;v(t,e)}function o(e){g(t,e)}}function p(e,t){if(e.$$state.status)return;v(e,t)}function v(e,t){e.$$state.value=t;e.$$state.status=2;f(e.$$state)}function g(e,i){var a=e.$$state.pending;if(e.$$state.status<=0&&a&&a.length){o(function(){var e,t;for(var r=0,n=a.length;r<n;r++){t=a[r][0];e=a[r][3];try{g(t,Pe(e)?e(i):i)}catch(e){s(e)}}})}}function m(e){var t=new a;p(t,e);return t}function _(e,t,r){var n=null;try{if(Pe(r))n=r()}catch(e){return m(e)}if(P(n)){return n.then(function(){return t(e)},m)}else{return t(e)}}function y(e,t,r,n){var i=new a;h(i,e);return i.then(t,r,n)}var b=y;function w(e){var r=new a,n=0,i=Ie(e)?[]:{};Oe(e,function(e,t){n++;y(e).then(function(e){i[t]=e;if(!--n)h(r,i)},function(e){p(r,e)})});if(n===0){h(r,i)}return r}function S(e){var t=n();Oe(e,function(e){y(e).then(t.resolve,t.reject)});return t.promise}function C(e){if(!Pe(e)){throw i("norslvr","Expected resolverFn, got '{0}'",e)}var t=new a;function r(e){h(t,e)}function n(e){p(t,e)}e(r,n);return t}C.prototype=a.prototype;C.defer=n;C.reject=m;C.when=y;C.resolve=b;C.all=w;C.race=S;return C}function ki(e){return!!e.pur}function ji(e){e.pur=true}function Ii(e){ji(e.$$state)}function Di(){this.$get=["$window","$timeout",function(e,r){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame;var i=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame;var t=!!n;var a=t?function(e){var t=n(e);return function(){i(t)}}:function(e){var t=r(e,16.66,false);return function(){r.cancel(t)}};a.supported=t;return a}]}function Pi(){var T=10;var E=L("$rootScope");var M=null;var A=null;this.digestTtl=function(e){if(arguments.length){T=e}return T};function l(e){function t(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$id=p();this.$$ChildScope=null;this.$$suspended=false}t.prototype=e;return t}this.$get=["$exceptionHandler","$parse","$browser",function(v,g,m){function n(e){e.currentScope.$$destroyed=true}function r(e){if(we===9){if(e.$$childHead){r(e.$$childHead)}if(e.$$nextSibling){r(e.$$nextSibling)}}e.$parent=e.$$nextSibling=e.$$prevSibling=e.$$childHead=e.$$childTail=e.$root=e.$$watchers=null}function i(){this.$id=p();this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this.$root=this;this.$$destroyed=false;this.$$suspended=false;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$$isolateBindings=null}i.prototype={constructor:i,$new:function(e,t){var r;t=t||this;if(e){r=new i;r.$root=this.$root}else{if(!this.$$ChildScope){this.$$ChildScope=l(this)}r=new this.$$ChildScope}r.$parent=t;r.$$prevSibling=t.$$childTail;if(t.$$childHead){t.$$childTail.$$nextSibling=r;t.$$childTail=r}else{t.$$childHead=t.$$childTail=r}if(e||t!==this)r.$on("$destroy",n);return r},$watch:function(e,t,r,n){var i=g(e);var a=Pe(t)?t:Ee;if(i.$$watchDelegate){return i.$$watchDelegate(this,a,r,i,e)}var o=this,s=o.$$watchers,l={fn:a,last:O,get:i,exp:n||e,eq:!!r};M=null;if(!s){s=o.$$watchers=[];s.$$digestWatchIndex=-1}s.unshift(l);s.$$digestWatchIndex++;u(this,1);return function e(){var t=Fe(s,l);if(t>=0){u(o,-1);if(t<s.$$digestWatchIndex){s.$$digestWatchIndex--}}M=null}},$watchGroup:function(t,i){var a=new Array(t.length);var o=new Array(t.length);var n=[];var s=this;var l=false;var r=true;if(!t.length){var u=true;s.$evalAsync(function(){if(u)i(o,o,s)});return function e(){u=false}}if(t.length===1){return this.$watch(t[0],function e(t,r,n){o[0]=t;a[0]=r;i(o,t===r?o:a,n)})}Oe(t,function(e,r){var t=s.$watch(e,function e(t){o[r]=t;if(!l){l=true;s.$evalAsync(c)}});n.push(t)});function c(){l=false;try{if(r){r=false;i(o,o,s)}else{i(o,a,s)}}finally{for(var e=0;e<t.length;e++){a[e]=o[e]}}}return function e(){while(n.length){n.shift()()}}},$watchCollection:function(e,r){d.$$pure=g(e).literal;d.$stateful=!d.$$pure;var n=this;var s;var l;var i;var a=r.length>1;var u=0;var t=g(e,d);var c=[];var f={};var o=true;var h=0;function d(e){s=e;var t,r,n,i,a;if(Ae(s))return;if(!ke(s)){if(l!==s){l=s;u++}}else if(N(s)){if(l!==c){l=c;h=l.length=0;u++}t=s.length;if(h!==t){u++;l.length=h=t}for(var o=0;o<t;o++){a=l[o];i=s[o];n=a!==a&&i!==i;if(!n&&a!==i){u++;l[o]=i}}}else{if(l!==f){l=f={};h=0;u++}t=0;for(r in s){if(ye.call(s,r)){t++;i=s[r];a=l[r];if(r in l){n=a!==a&&i!==i;if(!n&&a!==i){u++;l[r]=i}}else{h++;l[r]=i;u++}}}if(h>t){u++;for(r in l){if(!ye.call(s,r)){h--;delete l[r]}}}}return u}function p(){if(o){o=false;r(s,s,n)}else{r(s,i,n)}if(a){if(!ke(s)){i=s}else if(N(s)){i=new Array(s.length);for(var e=0;e<s.length;e++){i[e]=s[e]}}else{i={};for(var t in s){if(ye.call(s,t)){i[t]=s[t]}}}}}return this.$watch(t,p)},$digest:function(){var e,t,r,n,i,a,o,s=T,l,u,c=y.length?_:this,f=[],h,d;S("$digest");m.$$checkUrlChange();if(this===_&&A!==null){m.defer.cancel(A);x()}M=null;do{o=false;u=c;for(var p=0;p<y.length;p++){try{d=y[p];n=d.fn;n(d.scope,d.locals)}catch(e){v(e)}M=null}y.length=0;e:do{if(a=!u.$$suspended&&u.$$watchers){a.$$digestWatchIndex=a.length;while(a.$$digestWatchIndex--){try{e=a[a.$$digestWatchIndex];if(e){i=e.get;if((t=i(u))!==(r=e.last)&&!(e.eq?Ue(t,r):k(t)&&k(r))){o=true;M=e;e.last=e.eq?W(t,null):t;n=e.fn;n(t,r===O?t:r,u);if(s<5){h=4-s;if(!f[h])f[h]=[];f[h].push({msg:Pe(e.exp)?"fn: "+(e.exp.name||e.exp.toString()):e.exp,newVal:t,oldVal:r})}}else if(e===M){o=false;break e}}}catch(e){v(e)}}}if(!(l=!u.$$suspended&&u.$$watchersCount&&u.$$childHead||u!==c&&u.$$nextSibling)){while(u!==c&&!(l=u.$$nextSibling)){u=u.$parent}}}while(u=l);if((o||y.length)&&!s--){C();throw E("infdig","{0} $digest() iterations reached. Aborting!\n"+"Watchers fired in the last 5 iterations: {1}",T,f)}}while(o||y.length);C();while(w<b.length){try{b[w++]()}catch(e){v(e)}}b.length=w=0;m.$$checkUrlChange()},$suspend:function(){this.$$suspended=true},$isSuspended:function(){return this.$$suspended},$resume:function(){this.$$suspended=false},$destroy:function(){if(this.$$destroyed)return;var e=this.$parent;this.$broadcast("$destroy");this.$$destroyed=true;if(this===_){m.$$applicationDestroyed()}u(this,-this.$$watchersCount);for(var t in this.$$listenerCount){o(this,this.$$listenerCount[t],t)}if(e&&e.$$childHead===this)e.$$childHead=this.$$nextSibling;if(e&&e.$$childTail===this)e.$$childTail=this.$$prevSibling;if(this.$$prevSibling)this.$$prevSibling.$$nextSibling=this.$$nextSibling;if(this.$$nextSibling)this.$$nextSibling.$$prevSibling=this.$$prevSibling;this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=Ee;this.$on=this.$watch=this.$watchGroup=function(){return Ee};this.$$listeners={};this.$$nextSibling=null;r(this)},$eval:function(e,t){return g(e)(this,t)},$evalAsync:function(e,t){if(!_.$$phase&&!y.length){m.defer(function(){if(y.length){_.$digest()}},null,"$evalAsync")}y.push({scope:this,fn:g(e),locals:t})},$$postDigest:function(e){b.push(e)},$apply:function(e){try{S("$apply");try{return this.$eval(e)}finally{C()}}catch(e){v(e)}finally{try{_.$digest()}catch(e){v(e);throw e}}},$applyAsync:function(e){var t=this;if(e){a.push(r)}e=g(e);s();function r(){t.$eval(e)}},$on:function(t,r){var n=this.$$listeners[t];if(!n){this.$$listeners[t]=n=[]}n.push(r);var e=this;do{if(!e.$$listenerCount[t]){e.$$listenerCount[t]=0}e.$$listenerCount[t]++}while(e=e.$parent);var i=this;return function(){var e=n.indexOf(r);if(e!==-1){delete n[e];o(i,1,t)}}},$emit:function(e,t){var r=[],n,i=this,a=false,o={name:e,targetScope:i,stopPropagation:function(){a=true},preventDefault:function(){o.defaultPrevented=true},defaultPrevented:false},s=z([o],arguments,1),l,u;do{n=i.$$listeners[e]||r;o.currentScope=i;for(l=0,u=n.length;l<u;l++){if(!n[l]){n.splice(l,1);l--;u--;continue}try{n[l].apply(null,s)}catch(e){v(e)}}if(a){break}i=i.$parent}while(i);o.currentScope=null;return o},$broadcast:function(e,t){var r=this,n=r,i=r,a={name:e,targetScope:r,preventDefault:function(){a.defaultPrevented=true},defaultPrevented:false};if(!r.$$listenerCount[e])return a;var o=z([a],arguments,1),s,l,u;while(n=i){a.currentScope=n;s=n.$$listeners[e]||[];for(l=0,u=s.length;l<u;l++){if(!s[l]){s.splice(l,1);l--;u--;continue}try{s[l].apply(null,o)}catch(e){v(e)}}if(!(i=n.$$listenerCount[e]&&n.$$childHead||n!==r&&n.$$nextSibling)){while(n!==r&&!(i=n.$$nextSibling)){n=n.$parent}}}a.currentScope=null;return a}};var _=new i;var y=_.$$asyncQueue=[];var b=_.$$postDigestQueue=[];var a=_.$$applyAsyncQueue=[];var w=0;return _;function S(e){if(_.$$phase){throw E("inprog","{0} already in progress",_.$$phase)}_.$$phase=e}function C(){_.$$phase=null}function u(e,t){do{e.$$watchersCount+=t}while(e=e.$parent)}function o(e,t,r){do{e.$$listenerCount[r]-=t;if(e.$$listenerCount[r]===0){delete e.$$listenerCount[r]}}while(e=e.$parent)}function O(){}function x(){while(a.length){try{a.shift()()}catch(e){v(e)}}A=null}function s(){if(A===null){A=m.defer(function(){_.$apply(x)},null,"$applyAsync")}}}]}function Ri(){var a=/^\s*(https?|s?ftp|mailto|tel|file):/,o=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){if(j(e)){a=e;return this}return a};this.imgSrcSanitizationWhitelist=function(e){if(j(e)){o=e;return this}return o};this.$get=function(){return function e(t,r){var n=r?o:a;var i=ta(t&&t.trim()).href;if(i!==""&&!i.match(n)){return"unsafe:"+i}return t}}}var Li=L("$sce");var Ni={HTML:"html",CSS:"css",MEDIA_URL:"mediaUrl",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"};var $i=/_([a-z])/g;function Fi(e){return e.replace($i,_t)}function Gi(e){if(e==="self"){return e}else if(je(e)){if(e.indexOf("***")>-1){throw Li("iwcard","Illegal sequence *** in string matcher.  String: {0}",e)}e=G(e).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*");return new RegExp("^"+e+"$")}else if(x(e)){return new RegExp("^"+e.source+"$")}else{throw Li("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}}function Ui(e){var t=[];if(j(e)){Oe(e,function(e){t.push(Gi(e))})}return t}function Hi(){this.SCE_CONTEXTS=Ni;var f=["self"],h=[];this.resourceUrlWhitelist=function(e){if(arguments.length){f=Ui(e)}return f};this.resourceUrlBlacklist=function(e){if(arguments.length){h=Ui(e)}return h};this.$get=["$injector","$$sanitizeUri",function(e,n){var i=function e(t){throw Li("unsafe","Attempting to use an unsafe value in a safe context.")};if(e.has("$sanitize")){i=e.get("$sanitize")}function a(e,t){if(e==="self"){return ra(t)||na(t)}else{return!!e.exec(t.href)}}function o(e){var t=ta(e.toString());var r,n,i=false;for(r=0,n=f.length;r<n;r++){if(a(f[r],t)){i=true;break}}if(i){for(r=0,n=h.length;r<n;r++){if(a(h[r],t)){i=false;break}}}return i}function t(e){var t=function e(t){this.$$unwrapTrustedValue=function(){return t}};if(e){t.prototype=new e}t.prototype.valueOf=function e(){return this.$$unwrapTrustedValue()};t.prototype.toString=function e(){return this.$$unwrapTrustedValue().toString()};return t}var r=t(),s={};s[Ni.HTML]=t(r);s[Ni.CSS]=t(r);s[Ni.MEDIA_URL]=t(r);s[Ni.URL]=t(s[Ni.MEDIA_URL]);s[Ni.JS]=t(r);s[Ni.RESOURCE_URL]=t(s[Ni.URL]);function l(e,t){var r=s.hasOwnProperty(e)?s[e]:null;if(!r){throw Li("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t)}if(t===null||Ae(t)||t===""){return t}if(typeof t!=="string"){throw Li("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e)}return new r(t)}function u(e){if(e instanceof r){return e.$$unwrapTrustedValue()}else{return e}}function c(e,t){if(t===null||Ae(t)||t===""){return t}var r=s.hasOwnProperty(e)?s[e]:null;if(r&&t instanceof r){return t.$$unwrapTrustedValue()}if(Pe(t.$$unwrapTrustedValue)){t=t.$$unwrapTrustedValue()}if(e===Ni.MEDIA_URL||e===Ni.URL){return n(t.toString(),e===Ni.MEDIA_URL)}else if(e===Ni.RESOURCE_URL){if(o(t)){return t}else{throw Li("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}}else if(e===Ni.HTML){return i(t)}throw Li("unsafe","Attempting to use an unsafe value in a safe context.")}return{trustAs:l,getTrusted:c,valueOf:u}}]}function Wi(){var t=true;this.enabled=function(e){if(arguments.length){t=!!e}return t};this.$get=["$parse","$sceDelegate",function(i,e){if(t&&we<8){throw Li("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks "+"mode.  You can fix this by adding the text <!doctype html> to the top of your HTML "+"document.  See http://docs.angularjs.org/api/ng.$sce for more information.")}var a=at(Ni);a.isEnabled=function(){return t};a.trustAs=e.trustAs;a.getTrusted=e.getTrusted;a.valueOf=e.valueOf;if(!t){a.trustAs=a.getTrusted=function(e,t){return t};a.valueOf=Me}a.parseAs=function e(t,r){var n=i(r);if(n.literal&&n.constant){return n}else{return i(r,function(e){return a.getTrusted(t,e)})}};var n=a.parseAs,o=a.getTrusted,s=a.trustAs;Oe(Ni,function(t,e){var r=be(e);a[Fi("parse_as_"+r)]=function(e){return n(t,e)};a[Fi("get_trusted_"+r)]=function(e){return o(t,e)};a[Fi("trust_as_"+r)]=function(e){return s(t,e)}});return a}]}function Yi(){this.$get=["$window","$document",function(e,t){var r={},n=e.nw&&e.nw.process,i=!n&&e.chrome&&(e.chrome.app&&e.chrome.app.runtime||!e.chrome.app&&e.chrome.runtime&&e.chrome.runtime.id),a=!i&&e.history&&e.history.pushState,o=m((/android (\d+)/.exec(be((e.navigator||{}).userAgent))||[])[1]),s=/Boxee/i.test((e.navigator||{}).userAgent),l=t[0]||{},u=l.body&&l.body.style,c=false,f=false;if(u){c=!!("transition"in u||"webkitTransition"in u);f=!!("animation"in u||"webkitAnimation"in u)}return{history:!!(a&&!(o<4)&&!s),hasEvent:function(e){if(e==="input"&&we)return false;if(Ae(r[e])){var t=l.createElement("div");r[e]="on"+e in t}return r[e]},csp:Y(),transitions:c,animations:f,android:o}}]}function Vi(){this.$get=A(function(e){return new qi(e)})}function qi(o){var e=this;var s={};var n=[];var l=e.ALL_TASKS_TYPE="$$all$$";var u=e.DEFAULT_TASK_TYPE="$$default$$";e.completeTask=t;e.incTaskCount=r;e.notifyWhenNoPendingTasks=i;function t(e,t){t=t||u;try{e()}finally{c(t);var r=s[t];var n=s[l];if(!n||!r){var i=!n?f:h;var a;while(a=i(t)){try{a()}catch(e){o.error(e)}}}}}function c(e){e=e||u;if(s[e]){s[e]--;s[l]--}}function f(){var e=n.pop();return e&&e.cb}function h(e){for(var t=n.length-1;t>=0;--t){var r=n[t];if(r.type===e){n.splice(t,1);return r.cb}}}function r(e){e=e||u;s[e]=(s[e]||0)+1;s[l]=(s[l]||0)+1}function i(e,t){t=t||l;if(!s[t]){e()}else{n.push({type:t,cb:e})}}}var zi=L("$templateRequest");function Bi(){var c;this.httpOptions=function(e){if(e){c=e;return this}return c};this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(i,a,o,s,l){function u(t,r){u.totalPendingRequests++;if(!je(t)||Ae(a.get(t))){t=l.getTrustedResourceUrl(t)}var e=o.defaults&&o.defaults.transformResponse;if(Ie(e)){e=e.filter(function(e){return e!==yn})}else if(e===yn){e=null}return o.get(t,xe({cache:a,transformResponse:e},c)).finally(function(){u.totalPendingRequests--}).then(function(e){return a.put(t,e.data)},n);function n(e){if(!r){e=zi("tpload","Failed to load template: {0} (HTTP status: {1} {2})",t,e.status,e.statusText);i(e)}return s.reject(e)}}u.totalPendingRequests=0;return u}]}function Ki(){this.$get=["$rootScope","$browser","$location",function(t,r,n){var e={};e.findBindings=function(e,n,i){var t=e.getElementsByClassName("ng-binding");var a=[];Oe(t,function(r){var e=S.element(r).data("$binding");if(e){Oe(e,function(e){if(i){var t=new RegExp("(^|\\s)"+G(n)+"(\\s|\\||$)");if(t.test(e)){a.push(r)}}else{if(e.indexOf(n)!==-1){a.push(r)}}})}});return a};e.findModels=function(e,t,r){var n=["ng-","data-ng-","ng\\:"];for(var i=0;i<n.length;++i){var a=r?"=":"*=";var o="["+n[i]+"model"+a+'"'+t+'"]';var s=e.querySelectorAll(o);if(s.length){return s}}};e.getLocation=function(){return n.url()};e.setLocation=function(e){if(e!==n.url()){n.url(e);t.$digest()}};e.whenStable=function(e){r.notifyWhenNoOutstandingRequests(e)};return e}]}var Xi=L("$timeout");function Zi(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(l,u,c,f,h){var d={};function e(e,t,r){if(!Pe(e)){r=t;t=e;e=Ee}var n=He(arguments,3),i=j(r)&&!r,a=(i?f:c).defer(),o=a.promise,s;s=u.defer(function(){try{a.resolve(e.apply(null,n))}catch(e){a.reject(e);h(e)}finally{delete d[o.$$timeoutId]}if(!i)l.$apply()},t,"$timeout");o.$$timeoutId=s;d[s]=a;return o}e.cancel=function(e){if(!e)return false;if(!e.hasOwnProperty("$$timeoutId")){throw Xi("badprom","`$timeout.cancel()` called with a promise that was not generated by `$timeout()`.")}if(!d.hasOwnProperty(e.$$timeoutId))return false;var t=e.$$timeoutId;var r=d[t];Ii(r.promise);r.reject("canceled");delete d[t];return u.defer.cancel(t)};return e}]}var Qi=_e.document.createElement("a");var Ji=ta(_e.location.href);var ea;function ta(e){if(!je(e))return e;var t=e;if(we){Qi.setAttribute("href",t);t=Qi.href}Qi.setAttribute("href",t);return{href:Qi.href,protocol:Qi.protocol?Qi.protocol.replace(/:$/,""):"",host:Qi.host,search:Qi.search?Qi.search.replace(/^\?/,""):"",hash:Qi.hash?Qi.hash.replace(/^#/,""):"",hostname:Qi.hostname,port:Qi.port,pathname:Qi.pathname.charAt(0)==="/"?Qi.pathname:"/"+Qi.pathname}}function ra(e){return aa(e,Ji)}function na(e){return aa(e,oa())}function ia(e){var n=[Ji].concat(e.map(ta));return function e(t){var r=ta(t);return n.some(aa.bind(null,r))}}function aa(e,t){e=ta(e);t=ta(t);return e.protocol===t.protocol&&e.host===t.host}function oa(){if(_e.document.baseURI){return _e.document.baseURI}if(!ea){ea=_e.document.createElement("a");ea.href=".";ea=ea.cloneNode(false)}return ea.href}function sa(){this.$get=A(_e)}function la(e){var o=e[0]||{};var s={};var l="";function u(e){try{return e.cookie||""}catch(e){return""}}function c(t){try{return decodeURIComponent(t)}catch(e){return t}}return function(){var e,t,r,n,i;var a=u(o);if(a!==l){l=a;e=l.split("; ");s={};for(r=0;r<e.length;r++){t=e[r];n=t.indexOf("=");if(n>0){i=c(t.substring(0,n));if(Ae(s[i])){s[i]=c(t.substring(n+1))}}}}return s}}la.$inject=["$document"];function ua(){this.$get=la}ca.$inject=["$provide"];function ca(n){var i="Filter";function a(e,t){if(ke(e)){var r={};Oe(e,function(e,t){r[t]=a(t,e)});return r}else{return n.factory(e+i,t)}}this.register=a;this.$get=["$injector",function(t){return function(e){return t.get(e+i)}}];a("currency",_a);a("date",La);a("filter",fa);a("json",Na);a("limitTo",Ga);a("lowercase",$a);a("number",ya);a("orderBy",Ha);a("uppercase",Fa)}function fa(){return function(e,t,r,n){if(!N(e)){if(e==null){return e}else{throw L("filter")("notarray","Expected array but received: {0}",e)}}n=n||"$";var i=pa(t);var a;var o;switch(i){case"function":a=t;break;case"boolean":case"null":case"number":case"string":o=true;case"object":a=ha(t,r,n,o);break;default:return e}return Array.prototype.filter.call(e,a)}}function ha(t,r,n,i){var a=ke(t)&&n in t;var e;if(r===true){r=Ue}else if(!Pe(r)){r=function(e,t){if(Ae(e)){return false}if(e===null||t===null){return e===t}if(ke(t)||ke(e)&&!_(e)){return false}e=be(""+e);t=be(""+t);return e.indexOf(t)!==-1}}e=function(e){if(a&&!ke(e)){return da(e,t[n],r,n,false)}return da(e,t,r,n,i)};return e}function da(e,t,r,n,i,a){var o=pa(e);var s=pa(t);if(s==="string"&&t.charAt(0)==="!"){return!da(e,t.substring(1),r,n,i)}else if(Ie(e)){return e.some(function(e){return da(e,t,r,n,i)})}switch(o){case"object":var l;if(i){for(l in e){if(l.charAt&&l.charAt(0)!=="$"&&da(e[l],t,r,n,true)){return true}}return a?false:da(e,t,r,n,false)}else if(s==="object"){for(l in t){var u=t[l];if(Pe(u)||Ae(u)){continue}var c=l===n;var f=c?e:e[l];if(!da(f,u,r,n,c,c)){return false}}return true}else{return r(e,t)}case"function":return false;default:return r(e,t)}}function pa(e){return e===null?"null":typeof e}var va=22;var ga=".";var ma="0";_a.$inject=["$locale"];function _a(e){var i=e.NUMBER_FORMATS;return function(e,t,r){if(Ae(t)){t=i.CURRENCY_SYM}if(Ae(r)){r=i.PATTERNS[1].maxFrac}var n=!t?/\s*\u00A4\s*/g:/\u00A4/g;return e==null?e:Sa(e,i.PATTERNS[1],i.GROUP_SEP,i.DECIMAL_SEP,r).replace(n,t)}}ya.$inject=["$locale"];function ya(e){var r=e.NUMBER_FORMATS;return function(e,t){return e==null?e:Sa(e,r.PATTERNS[0],r.GROUP_SEP,r.DECIMAL_SEP,t)}}function ba(e){var t=0,r,n;var i,a,o;if((n=e.indexOf(ga))>-1){e=e.replace(ga,"")}if((i=e.search(/e/i))>0){if(n<0)n=i;n+=+e.slice(i+1);e=e.substring(0,i)}else if(n<0){n=e.length}for(i=0;e.charAt(i)===ma;i++){}if(i===(o=e.length)){r=[0];n=1}else{o--;while(e.charAt(o)===ma)o--;n-=i;r=[];for(a=0;i<=o;i++,a++){r[a]=+e.charAt(i)}}if(n>va){r=r.splice(0,va-1);t=n-1;n=1}return{d:r,e:t,i:n}}function wa(e,t,r,n){var i=e.d;var a=i.length-e.i;t=Ae(t)?Math.min(Math.max(r,a),n):+t;var o=t+e.i;var s=i[o];if(o>0){i.splice(Math.max(e.i,o));for(var l=o;l<i.length;l++){i[l]=0}}else{a=Math.max(0,a);e.i=1;i.length=Math.max(1,o=t+1);i[0]=0;for(var u=1;u<o;u++)i[u]=0}if(s>=5){if(o-1<0){for(var c=0;c>o;c--){i.unshift(0);e.i++}i.unshift(1);e.i++}else{i[o-1]++}}for(;a<Math.max(0,t);a++)i.push(0);var f=i.reduceRight(function(e,t,r,n){t=t+e;n[r]=t%10;return Math.floor(t/10)},0);if(f){i.unshift(f);e.i++}}function Sa(e,t,r,n,i){if(!(je(e)||b(e))||isNaN(e))return"";var a=!isFinite(e);var o=false;var s=Math.abs(e)+"",l="",u;if(a){l="∞"}else{u=ba(s);wa(u,i,t.minFrac,t.maxFrac);var c=u.d;var f=u.i;var h=u.e;var d=[];o=c.reduce(function(e,t){return e&&!t},true);while(f<0){c.unshift(0);f++}if(f>0){d=c.splice(f,c.length)}else{d=c;c=[0]}var p=[];if(c.length>=t.lgSize){p.unshift(c.splice(-t.lgSize,c.length).join(""))}while(c.length>t.gSize){p.unshift(c.splice(-t.gSize,c.length).join(""))}if(c.length){p.unshift(c.join(""))}l=p.join(r);if(d.length){l+=n+d.join("")}if(h){l+="e+"+h}}if(e<0&&!o){return t.negPre+l+t.negSuf}else{return t.posPre+l+t.posSuf}}function Ca(e,t,r,n){var i="";if(e<0||n&&e<=0){if(n){e=-e+1}else{e=-e;i="-"}}e=""+e;while(e.length<t)e=ma+e;if(r){e=e.substr(e.length-t)}return i+e}function Oa(r,n,i,a,o){i=i||0;return function(e){var t=e["get"+r]();if(i>0||t>-i){t+=i}if(t===0&&i===-12)t=12;return Ca(t,n,a,o)}}function xa(a,o,s){return function(e,t){var r=e["get"+a]();var n=(s?"STANDALONE":"")+(o?"SHORT":"");var i=E(n+a);return t[i][r]}}function Ta(e,t,r){var n=-1*r;var i=n>=0?"+":"";i+=Ca(Math[n>0?"floor":"ceil"](n/60),2)+Ca(Math.abs(n%60),2);return i}function Ea(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(t<=4?5:12)-t)}function Ma(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function Aa(a){return function(e){var t=Ea(e.getFullYear()),r=Ma(e);var n=+r-+t,i=1+Math.round(n/6048e5);return Ca(i,a)}}function ka(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}function ja(e,t){return e.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}function Ia(e,t){return e.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}var Da={yyyy:Oa("FullYear",4,0,false,true),yy:Oa("FullYear",2,0,true,true),y:Oa("FullYear",1,0,false,true),MMMM:xa("Month"),MMM:xa("Month",true),MM:Oa("Month",2,1),M:Oa("Month",1,1),LLLL:xa("Month",false,true),dd:Oa("Date",2),d:Oa("Date",1),HH:Oa("Hours",2),H:Oa("Hours",1),hh:Oa("Hours",2,-12),h:Oa("Hours",1,-12),mm:Oa("Minutes",2),m:Oa("Minutes",1),ss:Oa("Seconds",2),s:Oa("Seconds",1),sss:Oa("Milliseconds",3),EEEE:xa("Day"),EEE:xa("Day",true),a:ka,Z:Ta,ww:Aa(2),w:Aa(1),G:ja,GG:ja,GGG:ja,GGGG:Ia};var Pa=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,Ra=/^-?\d+$/;La.$inject=["$locale"];function La(l){var f=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;function u(e){var t;if(t=e.match(f)){var r=new Date(0),n=0,i=0,a=t[8]?r.setUTCFullYear:r.setFullYear,o=t[8]?r.setUTCHours:r.setHours;if(t[9]){n=m(t[9]+t[10]);i=m(t[9]+t[11])}a.call(r,m(t[1]),m(t[2])-1,m(t[3]));var s=m(t[4]||0)-n;var l=m(t[5]||0)-i;var u=m(t[6]||0);var c=Math.round(parseFloat("0."+(t[7]||0))*1e3);o.call(r,s,l,u,c);return r}return e}return function(t,e,r){var n="",i=[],a,o;e=e||"mediumDate";e=l.DATETIME_FORMATS[e]||e;if(je(t)){t=Ra.test(t)?m(t):u(t)}if(b(t)){t=new Date(t)}if(!w(t)||!isFinite(t.getTime())){return t}while(e){o=Pa.exec(e);if(o){i=z(i,o,1);e=i.pop()}else{i.push(e);e=null}}var s=t.getTimezoneOffset();if(r){s=Q(r,s);t=ee(t,r,true)}Oe(i,function(e){a=Da[e];n+=a?a(t,l.DATETIME_FORMATS,s):e==="''"?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return n}}function Na(){return function(e,t){if(Ae(t)){t=2}return K(e,t)}}var $a=A(be);var Fa=A(E);function Ga(){return function(e,t,r){if(Math.abs(Number(t))===Infinity){t=Number(t)}else{t=m(t)}if(k(t))return e;if(b(e))e=e.toString();if(!N(e))return e;r=!r||isNaN(r)?0:m(r);r=r<0?Math.max(0,e.length+r):r;if(t>=0){return Ua(e,r,r+t)}else{if(r===0){return Ua(e,t,e.length)}else{return Ua(e,Math.max(0,r+t),r)}}}}function Ua(e,t,r){if(je(e))return e.slice(t,r);return o.call(e,t,r)}Ha.$inject=["$parse"];function Ha(i){return function(e,t,r,n){if(e==null)return e;if(!N(e)){throw L("orderBy")("notarray","Expected array but received: {0}",e)}if(!Ie(t)){t=[t]}if(t.length===0){t=["+"]}var a=c(t);var o=r?-1:1;var s=Pe(n)?n:h;var i=Array.prototype.map.call(e,l);i.sort(u);e=i.map(function(e){return e.value});return e;function l(t,r){return{value:t,tieBreaker:{value:r,type:"number",index:r},predicateValues:a.map(function(e){return f(e.get(t),r)})}}function u(e,t){for(var r=0,n=a.length;r<n;r++){var i=s(e.predicateValues[r],t.predicateValues[r]);if(i){return i*a[r].descending*o}}return(s(e.tieBreaker,t.tieBreaker)||h(e.tieBreaker,t.tieBreaker))*o}};function c(e){return e.map(function(e){var t=1,r=Me;if(Pe(e)){r=e}else if(je(e)){if(e.charAt(0)==="+"||e.charAt(0)==="-"){t=e.charAt(0)==="-"?-1:1;e=e.substring(1)}if(e!==""){r=i(e);if(r.constant){var n=r();r=function(e){return e[n]}}}}return{get:r,descending:t}})}function t(e){switch(typeof e){case"number":case"boolean":case"string":return true;default:return false}}function n(e){if(Pe(e.valueOf)){e=e.valueOf();if(t(e))return e}if(_(e)){e=e.toString();if(t(e))return e}return e}function f(e,t){var r=typeof e;if(e===null){r="null"}else if(r==="object"){e=n(e)}return{value:e,type:r,index:t}}function h(e,t){var r=0;var n=e.type;var i=t.type;if(n===i){var a=e.value;var o=t.value;if(n==="string"){a=a.toLowerCase();o=o.toLowerCase()}else if(n==="object"){if(ke(a))a=e.index;if(ke(o))o=t.index}if(a!==o){r=a<o?-1:1}}else{r=n==="undefined"?1:i==="undefined"?-1:n==="null"?1:i==="null"?-1:n<i?-1:1}return r}}function Wa(e){if(Pe(e)){e={link:e}}e.restrict=e.restrict||"AC";return A(e)}var Ya=A({restrict:"E",compile:function(e,t){if(!t.href&&!t.xlinkHref){return function(e,t){if(t[0].nodeName.toLowerCase()!=="a")return;var r=Ce.call(t.prop("href"))==="[object SVGAnimatedString]"?"xlink:href":"href";t.on("click",function(e){if(!t.attr(r)){e.preventDefault()}})}}}});var Va={};Oe(Qt,function(e,n){if(e==="multiple")return;function i(e,t,r){e.$watch(r[a],function e(t){r.$set(n,!!t)})}var a=Xr("ng-"+n);var t=i;if(e==="checked"){t=function(e,t,r){if(r.ngModel!==r[a]){i(e,t,r)}}}Va[a]=function(){return{restrict:"A",priority:100,link:t}}});Oe(er,function(e,i){Va[i]=function(){return{priority:100,link:function(e,t,r){if(i==="ngPattern"&&r.ngPattern.charAt(0)==="/"){var n=r.ngPattern.match(a);if(n){r.$set("ngPattern",new RegExp(n[1],n[2]));return}}e.$watch(r[i],function e(t){r.$set(i,t)})}}}});Oe(["src","srcset","href"],function(a){var o=Xr("ng-"+a);Va[o]=function(){return{priority:99,link:function(e,t,r){var n=a,i=a;if(a==="href"&&Ce.call(t.prop("href"))==="[object SVGAnimatedString]"){i="xlinkHref";r.$attr[i]="xlink:href";n=null}r.$observe(o,function(e){if(!e){if(a==="href"){r.$set(i,null)}return}r.$set(i,e);if(we&&n)t.prop(n,r[i])})}}}});var qa={$addControl:Ee,$getControls:A([]),$$renameControl:Ka,$removeControl:Ee,$setValidity:Ee,$setDirty:Ee,$setPristine:Ee,$setSubmitted:Ee,$$setSubmitted:Ee},za="ng-pending",Ba="ng-submitted";function Ka(e,t){e.$name=t}Xa.$inject=["$element","$attrs","$scope","$animate","$interpolate"];function Xa(e,t,r,n,i){this.$$controls=[];this.$error={};this.$$success={};this.$pending=undefined;this.$name=i(t.name||t.ngForm||"")(r);this.$dirty=false;this.$pristine=true;this.$valid=true;this.$invalid=false;this.$submitted=false;this.$$parentForm=qa;this.$$element=e;this.$$animate=n;eo(this)}Xa.prototype={$rollbackViewValue:function(){Oe(this.$$controls,function(e){e.$rollbackViewValue()})},$commitViewValue:function(){Oe(this.$$controls,function(e){e.$commitViewValue()})},$addControl:function(e){ze(e.$name,"input");this.$$controls.push(e);if(e.$name){this[e.$name]=e}e.$$parentForm=this},$getControls:function(){return at(this.$$controls)},$$renameControl:function(e,t){var r=e.$name;if(this[r]===e){delete this[r]}this[t]=e;e.$name=t},$removeControl:function(r){if(r.$name&&this[r.$name]===r){delete this[r.$name]}Oe(this.$pending,function(e,t){this.$setValidity(t,null,r)},this);Oe(this.$error,function(e,t){this.$setValidity(t,null,r)},this);Oe(this.$$success,function(e,t){this.$setValidity(t,null,r)},this);Fe(this.$$controls,r);r.$$parentForm=qa},$setDirty:function(){this.$$animate.removeClass(this.$$element,is);this.$$animate.addClass(this.$$element,as);this.$dirty=true;this.$pristine=false;this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,is,as+" "+Ba);this.$dirty=false;this.$pristine=true;this.$submitted=false;Oe(this.$$controls,function(e){e.$setPristine()})},$setUntouched:function(){Oe(this.$$controls,function(e){e.$setUntouched()})},$setSubmitted:function(){var e=this;while(e.$$parentForm&&e.$$parentForm!==qa){e=e.$$parentForm}e.$$setSubmitted()},$$setSubmitted:function(){this.$$animate.addClass(this.$$element,Ba);this.$submitted=true;Oe(this.$$controls,function(e){if(e.$$setSubmitted){e.$$setSubmitted()}})}};to({clazz:Xa,set:function(e,t,r){var n=e[t];if(!n){e[t]=[r]}else{var i=n.indexOf(r);if(i===-1){n.push(r)}}},unset:function(e,t,r){var n=e[t];if(!n){return}Fe(n,r);if(n.length===0){delete e[t]}}});var Za=function(n){return["$timeout","$parse",function(c,t){var e={name:"form",restrict:n?"EAC":"E",require:["form","^^?form"],controller:Xa,compile:function e(t,r){t.addClass(is).addClass(rs);var u=r.name?"name":n&&r.ngForm?"ngForm":false;return{pre:function e(t,r,n,i){var a=i[0];if(!("action"in n)){var o=function(e){t.$apply(function(){a.$commitViewValue();a.$setSubmitted()});e.preventDefault()};r[0].addEventListener("submit",o);r.on("$destroy",function(){c(function(){r[0].removeEventListener("submit",o)},0,false)})}var s=i[1]||a.$$parentForm;s.$addControl(a);var l=u?f(a.$name):Ee;if(u){l(t,a);n.$observe(u,function(e){if(a.$name===e)return;l(t,undefined);a.$$parentForm.$$renameControl(a,e);l=f(a.$name);l(t,a)})}r.on("$destroy",function(){a.$$parentForm.$removeControl(a);l(t,undefined);xe(a,qa)})}}}};return e;function f(e){if(e===""){return t('this[""]').assign}return t(e).assign||Ee}}]};var Qa=Za();var Ja=Za(true);function eo(e){e.$$classCache={};e.$$classCache[ns]=!(e.$$classCache[rs]=e.$$element.hasClass(rs))}function to(e){var t=e.clazz,i=e.set,a=e.unset;t.prototype.$setValidity=function(e,t,r){if(Ae(t)){o(this,"$pending",e,r)}else{s(this,"$pending",e,r)}if(!Le(t)){a(this.$error,e,r);a(this.$$success,e,r)}else{if(t){a(this.$error,e,r);i(this.$$success,e,r)}else{i(this.$error,e,r);a(this.$$success,e,r)}}if(this.$pending){l(this,za,true);this.$valid=this.$invalid=undefined;u(this,"",null)}else{l(this,za,false);this.$valid=ro(this.$error);this.$invalid=!this.$valid;u(this,"",this.$valid)}var n;if(this.$pending&&this.$pending[e]){n=undefined}else if(this.$error[e]){n=false}else if(this.$$success[e]){n=true}else{n=null}u(this,e,n);this.$$parentForm.$setValidity(e,n,this)};function o(e,t,r,n){if(!e[t]){e[t]={}}i(e[t],r,n)}function s(e,t,r,n){if(e[t]){a(e[t],r,n)}if(ro(e[t])){e[t]=undefined}}function l(e,t,r){if(r&&!e.$$classCache[t]){e.$$animate.addClass(e.$$element,t);e.$$classCache[t]=true}else if(!r&&e.$$classCache[t]){e.$$animate.removeClass(e.$$element,t);e.$$classCache[t]=false}}function u(e,t,r){t=t?"-"+Ve(t,"-"):"";l(e,rs+t,r===true);l(e,ns+t,r===false)}}function ro(e){if(e){for(var t in e){if(e.hasOwnProperty(t)){return false}}}return true}var no=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/;var io=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i;var ao=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/;var oo=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/;var so=/^(\d{4,})-(\d{2})-(\d{2})$/;var lo=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/;var uo=/^(\d{4,})-W(\d\d)$/;var co=/^(\d{4,})-(\d\d)$/;var fo=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/;var ho="keydown wheel mousedown";var po=Xe();Oe("date,datetime-local,month,time,week".split(","),function(e){po[e]=true});var vo={text:mo,date:wo("date",so,bo(so,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":wo("datetimelocal",lo,bo(lo,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:wo("time",fo,bo(fo,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:wo("week",uo,yo,"yyyy-Www"),month:wo("month",co,bo(co,["yyyy","MM"]),"yyyy-MM"),number:Mo,url:ko,email:jo,radio:Io,range:Ao,checkbox:Po,hidden:Ee,button:Ee,submit:Ee,reset:Ee,file:Ee};function go(t){t.$formatters.push(function(e){return t.$isEmpty(e)?e:e.toString()})}function mo(e,t,r,n,i,a){_o(e,t,r,n,i,a);go(n)}function _o(e,n,i,a,t,o){var s=be(n[0].type);if(!t.android){var l=false;n.on("compositionstart",function(){l=true});n.on("compositionupdate",function(e){if(Ae(e.data)||e.data===""){l=false}});n.on("compositionend",function(){l=false;c()})}var u;var c=function(e){if(u){o.defer.cancel(u);u=null}if(l)return;var t=n.val(),r=e&&e.type;if(s!=="password"&&(!i.ngTrim||i.ngTrim!=="false")){t=Ne(t)}if(a.$viewValue!==t||t===""&&a.$$hasNativeValidators){a.$setViewValue(t,r)}};if(t.hasEvent("input")){n.on("input",c)}else{var r=function(e,t,r){if(!u){u=o.defer(function(){u=null;if(!t||t.value!==r){c(e)}})}};n.on("keydown",function(e){var t=e.keyCode;if(t===91||15<t&&t<19||37<=t&&t<=40)return;r(e,this,this.value)});if(t.hasEvent("paste")){n.on("paste cut drop",r)}}n.on("change",c);if(po[s]&&a.$$hasNativeValidators&&s===i.type){n.on(ho,function(e){if(!u){var t=this[f];var r=t.badInput;var n=t.typeMismatch;u=o.defer(function(){u=null;if(t.badInput!==r||t.typeMismatch!==n){c(e)}})}})}a.$render=function(){var e=a.$isEmpty(a.$viewValue)?"":a.$viewValue;if(n.val()!==e){n.val(e)}}}function yo(e,t){if(w(e)){return e}if(je(e)){uo.lastIndex=0;var r=uo.exec(e);if(r){var n=+r[1],i=+r[2],a=0,o=0,s=0,l=0,u=Ea(n),c=(i-1)*7;if(t){a=t.getHours();o=t.getMinutes();s=t.getSeconds();l=t.getMilliseconds()}return new Date(n,0,u.getDate()+c,a,o,s,l)}}return NaN}function bo(a,o){return function(e,t){var r,n;if(w(e)){return e}if(je(e)){if(e.charAt(0)==='"'&&e.charAt(e.length-1)==='"'){e=e.substring(1,e.length-1)}if(no.test(e)){return new Date(e)}a.lastIndex=0;r=a.exec(e);if(r){r.shift();if(t){n={yyyy:t.getFullYear(),MM:t.getMonth()+1,dd:t.getDate(),HH:t.getHours(),mm:t.getMinutes(),ss:t.getSeconds(),sss:t.getMilliseconds()/1e3}}else{n={yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0}}Oe(r,function(e,t){if(t<o.length){n[o[t]]=+e}});var i=new Date(n.yyyy,n.MM-1,n.dd,n.HH,n.mm,n.ss||0,n.sss*1e3||0);if(n.yyyy<100){i.setFullYear(n.yyyy)}return i}}return NaN}}function wo(m,_,y,b){return function e(t,r,n,i,a,o,s){So(t,r,n,i,m);_o(t,r,n,i,a,o);var l=m==="time"||m==="datetimelocal";var u;var c;i.$parsers.push(function(e){if(i.$isEmpty(e))return null;if(_.test(e)){return v(e,u)}i.$$parserName=m;return undefined});i.$formatters.push(function(e){if(e&&!w(e)){throw cs("datefmt","Expected `{0}` to be a date",e)}if(d(e)){u=e;var t=i.$options.getOption("timezone");if(t){c=t;u=ee(u,t,true)}return g(e,t)}else{u=null;c=null;return""}});if(j(n.min)||n.ngMin){var f;i.$validators.min=function(e){return!d(e)||Ae(f)||y(e)>=f};n.$observe("min",function(e){f=p(e);i.$validate()})}if(j(n.max)||n.ngMax){var h;i.$validators.max=function(e){return!d(e)||Ae(h)||y(e)<=h};n.$observe("max",function(e){h=p(e);i.$validate()})}function d(e){return e&&!(e.getTime&&e.getTime()!==e.getTime())}function p(e){return j(e)&&!w(e)?v(e)||undefined:e}function v(e,t){var r=i.$options.getOption("timezone");if(c&&c!==r){t=J(t,Q(c))}var n=y(e,t);if(!isNaN(n)&&r){n=ee(n,r)}return n}function g(e,t){var r=b;if(l&&je(i.$options.getOption("timeSecondsFormat"))){r=b.replace("ss.sss",i.$options.getOption("timeSecondsFormat")).replace(/:$/,"")}var n=s("date")(e,r,t);if(l&&i.$options.getOption("timeStripZeroSeconds")){n=n.replace(/(?::00)?(?:\.000)?$/,"")}return n}}}function So(e,r,t,n,i){var a=r[0];var o=n.$$hasNativeValidators=ke(a.validity);if(o){n.$parsers.push(function(e){var t=r.prop(f)||{};if(t.badInput||t.typeMismatch){n.$$parserName=i;return undefined}return e})}}function Co(t){t.$parsers.push(function(e){if(t.$isEmpty(e))return null;if(oo.test(e))return parseFloat(e);t.$$parserName="number";return undefined});t.$formatters.push(function(e){if(!t.$isEmpty(e)){if(!b(e)){throw cs("numfmt","Expected `{0}` to be a number",e)}e=e.toString()}return e})}function Oo(e){if(j(e)&&!b(e)){e=parseFloat(e)}return!k(e)?e:undefined}function xo(e){return(e|0)===e}function To(e){var t=e.toString();var r=t.indexOf(".");if(r===-1){if(-1<e&&e<1){var n=/e-(\d+)$/.exec(t);if(n){return Number(n[1])}}return 0}return t.length-r-1}function Eo(e,t,r){var n=Number(e);var i=!xo(n);var a=!xo(t);var o=!xo(r);if(i||a||o){var s=i?To(n):0;var l=a?To(t):0;var u=o?To(r):0;var c=Math.max(s,l,u);var f=Math.pow(10,c);n=n*f;t=t*f;r=r*f;if(i)n=Math.round(n);if(a)t=Math.round(t);if(o)r=Math.round(r)}return(n-t)%r===0}function Mo(e,t,r,n,i,a){So(e,t,r,n,"number");Co(n);_o(e,t,r,n,i,a);var o;var s;if(j(r.min)||r.ngMin){n.$validators.min=function(e,t){return n.$isEmpty(t)||Ae(o)||t>=o};r.$observe("min",function(e){o=Oo(e);n.$validate()})}if(j(r.max)||r.ngMax){n.$validators.max=function(e,t){return n.$isEmpty(t)||Ae(s)||t<=s};r.$observe("max",function(e){s=Oo(e);n.$validate()})}if(j(r.step)||r.ngStep){var l;n.$validators.step=function(e,t){return n.$isEmpty(t)||Ae(l)||Eo(t,o||0,l)};r.$observe("step",function(e){l=Oo(e);n.$validate()})}}function Ao(e,r,n,i,t,a){So(e,r,n,i,"range");Co(i);_o(e,r,n,i,t,a);var o=i.$$hasNativeValidators&&r[0].type==="range",s=o?0:undefined,l=o?100:undefined,u=o?1:undefined,c=r[0].validity,f=j(n.min),h=j(n.max),d=j(n.step);var p=i.$render;i.$render=o&&j(c.rangeUnderflow)&&j(c.rangeOverflow)?function e(){p();i.$setViewValue(r.val())}:p;if(f){i.$validators.min=o?function e(){return true}:function e(t,r){return i.$isEmpty(r)||Ae(s)||r>=s};v("min",g)}if(h){i.$validators.max=o?function e(){return true}:function e(t,r){return i.$isEmpty(r)||Ae(l)||r<=l};v("max",m)}if(d){i.$validators.step=o?function e(){return!c.stepMismatch}:function e(t,r){return i.$isEmpty(r)||Ae(u)||Eo(r,s||0,u)};v("step",_)}function v(e,t){r.attr(e,n[e]);n.$observe(e,t)}function g(e){s=Oo(e);if(k(i.$modelValue)){return}if(o){var t=r.val();if(s>t){t=s;r.val(t)}i.$setViewValue(t)}else{i.$validate()}}function m(e){l=Oo(e);if(k(i.$modelValue)){return}if(o){var t=r.val();if(l<t){r.val(l);t=l<s?s:l}i.$setViewValue(t)}else{i.$validate()}}function _(e){u=Oo(e);if(k(i.$modelValue)){return}if(o&&i.$viewValue!==r.val()){i.$setViewValue(r.val())}else{i.$validate()}}}function ko(e,t,r,n,i,a){_o(e,t,r,n,i,a);go(n);n.$validators.url=function(e,t){var r=e||t;return n.$isEmpty(r)||io.test(r)}}function jo(e,t,r,n,i,a){_o(e,t,r,n,i,a);go(n);n.$validators.email=function(e,t){var r=e||t;return n.$isEmpty(r)||ao.test(r)}}function Io(e,r,n,i){var a=!n.ngTrim||Ne(n.ngTrim)!=="false";if(Ae(n.name)){r.attr("name",p())}var t=function(e){var t;if(r[0].checked){t=n.value;if(a){t=Ne(t)}i.$setViewValue(t,e&&e.type)}};r.on("change",t);i.$render=function(){var e=n.value;if(a){e=Ne(e)}r[0].checked=e===i.$viewValue};n.$observe("value",i.$render)}function Do(e,t,r,n,i){var a;if(j(n)){a=e(n);if(!a.constant){throw cs("constexpr","Expected constant expression for `{0}`, but saw "+"`{1}`.",r,n)}return a(t)}return i}function Po(e,t,r,n,i,a,o,s){var l=Do(s,e,"ngTrueValue",r.ngTrueValue,true);var u=Do(s,e,"ngFalseValue",r.ngFalseValue,false);var c=function(e){n.$setViewValue(t[0].checked,e&&e.type)};t.on("change",c);n.$render=function(){t[0].checked=n.$viewValue};n.$isEmpty=function(e){return e===false};n.$formatters.push(function(e){return Ue(e,l)});n.$parsers.push(function(e){return e?l:u})}var Ro=["$browser","$sniffer","$filter","$parse",function(i,a,o,s){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,t,r,n){if(n[0]){(vo[be(r.type)]||vo.text)(e,t,r,n[0],a,i,o,s)}}}}}];var Lo=/^(true|false|\d+)$/;var No=function(){function a(e,t,r){var n=j(r)?r:we===9?"":null;e.prop("value",n);t.$set("value",r)}return{restrict:"A",priority:100,compile:function(e,t){if(Lo.test(t.ngValue)){return function e(t,r,n){var i=t.$eval(n.ngValue);a(r,n,i)}}else{return function e(t,r,n){t.$watch(n.ngValue,function e(t){a(r,n,t)})}}}}};var $o=["$compile",function(i){return{restrict:"AC",compile:function e(t){i.$$addBindingClass(t);return function e(t,r,n){i.$$addBindingInfo(r,n.ngBind);r=r[0];t.$watch(n.ngBind,function e(t){r.textContent=Ze(t)})}}}}];var Fo=["$interpolate","$compile",function(a,o){return{compile:function e(t){o.$$addBindingClass(t);return function e(t,r,n){var i=a(r.attr(n.$attr.ngBindTemplate));o.$$addBindingInfo(r,i.expressions);r=r[0];n.$observe("ngBindTemplate",function(e){r.textContent=Ae(e)?"":e})}}}}];var Go=["$sce","$parse","$compile",function(o,n,s){return{restrict:"A",compile:function e(t,r){var i=n(r.ngBindHtml);var a=n(r.ngBindHtml,function e(t){return o.valueOf(t)});s.$$addBindingClass(t);return function e(r,n,t){s.$$addBindingInfo(n,t.ngBindHtml);r.$watch(a,function e(){var t=i(r);n.html(o.getTrustedHtml(t)||"")})}}}}];var Uo=A({restrict:"A",require:"ngModel",link:function(e,t,r,n){n.$viewChangeListeners.push(function(){e.$eval(r.ngChange)})}});function Ho(d,p){d="ngClass"+d;var v;return["$parse",function(h){return{restrict:"AC",link:function(e,t,l){var n=t.data("$classCounts");var r=true;var i;if(!n){n=Xe();t.data("$classCounts",n)}if(d!=="ngClass"){if(!v){v=h("$index",function e(t){return t&1})}e.$watch(v,c)}e.$watch(h(l[d],_),f);function a(e){e=u(m(e),1);l.$addClass(e)}function o(e){e=u(m(e),-1);l.$removeClass(e)}function s(e,t){var r=m(e);var n=m(t);var i=g(r,n);var a=g(n,r);var o=u(i,-1);var s=u(a,1);l.$addClass(s);l.$removeClass(o)}function u(e,t){var r=[];Oe(e,function(e){if(t>0||n[e]){n[e]=(n[e]||0)+t;if(n[e]===+(t>0)){r.push(e)}}});return r.join(" ")}function c(e){if(e===p){a(i)}else{o(i)}r=e}function f(e){if(r===p){s(i,e)}i=e}}}}];function g(e,t){if(!e||!e.length)return[];if(!t||!t.length)return e;var r=[];e:for(var n=0;n<e.length;n++){var i=e[n];for(var a=0;a<t.length;a++){if(i===t[a])continue e}r.push(i)}return r}function m(e){return e&&e.split(" ")}function _(t){if(!t)return t;var e=t;if(Ie(t)){e=t.map(_).join(" ")}else if(ke(t)){e=Object.keys(t).filter(function(e){return t[e]}).join(" ")}else if(!je(t)){e=t+""}return e}}var Wo=Ho("",true);var Yo=Ho("Odd",0);var Vo=Ho("Even",1);var qo=Wa({compile:function(e,t){t.$set("ngCloak",undefined);e.removeClass("ng-cloak")}});var zo=[function(){return{restrict:"A",scope:true,controller:"@",priority:500}}];var Bo={};var Ko={blur:true,focus:true};Oe("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(n){var i=Xr("ng-"+n);Bo[i]=["$parse","$rootScope","$exceptionHandler",function(e,t,r){return Xo(e,t,r,i,n,Ko[n])}]});function Xo(r,i,a,o,s,l){return{restrict:"A",compile:function(e,t){var n=r(t[o]);return function e(r,t){t.on(s,function(e){var t=function(){n(r,{$event:e})};if(!i.$$phase){r.$apply(t)}else if(l){r.$evalAsync(t)}else{try{t()}catch(e){a(e)}}})}}}}var Zo=["$animate","$compile",function(l,u){return{multiElement:true,transclude:"element",priority:600,terminal:true,restrict:"A",$$tlb:true,link:function(e,r,n,t,i){var a,o,s;e.$watch(n.ngIf,function e(t){if(t){if(!o){i(function(e,t){o=t;e[e.length++]=u.$$createComment("end ngIf",n.ngIf);a={clone:e};l.enter(e,r.parent(),r)})}}else{if(s){s.remove();s=null}if(o){o.$destroy();o=null}if(a){s=Ke(a.clone);l.leave(s).done(function(e){if(e!==false)s=null});a=null}}})}}}];var Qo=["$templateRequest","$anchorScroll","$animate",function(g,m,_){return{restrict:"ECA",priority:400,terminal:true,transclude:"element",controller:S.noop,compile:function(e,t){var r=t.ngInclude||t.src,p=t.onload||"",v=t.autoscroll;return function(o,s,e,l,u){var c=0,f,t,h;var d=function(){if(t){t.remove();t=null}if(f){f.$destroy();f=null}if(h){_.leave(h).done(function(e){if(e!==false)t=null});t=h;h=null}};o.$watch(r,function e(n){var i=function(e){if(e!==false&&j(v)&&(!v||o.$eval(v))){m()}};var a=++c;if(n){g(n,true).then(function(e){if(o.$$destroyed)return;if(a!==c)return;var t=o.$new();l.template=e;var r=u(t,function(e){d();_.enter(e,null,s).done(i)});f=t;h=r;f.$emit("$includeContentLoaded",n);o.$eval(p)},function(){if(o.$$destroyed)return;if(a===c){d();o.$emit("$includeContentError",n)}});o.$emit("$includeContentRequested",n)}else{d();l.template=null}})}}}}];var Jo=["$compile",function(i){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(e,r,t,n){if(Ce.call(r[0]).match(/SVG/)){r.empty();i(Mt(n.template,_e.document).childNodes)(e,function e(t){r.append(t)},{futureParentElement:r});return}r.html(n.template);i(r.contents())(e)}}}];var es=Wa({priority:450,compile:function(){return{pre:function(e,t,r){e.$eval(r.ngInit)}}}});var ts=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,r,n){var i=r.ngList||", ";var a=r.ngTrim!=="false";var o=a?Ne(i):i;var s=function(e){if(Ae(e))return;var t=[];if(e){Oe(e.split(o),function(e){if(e)t.push(a?Ne(e):e)})}return t};n.$parsers.push(s);n.$formatters.push(function(e){if(Ie(e)){return e.join(i)}return undefined});n.$isEmpty=function(e){return!e||!e.length}}}};var rs="ng-valid",ns="ng-invalid",is="ng-pristine",as="ng-dirty",os="ng-untouched",ss="ng-touched",ls="ng-empty",us="ng-not-empty";var cs=L("ngModel");fs.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"];function fs(e,t,r,n,i,a,o,s,l){this.$viewValue=Number.NaN;this.$modelValue=Number.NaN;this.$$rawModelValue=undefined;this.$validators={};this.$asyncValidators={};this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$untouched=true;this.$touched=false;this.$pristine=true;this.$dirty=false;this.$valid=true;this.$invalid=false;this.$error={};this.$$success={};this.$pending=undefined;this.$name=l(r.name||"",false)(e);this.$$parentForm=qa;this.$options=ps;this.$$updateEvents="";this.$$updateEventHandler=this.$$updateEventHandler.bind(this);this.$$parsedNgModel=i(r.ngModel);this.$$parsedNgModelAssign=this.$$parsedNgModel.assign;this.$$ngModelGet=this.$$parsedNgModel;this.$$ngModelSet=this.$$parsedNgModelAssign;this.$$pendingDebounce=null;this.$$parserValid=undefined;this.$$parserName="parse";this.$$currentValidationRunId=0;this.$$scope=e;this.$$rootScope=e.$root;this.$$attr=r;this.$$element=n;this.$$animate=a;this.$$timeout=o;this.$$parse=i;this.$$q=s;this.$$exceptionHandler=t;eo(this);hs(this)}fs.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var r=this.$$parse(this.$$attr.ngModel+"()"),n=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(e){var t=this.$$parsedNgModel(e);if(Pe(t)){t=r(e)}return t};this.$$ngModelSet=function(e,t){if(Pe(this.$$parsedNgModel(e))){n(e,{$$$p:t})}else{this.$$parsedNgModelAssign(e,t)}}}else if(!this.$$parsedNgModel.assign){throw cs("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,Ye(this.$$element))}},$render:Ee,$isEmpty:function(e){return Ae(e)||e===""||e===null||e!==e},$$updateEmptyClasses:function(e){if(this.$isEmpty(e)){this.$$animate.removeClass(this.$$element,us);this.$$animate.addClass(this.$$element,ls)}else{this.$$animate.removeClass(this.$$element,ls);this.$$animate.addClass(this.$$element,us)}},$setPristine:function(){this.$dirty=false;this.$pristine=true;this.$$animate.removeClass(this.$$element,as);this.$$animate.addClass(this.$$element,is)},$setDirty:function(){this.$dirty=true;this.$pristine=false;this.$$animate.removeClass(this.$$element,is);this.$$animate.addClass(this.$$element,as);this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=false;this.$untouched=true;this.$$animate.setClass(this.$$element,os,ss)},$setTouched:function(){this.$touched=true;this.$untouched=false;this.$$animate.setClass(this.$$element,ss,os)},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce);this.$viewValue=this.$$lastCommittedViewValue;this.$render()},$validate:function(){if(k(this.$modelValue)){return}var e=this.$$lastCommittedViewValue;var t=this.$$rawModelValue;var r=this.$valid;var n=this.$modelValue;var i=this.$options.getOption("allowInvalid");var a=this;this.$$runValidators(t,e,function(e){if(!i&&r!==e){a.$modelValue=e?t:undefined;if(a.$modelValue!==n){a.$$writeModelToScope()}}})},$$runValidators:function(a,o,t){this.$$currentValidationRunId++;var r=this.$$currentValidationRunId;var s=this;if(!e()){u(false);return}if(!n()){u(false);return}i();function e(){var e=s.$$parserName;if(Ae(s.$$parserValid)){l(e,null)}else{if(!s.$$parserValid){Oe(s.$validators,function(e,t){l(t,null)});Oe(s.$asyncValidators,function(e,t){l(t,null)})}l(e,s.$$parserValid);return s.$$parserValid}return true}function n(){var n=true;Oe(s.$validators,function(e,t){var r=Boolean(e(a,o));n=n&&r;l(t,r)});if(!n){Oe(s.$asyncValidators,function(e,t){l(t,null)});return false}return true}function i(){var n=[];var i=true;Oe(s.$asyncValidators,function(e,t){var r=e(a,o);if(!P(r)){throw cs("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",r)}l(t,undefined);n.push(r.then(function(){l(t,true)},function(){i=false;l(t,false)}))});if(!n.length){u(true)}else{s.$$q.all(n).then(function(){u(i)},Ee)}}function l(e,t){if(r===s.$$currentValidationRunId){s.$setValidity(e,t)}}function u(e){if(r===s.$$currentValidationRunId){t(e)}}},$commitViewValue:function(){var e=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce);if(this.$$lastCommittedViewValue===e&&(e!==""||!this.$$hasNativeValidators)){return}this.$$updateEmptyClasses(e);this.$$lastCommittedViewValue=e;if(this.$pristine){this.$setDirty()}this.$$parseAndValidate()},$$parseAndValidate:function(){var e=this.$$lastCommittedViewValue;var t=e;var r=this;this.$$parserValid=Ae(t)?undefined:true;this.$setValidity(this.$$parserName,null);this.$$parserName="parse";if(this.$$parserValid){for(var n=0;n<this.$parsers.length;n++){t=this.$parsers[n](t);if(Ae(t)){this.$$parserValid=false;break}}}if(k(this.$modelValue)){this.$modelValue=this.$$ngModelGet(this.$$scope)}var i=this.$modelValue;var a=this.$options.getOption("allowInvalid");this.$$rawModelValue=t;if(a){this.$modelValue=t;o()}this.$$runValidators(t,this.$$lastCommittedViewValue,function(e){if(!a){r.$modelValue=e?t:undefined;o()}});function o(){if(r.$modelValue!==i){r.$$writeModelToScope()}}},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue);Oe(this.$viewChangeListeners,function(e){try{e()}catch(e){this.$$exceptionHandler(e)}},this)},$setViewValue:function(e,t){this.$viewValue=e;if(this.$options.getOption("updateOnDefault")){this.$$debounceViewValueCommit(t)}},$$debounceViewValueCommit:function(e){var t=this.$options.getOption("debounce");if(b(t[e])){t=t[e]}else if(b(t["default"])&&this.$options.getOption("updateOn").indexOf(e)===-1){t=t["default"]}else if(b(t["*"])){t=t["*"]}this.$$timeout.cancel(this.$$pendingDebounce);var r=this;if(t>0){this.$$pendingDebounce=this.$$timeout(function(){r.$commitViewValue()},t)}else if(this.$$rootScope.$$phase){this.$commitViewValue()}else{this.$$scope.$apply(function(){r.$commitViewValue()})}},$overrideModelOptions:function(e){this.$options=this.$options.createChild(e);this.$$setUpdateOnEvents()},$processModelValue:function(){var e=this.$$format();if(this.$viewValue!==e){this.$$updateEmptyClasses(e);this.$viewValue=this.$$lastCommittedViewValue=e;this.$render();this.$$runValidators(this.$modelValue,this.$viewValue,Ee)}},$$format:function(){var e=this.$formatters,t=e.length;var r=this.$modelValue;while(t--){r=e[t](r)}return r},$$setModelValue:function(e){this.$modelValue=this.$$rawModelValue=e;this.$$parserValid=undefined;this.$processModelValue()},$$setUpdateOnEvents:function(){if(this.$$updateEvents){this.$$element.off(this.$$updateEvents,this.$$updateEventHandler)}this.$$updateEvents=this.$options.getOption("updateOn");if(this.$$updateEvents){this.$$element.on(this.$$updateEvents,this.$$updateEventHandler)}},$$updateEventHandler:function(e){this.$$debounceViewValueCommit(e&&e.type)}};function hs(n){n.$$scope.$watch(function e(t){var r=n.$$ngModelGet(t);if(r!==n.$modelValue&&(n.$modelValue===n.$modelValue||r===r)){n.$$setModelValue(r)}return r})}to({clazz:fs,set:function(e,t){e[t]=true},unset:function(e,t){delete e[t]}});var ds=["$rootScope",function(s){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:fs,priority:1,compile:function e(t){t.addClass(is).addClass(os).addClass(rs);return{pre:function e(t,r,n,i){var a=i[0],o=i[1]||a.$$parentForm,s=i[2];if(s){a.$options=s.$options}a.$$initGetterSetters();o.$addControl(a);n.$observe("name",function(e){if(a.$name!==e){a.$$parentForm.$$renameControl(a,e)}});t.$on("$destroy",function(){a.$$parentForm.$removeControl(a)})},post:function e(t,r,n,i){var a=i[0];a.$$setUpdateOnEvents();function o(){a.$setTouched()}r.on("blur",function(){if(a.$touched)return;if(s.$$phase){t.$evalAsync(o)}else{t.$apply(o)}})}}}}}];var ps;var vs=/(\s+|^)default(\s+|$)/;function gs(e){this.$$options=e}gs.prototype={getOption:function(e){return this.$$options[e]},createChild:function(r){var n=false;r=xe({},r);Oe(r,function(e,t){if(e==="$inherit"){if(t==="*"){n=true}else{r[t]=this.$$options[t];if(t==="updateOn"){r.updateOnDefault=this.$$options.updateOnDefault}}}else{if(t==="updateOn"){r.updateOnDefault=false;r[t]=Ne(e.replace(vs,function(){r.updateOnDefault=true;return" "}))}}},this);if(n){delete r["*"];_s(r,this.$$options)}_s(r,ps.$$options);return new gs(r)}};ps=new gs({updateOn:"",updateOnDefault:true,debounce:0,getterSetter:false,allowInvalid:false,timezone:null});var ms=function(){e.$inject=["$attrs","$scope"];function e(e,t){this.$$attrs=e;this.$$scope=t}e.prototype={$onInit:function(){var e=this.parentCtrl?this.parentCtrl.$options:ps;var t=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=e.createChild(t)}};return{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:true,controller:e}};function _s(r,e){Oe(e,function(e,t){if(!j(r[t])){r[t]=e}})}var ys=Wa({terminal:true,priority:1e3});var bs=L("ngOptions");var ws=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/;var Ss=["$compile","$document","$parse",function(y,b,u){function w(e,t,v){var f=e.match(ws);if(!f){throw bs("iexp","Expected expression in form of "+"'_select_ (as _label_)? for (_key_,)?_value_ in _collection_'"+" but got '{0}'. Element: {1}",e,Ye(t))}var r=f[5]||f[7];var n=f[6];var i=/ as /.test(f[0])&&f[1];var g=f[9];var a=u(f[2]?f[1]:r);var o=i&&u(i);var m=o||a;var s=g&&u(g);var _=g?function(e,t){return s(v,t)}:function e(t){return sr(t)};var y=function(e,t){return _(e,O(e,t))};var b=u(f[2]||f[1]);var w=u(f[3]||"");var S=u(f[4]||"");var C=u(f[8]);var l={};var O=n?function(e,t){l[n]=t;l[r]=e;return l}:function(e){l[r]=e;return l};function x(e,t,r,n,i){this.selectValue=e;this.viewValue=t;this.label=r;this.group=n;this.disabled=i}function T(e){var t;if(!n&&N(e)){t=e}else{t=[];for(var r in e){if(e.hasOwnProperty(r)&&r.charAt(0)!=="$"){t.push(r)}}}return t}return{trackBy:g,getTrackByValue:y,getWatchables:u(C,function(e){var t=[];e=e||[];var r=T(e);var n=r.length;for(var i=0;i<n;i++){var a=e===r?i:r[i];var o=e[a];var s=O(o,a);var l=_(o,s);t.push(l);if(f[2]||f[1]){var u=b(v,s);t.push(u)}if(f[4]){var c=S(v,s);t.push(c)}}return t}),getOptions:function(){var e=[];var t={};var r=C(v)||[];var n=T(r);var i=n.length;for(var a=0;a<i;a++){var o=r===n?a:n[a];var s=r[o];var l=O(s,o);var u=m(v,l);var c=_(u,l);var f=b(v,l);var h=w(v,l);var d=S(v,l);var p=new x(c,u,f,h,d);e.push(p);t[c]=p}return{items:e,selectValueMap:t,getOptionFromViewValue:function(e){return t[y(e)]},getViewValueFromOption:function(e){return g?W(e.viewValue):e.viewValue}}}}}var S=_e.document.createElement("option"),C=_e.document.createElement("optgroup");function e(e,o,t,r){var s=r[0];var l=r[1];var u=t.multiple;for(var n=0,i=o.children(),a=i.length;n<a;n++){if(i[n].value===""){s.hasEmptyOption=true;s.emptyOption=i.eq(n);break}}o.empty();var c=!!s.emptyOption;var f=Se(S.cloneNode(false));f.val("?");var h;var d=w(t.ngOptions,o,e);var p=b[0].createDocumentFragment();s.generateUnknownOptionValue=function(e){return"?"};if(!u){s.writeValue=function e(t){if(!h)return;var r=o[0].options[o[0].selectedIndex];var n=h.getOptionFromViewValue(t);if(r)r.removeAttribute("selected");if(n){if(o[0].value!==n.selectValue){s.removeUnknownOption();o[0].value=n.selectValue;n.element.selected=true}n.element.setAttribute("selected","selected")}else{s.selectUnknownOrEmptyOption(t)}};s.readValue=function e(){var t=h.selectValueMap[o.val()];if(t&&!t.disabled){s.unselectEmptyOption();s.removeUnknownOption();return h.getViewValueFromOption(t)}return null};if(d.trackBy){e.$watch(function(){return d.getTrackByValue(l.$viewValue)},function(){l.$render()})}}else{s.writeValue=function e(t){if(!h)return;var r=t&&t.map(g)||[];h.items.forEach(function(e){if(e.element.selected&&!H(r,e)){e.element.selected=false}})};s.readValue=function e(){var t=o.val()||[],r=[];Oe(t,function(e){var t=h.selectValueMap[e];if(t&&!t.disabled)r.push(h.getViewValueFromOption(t))});return r};if(d.trackBy){e.$watchCollection(function(){if(Ie(l.$viewValue)){return l.$viewValue.map(function(e){return d.getTrackByValue(e)})}},function(){l.$render()})}}if(c){y(s.emptyOption)(e);o.prepend(s.emptyOption);if(s.emptyOption[0].nodeType===tt){s.hasEmptyOption=false;s.registerOption=function(e,t){if(t.val()===""){s.hasEmptyOption=true;s.emptyOption=t;s.emptyOption.removeClass("ng-scope");l.$render();t.on("$destroy",function(){var e=s.$isEmptyOptionSelected();s.hasEmptyOption=false;s.emptyOption=undefined;if(e)l.$render()})}}}else{s.emptyOption.removeClass("ng-scope")}}e.$watchCollection(d.getWatchables,_);function v(e,t){var r=S.cloneNode(false);t.appendChild(r);m(e,r)}function g(e){var t=h.getOptionFromViewValue(e);var r=t&&t.element;if(r&&!r.selected)r.selected=true;return t}function m(e,t){e.element=t;t.disabled=e.disabled;if(e.label!==t.label){t.label=e.label;t.textContent=e.label}t.value=e.selectValue}function _(){var e=h&&s.readValue();if(h){for(var t=h.items.length-1;t>=0;t--){var r=h.items[t];if(j(r.group)){Bt(r.element.parentNode)}else{Bt(r.element)}}}h=d.getOptions();var n={};h.items.forEach(function e(t){var r;if(j(t.group)){r=n[t.group];if(!r){r=C.cloneNode(false);p.appendChild(r);r.label=t.group===null?"null":t.group;n[t.group]=r}v(t,r)}else{v(t,p)}});o[0].appendChild(p);l.$render();if(!l.$isEmpty(e)){var i=s.readValue();var a=d.trackBy||u;if(a?!Ue(e,i):e!==i){l.$setViewValue(i);l.$render()}}}}return{restrict:"A",terminal:true,require:["select","ngModel"],link:{pre:function e(t,r,n,i){i[0].registerOption=Ee},post:e}}}];var Cs=["$locale","$interpolate","$log",function(p,v,g){var m=/{}/g,_=/^when(Minus)?(.+)$/;return{link:function(a,i,o){var e=o.count,s=o.$attr.when&&i.attr(o.$attr.when),l=o.offset||0,u=a.$eval(s)||{},c={},t=v.startSymbol(),r=v.endSymbol(),n=t+e+"-"+l+r,f=S.noop,h;Oe(o,function(e,t){var r=_.exec(t);if(r){var n=(r[1]?"-":"")+be(r[2]);u[n]=i.attr(o.$attr[t])}});Oe(u,function(e,t){c[t]=v(e.replace(m,n))});a.$watch(e,function e(t){var r=parseFloat(t);var n=k(r);if(!n&&!(r in u)){r=p.pluralCat(r-l)}if(r!==h&&!(n&&k(h))){f();var i=c[r];if(Ae(i)){if(t!=null){g.debug("ngPluralize: no rule defined for '"+r+"' in "+s)}f=Ee;d()}else{f=a.$watch(i,d)}h=r}});function d(e){i.text(e||"")}}}}];var Os=L("ngRef");var xs=["$parse",function(t){return{priority:-1,restrict:"A",compile:function(e,i){var a=Xr($e(e));var o=t(i.ngRef);var s=o.assign||function(){throw Os("nonassign",'Expression in ngRef="{0}" is non-assignable!',i.ngRef)};return function(e,t,r){var n;if(r.hasOwnProperty("ngRefRead")){if(r.ngRefRead==="$element"){n=t}else{n=t.data("$"+r.ngRefRead+"Controller");if(!n){throw Os("noctrl",'The controller for ngRefRead="{0}" could not be found on ngRef="{1}"',r.ngRefRead,i.ngRef)}}}else{n=t.data("$"+a+"Controller")}n=n||t;s(e,n);t.on("$destroy",function(){if(o(e)===n){s(e,null)}})}}}}];var Ts=["$parse","$animate","$compile",function(u,k,c){var j="$$NG_REMOVED";var I=L("ngRepeat");var D=function(e,t,r,n,i,a,o){e[r]=n;if(i)e[i]=a;e.$index=t;e.$first=t===0;e.$last=t===o-1;e.$middle=!(e.$first||e.$last);e.$odd=!(e.$even=(t&1)===0)};var P=function(e){return e.clone[0]};var R=function(e){return e.clone[e.clone.length-1]};return{restrict:"A",multiElement:true,transclude:"element",priority:1e3,terminal:true,$$tlb:true,compile:function e(t,r){var S=r.ngRepeat;var C=c.$$createComment("end ngRepeat",S);var n=S.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!n){throw I("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",S)}var i=n[1];var a=n[2];var O=n[3];var o=n[4];n=i.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/);if(!n){throw I("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",i)}var x=n[3]||n[1];var T=n[2];if(O&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(O)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(O))){throw I("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",O)}var s,E,M,A;var l={$id:sr};if(o){s=u(o)}else{M=function(e,t){return sr(t)};A=function(e){return e}}return function e(_,y,t,r,b){if(s){E=function(e,t,r){if(T)l[T]=e;l[x]=t;l.$index=r;return s(_,l)}}var w=Xe();_.$watchCollection(a,function e(t){var i,r,a=y[0],n,o=Xe(),s,l,u,c,f,h,d,p,v;if(O){_[O]=t}if(N(t)){h=t;f=E||M}else{f=E||A;h=[];for(var g in t){if(ye.call(t,g)&&g.charAt(0)!=="$"){h.push(g)}}}s=h.length;p=new Array(s);for(i=0;i<s;i++){l=t===h?i:h[i];u=t[l];c=f(l,u,i);if(w[c]){d=w[c];delete w[c];o[c]=d;p[i]=d}else if(o[c]){Oe(p,function(e){if(e&&e.scope)w[e.id]=e});throw I("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",S,c,u)}else{p[i]={id:c,scope:undefined,clone:undefined};o[c]=true}}for(var m in w){d=w[m];v=Ke(d.clone);k.leave(v);if(v[0].parentNode){for(i=0,r=v.length;i<r;i++){v[i][j]=true}}d.scope.$destroy()}for(i=0;i<s;i++){l=t===h?i:h[i];u=t[l];d=p[i];if(d.scope){n=a;do{n=n.nextSibling}while(n&&n[j]);if(P(d)!==n){k.move(Ke(d.clone),null,a)}a=R(d);D(d.scope,i,x,u,T,l,s)}else{b(function e(t,r){d.scope=r;var n=C.cloneNode(false);t[t.length++]=n;k.enter(t,null,a);a=n;d.clone=t;o[d.id]=d;D(d.scope,i,x,u,T,l,s)})}}w=o})}}}}];var Es="ng-hide";var Ms="ng-hide-animate";var As=["$animate",function(n){return{restrict:"A",multiElement:true,link:function(e,r,t){e.$watch(t.ngShow,function e(t){n[t?"removeClass":"addClass"](r,Es,{tempClasses:Ms})})}}}];var ks=["$animate",function(n){return{restrict:"A",multiElement:true,link:function(e,r,t){e.$watch(t.ngHide,function e(t){n[t?"addClass":"removeClass"](r,Es,{tempClasses:Ms})})}}}];var js=Wa(function(e,n,t){e.$watchCollection(t.ngStyle,function e(t,r){if(r&&t!==r){Oe(r,function(e,t){n.css(t,"")})}if(t)n.css(t)})});var Is=["$animate","$compile",function(h,d){return{require:"ngSwitch",controller:["$scope",function e(){this.cases={}}],link:function(e,t,r,o){var n=r.ngSwitch||r.on,s=[],l=[],u=[],c=[];var f=function(t,r){return function(e){if(e!==false)t.splice(r,1)}};e.$watch(n,function e(t){var r,n;while(u.length){h.cancel(u.pop())}for(r=0,n=c.length;r<n;++r){var i=Ke(l[r].clone);c[r].$destroy();var a=u[r]=h.leave(i);a.done(f(u,r))}l.length=0;c.length=0;if(s=o.cases["!"+t]||o.cases["?"]){Oe(s,function(i){i.transclude(function(e,t){c.push(t);var r=i.element;e[e.length++]=d.$$createComment("end ngSwitchWhen");var n={clone:e};l.push(n);h.enter(e,r.parent(),r)})})}})}}}];var Ds=Wa({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:true,link:function(e,t,r,n,i){var a=r.ngSwitchWhen.split(r.ngSwitchWhenSeparator).sort().filter(function(e,t,r){return r[t-1]!==e});Oe(a,function(e){n.cases["!"+e]=n.cases["!"+e]||[];n.cases["!"+e].push({transclude:i,element:t})})}});var Ps=Wa({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:true,link:function(e,t,r,n,i){n.cases["?"]=n.cases["?"]||[];n.cases["?"].push({transclude:i,element:t})}});var Rs=L("ngTransclude");var Ls=["$compile",function(r){return{restrict:"EAC",compile:function e(t){var c=r(t.contents());t.empty();return function e(t,r,n,i,a){if(!a){throw Rs("orphan","Illegal use of ngTransclude directive in the template! "+"No parent directive that requires a transclusion found. "+"Element: {0}",Ye(r))}if(n.ngTransclude===n.$attr.ngTransclude){n.ngTransclude=""}var o=n.ngTransclude||n.ngTranscludeSlot;a(s,null,o);if(o&&!a.isSlotFilled(o)){l()}function s(e,t){if(e.length&&u(e)){r.append(e)}else{l();t.$destroy()}}function l(){c(t,function(e){r.append(e)})}function u(e){for(var t=0,r=e.length;t<r;t++){var n=e[t];if(n.nodeType!==et||n.nodeValue.trim()){return true}}}}}}}];var Ns=["$templateCache",function(i){return{restrict:"E",terminal:true,compile:function(e,t){if(t.type==="text/ng-template"){var r=t.id,n=e[0].text;i.put(r,n)}}}}];var $s={$setViewValue:Ee,$render:Ee};function Fs(e,t){e.prop("selected",t);e.attr("selected",t)}var Gs=["$element","$scope",function(a,t){var l=this,n=new cr;l.selectValueMap={};l.ngModelCtrl=$s;l.multiple=false;l.unknownOption=Se(_e.document.createElement("option"));l.hasEmptyOption=false;l.emptyOption=undefined;l.renderUnknownOption=function(e){var t=l.generateUnknownOptionValue(e);l.unknownOption.val(t);a.prepend(l.unknownOption);Fs(l.unknownOption,true);a.val(t)};l.updateUnknownOption=function(e){var t=l.generateUnknownOptionValue(e);l.unknownOption.val(t);Fs(l.unknownOption,true);a.val(t)};l.generateUnknownOptionValue=function(e){return"? "+sr(e)+" ?"};l.removeUnknownOption=function(){if(l.unknownOption.parent())l.unknownOption.remove()};l.selectEmptyOption=function(){if(l.emptyOption){a.val("");Fs(l.emptyOption,true)}};l.unselectEmptyOption=function(){if(l.hasEmptyOption){Fs(l.emptyOption,false)}};t.$on("$destroy",function(){l.renderUnknownOption=Ee});l.readValue=function e(){var t=a.val();var r=t in l.selectValueMap?l.selectValueMap[t]:t;if(l.hasOption(r)){return r}return null};l.writeValue=function e(t){var r=a[0].options[a[0].selectedIndex];if(r)Fs(Se(r),false);if(l.hasOption(t)){l.removeUnknownOption();var n=sr(t);a.val(n in l.selectValueMap?n:t);var i=a[0].options[a[0].selectedIndex];Fs(Se(i),true)}else{l.selectUnknownOrEmptyOption(t)}};l.addOption=function(e,t){if(t[0].nodeType===tt)return;ze(e,'"option value"');if(e===""){l.hasEmptyOption=true;l.emptyOption=t}var r=n.get(e)||0;n.set(e,r+1);u()};l.removeOption=function(e){var t=n.get(e);if(t){if(t===1){n.delete(e);if(e===""){l.hasEmptyOption=false;l.emptyOption=undefined}}else{n.set(e,t-1)}}};l.hasOption=function(e){return!!n.get(e)};l.$hasEmptyOption=function(){return l.hasEmptyOption};l.$isUnknownOptionSelected=function(){return a[0].options[0]===l.unknownOption[0]};l.$isEmptyOptionSelected=function(){return l.hasEmptyOption&&a[0].options[a[0].selectedIndex]===l.emptyOption[0]};l.selectUnknownOrEmptyOption=function(e){if(e==null&&l.emptyOption){l.removeUnknownOption();l.selectEmptyOption()}else if(l.unknownOption.parent().length){l.updateUnknownOption(e)}else{l.renderUnknownOption(e)}};var e=false;function u(){if(e)return;e=true;t.$$postDigest(function(){e=false;l.ngModelCtrl.$render()})}var r=false;function c(e){if(r)return;r=true;t.$$postDigest(function(){if(t.$$destroyed)return;r=false;l.ngModelCtrl.$setViewValue(l.readValue());if(e)l.ngModelCtrl.$render()})}l.registerOption=function(e,i,a,t,r){if(a.$attr.ngValue){var o,s;a.$observe("value",function e(t){var r;var n=i.prop("selected");if(j(s)){l.removeOption(o);delete l.selectValueMap[s];r=true}s=sr(t);o=t;l.selectValueMap[s]=t;l.addOption(t,i);i.attr("value",s);if(r&&n){c()}})}else if(t){a.$observe("value",function e(t){l.readValue();var r;var n=i.prop("selected");if(j(o)){l.removeOption(o);r=true}o=t;l.addOption(t,i);if(r&&n){c()}})}else if(r){e.$watch(r,function e(t,r){a.$set("value",t);var n=i.prop("selected");if(r!==t){l.removeOption(r)}l.addOption(t,i);if(r&&n){c()}})}else{l.addOption(a.value,i)}a.$observe("disabled",function(e){if(e==="true"||e&&i.prop("selected")){if(l.multiple){c(true)}else{l.ngModelCtrl.$setViewValue(null);l.ngModelCtrl.$render()}}});i.on("$destroy",function(){var e=l.readValue();var t=a.value;l.removeOption(t);u();if(l.multiple&&e&&e.indexOf(t)!==-1||e===t){c(true)}})}}];var Us=function(){return{restrict:"E",require:["select","?ngModel"],controller:Gs,priority:1,link:{pre:e,post:t}};function e(e,t,r,n){var i=n[0];var a=n[1];if(!a){i.registerOption=Ee;return}i.ngModelCtrl=a;t.on("change",function(){i.removeUnknownOption();e.$apply(function(){a.$setViewValue(i.readValue())})});if(r.multiple){i.multiple=true;i.readValue=function e(){var r=[];Oe(t.find("option"),function(e){if(e.selected&&!e.disabled){var t=e.value;r.push(t in i.selectValueMap?i.selectValueMap[t]:t)}});return r};i.writeValue=function e(n){Oe(t.find("option"),function(e){var t=!!n&&(H(n,e.value)||H(n,i.selectValueMap[e.value]));var r=e.selected;if(t!==r){Fs(Se(e),t)}})};var o,s=NaN;e.$watch(function e(){if(s===a.$viewValue&&!Ue(o,a.$viewValue)){o=at(a.$viewValue);a.$render()}s=a.$viewValue});a.$isEmpty=function(e){return!e||e.length===0}}}function t(e,t,r,n){var i=n[1];if(!i)return;var a=n[0];i.$render=function(){a.writeValue(i.$viewValue)}}};var Hs=["$interpolate",function(r){return{restrict:"E",priority:100,compile:function(e,t){var o,s;if(j(t.ngValue)){}else if(j(t.value)){o=r(t.value,true)}else{s=r(e.text(),true);if(!s){t.$set("value",e.text())}}return function(e,t,r){var n="$selectController",i=t.parent(),a=i.data(n)||i.parent().data(n);if(a){a.registerOption(e,t,r,o,s)}}}}}];var Ws=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,r,n){if(!n)return;r.required=true;n.$validators.required=function(e,t){return!r.required||!n.$isEmpty(t)};r.$observe("required",function(){n.$validate()})}}};var Ys=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,r,n){if(!n)return;var i,a=r.ngPattern||r.pattern;r.$observe("pattern",function(e){if(je(e)&&e.length>0){e=new RegExp("^"+e+"$")}if(e&&!e.test){throw L("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",a,e,Ye(t))}i=e||undefined;n.$validate()});n.$validators.pattern=function(e,t){return n.$isEmpty(t)||Ae(i)||i.test(t)}}}};var Vs=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,r,n){if(!n)return;var i=-1;r.$observe("maxlength",function(e){var t=m(e);i=k(t)?-1:t;n.$validate()});n.$validators.maxlength=function(e,t){return i<0||n.$isEmpty(t)||t.length<=i}}}};var qs=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,r,n){if(!n)return;var i=0;r.$observe("minlength",function(e){i=m(e)||0;n.$validate()});n.$validators.minlength=function(e,t){return n.$isEmpty(t)||t.length>=i}}}};if(_e.angular.bootstrap){if(_e.console){console.log("WARNING: Tried to load AngularJS more than once.")}return}ge();ut(S);S.module("ngLocale",[],["$provide",function(e){var i={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};function a(e){e=e+"";var t=e.indexOf(".");return t==-1?0:e.length-t-1}function o(e,t){var r=t;if(undefined===r){r=Math.min(a(e),3)}var n=Math.pow(10,r);var i=(e*n|0)%n;return{v:r,f:i}}e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(e,t){var r=e|0;var n=o(e,t);if(r==1&&n.v==0){return i.ONE}return i.OTHER}})}]);Se(function(){ce(_e.document,fe)})})(window);!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>')}).call(this,r(27))},function(e,t,r){r(421);e.exports="gettext"},function(e,t){angular.module("gettext",[]);angular.module("gettext").constant("gettext",function(e){return e});angular.module("gettext").factory("gettextCatalog",["gettextPlurals","gettextFallbackLanguage","$http","$cacheFactory","$interpolate","$rootScope",function(u,s,r,e,l,t){var n;var c="$$noContext";var i='<span id="test" title="test" class="tested">test</span>';var f=angular.element("<span>"+i+"</span>").html()!==i;var h=function e(t){if(n.debug&&n.currentLanguage!==n.baseLanguage){return n.debugPrefix+t}else{return t}};var d=function e(t){if(n.showTranslatedMarkers){return n.translatedMarkerPrefix+t+n.translatedMarkerSuffix}else{return t}};function p(){t.$broadcast("gettextLanguageChanged")}n={debug:false,debugPrefix:"[MISSING]: ",showTranslatedMarkers:false,translatedMarkerPrefix:"[",translatedMarkerSuffix:"]",strings:{},baseLanguage:"en",currentLanguage:"en",cache:e("strings"),setCurrentLanguage:function e(t){this.currentLanguage=t;p()},getCurrentLanguage:function e(){return this.currentLanguage},setStrings:function e(t,r){if(!this.strings[t]){this.strings[t]={}}var n=u(t,1);for(var i in r){var a=r[i];if(f){i=angular.element("<span>"+i+"</span>").html()}if(angular.isString(a)||angular.isArray(a)){var o={};o[c]=a;a=o}if(!this.strings[t][i]){this.strings[t][i]={}}for(var s in a){var l=a[s];if(!angular.isArray(l)){this.strings[t][i][s]=[];this.strings[t][i][s][n]=l}else{this.strings[t][i][s]=l}}}p()},getStringFormFor:function e(t,r,n,i){if(!t){return null}var a=this.strings[t]||{};var o=a[r]||{};var s=o[i||c]||[];return s[u(t,n)]},getString:function e(t,r,n){var i=s(this.currentLanguage);t=this.getStringFormFor(this.currentLanguage,t,1,n)||this.getStringFormFor(i,t,1,n)||h(t);t=r?l(t)(r):t;return d(t)},getPlural:function e(t,r,n,i,a){var o=s(this.currentLanguage);r=this.getStringFormFor(this.currentLanguage,r,t,a)||this.getStringFormFor(o,r,t,a)||h(t===1?r:n);if(i){i.$count=t;r=l(r)(i)}return d(r)},loadRemote:function e(t){return r({method:"GET",url:t,cache:n.cache}).then(function(e){var t=e.data;for(var r in t){n.setStrings(r,t[r])}return e})}};return n}]);angular.module("gettext").directive("translate",["gettextCatalog","$parse","$animate","$compile","$window","gettextUtil",function(d,i,p,v,e,g){var n=parseInt((/msie (\d+)/i.exec(e.navigator.userAgent)||[])[1],10);var r="translateParams";function s(e){return g.lcFirst(e.replace(r,""))}function m(t,n,i){var e=Object.keys(n).filter(function(e){return g.startsWith(e,r)&&e!==r});if(!e.length){return null}var a=t.$new();var o=[];e.forEach(function(r){var e=t.$watch(n[r],function(e){var t=s(r);a[t]=e;i(a)});o.push(e)});t.$on("$destroy",function(){o.forEach(function(e){e()});a.$destroy()});return a}return{restrict:"AE",terminal:true,compile:function e(t,r){g.assert(!r.translatePlural||r.translateN,"translate-n","translate-plural");g.assert(!r.translateN||r.translatePlural,"translate-plural","translate-n");var c=g.trim(t.html());var f=r.translatePlural;var h=r.translateContext;if(n<=8){if(c.slice(-13)==="\x3c!--IE fix--\x3e"){c=c.slice(0,-13)}}return{post:function e(a,o,t){var s=i(t.translateN);var l=null;var u=true;function r(e){e=e||null;var t;if(f){a=l||(l=a.$new());a.$count=s(a);t=d.getPlural(a.$count,c,f,null,h)}else{t=d.getString(c,null,h)}var r=o.contents();if(!r&&!t){return}if(t===g.trim(r.html())){if(u){v(r)(a)}return}var n=angular.element("<span>"+t+"</span>");v(n.contents())(e||a);var i=n.contents();p.enter(i,o);p.leave(r)}var n=m(a,t,r);r(n);u=false;if(t.translateN){a.$watch(t.translateN,function(){r(n)})}a.$on("gettextLanguageChanged",function(){r(n)})}}}}}]);angular.module("gettext").factory("gettextFallbackLanguage",function(){var r={};var n=/([^_]+)_[^_]+$/;return function(e){if(r[e]){return r[e]}var t=n.exec(e);if(t){r[e]=t[1];return t[1]}return null}});angular.module("gettext").filter("translate",["gettextCatalog",function(r){function e(e,t){return r.getString(e,null,t)}e.$stateful=true;return e}]);angular.module("gettext").factory("gettextPlurals",function(){var t={pt_BR:"pt_BR","pt-BR":"pt_BR"};return function(e,t){switch(r(e)){case"ay":case"bo":case"cgg":case"dz":case"fa":case"id":case"ja":case"jbo":case"ka":case"kk":case"km":case"ko":case"ky":case"lo":case"ms":case"my":case"sah":case"su":case"th":case"tt":case"ug":case"vi":case"wo":case"zh":return 0;case"is":return t%10!=1||t%100==11?1:0;case"jv":return t!=0?1:0;case"mk":return t==1||t%10==1?0:1;case"ach":case"ak":case"am":case"arn":case"br":case"fil":case"fr":case"gun":case"ln":case"mfe":case"mg":case"mi":case"oc":case"pt_BR":case"tg":case"ti":case"tr":case"uz":case"wa":case"zh":return t>1?1:0;case"lv":return t%10==1&&t%100!=11?0:t!=0?1:2;case"lt":return t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2;case"be":case"bs":case"hr":case"ru":case"sr":case"uk":return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2;case"mnk":return t==0?0:t==1?1:2;case"ro":return t==1?0:t==0||t%100>0&&t%100<20?1:2;case"pl":return t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2;case"cs":case"sk":return t==1?0:t>=2&&t<=4?1:2;case"sl":return t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0;case"mt":return t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3;case"gd":return t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3;case"cy":return t==1?0:t==2?1:t!=8&&t!=11?2:3;case"kw":return t==1?0:t==2?1:t==3?2:3;case"ga":return t==1?0:t==2?1:t<7?2:t<11?3:4;case"ar":return t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5;default:return t!=1?1:0}};function r(e){if(!t[e]){t[e]=e.split(/\-|_/).shift()}return t[e]}});angular.module("gettext").factory("gettextUtil",function e(){var t=function(){if(!String.prototype.trim){return function(e){return typeof e==="string"?e.replace(/^\s*/,"").replace(/\s*$/,""):e}}return function(e){return typeof e==="string"?e.trim():e}}();function r(e,t,r){if(!e){throw new Error("You should add a "+t+" attribute whenever you add a "+r+" attribute.")}}function n(e,t){return e.indexOf(t)===0}function i(e){var t=e.charAt(0).toLowerCase();return t+e.substr(1)}return{trim:t,assert:r,startsWith:n,lcFirst:i}})},function(e,r,n){(function(e,t){true?t(r,n(27),n(200)):undefined})(this,function(e,t,w){"use strict";t=t&&t.hasOwnProperty("default")?t["default"]:t;w=w&&w.hasOwnProperty("default")?w["default"]:w;function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function S(e,t,r){if(t)n(e.prototype,t);if(r)n(e,r);return e}function i(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function C(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){i(t,e,r[e])})}return t}function v(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}var O=function(i){var r="transitionend";var n=1e6;var a=1e3;function l(e){return{}.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase()}function e(){return{bindType:r,delegateType:r,handle:function e(t){if(i(t.target).is(this)){return t.handleObj.handler.apply(this,arguments)}return undefined}}}function t(e){var t=this;var r=false;i(this).one(u.TRANSITION_END,function(){r=true});setTimeout(function(){if(!r){u.triggerTransitionEnd(t)}},e);return this}function o(){i.fn.emulateTransitionEnd=t;i.event.special[u.TRANSITION_END]=e()}var u={TRANSITION_END:"bsTransitionEnd",getUID:function e(t){do{t+=~~(Math.random()*n)}while(document.getElementById(t));return t},getSelectorFromElement:function e(t){var r=t.getAttribute("data-target");if(!r||r==="#"){r=t.getAttribute("href")||""}try{return document.querySelector(r)?r:null}catch(e){return null}},getTransitionDurationFromElement:function e(t){if(!t){return 0}var r=i(t).css("transition-duration");var n=parseFloat(r);if(!n){return 0}r=r.split(",")[0];return parseFloat(r)*a},reflow:function e(t){return t.offsetHeight},triggerTransitionEnd:function e(t){i(t).trigger(r)},supportsTransitionEnd:function e(){return Boolean(r)},isElement:function e(t){return(t[0]||t).nodeType},typeCheckConfig:function e(t,r,n){for(var i in n){if(Object.prototype.hasOwnProperty.call(n,i)){var a=n[i];var o=r[i];var s=o&&u.isElement(o)?"element":l(o);if(!new RegExp(a).test(s)){throw new Error(t.toUpperCase()+": "+('Option "'+i+'" provided type "'+s+'" ')+('but expected type "'+a+'".'))}}}}};o();return u}(t);var r=function(i){var e="alert";var t="4.1.3";var a="bs.alert";var r="."+a;var n=".data-api";var o=i.fn[e];var s={DISMISS:'[data-dismiss="alert"]'};var l={CLOSE:"close"+r,CLOSED:"closed"+r,CLICK_DATA_API:"click"+r+n};var u={ALERT:"alert",FADE:"fade",SHOW:"show"};var c=function(){function n(e){this._element=e}var e=n.prototype;e.close=function e(t){var r=this._element;if(t){r=this._getRootElement(t)}var n=this._triggerCloseEvent(r);if(n.isDefaultPrevented()){return}this._removeElement(r)};e.dispose=function e(){i.removeData(this._element,a);this._element=null};e._getRootElement=function e(t){var r=O.getSelectorFromElement(t);var n=false;if(r){n=document.querySelector(r)}if(!n){n=i(t).closest("."+u.ALERT)[0]}return n};e._triggerCloseEvent=function e(t){var r=i.Event(l.CLOSE);i(t).trigger(r);return r};e._removeElement=function e(t){var r=this;i(t).removeClass(u.SHOW);if(!i(t).hasClass(u.FADE)){this._destroyElement(t);return}var n=O.getTransitionDurationFromElement(t);i(t).one(O.TRANSITION_END,function(e){return r._destroyElement(t,e)}).emulateTransitionEnd(n)};e._destroyElement=function e(t){i(t).detach().trigger(l.CLOSED).remove()};n._jQueryInterface=function e(r){return this.each(function(){var e=i(this);var t=e.data(a);if(!t){t=new n(this);e.data(a,t)}if(r==="close"){t[r](this)}})};n._handleDismiss=function e(t){return function(e){if(e){e.preventDefault()}t.close(this)}};S(n,null,[{key:"VERSION",get:function e(){return t}}]);return n}();i(document).on(l.CLICK_DATA_API,s.DISMISS,c._handleDismiss(new c));i.fn[e]=c._jQueryInterface;i.fn[e].Constructor=c;i.fn[e].noConflict=function(){i.fn[e]=o;return c._jQueryInterface};return c}(t);var a=function(o){var e="button";var t="4.1.3";var n="bs.button";var r="."+n;var i=".data-api";var a=o.fn[e];var s={ACTIVE:"active",BUTTON:"btn",FOCUS:"focus"};var l={DATA_TOGGLE_CARROT:'[data-toggle^="button"]',DATA_TOGGLE:'[data-toggle="buttons"]',INPUT:"input",ACTIVE:".active",BUTTON:".btn"};var u={CLICK_DATA_API:"click"+r+i,FOCUS_BLUR_DATA_API:"focus"+r+i+" "+("blur"+r+i)};var c=function(){function r(e){this._element=e}var e=r.prototype;e.toggle=function e(){var t=true;var r=true;var n=o(this._element).closest(l.DATA_TOGGLE)[0];if(n){var i=this._element.querySelector(l.INPUT);if(i){if(i.type==="radio"){if(i.checked&&this._element.classList.contains(s.ACTIVE)){t=false}else{var a=n.querySelector(l.ACTIVE);if(a){o(a).removeClass(s.ACTIVE)}}}if(t){if(i.hasAttribute("disabled")||n.hasAttribute("disabled")||i.classList.contains("disabled")||n.classList.contains("disabled")){return}i.checked=!this._element.classList.contains(s.ACTIVE);o(i).trigger("change")}i.focus();r=false}}if(r){this._element.setAttribute("aria-pressed",!this._element.classList.contains(s.ACTIVE))}if(t){o(this._element).toggleClass(s.ACTIVE)}};e.dispose=function e(){o.removeData(this._element,n);this._element=null};r._jQueryInterface=function e(t){return this.each(function(){var e=o(this).data(n);if(!e){e=new r(this);o(this).data(n,e)}if(t==="toggle"){e[t]()}})};S(r,null,[{key:"VERSION",get:function e(){return t}}]);return r}();o(document).on(u.CLICK_DATA_API,l.DATA_TOGGLE_CARROT,function(e){e.preventDefault();var t=e.target;if(!o(t).hasClass(s.BUTTON)){t=o(t).closest(l.BUTTON)}c._jQueryInterface.call(o(t),"toggle")}).on(u.FOCUS_BLUR_DATA_API,l.DATA_TOGGLE_CARROT,function(e){var t=o(e.target).closest(l.BUTTON)[0];o(t).toggleClass(s.FOCUS,/^focus(in)?$/.test(e.type))});o.fn[e]=c._jQueryInterface;o.fn[e].Constructor=c;o.fn[e].noConflict=function(){o.fn[e]=a;return c._jQueryInterface};return c}(t);var o=function(v){var r="carousel";var t="4.1.3";var s="bs.carousel";var n="."+s;var e=".data-api";var i=v.fn[r];var a=37;var l=39;var u=500;var c={interval:5e3,keyboard:true,slide:false,pause:"hover",wrap:true};var f={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean"};var g={NEXT:"next",PREV:"prev",LEFT:"left",RIGHT:"right"};var m={SLIDE:"slide"+n,SLID:"slid"+n,KEYDOWN:"keydown"+n,MOUSEENTER:"mouseenter"+n,MOUSELEAVE:"mouseleave"+n,TOUCHEND:"touchend"+n,LOAD_DATA_API:"load"+n+e,CLICK_DATA_API:"click"+n+e};var _={CAROUSEL:"carousel",ACTIVE:"active",SLIDE:"slide",RIGHT:"carousel-item-right",LEFT:"carousel-item-left",NEXT:"carousel-item-next",PREV:"carousel-item-prev",ITEM:"carousel-item"};var y={ACTIVE:".active",ACTIVE_ITEM:".active.carousel-item",ITEM:".carousel-item",NEXT_PREV:".carousel-item-next, .carousel-item-prev",INDICATORS:".carousel-indicators",DATA_SLIDE:"[data-slide], [data-slide-to]",DATA_RIDE:'[data-ride="carousel"]'};var o=function(){function o(e,t){this._items=null;this._interval=null;this._activeElement=null;this._isPaused=false;this._isSliding=false;this.touchTimeout=null;this._config=this._getConfig(t);this._element=v(e)[0];this._indicatorsElement=this._element.querySelector(y.INDICATORS);this._addEventListeners()}var e=o.prototype;e.next=function e(){if(!this._isSliding){this._slide(g.NEXT)}};e.nextWhenVisible=function e(){if(!document.hidden&&v(this._element).is(":visible")&&v(this._element).css("visibility")!=="hidden"){this.next()}};e.prev=function e(){if(!this._isSliding){this._slide(g.PREV)}};e.pause=function e(t){if(!t){this._isPaused=true}if(this._element.querySelector(y.NEXT_PREV)){O.triggerTransitionEnd(this._element);this.cycle(true)}clearInterval(this._interval);this._interval=null};e.cycle=function e(t){if(!t){this._isPaused=false}if(this._interval){clearInterval(this._interval);this._interval=null}if(this._config.interval&&!this._isPaused){this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval)}};e.to=function e(t){var r=this;this._activeElement=this._element.querySelector(y.ACTIVE_ITEM);var n=this._getItemIndex(this._activeElement);if(t>this._items.length-1||t<0){return}if(this._isSliding){v(this._element).one(m.SLID,function(){return r.to(t)});return}if(n===t){this.pause();this.cycle();return}var i=t>n?g.NEXT:g.PREV;this._slide(i,this._items[t])};e.dispose=function e(){v(this._element).off(n);v.removeData(this._element,s);this._items=null;this._config=null;this._element=null;this._interval=null;this._isPaused=null;this._isSliding=null;this._activeElement=null;this._indicatorsElement=null};e._getConfig=function e(t){t=C({},c,t);O.typeCheckConfig(r,t,f);return t};e._addEventListeners=function e(){var t=this;if(this._config.keyboard){v(this._element).on(m.KEYDOWN,function(e){return t._keydown(e)})}if(this._config.pause==="hover"){v(this._element).on(m.MOUSEENTER,function(e){return t.pause(e)}).on(m.MOUSELEAVE,function(e){return t.cycle(e)});if("ontouchstart"in document.documentElement){v(this._element).on(m.TOUCHEND,function(){t.pause();if(t.touchTimeout){clearTimeout(t.touchTimeout)}t.touchTimeout=setTimeout(function(e){return t.cycle(e)},u+t._config.interval)})}}};e._keydown=function e(t){if(/input|textarea/i.test(t.target.tagName)){return}switch(t.which){case a:t.preventDefault();this.prev();break;case l:t.preventDefault();this.next();break;default:}};e._getItemIndex=function e(t){this._items=t&&t.parentNode?[].slice.call(t.parentNode.querySelectorAll(y.ITEM)):[];return this._items.indexOf(t)};e._getItemByDirection=function e(t,r){var n=t===g.NEXT;var i=t===g.PREV;var a=this._getItemIndex(r);var o=this._items.length-1;var s=i&&a===0||n&&a===o;if(s&&!this._config.wrap){return r}var l=t===g.PREV?-1:1;var u=(a+l)%this._items.length;return u===-1?this._items[this._items.length-1]:this._items[u]};e._triggerSlideEvent=function e(t,r){var n=this._getItemIndex(t);var i=this._getItemIndex(this._element.querySelector(y.ACTIVE_ITEM));var a=v.Event(m.SLIDE,{relatedTarget:t,direction:r,from:i,to:n});v(this._element).trigger(a);return a};e._setActiveIndicatorElement=function e(t){if(this._indicatorsElement){var r=[].slice.call(this._indicatorsElement.querySelectorAll(y.ACTIVE));v(r).removeClass(_.ACTIVE);var n=this._indicatorsElement.children[this._getItemIndex(t)];if(n){v(n).addClass(_.ACTIVE)}}};e._slide=function e(t,r){var n=this;var i=this._element.querySelector(y.ACTIVE_ITEM);var a=this._getItemIndex(i);var o=r||i&&this._getItemByDirection(t,i);var s=this._getItemIndex(o);var l=Boolean(this._interval);var u;var c;var f;if(t===g.NEXT){u=_.LEFT;c=_.NEXT;f=g.LEFT}else{u=_.RIGHT;c=_.PREV;f=g.RIGHT}if(o&&v(o).hasClass(_.ACTIVE)){this._isSliding=false;return}var h=this._triggerSlideEvent(o,f);if(h.isDefaultPrevented()){return}if(!i||!o){return}this._isSliding=true;if(l){this.pause()}this._setActiveIndicatorElement(o);var d=v.Event(m.SLID,{relatedTarget:o,direction:f,from:a,to:s});if(v(this._element).hasClass(_.SLIDE)){v(o).addClass(c);O.reflow(o);v(i).addClass(u);v(o).addClass(u);var p=O.getTransitionDurationFromElement(i);v(i).one(O.TRANSITION_END,function(){v(o).removeClass(u+" "+c).addClass(_.ACTIVE);v(i).removeClass(_.ACTIVE+" "+c+" "+u);n._isSliding=false;setTimeout(function(){return v(n._element).trigger(d)},0)}).emulateTransitionEnd(p)}else{v(i).removeClass(_.ACTIVE);v(o).addClass(_.ACTIVE);this._isSliding=false;v(this._element).trigger(d)}if(l){this.cycle()}};o._jQueryInterface=function e(n){return this.each(function(){var e=v(this).data(s);var t=C({},c,v(this).data());if(typeof n==="object"){t=C({},t,n)}var r=typeof n==="string"?n:t.slide;if(!e){e=new o(this,t);v(this).data(s,e)}if(typeof n==="number"){e.to(n)}else if(typeof r==="string"){if(typeof e[r]==="undefined"){throw new TypeError('No method named "'+r+'"')}e[r]()}else if(t.interval){e.pause();e.cycle()}})};o._dataApiClickHandler=function e(t){var r=O.getSelectorFromElement(this);if(!r){return}var n=v(r)[0];if(!n||!v(n).hasClass(_.CAROUSEL)){return}var i=C({},v(n).data(),v(this).data());var a=this.getAttribute("data-slide-to");if(a){i.interval=false}o._jQueryInterface.call(v(n),i);if(a){v(n).data(s).to(a)}t.preventDefault()};S(o,null,[{key:"VERSION",get:function e(){return t}},{key:"Default",get:function e(){return c}}]);return o}();v(document).on(m.CLICK_DATA_API,y.DATA_SLIDE,o._dataApiClickHandler);v(window).on(m.LOAD_DATA_API,function(){var e=[].slice.call(document.querySelectorAll(y.DATA_RIDE));for(var t=0,r=e.length;t<r;t++){var n=v(e[t]);o._jQueryInterface.call(n,n.data())}});v.fn[r]=o._jQueryInterface;v.fn[r].Constructor=o;v.fn[r].noConflict=function(){v.fn[r]=i;return o._jQueryInterface};return o}(t);var s=function(f){var r="collapse";var t="4.1.3";var h="bs.collapse";var e="."+h;var n=".data-api";var i=f.fn[r];var a={toggle:true,parent:""};var o={toggle:"boolean",parent:"(string|element)"};var d={SHOW:"show"+e,SHOWN:"shown"+e,HIDE:"hide"+e,HIDDEN:"hidden"+e,CLICK_DATA_API:"click"+e+n};var p={SHOW:"show",COLLAPSE:"collapse",COLLAPSING:"collapsing",COLLAPSED:"collapsed"};var s={WIDTH:"width",HEIGHT:"height"};var v={ACTIVES:".show, .collapsing",DATA_TOGGLE:'[data-toggle="collapse"]'};var l=function(){function c(t,e){this._isTransitioning=false;this._element=t;this._config=this._getConfig(e);this._triggerArray=f.makeArray(document.querySelectorAll('[data-toggle="collapse"][href="#'+t.id+'"],'+('[data-toggle="collapse"][data-target="#'+t.id+'"]')));var r=[].slice.call(document.querySelectorAll(v.DATA_TOGGLE));for(var n=0,i=r.length;n<i;n++){var a=r[n];var o=O.getSelectorFromElement(a);var s=[].slice.call(document.querySelectorAll(o)).filter(function(e){return e===t});if(o!==null&&s.length>0){this._selector=o;this._triggerArray.push(a)}}this._parent=this._config.parent?this._getParent():null;if(!this._config.parent){this._addAriaAndCollapsedClass(this._element,this._triggerArray)}if(this._config.toggle){this.toggle()}}var e=c.prototype;e.toggle=function e(){if(f(this._element).hasClass(p.SHOW)){this.hide()}else{this.show()}};e.show=function e(){var t=this;if(this._isTransitioning||f(this._element).hasClass(p.SHOW)){return}var r;var n;if(this._parent){r=[].slice.call(this._parent.querySelectorAll(v.ACTIVES)).filter(function(e){return e.getAttribute("data-parent")===t._config.parent});if(r.length===0){r=null}}if(r){n=f(r).not(this._selector).data(h);if(n&&n._isTransitioning){return}}var i=f.Event(d.SHOW);f(this._element).trigger(i);if(i.isDefaultPrevented()){return}if(r){c._jQueryInterface.call(f(r).not(this._selector),"hide");if(!n){f(r).data(h,null)}}var a=this._getDimension();f(this._element).removeClass(p.COLLAPSE).addClass(p.COLLAPSING);this._element.style[a]=0;if(this._triggerArray.length){f(this._triggerArray).removeClass(p.COLLAPSED).attr("aria-expanded",true)}this.setTransitioning(true);var o=function e(){f(t._element).removeClass(p.COLLAPSING).addClass(p.COLLAPSE).addClass(p.SHOW);t._element.style[a]="";t.setTransitioning(false);f(t._element).trigger(d.SHOWN)};var s=a[0].toUpperCase()+a.slice(1);var l="scroll"+s;var u=O.getTransitionDurationFromElement(this._element);f(this._element).one(O.TRANSITION_END,o).emulateTransitionEnd(u);this._element.style[a]=this._element[l]+"px"};e.hide=function e(){var t=this;if(this._isTransitioning||!f(this._element).hasClass(p.SHOW)){return}var r=f.Event(d.HIDE);f(this._element).trigger(r);if(r.isDefaultPrevented()){return}var n=this._getDimension();this._element.style[n]=this._element.getBoundingClientRect()[n]+"px";O.reflow(this._element);f(this._element).addClass(p.COLLAPSING).removeClass(p.COLLAPSE).removeClass(p.SHOW);var i=this._triggerArray.length;if(i>0){for(var a=0;a<i;a++){var o=this._triggerArray[a];var s=O.getSelectorFromElement(o);if(s!==null){var l=f([].slice.call(document.querySelectorAll(s)));if(!l.hasClass(p.SHOW)){f(o).addClass(p.COLLAPSED).attr("aria-expanded",false)}}}}this.setTransitioning(true);var u=function e(){t.setTransitioning(false);f(t._element).removeClass(p.COLLAPSING).addClass(p.COLLAPSE).trigger(d.HIDDEN)};this._element.style[n]="";var c=O.getTransitionDurationFromElement(this._element);f(this._element).one(O.TRANSITION_END,u).emulateTransitionEnd(c)};e.setTransitioning=function e(t){this._isTransitioning=t};e.dispose=function e(){f.removeData(this._element,h);this._config=null;this._parent=null;this._element=null;this._triggerArray=null;this._isTransitioning=null};e._getConfig=function e(t){t=C({},a,t);t.toggle=Boolean(t.toggle);O.typeCheckConfig(r,t,o);return t};e._getDimension=function e(){var t=f(this._element).hasClass(s.WIDTH);return t?s.WIDTH:s.HEIGHT};e._getParent=function e(){var r=this;var t=null;if(O.isElement(this._config.parent)){t=this._config.parent;if(typeof this._config.parent.jquery!=="undefined"){t=this._config.parent[0]}}else{t=document.querySelector(this._config.parent)}var n='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]';var i=[].slice.call(t.querySelectorAll(n));f(i).each(function(e,t){r._addAriaAndCollapsedClass(c._getTargetFromElement(t),[t])});return t};e._addAriaAndCollapsedClass=function e(t,r){if(t){var n=f(t).hasClass(p.SHOW);if(r.length){f(r).toggleClass(p.COLLAPSED,!n).attr("aria-expanded",n)}}};c._getTargetFromElement=function e(t){var r=O.getSelectorFromElement(t);return r?document.querySelector(r):null};c._jQueryInterface=function e(n){return this.each(function(){var e=f(this);var t=e.data(h);var r=C({},a,e.data(),typeof n==="object"&&n?n:{});if(!t&&r.toggle&&/show|hide/.test(n)){r.toggle=false}if(!t){t=new c(this,r);e.data(h,t)}if(typeof n==="string"){if(typeof t[n]==="undefined"){throw new TypeError('No method named "'+n+'"')}t[n]()}})};S(c,null,[{key:"VERSION",get:function e(){return t}},{key:"Default",get:function e(){return a}}]);return c}();f(document).on(d.CLICK_DATA_API,v.DATA_TOGGLE,function(e){if(e.currentTarget.tagName==="A"){e.preventDefault()}var n=f(this);var t=O.getSelectorFromElement(this);var r=[].slice.call(document.querySelectorAll(t));f(r).each(function(){var e=f(this);var t=e.data(h);var r=t?"toggle":n.data();l._jQueryInterface.call(e,r)})});f.fn[r]=l._jQueryInterface;f.fn[r].Constructor=l;f.fn[r].noConflict=function(){f.fn[r]=i;return l._jQueryInterface};return l}(t);var l=function(f){var r="dropdown";var t="4.1.3";var h="bs.dropdown";var n="."+h;var e=".data-api";var i=f.fn[r];var s=27;var l=32;var d=9;var u=38;var p=40;var v=3;var g=new RegExp(u+"|"+p+"|"+s);var m={HIDE:"hide"+n,HIDDEN:"hidden"+n,SHOW:"show"+n,SHOWN:"shown"+n,CLICK:"click"+n,CLICK_DATA_API:"click"+n+e,KEYDOWN_DATA_API:"keydown"+n+e,KEYUP_DATA_API:"keyup"+n+e};var _={DISABLED:"disabled",SHOW:"show",DROPUP:"dropup",DROPRIGHT:"dropright",DROPLEFT:"dropleft",MENURIGHT:"dropdown-menu-right",MENULEFT:"dropdown-menu-left",POSITION_STATIC:"position-static"};var y={DATA_TOGGLE:'[data-toggle="dropdown"]',FORM_CHILD:".dropdown form",MENU:".dropdown-menu",NAVBAR_NAV:".navbar-nav",VISIBLE_ITEMS:".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)"};var a={TOP:"top-start",TOPEND:"top-end",BOTTOM:"bottom-start",BOTTOMEND:"bottom-end",RIGHT:"right-start",RIGHTEND:"right-end",LEFT:"left-start",LEFTEND:"left-end"};var o={offset:0,flip:true,boundary:"scrollParent",reference:"toggle",display:"dynamic"};var b={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string"};var c=function(){function c(e,t){this._element=e;this._popper=null;this._config=this._getConfig(t);this._menu=this._getMenuElement();this._inNavbar=this._detectNavbar();this._addEventListeners()}var e=c.prototype;e.toggle=function e(){if(this._element.disabled||f(this._element).hasClass(_.DISABLED)){return}var t=c._getParentFromElement(this._element);var r=f(this._menu).hasClass(_.SHOW);c._clearMenus();if(r){return}var n={relatedTarget:this._element};var i=f.Event(m.SHOW,n);f(t).trigger(i);if(i.isDefaultPrevented()){return}if(!this._inNavbar){if(typeof w==="undefined"){throw new TypeError("Bootstrap dropdown require Popper.js (https://popper.js.org)")}var a=this._element;if(this._config.reference==="parent"){a=t}else if(O.isElement(this._config.reference)){a=this._config.reference;if(typeof this._config.reference.jquery!=="undefined"){a=this._config.reference[0]}}if(this._config.boundary!=="scrollParent"){f(t).addClass(_.POSITION_STATIC)}this._popper=new w(a,this._menu,this._getPopperConfig())}if("ontouchstart"in document.documentElement&&f(t).closest(y.NAVBAR_NAV).length===0){f(document.body).children().on("mouseover",null,f.noop)}this._element.focus();this._element.setAttribute("aria-expanded",true);f(this._menu).toggleClass(_.SHOW);f(t).toggleClass(_.SHOW).trigger(f.Event(m.SHOWN,n))};e.dispose=function e(){f.removeData(this._element,h);f(this._element).off(n);this._element=null;this._menu=null;if(this._popper!==null){this._popper.destroy();this._popper=null}};e.update=function e(){this._inNavbar=this._detectNavbar();if(this._popper!==null){this._popper.scheduleUpdate()}};e._addEventListeners=function e(){var t=this;f(this._element).on(m.CLICK,function(e){e.preventDefault();e.stopPropagation();t.toggle()})};e._getConfig=function e(t){t=C({},this.constructor.Default,f(this._element).data(),t);O.typeCheckConfig(r,t,this.constructor.DefaultType);return t};e._getMenuElement=function e(){if(!this._menu){var t=c._getParentFromElement(this._element);if(t){this._menu=t.querySelector(y.MENU)}}return this._menu};e._getPlacement=function e(){var t=f(this._element.parentNode);var r=a.BOTTOM;if(t.hasClass(_.DROPUP)){r=a.TOP;if(f(this._menu).hasClass(_.MENURIGHT)){r=a.TOPEND}}else if(t.hasClass(_.DROPRIGHT)){r=a.RIGHT}else if(t.hasClass(_.DROPLEFT)){r=a.LEFT}else if(f(this._menu).hasClass(_.MENURIGHT)){r=a.BOTTOMEND}return r};e._detectNavbar=function e(){return f(this._element).closest(".navbar").length>0};e._getPopperConfig=function e(){var t=this;var r={};if(typeof this._config.offset==="function"){r.fn=function(e){e.offsets=C({},e.offsets,t._config.offset(e.offsets)||{});return e}}else{r.offset=this._config.offset}var n={placement:this._getPlacement(),modifiers:{offset:r,flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};if(this._config.display==="static"){n.modifiers.applyStyle={enabled:false}}return n};c._jQueryInterface=function e(r){return this.each(function(){var e=f(this).data(h);var t=typeof r==="object"?r:null;if(!e){e=new c(this,t);f(this).data(h,e)}if(typeof r==="string"){if(typeof e[r]==="undefined"){throw new TypeError('No method named "'+r+'"')}e[r]()}})};c._clearMenus=function e(t){if(t&&(t.which===v||t.type==="keyup"&&t.which!==d)){return}var r=[].slice.call(document.querySelectorAll(y.DATA_TOGGLE));for(var n=0,i=r.length;n<i;n++){var a=c._getParentFromElement(r[n]);var o=f(r[n]).data(h);var s={relatedTarget:r[n]};if(t&&t.type==="click"){s.clickEvent=t}if(!o){continue}var l=o._menu;if(!f(a).hasClass(_.SHOW)){continue}if(t&&(t.type==="click"&&/input|textarea/i.test(t.target.tagName)||t.type==="keyup"&&t.which===d)&&f.contains(a,t.target)){continue}var u=f.Event(m.HIDE,s);f(a).trigger(u);if(u.isDefaultPrevented()){continue}if("ontouchstart"in document.documentElement){f(document.body).children().off("mouseover",null,f.noop)}r[n].setAttribute("aria-expanded","false");f(l).removeClass(_.SHOW);f(a).removeClass(_.SHOW).trigger(f.Event(m.HIDDEN,s))}};c._getParentFromElement=function e(t){var r;var n=O.getSelectorFromElement(t);if(n){r=document.querySelector(n)}return r||t.parentNode};c._dataApiKeydownHandler=function e(t){if(/input|textarea/i.test(t.target.tagName)?t.which===l||t.which!==s&&(t.which!==p&&t.which!==u||f(t.target).closest(y.MENU).length):!g.test(t.which)){return}t.preventDefault();t.stopPropagation();if(this.disabled||f(this).hasClass(_.DISABLED)){return}var r=c._getParentFromElement(this);var n=f(r).hasClass(_.SHOW);if(!n&&(t.which!==s||t.which!==l)||n&&(t.which===s||t.which===l)){if(t.which===s){var i=r.querySelector(y.DATA_TOGGLE);f(i).trigger("focus")}f(this).trigger("click");return}var a=[].slice.call(r.querySelectorAll(y.VISIBLE_ITEMS));if(a.length===0){return}var o=a.indexOf(t.target);if(t.which===u&&o>0){o--}if(t.which===p&&o<a.length-1){o++}if(o<0){o=0}a[o].focus()};S(c,null,[{key:"VERSION",get:function e(){return t}},{key:"Default",get:function e(){return o}},{key:"DefaultType",get:function e(){return b}}]);return c}();f(document).on(m.KEYDOWN_DATA_API,y.DATA_TOGGLE,c._dataApiKeydownHandler).on(m.KEYDOWN_DATA_API,y.MENU,c._dataApiKeydownHandler).on(m.CLICK_DATA_API+" "+m.KEYUP_DATA_API,c._clearMenus).on(m.CLICK_DATA_API,y.DATA_TOGGLE,function(e){e.preventDefault();e.stopPropagation();c._jQueryInterface.call(f(this),"toggle")}).on(m.CLICK_DATA_API,y.FORM_CHILD,function(e){e.stopPropagation()});f.fn[r]=c._jQueryInterface;f.fn[r].Constructor=c;f.fn[r].noConflict=function(){f.fn[r]=i;return c._jQueryInterface};return c}(t,w);var u=function(s){var r="modal";var t="4.1.3";var o="bs.modal";var n="."+o;var e=".data-api";var i=s.fn[r];var a=27;var l={backdrop:true,keyboard:true,focus:true,show:true};var u={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"};var c={HIDE:"hide"+n,HIDDEN:"hidden"+n,SHOW:"show"+n,SHOWN:"shown"+n,FOCUSIN:"focusin"+n,RESIZE:"resize"+n,CLICK_DISMISS:"click.dismiss"+n,KEYDOWN_DISMISS:"keydown.dismiss"+n,MOUSEUP_DISMISS:"mouseup.dismiss"+n,MOUSEDOWN_DISMISS:"mousedown.dismiss"+n,CLICK_DATA_API:"click"+n+e};var f={SCROLLBAR_MEASURER:"modal-scrollbar-measure",BACKDROP:"modal-backdrop",OPEN:"modal-open",FADE:"fade",SHOW:"show"};var h={DIALOG:".modal-dialog",DATA_TOGGLE:'[data-toggle="modal"]',DATA_DISMISS:'[data-dismiss="modal"]',FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top"};var d=function(){function i(e,t){this._config=this._getConfig(t);this._element=e;this._dialog=e.querySelector(h.DIALOG);this._backdrop=null;this._isShown=false;this._isBodyOverflowing=false;this._ignoreBackdropClick=false;this._scrollbarWidth=0}var e=i.prototype;e.toggle=function e(t){return this._isShown?this.hide():this.show(t)};e.show=function e(t){var r=this;if(this._isTransitioning||this._isShown){return}if(s(this._element).hasClass(f.FADE)){this._isTransitioning=true}var n=s.Event(c.SHOW,{relatedTarget:t});s(this._element).trigger(n);if(this._isShown||n.isDefaultPrevented()){return}this._isShown=true;this._checkScrollbar();this._setScrollbar();this._adjustDialog();s(document.body).addClass(f.OPEN);this._setEscapeEvent();this._setResizeEvent();s(this._element).on(c.CLICK_DISMISS,h.DATA_DISMISS,function(e){return r.hide(e)});s(this._dialog).on(c.MOUSEDOWN_DISMISS,function(){s(r._element).one(c.MOUSEUP_DISMISS,function(e){if(s(e.target).is(r._element)){r._ignoreBackdropClick=true}})});this._showBackdrop(function(){return r._showElement(t)})};e.hide=function e(t){var r=this;if(t){t.preventDefault()}if(this._isTransitioning||!this._isShown){return}var n=s.Event(c.HIDE);s(this._element).trigger(n);if(!this._isShown||n.isDefaultPrevented()){return}this._isShown=false;var i=s(this._element).hasClass(f.FADE);if(i){this._isTransitioning=true}this._setEscapeEvent();this._setResizeEvent();s(document).off(c.FOCUSIN);s(this._element).removeClass(f.SHOW);s(this._element).off(c.CLICK_DISMISS);s(this._dialog).off(c.MOUSEDOWN_DISMISS);if(i){var a=O.getTransitionDurationFromElement(this._element);s(this._element).one(O.TRANSITION_END,function(e){return r._hideModal(e)}).emulateTransitionEnd(a)}else{this._hideModal()}};e.dispose=function e(){s.removeData(this._element,o);s(window,document,this._element,this._backdrop).off(n);this._config=null;this._element=null;this._dialog=null;this._backdrop=null;this._isShown=null;this._isBodyOverflowing=null;this._ignoreBackdropClick=null;this._scrollbarWidth=null};e.handleUpdate=function e(){this._adjustDialog()};e._getConfig=function e(t){t=C({},l,t);O.typeCheckConfig(r,t,u);return t};e._showElement=function e(t){var r=this;var n=s(this._element).hasClass(f.FADE);if(!this._element.parentNode||this._element.parentNode.nodeType!==Node.ELEMENT_NODE){document.body.appendChild(this._element)}this._element.style.display="block";this._element.removeAttribute("aria-hidden");this._element.scrollTop=0;if(n){O.reflow(this._element)}s(this._element).addClass(f.SHOW);if(this._config.focus){this._enforceFocus()}var i=s.Event(c.SHOWN,{relatedTarget:t});var a=function e(){if(r._config.focus){r._element.focus()}r._isTransitioning=false;s(r._element).trigger(i)};if(n){var o=O.getTransitionDurationFromElement(this._element);s(this._dialog).one(O.TRANSITION_END,a).emulateTransitionEnd(o)}else{a()}};e._enforceFocus=function e(){var t=this;s(document).off(c.FOCUSIN).on(c.FOCUSIN,function(e){if(document!==e.target&&t._element!==e.target&&s(t._element).has(e.target).length===0){t._element.focus()}})};e._setEscapeEvent=function e(){var t=this;if(this._isShown&&this._config.keyboard){s(this._element).on(c.KEYDOWN_DISMISS,function(e){if(e.which===a){e.preventDefault();t.hide()}})}else if(!this._isShown){s(this._element).off(c.KEYDOWN_DISMISS)}};e._setResizeEvent=function e(){var t=this;if(this._isShown){s(window).on(c.RESIZE,function(e){return t.handleUpdate(e)})}else{s(window).off(c.RESIZE)}};e._hideModal=function e(){var t=this;this._element.style.display="none";this._element.setAttribute("aria-hidden",true);this._isTransitioning=false;this._showBackdrop(function(){s(document.body).removeClass(f.OPEN);t._resetAdjustments();t._resetScrollbar();s(t._element).trigger(c.HIDDEN)})};e._removeBackdrop=function e(){if(this._backdrop){s(this._backdrop).remove();this._backdrop=null}};e._showBackdrop=function e(t){var r=this;var n=s(this._element).hasClass(f.FADE)?f.FADE:"";if(this._isShown&&this._config.backdrop){this._backdrop=document.createElement("div");this._backdrop.className=f.BACKDROP;if(n){this._backdrop.classList.add(n)}s(this._backdrop).appendTo(document.body);s(this._element).on(c.CLICK_DISMISS,function(e){if(r._ignoreBackdropClick){r._ignoreBackdropClick=false;return}if(e.target!==e.currentTarget){return}if(r._config.backdrop==="static"){r._element.focus()}else{r.hide()}});if(n){O.reflow(this._backdrop)}s(this._backdrop).addClass(f.SHOW);if(!t){return}if(!n){t();return}var i=O.getTransitionDurationFromElement(this._backdrop);s(this._backdrop).one(O.TRANSITION_END,t).emulateTransitionEnd(i)}else if(!this._isShown&&this._backdrop){s(this._backdrop).removeClass(f.SHOW);var a=function e(){r._removeBackdrop();if(t){t()}};if(s(this._element).hasClass(f.FADE)){var o=O.getTransitionDurationFromElement(this._backdrop);s(this._backdrop).one(O.TRANSITION_END,a).emulateTransitionEnd(o)}else{a()}}else if(t){t()}};e._adjustDialog=function e(){var t=this._element.scrollHeight>document.documentElement.clientHeight;if(!this._isBodyOverflowing&&t){this._element.style.paddingLeft=this._scrollbarWidth+"px"}if(this._isBodyOverflowing&&!t){this._element.style.paddingRight=this._scrollbarWidth+"px"}};e._resetAdjustments=function e(){this._element.style.paddingLeft="";this._element.style.paddingRight=""};e._checkScrollbar=function e(){var t=document.body.getBoundingClientRect();this._isBodyOverflowing=t.left+t.right<window.innerWidth;this._scrollbarWidth=this._getScrollbarWidth()};e._setScrollbar=function e(){var i=this;if(this._isBodyOverflowing){var t=[].slice.call(document.querySelectorAll(h.FIXED_CONTENT));var r=[].slice.call(document.querySelectorAll(h.STICKY_CONTENT));s(t).each(function(e,t){var r=t.style.paddingRight;var n=s(t).css("padding-right");s(t).data("padding-right",r).css("padding-right",parseFloat(n)+i._scrollbarWidth+"px")});s(r).each(function(e,t){var r=t.style.marginRight;var n=s(t).css("margin-right");s(t).data("margin-right",r).css("margin-right",parseFloat(n)-i._scrollbarWidth+"px")});var n=document.body.style.paddingRight;var a=s(document.body).css("padding-right");s(document.body).data("padding-right",n).css("padding-right",parseFloat(a)+this._scrollbarWidth+"px")}};e._resetScrollbar=function e(){var t=[].slice.call(document.querySelectorAll(h.FIXED_CONTENT));s(t).each(function(e,t){var r=s(t).data("padding-right");s(t).removeData("padding-right");t.style.paddingRight=r?r:""});var r=[].slice.call(document.querySelectorAll(""+h.STICKY_CONTENT));s(r).each(function(e,t){var r=s(t).data("margin-right");if(typeof r!=="undefined"){s(t).css("margin-right",r).removeData("margin-right")}});var n=s(document.body).data("padding-right");s(document.body).removeData("padding-right");document.body.style.paddingRight=n?n:""};e._getScrollbarWidth=function e(){var t=document.createElement("div");t.className=f.SCROLLBAR_MEASURER;document.body.appendChild(t);var r=t.getBoundingClientRect().width-t.clientWidth;document.body.removeChild(t);return r};i._jQueryInterface=function e(r,n){return this.each(function(){var e=s(this).data(o);var t=C({},l,s(this).data(),typeof r==="object"&&r?r:{});if(!e){e=new i(this,t);s(this).data(o,e)}if(typeof r==="string"){if(typeof e[r]==="undefined"){throw new TypeError('No method named "'+r+'"')}e[r](n)}else if(t.show){e.show(n)}})};S(i,null,[{key:"VERSION",get:function e(){return t}},{key:"Default",get:function e(){return l}}]);return i}();s(document).on(c.CLICK_DATA_API,h.DATA_TOGGLE,function(e){var t=this;var r;var n=O.getSelectorFromElement(this);if(n){r=document.querySelector(n)}var i=s(r).data(o)?"toggle":C({},s(r).data(),s(this).data());if(this.tagName==="A"||this.tagName==="AREA"){e.preventDefault()}var a=s(r).one(c.SHOW,function(e){if(e.isDefaultPrevented()){return}a.one(c.HIDDEN,function(){if(s(t).is(":visible")){t.focus()}})});d._jQueryInterface.call(s(r),i,this)});s.fn[r]=d._jQueryInterface;s.fn[r].Constructor=d;s.fn[r].noConflict=function(){s.fn[r]=i;return d._jQueryInterface};return d}(t);var g=function(f){var r="tooltip";var t="4.1.3";var i="bs.tooltip";var a="."+i;var e=f.fn[r];var o="bs-tooltip";var s=new RegExp("(^|\\s)"+o+"\\S+","g");var l={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)"};var u={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"};var c={animation:true,template:'<div class="tooltip" role="tooltip">'+'<div class="arrow"></div>'+'<div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:false,selector:false,placement:"top",offset:0,container:false,fallbackPlacement:"flip",boundary:"scrollParent"};var h={SHOW:"show",OUT:"out"};var d={HIDE:"hide"+a,HIDDEN:"hidden"+a,SHOW:"show"+a,SHOWN:"shown"+a,INSERTED:"inserted"+a,CLICK:"click"+a,FOCUSIN:"focusin"+a,FOCUSOUT:"focusout"+a,MOUSEENTER:"mouseenter"+a,MOUSELEAVE:"mouseleave"+a};var p={FADE:"fade",SHOW:"show"};var v={TOOLTIP:".tooltip",TOOLTIP_INNER:".tooltip-inner",ARROW:".arrow"};var g={HOVER:"hover",FOCUS:"focus",CLICK:"click",MANUAL:"manual"};var n=function(){function n(e,t){if(typeof w==="undefined"){throw new TypeError("Bootstrap tooltips require Popper.js (https://popper.js.org)")}this._isEnabled=true;this._timeout=0;this._hoverState="";this._activeTrigger={};this._popper=null;this.element=e;this.config=this._getConfig(t);this.tip=null;this._setListeners()}var e=n.prototype;e.enable=function e(){this._isEnabled=true};e.disable=function e(){this._isEnabled=false};e.toggleEnabled=function e(){this._isEnabled=!this._isEnabled};e.toggle=function e(t){if(!this._isEnabled){return}if(t){var r=this.constructor.DATA_KEY;var n=f(t.currentTarget).data(r);if(!n){n=new this.constructor(t.currentTarget,this._getDelegateConfig());f(t.currentTarget).data(r,n)}n._activeTrigger.click=!n._activeTrigger.click;if(n._isWithActiveTrigger()){n._enter(null,n)}else{n._leave(null,n)}}else{if(f(this.getTipElement()).hasClass(p.SHOW)){this._leave(null,this);return}this._enter(null,this)}};e.dispose=function e(){clearTimeout(this._timeout);f.removeData(this.element,this.constructor.DATA_KEY);f(this.element).off(this.constructor.EVENT_KEY);f(this.element).closest(".modal").off("hide.bs.modal");if(this.tip){f(this.tip).remove()}this._isEnabled=null;this._timeout=null;this._hoverState=null;this._activeTrigger=null;if(this._popper!==null){this._popper.destroy()}this._popper=null;this.element=null;this.config=null;this.tip=null};e.show=function e(){var r=this;if(f(this.element).css("display")==="none"){throw new Error("Please use show on visible elements")}var t=f.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){f(this.element).trigger(t);var n=f.contains(this.element.ownerDocument.documentElement,this.element);if(t.isDefaultPrevented()||!n){return}var i=this.getTipElement();var a=O.getUID(this.constructor.NAME);i.setAttribute("id",a);this.element.setAttribute("aria-describedby",a);this.setContent();if(this.config.animation){f(i).addClass(p.FADE)}var o=typeof this.config.placement==="function"?this.config.placement.call(this,i,this.element):this.config.placement;var s=this._getAttachment(o);this.addAttachmentClass(s);var l=this.config.container===false?document.body:f(document).find(this.config.container);f(i).data(this.constructor.DATA_KEY,this);if(!f.contains(this.element.ownerDocument.documentElement,this.tip)){f(i).appendTo(l)}f(this.element).trigger(this.constructor.Event.INSERTED);this._popper=new w(this.element,i,{placement:s,modifiers:{offset:{offset:this.config.offset},flip:{behavior:this.config.fallbackPlacement},arrow:{element:v.ARROW},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function e(t){if(t.originalPlacement!==t.placement){r._handlePopperPlacementChange(t)}},onUpdate:function e(t){r._handlePopperPlacementChange(t)}});f(i).addClass(p.SHOW);if("ontouchstart"in document.documentElement){f(document.body).children().on("mouseover",null,f.noop)}var u=function e(){if(r.config.animation){r._fixTransition()}var t=r._hoverState;r._hoverState=null;f(r.element).trigger(r.constructor.Event.SHOWN);if(t===h.OUT){r._leave(null,r)}};if(f(this.tip).hasClass(p.FADE)){var c=O.getTransitionDurationFromElement(this.tip);f(this.tip).one(O.TRANSITION_END,u).emulateTransitionEnd(c)}else{u()}}};e.hide=function e(t){var r=this;var n=this.getTipElement();var i=f.Event(this.constructor.Event.HIDE);var a=function e(){if(r._hoverState!==h.SHOW&&n.parentNode){n.parentNode.removeChild(n)}r._cleanTipClass();r.element.removeAttribute("aria-describedby");f(r.element).trigger(r.constructor.Event.HIDDEN);if(r._popper!==null){r._popper.destroy()}if(t){t()}};f(this.element).trigger(i);if(i.isDefaultPrevented()){return}f(n).removeClass(p.SHOW);if("ontouchstart"in document.documentElement){f(document.body).children().off("mouseover",null,f.noop)}this._activeTrigger[g.CLICK]=false;this._activeTrigger[g.FOCUS]=false;this._activeTrigger[g.HOVER]=false;if(f(this.tip).hasClass(p.FADE)){var o=O.getTransitionDurationFromElement(n);f(n).one(O.TRANSITION_END,a).emulateTransitionEnd(o)}else{a()}this._hoverState=""};e.update=function e(){if(this._popper!==null){this._popper.scheduleUpdate()}};e.isWithContent=function e(){return Boolean(this.getTitle())};e.addAttachmentClass=function e(t){f(this.getTipElement()).addClass(o+"-"+t)};e.getTipElement=function e(){this.tip=this.tip||f(this.config.template)[0];return this.tip};e.setContent=function e(){var t=this.getTipElement();this.setElementContent(f(t.querySelectorAll(v.TOOLTIP_INNER)),this.getTitle());f(t).removeClass(p.FADE+" "+p.SHOW)};e.setElementContent=function e(t,r){var n=this.config.html;if(typeof r==="object"&&(r.nodeType||r.jquery)){if(n){if(!f(r).parent().is(t)){t.empty().append(r)}}else{t.text(f(r).text())}}else{t[n?"html":"text"](r)}};e.getTitle=function e(){var t=this.element.getAttribute("data-original-title");if(!t){t=typeof this.config.title==="function"?this.config.title.call(this.element):this.config.title}return t};e._getAttachment=function e(t){return u[t.toUpperCase()]};e._setListeners=function e(){var n=this;var t=this.config.trigger.split(" ");t.forEach(function(e){if(e==="click"){f(n.element).on(n.constructor.Event.CLICK,n.config.selector,function(e){return n.toggle(e)})}else if(e!==g.MANUAL){var t=e===g.HOVER?n.constructor.Event.MOUSEENTER:n.constructor.Event.FOCUSIN;var r=e===g.HOVER?n.constructor.Event.MOUSELEAVE:n.constructor.Event.FOCUSOUT;f(n.element).on(t,n.config.selector,function(e){return n._enter(e)}).on(r,n.config.selector,function(e){return n._leave(e)})}f(n.element).closest(".modal").on("hide.bs.modal",function(){return n.hide()})});if(this.config.selector){this.config=C({},this.config,{trigger:"manual",selector:""})}else{this._fixTitle()}};e._fixTitle=function e(){var t=typeof this.element.getAttribute("data-original-title");if(this.element.getAttribute("title")||t!=="string"){this.element.setAttribute("data-original-title",this.element.getAttribute("title")||"");this.element.setAttribute("title","")}};e._enter=function e(t,r){var n=this.constructor.DATA_KEY;r=r||f(t.currentTarget).data(n);if(!r){r=new this.constructor(t.currentTarget,this._getDelegateConfig());f(t.currentTarget).data(n,r)}if(t){r._activeTrigger[t.type==="focusin"?g.FOCUS:g.HOVER]=true}if(f(r.getTipElement()).hasClass(p.SHOW)||r._hoverState===h.SHOW){r._hoverState=h.SHOW;return}clearTimeout(r._timeout);r._hoverState=h.SHOW;if(!r.config.delay||!r.config.delay.show){r.show();return}r._timeout=setTimeout(function(){if(r._hoverState===h.SHOW){r.show()}},r.config.delay.show)};e._leave=function e(t,r){var n=this.constructor.DATA_KEY;r=r||f(t.currentTarget).data(n);if(!r){r=new this.constructor(t.currentTarget,this._getDelegateConfig());f(t.currentTarget).data(n,r)}if(t){r._activeTrigger[t.type==="focusout"?g.FOCUS:g.HOVER]=false}if(r._isWithActiveTrigger()){return}clearTimeout(r._timeout);r._hoverState=h.OUT;if(!r.config.delay||!r.config.delay.hide){r.hide();return}r._timeout=setTimeout(function(){if(r._hoverState===h.OUT){r.hide()}},r.config.delay.hide)};e._isWithActiveTrigger=function e(){for(var t in this._activeTrigger){if(this._activeTrigger[t]){return true}}return false};e._getConfig=function e(t){t=C({},this.constructor.Default,f(this.element).data(),typeof t==="object"&&t?t:{});if(typeof t.delay==="number"){t.delay={show:t.delay,hide:t.delay}}if(typeof t.title==="number"){t.title=t.title.toString()}if(typeof t.content==="number"){t.content=t.content.toString()}O.typeCheckConfig(r,t,this.constructor.DefaultType);return t};e._getDelegateConfig=function e(){var t={};if(this.config){for(var r in this.config){if(this.constructor.Default[r]!==this.config[r]){t[r]=this.config[r]}}}return t};e._cleanTipClass=function e(){var t=f(this.getTipElement());var r=t.attr("class").match(s);if(r!==null&&r.length){t.removeClass(r.join(""))}};e._handlePopperPlacementChange=function e(t){var r=t.instance;this.tip=r.popper;this._cleanTipClass();this.addAttachmentClass(this._getAttachment(t.placement))};e._fixTransition=function e(){var t=this.getTipElement();var r=this.config.animation;if(t.getAttribute("x-placement")!==null){return}f(t).removeClass(p.FADE);this.config.animation=false;this.hide();this.show();this.config.animation=r};n._jQueryInterface=function e(r){return this.each(function(){var e=f(this).data(i);var t=typeof r==="object"&&r;if(!e&&/dispose|hide/.test(r)){return}if(!e){e=new n(this,t);f(this).data(i,e)}if(typeof r==="string"){if(typeof e[r]==="undefined"){throw new TypeError('No method named "'+r+'"')}e[r]()}})};S(n,null,[{key:"VERSION",get:function e(){return t}},{key:"Default",get:function e(){return c}},{key:"NAME",get:function e(){return r}},{key:"DATA_KEY",get:function e(){return i}},{key:"Event",get:function e(){return d}},{key:"EVENT_KEY",get:function e(){return a}},{key:"DefaultType",get:function e(){return l}}]);return n}();f.fn[r]=n._jQueryInterface;f.fn[r].Constructor=n;f.fn[r].noConflict=function(){f.fn[r]=e;return n._jQueryInterface};return n}(t,w);var c=function(i){var r="popover";var a="4.1.3";var o="bs.popover";var s="."+o;var e=i.fn[r];var l="bs-popover";var u=new RegExp("(^|\\s)"+l+"\\S+","g");var c=C({},g.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip">'+'<div class="arrow"></div>'+'<h3 class="popover-header"></h3>'+'<div class="popover-body"></div></div>'});var f=C({},g.DefaultType,{content:"(string|element|function)"});var h={FADE:"fade",SHOW:"show"};var d={TITLE:".popover-header",CONTENT:".popover-body"};var p={HIDE:"hide"+s,HIDDEN:"hidden"+s,SHOW:"show"+s,SHOWN:"shown"+s,INSERTED:"inserted"+s,CLICK:"click"+s,FOCUSIN:"focusin"+s,FOCUSOUT:"focusout"+s,MOUSEENTER:"mouseenter"+s,MOUSELEAVE:"mouseleave"+s};var t=function(e){v(n,e);function n(){return e.apply(this,arguments)||this}var t=n.prototype;t.isWithContent=function e(){return this.getTitle()||this._getContent()};t.addAttachmentClass=function e(t){i(this.getTipElement()).addClass(l+"-"+t)};t.getTipElement=function e(){this.tip=this.tip||i(this.config.template)[0];return this.tip};t.setContent=function e(){var t=i(this.getTipElement());this.setElementContent(t.find(d.TITLE),this.getTitle());var r=this._getContent();if(typeof r==="function"){r=r.call(this.element)}this.setElementContent(t.find(d.CONTENT),r);t.removeClass(h.FADE+" "+h.SHOW)};t._getContent=function e(){return this.element.getAttribute("data-content")||this.config.content};t._cleanTipClass=function e(){var t=i(this.getTipElement());var r=t.attr("class").match(u);if(r!==null&&r.length>0){t.removeClass(r.join(""))}};n._jQueryInterface=function e(r){return this.each(function(){var e=i(this).data(o);var t=typeof r==="object"?r:null;if(!e&&/destroy|hide/.test(r)){return}if(!e){e=new n(this,t);i(this).data(o,e)}if(typeof r==="string"){if(typeof e[r]==="undefined"){throw new TypeError('No method named "'+r+'"')}e[r]()}})};S(n,null,[{key:"VERSION",get:function e(){return a}},{key:"Default",get:function e(){return c}},{key:"NAME",get:function e(){return r}},{key:"DATA_KEY",get:function e(){return o}},{key:"Event",get:function e(){return p}},{key:"EVENT_KEY",get:function e(){return s}},{key:"DefaultType",get:function e(){return f}}]);return n}(g);i.fn[r]=t._jQueryInterface;i.fn[r].Constructor=t;i.fn[r].noConflict=function(){i.fn[r]=e;return t._jQueryInterface};return t}(t);var f=function(o){var i="scrollspy";var t="4.1.3";var a="bs.scrollspy";var r="."+a;var e=".data-api";var n=o.fn[i];var s={offset:10,method:"auto",target:""};var l={offset:"number",method:"string",target:"(string|element)"};var u={ACTIVATE:"activate"+r,SCROLL:"scroll"+r,LOAD_DATA_API:"load"+r+e};var c={DROPDOWN_ITEM:"dropdown-item",DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active"};var f={DATA_SPY:'[data-spy="scroll"]',ACTIVE:".active",NAV_LIST_GROUP:".nav, .list-group",NAV_LINKS:".nav-link",NAV_ITEMS:".nav-item",LIST_ITEMS:".list-group-item",DROPDOWN:".dropdown",DROPDOWN_ITEMS:".dropdown-item",DROPDOWN_TOGGLE:".dropdown-toggle"};var h={OFFSET:"offset",POSITION:"position"};var d=function(){function n(e,t){var r=this;this._element=e;this._scrollElement=e.tagName==="BODY"?window:e;this._config=this._getConfig(t);this._selector=this._config.target+" "+f.NAV_LINKS+","+(this._config.target+" "+f.LIST_ITEMS+",")+(this._config.target+" "+f.DROPDOWN_ITEMS);this._offsets=[];this._targets=[];this._activeTarget=null;this._scrollHeight=0;o(this._scrollElement).on(u.SCROLL,function(e){return r._process(e)});this.refresh();this._process()}var e=n.prototype;e.refresh=function e(){var t=this;var r=this._scrollElement===this._scrollElement.window?h.OFFSET:h.POSITION;var i=this._config.method==="auto"?r:this._config.method;var a=i===h.POSITION?this._getScrollTop():0;this._offsets=[];this._targets=[];this._scrollHeight=this._getScrollHeight();var n=[].slice.call(document.querySelectorAll(this._selector));n.map(function(e){var t;var r=O.getSelectorFromElement(e);if(r){t=document.querySelector(r)}if(t){var n=t.getBoundingClientRect();if(n.width||n.height){return[o(t)[i]().top+a,r]}}return null}).filter(function(e){return e}).sort(function(e,t){return e[0]-t[0]}).forEach(function(e){t._offsets.push(e[0]);t._targets.push(e[1])})};e.dispose=function e(){o.removeData(this._element,a);o(this._scrollElement).off(r);this._element=null;this._scrollElement=null;this._config=null;this._selector=null;this._offsets=null;this._targets=null;this._activeTarget=null;this._scrollHeight=null};e._getConfig=function e(t){t=C({},s,typeof t==="object"&&t?t:{});if(typeof t.target!=="string"){var r=o(t.target).attr("id");if(!r){r=O.getUID(i);o(t.target).attr("id",r)}t.target="#"+r}O.typeCheckConfig(i,t,l);return t};e._getScrollTop=function e(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop};e._getScrollHeight=function e(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)};e._getOffsetHeight=function e(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height};e._process=function e(){var t=this._getScrollTop()+this._config.offset;var r=this._getScrollHeight();var n=this._config.offset+r-this._getOffsetHeight();if(this._scrollHeight!==r){this.refresh()}if(t>=n){var i=this._targets[this._targets.length-1];if(this._activeTarget!==i){this._activate(i)}return}if(this._activeTarget&&t<this._offsets[0]&&this._offsets[0]>0){this._activeTarget=null;this._clear();return}var a=this._offsets.length;for(var o=a;o--;){var s=this._activeTarget!==this._targets[o]&&t>=this._offsets[o]&&(typeof this._offsets[o+1]==="undefined"||t<this._offsets[o+1]);if(s){this._activate(this._targets[o])}}};e._activate=function e(t){this._activeTarget=t;this._clear();var r=this._selector.split(",");r=r.map(function(e){return e+'[data-target="'+t+'"],'+(e+'[href="'+t+'"]')});var n=o([].slice.call(document.querySelectorAll(r.join(","))));if(n.hasClass(c.DROPDOWN_ITEM)){n.closest(f.DROPDOWN).find(f.DROPDOWN_TOGGLE).addClass(c.ACTIVE);n.addClass(c.ACTIVE)}else{n.addClass(c.ACTIVE);n.parents(f.NAV_LIST_GROUP).prev(f.NAV_LINKS+", "+f.LIST_ITEMS).addClass(c.ACTIVE);n.parents(f.NAV_LIST_GROUP).prev(f.NAV_ITEMS).children(f.NAV_LINKS).addClass(c.ACTIVE)}o(this._scrollElement).trigger(u.ACTIVATE,{relatedTarget:t})};e._clear=function e(){var t=[].slice.call(document.querySelectorAll(this._selector));o(t).filter(f.ACTIVE).removeClass(c.ACTIVE)};n._jQueryInterface=function e(r){return this.each(function(){var e=o(this).data(a);var t=typeof r==="object"&&r;if(!e){e=new n(this,t);o(this).data(a,e)}if(typeof r==="string"){if(typeof e[r]==="undefined"){throw new TypeError('No method named "'+r+'"')}e[r]()}})};S(n,null,[{key:"VERSION",get:function e(){return t}},{key:"Default",get:function e(){return s}}]);return n}();o(window).on(u.LOAD_DATA_API,function(){var e=[].slice.call(document.querySelectorAll(f.DATA_SPY));var t=e.length;for(var r=t;r--;){var n=o(e[r]);d._jQueryInterface.call(n,n.data())}});o.fn[i]=d._jQueryInterface;o.fn[i].Constructor=d;o.fn[i].noConflict=function(){o.fn[i]=n;return d._jQueryInterface};return d}(t);var h=function(c){var e="tab";var t="4.1.3";var i="bs.tab";var r="."+i;var n=".data-api";var a=c.fn[e];var f={HIDE:"hide"+r,HIDDEN:"hidden"+r,SHOW:"show"+r,SHOWN:"shown"+r,CLICK_DATA_API:"click"+r+n};var h={DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active",DISABLED:"disabled",FADE:"fade",SHOW:"show"};var d={DROPDOWN:".dropdown",NAV_LIST_GROUP:".nav, .list-group",ACTIVE:".active",ACTIVE_UL:"> li > .active",DATA_TOGGLE:'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',DROPDOWN_TOGGLE:".dropdown-toggle",DROPDOWN_ACTIVE_CHILD:"> .dropdown-menu .active"};var o=function(){function n(e){this._element=e}var e=n.prototype;e.show=function e(){var n=this;if(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&c(this._element).hasClass(h.ACTIVE)||c(this._element).hasClass(h.DISABLED)){return}var t;var i;var r=c(this._element).closest(d.NAV_LIST_GROUP)[0];var a=O.getSelectorFromElement(this._element);if(r){var o=r.nodeName==="UL"?d.ACTIVE_UL:d.ACTIVE;i=c.makeArray(c(r).find(o));i=i[i.length-1]}var s=c.Event(f.HIDE,{relatedTarget:this._element});var l=c.Event(f.SHOW,{relatedTarget:i});if(i){c(i).trigger(s)}c(this._element).trigger(l);if(l.isDefaultPrevented()||s.isDefaultPrevented()){return}if(a){t=document.querySelector(a)}this._activate(this._element,r);var u=function e(){var t=c.Event(f.HIDDEN,{relatedTarget:n._element});var r=c.Event(f.SHOWN,{relatedTarget:i});c(i).trigger(t);c(n._element).trigger(r)};if(t){this._activate(t,t.parentNode,u)}else{u()}};e.dispose=function e(){c.removeData(this._element,i);this._element=null};e._activate=function e(t,r,n){var i=this;var a;if(r.nodeName==="UL"){a=c(r).find(d.ACTIVE_UL)}else{a=c(r).children(d.ACTIVE)}var o=a[0];var s=n&&o&&c(o).hasClass(h.FADE);var l=function e(){return i._transitionComplete(t,o,n)};if(o&&s){var u=O.getTransitionDurationFromElement(o);c(o).one(O.TRANSITION_END,l).emulateTransitionEnd(u)}else{l()}};e._transitionComplete=function e(t,r,n){if(r){c(r).removeClass(h.SHOW+" "+h.ACTIVE);var i=c(r.parentNode).find(d.DROPDOWN_ACTIVE_CHILD)[0];if(i){c(i).removeClass(h.ACTIVE)}if(r.getAttribute("role")==="tab"){r.setAttribute("aria-selected",false)}}c(t).addClass(h.ACTIVE);if(t.getAttribute("role")==="tab"){t.setAttribute("aria-selected",true)}O.reflow(t);c(t).addClass(h.SHOW);if(t.parentNode&&c(t.parentNode).hasClass(h.DROPDOWN_MENU)){var a=c(t).closest(d.DROPDOWN)[0];if(a){var o=[].slice.call(a.querySelectorAll(d.DROPDOWN_TOGGLE));c(o).addClass(h.ACTIVE)}t.setAttribute("aria-expanded",true)}if(n){n()}};n._jQueryInterface=function e(r){return this.each(function(){var e=c(this);var t=e.data(i);if(!t){t=new n(this);e.data(i,t)}if(typeof r==="string"){if(typeof t[r]==="undefined"){throw new TypeError('No method named "'+r+'"')}t[r]()}})};S(n,null,[{key:"VERSION",get:function e(){return t}}]);return n}();c(document).on(f.CLICK_DATA_API,d.DATA_TOGGLE,function(e){e.preventDefault();o._jQueryInterface.call(c(this),"show")});c.fn[e]=o._jQueryInterface;c.fn[e].Constructor=o;c.fn[e].noConflict=function(){c.fn[e]=a;return o._jQueryInterface};return o}(t);(function(e){if(typeof e==="undefined"){throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.")}var t=e.fn.jquery.split(" ")[0].split(".");var r=1;var n=2;var i=9;var a=1;var o=4;if(t[0]<n&&t[1]<i||t[0]===r&&t[1]===i&&t[2]<a||t[0]>=o){throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}})(t);e.Util=O;e.Alert=r;e.Button=a;e.Carousel=o;e.Collapse=s;e.Dropdown=l;e.Modal=u;e.Popover=c;e.Scrollspy=f;e.Tab=h;e.Tooltip=g;Object.defineProperty(e,"__esModule",{value:true})})},function(e,t){},function(e,t){},function(t,r,n){var i,a,o;(function(e){if(true){!(a=[n(27),n(296),n(389),n(390),n(426),n(427),n(391),n(117),n(247)],i=e,o=typeof i==="function"?i.apply(r,a):i,o!==undefined&&(t.exports=o))}else{}})(function(b){b.widget("ui.draggable",b.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false,drag:null,start:null,stop:null},_create:function e(){if(this.options.helper==="original"){this._setPositionRelative()}if(this.options.addClasses){this._addClass("ui-draggable")}this._setHandleClassName();this._mouseInit()},_setOption:function e(t,r){this._super(t,r);if(t==="handle"){this._removeHandleClassName();this._setHandleClassName()}},_destroy:function e(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=true;return}this._removeHandleClassName();this._mouseDestroy()},_mouseCapture:function e(t){var r=this.options;if(this.helper||r.disabled||b(t.target).closest(".ui-resizable-handle").length>0){return false}this.handle=this._getHandle(t);if(!this.handle){return false}this._blurActiveElement(t);this._blockFrames(r.iframeFix===true?"iframe":r.iframeFix);return true},_blockFrames:function e(t){this.iframeBlocks=this.document.find(t).map(function(){var e=b(this);return b("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function e(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks}},_blurActiveElement:function e(t){var r=b.ui.safeActiveElement(this.document[0]),n=b(t.target);if(n.closest(r).length){return}b.ui.safeBlur(r)},_mouseStart:function e(t){var r=this.options;this.helper=this._createHelper(t);this._addClass(this.helper,"ui-draggable-dragging");this._cacheHelperProportions();if(b.ui.ddmanager){b.ui.ddmanager.current=this}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent(true);this.offsetParent=this.helper.offsetParent();this.hasFixedAncestor=this.helper.parents().filter(function(){return b(this).css("position")==="fixed"}).length>0;this.positionAbs=this.element.offset();this._refreshOffsets(t);this.originalPosition=this.position=this._generatePosition(t,false);this.originalPageX=t.pageX;this.originalPageY=t.pageY;r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt);this._setContainment();if(this._trigger("start",t)===false){this._clear();return false}this._cacheHelperProportions();if(b.ui.ddmanager&&!r.dropBehaviour){b.ui.ddmanager.prepareOffsets(this,t)}this._mouseDrag(t,true);if(b.ui.ddmanager){b.ui.ddmanager.dragStart(this,t)}return true},_refreshOffsets:function e(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:false,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function e(t,r){if(this.hasFixedAncestor){this.offset.parent=this._getParentOffset()}this.position=this._generatePosition(t,true);this.positionAbs=this._convertPositionTo("absolute");if(!r){var n=this._uiHash();if(this._trigger("drag",t,n)===false){this._mouseUp(new b.Event("mouseup",t));return false}this.position=n.position}this.helper[0].style.left=this.position.left+"px";this.helper[0].style.top=this.position.top+"px";if(b.ui.ddmanager){b.ui.ddmanager.drag(this,t)}return false},_mouseStop:function e(t){var r=this,n=false;if(b.ui.ddmanager&&!this.options.dropBehaviour){n=b.ui.ddmanager.drop(this,t)}if(this.dropped){n=this.dropped;this.dropped=false}if(this.options.revert==="invalid"&&!n||this.options.revert==="valid"&&n||this.options.revert===true||b.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){b(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(r._trigger("stop",t)!==false){r._clear()}})}else{if(this._trigger("stop",t)!==false){this._clear()}}return false},_mouseUp:function e(t){this._unblockFrames();if(b.ui.ddmanager){b.ui.ddmanager.dragStop(this,t)}if(this.handleElement.is(t.target)){this.element.trigger("focus")}return b.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function e(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp(new b.Event("mouseup",{target:this.element[0]}))}else{this._clear()}return this},_getHandle:function e(t){return this.options.handle?!!b(t.target).closest(this.element.find(this.options.handle)).length:true},_setHandleClassName:function e(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function e(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function e(t){var r=this.options,n=b.isFunction(r.helper),i=n?b(r.helper.apply(this.element[0],[t])):r.helper==="clone"?this.element.clone().removeAttr("id"):this.element;if(!i.parents("body").length){i.appendTo(r.appendTo==="parent"?this.element[0].parentNode:r.appendTo)}if(n&&i[0]===this.element[0]){this._setPositionRelative()}if(i[0]!==this.element[0]&&!/(fixed|absolute)/.test(i.css("position"))){i.css("position","absolute")}return i},_setPositionRelative:function e(){if(!/^(?:r|a|f)/.test(this.element.css("position"))){this.element[0].style.position="relative"}},_adjustOffsetFromHelper:function e(t){if(typeof t==="string"){t=t.split(" ")}if(b.isArray(t)){t={left:+t[0],top:+t[1]||0}}if("left"in t){this.offset.click.left=t.left+this.margins.left}if("right"in t){this.offset.click.left=this.helperProportions.width-t.right+this.margins.left}if("top"in t){this.offset.click.top=t.top+this.margins.top}if("bottom"in t){this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top}},_isRootNode:function e(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function e(){var t=this.offsetParent.offset(),r=this.document[0];if(this.cssPosition==="absolute"&&this.scrollParent[0]!==r&&b.contains(this.scrollParent[0],this.offsetParent[0])){t.left+=this.scrollParent.scrollLeft();t.top+=this.scrollParent.scrollTop()}if(this._isRootNode(this.offsetParent[0])){t={top:0,left:0}}return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function e(){if(this.cssPosition!=="relative"){return{top:0,left:0}}var t=this.element.position(),r=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(!r?this.scrollParent.scrollTop():0),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(!r?this.scrollParent.scrollLeft():0)}},_cacheMargins:function e(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function e(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function e(){var t,r,n,i=this.options,a=this.document[0];this.relativeContainer=null;if(!i.containment){this.containment=null;return}if(i.containment==="window"){this.containment=[b(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,b(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,b(window).scrollLeft()+b(window).width()-this.helperProportions.width-this.margins.left,b(window).scrollTop()+(b(window).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(i.containment==="document"){this.containment=[0,0,b(a).width()-this.helperProportions.width-this.margins.left,(b(a).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(i.containment.constructor===Array){this.containment=i.containment;return}if(i.containment==="parent"){i.containment=this.helper[0].parentNode}r=b(i.containment);n=r[0];if(!n){return}t=/(scroll|auto)/.test(r.css("overflow"));this.containment=[(parseInt(r.css("borderLeftWidth"),10)||0)+(parseInt(r.css("paddingLeft"),10)||0),(parseInt(r.css("borderTopWidth"),10)||0)+(parseInt(r.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(r.css("borderRightWidth"),10)||0)-(parseInt(r.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(r.css("borderBottomWidth"),10)||0)-(parseInt(r.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relativeContainer=r},_convertPositionTo:function e(t,r){if(!r){r=this.position}var n=t==="absolute"?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:r.top+this.offset.relative.top*n+this.offset.parent.top*n-(this.cssPosition==="fixed"?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:r.left+this.offset.relative.left*n+this.offset.parent.left*n-(this.cssPosition==="fixed"?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function e(t,r){var n,i,a,o,s=this.options,l=this._isRootNode(this.scrollParent[0]),u=t.pageX,c=t.pageY;if(!l||!this.offset.scroll){this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}}if(r){if(this.containment){if(this.relativeContainer){i=this.relativeContainer.offset();n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]}else{n=this.containment}if(t.pageX-this.offset.click.left<n[0]){u=n[0]+this.offset.click.left}if(t.pageY-this.offset.click.top<n[1]){c=n[1]+this.offset.click.top}if(t.pageX-this.offset.click.left>n[2]){u=n[2]+this.offset.click.left}if(t.pageY-this.offset.click.top>n[3]){c=n[3]+this.offset.click.top}}if(s.grid){a=s.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY;c=n?a-this.offset.click.top>=n[1]||a-this.offset.click.top>n[3]?a:a-this.offset.click.top>=n[1]?a-s.grid[1]:a+s.grid[1]:a;o=s.grid[0]?this.originalPageX+Math.round((u-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX;u=n?o-this.offset.click.left>=n[0]||o-this.offset.click.left>n[2]?o:o-this.offset.click.left>=n[0]?o-s.grid[0]:o+s.grid[0]:o}if(s.axis==="y"){u=this.originalPageX}if(s.axis==="x"){c=this.originalPageY}}return{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.offset.scroll.top:l?0:this.offset.scroll.top),left:u-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.offset.scroll.left:l?0:this.offset.scroll.left)}},_clear:function e(){this._removeClass(this.helper,"ui-draggable-dragging");if(this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval){this.helper.remove()}this.helper=null;this.cancelHelperRemoval=false;if(this.destroyOnClear){this.destroy()}},_trigger:function e(t,r,n){n=n||this._uiHash();b.ui.plugin.call(this,t,[r,n,this],true);if(/^(drag|start|stop)/.test(t)){this.positionAbs=this._convertPositionTo("absolute");n.offset=this.positionAbs}return b.Widget.prototype._trigger.call(this,t,r,n)},plugins:{},_uiHash:function e(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});b.ui.plugin.add("draggable","connectToSortable",{start:function e(t,r,n){var i=b.extend({},r,{item:n.element});n.sortables=[];b(n.options.connectToSortable).each(function(){var e=b(this).sortable("instance");if(e&&!e.options.disabled){n.sortables.push(e);e.refreshPositions();e._trigger("activate",t,i)}})},stop:function e(t,r,n){var i=b.extend({},r,{item:n.element});n.cancelHelperRemoval=false;b.each(n.sortables,function(){var e=this;if(e.isOver){e.isOver=0;n.cancelHelperRemoval=true;e.cancelHelperRemoval=false;e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")};e._mouseStop(t);e.options.helper=e.options._helper}else{e.cancelHelperRemoval=true;e._trigger("deactivate",t,i)}})},drag:function e(r,n,i){b.each(i.sortables,function(){var e=false,t=this;t.positionAbs=i.positionAbs;t.helperProportions=i.helperProportions;t.offset.click=i.offset.click;if(t._intersectsWith(t.containerCache)){e=true;b.each(i.sortables,function(){this.positionAbs=i.positionAbs;this.helperProportions=i.helperProportions;this.offset.click=i.offset.click;if(this!==t&&this._intersectsWith(this.containerCache)&&b.contains(t.element[0],this.element[0])){e=false}return e})}if(e){if(!t.isOver){t.isOver=1;i._parent=n.helper.parent();t.currentItem=n.helper.appendTo(t.element).data("ui-sortable-item",true);t.options._helper=t.options.helper;t.options.helper=function(){return n.helper[0]};r.target=t.currentItem[0];t._mouseCapture(r,true);t._mouseStart(r,true,true);t.offset.click.top=i.offset.click.top;t.offset.click.left=i.offset.click.left;t.offset.parent.left-=i.offset.parent.left-t.offset.parent.left;t.offset.parent.top-=i.offset.parent.top-t.offset.parent.top;i._trigger("toSortable",r);i.dropped=t.element;b.each(i.sortables,function(){this.refreshPositions()});i.currentItem=i.element;t.fromOutside=i}if(t.currentItem){t._mouseDrag(r);n.position=t.position}}else{if(t.isOver){t.isOver=0;t.cancelHelperRemoval=true;t.options._revert=t.options.revert;t.options.revert=false;t._trigger("out",r,t._uiHash(t));t._mouseStop(r,true);t.options.revert=t.options._revert;t.options.helper=t.options._helper;if(t.placeholder){t.placeholder.remove()}n.helper.appendTo(i._parent);i._refreshOffsets(r);n.position=i._generatePosition(r,true);i._trigger("fromSortable",r);i.dropped=false;b.each(i.sortables,function(){this.refreshPositions()})}}})}});b.ui.plugin.add("draggable","cursor",{start:function e(t,r,n){var i=b("body"),a=n.options;if(i.css("cursor")){a._cursor=i.css("cursor")}i.css("cursor",a.cursor)},stop:function e(t,r,n){var i=n.options;if(i._cursor){b("body").css("cursor",i._cursor)}}});b.ui.plugin.add("draggable","opacity",{start:function e(t,r,n){var i=b(r.helper),a=n.options;if(i.css("opacity")){a._opacity=i.css("opacity")}i.css("opacity",a.opacity)},stop:function e(t,r,n){var i=n.options;if(i._opacity){b(r.helper).css("opacity",i._opacity)}}});b.ui.plugin.add("draggable","scroll",{start:function e(t,r,n){if(!n.scrollParentNotHidden){n.scrollParentNotHidden=n.helper.scrollParent(false)}if(n.scrollParentNotHidden[0]!==n.document[0]&&n.scrollParentNotHidden[0].tagName!=="HTML"){n.overflowOffset=n.scrollParentNotHidden.offset()}},drag:function e(t,r,n){var i=n.options,a=false,o=n.scrollParentNotHidden[0],s=n.document[0];if(o!==s&&o.tagName!=="HTML"){if(!i.axis||i.axis!=="x"){if(n.overflowOffset.top+o.offsetHeight-t.pageY<i.scrollSensitivity){o.scrollTop=a=o.scrollTop+i.scrollSpeed}else if(t.pageY-n.overflowOffset.top<i.scrollSensitivity){o.scrollTop=a=o.scrollTop-i.scrollSpeed}}if(!i.axis||i.axis!=="y"){if(n.overflowOffset.left+o.offsetWidth-t.pageX<i.scrollSensitivity){o.scrollLeft=a=o.scrollLeft+i.scrollSpeed}else if(t.pageX-n.overflowOffset.left<i.scrollSensitivity){o.scrollLeft=a=o.scrollLeft-i.scrollSpeed}}}else{if(!i.axis||i.axis!=="x"){if(t.pageY-b(s).scrollTop()<i.scrollSensitivity){a=b(s).scrollTop(b(s).scrollTop()-i.scrollSpeed)}else if(b(window).height()-(t.pageY-b(s).scrollTop())<i.scrollSensitivity){a=b(s).scrollTop(b(s).scrollTop()+i.scrollSpeed)}}if(!i.axis||i.axis!=="y"){if(t.pageX-b(s).scrollLeft()<i.scrollSensitivity){a=b(s).scrollLeft(b(s).scrollLeft()-i.scrollSpeed)}else if(b(window).width()-(t.pageX-b(s).scrollLeft())<i.scrollSensitivity){a=b(s).scrollLeft(b(s).scrollLeft()+i.scrollSpeed)}}}if(a!==false&&b.ui.ddmanager&&!i.dropBehaviour){b.ui.ddmanager.prepareOffsets(n,t)}}});b.ui.plugin.add("draggable","snap",{start:function e(t,r,n){var i=n.options;n.snapElements=[];b(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var e=b(this),t=e.offset();if(this!==n.element[0]){n.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:t.top,left:t.left})}})},drag:function e(t,r,n){var i,a,o,s,l,u,c,f,h,d,p=n.options,v=p.snapTolerance,g=r.offset.left,m=g+n.helperProportions.width,_=r.offset.top,y=_+n.helperProportions.height;for(h=n.snapElements.length-1;h>=0;h--){l=n.snapElements[h].left-n.margins.left;u=l+n.snapElements[h].width;c=n.snapElements[h].top-n.margins.top;f=c+n.snapElements[h].height;if(m<l-v||g>u+v||y<c-v||_>f+v||!b.contains(n.snapElements[h].item.ownerDocument,n.snapElements[h].item)){if(n.snapElements[h].snapping){n.options.snap.release&&n.options.snap.release.call(n.element,t,b.extend(n._uiHash(),{snapItem:n.snapElements[h].item}))}n.snapElements[h].snapping=false;continue}if(p.snapMode!=="inner"){i=Math.abs(c-y)<=v;a=Math.abs(f-_)<=v;o=Math.abs(l-m)<=v;s=Math.abs(u-g)<=v;if(i){r.position.top=n._convertPositionTo("relative",{top:c-n.helperProportions.height,left:0}).top}if(a){r.position.top=n._convertPositionTo("relative",{top:f,left:0}).top}if(o){r.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left}if(s){r.position.left=n._convertPositionTo("relative",{top:0,left:u}).left}}d=i||a||o||s;if(p.snapMode!=="outer"){i=Math.abs(c-_)<=v;a=Math.abs(f-y)<=v;o=Math.abs(l-g)<=v;s=Math.abs(u-m)<=v;if(i){r.position.top=n._convertPositionTo("relative",{top:c,left:0}).top}if(a){r.position.top=n._convertPositionTo("relative",{top:f-n.helperProportions.height,left:0}).top}if(o){r.position.left=n._convertPositionTo("relative",{top:0,left:l}).left}if(s){r.position.left=n._convertPositionTo("relative",{top:0,left:u-n.helperProportions.width}).left}}if(!n.snapElements[h].snapping&&(i||a||o||s||d)){n.options.snap.snap&&n.options.snap.snap.call(n.element,t,b.extend(n._uiHash(),{snapItem:n.snapElements[h].item}))}n.snapElements[h].snapping=i||a||o||s||d}}});b.ui.plugin.add("draggable","stack",{start:function e(t,r,n){var i,a=n.options,o=b.makeArray(b(a.stack)).sort(function(e,t){return(parseInt(b(e).css("zIndex"),10)||0)-(parseInt(b(t).css("zIndex"),10)||0)});if(!o.length){return}i=parseInt(b(o[0]).css("zIndex"),10)||0;b(o).each(function(e){b(this).css("zIndex",i+e)});this.css("zIndex",i+o.length)}});b.ui.plugin.add("draggable","zIndex",{start:function e(t,r,n){var i=b(r.helper),a=n.options;if(i.css("zIndex")){a._zIndex=i.css("zIndex")}i.css("zIndex",a.zIndex)},stop:function e(t,r,n){var i=n.options;if(i._zIndex){b(r.helper).css("zIndex",i._zIndex)}}});return b.ui.draggable})},function(t,r,n){var i,a,o;(function(e){if(true){!(a=[n(27),n(117)],i=e,o=typeof i==="function"?i.apply(r,a):i,o!==undefined&&(t.exports=o))}else{}})(function(e){return e.ui.safeActiveElement=function(t){var r;try{r=t.activeElement}catch(e){r=t.body}if(!r){r=t.body}if(!r.nodeName){r=t.body}return r}})},function(t,r,n){var i,a,o;(function(e){if(true){!(a=[n(27),n(117)],i=e,o=typeof i==="function"?i.apply(r,a):i,o!==undefined&&(t.exports=o))}else{}})(function(t){return t.ui.safeBlur=function(e){if(e&&e.nodeName.toLowerCase()!=="body"){t(e).trigger("blur")}}})},function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<div ng-if="$ctrl.gmfUser.username">\n  <div class="form-group">\n    <span>{{\'Logged in as\' | translate}}</span>\n    <strong>{{ ::$ctrl.gmfUser.username }}</strong>.\n  </div>\n\n  <form\n      name="logoutForm"\n      role="form"\n      ng-submit="$ctrl.logout()"\n      ng-controller="GmfAuthenticationController"\n      ng-class="{\'has-error\': $ctrl.error}"\n      ng-if="!$ctrl.changingPassword">\n    <div class="form-group">\n      <input\n          type="submit"\n          class="form-control btn prime"\n          value="{{\'Logout\' | translate}}" />\n    </div>\n    <div class="form-group">\n    <input\n        ng-show="$ctrl.allowPasswordChange"\n        type="button"\n        class="form-control btn btn-default"\n        value="{{\'Change password\' | translate}}"\n        ng-click="$ctrl.changingPassword = true"/>\n    </div>\n  </form>\n\n  <form\n      name="changePasswordForm"\n      role="form"\n      ng-submit="$ctrl.changePassword()"\n      ng-controller="GmfAuthenticationController"\n      ng-class="{\'has-error\': $ctrl.error}"\n      ng-if="$ctrl.changingPassword">\n    <div class="form-group">\n      <input\n          type="password"\n          class="form-control"\n          name="oldpassword"\n          ng-model="$ctrl.oldPwdVal"\n          ng-attr-placeholder="{{\'Old password\' | translate}}"/>\n    </div>\n    <div class="form-group">\n      <input\n          type="password"\n          class="form-control"\n          name="newpassword"\n          ng-model="$ctrl.newPwdVal"\n          ng-attr-placeholder="{{\'New password\' | translate}}"/>\n    </div>\n    <div class="form-group">\n      <input\n          type="password"\n          class="form-control"\n          name="newpasswordconfirm"\n          ng-model="$ctrl.newPwdConfVal"\n          ng-attr-placeholder="{{\'Confirm new password\' | translate}}"/>\n    </div>\n    <div class="form-group">\n      <input\n          type="submit"\n          class="form-control btn prime"\n          value="{{\'Change password\' | translate}}" />\n    </div>\n    <div class="form-group">\n      <input\n          type="button"\n          class="form-control btn btn-default"\n          value="{{\'Cancel\' | translate}}"\n          ng-if="!$ctrl.userMustChangeItsPassword()"\n          ng-click="$ctrl.changePasswordReset()" />\n      <input\n          type="button"\n          class="form-control btn btn-default"\n          value="{{\'Logout\' | translate}}"\n          ng-if="$ctrl.userMustChangeItsPassword()"\n          ng-click="$ctrl.logout()" />\n    </div>\n  </form>\n\n  <div ng-show="$ctrl.error" class="gmf-authentication-error help-block"></div>\n\n  <ngeo-modal\n      ng-model="$ctrl.changePasswordModalShown">\n    <div class="modal-header">\n      <button type="button"\n              class="close"\n              data-dismiss="modal"\n              aria-label="{{\'Close\' | translate}}">\n        <span aria-hidden="true">&times;</span>\n      </button>\n      <h4 class="modal-title">\n        {{\'Password Changed\' | translate}}\n      </h4>\n    </div>\n    <div class="modal-body">\n      {{\'Your password has successfully been changed.\' | translate}}\n    </div>\n    <div class="modal-footer">\n      <button type="button"\n              class="btn btn-default"\n              data-dismiss="modal">{{\'OK\' | translate}}</button>\n    </div>\n  </ngeo-modal>\n</div>\n\n<div ng-if="!$ctrl.gmfUser.username">\n\n  <div class="alert alert-warning" ng-show="$ctrl.infoMessage">\n    <span>{{ $ctrl.infoMessage }}</span>\n  </div>\n\n  <form\n      name="loginForm"\n      role="form"\n      ng-submit="$ctrl.login()"\n      ng-controller="GmfAuthenticationController"\n      ng-class="{\'has-error\': $ctrl.error}">\n    <div class="form-group">\n      <input\n          type="text"\n          class="form-control"\n          name="login"\n          ng-model="$ctrl.loginVal"\n          ng-attr-placeholder="{{\'Username\' | translate}}" />\n    </div>\n    <div class="form-group">\n      <input\n          type="password"\n          class="form-control"\n          name="password"\n          ng-model="$ctrl.pwdVal"\n          ng-attr-placeholder="{{\'Password\' | translate}}"/>\n    </div>\n    <div class="form-group">\n    <input\n        type="submit"\n        class="form-control btn prime"\n        value="{{\'Connect\' | translate}}" />\n    </div>\n    <div ng-show="$ctrl.allowPasswordReset" class="form-group">\n      <a ng-click="$ctrl.resetPassword()"\n         href="">{{\'Password forgotten?\' | translate}}</a>\n    </div>\n  </form>\n\n  <div ng-show="$ctrl.error" class="gmf-authentication-error help-block"></div>\n\n  <ngeo-modal\n      ng-model="$ctrl.resetPasswordModalShown">\n    <div class="modal-header">\n      <button type="button"\n              class="close"\n              data-dismiss="modal"\n              aria-label="{{\'Close\' | translate}}">\n        <span aria-hidden="true">&times;</span>\n      </button>\n      <h4 class="modal-title">\n        {{\'Password forgotten?\' | translate}}\n      </h4>\n    </div>\n    <div class="modal-body" translate>\n      A new password has just been sent to you by e-mail.\n    </div>\n    <div class="modal-footer">\n      <button type="button"\n              class="btn btn-default"\n              data-dismiss="modal">{{\'OK\' | translate}}</button>\n    </div>\n  </ngeo-modal>\n\n</div>\n'}return __p}},function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<ul class="gmf-backgroundlayerselector">\n  <li ng-repeat="layer in ctrl.bgLayers"\n      ng-click="ctrl.setLayer(layer)"\n      ng-class="{\'gmf-backgroundlayerselector-active\': ctrl.bgLayer == layer, \'gmf-backgroundlayerselector-disabled\': ctrl.opacityLayer == layer}">\n    <img class="gmf-thumb"\n         ng-src="{{::layer.get(\'metadata\')[\'thumbnail\']}}" />\n    <span class="gmf-text">{{layer.get("label") | translate}}</span>\n    <span ng-class="{\'gmf-backgroundlayerselector-opacity-check\': ctrl.opacityLayer == layer}"></span>\n  </li>\n\n  <input ng-if="ctrl.opacityLayer"\n         class="input-action gmf-backgroundlayerselector-opacity-slider"\n         name="bg-layer-opacity"\n         type="range"\n         min="0"\n         max="1"\n         step="0.01"\n         ng-model="ctrl.getSetBgLayerOpacity"\n         ng-model-options="{getterSetter: true}">\n</ul>\n'}return __p}},function(e,t){},function(r,e,t){(function(e,t){true?r.exports=t():undefined})(this,function(){"use strict";function e(e,t,r,n,i){v(e,t,r||0,n||e.length-1,i||a)}function v(e,t,r,n,i){while(n>r){if(n-r>600){var a=n-r+1;var o=t-r+1;var s=Math.log(a);var l=.5*Math.exp(2*s/3);var u=.5*Math.sqrt(s*l*(a-l)/a)*(o-a/2<0?-1:1);var c=Math.max(r,Math.floor(t-o*l/a+u));var f=Math.min(n,Math.floor(t+(a-o)*l/a+u));v(e,t,c,f,i)}var h=e[t];var d=r;var p=n;g(e,r,t);if(i(e[n],h)>0)g(e,r,n);while(d<p){g(e,d,p);d++;p--;while(i(e[d],h)<0){d++}while(i(e[p],h)>0){p--}}if(i(e[r],h)===0)g(e,r,p);else{p++;g(e,p,n)}if(p<=t)r=p+1;if(t<=p)n=p-1}}function g(e,t,r){var n=e[t];e[t]=e[r];e[r]=n}function a(e,t){return e<t?-1:e>t?1:0}return e})},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e){(function(e){t.exports=e}).call(this,{})},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);if(!t.children)t.children=[];Object.defineProperty(t,"loaded",{enumerable:true,get:function e(){return t.l}});Object.defineProperty(t,"id",{enumerable:true,get:function e(){return t.i}});Object.defineProperty(t,"exports",{enumerable:true});t.webpackPolyfill=1}return t}},function(e,t){
/**
 * @license AngularJS v1.7.5
 * (c) 2010-2018 Google, Inc. http://angularjs.org
 * License: MIT
 */
(function(E,M){"use strict";var A=M.$$minErr("$sanitize");var k;var j;var I;var D;var P;var R;var L;var N;var $;var F;function e(){var t=false;var n=false;this.$get=["$$sanitizeUri",function(r){t=true;if(n){j(h,c)}return function(e){var t=[];$(e,F(t,function(e,t){return!/^unsafe:/.test(r(e,t))}));return t.join("")}}];this.enableSvg=function(e){if(P(e)){n=e;return this}else{return n}};this.addValidElements=function(e){if(!t){if(D(e)){e={htmlElements:e}}y(c,e.svgElements);y(s,e.htmlVoidElements);y(h,e.htmlVoidElements);y(h,e.htmlElements)}return this};this.addValidAttrs=function(e){if(!t){j(g,_(e,true))}return this};k=M.bind;j=M.extend;I=M.forEach;D=M.isArray;P=M.isDefined;R=M.$$lowercase;L=M.noop;$=w;F=O;N=E.Node.prototype.contains||function(e){return!!(this.compareDocumentPosition(e)&16)};var r=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,i=/([^#-~ |!])/g;var s=m("area,br,col,hr,img,wbr");var e=m("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),a=m("rp,rt"),o=j({},a,e);var l=j({},e,m("address,article,"+"aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,"+"h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul"));var u=j({},a,m("a,abbr,acronym,b,"+"bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,"+"samp,small,span,strike,strong,sub,sup,time,tt,u,var"));var c=m("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,"+"hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,"+"radialGradient,rect,stop,svg,switch,text,title,tspan");var f=m("script,style");var h=j({},s,l,u,o);var d=m("background,cite,href,longdesc,src,xlink:href,xml:base");var p=m("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,"+"color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,"+"ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,"+"scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,"+"valign,value,vspace,width");var v=m("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,"+"baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,"+"cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,"+"font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,"+"height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,"+"marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,"+"max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,"+"path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,"+"requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,"+"stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,"+"stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,"+"stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,"+"underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,"+"width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,"+"xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",true);var g=j({},d,v,p);function m(e,t){return _(e.split(","),t)}function _(e,t){var r={},n;for(n=0;n<e.length;n++){r[t?R(e[n]):e[n]]=true}return r}function y(e,t){if(t&&t.length){j(e,_(t))}}var b=function(n,t){var e;if(t&&t.implementation){e=t.implementation.createHTMLDocument("inert")}else{throw A("noinert","Can't create an inert html document")}var r=(e.documentElement||e.getDocumentElement()).querySelector("body");r.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>';if(!r.querySelector("svg")){return i}else{r.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">';if(r.querySelector("svg img")){return a}else{return o}}function i(e){e="<remove></remove>"+e;try{e=encodeURI(e)}catch(e){return undefined}var t=new n.XMLHttpRequest;t.responseType="document";t.open("GET","data:text/html;charset=utf-8,"+e,false);t.send(null);var r=t.response.body;r.firstChild.remove();return r}function a(e){e="<remove></remove>"+e;try{var t=(new n.DOMParser).parseFromString(e,"text/html").body;t.firstChild.remove();return t}catch(e){return undefined}}function o(e){r.innerHTML=e;if(t.documentMode){x(r)}return r}}(E,E.document);function w(e,t){if(e===null||e===undefined){e=""}else if(typeof e!=="string"){e=""+e}var r=b(e);if(!r)return"";var n=5;do{if(n===0){throw A("uinput","Failed to sanitize html because the input is unstable")}n--;e=r.innerHTML;r=b(e)}while(e!==r.innerHTML);var i=r.firstChild;while(i){switch(i.nodeType){case 1:t.start(i.nodeName.toLowerCase(),S(i.attributes));break;case 3:t.chars(i.textContent);break}var a;if(!(a=i.firstChild)){if(i.nodeType===1){t.end(i.nodeName.toLowerCase())}a=T("nextSibling",i);if(!a){while(a==null){i=T("parentNode",i);if(i===r)break;a=T("nextSibling",i);if(i.nodeType===1){t.end(i.nodeName.toLowerCase())}}}}i=a}while(i=r.firstChild){r.removeChild(i)}}function S(e){var t={};for(var r=0,n=e.length;r<n;r++){var i=e[r];t[i.name]=i.value}return t}function C(e){return e.replace(/&/g,"&amp;").replace(r,function(e){var t=e.charCodeAt(0);var r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(i,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function O(e,a){var r=false;var o=k(e,e.push);return{start:function e(i,t){i=R(i);if(!r&&f[i]){r=i}if(!r&&h[i]===true){o("<");o(i);I(t,function(e,t){var r=R(t);var n=i==="img"&&r==="src"||r==="background";if(g[r]===true&&(d[r]!==true||a(e,n))){o(" ");o(t);o('="');o(C(e));o('"')}});o(">")}},end:function e(t){t=R(t);if(!r&&h[t]===true&&s[t]!==true){o("</");o(t);o(">")}if(t==r){r=false}},chars:function e(t){if(!r){o(C(t))}}}}function x(e){while(e){if(e.nodeType===E.Node.ELEMENT_NODE){var t=e.attributes;for(var r=0,n=t.length;r<n;r++){var i=t[r];var a=i.name.toLowerCase();if(a==="xmlns:ns1"||a.lastIndexOf("ns1:",0)===0){e.removeAttributeNode(i);r--;n--}}}var o=e.firstChild;if(o){x(o)}e=T("nextSibling",e)}}function T(e,t){var r=t[e];if(r&&N.call(t,r)){throw A("elclob","Failed to sanitize html because the element is clobbered: {0}",t.outerHTML||t.outerText)}return r}}function y(e){var t=[];var r=F(t,L);r.chars(e);return t.join("")}M.module("ngSanitize",[]).provider("$sanitize",e).info({angularVersion:"1.7.5"});M.module("ngSanitize").filter("linky",["$sanitize",function(f){var h=/((s?ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,d=/^mailto:/i;var p=M.$$minErr("linky");var v=M.isDefined;var g=M.isFunction;var m=M.isObject;var _=M.isString;return function(e,i,t){if(e==null||e==="")return e;if(!_(e))throw p("notstring","Expected string but received: {0}",e);var a=g(t)?t:m(t)?function e(){return t}:function e(){return{}};var r;var n=e;var o=[];var s;var l;while(r=n.match(h)){s=r[0];if(!r[2]&&!r[4]){s=(r[3]?"http://":"mailto:")+s}l=r.index;u(n.substr(0,l));c(s,r[0].replace(d,""));n=n.substring(l+r[0].length)}u(n);return f(o.join(""));function u(e){if(!e){return}o.push(y(e))}function c(e,t){var r,n=a(e);o.push("<a ");for(r in n){o.push(r+'="'+n[r]+'" ')}if(v(i)&&!("target"in n)){o.push('target="',i,'" ')}o.push('href="',e.replace(/"/g,"&quot;"),'">');u(t);o.push("</a>")}}}])})(window,window.angular)},function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<h4 class="popover-title ngeo-popup-title">\n  <span ng-bind-html="title"></span>\n  <button type="button" class="close" ng-click="open = false"> &times;</button>\n</h4>\n<div class="popover-content" ng-bind-html="content"></div>\n'}return __p}},function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<table class="ngeo-colorpicker-palette">\n  <tr ng-repeat="colors in ::ctrl.colors">\n    <td\n      ng-repeat="color in ::colors"\n      ng-click="ctrl.setColor(color)"\n      ng-class="{\'ngeo-colorpicker-selected\': color == ctrl.color}">\n      <div ng-style="::{\'background-color\': color}"></div>\n    </td>\n  </tr>\n</table>\n'}return __p}},function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<div ng-if="fsCtrl.feature && fsCtrl.type">\n  <div class="form-group">\n    <input\n        ng-model="fsCtrl.getSetName"\n        ng-model-options="{getterSetter: true}"\n        ng-attr-placeholder="{{\'Name\' | translate}}"\n        class="form-control"/>\n  </div>\n  <div\n      ng-if="fsCtrl.type !== \'Text\'"\n      class="form-group">\n        <input\n          id="gmf-featurestyle-showlabel-{{::fsCtrl.uid}}"\n          type="checkbox"\n          ng-model="fsCtrl.getSetShowLabel"\n          ng-model-options="{getterSetter: true}"/>\n        <label\n          ng-switch="fsCtrl.type"\n          for="gmf-featurestyle-showlabel-{{::fsCtrl.uid}}"\n          class="col-form-label">\n          {{\'Display label\' | translate}}\n        </label>\n  </div>\n  <div\n      ng-if="fsCtrl.type !== \'Text\'"\n      class="form-group">\n      <input\n          id="gmf-featurestyle-showmeasure-{{::fsCtrl.uid}}"\n          type="checkbox"\n          ng-model="fsCtrl.getSetShowMeasure"\n          ng-model-options="{getterSetter: true}"/>\n      <label\n          ng-switch="fsCtrl.type"\n          for="gmf-featurestyle-showmeasure-{{::fsCtrl.uid}}"\n          class="col-form-label">\n        <span ng-switch-when="Circle">\n          {{\'Display azimuth and radius\' | translate}}\n        </span>\n        <span ng-switch-when="Polygon">\n          {{\'Display surface\' | translate}}\n        </span>\n        <span ng-switch-when="Rectangle">\n          {{\'Display surface\' | translate}}\n        </span>\n        <span ng-switch-when="LineString">\n          {{\'Display length\' | translate}}\n        </span>\n        <span ng-switch-when="Point">\n          {{\'Display coordinates\' | translate}}\n        </span>\n      </label>\n      <em class="text-muted">\n        ({{ fsCtrl.measure }})\n      </em>\n  </div>\n</div>\n<div ng-if="fsCtrl.feature && fsCtrl.type">\n\n  <div class="form-group">\n    <div\n        ngeo-colorpicker=""\n        ngeo-colorpicker-color="fsCtrl.color"\n        class="col-md-12">\n    </div>\n  </div>\n\n  <div\n      ng-if="fsCtrl.type === \'Point\'"\n      class="form-group form-group-nomargin">\n    <label class="col-form-label col-md-4">{{\'Size\' | translate}}</label>\n    <div class="col-md-8">\n      <input\n          type="range"\n          class="form-control"\n          min="3"\n          max="20"\n          step="1"\n          ng-model="fsCtrl.getSetSize"\n          ng-model-options="{getterSetter: true}"\n          />\n    </div>\n  </div>\n\n  <div\n      ng-if="fsCtrl.type === \'Text\'"\n      class="form-group form-group-nomargin">\n    <label class="col-form-label col-md-4">{{\'Size\' | translate}}</label>\n    <div class="col-md-8">\n      <input\n          type="range"\n          class="form-control"\n          min="8"\n          max="30"\n          step="1"\n          ng-model="fsCtrl.getSetSize"\n          ng-model-options="{getterSetter: true}"\n          />\n    </div>\n  </div>\n\n  <div\n      ng-if="fsCtrl.type === \'Circle\' || fsCtrl.type === \'LineString\' || fsCtrl.type === \'Polygon\' || fsCtrl.type === \'Rectangle\'"\n      class="form-group form-group-nomargin">\n    <label class="col-form-label col-md-4">{{\'Stroke\' | translate}}</label>\n    <div class="col-md-8">\n      <input\n          type="range"\n          class="form-control"\n          min="0.5"\n          max="5"\n          step="0.5"\n          ng-model="fsCtrl.getSetStroke"\n          ng-model-options="{getterSetter: true}"\n          />\n    </div>\n  </div>\n\n  <div\n      ng-if="fsCtrl.type === \'Circle\' || fsCtrl.type === \'Polygon\' || fsCtrl.type === \'Rectangle\'"\n      class="form-group form-group-nomargin">\n    <label class="col-form-label col-md-4">{{\'Opacity\' | translate}}</label>\n    <div class="col-md-8">\n      <input\n          type="range"\n          class="form-control"\n          min="0"\n          max="1"\n          step="0.05"\n          ng-model="fsCtrl.getSetOpacity"\n          ng-model-options="{getterSetter: true}"\n          />\n    </div>\n  </div>\n\n  <div\n      ng-if="fsCtrl.type === \'Text\'"\n      class="form-group form-group-nomargin">\n    <label class="col-form-label col-md-4">{{\'Angle\' | translate}}</label>\n    <div class="col-md-8">\n      <input\n          type="range"\n          class="form-control"\n          min="-180"\n          max="180"\n          step="22.5"\n          ng-model="fsCtrl.getSetAngle"\n          ng-model-options="{getterSetter: true}"\n          />\n    </div>\n  </div>\n\n</div>\n'}return __p}},function(module,exports,__webpack_require__){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<ngeo-drawfeature\n    ngeo-btn-group\n    class="btn-group"\n    ngeo-drawfeature-active="efCtrl.drawActive"\n    ngeo-drawfeature-map="efCtrl.map"\n    ngeo-drawfeature-showmeasure="efCtrl.showMeasure">\n  <a\n    data-toggle="tooltip"\n    title="{{\'Draw a point on the map\' | translate}}"\n    href\n    ngeo-btn\n    ngeo-drawpoint\n    class="btn btn-default ngeo-drawfeature-point"\n    ng-class="{active: dfCtrl.drawPoint.active}"\n    ng-model="dfCtrl.drawPoint.active">\n    '+((__t=__webpack_require__(275))==null?"":__t)+'\n  </a>\n  <a\n    data-toggle="tooltip"\n    title="{{\'Draw a line on the map\' | translate}}"\n    href\n    ngeo-btn\n    ngeo-measurelength\n    class="btn btn-default ngeo-drawfeature-linestring"\n    ng-class="{active: dfCtrl.measureLength.active}"\n    ng-model="dfCtrl.measureLength.active">\n    '+((__t=__webpack_require__(276))==null?"":__t)+'\n  </a>\n  <a\n    data-toggle="tooltip"\n    title="{{\'Draw a polygon on the map\' | translate}}"\n    href\n    ngeo-btn\n    ngeo-measurearea\n    class="btn btn-default ngeo-drawfeature-polygon"\n    ng-class="{active: dfCtrl.measureArea.active}"\n    ng-model="dfCtrl.measureArea.active">\n    '+((__t=__webpack_require__(277))==null?"":__t)+'\n  </a>\n  <a\n    data-toggle="tooltip"\n    title="{{\'Draw a circle on the map\' | translate}}"\n    href\n    ngeo-btn\n    ngeo-measureazimut\n    class="btn btn-default ngeo-drawfeature-circle"\n    ng-class="{active: dfCtrl.measureAzimut.active}"\n    ng-model="dfCtrl.measureAzimut.active">\n    '+((__t=__webpack_require__(378))==null?"":__t)+'\n  </a>\n  <a\n    data-toggle="tooltip"\n    title="{{\'Draw a rectangle on the map\' | translate}}"\n    href\n    ngeo-btn\n    ngeo-drawrectangle\n    class="btn btn-default ngeo-drawfeature-rectangle"\n    ng-class="{active: dfCtrl.drawRectangle.active}"\n    ng-model="dfCtrl.drawRectangle.active">\n    '+((__t=__webpack_require__(379))==null?"":__t)+'\n  </a>\n  <a\n    data-toggle="tooltip"\n    title="{{\'Draw a text label on the map\' | translate}}"\n    href\n    ngeo-btn\n    ngeo-drawtext\n    class="btn btn-default ngeo-drawfeature-text"\n    ng-class="{active: dfCtrl.drawText.active}"\n    ng-model="dfCtrl.drawText.active">\n    '+((__t=__webpack_require__(440))==null?"":__t)+'\n  </a>\n</ngeo-drawfeature>\n\n<div ng-switch="efCtrl.selectedFeature">\n\n  <hr class="gmf-drawfeature-separator" ng-show="efCtrl.getFeaturesArray().length > 0">\n  <div ng-switch-when="null">\n    <div ng-show="efCtrl.getFeaturesArray().length > 0">\n      <div class="ngeo-drawfeature-actionbuttons">\n        <button\n            type="button"\n            data-toggle="dropdown"\n            aria-haspopup="true"\n            aria-expanded="false"\n            ngeo-exportfeatures\n            ngeo-exportfeatures-features="efCtrl.features"\n            class="btn btn-link btn-sm dropdown-toggle">\n          <span class="fa fa-file-export"></span>\n          {{\'Export\' | translate}}\n        </button>\n        <button\n            ng-click="efCtrl.clearFeatures()"\n            class="btn btn-link btn-sm">\n          <span class="fa fa-trash"></span>\n          {{\'Delete All\' | translate}}\n        </button>\n      </div>\n\n      <div class="gmf-eol"></div>\n\n      <div class="gmf-drawfeature-featurelist list-group list-group-sm">\n        <button\n            role="button"\n            class="list-group-item"\n            ng-repeat="feature in efCtrl.getFeaturesArray()"\n            ng-click="efCtrl.selectFeatureFromList(feature);">\n          {{ feature.get(efCtrl.nameProperty) }}\n        </button>\n      </div>\n    </div>\n\n  </div>\n\n  <div ng-switch-default>\n\n    <button\n        ng-click="efCtrl.selectedFeature = null;"\n        class="btn btn-link btn-sm">\n      <span class="fa fa-arrow-left"></span>\n      {{\'List\' | translate}}\n    </button>\n    <div class="ngeo-drawfeature-actionbuttons">\n      <button\n          type="button"\n          data-toggle="dropdown"\n          aria-haspopup="true"\n          aria-expanded="false"\n          ngeo-exportfeatures\n          ngeo-exportfeatures-features="efCtrl.selectedFeatures"\n          class="btn btn-link btn-sm dropdown-toggle">\n        <span class="fa fa-file-export"></span>\n        {{\'Export\' | translate}}\n      </button>\n      <button\n          ng-click="efCtrl.removeFeature(efCtrl.selectedFeature);"\n          class="btn btn-link btn-sm">\n        <span class="fa fa-trash"></span>\n        {{\'Delete\' | translate}}\n      </button>\n    </div>\n\n    <div class="gmf-eol"></div>\n\n    <gmf-featurestyle\n      gmf-featurestyle-feature="efCtrl.selectedFeature">\n    </gmf-featurestyle>\n  </div>\n\n</div>\n'}return __p}},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" height="1em" width="1em"><path d="M14.334 6.347v1.996h-1.997v4.649h-1.996V8.343H8.344V6.347h5.99zM1.666 3.008h8.674v1.997H7v7.987H5.004V5.005H1.666V3.008z"></svg>'},function(t,r,n){var i,a,o;(function(e){if(true){!(a=[n(27)],i=e,o=typeof i==="function"?i.apply(r,a):i,o!==undefined&&(t.exports=o))}else{}})(function(h){var e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],r="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],d=Array.prototype.slice,p,v;if(h.event.fixHooks){for(var t=e.length;t;){h.event.fixHooks[e[--t]]=h.event.mouseHooks}}var g=h.event.special.mousewheel={version:"3.1.12",setup:function e(){if(this.addEventListener){for(var t=r.length;t;){this.addEventListener(r[--t],n,false)}}else{this.onmousewheel=n}h.data(this,"mousewheel-line-height",g.getLineHeight(this));h.data(this,"mousewheel-page-height",g.getPageHeight(this))},teardown:function e(){if(this.removeEventListener){for(var t=r.length;t;){this.removeEventListener(r[--t],n,false)}}else{this.onmousewheel=null}h.removeData(this,"mousewheel-line-height");h.removeData(this,"mousewheel-page-height")},getLineHeight:function e(t){var r=h(t),n=r["offsetParent"in h.fn?"offsetParent":"parent"]();if(!n.length){n=h("body")}return parseInt(n.css("fontSize"),10)||parseInt(r.css("fontSize"),10)||16},getPageHeight:function e(t){return h(t).height()},settings:{adjustOldDeltas:true,normalizeOffset:true}};h.fn.extend({mousewheel:function e(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function e(t){return this.unbind("mousewheel",t)}});function n(e){var t=e||window.event,r=d.call(arguments,1),n=0,i=0,a=0,o=0,s=0,l=0;e=h.event.fix(t);e.type="mousewheel";if("detail"in t){a=t.detail*-1}if("wheelDelta"in t){a=t.wheelDelta}if("wheelDeltaY"in t){a=t.wheelDeltaY}if("wheelDeltaX"in t){i=t.wheelDeltaX*-1}if("axis"in t&&t.axis===t.HORIZONTAL_AXIS){i=a*-1;a=0}n=a===0?i:a;if("deltaY"in t){a=t.deltaY*-1;n=a}if("deltaX"in t){i=t.deltaX;if(a===0){n=i*-1}}if(a===0&&i===0){return}if(t.deltaMode===1){var u=h.data(this,"mousewheel-line-height");n*=u;a*=u;i*=u}else if(t.deltaMode===2){var c=h.data(this,"mousewheel-page-height");n*=c;a*=c;i*=c}o=Math.max(Math.abs(a),Math.abs(i));if(!v||o<v){v=o;if(_(t,o)){v/=40}}if(_(t,o)){n/=40;i/=40;a/=40}n=Math[n>=1?"floor":"ceil"](n/v);i=Math[i>=1?"floor":"ceil"](i/v);a=Math[a>=1?"floor":"ceil"](a/v);if(g.settings.normalizeOffset&&this.getBoundingClientRect){var f=this.getBoundingClientRect();s=e.clientX-f.left;l=e.clientY-f.top}e.deltaX=i;e.deltaY=a;e.deltaFactor=v;e.offsetX=s;e.offsetY=l;e.deltaMode=0;r.unshift(e,n,i,a);if(p){clearTimeout(p)}p=setTimeout(m,200);return(h.event.dispatch||h.event.handle).apply(this,r)}function m(){v=null}function _(e,t){return g.settings.adjustOldDeltas&&e.type==="mousewheel"&&t%120===0}})},function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<fieldset ng-disabled="attrCtrl.disabled">\n  <div\n      class="form-group"\n      ng-repeat="attribute in ::attrCtrl.attributes">\n    <div ng-if="attribute.type !== \'geometry\'">\n      <label\n          ng-if="::attribute.type !== \'boolean\'"\n          class="col-form-label">{{ ::attribute.name | translate }} <span class="text-muted">{{::attribute.required ? "*" : ""}}</span>\n      </label>\n      <div ng-switch="::attribute.type">\n\n        <div\n            ng-switch-when="boolean"\n            class="checkbox">\n          <label>\n            <input\n                name="{{::attribute.name}}"\n                ng-model="attrCtrl.properties[attribute.name]"\n                ng-change="attrCtrl.handleInputChange(attribute.name);"\n                type="checkbox">\n            </input>\n            <span> {{ ::attribute.name | translate }} <span class="text-muted">{{::attribute.required ? "*" : ""}}</span></span>\n          </label>\n        </div>\n\n        <select\n            name="{{::attribute.name}}"\n            ng-required="attribute.required"\n            ng-switch-when="select"\n            ng-model="attrCtrl.properties[attribute.name]"\n            ng-change="attrCtrl.handleInputChange(attribute.name);"\n            class="form-control"\n            type="text">\n          <option\n              ng-repeat="attribute in ::attribute.choices"\n              value="{{ ::attribute }}">\n            {{ ::attribute }}\n          </option>\n        </select>\n\n        <input\n            name="{{::attribute.name}}"\n            ng-required="attribute.required"\n            ng-switch-when="date"\n            ng-model="attrCtrl.properties[attribute.name]"\n            ng-change="attrCtrl.handleInputChange(attribute.name);"\n            ngeo-datetimepicker\n            ngeo-datetimepicker-options="\'{&quot;timepicker&quot;: false, &quot;format&quot;: &quot;\' + attribute.format + \'&quot;, &quot;allowBlank&quot;: true, &quot;todayButton&quot;: false, &quot;mask&quot;: &quot;\' + attribute.mask + \'&quot;}\'"\n            class="form-control"\n            type="text">\n        </input>\n\n        <input\n            name="{{::attribute.name}}"\n            id="time"\n            ng-required="attribute.required"\n            ng-switch-when="time"\n            ng-model="attrCtrl.properties[attribute.name]"\n            ng-change="attrCtrl.handleInputChange(attribute.name);"\n            ngeo-datetimepicker\n            ngeo-datetimepicker-options="\'{&quot;datepicker&quot;: false, &quot;format&quot;: &quot;\' + attribute.format + \'&quot;, &quot;todayButton&quot;: false, &quot;mask&quot;: &quot;\' + attribute.mask + \'&quot;, &quot;defaultTime&quot;: &quot;00:00&quot;}\'"\n            class="form-control"\n            type="text">\n        </input>\n\n        <input\n            name="{{::attribute.name}}"\n            ng-required="attribute.required"\n            ng-switch-when="datetime"\n            ng-model="attrCtrl.properties[attribute.name]"\n            ng-change="attrCtrl.handleInputChange(attribute.name);"\n            ngeo-datetimepicker\n            ngeo-datetimepicker-options="\'{&quot;scrollTime&quot;: false, &quot;format&quot;: &quot;\' + attribute.format + \'&quot;, &quot;allowBlank&quot;: true, &quot;todayButton&quot;: false, &quot;mask&quot;: &quot;\' + attribute.mask + \'&quot;, &quot;defaultTime&quot;: &quot;00:00&quot;}\'"\n            class="form-control"\n            type="text">\n        </input>\n\n        <div\n            ng-switch-when="number"\n            ng-switch="::attribute.numType">\n          <input\n              name="{{::attribute.name}}"\n              ng-required="attribute.required"\n              ng-switch-when="integer"\n              ng-model="attrCtrl.properties[attribute.name]"\n              ng-change="attrCtrl.handleInputChange(attribute.name);"\n              class="form-control"\n              step="1"\n              type="number">\n          </input>\n          <input\n              name="{{::attribute.name}}"\n              ng-required="attribute.required"\n              ng-switch-default\n              ng-model="attrCtrl.properties[attribute.name]"\n              ng-change="attrCtrl.handleInputChange(attribute.name);"\n              class="form-control"\n              type="number">\n          </input>\n        </div>\n\n        <input\n            name="{{::attribute.name}}"\n            ng-required="attribute.required"\n            ng-switch-default\n            ng-model="attrCtrl.properties[attribute.name]"\n            ng-change="attrCtrl.handleInputChange(attribute.name);"\n            ng-maxlength="attribute.maxLength"\n            class="form-control"\n            type="text">\n        </input>\n\n        <div ng-show="attrCtrl.form.$submitted || attrCtrl.form[attribute.name].$touched">\n          <p class="text-danger"\n             ng-show="attrCtrl.form[attribute.name].$error.required">\n            {{\'This field is required\' | translate}}\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n</fieldset>\n'}return __p}},function(module,exports,__webpack_require__){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<div>\n  <div ng-switch="efCtrl.feature">\n    <a\n      ng-switch-when="null"\n      ng-if="efCtrl.geomType"\n      href\n      ngeo-btn\n      ngeo-createfeature\n      ngeo-createfeature-active="efCtrl.createActive"\n      ngeo-createfeature-features="::efCtrl.features"\n      ngeo-createfeature-geom-type="::efCtrl.geomType"\n      ngeo-createfeature-map="::efCtrl.map"\n      class="btn btn-default"\n      ng-class="{active: efCtrl.createActive}"\n      ng-model="efCtrl.createActive">\n      <span ng-switch="::efCtrl.geomType">\n        <span ng-switch-when="Point">\n          '+((__t=__webpack_require__(275))==null?"":__t)+"\n          {{'Draw new point' | translate}}\n        </span>\n        <span ng-switch-when=\"MultiPoint\">\n          "+((__t=__webpack_require__(275))==null?"":__t)+"\n          {{'Draw new point' | translate}}\n        </span>\n        <span ng-switch-when=\"LineString\">\n          "+((__t=__webpack_require__(276))==null?"":__t)+"\n          {{'Draw new linestring' | translate}}\n        </span>\n        <span ng-switch-when=\"MultiLineString\">\n          "+((__t=__webpack_require__(276))==null?"":__t)+"\n          {{'Draw new linestring' | translate}}\n        </span>\n        <span ng-switch-when=\"Polygon\">\n          "+((__t=__webpack_require__(277))==null?"":__t)+"\n          {{'Draw new polygon' | translate}}\n        </span>\n        <span ng-switch-when=\"MultiPolygon\">\n          "+((__t=__webpack_require__(277))==null?"":__t)+'\n          {{\'Draw new polygon\' | translate}}\n        </span>\n      </span>\n    </a>\n    <div ng-switch-default>\n      <form\n        novalidate\n        name="form"\n        class="form gmf-editfeature-attributes-container"\n        ng-if="efCtrl.attributes">\n        <div class="row">\n          <div class="col-sm-12">\n            <a\n              class="close"\n              ng-click="efCtrl.cancel()"\n              ng-disabled="efCtrl.pending"\n              title="{{\'Cancel modifications\' | translate}}"\n              href>&times;</a>\n          </div>\n        </div>\n        <ngeo-attributes\n          ngeo-attributes-attributes="::efCtrl.attributes"\n          ngeo-attributes-disabled="efCtrl.pending"\n          ngeo-attributes-feature="::efCtrl.feature">\n        </ngeo-attributes>\n        <input\n          type="submit"\n          value="{{\'Save\' | translate}}"\n          class="btn btn-sm btn-default gmf-editfeature-btn-save"\n          ng-click="form.$valid && efCtrl.save()"\n          ng-disabled="!efCtrl.dirty || efCtrl.pending"\n          title="{{\'Save modifications\' | translate}}"></input>\n        <a\n          class="btn btn-sm btn-default gmf-editfeature-btn-cancel"\n          ng-click="efCtrl.confirmCancel()"\n          ng-disabled="efCtrl.pending"\n          title="{{\'Cancel modifications\' | translate}}"\n          href>{{\'Cancel\' | translate}}</a>\n        <button\n          class="btn btn-sm btn-link gmf-editfeature-btn-delete"\n          ng-click="efCtrl.delete()"\n          ng-disabled="efCtrl.pending"\n          ng-show="efCtrl.featureId"\n          title="{{\'Delete this feature\' | translate}}">\n          <span class="fa fa-trash"></span>\n          {{\'Delete\' | translate}}\n        </button>\n      </form>\n    </div>\n  </div>\n  <ngeo-modal ng-model="efCtrl.unsavedModificationsModalShown">\n    <div class="modal-header">\n      <button\n          type="button"\n          class="close"\n          data-dismiss="modal"\n          aria-label="{{\'Close\' | translate}}">\n        <span aria-hidden="true">&times;</span>\n      </button>\n      <h4 class="modal-title">\n        {{\'Unsaved modifications!\' | translate}}\n      </h4>\n    </div>\n    <div class="modal-body">\n      {{\'There are unsaved changes.\' | translate}}\n    </div>\n    <div class="modal-footer">\n      <button\n          type="button"\n          class="btn btn-default"\n          data-dismiss="modal"\n          ng-click="efCtrl.continueWithoutSaving()">\n        {{\'Continue without saving\' | translate}}\n      </button>\n      <button\n          type="button"\n          class="btn prime"\n          data-dismiss="modal">\n        {{\'Cancel\' | translate}}\n      </button>\n      <button\n          type="button"\n          class="btn btn-default"\n          data-dismiss="modal"\n          ng-click="efCtrl.submit()">\n        {{\'Save\' | translate}}\n      </button>\n    </div>\n  </ngeo-modal>\n  <ngeo-modal ng-model="efCtrl.showServerError">\n    <div class="modal-header">{{\'Server error.\' | translate}}</div>\n    <div class="modal-body">{{$parent.efCtrl.serverErrorType}}<br>\n    {{$parent.efCtrl.serverErrorMessage || (\'Unexpected server error.\' | translate)}}</div>\n  </ngeo-modal>\n</div>\n'}return __p}},function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<div\n    ng-switch="efsCtrl.selectedEditableTreeCtrl">\n\n  <div ng-switch-when="null">\n    <select\n        class="form-control"\n        ng-model="efsCtrl.selectedEditableTreeCtrl"\n        ng-show="efsCtrl.editableTreeCtrls.length > 0"\n        ng-options="treeCtrl.node.name | translate for treeCtrl in efsCtrl.editableTreeCtrls">\n      <option value="" translate>-- Choose a layer --</option>\n    </select>\n    <span\n      ng-show="efsCtrl.editableTreeCtrls.length == 0"\n      translate>No editable layer available!</span>\n  </div>\n\n  <div ng-switch-default>\n    <div class="row">\n      <div class="col-sm-12">\n        <span translate>Currently editing: </span>\n        <b>{{ efsCtrl.selectedEditableTreeCtrl.node.name | translate }}</b>\n        <span class="fa fa-edit"></span>\n        <br>\n        <button\n            ng-click="efsCtrl.stopEditing()"\n            class="btn btn-link btn-sm pull-right">\n          <span class="fa fa-times"></span>\n          {{\'Stop editing\' | translate}}\n        </button>\n      </div>\n    </div>\n\n    <gmf-editfeature\n        gmf-editfeature-dirty="efsCtrl.dirty"\n        gmf-editfeature-editabletreectrl="::efsCtrl.selectedEditableTreeCtrl"\n        gmf-editfeature-map="::efsCtrl.map"\n        gmf-editfeature-state="efsCtrl.state"\n        gmf-editfeature-tolerance="::efsCtrl.tolerance"\n        gmf-editfeature-vector="::efsCtrl.vectorLayer">\n    </gmf-editfeature>\n\n  </div>\n\n</div>\n'}return __p}},function(n,e,i){(function e(t,r){if(true)n.exports=r(i(27),i(386),i(278));else{}})(this,function(r,n,i){return function(r){var n={};function i(e){if(n[e])return n[e].exports;var t=n[e]={exports:{},id:e,loaded:false};r[e].call(t.exports,t,t.exports,i);t.loaded=true;return t.exports}i.m=r;i.c=n;i.p="assets";return i(0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(1);var i=l(n);var a=r(2);var p=l(a);var o=r(3);var s=l(o);function l(e){return e&&e.__esModule?e:{default:e}}t.default=p.default.module("ui.date",[]).constant("uiDateConfig",{}).constant("uiDateFormatConfig","").factory("uiDateConverter",["uiDateFormatConfig",function(n){return{stringToDate:t,dateToString:e};function e(e,t){var r=e||n;if(t){if(r){try{return i.default.datepicker.formatDate(r,t)}catch(e){return undefined}}if(t.toISOString){return t.toISOString()}}return null}function t(e,t){e=e||n;if(p.default.isDate(t)&&!isNaN(t)){return t}if(p.default.isString(t)){if(e){return i.default.datepicker.parseDate(e,t)}var r=new Date(t);return isNaN(r.getTime())?null:r}if(p.default.isNumber(t)){return new Date(t)}return null}}]).directive("uiDate",["uiDateConfig","uiDateConverter",function e(r,d){return{require:"?ngModel",link:function e(s,l,u,c){var f=(0,i.default)(l);var h=function e(){return p.default.extend({},r,s.$eval(u.uiDate))};var t=function e(){var r=false;var t=h();function n(e){var t=["Hours","Minutes","Seconds","Milliseconds"];var r=p.default.isDate(c.$modelValue);var n={};if(!e&&r&&c.$modelValue.toDateString()===f.datepicker("getDate").toDateString()){return}if(r){p.default.forEach(t,function(e){n[e]=c.$modelValue["get"+e]()})}var i=f.datepicker("getDate");if(r){p.default.forEach(t,function(e){i["set"+e](n[e])})}c.$setViewValue(i)}if(c){var i=t.onSelect||p.default.noop;t.onSelect=function(e,t){s.$apply(function(){r=true;n();f.blur();i(e,t,f)})};var a=t.beforeShow||p.default.noop;t.beforeShow=function(e,t){r=true;a(e,t,f)};var o=t.onClose||p.default.noop;t.onClose=function(e,t){r=false;o(e,t,f)};l.on("focus",function(e){if(u.readonly){e.stopImmediatePropagation()}});f.off("blur.datepicker").on("blur.datepicker",function(){if(!r){s.$apply(function(){f.datepicker("setDate",f.datepicker("getDate"));n()})}});c.$validators.uiDateValidator=function e(t,r){return r===null||r===""||p.default.isDate(d.stringToDate(u.uiDateFormat,r))};c.$parsers.push(function e(t){return d.stringToDate(u.uiDateFormat,t)});c.$render=function(){if(p.default.isDate(c.$modelValue)===false&&p.default.isString(c.$modelValue)){c.$modelValue=d.stringToDate(u.uiDateFormat,c.$modelValue)}f.datepicker("setDate",c.$modelValue)}}if(f.data("datepicker")){f.datepicker("option",t);f.datepicker("refresh")}else{f.datepicker(t);f.on("$destroy",function(){f.datepicker("hide");f.datepicker("destroy")})}if(c){c.$render();n(true)}};s.$watch(h,t,true)}}}]).directive("uiDateFormat",["uiDateConverter",function(o){return{require:"ngModel",link:function e(t,r,n,i){var a=n.uiDateFormat;i.$formatters.unshift(function(e){return o.stringToDate(a,e)});i.$parsers.push(function(e){return o.dateToString(a,e)})}}}])},function(e,t){e.exports=r},function(e,t){e.exports=n},function(e,t){e.exports=i}])})},function(e,t,r){"use strict";var n=r(447);var i=r.n(n);var a=r(448);var o=r.n(a);var s=r(449);var l=r.n(s);var u=r(450);var c=r.n(u);var f=r(451);var h=r.n(f);var d=r(452);var p=r.n(d);var v=r(453);var g=r.n(v);var m=r(454);var _=r.n(m);var y=r(455);var b=r.n(y);var w=r(456);var S=r.n(w);var C=r(457);var O=r.n(C);var x=r(458);var T=r.n(x);var E=r(459);var M=r.n(E);var A=r(460);var k=r.n(A);var j=r(461);var I=r.n(j);var D=r(462);var P=r.n(D);var R=r(463);var L=r.n(R);var N=r(464);var $=r.n(N);var F=r(465);var G=r.n(F);var U=r(466);var H=r.n(U)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(t,r,n){var i,a,o;(function(e){if(true){!(a=[n(278)],i=e,o=typeof i==="function"?i.apply(r,a):i,o!==undefined&&(t.exports=o))}else{}})(function(e){e.regional.fr={closeText:"Fermer",prevText:"Précédent",nextText:"Suivant",currentText:"Aujourd'hui",monthNames:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],monthNamesShort:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],dayNamesShort:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],dayNamesMin:["D","L","M","M","J","V","S"],weekHeader:"Sem.",dateFormat:"dd/mm/yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};e.setDefaults(e.regional.fr);return e.regional.fr})},function(t,r,n){var i,a,o;(function(e){if(true){!(a=[n(278)],i=e,o=typeof i==="function"?i.apply(r,a):i,o!==undefined&&(t.exports=o))}else{}})(function(e){e.regional["en-GB"]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};e.setDefaults(e.regional["en-GB"]);return e.regional["en-GB"]})},function(t,r,n){var i,a,o;(function(e){if(true){!(a=[n(278)],i=e,o=typeof i==="function"?i.apply(r,a):i,o!==undefined&&(t.exports=o))}else{}})(function(e){e.regional.de={closeText:"Schließen",prevText:"&#x3C;Zurück",nextText:"Vor&#x3E;",currentText:"Heute",monthNames:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayNamesMin:["So","Mo","Di","Mi","Do","Fr","Sa"],weekHeader:"KW",dateFormat:"dd.mm.yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};e.setDefaults(e.regional.de);return e.regional.de})},function(t,r,n){var i,a,o;(function(e){if(true){!(a=[n(278)],i=e,o=typeof i==="function"?i.apply(r,a):i,o!==undefined&&(t.exports=o))}else{}})(function(e){e.regional.it={closeText:"Chiudi",prevText:"&#x3C;Prec",nextText:"Succ&#x3E;",currentText:"Oggi",monthNames:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthNamesShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],dayNames:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"],dayNamesShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],dayNamesMin:["Do","Lu","Ma","Me","Gi","Ve","Sa"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};e.setDefaults(e.regional.it);return e.regional.it})},function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<div class="ngeo-datepicker">\n  <form name="dateForm" class="ngeo-datepicker-form" novalidate>\n    <div ng-if="::datepickerCtrl.time.widget === \'datepicker\'">\n      <div class="ngeo-datepicker-start-date">\n        <span ng-if="::datepickerCtrl.time.mode === \'range\'" translate>From:</span>\n        <span ng-if="::datepickerCtrl.time.mode !== \'range\'" translate>Date:</span>\n        <input name="sdate" ui-date="datepickerCtrl.sdateOptions" ng-model="datepickerCtrl.sdate" required=""/>\n      </div>\n      <div\n        class="ngeo-datepicker-end-date"\n        ng-if="::datepickerCtrl.time.mode === \'range\'">\n        <span translate>To:</span>\n        <input name="edate" ui-date="datepickerCtrl.edateOptions" ng-model="datepickerCtrl.edate" required=""/>\n      </div>\n    </div>\n  </form>\n</div>\n'}return __p}},function(module,exports,__webpack_require__){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<div class="dropdown">\n  <button\n      class="btn btn-default btn-sm btn-block dropdown-toggle"\n      type="button"\n      data-toggle="dropdown"\n      ng-click="$ctrl.toggle()">\n    <span>{{ ::$ctrl.clone.name | translate }}</span>\n  </button>\n  <div\n    class="dropdown-menu form-group"\n    ng-class="{show: $ctrl.rule.active}">\n\n    <select\n        class="form-control ngeo-rule-operators-list"\n        ng-disabled="$ctrl.drawActive"\n        ng-if="::$ctrl.clone.operators"\n        ng-model="$ctrl.clone.operator"\n        ng-options="$ctrl.operators[operator] | translate for operator in ::$ctrl.clone.operators track by operator">\n    </select>\n\n    <div ng-switch="::$ctrl.clone.type">\n\n      <div\n          class="ngeo-rule-type-date form-group"\n          ng-if="$ctrl.rule.active"\n          ng-switch-when="date|datetime"\n          ng-switch-when-separator="|">\n        <div ng-switch="$ctrl.clone.operator">\n          <div ng-switch-when="..|time_during" ng-switch-when-separator="|">\n            <ngeo-date-picker\n                time="$ctrl.timeRangeMode"\n                on-date-selected="$ctrl.onDateRangeSelected(time)">\n            </ngeo-date-picker>\n          </div>\n          <div ng-switch-default>\n            <ngeo-date-picker\n                time="$ctrl.timeValueMode"\n                on-date-selected="$ctrl.onDateSelected(time)">\n            </ngeo-date-picker>\n          </div>\n        </div>\n      </div>\n\n      <div\n          class="ngeo-rule-type-geometry form-group"\n          ng-switch-when="geometry">\n        <div ng-switch="$ctrl.geomType">\n          <span\n              ng-switch-when="Point">\n          '+((__t=__webpack_require__(275))==null?"":__t)+'\n          </span>\n          <span\n              ng-switch-when="LineString">\n          '+((__t=__webpack_require__(276))==null?"":__t)+'\n          </span>\n          <span\n              ng-switch-when="Polygon">\n          '+((__t=__webpack_require__(277))==null?"":__t)+'\n          </span>\n          <span\n              ng-switch-when="Circle">\n          '+((__t=__webpack_require__(378))==null?"":__t)+'\n          </span>\n          <span\n              ng-switch-when="Rectangle">\n          '+((__t=__webpack_require__(379))==null?"":__t)+'\n          </span>\n        </div>\n        <ngeo-drawfeature\n            ngeo-drawfeature-active="$ctrl.drawActive"\n            ngeo-drawfeature-features="$ctrl.drawnFeatures"\n            ngeo-drawfeature-map="$ctrl.map">\n          <div\n              ngeo-btn-group\n              class="btn-group">\n              <a\n                data-toggle="tooltip"\n                title="{{\'Draw a point on the map\' | translate}}"\n                href\n                ngeo-btn\n                ngeo-drawpoint\n                class="btn btn-sm btn-default ngeo-drawfeature-point"\n                ng-show="[\'intersects\', \'within\'].indexOf($ctrl.clone.operator) !== -1"\n                ng-class="{active: dfCtrl.drawPoint.active}"\n                ng-model="dfCtrl.drawPoint.active">\n                '+((__t=__webpack_require__(275))==null?"":__t)+'\n              </a>\n              <a\n                data-toggle="tooltip"\n                title="{{\'Draw a line on the map\' | translate}}"\n                href\n                ngeo-btn\n                ngeo-measurelength\n                class="btn btn-sm btn-default ngeo-drawfeature-linestring"\n                ng-show="[\'intersects\', \'within\'].indexOf($ctrl.clone.operator) !== -1"\n                ng-class="{active: dfCtrl.measureLength.active}"\n                ng-model="dfCtrl.measureLength.active">\n                '+((__t=__webpack_require__(276))==null?"":__t)+'\n              </a>\n              <a\n                data-toggle="tooltip"\n                title="{{\'Draw a polygon on the map\' | translate}}"\n                href\n                ngeo-btn\n                ngeo-measurearea\n                class="btn btn-sm btn-default ngeo-drawfeature-polygon"\n                ng-class="{active: dfCtrl.measureArea.active}"\n                ng-model="dfCtrl.measureArea.active">\n                '+((__t=__webpack_require__(277))==null?"":__t)+'\n              </a>\n              <a\n                data-toggle="tooltip"\n                title="{{\'Draw a circle on the map\' | translate}}"\n                href\n                ngeo-btn\n                ngeo-measureazimut\n                class="btn btn-sm btn-default ngeo-drawfeature-circle"\n                ng-class="{active: dfCtrl.measureAzimut.active}"\n                ng-model="dfCtrl.measureAzimut.active">\n                '+((__t=__webpack_require__(378))==null?"":__t)+'\n              </a>\n              <a\n                data-toggle="tooltip"\n                title="{{\'Draw a rectangle on the map\' | translate}}"\n                href\n                ngeo-btn\n                ngeo-drawrectangle\n                class="btn btn-sm btn-default ngeo-drawfeature-rectangle"\n                ng-class="{active: dfCtrl.drawRectangle.active}"\n                ng-model="dfCtrl.drawRectangle.active">\n                '+((__t=__webpack_require__(379))==null?"":__t)+'\n              </a>\n          </div>\n\n          <div\n              class="ngeo-rule-type-geometry-instructions"\n              ng-if="$ctrl.drawActive">\n            <span ng-if="dfCtrl.drawPoint.active">\n              {{ \'Draw a point on the map.\' | translate }}\n            </span>\n            <span ng-if="dfCtrl.measureLength.active">\n              {{ \'Draw a line string on the map.\' | translate }}\n            </span>\n            <span ng-if="dfCtrl.measureArea.active">\n              {{ \'Draw a polygon on the map.\' | translate }}\n            </span>\n            <span ng-if="dfCtrl.measureAzimut.active">\n              {{ \'Draw a circle on the map.\' | translate }}\n            </span>\n            <span ng-if="dfCtrl.drawRectangle.active">\n              {{ \'Draw a rectangle on the map.\' | translate }}\n            </span>\n          </div>\n        </ngeo-drawfeature>\n      </div>\n\n      <div\n          class="checkbox ngeo-rule-type-select"\n          ng-switch-when="select">\n        <a\n            ng-click="$ctrl.selectAllChoices()"\n            href>{{ All | translate}}\n        </a>\n        <label\n            class="form-group ol-unselectable"\n            ng-repeat="choice in ::$ctrl.clone.choices">\n          <input\n              ng-checked="$ctrl.clone.getExpression() && $ctrl.clone.getExpression().split(\',\').indexOf(choice) > -1"\n              ng-click="$ctrl.toggleChoiceSelection(choice)"\n              type="checkbox"\n              value="choice" />\n          <span>{{ choice | translate }}</span>\n        </label>\n\n      </div>\n\n      <div\n          class="form-group ngeo-rule-type-text"\n          ng-switch-default>\n        <div ng-switch="$ctrl.clone.operator">\n          <div ng-switch-when="..">\n            <input\n                type="number"\n                class="form-control"\n                ng-model="$ctrl.clone.lowerBoundary"/>\n            <input\n                type="number"\n                class="form-control"\n                ng-model="$ctrl.clone.upperBoundary"/>\n          </div>\n          <div ng-switch-default>\n            <input\n                type="number"\n                class="form-control"\n                ng-if="$ctrl.clone.type === \'number\'"\n                ng-model="$ctrl.clone.expression"/>\n            <input\n                type="text"\n                class="form-control"\n                ng-if="$ctrl.clone.type !== \'number\'"\n                ng-model="$ctrl.clone.expression"/>\n          </div>\n        </div>\n      </div>\n\n      <div class="ngeo-rule-btns">\n        <button\n            class="btn btn-sm btn-default"\n            ng-click="$ctrl.apply()"\n            type="button">{{\'Apply\' | translate}}</button>\n        <button\n            class="btn btn-sm btn-default"\n            ng-click="$ctrl.cancel()"\n            type="button">{{\'Cancel\' | translate}}</button>\n      </div>\n\n    </div>\n  </div>\n</div>\n\n\n<div\n    class="ngeo-rule-value"\n    ng-if="$ctrl.rule.value !== null">\n\n  <a\n      class="btn btn-sm btn-link"\n      ng-click="!$ctrl.rule.active && $ctrl.reset()"\n      ng-disabled="$ctrl.rule.active"\n      href>\n    <span class="fa fa-times"></span>\n  </a>\n\n  <div ng-switch="::$ctrl.rule.type">\n\n    <div\n        ng-switch-when="date|datetime"\n        ng-switch-when-separator="|">\n      <div ng-switch="$ctrl.rule.operator">\n        <div ng-switch-when="..|time_during" ng-switch-when-separator="|">\n          <span translate>From </span>\n          <span>{{ $ctrl.timeToDate($ctrl.rule.lowerBoundary) }}</span>\n          <span translate> to </span>\n          <span>{{ $ctrl.timeToDate($ctrl.rule.upperBoundary) }}</span>\n        </div>\n        <div ng-switch-default>\n          <span>{{ $ctrl.operatorsShortFormat[$ctrl.rule.operator] }}</span>\n          <span>{{ $ctrl.timeToDate($ctrl.rule.getExpression()) }}</span>\n        </div>\n      </div>\n    </div>\n\n    <div ng-switch-when="geometry">\n      <span>{{ $ctrl.operators[$ctrl.rule.operator] }}</span>\n      <span ng-switch="$ctrl.getRuleGeometryType()">\n        <span\n            class="gmf-icon gmf-icon-point"\n            ng-switch-when="Point">\n        </span>\n        <span\n            class="gmf-icon gmf-icon-line"\n            ng-switch-when="LineString">\n        </span>\n        <span\n            class="gmf-icon gmf-icon-polygon"\n            ng-switch-when="Polygon">\n        </span>\n        <span\n            class="gmf-icon gmf-icon-circle"\n            ng-switch-when="Circle">\n        </span>\n        <span\n            class="gmf-icon gmf-icon-rectangle"\n            ng-switch-when="Rectangle">\n        </span>\n      </span>\n    </div>\n\n    <div ng-switch-when="select">\n      <span ng-repeat="choice in $ctrl.rule.getExpression().split(\',\')">\n        {{ choice | translate }}{{ $last ? \'\' : \', \' }}\n      </span>\n    </div>\n\n    <div ng-switch-default>\n      <div ng-switch="$ctrl.rule.operator">\n        <div ng-switch-when="..|time_during" ng-switch-when-separator="|">\n          <span translate>Between </span>\n          <span>{{ $ctrl.rule.lowerBoundary }}</span>\n          <span translate> and </span>\n          <span>{{ $ctrl.rule.upperBoundary }}</span>\n        </div>\n        <div ng-switch-default>\n          <span>{{ $ctrl.operatorsShortFormat[$ctrl.rule.operator] }}</span>\n          <span>{{ $ctrl.rule.getExpression() }}</span>\n        </div>\n      </div>\n    </div>\n\n  </div>\n</div>\n'}return __p}},function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<div class="dropdown">\n  <button\n      class="btn btn-link dropdown-toggle ngeo-filter-condition-button"\n      ng-class="{disabled: $ctrl.aRuleIsActive}"\n      type="button"\n      data-toggle="dropdown"\n      ng-disabled="$ctrl.aRuleIsActive">\n    <span class="fa fa-cog"></span>\n  </button>\n  <ul class="dropdown-menu">\n    <li\n        class="ngeo-filter-condition-criteria-header"\n        translate>Criteria taken into account</li>\n    <li ng-repeat="condition in ::$ctrl.conditions">\n      <a\n          href\n          ng-click="$ctrl.setCondition(condition)">\n          <span\n              ng-class="{\'ngeo-filter-condition-criteria-active\': condition.value == $ctrl.datasource.filterCondition}"\n              class="fa fa-check ngeo-filter-condition-criteria">\n          </span>\n          <span>{{::condition.text | translate}}</span>\n      </a>\n    </li>\n  </ul>\n</div>\n\n<ngeo-rule\n    ng-repeat="rule in $ctrl.directedRules"\n    feature-overlay="::$ctrl.featureOverlay"\n    class="ngeo-filter-rule-directed"\n    map="$ctrl.map"\n    rule="rule"\n    tool-group="$ctrl.toolGroup">\n</ngeo-rule>\n\n<hr class="ngeo-filter-separator-rules" />\n\n<div ng-repeat="rule in $ctrl.customRules">\n  <a\n      class="btn btn-sm btn-link ngeo-filter-rule-custom-rm-btn"\n      ng-click="!$ctrl.aRuleIsActive && $ctrl.removeCustomRule(rule)"\n      ng-disabled="$ctrl.aRuleIsActive"\n      href>\n    <span class="fa fa-times"></span>\n  </a>\n  <ngeo-rule\n      feature-overlay="::$ctrl.featureOverlay"\n      class="ngeo-filter-rule-custom"\n      map="$ctrl.map"\n      rule="rule"\n      tool-group="$ctrl.toolGroup">\n  </ngeo-rule>\n</div>\n\n<div class="dropdown">\n  <button\n      class="btn btn-link dropdown-toggle"\n      ng-class="{disabled: $ctrl.aRuleIsActive}"\n      type="button"\n      data-toggle="dropdown"\n      ng-disabled="$ctrl.aRuleIsActive">\n    <span translate>+ Add a new criteria</span>\n  </button>\n  <ul class="dropdown-menu">\n    <li ng-repeat="attribute in ::$ctrl.geometryAttributes">\n      <a\n          href\n          ng-click="$ctrl.createAndAddCustomRule(attribute)">\n          <span translate>Spatial filter</span>\n      </a>\n    </li>\n    <li role="presentation" class="divider"></li>\n    <li ng-repeat="attribute in ::$ctrl.otherAttributes">\n      <a\n          href\n          ng-click="$ctrl.createAndAddCustomRule(attribute)">\n          <span>{{::attribute.name | translate}}</span>\n      </a>\n    </li>\n  </ul>\n</div>\n\n<hr class="ngeo-filter-separator-criteria" />\n\n<button\n    class="btn btn-link"\n    type="button"\n    ng-click="$ctrl.apply()"\n    ng-disabled="$ctrl.hasARule() === false || $ctrl.datasource.visible === false">\n  <span class="fa fa-check"></span>\n  <span translate>Apply filter</span>\n</button>\n\n<button\n    class="btn btn-link"\n    type="button"\n    ng-click="$ctrl.getData()"\n    ng-disabled="$ctrl.hasARule() === false || $ctrl.datasource.visible === false">\n  <span class="fa fa-chevron-right"></span>\n  <span translate>Get data</span>\n</button>\n'}return __p}},function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<div\n    class="form-group"\n    ng-switch="$ctrl.filtrableDataSources.length">\n  <span ng-switch-when="0" translate>No filtrable layer available!</span>\n  <select\n      class="form-control"\n      ng-disabled="$ctrl.aRuleIsActive"\n      ng-switch-default\n      ng-model="$ctrl.gmfDataSourceBeingFiltered.dataSource"\n      ng-options="dataSource.name | translate for dataSource in $ctrl.filtrableDataSources">\n    <option value="" translate>-- Layer to filter --</option>\n  </select>\n\n  <div ng-if="$ctrl.customRules && $ctrl.directedRules && $ctrl.readyDataSource">\n    <hr class="gmf-filterselector-separator" />\n\n    <div class="dropdown gmf-filterselector-savedfilters">\n      <button\n          class="btn btn-link dropdown-toggle ngeo-filter-condition-button"\n          ng-class="{disabled: $ctrl.aRuleIsActive || $ctrl.gmfSavedFilters.currentDataSourceItems.length === 0}"\n          type="button"\n          data-toggle="dropdown"\n          ng-disabled="$ctrl.aRuleIsActive || $ctrl.gmfSavedFilters.currentDataSourceItems.length === 0">\n        <span translate>Saved</span>\n      </button>\n      <ul class="dropdown-menu">\n        <li ng-repeat="item in $ctrl.gmfSavedFilters.currentDataSourceItems">\n          <a\n              href\n              ng-click="$ctrl.saveFilterLoadItem(item)">\n            <span>{{::item.name}}</span>\n          </a>\n        </li>\n        <li role="separator" class="divider"></li>\n        <li>\n          <a\n              href\n              ng-click="$ctrl.saveFilterManage()">\n            <span translate>Manage saved filters</span>\n          </a>\n        </li>\n      </ul>\n    </div>\n\n    <ngeo-filter\n        a-rule-is-active="$ctrl.aRuleIsActive"\n        custom-rules="$ctrl.customRules"\n        datasource="$ctrl.readyDataSource"\n        directed-rules="$ctrl.directedRules"\n        feature-overlay="$ctrl.featureOverlay"\n        map="$ctrl.map"\n        tool-group="$ctrl.toolGroup">\n    </ngeo-filter>\n\n    <div>\n      <button\n          class="btn btn-link gmf-filterselector-savebtn"\n          type="button"\n          ng-click="!$ctrl.aRuleIsActive && $ctrl.saveFilterShowModal()"\n          ng-disabled="$ctrl.aRuleIsActive">\n        <span class="fa fa-save"></span>\n        <span translate>Save</span>\n      </button>\n    </div>\n  </div>\n\n  <ngeo-modal ng-model="$ctrl.saveFilterSaveModalShown">\n    <div class="modal-header">\n      <h4 class="modal-title">{{\'Save filter\' | translate}}</h4>\n      <button\n          type="button"\n          class="close"\n          data-dismiss="modal"\n          aria-label="{{\'Close\' | translate}}">\n        <span aria-hidden="true">&times;</span>\n      </button>\n    </div>\n    <div class="modal-body">\n      <p class="gmf-filterselector-savefilter-desc" translate>\n        You can save the filter that you created to re-load it later.\n      </p>\n      <input\n          type="text"\n          class="form-control"\n          name="name"\n          ng-model="$ctrl.saveFilterName"\n          placeholder="{{\'Filter name\' | translate}}" />\n    </div>\n    <div class="modal-footer">\n      <button\n          type="button"\n          class="btn btn-default"\n          data-dismiss="modal">{{\'Cancel\' | translate}}</button>\n      <button\n          type="button"\n          ng-click="$ctrl.saveFilterSave()"\n          ng-disabled="$ctrl.saveFilterName === \'\'"\n          class="btn prime">{{\'Save\' | translate}}</button>\n    </div>\n  </ngeo-modal>\n\n  <ngeo-modal ng-model="$ctrl.saveFilterManageModalShown">\n    <div class="gmf-filterselector-managefilter-modal">\n      <div class="modal-header">\n        <h4 class="modal-title">{{\'Manage filters\' | translate}}</h4>\n        <button\n            type="button"\n            class="close"\n            data-dismiss="modal"\n            aria-label="{{\'Close\' | translate}}">\n          <span aria-hidden="true">&times;</span>\n        </button>\n      </div>\n      <div class="modal-body">\n        <ul>\n          <li ng-repeat="item in $ctrl.gmfSavedFilters.currentDataSourceItems">\n            <span>{{::item.name}}</span>\n            <a\n                href\n                ng-click="$ctrl.saveFilterRemoveItem(item)">\n                {{ \'Delete\' | translate }}\n            </a>\n            <div class="gmf-eol"></div>\n          </li>\n        </ul>\n      </div>\n      <div class="modal-footer">\n        <button\n            type="button"\n            class="btn btn-default"\n            data-dismiss="modal">{{\'Close\' | translate}}</button>\n      </div>\n    </div>\n  </ngeo-modal>\n\n</div>\n'}return __p}},function(module,exports,__webpack_require__){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<ul>\n  <li ng-repeat="layer in ::$ctrl.layer.Layer">\n\n    <div class="gmf-wmscapabilitylayertreenode-header">\n\n    <span\n      class="gmf-wmscapabilitylayertreenode-popover-container"\n      ng-if="::(layer.Name !== undefined || layer.Abstract !== undefined)"\n      ngeo-popover\n      ngeo-popover-dismiss=".content"\n      ngeo-popover-placement="left"\n    >\n\n      <span\n        ngeo-popover-anchor\n        class="fa fa-cog gmf-wmscapabilitylayertreenode-actions">\n      </span>\n\n      <div\n        class="gmf-wmscapabilitylayertreenode-popover-content"\n        ngeo-popover-content>\n        <ul>\n          <li\n              ng-if="::(layer.Name !== undefined)">\n            <i class="fa fa-plus fa-fw"></i>\n            <a\n              href=""\n              ng-click="$ctrl.createAndAddDataSource(layer); popoverCtrl.dismissPopover()"\n            >\n              <span translate>Add layer</span>\n            </a>\n          </li>\n          <li\n              ng-if="::(layer.Abstract !== undefined)">\n            <i class="fa fa-th-list fa-fw"></i>\n            <a\n              aria-expanded="false"\n              data-toggle="collapse"\n              href="#gmf-wmscapabilitylayertreenode-description-{{::$ctrl.getUid(layer)}}"\n              ng-click="popoverCtrl.dismissPopover()"\n            >\n              <span translate>Open/Close description</span>\n            </a>\n          </li>\n        </ul>\n      </div>\n    </span>\n\n    <a\n      aria-expanded="false"\n      class="fa gmf-wmscapabilitylayertreenode-expand-node fa-fw"\n      data-toggle="collapse"\n      href="#gmf-wmscapabilitylayertreenode-children-{{::$ctrl.getUid(layer)}}"\n      ng-if="::(layer.Layer !== undefined && layer.Layer.length)"\n    ></a>\n\n    <span\n      ng-if="::(layer.Layer !== undefined && layer.Layer.length)"\n      class="fa fa-fw gmf-wmscapabilitylayertreenode-group"\n    >'+((__t=__webpack_require__(382))==null?"":__t)+'</span>\n\n    <a\n      class="fa fa-circle-thin gmf-wmscapabilitylayertreenode-no-icon fa-fw "\n      ng-if="::(layer.Layer === undefined || layer.Layer.length === 0)"\n    ></a>\n\n    <span\n      class="gmf-wmscapabilitylayertreenode-title"\n    >{{ ::layer.Title }}</span>\n\n    <div\n      class="collapse gmf-wmscapabilitylayertreenode-description"\n      id="gmf-wmscapabilitylayertreenode-description-{{::$ctrl.getUid(layer)}}"\n      ng-if="::(layer.Abstract !== undefined)"\n    >\n      <a\n        aria-expanded="false"\n        class="gmf-wmscapabilitylayertreenode-description-toggle"\n        data-toggle="collapse"\n        href="#gmf-wmscapabilitylayertreenode-description-{{::$ctrl.getUid(layer)}}"\n        >\n        <span translate>Hide description</span>\n      </a>\n      <span\n        class="gmf-wmscapabilitylayertreenode-description-content"\n      >{{ ::layer.Abstract }}</span>\n    </div>\n\n    </div>\n\n    <gmf-wmscapabilitylayertreenode\n        class="collapse"\n        id="gmf-wmscapabilitylayertreenode-children-{{::$ctrl.getUid(layer)}}"\n        capabilities="::$ctrl.capabilities"\n        layer="::layer"\n        ng-if="::(layer.Layer !== undefined)">\n    </gmf-wmscapabilitylayertreenode>\n  </li>\n</ul>\n'}return __p}},function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<ul>\n  <li ng-repeat="layer in ::$ctrl.layers">\n    <div class="gmf-wmscapabilitylayertreenode-header">\n\n      <span\n        class="gmf-wmscapabilitylayertreenode-popover-container"\n        ngeo-popover\n        ngeo-popover-dismiss=".content"\n        ngeo-popover-placement="left"\n      >\n        <span\n          ngeo-popover-anchor\n          class="fa fa-cog gmf-wmscapabilitylayertreenode-actions">\n        </span>\n\n        <div\n          class="gmf-wmscapabilitylayertreenode-popover-content"\n          ngeo-popover-content\n        >\n          <ul>\n            <li>\n              <i class="fa fa-plus fa-fw"></i>\n              <a\n                href=""\n                ng-click="$ctrl.createAndAddDataSource(layer); popoverCtrl.dismissPopover()"\n              >\n                <span translate>Add layer</span>\n              </a>\n            </li>\n            <li\n              ng-if="::(layer.Abstract !== undefined)">\n              <i class="fa fa-th-list fa-fw"></i>\n              <a\n                aria-expanded="false"\n                data-toggle="collapse"\n                href="#gmf-wmscapabilitylayertreenode-description-{{::$ctrl.getUid(layer)}}"\n                ng-click="popoverCtrl.dismissPopover()"\n              >\n                <span translate>Open/Close description</span>\n              </a>\n            </li>\n          </ul>\n        </div>\n      </span>\n\n      <a class="fa fa-circle-thin gmf-wmscapabilitylayertreenode-no-icon fa-fw"></a>\n      <span\n        class="gmf-wmscapabilitylayertreenode-title"\n      >{{ ::layer.Title }}</span>\n\n      <div\n        class="collapse gmf-wmscapabilitylayertreenode-description"\n        id="gmf-wmscapabilitylayertreenode-description-{{::$ctrl.getUid(layer)}}"\n        ng-if="::(layer.Abstract !== undefined)"\n      >\n        <a\n          aria-expanded="false"\n          class="gmf-wmscapabilitylayertreenode-description-toggle"\n          data-toggle="collapse"\n          href="#gmf-wmscapabilitylayertreenode-description-{{::$ctrl.getUid(layer)}}"\n        >\n          <span translate>Hide description</span>\n        </a>\n        <span\n          class="gmf-wmscapabilitylayertreenode-description-content"\n        >{{ ::layer.Abstract }}</span>\n\n      </div>\n    </div>\n  </li>\n</ul>\n'}return __p}},function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<div class="form-group">\n  <select\n    class="form-control"\n    ng-model="$ctrl.mode"\n    ng-options="mode | translate for mode in $ctrl.modes"\n    ng-click="$ctrl.hasError = false">\n  </select>\n</div>\n\n<div>\n\n  <form\n    name="idsl_form"\n    novalidate\n    ng-show="$ctrl.mode === \'Local\'">\n    <div class="form-group">\n      <div class="input-group">\n        <input\n          name="file"\n          type="file"\n          required\n        />\n        <input\n          class="form-control"\n          placeholder="{{\'No file\' | translate}}"\n          readonly\n          type="text"\n          value="{{$ctrl.fileNameAndSize}}"\n          ng-click="$ctrl.browse()"\n        />\n        <span class="input-group-btn">\n          <button\n            class="btn btn-default"\n            type="button"\n            ng-click="$ctrl.browse()"\n            translate>Browse</button>\n        </span>\n      </div>\n    </div>\n    <div class="form-group">\n      <button\n        class="btn prime form-control"\n        ng-class="{\'has-error\': $ctrl.hasError}"\n        title="{{\'Load a file from local\' | translate}}"\n        type="submit"\n        ng-click="idsl_form.$valid && $ctrl.load()"\n        ng-disabled="$ctrl.file === undefined || $ctrl.hasError"\n      >\n        <span ng-if="!$ctrl.hasError">{{\'Load local file\' | translate}}</span>\n        <span ng-if="$ctrl.hasError">{{\'Unable to load the file\' | translate}}</span>\n      </button>\n    </div>\n  </form>\n\n  <form\n    name="idsc_form"\n    novalidate\n    ng-show="$ctrl.mode === \'Online\'">\n    <div class="form-group gmf-importdatasource-url-form-group">\n      <input\n        autocomplete="off"\n        class="form-control"\n        name="url"\n        placeholder="{{\'Choose or enter online resource URL\' | translate}}"\n        required\n        type="url"\n        ng-disabled="$ctrl.pending"\n        ng-model="$ctrl.url"\n      />\n    </div>\n    <div class="form-group">\n      <button\n        class="btn prime form-control gmf-importdatasource-connect-btn"\n        ng-class="{\'has-error\': $ctrl.hasError}"\n        title="{{\'Connect to online resource\' | translate}}"\n        type="submit"\n        ng-click="idsc_form.$valid && $ctrl.connect()"\n        ng-disabled="idsc_form.$invalid || $ctrl.pending"\n      >\n        <span\n          ng-if="$ctrl.pending"\n        >{{\'Connecting, please wait...\' | translate}}</span>\n        <span\n          ng-if="!$ctrl.pending && $ctrl.hasError"\n        >{{\'Failed to connect\' | translate}}</span>\n        <span\n          ng-if="!$ctrl.pending && !$ctrl.hasError"\n        >{{\'Connect\' | translate}}</span>\n      </button>\n    </div>\n  </form>\n\n</div>\n\n<div\n  class="gmf-importdatasource-layers"\n  ng-if="$ctrl.wmsCapabilities !== null || $ctrl.wmtsCapabilities !== null">\n  <hr />\n  <gmf-wmscapabilitylayertreenode\n    capabilities="::$ctrl.wmsCapabilities"\n    layer="::$ctrl.wmsCapabilities.Capability.Layer"\n    url="::$ctrl.url"\n    ng-if="$ctrl.wmsCapabilities !== null">\n  </gmf-wmscapabilitylayertreenode>\n  <gmf-wmtscapabilitylayertree\n    capabilities="::$ctrl.wmtsCapabilities"\n    layers="::$ctrl.wmtsCapabilities.Contents.Layer"\n    url="::$ctrl.url"\n    ng-if="$ctrl.wmtsCapabilities !== null">\n  </gmf-wmtscapabilitylayertree>\n</div>\n'}return __p}},function(e,t){},function(module,exports,__webpack_require__){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<div\n  class="gmf-layertree-group gmf-layertree-depth-1 {{$ctrl.group.visibilityState}}"\n>\n  <a\n    data-toggle="collapse"\n    href="#gmf-layertree-layer-group-{{::$ctrl.getGroupUid()}}"\n    aria-expanded="true"\n    class="fa gmf-layertree-expand-node fa-fw">\n  </a>\n\n  <a\n    class="fa fa-fw gmf-layertree-state"\n    href\n    ng-click="$ctrl.toggle()"\n  >'+((__t=__webpack_require__(382))==null?"":__t)+'</a>\n\n  <a\n    class="gmf-layertree-name"\n    href\n    ng-click="$ctrl.toggle()"\n  >\n    <span>{{$ctrl.group.title | translate}}</span>\n  </a>\n\n  <span class="gmf-layertree-right-buttons">\n    <a\n      href=""\n      ng-click="$ctrl.remove()">\n      <span class="fa fa-trash"></span>\n    </a>\n  </span>\n</div>\n\n<ul\n  id="gmf-layertree-layer-group-{{::$ctrl.getGroupUid()}}"\n  class="collapse in"\n>\n  <li\n    class="gmf-layertree-node gmf-layertree-depth-2"\n    ng-class="[dataSource.visible ? \'on\' : \'off\']"\n    ng-repeat="dataSource in $ctrl.group.dataSources"\n  >\n    <div class="gmf-layertree-leaf">\n      <a\n        href\n        ng-click="$ctrl.toggleDataSource(dataSource)"\n        class="gmf-layertree-layer-icon gmf-layertree-no-layer-icon"\n      >\n      </a>\n      <a\n        class="gmf-layertree-name"\n        href\n        ng-click="$ctrl.toggleDataSource(dataSource)"\n      >\n        <span>{{dataSource.name | translate}}</span>\n      </a>\n\n      <span class="gmf-layertree-right-buttons">\n        <a\n          href=""\n          ng-click="$ctrl.removeDataSource(dataSource)">\n          <span class="fa fa-trash"></span>\n        </a>\n  </span>\n    </div>\n  </li>\n</ul>\n'}return __p}},function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<span ng-if="::!layertreeCtrl.isRoot">{{::layertreeCtrl.node.name}}</span>\n<input\n  type="checkbox"\n  ng-if="::layertreeCtrl.node && !layertreeCtrl.node.children"\n  ng-model="layertreeCtrl.getSetActive"\n  ng-model-options="{getterSetter: true}"/>\n<ul ng-if="::layertreeCtrl.node.children">\n  <li\n    ng-repeat="node in ::layertreeCtrl.node.children"\n    ngeo-layertree="::node"\n    ngeo-layertree-notroot\n    ngeo-layertree-map="layertreeCtrl.map"\n    ngeo-layertree-nodelayerexpr="layertreeCtrl.nodelayerExpr"\n    ngeo-layertree-listenersexpr="layertreeCtrl.listenersExpr">\n  </li>\n</ul>\n'}return __p}},function(module,exports,__webpack_require__){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<div\n   class="gmf-layertree-root-tools"\n   ng-if="layertreeCtrl.isRoot">\n  <a\n     href\n     ng-if="gmfLayertreeCtrl.nodesCount() > 0"\n     ng-click="gmfLayertreeCtrl.removeAllNodes()">\n    <span class="fa fa-trash"></span> {{\'Clear all\' | translate}}\n  </a>\n</div>\n<div\n  ng-if="::!layertreeCtrl.isRoot"\n  id="gmf-layertree-node-{{::layertreeCtrl.uid}}"\n  ng-class="[layertreeCtrl.node.children ? \'gmf-layertree-group\' : \'gmf-layertree-leaf\', \'gmf-layertree-depth-\' + layertreeCtrl.depth, gmfLayertreeCtrl.getResolutionStyle(layertreeCtrl.node), gmfLayertreeCtrl.getNodeState(layertreeCtrl)]">\n\n  <div\n    class="ngeo-sortable-handle"\n    ng-show="layertreeCtrl.depth === 1 && layertreeCtrl.parent.children.length > 1">\n    <i class="gmf-layertree-sortable-handle-icon fa fa-ellipsis-v"></i>\n  </div>\n\n  <a\n    ng-if="::layertreeCtrl.node.children"\n    data-toggle="collapse"\n    href="#gmf-layertree-layer-group-{{::layertreeCtrl.uid}}"\n    aria-expanded="{{::layertreeCtrl.node.metadata.isExpanded}}"\n    class="fa gmf-layertree-expand-node fa-fw">\n  </a>\n\n  <a\n    href\n    ng-click="::gmfLayertreeCtrl.toggleActive(layertreeCtrl)"\n    ng-if="::!layertreeCtrl.node.children && gmfLayertreeCtrl.getLegendIconURL(layertreeCtrl)"\n    class="gmf-layertree-layer-icon"\n  >\n    <div>\x3c!--This div is required for flex issues with IE11--\x3e\n      <img\n        ng-if="::(legendIconUrl=gmfLayertreeCtrl.getLegendIconURL(layertreeCtrl))"\n        ng-src="{{::legendIconUrl}}">\n      </img>\n    </div>\n  </a>\n  <a\n    href\n    ng-click="::gmfLayertreeCtrl.toggleActive(layertreeCtrl)"\n    ng-if="::!layertreeCtrl.node.children && !gmfLayertreeCtrl.getLegendIconURL(layertreeCtrl)"\n    class="gmf-layertree-layer-icon gmf-layertree-no-layer-icon"\n  >'+((__t=__webpack_require__(482))==null?"":__t)+'</a>\n\n  </a>\n\n  <a\n    href\n    ng-click="::gmfLayertreeCtrl.toggleActive(layertreeCtrl)"\n    ng-if="layertreeCtrl.node.children && layertreeCtrl.layer.loading"\n    class="fa fa-fw fa-refresh fa-sync fa-spin"\n  ></a>\n  <a\n    href\n    ng-click="::gmfLayertreeCtrl.toggleActive(layertreeCtrl)"\n    ng-if="layertreeCtrl.node.children && !layertreeCtrl.layer.loading"\n    class="gmf-layertree-state gmf-not-intermediate"\n  >'+((__t=__webpack_require__(382))==null?"":__t)+'</a>\n  <a\n    href\n    ng-click="::gmfLayertreeCtrl.toggleActive(layertreeCtrl)"\n    ng-if="layertreeCtrl.node.children && !layertreeCtrl.layer.loading"\n    class="gmf-layertree-state gmf-intermediate"\n  >'+((__t=__webpack_require__(483))==null?"":__t)+'</a>\n\n  <a\n    href\n    ng-click="::gmfLayertreeCtrl.toggleActive(layertreeCtrl)"\n    class="gmf-layertree-name"\n    data-toggle="tooltip"\n    data-placement="top"\n    title="{{layertreeCtrl.node.name | translate}}">\n\n    {{layertreeCtrl.node.name | translate}}\n\n    <i\n      class="gmf-layertree-zoom"\n      data-toggle="tooltip"\n      data-placement="bottom"\n      data-title="{{\'Not visible at current scale. Click to zoom.\'|translate}}"\n      ng-click="::gmfLayertreeCtrl.zoomToResolution(layertreeCtrl); $event.preventDefault(); $event.stopPropagation();"\n      ng-if="gmfLayertreeCtrl.getNodeState(layertreeCtrl) == \'on\'"\n    >'+((__t=__webpack_require__(484))==null?"":__t)+'</i>\n\n    <span\n      ngeo-popover\n      ngeo-popover-dismiss=".content"\n      ng-if="gmfLayertreeCtrl.getNodeState(layertreeCtrl) !== \'off\' && layertreeCtrl.node.time && layertreeCtrl.node.time.mode !== \'disabled\'">\n\n      <span\n        ngeo-popover-anchor\n        class="far fa-clock"\n        ng-click="$event.preventDefault(); $event.stopPropagation()">\n      </span>\n\n      <div ngeo-popover-content>\n        <ngeo-date-picker\n          ng-if="::layertreeCtrl.node.time.widget === \'datepicker\'"\n          time="layertreeCtrl.node.time"\n          on-date-selected="gmfLayertreeCtrl.updateWMSTimeLayerState(layertreeCtrl, time)">\n        </ngeo-date-picker>\n\n        <gmf-time-slider\n          ng-if="::layertreeCtrl.node.time.widget === \'slider\'"\n          gmf-time-slider-time="layertreeCtrl.node.time"\n          gmf-time-slider-on-date-selected="gmfLayertreeCtrl.updateWMSTimeLayerState(layertreeCtrl, time)">\n        </gmf-time-slider>\n      </div>\n    </span>\n\n    <span\n      class="fa fa-edit"\n      data-toggle="tooltip"\n      data-placement="right"\n      title="{{\'Currently editing this layer\'|translate}}"\n      ng-if="layertreeCtrl.properties.editing">\n    </span>\n  </a>\n\n  <span class="gmf-layertree-right-buttons">\n    <a\n      href=""\n      ng-if="::layertreeCtrl.depth == 1"\n      ng-click="gmfLayertreeCtrl.removeNode(layertreeCtrl.node)">\n      <span class="fa fa-trash"></span>\n    </a>\n\n    <a\n      class="gmf-layertree-node-menu-btn"\n      href=""\n      ng-if="::gmfLayertreeCtrl.supportsCustomization(layertreeCtrl)"\n      ng-click="::gmfLayertreeCtrl.toggleNodeLegend(\'#gmf-layertree-node-menu-\' + layertreeCtrl.uid)">\n      <span class="fa fa-cog"></span>\n    </a>\n\n    <span\n      ngeo-popover\n      ng-if="::(layertreeCtrl.depth === 1 && !layertreeCtrl.node.mixed) || (layertreeCtrl.depth > 1 && layertreeCtrl.parent.node.mixed && !layertreeCtrl.node.children) || (gmfLayertreeCtrl.getLegendsObject(layertreeCtrl) && layertreeCtrl.node.metadata.legend) || layertreeCtrl.getDataSource().filtrable" ngeo-popover-dismiss=".content">\n\n      <span\n        ngeo-popover-anchor\n        class="extra-actions fa fa-cog">\n      </span>\n\n      <div ngeo-popover-content>\n        <ul>\n          <li ng-if="::(layertreeCtrl.depth === 1 && !layertreeCtrl.node.mixed) || (layertreeCtrl.depth > 1 && layertreeCtrl.parent.node.mixed)">\n            <i class="fa fa-tint fa-fw"></i>\n            <span>{{\'Opacity\'|translate}}</span>\n            <input\n              class="input-action"\n              type="range"\n              min="0"\n              max="1"\n              step="0.01"\n              ng-model="layertreeCtrl.layer.opacity" />\n          </li>\n          <li ng-if="::gmfLayertreeCtrl.getLegendsObject(layertreeCtrl) && layertreeCtrl.node.metadata.legend">\n            <i class="fa fa-th-list fa-fw"></i>\n            <a\n              ng-click="::gmfLayertreeCtrl.toggleNodeLegend(\'#gmf-layertree-node-\' + layertreeCtrl.uid + \'-legend\'); popoverCtrl.dismissPopover()"\n              data-toggle="collapse"\n              href="">\n              {{\'Show/hide legend\'|translate}}\n            </a>\n          </li>\n          <li ng-if="layertreeCtrl.getDataSource() && layertreeCtrl.getDataSource().filtrable">\n            <i class="fa fa-filter fa-fw"></i>\n            <a\n              ng-click="gmfLayertreeCtrl.toggleFiltrableDataSource(layertreeCtrl.getDataSource())"\n              href="">\n              {{\'Filter\'|translate}}\n            </a>\n          </li>\n        </ul>\n      </div>\n    </span>\n\n    <span\n      class="gmf-layertree-metadata"\n      ng-if="::layertreeCtrl.node.metadata.metadataUrl">\n\n      <span ng-if="::gmfLayertreeCtrl.openLinksInNewWindow === true">\n        <a\n          title="{{\'More information\'|translate}}"\n          href="{{::layertreeCtrl.node.metadata.metadataUrl}}"\n          target="blank_">\n        </a>\n      </span>\n\n      <span ng-if="::gmfLayertreeCtrl.openLinksInNewWindow !== true">\n        <a\n          title="{{\'More information\'|translate}}"\n          href="" ng-click="gmfLayertreeCtrl.displayMetadata(layertreeCtrl)">\n        </a>\n      </span>\n    </span>\n  </span>\n</div>\n\n<div\n  class="gmf-layertree-node-menu"\n  id="gmf-layertree-node-menu-{{::layertreeCtrl.uid}}"\n  style="display:none;"\n  ng-if="::gmfLayertreeCtrl.supportsCustomization(layertreeCtrl)">\n\n  <div ng-if="::gmfLayertreeCtrl.supportsOpacityChange(layertreeCtrl)">\n    <i class="fa fa-tint fa-fw"></i>\n    <span>{{\'Opacity\'|translate}}</span>\n    <input\n        class="input-action"\n        type="range"\n        min="0"\n        max="1"\n        step="0.01"\n        ng-model="layertreeCtrl.layer.opacity" />\n  </div>\n\n  <a\n    class="gmf-layertree-node-menu-togglelegend"\n    ng-if="::gmfLayertreeCtrl.supportsLegend(layertreeCtrl)"\n    data-toggle="collapse"\n    ng-click="::gmfLayertreeCtrl.toggleNodeLegend(\'#gmf-layertree-node-\' + layertreeCtrl.uid + \'-legend\')"\n    href="">\n    <span\n        class="fa fa-th-list">\n    </span>\n    {{\'Show/hide legend\'|translate}}\n  </a>\n\n</div>\n\n<div\n  ng-if="::!layertreeCtrl.isRoot && gmfLayertreeCtrl.getLegendsObject(layertreeCtrl) && layertreeCtrl.node.metadata.legend" id="gmf-layertree-node-{{::layertreeCtrl.uid}}-legend"\n  class="collapse gmf-layertree-legend"\n  ng-class="::[layertreeCtrl.node.metadata.isLegendExpanded ? \'show\' : \'\']">\n\n  <a\n    title="{{\'Hide legend\'|translate}}"\n    data-toggle="collapse"\n    ng-click="::gmfLayertreeCtrl.toggleNodeLegend(\'#gmf-layertree-node-\' + layertreeCtrl.uid + \'-legend\')"\n    href="">\n    {{\'Hide legend\'|translate}}\n  </a>\n  <div ng-if="gmfLayertreeCtrl.isNodeLegendVisible(\'#gmf-layertree-node-\' + layertreeCtrl.uid + \'-legend\')">\n    <div ng-repeat="(title, url) in gmfLayertreeCtrl.getLegendsObject(layertreeCtrl)">\n      <p ng-if="gmfLayertreeCtrl.getNumberOfLegendsObject(layertreeCtrl) > 1">{{title|translate}}</p>\n      <img ng-src="{{url}}"></img>\n    </div>\n  </div>\n</div>\n\n<ul\n   class="gmf-layertree-root-external-datasources"\n   ng-if="layertreeCtrl.isRoot && (gmfLayertreeCtrl.gmfExternalDataSourcesManager.wmsGroups.length || gmfLayertreeCtrl.gmfExternalDataSourcesManager.wmtsGroups.length || gmfLayertreeCtrl.gmfExternalDataSourcesManager.fileGroup.dataSources.length)">\n  <gmf-datasourcegrouptree\n    class="gmf-layertree-node gmf-layertree-depth-1"\n    ng-repeat="wmtsGroup in gmfLayertreeCtrl.gmfExternalDataSourcesManager.wmtsGroups"\n    group="wmtsGroup"\n  >\n  </gmf-datasourcegrouptree>\n  <gmf-datasourcegrouptree\n    class="gmf-layertree-node gmf-layertree-depth-1"\n    ng-repeat="wmsGroup in gmfLayertreeCtrl.gmfExternalDataSourcesManager.wmsGroups"\n    group="wmsGroup"\n  >\n  </gmf-datasourcegrouptree>\n  <gmf-datasourcegrouptree\n    class="gmf-layertree-node gmf-layertree-depth-1"\n    ng-if="gmfLayertreeCtrl.gmfExternalDataSourcesManager.fileGroup.dataSources.length"\n    group="gmfLayertreeCtrl.gmfExternalDataSourcesManager.fileGroup"\n  >\n  </gmf-datasourcegrouptree>\n</ul>\n\n<ul\n  id="gmf-layertree-layer-group-{{::layertreeCtrl.uid}}"\n  ng-if="::layertreeCtrl.node.children"\n  ng-class="{collapse: !layertreeCtrl.isRoot, show: layertreeCtrl.node.metadata.isExpanded}"\n  ngeo-sortable="::layertreeCtrl.isRoot && layertreeCtrl.node.children"\n  ngeo-sortable-options="{handleClassName: \'ngeo-sortable-handle\', draggerClassName: \'gmf-layertree-dragger\', placeholderClassName : \'gmf-layertree-curr-drag-item\'}"\n  ngeo-sortable-callback="::gmfLayertreeCtrl.afterReorder"\n  ngeo-sortable-callback-ctx="::gmfLayertreeCtrl">\n\n  <li\n    class="gmf-layertree-node"\n    ng-repeat="node in layertreeCtrl.node.children"\n    ng-class="\'gmf-layertree-depth-\' + layertreeCtrl.depth"\n    ngeo-layertree="node"\n    ngeo-layertree-notroot\n    ngeo-layertree-map="layertreeCtrl.map"\n    ngeo-layertree-nodelayerexpr="layertreeCtrl.nodelayerExpr"\n    ngeo-layertree-listenersexpr="layertreeCtrl.listenersExpr">\n  </li>\n</ul>\n'}return __p}},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13" height="1em" width="1em"><path d="M6.458 9.63c-1.521.01-2.925-1.246-3.072-2.758-.156-1.27.533-2.603 1.689-3.162.984-.506 2.248-.454 3.16.184.962.642 1.542 1.84 1.371 2.998-.14 1.121-.921 2.14-1.986 2.53-.369.143-.765.217-1.162.209zm-.024-1.102c.997.052 1.949-.748 2.075-1.736.123-.849-.344-1.756-1.124-2.12-.811-.395-1.892-.181-2.453.538-.607.722-.619 1.88.011 2.592.366.433.921.715 1.491.726z"></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13" height="1em" width="1em"><path d="M6.513.614l-6.5 3.25 6.5 3.25 6.5-3.25-6.5-3.25zm0 1.078l4.342 2.172-4.342 2.172L2.17 3.864l4.343-2.172zm5.198 6.396l1.302.65-6.5 3.25-6.5-3.25 1.302-.65 5.198 2.6zM1.315 5.65l-1.302.651 2.114 1.057 1.3-.65zm10.396 0L9.599 6.708l1.302.651 2.112-1.058zM8.127 7.443l-1.614.807-1.136-.568-1.302.65 2.438 1.22 2.437-1.22-1.3-.65z"></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15" height="1em" width="1em"><path d="M5.111 0c-.692 0-1.358.138-1.99.407a5.076 5.076 0 0 0-1.625 1.089c-.458.457-.82.994-1.09 1.626A5.045 5.045 0 0 0 0 5.112C0 5.802.138 6.468.407 7.1a5.076 5.076 0 0 0 1.089 1.627c.457.457.994.82 1.626 1.089a5.045 5.045 0 0 0 1.99.406c1.064 0 2.022-.3 2.889-.9l2.497 2.483a.862.862 0 0 0 .654.276c.251 0 .469-.092.653-.276a.893.893 0 0 0 .276-.653.883.883 0 0 0-.261-.654L9.322 8.001c.324-.468.563-.956.712-1.481-.003-.034-.015-.07-.015-.102 0-.104.037-.211.058-.32h-.334c-.417 0-.941-.247-1.205-.551-.065-.075-.135-.154-.189-.247a3.103 3.103 0 0 1-.944 2.105c-.636.637-1.399.958-2.294.959-.895 0-1.657-.322-2.294-.959s-.958-1.399-.958-2.294.321-1.657.958-2.294 1.399-.959 2.294-.958c.895 0 1.658.322 2.294.958.315.315.567.653.726 1.03.024-.378.18-.769.407-1.03a1.78 1.78 0 0 1 .857-.508 5.006 5.006 0 0 0-.668-.813A5.076 5.076 0 0 0 7.1.406 5.045 5.045 0 0 0 5.111 0zM15 4.182q0 .21-.143.353l-2.524 2.524q-.152.143-.353.143-.198 0-.35-.143l-.29-.291q-.147-.148-.147-.353t.147-.353l1.136-1.136h-2.73q-.2 0-.327-.145-.126-.146-.126-.351v-.496q0-.206.126-.351.126-.146.328-.146h2.729l-1.136-1.14q-.147-.139-.147-.348 0-.21.147-.35l.29-.29q.148-.147.35-.147.205 0 .353.147l2.524 2.524q.143.136.143.349z"></svg>'},function(t,r,n){var i,a,o;(function(e){if(true){!(a=[n(27),n(296),n(381),n(117),n(247)],i=e,o=typeof i==="function"?i.apply(r,a):i,o!==undefined&&(t.exports=o))}else{}})(function(h){return h.widget("ui.slider",h.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:false,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function e(){this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this._calculateNewMax();this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content");this._refresh();this._animateOff=false},_refresh:function e(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue()},_createHandles:function e(){var t,r,n=this.options,i=this.element.find(".ui-slider-handle"),a="<span tabindex='0'></span>",o=[];r=n.values&&n.values.length||1;if(i.length>r){i.slice(r).remove();i=i.slice(0,r)}for(t=i.length;t<r;t++){o.push(a)}this.handles=i.add(h(o.join("")).appendTo(this.element));this._addClass(this.handles,"ui-slider-handle","ui-state-default");this.handle=this.handles.eq(0);this.handles.each(function(e){h(this).data("ui-slider-handle-index",e).attr("tabIndex",0)})},_createRange:function e(){var t=this.options;if(t.range){if(t.range===true){if(!t.values){t.values=[this._valueMin(),this._valueMin()]}else if(t.values.length&&t.values.length!==2){t.values=[t.values[0],t.values[0]]}else if(h.isArray(t.values)){t.values=t.values.slice(0)}}if(!this.range||!this.range.length){this.range=h("<div>").appendTo(this.element);this._addClass(this.range,"ui-slider-range")}else{this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max");this.range.css({left:"",bottom:""})}if(t.range==="min"||t.range==="max"){this._addClass(this.range,"ui-slider-range-"+t.range)}}else{if(this.range){this.range.remove()}this.range=null}},_setupEvents:function e(){this._off(this.handles);this._on(this.handles,this._handleEvents);this._hoverable(this.handles);this._focusable(this.handles)},_destroy:function e(){this.handles.remove();if(this.range){this.range.remove()}this._mouseDestroy()},_mouseCapture:function e(t){var r,n,i,a,o,s,l,u,c=this,f=this.options;if(f.disabled){return false}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();r={x:t.pageX,y:t.pageY};n=this._normValueFromMouse(r);i=this._valueMax()-this._valueMin()+1;this.handles.each(function(e){var t=Math.abs(n-c.values(e));if(i>t||i===t&&(e===c._lastChangedValue||c.values(e)===f.min)){i=t;a=h(this);o=e}});s=this._start(t,o);if(s===false){return false}this._mouseSliding=true;this._handleIndex=o;this._addClass(a,null,"ui-state-active");a.trigger("focus");l=a.offset();u=!h(t.target).parents().addBack().is(".ui-slider-handle");this._clickOffset=u?{left:0,top:0}:{left:t.pageX-l.left-a.width()/2,top:t.pageY-l.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)};if(!this.handles.hasClass("ui-state-hover")){this._slide(t,o,n)}this._animateOff=true;return true},_mouseStart:function e(){return true},_mouseDrag:function e(t){var r={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(r);this._slide(t,this._handleIndex,n);return false},_mouseStop:function e(t){this._removeClass(this.handles,null,"ui-state-active");this._mouseSliding=false;this._stop(t,this._handleIndex);this._change(t,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false},_detectOrientation:function e(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function e(t){var r,n,i,a,o;if(this.orientation==="horizontal"){r=this.elementSize.width;n=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{r=this.elementSize.height;n=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}i=n/r;if(i>1){i=1}if(i<0){i=0}if(this.orientation==="vertical"){i=1-i}a=this._valueMax()-this._valueMin();o=this._valueMin()+i*a;return this._trimAlignValue(o)},_uiHash:function e(t,r,n){var i={handle:this.handles[t],handleIndex:t,value:r!==undefined?r:this.value()};if(this._hasMultipleValues()){i.value=r!==undefined?r:this.values(t);i.values=n||this.values()}return i},_hasMultipleValues:function e(){return this.options.values&&this.options.values.length},_start:function e(t,r){return this._trigger("start",t,this._uiHash(r))},_slide:function e(t,r,n){var i,a,o=this.value(),s=this.values();if(this._hasMultipleValues()){a=this.values(r?0:1);o=this.values(r);if(this.options.values.length===2&&this.options.range===true){n=r===0?Math.min(a,n):Math.max(a,n)}s[r]=n}if(n===o){return}i=this._trigger("slide",t,this._uiHash(r,n,s));if(i===false){return}if(this._hasMultipleValues()){this.values(r,n)}else{this.value(n)}},_stop:function e(t,r){this._trigger("stop",t,this._uiHash(r))},_change:function e(t,r){if(!this._keySliding&&!this._mouseSliding){this._lastChangedValue=r;this._trigger("change",t,this._uiHash(r))}},value:function e(t){if(arguments.length){this.options.value=this._trimAlignValue(t);this._refreshValue();this._change(null,0);return}return this._value()},values:function e(t,r){var n,i,a;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(r);this._refreshValue();this._change(null,t);return}if(arguments.length){if(h.isArray(arguments[0])){n=this.options.values;i=arguments[0];for(a=0;a<n.length;a+=1){n[a]=this._trimAlignValue(i[a]);this._change(null,a)}this._refreshValue()}else{if(this._hasMultipleValues()){return this._values(t)}else{return this.value()}}}else{return this._values()}},_setOption:function e(t,r){var n,i=0;if(t==="range"&&this.options.range===true){if(r==="min"){this.options.value=this._values(0);this.options.values=null}else if(r==="max"){this.options.value=this._values(this.options.values.length-1);this.options.values=null}}if(h.isArray(this.options.values)){i=this.options.values.length}this._super(t,r);switch(t){case"orientation":this._detectOrientation();this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation);this._refreshValue();if(this.options.range){this._refreshRange(r)}this.handles.css(r==="horizontal"?"bottom":"left","");break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(n=i-1;n>=0;n--){this._change(null,n)}this._animateOff=false;break;case"step":case"min":case"max":this._animateOff=true;this._calculateNewMax();this._refreshValue();this._animateOff=false;break;case"range":this._animateOff=true;this._refresh();this._animateOff=false;break}},_setOptionDisabled:function e(t){this._super(t);this._toggleClass(null,"ui-state-disabled",!!t)},_value:function e(){var t=this.options.value;t=this._trimAlignValue(t);return t},_values:function e(t){var r,n,i;if(arguments.length){r=this.options.values[t];r=this._trimAlignValue(r);return r}else if(this._hasMultipleValues()){n=this.options.values.slice();for(i=0;i<n.length;i+=1){n[i]=this._trimAlignValue(n[i])}return n}else{return[]}},_trimAlignValue:function e(t){if(t<=this._valueMin()){return this._valueMin()}if(t>=this._valueMax()){return this._valueMax()}var r=this.options.step>0?this.options.step:1,n=(t-this._valueMin())%r,i=t-n;if(Math.abs(n)*2>=r){i+=n>0?r:-r}return parseFloat(i.toFixed(5))},_calculateNewMax:function e(){var t=this.options.max,r=this._valueMin(),n=this.options.step,i=Math.round((t-r)/n)*n;t=i+r;if(t>this.options.max){t-=n}this.max=parseFloat(t.toFixed(this._precision()))},_precision:function e(){var t=this._precisionOf(this.options.step);if(this.options.min!==null){t=Math.max(t,this._precisionOf(this.options.min))}return t},_precisionOf:function e(t){var r=t.toString(),n=r.indexOf(".");return n===-1?0:r.length-n-1},_valueMin:function e(){return this.options.min},_valueMax:function e(){return this.max},_refreshRange:function e(t){if(t==="vertical"){this.range.css({width:"",left:""})}if(t==="horizontal"){this.range.css({height:"",bottom:""})}},_refreshValue:function e(){var t,r,n,i,a,o=this.options.range,s=this.options,l=this,u=!this._animateOff?s.animate:false,c={};if(this._hasMultipleValues()){this.handles.each(function(e){r=(l.values(e)-l._valueMin())/(l._valueMax()-l._valueMin())*100;c[l.orientation==="horizontal"?"left":"bottom"]=r+"%";h(this).stop(1,1)[u?"animate":"css"](c,s.animate);if(l.options.range===true){if(l.orientation==="horizontal"){if(e===0){l.range.stop(1,1)[u?"animate":"css"]({left:r+"%"},s.animate)}if(e===1){l.range[u?"animate":"css"]({width:r-t+"%"},{queue:false,duration:s.animate})}}else{if(e===0){l.range.stop(1,1)[u?"animate":"css"]({bottom:r+"%"},s.animate)}if(e===1){l.range[u?"animate":"css"]({height:r-t+"%"},{queue:false,duration:s.animate})}}}t=r})}else{n=this.value();i=this._valueMin();a=this._valueMax();r=a!==i?(n-i)/(a-i)*100:0;c[this.orientation==="horizontal"?"left":"bottom"]=r+"%";this.handle.stop(1,1)[u?"animate":"css"](c,s.animate);if(o==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[u?"animate":"css"]({width:r+"%"},s.animate)}if(o==="max"&&this.orientation==="horizontal"){this.range.stop(1,1)[u?"animate":"css"]({width:100-r+"%"},s.animate)}if(o==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[u?"animate":"css"]({height:r+"%"},s.animate)}if(o==="max"&&this.orientation==="vertical"){this.range.stop(1,1)[u?"animate":"css"]({height:100-r+"%"},s.animate)}}},_handleEvents:{keydown:function e(t){var r,n,i,a,o=h(t.target).data("ui-slider-handle-index");switch(t.keyCode){case h.ui.keyCode.HOME:case h.ui.keyCode.END:case h.ui.keyCode.PAGE_UP:case h.ui.keyCode.PAGE_DOWN:case h.ui.keyCode.UP:case h.ui.keyCode.RIGHT:case h.ui.keyCode.DOWN:case h.ui.keyCode.LEFT:t.preventDefault();if(!this._keySliding){this._keySliding=true;this._addClass(h(t.target),null,"ui-state-active");r=this._start(t,o);if(r===false){return}}break}a=this.options.step;if(this._hasMultipleValues()){n=i=this.values(o)}else{n=i=this.value()}switch(t.keyCode){case h.ui.keyCode.HOME:i=this._valueMin();break;case h.ui.keyCode.END:i=this._valueMax();break;case h.ui.keyCode.PAGE_UP:i=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/this.numPages);break;case h.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/this.numPages);break;case h.ui.keyCode.UP:case h.ui.keyCode.RIGHT:if(n===this._valueMax()){return}i=this._trimAlignValue(n+a);break;case h.ui.keyCode.DOWN:case h.ui.keyCode.LEFT:if(n===this._valueMin()){return}i=this._trimAlignValue(n-a);break}this._slide(t,o,i)},keyup:function e(t){var r=h(t.target).data("ui-slider-handle-index");if(this._keySliding){this._keySliding=false;this._stop(t,r);this._change(t,r);this._removeClass(h(t.target),null,"ui-state-active")}}}})})},function(e,t,r){r(487);e.exports="ui.slider"},function(e,t,r){(function(g){angular.module("ui.slider",[]).value("uiSliderConfig",{}).directive("uiSlider",["uiSliderConfig","$timeout",function(p,v){p=p||{};return{require:"ngModel",compile:function e(){var t=function e(a,o,r,s){function n(e,t){return t?parseFloat(e):parseInt(e,10)}var t=angular.copy(a.$eval(r.uiSlider));var l=angular.extend(t||{},p);var i={min:null,max:null};var u=["min","max","step","lowerBound","upperBound"];var c=!angular.isUndefined(r.useDecimals)?true:false;var f=angular.isDefined(l["updateOn"])?l["updateOn"]:"slide";var h=function e(){if(angular.isArray(s.$viewValue)&&l.range!==true){console.warn("Change your range option of ui-slider. When assigning ngModel an array of values then the range option should be set to true.");l.range=true}angular.forEach(u,function(e){if(angular.isDefined(r[e])){l[e]=n(r[e],c)}});o.slider(l);h=angular.noop};angular.forEach(u,function(t){r.$observe(t,function(e){if(!!e){h();l[t]=n(e,c);o.slider("option",t,n(e,c));s.$render()}})});r.$observe("disabled",function(e){h();o.slider("option","disabled",!!e)});a.$watch(r.uiSlider,function(e){h();if(e!==undefined){o.slider("option",e)}},true);v(h,0,true);o.bind(f,function(e,t){var r;if(t.values){var n=t.values.slice();if(l.lowerBound&&n[0]<l.lowerBound){n[0]=Math.max(n[0],l.lowerBound)}if(l.upperBound&&n[1]>l.upperBound){n[1]=Math.min(n[1],l.upperBound)}if(n[0]!==t.values[0]||n[1]!==t.values[1]){r=true;t.values=n}}else{var i=t.value;if(l.lowerBound&&i<l.lowerBound){i=Math.max(i,l.lowerBound)}if(l.upperBound&&i>l.upperBound){i=Math.min(i,l.upperBound)}if(i!==t.value){r=true;t.value=i}}s.$setViewValue(t.values||t.value);g(t.handle).find(".ui-slider-tip").text(t.value);a.$apply();if(r){setTimeout(function(){o.slider("value",t.values||t.value)},0);return false}});s.$render=function(){h();var e=l.range===true?"values":"value";if(l.range!==true&&isNaN(s.$viewValue)&&!(s.$viewValue instanceof Array)){s.$viewValue=0}else if(l.range&&!angular.isDefined(s.$viewValue)){s.$viewValue=[0,0]}if(l.range===true){if(s.$viewValue&&angular.isString(s.$viewValue)&&(s.$viewValue.match(/,/g)||[]).length===1){var t=s.$viewValue.split(",");s.$viewValue=[Number(t[0]),Number(t[1])]}if(angular.isDefined(l.min)&&l.min>s.$viewValue[0]){s.$viewValue[0]=l.min}if(angular.isDefined(l.max)&&l.max<s.$viewValue[1]){s.$viewValue[1]=l.max}if(s.$viewValue[0]>s.$viewValue[1]){if(i.min>=s.$viewValue[1]){s.$viewValue[1]=i.min}if(i.max<=s.$viewValue[0]){s.$viewValue[0]=i.max}}i.min=s.$viewValue[0];i.max=s.$viewValue[1]}o.slider(e,s.$viewValue)};a.$watch(r.ngModel,function(){if(l.range===true){s.$render();g(o).find(".ui-slider-tip").each(function(e,t){g(t).text(s.$viewValue[e])})}else{g(o).find(".ui-slider-tip").text(s.$viewValue)}},true);function d(){if(o.hasClass("ui-slider")){o.slider("destroy")}}a.$on("$destroy",d);o.one("$destroy",d)};var r=function e(t,r,n,i){var a=angular.extend({},t.$eval(n.uiSlider));var o=["min","max","step","tick","tip"];angular.forEach(o,function(e){if(angular.isDefined(n[e])){a[e]=n[e]}});if(angular.isDefined(a["tick"])&&angular.isDefined(a["step"])){var s=parseInt((parseInt(a["max"])-parseInt(a["min"]))/parseInt(a["step"]));for(var l=s;l>=0;l--){var u=l/s*100+"%";g("<div/>").addClass("ui-slider-tick").appendTo(r).css({left:u})}}if(angular.isDefined(a["tip"])){v(function(){var e=r.find(".ui-slider-handle");if(e&&e.length>1&&i.$viewValue&&angular.isArray(i.$viewValue)){g(e[0]).append('<div class="ui-slider-tip">'+i.$viewValue[0]+"</div>");g(e[1]).append('<div class="ui-slider-tip">'+i.$viewValue[1]+"</div>")}else{r.find(".ui-slider-handle").append('<div class="ui-slider-tip">'+i.$viewValue+"</div>")}},10)}};return{pre:t,post:r}}}}])}).call(this,r(27))},function(e,t){},function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<div class="gmf-time-slider">\n\n  <div\n    ui-slider="sliderCtrl.sliderOptions"\n    ng-model="sliderCtrl.dates">\n    <span\n      class="ui-slider-handle ui-state-default ui-corner-all"\n      tabindex="0"\n      data-toggle="tooltip"\n      title="">\n    </span>\n  </div>\n\n  <div class="gmf-time-slider-displayed-dates">\n    <div\n      class="gmf-time-slider-start-date"\n      ng-if="::sliderCtrl.time.mode === \'range\'">\n      <span>{{sliderCtrl.getLocalizedDate(sliderCtrl.dates[0])}}</span>\n    </div>\n\n    <div\n      class="gmf-time-slider-start-date"\n      ng-if="::sliderCtrl.time.mode === \'value\'">\n      <span>{{sliderCtrl.getLocalizedDate(sliderCtrl.dates)}}</span>\n    </div>\n\n    <div\n      class="gmf-time-slider-end-date"\n      ng-if="::sliderCtrl.time.mode === \'range\'">\n      <span>{{sliderCtrl.getLocalizedDate(sliderCtrl.dates[1])}}</span>\n    </div>\n  </div>\n\n</div>\n'}return __p}},function(e,t){},function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<div id="gmf-lidarprofile-container" class="panel" ng-show="$ctrl.active">\n  <div class="lidarprofile">\n    <div class="lidar-error"></div>\n    <canvas class="lidar-canvas"></canvas>\n    <svg class="lidar-svg" style="fill: #ffff00;position:absolute;z-index:1;"></svg>\n  </div>\n  <div class="lidar-legend">\n    <div class="width-info"></div>\n    <div class="lod-info"></div>\n    <div class="lidar-info"></div>\n  </div>\n  <div\n    class="close"\n    ng-click="$ctrl.line = null">&times;\n  </div>\n</div>\n'}return __p}},function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<div class="lidar-panel"\n     gmf-drawprofileline\n     gmf-drawprofileline-active="$ctrl.active"\n     gmf-drawprofileline-map="::$ctrl.map"\n     gmf-drawprofileline-line="$ctrl.line">\n   <p>\n    <button class="btn btn-default"\n      ngeo-btn ng-model="ctrl.interaction.active"\n      translate>Draw LIDAR profile line\n    </button>\n  </p>\n  <p>\n    <em ng-if="ctrl.interaction.active" class="text-muted small" translate>\n      Draw a line on the map to display the corresponding LIDAR profile. Use double-click to finish the drawing.\n    </em>\n  </p>\n  <div ng-if="$ctrl.ready">\n    <div ng-if="!!$ctrl.line">\n      <div>\n        <button class="btn btn-default" ng-click="$ctrl.csvExport()" translate>\n          CSV export\n        </button>\n        <button class="btn btn-default" ng-click="$ctrl.pngExport()" translate>\n          PNG export\n        </button>\n        <button class="btn btn-default"\n          ng-if="!!$ctrl.line"\n          ng-click="$ctrl.resetPlot()"\n          data-toggle="tooltip" data-placement="left" data-original-title="{{\'Reset profile\'|translate}}">\n          <span class="fa fa-refresh"></span>\n        </button>\n      </div>\n      <hr>\n      <button class="btn btn-default"\n        ngeo-btn ng-model="measureActive"\n        ng-click="$ctrl.setMeasureActive()"\n        data-toggle="tooltip"\n        data-placement="left"\n        data-original-title="{{\'Take measure on the graph\'|translate}}"\n        translate> Take measure\n      </button>\n      <button class="btn btn-default"\n        ng-if="!!$ctrl.line"\n        ng-click="$ctrl.clearMeasure()"\n        data-toggle="tooltip" data-placement="left" data-original-title="{{\'Clear measure\'|translate}}">\n        <span class="fa fa-eraser"></span>\n      </button>\n    </div>\n    <div>\n    <hr>\n    <p translate>Material</p>\n    <select\n      ng-options="option.name | translate for option in ::$ctrl.getAvailablePointAttributes()"\n      ng-model-options="{getterSetter: true}"\n      ng-model="$ctrl.getSetSelectedPointAttribute">\n    </select>\n    </div>\n    <hr>\n    <p translate>Classes</p>\n    <div ng-repeat="(key, classification) in ::$ctrl.getClassification()">\n      <input ng-true-value="1" ng-false-value="0" ng-model="classification.visible" ng-change="$ctrl.setClassification(classification, key)" ng-checked="!!classification.visible" type="checkbox">\n      <span>{{classification.name}}</span>\n    </div>\n  </div>\n  <div ng-if="!$ctrl.ready">\n    <p translate>Initializing, please wait...</p>\n  </div>\n</div>\n'}return __p}},function(e,t){},function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<div class="modal-header">\n  <h4 class="modal-title" translate>Share this map</h4>\n  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n</div>\n<div class="modal-body">\n  <form role="form" name="gmfShareForm" novalidate>\n    <div class="form-group">\n      <label for="gmfShareInputShortLink-{{::$ctrl.uid}}" translate>Permalink</label>\n      <input type="text" class="form-control" id="gmfShareInputShortLink-{{::$ctrl.uid}}" onclick="this.select()" ng-model="$ctrl.shortLink" readonly="True">\n      <p class="help-block" translate>Copy this link to share it.</p>\n      <p class="text-danger" ng-if="$ctrl.showLengthWarning">\n        <span class="fa fa-exclamation-triangle"></span>\n        {{\'You have a lot of drawn elements in this map. The above link may not be correctly supported by some browsers.\' | translate}}\n      </p>\n      <p class="text-danger" ng-if="$ctrl.errorOnGetShortUrl">\n        <span class="fa fa-exclamation"></span>\n        {{\'Error, cannot get the shortened URL.\' | translate}}\n      </p>\n    </div>\n    <hr>\n    <div class="gmf-share-email" ng-if="::$ctrl.enableEmail">\n      <div class="form-group">\n        <label for="gmfShareInputEmail-{{::$ctrl.uid}}" translate>Send this link to</label>\n        <input type="email" class="form-control"  name="inputEmail" id="gmfShareInputEmail-{{::$ctrl.uid}}" placeholder="E-mail" ng-model="$ctrl.email" required>\n        <span ng-show="gmfShareForm.$submitted || gmfShareForm.inputEmail.$touched">\n          <span class="text-danger" ng-show="gmfShareForm.inputEmail.$error.email || gmfShareForm.inputEmail.$error.required">\n            <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>\n            {{\'Invalid email.\' | translate}}</span>\n        </span>\n      </div>\n      <div class="form-group">\n        <textarea class="form-control" ng-attr-placeholder="{{\'Message (optional)\' | translate }}" ng-model="$ctrl.message"></textarea>\n      </div>\n      <span class="text-success" ng-if="$ctrl.successfullySent">\n        <i class="fa fa-check" aria-hidden="true"></i>\n          {{ \'Link successfully sent.\' | translate }}\n      </span>\n      <span class="text-danger" ng-if="$ctrl.errorOnsend">\n        <i class="fa fa-exclamation" aria-hidden="true"></i>\n          {{ \'Error, the link has not been sent.\' | translate }}\n      </span>\n    </div>\n    <div class="text-right">\n      <button type="button" class="btn btn-default" data-dismiss="modal" translate>Close</button>\n      <button ng-if="::$ctrl.enableEmail"\n        type="submit" class="btn prime"\n        ng-click="$ctrl.sendShortUrl()"\n        ng-disabled="!gmfShareForm.$valid"\n        translate>Send\n      </button>\n    </div>\n  </form>\n</div>\n'}return __p}},function(e,t){},function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<div class="btn-group btn-block" ng-class="::{\'dropup\': scaleselectorCtrl.options.dropup}">\n  <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">\n    <span ng-bind-html="scaleselectorCtrl.currentScale | ngeoScalify | ngeoTrustHtml"></span>\n  </button>\n  <ul class="dropdown-menu btn-block" role="menu">\n    <li ng-repeat="zoomLevel in ::scaleselectorCtrl.zoomLevels">\n      <a href ng-click="scaleselectorCtrl.changeZoom(zoomLevel)"\n         ng-bind-html="scaleselectorCtrl.getScale(zoomLevel) | ngeoScalify | ngeoTrustHtml">\n      </a>\n    </li>\n  </ul>\n</div>\n'}return __p}},function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<div\n    ngeo-map="ctrl.map"\n    ngeo-map-manage-resize="ctrl.manageResize"\n    ngeo-map-resize-transition="ctrl.resizeTransition">\n</div>\n'}return __p}},function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<div class="btn-group dropup">\n  <a type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">\n    <span class="gmf-mouseposition-control-target"></span>\n  </a>\n  <ul class="dropdown-menu dropdown-menu-right" role="menu">\n    <li class="dropdown-header" translate>Coordinate systems</li>\n    <li ng-repeat="projitem in ::ctrl.projections">\n      <a href ng-click="ctrl.setProjection(projitem)">\n        <span class="fa fa-fw" ng-class="{\'fa-check\': ctrl.projection == projitem}"></span>\n        {{::projitem.label}}\n      </a>\n    </li>\n  </ul>\n</div>\n'}return __p}},function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<div class="btn-group" role="group" aria-label="">\n  <a\n    href\n    ngeo-btn\n    ngeo-createfeature\n    ngeo-createfeature-active="oetCtrl.drawActive"\n    ngeo-createfeature-features="::oetCtrl.sketchFeatures"\n    ngeo-createfeature-geom-type="::oetCtrl.geomType"\n    ngeo-createfeature-map="::oetCtrl.map"\n    class="btn btn-sm btn-default"\n    ng-class="{active: oetCtrl.drawActive}"\n    ng-if="::(oetCtrl.geomType === \'MultiPoint\')"\n    ng-model="oetCtrl.drawActive"\n    title="{{\'Add a point to the geometry\' | translate}}">\n    <span\n      class="fa fa-plus-square gmf-icon-oe-draw">\n    </span>\n  </a>\n  <a\n    href\n    ngeo-btn\n    ngeo-createfeature\n    ngeo-createfeature-active="oetCtrl.drawActive"\n    ngeo-createfeature-features="::oetCtrl.sketchFeatures"\n    ngeo-createfeature-geom-type="::oetCtrl.geomType"\n    ngeo-createfeature-map="::oetCtrl.map"\n    class="btn btn-sm btn-default"\n    ng-class="{active: oetCtrl.drawActive}"\n    ng-if="::(oetCtrl.geomType === \'MultiLineString\')"\n    ng-model="oetCtrl.drawActive"\n    title="{{\'Add a linestring to the geometry\' | translate}}">\n    <span\n      class="fa fa-plus-square gmf-icon-oe-draw">\n    </span>\n  </a>\n  <a\n    href\n    ngeo-btn\n    ngeo-createfeature\n    ngeo-createfeature-active="oetCtrl.drawActive"\n    ngeo-createfeature-features="::oetCtrl.sketchFeatures"\n    ngeo-createfeature-geom-type="::oetCtrl.geomType"\n    ngeo-createfeature-map="::oetCtrl.map"\n    class="btn btn-sm btn-default"\n    ng-class="{active: oetCtrl.drawActive}"\n    ng-if="::(oetCtrl.geomType === \'MultiPolygon\')"\n    ng-model="oetCtrl.drawActive"\n    title="{{\'Add a polygon to the geometry\' | translate}}">\n    <span\n      class="fa fa-plus-square gmf-icon-oe-draw">\n    </span>\n  </a>\n\n  <a\n    href\n    ngeo-btn\n    ngeo-createfeature\n    ngeo-createfeature-active="oetCtrl.eraseActive"\n    ngeo-createfeature-features="::oetCtrl.sketchFeatures"\n    ngeo-createfeature-geom-type="::oetCtrl.geomTypePolygon"\n    ngeo-createfeature-map="::oetCtrl.map"\n    class="btn btn-sm btn-default"\n    ng-class="{active: oetCtrl.eraseActive}"\n    ng-model="oetCtrl.eraseActive"\n    title="{{\'Erase geometry\' | translate}}">\n    <span\n      class="fa fa-minus-square gmf-icon-oe-erase">\n    </span>\n  </a>\n\n  <a\n    href\n    ng-if="::oetCtrl.geomType === \'MultiPolygon\'"\n    ngeo-btn\n    ngeo-createregularpolygonfromclick\n    ngeo-createregularpolygonfromclick-active="oetCtrl.drawTriangleActive"\n    ngeo-createregularpolygonfromclick-angle="oetCtrl.triangleAngle"\n    ngeo-createregularpolygonfromclick-features="::oetCtrl.sketchFeatures"\n    ngeo-createregularpolygonfromclick-map="::oetCtrl.map"\n    ngeo-createregularpolygonfromclick-radius="::oetCtrl.triangleRadius"\n    class="btn btn-sm btn-default ngeo-createregularpolygonfromclick"\n    ng-class="{active: oetCtrl.drawTriangleActive}"\n    ng-model="oetCtrl.drawTriangleActive"\n    title="{{\'Draw a triangle\' | translate}}">\n    <span\n      class="fa fa-play fa-rotate-270 gmf-icon-oe-triangle">\n    </span>\n  </a>\n\n  <a\n    href\n    ngeo-btn\n    gmf-objecteditinggetwmsfeature\n    gmf-objecteditinggetwmsfeature-active="oetCtrl.copyFromActive"\n    gmf-objecteditinggetwmsfeature-features="::oetCtrl.sketchFeatures"\n    gmf-objecteditinggetwmsfeature-layerinfo="oetCtrl.queryableLayerInfo"\n    gmf-objecteditinggetwmsfeature-map="::oetCtrl.map"\n    class="btn btn-sm btn-default gmf-objecteditinggetwmsfeature-add"\n    ng-class="{active: oetCtrl.copyFromActive}"\n    ng-model="oetCtrl.copyFromActive"\n    title="{{\'Copy from external WMS feature\' | translate}}">\n    <span\n      class="fa fa-clone gmf-icon-oe-copyfrom">\n    </span>\n  </a>\n\n  <a\n    href\n    ngeo-btn\n    gmf-objecteditinggetwmsfeature\n    gmf-objecteditinggetwmsfeature-active="oetCtrl.deleteFromActive"\n    gmf-objecteditinggetwmsfeature-features="::oetCtrl.sketchFeatures"\n    gmf-objecteditinggetwmsfeature-layerinfo="oetCtrl.queryableLayerInfo"\n    gmf-objecteditinggetwmsfeature-map="::oetCtrl.map"\n    class="btn btn-sm btn-default gmf-objecteditinggetwmsfeature-delete"\n    ng-class="{active: oetCtrl.deleteFromActive}"\n    ng-model="oetCtrl.deleteFromActive"\n    title="{{\'Cut from external WMS feature\' | translate}}">\n    <span\n      class="fa fa-cut gmf-icon-oe-deletefrom">\n    </span>\n  </a>\n\n</div>\n'}return __p}},function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<gmf-objecteditingtools\n  gmf-objecteditingtools-active="oeCtrl.toolsActive"\n  gmf-objecteditingtools-copyfromactive="oeCtrl.copyFromActive"\n  gmf-objecteditingtools-deletefromactive="oeCtrl.deleteFromActive"\n  gmf-objecteditingtools-feature="oeCtrl.feature"\n  gmf-objecteditingtools-geomtype="::oeCtrl.geomType"\n  gmf-objecteditingtools-map="::oeCtrl.map"\n  gmf-objecteditingtools-process="oeCtrl.process"\n  gmf-objecteditingtools-queryablelayerinfo="oeCtrl.selectedQueryableLayerInfo"\n  gmf-objecteditingtools-requireslayer="oeCtrl.queryableLayerListShown"\n  gmf-objecteditingtools-sketchfeatures="::oeCtrl.sketchFeatures">\n</gmf-objecteditingtools>\n\n<div\n  class="form-group"\n  ng-show="oeCtrl.queryableLayerListShown">\n  <label\n    ng-show="oeCtrl.copyFromActive === true"\n    class="col-form-label">{{\'Copy from:\' | translate}}</label>\n  <label\n    ng-show="oeCtrl.deleteFromActive === true"\n    class="col-form-label">{{\'Cut from:\' | translate}}</label>\n  <select\n    class="form-control"\n    ng-model="oeCtrl.selectedQueryableLayerInfo"\n    ng-options="layerInfo.layerNode.name | translate for layerInfo in oeCtrl.queryableLayersInfo">\n  </select>\n</div>\n\n<form\n  novalidate\n  name="form"\n  class="form gmf-objectediting-form">\n  <input\n    type="submit"\n    value="{{\'Save\' | translate}}"\n    class="btn btn-sm btn-default gmf-objectediting-btn-save"\n    ng-click="form.$valid && oeCtrl.save()"\n    ng-disabled="!oeCtrl.dirty || oeCtrl.pending || !oeCtrl.featureHasGeom"\n    title="{{\'Save modifications\' | translate}}"></input>\n  <a\n    class="btn btn-sm btn-link gmf-objectediting-btn-undo"\n    ng-click="oeCtrl.undo()"\n    ng-disabled="!oeCtrl.dirty || oeCtrl.pending"\n    title="{{\'Undo latest modifications\' | translate}}"\n    href>{{\'Undo\' | translate}}</a>\n  <a\n    class="btn btn-sm btn-link gmf-objectediting-btn-delete"\n    ng-click="oeCtrl.delete()"\n    ng-disabled="oeCtrl.isStateInsert() || oeCtrl.pending"\n    title="{{\'Delete the feature\' | translate}}"\n    href>{{\'Delete\' | translate}}</a>\n</form>\n'}return __p}},function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<div class="gmf-print">\n  <div ng-show="$ctrl.isState(\'CAPABILITIES_NOT_LOADED\') !== true && $ctrl.isState(\'ERROR_ON_GETCAPABILITIES\') !== true">\n    <div class="gmf-print-layout-selector"><ng-transclude /></div>\n    <div\n      ng-repeat="attribute in $ctrl.layoutInfo.simpleAttributes"\n      class="gmf-print-layoutinfo form-group">\n      <div ng-if="$ctrl.hiddenAttributeNames === undefined || $ctrl.hiddenAttributeNames.indexOf(attribute.name) < 0">\n        <input\n          ng-if="attribute.type === \'number\'"\n          ng-model="attribute.value"\n          class="form-control"\n          type="number"\n          ng-attr-placeholder="{{attribute.name | translate}}">\n\n        <input\n          ng-if="attribute.type === \'text\'"\n          ng-model="attribute.value"\n          class="form-control"\n          type="text"\n          ng-attr-placeholder="{{attribute.name | translate}}">\n\n        <textarea\n          ng-if="attribute.type === \'textarea\'"\n          ng-model="attribute.value"\n          class="form-control"\n          row="3"\n          ng-attr-placeholder="{{attribute.name | translate}}"></textarea>\n\n        <div\n          ng-if="attribute.type === \'checkbox\'"\n          class="checkbox">\n          <label>\n            <input\n              ng-model="attribute.value"\n              type="checkbox">\n            <span>{{attribute.name | translate}}</span>\n          </label>\n        </div>\n      </div>\n    </div>\n\n    <div\n      ng-show="$ctrl.layoutInfo.legend !== undefined"\n      class="gmf-print-legend checkbox">\n      <label>\n        <input\n          ng-model="$ctrl.layoutInfo.legend"\n          type="checkbox">\n        <span translate>Legend</span>\n      </label>\n    </div>\n\n    <div class="gmf-print-layout-selector">\n      <div\n        ng-show="$ctrl.layoutInfo.layouts.length !== 1"\n        class="form-group row">\n\n        <label\n          class="col-form-label col-md-5"\n          translate>Layout</label>\n\n        <div class="col-md-7">\n          <div class="btn-group btn-block">\n            <button\n              type="button"\n              class="btn btn-default form-control dropdown-toggle"\n              data-toggle="dropdown">\n              <span>{{$ctrl.layoutInfo.layout | translate}}&nbsp;</span>\n            </button>\n            <ul\n              class="dropdown-menu dropdown-menu-right btn-block"\n              role="menu">\n              <li ng-repeat="layout in $ctrl.layoutInfo.layouts">\n                <a\n                  ng-click="$ctrl.setLayout(layout)"\n                  href="">{{layout | translate}}</a>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n\n      <div\n        ng-show="$ctrl.layoutInfo.scales.length !== 1"\n        class="gmf-print-scale-selector form-group row">\n\n        <label\n          class="col-form-label col-md-5"\n          translate>Scale</label>\n\n        <div class="col-md-7">\n          <div class="btn-group btn-block">\n            <button\n              type="button"\n              class="btn btn-default form-control dropdown-toggle"\n              data-toggle="dropdown"\n              aria-expanded="false">\n              <span>{{$ctrl.layoutInfo.scale | ngeoScalify}}&nbsp;</span>\n            </button>\n            <ul\n              class="dropdown-menu dropdown-menu-right btn-block"\n              role="menu">\n              <li ng-repeat="scale in $ctrl.layoutInfo.scales">\n                <a\n                  ng-click="$ctrl.getSetScale(scale)"\n                  href="">{{scale | ngeoScalify}}</a>\n              </li>\n              <span ng-if="$ctrl.scaleInput">\n                <li class="dropdown-header" translate>Manual entry</li>\n                <li>\n                  <div class="gmf-print-custom-scale">\n                    1 : <input class="gmf-print-custom-scale-input" type="number" min="1" ng-model="$ctrl.getSetScale" ng-model-options="{getterSetter: true}">\n                  </div>\n                </li>\n              </span>\n            </ul>\n          </div>\n        </div>\n      </div>\n\n      <div\n        ng-show="$ctrl.layoutInfo.dpis.length !== 1"\n        class="gmf-print-dpi-selector form-group row">\n\n        <label\n          class="col-form-label col-md-3"\n          translate>DPI</label>\n\n        <div class="col-md-5">\n          <div class="btn-group btn-block">\n            <button\n              type="button"\n              class="btn btn-default form-control dropdown-toggle"\n              data-toggle="dropdown"\n              aria-expanded="false">\n              <span>{{$ctrl.layoutInfo.dpi}}&nbsp;</span>\n            </button>\n            <ul\n              class="dropdown-menu dropdown-menu-right btn-block"\n              role="menu">\n              <li ng-repeat="dpi in $ctrl.layoutInfo.dpis">\n                <a href="" ng-click="$ctrl.setDpi(dpi)">{{dpi}}</a>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n\n      <div class="gmf-print-rotation-selector form-group row">\n        <label\n          class="col-form-label col-md-3"\n          translate>Rotation</label>\n\n        <div class="col-md-5">\n          <input\n            class="form-control gmf-print-rotation-input"\n            type="range"\n            value="0"\n            min="-180"\n            max="180"\n            data-toggle="tooltip"\n            title="{{\'You can also use Alt+Shift on the map\' | translate}}">\n        </div>\n\n        <div class="col-md-4">\n          <input\n            class="form-control gmf-print-rotation-input"\n            type="number"\n            min="-180"\n            max="180"\n            value="0">\n        </div>\n      </div>\n\n    </div>\n\n    <div class="gmf-print-actions form-group pull-right">\n      <span ng-show="$ctrl.isState(\'PRINTING\')">\n        <i class="fa fa-refresh fa-spinner fa-spin"></i>\n      </span>\n\n      <a\n        ng-show="$ctrl.isState(\'PRINTING\')"\n        class="gmf-print-cancel btn btn-link"\n        href=""\n        ng-click="$ctrl.cancel()"\n        translate>Abort</a>\n\n      <button\n        ng-show="$ctrl.layoutInfo.formats.png"\n        class="gmf-print-image btn prime"\n        ng-disabled="$ctrl.isState(\'PRINTING\')"\n        ng-click="$ctrl.print(\'png\')" translate>Image</button>\n\n      <button\n        ng-show="$ctrl.layoutInfo.formats.pdf"\n        class="gmf-print-pdf btn prime"\n        ng-disabled="$ctrl.isState(\'PRINTING\')"\n        ng-click="$ctrl.print(\'pdf\')" translate>PDF</button>\n    </div>\n\n    <div\n      ng-show="$ctrl.isState(\'ERROR_ON_REPORT\')"\n      class="gmf-print-error-report form-group pull-left text-danger">\n      <p>{{\'Error during the print, please try again.\' | translate}}</p>\n    </div>\n  </div>\n\n  <div\n    ng-show="$ctrl.isState(\'CAPABILITIES_NOT_LOADED\')"\n    class="gmf-print-wait form-group pull-left">\n    <p>{{\'Connecting to the print server, please wait.\' | translate}}</p>\n  </div>\n\n  <div\n    ng-show="$ctrl.isState(\'ERROR_ON_GETCAPABILITIES\')"\n    class="gmf-print-error-capabilities form-group pull-left text-danger">\n    <p>{{\'The print server is unavailable. Please, try later.\' | translate}}</p>\n  </div>\n</div>\n'}return __p}},function(e,t){},function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<div\n  class="gmf-profile-container panel"\n  ng-show="ctrl.active">\n\n  <div\n    class="ngeo-profile"\n    ng-show="!ctrl.isErrored"\n    ngeo-profile="ctrl.profileData"\n    ngeo-profile-highlight="ctrl.profileHighlight"\n    ngeo-profile-options="::ctrl.profileOptions">\n  </div>\n\n  <ul\n    class="gmf-profile-legend"\n    ng-show="!ctrl.isErrored">\n\n    <li ng-repeat="name in ::ctrl.getLayersNames()">\n      <i\n        class="fa fa-minus"\n        ng-style="ctrl.getStyle(name)"></i>\n      {{name | translate}}\n      <span ng-if="ctrl.currentPoint.elevations[name] != null">\n      {{ctrl.currentPoint.elevations[name]}}&nbsp;{{ctrl.currentPoint.yUnits}}\n      </span>\n    </li>\n  </ul>\n\n  <div\n    class="gmf-profile-export btn-group dropup"\n    ng-show="!ctrl.isErrored">\n\n    <a\n      class="dropdown-toggle"\n      href=""\n      ng-show="ctrl.profileData.length !== 0"\n      data-toggle="dropdown"\n      aria-expanded="false">\n      {{\'Export\' | translate}}\n    </a>\n\n    <ul\n      class="dropdown-menu dropdown-menu-right"\n      role="menu">\n\n      <li>\n      <a\n        href=""\n        ng-click="::ctrl.downloadCsv()">\n        <i class="fa fa-table"></i>&nbsp;{{\'Download CSV\' | translate}}</a>\n      </li>\n    </ul>\n  </div>\n\n  <div\n    class="gmf-profile-error"\n    ng-show="ctrl.isErrored">\n\n    <p>{{\'The profile service does not respond, please try later.\' | translate}}</p>\n  </div>\n  <div\n    class="close"\n    ng-click="ctrl.line = null">&times;</div>\n</div>\n'}return __p}},function(e,t){},function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<div class="text-center btn-group dropup"\n    gmf-elevation\n    gmf-elevation-active="ctrl.active"\n    gmf-elevation-elevation="ctrl.elevationValue"\n    gmf-elevation-loading="ctrl.elevationLoading"\n    gmf-elevation-layer="ctrl.selectedElevationLayer"\n    gmf-elevation-layersconfig="ctrl.layersconfig"\n    gmf-elevation-map="::ctrl.map">\n  <a type="button" class="btn btn-default" aria-expanded="false"\n    ng-class="::{\'dropdown-toggle\': ctrl.layers.length > 1}"\n    ng-attr-data-toggle="{{::(ctrl.layers.length > 1) ? \'dropdown\' : \'\'}}"\n    >\n    <span class="gmf-elevationwidget-value">\n      {{ctrl.elevationValue}}\n      <span ng-show="ctrl.elevationLoading" class="fa fa-spinner"></span>\n      <span ng-show="!ctrl.elevationValue && !ctrl.elevationLoading" translate>Elevation…</span>\n    </span><span class="caret" ng-if="::ctrl.layers.length > 1"></span>\n  </a>\n  <ul class="dropdown-menu dropdown-menu-right" role="menu"\n      ng-if="::ctrl.layers.length > 1">\n    <li class="dropdown-header" translate>Elevation data sources</li>\n    <li ng-repeat="elevationItem in ::ctrl.layers">\n      <a href ng-click="ctrl.selectedElevationLayer = elevationItem">\n        <span class="fa fa-fw" ng-class="{\'fa-check\': ctrl.selectedElevationLayer === elevationItem}"></span>\n        {{elevationItem | translate}}\n      </a>\n    </li>\n  </ul>\n</div>\n'}return __p}},function(e,t,r){"use strict";var n=r(27);var i=r.n(n);var v=r(291);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function g(e,t,r){if(t)a(e.prototype,t);if(r)a(e,r);return e}function m(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}function _(){_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};return _.apply(this,arguments)}var o=function(i){var r="popover";var a="4.1.3";var o="bs.popover";var s="."+o;var e=i.fn[r];var l="bs-popover";var u=new RegExp("(^|\\s)"+l+"\\S+","g");var c=_({},v["a"].Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip">'+'<div class="arrow"></div>'+'<h3 class="popover-header"></h3>'+'<div class="popover-body"></div></div>'});var f=_({},v["a"].DefaultType,{content:"(string|element|function)"});var h={FADE:"fade",SHOW:"show"};var d={TITLE:".popover-header",CONTENT:".popover-body"};var p={HIDE:"hide"+s,HIDDEN:"hidden"+s,SHOW:"show"+s,SHOWN:"shown"+s,INSERTED:"inserted"+s,CLICK:"click"+s,FOCUSIN:"focusin"+s,FOCUSOUT:"focusout"+s,MOUSEENTER:"mouseenter"+s,MOUSELEAVE:"mouseleave"+s};var t=function(e){m(n,e);function n(){return e.apply(this,arguments)||this}var t=n.prototype;t.isWithContent=function e(){return this.getTitle()||this._getContent()};t.addAttachmentClass=function e(t){i(this.getTipElement()).addClass(l+"-"+t)};t.getTipElement=function e(){this.tip=this.tip||i(this.config.template)[0];return this.tip};t.setContent=function e(){var t=i(this.getTipElement());this.setElementContent(t.find(d.TITLE),this.getTitle());var r=this._getContent();if(typeof r==="function"){r=r.call(this.element)}this.setElementContent(t.find(d.CONTENT),r);t.removeClass(h.FADE+" "+h.SHOW)};t._getContent=function e(){return this.element.getAttribute("data-content")||this.config.content};t._cleanTipClass=function e(){var t=i(this.getTipElement());var r=t.attr("class").match(u);if(r!==null&&r.length>0){t.removeClass(r.join(""))}};n._jQueryInterface=function e(r){return this.each(function(){var e=i(this).data(o);var t=typeof r==="object"?r:null;if(!e&&/destroy|hide/.test(r)){return}if(!e){e=new n(this,t);i(this).data(o,e)}if(typeof r==="string"){if(typeof e[r]==="undefined"){throw new TypeError('No method named "'+r+'"')}e[r]()}})};g(n,null,[{key:"VERSION",get:function e(){return a}},{key:"Default",get:function e(){return c}},{key:"NAME",get:function e(){return r}},{key:"DATA_KEY",get:function e(){return o}},{key:"Event",get:function e(){return p}},{key:"EVENT_KEY",get:function e(){return s}},{key:"DefaultType",get:function e(){return f}}]);return n}(v["a"]);i.fn[r]=t._jQueryInterface;i.fn[r].Constructor=t;i.fn[r].noConflict=function(){i.fn[r]=e;return t._jQueryInterface};return t}(i.a);var s=o},function(a,o,s){(function(c){var n,i;var n,i;(function(t,r){if(true){!(n=[s(27)],i=function(e){return t["Bloodhound"]=r(e)}.apply(o,n),i!==undefined&&(a.exports=i))}else{}})(this,function(f){var h=function(){"use strict";return{isMsie:function e(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:false},isBlankString:function e(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function e(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function e(t){return typeof t==="string"},isNumber:function e(t){return typeof t==="number"},isArray:f.isArray,isFunction:f.isFunction,isObject:f.isPlainObject,isUndefined:function e(t){return typeof t==="undefined"},isElement:function e(t){return!!(t&&t.nodeType===1)},isJQuery:function e(t){return t instanceof f},toStr:function e(t){return h.isUndefined(t)||t===null?"":t+""},bind:f.proxy,each:function e(t,r){f.each(t,n);function n(e,t){return r(t,e)}},map:f.map,filter:f.grep,every:function e(r,n){var i=true;if(!r){return i}f.each(r,function(e,t){if(!(i=n.call(null,t,e,r))){return false}});return!!i},some:function e(r,n){var i=false;if(!r){return i}f.each(r,function(e,t){if(i=n.call(null,t,e,r)){return false}});return!!i},mixin:f.extend,identity:function e(t){return t},clone:function e(t){return f.extend(true,{},t)},getIdGenerator:function e(){var t=0;return function(){return t++}},templatify:function e(t){return f.isFunction(t)?t:r;function r(){return String(t)}},defer:function e(t){setTimeout(t,0)},debounce:function e(i,a,o){var s,l;return function(){var t=this,r=arguments,e,n;e=function e(){s=null;if(!o){l=i.apply(t,r)}};n=o&&!s;clearTimeout(s);s=setTimeout(e,a);if(n){l=i.apply(t,r)}return l}},throttle:function e(r,n){var i,a,o,s,l,u;l=0;u=function e(){l=new Date;o=null;s=r.apply(i,a)};return function(){var e=new Date,t=n-(e-l);i=this;a=arguments;if(t<=0){clearTimeout(o);o=null;l=e;s=r.apply(i,a)}else if(!o){o=setTimeout(u,t)}return s}},stringify:function e(t){return h.isString(t)?t:JSON.stringify(t)},guid:function e(){function t(e){var t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t}return"tt-"+t()+t(true)+t(true)+t()},noop:function e(){}}}();var s="1.2.0";var e=function(){"use strict";return{nonword:t,whitespace:e,ngram:r,obj:{nonword:n(t),whitespace:n(e),ngram:n(r)}};function e(e){e=h.toStr(e);return e?e.split(/\s+/):[]}function t(e){e=h.toStr(e);return e?e.split(/\W+/):[]}function r(e){e=h.toStr(e);var t=[],r="";h.each(e.split(""),function(e){if(e.match(/\s+/)){r=""}else{t.push(r+e);r+=e}});return t}function n(i){return function e(n){n=h.isArray(n)?n:[].slice.call(arguments,0);return function e(t){var r=[];h.each(n,function(e){r=r.concat(i(h.toStr(t[e])))});return r}}}}();var r=function(){"use strict";function e(e){this.maxSize=h.isNumber(e)?e:100;this.reset();if(this.maxSize<=0){this.set=this.get=f.noop}}h.mixin(e.prototype,{set:function e(t,r){var n=this.list.tail,i;if(this.size>=this.maxSize){this.list.remove(n);delete this.hash[n.key];this.size--}if(i=this.hash[t]){i.val=r;this.list.moveToFront(i)}else{i=new a(t,r);this.list.add(i);this.hash[t]=i;this.size++}},get:function e(t){var r=this.hash[t];if(r){this.list.moveToFront(r);return r.val}},reset:function e(){this.size=0;this.hash={};this.list=new t}});function t(){this.head=this.tail=null}h.mixin(t.prototype,{add:function e(t){if(this.head){t.next=this.head;this.head.prev=t}this.head=t;this.tail=this.tail||t},remove:function e(t){t.prev?t.prev.next=t.next:this.head=t.next;t.next?t.next.prev=t.prev:this.tail=t.prev},moveToFront:function e(t){this.remove(t);this.add(t)}});function a(e,t){this.key=e;this.val=t;this.prev=this.next=null}return e}();var t=function(){"use strict";var a;try{a=window.localStorage;a.setItem("~~~","!");a.removeItem("~~~")}catch(e){a=null}function e(e,t){this.prefix=["__",e,"__"].join("");this.ttlKey="__ttl__";this.keyMatcher=new RegExp("^"+h.escapeRegExChars(this.prefix));this.ls=t||a;!this.ls&&this._noop()}h.mixin(e.prototype,{_prefix:function e(t){return this.prefix+t},_ttlKey:function e(t){return this._prefix(t)+this.ttlKey},_noop:function e(){this.get=this.set=this.remove=this.clear=this.isExpired=h.noop},_safeSet:function e(t,r){try{this.ls.setItem(t,r)}catch(e){if(e.name==="QuotaExceededError"){this.clear();this._noop()}}},get:function e(t){if(this.isExpired(t)){this.remove(t)}return n(this.ls.getItem(this._prefix(t)))},set:function e(t,r,n){if(h.isNumber(n)){this._safeSet(this._ttlKey(t),o(i()+n))}else{this.ls.removeItem(this._ttlKey(t))}return this._safeSet(this._prefix(t),o(r))},remove:function e(t){this.ls.removeItem(this._ttlKey(t));this.ls.removeItem(this._prefix(t));return this},clear:function e(){var t,r=s(this.keyMatcher);for(t=r.length;t--;){this.remove(r[t])}return this},isExpired:function e(t){var r=n(this.ls.getItem(this._ttlKey(t)));return h.isNumber(r)&&i()>r?true:false}});return e;function i(){return(new Date).getTime()}function o(e){return JSON.stringify(h.isUndefined(e)?null:e)}function n(e){return f.parseJSON(e)}function s(e){var t,r,n=[],i=a.length;for(t=0;t<i;t++){if((r=a.key(t)).match(e)){n.push(r.replace(e,""))}}return n}}();var n=function(){"use strict";var u=0,c={},t=new r(10);function e(e){e=e||{};this.maxPendingRequests=e.maxPendingRequests||6;this.cancelled=false;this.lastReq=null;this._send=e.transport;this._get=e.limiter?e.limiter(this._get):this._get;this._cache=e.cache===false?new r(0):t}e.setMaxPendingRequests=function e(t){this.maxPendingRequests=t};e.resetCache=function e(){t.reset()};h.mixin(e.prototype,{_fingerprint:function e(t){t=t||{};return t.url+t.type+f.param(t.data||{})},_get:function e(t,r){var n=this,i,a;i=this._fingerprint(t);if(this.cancelled||i!==this.lastReq){return}if(a=c[i]){a.done(o).fail(s)}else if(u<this.maxPendingRequests){u++;c[i]=this._send(t).done(o).fail(s).always(l)}else{this.onDeckRequestArgs=[].slice.call(arguments,0)}function o(e){r(null,e);n._cache.set(i,e)}function s(){r(true)}function l(){u--;delete c[i];if(n.onDeckRequestArgs){n._get.apply(n,n.onDeckRequestArgs);n.onDeckRequestArgs=null}}},get:function e(t,r){var n,i;r=r||f.noop;t=h.isString(t)?{url:t}:t||{};i=this._fingerprint(t);this.cancelled=false;this.lastReq=i;if(n=this._cache.get(i)){r(null,n)}else{this._get(t,r)}},cancel:function e(){this.cancelled=true}});return e}();var i=window.SearchIndex=function(){"use strict";var s="c",l="i";function e(e){e=e||{};if(!e.datumTokenizer||!e.queryTokenizer){f.error("datumTokenizer and queryTokenizer are both required")}this.identify=e.identify||h.stringify;this.datumTokenizer=e.datumTokenizer;this.queryTokenizer=e.queryTokenizer;this.matchAnyQueryToken=e.matchAnyQueryToken;this.reset()}h.mixin(e.prototype,{bootstrap:function e(t){this.datums=t.datums;this.trie=t.trie},add:function e(t){var a=this;t=h.isArray(t)?t:[t];h.each(t,function(e){var i,t;a.datums[i=a.identify(e)]=e;t=n(a.datumTokenizer(e));h.each(t,function(e){var t,r,n;t=a.trie;r=e.split("");while(n=r.shift()){t=t[s][n]||(t[s][n]=o());t[l].push(i)}})})},get:function e(t){var r=this;return h.map(t,function(e){return r.datums[e]})},search:function e(t){var a=this,r,o;r=n(this.queryTokenizer(t));h.each(r,function(e){var t,r,n,i;if(o&&o.length===0&&!a.matchAnyQueryToken){return false}t=a.trie;r=e.split("");while(t&&(n=r.shift())){t=t[s][n]}if(t&&r.length===0){i=t[l].slice(0);o=o?u(o,i):i}else{if(!a.matchAnyQueryToken){o=[];return false}}});return o?h.map(i(o),function(e){return a.datums[e]}):[]},all:function e(){var t=[];for(var r in this.datums){t.push(this.datums[r])}return t},reset:function e(){this.datums={};this.trie=o()},serialize:function e(){return{datums:this.datums,trie:this.trie}}});return e;function n(e){e=h.filter(e,function(e){return!!e});e=h.map(e,function(e){return e.toLowerCase()});return e}function o(){var e={};e[l]=[];e[s]={};return e}function i(e){var t={},r=[];for(var n=0,i=e.length;n<i;n++){if(!t[e[n]]){t[e[n]]=true;r.push(e[n])}}return r}function u(e,t){var r=0,n=0,i=[];e=e.sort();t=t.sort();var a=e.length,o=t.length;while(r<a&&n<o){if(e[r]<t[n]){r++}else if(e[r]>t[n]){n++}else{i.push(e[r]);r++;n++}}return i}}();var a=function(){"use strict";var n;n={data:"data",protocol:"protocol",thumbprint:"thumbprint"};function e(e){this.url=e.url;this.ttl=e.ttl;this.cache=e.cache;this.prepare=e.prepare;this.transform=e.transform;this.transport=e.transport;this.thumbprint=e.thumbprint;this.storage=new t(e.cacheKey)}h.mixin(e.prototype,{_settings:function e(){return{url:this.url,type:"GET",dataType:"json"}},store:function e(t){if(!this.cache){return}this.storage.set(n.data,t,this.ttl);this.storage.set(n.protocol,location.protocol,this.ttl);this.storage.set(n.thumbprint,this.thumbprint,this.ttl)},fromCache:function e(){var t={},r;if(!this.cache){return null}t.data=this.storage.get(n.data);t.protocol=this.storage.get(n.protocol);t.thumbprint=this.storage.get(n.thumbprint);r=t.thumbprint!==this.thumbprint||t.protocol!==location.protocol;return t.data&&!r?t.data:null},fromNetwork:function e(t){var r=this,n;if(!t){return}n=this.prepare(this._settings());this.transport(n).fail(i).done(a);function i(){t(true)}function a(e){t(null,r.transform(e))}},clear:function e(){this.storage.clear();return this}});return e}();var o=function(){"use strict";function e(e){this.url=e.url;this.prepare=e.prepare;this.transform=e.transform;this.indexResponse=e.indexResponse;this.transport=new n({cache:e.cache,limiter:e.limiter,transport:e.transport,maxPendingRequests:e.maxPendingRequests})}h.mixin(e.prototype,{_settings:function e(){return{url:this.url,type:"GET",dataType:"json"}},get:function e(t,r){var n=this,i;if(!r){return}t=t||"";i=this.prepare(t,this._settings());return this.transport.get(i,a);function a(e,t){e?r([]):r(n.transform(t))}},cancelLastRequest:function e(){this.transport.cancel()}});return e}();var l=function(){"use strict";return function e(t){var r,n;r={initialize:true,identify:h.stringify,datumTokenizer:null,queryTokenizer:null,matchAnyQueryToken:false,sufficient:5,indexRemote:false,sorter:null,local:[],prefetch:null,remote:null};t=h.mixin(r,t||{});!t.datumTokenizer&&f.error("datumTokenizer is required");!t.queryTokenizer&&f.error("queryTokenizer is required");n=t.sorter;t.sorter=n?function(e){return e.sort(n)}:h.identity;t.local=h.isFunction(t.local)?t.local():t.local;t.prefetch=i(t.prefetch);t.remote=a(t.remote);return t};function i(e){var t;if(!e){return null}t={url:null,ttl:24*60*60*1e3,cache:true,cacheKey:null,thumbprint:"",prepare:h.identity,transform:h.identity,transport:null};e=h.isString(e)?{url:e}:e;e=h.mixin(t,e);!e.url&&f.error("prefetch requires url to be set");e.transform=e.filter||e.transform;e.cacheKey=e.cacheKey||e.url;e.thumbprint=s+e.thumbprint;e.transport=e.transport?o(e.transport):f.ajax;return e}function a(e){var t;if(!e){return}t={url:null,cache:true,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:h.identity,transport:null};e=h.isString(e)?{url:e}:e;e=h.mixin(t,e);!e.url&&f.error("remote requires url to be set");e.transform=e.filter||e.transform;e.prepare=r(e);e.limiter=n(e);e.transport=e.transport?o(e.transport):f.ajax;delete e.replace;delete e.wildcard;delete e.rateLimitBy;delete e.rateLimitWait;return e}function r(e){var t,r,n;t=e.prepare;r=e.replace;n=e.wildcard;if(t){return t}if(r){t=i}else if(e.wildcard){t=a}else{t=o}return t;function i(e,t){t.url=r(t.url,e);return t}function a(e,t){t.url=t.url.replace(n,encodeURIComponent(e));return t}function o(e,t){return t}}function n(e){var t,r,n;t=e.limiter;r=e.rateLimitBy;n=e.rateLimitWait;if(!t){t=/^throttle$/i.test(r)?a(n):i(n)}return t;function i(r){return function e(t){return h.debounce(t,r)}}function a(r){return function e(t){return h.throttle(t,r)}}}function o(a){return function e(t){var r=f.Deferred();a(t,n,i);return r;function n(e){h.defer(function(){r.resolve(e)})}function i(e){h.defer(function(){r.reject(e)})}}}}();var u=function(){"use strict";var t;t=window&&window.Bloodhound;function r(e){e=l(e);this.sorter=e.sorter;this.identify=e.identify;this.sufficient=e.sufficient;this.indexRemote=e.indexRemote;this.local=e.local;this.remote=e.remote?new o(e.remote):null;this.prefetch=e.prefetch?new a(e.prefetch):null;this.index=new i({identify:this.identify,datumTokenizer:e.datumTokenizer,queryTokenizer:e.queryTokenizer});e.initialize!==false&&this.initialize()}r.noConflict=function e(){window&&(window.Bloodhound=t);return r};r.tokenizers=e;h.mixin(r.prototype,{__ttAdapter:function e(){var n=this;return this.remote?t:r;function t(e,t,r){return n.search(e,t,r)}function r(e,t){return n.search(e,t)}},_loadPrefetch:function e(){var r=this,n,t;n=f.Deferred();if(!this.prefetch){n.resolve()}else if(t=this.prefetch.fromCache()){this.index.bootstrap(t);n.resolve()}else{this.prefetch.fromNetwork(i)}return n.promise();function i(e,t){if(e){return n.reject()}r.add(t);r.prefetch.store(r.index.serialize());n.resolve()}},_initialize:function e(){var t=this,r;this.clear();(this.initPromise=this._loadPrefetch()).done(n);return this.initPromise;function n(){t.add(t.local)}},initialize:function e(t){return!this.initPromise||t?this._initialize():this.initPromise},add:function e(t){this.index.add(t);return this},get:function e(t){t=h.isArray(t)?t:[].slice.call(arguments);return this.index.get(t)},search:function e(t,r,n){var i=this,a;r=r||h.noop;n=n||h.noop;a=this.sorter(this.index.search(t));r(this.remote?a.slice():a);if(this.remote&&a.length<this.sufficient){this.remote.get(t,o)}else if(this.remote){this.remote.cancelLastRequest()}return this;function o(e){var r=[];h.each(e,function(t){!h.some(a,function(e){return i.identify(t)===i.identify(e)})&&r.push(t)});i.indexRemote&&i.add(r);n(r)}},all:function e(){return this.index.all()},clear:function e(){this.index.reset();return this},clearPrefetchCache:function e(){this.prefetch&&this.prefetch.clear();return this},clearRemoteCache:function e(){n.resetCache();return this},ttAdapter:function e(){return this.__ttAdapter()}});return r}();return u});(function(e,t){if(true){!(n=[s(27)],i=function(e){return t(e)}.apply(o,n),i!==undefined&&(a.exports=i))}else{}})(this,function(y){var b=function(){"use strict";return{isMsie:function e(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:false},isBlankString:function e(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function e(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function e(t){return typeof t==="string"},isNumber:function e(t){return typeof t==="number"},isArray:y.isArray,isFunction:y.isFunction,isObject:y.isPlainObject,isUndefined:function e(t){return typeof t==="undefined"},isElement:function e(t){return!!(t&&t.nodeType===1)},isJQuery:function e(t){return t instanceof y},toStr:function e(t){return b.isUndefined(t)||t===null?"":t+""},bind:y.proxy,each:function e(t,r){y.each(t,n);function n(e,t){return r(t,e)}},map:y.map,filter:y.grep,every:function e(r,n){var i=true;if(!r){return i}y.each(r,function(e,t){if(!(i=n.call(null,t,e,r))){return false}});return!!i},some:function e(r,n){var i=false;if(!r){return i}y.each(r,function(e,t){if(i=n.call(null,t,e,r)){return false}});return!!i},mixin:y.extend,identity:function e(t){return t},clone:function e(t){return y.extend(true,{},t)},getIdGenerator:function e(){var t=0;return function(){return t++}},templatify:function e(t){return y.isFunction(t)?t:r;function r(){return String(t)}},defer:function e(t){setTimeout(t,0)},debounce:function e(i,a,o){var s,l;return function(){var t=this,r=arguments,e,n;e=function e(){s=null;if(!o){l=i.apply(t,r)}};n=o&&!s;clearTimeout(s);s=setTimeout(e,a);if(n){l=i.apply(t,r)}return l}},throttle:function e(r,n){var i,a,o,s,l,u;l=0;u=function e(){l=new Date;o=null;s=r.apply(i,a)};return function(){var e=new Date,t=n-(e-l);i=this;a=arguments;if(t<=0){clearTimeout(o);o=null;l=e;s=r.apply(i,a)}else if(!o){o=setTimeout(u,t)}return s}},stringify:function e(t){return b.isString(t)?t:JSON.stringify(t)},guid:function e(){function t(e){var t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t}return"tt-"+t()+t(true)+t(true)+t()},noop:function e(){}}}();var o=function(){"use strict";var n={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return e;function e(e){var r,t;t=b.mixin({},n,e);r={css:o(),classes:t,html:i(t),selectors:a(t)};return{css:r.css,html:r.html,classes:r.classes,selectors:r.selectors,mixin:function e(t){b.mixin(t,r)}}}function i(e){return{wrapper:'<span class="'+e.wrapper+'"></span>',menu:'<div role="listbox" class="'+e.menu+'"></div>'}}function a(e){var r={};b.each(e,function(e,t){r[t]="."+e});return r}function o(){var e={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};if(b.isMsie()){b.mixin(e.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"})}return e}}();var w=function(){"use strict";var i,n;i="typeahead:";n={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"};function e(e){if(!e||!e.el){y.error("EventBus initialized without el")}this.$el=y(e.el)}b.mixin(e.prototype,{_trigger:function e(t,r){var n=y.Event(i+t);this.$el.trigger.call(this.$el,n,r||[]);return n},before:function e(t){var r,n;r=[].slice.call(arguments,1);n=this._trigger("before"+t,r);return n.isDefaultPrevented()},trigger:function e(t){var r;this._trigger(t,[].slice.call(arguments,1));if(r=n[t]){this._trigger(r,[].slice.call(arguments,1))}}});return e}();var t=function(){"use strict";var o=/\s+/,s=a();return{onSync:t,onAsync:e,off:r,trigger:i};function n(e,t,r,n){var i;if(!r){return this}t=t.split(o);r=n?u(r,n):r;this._callbacks=this._callbacks||{};while(i=t.shift()){this._callbacks[i]=this._callbacks[i]||{sync:[],async:[]};this._callbacks[i][e].push(r)}return this}function e(e,t,r){return n.call(this,"async",e,t,r)}function t(e,t,r){return n.call(this,"sync",e,t,r)}function r(e){var t;if(!this._callbacks){return this}e=e.split(o);while(t=e.shift()){delete this._callbacks[t]}return this}function i(e){var t,r,n,i,a;if(!this._callbacks){return this}e=e.split(o);n=[].slice.call(arguments,1);while((t=e.shift())&&(r=this._callbacks[t])){i=l(r.sync,this,[t].concat(n));a=l(r.async,this,[t].concat(n));i()&&s(a)}return this}function l(n,i,a){return e;function e(){var e;for(var t=0,r=n.length;!e&&t<r;t+=1){e=n[t].apply(i,a)===false}return!e}}function a(){var e;if(window.setImmediate){e=function e(t){c(function(){t()})}}else{e=function e(t){setTimeout(function(){t()},0)}}return e}function u(e,t){return e.bind?e.bind(t):function(){e.apply(t,[].slice.call(arguments,0))}}}();var l=function(s){"use strict";var r={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:false,caseSensitive:false,diacriticInsensitive:false};var t={A:"[AaªÀ-Åà-åĀ-ąǍǎȀ-ȃȦȧᴬᵃḀḁẚẠ-ảₐ℀℁℻⒜Ⓐⓐ㍱-㍴㎀-㎄㎈㎉㎩-㎯㏂㏊㏟㏿Ａａ]",B:"[BbᴮᵇḂ-ḇℬ⒝Ⓑⓑ㍴㎅-㎇㏃㏈㏔㏝Ｂｂ]",C:"[CcÇçĆ-čᶜ℀ℂ℃℅℆ℭⅭⅽ⒞Ⓒⓒ㍶㎈㎉㎝㎠㎤㏄-㏇Ｃｃ]",D:"[DdĎďǄ-ǆǱ-ǳᴰᵈḊ-ḓⅅⅆⅮⅾ⒟Ⓓⓓ㋏㍲㍷-㍹㎗㎭-㎯㏅㏈Ｄｄ]",E:"[EeÈ-Ëè-ëĒ-ěȄ-ȇȨȩᴱᵉḘ-ḛẸ-ẽₑ℡ℯℰⅇ⒠Ⓔⓔ㉐㋍㋎Ｅｅ]",F:"[FfᶠḞḟ℉ℱ℻⒡Ⓕⓕ㎊-㎌㎙ﬀ-ﬄＦｆ]",G:"[GgĜ-ģǦǧǴǵᴳᵍḠḡℊ⒢Ⓖⓖ㋌㋍㎇㎍-㎏㎓㎬㏆㏉㏒㏿Ｇｇ]",H:"[HhĤĥȞȟʰᴴḢ-ḫẖℋ-ℎ⒣Ⓗⓗ㋌㍱㎐-㎔㏊㏋㏗Ｈｈ]",I:"[IiÌ-Ïì-ïĨ-İĲĳǏǐȈ-ȋᴵᵢḬḭỈ-ịⁱℐℑℹⅈⅠ-ⅣⅥ-ⅨⅪⅫⅰ-ⅳⅵ-ⅸⅺⅻ⒤Ⓘⓘ㍺㏌㏕ﬁﬃＩｉ]",J:"[JjĲ-ĵǇ-ǌǰʲᴶⅉ⒥ⒿⓙⱼＪｊ]",K:"[KkĶķǨǩᴷᵏḰ-ḵK⒦Ⓚⓚ㎄㎅㎉㎏㎑㎘㎞㎢㎦㎪㎸㎾㏀㏆㏍-㏏Ｋｋ]",L:"[LlĹ-ŀǇ-ǉˡᴸḶḷḺ-ḽℒℓ℡Ⅼⅼ⒧Ⓛⓛ㋏㎈㎉㏐-㏓㏕㏖㏿ﬂﬄＬｌ]",M:"[MmᴹᵐḾ-ṃ℠™ℳⅯⅿ⒨Ⓜⓜ㍷-㍹㎃㎆㎎㎒㎖㎙-㎨㎫㎳㎷㎹㎽㎿㏁㏂㏎㏐㏔-㏖㏘㏙㏞㏟Ｍｍ]",N:"[NnÑñŃ-ŉǊ-ǌǸǹᴺṄ-ṋⁿℕ№⒩Ⓝⓝ㎁㎋㎚㎱㎵㎻㏌㏑Ｎｎ]",O:"[OoºÒ-Öò-öŌ-őƠơǑǒǪǫȌ-ȏȮȯᴼᵒỌ-ỏₒ℅№ℴ⒪Ⓞⓞ㍵㏇㏒㏖Ｏｏ]",P:"[PpᴾᵖṔ-ṗℙ⒫Ⓟⓟ㉐㍱㍶㎀㎊㎩-㎬㎰㎴㎺㏋㏗-㏚Ｐｐ]",Q:"[Qqℚ⒬Ⓠⓠ㏃Ｑｑ]",R:"[RrŔ-řȐ-ȓʳᴿᵣṘ-ṛṞṟ₨ℛ-ℝ⒭Ⓡⓡ㋍㍴㎭-㎯㏚㏛Ｒｒ]",S:"[SsŚ-šſȘșˢṠ-ṣ₨℁℠⒮Ⓢⓢ㎧㎨㎮-㎳㏛㏜ﬆＳｓ]",T:"[TtŢ-ťȚțᵀᵗṪ-ṱẗ℡™⒯Ⓣⓣ㉐㋏㎔㏏ﬅﬆＴｔ]",U:"[UuÙ-Üù-üŨ-ųƯưǓǔȔ-ȗᵁᵘᵤṲ-ṷỤ-ủ℆⒰Ⓤⓤ㍳㍺Ｕｕ]",V:"[VvᵛᵥṼ-ṿⅣ-Ⅷⅳ-ⅷ⒱Ⓥⓥⱽ㋎㍵㎴-㎹㏜㏞Ｖｖ]",W:"[WwŴŵʷᵂẀ-ẉẘ⒲Ⓦⓦ㎺-㎿㏝Ｗｗ]",X:"[XxˣẊ-ẍₓ℻Ⅸ-Ⅻⅸ-ⅻ⒳Ⓧⓧ㏓Ｘｘ]",Y:"[YyÝýÿŶ-ŸȲȳʸẎẏẙỲ-ỹ⒴Ⓨⓨ㏉Ｙｙ]",Z:"[ZzŹ-žǱ-ǳᶻẐ-ẕℤℨ⒵Ⓩⓩ㎐-㎔Ｚｚ]"};return function e(i){var a;i=b.mixin({},r,i);if(!i.node||!i.pattern){return}i.pattern=b.isArray(i.pattern)?i.pattern:[i.pattern];a=n(i.pattern,i.caseSensitive,i.wordsOnly,i.diacriticInsensitive);o(i.node,t);function t(e){var t,r,n;if(t=a.exec(e.data)){n=s.createElement(i.tagName);i.className&&(n.className=i.className);r=e.splitText(t.index);r.splitText(t[0].length);n.appendChild(r.cloneNode(true));e.parentNode.replaceChild(n,r)}return!!t}function o(e,t){var r,n=3;for(var i=0;i<e.childNodes.length;i++){r=e.childNodes[i];if(r.nodeType===n){i+=t(r)?1:0}else{o(r,t)}}}};function u(e){return t[e.toUpperCase()]||e}function n(e,t,r,n){var i=[],a;for(var o=0,s=e.length;o<s;o++){var l=b.escapeRegExChars(e[o]);if(n){l=l.replace(/\S/g,u)}i.push(l)}a=r?"\\b("+i.join("|")+")\\b":"("+i.join("|")+")";return t?new RegExp(a):new RegExp(a,"i")}}(window.document);var S=function(){"use strict";var o;o={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};function r(e,t){e=e||{};if(!e.input){y.error("input is missing")}t.mixin(this);this.$hint=y(e.hint);this.$input=y(e.input);this.$input.attr({"aria-activedescendant":"","aria-owns":this.$input.attr("id")+"_listbox",role:"combobox","aria-readonly":"true","aria-autocomplete":"list"});y(t.menu).attr("id",this.$input.attr("id")+"_listbox");this.query=this.$input.val();this.queryWhenFocused=this.hasFocus()?this.query:null;this.$overflowHelper=n(this.$input);this._checkLanguageDirection();if(this.$hint.length===0){this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=b.noop}this.onSync("cursorchange",this._updateDescendent)}r.normalizeQuery=function(e){return b.toStr(e).replace(/^\s*/g,"").replace(/\s{2,}/g," ")};b.mixin(r.prototype,t,{_onBlur:function e(){this.resetInputValue();this.trigger("blurred")},_onFocus:function e(){this.queryWhenFocused=this.query;this.trigger("focused")},_onKeydown:function e(t){var r=o[t.which||t.keyCode];this._managePreventDefault(r,t);if(r&&this._shouldTrigger(r,t)){this.trigger(r+"Keyed",t)}},_onInput:function e(){this._setQuery(this.getInputValue());this.clearHintIfInvalid();this._checkLanguageDirection()},_managePreventDefault:function e(t,r){var n;switch(t){case"up":case"down":n=!i(r);break;default:n=false}n&&r.preventDefault()},_shouldTrigger:function e(t,r){var n;switch(t){case"tab":n=!i(r);break;default:n=true}return n},_checkLanguageDirection:function e(){var t=(this.$input.css("direction")||"ltr").toLowerCase();if(this.dir!==t){this.dir=t;this.$hint.attr("dir",t);this.trigger("langDirChanged",t)}},_setQuery:function e(t,r){var n,i;n=a(t,this.query);i=n?this.query.length!==t.length:false;this.query=t;if(!r&&!n){this.trigger("queryChanged",this.query)}else if(!r&&i){this.trigger("whitespaceChanged",this.query)}},_updateDescendent:function e(t,r){this.$input.attr("aria-activedescendant",r)},bind:function e(){var t=this,r,n,i,a;r=b.bind(this._onBlur,this);n=b.bind(this._onFocus,this);i=b.bind(this._onKeydown,this);a=b.bind(this._onInput,this);this.$input.on("blur.tt",r).on("focus.tt",n).on("keydown.tt",i);if(!b.isMsie()||b.isMsie()>9){this.$input.on("input.tt",a)}else{this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(e){if(o[e.which||e.keyCode]){return}b.defer(b.bind(t._onInput,t,e))})}return this},focus:function e(){this.$input.focus()},blur:function e(){this.$input.blur()},getLangDir:function e(){return this.dir},getQuery:function e(){return this.query||""},setQuery:function e(t,r){this.setInputValue(t);this._setQuery(t,r)},hasQueryChangedSinceLastFocus:function e(){return this.query!==this.queryWhenFocused},getInputValue:function e(){return this.$input.val()},setInputValue:function e(t){this.$input.val(t);this.clearHintIfInvalid();this._checkLanguageDirection()},resetInputValue:function e(){this.setInputValue(this.query)},getHint:function e(){return this.$hint.val()},setHint:function e(t){this.$hint.val(t)},clearHint:function e(){this.setHint("")},clearHintIfInvalid:function e(){var t,r,n,i;t=this.getInputValue();r=this.getHint();n=t!==r&&r.indexOf(t)===0;i=t!==""&&n&&!this.hasOverflow();!i&&this.clearHint()},hasFocus:function e(){return this.$input.is(":focus")},hasOverflow:function e(){var t=this.$input.width()-2;this.$overflowHelper.text(this.getInputValue());return this.$overflowHelper.width()>=t},isCursorAtEnd:function e(){var t,r,n;t=this.$input.val().length;r=this.$input[0].selectionStart;if(b.isNumber(r)){return r===t}else if(document.selection){n=document.selection.createRange();n.moveStart("character",-t);return t===n.text.length}return true},destroy:function e(){this.$hint.off(".tt");this.$input.off(".tt");this.$overflowHelper.remove();this.$hint=this.$input=this.$overflowHelper=y("<div>")}});return r;function n(e){return y('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}function a(e,t){return r.normalizeQuery(e)===r.normalizeQuery(t)}function i(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}}();var i=function(){"use strict";var s,r;s={dataset:"tt-selectable-dataset",val:"tt-selectable-display",obj:"tt-selectable-object"};r=b.getIdGenerator();function e(e,t){e=e||{};e.templates=e.templates||{};e.templates.notFound=e.templates.notFound||e.templates.empty;if(!e.source){y.error("missing source")}if(!e.node){y.error("missing node")}if(e.name&&!a(e.name)){y.error("invalid dataset name: "+e.name)}t.mixin(this);this.highlight=!!e.highlight;this.name=b.toStr(e.name||r());this.limit=e.limit||5;this.displayFn=n(e.display||e.displayKey);this.templates=i(e.templates,this.displayFn);this.source=e.source.__ttAdapter?e.source.__ttAdapter():e.source;this.async=b.isUndefined(e.async)?this.source.length>2:!!e.async;this._resetLastSuggestion();this.$el=y(e.node).attr("role","presentation").addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}e.extractData=function e(t){var r=y(t);if(r.data(s.obj)){return{dataset:r.data(s.dataset)||"",val:r.data(s.val)||"",obj:r.data(s.obj)||null}}return null};b.mixin(e.prototype,t,{_overwrite:function e(t,r){r=r||[];if(r.length){this._renderSuggestions(t,r)}else if(this.async&&this.templates.pending){this._renderPending(t)}else if(!this.async&&this.templates.notFound){this._renderNotFound(t)}else{this._empty()}this.trigger("rendered",r,false,this.name)},_append:function e(t,r){r=r||[];if(r.length&&this.$lastSuggestion.length){this._appendSuggestions(t,r)}else if(r.length){this._renderSuggestions(t,r)}else if(!this.$lastSuggestion.length&&this.templates.notFound){this._renderNotFound(t)}this.trigger("rendered",r,true,this.name)},_renderSuggestions:function e(t,r){var n;n=this._getSuggestionsFragment(t,r);this.$lastSuggestion=n.children().last();this.$el.html(n).prepend(this._getHeader(t,r)).append(this._getFooter(t,r))},_appendSuggestions:function e(t,r){var n,i;n=this._getSuggestionsFragment(t,r);i=n.children().last();this.$lastSuggestion.after(n);this.$lastSuggestion=i},_renderPending:function e(t){var r=this.templates.pending;this._resetLastSuggestion();r&&this.$el.html(r({query:t,dataset:this.name}))},_renderNotFound:function e(t){var r=this.templates.notFound;this._resetLastSuggestion();r&&this.$el.html(r({query:t,dataset:this.name}))},_empty:function e(){this.$el.empty();this._resetLastSuggestion()},_getSuggestionsFragment:function e(i,t){var a=this,o;o=document.createDocumentFragment();b.each(t,function e(t){var r,n;n=a._injectQuery(i,t);r=y(a.templates.suggestion(n)).data(s.dataset,a.name).data(s.obj,t).data(s.val,a.displayFn(t)).addClass(a.classes.suggestion+" "+a.classes.selectable);o.appendChild(r[0])});this.highlight&&l({className:this.classes.highlight,node:o,pattern:i});return y(o)},_getFooter:function e(t,r){return this.templates.footer?this.templates.footer({query:t,suggestions:r,dataset:this.name}):null},_getHeader:function e(t,r){return this.templates.header?this.templates.header({query:t,suggestions:r,dataset:this.name}):null},_resetLastSuggestion:function e(){this.$lastSuggestion=y()},_injectQuery:function e(t,r){return b.isObject(r)?b.mixin({_query:t},r):r},update:function e(r){var n=this,i=false,t=false,a=0;this.cancel();this.cancel=function e(){i=true;n.cancel=y.noop;n.async&&n.trigger("asyncCanceled",r,n.name)};this.source(r,o,s);!t&&o([]);function o(e){if(t){return}t=true;e=(e||[]).slice(0,n.limit);a=e.length;n._overwrite(r,e);if(a<n.limit&&n.async){n.trigger("asyncRequested",r,n.name)}}function s(e){e=e||[];if(!i&&a<n.limit){n.cancel=y.noop;var t=Math.abs(a-n.limit);a+=t;n._append(r,e.slice(0,t));n.async&&n.trigger("asyncReceived",r,n.name)}}},cancel:y.noop,clear:function e(){this._empty();this.cancel();this.trigger("cleared")},isEmpty:function e(){return this.$el.is(":empty")},destroy:function e(){this.$el=y("<div>")}});return e;function n(t){t=t||b.stringify;return b.isFunction(t)?t:e;function e(e){return e[t]}}function i(e,t){return{notFound:e.notFound&&b.templatify(e.notFound),pending:e.pending&&b.templatify(e.pending),header:e.header&&b.templatify(e.header),footer:e.footer&&b.templatify(e.footer),suggestion:e.suggestion||r};function r(e){return y('<div role="option">').attr("id",b.guid()).text(t(e))}}function a(e){return/^[_a-zA-Z0-9-]+$/.test(e)}}();var C=function(){"use strict";function e(e,r){var n=this;e=e||{};if(!e.node){y.error("node is required")}r.mixin(this);this.$node=y(e.node);this.query=null;this.datasets=b.map(e.datasets,t);function t(e){var t=n.$node.find(e.node).first();e.node=t.length?t:y("<div>").appendTo(n.$node);return new i(e,r)}}b.mixin(e.prototype,t,{_onSelectableClick:function e(t){this.trigger("selectableClicked",y(t.currentTarget))},_onRendered:function e(t,r,n,i){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty());this.trigger("datasetRendered",r,n,i)},_onCleared:function e(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty());this.trigger("datasetCleared")},_propagate:function e(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function e(){return b.every(this.datasets,b.bind(function e(t){var r=t.isEmpty();this.$node.attr("aria-expanded",!r);return r},this))},_getSelectables:function e(){return this.$node.find(this.selectors.selectable)},_removeCursor:function e(){var t=this.getActiveSelectable();t&&t.removeClass(this.classes.cursor)},_ensureVisible:function e(t){var r,n,i,a;r=t.position().top;n=r+t.outerHeight(true);i=this.$node.scrollTop();a=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10);if(r<0){this.$node.scrollTop(i+r)}else if(a<n){this.$node.scrollTop(i+(n-a))}},bind:function e(){var t=this,r;r=b.bind(this._onSelectableClick,this);this.$node.on("click.tt",this.selectors.selectable,r);this.$node.on("mouseover",this.selectors.selectable,function(){t.setCursor(y(this))});this.$node.on("mouseleave",function(){t._removeCursor()});b.each(this.datasets,function(e){e.onSync("asyncRequested",t._propagate,t).onSync("asyncCanceled",t._propagate,t).onSync("asyncReceived",t._propagate,t).onSync("rendered",t._onRendered,t).onSync("cleared",t._onCleared,t)});return this},isOpen:function e(){return this.$node.hasClass(this.classes.open)},open:function e(){this.$node.scrollTop(0);this.$node.addClass(this.classes.open)},close:function e(){this.$node.attr("aria-expanded",false);this.$node.removeClass(this.classes.open);this._removeCursor()},setLanguageDirection:function e(t){this.$node.attr("dir",t)},selectableRelativeToCursor:function e(t){var r,n,i,a;n=this.getActiveSelectable();r=this._getSelectables();i=n?r.index(n):-1;a=i+t;a=(a+1)%(r.length+1)-1;a=a<-1?r.length-1:a;return a===-1?null:r.eq(a)},setCursor:function e(t){this._removeCursor();if(t=t&&t.first()){t.addClass(this.classes.cursor);this._ensureVisible(t)}},getSelectableData:function e(t){return t&&t.length?i.extractData(t):null},getActiveSelectable:function e(){var t=this._getSelectables().filter(this.selectors.cursor).first();return t.length?t:null},getTopSelectable:function e(){var t=this._getSelectables().first();return t.length?t:null},update:function e(t){var r=t!==this.query;if(r){this.query=t;b.each(this.datasets,n)}return r;function n(e){e.update(t)}},empty:function e(){b.each(this.datasets,t);this.query=null;this.$node.addClass(this.classes.empty);function t(e){e.clear()}},destroy:function e(){this.$node.off(".tt");this.$node=y("<div>");b.each(this.datasets,t);function t(e){e.destroy()}}});return e}();var O=function(){"use strict";function e(e){this.$el=y("<span></span>",{role:"status","aria-live":"polite"}).css({position:"absolute",padding:"0",border:"0",height:"1px",width:"1px","margin-bottom":"-1px","margin-right":"-1px",overflow:"hidden",clip:"rect(0 0 0 0)","white-space":"nowrap"});e.$input.after(this.$el);b.each(e.menu.datasets,b.bind(function(e){if(e.onSync){e.onSync("rendered",b.bind(this.update,this));e.onSync("cleared",b.bind(this.cleared,this))}},this))}b.mixin(e.prototype,{update:function e(t,r){var n=r.length;var i;if(n===1){i={result:"result",is:"is"}}else{i={result:"results",is:"are"}}this.$el.text(n+" "+i.result+" "+i.is+" available, use up and down arrow keys to navigate.")},cleared:function e(){this.$el.text("")}});return e}();var x=function(){"use strict";var r=C.prototype;function e(){C.apply(this,[].slice.call(arguments,0))}b.mixin(e.prototype,C.prototype,{open:function e(){!this._allDatasetsEmpty()&&this._show();return r.open.apply(this,[].slice.call(arguments,0))},close:function e(){this._hide();return r.close.apply(this,[].slice.call(arguments,0))},_onRendered:function e(){if(this._allDatasetsEmpty()){this._hide()}else{this.isOpen()&&this._show()}return r._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function e(){if(this._allDatasetsEmpty()){this._hide()}else{this.isOpen()&&this._show()}return r._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function e(t){this.$node.css(t==="ltr"?this.css.ltr:this.css.rtl);return r.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function e(){this.$node.hide()},_show:function e(){this.$node.css("display","block")}});return e}();var T=function(){"use strict";function e(e,t){var r,n,i,a,o,s,l,u,c,f,h;e=e||{};if(!e.input){y.error("missing input")}if(!e.menu){y.error("missing menu")}if(!e.eventBus){y.error("missing event bus")}t.mixin(this);this.eventBus=e.eventBus;this.minLength=b.isNumber(e.minLength)?e.minLength:1;this.input=e.input;this.menu=e.menu;this.enabled=true;this.autoselect=!!e.autoselect;this.active=false;this.input.hasFocus()&&this.activate();this.dir=this.input.getLangDir();this._hacks();this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this);r=d(this,"activate","open","_onFocused");n=d(this,"deactivate","_onBlurred");i=d(this,"isActive","isOpen","_onEnterKeyed");a=d(this,"isActive","isOpen","_onTabKeyed");o=d(this,"isActive","_onEscKeyed");s=d(this,"isActive","open","_onUpKeyed");l=d(this,"isActive","open","_onDownKeyed");u=d(this,"isActive","isOpen","_onLeftKeyed");c=d(this,"isActive","isOpen","_onRightKeyed");f=d(this,"_openIfActive","_onQueryChanged");h=d(this,"_openIfActive","_onWhitespaceChanged");this.input.bind().onSync("focused",r,this).onSync("blurred",n,this).onSync("enterKeyed",i,this).onSync("tabKeyed",a,this).onSync("escKeyed",o,this).onSync("upKeyed",s,this).onSync("downKeyed",l,this).onSync("leftKeyed",u,this).onSync("rightKeyed",c,this).onSync("queryChanged",f,this).onSync("whitespaceChanged",h,this).onSync("langDirChanged",this._onLangDirChanged,this)}b.mixin(e.prototype,{_hacks:function e(){var i,a;i=this.input.$input||y("<div>");a=this.menu.$node||y("<div>");i.on("blur.tt",function(e){var t,r,n;t=document.activeElement;r=a.is(t);n=a.has(t).length>0;if(b.isMsie()&&(r||n)){e.preventDefault();e.stopImmediatePropagation();b.defer(function(){i.focus()})}});a.on("mousedown.tt",function(e){e.preventDefault()})},_onSelectableClicked:function e(t,r){this.select(r)},_onDatasetCleared:function e(){this._updateHint()},_onDatasetRendered:function e(t,r,n,i){this._updateHint();if(this.autoselect){var a=this.selectors.cursor.substr(1);this.menu.$node.find(this.selectors.suggestion).first().addClass(a)}this.eventBus.trigger("render",r,n,i)},_onAsyncRequested:function e(t,r,n){this.eventBus.trigger("asyncrequest",n,r)},_onAsyncCanceled:function e(t,r,n){this.eventBus.trigger("asynccancel",n,r)},_onAsyncReceived:function e(t,r,n){this.eventBus.trigger("asyncreceive",n,r)},_onFocused:function e(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function e(){if(this.input.hasQueryChangedSinceLastFocus()){this.eventBus.trigger("change",this.input.getQuery())}},_onEnterKeyed:function e(t,r){var n;if(n=this.menu.getActiveSelectable()){if(this.select(n)){r.preventDefault();r.stopPropagation()}}else if(this.autoselect){if(this.select(this.menu.getTopSelectable())){r.preventDefault();r.stopPropagation()}}},_onTabKeyed:function e(t,r){var n;if(n=this.menu.getActiveSelectable()){this.select(n)&&r.preventDefault()}else if(n=this.menu.getTopSelectable()){this.autocomplete(n)&&r.preventDefault()}},_onEscKeyed:function e(){this.close()},_onUpKeyed:function e(){this.moveCursor(-1)},_onDownKeyed:function e(){this.moveCursor(+1)},_onLeftKeyed:function e(){if(this.dir==="rtl"&&this.input.isCursorAtEnd()){this.autocomplete(this.menu.getActiveSelectable()||this.menu.getTopSelectable())}},_onRightKeyed:function e(){if(this.dir==="ltr"&&this.input.isCursorAtEnd()){this.autocomplete(this.menu.getActiveSelectable()||this.menu.getTopSelectable())}},_onQueryChanged:function e(t,r){this._minLengthMet(r)?this.menu.update(r):this.menu.empty()},_onWhitespaceChanged:function e(){this._updateHint()},_onLangDirChanged:function e(t,r){if(this.dir!==r){this.dir=r;this.menu.setLanguageDirection(r)}},_openIfActive:function e(){this.isActive()&&this.open()},_minLengthMet:function e(t){t=b.isString(t)?t:this.input.getQuery()||"";return t.length>=this.minLength},_updateHint:function e(){var t,r,n,i,a,o,s;t=this.menu.getTopSelectable();r=this.menu.getSelectableData(t);n=this.input.getInputValue();if(r&&!b.isBlankString(n)&&!this.input.hasOverflow()){i=S.normalizeQuery(n);a=b.escapeRegExChars(i);o=new RegExp("^(?:"+a+")(.+$)","i");s=o.exec(r.val);s&&this.input.setHint(n+s[1])}else{this.input.clearHint()}},isEnabled:function e(){return this.enabled},enable:function e(){this.enabled=true},disable:function e(){this.enabled=false},isActive:function e(){return this.active},activate:function e(){if(this.isActive()){return true}else if(!this.isEnabled()||this.eventBus.before("active")){return false}else{this.active=true;this.eventBus.trigger("active");return true}},deactivate:function e(){if(!this.isActive()){return true}else if(this.eventBus.before("idle")){return false}else{this.active=false;this.close();this.eventBus.trigger("idle");return true}},isOpen:function e(){return this.menu.isOpen()},open:function e(){if(!this.isOpen()&&!this.eventBus.before("open")){this.menu.open();this._updateHint();this.eventBus.trigger("open")}return this.isOpen()},close:function e(){if(this.isOpen()&&!this.eventBus.before("close")){this.menu.close();this.input.clearHint();this.input.resetInputValue();this.eventBus.trigger("close")}return!this.isOpen()},setVal:function e(t){this.input.setQuery(b.toStr(t))},getVal:function e(){return this.input.getQuery()},select:function e(t){var r=this.menu.getSelectableData(t);if(r&&!this.eventBus.before("select",r.obj,r.dataset)){this.input.setQuery(r.val,true);this.eventBus.trigger("select",r.obj,r.dataset);this.close();return true}return false},autocomplete:function e(t){var r,n,i;r=this.input.getQuery();n=this.menu.getSelectableData(t);i=n&&r!==n.val;if(i&&!this.eventBus.before("autocomplete",n.obj,n.dataset)){this.input.setQuery(n.val);this.eventBus.trigger("autocomplete",n.obj,n.dataset);return true}return false},moveCursor:function e(t){var r,n,i,a,o,s,l;r=this.input.getQuery();n=this.menu.selectableRelativeToCursor(t);i=this.menu.getSelectableData(n);a=i?i.obj:null;o=i?i.dataset:null;l=n?n.attr("id"):null;this.input.trigger("cursorchange",l);s=this._minLengthMet()&&this.menu.update(r);if(!s&&!this.eventBus.before("cursorchange",a,o)){this.menu.setCursor(n);if(i){this.input.setInputValue(i.val)}else{this.input.resetInputValue();this._updateHint()}this.eventBus.trigger("cursorchange",a,o);return true}return false},destroy:function e(){this.input.destroy();this.menu.destroy()}});return e;function d(r){var e=[].slice.call(arguments,1);return function(){var t=[].slice.call(arguments);b.each(e,function(e){return r[e].apply(r,t)})}}}();(function(){"use strict";var t,v,r;t=y.fn.typeahead;v={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"};r={initialize:function e(h,d){var p;d=b.isArray(d)?d:[].slice.call(arguments,1);h=h||{};p=o(h.classNames);return this.each(t);function t(){var e,t,r,n,i,a,o,s,l,u,c,f;b.each(d,function(e){e.highlight=!!h.highlight});e=y(this);t=y(p.html.wrapper);r=_(h.hint);n=_(h.menu);i=h.hint!==false&&!r;a=h.menu!==false&&!n;i&&(r=g(e,p));a&&(n=y(p.html.menu).css(p.css.menu));r&&r.val("");e=m(e,p);if(i||a){t.css(p.css.wrapper);e.css(i?p.css.input:p.css.inputWithNoHint);e.wrap(t).parent().prepend(i?r:null).append(a?n:null)}f=a?x:C;o=new w({el:e});s=new S({hint:r,input:e},p);l=new f({node:n,datasets:d},p);u=new O({$input:e,menu:l});c=new T({input:s,menu:l,eventBus:o,minLength:h.minLength,autoselect:h.autoselect},p);e.data(v.www,p);e.data(v.typeahead,c)}},isEnabled:function e(){var t;i(this.first(),function(e){t=e.isEnabled()});return t},enable:function e(){i(this,function(e){e.enable()});return this},disable:function e(){i(this,function(e){e.disable()});return this},isActive:function e(){var t;i(this.first(),function(e){t=e.isActive()});return t},activate:function e(){i(this,function(e){e.activate()});return this},deactivate:function e(){i(this,function(e){e.deactivate()});return this},isOpen:function e(){var t;i(this.first(),function(e){t=e.isOpen()});return t},open:function e(){i(this,function(e){e.open()});return this},close:function e(){i(this,function(e){e.close()});return this},select:function e(t){var r=false,n=y(t);i(this.first(),function(e){r=e.select(n)});return r},autocomplete:function e(t){var r=false,n=y(t);i(this.first(),function(e){r=e.autocomplete(n)});return r},moveCursor:function e(t){var r=false;i(this.first(),function(e){r=e.moveCursor(t)});return r},val:function e(t){var r;if(!arguments.length){i(this.first(),function(e){r=e.getVal()});return r}else{i(this,function(e){e.setVal(b.toStr(t))});return this}},destroy:function e(){i(this,function(e,t){a(t);e.destroy()});return this}};y.fn.typeahead=function(e){if(r[e]){return r[e].apply(this,[].slice.call(arguments,1))}else{return r.initialize.apply(this,arguments)}};y.fn.typeahead.noConflict=function e(){y.fn.typeahead=t;return this};function i(e,r){e.each(function(){var e=y(this),t;(t=e.data(v.typeahead))&&r(t,e)})}function g(e,t){return e.clone().addClass(t.classes.hint).removeData().css(t.css.hint).css(n(e)).prop({readonly:true,required:false}).removeAttr("id name placeholder").removeClass("required").attr({spellcheck:"false",tabindex:-1})}function m(e,t){e.data(v.attrs,{dir:e.attr("dir"),autocomplete:e.attr("autocomplete"),spellcheck:e.attr("spellcheck"),style:e.attr("style")});e.addClass(t.classes.input).attr({spellcheck:false});try{!e.attr("dir")&&e.attr("dir","auto")}catch(e){}return e}function n(e){return{backgroundAttachment:e.css("background-attachment"),backgroundClip:e.css("background-clip"),backgroundColor:e.css("background-color"),backgroundImage:e.css("background-image"),backgroundOrigin:e.css("background-origin"),backgroundPosition:e.css("background-position"),backgroundRepeat:e.css("background-repeat"),backgroundSize:e.css("background-size")}}function a(r){var e,t;e=r.data(v.www);t=r.parent().filter(e.selectors.wrapper);b.each(r.data(v.attrs),function(e,t){b.isUndefined(e)?r.removeAttr(t):r.attr(t,e)});r.removeData(v.typeahead).removeData(v.www).removeData(v.attr).removeClass(e.classes.input);if(t.length){r.detach().insertAfter(t);t.remove()}}function _(e){var t,r;t=b.isJQuery(e)||b.isElement(e);r=t?y(e).first():[];return r.length?r:null}})()})}).call(this,s(508).setImmediate)},function(e,i,a){(function(e){var t=typeof e!=="undefined"&&e||typeof self!=="undefined"&&self||window;var r=Function.prototype.apply;i.setTimeout=function(){return new n(r.call(setTimeout,t,arguments),clearTimeout)};i.setInterval=function(){return new n(r.call(setInterval,t,arguments),clearInterval)};i.clearTimeout=i.clearInterval=function(e){if(e){e.close()}};function n(e,t){this._id=e;this._clearFn=t}n.prototype.unref=n.prototype.ref=function(){};n.prototype.close=function(){this._clearFn.call(t,this._id)};i.enroll=function(e,t){clearTimeout(e._idleTimeoutId);e._idleTimeout=t};i.unenroll=function(e){clearTimeout(e._idleTimeoutId);e._idleTimeout=-1};i._unrefActive=i.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;if(e>=0){t._idleTimeoutId=setTimeout(function e(){if(t._onTimeout)t._onTimeout()},e)}};a(509);i.setImmediate=typeof self!=="undefined"&&self.setImmediate||typeof e!=="undefined"&&e.setImmediate||this&&this.setImmediate;i.clearImmediate=typeof self!=="undefined"&&self.clearImmediate||typeof e!=="undefined"&&e.clearImmediate||this&&this.clearImmediate}).call(this,a(274))},function(e,t,r){(function(e,_){(function(n,i){"use strict";if(n.setImmediate){return}var a=1;var o={};var r=false;var s=n.document;var l;function e(e){if(typeof e!=="function"){e=new Function(""+e)}var t=new Array(arguments.length-1);for(var r=0;r<t.length;r++){t[r]=arguments[r+1]}var n={callback:e,args:t};o[a]=n;l(a);return a++}function u(e){delete o[e]}function c(e){var t=e.callback;var r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(i,r);break}}function f(e){if(r){setTimeout(f,0,e)}else{var t=o[e];if(t){r=true;try{c(t)}finally{u(e);r=false}}}}function t(){l=function e(t){_.nextTick(function(){f(t)})}}function h(){if(n.postMessage&&!n.importScripts){var e=true;var t=n.onmessage;n.onmessage=function(){e=false};n.postMessage("","*");n.onmessage=t;return e}}function d(){var r="setImmediate$"+Math.random()+"$";var e=function e(t){if(t.source===n&&typeof t.data==="string"&&t.data.indexOf(r)===0){f(+t.data.slice(r.length))}};if(n.addEventListener){n.addEventListener("message",e,false)}else{n.attachEvent("onmessage",e)}l=function e(t){n.postMessage(r+t,"*")}}function p(){var r=new MessageChannel;r.port1.onmessage=function(e){var t=e.data;f(t)};l=function e(t){r.port2.postMessage(t)}}function v(){var n=s.documentElement;l=function e(t){var r=s.createElement("script");r.onreadystatechange=function(){f(t);r.onreadystatechange=null;n.removeChild(r);r=null};n.appendChild(r)}}function g(){l=function e(t){setTimeout(f,0,t)}}var m=Object.getPrototypeOf&&Object.getPrototypeOf(n);m=m&&m.setTimeout?m:n;if({}.toString.call(n.process)==="[object process]"){t()}else if(h()){d()}else if(n.MessageChannel){p()}else if(s&&"onreadystatechange"in s.createElement("script")){v()}else{g()}m.setImmediate=e;m.clearImmediate=u})(typeof self==="undefined"?typeof e==="undefined"?this:e:self)}).call(this,r(274),r(510))},function(e,t){var r=e.exports={};var n;var i;function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){n=setTimeout}else{n=a}}catch(e){n=a}try{if(typeof clearTimeout==="function"){i=clearTimeout}else{i=o}}catch(e){i=o}})();function s(t){if(n===setTimeout){return setTimeout(t,0)}if((n===a||!n)&&setTimeout){n=setTimeout;return setTimeout(t,0)}try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}function l(t){if(i===clearTimeout){return clearTimeout(t)}if((i===o||!i)&&clearTimeout){i=clearTimeout;return clearTimeout(t)}try{return i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}var u=[];var c=false;var f;var h=-1;function d(){if(!c||!f){return}c=false;if(f.length){u=f.concat(u)}else{h=-1}if(u.length){p()}}function p(){if(c){return}var e=s(d);c=true;var t=u.length;while(t){f=u;u=[];while(++h<t){if(f){f[h].run()}}h=-1;t=u.length}f=null;c=false;l(e)}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}}u.push(new v(e,t));if(u.length===1&&!c){s(p)}};function v(e,t){this.fun=e;this.array=t}v.prototype.run=function(){this.fun.apply(null,this.array)};r.title="browser";r.browser=true;r.env={};r.argv=[];r.version="";r.versions={};function g(){}r.on=g;r.addListener=g;r.once=g;r.off=g;r.removeListener=g;r.removeAllListeners=g;r.emit=g;r.prependListener=g;r.prependOnceListener=g;r.listeners=function(e){return[]};r.binding=function(e){throw new Error("process.binding is not supported")};r.cwd=function(){return"/"};r.chdir=function(e){throw new Error("process.chdir is not supported")};r.umask=function(){return 0}},function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<div class="gmf-search">\n  <input type="text" ng-attr-placeholder="{{$ctrl.placeholder|translate}}"\n    class="form-control"\n    ng-model="$ctrl.inputValue"\n    ngeo-search="$ctrl.options"\n    ngeo-search-datasets="$ctrl.datasets"\n    ngeo-search-listeners="$ctrl.listeners">\n  <span class="gmf-clear-button ng-hide"\n    ng-hide="!$ctrl.clearButton || $ctrl.inputValue == \'\'"\n    ng-click="$ctrl.onClearButton()">\n  </span>\n</div>\n<span ng-if="$ctrl.colorChooser">\n  <span ng-show="$ctrl.displayColorPicker" ngeo-popover ngeo-popover-placement="bottom">\n    <button class="gmf-color-button fa fa-tint" ngeo-popover-anchor\n            data-original-title="{{\'Change the color of the search result\'|translate}}"></button>\n    <div ngeo-popover-content>\n      <div ngeo-colorpicker ngeo-colorpicker-color="$ctrl.color"></div>\n    </div>\n  </span>\n</span>\n'}return __p}},function(e,t){},function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<ul class="gmf-theme-selector">\n  <li\n      ng-repeat="theme in $ctrl.themes"\n      ng-click="$ctrl.setTheme(theme)"\n      ng-class="{\'gmf-theme-selector-active\': $ctrl.gmfThemeManager.getThemeName() == theme.name}">\n    <img class="gmf-thumb"\n         ng-src="{{::theme.icon}}" />\n    <span class="gmf-text">{{theme.name | translate}}</span>\n  </li>\n</ul>\n'}return __p}},function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<div\n  class="ngeo-googlestreetview-instructions"\n  ng-if="$ctrl.location === null"\n  translate>\n  Click on a road on the map to start StreetView.\n</div>\n<div\n  class="ngeo-googlestreetview-nodata"\n  ng-if="$ctrl.noDataAtLocation"\n  translate>\n  Street View data not found for this location.\n</div>\n'}return __p}},function(r,e,n){(function(t){/** @preserve jQuery.floatThead 2.1.2 - https://mkoryak.github.io/floatThead/ - Copyright (c) 2012 - 2018 Misha Koryak **/
// @license MIT
(function(ye){ye.floatThead=ye.floatThead||{};ye.floatThead.defaults={headerCellSelector:"tr:visible:first>*:visible",zIndex:1001,position:"auto",top:0,bottom:0,scrollContainer:function e(t){return ye([])},responsiveContainer:function e(t){return ye([])},getSizingRow:function e(t,r,n){return t.find("tbody tr:visible:first>*:visible")},floatTableClass:"floatThead-table",floatWrapperClass:"floatThead-wrapper",floatContainerClass:"floatThead-container",copyTableClass:true,autoReflow:false,debug:false,support:{bootstrap:true,datatables:true,jqueryUI:true,perfectScrollbar:true},floatContainerCss:{"overflow-x":"hidden"}};var be=function e(){var n={};var r=Object.prototype.hasOwnProperty,t=["Arguments","Function","String","Number","Date","RegExp"];n.has=function(e,t){return r.call(e,t)};n.keys=Object.keys||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var r in e){if(n.has(e,r))t.push(r)}return t};var i=0;n.uniqueId=function(e){var t=++i+"";return e?e+t:t};ye.each(t,function(){var t=this;n["is"+t]=function(e){return Object.prototype.toString.call(e)=="[object "+t+"]"}});n.debounce=function(r,n,i){var a,o,s,l,u;return function(){s=this;o=arguments;l=new Date;var e=function e(){var t=new Date-l;if(t<n){a=setTimeout(e,n-t)}else{a=null;if(!i)u=r.apply(s,o)}};var t=i&&!a;if(!a){a=setTimeout(e,n)}if(t)u=r.apply(s,o);return u}};return n}();var we=typeof MutationObserver!=="undefined";var Se=function(){for(var e=3,t=document.createElement("b"),r=t.all||[];e=1+e,t.innerHTML="\x3c!--[if gt IE "+e+"]><i><![endif]--\x3e",r[0];){}return 4<e?e:document.documentMode}();var e=/Gecko\//.test(navigator.userAgent);var Ce=/WebKit\//.test(navigator.userAgent);if(!(Se||e||Ce)){Se=11}var s=function e(){if(Ce){var t=ye("<div>").css("width",0).append(ye("<table>").css("max-width","100%").append(ye("<tr>").append(ye("<th>").append(ye("<div>").css("min-width",100).text("X")))));ye("body").append(t);var r=t.find("table").width()==0;t.remove();return r}return false};var Oe=!e&&!Se;var xe=ye(window);var Te=e&&window.matchMedia;if(!window.matchMedia||Te){var t=window.onbeforeprint;var r=window.onafterprint;window.onbeforeprint=function(){t&&t();xe.triggerHandler("beforeprint")};window.onafterprint=function(){r&&r();xe.triggerHandler("afterprint")}}function Ee(e,t){if(Se==8){var r=xe.width();var n=be.debounce(function(){var e=xe.width();if(r!=e){r=e;t()}},1);xe.on(e,n)}else{xe.on(e,be.debounce(t,1))}}function Me(e){var t=e[0];var r=t.parentElement;do{var n=window.getComputedStyle(r).getPropertyValue("overflow");if(n!="visible")break}while(r=r.parentElement);if(r==document.body){return ye([])}return ye(r)}function Ae(e){window&&window.console&&window.console.error&&window.console.error("jQuery.floatThead: "+e)}function ke(e){var t=e.getBoundingClientRect();return t.width||t.right-t.left}function je(){var e=document.createElement("scrolltester");e.style.cssText="width:100px;height:100px;overflow:scroll!important;position:absolute;top:-9999px;display:block";document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;document.body.removeChild(e);return t}function Ie(e){if(e.dataTableSettings){for(var t=0;t<e.dataTableSettings.length;t++){var r=e.dataTableSettings[t].nTable;if(e[0]==r){return true}}}return false}function De(e,t,r){var n=r?"outerWidth":"width";if(s&&e.css("max-width")){var i=0;if(r){i+=parseInt(e.css("borderLeft"),10);i+=parseInt(e.css("borderRight"),10)}for(var a=0;a<t.length;a++){i+=ke(t.get(a))}return i}else{return e[n]()}}ye.fn.floatThead=function(e){e=e||{};if(Se<8){return this}var me=null;if(be.isFunction(s)){s=s()}if(be.isString(e)){var i=e;var a=Array.prototype.slice.call(arguments,1);var o=this;this.filter("table").each(function(){var e=ye(this);var t=e.data("floatThead-lazy");if(t){e.floatThead(t)}var r=e.data("floatThead-attached");if(r&&be.isFunction(r[i])){var n=r[i].apply(this,a);if(n!==undefined){o=n}}});return o}var _e=ye.extend({},ye.floatThead.defaults||{},e);ye.each(e,function(e,t){if(!(e in ye.floatThead.defaults)&&_e.debug){Ae("Used ["+e+"] key to init plugin, but that param is not an option for the plugin. Valid options are: "+be.keys(ye.floatThead.defaults).join(", "))}});if(_e.debug){var t=ye.fn.jquery.split(".");if(parseInt(t[0],10)==1&&parseInt(t[1],10)<=7){Ae("jQuery version "+ye.fn.jquery+" detected! This plugin supports 1.8 or better, or 1.7.x with jQuery UI 1.8.24 -> http://jqueryui.com/resources/download/jquery-ui-1.8.24.zip")}}this.filter(":not(."+_e.floatTableClass+")").each(function(){var r=be.uniqueId();var y=ye(this);if(y.data("floatThead-attached")){return true}if(!y.is("table")){throw new Error('jQuery.floatThead must be run on a table element. ex: $("table").floatThead();')}we=_e.autoReflow&&we;var s=y.children("thead:first");var n=y.children("tbody:first");if(s.length==0||n.length==0){if(_e.debug){if(s.length==0){Ae("The thead element is missing.")}else{Ae("The tbody element is missing.")}}y.data("floatThead-lazy",_e);y.unbind("reflow").one("reflow",function(){y.floatThead(_e)});return}if(y.data("floatThead-lazy")){y.unbind("reflow")}y.data("floatThead-lazy",false);var i=true;var b,t;var w={vertical:0,horizontal:0};if(be.isFunction(je)){je=je()}var l=0;if(_e.scrollContainer===true){_e.scrollContainer=Me}var S=_e.scrollContainer(y)||ye([]);var C=S.length>0;var O=C?ye([]):_e.responsiveContainer(y)||ye([]);var x=J();var T=null;if(_e.position==="auto"){T=null}else if(_e.position==="fixed"){T=false}else if(_e.position==="absolute"){T=true}else if(_e.debug){Ae('Invalid value given to "position" option, valid is "fixed", "absolute" and "auto". You passed: ',_e.position)}if(T==null){T=C}var a=y.find("caption");var E=a.length==1;if(E){var M=(a.css("caption-side")||a.attr("align")||"top")==="top"}var o=ye("<fthfoot>").css({display:"table-footer-group","border-spacing":0,height:0,"border-collapse":"collapse",visibility:"hidden"});var A=false;var u=ye([]);var k=Se<=9&&!C&&T;var c=ye("<table/>");var f=ye("<colgroup/>");var h=y.children("colgroup:first");var d=true;if(h.length==0){h=ye("<colgroup/>");d=false}var p=ye("<fthtr>").css({display:"table-row","border-spacing":0,height:0,"border-collapse":"collapse"});var j=ye("<div>").css(_e.floatContainerCss).attr("aria-hidden","true");var I=false;var v=ye("<thead/>");var g=ye('<tr class="size-row" aria-hidden="true"/>');var m=ye([]);var _=ye([]);var D=ye([]);var P=ye([]);v.append(g);y.prepend(h);if(Oe){o.append(p);y.append(o)}c.append(f);j.append(c);if(_e.copyTableClass){c.attr("class",y.attr("class"))}c.attr({cellpadding:y.attr("cellpadding"),cellspacing:y.attr("cellspacing"),border:y.attr("border")});var e=y.css("display");c.css({borderCollapse:y.css("borderCollapse"),border:y.css("border"),display:e});if(!C){c.css("width","auto")}if(e==="none"){I=true}c.addClass(_e.floatTableClass).css({margin:0,"border-bottom-width":0});if(T){var R=function e(t,r){var n=t.css("position");var i=n=="relative"||n=="absolute";var a=t;if(!i||r){var o={paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight")};j.css(o);a=t.data("floatThead-containerWrap")||t.wrap(ye("<div>").addClass(_e.floatWrapperClass).css({position:"relative",clear:"both"})).parent();t.data("floatThead-containerWrap",a);A=true}return a};if(C){u=R(S,true);u.prepend(j)}else{u=R(y);y.before(j)}}else{y.before(j)}j.css({position:T?"absolute":"fixed",marginTop:0,top:T?0:"auto",zIndex:_e.zIndex,willChange:"transform"});j.addClass(_e.floatContainerClass);W();var L={"table-layout":"fixed"};var N={"table-layout":y.css("tableLayout")||"auto"};var $=y[0].style.width||"";var F=y.css("minWidth")||"";function G(e){return e+".fth-"+r+".floatTHead"}function U(){var e=0;s.children("tr:visible").each(function(){e+=ye(this).outerHeight(true)});if(y.css("border-collapse")=="collapse"){var t=parseInt(y.css("border-top-width"),10);var r=parseInt(y.find("thead tr:first").find(">*:first").css("border-top-width"),10);if(t>r){e-=t/2}}g.outerHeight(e);m.outerHeight(e)}function H(){var e=De(y,P,true);var t=x?O:S;var r=t.length?ke(t[0]):e;var n=t.css("overflow-y")!="hidden"?r-w.vertical:r;j.width(n);if(C){var i=100*e/n;c.css("width",i+"%")}else{c.outerWidth(e)}}function W(){b=(be.isFunction(_e.top)?_e.top(y):_e.top)||0;t=(be.isFunction(_e.bottom)?_e.bottom(y):_e.bottom)||0}function Y(){var e;var t=s.find(_e.headerCellSelector);if(d){e=h.find("col").length}else{e=0;t.each(function(){e+=parseInt(ye(this).attr("colspan")||1,10)})}if(e!==l){l=e;var r=[],n=[],i=[],a;for(var o=0;o<e;o++){a=t.eq(o).text();r.push('<th class="floatThead-col" aria-label="'+a+'"/>');n.push("<col/>");i.push(ye("<fthtd>").css({display:"table-cell",height:0,width:"auto"}))}n=n.join("");r=r.join("");if(Oe){p.empty();p.append(i);P=p.find("fthtd")}g.html(r);m=g.find("th");if(!d){h.html(n)}_=h.find("col");f.html(n);D=f.find("col")}return e}function V(){if(!i){i=true;if(T){var e=De(y,P,true);var t=u.width();if(e>t){y.css("minWidth",e)}}y.css(L);c.css(L);c.append(s);n.before(v);U()}}function q(){if(i){i=false;if(T){y.width($)}v.detach();y.prepend(s);y.css(N);c.css(N);y.css("minWidth",F);y.css("minWidth",De(y,P))}}var z=false;function B(e){if(z!=e){z=e;y.triggerHandler("floatThead",[e,j])}}function K(e){if(T!=e){T=e;j.css({position:T?"absolute":"fixed"})}}function X(e,t,r,n){if(Oe){return r}else if(n){return _e.getSizingRow(e,t,r)}else{return t}}function Z(){var n;var i=Y();return function(){var e=j.scrollLeft();_=h.find("col");var t=X(y,_,P,Se);if(t.length==i&&i>0){if(!d){for(n=0;n<i;n++){_.eq(n).css("width","")}}q();var r=[];for(n=0;n<i;n++){r[n]=ke(t.get(n))}for(n=0;n<i;n++){D.eq(n).width(r[n]);_.eq(n).width(r[n])}V()}else{c.append(s);y.css(N);c.css(N);U()}j.scrollLeft(e);y.triggerHandler("reflowed",[j])}}function Q(e){var t=S.css("border-"+e+"-width");var r=0;if(t&&~t.indexOf("px")){r=parseInt(t,10)}return r}function J(){return O.css("overflow-x")=="auto"}function ee(){var o=S.scrollTop();var s;var l=0;var u=E?a.outerHeight(true):0;var c=M?u:-u;var f=j.height();var h=y.offset();var d=0;var p=0;if(C){var e=S.offset();l=h.top-e.top+o;if(E&&M){l+=u}d=Q("left");p=Q("top");l-=p}else{s=h.top-b-f+t+w.horizontal}var v=xe.scrollTop();var g=xe.scrollLeft();var m=function e(){return(J()?O:S).scrollLeft()||0};var _=m();return function(e){x=J();var t=y[0].offsetWidth<=0&&y[0].offsetHeight<=0;if(!t&&I){I=false;setTimeout(function(){y.triggerHandler("reflow")},1);return null}if(t){I=true;if(!T){return null}}if(e=="windowScroll"){v=xe.scrollTop();g=xe.scrollLeft()}else if(e=="containerScroll"){if(O.length){if(!x){return}_=O.scrollLeft()}else{o=S.scrollTop();_=S.scrollLeft()}}else if(e!="init"){v=xe.scrollTop();g=xe.scrollLeft();o=S.scrollTop();_=m()}if(Ce&&(v<0||g<0)){return}if(k){if(e=="windowScrollDone"){K(true)}else{K(false)}}else if(e=="windowScrollDone"){return null}h=y.offset();if(E&&M){h.top+=u}var r,n;var i=y.outerHeight();if(C&&T){if(l>=o){var a=l-o+p;r=a>0?a:0;B(false)}else{r=A?p:o;B(true)}n=d}else if(!C&&T){if(v>s+i+c){r=i-f+c}else if(h.top>=v+b){r=0;q();B(false)}else{r=b+v-h.top+l+(M?u:0);V();B(true)}n=_}else if(C&&!T){if(l>o||o-l>i){r=h.top-v;q();B(false)}else{r=h.top+o-v-l;V();B(true)}n=h.left+_-g}else if(!C&&!T){if(v>s+i+c){r=i+b-v+s+c}else if(h.top>v+b){r=h.top-v;V();B(false)}else{r=b;B(true)}n=h.left+_-g}return{top:Math.round(r),left:Math.round(n)}}}function te(){var o=null;var s=null;var l=null;return function(e,t,r){if(e!=null&&(o!=e.top||s!=e.left)){if(Se===8){j.css({top:e.top,left:e.left})}else{var n="translateX("+e.left+"px) translateY("+e.top+"px)";var i={"-webkit-transform":n,"-moz-transform":n,"-ms-transform":n,"-o-transform":n,transform:n,top:0};i[/rtl/i.test(document.documentElement.dir||"")?"right":"left"]=0;j.css(i)}o=e.top;s=e.left}if(t){H()}if(r){U()}var a=(x?O:S).scrollLeft();if(!T||l!=a){j.scrollLeft(a);l=a}}}function re(){if(S.length){if(_e.support&&_e.support.perfectScrollbar&&S.data().perfectScrollbar){w={horizontal:0,vertical:0}}else{if(S.css("overflow-x")=="scroll"){w.horizontal=je}else{var e=S.width(),t=De(y,P);var r=n<i?je:0;w.horizontal=e-r<t?je:0}if(S.css("overflow-y")=="scroll"){w.vertical=je}else{var n=S.height(),i=y.height();var a=e<t?je:0;w.vertical=n-a<i?je:0}}}}re();var ne;var ie=function e(){ne=Z();ne()};ie();var ae=ee();var oe=te();oe(ae("init"),true);var se=be.debounce(function(){oe(ae("windowScrollDone"),false)},1);var le=function e(){oe(ae("windowScroll"),false);if(k){se()}};var ue=function e(){oe(ae("containerScroll"),false)};var ce=function e(){if(y.is(":hidden")){return}W();re();ie();ae=ee();oe=te();oe(ae("resize"),true,true)};var fe=be.debounce(function(){if(y.is(":hidden")){return}re();W();ie();ae=ee();oe(ae("reflow"),true,true)},1);var he=function e(){q()};var de=function e(){V()};var pe=function e(t){if(t.matches){he()}else{de()}};var ve=null;if(window.matchMedia&&window.matchMedia("print").addListener&&!Te){ve=window.matchMedia("print");ve.addListener(pe)}else{xe.on("beforeprint",he);xe.on("afterprint",de)}if(C){if(T){S.on(G("scroll"),ue)}else{S.on(G("scroll"),ue);xe.on(G("scroll"),le)}}else{O.on(G("scroll"),ue);xe.on(G("scroll"),le)}xe.on(G("load"),fe);Ee(G("resize"),ce);y.on("reflow",fe);if(_e.support&&_e.support.datatables&&Ie(y)){y.on("filter",fe).on("sort",fe).on("page",fe)}if(_e.support&&_e.support.bootstrap){xe.on(G("shown.bs.tab"),fe)}if(_e.support&&_e.support.jqueryUI){xe.on(G("tabsactivate"),fe)}if(we){var ge=null;if(be.isFunction(_e.autoReflow)){ge=_e.autoReflow(y,S)}if(!ge){ge=S.length?S[0]:y[0]}me=new MutationObserver(function(e){var t=function e(t){return t&&t[0]&&(t[0].nodeName=="THEAD"||t[0].nodeName=="TD"||t[0].nodeName=="TH")};for(var r=0;r<e.length;r++){if(!(t(e[r].addedNodes)||t(e[r].removedNodes))){fe();break}}});me.observe(ge,{childList:true,subtree:true})}y.data("floatThead-attached",{destroy:function e(){var t=".fth-"+r;q();y.css(N);h.remove();Oe&&o.remove();if(v.parent().length){v.replaceWith(s)}B(false);if(we){me.disconnect();me=null}y.off("reflow reflowed");S.off(t);O.off(t);if(A){if(S.length){S.unwrap()}else{y.unwrap()}}if(C){S.data("floatThead-containerWrap",false)}else{y.data("floatThead-containerWrap",false)}y.css("minWidth",F);j.remove();y.data("floatThead-attached",false);xe.off(t);if(ve){ve.removeListener(pe)}he=de=function e(){};return function e(){return y.floatThead(_e)}},reflow:function e(){fe()},setHeaderHeight:function e(){U()},getFloatContainer:function e(){return j},getRowGroups:function e(){if(i){return j.find(">table>thead").add(y.children("tbody,tfoot"))}else{return y.children("thead,tbody,tfoot")}}})});return this}})(function(){var e=t;if(true&&r.exports&&!e){e=n(27)}return e}())}).call(this,n(27))},function(e,t,r){(function(o){
/**
 * floatThead wrapper for AngularJS
 * @version v0.1.0 - 2015-10-25
 * @link https://github.com/brandon-barker/angular-floatThead
 * @author Brandon Barker
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
(function(){"use strict";angular.module("floatThead",[]).directive("floatThead",["$timeout","$log",e]);function e(i,a){var e={require:"?ngModel",scope:{floatThead:"=?",floatTheadEnabled:"=?"},controller:["$scope","$element","$attrs",function(e,t,r){if(!r.hasOwnProperty("floatTheadEnabled")){e.floatTheadEnabled=r.floatTheadEnabled=true}if(!r.hasOwnProperty("floatThead")||r.floatThead===""){e.floatThead=r.floatThead={}}}],link:t,restrict:"A"};return e;function t(r,n,e,t){r.$watch("floatTheadEnabled",function(e){if(e===true){if(angular.isObject(r.floatThead)){o(n).floatThead(r.floatThead)}}else{o(n).floatThead("destroy")}});r.$watch("floatThead",function(e,t){if(e===t||!r.floatTheadEnabled){return}o(n).floatThead("destroy");if(angular.isObject(e)){o(n).floatThead(e)}},true);if(t){t.$formatters.push(function(){if(r.floatTheadEnabled&&angular.isObject(r.floatThead)){i(function(){o(n).floatThead("reflow")})}})}else{a.info("floatThead: ngModel not provided!")}n.bind("update",function(){i(function(){o(n).floatThead("reflow")},0)});n.bind("$destroy",function(){o(n).floatThead("destroy")})}}})()}).call(this,r(27))},function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<div class="ngeo-grid-table-container">\n  <table float-thead="ctrl.floatTheadConfig" ng-model="ctrl.configuration.data"\n         class="table table-bordered table-striped table-hover">\n    <thead class="table-header">\n      <tr>\n        <th ng-repeat="columnDefs in ctrl.configuration.columnDefs"\n            ng-click="ctrl.sort(columnDefs.name)" ng-bind-html="columnDefs.name | ngeoTrustHtml | translate">\n          <i ng-show="ctrl.sortedBy !== columnDefs.name" class="fa fa-fw"></i>\n          <i ng-show="ctrl.sortedBy === columnDefs.name && ctrl.sortAscending === true" class="fa fa-caret-up"></i>\n          <i ng-show="ctrl.sortedBy === columnDefs.name && ctrl.sortAscending === false" class="fa fa-caret-down"></i>\n        </th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr ng-repeat="attributes in ctrl.configuration.data"\n          ng-class="[\'row-\' + ctrl.configuration.getRowUid(attributes), ctrl.configuration.isRowSelected(attributes) ? \'ngeo-grid-active\': \'\']"\n          ng-click="ctrl.clickRow(attributes, $event)" ng-mousedown="ctrl.preventTextSelection($event)">\n        <td ng-repeat="columnDefs in ctrl.configuration.columnDefs" ng-bind-html="attributes[columnDefs.name] | ngeoTrustHtmlAuto"></td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n'}return __p}},function(t,r,n){var i,a,o;(function(e){if(true){!(a=[n(27),n(296),n(389),n(388),n(391),n(117),n(247)],i=e,o=typeof i==="function"?i.apply(r,a):i,o!==undefined&&(t.exports=o))}else{}})(function(p){return p.widget("ui.sortable",p.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function e(t,r,n){return t>=r&&t<r+n},_isFloating:function e(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function e(){this.containerCache={};this._addClass("ui-sortable");this.refresh();this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=true},_setOption:function e(t,r){this._super(t,r);if(t==="handle"){this._setHandleClassName()}},_setHandleClassName:function e(){var t=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle");p.each(this.items,function(){t._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function e(){this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--){this.items[t].item.removeData(this.widgetName+"-item")}return this},_mouseCapture:function e(t,r){var n=null,i=false,a=this;if(this.reverting){return false}if(this.options.disabled||this.options.type==="static"){return false}this._refreshItems(t);p(t.target).parents().each(function(){if(p.data(this,a.widgetName+"-item")===a){n=p(this);return false}});if(p.data(t.target,a.widgetName+"-item")===a){n=p(t.target)}if(!n){return false}if(this.options.handle&&!r){p(this.options.handle,n).find("*").addBack().each(function(){if(this===t.target){i=true}});if(!i){return false}}this.currentItem=n;this._removeCurrentsFromItems();return true},_mouseStart:function e(t,r,n){var i,a,o=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(t);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};p.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(t);this.originalPageX=t.pageX;this.originalPageY=t.pageY;o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!==this.currentItem[0]){this.currentItem.hide()}this._createPlaceholder();if(o.containment){this._setContainment()}if(o.cursor&&o.cursor!=="auto"){a=this.document.find("body");this.storedCursor=a.css("cursor");a.css("cursor",o.cursor);this.storedStylesheet=p("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(a)}if(o.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity")}this.helper.css("opacity",o.opacity)}if(o.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex")}this.helper.css("zIndex",o.zIndex)}if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){this.overflowOffset=this.scrollParent.offset()}this._trigger("start",t,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions()}if(!n){for(i=this.containers.length-1;i>=0;i--){this.containers[i]._trigger("activate",t,this._uiHash(this))}}if(p.ui.ddmanager){p.ui.ddmanager.current=this}if(p.ui.ddmanager&&!o.dropBehaviour){p.ui.ddmanager.prepareOffsets(this,t)}this.dragging=true;this._addClass(this.helper,"ui-sortable-helper");this._mouseDrag(t);return true},_mouseDrag:function e(t){var r,n,i,a,o=this.options,s=false;this.position=this._generatePosition(t);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs}if(this.options.scroll){if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity){this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+o.scrollSpeed}else if(t.pageY-this.overflowOffset.top<o.scrollSensitivity){this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-o.scrollSpeed}if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity){this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+o.scrollSpeed}else if(t.pageX-this.overflowOffset.left<o.scrollSensitivity){this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-o.scrollSpeed}}else{if(t.pageY-this.document.scrollTop()<o.scrollSensitivity){s=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed)}else if(this.window.height()-(t.pageY-this.document.scrollTop())<o.scrollSensitivity){s=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)}if(t.pageX-this.document.scrollLeft()<o.scrollSensitivity){s=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed)}else if(this.window.width()-(t.pageX-this.document.scrollLeft())<o.scrollSensitivity){s=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed)}}if(s!==false&&p.ui.ddmanager&&!o.dropBehaviour){p.ui.ddmanager.prepareOffsets(this,t)}}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px"}for(r=this.items.length-1;r>=0;r--){n=this.items[r];i=n.item[0];a=this._intersectsWithPointer(n);if(!a){continue}if(n.instance!==this.currentContainer){continue}if(i!==this.currentItem[0]&&this.placeholder[a===1?"next":"prev"]()[0]!==i&&!p.contains(this.placeholder[0],i)&&(this.options.type==="semi-dynamic"?!p.contains(this.element[0],i):true)){this.direction=a===1?"down":"up";if(this.options.tolerance==="pointer"||this._intersectsWithSides(n)){this._rearrange(t,n)}else{break}this._trigger("change",t,this._uiHash());break}}this._contactContainers(t);if(p.ui.ddmanager){p.ui.ddmanager.drag(this,t)}this._trigger("sort",t,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function e(t,r){if(!t){return}if(p.ui.ddmanager&&!this.options.dropBehaviour){p.ui.ddmanager.drop(this,t)}if(this.options.revert){var n=this,i=this.placeholder.offset(),a=this.options.axis,o={};if(!a||a==="x"){o.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)}if(!a||a==="y"){o.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)}this.reverting=true;p(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else{this._clear(t,r)}return false},cancel:function e(){if(this.dragging){this._mouseUp(new p.Event("mouseup",{target:null}));if(this.options.helper==="original"){this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper")}else{this.currentItem.show()}for(var t=this.containers.length-1;t>=0;t--){this.containers[t]._trigger("deactivate",null,this._uiHash(this));if(this.containers[t].containerCache.over){this.containers[t]._trigger("out",null,this._uiHash(this));this.containers[t].containerCache.over=0}}}if(this.placeholder){if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0])}if(this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove()}p.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){p(this.domPosition.prev).after(this.currentItem)}else{p(this.domPosition.parent).prepend(this.currentItem)}}return this},serialize:function e(t){var r=this._getItemsAsjQuery(t&&t.connected),n=[];t=t||{};p(r).each(function(){var e=(p(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);if(e){n.push((t.key||e[1]+"[]")+"="+(t.key&&t.expression?e[1]:e[2]))}});if(!n.length&&t.key){n.push(t.key+"=")}return n.join("&")},toArray:function e(t){var r=this._getItemsAsjQuery(t&&t.connected),n=[];t=t||{};r.each(function(){n.push(p(t.item||this).attr(t.attribute||"id")||"")});return n},_intersectsWith:function e(t){var r=this.positionAbs.left,n=r+this.helperProportions.width,i=this.positionAbs.top,a=i+this.helperProportions.height,o=t.left,s=o+t.width,l=t.top,u=l+t.height,c=this.offset.click.top,f=this.offset.click.left,h=this.options.axis==="x"||i+c>l&&i+c<u,d=this.options.axis==="y"||r+f>o&&r+f<s,p=h&&d;if(this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]){return p}else{return o<r+this.helperProportions.width/2&&n-this.helperProportions.width/2<s&&l<i+this.helperProportions.height/2&&a-this.helperProportions.height/2<u}},_intersectsWithPointer:function e(t){var r,n,i=this.options.axis==="x"||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),a=this.options.axis==="y"||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),o=i&&a;if(!o){return false}r=this._getDragVerticalDirection();n=this._getDragHorizontalDirection();return this.floating?n==="right"||r==="down"?2:1:r&&(r==="down"?2:1)},_intersectsWithSides:function e(t){var r=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();if(this.floating&&a){return a==="right"&&n||a==="left"&&!n}else{return i&&(i==="down"&&r||i==="up"&&!r)}},_getDragVerticalDirection:function e(){var t=this.positionAbs.top-this.lastPositionAbs.top;return t!==0&&(t>0?"down":"up")},_getDragHorizontalDirection:function e(){var t=this.positionAbs.left-this.lastPositionAbs.left;return t!==0&&(t>0?"right":"left")},refresh:function e(t){this._refreshItems(t);this._setHandleClassName();this.refreshPositions();return this},_connectWith:function e(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function e(t){var r,n,i,a,o=[],s=[],l=this._connectWith();if(l&&t){for(r=l.length-1;r>=0;r--){i=p(l[r],this.document[0]);for(n=i.length-1;n>=0;n--){a=p.data(i[n],this.widgetFullName);if(a&&a!==this&&!a.options.disabled){s.push([p.isFunction(a.options.items)?a.options.items.call(a.element):p(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a])}}}}s.push([p.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):p(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);function u(){o.push(this)}for(r=s.length-1;r>=0;r--){s[r][0].each(u)}return p(o)},_removeCurrentsFromItems:function e(){var r=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=p.grep(this.items,function(e){for(var t=0;t<r.length;t++){if(r[t]===e.item[0]){return false}}return true})},_refreshItems:function e(t){this.items=[];this.containers=[this];var r,n,i,a,o,s,l,u,c=this.items,f=[[p.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):p(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready){for(r=h.length-1;r>=0;r--){i=p(h[r],this.document[0]);for(n=i.length-1;n>=0;n--){a=p.data(i[n],this.widgetFullName);if(a&&a!==this&&!a.options.disabled){f.push([p.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):p(a.options.items,a.element),a]);this.containers.push(a)}}}}for(r=f.length-1;r>=0;r--){o=f[r][1];s=f[r][0];for(n=0,u=s.length;n<u;n++){l=p(s[n]);l.data(this.widgetName+"-item",o);c.push({item:l,instance:o,width:0,height:0,left:0,top:0})}}},refreshPositions:function e(t){this.floating=this.items.length?this.options.axis==="x"||this._isFloating(this.items[0].item):false;if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()}var r,n,i,a;for(r=this.items.length-1;r>=0;r--){n=this.items[r];if(n.instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]){continue}i=this.options.toleranceElement?p(this.options.toleranceElement,n.item):n.item;if(!t){n.width=i.outerWidth();n.height=i.outerHeight()}a=i.offset();n.left=a.left;n.top=a.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(r=this.containers.length-1;r>=0;r--){a=this.containers[r].element.offset();this.containers[r].containerCache.left=a.left;this.containers[r].containerCache.top=a.top;this.containers[r].containerCache.width=this.containers[r].element.outerWidth();this.containers[r].containerCache.height=this.containers[r].element.outerHeight()}}return this},_createPlaceholder:function e(n){n=n||this;var i,a=n.options;if(!a.placeholder||a.placeholder.constructor===String){i=a.placeholder;a.placeholder={element:function e(){var t=n.currentItem[0].nodeName.toLowerCase(),e=p("<"+t+">",n.document[0]);n._addClass(e,"ui-sortable-placeholder",i||n.currentItem[0].className)._removeClass(e,"ui-sortable-helper");if(t==="tbody"){n._createTrPlaceholder(n.currentItem.find("tr").eq(0),p("<tr>",n.document[0]).appendTo(e))}else if(t==="tr"){n._createTrPlaceholder(n.currentItem,e)}else if(t==="img"){e.attr("src",n.currentItem.attr("src"))}if(!i){e.css("visibility","hidden")}return e},update:function e(t,r){if(i&&!a.forcePlaceholderSize){return}if(!r.height()){r.height(n.currentItem.innerHeight()-parseInt(n.currentItem.css("paddingTop")||0,10)-parseInt(n.currentItem.css("paddingBottom")||0,10))}if(!r.width()){r.width(n.currentItem.innerWidth()-parseInt(n.currentItem.css("paddingLeft")||0,10)-parseInt(n.currentItem.css("paddingRight")||0,10))}}}}n.placeholder=p(a.placeholder.element.call(n.element,n.currentItem));n.currentItem.after(n.placeholder);a.placeholder.update(n,n.placeholder)},_createTrPlaceholder:function e(t,r){var n=this;t.children().each(function(){p("<td>&#160;</td>",n.document[0]).attr("colspan",p(this).attr("colspan")||1).appendTo(r)})},_contactContainers:function e(t){var r,n,i,a,o,s,l,u,c,f,h=null,d=null;for(r=this.containers.length-1;r>=0;r--){if(p.contains(this.currentItem[0],this.containers[r].element[0])){continue}if(this._intersectsWith(this.containers[r].containerCache)){if(h&&p.contains(this.containers[r].element[0],h.element[0])){continue}h=this.containers[r];d=r}else{if(this.containers[r].containerCache.over){this.containers[r]._trigger("out",t,this._uiHash(this));this.containers[r].containerCache.over=0}}}if(!h){return}if(this.containers.length===1){if(!this.containers[d].containerCache.over){this.containers[d]._trigger("over",t,this._uiHash(this));this.containers[d].containerCache.over=1}}else{i=1e4;a=null;c=h.floating||this._isFloating(this.currentItem);o=c?"left":"top";s=c?"width":"height";f=c?"pageX":"pageY";for(n=this.items.length-1;n>=0;n--){if(!p.contains(this.containers[d].element[0],this.items[n].item[0])){continue}if(this.items[n].item[0]===this.currentItem[0]){continue}l=this.items[n].item.offset()[o];u=false;if(t[f]-l>this.items[n][s]/2){u=true}if(Math.abs(t[f]-l)<i){i=Math.abs(t[f]-l);a=this.items[n];this.direction=u?"up":"down"}}if(!a&&!this.options.dropOnEmpty){return}if(this.currentContainer===this.containers[d]){if(!this.currentContainer.containerCache.over){this.containers[d]._trigger("over",t,this._uiHash());this.currentContainer.containerCache.over=1}return}a?this._rearrange(t,a,null,true):this._rearrange(t,null,this.containers[d].element,true);this._trigger("change",t,this._uiHash());this.containers[d]._trigger("change",t,this._uiHash(this));this.currentContainer=this.containers[d];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[d]._trigger("over",t,this._uiHash(this));this.containers[d].containerCache.over=1}},_createHelper:function e(t){var r=this.options,n=p.isFunction(r.helper)?p(r.helper.apply(this.element[0],[t,this.currentItem])):r.helper==="clone"?this.currentItem.clone():this.currentItem;if(!n.parents("body").length){p(r.appendTo!=="parent"?r.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0])}if(n[0]===this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}}if(!n[0].style.width||r.forceHelperSize){n.width(this.currentItem.width())}if(!n[0].style.height||r.forceHelperSize){n.height(this.currentItem.height())}return n},_adjustOffsetFromHelper:function e(t){if(typeof t==="string"){t=t.split(" ")}if(p.isArray(t)){t={left:+t[0],top:+t[1]||0}}if("left"in t){this.offset.click.left=t.left+this.margins.left}if("right"in t){this.offset.click.left=this.helperProportions.width-t.right+this.margins.left}if("top"in t){this.offset.click.top=t.top+this.margins.top}if("bottom"in t){this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top}},_getParentOffset:function e(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==this.document[0]&&p.contains(this.scrollParent[0],this.offsetParent[0])){t.left+=this.scrollParent.scrollLeft();t.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&p.ui.ie){t={top:0,left:0}}return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function e(){if(this.cssPosition==="relative"){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function e(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function e(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function e(){var t,r,n,i=this.options;if(i.containment==="parent"){i.containment=this.helper[0].parentNode}if(i.containment==="document"||i.containment==="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,i.containment==="document"?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,(i.containment==="document"?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(i.containment)){t=p(i.containment)[0];r=p(i.containment).offset();n=p(t).css("overflow")!=="hidden";this.containment=[r.left+(parseInt(p(t).css("borderLeftWidth"),10)||0)+(parseInt(p(t).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(p(t).css("borderTopWidth"),10)||0)+(parseInt(p(t).css("paddingTop"),10)||0)-this.margins.top,r.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(p(t).css("borderLeftWidth"),10)||0)-(parseInt(p(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(p(t).css("borderTopWidth"),10)||0)-(parseInt(p(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function e(t,r){if(!r){r=this.position}var n=t==="absolute"?1:-1,i=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&p.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,a=/(html|body)/i.test(i[0].tagName);return{top:r.top+this.offset.relative.top*n+this.offset.parent.top*n-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():a?0:i.scrollTop())*n,left:r.left+this.offset.relative.left*n+this.offset.parent.left*n-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():a?0:i.scrollLeft())*n}},_generatePosition:function e(t){var r,n,i=this.options,a=t.pageX,o=t.pageY,s=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&p.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,l=/(html|body)/i.test(s[0].tagName);if(this.cssPosition==="relative"&&!(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}if(this.originalPosition){if(this.containment){if(t.pageX-this.offset.click.left<this.containment[0]){a=this.containment[0]+this.offset.click.left}if(t.pageY-this.offset.click.top<this.containment[1]){o=this.containment[1]+this.offset.click.top}if(t.pageX-this.offset.click.left>this.containment[2]){a=this.containment[2]+this.offset.click.left}if(t.pageY-this.offset.click.top>this.containment[3]){o=this.containment[3]+this.offset.click.top}}if(i.grid){r=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1];o=this.containment?r-this.offset.click.top>=this.containment[1]&&r-this.offset.click.top<=this.containment[3]?r:r-this.offset.click.top>=this.containment[1]?r-i.grid[1]:r+i.grid[1]:r;n=this.originalPageX+Math.round((a-this.originalPageX)/i.grid[0])*i.grid[0];a=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-i.grid[0]:n+i.grid[0]:n}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():l?0:s.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():l?0:s.scrollLeft())}},_rearrange:function e(t,r,n,i){n?n[0].appendChild(this.placeholder[0]):r.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?r.item[0]:r.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var a=this.counter;this._delay(function(){if(a===this.counter){this.refreshPositions(!i)}})},_clear:function e(t,r){this.reverting=false;var n,i=[];if(!this._noFinalSort&&this.currentItem.parent().length){this.placeholder.before(this.currentItem)}this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(n in this._storedCSS){if(this._storedCSS[n]==="auto"||this._storedCSS[n]==="static"){this._storedCSS[n]=""}}this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper")}else{this.currentItem.show()}if(this.fromOutside&&!r){i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))})}if((this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!r){i.push(function(e){this._trigger("update",e,this._uiHash())})}if(this!==this.currentContainer){if(!r){i.push(function(e){this._trigger("remove",e,this._uiHash())});i.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer));i.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer))}}function a(t,r,n){return function(e){n._trigger(t,e,r._uiHash(r))}}for(n=this.containers.length-1;n>=0;n--){if(!r){i.push(a("deactivate",this,this.containers[n]))}if(this.containers[n].containerCache.over){i.push(a("out",this,this.containers[n]));this.containers[n].containerCache.over=0}}if(this.storedCursor){this.document.find("body").css("cursor",this.storedCursor);this.storedStylesheet.remove()}if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity)}if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex)}this.dragging=false;if(!r){this._trigger("beforeStop",t,this._uiHash())}this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(!this.cancelHelperRemoval){if(this.helper[0]!==this.currentItem[0]){this.helper.remove()}this.helper=null}if(!r){for(n=0;n<i.length;n++){i[n].call(this,t)}this._trigger("stop",t,this._uiHash())}this.fromOutside=false;return!this.cancelHelperRemoval},_trigger:function e(){if(p.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel()}},_uiHash:function e(t){var r=t||this;return{helper:r.helper,placeholder:r.placeholder||p([]),position:r.position,originalPosition:r.originalPosition,offset:r.positionAbs,item:r.currentItem,sender:t?t.element:null}}})})},,,,,,,,,,,,,,,,,,function(t,r,n){var i,a,o;(function(e){if(true){!(a=[n(27),n(296),n(537),n(390),n(117),n(247)],i=e,o=typeof i==="function"?i.apply(r,a):i,o!==undefined&&(t.exports=o))}else{}})(function(y){y.widget("ui.resizable",y.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function e(t){return parseFloat(t)||0},_isNumber:function e(t){return!isNaN(parseFloat(t))},_hasScroll:function e(t,r){if(y(t).css("overflow")==="hidden"){return false}var n=r&&r==="left"?"scrollLeft":"scrollTop",i=false;if(t[n]>0){return true}t[n]=1;i=t[n]>0;t[n]=0;return i},_create:function e(){var t,r=this.options,n=this;this._addClass("ui-resizable");y.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)){this.element.wrap(y("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance"));this.elementIsWrapper=true;t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")};this.element.css(t);this.originalElement.css("margin",0);this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css(t);this._proportionallyResize()}this._setupHandles();if(r.autoHide){y(this.element).on("mouseenter",function(){if(r.disabled){return}n._removeClass("ui-resizable-autohide");n._handles.show()}).on("mouseleave",function(){if(r.disabled){return}if(!n.resizing){n._addClass("ui-resizable-autohide");n._handles.hide()}})}this._mouseInit()},_destroy:function e(){this._mouseDestroy();var t,e=function e(t){y(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){e(this.element);t=this.element;this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t);t.remove()}this.originalElement.css("resize",this.originalResizeStyle);e(this.originalElement);return this},_setOption:function e(t,r){this._super(t,r);switch(t){case"handles":this._removeHandles();this._setupHandles();break;default:break}},_setupHandles:function e(){var t=this.options,r,n,i,a,o,s=this;this.handles=t.handles||(!y(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});this._handles=y();if(this.handles.constructor===String){if(this.handles==="all"){this.handles="n,e,s,w,se,sw,ne,nw"}i=this.handles.split(",");this.handles={};for(n=0;n<i.length;n++){r=y.trim(i[n]);a="ui-resizable-"+r;o=y("<div>");this._addClass(o,"ui-resizable-handle "+a);o.css({zIndex:t.zIndex});this.handles[r]=".ui-resizable-"+r;this.element.append(o)}}this._renderAxis=function(e){var t,r,n,i;e=e||this.element;for(t in this.handles){if(this.handles[t].constructor===String){this.handles[t]=this.element.children(this.handles[t]).first().show()}else if(this.handles[t].jquery||this.handles[t].nodeType){this.handles[t]=y(this.handles[t]);this._on(this.handles[t],{mousedown:s._mouseDown})}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)){r=y(this.handles[t],this.element);i=/sw|ne|nw|se|n|s/.test(t)?r.outerHeight():r.outerWidth();n=["padding",/ne|nw|n/.test(t)?"Top":/se|sw|s/.test(t)?"Bottom":/^e$/.test(t)?"Right":"Left"].join("");e.css(n,i);this._proportionallyResize()}this._handles=this._handles.add(this.handles[t])}};this._renderAxis(this.element);this._handles=this._handles.add(this.element.find(".ui-resizable-handle"));this._handles.disableSelection();this._handles.on("mouseover",function(){if(!s.resizing){if(this.className){o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}s.axis=o&&o[1]?o[1]:"se"}});if(t.autoHide){this._handles.hide();this._addClass("ui-resizable-autohide")}},_removeHandles:function e(){this._handles.remove()},_mouseCapture:function e(t){var r,n,i=false;for(r in this.handles){n=y(this.handles[r])[0];if(n===t.target||y.contains(n,t.target)){i=true}}return!this.options.disabled&&i},_mouseStart:function e(t){var r,n,i,a=this.options,o=this.element;this.resizing=true;this._renderProxy();r=this._num(this.helper.css("left"));n=this._num(this.helper.css("top"));if(a.containment){r+=y(a.containment).scrollLeft()||0;n+=y(a.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:r,top:n};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()};this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()};this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()};this.originalPosition={left:r,top:n};this.originalMousePosition={left:t.pageX,top:t.pageY};this.aspectRatio=typeof a.aspectRatio==="number"?a.aspectRatio:this.originalSize.width/this.originalSize.height||1;i=y(".ui-resizable-"+this.axis).css("cursor");y("body").css("cursor",i==="auto"?this.axis+"-resize":i);this._addClass("ui-resizable-resizing");this._propagate("start",t);return true},_mouseDrag:function e(t){var r,n,i=this.originalMousePosition,a=this.axis,o=t.pageX-i.left||0,s=t.pageY-i.top||0,l=this._change[a];this._updatePrevProperties();if(!l){return false}r=l.apply(this,[t,o,s]);this._updateVirtualBoundaries(t.shiftKey);if(this._aspectRatio||t.shiftKey){r=this._updateRatio(r,t)}r=this._respectSize(r,t);this._updateCache(r);this._propagate("resize",t);n=this._applyChanges();if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize()}if(!y.isEmptyObject(n)){this._updatePrevProperties();this._trigger("resize",t,this.ui());this._applyChanges()}return false},_mouseStop:function e(t){this.resizing=false;var r,n,i,a,o,s,l,u=this.options,c=this;if(this._helper){r=this._proportionallyResizeElements;n=r.length&&/textarea/i.test(r[0].nodeName);i=n&&this._hasScroll(r[0],"left")?0:c.sizeDiff.height;a=n?0:c.sizeDiff.width;o={width:c.helper.width()-a,height:c.helper.height()-i};s=parseFloat(c.element.css("left"))+(c.position.left-c.originalPosition.left)||null;l=parseFloat(c.element.css("top"))+(c.position.top-c.originalPosition.top)||null;if(!u.animate){this.element.css(y.extend(o,{top:l,left:s}))}c.helper.height(c.size.height);c.helper.width(c.size.width);if(this._helper&&!u.animate){this._proportionallyResize()}}y("body").css("cursor","auto");this._removeClass("ui-resizable-resizing");this._propagate("stop",t);if(this._helper){this.helper.remove()}return false},_updatePrevProperties:function e(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function e(){var t={};if(this.position.top!==this.prevPosition.top){t.top=this.position.top+"px"}if(this.position.left!==this.prevPosition.left){t.left=this.position.left+"px"}if(this.size.width!==this.prevSize.width){t.width=this.size.width+"px"}if(this.size.height!==this.prevSize.height){t.height=this.size.height+"px"}this.helper.css(t);return t},_updateVirtualBoundaries:function e(t){var r,n,i,a,o,s=this.options;o={minWidth:this._isNumber(s.minWidth)?s.minWidth:0,maxWidth:this._isNumber(s.maxWidth)?s.maxWidth:Infinity,minHeight:this._isNumber(s.minHeight)?s.minHeight:0,maxHeight:this._isNumber(s.maxHeight)?s.maxHeight:Infinity};if(this._aspectRatio||t){r=o.minHeight*this.aspectRatio;i=o.minWidth/this.aspectRatio;n=o.maxHeight*this.aspectRatio;a=o.maxWidth/this.aspectRatio;if(r>o.minWidth){o.minWidth=r}if(i>o.minHeight){o.minHeight=i}if(n<o.maxWidth){o.maxWidth=n}if(a<o.maxHeight){o.maxHeight=a}}this._vBoundaries=o},_updateCache:function e(t){this.offset=this.helper.offset();if(this._isNumber(t.left)){this.position.left=t.left}if(this._isNumber(t.top)){this.position.top=t.top}if(this._isNumber(t.height)){this.size.height=t.height}if(this._isNumber(t.width)){this.size.width=t.width}},_updateRatio:function e(t){var r=this.position,n=this.size,i=this.axis;if(this._isNumber(t.height)){t.width=t.height*this.aspectRatio}else if(this._isNumber(t.width)){t.height=t.width/this.aspectRatio}if(i==="sw"){t.left=r.left+(n.width-t.width);t.top=null}if(i==="nw"){t.top=r.top+(n.height-t.height);t.left=r.left+(n.width-t.width)}return t},_respectSize:function e(t){var r=this._vBoundaries,n=this.axis,i=this._isNumber(t.width)&&r.maxWidth&&r.maxWidth<t.width,a=this._isNumber(t.height)&&r.maxHeight&&r.maxHeight<t.height,o=this._isNumber(t.width)&&r.minWidth&&r.minWidth>t.width,s=this._isNumber(t.height)&&r.minHeight&&r.minHeight>t.height,l=this.originalPosition.left+this.originalSize.width,u=this.originalPosition.top+this.originalSize.height,c=/sw|nw|w/.test(n),f=/nw|ne|n/.test(n);if(o){t.width=r.minWidth}if(s){t.height=r.minHeight}if(i){t.width=r.maxWidth}if(a){t.height=r.maxHeight}if(o&&c){t.left=l-r.minWidth}if(i&&c){t.left=l-r.maxWidth}if(s&&f){t.top=u-r.minHeight}if(a&&f){t.top=u-r.maxHeight}if(!t.width&&!t.height&&!t.left&&t.top){t.top=null}else if(!t.width&&!t.height&&!t.top&&t.left){t.left=null}return t},_getPaddingPlusBorderDimensions:function e(t){var r=0,n=[],i=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],a=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];for(;r<4;r++){n[r]=parseFloat(i[r])||0;n[r]+=parseFloat(a[r])||0}return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function e(){if(!this._proportionallyResizeElements.length){return}var t,r=0,n=this.helper||this.element;for(;r<this._proportionallyResizeElements.length;r++){t=this._proportionallyResizeElements[r];if(!this.outerDimensions){this.outerDimensions=this._getPaddingPlusBorderDimensions(t)}t.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})}},_renderProxy:function e(){var t=this.element,r=this.options;this.elementOffset=t.offset();if(this._helper){this.helper=this.helper||y("<div style='overflow:hidden;'></div>");this._addClass(this.helper,this._helper);this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++r.zIndex});this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function e(t,r){return{width:this.originalSize.width+r}},w:function e(t,r){var n=this.originalSize,i=this.originalPosition;return{left:i.left+r,width:n.width-r}},n:function e(t,r,n){var i=this.originalSize,a=this.originalPosition;return{top:a.top+n,height:i.height-n}},s:function e(t,r,n){return{height:this.originalSize.height+n}},se:function e(t,r,n){return y.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,r,n]))},sw:function e(t,r,n){return y.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,r,n]))},ne:function e(t,r,n){return y.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,r,n]))},nw:function e(t,r,n){return y.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,r,n]))}},_propagate:function e(t,r){y.ui.plugin.call(this,t,[r,this.ui()]);t!=="resize"&&this._trigger(t,r,this.ui())},plugins:{},ui:function e(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});y.ui.plugin.add("resizable","animate",{stop:function e(r){var n=y(this).resizable("instance"),t=n.options,i=n._proportionallyResizeElements,a=i.length&&/textarea/i.test(i[0].nodeName),o=a&&n._hasScroll(i[0],"left")?0:n.sizeDiff.height,s=a?0:n.sizeDiff.width,l={width:n.size.width-s,height:n.size.height-o},u=parseFloat(n.element.css("left"))+(n.position.left-n.originalPosition.left)||null,c=parseFloat(n.element.css("top"))+(n.position.top-n.originalPosition.top)||null;n.element.animate(y.extend(l,c&&u?{top:c,left:u}:{}),{duration:t.animateDuration,easing:t.animateEasing,step:function e(){var t={width:parseFloat(n.element.css("width")),height:parseFloat(n.element.css("height")),top:parseFloat(n.element.css("top")),left:parseFloat(n.element.css("left"))};if(i&&i.length){y(i[0]).css({width:t.width,height:t.height})}n._updateCache(t);n._propagate("resize",r)}})}});y.ui.plugin.add("resizable","containment",{start:function e(){var r,n,t,i,a,o,s,l=y(this).resizable("instance"),u=l.options,c=l.element,f=u.containment,h=f instanceof y?f.get(0):/parent/.test(f)?c.parent().get(0):f;if(!h){return}l.containerElement=y(h);if(/document/.test(f)||f===document){l.containerOffset={left:0,top:0};l.containerPosition={left:0,top:0};l.parentData={element:y(document),left:0,top:0,width:y(document).width(),height:y(document).height()||document.body.parentNode.scrollHeight}}else{r=y(h);n=[];y(["Top","Right","Left","Bottom"]).each(function(e,t){n[e]=l._num(r.css("padding"+t))});l.containerOffset=r.offset();l.containerPosition=r.position();l.containerSize={height:r.innerHeight()-n[3],width:r.innerWidth()-n[1]};t=l.containerOffset;i=l.containerSize.height;a=l.containerSize.width;o=l._hasScroll(h,"left")?h.scrollWidth:a;s=l._hasScroll(h)?h.scrollHeight:i;l.parentData={element:h,left:t.left,top:t.top,width:o,height:s}}},resize:function e(t){var r,n,i,a,o=y(this).resizable("instance"),s=o.options,l=o.containerOffset,u=o.position,c=o._aspectRatio||t.shiftKey,f={top:0,left:0},h=o.containerElement,d=true;if(h[0]!==document&&/static/.test(h.css("position"))){f=l}if(u.left<(o._helper?l.left:0)){o.size.width=o.size.width+(o._helper?o.position.left-l.left:o.position.left-f.left);if(c){o.size.height=o.size.width/o.aspectRatio;d=false}o.position.left=s.helper?l.left:0}if(u.top<(o._helper?l.top:0)){o.size.height=o.size.height+(o._helper?o.position.top-l.top:o.position.top);if(c){o.size.width=o.size.height*o.aspectRatio;d=false}o.position.top=o._helper?l.top:0}i=o.containerElement.get(0)===o.element.parent().get(0);a=/relative|absolute/.test(o.containerElement.css("position"));if(i&&a){o.offset.left=o.parentData.left+o.position.left;o.offset.top=o.parentData.top+o.position.top}else{o.offset.left=o.element.offset().left;o.offset.top=o.element.offset().top}r=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-f.left:o.offset.left-l.left));n=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-f.top:o.offset.top-l.top));if(r+o.size.width>=o.parentData.width){o.size.width=o.parentData.width-r;if(c){o.size.height=o.size.width/o.aspectRatio;d=false}}if(n+o.size.height>=o.parentData.height){o.size.height=o.parentData.height-n;if(c){o.size.width=o.size.height*o.aspectRatio;d=false}}if(!d){o.position.left=o.prevPosition.left;o.position.top=o.prevPosition.top;o.size.width=o.prevSize.width;o.size.height=o.prevSize.height}},stop:function e(){var t=y(this).resizable("instance"),r=t.options,n=t.containerOffset,i=t.containerPosition,a=t.containerElement,o=y(t.helper),s=o.offset(),l=o.outerWidth()-t.sizeDiff.width,u=o.outerHeight()-t.sizeDiff.height;if(t._helper&&!r.animate&&/relative/.test(a.css("position"))){y(this).css({left:s.left-i.left-n.left,width:l,height:u})}if(t._helper&&!r.animate&&/static/.test(a.css("position"))){y(this).css({left:s.left-i.left-n.left,width:l,height:u})}}});y.ui.plugin.add("resizable","alsoResize",{start:function e(){var t=y(this).resizable("instance"),r=t.options;y(r.alsoResize).each(function(){var e=y(this);e.data("ui-resizable-alsoresize",{width:parseFloat(e.width()),height:parseFloat(e.height()),left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})})},resize:function e(t,r){var n=y(this).resizable("instance"),i=n.options,a=n.originalSize,o=n.originalPosition,s={height:n.size.height-a.height||0,width:n.size.width-a.width||0,top:n.position.top-o.top||0,left:n.position.left-o.left||0};y(i.alsoResize).each(function(){var e=y(this),n=y(this).data("ui-resizable-alsoresize"),i={},t=e.parents(r.originalElement[0]).length?["width","height"]:["width","height","top","left"];y.each(t,function(e,t){var r=(n[t]||0)+(s[t]||0);if(r&&r>=0){i[t]=r||null}});e.css(i)})},stop:function e(){y(this).removeData("ui-resizable-alsoresize")}});y.ui.plugin.add("resizable","ghost",{start:function e(){var t=y(this).resizable("instance"),r=t.size;t.ghost=t.originalElement.clone();t.ghost.css({opacity:.25,display:"block",position:"relative",height:r.height,width:r.width,margin:0,left:0,top:0});t._addClass(t.ghost,"ui-resizable-ghost");if(y.uiBackCompat!==false&&typeof t.options.ghost==="string"){t.ghost.addClass(this.options.ghost)}t.ghost.appendTo(t.helper)},resize:function e(){var t=y(this).resizable("instance");if(t.ghost){t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})}},stop:function e(){var t=y(this).resizable("instance");if(t.ghost&&t.helper){t.helper.get(0).removeChild(t.ghost.get(0))}}});y.ui.plugin.add("resizable","grid",{resize:function e(){var t,r=y(this).resizable("instance"),n=r.options,i=r.size,a=r.originalSize,o=r.originalPosition,s=r.axis,l=typeof n.grid==="number"?[n.grid,n.grid]:n.grid,u=l[0]||1,c=l[1]||1,f=Math.round((i.width-a.width)/u)*u,h=Math.round((i.height-a.height)/c)*c,d=a.width+f,p=a.height+h,v=n.maxWidth&&n.maxWidth<d,g=n.maxHeight&&n.maxHeight<p,m=n.minWidth&&n.minWidth>d,_=n.minHeight&&n.minHeight>p;n.grid=l;if(m){d+=u}if(_){p+=c}if(v){d-=u}if(g){p-=c}if(/^(se|s|e)$/.test(s)){r.size.width=d;r.size.height=p}else if(/^(ne)$/.test(s)){r.size.width=d;r.size.height=p;r.position.top=o.top-h}else if(/^(sw)$/.test(s)){r.size.width=d;r.size.height=p;r.position.left=o.left-f}else{if(p-c<=0||d-u<=0){t=r._getPaddingPlusBorderDimensions(this)}if(p-c>0){r.size.height=p;r.position.top=o.top-h}else{p=c-t.height;r.size.height=p;r.position.top=o.top+a.height-p}if(d-u>0){r.size.width=d;r.position.left=o.left-f}else{d=u-t.width;r.size.width=d;r.position.left=o.left+a.width-d}}}});return y.ui.resizable})},function(t,r,n){var i,a,o;(function(e){if(true){!(a=[n(27),n(117)],i=e,o=typeof i==="function"?i.apply(r,a):i,o!==undefined&&(t.exports=o))}else{}})(function(e){return e.fn.extend({disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function e(){return this.off(".ui-disableSelection")}})})},function(e,t,r){r(539);e.exports="ngAnimate"},function(e,t){
/**
 * @license AngularJS v1.7.5
 * (c) 2010-2018 Google, Inc. http://angularjs.org
 * License: MIT
 */
(function(p,t){"use strict";var m=1;var e=8;var ae="-add";var oe="-remove";var se="ng-";var le="-active";var k="-prepare";var j="ng-animate";var _="$$ngAnimateChildren";var r="",ue,ce,fe,he;if(p.ontransitionend===undefined&&p.onwebkittransitionend!==undefined){r="-webkit-";ue="WebkitTransition";ce="webkitTransitionEnd transitionend"}else{ue="transition";ce="transitionend"}if(p.onanimationend===undefined&&p.onwebkitanimationend!==undefined){r="-webkit-";fe="WebkitAnimation";he="webkitAnimationEnd animationend"}else{fe="animation";he="animationend"}var i="Duration";var de="Property";var n="Delay";var pe="TimingFunction";var a="IterationCount";var o="PlayState";var ve=9999;var s=fe+n;var l=fe+i;var u=ue+n;var c=ue+i;var f=t.$$minErr("ng");function y(e,t,r){if(!e){throw f("areq","Argument '{0}' is {1}",t||"?",r||"required")}return e}function I(e,t){if(!e&&!t)return"";if(!e)return t;if(!t)return e;if(Fe(e))e=e.join(" ");if(Fe(t))t=t.join(" ");return e+" "+t}function ge(e){var t={};if(e&&(e.to||e.from)){t.to=e.to;t.from=e.from}return t}function me(e,r,n){var i="";e=Fe(e)?e:e&&ie(e)&&e.length?e.split(/\s+/):[];$e(e,function(e,t){if(e&&e.length>0){i+=t>0?" ":"";i+=n?r+e:e+r}});return i}function _e(e,t){var r=e.indexOf(t);if(t>=0){e.splice(r,1)}}function z(e){if(e instanceof Ue){switch(e.length){case 0:return e;case 1:if(e[0].nodeType===m){return e}break;default:return Ue(b(e))}}if(e.nodeType===m){return Ue(e)}}function b(e){if(!e[0])return e;for(var t=0;t<e.length;t++){var r=e[t];if(r.nodeType===m){return r}}}function h(t,e,r){$e(e,function(e){t.addClass(e,r)})}function d(t,e,r){$e(e,function(e){t.removeClass(e,r)})}function B(r){return function(e,t){if(t.addClass){h(r,e,t.addClass);t.addClass=null}if(t.removeClass){d(r,e,t.removeClass);t.removeClass=null}}}function ye(e){e=e||{};if(!e.$$prepared){var t=e.domOperation||He;e.domOperation=function(){e.$$domOperationFired=true;t();t=He};e.$$prepared=true}return e}function be(e,t){we(e,t);Se(e,t)}function we(e,t){if(t.from){e.css(t.from);t.from=null}}function Se(e,t){if(t.to){e.css(t.to);t.to=null}}function K(e,t,r){var n=t.options||{};var i=r.options||{};var a=(n.addClass||"")+" "+(i.addClass||"");var o=(n.removeClass||"")+" "+(i.removeClass||"");var s=v(e.attr("class"),a,o);if(i.preparationClasses){n.preparationClasses=C(i.preparationClasses,n.preparationClasses);delete i.preparationClasses}var l=n.domOperation!==He?n.domOperation:null;ee(n,i);if(l){n.domOperation=l}if(s.addClass){n.addClass=s.addClass}else{n.addClass=null}if(s.removeClass){n.removeClass=s.removeClass}else{n.removeClass=null}t.addClass=n.addClass;t.removeClass=n.removeClass;return n}function v(i,e,t){var a=1;var o=-1;var r={};i=n(i);e=n(e);$e(e,function(e,t){r[t]=a});t=n(t);$e(t,function(e,t){r[t]=r[t]===a?null:o});var s={addClass:"",removeClass:""};$e(r,function(e,t){var r,n;if(e===a){r="addClass";n=!i[t]||i[t+oe]}else if(e===o){r="removeClass";n=i[t]||i[t+ae]}if(n){if(s[r].length){s[r]+=" "}s[r]+=t}});function n(e){if(ie(e)){e=e.split(" ")}var t={};$e(e,function(e){if(e.length){t[e]=true}});return t}return s}function Ce(e){return e instanceof Ue?e[0]:e}function X(e,t,r,n){var i="";if(r){i=me(r,se,true)}if(n.addClass){i=C(i,me(n.addClass,ae))}if(n.removeClass){i=C(i,me(n.removeClass,oe))}if(i.length){n.preparationClasses=i;t.addClass(i)}}function Z(e,t){if(t.preparationClasses){e.removeClass(t.preparationClasses);t.preparationClasses=null}if(t.activeClasses){e.removeClass(t.activeClasses);t.activeClasses=null}}function Oe(e,t){var r=t?"-"+t+"s":"";Te(e,[u,r]);return[u,r]}function xe(e,t){var r=t?"paused":"";var n=fe+o;Te(e,[n,r]);return[n,r]}function Te(e,t){var r=t[0];var n=t[1];e.style[r]=n}function C(e,t){if(!e)return t;if(!t)return e;return e+" "+t}var g=["$$rAF",function(r){var n,i;function e(e){n=n.concat(e);a()}n=e.queue=[];e.waitUntilQuiet=function(e){if(i)i();i=r(function(){i=null;e();a()})};return e;function a(){if(!n.length)return;var e=n.shift();for(var t=0;t<e.length;t++){e[t]()}if(!i){r(function(){if(!i)a()})}}}];var w=["$interpolate",function(o){return{link:function e(t,r,n){var i=n.ngAnimateChildren;if(ie(i)&&i.length===0){r.data(_,true)}else{a(o(i)(t));n.$observe("ngAnimateChildren",a)}function a(e){e=e==="on"||e==="true";r.data(_,e)}}}}];var Ee="$$animateCss";var Me=1e3;var Ae=3;var ke=1.5;var S={transitionDuration:c,transitionDelay:u,transitionProperty:ue+de,animationDuration:l,animationDelay:s,animationIterationCount:fe+a};var je={transitionDuration:c,transitionDelay:u,animationDuration:l,animationDelay:s};function Ie(e){return[l,e+"s"]}function De(e,t){var r=t?s:u;return[r,e+"s"]}function O(e,t,r){var i=Object.create(null);var a=e.getComputedStyle(t)||{};$e(r,function(e,t){var r=a[e];if(r){var n=r.charAt(0);if(n==="-"||n==="+"||n>=0){r=x(r)}if(r===0){r=null}i[t]=r}});return i}function x(e){var t=0;var r=e.split(/\s*,\s*/);$e(r,function(e){if(e.charAt(e.length-1)==="s"){e=e.substring(0,e.length-1)}e=parseFloat(e)||0;t=t?Math.max(e,t):e});return t}function Pe(e){return e===0||e!=null}function Re(e,t){var r=ue;var n=e+"s";if(t){r+=i}else{n+=" linear all"}return[r,n]}function Le(t,r,e){$e(e,function(e){t[e]=te(t[e])?t[e]:r.style.getPropertyValue(e)})}var T=["$animateProvider",function(e){this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$animateCache","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function(s,K,X,Z,Q,r,J,t,ee){var te=B(K);function l(e,t,r,n,i){var a=Q.get(r);if(!a){a=O(s,e,i);if(a.animationIterationCount==="infinite"){a.animationIterationCount=1}}var o=n||a.transitionDuration>0||a.animationDuration>0;Q.put(r,a,o);return a}function re(e,t,r,n){var i;var a="stagger-"+r;if(Q.count(r)>0){i=Q.get(a);if(!i){var o=me(t,"-stagger");K.addClass(e,o);i=O(s,e,n);i.animationDuration=Math.max(i.animationDuration,0);i.transitionDuration=Math.max(i.transitionDuration,0);K.removeClass(e,o);Q.put(a,i,true)}}return i||{}}var n=[];function ne(e){n.push(e);t.waitUntilQuiet(function(){Q.flush();var e=r();for(var t=0;t<n.length;t++){n[t](e)}n.length=0})}function ie(e,t,r,n){var i=l(e,t,r,n,S);var a=i.animationDelay;var o=i.transitionDelay;i.maxDelay=a&&o?Math.max(a,o):a||o;i.maxDuration=Math.max(i.animationDuration*i.animationIterationCount,i.transitionDuration);return i}return function e(u,t){var c=t||{};if(!c.$$prepared){c=ye(Ne(c))}var f={};var h=Ce(u);if(!h||!h.parentNode||!ee.enabled()){return q()}var d=[];var r=u.attr("class");var n=ge(c);var p;var i;var a;var o;var s;var v;var g;var m;var _;var y;var b=[];if(c.duration===0||!J.animations&&!J.transitions){return q()}var w=c.event&&Fe(c.event)?c.event.join(" "):c.event;var l=w&&c.structural;var S="";var C="";if(l){S=me(w,se,true)}else if(w){S=w}if(c.addClass){C+=me(c.addClass,ae)}if(c.removeClass){if(C.length){C+=" "}C+=me(c.removeClass,oe)}if(c.applyClassesEarly&&C.length){te(u,c)}var O=[S,C].join(" ").trim();var x=r+" "+O;var T=n.to&&Object.keys(n.to).length>0;var E=(c.keyframeStyle||"").length>0;if(!E&&!T&&!O){return q()}var M,A=Q.cacheKey(h,w,c.addClass,c.removeClass);if(Q.containsCachedAnimationWithoutDuration(A)){O=null;return q()}if(c.stagger>0){var k=parseFloat(c.stagger);M={transitionDelay:k,animationDelay:k,transitionDuration:0,animationDuration:0}}else{M=re(h,O,A,je)}if(!c.$$skipPreparationClasses){K.addClass(u,O)}var j;if(c.transitionStyle){var I=[ue,c.transitionStyle];Te(h,I);d.push(I)}if(c.duration>=0){j=h.style[ue].length>0;var D=Re(c.duration,j);Te(h,D);d.push(D)}if(c.keyframeStyle){var P=[fe,c.keyframeStyle];Te(h,P);d.push(P)}var R=M?c.staggerIndex>=0?c.staggerIndex:Q.count(A):0;var L=R===0;if(L&&!c.skipBlocking){Oe(h,ve)}var N=ie(h,x,A,!l);var $=N.maxDelay;v=Math.max($,0);m=N.maxDuration;var F={};F.hasTransitions=N.transitionDuration>0;F.hasAnimations=N.animationDuration>0;F.hasTransitionAll=F.hasTransitions&&N.transitionProperty==="all";F.applyTransitionDuration=T&&(F.hasTransitions&&!F.hasTransitionAll||F.hasAnimations&&!F.hasTransitions);F.applyAnimationDuration=c.duration&&F.hasAnimations;F.applyTransitionDelay=Pe(c.delay)&&(F.applyTransitionDuration||F.hasTransitions);F.applyAnimationDelay=Pe(c.delay)&&F.hasAnimations;F.recalculateTimingStyles=C.length>0;if(F.applyTransitionDuration||F.applyAnimationDuration){m=c.duration?parseFloat(c.duration):m;if(F.applyTransitionDuration){F.hasTransitions=true;N.transitionDuration=m;j=h.style[ue+de].length>0;d.push(Re(m,j))}if(F.applyAnimationDuration){F.hasAnimations=true;N.animationDuration=m;d.push(Ie(m))}}if(m===0&&!F.recalculateTimingStyles){return q()}var G=me(O,le);if(c.delay!=null){var U;if(typeof c.delay!=="boolean"){U=parseFloat(c.delay);v=Math.max(U,0)}if(F.applyTransitionDelay){d.push(De(U))}if(F.applyAnimationDelay){d.push(De(U,true))}}if(c.duration==null&&N.transitionDuration>0){F.recalculateTimingStyles=F.recalculateTimingStyles||L}g=v*Me;_=m*Me;if(!c.skipBlocking){F.blockTransition=N.transitionDuration>0;F.blockKeyframeAnimation=N.animationDuration>0&&M.animationDelay>0&&M.animationDuration===0}if(c.from){if(c.cleanupStyles){Le(f,h,Object.keys(c.from))}we(u,c)}if(F.blockTransition||F.blockKeyframeAnimation){V(m)}else if(!c.skipBlocking){Oe(h,false)}return{$$willAnimate:true,end:H,start:function e(){if(p)return;s={end:H,cancel:W,resume:null,pause:null};o=new X(s);ne(B);return o}};function H(){Y()}function W(){Y(true)}function Y(e){if(p||a&&i)return;p=true;i=false;if(O&&!c.$$skipPreparationClasses){K.removeClass(u,O)}if(G){K.removeClass(u,G)}xe(h,false);Oe(h,false);$e(d,function(e){h.style[e[0]]=""});te(u,c);be(u,c);if(Object.keys(f).length){$e(f,function(e,t){if(e){h.style.setProperty(t,e)}else{h.style.removeProperty(t)}})}if(c.onDone){c.onDone()}if(b&&b.length){u.off(b.join(" "),z)}var t=u.data(Ee);if(t){Z.cancel(t[0].timer);u.removeData(Ee)}if(o){o.complete(!e)}}function V(e){if(F.blockTransition){Oe(h,e)}if(F.blockKeyframeAnimation){xe(h,!!e)}}function q(){o=new X({end:H,cancel:W});ne(He);Y();return{$$willAnimate:false,start:function e(){return o},end:H}}function z(e){e.stopPropagation();var t=e.originalEvent||e;if(t.target!==h){return}var r=t.$manualTimeStamp||Date.now();var n=parseFloat(t.elapsedTime.toFixed(Ae));if(Math.max(r-y,0)>=g&&n>=m){a=true;Y()}}function B(){if(p)return;if(!h.parentNode){Y();return}var e=function e(t){if(!a){i=!t;if(N.animationDuration){var r=xe(h,i);if(i){d.push(r)}else{_e(d,r)}}}else if(i&&t){i=false;Y()}};var t=R>0&&(N.transitionDuration&&M.transitionDuration===0||N.animationDuration&&M.animationDuration===0)&&Math.max(M.animationDelay,M.transitionDelay);if(t){Z(r,Math.floor(t*R*Me),false)}else{r()}s.resume=function(){e(true)};s.pause=function(){e(false)};function r(){if(p)return;V(false);$e(d,function(e){var t=e[0];var r=e[1];h.style[t]=r});te(u,c);K.addClass(u,G);if(F.recalculateTimingStyles){x=h.getAttribute("class")+" "+O;A=Q.cacheKey(h,w,c.addClass,c.removeClass);N=ie(h,x,A,false);$=N.maxDelay;v=Math.max($,0);m=N.maxDuration;if(m===0){Y();return}F.hasTransitions=N.transitionDuration>0;F.hasAnimations=N.animationDuration>0}if(F.applyAnimationDelay){$=typeof c.delay!=="boolean"&&Pe(c.delay)?parseFloat(c.delay):$;v=Math.max($,0);N.animationDelay=$;U=De($,true);d.push(U);h.style[U[0]]=U[1]}g=v*Me;_=m*Me;if(c.easing){var e,t=c.easing;if(F.hasTransitions){e=ue+pe;d.push([e,t]);h.style[e]=t}if(F.hasAnimations){e=fe+pe;d.push([e,t]);h.style[e]=t}}if(N.transitionDuration){b.push(ce)}if(N.animationDuration){b.push(he)}y=Date.now();var r=g+ke*_;var n=y+r;var i=u.data(Ee)||[];var a=true;if(i.length){var o=i[0];a=n>o.expectedEndTime;if(a){Z.cancel(o.timer)}else{i.push(Y)}}if(a){var s=Z(l,r,false);i[0]={timer:s,expectedEndTime:n};i.push(Y);u.data(Ee,i)}if(b.length){u.on(b.join(" "),z)}if(c.to){if(c.cleanupStyles){Le(f,h,Object.keys(c.to))}Se(u,c)}}function l(){var e=u.data(Ee);if(e){for(var t=1;t<e.length;t++){e[t]()}u.removeData(Ee)}}}}}]}];var E=["$$animationProvider",function(e){e.drivers.push("$$animateCssDriver");var y="ng-animate-shim";var b="ng-anchor";var w="ng-anchor-out";var S="ng-anchor-in";function s(e){return e.parentNode&&e.parentNode.nodeType===11}this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function(d,e,p,t,r,n,i){if(!r.animations&&!r.transitions)return He;var v=i[0].body;var a=Ce(t);var g=Ue(s(a)||v.contains(a)?a:v);return function e(t){return t.from&&t.to?o(t.from,t.to,t.classes,t.anchors):u(t)};function m(e){return e.replace(/\bng-\S+\b/g,"")}function _(e,t){if(ie(e))e=e.split(" ");if(ie(t))t=t.split(" ");return e.filter(function(e){return t.indexOf(e)===-1}).join(" ")}function l(e,t,i){var a=Ue(Ce(t).cloneNode(true));var o=m(c(a));t.addClass(y);i.addClass(y);a.addClass(b);g.append(a);var s,r=n();if(!r){s=f();if(!s){return h()}}var l=r||s;return{start:function e(){var t;var r=l.start();r.done(function(){r=null;if(!s){s=f();if(s){r=s.start();r.done(function(){r=null;h();t.complete()});return r}}h();t.complete()});t=new p({end:n,cancel:n});return t;function n(){if(r){r.end()}}}};function u(e){var r={};var n=Ce(e).getBoundingClientRect();$e(["width","height","top","left"],function(e){var t=n[e];switch(e){case"top":t+=v.scrollTop;break;case"left":t+=v.scrollLeft;break}r[e]=Math.floor(t)+"px"});return r}function n(){var e=d(a,{addClass:w,delay:true,from:u(t)});return e.$$willAnimate?e:null}function c(e){return e.attr("class")||""}function f(){var e=m(c(i));var t=_(e,o);var r=_(o,e);var n=d(a,{to:u(i),addClass:S+" "+t,removeClass:w+" "+r,delay:true});return n.$$willAnimate?n:null}function h(){a.remove();t.removeClass(y);i.removeClass(y)}}function o(e,t,i,r){var a=u(e,He);var o=u(t,He);var s=[];$e(r,function(e){var t=e["out"];var r=e["in"];var n=l(i,t,r);if(n){s.push(n)}});if(!a&&!o&&s.length===0)return;return{start:function e(){var t=[];if(a){t.push(a.start())}if(o){t.push(o.start())}$e(s,function(e){t.push(e.start())});var r=new p({end:n,cancel:n});p.all(t,function(e){r.complete(e)});return r;function n(){$e(t,function(e){e.end()})}}}}function u(e){var t=e.element;var r=e.options||{};if(e.structural){r.event=e.event;r.structural=true;r.applyClassesEarly=true;if(e.event==="leave"){r.onDone=r.domOperation}}if(r.preparationClasses){r.event=C(r.event,r.preparationClasses)}var n=d(t,r);return n.$$willAnimate?n:null}}]}];var M=["$animateProvider",function(s){this.$get=["$injector","$$AnimateRunner","$$jqLite",function(o,_,e){var y=B(e);return function(e,t,r,n){var a=false;if(arguments.length===3&&ne(r)){n=r;r=null}n=ye(n);if(!r){r=e.attr("class")||"";if(n.addClass){r+=" "+n.addClass}if(n.removeClass){r+=" "+n.removeClass}}var s=n.addClass;var l=n.removeClass;var i=b(r);var o,u;if(i.length){var c,f;if(t==="leave"){f="leave";c="afterLeave"}else{f="before"+t.charAt(0).toUpperCase()+t.substr(1);c=t}if(t!=="enter"&&t!=="move"){o=m(e,t,n,i,f)}u=m(e,t,n,i,c)}if(!o&&!u)return;function h(){n.domOperation();y(e,n)}function d(){a=true;h();be(e,n)}var p;return{$$willAnimate:true,end:function e(){if(p){p.end()}else{d();p=new _;p.complete(true)}return p},start:function e(){if(p){return p}p=new _;var t;var r=[];if(o){r.push(function(e){t=o(e)})}if(r.length){r.push(function(e){h();e(true)})}else{h()}if(u){r.push(function(e){t=u(e)})}p.setHost({end:function e(){i()},cancel:function e(){i(true)}});_.chain(r,n);return p;function n(e){d(e);p.complete(e)}function i(e){if(!a){(t||He)(e);n(e)}}}};function v(e,t,r,n,i){var a;switch(r){case"animate":a=[t,n.from,n.to,i];break;case"setClass":a=[t,s,l,i];break;case"addClass":a=[t,s,i];break;case"removeClass":a=[t,l,i];break;default:a=[t,i];break}a.push(n);var o=e.apply(e,a);if(o){if(N(o.start)){o=o.start()}if(o instanceof _){o.done(i)}else if(N(o)){return o}}return He}function g(o,s,l,e,r){var n=[];$e(e,function(e){var t=e[r];if(!t)return;n.push(function(){var r;var n;var i=false;var a=function e(t){if(!i){i=true;(n||He)(t);r.complete(!t)}};r=new _({end:function e(){a()},cancel:function e(){a(true)}});n=v(t,o,s,l,function(e){var t=e===false;a(t)});return r})});return n}function m(e,t,r,n,i){var a=g(e,t,r,n,i);if(a.length===0){var o,s;if(i==="beforeSetClass"){o=g(e,"removeClass",r,n,"beforeRemoveClass");s=g(e,"addClass",r,n,"beforeAddClass")}else if(i==="setClass"){o=g(e,"removeClass",r,n,"removeClass");s=g(e,"addClass",r,n,"addClass")}if(o){a=a.concat(o)}if(s){a=a.concat(s)}}if(a.length===0)return;return function e(t){var r=[];if(a.length){$e(a,function(e){r.push(e())})}if(r.length){_.all(r,t)}else{t()}return function e(t){$e(r,function(e){if(t){e.cancel()}else{e.end()}})}}}};function b(e){e=Fe(e)?e:e.split(" ");var t=[],r={};for(var n=0;n<e.length;n++){var i=e[n],a=s.$$registeredAnimations[i];if(a&&!r[i]){t.push(o.get(a));r[i]=true}}return t}}]}];var A=["$$animationProvider",function(e){e.drivers.push("$$animateJsDriver");this.$get=["$$animateJs","$$AnimateRunner",function(a,s){return function e(t){if(t.from&&t.to){var a=r(t.from);var o=r(t.to);if(!a&&!o)return;return{start:function e(){var t=[];if(a){t.push(a.start())}if(o){t.push(o.start())}s.all(t,i);var r=new s({end:n(),cancel:n()});return r;function n(){return function(){$e(t,function(e){e.end()})}}function i(e){r.complete(e)}}}}else{return r(t)}};function r(e){var t=e.element;var r=e.event;var n=e.options;var i=e.classes;return a(t,r,i,n)}}]}];var Q="data-ng-animate";var J="$ngAnimatePin";var D=["$animateProvider",function(d){var H=1;var W=2;var n=" ";var i=this.rules={skip:[],cancel:[],join:[]};function Y(e){return{addClass:e.addClass,removeClass:e.removeClass,from:e.from,to:e.to}}function a(e){if(!e){return null}var t=e.split(n);var r=Object.create(null);$e(t,function(e){r[e]=true});return r}function o(e,t){if(e&&t){var r=a(t);return e.split(n).some(function(e){return r[e]})}}function V(e,t,r){return i[e].some(function(e){return e(t,r)})}function q(e,t){var r=(e.addClass||"").length>0;var n=(e.removeClass||"").length>0;return t?r&&n:r||n}i.join.push(function(e,t){return!e.structural&&q(e)});i.skip.push(function(e,t){return!e.structural&&!q(e)});i.skip.push(function(e,t){return t.event==="leave"&&e.structural});i.skip.push(function(e,t){return t.structural&&t.state===W&&!e.structural});i.cancel.push(function(e,t){return t.structural&&e.structural});i.cancel.push(function(e,t){return t.state===W&&e.structural});i.cancel.push(function(e,t){if(t.structural)return false;var r=e.addClass;var n=e.removeClass;var i=t.addClass;var a=t.removeClass;if(Ge(r)&&Ge(n)||Ge(i)&&Ge(a)){return false}return o(r,a)||o(n,i)});this.$get=["$$rAF","$rootScope","$rootElement","$document","$$Map","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow","$$isDocumentHidden",function(S,C,v,g,e,O,x,t,T,r,E){var M=new e;var A=new e;var k=null;function o(e){A.delete(e.target)}function j(){var t=false;return function(e){if(t){e()}else{C.$$postDigest(function(){t=true;e()})}}}var n=C.$watch(function(){return t.totalPendingRequests===0},function(e){if(!e)return;n();C.$$postDigest(function(){C.$$postDigest(function(){if(k===null){k=true}})})});var s=Object.create(null);var i=d.customFilter();var a=d.classNameFilter();var l=function e(){return true};var I=i||l;var D=!a?l:function(e,t){var r=[e.getAttribute("class"),t.addClass,t.removeClass].join(" ");return a.test(r)};var P=B(T);function R(e,t){return K(e,t,{})}var u=p.Node.prototype.contains||function(e){return this===e||!!(this.compareDocumentPosition(e)&16)};function L(t,r,n){var i=[];var e=s[n];if(e){$e(e,function(e){if(u.call(e.node,r)){i.push(e.callback)}else if(n==="leave"&&u.call(e.node,t)){i.push(e.callback)}})}return i}function c(e,t,r){var n=b(t);return e.filter(function(e){var t=e.node===n&&(!r||e.callback===r);return!t})}function N(e,t){if(e==="close"&&!t.parentNode){f.off(t)}}var f={on:function e(t,r,n){var i=b(r);s[t]=s[t]||[];s[t].push({node:i,callback:n});Ue(r).on("$destroy",function(){var e=M.get(i);if(!e){f.off(t,r,n)}})},off:function e(t,r,n){if(arguments.length===1&&!ie(arguments[0])){r=arguments[0];for(var i in s){s[i]=c(s[i],r)}return}var a=s[t];if(!a)return;s[t]=arguments.length===1?null:c(a,r,n)},pin:function e(t,r){y(re(t),"element","not an element");y(re(r),"parentElement","not an element");t.data(J,r)},push:function e(t,r,n,i){n=n||{};n.domOperation=i;return h(t,r,n)},enabled:function e(t,r){var n=arguments.length;if(n===0){r=!!k}else{var i=re(t);if(!i){r=k=!!t}else{var a=Ce(t);if(n===1){r=!A.get(a)}else{if(!A.has(a)){Ue(t).on("$destroy",o)}A.set(a,!r)}}}return r}};return f;function h(a,o,e){var s=Ne(e);var l=z(a);var u=Ce(l);var i=u&&u.parentNode;s=ye(s);var c=new x;var f=j();if(Fe(s.addClass)){s.addClass=s.addClass.join(" ")}if(s.addClass&&!ie(s.addClass)){s.addClass=null}if(Fe(s.removeClass)){s.removeClass=s.removeClass.join(" ")}if(s.removeClass&&!ie(s.removeClass)){s.removeClass=null}if(s.from&&!ne(s.from)){s.from=null}if(s.to&&!ne(s.to)){s.to=null}if(!k||!u||!I(u,o,e)||!D(u,s)){w();return c}var h=["enter","move","leave"].indexOf(o)>=0;var t=E();var r=t||A.get(u);var n=!r&&M.get(u)||{};var d=!!n.state;if(!r&&(!d||n.state!==H)){r=!G(u,i,o)}if(r){if(t)b(c,o,"start",Y(s));w();if(t)b(c,o,"close",Y(s));return c}if(h){$(u)}var p={structural:h,element:l,event:o,addClass:s.addClass,removeClass:s.removeClass,close:w,options:s,runner:c};if(d){var v=V("skip",p,n);if(v){if(n.state===W){w();return c}else{K(l,n,p);return n.runner}}var g=V("cancel",p,n);if(g){if(n.state===W){n.runner.end()}else if(n.structural){n.close()}else{K(l,n,p);return n.runner}}else{var m=V("join",p,n);if(m){if(n.state===W){R(l,p)}else{X(T,l,h?o:null,s);o=p.event=n.event;s=K(l,n,p);return n.runner}}}}else{R(l,p)}var _=p.structural;if(!_){_=p.event==="animate"&&Object.keys(p.options.to||{}).length>0||q(p)}if(!_){w();F(u);return c}var y=(n.counter||0)+1;p.counter=y;U(u,H,p);C.$$postDigest(function(){l=z(a);var e=M.get(u);var t=!e;e=e||{};var r=l.parent()||[];var n=r.length>0&&(e.event==="animate"||e.structural||q(e));if(t||e.counter!==y||!n){if(t){P(l,s);be(l,s)}if(t||h&&e.event!==o){s.domOperation();c.end()}if(!n){F(u)}return}o=!e.structural&&q(e,true)?"setClass":e.event;U(u,W);var i=O(l,o,e.options);c.setHost(i);b(c,o,"start",Y(s));i.done(function(e){w(!e);var t=M.get(u);if(t&&t.counter===y){F(u)}b(c,o,"close",Y(s))})});return c;function b(e,t,r,n){f(function(){var e=L(i,u,t);if(e.length){S(function(){$e(e,function(e){e(l,r,n)});N(r,u)})}else{N(r,u)}});e.progress(t,r,n)}function w(e){Z(l,s);P(l,s);be(l,s);s.domOperation();c.complete(!e)}}function $(e){var t=e.querySelectorAll("["+Q+"]");$e(t,function(e){var t=parseInt(e.getAttribute(Q),10);var r=M.get(e);if(r){switch(t){case W:r.runner.end();case H:M.delete(e);break}}})}function F(e){e.removeAttribute(Q);M.delete(e)}function G(e,t,r){var n=g[0].body;var i=Ce(v);var a=e===n||e.nodeName==="HTML";var o=e===i;var s=false;var l=A.get(e);var u;var c=Ue.data(e,J);if(c){t=Ce(c)}while(t){if(!o){o=t===i}if(t.nodeType!==m){break}var f=M.get(t)||{};if(!s){var h=A.get(t);if(h===true&&l!==false){l=true;break}else if(h===false){l=false}s=f.structural}if(Ge(u)||u===true){var d=Ue.data(t,_);if(te(d)){u=d}}if(s&&u===false)break;if(!a){a=t===n}if(a&&o){break}if(!o){c=Ue.data(t,J);if(c){t=Ce(c);continue}}t=t.parentNode}var p=(!s||u)&&l!==true;return p&&o&&a}function U(e,t,r){r=r||{};r.state=t;e.setAttribute(Q,t);var n=M.get(e);var i=n?ee(n,r):r;M.set(e,i)}}]}];var P=function e(){var l="$$ngAnimateParentKey";var u=0;var i=Object.create(null);this.$get=[function(){return{cacheKey:function e(t,r,n,i){var a=t.parentNode;var o=a[l]||(a[l]=++u);var s=[o,r,t.getAttribute("class")];if(n){s.push(n)}if(i){s.push(i)}return s.join(" ")},containsCachedAnimationWithoutDuration:function e(t){var r=i[t];return r&&!r.isValid||false},flush:function e(){i=Object.create(null)},count:function e(t){var r=i[t];return r?r.total:0},get:function e(t){var r=i[t];return r&&r.value},put:function e(t,r,n){if(!i[t]){i[t]={total:1,value:r,isValid:n}}else{i[t].total++;i[t].value=r}}}}]};var R=["$animateProvider",function(e){var O="ng-animate-ref";var x=this.drivers=[];var r="$$animationRunner";var T="$$animatePrepareClasses";function E(e,t){e.data(r,t)}function M(e){e.removeData(r)}function A(e){return e.data(r)}this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$Map","$$rAFScheduler","$$animateCache",function(v,g,m,_,s,y,b){var w=[];var S=B(v);function C(e){var i={children:[]};var t,a=new s;for(t=0;t<e.length;t++){var r=e[t];a.set(r.domNode,e[t]={domNode:r.domNode,element:r.element,fn:r.fn,children:[]})}for(t=0;t<e.length;t++){o(e[t])}return n(i);function o(e){if(e.processed)return e;e.processed=true;var t=e.domNode;var r=t.parentNode;a.set(t,e);var n;while(r){n=a.get(r);if(n){if(!n.processed){n=o(n)}break}r=r.parentNode}(n||i).children.push(e);return e}function n(e){var t=[];var r=[];var n;for(n=0;n<e.children.length;n++){r.push(e.children[n])}var i=r.length;var a=0;var o=[];for(n=0;n<r.length;n++){var s=r[n];if(i<=0){i=a;a=0;t.push(o);o=[]}o.push(s);s.children.forEach(function(e){a++;r.push(e)});i--}if(o.length){t.push(o)}return t}}return function(t,r,c){c=ye(c);var e=["enter","move","leave"].indexOf(r)>=0;var n=new _({end:function e(){l()},cancel:function e(){l(true)}});if(!x.length){l();return n}var i=I(t.attr("class"),I(c.addClass,c.removeClass));var a=c.tempClasses;if(a){i+=" "+a;c.tempClasses=null}if(e){t.data(T,"ng-"+r+k)}E(t,n);w.push({element:t,classes:i,event:r,structural:e,options:c,beforeStart:o,close:l});t.on("$destroy",s);if(w.length>1)return n;g.$$postDigest(function(){var t=[];$e(w,function(e){if(A(e.element)){t.push(e)}else{e.close()}});w.length=0;var e=f(t);var r=[];$e(e,function(o){var e=o.from?o.from.element:o.element;var t=c.addClass;t=(t?t+" ":"")+j;var s=b.cacheKey(e[0],o.event,t,c.removeClass);r.push({element:e,domNode:Ce(e),fn:function e(){var t,r=o.close;if(b.containsCachedAnimationWithoutDuration(s)){r();return}o.beforeStart();var n=o.anchors?o.from.element||o.to.element:o.element;if(A(n)){var i=h(o);if(i){t=i.start}}if(!t){r()}else{var a=t();a.done(function(e){r(!e)});d(o,a)}}})});var n=C(r);for(var i=0;i<n.length;i++){var a=n[i];for(var o=0;o<a.length;o++){var s=a[o];var l=s.element;n[i][o]=s.fn;if(i===0){l.removeData(T);continue}var u=l.data(T);if(u){v.addClass(l,u)}}}y(n)});return n;function u(e){var t="["+O+"]";var r=e.hasAttribute(O)?[e]:e.querySelectorAll(t);var n=[];$e(r,function(e){var t=e.getAttribute(O);if(t&&t.length){n.push(e)}});return n}function f(c){var f=[];var l={};$e(c,function(e,r){var t=e.element;var n=Ce(t);var i=e.event;var a=["enter","move"].indexOf(i)>=0;var o=e.structural?u(n):[];if(o.length){var s=a?"to":"from";$e(o,function(e){var t=e.getAttribute(O);l[t]=l[t]||{};l[t][s]={animationID:r,element:Ue(e)}})}else{f.push(e)}});var h={};var d={};$e(l,function(e,t){var r=e.from;var n=e.to;if(!r||!n){var i=r?r.animationID:n.animationID;var a=i.toString();if(!h[a]){h[a]=true;f.push(c[i])}return}var o=c[r.animationID];var s=c[n.animationID];var l=r.animationID.toString();if(!d[l]){var u=d[l]={structural:true,beforeStart:function e(){o.beforeStart();s.beforeStart()},close:function e(){o.close();s.close()},classes:p(o.classes,s.classes),from:o,to:s,anchors:[]};if(u.classes.length){f.push(u)}else{f.push(o);f.push(s)}}d[l].anchors.push({out:r.element,in:n.element})});return f}function p(e,t){e=e.split(" ");t=t.split(" ");var r=[];for(var n=0;n<e.length;n++){var i=e[n];if(i.substring(0,3)==="ng-")continue;for(var a=0;a<t.length;a++){if(i===t[a]){r.push(i);break}}}return r.join(" ")}function h(e){for(var t=x.length-1;t>=0;t--){var r=x[t];var n=m.get(r);var i=n(e);if(i){return i}}}function o(){a=(a?a+" ":"")+j;v.addClass(t,a);var e=t.data(T);if(e){v.removeClass(t,e);e=null}}function d(e,r){if(e.from&&e.to){t(e.from.element);t(e.to.element)}else{t(e.element)}function t(e){var t=A(e);if(t)t.setHost(r)}}function s(){var e=A(t);if(e&&(r!=="leave"||!c.$$domOperationFired)){e.end()}}function l(e){t.off("$destroy",s);M(t);S(t,c);be(t,c);c.domOperation();if(a){v.removeClass(t,a)}n.complete(!e)}}}]}];var L=["$animate",function(l){return{restrict:"A",transclude:"element",terminal:true,priority:600,link:function e(t,r,n,i,a){var o,s;t.$watchCollection(n.ngAnimateSwap||n["for"],function(e){if(o){l.leave(o)}if(s){s.$destroy();s=null}if(e||e===0){a(function(e,t){o=e;s=t;l.enter(e,null,r)})}})}}}];var Ne;var ee;var $e;var Fe;var te;var re;var N;var ne;var ie;var Ge;var Ue;var He;t.module("ngAnimate",[],function e(){He=t.noop;Ne=t.copy;ee=t.extend;Ue=t.element;$e=t.forEach;Fe=t.isArray;ie=t.isString;ne=t.isObject;Ge=t.isUndefined;te=t.isDefined;N=t.isFunction;re=t.isElement}).info({angularVersion:"1.7.5"}).directive("ngAnimateSwap",L).directive("ngAnimateChildren",w).factory("$$rAFScheduler",g).provider("$$animateQueue",D).provider("$$animateCache",P).provider("$$animation",R).provider("$animateCss",T).provider("$$animateCssDriver",E).provider("$$animateJs",M).provider("$$animateJsDriver",A)})(window,window.angular)},function(e,t,r){r(541);e.exports="ngTouch"},function(e,t){
/**
 * @license AngularJS v1.7.5
 * (c) 2010-2018 Google, Inc. http://angularjs.org
 * License: MIT
 */
(function(e,g){"use strict";var t=g.module("ngTouch",[]);t.info({angularVersion:"1.7.5"});function r(e){return g.$$lowercase(e.nodeName||e[0]&&e[0].nodeName)}t.factory("$swipe",[function(){var c=10;var i={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup",cancel:"pointercancel"}};function f(e){var t=e.originalEvent||e;var r=t.touches&&t.touches.length?t.touches:[t];var n=t.changedTouches&&t.changedTouches[0]||r[0];return{x:n.clientX,y:n.clientY}}function h(e,r){var n=[];g.forEach(e,function(e){var t=i[e][r];if(t){n.push(t)}});return n.join(" ")}return{bind:function e(t,r,n){var i,a;var o;var s;var l=false;n=n||["mouse","touch","pointer"];t.on(h(n,"start"),function(e){o=f(e);l=true;i=0;a=0;s=o;if(r["start"]){r["start"](o,e)}});var u=h(n,"cancel");if(u){t.on(u,function(e){l=false;if(r["cancel"]){r["cancel"](e)}})}t.on(h(n,"move"),function(e){if(!l)return;if(!o)return;var t=f(e);i+=Math.abs(t.x-s.x);a+=Math.abs(t.y-s.y);s=t;if(i<c&&a<c){return}if(a>i){l=false;if(r["cancel"]){r["cancel"](e)}return}else{e.preventDefault();if(r["move"]){r["move"](t,e)}}});t.on(h(n,"end"),function(e){if(!l)return;l=false;if(r["end"]){r["end"](f(e),e)}})}}}]);function n(d,p,v){t.directive(d,["$parse","$swipe",function(r,u){var c=75;var f=.3;var h=30;return function(n,i,e){var a=r(e[d]);var o,s;function l(e){if(!o)return false;var t=Math.abs(e.y-o.y);var r=(e.x-o.x)*p;return s&&t<c&&r>0&&r>h&&t/r<f}var t=["touch"];if(!g.isDefined(e["ngSwipeDisableMouse"])){t.push("mouse")}u.bind(i,{start:function e(t,r){o=t;s=true},cancel:function e(t){s=false},end:function e(t,r){if(l(t)){n.$apply(function(){i.triggerHandler(v);a(n,{$event:r})})}}},t)}}])}n("ngSwipeLeft",-1,"swipeleft");n("ngSwipeRight",1,"swiperight")})(window,window.angular)},function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj){__p+='<div\n  class="gmf-displayquerywindow"\n  ng-class="{\'desktop\': ctrl.desktop, \'mobile\': !ctrl.desktop}"\n  ng-show="ctrl.open"\n  ngeo-swipe-up="ctrl.collapsed = false"\n  ngeo-swipe-down="ctrl.collapsed = true"\n  ngeo-swipe-disable-mouse\n  ng-swipe-disable-mouse\n  ng-swipe-left="ctrl.next()"\n  ng-swipe-right="ctrl.previous()">\n\n  <button\n    class="collapse-button"\n    type="button"\n    ng-show="::!ctrl.desktop"\n    ng-click="ctrl.collapsed = !ctrl.collapsed"\n    ng-class="[ctrl.collapsed ? \'collapse-button-up\' : \'collapse-button-down\']">\n  </button>\n\n  <div class="windowcontainer">\n\n    <button\n      type="button"\n      class="btn fa-times close"\n      ng-click="ctrl.close()">\n    </button>\n\n    <div\n      class="animation-container"\n      ng-class="[ctrl.collapsed ? \'\' : \'animation-container-detailed\', ctrl.isNext ? \'next\' : \'previous\']">\n\n      <div\n        ng-animate-swap="ctrl.animate"\n        class="slide-animation gmf-animatable">\n\n        <div class="header">\n          <p\n            class="title"\n            >{{ctrl.source.label | translate}}</p>\n          <p\n            class="subtitle"\n            >{{ctrl.getFeatureValues()[ctrl.source.identifierAttributeField]}}</p>\n        </div>\n\n        <div class="details">\n          <table>\n            <tr\n              ng-repeat="(key, value) in ctrl.getFeatureValues()"\n              ng-if="value !== undefined">\n              <td\n                class="details-key"\n                ng-bind-html="key | translate | ngeoTrustHtml"\n                ></td>\n              <td\n                class="details-value"\n                ng-bind-html="value | ngeoTrustHtmlAuto"\n                ></td>\n            </tr>\n          </table>\n        </div>\n      </div>\n    </div>\n\n    <div class="navigate">\n\n      <div class="placeholder">\n        <button\n          type="button"\n          class="previous btn"\n          ng-disabled="ctrl.isFirst()"\n          ng-show="ctrl.getResultLength() > 1"\n          ng-click="ctrl.previous()">\n          <span ng-show="::ctrl.desktop">{{\'Prev.\' | translate}}</span>\n        </button>\n      </div>\n\n      <div class="results">\n        <span ng-show="::!ctrl.desktop">{{\'Result\' | translate}}</span>\n        <span>{{ctrl.currentResult + 1}}</span>\n        <span>/</span>\n        <span>{{ctrl.getResultLength()}}</span>\n        <div\n          ng-show="::ctrl.desktop"\n          class="dropup">\n\n          <button\n            type="button"\n            class="btn btn-default dropdown-toggle"\n            data-toggle="dropdown"\n            aria-expanded="false">\n            <span class="fa fa-filter"></span>\n          </button>\n\n          <ul\n            class="dropdown-menu dropdown-menu-right"\n            role="menu">\n\n            <li>\n              <a\n                href="#"\n                ng-click="ctrl.setSelectedSource(null)">\n                <i\n                  class="fa fa-fw"\n                  ng-class="{\'fa-check\': ctrl.selectedSource === null}">\n                </i>\n                <span>{{\'All layers\' | translate}} ({{ctrl.ngeoQueryResult.total}})</span>\n              </a>\n            </li>\n\n            <li\n              role="separator"\n              class="divider">\n            </li>\n\n            <li\n              ng-repeat-start="source in ctrl.ngeoQueryResult.sources | filter: ctrl.sourcesFilter" ng-repeat-end\n              ng-class="{\'disabled\': source.features.length <= 0}">\n              <a\n                href="#"\n                ng-click="ctrl.setSelectedSource(source)">\n                <i\n                  class="fa fa-fw"\n                  ng-class="{\'fa-check\': ctrl.selectedSource === source}">\n                </i>\n                <span>{{source.label | translate}} ({{source.features.length}})</span>\n              </a>\n            </li>\n          </ul>\n        </div>\n      </div>\n\n      <div class="placeholder">\n        <button\n          type="button"\n          class="next btn"\n          ng-disabled="ctrl.isLast()"\n          ng-show="ctrl.getResultLength() > 1"\n          ng-click="ctrl.next()">\n          <span ng-show="::ctrl.desktop">{{\'Next\' | translate}}</span>\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n'}return __p}},,,,function(t,r,n){var i,a,o;(function(e){if(true){!(a=[n(27),n(117)],i=e,o=typeof i==="function"?i.apply(r,a):i,o!==undefined&&(t.exports=o))}else{}})(function(T){(function(){var a,S=Math.max,C=Math.abs,n=/left|center|right/,i=/top|center|bottom/,o=/[\+\-]\d+(\.[\d]+)?%?/,s=/^\w+/,l=/%$/,t=T.fn.position;function O(e,t,r){return[parseFloat(e[0])*(l.test(e[0])?t/100:1),parseFloat(e[1])*(l.test(e[1])?r/100:1)]}function x(e,t){return parseInt(T.css(e,t),10)||0}function r(e){var t=e[0];if(t.nodeType===9){return{width:e.width(),height:e.height(),offset:{top:0,left:0}}}if(T.isWindow(t)){return{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}}if(t.preventDefault){return{width:0,height:0,offset:{top:t.pageY,left:t.pageX}}}return{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}T.position={scrollbarWidth:function e(){if(a!==undefined){return a}var t,r,n=T("<div "+"style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'>"+"<div style='height:100px;width:auto;'></div></div>"),i=n.children()[0];T("body").append(n);t=i.offsetWidth;n.css("overflow","scroll");r=i.offsetWidth;if(t===r){r=n[0].clientWidth}n.remove();return a=t-r},getScrollInfo:function e(t){var r=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),n=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),i=r==="scroll"||r==="auto"&&t.width<t.element[0].scrollWidth,a=n==="scroll"||n==="auto"&&t.height<t.element[0].scrollHeight;return{width:a?T.position.scrollbarWidth():0,height:i?T.position.scrollbarWidth():0}},getWithinInfo:function e(t){var r=T(t||window),n=T.isWindow(r[0]),i=!!r[0]&&r[0].nodeType===9,a=!n&&!i;return{element:r,isWindow:n,isDocument:i,offset:a?T(t).offset():{left:0,top:0},scrollLeft:r.scrollLeft(),scrollTop:r.scrollTop(),width:r.outerWidth(),height:r.outerHeight()}}};T.fn.position=function(f){if(!f||!f.of){return t.apply(this,arguments)}f=T.extend({},f);var h,d,p,v,g,e,m=T(f.of),_=T.position.getWithinInfo(f.within),y=T.position.getScrollInfo(_),b=(f.collision||"flip").split(" "),w={};e=r(m);if(m[0].preventDefault){f.at="left top"}d=e.width;p=e.height;v=e.offset;g=T.extend({},v);T.each(["my","at"],function(){var e=(f[this]||"").split(" "),t,r;if(e.length===1){e=n.test(e[0])?e.concat(["center"]):i.test(e[0])?["center"].concat(e):["center","center"]}e[0]=n.test(e[0])?e[0]:"center";e[1]=i.test(e[1])?e[1]:"center";t=o.exec(e[0]);r=o.exec(e[1]);w[this]=[t?t[0]:0,r?r[0]:0];f[this]=[s.exec(e[0])[0],s.exec(e[1])[0]]});if(b.length===1){b[1]=b[0]}if(f.at[0]==="right"){g.left+=d}else if(f.at[0]==="center"){g.left+=d/2}if(f.at[1]==="bottom"){g.top+=p}else if(f.at[1]==="center"){g.top+=p/2}h=O(w.at,d,p);g.left+=h[0];g.top+=h[1];return this.each(function(){var r,e,s=T(this),l=s.outerWidth(),u=s.outerHeight(),t=x(this,"marginLeft"),n=x(this,"marginTop"),i=l+t+x(this,"marginRight")+y.width,a=u+n+x(this,"marginBottom")+y.height,c=T.extend({},g),o=O(w.my,s.outerWidth(),s.outerHeight());if(f.my[0]==="right"){c.left-=l}else if(f.my[0]==="center"){c.left-=l/2}if(f.my[1]==="bottom"){c.top-=u}else if(f.my[1]==="center"){c.top-=u/2}c.left+=o[0];c.top+=o[1];r={marginLeft:t,marginTop:n};T.each(["left","top"],function(e,t){if(T.ui.position[b[e]]){T.ui.position[b[e]][t](c,{targetWidth:d,targetHeight:p,elemWidth:l,elemHeight:u,collisionPosition:r,collisionWidth:i,collisionHeight:a,offset:[h[0]+o[0],h[1]+o[1]],my:f.my,at:f.at,within:_,elem:s})}});if(f.using){e=function e(t){var r=v.left-c.left,n=r+d-l,i=v.top-c.top,a=i+p-u,o={target:{element:m,left:v.left,top:v.top,width:d,height:p},element:{element:s,left:c.left,top:c.top,width:l,height:u},horizontal:n<0?"left":r>0?"right":"center",vertical:a<0?"top":i>0?"bottom":"middle"};if(d<l&&C(r+n)<d){o.horizontal="center"}if(p<u&&C(i+a)<p){o.vertical="middle"}if(S(C(r),C(n))>S(C(i),C(a))){o.important="horizontal"}else{o.important="vertical"}f.using.call(this,t,o)}}s.offset(T.extend(c,{using:e}))})};T.ui.position={fit:{left:function e(t,r){var n=r.within,i=n.isWindow?n.scrollLeft:n.offset.left,a=n.width,o=t.left-r.collisionPosition.marginLeft,s=i-o,l=o+r.collisionWidth-a-i,u;if(r.collisionWidth>a){if(s>0&&l<=0){u=t.left+s+r.collisionWidth-a-i;t.left+=s-u}else if(l>0&&s<=0){t.left=i}else{if(s>l){t.left=i+a-r.collisionWidth}else{t.left=i}}}else if(s>0){t.left+=s}else if(l>0){t.left-=l}else{t.left=S(t.left-o,t.left)}},top:function e(t,r){var n=r.within,i=n.isWindow?n.scrollTop:n.offset.top,a=r.within.height,o=t.top-r.collisionPosition.marginTop,s=i-o,l=o+r.collisionHeight-a-i,u;if(r.collisionHeight>a){if(s>0&&l<=0){u=t.top+s+r.collisionHeight-a-i;t.top+=s-u}else if(l>0&&s<=0){t.top=i}else{if(s>l){t.top=i+a-r.collisionHeight}else{t.top=i}}}else if(s>0){t.top+=s}else if(l>0){t.top-=l}else{t.top=S(t.top-o,t.top)}}},flip:{left:function e(t,r){var n=r.within,i=n.offset.left+n.scrollLeft,a=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,s=t.left-r.collisionPosition.marginLeft,l=s-o,u=s+r.collisionWidth-a-o,c=r.my[0]==="left"?-r.elemWidth:r.my[0]==="right"?r.elemWidth:0,f=r.at[0]==="left"?r.targetWidth:r.at[0]==="right"?-r.targetWidth:0,h=-2*r.offset[0],d,p;if(l<0){d=t.left+c+f+h+r.collisionWidth-a-i;if(d<0||d<C(l)){t.left+=c+f+h}}else if(u>0){p=t.left-r.collisionPosition.marginLeft+c+f+h-o;if(p>0||C(p)<u){t.left+=c+f+h}}},top:function e(t,r){var n=r.within,i=n.offset.top+n.scrollTop,a=n.height,o=n.isWindow?n.scrollTop:n.offset.top,s=t.top-r.collisionPosition.marginTop,l=s-o,u=s+r.collisionHeight-a-o,e=r.my[1]==="top",c=e?-r.elemHeight:r.my[1]==="bottom"?r.elemHeight:0,f=r.at[1]==="top"?r.targetHeight:r.at[1]==="bottom"?-r.targetHeight:0,h=-2*r.offset[1],d,p;if(l<0){p=t.top+c+f+h+r.collisionHeight-a-i;if(p<0||p<C(l)){t.top+=c+f+h}}else if(u>0){d=t.top-r.collisionPosition.marginTop+c+f+h-o;if(d>0||C(d)<u){t.top+=c+f+h}}}},flipfit:{left:function e(){T.ui.position.flip.left.apply(this,arguments);T.ui.position.fit.left.apply(this,arguments)},top:function e(){T.ui.position.flip.top.apply(this,arguments);T.ui.position.fit.top.apply(this,arguments)}}}})();return T.ui.position})},function(t,r,n){var i,a,o;(function(e){if(true){!(a=[n(27),n(117)],i=e,o=typeof i==="function"?i.apply(r,a):i,o!==undefined&&(t.exports=o))}else{}})(function(t){return t.fn.extend({uniqueId:function(){var e=0;return function(){return this.each(function(){if(!this.id){this.id="ui-id-"+ ++e}})}}(),removeUniqueId:function e(){return this.each(function(){if(/^ui-id-\d+$/.test(this.id)){t(this).removeAttr("id")}})}})})}]]);
//# sourceMappingURL=commons.e226be.js.map